/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[3130],{19027:(re,W,s)=>{s.d(W,{O:()=>w});var m=s(15861),i=s(17626),N=s(84792),K=s(10699),Z=s(21726),F=s(10349),D=s(77712),J=(s(85931),s(90912),s(68653)),$=s(76898),h=s(2004),B=s(65234),A=s(13812);const w=V=>{let O=class extends V{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(I,d){const E=d.capabilities&&d.capabilities.split(",").map(p=>p.toLowerCase().trim());if(!E)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const c=this.type,n=E.includes("data"),u=E.includes("query"),y=E.includes("map"),g=!!d.exportTilesAllowed,S=E.includes("tilemap"),P="tile"!==c&&!!d.supportsDynamicLayers,l="tile"!==c&&(!d.tileInfo||P),j="tile"!==c&&(!d.tileInfo||P),T="tile"!==c,M=d.cimVersion&&F.G.parse(d.cimVersion),x=M?.since(1,4)??!1,C=M?.since(2,0)??!1;return{operations:{supportsExportMap:y,supportsExportTiles:g,supportsIdentify:u,supportsQuery:n,supportsTileMap:S},exportMap:y?{supportsArcadeExpressionForLabeling:x,supportsSublayersChanges:T,supportsDynamicLayers:P,supportsSublayerVisibility:l,supportsSublayerDefinitionExpression:j,supportsCIMSymbols:C}:null,exportTiles:g?{maxExportTilesCount:+d.maxExportTilesCount}:null}}readVersion(I,d){let E=d.currentVersion;return E||(E=d.hasOwnProperty("capabilities")||d.hasOwnProperty("tables")?10:d.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),E}fetchSublayerInfo(I,d){var E=this;return(0,m.Z)(function*(){return yield E.fetchAllLayersAndTables(d),E._allLayersAndTablesMap?.get(I)})()}fetchAllLayersAndTables(I){var d=this;return(0,m.Z)(function*(){yield d.load(I),d._allLayersAndTablesPromise||(d._allLayersAndTablesPromise=(0,N.default)((0,Z.mN)(d.url).path+"/layers",{responseType:"json",query:{f:"json",...d.customParameters,token:d.apiKey}}).then(c=>{d._allLayersAndTablesMap=new Map;for(const n of c.data.layers)d._allLayersAndTablesMap.set(n.id,n);return{result:c.data}},c=>({error:c})));const E=yield d._allLayersAndTablesPromise;if((0,K.k_)(I),"result"in E)return E.result;throw E.error})()}};return(0,i._)([(0,D.Cb)({readOnly:!0})],O.prototype,"capabilities",void 0),(0,i._)([(0,J.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],O.prototype,"readCapabilities",null),(0,i._)([(0,D.Cb)({json:{read:{source:"copyrightText"}}})],O.prototype,"copyright",void 0),(0,i._)([(0,D.Cb)({type:h.Z})],O.prototype,"fullExtent",void 0),(0,i._)([(0,D.Cb)(A.id)],O.prototype,"id",void 0),(0,i._)([(0,D.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],O.prototype,"legendEnabled",void 0),(0,i._)([(0,D.Cb)(A.C_)],O.prototype,"popupEnabled",void 0),(0,i._)([(0,D.Cb)({type:B.Z})],O.prototype,"spatialReference",void 0),(0,i._)([(0,D.Cb)({readOnly:!0})],O.prototype,"version",void 0),(0,i._)([(0,J.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],O.prototype,"readVersion",null),O=(0,i._)([(0,$.j)("esri.layers.mixins.ArcGISMapService")],O),O}},66120:(re,W,s)=>{s.d(W,{x:()=>d});var m=s(17626),i=s(46160),N=s(46882),K=s(26584),Z=s(63290),F=s(32917),D=s(77712),X=(s(85931),s(52323)),$=(s(90912),s(76898)),h=s(31283),B=s(39058),A=s(13410);const w=Z.Z.getLogger("esri.layers.TileLayer"),O=i.Z.ofType(B.Z);function I(E,c){E&&E.forEach(n=>{c(n),n.sublayers&&n.sublayers.length&&I(n.sublayers,c)})}const d=E=>{let c=class extends E{constructor(...n){super(...n),this.allSublayers=new N.Z({getCollections:()=>[this.sublayers],getChildrenFunction:u=>u.sublayers}),this.sublayersSourceJSON={[h.s3.SERVICE]:{},[h.s3.PORTAL_ITEM]:{},[h.s3.WEB_SCENE]:{},[h.s3.WEB_MAP]:{}},this.addHandles((0,F.YP)(()=>this.sublayers,(u,y)=>this._handleSublayersChange(u,y),F.Z_))}readSublayers(n,u){if(!u||!n)return;const{sublayersSourceJSON:y}=this,g=(0,h.M9)(u.origin);if(g<h.s3.SERVICE||(y[g]={context:u,visibleLayers:n.visibleLayers||y[g].visibleLayers,layers:n.layers||y[g].layers},g>h.s3.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:S,origin:P}=this.createSublayersForOrigin("web-document"),l=(0,X.vw)(this);l.setDefaultOrigin(P),this._set("sublayers",new O(S)),l.setDefaultOrigin("user")}findSublayerById(n){return this.allSublayers.find(u=>u.id===n)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(n){const u=(0,h.M9)("web-document"===n?"web-map":n);let y=h.s3.SERVICE,g=this.sublayersSourceJSON[h.s3.SERVICE].layers,S=this.sublayersSourceJSON[h.s3.SERVICE].context,P=null;const l=[h.s3.PORTAL_ITEM,h.s3.WEB_SCENE,h.s3.WEB_MAP].filter(p=>p<=u);for(const p of l){const _=this.sublayersSourceJSON[p];(0,A.ac)(_.layers)&&(y=p,g=_.layers,S=_.context,_.visibleLayers&&(P={visibleLayers:_.visibleLayers,context:_.context}))}const j=[h.s3.PORTAL_ITEM,h.s3.WEB_SCENE,h.s3.WEB_MAP].filter(p=>p>y&&p<=u);let T=null;for(const p of j){const{layers:_,visibleLayers:G,context:Q}=this.sublayersSourceJSON[p];_&&(T={layers:_,context:Q}),G&&(P={visibleLayers:G,context:Q})}const M=function V(E,c){const n=[],u={};return E&&E.forEach(y=>{const g=new B.Z;if(g.read(y,c),u[g.id]=g,null!=y.parentLayerId&&-1!==y.parentLayerId){const S=u[y.parentLayerId];S.sublayers||(S.sublayers=[]),S.sublayers.unshift(g)}else n.unshift(g)}),n}(g,S),x=new Map,C=new Set;if(T)for(const p of T.layers)x.set(p.id,p);if(P)for(const p of P.visibleLayers)C.add(p);return I(M,p=>{T&&p.read(x.get(p.id),T.context),P&&p.read({defaultVisibility:C.has(p.id)},P.context)}),{origin:(0,h.x3)(y),sublayers:new O({items:M})}}read(n,u){super.read(n,u),this.readSublayers(n,u)}_handleSublayersChange(n,u){u&&(u.forEach(y=>{y.parent=null,y.layer=null}),this.handles.remove("sublayers-owner")),n&&(n.forEach(y=>{y.parent=this,y.layer=this}),this.handles.add([n.on("after-add",({item:y})=>{y.parent=this,y.layer=this}),n.on("after-remove",({item:y})=>{y.parent=null,y.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(n.on("before-changes",y=>{w.error(new K.Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),y.preventDefault()}),"sublayers-owner"))}};return(0,m._)([(0,D.Cb)({readOnly:!0})],c.prototype,"allSublayers",void 0),(0,m._)([(0,D.Cb)({readOnly:!0,type:i.Z.ofType(B.Z)})],c.prototype,"serviceSublayers",void 0),(0,m._)([(0,D.Cb)({value:null,type:O,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],c.prototype,"sublayers",void 0),(0,m._)([(0,D.Cb)({readOnly:!0})],c.prototype,"sublayersSourceJSON",void 0),c=(0,m._)([(0,$.j)("esri.layers.mixins.SublayersOwner")],c),c}},39058:(re,W,s)=>{s.d(W,{Z:()=>ce});var z,m=s(15861),i=s(17626),K=(s(29132),s(73281)),A=(s(4832),s(49067),s(96794),s(69747),s(40425),s(69357),s(40342),s(73640),s(33474),s(32088)),w=s(84792),V=s(20383),O=s(46160),I=s(26584),d=s(80542),E=s(61996),c=s(58817),n=s(47996),u=s(63290),y=s(62208),g=s(99959),S=s(95737),P=s(21726),l=s(77712),j=s(52323),T=s(66656),M=s(68653),x=s(76898),C=s(99433),p=s(90912),_=s(31283),G=s(38305),Q=s(41638),ae=s(36255),le=s(60466),ne=s(170),ye=s(62667),de=s(2430),se=s(15283),Y=s(48370),ie=s(96854),_e=s(49430),pe=s(2004),k=s(71774);function q(e){return e&&"esriSMS"===e.type}function ee(e,r,t){const a=this.originIdOf(r)>=(0,_.M9)(t.origin);return{ignoreOrigin:!0,allowNull:a,enabled:!!t&&"map-image"===t.layer?.type&&(t.writeSublayerStructure||a)}}function oe(e,r,t){return{enabled:!!t&&"tile"===t.layer?.type&&this._isOverridden(r)}}function L(e,r,t){return{ignoreOrigin:!0,enabled:t&&t.writeSublayerStructure||!1}}function H(e,r,t){return{ignoreOrigin:!0,enabled:!!t&&(t.writeSublayerStructure||this.originIdOf(r)>=(0,_.M9)(t.origin))}}let ue=0;const R=new Set;R.add("layer"),R.add("parent"),R.add("loaded"),R.add("loadStatus"),R.add("loadError"),R.add("loadWarnings");let o=z=class extends((0,d.p)((0,g.R)((0,E.IG)(n.Z)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}load(e){var r=this;return(0,m.Z)(function*(){return r.addResolvingPromise((0,m.Z)(function*(){if(!r.layer&&!r.url)throw new I.Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});let t=null;if(!r.layer||r.originIdOf("url")>_.s3.SERVICE||"data-layer"===r.source?.type)t=(yield(0,w.default)(r.url,{responseType:"json",query:{f:"json"},...e})).data;else{let a=r.id;"map-layer"===r.source?.type&&(a=r.source.mapLayerId),t=yield r.layer.fetchSublayerInfo(a,e)}t&&(r.sourceJSON=t,r.read({layerDefinition:t},{origin:"service"}))})()),r})()}readCapabilities(e,r){const t=(e=(r=r.layerDefinition||r).capabilities||e)?e.toLowerCase().split(",").map(b=>b.trim()):[],a=this.url?(0,G.Qc)(this.url):null,f=t.includes((0,y.pC)(a)&&"MapServer"===a.serverType?"data":"query");return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:f}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new le.Z(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields)for(const t of r.fields)if("esriFieldTypeGlobalID"===t.type)return t.name}get id(){return this._get("id")??ue++}set id(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,r,t,a){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map(f=>f.write({},a))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(r=>r.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}readObjectIdFieldFromService(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields)for(const t of r.fields)if("esriFieldTypeOID"===t.type)return t.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,r){const t=r.layerDefinition;return 1-.01*(null!=t.transparency?t.transparency:t.drawingInfo.transparency)}writeOpacity(e,r,t,a){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,r){r.parentLayerId=this.parent&&this.parent!==this.layer?(0,p.vU)(this.parent.id):-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const r of e.getSymbols())if((0,V.dU)(r)){u.Z.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Y.R({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return(0,p.se)(O.Z.ofType(z),e)}writeSublayers(e,r,t){this.get("sublayers.length")&&(r[t]=this.sublayers.map(a=>a.id).toArray().reverse())}readTypeIdField(e,r){let t=(r=r.layerDefinition||r).typeIdField;if(t&&r.fields){t=t.toLowerCase();const a=r.fields.find(f=>f.name.toLowerCase()===t);a&&(t=a.name)}return t}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,r=this.source;if(!e)return null;if(this._lastParsedUrl=e,"map-layer"===r?.type)return`${e.path}/${r.mapLayerId}`;const t={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${(0,P.B7)(t)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,r,t,a){r[t]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=(0,j.vw)(this),r=new z;return(0,j.vw)(r).store=e.clone(R),this.commitProperty("url"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return(0,_e.eZ)(this,e)}createQuery(){return new ie.Z({returnGeometry:!0,where:this.definitionExpression||"1=1"})}createFeatureLayer(){var e=this;return(0,m.Z)(function*(){if(e.hasOwnProperty("sublayers"))return null;const r=e.layer?.parsedUrl,t=new((yield Promise.resolve().then(s.bind(s,80415))).default)({url:r.path});return r&&e.source&&("map-layer"===e.source.type?t.layerId=e.source.mapLayerId:t.dynamicDataSource=e.source),null!=e.layer.refreshInterval&&(t.refreshInterval=e.layer.refreshInterval),e.definitionExpression&&(t.definitionExpression=e.definitionExpression),e.floorInfo&&(t.floorInfo=(0,c.d9)(e.floorInfo)),e.originIdOf("labelingInfo")>_.s3.SERVICE&&(t.labelingInfo=(0,c.d9)(e.labelingInfo)),e.originIdOf("labelsVisible")>_.s3.DEFAULTS&&(t.labelsVisible=e.labelsVisible),e.originIdOf("legendEnabled")>_.s3.DEFAULTS&&(t.legendEnabled=e.legendEnabled),e.originIdOf("visible")>_.s3.DEFAULTS&&(t.visible=e.visible),e.originIdOf("minScale")>_.s3.DEFAULTS&&(t.minScale=e.minScale),e.originIdOf("maxScale")>_.s3.DEFAULTS&&(t.maxScale=e.maxScale),e.originIdOf("opacity")>_.s3.DEFAULTS&&(t.opacity=e.opacity),e.originIdOf("popupTemplate")>_.s3.DEFAULTS&&(t.popupTemplate=(0,c.d9)(e.popupTemplate)),e.originIdOf("renderer")>_.s3.SERVICE&&(t.renderer=(0,c.d9)(e.renderer)),"data-layer"===e.source?.type&&(t.dynamicDataSource=e.source.clone()),e.originIdOf("title")>_.s3.DEFAULTS&&(t.title=e.title),"map-image"===e.layer.type&&e.layer.originIdOf("customParameters")>_.s3.DEFAULTS&&(t.customParameters=e.layer.customParameters),"tile"===e.layer.type&&e.layer.originIdOf("customParameters")>_.s3.DEFAULTS&&(t.customParameters=e.layer.customParameters),t})()}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:r,types:t}=this;if(!r||!e)return null;const a=e.attributes?e.attributes[r]:void 0;if(null==a)return null;let f=null;return t.some(b=>{const{id:v}=b;return null!=v&&(v.toString()===a.toString()&&(f=b),!!f)}),f}getFieldDomain(e,r){const a=this.getFeatureType(r&&r.feature);if(a){const f=a.domains&&a.domains[e];if(f&&"inherited"!==f.type)return f}return this._getLayerDomain(e)}queryFeatures(e=this.createQuery(),r){var t=this;return(0,m.Z)(function*(){if(yield t.load(),!t.capabilities?.operations?.supportsQuery)throw new I.Z("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:a},{default:f}]=yield Promise.all([Promise.resolve().then(s.bind(s,20477)),Promise.resolve().then(s.bind(s,17253))]),b=yield a(t.url,ie.Z.from(e),t.layer?.spatialReference??null,{...r,query:{...t.layer?.customParameters,token:t.layer?.apiKey}}),v=f.fromJSON(b.data);if(v?.features)for(const U of v.features)U.sourceLayer=t;return v})()}toExportImageJSON(e){const r={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},t=(0,S._)(e,this.definitionExpression);(0,y.pC)(t)&&(r.definitionExpression=t);const a=["renderer","labelingInfo","opacity","labelsVisible"].reduce((b,v)=>(b[v]=this.originIdOf(v),b),{});if(Object.keys(a).some(b=>a[b]>_.s3.SERVICE)){const b=r.drawingInfo={};if(a.renderer>_.s3.SERVICE&&(b.renderer=this.renderer?this.renderer.toJSON():null),a.labelsVisible>_.s3.SERVICE&&(b.showLabels=this.labelsVisible),this.labelsVisible&&a.labelingInfo>_.s3.SERVICE){!this.loaded&&this.labelingInfo.some(U=>!U.labelPlacement)&&u.Z.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let v=this.labelingInfo;(0,y.pC)(this.geometryType)&&(v=(0,ye.a)(this.labelingInfo,k.Mk.toJSON(this.geometryType))),b.labelingInfo=v.filter(U=>U.labelPlacement).map(U=>U.toJSON({origin:"service",layer:this.layer})),b.showLabels=!0}a.opacity>_.s3.SERVICE&&(b.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(b.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,r=>{r.color||"esriSMSX"!==r.style&&"esriSMSCross"!==r.style||(r.color=r.outline&&r.outline.color?r.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,r){if(e){const t="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const a of t)q(a.symbol)&&r(a.symbol);"symbol"in e&&q(e.symbol)&&r(e.symbol),"defaultSymbol"in e&&q(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const t=this.layer,a=this._get(e);let f,b;switch(e){case"definitionExpression":case"floorInfo":f="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":f="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":f="supportsDynamicLayers",b="supportsModification"}const v=(0,j.vw)(this).getDefaultOrigin();if("service"!==v){if(f&&!1===this.get(`layer.capabilities.exportMap.${f}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${f}'`);if(b&&!1===this.get(`capabilities.exportMap.${b}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${b}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,r),"service"!==v&&a!==r&&t&&t.emit&&t.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,r){r&&(r.forEach(t=>{t.parent=null,t.layer=null}),this.handles.removeAll()),e&&(e.forEach(t=>{t.parent=this,t.layer=this.layer}),this.handles.add([e.on("after-add",({item:t})=>{t.parent=this,t.layer=this.layer}),e.on("after-remove",({item:t})=>{t.parent=null,t.layer=null}),e.on("before-changes",t=>{const a=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==a||a||(u.Z.getLogger(this.declaredClass).error(new I.Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),t.preventDefault())})]))}_logLockedError(e,r){u.Z.getLogger(this.declaredClass).error(new I.Z("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:r,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};o.test={isMapImageLayerOverridePolicy:e=>e===L||e===ee,isTileImageLayerOverridePolicy:e=>e===oe},(0,i._)([(0,l.Cb)({readOnly:!0})],o.prototype,"capabilities",void 0),(0,i._)([(0,M.r)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],o.prototype,"readCapabilities",null),(0,i._)([(0,l.Cb)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:ee}}})],o.prototype,"definitionExpression",null),(0,i._)([(0,l.Cb)({type:[ae.Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],o.prototype,"fields",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],o.prototype,"fieldsIndex",null),(0,i._)([(0,l.Cb)({type:de.Z,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:ee},origins:{"web-scene":{read:!1,write:!1}}}})],o.prototype,"floorInfo",null),(0,i._)([(0,l.Cb)({type:pe.Z,json:{read:{source:"layerDefinition.extent"}}})],o.prototype,"fullExtent",void 0),(0,i._)([(0,l.Cb)({type:k.Mk.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:k.Mk.read}}}}})],o.prototype,"geometryType",void 0),(0,i._)([(0,l.Cb)({type:String})],o.prototype,"globalIdField",void 0),(0,i._)([(0,M.r)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],o.prototype,"readGlobalIdFieldFromService",null),(0,i._)([(0,l.Cb)({type:p.z8,json:{write:{ignoreOrigin:!0}}})],o.prototype,"id",null),(0,i._)([(0,l.Cb)({value:null,type:[ne.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:L}}})],o.prototype,"labelingInfo",null),(0,i._)([(0,C.c)("labelingInfo")],o.prototype,"writeLabelingInfo",null),(0,i._)([(0,l.Cb)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:L}}})],o.prototype,"labelsVisible",null),(0,i._)([(0,l.Cb)({value:null})],o.prototype,"layer",null),(0,i._)([(0,l.Cb)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:H}}})],o.prototype,"legendEnabled",void 0),(0,i._)([(0,l.Cb)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],o.prototype,"listMode",null),(0,i._)([(0,l.Cb)({type:Number,value:0,json:{write:{overridePolicy:L}}})],o.prototype,"minScale",null),(0,i._)([(0,M.r)("minScale",["minScale","layerDefinition.minScale"])],o.prototype,"readMinScale",null),(0,i._)([(0,l.Cb)({type:Number,value:0,json:{write:{overridePolicy:L}}})],o.prototype,"maxScale",null),(0,i._)([(0,M.r)("maxScale",["maxScale","layerDefinition.maxScale"])],o.prototype,"readMaxScale",null),(0,i._)([(0,l.Cb)({readOnly:!0})],o.prototype,"effectiveScaleRange",null),(0,i._)([(0,l.Cb)({type:String})],o.prototype,"objectIdField",void 0),(0,i._)([(0,M.r)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],o.prototype,"readObjectIdFieldFromService",null),(0,i._)([(0,l.Cb)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:L}}})],o.prototype,"opacity",null),(0,i._)([(0,M.r)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],o.prototype,"readOpacity",null),(0,i._)([(0,C.c)("opacity")],o.prototype,"writeOpacity",null),(0,i._)([(0,l.Cb)({json:{type:p.z8,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:L}}})],o.prototype,"parent",void 0),(0,i._)([(0,C.c)("parent")],o.prototype,"writeParent",null),(0,i._)([(0,l.Cb)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,r)=>!r.disablePopup},write:{target:"disablePopup",overridePolicy:H,writer(e,r,t){r[t]=!e}}}})],o.prototype,"popupEnabled",void 0),(0,i._)([(0,l.Cb)({type:K.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:H}}})],o.prototype,"popupTemplate",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],o.prototype,"defaultPopupTemplate",null),(0,i._)([(0,l.Cb)({types:A.A,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:L},origins:{"web-scene":{types:A.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:L}}}}})],o.prototype,"renderer",null),(0,i._)([(0,l.Cb)({types:{key:"type",base:null,typeMap:{"data-layer":se.n,"map-layer":Y.R}},cast(e){if(e){if("mapLayerId"in e)return(0,p.TJ)(Y.R,e);if("dataSource"in e)return(0,p.TJ)(se.n,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:L}}})],o.prototype,"source",null),(0,i._)([(0,l.Cb)()],o.prototype,"sourceJSON",void 0),(0,i._)([(0,l.Cb)({value:null,json:{type:[p.z8],write:{target:"subLayerIds",allowNull:!0,overridePolicy:L}}})],o.prototype,"sublayers",null),(0,i._)([(0,T.p)("sublayers")],o.prototype,"castSublayers",null),(0,i._)([(0,C.c)("sublayers")],o.prototype,"writeSublayers",null),(0,i._)([(0,l.Cb)({type:String,json:{name:"name",write:{overridePolicy:H}}})],o.prototype,"title",void 0),(0,i._)([(0,l.Cb)({type:String})],o.prototype,"typeIdField",void 0),(0,i._)([(0,M.r)("typeIdField",["layerDefinition.typeIdField"])],o.prototype,"readTypeIdField",null),(0,i._)([(0,l.Cb)({type:[Q.Z],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],o.prototype,"types",void 0),(0,i._)([(0,l.Cb)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:oe}}})],o.prototype,"url",null),(0,i._)([(0,l.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:L}}})],o.prototype,"visible",null),(0,i._)([(0,C.c)("visible")],o.prototype,"writeVisible",null),o=z=(0,i._)([(0,x.j)("esri.layers.support.Sublayer")],o);const ce=o}}]);