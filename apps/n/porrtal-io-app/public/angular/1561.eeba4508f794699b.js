"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[1561],{14259:(K,j,i)=>{i.d(j,{q:()=>A});var p,W,L={exports:{}};p=L,void 0!==(W=function(){function T(o,_,u,a,c){for(;a>u;){if(a-u>600){var d=a-u+1,E=_-u+1,g=Math.log(d),v=.5*Math.exp(2*g/3),h=.5*Math.sqrt(g*v*(d-v)/d)*(E-d/2<0?-1:1);T(o,_,Math.max(u,Math.floor(_-E*v/d+h)),Math.min(a,Math.floor(_+(d-E)*v/d+h)),c)}var y=o[_],D=u,s=a;for(R(o,u,_),c(o[a],y)>0&&R(o,u,a);D<s;){for(R(o,D,s),D++,s--;c(o[D],y)<0;)D++;for(;c(o[s],y)>0;)s--}0===c(o[u],y)?R(o,u,s):R(o,++s,a),s<=_&&(u=s+1),_<=s&&(a=s-1)}}function R(o,_,u){var a=o[_];o[_]=o[u],o[u]=a}function P(o,_){return o<_?-1:o>_?1:0}return function I(o,_,u,a,c){T(o,_,u||0,a||o.length-1,c||P)}}())&&(p.exports=W);const A=L.exports},77044:(K,j,i)=>{i.d(j,{Y:()=>W});var p=i(62208);function m(o,_){return o?_?4:3:_?3:2}function W(o,_,u,a,c){if((0,p.Wi)(_)||!_.lengths.length)return null;const d="upperLeft"===c?.originPosition?-1:1;o.lengths.length&&(o.lengths.length=0),o.coords.length&&(o.coords.length=0);const E=o.coords,g=[],v=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:h,coords:y}=_,D=m(u,a);let s=0;for(const r of h){const l=L(v,y,s,r,u,a,d);l&&g.push(l),s+=r*D}if(g.sort((r,l)=>{let f=d*r[2]-d*l[2];return 0===f&&u&&(f=r[4]-l[4]),f}),g.length){let r=6*g[0][2];E[0]=g[0][0]/r,E[1]=g[0][1]/r,u&&(r=6*g[0][4],E[2]=0!==r?g[0][3]/r:0),(E[0]<v[0]||E[0]>v[1]||E[1]<v[2]||E[1]>v[3]||u&&(E[2]<v[4]||E[2]>v[5]))&&(E.length=0)}if(!E.length){const r=_.lengths[0]?function A(o,_,u,a,c){const d=m(a,c);let E=_,g=_+d,v=0,h=0,y=0,D=0;for(let s=0,r=u-1;s<r;s++,E+=d,g+=d){const l=o[E],f=o[E+1],O=o[E+2],b=o[g],M=o[g+1],C=o[g+2],U=a?T(l,f,O,b,M,C):I(l,f,b,M);if(U)if(v+=U,a){const B=P(l,f,O,b,M,C);h+=U*B[0],y+=U*B[1],D+=U*B[2]}else{const B=R(l,f,b,M);h+=U*B[0],y+=U*B[1]}}return v>0?a?[h/v,y/v,D/v]:[h/v,y/v]:u>0?a?[o[_],o[_+1],o[_+2]]:[o[_],o[_+1]]:null}(y,0,h[0],u,a):null;if(!r)return null;E[0]=r[0],E[1]=r[1],u&&r.length>2&&(E[2]=r[2])}return o}function L(o,_,u,a,c,d,E=1){const g=m(c,d);let v=u,h=u+g,y=0,D=0,s=0,r=0,l=0;for(let O=0,b=a-1;O<b;O++,v+=g,h+=g){const M=_[v],C=_[v+1],U=_[v+2],B=_[h],N=_[h+1],x=_[h+2];let S=M*N-B*C;r+=S,y+=(M+B)*S,D+=(C+N)*S,c&&(S=M*x-B*U,s+=(U+x)*S,l+=S),M<o[0]&&(o[0]=M),M>o[1]&&(o[1]=M),C<o[2]&&(o[2]=C),C>o[3]&&(o[3]=C),c&&(U<o[4]&&(o[4]=U),U>o[5]&&(o[5]=U))}if(r*E>0&&(r*=-1),l*E>0&&(l*=-1),!r)return null;const f=[y,D,.5*r];return c&&(f[3]=s,f[4]=.5*l),f}function I(o,_,u,a){const c=u-o,d=a-_;return Math.sqrt(c*c+d*d)}function T(o,_,u,a,c,d){const E=a-o,g=c-_,v=d-u;return Math.sqrt(E*E+g*g+v*v)}function R(o,_,u,a){return[o+.5*(u-o),_+.5*(a-_)]}function P(o,_,u,a,c,d){return[o+.5*(a-o),_+.5*(c-_),u+.5*(d-u)]}},60507:(K,j,i)=>{i.d(j,{BK:()=>D,Jn:()=>T,RL:()=>P,VW:()=>I,W_:()=>v,jG:()=>h,tq:()=>E,vQ:()=>a,zx:()=>c});var p=i(62208),m=i(29505);function W(s){return s?h:y}function I(s,r){return function L(s,r){return(0,p.Wi)(r)||!r.mode?W(s).mode:r.mode}(!!(0,p.pC)(s)&&s.hasZ,r)}function T(s,r){return function A(s,r){return(0,p.pC)(r)?r:W(s)}(!!(0,p.pC)(s)&&s.hasZ,r)}function P(s){const r=function _(s){return s.layer&&"elevationInfo"in s.layer?s.layer.elevationInfo:null}(s),l=I(s.geometry,r);return{mode:l,offset:(0,p.pC)(r)&&"on-the-ground"!==l?(0,p.Pt)(r.offset,0)*(0,m.Z7)((0,p.Pt)(r.unit,"meters")):0}}function a(s,r,l,f=null){return d(s,r.x,r.y,r.hasZ?r.z:0,r.spatialReference,l,f)}function c(s,r,l,f,O=null){return d(s,r[0],r[1],r.length>2?r[2]:0,l,f,O)}function d(s,r,l,f,O,b,M=null){if((0,p.Wi)(b))return;const C=(0,p.pC)(M)?M.mode:"absolute-height";if("on-the-ground"===C)return 0;const{absoluteZ:U}=E(r,l,f,O,s,b);return function g(s,r,l,f,O,b,M,C){const U=(0,p.pC)(M)&&(0,p.pC)(M.offset)?M.offset:0;switch(C){case"absolute-height":return s-U;case"relative-to-ground":return s-((0,p.Pt)(b.elevationProvider.getElevation(r,l,f,O,"ground"),0)+U);case"relative-to-scene":return s-((0,p.Pt)(b.elevationProvider.getElevation(r,l,f,O,"scene"),0)+U)}}(U,r,l,f,O,s,M,C)}function E(s,r,l,f,O,b){const M=(0,p.pC)(b.offset)?b.offset:0;switch(b.mode){case"absolute-height":return{absoluteZ:l+M,elevation:0};case"on-the-ground":{const C=(0,p.Pt)(O.elevationProvider.getElevation(s,r,0,f,"ground"),0);return{absoluteZ:C,elevation:C}}case"relative-to-ground":{const C=(0,p.Pt)(O.elevationProvider.getElevation(s,r,l,f,"ground"),0);return{absoluteZ:l+C+M,elevation:C}}case"relative-to-scene":{const C=(0,p.Pt)(O.elevationProvider.getElevation(s,r,l,f,"scene"),0);return{absoluteZ:l+C+M,elevation:C}}}}function v(s,r){if((0,p.Wi)(r))return!1;const{mode:l}=r;return(0,p.pC)(l)&&("scene"===s&&"relative-to-scene"===l||"ground"===s&&"absolute-height"!==l)}const h={mode:"absolute-height",offset:0},y={mode:"on-the-ground",offset:null};function D(s,r){return s===r||(0,p.pC)(s)&&(0,p.pC)(r)&&s.mode===r.mode&&s.offset===r.offset}},62359:(K,j,i)=>{i.r(j),i.d(j,{default:()=>v});var p=i(15861),m=i(17626),W=i(26584),L=i(62208),A=i(32917),I=i(77712),P=(i(85931),i(90912),i(76898)),o=i(19702),_=i(13191),u=i(32400),a=i(46348),c=i(89765),d=i(42743),E=i(45611);let g=class extends((0,o.A)(E.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new u.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.handles.add(this.layer.on("graphic-update",h=>this.processor.graphicsCore.graphicUpdateHandler(h))),this.addResolvingPromise((0,c.E)(this).then(h=>this.fullExtentInLocalViewSpatialReference=h)),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,A.gx)(()=>this.view?.basemapTerrain?.ready,()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,L.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const h=super.getSuspendInfo();return h.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,h.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,h}fetchPopupFeatures(h,y){return(0,p.Z)(function*(){return(0,L.pC)(y)?y.clientGraphics:null})()}getHit(h){return this.processor.getHit(h)}whenGraphicBounds(h,y){return this.processor.whenGraphicBounds(h,y)}computeAttachmentOrigin(h,y){return this.processor?.computeAttachmentOrigin(h,y)}getSymbolLayerSize(h,y){return this.processor.getSymbolLayerSize(h,y)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(h){return this.processor.maskOccludee(h)}highlight(h){return this.processor.highlight(h)}elevationAlignPointsInFeatures(h,y){var D=this;return(0,p.Z)(function*(){const{processor:s}=D;if((0,L.Wi)(s))throw new W.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");return(0,_.W)(D.view,D.layer,r=>"number"==typeof r?s.graphics3DGraphics.get(r):null,h,y)})()}queryForSymbologySnapping(h,y){var D=this;return(0,p.Z)(function*(){return(0,a.c)(D.processor,h,y)})()}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||d.jq.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&(this.layer.internal||this.view?.basemapTerrain?.ready))}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}getUsedMemory(){return this.processor?.graphicsCore?.usedMemory??0}getUnloadedMemory(){return this.processor?.graphicsCore?.unprocessedMemoryEstimate}ignoresMemoryFactor(){return!0}};(0,m._)([(0,I.Cb)()],g.prototype,"loadedGraphics",null),(0,m._)([(0,I.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,m._)([(0,I.Cb)()],g.prototype,"layer",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],g.prototype,"processor",void 0),(0,m._)([(0,I.Cb)({type:Boolean})],g.prototype,"slicePlaneEnabled",void 0),g=(0,m._)([(0,P.j)("esri.views.3d.layers.GraphicsLayerView3D")],g);const v=g},19702:(K,j,i)=>{i.d(j,{A:()=>_});var p=i(15861),m=i(17626),W=i(54024),L=i(10699),A=i(32917),I=i(77712),P=(i(85931),i(90912),i(76898)),o=i(36947);const _=u=>{let a=class extends u{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(c){super.postscript(c),(0,o.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var c=this;return(0,p.Z)(function*(){const d=new AbortController,E=d.signal;c.handles.add((0,W.kB)(()=>d.abort())),yield(0,A.N1)(()=>c.view.defaultsFromMap?.heightModelInfoReady,E),(0,L.k_)(E);const g=(0,o.Wt)(c.layer,c.view.heightModelInfo,c.supportsHeightUnitConversion);if(g)throw g})()}canResume(){const c=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!c||!c.minScale||!c.maxScale||c.minScale>=c.maxScale)}getSuspendInfo(){const c=super.getSuspendInfo(),d=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return d&&d.minScale&&d.maxScale&&d.minScale<d.maxScale&&(c.outsideScaleRange=!0),c}};return(0,m._)([(0,I.Cb)()],a.prototype,"view",void 0),(0,m._)([(0,I.Cb)()],a.prototype,"slicePlaneEnabled",void 0),a=(0,m._)([(0,P.j)("esri.views.3d.layers.LayerView3D")],a),a}},13191:(K,j,i)=>{i.d(j,{W:()=>_});var p=i(15861),W=(i(29132),i(62208)),L=i(10699),A=i(38114),I=i(60507),T=i(81468),R=i(79112),P=i(74746),o=i(65234);function _(E,g,v,h,y){return u.apply(this,arguments)}function u(){return(u=(0,p.Z)(function*(E,g,v,h,y){const{elevationProvider:D,renderCoordsHelper:s,spatialReference:r}=E,{elevationInfo:l}=g,f=(0,P.WI)(l,!0),O=yield(0,P.kr)(f,r,y);(0,L.k_)(y);const b=[],M=new Set,C=new Set;for(const{objectId:U,points:B}of h){const N=v(U);if((0,W.Wi)(N)){for(const S of B)b.push(S[2]);M.add(U)}else{N.isDraped&&C.add(U),a.setFromElevationInfo((0,I.Jn)(N.graphic.geometry,l)),a.updateFeatureExpressionInfoContext(O,N.graphic,g),c.spatialReference=E.spatialReference;for(const{x:S,y:G,z:V}of B)c.x=S,c.y=G,c.z=V??0,(0,T.qZ)(c,D,a,s,d),b.push(d.z)}}return{elevations:b,drapedObjectIds:C,failedObjectIds:M}})).apply(this,arguments)}const a=new R.o,c=(0,A.Tx)(0,0,0,o.Z.WGS84),d=new T.Lm},46348:(K,j,i)=>{i.d(j,{c:()=>A});var p=i(15861),m=i(62208),W=i(10699),L=i(46679);function A(R,P,o){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(function*(R,P,o){if((0,m.Wi)(R)||0===P.candidates.length)return T;const _=R.graphics3DGraphicsByObjectID??R.graphics3DGraphics,u=[],a=[],{renderer:c}=R,d=(0,m.pC)(c)&&"arcadeRequired"in c&&c.arcadeRequired?(0,L.LC)():null,E=function(){var s=(0,p.Z)(function*(r,{graphic:l,graphics3DSymbol:f}){const O=yield d,b=yield R.getRenderingInfoAsync(l,c,O,{signal:o});return(0,m.Wi)(b)?[]:f.queryForSnapping(r,v,b,o)});return function(l,f){return s.apply(this,arguments)}}(),{candidates:g,spatialReference:v}=P;for(let s=0;s<g.length;++s){const r=g[s],{objectId:l}=r,f="number"==typeof l?_.get(l):void 0;if((0,m.Wi)(f))continue;const{graphics3DSymbol:O}=f;O.symbologySnappingSupported&&(u.push(E(r,f)),a.push(s))}if(0===u.length)return T;const h=yield Promise.all(u);(0,W.k_)(o);const y=[],D=[];for(let s=0;s<h.length;++s){const r=h[s],l=a[s];for(const f of r)y.push(f),D.push(l)}return{candidates:y,sourceCandidateIndices:D}}),I.apply(this,arguments)}const T={candidates:[],sourceCandidateIndices:[]}},89765:(K,j,i)=>{i.d(j,{E:()=>L});var p=i(62208),m=i(46367),W=i(35082);function L(A){const I=A.view.spatialReference,T=A.layer.fullExtent,R=(0,p.pC)(T)&&T.spatialReference;if((0,p.Wi)(T)||!R)return Promise.resolve(null);if(R.equals(I))return Promise.resolve(T.clone());const P=(0,m.iV)(T,I);return(0,p.pC)(P)?Promise.resolve(P):A.view.state.isLocal?(0,W.projectGeometry)(T,I,A.layer.portalItem).then(o=>!A.destroyed&&o?o:void 0).catch(()=>null):Promise.resolve(null)}},45611:(K,j,i)=>{i.d(j,{Z:()=>c});var p=i(17626),m=i(14517),W=i(61885),L=i(80542),A=i(61996),I=i(63290),T=i(62208),R=i(60330),P=i(77712),u=(i(85931),i(90912),i(76898));let a=class extends((0,L.p)((0,A.IG)((0,R.v)(W.Z.EventedMixin(m.Z))))){constructor(d){super(d),this.layer=null,this.parent=null}initialize(){this.when().catch(d=>{if("layerview:create-error"!==d.name){const E=this.layer&&this.layer.id||"no id",g=this.layer&&this.layer.title||"no title";I.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${g}', id: '${E}')`,d)}})}get fullOpacity(){return(0,T.Pt)(this.get("layer.opacity"),1)*(0,T.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(d){this._overrideIfSome("visible",d)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const d=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(d.viewNotReady=!0),this.layer&&this.layer.loaded||(d.layerNotLoaded=!0),this.visible||(d.layerInvisible=!0),d}isUpdating(){return!1}};(0,p._)([(0,P.Cb)()],a.prototype,"fullOpacity",null),(0,p._)([(0,P.Cb)()],a.prototype,"layer",void 0),(0,p._)([(0,P.Cb)()],a.prototype,"parent",void 0),(0,p._)([(0,P.Cb)({readOnly:!0})],a.prototype,"suspended",null),(0,p._)([(0,P.Cb)({readOnly:!0})],a.prototype,"suspendInfo",null),(0,p._)([(0,P.Cb)({readOnly:!0})],a.prototype,"legendEnabled",null),(0,p._)([(0,P.Cb)({type:Boolean,readOnly:!0})],a.prototype,"updating",null),(0,p._)([(0,P.Cb)({readOnly:!0})],a.prototype,"updatingProgress",null),(0,p._)([(0,P.Cb)()],a.prototype,"visible",null),(0,p._)([(0,P.Cb)()],a.prototype,"view",void 0),a=(0,p._)([(0,u.j)("esri.views.layers.LayerView")],a);const c=a}}]);