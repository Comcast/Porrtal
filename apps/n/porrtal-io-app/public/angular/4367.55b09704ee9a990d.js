/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[4367],{54367:(q,z,g)=>{g.r(z),g.d(z,{toBinaryGLTF:()=>mt});var N,i,V=g(21726),P=g(10699),B=g(72642);(i=N||(N={}))[i.JSON=1313821514]="JSON",i[i.BIN=5130562]="BIN";class E{constructor(t,e){if(!t)throw new Error("GLB requires a JSON gltf chunk");this._length=E.HEADER_SIZE,this._length+=E.CHUNK_HEADER_SIZE;const s=this._textToArrayBuffer(t);if(this._length+=this._alignTo(s.byteLength,4),e&&(this._length+=E.CHUNK_HEADER_SIZE,this._length+=e.byteLength,e.byteLength%4))throw new Error("Expected BIN chunk length to be divisible by 4 at this point");this.buffer=new ArrayBuffer(this._length),this._outView=new DataView(this.buffer),this._writeHeader();const r=this._writeChunk(s,12,N.JSON,32);e&&this._writeChunk(e,r,N.BIN)}_writeHeader(){this._outView.setUint32(0,E.MAGIC,!0),this._outView.setUint32(4,E.VERSION,!0),this._outView.setUint32(8,this._length,!0)}_writeChunk(t,e,s,r=0){const n=this._alignTo(t.byteLength,4);for(this._outView.setUint32(e,n,!0),this._outView.setUint32(e+=4,s,!0),this._writeArrayBuffer(this._outView.buffer,t,e+=4,0,t.byteLength),e+=t.byteLength;e%4;)r&&this._outView.setUint8(e,r),e++;return e}_writeArrayBuffer(t,e,s,r,n){new Uint8Array(t,s,n).set(new Uint8Array(e,r,n),0)}_textToArrayBuffer(t){return(new TextEncoder).encode(t).buffer}_alignTo(t,e){return e*Math.ceil(t/e)}}E.HEADER_SIZE=12,E.CHUNK_HEADER_SIZE=8,E.MAGIC=1179937895,E.VERSION=2;var c,A,w,T,$,F,k,v=g(63290),G=g(88159),y=g(62208),D=g(48977),I=g(78451),R=g(84161),b=g(28093),Y=g(27530),l=g(60853);(function(i){i[i.External=0]="External",i[i.DataURI=1]="DataURI",i[i.GLB=2]="GLB"})(c||(c={})),function(i){i[i.External=0]="External",i[i.DataURI=1]="DataURI",i[i.GLB=2]="GLB"}(A||(A={})),function(i){i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(w||(w={})),function(i){i.SCALAR="SCALAR",i.VEC2="VEC2",i.VEC3="VEC3",i.VEC4="VEC4",i.MAT2="MAT2",i.MAT3="MAT3",i.MAT4="MAT4"}(T||(T={})),function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"}($||($={})),function(i){i.OPAQUE="OPAQUE",i.MASK="MASK",i.BLEND="BLEND"}(F||(F={})),function(i){i[i.NoColor=0]="NoColor",i[i.FaceColor=1]="FaceColor",i[i.VertexColor=2]="VertexColor"}(k||(k={}));var f=g(67969);class tt{constructor(t,e,s,r,n){this._buffer=t,this._componentType=s,this._dataType=r,this._data=[],this._isFinalized=!1,this._accessorIndex=-1,this._accessorAttribute=null,this._accessorMin=null,this._accessorMax=null,e.bufferViews||(e.bufferViews=[]),this.index=e.bufferViews.length,this._bufferView={buffer:t.index,byteLength:-1,target:n};const a=this._getElementSize();a>=4&&n!==w.ELEMENT_ARRAY_BUFFER&&(this._bufferView.byteStride=a),e.bufferViews.push(this._bufferView),this._numComponentsForDataType=this._calculateNumComponentsForDataType()}push(t){const e=this._data.length;if(this._data.push(t),this._accessorIndex>=0){const s=e%this._numComponentsForDataType,r=this._accessorMin[s];this._accessorMin[s]="number"!=typeof r?t:Math.min(r,t);const n=this._accessorMax[s];this._accessorMax[s]="number"!=typeof n?t:Math.max(n,t)}}get dataSize(){return this._data.length*this._sizeComponentType()}get byteSize(){return function t(e,s){return s*Math.ceil(e/s)}(this.dataSize,4)}getByteOffset(){if(!this._isFinalized)throw new Error("Cannot get BufferView offset until it is finalized");return this._buffer.getByteOffset(this)}get byteOffset(){if(!this._isFinalized)throw new Error("Cannot get BufferView offset until it is finalized");return this._buffer.getByteOffset(this)}_createTypedArray(t,e){switch(this._componentType){case f.g.BYTE:return new Int8Array(t,e);case f.g.FLOAT:return new Float32Array(t,e);case f.g.SHORT:return new Int16Array(t,e);case f.g.UNSIGNED_BYTE:return new Uint8Array(t,e);case f.g.UNSIGNED_INT:return new Uint32Array(t,e);case f.g.UNSIGNED_SHORT:return new Uint16Array(t,e)}}writeOutToBuffer(t,e){this._createTypedArray(t,e).set(this._data)}writeAsync(t){if(this._asyncWritePromise)throw new Error("Can't write multiple bufferView values asynchronously");return this._asyncWritePromise=t.then(e=>{const s=new Uint8Array(e);for(let r=0;r<s.length;++r)this._data.push(s[r]);delete this._asyncWritePromise}),this._asyncWritePromise}startAccessor(t){if(this._accessorIndex>=0)throw new Error("Accessor was started without ending the previous one");this._accessorIndex=this._data.length,this._accessorAttribute=t;const e=this._numComponentsForDataType;this._accessorMin=new Array(e),this._accessorMax=new Array(e)}endAccessor(){if(this._accessorIndex<0)throw new Error("An accessor was not started, but was attempted to be ended");const t=this._getElementSize(),e=this._numComponentsForDataType,s=(this._data.length-this._accessorIndex)/e;if(s%1)throw new Error("An accessor was ended with missing component values");for(let n=0;n<this._accessorMin.length;++n)"number"!=typeof this._accessorMin[n]&&(this._accessorMin[n]=0),"number"!=typeof this._accessorMax[n]&&(this._accessorMax[n]=0);const r={byteOffset:t*(this._accessorIndex/e),componentType:this._componentType,count:s,type:this._dataType,min:this._accessorMin,max:this._accessorMax,name:this._accessorAttribute};switch(this._accessorAttribute){case"TEXCOORD_0":case"TEXCOORD_1":case"COLOR_0":case"WEIGHTS_0":switch(this._componentType){case f.g.UNSIGNED_BYTE:case f.g.UNSIGNED_SHORT:r.normalized=!0}}return this._accessorIndex=-1,this._accessorAttribute=null,this._accessorMin=null,this._accessorMax=null,r}get finalized(){return this._finalizedPromise?this._finalizedPromise:this._finalizedPromise=this._isFinalized?Promise.resolve():new Promise(t=>this._finalizedPromiseResolve=t)}finalize(){const t=this._bufferView;return new Promise(e=>{const s=this._buffer.getViewFinalizePromises(this);this._asyncWritePromise&&s.push(this._asyncWritePromise),e((0,P.as)(s))}).then(()=>{this._isFinalized=!0,t.byteOffset=this.getByteOffset(),t.byteLength=this.dataSize,this._finalizedPromiseResolve&&this._finalizedPromiseResolve()})}_getElementSize(){return this._sizeComponentType()*this._numComponentsForDataType}_sizeComponentType(){switch(this._componentType){case f.g.BYTE:case f.g.UNSIGNED_BYTE:return 1;case f.g.SHORT:case f.g.UNSIGNED_SHORT:return 2;case f.g.UNSIGNED_INT:case f.g.FLOAT:return 4}}_calculateNumComponentsForDataType(){switch(this._dataType){case T.SCALAR:return 1;case T.VEC2:return 2;case T.VEC3:return 3;case T.VEC4:case T.MAT2:return 4;case T.MAT3:return 9;case T.MAT4:return 16}}}class J{constructor(t){this._gltf=t,this._bufferViews=[],this._isFinalized=!1,t.buffers||(t.buffers=[]),this.index=t.buffers.length;const e={byteLength:-1};t.buffers.push(e),this._buffer=e}addBufferView(t,e,s){if(this._finalizePromise)throw new Error("Cannot add buffer view after fiinalizing buffer");const r=new tt(this,this._gltf,t,e,s);return this._bufferViews.push(r),r}getByteOffset(t){let e=0;for(const s of this._bufferViews){if(s===t)return e;e+=s.byteSize}throw new Error("Given bufferView was not present in this buffer")}getViewFinalizePromises(t){const e=[];for(const s of this._bufferViews){if(t&&s===t)return e;e.push(s.finalized)}return e}getArrayBuffer(){if(!this._isFinalized)throw new Error("Cannot get ArrayBuffer from Buffer before it is finalized");const t=this._getTotalSize(),e=new ArrayBuffer(t);let s=0;for(const r of this._bufferViews)r.writeOutToBuffer(e,s),s+=r.byteSize;return e}finalize(){if(this._finalizePromise)throw new Error(`Buffer ${this.index} was already finalized`);return this._finalizePromise=new Promise(t=>{t((0,P.as)(this.getViewFinalizePromises()))}).then(()=>{this._isFinalized=!0;const t=this.getArrayBuffer();this._buffer.byteLength=t.byteLength,this._buffer.uri=t}),this._gltf.extras?.promises.push(this._finalizePromise),this._finalizePromise}_getTotalSize(){let t=0;for(const e of this._bufferViews)t+=e.byteSize;return t}}function st(i,t){(0,y.Wi)(t.normal)&&(t.normal=new Float32Array(t.position.length));const e=i.faces,{position:s,normal:r}=t,n=e.length/3;for(let a=0;a<n;++a){const h=3*e[3*a+0],o=3*e[3*a+1],u=3*e[3*a+2],_=(0,R.s)(rt,s[h+0],s[h+1],s[h+2]),d=(0,R.s)(nt,s[o+0],s[o+1],s[o+2]),M=(0,R.s)(at,s[u+0],s[u+1],s[u+2]),O=(0,R.b)(d,d,_),C=(0,R.b)(M,M,_),m=(0,R.f)(O,O,C);r[h+0]+=m[0],r[h+1]+=m[1],r[h+2]+=m[2],r[o+0]+=m[0],r[o+1]+=m[1],r[o+2]+=m[2],r[u+0]+=m[0],r[u+1]+=m[1],r[u+2]+=m[2]}for(let a=0;a<r.length;a+=3)(0,R.s)(S,r[a],r[a+1],r[a+2]),(0,R.n)(S,S),r[a+0]=S[0],r[a+1]=S[1],r[a+2]=S[2]}const rt=(0,b.c)(),nt=(0,b.c)(),at=(0,b.c)(),S=(0,b.c)();var L=g(57932);const ot=v.Z.getLogger("gltf");class ht{constructor(t,e,s){this.params={},this._materialMap=new Array,this._imageMap=new Map,this._textureMap=new Map,this.gltf={asset:{version:"2.0",copyright:t.copyright,generator:t.generator},extras:{options:e,binChunkBuffer:null,promises:[]}},s&&(this.params=s),this._addScenes(t)}_addScenes(t){this.gltf.scene=t.defaultScene;const e=this.gltf.extras,s=e.options.bufferOutputType===c.GLB||e.options.imageOutputType===A.GLB;s&&(e.binChunkBuffer=new J(this.gltf)),t.forEachScene(r=>{this._addScene(r)}),s&&e.binChunkBuffer.finalize()}_addScene(t){this.gltf.scenes||(this.gltf.scenes=[]);const e={};t.name&&(e.name=t.name),t.forEachNode(s=>{e.nodes||(e.nodes=[]);const r=this._addNode(s);e.nodes.push(r)}),this.gltf.scenes.push(e)}_addNode(t){this.gltf.nodes||(this.gltf.nodes=[]);const e={};t.name&&(e.name=t.name);const s=t.translation;(0,R.k)(s,b.Z)||(e.translation=(0,b.a)(s));const r=t.rotation;(0,D.j)(r,I.I)||(e.rotation=(0,I.b)(r));const n=t.scale;(0,R.k)(n,b.O)||(e.scale=(0,b.a)(n)),t.mesh&&t.mesh.vertexAttributes.position?e.mesh=this._addMesh(t.mesh):t.forEachNode(h=>{e.children||(e.children=[]);const o=this._addNode(h);e.children.push(o)});const a=this.gltf.nodes.length;return this.gltf.nodes.push(e),a}_addMesh(t){this.gltf.meshes||(this.gltf.meshes=[]);const e={primitives:[]},s=this.gltf.extras,r=s.options.bufferOutputType===c.GLB;let n;n=r?s.binChunkBuffer:new J(this.gltf),this.params.origin||(this.params.origin=function it(i){return(0,y.pC)(i.transform)?i.transform.getOriginPoint(i.spatialReference):new B.Z({x:i.extent.xmax-i.extent.width/2,y:i.extent.ymax-i.extent.height/2,z:i.extent.zmin,spatialReference:i.extent.spatialReference})}(t));const a=(0,l.Yq)(t.vertexAttributes,t.transform,this.params.origin,{geographic:this.params.geographic,unit:"meters"});(function et(i,t){if(i.components)for(const e of i.components)e.faces&&"smooth"===e.shading&&st(e,t)})(t,a),this._flipYZAxis(a);const h=n.addBufferView(f.g.FLOAT,T.VEC3,w.ARRAY_BUFFER);let o,u,_,d;a.normal&&(o=n.addBufferView(f.g.FLOAT,T.VEC3,w.ARRAY_BUFFER)),t.vertexAttributes.uv&&(u=n.addBufferView(f.g.FLOAT,T.VEC2,w.ARRAY_BUFFER)),a.tangent&&(_=n.addBufferView(f.g.FLOAT,T.VEC4,w.ARRAY_BUFFER)),t.vertexAttributes.color&&(d=n.addBufferView(f.g.UNSIGNED_BYTE,T.VEC4,w.ARRAY_BUFFER)),h.startAccessor("POSITION"),o&&o.startAccessor("NORMAL"),u&&u.startAccessor("TEXCOORD_0"),_&&_.startAccessor("TANGENT"),d&&d.startAccessor("COLOR_0");const M=a.position.length/3,{position:O,normal:C,tangent:m}=a,{color:x,uv:H}=t.vertexAttributes;for(let p=0;p<M;++p)h.push(O[3*p+0]),h.push(O[3*p+1]),h.push(O[3*p+2]),o&&(0,y.pC)(C)&&(o.push(C[3*p+0]),o.push(C[3*p+1]),o.push(C[3*p+2])),u&&(0,y.pC)(H)&&(u.push(H[2*p+0]),u.push(H[2*p+1])),_&&(0,y.pC)(m)&&(_.push(m[4*p+0]),_.push(m[4*p+1]),_.push(m[4*p+2]),_.push(m[4*p+3])),d&&(0,y.pC)(x)&&(d.push(x[4*p+0]),d.push(x[4*p+1]),d.push(x[4*p+2]),d.push(x[4*p+3]));const At=h.endAccessor(),Q=this._addAccessor(h.index,At);let Z,W,j,K,U;if(o){const p=o.endAccessor();Z=this._addAccessor(o.index,p)}if(u){const p=u.endAccessor();W=this._addAccessor(u.index,p)}if(_){const p=_.endAccessor();j=this._addAccessor(_.index,p)}if(d){const p=d.endAccessor();K=this._addAccessor(d.index,p)}t.components&&t.components.length>0&&t.components[0].faces?(U=n.addBufferView(f.g.UNSIGNED_INT,T.SCALAR,w.ELEMENT_ARRAY_BUFFER),this._addMeshVertexIndexed(U,t.components,e,Q,Z,W,j,K)):this._addMeshVertexNonIndexed(t.components,e,Q,Z,W,j,K),h.finalize(),o&&o.finalize(),u&&u.finalize(),_&&_.finalize(),U&&U.finalize(),d&&d.finalize(),r||n.finalize();const yt=this.gltf.meshes.length;return this.gltf.meshes.push(e),yt}_flipYZAxis({position:t,normal:e,tangent:s}){this._flipYZBuffer(t,3),this._flipYZBuffer(e,3),this._flipYZBuffer(s,4)}_flipYZBuffer(t,e){if(!(0,y.Wi)(t))for(let s=1,r=2;s<t.length;s+=e,r+=e){const n=t[s];t[s]=t[r],t[r]=-n}}_addMaterial(t){if(null===t)return;const e=this._materialMap.indexOf(t);if(-1!==e)return e;this.gltf.materials||(this.gltf.materials=[]);const s={};switch(t.alphaMode){case"mask":s.alphaMode=F.MASK;break;case"auto":case"blend":s.alphaMode=F.BLEND}.5!==t.alphaCutoff&&(s.alphaCutoff=t.alphaCutoff),t.doubleSided&&(s.doubleSided=t.doubleSided),s.pbrMetallicRoughness={};const r=h=>h**2.1,n=h=>{const o=h.toRgba();return o[0]=r(o[0]/255),o[1]=r(o[1]/255),o[2]=r(o[2]/255),o};if((0,y.pC)(t.color)&&(s.pbrMetallicRoughness.baseColorFactor=n(t.color)),(0,y.pC)(t.colorTexture)&&(s.pbrMetallicRoughness.baseColorTexture={index:this._addTexture(t.colorTexture)}),(0,y.pC)(t.normalTexture)&&(s.normalTexture={index:this._addTexture(t.normalTexture)}),t instanceof Y.Z){if((0,y.pC)(t.emissiveTexture)&&(s.emissiveTexture={index:this._addTexture(t.emissiveTexture)}),(0,y.pC)(t.emissiveColor)){const h=n(t.emissiveColor);s.emissiveFactor=[h[0],h[1],h[2]]}(0,y.pC)(t.occlusionTexture)&&(s.occlusionTexture={index:this._addTexture(t.occlusionTexture)}),(0,y.pC)(t.metallicRoughnessTexture)&&(s.pbrMetallicRoughness.metallicRoughnessTexture={index:this._addTexture(t.metallicRoughnessTexture)}),s.pbrMetallicRoughness.metallicFactor=t.metallic,s.pbrMetallicRoughness.roughnessFactor=t.roughness}else s.pbrMetallicRoughness.metallicFactor=1,s.pbrMetallicRoughness.roughnessFactor=1,ot.warnOnce("Meshes exported to GLTF without MeshMaterialMetallicRoughness material will appear different when imported back.");const a=this.gltf.materials.length;return this.gltf.materials.push(s),this._materialMap.push(t),a}_addTexture(t){const e=this.gltf.textures??[];return this.gltf.textures=e,(0,G.s1)(this._textureMap,t,()=>{const s={sampler:this._addSampler(t),source:this._addImage(t)},r=e.length;return e.push(s),r})}_addImage(t){const e=this._imageMap.get(t);if(null!=e)return e;this.gltf.images||(this.gltf.images=[]);const s={};if(t.url)s.uri=t.url;else{const n=t.data;s.extras=n;for(let h=0;h<this.gltf.images.length;++h)if(n===this.gltf.images[h].extras)return h;const a=this.gltf.extras;switch(a.options.imageOutputType){case A.GLB:{const h=a.binChunkBuffer.addBufferView(f.g.UNSIGNED_BYTE,T.SCALAR),o=(0,L.lW)(n).then(({data:u,type:_})=>(s.mimeType=_,u));h.writeAsync(o).then(()=>{h.finalize()}),s.bufferView=h.index;break}case A.DataURI:s.uri=(0,L.$e)(n);break;default:a.promises.push((0,L.lW)(n).then(({data:h,type:o})=>{s.uri=h,s.mimeType=o}))}}const r=this.gltf.images.length;return this.gltf.images.push(s),this._imageMap.set(t,r),r}_addSampler(t){this.gltf.samplers||(this.gltf.samplers=[]);let e=f.e8.REPEAT,s=f.e8.REPEAT;if("string"==typeof t.wrap)switch(t.wrap){case"clamp":e=f.e8.CLAMP_TO_EDGE,s=f.e8.CLAMP_TO_EDGE;break;case"mirror":e=f.e8.MIRRORED_REPEAT,s=f.e8.MIRRORED_REPEAT}else{switch(t.wrap.vertical){case"clamp":s=f.e8.CLAMP_TO_EDGE;break;case"mirror":s=f.e8.MIRRORED_REPEAT}switch(t.wrap.horizontal){case"clamp":e=f.e8.CLAMP_TO_EDGE;break;case"mirror":e=f.e8.MIRRORED_REPEAT}}const r={wrapS:e,wrapT:s};for(let a=0;a<this.gltf.samplers.length;++a)if(JSON.stringify(r)===JSON.stringify(this.gltf.samplers[a]))return a;const n=this.gltf.samplers.length;return this.gltf.samplers.push(r),n}_addAccessor(t,e){this.gltf.accessors||(this.gltf.accessors=[]);const s={bufferView:t,byteOffset:e.byteOffset,componentType:e.componentType,count:e.count,type:e.type,min:e.min,max:e.max,name:e.name};e.normalized&&(s.normalized=!0);const r=this.gltf.accessors.length;return this.gltf.accessors.push(s),r}_addMeshVertexIndexed(t,e,s,r,n,a,h,o){for(const u of e){t.startAccessor("INDICES");for(let M=0;M<u.faces.length;++M)t.push(u.faces[M]);const _=t.endAccessor(),d={attributes:{POSITION:r},indices:this._addAccessor(t.index,_),material:this._addMaterial(u.material)};n&&"flat"!==u.shading&&(d.attributes.NORMAL=n),a&&(d.attributes.TEXCOORD_0=a),h&&"flat"!==u.shading&&(d.attributes.TANGENT=h),o&&(d.attributes.COLOR_0=o),s.primitives.push(d)}}_addMeshVertexNonIndexed(t,e,s,r,n,a,h){const o={attributes:{POSITION:s}};r&&(o.attributes.NORMAL=r),n&&(o.attributes.TEXCOORD_0=n),a&&(o.attributes.TANGENT=a),h&&(o.attributes.COLOR_0=h),t&&(o.material=this._addMaterial(t[0].material)),e.primitives.push(o)}}var ct=g(85931);class ft{constructor(){this.copyright="",this.defaultScene=0,this.generator="",this._scenes=[]}addScene(t){if(this._scenes.includes(t))throw new Error("Scene already added");this._scenes.push(t)}removeScene(t){(0,ct.Od)(this._scenes,t)}forEachScene(t){this._scenes.forEach(t)}}class ut{constructor(t){this.mesh=t,this.name="",this.translation=(0,b.c)(),this.rotation=(0,I.a)(),this.scale=(0,b.a)(b.O),this._nodes=[]}addNode(t){if(this._nodes.includes(t))throw new Error("Node already added");this._nodes.push(t)}forEachNode(t){this._nodes.forEach(t)}set rotationAngles(t){(0,D.k)(this.rotation,t[0],t[1],t[2])}}const X="model.glb";class gt{constructor(){this.name="",this._nodes=[]}addNode(t){if(this._nodes.includes(t))throw new Error("Node already added");this._nodes.push(t)}forEachNode(t){this._nodes.forEach(t)}}class _t{constructor(t,e){this._file={type:"model/gltf-binary",data:t},this.origin=e}buffer(){return Promise.resolve(this._file)}download(t){(0,V.io)(new Blob([this._file.data],{type:this._file.type}),t)}}function mt(i,t){const e=new ft,s=new gt;return e.addScene(s),s.addNode(new ut(i)),function pt(i,t){return function dt(i,t,e){const s=new ht(i,t=t||{},e);let r=s.params;r?r.origin||(r.origin=new B.Z({x:-1,y:-1,z:-1})):r={origin:new B.Z({x:-1,y:-1,z:-1})};const n=r.origin,a=s.gltf;let o=1,u=1,_=null;return(0,P.as)(a.extras?.promises??[]).then(()=>{const d={origin:n};delete a.extras;const O=JSON.stringify(a,(C,m)=>{if("extras"!==C){if(m instanceof ArrayBuffer){if((0,L.$7)(m))switch(t.imageOutputType){case A.DataURI:case A.GLB:break;default:{const x=`img${u}.png`;return u++,d[x]=m,x}}switch(t.bufferOutputType){case c.DataURI:return(0,L.N5)(m);case c.GLB:if(_)throw new Error("Already encountered an ArrayBuffer, there should only be one in the GLB format.");return void(_=m);default:{const x=`data${o}.bin`;return o++,d[x]=m,x}}}return m}},"number"==typeof t.jsonSpacing?t.jsonSpacing:4);return t.bufferOutputType===c.GLB||t.imageOutputType===A.GLB?d[X]=new E(O,_).buffer:d["model.gltf"]=O,d})}(i,{bufferOutputType:c.GLB,imageOutputType:A.GLB,jsonSpacing:0},t)}(e,t).then(r=>new _t(r[X],r.origin))}},57932:(q,z,g)=>{g.d(z,{$7:()=>Y,$e:()=>v,E0:()=>R,N5:()=>b,lW:()=>G});var V=g(15861),B=(g(8314),g(26584)),N=g(62208),E=g(21726);function v(l){const c=R(l);return(0,N.pC)(c)?c.toDataURL():""}function G(l){return y.apply(this,arguments)}function y(){return(y=(0,V.Z)(function*(l){const c=R(l);if((0,N.Wi)(c))throw new B.Z("imageToArrayBuffer","Unsupported image type");const A=yield D(l),w=yield new Promise(T=>c.toBlob(T,A));if(!w)throw new B.Z("imageToArrayBuffer","Failed to encode image");return{data:yield w.arrayBuffer(),type:A}})).apply(this,arguments)}function D(l){return I.apply(this,arguments)}function I(){return(I=(0,V.Z)(function*(l){if(!(l instanceof HTMLImageElement))return"image/png";const c=l.src;if((0,E.HK)(c)){const A=(0,E.sJ)(c);return"image/jpeg"===A?.mediaType?A.mediaType:"image/png"}return/\.png$/i.test(c)?"image/png":/\.(jpg|jpeg)$/i.test(c)?"image/jpeg":"image/png"})).apply(this,arguments)}function R(l){if(l instanceof HTMLCanvasElement)return l;if(l instanceof HTMLVideoElement)return null;const c=document.createElement("canvas");c.width=l.width,c.height=l.height;const A=c.getContext("2d");return l instanceof HTMLImageElement?A.drawImage(l,0,0,l.width,l.height):l instanceof ImageData&&A.putImageData(l,0,0),c}function b(l){const c=[],A=new Uint8Array(l);for(let w=0;w<A.length;w++)c.push(String.fromCharCode(A[w]));return"data:application/octet-stream;base64,"+btoa(c.join(""))}function Y(l){if(l.byteLength<8)return!1;const c=new Uint8Array(l);return 137===c[0]&&80===c[1]&&78===c[2]&&71===c[3]&&13===c[4]&&10===c[5]&&26===c[6]&&10===c[7]}}}]);