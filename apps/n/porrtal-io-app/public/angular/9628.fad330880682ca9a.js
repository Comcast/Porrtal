"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[9628],{58775:(_e,J,c)=>{c.d(J,{O3:()=>q,lG:()=>pe,my:()=>ce,q9:()=>f});var O=c(26584),Y=c(66385),F=c(88071),h=c(36630);const z={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function f(e){return z[e]}function*U(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*G(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function H(e){for(const t of e)if(t.length>2)return!0;return!1}function S(e){let t=0;for(let n=0;n<e.length;n++){const a=e[n],p=e[(n+1)%e.length];t+=a[0]*p[1]-p[0]*a[1]}return t<=0}function B(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function M(e,t,n){switch(t.type){case"LineString":return function K(e,t,n){return D(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function Q(e,t,n){for(const a of t.coordinates)D(e,a,n);return e}(e,t,n);case"MultiPoint":return function ie(e,t,n){return D(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ae(e,t,n){for(const a of t.coordinates){k(e,a[0],n);for(let p=1;p<a.length;p++)ee(e,a[p],n)}return e}(e,t,n);case"Point":return function V(e,t,n){return Z(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function le(e,t,n){const a=t.coordinates;k(e,a[0],n);for(let p=1;p<a.length;p++)ee(e,a[p],n);return e}(e,t,n)}}function k(e,t,n){const a=B(t);!function g(e){return!S(e)}(a)?D(e,a,n):te(e,a,n)}function ee(e,t,n){const a=B(t);!function I(e){return S(e)}(a)?D(e,a,n):te(e,a,n)}function D(e,t,n){for(const a of t)Z(e,a,n);e.lengths.push(t.length)}function te(e,t,n){for(let a=t.length-1;a>=0;a--)Z(e,t[a],n);e.lengths.push(t.length)}function Z(e,t,n){const[a,p,T]=t;e.coords.push(a,p),n.hasZ&&e.coords.push(T||0)}function ue(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function q(e){if(!e)throw new O.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new O.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,a=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!a.test(n))throw new O.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function ce(e,t={}){const n=[],a=new Set,p=new Set;let T,x=!1,E=null,b=!1,{geometryType:C=null}=t,j=!1;for(const o of U(e)){const{geometry:s,properties:i,id:u}=o;if((!s||(C||(C=f(s.type)),f(s.type)===C))&&(x||(x=H(G(s))),b||(b=null!=u,b&&(T=typeof u,E=Object.keys(i).filter(y=>i[y]===u))),b&&null!=u&&(E.length>1?E=E.filter(y=>i[y]===u):1===E.length&&(E=i[E[0]]===u?E:[])),!j&&i)){let y=!0;for(const m in i){if(a.has(m))continue;const d=i[m];if(null==d){y=!1,p.add(m);continue}const w=ue(d);"unknown"!==w?(p.delete(m),a.add(m),n.push({name:(0,h.q6)(m),alias:m,type:w})):p.add(m)}j=y}}const r=(0,h.q6)(1===E?.length&&E[0]||null);if(r)for(const o of n)if(o.name===r&&(0,h.H7)(o)){o.type="esriFieldTypeOID";break}return{fields:n,geometryType:C,hasZ:x,objectIdFieldName:r,objectIdFieldType:T,unknownFields:Array.from(p)}}function pe(e,t){return Array.from(function*R(e,t={}){const{geometryType:n,objectIdField:a}=t;for(const p of e){const{geometry:T,properties:x,id:E}=p;if(T&&f(T.type)!==n)continue;const b=x||{};let C=b[a]??null;a&&null!=E&&!b[a]&&(b[a]=C=E),yield new Y.u_(T?M(new F.Z,T,t):null,b,null,C)}}(U(e),t))}},56554:(_e,J,c)=>{c.d(J,{Dm:()=>G,Hq:()=>R,MS:()=>H,bU:()=>z});var O=c(8314),Y=c(58817),F=c(87757),h=c(24837);function z(g){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===g||"esriGeometryMultipoint"===g?h.I4:"esriGeometryPolyline"===g?h.ET:h.lF}}}const f=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let U=1;function G(g,I){if((0,O.Z)("esri-csp-restrictions"))return()=>({[I]:null,...g});try{let S=`this.${I} = null;`;for(const M in g)S+=`this${f.test(M)?`.${M}`:`["${M}"]`} = ${JSON.stringify(g[M])};`;const B=new Function(`\n      return class AttributesClass$${U++} {\n        constructor() {\n          ${S};\n        }\n      }\n    `)();return()=>new B}catch{return()=>({[I]:null,...g})}}function R(g={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,Y.d9)(g)}}]}function H(g,I){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:g},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:I,supportsDelete:I,supportsEditing:I,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:I,supportsExceedsLimitStatistics:!0},query:F.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:I,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(_e,J,c)=>{c.d(J,{$9:()=>ie,G4:()=>ee,Lu:()=>Q,WW:()=>t,d:()=>ce,eS:()=>ue,gp:()=>te,j:()=>le,w9:()=>ae,yN:()=>pe});var O=c(15861),F=(c(29132),c(84792)),h=c(26584),z=c(63290),f=c(62208),U=c(37053),G=c(46367),R=c(82054),H=c(95786),g=c(58775),I=c(56554),S=c(60466),B=c(85),M=c(65234);const K=z.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),Q="http://www.opengis.net/def/crs/",ie=`${Q}OGC/1.3/CRS84`;function ae(r,o){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*(r,o,s={},i=5){const{links:u}=r,y=j(u,"items","application/geo+json")||j(u,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,f.Wi)(y))throw new h.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:m}=yield(0,F.default)(y.href,{signal:s.signal,query:{limit:i,...s.customParameters,token:s.apiKey},headers:{accept:"application/geo+json"}});yield(0,g.O3)(m);const d=(0,g.my)(m,{geometryType:o.geometryType}),w=o.fields||d.fields||[],ne=null!=o.hasZ?o.hasZ:d.hasZ,N=d.geometryType,W=o.objectIdField||d.objectIdFieldName||"OBJECTID";let _=o.timeInfo;const X=w.find(({name:l})=>l===W);if(X)X.editable=!1,X.nullable=!1;else{if(!d.objectIdFieldType)throw new h.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");w.unshift({name:W,alias:W,type:"number"===d.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(W!==d.objectIdFieldName){const l=w.find(({name:P})=>P===d.objectIdFieldName);l&&(l.type="esriFieldTypeInteger")}w===d.fields&&d.unknownFields.length>0&&K.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:d.unknownFields}});for(const l of w){if(null==l.name&&(l.name=l.alias),null==l.alias&&(l.alias=l.name),"esriFieldTypeOID"!==l.type&&"esriFieldTypeGlobalID"!==l.type&&(l.editable=null==l.editable||!!l.editable,l.nullable=null==l.nullable||!!l.nullable),!l.name)throw new h.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:l});if(!B.v.jsonValues.includes(l.type))throw new h.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${l.name}"`,{field:l})}if(_){const l=new S.Z(w);if(_.startTimeField){const P=l.get(_.startTimeField);P?(_.startTimeField=P.name,P.type="esriFieldTypeDate"):_.startTimeField=null}if(_.endTimeField){const P=l.get(_.endTimeField);P?(_.endTimeField=P.name,P.type="esriFieldTypeDate"):_.endTimeField=null}if(_.trackIdField){const P=l.get(_.trackIdField);P?_.trackIdField=P.name:(_.trackIdField=null,K.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:_}}))}_.startTimeField||_.endTimeField||(K.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:_}}),_=null)}return{drawingInfo:N?(0,I.bU)(N):null,extent:C(r),geometryType:N,fields:w,hasZ:!!ne,objectIdField:W,timeInfo:_}})).apply(this,arguments)}function le(r){return k.apply(this,arguments)}function k(){return(k=(0,O.Z)(function*(r,o={}){const{links:s}=r,i=j(s,"data","application/json")||j(s,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,f.Wi)(i))throw new h.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:u,customParameters:y,signal:m}=o,{data:d}=yield(0,F.default)(i.href,{signal:m,headers:{accept:"application/json"},query:{...y,token:u}});return d})).apply(this,arguments)}function ee(r){return D.apply(this,arguments)}function D(){return(D=(0,O.Z)(function*(r,o={}){const{links:s}=r,i=j(s,"conformance","application/json")||j(s,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,f.Wi)(i))throw new h.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:u,customParameters:y,signal:m}=o,{data:d}=yield(0,F.default)(i.href,{signal:m,headers:{accept:"application/json"},query:{...y,token:u}});return d})).apply(this,arguments)}function te(r){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(r,o={}){const{apiKey:s,customParameters:i,signal:u}=o,{data:y}=yield(0,F.default)(r,{signal:u,headers:{accept:"application/json"},query:{...i,token:s}});return y})).apply(this,arguments)}function ue(r){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(r,o={}){const s="application/vnd.oai.openapi+json;version=3.0",i=j(r.links,"service-desc",s);if((0,f.Wi)(i))return K.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:u,customParameters:y,signal:m}=o,{data:d}=yield(0,F.default)(i.href,{signal:m,headers:{accept:s},query:{...y,token:u}});return d})).apply(this,arguments)}function ce(r){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(r)?.groups;if(!o)return null;const{authority:s,code:i}=o;switch(s.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return M.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return M.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const u=Number.parseInt(i,10);return Number.isNaN(u)?null:u}default:return null}}function pe(r,o,s){return e.apply(this,arguments)}function e(){return(e=(0,O.Z)(function*(r,o,s){const i=yield t(r,o,s);return(0,R.cn)(i)})).apply(this,arguments)}function t(r,o,s){return n.apply(this,arguments)}function n(){return(n=(0,O.Z)(function*(r,o,s){const{collection:i,layerDefinition:u,maxRecordCount:y,queryParameters:{apiKey:m,customParameters:d},spatialReference:w,supportedCrs:ne}=r,{links:N}=i,W=j(N,"items","application/geo+json")||j(N,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,f.Wi)(W))throw new h.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:_,num:X,start:l,timeExtent:P,where:ge}=o;if(o.objectIds)throw new h.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const he=M.Z.fromJSON(w),$=(0,f.Pt)(o.outSpatialReference,he),re=$.isWGS84?null:p($,ne),Ee=b(_,ne),Pe=x(P),Oe=E(ge),Ie=X??(null!=l&&void 0!==l?10:y),{data:A}=yield(0,F.default)(W.href,{...s,query:{...d,...Ee,crs:re,datetime:Pe,query:Oe,limit:Ie,startindex:l,token:m},headers:{accept:"application/geo+json"}});let oe=!1;A.links&&(oe=!!A.links.find(se=>"next"===se.rel)),!oe&&Number.isInteger(A.numberMatched)&&Number.isInteger(A.numberReturned)&&(oe=A.numberReturned<A.numberMatched);const{fields:Me,geometryType:de,hasZ:fe,objectIdField:ye}=u,me=(0,g.lG)(A,{geometryType:de,hasZ:fe,objectIdField:ye});if(!re&&$.isWebMercator)for(const L of me)if((0,f.pC)(L.geometry)){const se=(0,R.di)(L.geometry,de,fe,!1);se.spatialReference=M.Z.WGS84,L.geometry=(0,R.GH)((0,G.iV)(se,$))}for(const L of me)L.objectId=L.attributes[ye];const Te=re||!re&&$.isWebMercator?$.toJSON():U.Zn,v=new H.Z;return v.exceededTransferLimit=oe,v.features=me,v.fields=Me,v.geometryType=de,v.hasZ=fe,v.objectIdFieldName=ye,v.spatialReference=Te,v})).apply(this,arguments)}function p(r,o){const{isWebMercator:s,wkid:i}=r;if(!i)return null;const u=s?o[3857]??o[102100]??o[102113]??o[900913]:o[r.wkid];return u?`${Q}${u}`:null}function T(r){if((0,f.Wi)(r))return"";const{xmin:o,ymin:s,xmax:i,ymax:u}=r;return`${o},${s},${i},${u}`}function x(r){if((0,f.Wi)(r))return null;const{start:o,end:s}=r;return`${(0,f.pC)(o)?o.toISOString():".."}/${(0,f.pC)(s)?s.toISOString():".."}`}function E(r){return(0,f.Wi)(r)||!r||"1=1"===r?null:r}function b(r,o){if(!function a(r){return(0,f.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:s}=r;if(!s||s.isWGS84)return{bbox:T(r)};const i=p(s,o);return(0,f.pC)(i)?{bbox:T(r),"bbox-crs":i}:s.isWebMercator?{bbox:T((0,G.iV)(r,M.Z.WGS84))}:null}function C(r){const o=r.extent?.spatial;if(!o)return null;const s=o.bbox[0],i=4===s.length;return{xmin:s[0],ymin:s[1],xmax:i?s[2]:s[3],ymax:i?s[3]:s[4],zmin:i?void 0:s[2],zmax:i?void 0:s[5],spatialReference:M.Z.WGS84.toJSON()}}function j(r,o,s){return r.find(i=>i.rel===o&&i.type===s)||r.find(i=>i.rel===o&&!i.type)}}}]);