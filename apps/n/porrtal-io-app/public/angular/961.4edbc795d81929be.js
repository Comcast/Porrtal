"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[961],{961:(c,y,i)=>{i.r(y),i.d(y,{default:()=>E});var t=i(17626),p=i(46160),d=i(89726),h=i(62208),a=i(32917),n=i(77712),l=(i(85931),i(90912),i(76898)),O=i(45611);let _=class extends O.Z{constructor(e){super(e),this.type="group",this.layerViews=new p.Z}_allLayerViewVisibility(e){this.layerViews.forEach(s=>{s.visible=e})}initialize(){this.handles.add([this.layerViews.on("change",e=>this._layerViewsChangeHandler(e)),(0,a.YP)(()=>this.layer.visibilityMode,()=>this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(null)),a.Z_),(0,a.YP)(()=>this.visible,e=>{this._applyVisibility(()=>this._allLayerViewVisibility(e),()=>{})},a.Z_)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(e){this._set("layerViews",(0,d.Z)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((e,s)=>e+s.updatingProgress,0)/this.layerViews.length}isUpdating(){return this.layerViews.some(e=>e.updating)}_hasLayerViewVisibleOverrides(){return this.layerViews.some(e=>e._isOverridden("visible"))}_findLayerViewForLayer(e){return e&&this.layerViews.find(s=>s.layer===e)}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find(s=>this._findLayerViewForLayer(s)?.visible);return e&&this._findLayerViewForLayer(e)}_applyExclusiveVisibility(e){(0,h.Wi)(e)&&(e=this._firstVisibleOnLayerOrder(),(0,h.Wi)(e)&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))),this.layerViews.forEach(s=>{s.visible=s===e})}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(r=>(0,a.YP)(()=>r.visible,o=>this._applyVisibility(()=>{o!==this.visible&&(r.visible=this.visible)},()=>this._applyExclusiveVisibility(o?r:null)),a.Z_)).toArray(),"grouplayerview:visible");const s=e.added[e.added.length-1];this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(s?.visible?s:null))}_applyVisibility(e,s){this._hasLayerViewVisibleOverrides()&&("inherited"===this.layer?.visibilityMode?e():"exclusive"===this.layer?.visibilityMode&&s())}};(0,t._)([(0,n.Cb)({cast:d.R})],_.prototype,"layerViews",null),(0,t._)([(0,n.Cb)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,t._)([(0,n.Cb)()],_.prototype,"view",void 0),_=(0,t._)([(0,l.j)("esri.views.layers.GroupLayerView")],_);const E=_},45611:(c,y,i)=>{i.d(y,{Z:()=>s});var t=i(17626),p=i(14517),d=i(61885),h=i(80542),a=i(61996),n=i(63290),v=i(62208),u=i(60330),l=i(77712),E=(i(85931),i(90912),i(76898));let e=class extends((0,h.p)((0,a.IG)((0,u.v)(d.Z.EventedMixin(p.Z))))){constructor(r){super(r),this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){const o=this.layer&&this.layer.id||"no id",P=this.layer&&this.layer.title||"no title";n.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${P}', id: '${o}')`,r)}})}get fullOpacity(){return(0,v.Pt)(this.get("layer.opacity"),1)*(0,v.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(r){this._overrideIfSome("visible",r)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const r=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0),this.visible||(r.layerInvisible=!0),r}isUpdating(){return!1}};(0,t._)([(0,l.Cb)()],e.prototype,"fullOpacity",null),(0,t._)([(0,l.Cb)()],e.prototype,"layer",void 0),(0,t._)([(0,l.Cb)()],e.prototype,"parent",void 0),(0,t._)([(0,l.Cb)({readOnly:!0})],e.prototype,"suspended",null),(0,t._)([(0,l.Cb)({readOnly:!0})],e.prototype,"suspendInfo",null),(0,t._)([(0,l.Cb)({readOnly:!0})],e.prototype,"legendEnabled",null),(0,t._)([(0,l.Cb)({type:Boolean,readOnly:!0})],e.prototype,"updating",null),(0,t._)([(0,l.Cb)({readOnly:!0})],e.prototype,"updatingProgress",null),(0,t._)([(0,l.Cb)()],e.prototype,"visible",null),(0,t._)([(0,l.Cb)()],e.prototype,"view",void 0),e=(0,t._)([(0,E.j)("esri.views.layers.LayerView")],e);const s=e}}]);