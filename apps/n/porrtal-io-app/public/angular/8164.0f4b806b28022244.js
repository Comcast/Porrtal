/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[8164],{78164:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{AccountBillingHistoryComponent:()=>se,AccountCreateComponent:()=>ee,AccountDetailComponent:()=>J,AccountNavComponent:()=>G,AccountSearchComponent:()=>Z,AppointmentCreateComponent:()=>zy,AppointmentDetailComponent:()=>Wy,AppointmentLocationMapComponent:()=>Vy,AppointmentNavComponent:()=>Fy,AppointmentSearchComponent:()=>Ny,BuildingSceneWithQueryComponent:()=>wE,CollapsibleTreeComponent:()=>jE,DigitalElevationMapComponent:()=>LE,EarthquakeMapComponent:()=>AE,HierarchicalBarChartComponent:()=>FE,HurricaneMapComponent:()=>SE,VizNavComponent:()=>Hy,ZoomableCirclePackComponent:()=>RE,ZoomableIcicleComponent:()=>BE,ZoomableSunburstComponent:()=>IE,ZoomableTreemapComponent:()=>UE});var D=T(36895),x=T(46485);const B=[{accountId:1,name:"Bank of Big Money",orders:[{date:Date.now(),item:"Screen design",amount:1e3},{date:Date.now()+432e6,item:"Screen development",amount:5e3},{date:Date.now()+864e6,item:"Screen testing",amount:3e3}]},{accountId:2,name:"Bill Jones",orders:[{date:Date.now(),item:"Slide development",amount:1e3}]},{accountId:3,name:"Waffles R Us",orders:[{date:Date.now(),item:"Screen design",amount:2e3},{date:Date.now()+432e6,item:"Screen development",amount:8e3},{date:Date.now()+864e6,item:"Screen testing",amount:5e3}]},{accountId:4,name:"Waffle House",orders:[{date:Date.now(),item:"Screen design",amount:500},{date:Date.now()+432e6,item:"Screen development",amount:2e3}]},{accountId:5,name:"Crypto Bank",orders:[{date:Date.now(),item:"Slide work",amount:1e3},{date:Date.now()+432e6,item:"Computer order",amount:15e3},{date:Date.now()+864e6,item:"Programming",amount:21e3}]}];var U=T(97392),W=T(94650);const Y=function(d){return{accountId:d}};function H(d,v){if(1&d&&(W.ynx(0),W.TgZ(1,"porrtal-entity-menu",4)(2,"span",5)(3,"mat-icon"),W._uU(4,"account_box"),W.qZA(),W.TgZ(5,"span",6),W._uU(6),W.qZA()()(),W.TgZ(7,"span"),W._uU(8),W.ALo(9,"number"),W.qZA(),W.BQk()),2&d){const O=v.$implicit;W.xp6(1),W.Q6J("state",W.VKq(6,Y,O.accountId)),W.xp6(5),W.Oqu(O.name),W.xp6(2),W.hij(" $ ",W.xi3(9,3,O.total,"1.0-0")," ")}}class G{constructor(){this.topThreeAccounts=[],this.topThreeAccounts=[...B.map(v=>{const O=v.orders.reduce((A,j)=>A+j.amount,0);return{...v,total:O}}).sort((v,O)=>O.total-v.total).filter((v,O)=>O<3)],console.log("top three accounts",this.topThreeAccounts)}static#e=this.\u0275fac=function(O){return new(O||G)};static#t=this.\u0275cmp=W.Xpm({type:G,selectors:[["porrtal-account-nav"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:5,vars:1,consts:[[1,"container"],[1,"title"],[1,"data-container"],[4,"ngFor","ngForOf"],["entityType","account",3,"state"],[1,"link-button",2,"display","grid","grid-template-columns","24px auto"],[2,"margin-left","5px"]],template:function(O,A){1&O&&(W.TgZ(0,"div",0)(1,"h3",1),W._uU(2,"Top Three Accounts"),W.qZA(),W.TgZ(3,"div",2),W.YNc(4,H,10,8,"ng-container",3),W.qZA()()),2&O&&(W.xp6(4),W.Q6J("ngForOf",A.topThreeAccounts))},dependencies:[D.ez,D.sg,D.JJ,U.Ps,U.Hw,x.Ak],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:2px;padding-bottom:2px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;margin-left:15px;margin-right:15px;margin-top:15px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"]})}var $=T(54004),re=T(30878),ue=T(15439);function ae(d,v){if(1&d&&(W.ynx(0),W.TgZ(1,"span"),W._uU(2),W.qZA(),W.TgZ(3,"span"),W._uU(4),W.qZA(),W.TgZ(5,"span"),W._uU(6),W.qZA(),W.BQk()),2&d){const O=v.$implicit,A=W.oxw(3);W.xp6(2),W.Oqu(O.item),W.xp6(2),W.Oqu(A.formatAmount(O.amount)),W.xp6(2),W.Oqu(A.Moment(O.date).format("YYYY-DD-MM"))}}const oe=function(d){return{accountId:d}};function ie(d,v){if(1&d&&(W.ynx(0),W.TgZ(1,"porrtal-entity-menu",5)(2,"span",6)(3,"mat-icon"),W._uU(4,"account_box"),W.qZA(),W.TgZ(5,"span",7),W._uU(6),W.qZA()()(),W.TgZ(7,"div",8),W.YNc(8,ae,7,3,"ng-container",4),W.qZA(),W.BQk()),2&d){const O=v.$implicit;W.xp6(1),W.Q6J("state",W.VKq(3,oe,O.accountId)),W.xp6(5),W.Oqu(O.name),W.xp6(2),W.Q6J("ngForOf",O.orders)}}function X(d,v){if(1&d&&(W.ynx(0),W.YNc(1,ie,9,5,"ng-container",4),W.BQk()),2&d){const O=v.ngIf;W.xp6(1),W.Q6J("ngForOf",O)}}class Z{constructor(v){this.searchStateService=v,this.Moment=ue,this.searchText$=v.select("debouncedSearchText"),this.filteredAccounts$=v.select("debouncedSearchText").pipe((0,$.U)(O=>B.filter(A=>JSON.stringify(A).toLowerCase().indexOf(O.toLowerCase())>=0)))}formatAmount(v){return"$"+v.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}static#e=this.\u0275fac=function(O){return new(O||Z)(W.Y36(re.tx))};static#t=this.\u0275cmp=W.Xpm({type:Z,selectors:[["porrtal-account-search"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:7,vars:6,consts:[[1,"container"],[1,"title"],[1,"data-container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["entityType","account",3,"state"],[1,"link-button",2,"display","grid","grid-template-columns","24px auto"],[2,"margin-left","5px"],[1,"orders-data-container"]],template:function(O,A){1&O&&(W.TgZ(0,"div",0)(1,"h3",1),W._uU(2),W.ALo(3,"async"),W.qZA(),W.TgZ(4,"div",2),W.YNc(5,X,2,1,"ng-container",3),W.ALo(6,"async"),W.qZA()()),2&O&&(W.xp6(2),W.hij("Account Search: ",W.lcZ(3,2,A.searchText$),""),W.xp6(3),W.Q6J("ngIf",W.lcZ(6,4,A.filteredAccounts$)))},dependencies:[D.ez,D.sg,D.O5,D.Ov,U.Ps,U.Hw,x.Ak],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:5px;padding-bottom:4px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px;margin-top:30px}.orders-data-container[_ngcontent-%COMP%]{display:grid;justify-self:start;gap:10px;grid-template-columns:auto auto auto;margin:15px 15px 15px 45px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"],changeDetection:0})}function Q(d,v){if(1&d&&(W.ynx(0),W.TgZ(1,"span"),W._uU(2),W.qZA(),W.TgZ(3,"span"),W._uU(4),W.qZA(),W.TgZ(5,"span"),W._uU(6),W.qZA(),W.BQk()),2&d){const O=v.$implicit,A=W.oxw();W.xp6(2),W.Oqu(O.item),W.xp6(2),W.hij(" ",O.amountText," "),W.xp6(2),W.Oqu(A.Moment(O.date).format("YYYY-DD-MM"))}}class J{constructor(){this.Moment=ue}set viewState(v){if(this._viewState=v,this._viewState?.state&&this._viewState?.state.accountId){const O=this._viewState?.state.accountId;this.account=B.find(A=>A.accountId===O),this.orders=[],this.account&&(this.orders=this.account.orders.map(A=>({...A,amountText:"$"+A.amount.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})))}}get viewState(){return this._viewState}static#e=this.\u0275fac=function(O){return new(O||J)};static#t=this.\u0275cmp=W.Xpm({type:J,selectors:[["porrtal-account-detail"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:5,vars:3,consts:[[1,"container"],[1,"title"],[1,"data-container"],[4,"ngFor","ngForOf"]],template:function(O,A){1&O&&(W.TgZ(0,"div",0)(1,"h3",1),W._uU(2),W.qZA(),W.TgZ(3,"div",2),W.YNc(4,Q,7,3,"ng-container",3),W.qZA()()),2&O&&(W.xp6(2),W.AsE(" ",null==A.account?null:A.account.name," (",null==A.account?null:A.account.accountId,") - Account Detail "),W.xp6(2),W.Q6J("ngForOf",A.orders))},dependencies:[D.ez,D.sg],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:2px;padding-bottom:2px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{display:grid;justify-self:start;gap:10px;grid-template-columns:auto auto auto;margin-left:15px;margin-right:15px;margin-top:15px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"],changeDetection:0})}class se{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||se)};static#t=this.\u0275cmp=W.Xpm({type:se,selectors:[["porrtal-account-billing-history"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"account-billing-history works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class ee{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||ee)};static#t=this.\u0275cmp=W.Xpm({type:ee,selectors:[["porrtal-account-create"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"account-create works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}new(T(61135).X)(void 0);const de=[{appointmentId:1,accountId:1,date:Date.now()+72e5,item:"Kickoff Meeting",description:"Introduction to the development process.",location:"Baker Street Cafe",duration:18e5},{appointmentId:2,accountId:2,date:Date.now()+0,item:"Slide Review",description:"Review the initial slides.",location:"101 18th Street, Suite 100",duration:36e5},{appointmentId:3,accountId:4,date:Date.now()+144e5,item:"Business Overview",description:"Present the Important Business Use Cases",location:"2357 Smith Drive",duration:36e5},{appointmentId:4,accountId:1,date:Date.now()+864e5,item:"Review Screen Mockups",description:"Review the initial screen mockups for the application",location:"Baker Street Cafe",duration:18e5},{appointmentId:5,accountId:2,date:Date.now()+1008e5,item:"Final Slide Review",description:"Review the slides and receive the PowerPoint files",location:"101 18th Street, Suite 100",duration:72e5},{appointmentId:6,accountId:3,date:Date.now()+1728e5,item:"Development Process Overview",description:"Introduction to the development process",location:"Waffles R Us #6",duration:18e5},{appointmentId:7,accountId:4,date:Date.now()+1764e5,item:"Development Process Overview",description:"Introduction to the development process",location:"Waffle House #27",duration:27e5},{appointmentId:8,accountId:5,date:Date.now()+18e7,item:"Computer Inventory",description:"Review current inventory and plan new orders",location:"512 3rd Street, Suite 1520",duration:18e5},{appointmentId:9,accountId:1,date:Date.now()+2592e5,item:"Screen demo",description:"Show screens and collect feedback",location:"Baker Street Cafe",duration:36e5},{appointmentId:10,accountId:4,date:Date.now()+2664e5,item:"Screen demo",description:"Show screens and collect feedback",location:"Waffle House #27",duration:36e5}];function me(d){return d}function ve(d){return"translate("+d+",0)"}function Ce(d){return"translate(0,"+d+")"}function ge(d){return v=>+d(v)}function Te(d,v){return v=Math.max(0,d.bandwidth()-2*v)/2,d.round()&&(v=Math.round(v)),O=>+d(O)+v}function Le(){return!this.__axis}function je(d,v){var O=[],A=null,j=null,te=6,pe=6,be=3,Re=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Ge=1===d||4===d?-1:1,tt=4===d||2===d?"x":"y",ft=1===d||3===d?ve:Ce;function yt(It){var Nt=A??(v.ticks?v.ticks.apply(v,O):v.domain()),Rt=j??(v.tickFormat?v.tickFormat.apply(v,O):me),Jt=Math.max(te,0)+be,jt=v.range(),ir=+jt[0]+Re,or=+jt[jt.length-1]+Re,pr=(v.bandwidth?Te:ge)(v.copy(),Re),Lr=It.selection?It.selection():It,Br=Lr.selectAll(".domain").data([null]),gs=Lr.selectAll(".tick").data(Nt,v).order(),Cs=gs.exit(),Us=gs.enter().append("g").attr("class","tick"),Ks=gs.select("line"),li=gs.select("text");Br=Br.merge(Br.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),gs=gs.merge(Us),Ks=Ks.merge(Us.append("line").attr("stroke","currentColor").attr(tt+"2",Ge*te)),li=li.merge(Us.append("text").attr("fill","currentColor").attr(tt,Ge*Jt).attr("dy",1===d?"0em":3===d?"0.71em":"0.32em")),It!==Lr&&(Br=Br.transition(It),gs=gs.transition(It),Ks=Ks.transition(It),li=li.transition(It),Cs=Cs.transition(It).attr("opacity",1e-6).attr("transform",function(si){return isFinite(si=pr(si))?ft(si+Re):this.getAttribute("transform")}),Us.attr("opacity",1e-6).attr("transform",function(si){var Ei=this.parentNode.__axis;return ft((Ei&&isFinite(Ei=Ei(si))?Ei:pr(si))+Re)})),Cs.remove(),Br.attr("d",4===d||2===d?pe?"M"+Ge*pe+","+ir+"H"+Re+"V"+or+"H"+Ge*pe:"M"+Re+","+ir+"V"+or:pe?"M"+ir+","+Ge*pe+"V"+Re+"H"+or+"V"+Ge*pe:"M"+ir+","+Re+"H"+or),gs.attr("opacity",1).attr("transform",function(si){return ft(pr(si)+Re)}),Ks.attr(tt+"2",Ge*te),li.attr(tt,Ge*Jt).text(Rt),Lr.filter(Le).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===d?"start":4===d?"end":"middle"),Lr.each(function(){this.__axis=pr})}return yt.scale=function(It){return arguments.length?(v=It,yt):v},yt.ticks=function(){return O=Array.from(arguments),yt},yt.tickArguments=function(It){return arguments.length?(O=null==It?[]:Array.from(It),yt):O.slice()},yt.tickValues=function(It){return arguments.length?(A=null==It?null:Array.from(It),yt):A&&A.slice()},yt.tickFormat=function(It){return arguments.length?(j=It,yt):j},yt.tickSize=function(It){return arguments.length?(te=pe=+It,yt):te},yt.tickSizeInner=function(It){return arguments.length?(te=+It,yt):te},yt.tickSizeOuter=function(It){return arguments.length?(pe=+It,yt):pe},yt.tickPadding=function(It){return arguments.length?(be=+It,yt):be},yt.offset=function(It){return arguments.length?(Re=+It,yt):Re},yt}function Be(){}function Pe(d){return null==d?Be:function(){return this.querySelector(d)}}function Ke(d){return null==d?[]:Array.isArray(d)?d:Array.from(d)}function Ve(){return[]}function Ne(d){return null==d?Ve:function(){return this.querySelectorAll(d)}}function Se(d){return function(){return this.matches(d)}}function He(d){return function(v){return v.matches(d)}}var $e=Array.prototype.find;function nt(){return this.firstElementChild}var Xe=Array.prototype.filter;function rt(){return Array.from(this.children)}function Mt(d){return new Array(d.length)}function kt(d,v){this.ownerDocument=d.ownerDocument,this.namespaceURI=d.namespaceURI,this._next=null,this._parent=d,this.__data__=v}function wt(d){return function(){return d}}function zt(d,v,O,A,j,te){for(var be,pe=0,Re=v.length,Ge=te.length;pe<Ge;++pe)(be=v[pe])?(be.__data__=te[pe],A[pe]=be):O[pe]=new kt(d,te[pe]);for(;pe<Re;++pe)(be=v[pe])&&(j[pe]=be)}function Zt(d,v,O,A,j,te,pe){var be,Re,It,Ge=new Map,tt=v.length,ft=te.length,yt=new Array(tt);for(be=0;be<tt;++be)(Re=v[be])&&(yt[be]=It=pe.call(Re,Re.__data__,be,v)+"",Ge.has(It)?j[be]=Re:Ge.set(It,Re));for(be=0;be<ft;++be)It=pe.call(d,te[be],be,te)+"",(Re=Ge.get(It))?(A[be]=Re,Re.__data__=te[be],Ge.delete(It)):O[be]=new kt(d,te[be]);for(be=0;be<tt;++be)(Re=v[be])&&Ge.get(yt[be])===Re&&(j[be]=Re)}function ar(d){return d.__data__}function kr(d){return"object"==typeof d&&"length"in d?d:Array.from(d)}function $t(d,v){return d<v?-1:d>v?1:d>=v?0:NaN}kt.prototype={constructor:kt,appendChild:function(d){return this._parent.insertBefore(d,this._next)},insertBefore:function(d,v){return this._parent.insertBefore(d,v)},querySelector:function(d){return this._parent.querySelector(d)},querySelectorAll:function(d){return this._parent.querySelectorAll(d)}};var Gr="http://www.w3.org/1999/xhtml";const Jr={svg:"http://www.w3.org/2000/svg",xhtml:Gr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ns(d){var v=d+="",O=v.indexOf(":");return O>=0&&"xmlns"!==(v=d.slice(0,O))&&(d=d.slice(O+1)),Jr.hasOwnProperty(v)?{space:Jr[v],local:d}:d}function lr(d){return function(){this.removeAttribute(d)}}function Tr(d){return function(){this.removeAttributeNS(d.space,d.local)}}function zr(d,v){return function(){this.setAttribute(d,v)}}function Tt(d,v){return function(){this.setAttributeNS(d.space,d.local,v)}}function sr(d,v){return function(){var O=v.apply(this,arguments);null==O?this.removeAttribute(d):this.setAttribute(d,O)}}function Rr(d,v){return function(){var O=v.apply(this,arguments);null==O?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,O)}}function Qt(d){return d.ownerDocument&&d.ownerDocument.defaultView||d.document&&d||d.defaultView}function qt(d){return function(){this.style.removeProperty(d)}}function yr(d,v,O){return function(){this.style.setProperty(d,v,O)}}function jr(d,v,O){return function(){var A=v.apply(this,arguments);null==A?this.style.removeProperty(d):this.style.setProperty(d,A,O)}}function hs(d,v){return d.style.getPropertyValue(v)||Qt(d).getComputedStyle(d,null).getPropertyValue(v)}function Is(d){return function(){delete this[d]}}function Yr(d,v){return function(){this[d]=v}}function Rs(d,v){return function(){var O=v.apply(this,arguments);null==O?delete this[d]:this[d]=O}}function Cr(d){return d.trim().split(/^|\s+/)}function as(d){return d.classList||new ps(d)}function ps(d){this._node=d,this._names=Cr(d.getAttribute("class")||"")}function zs(d,v){for(var O=as(d),A=-1,j=v.length;++A<j;)O.add(v[A])}function As(d,v){for(var O=as(d),A=-1,j=v.length;++A<j;)O.remove(v[A])}function Ys(d){return function(){zs(this,d)}}function di(d){return function(){As(this,d)}}function Nr(d,v){return function(){(v.apply(this,arguments)?zs:As)(this,d)}}function ds(){this.textContent=""}function Tn(d){return function(){this.textContent=d}}function Ci(d){return function(){var v=d.apply(this,arguments);this.textContent=v??""}}function Wr(){this.innerHTML=""}function xr(d){return function(){this.innerHTML=d}}function bs(d){return function(){var v=d.apply(this,arguments);this.innerHTML=v??""}}function _i(){this.nextSibling&&this.parentNode.appendChild(this)}function hi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oi(d){return function(){var v=this.ownerDocument,O=this.namespaceURI;return O===Gr&&v.documentElement.namespaceURI===Gr?v.createElement(d):v.createElementNS(O,d)}}function zi(d){return function(){return this.ownerDocument.createElementNS(d.space,d.local)}}function Zr(d){var v=ns(d);return(v.local?zi:Oi)(v)}function yn(){return null}function Dr(){var d=this.parentNode;d&&d.removeChild(this)}function Ir(){var d=this.cloneNode(!1),v=this.parentNode;return v?v.insertBefore(d,this.nextSibling):d}function Ps(){var d=this.cloneNode(!0),v=this.parentNode;return v?v.insertBefore(d,this.nextSibling):d}function Mi(d){return d.trim().split(/^|\s+/).map(function(v){var O="",A=v.indexOf(".");return A>=0&&(O=v.slice(A+1),v=v.slice(0,A)),{type:v,name:O}})}function Xi(d){return function(){var v=this.__on;if(v){for(var te,O=0,A=-1,j=v.length;O<j;++O)te=v[O],d.type&&te.type!==d.type||te.name!==d.name?v[++A]=te:this.removeEventListener(te.type,te.listener,te.options);++A?v.length=A:delete this.__on}}}function Hs(d,v,O){return function(){var j,A=this.__on,te=function Gs(d){return function(v){d.call(this,v,this.__data__)}}(v);if(A)for(var pe=0,be=A.length;pe<be;++pe)if((j=A[pe]).type===d.type&&j.name===d.name)return this.removeEventListener(j.type,j.listener,j.options),this.addEventListener(j.type,j.listener=te,j.options=O),void(j.value=v);this.addEventListener(d.type,te,O),j={type:d.type,name:d.name,value:v,listener:te,options:O},A?A.push(j):this.__on=[j]}}function sn(d,v,O){var A=Qt(d),j=A.CustomEvent;"function"==typeof j?j=new j(v,O):(j=A.document.createEvent("Event"),O?(j.initEvent(v,O.bubbles,O.cancelable),j.detail=O.detail):j.initEvent(v,!1,!1)),d.dispatchEvent(j)}function Uo(d,v){return function(){return sn(this,d,v)}}function Vn(d,v){return function(){return sn(this,d,v.apply(this,arguments))}}ps.prototype={add:function(d){this._names.indexOf(d)<0&&(this._names.push(d),this._node.setAttribute("class",this._names.join(" ")))},remove:function(d){var v=this._names.indexOf(d);v>=0&&(this._names.splice(v,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(d){return this._names.indexOf(d)>=0}};var Gn=[null];function hn(d,v){this._groups=d,this._parents=v}function ya(){return new hn([[document.documentElement]],Gn)}hn.prototype=ya.prototype={constructor:hn,select:function Oe(d){"function"!=typeof d&&(d=Pe(d));for(var v=this._groups,O=v.length,A=new Array(O),j=0;j<O;++j)for(var Re,Ge,te=v[j],pe=te.length,be=A[j]=new Array(pe),tt=0;tt<pe;++tt)(Re=te[tt])&&(Ge=d.call(Re,Re.__data__,tt,te))&&("__data__"in Re&&(Ge.__data__=Re.__data__),be[tt]=Ge);return new hn(A,this._parents)},selectAll:function We(d){d="function"==typeof d?function Ie(d){return function(){return Ke(d.apply(this,arguments))}}(d):Ne(d);for(var v=this._groups,O=v.length,A=[],j=[],te=0;te<O;++te)for(var Re,pe=v[te],be=pe.length,Ge=0;Ge<be;++Ge)(Re=pe[Ge])&&(A.push(d.call(Re,Re.__data__,Ge,pe)),j.push(Re));return new hn(A,j)},selectChild:function it(d){return this.select(null==d?nt:function et(d){return function(){return $e.call(this.children,d)}}("function"==typeof d?d:He(d)))},selectChildren:function lt(d){return this.selectAll(null==d?rt:function Ze(d){return function(){return Xe.call(this.children,d)}}("function"==typeof d?d:He(d)))},filter:function st(d){"function"!=typeof d&&(d=Se(d));for(var v=this._groups,O=v.length,A=new Array(O),j=0;j<O;++j)for(var Re,te=v[j],pe=te.length,be=A[j]=[],Ge=0;Ge<pe;++Ge)(Re=te[Ge])&&d.call(Re,Re.__data__,Ge,te)&&be.push(Re);return new hn(A,this._parents)},data:function Pr(d,v){if(!arguments.length)return Array.from(this,ar);var O=v?Zt:zt,A=this._parents,j=this._groups;"function"!=typeof d&&(d=wt(d));for(var te=j.length,pe=new Array(te),be=new Array(te),Re=new Array(te),Ge=0;Ge<te;++Ge){var tt=A[Ge],ft=j[Ge],yt=ft.length,It=kr(d.call(tt,tt&&tt.__data__,Ge,A)),Nt=It.length,Rt=be[Ge]=new Array(Nt),Jt=pe[Ge]=new Array(Nt),jt=Re[Ge]=new Array(yt);O(tt,ft,Rt,Jt,jt,It,v);for(var pr,Lr,ir=0,or=0;ir<Nt;++ir)if(pr=Rt[ir]){for(ir>=or&&(or=ir+1);!(Lr=Jt[or])&&++or<Nt;);pr._next=Lr||null}}return(pe=new hn(pe,A))._enter=be,pe._exit=Re,pe},enter:function Ft(){return new hn(this._enter||this._groups.map(Mt),this._parents)},exit:function ss(){return new hn(this._exit||this._groups.map(Mt),this._parents)},join:function os(d,v,O){var A=this.enter(),j=this,te=this.exit();return"function"==typeof d?(A=d(A))&&(A=A.selection()):A=A.append(d+""),null!=v&&(j=v(j))&&(j=j.selection()),null==O?te.remove():O(te),A&&j?A.merge(j).order():j},merge:function Hr(d){for(var v=d.selection?d.selection():d,O=this._groups,A=v._groups,j=O.length,pe=Math.min(j,A.length),be=new Array(j),Re=0;Re<pe;++Re)for(var It,Ge=O[Re],tt=A[Re],ft=Ge.length,yt=be[Re]=new Array(ft),Nt=0;Nt<ft;++Nt)(It=Ge[Nt]||tt[Nt])&&(yt[Nt]=It);for(;Re<j;++Re)be[Re]=O[Re];return new hn(be,this._parents)},selection:function Wo(){return this},order:function pt(){for(var d=this._groups,v=-1,O=d.length;++v<O;)for(var pe,A=d[v],j=A.length-1,te=A[j];--j>=0;)(pe=A[j])&&(te&&4^pe.compareDocumentPosition(te)&&te.parentNode.insertBefore(pe,te),te=pe);return this},sort:function Ut(d){function v(ft,yt){return ft&&yt?d(ft.__data__,yt.__data__):!ft-!yt}d||(d=$t);for(var O=this._groups,A=O.length,j=new Array(A),te=0;te<A;++te){for(var Ge,pe=O[te],be=pe.length,Re=j[te]=new Array(be),tt=0;tt<be;++tt)(Ge=pe[tt])&&(Re[tt]=Ge);Re.sort(v)}return new hn(j,this._parents).order()},call:function Xt(){var d=arguments[0];return arguments[0]=this,d.apply(null,arguments),this},nodes:function _r(){return Array.from(this)},node:function hr(){for(var d=this._groups,v=0,O=d.length;v<O;++v)for(var A=d[v],j=0,te=A.length;j<te;++j){var pe=A[j];if(pe)return pe}return null},size:function gr(){let d=0;for(const v of this)++d;return d},empty:function vr(){return!this.node()},each:function Kr(d){for(var v=this._groups,O=0,A=v.length;O<A;++O)for(var be,j=v[O],te=0,pe=j.length;te<pe;++te)(be=j[te])&&d.call(be,be.__data__,te,j);return this},attr:function bt(d,v){var O=ns(d);if(arguments.length<2){var A=this.node();return O.local?A.getAttributeNS(O.space,O.local):A.getAttribute(O)}return this.each((null==v?O.local?Tr:lr:"function"==typeof v?O.local?Rr:sr:O.local?Tt:zr)(O,v))},style:function es(d,v,O){return arguments.length>1?this.each((null==v?qt:"function"==typeof v?jr:yr)(d,v,O??"")):hs(this.node(),d)},property:function Zi(d,v){return arguments.length>1?this.each((null==v?Is:"function"==typeof v?Rs:Yr)(d,v)):this.node()[d]},classed:function Ai(d,v){var O=Cr(d+"");if(arguments.length<2){for(var A=as(this.node()),j=-1,te=O.length;++j<te;)if(!A.contains(O[j]))return!1;return!0}return this.each(("function"==typeof v?Nr:v?Ys:di)(O,v))},text:function gt(d){return arguments.length?this.each(null==d?ds:("function"==typeof d?Ci:Tn)(d)):this.node().textContent},html:function Ns(d){return arguments.length?this.each(null==d?Wr:("function"==typeof d?bs:xr)(d)):this.node().innerHTML},raise:function gi(){return this.each(_i)},lower:function Di(){return this.each(hi)},append:function ii(d){var v="function"==typeof d?d:Zr(d);return this.select(function(){return this.appendChild(v.apply(this,arguments))})},insert:function dr(d,v){var O="function"==typeof d?d:Zr(d),A=null==v?yn:"function"==typeof v?v:Pe(v);return this.select(function(){return this.insertBefore(O.apply(this,arguments),A.apply(this,arguments)||null)})},remove:function er(){return this.each(Dr)},clone:function Ws(d){return this.select(d?Ps:Ir)},datum:function yi(d){return arguments.length?this.property("__data__",d):this.node().__data__},on:function ki(d,v,O){var j,pe,A=Mi(d+""),te=A.length;if(!(arguments.length<2)){for(be=v?Hs:Xi,j=0;j<te;++j)this.each(be(A[j],v,O));return this}var be=this.node().__on;if(be)for(var tt,Re=0,Ge=be.length;Re<Ge;++Re)for(j=0,tt=be[Re];j<te;++j)if((pe=A[j]).type===tt.type&&pe.name===tt.name)return tt.value},dispatch:function io(d,v){return this.each(("function"==typeof v?Vn:Uo)(d,v))},[Symbol.iterator]:function*An(){for(var d=this._groups,v=0,O=d.length;v<O;++v)for(var pe,A=d[v],j=0,te=A.length;j<te;++j)(pe=A[j])&&(yield pe)}};const sa=ya;var ia={value:()=>{}};function nn(){for(var A,d=0,v=arguments.length,O={};d<v;++d){if(!(A=arguments[d]+"")||A in O||/[\s.]/.test(A))throw new Error("illegal type: "+A);O[A]=[]}return new Co(O)}function Co(d){this._=d}function Ja(d,v){return d.trim().split(/^|\s+/).map(function(O){var A="",j=O.indexOf(".");if(j>=0&&(A=O.slice(j+1),O=O.slice(0,j)),O&&!v.hasOwnProperty(O))throw new Error("unknown type: "+O);return{type:O,name:A}})}function Kn(d,v){for(var j,O=0,A=d.length;O<A;++O)if((j=d[O]).name===v)return j.value}function Yn(d,v,O){for(var A=0,j=d.length;A<j;++A)if(d[A].name===v){d[A]=ia,d=d.slice(0,A).concat(d.slice(A+1));break}return null!=O&&d.push({name:v,value:O}),d}Co.prototype=nn.prototype={constructor:Co,on:function(d,v){var j,O=this._,A=Ja(d+"",O),te=-1,pe=A.length;if(!(arguments.length<2)){if(null!=v&&"function"!=typeof v)throw new Error("invalid callback: "+v);for(;++te<pe;)if(j=(d=A[te]).type)O[j]=Yn(O[j],d.name,v);else if(null==v)for(j in O)O[j]=Yn(O[j],d.name,null);return this}for(;++te<pe;)if((j=(d=A[te]).type)&&(j=Kn(O[j],d.name)))return j},copy:function(){var d={},v=this._;for(var O in v)d[O]=v[O].slice();return new Co(d)},call:function(d,v){if((j=arguments.length-2)>0)for(var j,te,O=new Array(j),A=0;A<j;++A)O[A]=arguments[A+2];if(!this._.hasOwnProperty(d))throw new Error("unknown type: "+d);for(A=0,j=(te=this._[d]).length;A<j;++A)te[A].value.apply(v,O)},apply:function(d,v,O){if(!this._.hasOwnProperty(d))throw new Error("unknown type: "+d);for(var A=this._[d],j=0,te=A.length;j<te;++j)A[j].value.apply(v,O)}};const hl=nn;var an,Ln,Sr=0,Ts=0,ys=0,ai=0,Oo=0,Bt=0,Wt="object"==typeof performance&&performance.now?performance:Date,rr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(d){setTimeout(d,17)};function Er(){return Oo||(rr(ur),Oo=Wt.now()+Bt)}function ur(){Oo=0}function Fr(){this._call=this._time=this._next=null}function ls(d,v,O){var A=new Fr;return A.restart(d,v,O),A}function St(){Oo=(ai=Wt.now())+Bt,Sr=Ts=0;try{!function Pt(){Er(),++Sr;for(var v,d=an;d;)(v=Oo-d._time)>=0&&d._call.call(void 0,v),d=d._next;--Sr}()}finally{Sr=0,function qr(){for(var d,O,v=an,A=1/0;v;)v._call?(A>v._time&&(A=v._time),d=v,v=v._next):(O=v._next,v._next=null,v=d?d._next=O:an=O);Ln=d,fs(A)}(),Oo=0}}function mr(){var d=Wt.now(),v=d-ai;v>1e3&&(Bt-=v,ai=d)}function fs(d){Sr||(Ts&&(Ts=clearTimeout(Ts)),d-Oo>24?(d<1/0&&(Ts=setTimeout(St,d-Wt.now()-Bt)),ys&&(ys=clearInterval(ys))):(ys||(ai=Wt.now(),ys=setInterval(mr,1e3)),Sr=1,rr(St)))}function qs(d,v,O){var A=new Fr;return A.restart(j=>{A.stop(),d(j+v)},v=null==v?0:+v,O),A}Fr.prototype=ls.prototype={constructor:Fr,restart:function(d,v,O){if("function"!=typeof d)throw new TypeError("callback is not a function");O=(null==O?Er():+O)+(null==v?0:+v),!this._next&&Ln!==this&&(Ln?Ln._next=this:an=this,Ln=this),this._call=d,this._time=O,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};var wi=hl("start","end","cancel","interrupt"),fn=[];function Xc(d,v,O,A,j,te){var pe=d.__transition;if(pe){if(O in pe)return}else d.__transition={};!function Od(d,v,O){var j,A=d.__transition;function pe(Ge){var tt,ft,yt,It;if(1!==O.state)return Re();for(tt in A)if((It=A[tt]).name===O.name){if(3===It.state)return qs(pe);4===It.state?(It.state=6,It.timer.stop(),It.on.call("interrupt",d,d.__data__,It.index,It.group),delete A[tt]):+tt<v&&(It.state=6,It.timer.stop(),It.on.call("cancel",d,d.__data__,It.index,It.group),delete A[tt])}if(qs(function(){3===O.state&&(O.state=4,O.timer.restart(be,O.delay,O.time),be(Ge))}),O.state=2,O.on.call("start",d,d.__data__,O.index,O.group),2===O.state){for(O.state=3,j=new Array(yt=O.tween.length),tt=0,ft=-1;tt<yt;++tt)(It=O.tween[tt].value.call(d,d.__data__,O.index,O.group))&&(j[++ft]=It);j.length=ft+1}}function be(Ge){for(var tt=Ge<O.duration?O.ease.call(null,Ge/O.duration):(O.timer.restart(Re),O.state=5,1),ft=-1,yt=j.length;++ft<yt;)j[ft].call(d,tt);5===O.state&&(O.on.call("end",d,d.__data__,O.index,O.group),Re())}function Re(){for(var Ge in O.state=6,O.timer.stop(),delete A[v],A)return;delete d.__transition}A[v]=O,O.timer=ls(function te(Ge){O.state=1,O.timer.restart(pe,O.delay,O.time),O.delay<=Ge&&pe(Ge-O.delay)},0,O.time)}(d,O,{name:v,index:A,group:j,on:wi,tween:fn,time:te.time,delay:te.delay,duration:te.duration,ease:te.ease,timer:null,state:0})}function Kl(d,v){var O=_l(d,v);if(O.state>0)throw new Error("too late; already scheduled");return O}function Sl(d,v){var O=_l(d,v);if(O.state>3)throw new Error("too late; already running");return O}function _l(d,v){var O=d.__transition;if(!O||!(O=O[v]))throw new Error("transition not found");return O}function oa(d,v){return d=+d,v=+v,function(O){return d*(1-O)+v*O}}var Oa,Sc=180/Math.PI,Mu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xa(d,v,O,A,j,te){var pe,be,Re;return(pe=Math.sqrt(d*d+v*v))&&(d/=pe,v/=pe),(Re=d*O+v*A)&&(O-=d*Re,A-=v*Re),(be=Math.sqrt(O*O+A*A))&&(O/=be,A/=be,Re/=be),d*A<v*O&&(d=-d,v=-v,Re=-Re,pe=-pe),{translateX:j,translateY:te,rotate:Math.atan2(v,d)*Sc,skewX:Math.atan(Re)*Sc,scaleX:pe,scaleY:be}}function Jd(d,v,O,A){function j(Ge){return Ge.length?Ge.pop()+" ":""}return function(Ge,tt){var ft=[],yt=[];return Ge=d(Ge),tt=d(tt),function te(Ge,tt,ft,yt,It,Nt){if(Ge!==ft||tt!==yt){var Rt=It.push("translate(",null,v,null,O);Nt.push({i:Rt-4,x:oa(Ge,ft)},{i:Rt-2,x:oa(tt,yt)})}else(ft||yt)&&It.push("translate("+ft+v+yt+O)}(Ge.translateX,Ge.translateY,tt.translateX,tt.translateY,ft,yt),function pe(Ge,tt,ft,yt){Ge!==tt?(Ge-tt>180?tt+=360:tt-Ge>180&&(Ge+=360),yt.push({i:ft.push(j(ft)+"rotate(",null,A)-2,x:oa(Ge,tt)})):tt&&ft.push(j(ft)+"rotate("+tt+A)}(Ge.rotate,tt.rotate,ft,yt),function be(Ge,tt,ft,yt){Ge!==tt?yt.push({i:ft.push(j(ft)+"skewX(",null,A)-2,x:oa(Ge,tt)}):tt&&ft.push(j(ft)+"skewX("+tt+A)}(Ge.skewX,tt.skewX,ft,yt),function Re(Ge,tt,ft,yt,It,Nt){if(Ge!==ft||tt!==yt){var Rt=It.push(j(It)+"scale(",null,",",null,")");Nt.push({i:Rt-4,x:oa(Ge,ft)},{i:Rt-2,x:oa(tt,yt)})}else(1!==ft||1!==yt)&&It.push(j(It)+"scale("+ft+","+yt+")")}(Ge.scaleX,Ge.scaleY,tt.scaleX,tt.scaleY,ft,yt),Ge=tt=null,function(It){for(var Jt,Nt=-1,Rt=yt.length;++Nt<Rt;)ft[(Jt=yt[Nt]).i]=Jt.x(It);return ft.join("")}}}var qa=Jd(function Qa(d){const v=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(d+"");return v.isIdentity?Mu:Xa(v.a,v.b,v.c,v.d,v.e,v.f)},"px, ","px)","deg)"),Po=Jd(function Bo(d){return null!=d&&(Oa||(Oa=document.createElementNS("http://www.w3.org/2000/svg","g")),Oa.setAttribute("transform",d),d=Oa.transform.baseVal.consolidate())?Xa((d=d.matrix).a,d.b,d.c,d.d,d.e,d.f):Mu},", ",")",")");function Yl(d,v){var O,A;return function(){var j=Sl(this,d),te=j.tween;if(te!==O)for(var pe=0,be=(A=O=te).length;pe<be;++pe)if(A[pe].name===v){(A=A.slice()).splice(pe,1);break}j.tween=A}}function Zl(d,v,O){var A,j;if("function"!=typeof O)throw new Error;return function(){var te=Sl(this,d),pe=te.tween;if(pe!==A){j=(A=pe).slice();for(var be={name:v,value:O},Re=0,Ge=j.length;Re<Ge;++Re)if(j[Re].name===v){j[Re]=be;break}Re===Ge&&j.push(be)}te.tween=j}}function Ua(d,v,O){var A=d._id;return d.each(function(){var j=Sl(this,A);(j.value||(j.value={}))[v]=O.apply(this,arguments)}),function(j){return _l(j,A).value[v]}}function mo(d,v,O){d.prototype=v.prototype=O,O.constructor=d}function Ko(d,v){var O=Object.create(d.prototype);for(var A in v)O[A]=v[A];return O}function $n(){}var kl=1/.7,uc="\\s*([+-]?\\d+)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xd=/^#([0-9a-f]{3,8})$/,bu=new RegExp(`^rgb\\(${uc},${uc},${uc}\\)$`),Qd=new RegExp(`^rgb\\(${$l},${$l},${$l}\\)$`),qd=new RegExp(`^rgba\\(${uc},${uc},${uc},${Xu}\\)$`),Ha=new RegExp(`^rgba\\(${$l},${$l},${$l},${Xu}\\)$`),Tu=new RegExp(`^hsl\\(${Xu},${$l},${$l}\\)$`),zn=new RegExp(`^hsla\\(${Xu},${$l},${$l},${Xu}\\)$`),Jl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cu(){return this.rgb().formatHex()}function Ou(){return this.rgb().formatRgb()}function Zo(d){var v,O;return d=(d+"").trim().toLowerCase(),(v=Xd.exec(d))?(O=v[1].length,v=parseInt(v[1],16),6===O?Jn(v):3===O?new Da(v>>8&15|v>>4&240,v>>4&15|240&v,(15&v)<<4|15&v,1):8===O?Ac(v>>24&255,v>>16&255,v>>8&255,(255&v)/255):4===O?Ac(v>>12&15|v>>8&240,v>>8&15|v>>4&240,v>>4&15|240&v,((15&v)<<4|15&v)/255):null):(v=bu.exec(d))?new Da(v[1],v[2],v[3],1):(v=Qd.exec(d))?new Da(255*v[1]/100,255*v[2]/100,255*v[3]/100,1):(v=qd.exec(d))?Ac(v[1],v[2],v[3],v[4]):(v=Ha.exec(d))?Ac(255*v[1]/100,255*v[2]/100,255*v[3]/100,v[4]):(v=Tu.exec(d))?qc(v[1],v[2]/100,v[3]/100,1):(v=zn.exec(d))?qc(v[1],v[2]/100,v[3]/100,v[4]):Jl.hasOwnProperty(d)?Jn(Jl[d]):"transparent"===d?new Da(NaN,NaN,NaN,0):null}function Jn(d){return new Da(d>>16&255,d>>8&255,255&d,1)}function Ac(d,v,O,A){return A<=0&&(d=v=O=NaN),new Da(d,v,O,A)}function Ah(d){return d instanceof $n||(d=Zo(d)),d?new Da((d=d.rgb()).r,d.g,d.b,d.opacity):new Da}function Qc(d,v,O,A){return 1===arguments.length?Ah(d):new Da(d,v,O,A??1)}function Da(d,v,O,A){this.r=+d,this.g=+v,this.b=+O,this.opacity=+A}function Qu(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}`}function Ba(){const d=Pu(this.opacity);return`${1===d?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${1===d?")":`, ${d})`}`}function Pu(d){return isNaN(d)?1:Math.max(0,Math.min(1,d))}function Do(d){return Math.max(0,Math.min(255,Math.round(d)||0))}function Al(d){return((d=Do(d))<16?"0":"")+d.toString(16)}function qc(d,v,O,A){return A<=0?d=v=O=NaN:O<=0||O>=1?d=v=NaN:v<=0&&(d=NaN),new jo(d,v,O,A)}function Du(d){if(d instanceof jo)return new jo(d.h,d.s,d.l,d.opacity);if(d instanceof $n||(d=Zo(d)),!d)return new jo;if(d instanceof jo)return d;var v=(d=d.rgb()).r/255,O=d.g/255,A=d.b/255,j=Math.min(v,O,A),te=Math.max(v,O,A),pe=NaN,be=te-j,Re=(te+j)/2;return be?(pe=v===te?(O-A)/be+6*(O<A):O===te?(A-v)/be+2:(v-O)/be+4,be/=Re<.5?te+j:2-te-j,pe*=60):be=Re>0&&Re<1?0:pe,new jo(pe,be,Re,d.opacity)}function jo(d,v,O,A){this.h=+d,this.s=+v,this.l=+O,this.opacity=+A}function el(d){return(d=(d||0)%360)<0?d+360:d}function eu(d){return Math.max(0,Math.min(1,d||0))}function ua(d,v,O){return 255*(d<60?v+(O-v)*d/60:d<180?O:d<240?v+(O-v)*(240-d)/60:v)}function xu(d,v,O,A,j){var te=d*d,pe=te*d;return((1-3*d+3*te-pe)*v+(4-6*te+3*pe)*O+(1+3*d+3*te-3*pe)*A+pe*j)/6}mo($n,Zo,{copy(d){return Object.assign(new this.constructor,this,d)},displayable(){return this.rgb().displayable()},hex:Cu,formatHex:Cu,formatHex8:function Xl(){return this.rgb().formatHex8()},formatHsl:function Yo(){return Du(this).formatHsl()},formatRgb:Ou,toString:Ou}),mo(Da,Qc,Ko($n,{brighter(d){return d=null==d?kl:Math.pow(kl,d),new Da(this.r*d,this.g*d,this.b*d,this.opacity)},darker(d){return d=null==d?.7:Math.pow(.7,d),new Da(this.r*d,this.g*d,this.b*d,this.opacity)},rgb(){return this},clamp(){return new Da(Do(this.r),Do(this.g),Do(this.b),Pu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qu,formatHex:Qu,formatHex8:function dc(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}${Al(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ba,toString:Ba})),mo(jo,function eh(d,v,O,A){return 1===arguments.length?Du(d):new jo(d,v,O,A??1)},Ko($n,{brighter(d){return d=null==d?kl:Math.pow(kl,d),new jo(this.h,this.s,this.l*d,this.opacity)},darker(d){return d=null==d?.7:Math.pow(.7,d),new jo(this.h,this.s,this.l*d,this.opacity)},rgb(){var d=this.h%360+360*(this.h<0),v=isNaN(d)||isNaN(this.s)?0:this.s,O=this.l,A=O+(O<.5?O:1-O)*v,j=2*O-A;return new Da(ua(d>=240?d-240:d+120,j,A),ua(d,j,A),ua(d<120?d+240:d-120,j,A),this.opacity)},clamp(){return new jo(el(this.h),eu(this.s),eu(this.l),Pu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const d=Pu(this.opacity);return`${1===d?"hsl(":"hsla("}${el(this.h)}, ${100*eu(this.s)}%, ${100*eu(this.l)}%${1===d?")":`, ${d})`}`}}));const oo=d=>()=>d;function aa(d,v){var O=v-d;return O?function tu(d,v){return function(O){return d+O*v}}(d,O):oo(isNaN(d)?v:d)}const ru=function d(v){var O=function tl(d){return 1==(d=+d)?aa:function(v,O){return O-v?function th(d,v,O){return d=Math.pow(d,O),v=Math.pow(v,O)-d,O=1/O,function(A){return Math.pow(d+A*v,O)}}(v,O,d):oo(isNaN(v)?O:v)}}(v);function A(j,te){var pe=O((j=Qc(j)).r,(te=Qc(te)).r),be=O(j.g,te.g),Re=O(j.b,te.b),Ge=aa(j.opacity,te.opacity);return function(tt){return j.r=pe(tt),j.g=be(tt),j.b=Re(tt),j.opacity=Ge(tt),j+""}}return A.gamma=d,A}(1);function ko(d){return function(v){var pe,be,O=v.length,A=new Array(O),j=new Array(O),te=new Array(O);for(pe=0;pe<O;++pe)be=Qc(v[pe]),A[pe]=be.r||0,j[pe]=be.g||0,te[pe]=be.b||0;return A=d(A),j=d(j),te=d(te),be.opacity=1,function(Re){return be.r=A(Re),be.g=j(Re),be.b=te(Re),be+""}}}ko(function Pd(d){var v=d.length-1;return function(O){var A=O<=0?O=0:O>=1?(O=1,v-1):Math.floor(O*v),j=d[A],te=d[A+1];return xu((O-A/v)*v,A>0?d[A-1]:2*j-te,j,te,A<v-1?d[A+2]:2*te-j)}}),ko(function qu(d){var v=d.length;return function(O){var A=Math.floor(((O%=1)<0?++O:O)*v);return xu((O-A/v)*v,d[(A+v-1)%v],d[A%v],d[(A+1)%v],d[(A+2)%v])}});var Lc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ql=new RegExp(Lc.source,"g");function rl(d,v){var A,j,te,O=Lc.lastIndex=Ql.lastIndex=0,pe=-1,be=[],Re=[];for(d+="",v+="";(A=Lc.exec(d))&&(j=Ql.exec(v));)(te=j.index)>O&&(te=v.slice(O,te),be[pe]?be[pe]+=te:be[++pe]=te),(A=A[0])===(j=j[0])?be[pe]?be[pe]+=j:be[++pe]=j:(be[++pe]=null,Re.push({i:pe,x:oa(A,j)})),O=Ql.lastIndex;return O<v.length&&(te=v.slice(O),be[pe]?be[pe]+=te:be[++pe]=te),be.length<2?Re[0]?function ed(d){return function(v){return d(v)+""}}(Re[0].x):function pl(d){return function(){return d}}(v):(v=Re.length,function(Ge){for(var ft,tt=0;tt<v;++tt)be[(ft=Re[tt]).i]=ft.x(Ge);return be.join("")})}function ql(d,v){var O;return("number"==typeof v?oa:v instanceof Zo?ru:(O=Zo(v))?(v=O,ru):rl)(d,v)}function wc(d){return function(){this.removeAttribute(d)}}function hc(d){return function(){this.removeAttributeNS(d.space,d.local)}}function fl(d,v,O){var A,te,j=O+"";return function(){var pe=this.getAttribute(d);return pe===j?null:pe===A?te:te=v(A=pe,O)}}function xd(d,v,O){var A,te,j=O+"";return function(){var pe=this.getAttributeNS(d.space,d.local);return pe===j?null:pe===A?te:te=v(A=pe,O)}}function Lh(d,v,O){var A,j,te;return function(){var pe,Re,be=O(this);return null==be?void this.removeAttribute(d):(pe=this.getAttribute(d))===(Re=be+"")?null:pe===A&&Re===j?te:(j=Re,te=v(A=pe,be))}}function Rc(d,v,O){var A,j,te;return function(){var pe,Re,be=O(this);return null==be?void this.removeAttributeNS(d.space,d.local):(pe=this.getAttributeNS(d.space,d.local))===(Re=be+"")?null:pe===A&&Re===j?te:(j=Re,te=v(A=pe,be))}}function Ad(d,v){return function(O){this.setAttribute(d,v.call(this,O))}}function ec(d,v){return function(O){this.setAttributeNS(d.space,d.local,v.call(this,O))}}function Su(d,v){var O,A;function j(){var te=v.apply(this,arguments);return te!==A&&(O=(A=te)&&ec(d,te)),O}return j._value=v,j}function su(d,v){var O,A;function j(){var te=v.apply(this,arguments);return te!==A&&(O=(A=te)&&Ad(d,te)),O}return j._value=v,j}function iu(d,v){return function(){Kl(this,d).delay=+v.apply(this,arguments)}}function sl(d,v){return v=+v,function(){Kl(this,d).delay=v}}function xo(d,v){return function(){Sl(this,d).duration=+v.apply(this,arguments)}}function va(d,v){return v=+v,function(){Sl(this,d).duration=v}}function dt(d,v){if("function"!=typeof v)throw new Error;return function(){Sl(this,d).ease=v}}function Ar(d,v,O){var A,j,te=function fr(d){return(d+"").trim().split(/^|\s+/).every(function(v){var O=v.indexOf(".");return O>=0&&(v=v.slice(0,O)),!v||"start"===v})}(v)?Kl:Sl;return function(){var pe=te(this,d),be=pe.on;be!==A&&(j=(A=be).copy()).on(v,O),pe.on=j}}var ji=sa.prototype.constructor;function wn(d){return function(){this.style.removeProperty(d)}}function wd(d,v,O){return function(A){this.style.setProperty(d,v.call(this,A),O)}}function pc(d,v,O){var A,j;function te(){var pe=v.apply(this,arguments);return pe!==j&&(A=(j=pe)&&wd(d,pe,O)),A}return te._value=v,te}function Lu(d){return function(v){this.textContent=d.call(this,v)}}function rd(d){var v,O;function A(){var j=d.apply(this,arguments);return j!==O&&(v=(O=j)&&Lu(j)),v}return A._value=d,A}var id=0;function ks(d,v,O,A){this._groups=d,this._parents=v,this._name=O,this._id=A}function Ih(){return++id}var xa=sa.prototype;ks.prototype=function O_(d){return sa().transition(d)}.prototype={constructor:ks,select:function Zs(d){var v=this._name,O=this._id;"function"!=typeof d&&(d=Pe(d));for(var A=this._groups,j=A.length,te=new Array(j),pe=0;pe<j;++pe)for(var tt,ft,be=A[pe],Re=be.length,Ge=te[pe]=new Array(Re),yt=0;yt<Re;++yt)(tt=be[yt])&&(ft=d.call(tt,tt.__data__,yt,be))&&("__data__"in tt&&(ft.__data__=tt.__data__),Ge[yt]=ft,Xc(Ge[yt],v,O,yt,Ge,_l(tt,O)));return new ks(te,this._parents,v,O)},selectAll:function Qs(d){var v=this._name,O=this._id;"function"!=typeof d&&(d=Ne(d));for(var A=this._groups,j=A.length,te=[],pe=[],be=0;be<j;++be)for(var tt,Re=A[be],Ge=Re.length,ft=0;ft<Ge;++ft)if(tt=Re[ft]){for(var It,yt=d.call(tt,tt.__data__,ft,Re),Nt=_l(tt,O),Rt=0,Jt=yt.length;Rt<Jt;++Rt)(It=yt[Rt])&&Xc(It,v,O,Rt,yt,Nt);te.push(yt),pe.push(tt)}return new ks(te,pe,v,O)},selectChild:xa.selectChild,selectChildren:xa.selectChildren,filter:function Ot(d){"function"!=typeof d&&(d=Se(d));for(var v=this._groups,O=v.length,A=new Array(O),j=0;j<O;++j)for(var Re,te=v[j],pe=te.length,be=A[j]=[],Ge=0;Ge<pe;++Ge)(Re=te[Ge])&&d.call(Re,Re.__data__,Ge,te)&&be.push(Re);return new ks(A,this._parents,this._name,this._id)},merge:function Kt(d){if(d._id!==this._id)throw new Error;for(var v=this._groups,O=d._groups,A=v.length,te=Math.min(A,O.length),pe=new Array(A),be=0;be<te;++be)for(var yt,Re=v[be],Ge=O[be],tt=Re.length,ft=pe[be]=new Array(tt),It=0;It<tt;++It)(yt=Re[It]||Ge[It])&&(ft[It]=yt);for(;be<A;++be)pe[be]=v[be];return new ks(pe,this._parents,this._name,this._id)},selection:function ln(){return new ji(this._groups,this._parents)},transition:function sd(){for(var d=this._name,v=this._id,O=Ih(),A=this._groups,j=A.length,te=0;te<j;++te)for(var Re,pe=A[te],be=pe.length,Ge=0;Ge<be;++Ge)if(Re=pe[Ge]){var tt=_l(Re,v);Xc(Re,d,O,Ge,pe,{time:tt.time+tt.delay+tt.duration,delay:0,duration:tt.duration,ease:tt.ease})}return new ks(A,this._parents,d,O)},call:xa.call,nodes:xa.nodes,node:xa.node,size:xa.size,empty:xa.empty,each:xa.each,on:function Xr(d,v){var O=this._id;return arguments.length<2?_l(this.node(),O).on.on(d):this.each(Ar(O,d,v))},attr:function Sd(d,v){var O=ns(d),A="transform"===O?Po:ql;return this.attrTween(d,"function"==typeof v?(O.local?Rc:Lh)(O,A,Ua(this,"attr."+d,v)):null==v?(O.local?hc:wc)(O):(O.local?xd:fl)(O,A,v))},attrTween:function Ld(d,v){var O="attr."+d;if(arguments.length<2)return(O=this.tween(O))&&O._value;if(null==v)return this.tween(O,null);if("function"!=typeof v)throw new Error;var A=ns(d);return this.tween(O,(A.local?Su:su)(A,v))},style:function td(d,v,O){var A="transform"==(d+="")?qa:ql;return null==v?this.styleTween(d,function Un(d,v){var O,A,j;return function(){var te=hs(this,d),pe=(this.style.removeProperty(d),hs(this,d));return te===pe?null:te===O&&pe===A?j:j=v(O=te,A=pe)}}(d,A)).on("end.style."+d,wn(d)):"function"==typeof v?this.styleTween(d,function go(d,v,O){var A,j,te;return function(){var pe=hs(this,d),be=O(this),Re=be+"";return null==be&&(this.style.removeProperty(d),Re=be=hs(this,d)),pe===Re?null:pe===A&&Re===j?te:(j=Re,te=v(A=pe,be))}}(d,A,Ua(this,"style."+d,v))).each(function Au(d,v){var O,A,j,be,te="style."+v,pe="end."+te;return function(){var Re=Sl(this,d),Ge=Re.on,tt=null==Re.value[te]?be||(be=wn(v)):void 0;(Ge!==O||j!==tt)&&(A=(O=Ge).copy()).on(pe,j=tt),Re.on=A}}(this._id,d)):this.styleTween(d,function Qi(d,v,O){var A,te,j=O+"";return function(){var pe=hs(this,d);return pe===j?null:pe===A?te:te=v(A=pe,O)}}(d,A,v),O).on("end.style."+d,null)},styleTween:function On(d,v,O){var A="style."+(d+="");if(arguments.length<2)return(A=this.tween(A))&&A._value;if(null==v)return this.tween(A,null);if("function"!=typeof v)throw new Error;return this.tween(A,pc(d,v,O??""))},text:function Rh(d){return this.tween("text","function"==typeof d?function ja(d){return function(){var v=d(this);this.textContent=v??""}}(Ua(this,"text",d)):function wh(d){return function(){this.textContent=d}}(null==d?"":d+""))},textTween:function C_(d){var v="text";if(arguments.length<1)return(v=this.tween(v))&&v._value;if(null==d)return this.tween(v,null);if("function"!=typeof d)throw new Error;return this.tween(v,rd(d))},remove:function ei(){return this.on("end.remove",function Es(d){return function(){var v=this.parentNode;for(var O in this.__transition)if(+O!==d)return;v&&v.removeChild(this)}}(this._id))},tween:function Pa(d,v){var O=this._id;if(d+="",arguments.length<2){for(var pe,A=_l(this.node(),O).tween,j=0,te=A.length;j<te;++j)if((pe=A[j]).name===d)return pe.value;return null}return this.each((null==v?Yl:Zl)(O,d,v))},delay:function il(d){var v=this._id;return arguments.length?this.each(("function"==typeof d?iu:sl)(v,d)):_l(this.node(),v).delay},duration:function _c(d){var v=this._id;return arguments.length?this.each(("function"==typeof d?xo:va)(v,d)):_l(this.node(),v).duration},ease:function xt(d){var v=this._id;return arguments.length?this.each(dt(v,d)):_l(this.node(),v).ease},easeVarying:function ct(d){if("function"!=typeof d)throw new Error;return this.each(function mt(d,v){return function(){var O=v.apply(this,arguments);if("function"!=typeof O)throw new Error;Sl(this,d).ease=O}}(this._id,d))},end:function Fp(){var d,v,O=this,A=O._id,j=O.size();return new Promise(function(te,pe){var be={value:pe},Re={value:function(){0==--j&&te()}};O.each(function(){var Ge=Sl(this,A),tt=Ge.on;tt!==d&&((v=(d=tt).copy())._.cancel.push(be),v._.interrupt.push(be),v._.end.push(Re)),Ge.on=v}),0===j&&te()})},[Symbol.iterator]:xa[Symbol.iterator]};var Hi={time:null,delay:0,duration:250,ease:function sh(d){return((d*=2)<=1?d*d*d:(d-=2)*d*d+2)/2}};function Rd(d,v){for(var O;!(O=d.__transition)||!(O=O[v]);)if(!(d=d.parentNode))throw new Error(`transition ${v} not found`);return O}sa.prototype.interrupt=function xc(d){return this.each(function(){!function na(d,v){var A,j,pe,O=d.__transition,te=!0;if(O){for(pe in v=null==v?null:v+"",O)(A=O[pe]).name===v?(j=A.state>2&&A.state<5,A.state=6,A.timer.stop(),A.on.call(j?"interrupt":"cancel",d,d.__data__,A.index,A.group),delete O[pe]):te=!1;te&&delete d.__transition}}(this,d)})},sa.prototype.transition=function tc(d){var v,O;d instanceof ks?(v=d._id,d=d._name):(v=Ih(),(O=Hi).time=Er(),d=null==d?null:d+"");for(var A=this._groups,j=A.length,te=0;te<j;++te)for(var Re,pe=A[te],be=pe.length,Ge=0;Ge<be;++Ge)(Re=pe[Ge])&&Xc(Re,d,v,Ge,pe,O||Rd(Re,v));return new ks(A,this._parents,d,v)};Math;function rs(d){return{type:d}}function Fa(d,v){return null==d||null==v?NaN:d<v?-1:d>v?1:d>=v?0:NaN}function Np(d,v){return null==d||null==v?NaN:v<d?-1:v>d?1:v>=d?0:NaN}function Fh(d){let v,O,A;function j(be,Re,Ge=0,tt=be.length){if(Ge<tt){if(0!==v(Re,Re))return tt;do{const ft=Ge+tt>>>1;O(be[ft],Re)<0?Ge=ft+1:tt=ft}while(Ge<tt)}return Ge}return 2!==d.length?(v=Fa,O=(be,Re)=>Fa(d(be),Re),A=(be,Re)=>d(be)-Re):(v=d===Fa||d===Np?d:Wp,O=d,A=d),{left:j,center:function pe(be,Re,Ge=0,tt=be.length){const ft=j(be,Re,Ge,tt-1);return ft>Ge&&A(be[ft-1],Re)>-A(be[ft],Re)?ft-1:ft},right:function te(be,Re,Ge=0,tt=be.length){if(Ge<tt){if(0!==v(Re,Re))return tt;do{const ft=Ge+tt>>>1;O(be[ft],Re)<=0?Ge=ft+1:tt=ft}while(Ge<tt)}return Ge}}}function Wp(){return 0}["w","e"].map(rs),["n","s"].map(rs),["n","w","e","s","nw","ne","sw","se"].map(rs);var ih=Math.sqrt(50),D_=Math.sqrt(10),Vp=Math.sqrt(2);function zp(d,v,O){var A=Math.abs(v-d)/Math.max(0,O),j=Math.pow(10,Math.floor(Math.log(A)/Math.LN10)),te=A/j;return te>=ih?j*=10:te>=D_?j*=5:te>=Vp&&(j*=2),v<d?-j:j}const Ma=1e3,da=6e4,ol=60*da,Ru=24*ol,Hp=7*Ru,Gp=30*Ru,Kp=365*Ru;var Yp=new Date,Zp=new Date;function Sa(d,v,O,A){function j(te){return d(te=0===arguments.length?new Date:new Date(+te)),te}return j.floor=function(te){return d(te=new Date(+te)),te},j.ceil=function(te){return d(te=new Date(te-1)),v(te,1),d(te),te},j.round=function(te){var pe=j(te),be=j.ceil(te);return te-pe<be-te?pe:be},j.offset=function(te,pe){return v(te=new Date(+te),null==pe?1:Math.floor(pe)),te},j.range=function(te,pe,be){var Ge,Re=[];if(te=j.ceil(te),be=null==be?1:Math.floor(be),!(te<pe&&be>0))return Re;do{Re.push(Ge=new Date(+te)),v(te,be),d(te)}while(Ge<te&&te<pe);return Re},j.filter=function(te){return Sa(function(pe){if(pe>=pe)for(;d(pe),!te(pe);)pe.setTime(pe-1)},function(pe,be){if(pe>=pe)if(be<0)for(;++be<=0;)for(;v(pe,-1),!te(pe););else for(;--be>=0;)for(;v(pe,1),!te(pe););})},O&&(j.count=function(te,pe){return Yp.setTime(+te),Zp.setTime(+pe),d(Yp),d(Zp),Math.floor(O(Yp,Zp))},j.every=function(te){return te=Math.floor(te),isFinite(te)&&te>0?te>1?j.filter(A?function(pe){return A(pe)%te==0}:function(pe){return j.count(0,pe)%te==0}):j:null}),j}var nh=Sa(function(){},function(d,v){d.setTime(+d+v)},function(d,v){return v-d});nh.every=function(d){return d=Math.floor(d),isFinite(d)&&d>0?d>1?Sa(function(v){v.setTime(Math.floor(v/d)*d)},function(v,O){v.setTime(+v+O*d)},function(v,O){return(O-v)/d}):nh:null};const la=nh;var nd=Sa(function(d){d.setTime(d-d.getMilliseconds())},function(d,v){d.setTime(+d+v*Ma)},function(d,v){return(v-d)/Ma},function(d){return d.getUTCSeconds()});const Ic=nd;var Qo=Sa(function(d){d.setTime(d-d.getMilliseconds()-d.getSeconds()*Ma)},function(d,v){d.setTime(+d+v*da)},function(d,v){return(v-d)/da},function(d){return d.getMinutes()});const od=Qo;var Ll=Sa(function(d){d.setTime(d-d.getMilliseconds()-d.getSeconds()*Ma-d.getMinutes()*da)},function(d,v){d.setTime(+d+v*ol)},function(d,v){return(v-d)/ol},function(d){return d.getHours()});const Uc=Ll;var Ye=Sa(d=>d.setHours(0,0,0,0),(d,v)=>d.setDate(d.getDate()+v),(d,v)=>(v-d-(v.getTimezoneOffset()-d.getTimezoneOffset())*da)/Ru,d=>d.getDate()-1);const ut=Ye;function Vt(d){return Sa(function(v){v.setDate(v.getDate()-(v.getDay()+7-d)%7),v.setHours(0,0,0,0)},function(v,O){v.setDate(v.getDate()+7*O)},function(v,O){return(O-v-(O.getTimezoneOffset()-v.getTimezoneOffset())*da)/Hp})}var cr=Vt(0),$r=Vt(1),vn=(Vt(2),Vt(3),Vt(4)),wy=(Vt(5),Vt(6),Sa(function(d){d.setDate(1),d.setHours(0,0,0,0)},function(d,v){d.setMonth(d.getMonth()+v)},function(d,v){return v.getMonth()-d.getMonth()+12*(v.getFullYear()-d.getFullYear())},function(d){return d.getMonth()}));const Ry=wy;var Pm=Sa(function(d){d.setMonth(0,1),d.setHours(0,0,0,0)},function(d,v){d.setFullYear(d.getFullYear()+v)},function(d,v){return v.getFullYear()-d.getFullYear()},function(d){return d.getFullYear()});Pm.every=function(d){return isFinite(d=Math.floor(d))&&d>0?Sa(function(v){v.setFullYear(Math.floor(v.getFullYear()/d)*d),v.setMonth(0,1),v.setHours(0,0,0,0)},function(v,O){v.setFullYear(v.getFullYear()+O*d)}):null};const Wh=Pm;var Iy=Sa(function(d){d.setUTCSeconds(0,0)},function(d,v){d.setTime(+d+v*da)},function(d,v){return(v-d)/da},function(d){return d.getUTCMinutes()});const VE=Iy;var Uy=Sa(function(d){d.setUTCMinutes(0,0,0)},function(d,v){d.setTime(+d+v*ol)},function(d,v){return(v-d)/ol},function(d){return d.getUTCHours()});const zE=Uy;var ml=Sa(function(d){d.setUTCHours(0,0,0,0)},function(d,v){d.setUTCDate(d.getUTCDate()+v)},function(d,v){return(v-d)/Ru},function(d){return d.getUTCDate()-1});const ha=ml;function ah(d){return Sa(function(v){v.setUTCDate(v.getUTCDate()-(v.getUTCDay()+7-d)%7),v.setUTCHours(0,0,0,0)},function(v,O){v.setUTCDate(v.getUTCDate()+7*O)},function(v,O){return(O-v)/Hp})}var xm=ah(0),kp=ah(1),x_=(ah(2),ah(3),ah(4)),Iu=(ah(5),ah(6),Sa(function(d){d.setUTCDate(1),d.setUTCHours(0,0,0,0)},function(d,v){d.setUTCMonth(d.getUTCMonth()+v)},function(d,v){return v.getUTCMonth()-d.getUTCMonth()+12*(v.getUTCFullYear()-d.getUTCFullYear())},function(d){return d.getUTCMonth()}));const H0=Iu;var G0=Sa(function(d){d.setUTCMonth(0,1),d.setUTCHours(0,0,0,0)},function(d,v){d.setUTCFullYear(d.getUTCFullYear()+v)},function(d,v){return v.getUTCFullYear()-d.getUTCFullYear()},function(d){return d.getUTCFullYear()});G0.every=function(d){return isFinite(d=Math.floor(d))&&d>0?Sa(function(v){v.setUTCFullYear(Math.floor(v.getUTCFullYear()/d)*d),v.setUTCMonth(0,1),v.setUTCHours(0,0,0,0)},function(v,O){v.setUTCFullYear(v.getUTCFullYear()+O*d)}):null};const Bc=G0;function yl(d,v,O,A,j,te){const pe=[[Ic,1,Ma],[Ic,5,5e3],[Ic,15,15e3],[Ic,30,3e4],[te,1,da],[te,5,5*da],[te,15,15*da],[te,30,30*da],[j,1,ol],[j,3,3*ol],[j,6,6*ol],[j,12,12*ol],[A,1,Ru],[A,2,2*Ru],[O,1,Hp],[v,1,Gp],[v,3,3*Gp],[d,1,Kp]];function Re(Ge,tt,ft){const yt=Math.abs(tt-Ge)/ft,It=Fh(([,,Jt])=>Jt).right(pe,yt);if(It===pe.length)return d.every(zp(Ge/Kp,tt/Kp,ft));if(0===It)return la.every(Math.max(zp(Ge,tt,ft),1));const[Nt,Rt]=pe[yt/pe[It-1][2]<pe[It][2]/yt?It-1:It];return Nt.every(Rt)}return[function be(Ge,tt,ft){const yt=tt<Ge;yt&&([Ge,tt]=[tt,Ge]);const It=ft&&"function"==typeof ft.range?ft:Re(Ge,tt,ft),Nt=It?It.range(Ge,+tt+1):[];return yt?Nt.reverse():Nt},Re]}const[uO,dO]=yl(Bc,H0,xm,ha,zE,VE),[jy,hO]=yl(Wh,Ry,cr,ut,Uc,od);function K0(d){if(0<=d.y&&d.y<100){var v=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return v.setFullYear(d.y),v}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function Sm(d){if(0<=d.y&&d.y<100){var v=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return v.setUTCFullYear(d.y),v}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function lh(d,v,O){return{y:d,m:v,d:O,H:0,M:0,S:0,L:0}}var $0,vO,Me={"-":"",_:" ",0:"0"},Ue=/^\s*\d+/,ke=/^%/,ot=/[\\^$*+?|[\]().{}]/g;function vt(d,v,O){var A=d<0?"-":"",j=(A?-d:d)+"",te=j.length;return A+(te<O?new Array(O-te+1).join(v)+j:j)}function Lt(d){return d.replace(ot,"\\$&")}function Yt(d){return new RegExp("^(?:"+d.map(Lt).join("|")+")","i")}function tr(d){return new Map(d.map((v,O)=>[v.toLowerCase(),O]))}function Or(d,v,O){var A=Ue.exec(v.slice(O,O+1));return A?(d.w=+A[0],O+A[0].length):-1}function Qr(d,v,O){var A=Ue.exec(v.slice(O,O+1));return A?(d.u=+A[0],O+A[0].length):-1}function Vr(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.U=+A[0],O+A[0].length):-1}function is(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.V=+A[0],O+A[0].length):-1}function us(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.W=+A[0],O+A[0].length):-1}function _s(d,v,O){var A=Ue.exec(v.slice(O,O+4));return A?(d.y=+A[0],O+A[0].length):-1}function Vs(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.y=+A[0]+(+A[0]>68?1900:2e3),O+A[0].length):-1}function Ri(d,v,O){var A=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(v.slice(O,O+6));return A?(d.Z=A[1]?0:-(A[2]+(A[3]||"00")),O+A[0].length):-1}function Fi(d,v,O){var A=Ue.exec(v.slice(O,O+1));return A?(d.q=3*A[0]-3,O+A[0].length):-1}function bi(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.m=A[0]-1,O+A[0].length):-1}function pi(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.d=+A[0],O+A[0].length):-1}function Dn(d,v,O){var A=Ue.exec(v.slice(O,O+3));return A?(d.m=0,d.d=+A[0],O+A[0].length):-1}function qi(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.H=+A[0],O+A[0].length):-1}function kn(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.M=+A[0],O+A[0].length):-1}function En(d,v,O){var A=Ue.exec(v.slice(O,O+2));return A?(d.S=+A[0],O+A[0].length):-1}function ho(d,v,O){var A=Ue.exec(v.slice(O,O+3));return A?(d.L=+A[0],O+A[0].length):-1}function Nn(d,v,O){var A=Ue.exec(v.slice(O,O+6));return A?(d.L=Math.floor(A[0]/1e3),O+A[0].length):-1}function Qn(d,v,O){var A=ke.exec(v.slice(O,O+1));return A?O+A[0].length:-1}function vl(d,v,O){var A=Ue.exec(v.slice(O));return A?(d.Q=+A[0],O+A[0].length):-1}function zo(d,v,O){var A=Ue.exec(v.slice(O));return A?(d.s=+A[0],O+A[0].length):-1}function gc(d,v){return vt(d.getDate(),v,2)}function ld(d,v){return vt(d.getHours(),v,2)}function $p(d,v){return vt(d.getHours()%12||12,v,2)}function Jp(d,v){return vt(1+ut.count(Wh(d),d),v,3)}function Y0(d,v){return vt(d.getMilliseconds(),v,3)}function Z0(d,v){return Y0(d,v)+"000"}function ZE(d,v){return vt(d.getMonth()+1,v,2)}function Am(d,v){return vt(d.getMinutes(),v,2)}function Lm(d,v){return vt(d.getSeconds(),v,2)}function k0(d){var v=d.getDay();return 0===v?7:v}function wm(d,v){return vt(cr.count(Wh(d)-1,d),v,2)}function S_(d){var v=d.getDay();return v>=4||0===v?vn(d):vn.ceil(d)}function Rm(d,v){return d=S_(d),vt(vn.count(Wh(d),d)+(4===Wh(d).getDay()),v,2)}function Xp(d){return d.getDay()}function Im(d,v){return vt($r.count(Wh(d)-1,d),v,2)}function Um(d,v){return vt(d.getFullYear()%100,v,2)}function kE(d,v){return vt((d=S_(d)).getFullYear()%100,v,2)}function $E(d,v){return vt(d.getFullYear()%1e4,v,4)}function JE(d,v){var O=d.getDay();return vt((d=O>=4||0===O?vn(d):vn.ceil(d)).getFullYear()%1e4,v,4)}function TL(d){var v=d.getTimezoneOffset();return(v>0?"-":(v*=-1,"+"))+vt(v/60|0,"0",2)+vt(v%60,"0",2)}function _O(d,v){return vt(d.getUTCDate(),v,2)}function CL(d,v){return vt(d.getUTCHours(),v,2)}function OL(d,v){return vt(d.getUTCHours()%12||12,v,2)}function PL(d,v){return vt(1+ha.count(Bc(d),d),v,3)}function pO(d,v){return vt(d.getUTCMilliseconds(),v,3)}function DL(d,v){return pO(d,v)+"000"}function xL(d,v){return vt(d.getUTCMonth()+1,v,2)}function SL(d,v){return vt(d.getUTCMinutes(),v,2)}function AL(d,v){return vt(d.getUTCSeconds(),v,2)}function LL(d){var v=d.getUTCDay();return 0===v?7:v}function wL(d,v){return vt(xm.count(Bc(d)-1,d),v,2)}function fO(d){var v=d.getUTCDay();return v>=4||0===v?x_(d):x_.ceil(d)}function RL(d,v){return d=fO(d),vt(x_.count(Bc(d),d)+(4===Bc(d).getUTCDay()),v,2)}function IL(d){return d.getUTCDay()}function UL(d,v){return vt(kp.count(Bc(d)-1,d),v,2)}function BL(d,v){return vt(d.getUTCFullYear()%100,v,2)}function jL(d,v){return vt((d=fO(d)).getUTCFullYear()%100,v,2)}function FL(d,v){return vt(d.getUTCFullYear()%1e4,v,4)}function NL(d,v){var O=d.getUTCDay();return vt((d=O>=4||0===O?x_(d):x_.ceil(d)).getUTCFullYear()%1e4,v,4)}function WL(){return"+0000"}function mO(){return"%"}function gO(d){return+d}function yO(d){return Math.floor(+d/1e3)}!function GL(d){$0=function Ct(d){var v=d.dateTime,O=d.date,A=d.time,j=d.periods,te=d.days,pe=d.shortDays,be=d.months,Re=d.shortMonths,Ge=Yt(j),tt=tr(j),ft=Yt(te),yt=tr(te),It=Yt(pe),Nt=tr(pe),Rt=Yt(be),Jt=tr(be),jt=Yt(Re),ir=tr(Re),or={a:function ms(Bs){return pe[Bs.getDay()]},A:function ws(Bs){return te[Bs.getDay()]},b:function Ss(Bs){return Re[Bs.getMonth()]},B:function Fs(Bs){return be[Bs.getMonth()]},c:null,d:gc,e:gc,f:Z0,g:kE,G:JE,H:ld,I:$p,j:Jp,L:Y0,m:ZE,M:Am,p:function ci(Bs){return j[+(Bs.getHours()>=12)]},q:function Xs(Bs){return 1+~~(Bs.getMonth()/3)},Q:gO,s:yO,S:Lm,u:k0,U:wm,V:Rm,w:Xp,W:Im,x:null,X:null,y:Um,Y:$E,Z:TL,"%":mO},pr={a:function xs(Bs){return pe[Bs.getUTCDay()]},A:function Js(Bs){return te[Bs.getUTCDay()]},b:function xi(Bs){return Re[Bs.getUTCMonth()]},B:function Ii(Bs){return be[Bs.getUTCMonth()]},c:null,d:_O,e:_O,f:DL,g:jL,G:NL,H:CL,I:OL,j:PL,L:pO,m:xL,M:SL,p:function Si(Bs){return j[+(Bs.getUTCHours()>=12)]},q:function Bi(Bs){return 1+~~(Bs.getUTCMonth()/3)},Q:gO,s:yO,S:AL,u:LL,U:wL,V:RL,w:IL,W:UL,x:null,X:null,y:BL,Y:FL,Z:WL,"%":mO},Lr={a:function Ks(Bs,mi,Ni){var js=It.exec(mi.slice(Ni));return js?(Bs.w=Nt.get(js[0].toLowerCase()),Ni+js[0].length):-1},A:function li(Bs,mi,Ni){var js=ft.exec(mi.slice(Ni));return js?(Bs.w=yt.get(js[0].toLowerCase()),Ni+js[0].length):-1},b:function si(Bs,mi,Ni){var js=jt.exec(mi.slice(Ni));return js?(Bs.m=ir.get(js[0].toLowerCase()),Ni+js[0].length):-1},B:function Ei(Bs,mi,Ni){var js=Rt.exec(mi.slice(Ni));return js?(Bs.m=Jt.get(js[0].toLowerCase()),Ni+js[0].length):-1},c:function ts(Bs,mi,Ni){return Cs(Bs,v,mi,Ni)},d:pi,e:pi,f:Nn,g:Vs,G:_s,H:qi,I:qi,j:Dn,L:ho,m:bi,M:kn,p:function Us(Bs,mi,Ni){var js=Ge.exec(mi.slice(Ni));return js?(Bs.p=tt.get(js[0].toLowerCase()),Ni+js[0].length):-1},q:Fi,Q:vl,s:zo,S:En,u:Qr,U:Vr,V:is,w:Or,W:us,x:function $s(Bs,mi,Ni){return Cs(Bs,O,mi,Ni)},X:function Ms(Bs,mi,Ni){return Cs(Bs,A,mi,Ni)},y:Vs,Y:_s,Z:Ri,"%":Qn};function Br(Bs,mi){return function(Ni){var gn,Pi,jn,js=[],In=-1,Vi=0,Sn=Bs.length;for(Ni instanceof Date||(Ni=new Date(+Ni));++In<Sn;)37===Bs.charCodeAt(In)&&(js.push(Bs.slice(Vi,In)),null!=(Pi=Me[gn=Bs.charAt(++In)])?gn=Bs.charAt(++In):Pi="e"===gn?" ":"0",(jn=mi[gn])&&(gn=jn(Ni,Pi)),js.push(gn),Vi=In+1);return js.push(Bs.slice(Vi,In)),js.join("")}}function gs(Bs,mi){return function(Ni){var Vi,Sn,js=lh(1900,void 0,1);if(Cs(js,Bs,Ni+="",0)!=Ni.length)return null;if("Q"in js)return new Date(js.Q);if("s"in js)return new Date(1e3*js.s+("L"in js?js.L:0));if(mi&&!("Z"in js)&&(js.Z=0),"p"in js&&(js.H=js.H%12+12*js.p),void 0===js.m&&(js.m="q"in js?js.q:0),"V"in js){if(js.V<1||js.V>53)return null;"w"in js||(js.w=1),"Z"in js?(Sn=(Vi=Sm(lh(js.y,0,1))).getUTCDay(),Vi=Sn>4||0===Sn?kp.ceil(Vi):kp(Vi),Vi=ha.offset(Vi,7*(js.V-1)),js.y=Vi.getUTCFullYear(),js.m=Vi.getUTCMonth(),js.d=Vi.getUTCDate()+(js.w+6)%7):(Sn=(Vi=K0(lh(js.y,0,1))).getDay(),Vi=Sn>4||0===Sn?$r.ceil(Vi):$r(Vi),Vi=ut.offset(Vi,7*(js.V-1)),js.y=Vi.getFullYear(),js.m=Vi.getMonth(),js.d=Vi.getDate()+(js.w+6)%7)}else("W"in js||"U"in js)&&("w"in js||(js.w="u"in js?js.u%7:"W"in js?1:0),Sn="Z"in js?Sm(lh(js.y,0,1)).getUTCDay():K0(lh(js.y,0,1)).getDay(),js.m=0,js.d="W"in js?(js.w+6)%7+7*js.W-(Sn+5)%7:js.w+7*js.U-(Sn+6)%7);return"Z"in js?(js.H+=js.Z/100|0,js.M+=js.Z%100,Sm(js)):K0(js)}}function Cs(Bs,mi,Ni,js){for(var gn,Pi,In=0,Vi=mi.length,Sn=Ni.length;In<Vi;){if(js>=Sn)return-1;if(37===(gn=mi.charCodeAt(In++))){if(gn=mi.charAt(In++),!(Pi=Lr[gn in Me?mi.charAt(In++):gn])||(js=Pi(Bs,Ni,js))<0)return-1}else if(gn!=Ni.charCodeAt(js++))return-1}return js}return or.x=Br(O,or),or.X=Br(A,or),or.c=Br(v,or),pr.x=Br(O,pr),pr.X=Br(A,pr),pr.c=Br(v,pr),{format:function(Bs){var mi=Br(Bs+="",or);return mi.toString=function(){return Bs},mi},parse:function(Bs){var mi=gs(Bs+="",!1);return mi.toString=function(){return Bs},mi},utcFormat:function(Bs){var mi=Br(Bs+="",pr);return mi.toString=function(){return Bs},mi},utcParse:function(Bs){var mi=gs(Bs+="",!0);return mi.toString=function(){return Bs},mi}}}(d),vO=$0.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const YL=Fh(Fa).right,ZL=(Fh(function KL(d){return null===d?NaN:+d}),YL);function MO(d,v){var pe,O=v?v.length:0,A=d?Math.min(O,d.length):0,j=new Array(A),te=new Array(O);for(pe=0;pe<A;++pe)j[pe]=XE(d[pe],v[pe]);for(;pe<O;++pe)te[pe]=v[pe];return function(be){for(pe=0;pe<A;++pe)te[pe]=j[pe](be);return te}}function kL(d,v){var O=new Date;return d=+d,v=+v,function(A){return O.setTime(d*(1-A)+v*A),O}}function $L(d,v){var j,O={},A={};for(j in(null===d||"object"!=typeof d)&&(d={}),(null===v||"object"!=typeof v)&&(v={}),v)j in d?O[j]=XE(d[j],v[j]):A[j]=v[j];return function(te){for(j in O)A[j]=O[j](te);return A}}function JL(d,v){v||(v=[]);var j,O=d?Math.min(v.length,d.length):0,A=v.slice();return function(te){for(j=0;j<O;++j)A[j]=d[j]*(1-te)+v[j]*te;return A}}function XE(d,v){var A,O=typeof v;return null==v||"boolean"===O?oo(v):("number"===O?oa:"string"===O?(A=Zo(v))?(v=A,ru):rl:v instanceof Zo?ru:v instanceof Date?kL:function XL(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)}(v)?JL:Array.isArray(v)?MO:"function"!=typeof v.valueOf&&"function"!=typeof v.toString||isNaN(v)?$L:oa)(d,v)}function QL(d,v){return d=+d,v=+v,function(O){return Math.round(d*(1-O)+v*O)}}function ew(d){return+d}var bO=[0,1];function J0(d){return d}function QE(d,v){return(v-=d=+d)?function(O){return(O-d)/v}:function qL(d){return function(){return d}}(isNaN(v)?NaN:.5)}function rw(d,v,O){var A=d[0],j=d[1],te=v[0],pe=v[1];return j<A?(A=QE(j,A),te=O(pe,te)):(A=QE(A,j),te=O(te,pe)),function(be){return te(A(be))}}function sw(d,v,O){var A=Math.min(d.length,v.length)-1,j=new Array(A),te=new Array(A),pe=-1;for(d[A]<d[0]&&(d=d.slice().reverse(),v=v.slice().reverse());++pe<A;)j[pe]=QE(d[pe],d[pe+1]),te[pe]=O(v[pe],v[pe+1]);return function(be){var Re=ZL(d,be,1,A)-1;return te[Re](j[Re](be))}}function aw(d,v){switch(arguments.length){case 0:break;case 1:this.range(d);break;default:this.range(v).domain(d)}return this}function cw(d){return new Date(d)}function uw(d){return d instanceof Date?+d:+new Date(+d)}function TO(d,v,O,A,j,te,pe,be,Re,Ge){var tt=function ow(){return function nw(){var A,j,te,be,Re,Ge,d=bO,v=bO,O=XE,pe=J0;function tt(){var yt=Math.min(d.length,v.length);return pe!==J0&&(pe=function tw(d,v){var O;return d>v&&(O=d,d=v,v=O),function(A){return Math.max(d,Math.min(v,A))}}(d[0],d[yt-1])),be=yt>2?sw:rw,Re=Ge=null,ft}function ft(yt){return null==yt||isNaN(yt=+yt)?te:(Re||(Re=be(d.map(A),v,O)))(A(pe(yt)))}return ft.invert=function(yt){return pe(j((Ge||(Ge=be(v,d.map(A),oa)))(yt)))},ft.domain=function(yt){return arguments.length?(d=Array.from(yt,ew),tt()):d.slice()},ft.range=function(yt){return arguments.length?(v=Array.from(yt),tt()):v.slice()},ft.rangeRound=function(yt){return v=Array.from(yt),O=QL,tt()},ft.clamp=function(yt){return arguments.length?(pe=!!yt||J0,tt()):pe!==J0},ft.interpolate=function(yt){return arguments.length?(O=yt,tt()):O},ft.unknown=function(yt){return arguments.length?(te=yt,ft):te},function(yt,It){return A=yt,j=It,tt()}}()(J0,J0)}(),ft=tt.invert,yt=tt.domain,It=Ge(".%L"),Nt=Ge(":%S"),Rt=Ge("%I:%M"),Jt=Ge("%I %p"),jt=Ge("%a %d"),ir=Ge("%b %d"),or=Ge("%B"),pr=Ge("%Y");function Lr(Br){return(Re(Br)<Br?It:be(Br)<Br?Nt:pe(Br)<Br?Rt:te(Br)<Br?Jt:A(Br)<Br?j(Br)<Br?jt:ir:O(Br)<Br?or:pr)(Br)}return tt.invert=function(Br){return new Date(ft(Br))},tt.domain=function(Br){return arguments.length?yt(Array.from(Br,uw)):yt().map(cw)},tt.ticks=function(Br){var gs=yt();return d(gs[0],gs[gs.length-1],Br??10)},tt.tickFormat=function(Br,gs){return null==gs?Lr:Ge(gs)},tt.nice=function(Br){var gs=yt();return(!Br||"function"!=typeof Br.range)&&(Br=v(gs[0],gs[gs.length-1],Br??10)),Br?yt(function lw(d,v){var pe,O=0,A=(d=d.slice()).length-1,j=d[O],te=d[A];return te<j&&(pe=O,O=A,A=pe,pe=j,j=te,te=pe),d[O]=v.floor(j),d[A]=v.ceil(te),d}(gs,Br)):tt},tt.copy=function(){return function iw(d,v){return v.domain(d.domain()).range(d.range()).interpolate(d.interpolate()).clamp(d.clamp()).unknown(d.unknown())}(tt,TO(d,v,O,A,j,te,pe,be,Re,Ge))},tt}function CO(d){return"string"==typeof d?new hn([[document.querySelector(d)]],[document.documentElement]):new hn([[d]],Gn)}function X0(d,v,O){this.k=d,this.x=v,this.y=O}X0.prototype={constructor:X0,scale:function(d){return 1===d?this:new X0(this.k*d,this.x,this.y)},translate:function(d,v){return 0===d&0===v?this:new X0(this.k,this.x+this.k*d,this.y+this.k*v)},apply:function(d){return[d[0]*this.k+this.x,d[1]*this.k+this.y]},applyX:function(d){return d*this.k+this.x},applyY:function(d){return d*this.k+this.y},invert:function(d){return[(d[0]-this.x)/this.k,(d[1]-this.y)/this.k]},invertX:function(d){return(d-this.x)/this.k},invertY:function(d){return(d-this.y)/this.k},rescaleX:function(d){return d.copy().domain(d.range().map(this.invertX,this).map(d.invert,d))},rescaleY:function(d){return d.copy().domain(d.range().map(this.invertY,this).map(d.invert,d))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new X0(1,0,0);const vw=["containerRef"];class Fy{constructor(v){this.shellStateService=v,this.startTime=36e5*Math.floor(Date.now()/36e5)-108e5,this.scheduleProps={margin:{top:30,right:30,bottom:30,left:50},width:180,height:400,barWidth:150,nowColor:"#EA4335",barStyle:{background:"#616161",textColor:"white",width:300,startPadding:2,endPadding:3,radius:3}}}ngAfterViewInit(){this.loadChart()}loadChart(){if(this.divRef){console.log("drawing daily schedule",this.divRef.nativeElement),CO(this.divRef.nativeElement).select("svg").remove();const v=CO(this.divRef.nativeElement).append("svg").attr("width",this.scheduleProps.width).attr("height",this.scheduleProps.height),O=de.filter(A=>A.date>this.startTime&&A.date<this.startTime+324e5);if(O){const A=this.startTime,j=this.startTime+324e5;if(A&&j){const te=function dw(){return aw.apply(TO(jy,hO,Wh,Ry,cr,ut,Uc,od,Ic,vO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([A,j]).range([this.scheduleProps.margin.top,this.scheduleProps.height-this.scheduleProps.margin.bottom]),pe=function we(d){return je(4,d)}(te).ticks(24);v.append("g").attr("transform",`translate(${this.scheduleProps.margin.left},0)`).attr("opacity",.5).call(pe);const be=function Ee(d){return je(2,d)}(te).ticks(24).tickSize(this.scheduleProps.barStyle.width);v.append("g").attr("transform",`translate(${this.scheduleProps.margin.left},0)`).attr("opacity",.3).call(be),v.selectAll("g.barGroup").data(O).join("g").attr("class","barGroup").append("rect").on("click",(Ge,tt)=>this.shellStateService.dispatch({type:"launchView",viewId:"AppointmentDetailComponent",state:{appointmentId:tt.appointmentId}})).attr("fill",Ge=>this.scheduleProps.barStyle.background).attr("x",this.scheduleProps.margin.left).attr("y",Ge=>te(new Date(Ge.date))+this.scheduleProps.barStyle.startPadding).attr("height",Ge=>{const tt=te(new Date(Ge.date));return te(new Date(Ge.date+Ge.duration))-tt-this.scheduleProps.barStyle.endPadding-this.scheduleProps.barStyle.startPadding}).attr("width",this.scheduleProps.barStyle.width).attr("rx",this.scheduleProps.barStyle.radius)}}}}static#e=this.\u0275fac=function(O){return new(O||Fy)(W.Y36(re.vv))};static#t=this.\u0275cmp=W.Xpm({type:Fy,selectors:[["porrtal-appointment-nav"]],viewQuery:function(O,A){if(1&O&&W.Gf(vw,5),2&O){let j;W.iGM(j=W.CRH())&&(A.divRef=j.first)}},inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:5,vars:0,consts:[[1,"container"],[1,"title"],[1,"data-container"],["containerRef",""]],template:function(O,A){1&O&&(W.TgZ(0,"div",0)(1,"h3",1),W._uU(2,"Daily Schedule"),W.qZA(),W._UZ(3,"div",2,3),W.qZA())},dependencies:[D.ez],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:2px;padding-bottom:2px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;margin-left:15px;margin-right:15px;margin-top:15px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"],changeDetection:0})}class Ny{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||Ny)};static#t=this.\u0275cmp=W.Xpm({type:Ny,selectors:[["porrtal-appointment-search"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"appointment-search works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}function Ew(d,v){if(1&d&&(W.TgZ(0,"div",2)(1,"h3",3),W._uU(2),W.qZA(),W.TgZ(3,"div",4)(4,"h4"),W._uU(5),W.qZA(),W.TgZ(6,"p"),W._uU(7),W.qZA()()()),2&d){const O=W.oxw();let A;W.xp6(2),W.AsE(" ",null==O.appointment?null:O.appointment.item," (",null==O.appointment?null:O.appointment.appointmentId,") - Appointment Detail "),W.xp6(3),W.lnq(" ",O.Moment(null==O.appointment?null:O.appointment.date).format("YYYY-MM-DD, h:mm a")," -"," "," ",(null!==(A=null==O.appointment?null:O.appointment.duration)&&void 0!==A?A:0)/6e4," minutes. "),W.xp6(2),W.Oqu(null==O.appointment?null:O.appointment.description)}}function Mw(d,v){1&d&&(W.ynx(0),W.TgZ(1,"div"),W._uU(2,"loading appointment data..."),W.qZA(),W.BQk())}function bw(d,v){if(1&d&&(W.ynx(0),W.TgZ(1,"div")(2,"span"),W._uU(3,"appointmentId:\xa0"),W.qZA(),W.TgZ(4,"span"),W._uU(5),W.qZA(),W.TgZ(6,"span"),W._uU(7,"\xa0not found."),W.qZA()(),W.BQk()),2&d){const O=W.oxw();W.xp6(5),W.Oqu(O.appointmentId)}}class Wy{constructor(){this.loading=!0,this.notFound=!1,this.Moment=ue}set viewState(v){console.log("appointment detail - view state",v),this._viewState=v,this._viewState?.state&&this._viewState?.state.appointmentId&&(this.loading=!1,this.appointmentId=this._viewState?.state.appointmentId,this.appointment=de.find(O=>O.appointmentId===this.appointmentId),this.appointment||(this.notFound=!0)),console.log(`loading: ${this.loading}, notFound: ${this.notFound}`)}get viewState(){return this._viewState}static#e=this.\u0275fac=function(O){return new(O||Wy)};static#t=this.\u0275cmp=W.Xpm({type:Wy,selectors:[["porrtal-appointment-detail"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:3,vars:3,consts:[["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],[1,"title"],[1,"data-container"]],template:function(O,A){1&O&&(W.YNc(0,Ew,8,6,"div",0),W.YNc(1,Mw,3,0,"ng-container",1),W.YNc(2,bw,8,1,"ng-container",1)),2&O&&(W.Q6J("ngIf",!A.loading&&!A.notFound),W.xp6(1),W.Q6J("ngIf",A.loading),W.xp6(1),W.Q6J("ngIf",A.notFound))},dependencies:[D.ez,D.O5],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:2px;padding-bottom:2px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{justify-self:start;margin-left:15px;margin-right:15px;margin-top:15px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"],changeDetection:0})}class Vy{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||Vy)};static#t=this.\u0275cmp=W.Xpm({type:Vy,selectors:[["porrtal-appointment-location-map"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"appointment-location-map works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class zy{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||zy)};static#t=this.\u0275cmp=W.Xpm({type:zy,selectors:[["porrtal-appointment-create"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"appointment-create works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class Hy{constructor(v){this.shellStateService=v}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||Hy)(W.Y36(re.vv))};static#t=this.\u0275cmp=W.Xpm({type:Hy,selectors:[["porrtal-viz-nav"]],inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:42,vars:0,consts:[[1,"container"],[1,"title"],[1,"data-container"],[1,"link-button",3,"click"]],template:function(O,A){1&O&&(W.TgZ(0,"div",0)(1,"h3",1),W._uU(2,"ESRI Mapping Demos"),W.qZA(),W.TgZ(3,"div",2)(4,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"HurricaneMapComponent"})}),W._uU(5," Hurricanes on the Globe "),W.qZA(),W.TgZ(6,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"EarthquakeMapComponent"})}),W._uU(7," Earthquake Map "),W.qZA(),W.TgZ(8,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"DigitalElevationMapComponent"})}),W._uU(9," Globe with Digital Elevation "),W.qZA(),W.TgZ(10,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"BuildingSceneWithQueryComponent"})}),W._uU(11," Building Scene "),W.qZA()(),W.TgZ(12,"h3",1),W._uU(13,"D3JS Charting Demos"),W.qZA(),W.TgZ(14,"div",2)(15,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"ZoomableSunburstComponent"})}),W._uU(16," Zoomable Sunburst Chart "),W.qZA(),W.TgZ(17,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"ZoomableCirclePackComponent"})}),W._uU(18," Zoomable Circle Pack Chart "),W.qZA(),W.TgZ(19,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"ZoomableIcicleComponent"})}),W._uU(20," Zoomable Icicle Chart "),W.qZA(),W.TgZ(21,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"ZoomableTreemapComponent"})}),W._uU(22," Zoomable Treemap Chart "),W.qZA(),W.TgZ(23,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"CollapsibleTreeComponent"})}),W._uU(24," Collapsable Tree Chart "),W.qZA(),W.TgZ(25,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"HierarchicalBarChartComponent"})}),W._uU(26," Hierarchical Bar Chart "),W.qZA()(),W.TgZ(27,"h3",1),W._uU(28,"Learning"),W.qZA(),W.TgZ(29,"div",2)(30,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"YoutubePlayerComponent",state:{videoId:"Z76QlSpYcck"}})}),W._uU(31," YouTube Player "),W.qZA(),W.TgZ(32,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"MarkdownViewerComponent",state:{contentUrl:"https://raw.githubusercontent.com/datumgeek/jersey-rest-test03/master/README.md"}})}),W._uU(33," Markdown Viewer "),W.qZA(),W.TgZ(34,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"MarkdownViewerComponent",state:{id:"html",contentUrl:"docs/relative-image-test.md"}})}),W._uU(35," Markdown with Relative Images "),W.qZA(),W.TgZ(36,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"MarkdownViewerComponent",state:{id:"html",contentUrl:"https://raw.githubusercontent.com/datumgeek/ngx-popperjs/master/projects/ngx-popperjs/src/lib/ngx-popperjs-content/ngx-popperjs-content.component.html"}})}),W._uU(37," Markdown HTML "),W.qZA(),W.TgZ(38,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"MarkdownViewerComponent",state:{id:"scss",contentUrl:"https://raw.githubusercontent.com/datumgeek/ngx-popperjs/master/projects/ngx-popperjs/src/lib/ngx-popperjs-content/ngx-popperjs-content.component.scss"}})}),W._uU(39," Markdown SCSS "),W.qZA(),W.TgZ(40,"h4",3),W.NdJ("click",function(){return A.shellStateService.dispatch({type:"launchView",viewId:"MarkdownViewerComponent",state:{id:"ts",contentUrl:"https://raw.githubusercontent.com/datumgeek/ngx-popperjs/master/projects/ngx-popperjs/src/lib/ngx-popperjs-content/ngx-popper-content.component.ts"}})}),W._uU(41," Markdown TypeScript "),W.qZA()()())},dependencies:[D.ez],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.title[_ngcontent-%COMP%]{background-color:#b9c7da;margin:0;padding-top:2px;padding-bottom:2px;padding-left:8px;grid-column:1/-1}.data-container[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px;margin-top:15px}.link-button[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}"],changeDetection:0})}var tM,Tw=T(32258),Je=T(17626),qE=T(73386),oi=T(15861),yc=T(91558),Na=T(46160),Cw=T(89726),Gy=T(94573),So=T(26584),nu=T(86810),zh=T(58817),eM=T(47996),Ow=T(47877),vo=T(63290),fi=T(10699),ht=T(77712),ou=T(90912),Ds=T(76898),Bm=T(99433),Qp=T(85931),al=T(8314),qp=(T(82255),T(55342));let Ky=tM=class extends nu.wq{constructor(d){super(d),this.type="none"}clone(){return new tM({type:this.type})}};(0,Je._)([(0,qp.J)({none:"none",stayAbove:"stay-above"})],Ky.prototype,"type",void 0),Ky=tM=(0,Je._)([(0,Ds.j)("esri.ground.NavigationConstraint")],Ky);var rM,PO=T(92236);const DO=vo.Z.getLogger("esri.Ground");let Hh=rM=class extends((0,nu.eC)(eM.Z)){constructor(d){super(d),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Na.Z;const v=A=>{A.parent&&A.parent!==this&&"remove"in A.parent&&A.parent.remove(A),A.parent=this,"elevation"!==A.type&&"base-elevation"!==A.type&&DO.error(`Layer '${A.title}, id:${A.id}' of type '${A.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",A=>v(A.item)),this.layers.on("after-remove",A=>(A=>{A.parent=null})(A.item))}initialize(){this.when().catch(d=>{DO.error("#load()","Failed to load ground",d)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const d=this.layers.removeAll();for(const v of d)v.destroy();this.layers.destroy()}normalizeCtorArgs(d){return d&&"resourceInfo"in d&&(this._set("resourceInfo",d.resourceInfo),delete(d={...d}).resourceInfo),d}set layers(d){this._set("layers",(0,Cw.Z)(d,this._get("layers")))}writeLayers(d,v,O,A){const j=[];d&&(A={...A,layerContainerType:"ground"},d.forEach(te=>{if("write"in te){const pe={};(0,Gy.sM)(te)().write(pe,A)&&j.push(pe)}else A&&A.messages&&A.messages.push(new So.Z("layer:unsupported",`Layers (${te.title}, ${te.id}) of type '${te.declaredClass}' cannot be persisted in the ground`,{layer:te}))})),v.layers=j}load(d){return this.addResolvingPromise(this._loadFromSource(d)),Promise.resolve(this)}loadAll(){return(0,Ow.G)(this,d=>{d(this.layers)})}queryElevation(d,v){var O=this;return(0,oi.Z)(function*(){yield O.load({signal:v?.signal});const{ElevationQuery:A}=yield T.e(2493).then(T.bind(T,42493));(0,fi.k_)(v);const j=new A,te=O.layers.filter(xO).toArray();return j.queryAll(te,d,v)})()}createElevationSampler(d,v){var O=this;return(0,oi.Z)(function*(){yield O.load({signal:v?.signal});const{ElevationQuery:A}=yield T.e(2493).then(T.bind(T,42493));(0,fi.k_)(v);const j=new A,te=O.layers.filter(xO).toArray();return j.createSamplerAll(te,d,v)})()}clone(){const d={opacity:this.opacity,surfaceColor:(0,zh.d9)(this.surfaceColor),navigationConstraint:(0,zh.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(d.loadStatus="loaded"),new rM({resourceInfo:this.resourceInfo}).set(d)}read(d,v){this.resourceInfo||this._set("resourceInfo",{data:d,context:v}),super.read(d,v)}_loadFromSource(d){const v=this.resourceInfo;return v?this._loadLayersFromJSON(v.data,v.context,d):Promise.resolve(null)}_loadLayersFromJSON(d,v,O){const A=v&&v.origin||"web-scene",j=v&&v.portal||null,te=v&&v.url||null;return Promise.all([T.e(7534),T.e(1074)]).then(T.bind(T,71074)).then(({populateOperationalLayers:pe})=>{(0,fi.k_)(O);const be=[];return d.layers&&Array.isArray(d.layers)&&be.push(pe(this.layers,d.layers,{context:{origin:A,url:te,portal:j,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),(0,fi.as)(be)}).then(()=>{})}};function xO(d){return"elevation"===d.type||function Pw(d){return d&&"createElevationSampler"in d}(d)}(0,Je._)([(0,ht.Cb)({json:{read:!1}})],Hh.prototype,"layers",null),(0,Je._)([(0,Bm.c)("layers")],Hh.prototype,"writeLayers",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hh.prototype,"resourceInfo",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ou.z8,read:{reader:PO.b,source:"transparency"},write:{writer:(d,v)=>{v.transparency=(0,PO.a)(d)},target:"transparency"}}})],Hh.prototype,"opacity",void 0),(0,Je._)([(0,ht.Cb)({type:yc.Z,json:{type:[ou.z8],write:(d,v)=>{v.surfaceColor=d.toJSON().slice(0,3)}}})],Hh.prototype,"surfaceColor",void 0),(0,Je._)([(0,ht.Cb)({type:Ky,json:{write:!0}})],Hh.prototype,"navigationConstraint",void 0),Hh=rM=(0,Je._)([(0,Ds.j)("esri.Ground")],Hh);const Yy=Hh;var Li=T(14517),jm=T(46882),vc=T(61885),at=T(62208),Uu=T(66656);function Dw(d){return!(!(d&&d.loaded&&"capabilities"in d&&d?.capabilities?.operations&&"supportsEditing"in d.capabilities.operations&&!0===d.capabilities.operations.supportsEditing)||"editingEnabled"in d&&!d.editingEnabled)}var SO=T(59318),sM=T(21726),AO=T(33954);const LO=vo.Z.getLogger("esri.support.basemapUtils");var Rw=T(38953);const Iw=vo.Z.getLogger("esri.support.groundUtils"),zO={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var Bw=T(6432),jw=T(6119);let ch=class extends((0,jw.Q)((0,Bw.K)(vc.Z.EventedMixin(Li.Z)))){constructor(d){super(d),this.allLayers=new jm.Z({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:v=>"layers"in v?v.layers:null}),this.allTables=(0,Rw.a)(this),this.basemap=null,this.editableLayers=new jm.Z({getCollections:()=>[this.allLayers],itemFilterFunction:Dw}),this.ground=new Yy,this._basemapCache={}}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),function Sw(d){for(const v in d){const O=d[v];!1===O?.destroyed&&O.destroy(),delete d[v]}}(this._basemapCache),this._basemapCache=null}castBasemap(d){return function wO(d,v){let O;if("string"==typeof d){if(!(d in AO.s)){const A=Object.entries(AO.s).filter(([j,te])=>SO.Z.apiKey&&!te.classic||!SO.Z.apiKey&&te.classic&&!te.deprecated).map(([j])=>`"${j}"`).join(", ");return LO.warn(`Unable to find basemap definition for: ${d}. Try one of these: ${A}`),null}v&&(O=v[d]),O||(O=qE.default.fromId(d),v&&(v[d]=O))}else O=(0,ou.se)(qE.default,d);return O?.destroyed&&(LO.warn("The provided basemap is already destroyed",{basemap:O}),O=null),O}(d,this._basemapCache)}castGround(d){const v=function Uw(d){let v=null;return"string"==typeof d?d in zO?v=new Yy({resourceInfo:{data:{layers:[zO[d]]}}}):Iw.warn(`Unable to find ground definition for: ${d}. Try "world-elevation"`):v=(0,ou.se)(Yy,d),v}(d);return(0,at.Wi)(v)?this._get("ground"):v}findLayerById(d){return this.allLayers.find(v=>v.id===d)}findTableById(d){return this.allTables.find(v=>v.id===d)}};(0,Je._)([(0,ht.Cb)({readOnly:!0,dependsOn:[]})],ch.prototype,"allLayers",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ch.prototype,"allTables",void 0),(0,Je._)([(0,ht.Cb)({type:qE.default})],ch.prototype,"basemap",void 0),(0,Je._)([(0,Uu.p)("basemap")],ch.prototype,"castBasemap",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ch.prototype,"editableLayers",void 0),(0,Je._)([(0,ht.Cb)({type:Yy,nonNullable:!0})],ch.prototype,"ground",void 0),(0,Je._)([(0,Uu.p)("ground")],ch.prototype,"castGround",null),ch=(0,Je._)([(0,Ds.j)("esri.Map")],ch);const HO=ch;var Fw=T(79608),ic=T(23719),cs=T(21286),oM=T(68653),Eo=T(49672);let Gh=class extends((0,Fw.J)(nu.wq)){constructor(...d){super(...d),this.position=new Eo.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(d,v,O,A){if(d&&"object"==typeof d&&("x"in d||Array.isArray(d))){const j={position:d};return null!=v&&(j.heading=v),null!=O&&(j.tilt=O),null!=A&&(j.fov=A),j}return d}writePosition(d,v,O,A){const j=d.clone();j.x=(0,ou.q9)(d.x||0),j.y=(0,ou.q9)(d.y||0),j.z=d.hasZ?(0,ou.q9)(d.z||0):d.z,v[O]=j.write({},A)}readPosition(d,v){const O=new Eo.Z;return O.read(d,v),O.x=(0,ou.q9)(O.x||0),O.y=(0,ou.q9)(O.y||0),O.z=O.hasZ?(0,ou.q9)(O.z||0):O.z,O}equals(d){return!!d&&this.tilt===d.tilt&&this.heading===d.heading&&this.fov===d.fov&&this.position.equals(d.position)}};(0,Je._)([(0,ht.Cb)({type:Eo.Z,json:{write:{isRequired:!0}}})],Gh.prototype,"position",void 0),(0,Je._)([(0,Bm.c)("position")],Gh.prototype,"writePosition",null),(0,Je._)([(0,oM.r)("position")],Gh.prototype,"readPosition",null),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,Uu.p)(d=>ic.BV.normalize((0,ou.q9)(d)))],Gh.prototype,"heading",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,Uu.p)(d=>(0,cs.uZ)((0,ou.q9)(d),-180,180))],Gh.prototype,"tilt",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Gh.prototype,"fov",void 0),Gh=(0,Je._)([(0,Ds.j)("esri.Camera")],Gh);const au=Gh;var lM,Nw=T(29132),aM=T(88879),GO=T(91179);let A_=lM=class extends nu.wq{constructor(d){super(d),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(d){return(d%=360)<0&&(d+=360),d}clone(){return new lM({rotation:this.rotation,scale:this.scale,targetGeometry:(0,at.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,at.pC)(this.camera)?this.camera.clone():null})}};function cM(){return{enabled:!this.camera}}(0,Je._)([(0,ht.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:cM}}}}})],A_.prototype,"rotation",void 0),(0,Je._)([(0,Uu.p)("rotation")],A_.prototype,"castRotation",null),(0,Je._)([(0,ht.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:cM}}}}})],A_.prototype,"scale",void 0),(0,Je._)([(0,ht.Cb)({types:Nw.qM,json:{read:GO.im,write:!0,origins:{"web-scene":{read:GO.im,write:{overridePolicy:cM}}}}})],A_.prototype,"targetGeometry",void 0),(0,Je._)([(0,ht.Cb)({type:au,json:{write:!0}})],A_.prototype,"camera",void 0),A_=lM=(0,Je._)([(0,Ds.j)("esri.Viewpoint")],A_);const Bd=A_;var Fm=T(40764),Ww=T(17770),L_=T(54024),Vw=T(56354),KO=T(73234),wr=T(32917),w_=T(50618),rn=T(23841),zw=T(59289),br=T(28093),Zy=T(28705),YO=T(79334),tn=T(55915),ui=T(65401),jd=T(41743),Q0=T(93088),ZO=T(83137),lu=T(72469);const Hw=vo.Z.getLogger("esri.support.AnalysesCollection");let q0=class extends Zy.a{constructor(d){super(d),this.handles.add(this.on("before-add",v=>{(0,at.Wi)(v.item)||v.item.parent===this.owner&&(Hw.warn("Analysis inside the collection must be unique. Not adding this element again."),v.preventDefault())}))}_own(d){d.parent=this.owner}_release(d){d.parent=null}};q0=(0,Je._)([(0,Ds.j)("esri.support.AnalysesCollection")],q0);var ky=T(35575),so=T(72392);const $y={widthBreakpoint:{getValue(d){const v=d.viewSize[0],O=d.breakpoints,A=this.values;return v<=O.xsmall?A.xsmall:v<=O.small?A.small:v<=O.medium?A.medium:v<=O.large?A.large:A.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(d){const v=d.viewSize[1],O=d.breakpoints,A=this.values;return v<=O.xsmall?A.xsmall:v<=O.small?A.small:v<=O.medium?A.medium:v<=O.large?A.large:A.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(d){const v=d.viewSize,j=this.values;return v[1]>=v[0]?j.portrait:j.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},uM={xsmall:544,small:768,medium:992,large:1200};function dM(d,v){return v?$y[d].valueToClassName[v].split(" "):[]}const Kw=d=>{let v=class extends d{constructor(...O){super(...O),this._breakpointsHandles=new so.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=uM}initialize(){this._breakpointsHandles.add((0,wr.YP)(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),wr.nn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=(0,at.SC)(this._breakpointsHandles))}set breakpoints(O){if(O===this._get("breakpoints"))return;const A=function Gw(d){return d&&d.xsmall<d.small&&d.small<d.medium&&d.medium<d.large}(O);if(!A){const j=JSON.stringify(uM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+j)}O=A?O:uM,this._set("breakpoints",{...O})}_updateClassNames(){if(!this.container)return;const O=ky.Z.acquire(),A=ky.Z.acquire();let j,te=!1;for(j in $y){const pe=this[j],be=$y[j].getValue({viewSize:this.size,breakpoints:this.breakpoints});pe!==be&&(te=!0,this[j]=be,dM(j,pe).forEach(Re=>A.push(Re)),dM(j,be).forEach(Re=>O.push(Re)))}te&&(this._applyClassNameChanges(O,A),ky.Z.release(O),ky.Z.release(A))}_applyClassNameChanges(O,A){const j=this.container;j&&(A.forEach(te=>j.classList.remove(te)),O.forEach(te=>j.classList.add(te)))}_removeActiveClassNames(){const O=this.container;if(!O)return;let A;for(A in $y)dM(A,this[A]).forEach(j=>O.classList.remove(j))}};return(0,Je._)([(0,ht.Cb)()],v.prototype,"breakpoints",null),(0,Je._)([(0,ht.Cb)()],v.prototype,"orientation",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"widthBreakpoint",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"heightBreakpoint",void 0),v=(0,Je._)([(0,Ds.j)("esri.views.BreakpointsOwner")],v),v};var Yw=T(79599),kO=T(33190),Zw=T(13762),_o=T(10558);const kw=vo.Z.getLogger("esri.views.support.GroundViewElevationSampler");let R_=class extends vc.Z.EventedAccessor{constructor(d){super(d),this.demResolution={min:-1,max:-1},this.noDataValue=_o.$7}initialize(){this.view.basemapTerrain.on("elevation-change",()=>this.emit("changed",{}))}get extent(){const d=this.view.basemapTerrain;if((0,at.Wi)(d.extent)||!d.spatialReference)return null;const v=(0,ui.HH)(d.extent,d.spatialReference);return v.zmin=d.elevationBounds.min,v.zmax=d.elevationBounds.max,v}elevationAt(d,v){if((0,at.Wi)(this.extent)||!(0,kO.Kv)(this.extent,d,v)){const O=(0,at.pC)(this.extent)?`${this.extent.xmin}, ${this.extent.ymin}, ${this.extent.xmax}, ${this.extent.ymax}`:null;return kw.warn("#elevationAt()",`Point used to sample elevation (${d}, ${v}) is outside of the sampler extent (${O})`),this.noDataValue}return(0,at.Pt)(this.view.elevationProvider.getElevation(d,v,0,this.spatialReference,"ground"),this.noDataValue)}queryElevation(d){return(0,Zw.G$)(d.clone(),this)}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],R_.prototype,"demResolution",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],R_.prototype,"extent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],R_.prototype,"noDataValue",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],R_.prototype,"spatialReference",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],R_.prototype,"view",void 0),R_=(0,Je._)([(0,Ds.j)("esri.views.support.GroundViewElevationSampler")],R_);const $w=R_;let I_=class extends Li.Z{constructor(d){super(d),this.handles=new so.Z,this.view=null,this.layerViews=new Na.Z}initialize(){this.handles.add((0,wr.gx)(()=>this.view?.map?.ground,d=>d.load())),this.handles.add(this.layerViews.on("after-changes",()=>this._layerViewsAfterChangesHandler()))}destroy(){this._set("view",null),this.handles&&(this.handles.destroy(),this.handles=null)}get elevationSampler(){return this.view?"2d"===this.view.type?null:this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new $w({view:this.view}):null:null}get updating(){return!this.suspended&&this.layerViews.some(d=>d.updating)}get suspended(){return!this.view||this.view.suspended}_layerViewsAfterChangesHandler(){this.handles.remove("updating"),this.handles.add(this.layerViews.map(d=>(0,wr.YP)(()=>d.updating,()=>this._updateUpdating(),wr.Z_)).toArray(),"updating"),this._updateUpdating()}_updateUpdating(){this.notifyChange("updating")}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],I_.prototype,"elevationSampler",null),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],I_.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],I_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:Na.Z,readOnly:!0})],I_.prototype,"layerViews",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],I_.prototype,"suspended",null),I_=(0,Je._)([(0,Ds.j)("esri.views.GroundView")],I_);const Jw=I_,Xw=d=>{let v=class extends d{fetchPopupFeatures(O,A){var j=this;return(0,oi.Z)(function*(){yield j.when();const{location:te,queryArea:pe,layerViewsAndGraphics:be,clientOnlyGraphics:Re}=yield j._prepareFetchPopupFeatures(O,A),Ge=Promise.resolve(Re),tt=j._queryLayerPopupFeatures(pe,be,A),ft=tt.map(yt=>yt.promise);return{location:te,clientOnlyGraphics:Re,allGraphicsPromise:(0,fi.WW)([Ge,...ft]).then(yt=>Array.from(new Set(yt.flat()))),promisesPerLayerView:tt}})()}_queryLayerPopupFeatures(O,A,j){return A.map(({layerView:te,graphics:pe})=>{const be={clientGraphics:pe,event:(0,at.pC)(j)?j.event:null,signal:(0,at.pC)(j)?j.signal:null,defaultPopupTemplateEnabled:!!(0,at.pC)(j)&&!!j.defaultPopupTemplateEnabled},Re=te.fetchPopupFeatures(O,be);return{layerView:te,promise:Re}})}_isValidPopupGraphic(O,A){return O&&!!O.getEffectivePopupTemplate((0,at.pC)(A)&&A.defaultPopupTemplateEnabled)}_prepareFetchPopupFeatures(O,A){var j=this;return(0,oi.Z)(function*(){const{clientGraphics:te,queryArea:pe,location:be}=yield j._popupHitTestGraphics(O,A),Re=j._getFetchPopupLayerViews(),{layerViewsAndGraphics:Ge,clientOnlyGraphics:tt}=j._graphicsPerFetchPopupLayerView(te,Re);return{clientOnlyGraphics:tt,layerViewsAndGraphics:Ge,queryArea:pe,location:be}})()}_popupHitTestGraphics(O,A){var j=this;return(0,oi.Z)(function*(){const{results:te,mapPoint:pe}=yield j.popupHitTest(O),be=te.filter(Ge=>"graphic"===Ge.type&&j._isValidPopupGraphic(Ge.graphic,A)),Re=be.length?be[0].mapPoint:null;return{clientGraphics:be.map(Ge=>Ge.graphic),queryArea:pe,location:pe||Re}})()}_getFetchPopupLayerViews(){const O=[];return this.allLayerViews.forEach(A=>{this._isValidPopupLayerView(A)&&O.push(A)}),(0,at.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&O.push(this.graphicsView),O.reverse()}_isValidPopupLayerView(O){return(0,at.pC)(O)&&(!("layer"in O)||!O.suspended)&&"fetchPopupFeatures"in O}_graphicsPerFetchPopupLayerView(O,A){const j=[],te=new Map,pe=A.map(be=>{const Re=[];return te.set("layer"in be?be.layer:be.graphics,Re),{layerView:be,graphics:Re}});for(const be of O){const Re=te.get(be.layer)||te.get(be.sourceLayer)||null;Re?Re.push(be):j.push(be)}return{layerViewsAndGraphics:pe,clientOnlyGraphics:j}}};return v=(0,Je._)([(0,Ds.j)("esri.views.PopupView")],v),v};var Qw=T(97478),Nm=T(80542),$O=T(60330),Rl=T(83960),jc=T(2004),ba=T(65234),cd=T(37053),JO=T(51815);let U_=class extends Li.Z{constructor(d){super(d),this.view=null,this.baseLayerViews=new Na.Z,this.referenceLayerViews=new Na.Z,this._loadingHandle=(0,wr.YP)(()=>this.view?.map?.basemap,v=>{v&&v.load().catch(()=>{})},wr.nn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const d=this.view?.map?.basemap;return!!d&&!!d.loaded&&(this.baseLayerViews.some(v=>v.updating)||this.referenceLayerViews.some(v=>v.updating))}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],U_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],U_.prototype,"baseLayerViews",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],U_.prototype,"referenceLayerViews",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],U_.prototype,"suspended",null),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],U_.prototype,"updating",null),U_=(0,Je._)([(0,Ds.j)("esri.views.BasemapView")],U_);var cu=T(88159),Wm=T(17760);const qw=vo.Z.getLogger("esri.views.LayerViewManager");class eR{constructor(v,O,A){this.layer=v,this.view=O,this.layerViewImporter=A,this._controller=new AbortController,this._deferred=(0,fi.dD)(),this._started=!1,this.done=!1,(0,fi.fu)(this._controller.signal,()=>{const j=new So.Z("cancelled:layerview-create","layerview creation cancelled",{layer:v});this._deferred.reject(j)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:v}=this;if(!v)return;const{layer:O,view:A}=this;O.emit("layerview-destroy",{view:A,layerView:v}),A.emit("layerview-destroy",{layer:O,layerView:v}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}start(){var v=this;return(0,oi.Z)(function*(){if(v._started)return;v._started=!0;const{_controller:{signal:O},layer:A,view:j}=v;v._map=j.map;try{let te,pe;if(yield A.load({signal:O}),"prefetchResources"in A&&(yield A.prefetchResources({signal:O})),A.createLayerView)te=yield A.createLayerView(j,{signal:O});else{if(!v.layerViewImporter.hasLayerViewModule(A))throw new So.Z("layer:view-not-supported","No layerview implementation was found");const Ge=yield v.layerViewImporter.importLayerView(A);(0,fi.k_)(O),te="default"in Ge?new Ge.default({layer:A,view:j}):new Ge({layer:A,view:j})}const be=()=>{pe=(0,at.hw)(pe),te.destroyed||te.destroy(),te.layer=null,te.parent=null,te.view=null,v.done=!0};pe=(0,fi.fu)(O,be),(0,fi.k_)(O);try{yield te.when()}catch(Ge){throw be(),Ge}if(!v._map?.allLayers?.includes(A))return be(),void v._deferred.reject(new So.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:A}));v.layerView=te,A.emit("layerview-create",{view:j,layerView:te}),j.emit("layerview-create",{layer:A,layerView:te}),v.done=!0,v._deferred.resolve(te)}catch(te){A.emit("layerview-create-error",{view:j,error:te}),j.emit("layerview-create-error",{layer:A,error:te}),v.done=!0,v._deferred.reject(new So.Z("layerview:create-error","layerview creation failed",{layer:A,error:te}))}})()}}let ud=class extends Nm.r{constructor(d){super(d),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Wm.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const v=this.view.map?.allLayers;if(v)for(const O of v)this.layerViewImporter.hasLayerViewModule(O)&&this.layerViewImporter.importLayerView(O)},this._reschedule=()=>((0,at.Wi)(this._workPromise)&&(this._workPromise=(0,fi.dD)()),this.handles.remove("reschedule"),this.handles.add((0,w_.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const v=this.view.map;if(this._map!==v&&(this.clear(),this._map=v),(0,at.Wi)(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const O=new jm.Z({getCollections:()=>this._rootCollectionNames.map(te=>this.get(te)),getChildrenFunction:te=>te&&"layers"in te?te.layers:null});if(!O)return this._workPromise.resolve(),void(this._workPromise=null);for(const te of O)this._createLayerView(te);this._refreshCollections();for(const[te,pe]of this._layerLayerViewInfoMap)O.includes(te)||(this._layerLayerViewInfoMap.delete(pe.layer),pe.destroy());const A=O.filter(te=>"group"===te.type).map(te=>te.layers),j=[v?.ground?.layers,v?.basemap?.baseLayers,v?.basemap?.referenceLayers,v?.layers,...A].filter(te=>!!te);this.handles.add(j.map(te=>this._watchUpdatingTracking.addOnCollectionChange(()=>te,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([(0,wr.on)(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,wr.YP)(()=>{const d=this.view,v=d?.map;return[v?.basemap,v?.ground,v?.layers,d?.ready]},()=>this._reschedule(),wr.tX)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const d=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&d.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(d)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,at.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,cu.oE)(this._layerLayerViewInfoMap,d=>!d.done)}get updatingRemaining(){let d=0;for(const v of this._layerLayerViewInfoMap.values())v.done||++d;return d}clear(){if(!this.destroyed){for(const d of this._layerLayerViewInfoMap.values())d.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}whenLayerView(d){var v=this;return(0,oi.Z)(function*(){if(yield v._reschedule(),!v._layerLayerViewInfoMap.has(d))throw new So.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:d});return v._layerLayerViewInfoMap.get(d).promise})()}_refreshCollections(){for(const[d,v]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(d),this.get(v),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(d,v,O){if(!d||!v)return void(v&&v.removeAll());let A=0;for(const j of d){const te=this._layerLayerViewInfoMap.get(j);if(!te||!te.layerView)continue;const pe=te.layerView;pe.layer=j,pe.parent=O,v.getItemAt(A)!==pe&&v.splice(A,0,pe),j.layers&&this._populateLayerViewsOwners(j.layers,pe.layerViews,pe),A+=1}A<v.length&&v.splice(A,v.length)}_createLayerView(d){if(this._layerLayerViewInfoMap.has(d))return this.view.ready&&this._layerLayerViewInfoMap.get(d).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");d.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(d)&&this.layerViewImporter.importLayerView(d);const v=new eR(d,this.view,this.layerViewImporter);v.promise.then(()=>this._refreshCollections(),O=>{O&&((0,fi.D_)(O)||"cancelled:layerview-create"===O.name)||qw.error(`Failed to create layerview for layer title:'${d.title??"no title"}', id:'${d.id??"no id"}' of type '${d.type}'.`,{layer:d,error:O}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(d,v),this.view.ready&&v.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,Je._)([(0,ht.Cb)()],ud.prototype,"_workPromise",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ud.prototype,"_watchUpdatingTracking",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ud.prototype,"_layersToLayerViews",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ud.prototype,"_rootCollectionNames",null),(0,Je._)([(0,ht.Cb)()],ud.prototype,"layerViewImporter",void 0),(0,Je._)([(0,ht.Cb)()],ud.prototype,"supportsGround",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ud.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ud.prototype,"updatingRemaining",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ud.prototype,"view",void 0),ud=(0,Je._)([(0,Ds.j)("esri.views.LayerViewManager")],ud);const tR=ud;let Bu=class extends Li.Z{constructor(d){super(d),this.factor=1.5,this.offset=(0,rn.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,Je._)([(0,ht.Cb)({type:Number})],Bu.prototype,"factor",void 0),(0,Je._)([(0,ht.Cb)({nonNullable:!0})],Bu.prototype,"offset",void 0),(0,Je._)([(0,ht.Cb)()],Bu.prototype,"position",void 0),(0,Je._)([(0,ht.Cb)({type:Number,range:{min:0}})],Bu.prototype,"size",void 0),(0,Je._)([(0,ht.Cb)()],Bu.prototype,"maskUrl",void 0),(0,Je._)([(0,ht.Cb)()],Bu.prototype,"maskEnabled",void 0),(0,Je._)([(0,ht.Cb)()],Bu.prototype,"overlayUrl",void 0),(0,Je._)([(0,ht.Cb)()],Bu.prototype,"overlayEnabled",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Bu.prototype,"version",null),(0,Je._)([(0,ht.Cb)({type:Boolean})],Bu.prototype,"visible",void 0),Bu=(0,Je._)([(0,Ds.j)("esri.views.Magnifier")],Bu);const XO=Bu;var lo=T(87091);let ef=class extends Li.Z{constructor(d,v){super({}),this._stage=d,this._textureRequests=new Map,this._frameTask=v?.registerTask(lo.T8.TEXTURE_UNLOAD)??lo.sq}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(d=>this._releaseTextureRequest(d)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(d,v,O){const A=this.makeUid(d);let j=this._textureRequests.get(A);return j||(j={referenceCount:0,texture:v(),textureAsync:null,abortController:null,onRemove:O},this._stage&&(this._stage.add(j.texture),this._stage.loadImmediate(j.texture)),this._textureRequests.set(A,j)),j.referenceCount++,{uid:A,texture:j.texture,release:()=>this._release(A)}}_release(d){const v=this._textureRequests.get(d);v?(v.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+d),v.referenceCount--,v.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(d))):console.warn(`TextureCollection: texture doesn't exist: '${d}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(d){if(!this._textureRequests)return;const v=this._textureRequests.get(d);!v||v.referenceCount>0||(this._releaseTextureRequest(v),this._textureRequests.delete(d))}_releaseTextureRequest(d){d.onRemove&&d.onRemove(),d.texture?this._stage?.remove(d.texture):d.abortController&&(d.abortController.abort(),d.abortController=null)}makeUid(d,v=null){return(0,at.pC)(v)?`${d}.${v}px`:d}};(0,Je._)([(0,ht.Cb)()],ef.prototype,"_frameTask",void 0),(0,Je._)([(0,ht.Cb)()],ef.prototype,"updating",null),ef=(0,Je._)([(0,Ds.j)("esri.views.3d.support.TextureCollection")],ef);var Jy=T(56846),QO=T(45458),hM=T(33786);const rR=vo.Z.getLogger("esri.views.interactive.interactiveToolUtils");function Xy(d){return d.visible&&d.getEditableFlag(hM.bH.USER)&&d.getEditableFlag(hM.bH.MANAGER)}var uu=T(41900);class iR{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(v,O){const A=()=>v.stopPropagation();switch(v.type){case"pointer-move":qO(v.pointerType)&&this._pointerLocations.set(v.pointerId,{x:v.x,y:v.y,pointerType:v.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(A(),"end"===v.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!eP(v))break;const j=(0,uu.vT)(v),te=this._intersect(j,v.pointerType,O.forEachTool);if((0,at.Wi)(te))break;const pe=this._findToolAndManipulatorByKey(te,O.forEachTool,Qy),be=(0,at.yw)(pe,Ge=>Ge.manipulator),Re=(0,at.yw)(pe,Ge=>Ge.tool);!((0,at.pC)(be)&&(0,at.pC)(Re)&&be.interactive)||be.grabbable&&be.grabbableForEvent(v)||!be.grabbing||be.dragging||this._ungrabManipulatorBeforeDragging(be,Re,v),(0,at.pC)(be)&&be.interactive&&be.grabbable&&be.grabbableForEvent(v)&&!be.grabbing&&(this._grabbedManipulators.set(v.pointerId,{key:te,start:j,pointerType:v.pointerType}),1===this._grabbedManipulators.size&&O.activeTool!==te.tool&&(this._currentlyActiveTool=O.activeTool,this._revertToActiveTool=!0,O.setActiveTool(te.tool)),be.grabbing=!0,be.events.emit("grab-changed",{action:"start",pointerType:v.pointerType,screenPoint:j}),A());break}case"pointer-up":this._handlePointerEnd(v,O);break;case"pointer-drag":{if(!eP(v))break;const j=this._grabbedManipulators.get(v.pointerId),te=this._draggedManipulators.get(v.pointerId),pe=(0,at.yw)(j||te,({key:tt})=>tt),be=this._findManipulatorByKey(pe,O.forEachTool);if((0,at.Wi)(be))break;const Re=(0,uu.vT)(v);Re.x=(0,cs.uZ)(Re.x,0,O.view.width),Re.y=(0,cs.uZ)(Re.y,0,O.view.height);const Ge=(0,at.Wg)(j||te).start;switch(v.action){case"start":case"update":"update"!==v.action&&1!==this._grabbedManipulators.size||(be.dragging=!0,be.events.emit("drag",te?{action:"update",start:Ge,screenPoint:Re}:{action:"start",start:Ge,screenPoint:Re,pointerType:v.pointerType}),this._draggedManipulators.set(v.pointerId,{key:(0,at.Wg)(pe),start:Ge}));break;case"end":be.dragging=!1,te&&be.events.emit("drag",{action:"end",start:Ge,screenPoint:Re}),this._draggedManipulators.delete(v.pointerId),this._handlePointerEnd(v,O)}A();break}case"immediate-click":{const j=(0,uu.vT)(v),te=this._intersect(j,v.pointerType,O.forEachTool),pe=this._findToolAndManipulatorByKey(te,O.forEachTool,Qy);if(function nR(d){return!!d.native.shiftKey}(v)||O.forEachTool(tt=>{if((!(0,at.pC)(pe)||pe.tool!==tt||tt.automaticManipulatorSelection)&&tt.manipulators){let ft=!1;tt.manipulators.forEach(({manipulator:yt})=>{yt.selected&&(yt.selected=!1,ft=!0)}),ft&&tt.manipulatorSelectionChanged&&tt.manipulatorSelectionChanged()}}),(0,at.Wi)(pe))break;const{manipulator:be,tool:Re}=pe;if(!be.interactive)break;be.selectable&&Re.automaticManipulatorSelection&&(be.selected=!be.selected,Re.manipulatorSelectionChanged&&Re.manipulatorSelectionChanged()),be.events.emit("immediate-click",{screenPoint:j,button:v.button,pointerType:v.pointerType,shiftKey:v.native.shiftKey,stopPropagation:A});break}case"click":{const j=(0,uu.vT)(v),te=this._intersect(j,v.pointerType,O.forEachTool),pe=this._findManipulatorByKey(te,O.forEachTool);if((0,at.Wi)(pe)||!pe.interactive)break;pe.events.emit(v.type,{screenPoint:j,button:v.button,pointerType:v.pointerType,shiftKey:v.native.shiftKey}),A();break}case"double-click":{const j=(0,uu.vT)(v),te=this._intersect(j,v.pointerType,O.forEachTool),pe=this._findManipulatorByKey(te,O.forEachTool);if((0,at.Wi)(pe)||!pe.interactive)break;pe.events.emit("double-click",{screenPoint:j,button:v.button,pointerType:v.pointerType,shiftKey:v.native.shiftKey,stopPropagation:A});break}case"immediate-double-click":{const j=(0,uu.vT)(v),te=this._intersect(j,v.pointerType,O.forEachTool),pe=this._findManipulatorByKey(te,O.forEachTool);if((0,at.Wi)(pe)||!pe.interactive)break;pe.events.emit("immediate-double-click",{screenPoint:j,button:v.button,pointerType:v.pointerType,shiftKey:v.native.shiftKey,stopPropagation:A});break}}this._onFocusChange(O.forEachTool)}_ungrabManipulatorBeforeDragging(v,O,A){v.grabbing=!1,v.events.emit("grab-changed",{action:"end",pointerType:A.pointerType,screenPoint:(0,uu.vT)(A)}),this._grabbedManipulators.forEach(({key:j},te)=>{j.tool===O&&O.manipulators.findById(j.manipulatorId)===v&&this._grabbedManipulators.delete(te)})}_handlePointerEnd(v,O){const A=(0,at.yw)(this._grabbedManipulators.get(v.pointerId),({key:te})=>te),j=this._findManipulatorByKey(A,O.forEachTool);(0,at.pC)(j)&&!j.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(O.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),j.grabbing&&(j.grabbing=!1,j.events.emit("grab-changed",{action:"end",pointerType:v.pointerType,screenPoint:(0,uu.vT)(v)})),this._grabbedManipulators.delete(v.pointerId))}_cursorFromMap(v,O){let A=null;return(0,cu.oE)(v,({key:j})=>{const te=this._findManipulatorByKey(j,O);return!!((0,at.pC)(te)&&te.interactive&&"cursor"in te&&te.cursor)&&(A=te.cursor,!0)}),A}_onFocusChange(v){this._updateCursor(v),this._updateFocusedManipulatorTools(v)}_updateCursor(v){this._cursor=this._grabbedManipulators.size>0?this._cursorFromMap(this._grabbedManipulators,v)||"grabbing":this._hoveredManipulators.size>0?this._cursorFromMap(this._hoveredManipulators,v)||"pointer":null}_updateFocusedManipulatorTools(v){const O=new Set;this._grabbedManipulators.forEach(({key:{tool:A}})=>{O.add(A)}),this._hoveredManipulators.forEach(({key:{tool:A}})=>{O.add(A)}),v(A=>{A.hasFocusedManipulators=O.has(A)})}clearPointers(v,O,A=!0,j){const te=pe=>pe.tool===v&&((0,at.Wi)(j)||pe.manipulatorId===j);this._grabbedManipulators.forEach(({key:pe,pointerType:be},Re)=>{if(te(pe)){this._grabbedManipulators.delete(Re);const Ge=this._findManipulatorByKey(pe,O);(0,at.pC)(Ge)&&(Ge.grabbing=!1,Ge.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:be}))}}),this._draggedManipulators.forEach(({key:pe},be)=>{if(te(pe)){this._draggedManipulators.delete(be);const Re=this._findManipulatorByKey(pe,O);(0,at.pC)(Re)&&(Re.dragging=!1,Re.events.emit("drag",{action:"cancel"}))}}),A&&this._hoveredManipulators.forEach(({key:pe},be)=>{if(te(pe)){this._hoveredManipulators.delete(be);const Re=this._findManipulatorByKey(pe,O);(0,at.pC)(Re)&&(Re.hovering=!1)}}),this._onFocusChange(O)}_intersect(v,O,A){let j=null;return A(te=>{if(null==te.manipulators||!Xy(te))return!1;const pe=te.manipulators.intersect(v,O);return!(0,at.Wi)(pe)&&(j={manipulatorId:pe.id,tool:te},!0)}),j}updateHoveredStateFromKnownPointers(v){this._pointerLocations.forEach((O,A)=>{this._updateHoveredStateForPointerAtScreenPosition((0,rn.vW)(O.x,O.y),A,O.pointerType,v)})}handleHoverEvent(v,O){"pointer-up"!==v.type&&"immediate-click"!==v.type&&"pointer-move"!==v.type||!qO(v.pointerType)||this._updateHoveredStateForPointerAtScreenPosition((0,uu.vT)(v),v.pointerId,v.pointerType,O)}_updateHoveredStateForPointerAtScreenPosition(v,O,A,j){const te=this._intersect(v,A,j);let pe=this._findManipulatorByKey(te,j);const be=(0,at.yw)(this._hoveredManipulators.get(O),({key:Ge})=>Ge),Re=this._findManipulatorByKey(be,j);(0,at.pC)(pe)&&!pe.interactive&&(pe=null),Re!==pe&&((0,at.pC)(Re)&&(Re.hovering=!1),(0,at.pC)(pe)?(pe.hovering=!0,this._hoveredManipulators.set(O,{key:(0,at.Wg)(te)})):this._hoveredManipulators.delete(O),this._onFocusChange(j))}_findManipulatorByKey(v,O){return this._findToolAndManipulatorByKey(v,O,Qy)?Qy.manipulator:null}_findToolAndManipulatorByKey(v,O,A){return(0,at.Wi)(v)?null:(A.tool=null,A.manipulator=null,O(j=>{if(j!==v.tool||null==j.manipulators||!Xy(j))return!1;const te=j.manipulators.findById(v.manipulatorId);return!!(0,at.pC)(te)&&(A.manipulator=te,A.tool=j,!0)}),A.manipulator?A:null)}}function qO(d){return"mouse"===d}function eP(d){return"mouse"!==d.pointerType||0===d.button}const Qy={manipulator:null,tool:null},oR=vo.Z.getLogger("esri.views.ToolViewManager"),tP="attached",_M="tools";let Kh=class extends Nm.r{constructor(d){super(d),this._manipulatorState=new iR,this.tools=new Na.Z,this.cursor=null,this._forEachTool=v=>{for(const O of this.tools.items)if(v(O))return}}initialize(){var d;this.handles.add([this.view.on(QO.uS,d=>{this._handleInputEvent(d)},Jy.f.TOOL),...(d=this.tools,[d.on("before-add",v=>{const O=v.item;if(null==O||d.includes(O))return rR.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void v.preventDefault();O.onAdd()}),d.on("after-remove",v=>{const O=v.item;O.visible=!1,O.active&&(O.view.activeTool=null),O.destroy()})]),this.tools.on("before-remove",({item:d})=>{this._manipulatorState.clearPointers(d,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(d){if((0,at.pC)(d)&&!this.view.ready)return void oR.error("Cannot set active tool while view is not ready.");if(d===this.activeTool)return;const v=this.activeTool;this._set("activeTool",d),(0,at.pC)(v)&&v.deactivate(),(0,at.pC)(d)&&d.activate(),this._removeIncompleteTools(d);const O=(0,at.Wi)(this.activeTool);for(const A of this.tools){A.setEditableFlag(hM.bH.MANAGER,O||A===this.activeTool);const j=Xy(A);!O&&j||this._manipulatorState.clearPointers(A,this._forEachTool,!j)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(d=>d.updating)||(this.textures?.updating??!1)}attach(){"3d"===this.view.type?(this._set("textures",new ef(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([(0,wr.YP)(()=>{const{state:d}=this.view;return"camera"in d&&d.camera},()=>{this._forEachManipulator(d=>{null!=d.onViewChange&&d.onViewChange()})}),this.view.elevationProvider.on("elevation-change",d=>{this._forEachManipulator(v=>{null!=v.onElevationChange&&v.onElevationChange(d)})}),(0,L_.kB)(()=>this._set("textures",(0,at.SC)(this.textures)))],tP)):this.handles.add((0,wr.YP)(()=>this.view.extent,()=>{this._forEachManipulator(d=>{null!=d.onViewChange&&d.onViewChange()})}))}detach(){(0,at.pC)(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(tP)}_forEachManipulator(d){this._forEachTool(v=>{v.manipulators&&v.manipulators.forEach(({manipulator:O})=>d(O,v))})}_handleInputEvent(d){let v=!1;const O={...d,stopPropagation:()=>{v=!0,d.stopPropagation()}};(0,at.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(O):this._forEachTool(A=>{!v&&A.visible&&A.handleInputEvent(O)}),!v&&"key-down"===d.type&&"Escape"===d.key&&this.activeTool&&(d.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(O,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:A=>{this.activeTool=A},view:this.view}),!v&&(0,at.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(O),this._manipulatorState.handleHoverEvent(O,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(_M),this._forEachTool(d=>{if(d instanceof Li.Z){const v=(0,wr.YP)(()=>[d.cursor,d.visible,d.editable],()=>{Xy(d)||this._manipulatorState.clearPointers(d,this._forEachTool),this._updateCursor()});this.handles.add(v,_M)}d.manipulators&&this.handles.add(d.manipulators.on("change",v=>{v.removed.forEach(({id:O})=>{this._manipulatorState.clearPointers(d,this._forEachTool,!0,O)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),_M)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const d=this._manipulatorState.cursor;let v=d;this._forEachTool(O=>!(!(0,at.pC)(O.cursor)||!O.visible||!(0,at.Wi)(d)&&O.preferManipulatorCursor||(v=O.cursor,0))),this._get("cursor")!==v&&this._set("cursor",v)}_removeIncompleteTools(d){this.tools.filter(v=>((0,at.Wi)(d)||v!==d)&&!v.created&&v.removeIncompleteOnCancel).forEach(v=>{this.tools.remove(v)})}};(0,Je._)([(0,ht.Cb)({constructOnly:!0,nonNullable:!0})],Kh.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,nonNullable:!0})],Kh.prototype,"textures",void 0),(0,Je._)([(0,ht.Cb)({value:null})],Kh.prototype,"activeTool",null),(0,Je._)([(0,ht.Cb)({readOnly:!0,type:Na.Z})],Kh.prototype,"tools",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Kh.prototype,"cursor",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Kh.prototype,"updating",null),Kh=(0,Je._)([(0,Ds.j)("esri.views.ToolViewManager")],Kh);const aR=Kh;let tf=class extends Li.Z{constructor(d){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",this._detectedDeviceType="standard"===d.mapping?"standard":lR.test(d.id)?"spacemouse":"unknown",this.nativeIndex=d.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return cR[this.deviceType]}};(0,Je._)([(0,ht.Cb)({nonNullable:!0,readOnly:!0})],tf.prototype,"nativeIndex",void 0),(0,Je._)([(0,ht.Cb)({type:String,readOnly:!0})],tf.prototype,"deviceType",null),(0,Je._)([(0,ht.Cb)({type:Number,readOnly:!0})],tf.prototype,"axisThreshold",null),tf=(0,Je._)([(0,Ds.j)("esri.views.input.gamepad.GamepadInputDevice")],tf);const lR=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),cR={standard:.15,spacemouse:.025,unknown:0},pM=tf;let Vm=class extends Li.Z{constructor(...d){super(...d),this.devices=new Na.Z,this.enabledFocusMode="document"}};(0,Je._)([(0,ht.Cb)({type:Na.Z.ofType(pM),readOnly:!0})],Vm.prototype,"devices",void 0),(0,Je._)([(0,ht.Cb)({type:["document","view","none"]})],Vm.prototype,"enabledFocusMode",void 0),Vm=(0,Je._)([(0,Ds.j)("esri.views.input.gamepad.GamepadSettings")],Vm);const uR=Vm;let qy=class extends Li.Z{constructor(){super(...arguments),this.gamepad=new uR}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],qy.prototype,"gamepad",void 0),qy=(0,Je._)([(0,Ds.j)("esri.views.input.Input")],qy);const dR=qy;let B_=class extends Li.Z{constructor(d){super(d),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,Je._)([(0,ht.Cb)({type:Boolean,nonNullable:!0})],B_.prototype,"enabled",void 0),(0,Je._)([(0,ht.Cb)({type:pM})],B_.prototype,"device",void 0),(0,Je._)([(0,ht.Cb)({type:["pan","zoom"],nonNullable:!0})],B_.prototype,"mode",void 0),(0,Je._)([(0,ht.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],B_.prototype,"tiltDirection",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0})],B_.prototype,"velocityFactor",void 0),B_=(0,Je._)([(0,Ds.j)("esri.views.navigation.gamepad.GamepadSettings")],B_);const rP=B_;let e0=class extends Li.Z{constructor(d){super(d),this.browserTouchPanEnabled=!0,this.gamepad=new rP,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,Je._)([(0,ht.Cb)({type:Boolean})],e0.prototype,"browserTouchPanEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:rP,nonNullable:!0})],e0.prototype,"gamepad",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],e0.prototype,"momentumEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],e0.prototype,"mouseWheelZoomEnabled",void 0),e0=(0,Je._)([(0,Ds.j)("esri.views.navigation.Navigation")],e0);const sP=e0;var iP=T(36947),dn=T(59617);let fM,mM=null;function hR(d){return gM.apply(this,arguments)}function gM(){return(gM=(0,oi.Z)(function*(d){mM||(mM=Promise.resolve().then(T.bind(T,35082)).then(v=>fM=v)),yield mM,(0,fi.k_)(d)})).apply(this,arguments)}function nP(d,v,O,A){return yM.apply(this,arguments)}function yM(){return(yM=(0,oi.Z)(function*(d,v,O,A){if(!d)return null;const j=d.spatialReference;return(0,tn.kR)()||(0,tn.Up)(j,v)?(0,tn.iV)(d,v):fM?fM.projectGeometry(d,v,O,A):(yield Promise.race([hR(A),(0,tn.zD)(A)]),nP(d,v,O,A))})).apply(this,arguments)}let Ho=class extends Li.Z{constructor(d){super(d),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,at.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,at.pC)(this.userSpatialReference)?this.userSpatialReference:(0,at.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,at.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,at.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,at.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,at.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,at.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,at.Wg)(this._spatialReferenceTask.spatialReference))?(0,at.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,at.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){const d=this.map?.(),v=[];return(0,at.pC)(this.priorityCollection)&&v.push(this.priorityCollection),v.push({parent:d?.basemap,layers:d?.basemap?.baseLayers},{layers:d?.layers},{parent:d?.ground,layers:d?.ground?.layers},{parent:d?.basemap,layers:d?.basemap?.referenceLayers}),v}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:d,updating:v}=this._allLayers;let O=null;for(const j of d){const te=this._getSupportedSpatialReferences(j);if(te.length>0){const pe=this._narrowDownSpatialReferenceCandidates(O,te);(0,at.pC)(pe)&&(O=pe)}if((0,at.pC)(O)&&1===O.length)break}if(v&&((0,at.Wi)(O)||1!==O.length))return{updating:!0};const A=this._pickSpatialReferenceCandidate(O);return{spatialReference:(0,at.pC)(A)?A.spatialReference:null,viewingMode:(0,at.pC)(A)?A.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:d,updating:v}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(d&&d.length>0&&"tileInfo"in d[0]){const O=d[0].tileInfo;return{tileInfo:O&&O.spatialReference.equals(this.spatialReference)?O:null,updating:!1}}return{updating:v}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:d,updating:v}=this._allLayers;for(const O of d)if((0,iP.qC)(O)){const A=(0,iP.Ku)(O);if(A)return{heightModelInfo:A,vcsWkid:O.spatialReference?.vcsWkid,latestVcsWkid:O.spatialReference?.latestVcsWkid,updating:!1}}return{updating:v}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const d=this._allLayers,v=d.updating,O=[];for(const A of d.layers){const j="fullExtents"in A&&A.fullExtents||((0,at.pC)(A.fullExtent)?[A.fullExtent]:[]),te=this.requiresExtentInSpatialReference?null:j[0],pe=j.find(be=>be.spatialReference.equals(this.spatialReference))??te;if(pe)return{candidates:[{extent:pe,layer:A}],updating:!1};if(this._getSupportedSpatialReferences(A).length>0)for(const be of j)O.push({extent:be,layer:A})}return{candidates:O,updating:v}}get _extentTask(){var d=this;const{candidates:v,updating:O}=this._extentCandidatesTask;if(O)return{updating:O};if((0,at.Wi)(v)||0===v.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const A=this._pickExtentCandidate(v),j=this.spatialReference;return A.extent.equals(this._projectExtentTask.input)&&j.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:(0,at.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:((0,at.pC)(this._projectExtentTask.task)&&(this._projectExtentTask.task=(0,at.IM)(this._projectExtentTask.task)),this._projectExtentTask={input:A.extent.clone(),output:null,spatialReference:j.clone(),task:(0,fi.vr)(function(){var te=(0,oi.Z)(function*(pe){try{const be=yield nP(A.extent,j,A.layer.portalItem,pe);d._projectExtentTask={...d._projectExtentTask,task:null,output:be}}catch{if((0,fi.Hc)(pe))return;d._projectExtentTask={...d._projectExtentTask,task:null}}});return function(pe){return te.apply(this,arguments)}}())},{updating:!0})}_narrowDownSpatialReferenceCandidates(d,v){if((0,at.Wi)(d))return v;const O=[],A=(j,te)=>(0,at.pC)(j)?(0,at.pC)(te)?j===te&&j:j:te;for(const j of d)for(const te of v){if(!j.spatialReference.equals(te.spatialReference))continue;const pe=A(j.viewingMode,te.viewingMode);if(!1!==pe){O.push({spatialReference:j.spatialReference,viewingMode:pe});break}}return O.length>0?O:null}_pickSpatialReferenceCandidate(d){const v=this.defaultSpatialReference;return(0,at.Wi)(d)||d.length<1?(0,at.pC)(v)?{spatialReference:v,viewingMode:null}:null:((0,at.pC)(v)&&d.length>1&&d.some(({spatialReference:O})=>O.equals(v))&&(d=d.filter(({spatialReference:O})=>O.equals(v))),d.length>1&&d.some(({viewingMode:O})=>O!==dn.JY.Local)&&(d=d.filter(({viewingMode:O})=>O!==dn.JY.Local)),d[0])}_getSupportedSpatialReferences(d){const v="supportedSpatialReferences"in d&&d.supportedSpatialReferences||(d.spatialReference?[d.spatialReference]:[]);if(0===v.length)return[];const O=[];for(const A of v){const j=this.getSpatialReferenceSupport({spatialReference:A,layer:d});if((0,at.pC)(j)){const te=(0,at.pC)(j.constraints)?j.constraints:[{spatialReference:A,viewingMode:null}];for(const{spatialReference:pe,viewingMode:be}of te)(!this.requiresExtentInSpatialReference||(0,at.Wi)(this.userSpatialReference)||pe.equals(this.userSpatialReference))&&O.push({spatialReference:pe,viewingMode:be})}}return O}_pickExtentCandidate(d){const v=this.spatialReference;return d.find(({extent:O})=>v.equals(O.spatialReference))||d[0]}_collectLayers(d){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};const v={layers:[],preloading:-1,updating:!1};for(const O of d)if(this._collectCollection(O,v),v.preloading===this.sourcePreloadCount)break;return{layers:v.layers,updating:v.updating}}_collectCollection(d,v){if(d.layers){switch(this._loadMaybe(d.parent)){case"loading":return v.updating=!0,void++v.preloading;case"failed":return}for(const O of d.layers){switch(this._loadMaybe(O)){case"failed":continue;case"loading":v.updating=!0,++v.preloading;break;case"loaded":v.updating||v.layers.push(O),"layers"in O&&this._collectCollection({layers:O.layers},v)}if(v.preloading===this.sourcePreloadCount)break}}}_loadMaybe(d){return d&&"loadStatus"in d?"not-loaded"===d.loadStatus?(d.load(),"loading"):d.loadStatus:"loaded"}};var ev;(0,Je._)([(0,ht.Cb)()],Ho.prototype,"required",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ho.prototype,"map",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ho.prototype,"getSpatialReferenceSupport",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"defaultSpatialReference",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"userSpatialReference",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"sourcePreloadCount",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"priorityCollection",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"requiresExtentInSpatialReference",void 0),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"suspended",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"ready",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"heightModelInfoReady",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"spatialReference",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"extent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"heightModelInfo",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"vcsWkid",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"latestVcsWkid",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"viewingMode",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"tileInfo",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"mapCollections",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"_allLayers",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"_spatialReferenceTask",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"_tileInfoTask",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"_heightModelInfoTask",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ho.prototype,"_extentCandidatesTask",null),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"_extentTask",null),(0,Je._)([(0,ht.Cb)()],Ho.prototype,"_projectExtentTask",void 0),Ho=(0,Je._)([(0,Ds.j)("esri.views.support.DefaultsFromMap")],Ho);const tv=vo.Z.getLogger("esri.views.View");let pn=ev=class extends((0,Nm.p)(vc.Z.EventedMixin((0,$O.v)(Li.Z)))){constructor(d){super(d),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new jm.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:v=>v.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new JO.J,this.analyses=new q0,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Na.Z,this.magnifier=new XO,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new dR,this.navigation=new sP,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new QO.CE(this),this.persistableViewModels=new Na.Z,this._isValid=!1,this._readyCycleForced=!1,this.handles.add((0,wr.YP)(()=>this.preconditionsReady,v=>{v?(this._currentSpatialReference=this.spatialReference,ev.views.add(this)):(this._currentSpatialReference=null,ev.views.remove(this)),this.notifyChange("spatialReference"),!v&&this.ready?(this.layerViewManager?.clear(),this.toolViewManager?.detach(),(0,at.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):v&&!this.ready&&(this._startup(),(0,at.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},wr.Z_))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,(0,wr.N1)(()=>this.ready)))),this.basemapView=new U_({view:this}),this.layerViewManager=new tR({view:this,layerViewImporter:{importLayerView:d=>this.importLayerView(d),hasLayerViewModule:d=>this.hasLayerViewModule(d)},supportsGround:this.supportsGround}),this.toolViewManager=new aR({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,wr.YP)(()=>this.initialExtentRequired,d=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:d},{sync:!0,initial:!0}),(0,wr.YP)(()=>this.ready,d=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=d,this.defaultsFromMap.userSpatialReference=d?this.spatialReference:this._userSpatialReference)},{sync:!0}),(0,wr.YP)(()=>this._userSpatialReference,d=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=d)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){var d=this;let v=null;this.handles.add([(0,wr.YP)(()=>this.defaultsFromMap?.ready,O=>{if(O&&!this.spatialReference&&this.map?.allLayers.length>0){if((0,at.pC)(v))return;const j=(0,L_.kB)(()=>v=(0,at.IM)(v));v=(0,fi.vr)(function(){var te=(0,oi.Z)(function*(pe){try{yield(0,fi.e4)(d.spatialReferenceWarningDelay,null,pe)}catch{return}finally{v=null}tv.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")});return function(pe){return te.apply(this,arguments)}}()),this.handles.add(j,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,at.SC)(this.graphics),this.analyses=(0,at.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,at.SC)(this.analysisViewManager),this.toolViewManager=(0,at.SC)(this.toolViewManager),this.layerViewManager=(0,at.SC)(this.layerViewManager),this.basemapView=(0,at.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const d=this.map;this.map=null,d?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return tv.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ho({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:d=>this.getSpatialReferenceSupport(d),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||eM.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}set map(d){d!==this._get("map")&&(d?.destroyed&&(tv.warn("#map","The provided map is already destroyed",{map:d}),d=null),eM.Z.isLoadable(d)&&d.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",d))}get spatialReference(){let d=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return d&&this.defaultsFromMap?.required?.heightModelInfo&&(d=d.clone(),d.vcsWkid=this.defaultsFromMap.vcsWkid,d.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),d}set spatialReference(d){const v=!(0,cd.fS)(d,this._get("spatialReference"));this._set("_userSpatialReference",d),v&&(this._set("spatialReference",d),this._spatialReferenceChanged(d))}_spatialReferenceChanged(d){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const d=this.toolViewManager?this.toolViewManager.cursor:null;return(0,at.pC)(d)?d:this._cursor||"default"}set cursor(d){this._cursor=d,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(d){return this.layerViewManager.whenLayerView(d)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(d){throw new So.Z("importLayerView() not implemented")}hasLayerViewModule(d){return!1}validate(){return(0,oi.Z)(function*(){})()}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(d){return(0,at.pC)(this.getSpatialReferenceSupport({spatialReference:d}))}when(d,v){return this.isResolved()&&!this.ready&&tv.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(d,v)}forceReadyCycle(){this.ready&&((0,wr.gx)(()=>!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(d){this.toolViewManager.tools.add(d),this.activeTool=d}tryFatalErrorRecovery(){this.fatalError=null}};pn.views=new Na.Z,(0,Je._)([(0,ht.Cb)()],pn.prototype,"_userSpatialReference",void 0),(0,Je._)([(0,Rl.B)("toolViewManager.activeTool")],pn.prototype,"activeTool",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"allLayerViews",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"groundView",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"animation",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"basemapView",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"_defaultsFromMapSettings",null),(0,Je._)([(0,ht.Cb)()],pn.prototype,"defaultsFromMap",null),(0,Je._)([(0,ht.Cb)()],pn.prototype,"fatalError",void 0),(0,Je._)([(0,ht.Cb)({type:jc.Z})],pn.prototype,"extent",void 0),(0,Je._)([(0,ht.Cb)((0,Zy.z)(JO.J,"graphics"))],pn.prototype,"graphics",void 0),(0,Je._)([(0,ht.Cb)((0,Zy.z)(q0,"analyses"))],pn.prototype,"analyses",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,type:YO.Z})],pn.prototype,"heightModelInfo",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"interacting",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"navigating",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],pn.prototype,"preconditionsReady",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"typeSpecificPreconditionsReady",void 0),(0,Je._)([(0,ht.Cb)({type:Na.Z,readOnly:!0})],pn.prototype,"layerViews",void 0),(0,Je._)([(0,ht.Cb)({type:XO})],pn.prototype,"magnifier",void 0),(0,Je._)([(0,ht.Cb)({value:null,type:HO})],pn.prototype,"map",null),(0,Je._)([(0,ht.Cb)()],pn.prototype,"padding",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"ready",void 0),(0,Je._)([(0,ht.Cb)({type:ba.Z})],pn.prototype,"spatialReference",null),(0,Je._)([(0,ht.Cb)()],pn.prototype,"spatialReferenceWarningDelay",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"stationary",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"supportsGround",void 0),(0,Je._)([(0,ht.Cb)({type:Qw.Z})],pn.prototype,"timeExtent",void 0),(0,Je._)([(0,Rl.B)("toolViewManager.tools")],pn.prototype,"tools",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"toolViewManager",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number})],pn.prototype,"scale",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"updating",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"initialExtentRequired",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"initialExtent",null),(0,Je._)([(0,ht.Cb)()],pn.prototype,"cursor",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"input",void 0),(0,Je._)([(0,ht.Cb)({type:sP,nonNullable:!0})],pn.prototype,"navigation",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"layerViewManager",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"analysisViewManager",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"width",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"height",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"resizing",void 0),(0,Je._)([(0,ht.Cb)({value:null,readOnly:!0})],pn.prototype,"size",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"suspended",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"viewEvents",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],pn.prototype,"persistableViewModels",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"_isValid",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"_readyCycleForced",void 0),(0,Je._)([(0,ht.Cb)()],pn.prototype,"_currentSpatialReference",void 0),pn=ev=(0,Je._)([(0,Ds.j)("esri.views.View")],pn);const _R=pn;let j_=class extends $O.D{constructor(d){super(d),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((d,v)=>this._dfd={resolve:d,reject:v}))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new So.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(d,v){v||(v=(0,fi.y8)(d)?"waiting-for-target":"running"),this._set("target",d),this._set("state",v)}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],j_.prototype,"done",null),(0,Je._)([(0,ht.Cb)({readOnly:!0,type:String})],j_.prototype,"state",void 0),(0,Je._)([(0,ht.Cb)()],j_.prototype,"target",void 0),j_=(0,Je._)([(0,Ds.j)("esri.views.ViewAnimation")],j_),(j_||(j_={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};const rf=j_,zm=()=>Promise.all([T.e(8592),T.e(8562)]).then(T.bind(T,8562)),oP=()=>Promise.all([T.e(8592),T.e(4976)]).then(T.bind(T,64976)),aP={"base-dynamic":()=>Promise.all([T.e(9759),T.e(5627)]).then(T.bind(T,95627)),"base-elevation":oP,"base-tile":zm,"bing-maps":zm,"building-scene":()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(5542),T.e(7915),T.e(9410),T.e(5849),T.e(8592),T.e(8068)]).then(T.bind(T,81736)),csv:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(126),T.e(4048)]).then(T.bind(T,84048)),elevation:oP,feature:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(126),T.e(6446)]).then(T.bind(T,16446)),geojson:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(126),T.e(4937)]).then(T.bind(T,54937)),graphics:()=>Promise.all([T.e(2436),T.e(3487),T.e(2359)]).then(T.bind(T,62359)),group:()=>T.e(961).then(T.bind(T,961)),imagery:()=>Promise.all([T.e(9759),T.e(4366)]).then(T.bind(T,4366)),"integrated-mesh":()=>Promise.all([T.e(2436),T.e(5542),T.e(7915),T.e(4281)]).then(T.bind(T,4186)),"line-of-sight":()=>T.e(8325).then(T.bind(T,68325)),"map-image":()=>Promise.all([T.e(9759),T.e(8592),T.e(1955)]).then(T.bind(T,81955)),media:()=>Promise.all([T.e(8592),T.e(9094)]).then(T.bind(T,59094)),"ogc-feature":()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(126),T.e(3835)]).then(T.bind(T,3835)),"open-street-map":zm,"point-cloud":()=>Promise.all([T.e(4471),T.e(8592),T.e(154)]).then(T.bind(T,61525)),voxel:()=>T.e(9991).then(T.bind(T,19991)),route:()=>Promise.all([T.e(2436),T.e(3487),T.e(403),T.e(2124)]).then(T.bind(T,62124)),scene:d=>null==d.profile||"mesh-pyramids"===d.profile?Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(5542),T.e(7915),T.e(5849),T.e(8592),T.e(15)]).then(T.bind(T,80015)):Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(5542),T.e(8592),T.e(8454)]).then(T.bind(T,39988)),stream:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(5895),T.e(937)]).then(T.bind(T,20937)),tile:zm,"imagery-tile":()=>Promise.all([T.e(8594),T.e(8592),T.e(342)]).then(T.bind(T,10342)),"vector-tile":()=>Promise.all([T.e(3751),T.e(4654),T.e(7692),T.e(8364),T.e(8592),T.e(2020)]).then(T.bind(T,32020)),wcs:()=>Promise.all([T.e(8594),T.e(8592),T.e(342)]).then(T.bind(T,10342)),"web-tile":zm,wfs:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(2436),T.e(8433),T.e(2947),T.e(126),T.e(8726)]).then(T.bind(T,68726)),wms:()=>Promise.all([T.e(9759),T.e(8592),T.e(8765)]).then(T.bind(T,48765)),wmts:()=>Promise.all([T.e(8592),T.e(6373)]).then(T.bind(T,6373)),"geo-rss":null,kml:null,"map-notes":null,"subtype-group":null,unknown:null,unsupported:null},fR=vo.Z.getLogger("esri.views.3d.analysis.AnalysisViewManager3D"),cP="analyses-owner-handles";var sf,t0,d;(d=sf||(sf={}))[d.PENDING=0]="PENDING",d[d.CREATED=1]="CREATED",function(d){d[d.ADDED=0]="ADDED",d[d.REMOVED=1]="REMOVED"}(t0||(t0={}));let r0=class extends Nm.r{constructor(d){super(d),this._allAnalysisViews=new Na.Z,this._creatingViewCount=0,this._items=new Map,this._scheduledUpdateHandle=null,this._attachedToViewResolver=(0,fi.hh)(),this._analysisModules={"area-measurement":{module:null},dimensioning:{module:null},"direct-line-measurement":{module:null},"line-of-sight":{module:null},slice:{module:null}}}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject((0,fi.zE)("AnalysisViewManager was destroyed"))}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject((0,fi.zE)()),this._attachedToViewResolver=(0,fi.hh)(),this._attachedToViewResolver.promise.catch(()=>{})}get updating(){return!this.view.ready||0!==this._creatingViewCount||this._allAnalysisViews.some(d=>d.updating)}get testInfo(){return{allAnalysisViews:this._allAnalysisViews}}whenAnalysisView(d){var v=this;return(0,oi.Z)(function*(){yield v._attachedToViewResolver.promise;const O=v._items.get(d);if((0,at.Wi)(O)||O.state.list===t0.REMOVED)throw new So.Z("AnalysisViewManager:no-analysisview-for-analysis","The analysis has not been added to view.analyses",{analysis:d});return O.createAnalysisViewTask.promise})()}_connectOwners(){this.handles.add(this._connectAnalysesCollection(this.view.analyses),cP)}_disconnectOwners(){this.handles.remove(cP),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(d){for(const A of d)this._addAnalysis(A);const v=d.on("after-add",A=>this._addAnalysis(A.item)),O=d.on("after-remove",A=>this._removeAnalysis(A.item));return{remove:()=>{v.remove(),O.remove();for(const A of d)this._removeAnalysis(A)}}}_addAnalysis(d){const v=this._items.get(d);if(null==v){const O={state:{view:sf.PENDING,list:t0.ADDED},analysis:d,view:null,createAnalysisViewTask:null};this._items.set(d,O),O.createAnalysisViewTask=(0,fi.vr)(A=>this._createAnalysisViewPromise(O,A))}else v.state.list=t0.ADDED}_removeAnalysis(d){const v=this._items.get(d);null!=v?(v.state.list=t0.REMOVED,this._scheduleUpdate()):fR.error("Trying to remove analysis which was not added")}_scheduleUpdate(){(0,at.pC)(this._scheduledUpdateHandle)||(this._scheduledUpdateHandle=(0,w_.Os)(()=>this._update()))}_update(){this._scheduledUpdateHandle=(0,at.hw)(this._scheduledUpdateHandle),this._items.forEach(d=>{if(d.state.list===t0.REMOVED)switch(this._items.delete(d.analysis),d.state.view){case sf.PENDING:d.createAnalysisViewTask=(0,at.IM)(d.createAnalysisViewTask);break;case sf.CREATED:(0,at.pC)(d.view)&&(this._allAnalysisViews.remove(d.view),d.view=(0,at.SC)(d.view),d.createAnalysisViewTask=null)}})}_createAnalysisViewPromise(d,v){var O=this;return(0,oi.Z)(function*(){const A=d.analysis,j=A.type,te=O._analysisModules[j];if(O._creatingViewCount+=1,(0,at.Wi)(te.module))try{te.module=yield O._loadAnalysisModule(j)}catch(be){throw O._creatingViewCount-=1,be}if((0,fi.Hc)(v))throw O._creatingViewCount-=1,(0,fi.zE)("AnalysisView creation aborted");const pe=new te.module.default({analysis:A,view:O.view});try{yield pe.when()}catch(be){throw O._creatingViewCount-=1,be}if((0,fi.Hc)(v))throw O._creatingViewCount-=1,pe.destroy(),(0,fi.zE)("AnalysisView creation aborted");return d.view=pe,d.state.view=sf.CREATED,O._allAnalysisViews.add(pe),O._creatingViewCount-=1,pe})()}_loadAnalysisModule(d){switch(d){case"area-measurement":return Promise.all([T.e(4918),T.e(4010),T.e(1329),T.e(280),T.e(2943)]).then(T.bind(T,32943));case"dimensioning":return Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(2785),T.e(4010),T.e(4828),T.e(1329),T.e(8592),T.e(9503)]).then(T.bind(T,59503));case"direct-line-measurement":return Promise.all([T.e(4918),T.e(4010),T.e(280),T.e(8592),T.e(6212)]).then(T.bind(T,96212));case"line-of-sight":return Promise.all([T.e(2785),T.e(4828),T.e(8592),T.e(9862)]).then(T.bind(T,11467));case"slice":return Promise.all([T.e(2785),T.e(9410),T.e(8592),T.e(4122)]).then(T.bind(T,95680))}}};(0,Je._)([(0,ht.Cb)()],r0.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],r0.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],r0.prototype,"_allAnalysisViews",void 0),(0,Je._)([(0,ht.Cb)()],r0.prototype,"_creatingViewCount",void 0),r0=(0,Je._)([(0,Ds.j)("esri.views.3d.analysis.AnalysisViewManager3D")],r0);const mR=r0;var nf=T(94425),Ec=T(98943);const gR=vo.Z.getLogger("esri.views.3d.state.Constraints");let Yh=class extends Li.Z{constructor(d){super(d),this.collision=new Hm,this.distance=1/0,this.minimumPoiDistance=4}get altitude(){return this.mode===dn.JY.Local?null:this._get("altitude")||null}set altitude(d){this.mode!==dn.JY.Local?this._set("altitude",d):gR.warn("Altitude constraint is ignored in local scenes")}clampAltitude(d){return this.altitude?(0,cs.uZ)(d,this.altitude.min,this.altitude.max):d}clampTilt(d,v){if(!this.tilt)return v;const O=this.tilt(d);return(0,cs.uZ)(v,O.min,O.max)}clampDistance(d){return Math.min(d,this.distance)}createDefaultTilt(){return this.mode===dn.JY.Local?this._createDefaultTiltLocal():this._createDefaultTiltGlobal()}createConstantMaxTilt(d){return(v,O=vM)=>(O.min=Il.min,O.max=d,O)}_createDefaultTiltLocal(){const d=this.collision.enabled?(0,Ec.uV)([[4e3,Il.max],[1e4,(0,cs.Vl)(88)],[6e6,(0,cs.Vl)(88)]]):()=>Il.max;return(v,O=vM)=>(O.min=Il.min,O.max=d(v),O)}_createDefaultTiltGlobal(){const d=(0,Ec.uV)(this.collision.enabled?[[4e3,Il.max],[5e4,(0,cs.Vl)(88)],[6e6,(0,cs.Vl)(88)],[2e7,Il.min]]:[[3e5,Il.max],[3e6,(0,cs.Vl)(88)],[6e6,(0,cs.Vl)(88)],[2e7,Il.min]]);return(v,O=vM)=>(O.min=Il.min,O.max=d(v),O)}};(0,Je._)([(0,ht.Cb)()],Yh.prototype,"altitude",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Yh.prototype,"collision",void 0),(0,Je._)([(0,ht.Cb)()],Yh.prototype,"distance",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Yh.prototype,"minimumPoiDistance",void 0),(0,Je._)([(0,ht.Cb)()],Yh.prototype,"tilt",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Yh.prototype,"mode",void 0),Yh=(0,Je._)([(0,Ds.j)("esri.views.3d.state.Constraints")],Yh);const uP=function yR(d){return{min:-2e5,max:4*d.radius}}(nf.sv),Il={min:(0,cs.Vl)(.5),max:(0,cs.Vl)(179.5)},vM={min:0,max:0};let Hm=class extends Li.Z{constructor(){super(...arguments),this.enabled=!0,this.elevationMargin=5}};(0,Je._)([(0,ht.Cb)({type:Boolean})],Hm.prototype,"enabled",void 0),(0,Je._)([(0,ht.Cb)({type:Number})],Hm.prototype,"elevationMargin",void 0),Hm=(0,Je._)([(0,Ds.j)("esri.views.3d.state.Constraints.CollisionConstraint")],Hm);let of=class extends Li.Z{constructor(){super(...arguments),this.min=uP.min,this.max=uP.max}};(0,Je._)([(0,ht.Cb)({type:Number})],of.prototype,"min",void 0),(0,Je._)([(0,ht.Cb)({type:Number})],of.prototype,"max",void 0),of=(0,Je._)([(0,Ds.j)("esri.views.3d.constraints.AltitudeConstraint")],of);let Zh=class extends Li.Z{constructor(){super(...arguments),this.mode="auto"}get near(){return this._get("near")}set near(d){this._set("near",d),d>=this._get("far")&&(this.far=d+1e-9),this.mode="manual"}castNear(d){return Math.max(1e-8,d)}get far(){return this._get("far")}set far(d){this._set("far",d),d<=this._get("near")&&(this.near=d-1e-9),this.mode="manual"}castFar(d){return Math.max(1e-8,d)}autoUpdate(d,v){"auto"===this.mode&&(this._get("near")!==d&&this._set("near",d),this._get("far")!==v&&this._set("far",v))}};(0,Je._)([(0,ht.Cb)({type:Number,value:1e-8})],Zh.prototype,"near",null),(0,Je._)([(0,Uu.p)("near")],Zh.prototype,"castNear",null),(0,Je._)([(0,ht.Cb)({type:Number,value:1e-8})],Zh.prototype,"far",null),(0,Je._)([(0,Uu.p)("far")],Zh.prototype,"castFar",null),(0,Je._)([(0,ht.Cb)({type:["auto","manual"]})],Zh.prototype,"mode",void 0),Zh=(0,Je._)([(0,Ds.j)("esri.views.3d.constraints.ClipDistanceConstraint")],Zh);const EM={min:(0,cs.BV)(Il.min),max:(0,cs.BV)(Il.max)};let s0=class extends Li.Z{constructor(){super(...arguments),this.mode="auto"}get max(){return this._get("max")}set max(d){this._set("max",d),this.mode="manual"}castMax(d){return(0,cs.uZ)(d,EM.min,EM.max)}autoUpdate(d){"auto"===this.mode&&this._get("max")!==d&&this._set("max",d)}};(0,Je._)([(0,ht.Cb)({type:["auto","manual"]})],s0.prototype,"mode",void 0),(0,Je._)([(0,ht.Cb)({type:Number,value:EM.max})],s0.prototype,"max",null),(0,Je._)([(0,Uu.p)("max")],s0.prototype,"castMax",null),s0=(0,Je._)([(0,Ds.j)("esri.views.3d.constraints.TiltConstraint")],s0);let i0=class extends Li.Z{constructor(){super(...arguments),this.tilt=new s0,this.altitude=new of,this.clipDistance=new Zh}};var MM;(0,Je._)([(0,ht.Cb)({type:s0})],i0.prototype,"tilt",void 0),(0,Je._)([(0,ht.Cb)({type:of})],i0.prototype,"altitude",void 0),(0,Je._)([(0,ht.Cb)({type:Zh})],i0.prototype,"clipDistance",void 0),i0=(0,Je._)([(0,Ds.j)("esri.views.3d.constraints.Constraints")],i0);let dd=MM=class extends nu.wq{constructor(d){super(d),this.type="sun",this.date=null,this.directShadowsEnabled=!1,this.displayUTCOffset=null}readDate(d,v){return null!=v.datetime&&new Date(v.datetime)||null}writeDate(d,v,O){v[O]=d.getTime()}readDirectShadowsEnabled(d,v){return!!v.directShadows}writedirectShadowsEnabled(d,v,O){d&&(v[O]=d)}writeDisplayUTCOffset(d,v){null!=d&&(v.displayUTCOffset=d)}clone(){return new MM(this.cloneConstructProperties())}cloneConstructProperties(){const d={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};return null!=this.date&&(d.date=new Date(this.date.getTime())),d}};(0,Je._)([(0,ht.Cb)({readOnly:!0,type:["sun"],json:{write:!0}})],dd.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Date,json:{type:Number,write:{target:"datetime"}}})],dd.prototype,"date",void 0),(0,Je._)([(0,oM.r)("date",["datetime"])],dd.prototype,"readDate",null),(0,Je._)([(0,Bm.c)("date")],dd.prototype,"writeDate",null),(0,Je._)([(0,ht.Cb)({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],dd.prototype,"directShadowsEnabled",void 0),(0,Je._)([(0,oM.r)("directShadowsEnabled",["directShadows"])],dd.prototype,"readDirectShadowsEnabled",null),(0,Je._)([(0,Bm.c)("directShadowsEnabled")],dd.prototype,"writedirectShadowsEnabled",null),(0,Je._)([(0,ht.Cb)({type:Number,json:{write:!0}})],dd.prototype,"displayUTCOffset",void 0),(0,Je._)([(0,Bm.c)("displayUTCOffset")],dd.prototype,"writeDisplayUTCOffset",null),dd=MM=(0,Je._)([(0,Ds.j)("esri.webscene.SunLighting")],dd);const Gm=dd;var af;let uh=af=class extends(vc.Z.EventedMixin(Gm)){constructor(d){super(d),this.cameraTrackingEnabled=!0,this.ambientOcclusionEnabled=!1,this.waterReflectionEnabled=!1,this.positionTimezoneInfo={hours:0,minutes:0,seconds:0,autoUpdated:!0};const v=(new Date).getFullYear(),O=new Date("March 15, "+v+" 12:00:00 UTC");this._set("defaultDate",O),this._set("date",O)}get defaultDate(){return new Date(this._get("defaultDate").getTime())}static fromWebsceneLighting(d){return new af(d.cloneConstructProperties())}set defaultDate(d){const v=this._get("date")===this._get("defaultDate");d=new Date(d.getTime()),this._set("defaultDate",d),v&&this._set("date",d)}set date(d){null!=d&&(this.positionTimezoneInfo.autoUpdated=!1,this._set("date",new Date(d.getTime())))}autoUpdate(d,v){const O=af.calculateTimezoneOffset(this.positionTimezoneInfo);this.positionTimezoneInfo.hours=v.hours,this.positionTimezoneInfo.minutes=v.minutes,this.positionTimezoneInfo.seconds=v.seconds;let A=null;null!=d&&(this.positionTimezoneInfo.autoUpdated=!0,A=this.date&&this.date.getTime(),this._set("date",new Date(d.getTime())));const j=af.calculateTimezoneOffset(this.positionTimezoneInfo);if(O!==j&&(bM.target=this,bM.timezoneOffset=j,this.emit("timezone-will-change",bM)),null!=d)return A!==d.getTime()}clone(){const d=this._get("date")===this._get("defaultDate"),v=new af({...this.cloneConstructProperties(),defaultDate:this.defaultDate,cameraTrackingEnabled:this.cameraTrackingEnabled,ambientOcclusionEnabled:this.ambientOcclusionEnabled,waterReflectionEnabled:this.waterReflectionEnabled});return d&&v._set("date",v._get("defaultDate")),v.positionTimezoneInfo.autoUpdated=this.positionTimezoneInfo.autoUpdated,v.positionTimezoneInfo.hours=this.positionTimezoneInfo.hours,v.positionTimezoneInfo.minutes=this.positionTimezoneInfo.minutes,v.positionTimezoneInfo.seconds=this.positionTimezoneInfo.seconds,v}cloneWithWebsceneLighting(d){const v=this.clone();return null!=d.date&&(v.date=d.date),v.directShadowsEnabled=d.directShadowsEnabled,v.displayUTCOffset=d.displayUTCOffset,v}};(0,Je._)([(0,ht.Cb)({type:Boolean})],uh.prototype,"cameraTrackingEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],uh.prototype,"ambientOcclusionEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],uh.prototype,"waterReflectionEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Date})],uh.prototype,"defaultDate",null),(0,Je._)([(0,ht.Cb)({type:Date})],uh.prototype,"date",null),uh=af=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SunLighting")],uh),function(d){d.calculateTimezoneOffset=function v({hours:O,minutes:A,seconds:j}){return Math.round(O+A/60+j/3600)}}(uh||(uh={}));const bM={target:null,timezoneOffset:0},F_=uh;var TM;let Km=TM=class extends nu.wq{constructor(d){super(d),this.type="virtual",this.directShadowsEnabled=!1}clone(){return new TM(this.cloneConstructProperties())}cloneConstructProperties(){return{directShadowsEnabled:this.directShadowsEnabled}}};(0,Je._)([(0,ht.Cb)({readOnly:!0,type:["virtual"],json:{write:!0}})],Km.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],Km.prototype,"directShadowsEnabled",void 0),Km=TM=(0,Je._)([(0,Ds.j)("esri.webscene.VirtualLighting")],Km);const rv=Km;var sv;let Ym=sv=class extends(vc.Z.EventedMixin(rv)){constructor(d){super(d),this.ambientOcclusionEnabled=!1,this.waterReflectionEnabled=!1}clone(){return new sv({...this.cloneConstructProperties(),ambientOcclusionEnabled:this.ambientOcclusionEnabled,waterReflectionEnabled:this.waterReflectionEnabled})}static fromWebsceneLighting(d){return new sv(d.cloneConstructProperties())}cloneWithWebsceneLighting(d){const v=this.clone();return v.directShadowsEnabled=d.directShadowsEnabled,v}};(0,Je._)([(0,ht.Cb)({type:Boolean})],Ym.prototype,"ambientOcclusionEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],Ym.prototype,"waterReflectionEnabled",void 0),Ym=sv=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.VirtualLighting")],Ym);const Zm=Ym,vR={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:F_,virtual:Zm}};var CM;let km=CM=class extends Li.Z{set quality(d){["low","high"].includes(d)&&this._set("quality",d)}clone(){return new CM({quality:this.quality})}};var OM;(0,Je._)([(0,ht.Cb)({type:["low","high"],value:"low"})],km.prototype,"quality",null),km=CM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SceneViewAtmosphere")],km);let $m=OM=class extends nu.wq{constructor(d){super(d),this.type="sunny",this.cloudCover=.5}clone(){return new OM({cloudCover:this.cloudCover})}};(0,Je._)([(0,qp.J)({sunny:"sunny"})],$m.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],$m.prototype,"cloudCover",void 0),$m=OM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SunnyWeather")],$m);const PM=$m;var DM;let Jm=DM=class extends nu.wq{constructor(d){super(d),this.type="cloudy",this.cloudCover=.5}clone(){return new DM({cloudCover:this.cloudCover})}};(0,Je._)([(0,qp.J)({cloudy:"cloudy"})],Jm.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Jm.prototype,"cloudCover",void 0),Jm=DM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.CloudyWeather")],Jm);const ER=Jm;var xM;let Xm=xM=class extends nu.wq{constructor(d){super(d),this.type="foggy",this.fogStrength=.5}clone(){return new xM({fogStrength:this.fogStrength})}};(0,Je._)([(0,qp.J)({foggy:"foggy"})],Xm.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Xm.prototype,"fogStrength",void 0),Xm=xM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.FoggyWeather")],Xm);const MR=Xm;var SM;let lf=SM=class extends nu.wq{constructor(d){super(d),this.type="rainy",this.cloudCover=.5,this.precipitation=.5}clone(){return new SM({cloudCover:this.cloudCover,precipitation:this.precipitation})}};(0,Je._)([(0,qp.J)({rainy:"rainy"})],lf.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],lf.prototype,"cloudCover",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],lf.prototype,"precipitation",void 0),lf=SM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.RainyWeather")],lf);const bR=lf;var AM;let n0=AM=class extends nu.wq{constructor(d){super(d),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled"}clone(){return new AM({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};(0,Je._)([(0,qp.J)({snowy:"snowy"})],n0.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],n0.prototype,"cloudCover",void 0),(0,Je._)([(0,ht.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],n0.prototype,"precipitation",void 0),(0,Je._)([(0,ht.Cb)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],n0.prototype,"snowCover",void 0),n0=AM=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SnowyWeather")],n0);const dP={key:"type",base:PM,typeMap:{sunny:PM,cloudy:ER,rainy:bR,snowy:n0,foggy:MR}},TR=Object.keys(dP.typeMap),hd=1e4,OR={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:Gm,virtual:rv}};let iv=class extends nu.wq{constructor(d){super(d)}clone(){}};(0,Je._)([(0,ht.Cb)({readOnly:!0,json:{read:!1}})],iv.prototype,"type",void 0),iv=(0,Je._)([(0,Ds.j)("esri.webscene.background.Background")],iv);const hP=iv;var LM;const DR={...T(60958).a,nonNullable:!0};let Qm=LM=class extends hP{constructor(d){super(d),this.type="color",this.color=new yc.Z([0,0,0,1])}clone(){return new LM(this.cloneProperties())}cloneProperties(){return{color:this.color.clone()}}};(0,Je._)([(0,qp.J)({color:"color"},{readOnly:!0})],Qm.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)(DR)],Qm.prototype,"color",void 0),Qm=LM=(0,Je._)([(0,Ds.j)("esri.webscene.background.ColorBackground")],Qm);const _P=Qm,pP={base:hP,key:"type",typeMap:{color:_P}},SR={types:pP,json:{read:function xR(d){return(v,O,A)=>{if(!v)return v;for(const j in d.typeMap)if(v.type===j){const te=new d.typeMap[j];return te.read(v,A),te}}}(pP),write:{overridePolicy:(d,v,O)=>({enabled:!O||!O.isPresentation})}}};var wM;const AR=vo.Z.getLogger("esri.webscene.Environment"),fP=(d,v,O)=>({enabled:!O||!O.isPresentation});let N_=wM=class extends nu.wq{constructor(d){super(d),this.lighting=new Gm,this.background=null,this.atmosphereEnabled=!0,this.starsEnabled=!0}set weather(d){(function CR(d,v){return!!TR.includes(d)||(v.error(`"${d}" is not a valid weather type`),!1)})(d?.type,AR)&&this._set("weather",d)}clone(){return new wM(this.cloneConstructProperties())}cloneConstructProperties(){return{lighting:this.lighting&&"virtual"===this.lighting.type?rv.prototype.clone.call(this.lighting):Gm.prototype.clone.call(this.lighting),background:(0,zh.d9)(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}}};(0,Je._)([(0,ht.Cb)({types:OR,nonNullable:!0,json:{write:!0}})],N_.prototype,"lighting",void 0),(0,Je._)([(0,ht.Cb)(SR)],N_.prototype,"background",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:fP}}})],N_.prototype,"atmosphereEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:fP}}})],N_.prototype,"starsEnabled",void 0),(0,Je._)([(0,ht.Cb)({types:dP,nonNullable:!0,json:{write:!0},value:new PM})],N_.prototype,"weather",null),N_=wM=(0,Je._)([(0,Ds.j)("esri.webscene.Environment")],N_);const mP=N_;var qm;let cf=qm=class extends mP{constructor(d){super(d),this.atmosphere=new km,this.lighting=new F_}static fromWebsceneEnvironment(d){const v=d.cloneConstructProperties();return new qm({...v,lighting:"virtual"===v.lighting.type?Zm.fromWebsceneLighting(v.lighting):F_.fromWebsceneLighting(v.lighting)})}castLighting(d){return this._convertLighting(d)}applyLighting(d){this.lighting=this._convertLighting(d)}_convertLighting(d){return d?d instanceof F_||d instanceof Zm?d:d instanceof Gm?this.lighting&&"sun"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(d):new F_(d.cloneConstructProperties()):d instanceof rv?this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(d):new Zm(d.cloneConstructProperties()):(0,ou.N7)(vR,d):new F_}clone(){return new qm({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:(0,zh.d9)(this.background)})}cloneWithWebsceneEnvironment(d){return new qm({atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:(0,zh.d9)(this.background),...d.cloneConstructProperties(),lighting:this._getLighting(d)})}_getLighting(d){return"sun"===d.lighting.type?this.lighting&&"sun"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(d.lighting):F_.fromWebsceneLighting(d.lighting):"virtual"===d.lighting.type?this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(d.lighting):Zm.fromWebsceneLighting(d.lighting):F_.fromWebsceneLighting(d.lighting)}};(0,Je._)([(0,ht.Cb)({type:km,json:{read:!1},nonNullable:!0})],cf.prototype,"atmosphere",void 0),(0,Je._)([(0,ht.Cb)({nonNullable:!0})],cf.prototype,"lighting",void 0),(0,Je._)([(0,Uu.p)("lighting")],cf.prototype,"castLighting",null),cf=qm=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SceneViewEnvironment")],cf);const uf=cf;var Et=T(84161),Ao=T(4794),Mo=T(12080),Yi=T(67831),po=T(99770);function gP(d){return Math.min(1,Math.max(0,(d-1e5)/9e5))}const df=(0,br.f)(5802e-9,13558e-9,331e-7),UM=(0,br.f)(65e-8*3,5643e-9,255e-9),nv=1e5;var RR=T(56598),Ga=T(651),Ka=T(91056),Aa=T(39114),Wa=T(12407),Gt=T(67969),Ti=T(2078);class eg extends Ka.A{initializeProgram(v){const O=eg.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)(this.configuration.haze?{blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ZERO,Gt.zi.ONE_MINUS_SRC_COLOR,Gt.zi.ONE),colorWrite:Ti.BK}:{blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}eg.shader=new Ga.J(RR.C,()=>T.e(6713).then(T.bind(T,66713)));var Rn=T(87601);class yP extends Rn.m{constructor(){super(...arguments),this.haze=!1}}(0,Je._)([(0,Rn.o)()],yP.prototype,"haze",void 0);var Fd=T(17625),tg=T(59631),Ul=T(19597);class vP{constructor(v){this._view=v,this.type="realistic",this.canRender=!0,this._cameraPosition=(0,br.c)(),this._heightParameters=(0,Ao.c)(),this._betasRayleigh=(0,br.c)(),this._betasCombined=(0,br.c)(),this._scaleHeight=0,this._radii=(0,po.a)(),this._cameraHeight=0,this._cameraHeightSq=0,this._cAtmosphere=0,this._innerFadeDistance=0,this._altitudeFade=0,this._lowerElevationBoundRadius=0,this._lowerBoundEarthRadius=nf.sv.radius,this._hazeStrength=1,this._darkenHaze=!1,this._updateRadius(nf.sv.radius)}destroy(){this._atmosphereTechnique=(0,at.RY)(this._atmosphereTechnique),this._atmosphereHazeTechnique=(0,at.RY)(this._atmosphereHazeTechnique),this._vao=(0,at.O3)(this._vao),this._handles=(0,at.SC)(this._handles)}when(){return Promise.resolve()}initializeRenderContext(v){const O=v.renderContext.rctx,A=this._handles=new so.Z,j=this._view.basemapTerrain;(0,at.pC)(j.rootTiles)&&this._updateElevation({spatialReference:j.spatialReference,tile:j.rootTiles[0],extent:j.rootTiles[0].extent,context:"ground"}),A.add((0,wr.on)(()=>this._view.basemapTerrain,"elevation-change",pe=>this._updateElevation(pe),{onListenerAdd:()=>this._updateElevation()})),A.add((0,wr.on)(()=>this._view.basemapTerrain,"elevation-bounds-change",()=>this._updateVisibleElevationBounds()));const te=new yP;te.haze=!1,this._atmosphereTechnique=v.shaderTechniqueRepository.acquire(eg,te),te.haze=!0,this._atmosphereHazeTechnique=v.shaderTechniqueRepository.acquire(eg,te),this._vao=(0,Ul.ow)(O,tg.Bn),this._scaleHeight=8500,(0,Et.s)(this._betasRayleigh,df[0],df[1],df[2]),(0,Et.s)(this._betasCombined,df[0]+UM[0],df[1]+UM[1],df[2]+UM[2])}render(v){this._render(v,this._atmosphereTechnique,v.offscreenRenderingHelper.depthTexture)}renderHaze(v,O){this._darkenHaze=O,this._render(v,this._atmosphereHazeTechnique,v.offscreenRenderingHelper.linearDepthTexture)}_render(v,O,A){this._update(v.bindParameters.camera);const j=v.rctx.bindTechnique(O,IR,v.bindParameters);v.offscreenRenderingHelper.renderDepthDetached(()=>{j.bindTexture("depthTex",A),this._renderCommon(O.program,v)})}_renderCommon(v,O){if((0,at.Wi)(this._vao))return;const A=O.rctx;v.setUniform4fv("heightParameters",this._heightParameters),v.setUniform3fv("cameraPosition",this._cameraPosition),v.setUniform2fv("radii",this._radii),v.setUniform1f("scaleHeight",this._scaleHeight),v.setUniform1f("betaMie",3996e-9),v.setUniform3fv("betaRayleigh",this._betasRayleigh),v.setUniform3fv("betaCombined",this._betasCombined),v.setUniform1f("innerFadeDistance",this._innerFadeDistance),v.setUniform1f("altitudeFade",this._altitudeFade),v.setUniform1f("hazeStrength",this._hazeStrength),A.bindVAO(this._vao),v.assertCompatibleVertexAttributeLocations(this._vao),A.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4)}_adjustRadiusForTesselation(v){return v*Math.cos(Math.PI/16/16)}_updateElevation(v){const O=v?v.tile:(0,at.Pt)(this._view.basemapTerrain.rootTiles,[null])[0];if((0,at.Wi)(O)||0!==O.level)return;const A=this._adjustRadiusForTesselation(nf.sv.radius+O.elevationBounds[0]);A!==this._lowerElevationBoundRadius&&(this._lowerElevationBoundRadius=A,this._lowerBoundEarthRadius=-1,this._updateVisibleElevationBounds())}_updateVisibleElevationBounds(){const v=this._adjustRadiusForTesselation(nf.sv.radius+this._view.basemapTerrain.elevationBounds.min);(this._lowerBoundEarthRadius<0||v<this._lowerBoundEarthRadius)&&this._updateRadius(v)}_updateRadius(v){this._lowerBoundEarthRadius=v,(0,Yi.a)(this._radii,v,v+nv),this._innerFadeDistance=2*Math.sqrt(1e4*(2*v-1e4))}_update(v){if((0,at.Wi)(v))return;this._cameraHeight=(0,Et.l)(v.eye),this._cameraHeightSq=this._cameraHeight*this._cameraHeight,this._cAtmosphere=this._cameraHeightSq-this._radii[1]*this._radii[1];const O=Math.min(1,Math.max(0,(this._cameraHeight-this._radii[0])/nv));this._heightParameters=(0,Ao.f)(this._cameraHeight,this._cameraHeightSq,this._cAtmosphere,O),(0,Et.c)(this._cameraPosition,v.eye),this._altitudeFade=gP(this._cameraHeight-this._lowerBoundEarthRadius),this._hazeStrength=this._darkenHaze?(0,cs.t7)(.6,1,(0,cs.CW)(9500,10500,this._cameraHeight-nf.sv.radius)):1}static isSupported(v){return v.renderContext.rctx.capabilities.depthTexture}}const IR=new Fd.K;var on=T(28347),ao=T(43703),UR=T(48977),BM=T(78451),jM=T(34054),Lo=T(26242);function kh(d=jR){return[d[0],d[1],d[2],d[3]]}function rg(d,v){return function FM(d,v,O,A,j=kh()){return j[0]=d,j[1]=v,j[2]=O,j[3]=A,j}(d[0],d[1],d[2],v,Lo.o6.get())}function sg(d,v,O=kh()){return(0,Et.f)(O,d,v),(0,Et.n)(O,O),O[3]=(0,jM.EU)(d,v),O}const jR=[0,0,1,0];(0,BM.a)(),(0,BM.a)();var Go=T(12015),FR=T(50722);class av extends Ka.A{constructor(v){super(v,null,()=>this.destroy())}initializeProgram(v){const O=av.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.if)(Gt.zi.ONE,Gt.zi.SRC_ALPHA),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}function bP(d){return(0,at.pC)(d)&&!d.running}av.shader=new Ga.J(FR.C,()=>T.e(2694).then(T.bind(T,32694)));let o0=class extends Li.Z{constructor(d){super(d),this._technique=new av(d),this._vao=(0,Ul.ow)(d.rctx)}destroy(){this._technique=(0,at.RY)(this._technique),this._vao=(0,at.O3)(this._vao)}render(d,v){const O=d.bindParameters.clouds;if((0,at.Wi)(this._vao)||(0,at.Wi)(O.data))return;if(!this._technique.compiled)return void this.requestRender();this._setParallaxParameters(O,d.bindParameters.camera.eye,v);const A=d.rctx.bindTechnique(this._technique,KR,d.bindParameters);d.rctx.bindVAO(this._vao),A.assertCompatibleVertexAttributeLocations(this._vao),d.rctx.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4),function GR(d){return d.crossFade.enabled||d.fadeInOut.stage!==Go.co.FINISHED||d.fadeIn.stage!==Go.YF.FINISHED||d.fadeInOutHeight.stage!==Go.hZ.FINISHED}(O)&&this.requestRender()}_setFadeInStage(d,v){const O=performance.now(),A=d.parallax.anchorPointClouds;d.fadeIn.stage===Go.YF.FINISHED&&(d.fadeIn.factor=1,(0,Et.c)(A,dh),d.fadeIn.stage=Go.YF.CHANGE_ANCHOR,d.crossFade.enabled=!1,d.fadeInOut.stage=Go.co.FINISHED);const j=OP(d,v);d.fadeIn.stage===Go.YF.CHANGE_ANCHOR&&j&&bP(d.data)&&((0,Et.c)(A,dh),d.fadeIn.stage=Go.YF.FADE_IN,d.startTime=O),d.fadeIn.factor>0&&d.fadeIn.stage===Go.YF.FADE_IN&&(d.fadeIn.factor=1-(O-d.startTime)/CP),d.fadeIn.factor<=0&&d.fadeIn.stage===Go.YF.FADE_IN&&(d.fadeIn.stage=Go.YF.FINISHED,d.fadeIn.factor=0)}_setCrossFadingStage(d){const v=performance.now(),{crossFade:O}=d,A=d.parallax.anchorPointClouds;d.crossFade.enabled||((0,Et.c)(d.parallaxNew.anchorPointClouds,dh),d.startTime=v,O.factor=0,d.crossFade.enabled=!0),O.factor<1&&d.crossFade.enabled&&(O.factor=(v-d.startTime)/zR),O.factor>=1&&d.crossFade.enabled&&(d.crossFade.enabled=!1,O.factor=1,(0,Et.c)(A,d.parallaxNew.anchorPointClouds))}_setFadeInOutStage(d,v){const O=performance.now(),{fadeInOut:A,crossFade:j}=d;A.stage===Go.co.FINISHED&&(d.startTime=O,A.factor=0,A.stage=Go.co.FADE_OUT),A.factor<1&&A.stage===Go.co.FADE_OUT&&(A.factor=(O-d.startTime)/VR),A.factor>=1&&A.stage===Go.co.FADE_OUT&&(A.factor=1,(0,Et.c)(d.parallax.anchorPointClouds,dh)),A.factor>=1&&A.stage===Go.co.FADE_OUT&&OP(d,v)&&(A.factor=1,A.stage=Go.co.SWITCH,d.crossFade.enabled=!1,j.factor=1),bP(d.data)&&A.stage===Go.co.SWITCH&&(d.startTime=O,A.factor=1,A.stage=Go.co.FADE_IN,(0,Et.c)(d.parallax.anchorPointClouds,dh),d.crossFade.enabled=!1,j.factor=1),A.factor>0&&A.stage===Go.co.FADE_IN&&(A.factor=1-(O-d.startTime)/CP),A.factor<=0&&A.stage===Go.co.FADE_IN&&(A.stage=Go.co.FINISHED,A.factor=0)}_setFadeInOutHeight(d,v){const O=performance.now(),A=d.fadeInOutHeight,j=(O-(A.stage===Go.hZ.FINISHED?O:d.startTimeHeightFade))/HR;A.factor+=v?-j:j,d.startTimeHeightFade=O,A.factor=(0,cs.uZ)(A.factor,0,1),A.stage=Go.hZ.HEIGHT_FADE}_setParallaxParameters(d,v,O){const{parallax:A}=d;d.fadeInOutHeight.factor<0&&(d.fadeInOutHeight.factor=(0,Et.l)(v)-this.planetRadius>hd?1:0),(0,Et.n)(dh,v),(0,Et.g)(dh,dh,this.planetRadius),0===A.anchorPointClouds[0]&&0===A.anchorPointClouds[1]&&0===A.anchorPointClouds[2]&&(0,Et.c)(A.anchorPointClouds,dh);const j=(0,Et.l)((0,Et.b)(WR,A.anchorPointClouds,dh));let te=!0;j>d.fadeIn.distanceThresholdFactor*A.cloudsHeight||d.fadeIn.stage!==Go.YF.FINISHED?this._setFadeInStage(d,v):j>d.fadeInOut.distanceThresholdFactor*A.cloudsHeight||d.fadeInOut.stage!==Go.co.FINISHED?this._setFadeInOutStage(d,v):j>d.crossFade.distanceThresholdFactor*A.cloudsHeight&&!O||d.crossFade.enabled?this._setCrossFadingStage(d):te=!1;const pe=(0,Et.l)(v),be=pe-this.planetRadius;if((be>17e3||be<-hd)&&d.fadeInOutHeight.factor<1?d.fadeInOutHeight.factor=1:(be>hd||be<-3500)&&d.fadeInOutHeight.factor<1?this._setFadeInOutHeight(d,!1):be<hd&&be>-3500&&d.fadeInOutHeight.factor>0?this._setFadeInOutHeight(d,!0):d.fadeInOutHeight.stage=Go.hZ.FINISHED,A.radiusCurvatureCorrectionFactor=.84*Math.sqrt(Math.max(pe*pe-this.planetRadius*this.planetRadius,0))/pe,sg(TP,A.anchorPointClouds,hf),A.transform=(0,ao.c)(),(0,on.e)(A.transform,A.transform,hf[3],hf),te){const{parallaxNew:Re}=d;sg(TP,Re.anchorPointClouds,hf),Re.transform=(0,ao.c)(),(0,on.e)(Re.transform,Re.transform,hf[3],hf)}(0,Et.c)(d.cameraPositionLastFrame,v)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],o0.prototype,"rctx",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],o0.prototype,"viewingMode",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],o0.prototype,"planetRadius",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],o0.prototype,"requestRender",void 0),o0=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.CloudsComposition")],o0);const TP=(0,br.f)(0,0,1),hf=kh(),dh=(0,br.c)(),WR=(0,br.c)(),CP=500,VR=250,zR=500,HR=500;function OP(d,v){return(0,Et.z)(d.cameraPositionLastFrame,v)}const KR=new Fd.K;var Ta=T(30217),_f=T(9545),Ya=T(14658),PP=T(89803),pf=T(32849);class ig{constructor(v,O,A,j,te,pe,be,Re,Ge=.5){this.coverage=v,this.density=O,this.absorption=A,this.cloudSize=j,this.detailSize=te,this.smoothness=pe,this.cloudHeight=be,this.raymarchingStepType=Re,this.median=Ge}}const DP={sunny:new ig([0,.6],[.03,.03],[0,0],[.9,.9],[.8,.8],[.7,.7],[.05,.05],pf.p.SIXTEEN),cloudy:new ig([.3,.65],[.2,.4],[0,0],[.85,.85],[.75,.75],[.3,.4],[1,1],pf.p.TWOHUNDRED,.6),rainy:new ig([.6,.8],[.5,.8],[.1,.5],[.9,.9],[.75,.75],[.5,.5],[1,1],pf.p.TWOHUNDRED,.4),snowy:new ig([.25,.75],[.3,.3],[0,0],[.95,.95],[.7,.7],[.69,.75],[.3,1],pf.p.HUNDRED,.65),foggy:new ig([.8,.8],[.5,.5],[0,0],[.95,.95],[.9,.9],[.55,.55],[.3,.3],pf.p.SIXTEEN)};class lv extends Ka.A{constructor(v,O){super(v,O,()=>this.destroy())}initializeProgram(v){const O=lv.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ZERO,Gt.zi.ZERO),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}lv.shader=new Ga.J(PP.a,()=>T.e(8698).then(T.bind(T,78698)));var W_=T(64312),ff=T(85755),YR=T(42474);class ng extends Ka.A{initializeProgram(v){const O=ng.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:this.configuration.mode===W_.u.Full?(0,Ti.if)(Gt.zi.ONE,Gt.zi.ZERO):(0,Ti.wK)(Gt.zi.ZERO,Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ZERO),depthTest:{func:Gt.wb.ALWAYS},colorWrite:Ti.BK})}}ng.shader=new Ga.J(YR.N,()=>T.e(5337).then(T.bind(T,35337)));var nc=T(85775);class xP extends Li.Z{constructor(v){let O;super(v),this._weatherTile=(0,_f.f)(0,0),this._needsRender=!0,this._frameBuffer=new nc.X(v.context.renderContext.rctx,{colorTarget:Gt.Lm.TEXTURE,width:ff.IQ,height:ff.IQ},{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,hasMipmap:!1,width:ff.IQ,height:ff.IQ}),this._vao=(0,Ul.ow)(v.context.renderContext.rctx),this._shaderTechniqueRepository=v.context.shaderTechniqueRepository,this._ensureRendered=()=>((0,at.pC)(O)?(0,at.pC)(this.weatherMapTechnique)&&this.weatherMapTechnique.compiled&&this._needsRender&&(O=this._render(v.context.renderContext.rctx,W_.u.WeatherMap)):(0,at.pC)(this.fullTechnique)&&this.fullTechnique.compiled&&(O=this._render(v.context.renderContext.rctx,W_.u.Full)),O)}get textureAtlas(){return this._ensureRendered()}_setDirty(){this._needsRender=!0}updateWeatherMap(v){this._weatherTile[0]===v[0]&&this._weatherTile[1]===v[1]||(this._weatherTile=v,this._setDirty())}destroy(){this._fullTechnique=(0,at.RY)(this._fullTechnique),this._weatherMapTechnique=(0,at.RY)(this._weatherMapTechnique),this._frameBuffer=(0,at.O3)(this._frameBuffer),this._vao=(0,at.O3)(this._vao)}get fullTechnique(){if((0,at.Wi)(this._fullTechnique)){const v=new W_.i;v.mode=W_.u.Full,this._fullTechnique=this._shaderTechniqueRepository.acquire(ng,v)}return this._fullTechnique}get weatherMapTechnique(){if((0,at.Wi)(this._weatherMapTechnique)){const v=new W_.i;v.mode=W_.u.WeatherMap,this._weatherMapTechnique=this._shaderTechniqueRepository.acquire(ng,v)}return this._weatherMapTechnique}_render(v,O){if((0,at.Wi)(this._vao)||(0,at.Wi)(this._frameBuffer))return null;const A=O===W_.u.Full?this.fullTechnique:this.weatherMapTechnique;if((0,at.Wi)(A))return null;const j=v.getViewport();v.setViewport(0,0,ff.IQ,ff.IQ),v.bindFramebuffer(this._frameBuffer);const te=v.bindTechnique(A);return te.setUniform2f("weatherTile",this._weatherTile[0],this._weatherTile[1]),v.bindVAO(this._vao),te.assertCompatibleVertexAttributeLocations(this._vao),v.gl.drawArrays(v.gl.TRIANGLE_STRIP,0,4),v.setViewport(j.x,j.y,j.width,j.height),this._needsRender=!1,this._frameBuffer.colorTexture}}(0,Je._)([(0,ht.Cb)({constructOnly:!0})],xP.prototype,"context",void 0);var NM=T(74202);let Mc=class extends Li.Z{constructor(d){super(d),this._frameTask=null,this._handles=new so.Z,this._cubeMapSize=(0,al.Z)("esri-mobile")?1024:2048,this._techniques=[],this._techniqueConfiguration=new pf.t,this._bindParameters=new NM.p(null,null,null),this._drawParameters=new PP.C,this._weatherTile=(0,_f.f)(0,0),this._weatherTileCount=128,this.coverage=(0,cs.t7)(Fc.coverage[0],Fc.coverage[1],.5),this.density=(0,cs.t7)(Fc.density[0],Fc.density[1],.5),this.absorption=(0,cs.t7)(Fc.absorption[0],Fc.absorption[1],.5),this.cloudSize=(0,cs.t7)(Fc.cloudSize[0],Fc.cloudSize[1],.5),this.detailSize=(0,cs.t7)(Fc.detailSize[0],Fc.detailSize[1],.5),this.smoothness=(0,cs.t7)(Fc.smoothness[0],Fc.smoothness[1],.5),this.cloudHeight=(0,cs.t7)(Fc.cloudHeight[0],Fc.cloudHeight[1],.5),this.raymarchingStepType=Fc.raymarchingStepType,this._cloudRadius=0,this._viewMatrix=(0,ao.c)(),this._cameraPositionLastFrame=(0,br.c)(),this.running=!1}_getTechnique(d){return this._techniques[d]||(this._techniqueConfiguration.steps=d,this._techniques[d]=new lv({rctx:this.context.renderContext.rctx,viewingMode:this.view.state.viewingMode},this._techniqueConfiguration),this._techniques[d])}_getWeatherTile(){let O=(0,_f.f)((this.view.camera.position.latitude+90)/180,(this.view.camera.position.longitude+180)/360);const A=Math.floor(this._weatherTileCount*Math.abs(2*O[0]-1));O=(0,_f.f)(Math.floor(2*this._weatherTileCount*O[0]),Math.floor(4*(this._weatherTileCount-A)*O[1]));let j=0,te=0;if((0,at.pC)(this.view.environment)&&"sun"===this.view.environment.lighting.type&&(0,at.pC)(this.view.environment.lighting.date)){const pe=new Date(this.view.environment.lighting.date);pe.setUTCHours(this.view.environment.lighting.date.getUTCHours()+this.view.environment.lighting.displayUTCOffset),j=31*pe.getUTCMonth()+pe.getUTCDate(),te=pe.getUTCFullYear()}return O[0]=(O[0]+j)%(2*this._weatherTileCount),O[1]=(O[1]+te%100)%(4*this._weatherTileCount),O}initialize(){this._vao=(0,Ul.ow)(this.context.renderContext.rctx);const d=(0,Mo.Iu)(this.view.spatialReference);this._cloudRadius=.5*d.radius,this.setDirty(),this._weatherTile=this._getWeatherTile(),this._frameTask=this.view.resourceController.scheduler.registerTask(lo.T8.CLOUDS_GENERATOR,this),this._handles.add(this._frameTask),this._handles.add((0,wr.YP)(()=>[this.coverage,this.density,this.absorption,this.cloudSize,this.detailSize,this.smoothness,this.cloudHeight,this.raymarchingStepType],()=>this.setDirty(),wr.nn))}destroy(){this._handles.destroy(),this._techniques.forEach(d=>(0,at.RY)(d)),this._techniques=null,this._frameBufferCube=(0,at.O3)(this._frameBufferCube),this._vao=(0,at.O3)(this._vao),this._noiseTexture=(0,at.SC)(this._noiseTexture)}_ensureNoiseTexture(){return(0,at.Wi)(this._noiseTexture)&&(this._noiseTexture=new xP({context:this.context}),this._noiseTexture.updateWeatherMap(this._weatherTile)),this._noiseTexture.textureAtlas}ensureWeatherTile(){const d=this._getWeatherTile();(0,at.pC)(this._noiseTexture)&&(0,at.pC)(this.context)&&this._noiseTexture.updateWeatherMap(d),d[0]===this._weatherTile[0]&&d[1]===this._weatherTile[1]||(this._weatherTile=d,this.setDirty())}get frameBufferCube(){return(0,at.Wi)(this._frameBufferCube)&&(this._frameBufferCube=new nc.X(this.context.renderContext.rctx,{colorTarget:Gt.Lm.CUBEMAP,width:this._cubeMapSize,height:this._cubeMapSize},{target:Gt.No.TEXTURE_CUBE_MAP,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,hasMipmap:!1,width:this._cubeMapSize,height:this._cubeMapSize})),this._frameBufferCube}get cubeMap(){return this._frameBufferCube}isFading(d){return d.crossFade.enabled||d.fadeInOut.stage===Go.co.FADE_OUT||d.fadeInOutHeight.stage!==Go.hZ.FINISHED}applyPreset(d,v){const O=d.median,A=j=>{const te=(0,cs.t7)(j[0],j[1],O);return v<.5?(0,cs.t7)(j[0],te,2*v):(0,cs.t7)(te,j[1],2*(v-.5))};this.coverage=A(d.coverage),this.density=A(d.density),this.absorption=A(d.absorption),this.cloudSize=A(d.cloudSize),this.detailSize=A(d.detailSize),this.smoothness=A(d.smoothness),this.cloudHeight=A(d.cloudHeight),this.raymarchingStepType=d.raymarchingStepType}setDirty(){this.running=!0}runTask(d){if(0===this.coverage||(0,at.Wi)(this._vao))return void(this.running=!1);const v=this._getTechnique(this.raymarchingStepType);if(!v.compiled)return;if(!(0,Et.z)(this._cameraPositionLastFrame,this.context.renderContext.bindParameters.camera.eye)||this.isFading(this.context.renderContext.bindParameters.clouds))return void(0,Et.c)(this._cameraPositionLastFrame,this.context.renderContext.bindParameters.camera.eye);this.ensureWeatherTile();const O=this._ensureNoiseTexture();if((0,at.Wi)(O))return;const A=this.context.renderContext.rctx,j=A.bindTechnique(v),te=1+this.absorption,pe=(0,cs.t7)(35,120,this.absorption);j.bindTexture("cloudShapeTexture",O),j.setUniform1f("cloudRadius",this._cloudRadius),j.setUniform1f("halfCubeMapSize",.5*this._cubeMapSize),j.setUniform1f("power",pe),j.setUniform1f("sigmaE",te),j.setUniform1f("density",(0,cs.t7)(0,.3,this.density)),j.setUniform1f("cloudSize",(0,cs.t7)(0,.02,Math.max(.01,1-this.cloudSize))),j.setUniform1f("detailSize",(0,cs.t7)(0,.2,Math.max(.01,1-this.detailSize))),j.setUniform1f("smoothness",(0,cs.t7)(0,.5,1-this.smoothness)),j.setUniform1f("cloudHeight",(0,cs.t7)(0,1500,this.cloudHeight)),j.setUniform1f("coverage",this.coverage),A.bindVAO(this._vao),j.assertCompatibleVertexAttributeLocations(this._vao);const be=A.getViewport();A.setViewport(0,0,this._cubeMapSize,this._cubeMapSize),A.bindFramebuffer(this.frameBufferCube);for(let Re=0;Re<5;Re++)(0,on.y)(this._viewMatrix,$R,ZR[Re],kR[Re]),(0,Ta.f)(this._drawParameters.viewMatrix,this._viewMatrix),this.frameBufferCube.setColorTextureTarget(Gt.No.TEXTURE_CUBE_MAP_POSITIVE_X+Re),j.bindDraw(this._drawParameters,this._bindParameters),A.gl.drawArrays(A.gl.TRIANGLE_STRIP,0,4),A.gl.flush();this.running=!1,A.setViewport(be.x,be.y,be.width,be.height),this.requestRender(),d.madeProgress()}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Mc.prototype,"context",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Mc.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Mc.prototype,"requestRender",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"_frameTask",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"coverage",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"density",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"absorption",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"cloudSize",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"detailSize",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"smoothness",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"cloudHeight",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"raymarchingStepType",void 0),(0,Je._)([(0,ht.Cb)()],Mc.prototype,"running",void 0),Mc=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.CloudsGenerator")],Mc);const ZR=[(0,Ya.f)(1,0,0),(0,Ya.f)(-1,0,0),(0,Ya.f)(0,1,0),(0,Ya.f)(0,-1,0),(0,Ya.f)(0,0,1)],kR=[(0,Ya.f)(0,1,0),(0,Ya.f)(0,1,0),(0,Ya.f)(0,0,-1),(0,Ya.f)(0,0,1),(0,Ya.f)(0,1,0)],$R=(0,Ya.z)(),Fc=DP.sunny;var JR=T(50570);class og extends Ka.A{initializeProgram(v){const O=og.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)(this.configuration.haze?{blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ZERO,Gt.zi.ONE_MINUS_SRC_COLOR,Gt.zi.ONE),colorWrite:Ti.BK}:{blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ZERO,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE),colorWrite:Ti.BK})}}og.shader=new Ga.J(JR.F,()=>T.e(3354).then(T.bind(T,53354)));class WM extends Rn.m{constructor(){super(...arguments),this.haze=!1}}(0,Je._)([(0,Rn.o)()],WM.prototype,"haze",void 0);let ag=class extends Li.Z{constructor(d){super(d),this._fogColor=(0,Ya.c)(),this._fogColorAtNight=(0,Ya.c)(),this._cameraDirection=(0,Ya.c)(),this._foggyFadeStart=.95,this._foggyFadeEnd=1,this._hazeFadeStart=.7,this._hazeFadeEnd=1,this._strength=4e-6,this._vao=(0,Ul.ow)(d.context.renderContext.rctx,tg.Bn);const O=(0,Mo.Iu)(d.view.spatialReference);this._planetRadius=O.radius,this._atmosphereRadius=O.radius+nv}destroy(){this._hazeFogTechnique=(0,at.RY)(this._hazeFogTechnique),this._thickFogTechnique=(0,at.RY)(this._thickFogTechnique),this._vao=(0,at.O3)(this._vao)}get _shaderTechniqueRepository(){return this.context.shaderTechniqueRepository}set strength(d){this._strength=d}get strength(){return this._strength}get thickFogTechnique(){if((0,at.Wi)(this._thickFogTechnique)){const d=new WM;d.haze=!1,this._thickFogTechnique=this._shaderTechniqueRepository.acquire(og,d)}return this._thickFogTechnique}get hazeFogTechnique(){if((0,at.Wi)(this._hazeFogTechnique)){const d=new WM;d.haze=!0,this._hazeFogTechnique=this._shaderTechniqueRepository.acquire(og,d)}return this._hazeFogTechnique}when(){return Promise.resolve()}render(d,v,O){if(0===this.view.basemapTerrain.baseOpacity&&!v||(this._update(d,v,O),this._fogAmount<=0))return;const A=v?this.thickFogTechnique:this.hazeFogTechnique;if(!A.compiled)return void this.context.requestRender();const j=d.offscreenRenderingHelper,te=d.rctx.bindTechnique(A,XR,d.bindParameters);j.renderDepthDetached(()=>{te.bindTexture("depthTex",j.depthTexture),this._renderFog(A.program,d)})}_renderFog(d,v){if((0,at.Wi)(this._vao))return!1;const O=v.rctx;return d.setUniform3fv("cameraPosition",v.bindParameters.camera.eye),d.setUniform1f("atmosphereC",this._atmosphereC),d.setUniform1f("fogStrength",this._strength),d.setUniform1f("fogAmount",this._fogAmount),d.setUniform3fv("fogColor",this._fogColor),O.bindVAO(this._vao),d.assertCompatibleVertexAttributeLocations(this._vao),O.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4),!0}_update(d,v,O){const A=d.bindParameters.camera,j=v?.1:0;O?(0,Et.s)(this._fogColor,.5,.5,.5):v?(0,Et.s)(this._fogColor,1.5,1.5,1.5):(0,Et.s)(this._fogColor,.24,.44,.8),(0,Et.g)(this._fogColorAtNight,this._fogColor,j),(0,Et.n)(this._cameraDirection,A.eye);const te=Math.max(0,(0,Et.e)(this._cameraDirection,d.bindParameters.lighting.lightingMainDirection));(0,Et.h)(this._fogColor,this._fogColorAtNight,this._fogColor,te);const pe=(0,Et.l)(A.eye);this._atmosphereC=pe*pe-this._atmosphereRadius*this._atmosphereRadius,this._fogAmount=v?1-(0,cs.CW)(this._foggyFadeStart*hd,this._foggyFadeEnd*hd,Math.abs(pe-this._planetRadius)):1-(0,cs.CW)(this._hazeFadeStart*hd,this._hazeFadeEnd*hd,Math.abs(pe-this._planetRadius))}static isSupported(d){return d.capabilities.depthTexture}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ag.prototype,"context",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ag.prototype,"view",void 0),ag=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.Fog")],ag);const XR=new Fd.K;var V_=T(70026),VM=T(4300),a0=T(49115);class mf extends Ka.A{initializeProgram(v){const O=mf.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)(this.configuration.geometry===a0.n.Cylinder?{blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),culling:Ti.Rd,depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK}:{blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}mf.shader=new Ga.J(VM.a,()=>T.e(5359).then(T.bind(T,75359)));const SP="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAIACAYAAABD1gYFAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAXVJREFUeNq0k9GWhDAIQ3PjzP9/cuehFqhW19mz++IhkCZAq1prsqT+kSQS9g8Vnqp6VGVWkYVktR6tj3Gr968nLnfwlHzHYyHapkKS73bPd/39eI38AYWj24OGvqdwWjZ3l8IDgacXyl1Dj9tdLOzZiicj+P1YcGk0H2O2vN/VQpTveEHmPHQxZxYlqsQdhUeuCWREuDEvAjqlCqDIMYwIo2ijR1HdYUS58dQrKpgQ0EGeMocsTNXrxzyOhS9kfzlWjn82YuWLqwAnvfNEWJFjYXkJCT0s7AmS0NG4x7Lt6Cpy2MiVPBZmS668QT5AR1cevp7b6CpzQ/ZSNH0vmhy5CsNtdax0MBpXDBiFsrDiMSLKMc8b6hH93bNbEpRsIyHDUhNcfTyeKF16PC7c/2QdczvUnvOB1ylZHVFSMtd5s8C2IW/7w6hwM5GLavLCd1zkiFjB+BwH1DSgctQ7mPOimBLJrw35beSXkd8BM/cCqbXWPgMA+GQQ5sIgkfAAAAAASUVORK5CYII=";var z_=T(4511),l0=T(19625),QR=T(57521),No=T(16396),Bl=T(83994),Va=T(55086),ll=T(26906),ju=T(49353);const qR=vo.Z.getLogger("esri.views.3d.environment.PanoramicAtmosphere");class e3{constructor(){this.type="panoramic",this._techniqueConfig=new a0.f,this._passParameters=new VM.S,this._readyResolver=(0,fi.hh)(),this._readyController=new AbortController}destroy(){this._readyResolver.reject(),this._passParameters.texture=(0,at.O3)(this._passParameters.texture),this._vao=(0,at.O3)(this._vao),this._readyController=(0,at.IM)(this._readyController)}when(){return this._readyResolver.promise}initializeRenderContext(v){this._techniqueConfig.geometry=a0.n.Cylinder,this._technique=v.shaderTechniqueRepository.acquire(mf,this._techniqueConfig);const O=v.renderContext.rctx;this._vao=this._createVertexArrayObject(O),this._vaoCount=(0,ll._V)(this._vao,"geometry"),(0,V_.t)(SP,{signal:this._readyController.signal}).then(A=>{this._passParameters.texture=new Va.x(O,{pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,flipped:!0},A),v.requestRender(),this._readyController=null,this._readyResolver.resolve()}).catch(A=>{(0,fi.D_)(A)||qR.error("Unable to initialize atmosphere: image request failed",A),this._readyResolver.reject()})}get canRender(){return null!=this._passParameters.texture}render(v){const O=v.rctx,A=O.bindTechnique(this._technique,this._passParameters,v.bindParameters);(function t3(d,v){(0,on.c)(d,v),d[12]=0,d[13]=0,d[14]=0,d[15]=1})(AP,v.bindParameters.camera.viewMatrix),A.setUniformMatrix4fv("view",AP),O.bindVAO(this._vao),A.assertCompatibleVertexAttributeLocations(this._vao),O.drawArrays(Gt.MX.TRIANGLES,0,this._vaoCount)}renderHaze(){return!1}_createVertexArrayObject(v){const O=QR.Z.createPolySphereGeometry(1,2,!1),A=O.indices.get(No.T.POSITION);for(let be=0;be<A.length;be+=3){const Re=A[be];A[be]=A[be+2],A[be+2]=Re}const j=O.vertexAttributes.get(No.T.POSITION).data,te=LP.createBuffer(A.length),pe=te.position;for(let be=0;be<A.length;++be){const Re=3*A[be];pe.set(be,0,j[Re]),pe.set(be,1,j[Re+1]),pe.set(be,2,j[Re+2])}return new ju.U(v,Aa.i,{geometry:(0,z_.K)(LP)},{geometry:Bl.f.createVertex(v,Gt.l1.STATIC_DRAW,te.buffer)})}}const AP=(0,ao.c)(),LP=(0,l0.U$)().vec3f(No.T.POSITION);var ro=T(27422),r3=T(5585);class s3 extends Fd.K{constructor(){super(...arguments),this.time=0,this.radius=1}}class $h extends Ka.A{initializeProgram(v){const O=$h.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,$h.attributeLocation)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}$h.shader=new Ga.J(r3.P,()=>T.e(8954).then(T.bind(T,78954))),$h.attributeLocation=new Map([[No.T.POSITION,0],[No.T.INSTANCEFEATUREATTRIBUTE,1]]);var cv=T(6067),i3=T(42836);let c0=class extends Li.Z{constructor(d){super(d),this._numParticles=25e4,this._rainSpeed=.1,this._snowSpeed=.01,this._opacity=1,this._width=500,this._offset=(0,br.c)(),this._tile=(0,br.c)(),this._particleColor=(0,Ya.c)(),this._particleColorAtNight=(0,Ya.c)(),this._nightMultiplier=.7,this._cameraDirection=(0,Ya.c)(),this._renderParameters=new s3,this._animation=new i3.d,this._updatingTracking=new Wm.t,this._renderParameters.time=0,this._renderParameters.radius=(0,Mo.Iu)(d.view.spatialReference).radius,this._shaderTechniqueRepository=d.context.shaderTechniqueRepository}destroy(){this._updatingTracking.destroy(),this._numParticles=0,this._snowTechnique=(0,at.RY)(this._snowTechnique),this._rainTechnique=(0,at.RY)(this._rainTechnique),this._vao=(0,at.O3)(this._vao),this._instanceIdBuffer=(0,at.O3)(this._instanceIdBuffer)}get updating(){return this._updatingTracking.updating}get rainTechnique(){if((0,at.Wi)(this._rainTechnique)){const d=new cv.Y;d.type=cv.H.Rain,this._rainTechnique=this._shaderTechniqueRepository.acquire($h,d)}return this._rainTechnique}get snowTechnique(){if((0,at.Wi)(this._snowTechnique)){const d=new cv.Y;d.type=cv.H.Snow,this._snowTechnique=this._shaderTechniqueRepository.acquire($h,d)}return this._snowTechnique}update(d){return this._animation.advance(d)}render(d,v,O){const A="rainy"===O,j=A?this.rainTechnique:this.snowTechnique;if(!j.compiled)return void this.context.requestRender();const te=d.rctx;if(this._ensureResources(te),(0,at.Wi)(j)||(0,at.Wi)(this._vao)||(0,at.Wi)(this._instanceIdBuffer)||((0,at.pC)(d.bindParameters.clouds.data)&&(this._opacity=1-d.bindParameters.clouds.fadeInOutHeight.factor),this._opacity<=0))return;v=v<.5?(0,cs.t7)(0,.35,2*v):(0,cs.t7)(.35,1,2*(v-.5));const be=te.bindTechnique(j);this._renderParameters.camera=d.bindParameters.camera,this._renderParameters.time=(A?this._rainSpeed:this._snowSpeed)*(0,ro.D9)(this._animation.time),this._renderParameters.time=this._renderParameters.time%1e5,this._update(be,O,d),te.bindVAO(this._vao);const Re=$h.attributeLocation;be.assertCompatibleVertexAttributeLocations(this._vao),(0,ll.XP)(te,Re,this._instanceIdBuffer,wP,0),te.capabilities.instancing.drawArraysInstanced(Gt.MX.TRIANGLES,0,3,this._numParticles*v),(0,ll.UF)(te,Re,this._instanceIdBuffer,wP)}_update(d,v,O){const A=O.bindParameters.camera,j=A.eye;this._tile[0]=Math.floor((j[0]+.5*this._width)/this._width),this._tile[1]=Math.floor((j[1]+.5*this._width)/this._width),this._tile[2]=Math.floor((j[2]+.5*this._width)/this._width),this._offset[0]=j[0]-this._tile[0]*this._width,this._offset[1]=j[1]-this._tile[1]*this._width,this._offset[2]=j[2]-this._tile[2]*this._width,d.setUniform1f("width",this._width),d.setUniform3fv("offset",this._offset),d.setUniformMatrix4fv("view",A.viewMatrix),d.setUniform3fv("cameraPosition",j),d.bindPass(null,O.bindParameters),d.setUniform1f("time",this._renderParameters.time),"rainy"===v?(0,Et.s)(this._particleColor,.85,.85,.85):(0,Et.s)(this._particleColor,1,1,1),(0,Et.g)(this._particleColorAtNight,this._particleColor,this._nightMultiplier),(0,Et.n)(this._cameraDirection,j);const te=Math.max(0,(0,Et.e)(this._cameraDirection,O.bindParameters.lighting.lightingMainDirection));(0,Et.h)(this._particleColor,this._particleColorAtNight,this._particleColor,te),d.setUniform3fv("particleColor",this._particleColor),d.setUniform1f("opacity",this._opacity)}_ensureResources(d){(0,at.Wi)(this._vao)&&(this._vao=this._createVertexArrayObject(d)),(0,at.Wi)(this._instanceIdBuffer)&&(this._instanceIdBuffer=this._createInstanceIndices(d))}_createInstanceIndices(d){const v=[];for(let O=0;O<this._numParticles;O++)v.push(O);return Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,new Float32Array(v))}_createVertexArrayObject(d){const v=new Float32Array([-1,0,1,1,0,-1,1,0,1]);return new ju.U(d,$h.attributeLocation,{geometry:(0,z_.K)(n3)},{geometry:Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,v)})}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],c0.prototype,"context",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],c0.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],c0.prototype,"updating",null),(0,Je._)([(0,ht.Cb)()],c0.prototype,"_updatingTracking",void 0),c0=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.Precipitation")],c0);const n3=(0,l0.U$)().vec3f(No.T.POSITION),wP=(0,z_.K)((0,l0.U$)().f32(No.T.INSTANCEFEATUREATTRIBUTE),1);var _d=T(2282);const a3=vo.Z.getLogger("esri.views.3d.environment.SimpleAtmosphere"),c3=(0,Ec.uV)([[50,.1015625],[500,.21875],[5e3,1-250/512],[5e4,.4140625]]);class u3{constructor(v){this.view=v,this.type="simple",this._renderData={texV:(0,po.a)(),silCircleCenter:(0,br.c)(),silCircleV1:(0,br.c)(),silCircleV2:(0,br.c)(),altitudeFade:0,innerScale:0,undergroundFadeAlpha:0},this._passParameters=new VM.S,this._fadeVaoCount=0,this._readyResolver=(0,fi.hh)(),this._readyController=new AbortController,this.texV1=1,this.canRender=!0,this.isOnMars=(0,cd.BZ)(v.spatialReference);const O=(0,Mo.Iu)(v.spatialReference);this.planetRadius=O.radius,this.outerRimWidth=O.outerAtmosphereRimWidth,this.innerRimFactor=(this.planetRadius+-1e4)/this.planetRadius,this.middleRimFactor=(this.planetRadius+0)/this.planetRadius,this.outerRimFactor=(this.planetRadius+this.outerRimWidth)/this.planetRadius,this.texV0=0/this.outerRimWidth,this.texVScale=this.texV1-this.texV0}destroy(){this._readyResolver.reject(),this._cameraChangeHandle=(0,at.hw)(this._cameraChangeHandle),this._passParameters.texture=(0,at.O3)(this._passParameters.texture),this._fadeVao=(0,at.O3)(this._fadeVao),this._vao=(0,at.O3)(this._vao),this._readyController=(0,at.IM)(this._readyController)}when(){return this._readyResolver.promise}initializeRenderContext(v){var O=this;return(0,oi.Z)(function*(){O._shaderTechniqueRepository=v.shaderTechniqueRepository;const A=v.renderContext.rctx;O._cameraChangeHandle=(0,wr.YP)(()=>O.view.state?.camera,()=>v.requestRender(),wr.tX),O._vao=O._createRibbon(A),O._vaoCount=(0,ll._V)(O._vao,"geometry"),O._fadeVao=(0,Ul.ow)(A),O._fadeVaoCount=(0,ll._V)(O._fadeVao,"geometry");const j=O.isOnMars?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAIACAYAAAE00TaTAAAACXBIWXMAAA7AAAAOwAFq1okJAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAp1JREFUSMd9lcmSEzEQRCtflnqxYZgIThBDAP//kXDQ0pJtuDhqycxWZ5fKERFCERARIAVEyCjCtSFFEjWVa9q7OdJE0oiidIhKhRBROlhloiGVhaYERQHJWFEwMpYKrjUlibI2cqSJIJEpKNmM2c3GkRTOJDnThTMpnMWu0VFszs3Jfbe5bza3w+a229yOIs6zmP3czfn1K2w/for8+EVU15pNmmyqkeJyclinXNJRu1xrUaJmjmdzJiejVNt7zZVBRAIq1RwrsrrWnez+SR7WmQQP/1itKz2q/pmzuJtYnNy2bth9x9z2NLfDcB7FHOcGx6ebOb9/iPzxG/ztg4iorglFiKjzF9HSNphCoRb1OY3RZQJrYgRdT68bmgXGDdBzrTG8qNS7QP/m19ef7tGlcoH7vESYkK70uoPuOLEetz0IqeGoWQW6MlB/j36EnipYGKPWwDRg/RkNhXCNJIzAhMk6PrDePJNII6JHqM5VWqYApCtNFPe0GFFGtOWopWCrEVBSoiQi06KkRRaD08IlxXa/ifz8Jvz2LvjyLnh7F/r8Rei8a8xfjNkIrpmMOQ1C02COrkTEHxGhh+6DQJfXc/eZprXxcIyVIf1LJVgWvKaHvwI/1aQxtv851SQ/nqGXL6MHFVY3nmhLyqKsWO/+qzWif+yS1TpNKq8NezjGPCV69ciZoQj1PwfN6QRpWyCGVMe1D/AAHt3/gefu1Ign3AVpjOiNXkN90JlpL6TUnzFEUU+Jvks0tkp/dY3Fy1TzI24BWwsYJPyg11Q0FqDwK72xIz2kLojbeuxS1FpgtfNWyMX1gFw0j3W7RNeSHTVEe3VaV7SdCzVywFaEt02w7QH7Eeg4AvZDNdJ+Cu1HENsutO+Byi6ilEBZ9BeCNBJceJIjHgAAAABJRU5ErkJggg==":SP,te=O._readyController.signal;try{const pe=yield(0,V_.t)(j,{signal:te});(0,fi.k_)(te),O._passParameters.texture=new Va.x(A,{pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,flipped:!0},pe),v.requestRender(),O._readyController=null,O._readyResolver.resolve()}catch(pe){(0,fi.D_)(pe)||a3.error("Unable to initialize simple atmosphere: image request failed",pe),O._readyResolver.reject(pe)}})()}get coneTechnique(){if((0,at.Wi)(this._coneTechnique)){const v=new a0.f;v.geometry=a0.n.Cone,this._coneTechnique=this._shaderTechniqueRepository.acquire(mf,v)}return this._coneTechnique}get undergroundTechnique(){if((0,at.Wi)(this._undergroundTechnique)){const v=new a0.f;v.geometry=a0.n.Underground,this._undergroundTechnique=this._shaderTechniqueRepository.acquire(mf,v)}return this._undergroundTechnique}render(v){const O=v.bindParameters.camera;this._update(O);const A=v.rctx;if(this._renderData.undergroundFadeAlpha<1){const j=A.bindTechnique(this.coneTechnique,this._passParameters,v.bindParameters);j.setUniformMatrix4fv("proj",O.projectionMatrix),j.setUniformMatrix4fv("view",O.viewMatrix),j.setUniform3fv("silCircleCenter",this._renderData.silCircleCenter),j.setUniform3fv("silCircleV1",this._renderData.silCircleV1),j.setUniform3fv("silCircleV2",this._renderData.silCircleV2),j.setUniform2fv("texV",this._renderData.texV),j.setUniform1f("altitudeFade",this._renderData.altitudeFade),j.setUniform1f("innerScale",this._renderData.innerScale),A.bindVAO(this._vao),A.drawArrays(Gt.MX.TRIANGLES,0,this._vaoCount)}if(this._renderData.undergroundFadeAlpha>0){const j=A.bindTechnique(this.undergroundTechnique,this._passParameters,v.bindParameters);j.setUniform1f("undergroundFadeAlpha",this._renderData.undergroundFadeAlpha),j.setUniform3fv("cameraPosition",O.eye),A.bindVAO(this._fadeVao),A.drawArrays(Gt.MX.TRIANGLE_STRIP,0,this._fadeVaoCount)}}renderHaze(){return!1}_update(v){const O=(0,br.c)(),A=this.planetRadius,j=(0,Et.l)(v.eye),te=j-A;if(te<0){const It=Math.min(-te/5e3,1);this._renderData.undergroundFadeAlpha=It}else this._renderData.undergroundFadeAlpha=0;const pe=Math.max(50,te);this._renderData.innerScale=function d3(d,v,O){return d*d/(Math.sqrt(d*d-v*v)*Math.sqrt(d*d-O*O)+v*O)}(A+pe,A,A+-1e4)-1,this._renderData.altitudeFade=gP(te),(0,Et.g)(O,v.eye,(A+50)/j),UP(O,v.center,v.up,A,this._renderData);const Re=this._computeScreenRimWidth(v,O,v.up,this._renderData),Ge=1-511/512,tt=c3(te);let ft=this.texV0+Ge*this.texVScale,yt=this.texV0+Re*tt*this.texVScale;if(te>50){UP(v.eye,v.center,v.up,A,this._renderData);const It=this._computeScreenRimWidth(v,v.eye,v.up,this._renderData),Nt=(0,cs.uZ)((It-1.5)/(Re-1.5),0,1);ft=this.texV0+Nt*Ge*this.texVScale,yt=this.texV0+(0,cs.t7)(this.texV1,Re*tt,Nt)*this.texVScale}(0,Yi.a)(this._renderData.texV,ft,yt)}_createRibbon(v){const O=new Float32Array(1155),A=new Uint32Array(1920);O[0]=0,O[1]=0,O[2]=-1;for(let pe=0;pe<128;pe++){const be=9*pe+3;O[be+0]=pe,O[be+1]=this.innerRimFactor,O[be+2]=-1,O[be+3]=pe,O[be+4]=this.middleRimFactor,O[be+5]=0,O[be+6]=pe,O[be+7]=this.outerRimFactor,O[be+8]=1;const Re=3*pe+1,Ge=127===pe?1:Re+3,tt=15*pe;A[tt+0]=Re,A[tt+1]=Re+1,A[tt+2]=Ge+1,A[tt+3]=Ge+1,A[tt+4]=Ge,A[tt+5]=Re,A[tt+6]=Re+1,A[tt+7]=Re+2,A[tt+8]=Ge+2,A[tt+9]=Ge+2,A[tt+10]=Ge+1,A[tt+11]=Re+1,A[tt+12]=Re,A[tt+13]=Ge,A[tt+14]=0}const j=BP.createBuffer(A.length),te=j.position;for(let pe=0;pe<A.length;++pe){const be=3*A[pe];te.set(pe,0,O[be]),te.set(pe,1,O[be+1]),te.set(pe,2,O[be+2])}return new ju.U(v,Aa.i,{geometry:(0,z_.K)(BP)},{geometry:Bl.f.createVertex(v,Gt.l1.STATIC_DRAW,j.buffer)})}_computeScreenRimWidth(v,O,A,j){return(0,Et.a)(lg,j.silCircleCenter,j.silCircleV2),(0,Et.g)(GM,lg,this.outerRimFactor),(0,on.n)(HM,O,lg,A),(0,_d.iV)(lg,HM,v.projectionMatrix,v.viewport),(0,_d.iV)(GM,HM,v.projectionMatrix,v.viewport),(0,Et.i)(lg,GM)/v.height}}function UP(d,v,O,A,j){const te=(0,Et.l)(d),pe=A*Math.sqrt(te*te-A*A)/te,be=Math.sqrt(A*A-pe*pe),Re=j.silCircleV1,Ge=j.silCircleV2;return(0,Et.g)(j.silCircleCenter,d,be/te),(0,Et.f)(Re,d,v),(0,Et.p)(Re)<1&&(0,Et.f)(Re,d,O),(0,Et.g)(Re,Re,pe/(0,Et.l)(Re)),(0,Et.f)(Ge,Re,d),(0,Et.g)(Ge,Ge,pe/(0,Et.l)(Ge)),pe}const HM=(0,ao.c)(),lg=(0,br.c)(),GM=(0,br.c)(),BP=(0,l0.U$)().vec3f(No.T.POSITION);var KM=T(54346),h3=T(45695);class _3 extends Fd.K{constructor(){super(...arguments),this.modelMatrix=(0,ao.c)()}}class dv extends Ka.A{constructor(v){super(v,null,()=>this.destroy())}initializeProgram(v){const O=dv.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK})}}dv.shader=new Ga.J(h3.S,()=>T.e(1317).then(T.bind(T,61317)));const p3=vo.Z.getLogger("esri.views.3d.environment.Stars");let H_=class extends Li.Z{constructor(d){super(d),this._loadDataTask=null,this._numPoints=0,this._renderParameter=new _3,this._updatingTracking=new Wm.t}get updating(){return this._updatingTracking.updating||this.loading}get loading(){return(0,at.pC)(this._loadDataTask)&&!this._loadDataTask.finished}initialize(){this._loadDataTask=this._createLoadDataTask()}destroy(){this._loadDataTask=(0,at.IM)(this._loadDataTask),this._updatingTracking.destroy(),this._numPoints=0,this._technique=(0,at.RY)(this._technique),this._vao=(0,at.O3)(this._vao)}render(d){const{rctx:v}=d;if(this._ensureResources(v),(0,at.Wi)(this._technique)||(0,at.Wi)(this._vao))return;if(!this._technique.compiled)return void this.requestRender();const O=v.bindTechnique(this._technique,this._renderParameter,d.bindParameters);v.bindVAO(this._vao),O.assertCompatibleVertexAttributeLocations(this._vao),v.drawArrays(Gt.MX.POINTS,0,this._numPoints)}_ensureResources(d){if((0,at.pC)(this._technique)||(0,at.Wi)(gf))return;this._technique=new dv({rctx:d,viewingMode:this.view.state.viewingMode}),this._numPoints=gf.byteLength/jP;const v=new Float32Array(gf,0,2*this._numPoints),O=new Uint8Array(gf,2*this._numPoints*4,this._numPoints);this._vao=this._createVertexArrayObject(d,v,O,this._numPoints),this._updatingTracking.add(()=>"sun"===this.view.environment.lighting.type?this.view.environment.lighting.date:null,A=>this._update(A),wr.nn)}_computeDayDuration(d){const v=d,O=new Date(d.getFullYear(),0,1,11,58,56);return(+v-+O)/(+new Date(d.getFullYear()+1,0,1,11,58,55)-+O)}_update(d){if(!d)return;const v=(d.getHours()/12+d.getMinutes()/60*(2/24)+d.getSeconds()/60*(2/1440)-.9972222)%2,O=2*this._computeDayDuration(d),A=(0,on.c)(this._renderParameter.modelMatrix,g3);(0,on.g)(A,A,-O*Math.PI),(0,on.m)(A,m3,A),(0,on.g)(A,A,-v*Math.PI),this.requestRender()}_hexToRGB(d){return[parseInt(d.substring(0,2),16),parseInt(d.substring(2,4),16),parseInt(d.substring(4,6),16)]}_unpackUint8Attributes(d){return d>=192?[2.9,d-192]:d>=160?[2.5,d-160]:d>=128?[2,d-128]:d>=96?[1.5,d-96]:d>=64?[1,d-64]:d>=32?[.7,d-32]:[.4,d]}_createVertexArrayObject(d,v,O,A){const j=FP.createBuffer(A),te=j.position,pe=j.color,be=j.size;for(let Re=0;Re<A;Re++){const Ge=v[2*Re+0],tt=v[2*Re+1];te.set(Re,0,-Math.cos(Ge)*Math.sin(tt)),te.set(Re,1,-Math.sin(Ge)*Math.sin(tt)),te.set(Re,2,-Math.cos(tt));const ft=this._unpackUint8Attributes(O[Re]),yt=this._hexToRGB(f3[ft[1]]);pe.set(Re,0,255*yt[0]),pe.set(Re,1,255*yt[1]),pe.set(Re,2,255*yt[2]),pe.set(Re,3,255),be.set(Re,ft[0])}return new ju.U(d,Aa.i,{geometry:(0,z_.K)(FP)},{geometry:Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,j.buffer)})}_createLoadDataTask(){var d=this;if((0,at.pC)(gf))return null;const v=(0,fi.vr)(function(){var O=(0,oi.Z)(function*(A){const{data:j}=yield(0,KM.b)("esri/views/3d/environment/resources/stars.wsv",{responseType:"array-buffer",signal:A});d._verifyStarData(j),gf=j});return function(A){return O.apply(this,arguments)}}());return v.promise.catch(O=>{(0,fi.D_)(O)||p3.error(O)}).then(()=>{this.destroyed||(this.requestRender(),this.notifyChange("updating"))}),v}_verifyStarData(d){if(!d)throw new So.Z("stars:no-data-received","Failed to create stars because star catalogue is missing");const v=d.byteLength/jP;if(v%1!=0||v>5e4||v<5e3)throw new So.Z("stars:invalid-data","Failed to create stars because star catalogue data is invalid")}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],H_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],H_.prototype,"requestRender",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],H_.prototype,"updating",null),(0,Je._)([(0,ht.Cb)()],H_.prototype,"_loadDataTask",void 0),(0,Je._)([(0,ht.Cb)()],H_.prototype,"_updatingTracking",void 0),H_=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.Stars")],H_);const f3=["9bb2ff","9eb5ff","aabfff","bbccff","ccd8ff ","dae2ff","e4e9ff","eeefff","f8f6ff","fff9fb","fff5ef","fff1e5","ffeddb","ffe9d2","ffe6ca","ffe3c3","ffe0bb","ffddb4","ffdaad","ffd6a5","ffd29c","ffcc8f","ffc178","ffa94b","ff7b00"],m3=(0,ao.f)(1,0,0,0,0,.9174771405229186,.39778850739794974,0,0,-.39778850739794974,.9174771405229186,0,0,0,0,1),g3=(0,ao.f)(1,0,0,0,0,.9174771405229186,-.39778850739794974,0,0,.39778850739794974,.9174771405229186,0,0,0,0,1),jP=9,FP=(0,l0.U$)().vec3f(No.T.POSITION).vec4u8(No.T.COLOR).f32(No.T.SIZE);let gf=null;var cg,Mn=T(91263),mn=T(5894);const y3=[mn.r.POSTPROCESSING_ENVIRONMENT_OPAQUE,mn.r.POSTPROCESSING_ENVIRONMENT_TRANSPARENT];let NP,bc=cg=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this._context=null,this._pendingAtmosphere=null,this._atmosphere=null}initialize(){this.view._stage.addRenderPlugin(y3,this)}destroy(){this._pendingAtmosphere=(0,at.SC)(this._pendingAtmosphere),null!=this.view?._stage&&this.view._stage.removeRenderPlugin(this),this._handles=(0,at.SC)(this._handles),this._set("view",null)}get atmosphereType(){return(0,at.pC)(this._pendingAtmosphere)?this._pendingAtmosphere.type:(0,at.pC)(this._atmosphere)?this._atmosphere.type:"none"}get canRender(){return!!this.view.basemapTerrain?.renderer.canRender||"global"!==this.view.viewingMode}get needsLinearDepth(){return"realistic"===this._selectAtmosphereType()}updateAnimation(d){return!!(0,at.pC)(this._precipitation)&&this._precipitation.update(d)}get updating(){return(0,at.pC)(this._pendingAtmosphere)||(0,at.pC)(this._stars)&&this._stars.updating||(0,at.pC)(this._clouds)&&this._clouds.running}get weatherVisible(){return(0,Et.l)(this.view.state.camera.eye)-(0,Mo.Iu)(this.view.spatialReference).radius<=hd}get _stars(){const d=this.view,v=d.environment?.starsEnabled??!1,O=this._get("_stars");return!v||(0,at.Wi)(this._context)?((0,at.SC)(O),null):(0,at.pC)(O)?O:new H_({view:d,requestRender:()=>this._setNeedsRender()})}get _precipitation(){const d=this._get("_precipitation");if(!this._precipitationEnabled||(0,at.Wi)(this._context))return(0,at.SC)(d),null;const v=this.view,O=this._context;return(0,at.pC)(d)&&d.context===O?d:((0,at.SC)(d),new c0({context:O,view:v}))}get _clouds(){const d=this._get("_clouds");if(!this.weatherEnabled||(0,at.Wi)(this._context))return(0,at.SC)(d),null;if((0,at.pC)(d))return d;const v=this.view,O=this._context;return(0,at.SC)(d),new Mc({context:O,view:v,requestRender:()=>this._setNeedsRender()})}get _cloudsComposition(){const d=this._get("_cloudsComposition");if(!this.weatherEnabled||(0,at.Wi)(this._context))return(0,at.SC)(d),null;const v=this.view.state.viewingMode,O=this._context.renderContext.rctx,A=(0,Mo.Iu)(this.view.spatialReference).radius;return(0,at.pC)(d)&&d.viewingMode===v&&d.planetRadius===A?d:((0,at.SC)(d),new o0({rctx:O,viewingMode:v,planetRadius:A,requestRender:()=>this._setNeedsRender()}))}get _fog(){const d=this._get("_fog");if(!this.weatherEnabled||(0,at.Wi)(this._context))return(0,at.SC)(d),null;if((0,at.pC)(d))return d;const v=this.view,O=this._context;return(0,at.SC)(d),new ag({context:O,view:v})}get weatherEnabled(){return!!this.view?.environmentManager?.weatherEnabled}get _precipitationEnabled(){return this.weatherEnabled&&("rainy"===this.view.environment.weather.type||"snowy"===this.view.environment.weather.type)}initializeRenderContext(d=null){this._context=d,this._handles.add([(0,wr.gx)(()=>this.view?.basemapTerrain,()=>this._updateBasemapTerrain(),wr.tX),(0,wr.YP)(()=>({viewingMode:this.view.viewingMode,atmosphereEnabled:this.view.environment.atmosphereEnabled,atmosphereQuality:this.view.environment.atmosphere.quality}),()=>this._updateAtmosphere(),wr.tX),(0,wr.YP)(()=>this._stars,()=>this._setNeedsRender()),(0,wr.YP)(()=>this._clouds,()=>this._updateWeather(this._weatherUpdateParameters),wr.nn),(0,wr.YP)(()=>this._precipitation,()=>this._setNeedsRender()),(0,wr.YP)(()=>this._fog,()=>this._updateFog(this._weatherUpdateParameters),wr.nn),(0,wr.YP)(()=>this._weatherUpdateParameters,v=>{this._updateWeather(v),this._updateFog(v)},wr.tX)])}uninitializeRenderContext(){this._context=null,this._atmosphere=(0,at.SC)(this._atmosphere),this._set("_stars",(0,at.SC)(this._stars)),this._set("_precipitation",(0,at.SC)(this._precipitation)),this._set("_clouds",(0,at.SC)(this._clouds)),this._set("_cloudsComposition",(0,at.SC)(this._cloudsComposition)),this._set("_fog",(0,at.SC)(this._fog))}prepareRender(d){d.bindParameters.clouds.data=function NR(d){return(0,at.pC)(d)&&(0,at.pC)(d.cubeMap)&&d.coverage>0}(this._clouds)?this._clouds:null}render(d){if(d.pass===Mn.C.MATERIAL)switch(d.bindParameters.slot){case mn.r.POSTPROCESSING_ENVIRONMENT_OPAQUE:(0,at.pC)(this._stars)&&this._stars.render(d),(0,at.pC)(this._atmosphere)&&this._atmosphere.canRender&&(this._atmosphere.render(d),(0,at.pC)(this._cloudsComposition)&&(0,at.pC)(d.bindParameters.clouds.data)&&(this.weatherVisible&&(0,at.pC)(this._clouds)&&this._clouds.ensureWeatherTile(),this._cloudsComposition.render(d,(0,at.pC)(this.view.animation))));break;case mn.r.POSTPROCESSING_ENVIRONMENT_TRANSPARENT:if((0,at.pC)(this._atmosphere)&&this._atmosphere.canRender){const v=this.weatherEnabled?this.view.environment.weather.type:"disabled";if(this._atmosphere.renderHaze(d,"rainy"===v),(0,at.pC)(this._fog)){const O="foggy"===v||"rainy"===v||"snowy"===v;(O||"realistic"!==this._selectAtmosphereType())&&this._fog.render(d,O,"rainy"===v)}if((0,at.pC)(this._precipitation)){const O=this.view.environment.weather;"rainy"!==O.type&&"snowy"!==O.type||this._precipitation.render(d,O.precipitation,O.type)}}}}get _weatherUpdateParameters(){const d=this.weatherEnabled?this.view.environment.weather:null;return(0,at.Wi)(d)?null:"rainy"===d.type||"snowy"===d.type?{type:d.type,weatherAdjustment:d.cloudCover,effect:d.precipitation}:{type:d.type,weatherAdjustment:"foggy"===d.type?d.fogStrength:d.cloudCover}}_updateWeather(d){(0,at.Wi)(d)||(0,at.Wi)(this._clouds)||(this._clouds.applyPreset(DP[d.type],d.weatherAdjustment),this._setNeedsRender())}_setNeedsRender(){(0,at.pC)(this._context)&&this._context.requestRender()}_updateFog(d){if(!(0,at.Wi)(this._fog)&&!(0,at.Wi)(d))switch(d.type){case"foggy":this._fog.strength=(0,cs.t7)(3e-5,.005,d.weatherAdjustment**3),this._setNeedsRender();break;case"rainy":case"snowy":this._fog.strength=(0,cs.t7)(4e-6,2e-4,d.effect**3),this._setNeedsRender();break;default:this._fog.strength=4e-6,this._setNeedsRender()}}_updateAtmosphere(){const d=this._selectAtmosphereType();if(this.atmosphereType===d)return;(0,at.pC)(this._pendingAtmosphere)&&(this._pendingAtmosphere!==this._atmosphere&&this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null);const v=this._getAtmosphereClass();if(!v)return(0,at.pC)(this._atmosphere)&&(this._atmosphere.destroy(),this._atmosphere=null,this._setNeedsRender()),void this._updateBasemapTerrain();const O=new v(this.view);(0,at.pC)(this._context)&&O.initializeRenderContext(this._context),(0,at.Wi)(this._atmosphere)&&(this._atmosphere=O,this._setNeedsRender()),this._pendingAtmosphere=O,O.when().then(()=>{(0,at.pC)(this._atmosphere)&&this._pendingAtmosphere&&this._pendingAtmosphere!==this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=this._pendingAtmosphere),this._pendingAtmosphere=null,this._setNeedsRender(),this._updateBasemapTerrain()}).catch(()=>{this._pendingAtmosphere===O&&(this._pendingAtmosphere=null)})}_getAtmosphereClass(){switch(this._selectAtmosphereType()){case"none":return null;case"realistic":return vP;case"panoramic":return e3;case"simple":return u3;default:return}}_selectAtmosphereType(){const d=this.view.get("environment.atmosphereEnabled"),v=this.view.get("environment.atmosphere.quality"),O=this.view.viewingMode;return!d||null==v||(0,cd.V2)(this.view.spatialReference)?"none":"local"===O?"panoramic":"high"===v&&(0,at.pC)(this._context)&&vP.isSupported(this._context)&&(0,cd.N$)(this.view.spatialReference)?"realistic":"simple"}_updateBasemapTerrain(){this.view.basemapTerrain&&(this.view.basemapTerrain.velvetOverground=(0,at.pC)(this._atmosphere)&&"simple"===this.atmosphereType)}get test(){return{atmosphere:this._atmosphere,clouds:this._clouds,selectAtmosphereType:()=>this._selectAtmosphereType(),stubGetAtmosphereClass:d=>{NP=cg.prototype._getAtmosphereClass,cg.prototype._getAtmosphereClass=d},restoreGetAtmosphereClass:()=>{cg.prototype._getAtmosphereClass=NP}}}};function WP(d,v,O){return function v3(d,v,O,A,j){const te=(0,cs.Vl)(O),pe=(0,cs.Vl)(j),be=te-pe,Re=(0,cs.Vl)(v)-(0,cs.Vl)(A),Ge=Math.sin(be/2),tt=Math.sin(Re/2),ft=2*(0,cs.Kt)(Math.sqrt(Ge*Ge+Math.cos(te)*Math.cos(pe)*tt*tt))*d;return Math.round(1e4*ft)/1e4}(d,v.longitude,v.latitude,O.longitude,O.latitude)}function zP(d,v){v||(v={hours:0,minutes:0,seconds:0}),v.hours=function VP(d,v){let O=d/15;return v||(O=Math.round(O)),O}(d[0],!0);const O=v.hours%1;v.hours-=O,v.minutes=60*O;const A=v.minutes%1;return v.minutes-=A,v.seconds=Math.round(60*A),v}(0,Je._)([(0,ht.Cb)({constructOnly:!0})],bc.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],bc.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"weatherVisible",null),(0,Je._)([(0,ht.Cb)()],bc.prototype,"_context",void 0),(0,Je._)([(0,ht.Cb)()],bc.prototype,"_pendingAtmosphere",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_stars",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_precipitation",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_clouds",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_cloudsComposition",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_fog",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"weatherEnabled",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_precipitationEnabled",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],bc.prototype,"_weatherUpdateParameters",null),bc=cg=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.EnvironmentRenderer")],bc);var HP,GP,KP,YP={exports:{}};HP=YP,GP=function(){var d=Math.PI,v=Math.sin,O=Math.cos,A=Math.tan,j=Math.asin,te=Math.atan2,pe=Math.acos,be=d/180,ft={dec:0,ra:0};function It(ms){return new Date(864e5*(ms+.5-2440588))}function Nt(ms){return function yt(ms){return ms.valueOf()/864e5-.5+2440588}(ms)-2451545}var Rt=23.4397*be;function Jt(ms,ws){return te(v(ms)*O(Rt)-A(ws)*v(Rt),O(ms))}function jt(ms,ws){return j(v(ws)*O(Rt)+O(ws)*v(Rt)*v(ms))}function ir(ms,ws,Ss){return te(v(ms),O(ms)*v(ws)-A(Ss)*O(ws))}function or(ms,ws,Ss){return j(v(ws)*v(Ss)+O(ws)*O(Ss)*O(ms))}function pr(ms,ws){return be*(280.16+360.9856235*ms)-ws}function Lr(ms){return be*(357.5291+.98560028*ms)}function Br(ms){return be*(1.9148*v(ms)+.02*v(2*ms)+3e-4*v(3*ms))}function gs(ms,ws){return ms+ws+102.9372*be+d}function Cs(ms,ws){var Ss=Lr(ms),Fs=gs(Ss,Br(Ss));return ws||(ws={dec:0,ra:0}),ws.dec=jt(Fs,0),ws.ra=Jt(Fs,0),ws}var Us={PolarException:{NORMAL:0,MIDNIGHT_SUN:1,POLAR_NIGHT:2},getPosition:function(ms,ws,Ss,Fs){var ci=be*-Ss,Xs=be*ws,xs=Nt(ms),Js=Cs(xs,ft),xi=pr(xs,ci)-Js.ra;return Fs||(Fs={azimuth:0,altitude:0}),Fs.azimuth=ir(xi,Xs,Js.dec),Fs.altitude=or(xi,Xs,Js.dec),Fs}},Ks=[[-.83,"sunrise","sunset"]];function Ei(ms,ws,Ss){return 9e-4+(ms+ws)/(2*d)+Ss}function ts(ms,ws,Ss){return 2451545+ms+.0053*v(ws)-.0069*v(2*Ss)}function Ms(ms){var ws=be*(134.963+13.064993*ms),Ss=be*(93.272+13.22935*ms),Fs=be*(218.316+13.176396*ms)+6.289*be*v(ws),ci=5.128*be*v(Ss),Xs=385001-20905*O(ws);return{ra:Jt(Fs,ci),dec:jt(Fs,ci),dist:Xs}}return Us.addTime=function(ms,ws,Ss){Ks.push([ms,ws,Ss])},Us.getTimes=function(ms,ws,Ss){var Fs=be*-Ss,ci=be*ws,Xs=function si(ms,ws){return Math.round(ms-9e-4-ws/(2*d))}(Nt(ms),Fs),xs=Ei(0,Fs,Xs),Js=Lr(xs),xi=Br(Js),Ii=gs(Js,xi),Si=jt(Ii,0),Bi=ts(xs,Js,Ii);var Ni,js,In,Vi,Sn,gn={solarNoon:It(Bi),nadir:It(Bi-.5),polarException:Us.PolarException.NORMAL};for(Ni=0,js=Ks.length;Ni<js;Ni+=1)Sn=Bi-((Vi=ts(Ei(function $s(ms,ws,Ss){return pe((v(ms)-v(ws)*v(Ss))/(O(ws)*O(Ss)))}((In=Ks[Ni])[0]*be,ci,Si),Fs,Xs),Js,Ii))-Bi),gn[In[1]]=It(Sn),gn[In[2]]=It(Vi);return gn.polarException=function mi(Pi){var jn=(v(Pi)-v(ci)*v(Si))/(O(ci)*O(Si));return jn<-1?Us.PolarException.MIDNIGHT_SUN:jn>1?Us.PolarException.POLAR_NIGHT:Us.PolarException.NORMAL}(Ks[0][0]*be),gn},Us.getMoonPosition=function(ms,ws,Ss){var Fs=be*-Ss,ci=be*ws,Xs=Nt(ms),xs=Ms(Xs),Js=pr(Xs,Fs)-xs.ra,xi=or(Js,ci,xs.dec);return xi+=.017*be/A(xi+10.26*be/(xi+5.1*be)),{azimuth:ir(Js,ci,xs.dec),altitude:xi,distance:xs.dist}},Us.getMoonFraction=function(ms){var ws=Nt(ms),Ss=Cs(ws),Fs=Ms(ws),ci=149598e3,Xs=pe(v(Ss.dec)*v(Fs.dec)+O(Ss.dec)*O(Fs.dec)*O(Ss.ra-Fs.ra)),xs=te(ci*v(Xs),Fs.dist-ci*O(Xs));return(1+O(xs))/2},Us},void 0!==(KP=GP())&&(HP.exports=KP);const u0=YP.exports,hh={local:{altitude:1500,ambientAtNight:.1,ambientAtNoon:.45,ambientAtTwilight:.2,directAtNoon:.65,directAtTwilight:.7},global:{altitude:8e5,ambient:.015,direct:.75},planarDirection:{localAltitude:1e4,globalAltitude:1e6,globalAngles:{azimuth:1.3*Math.PI,altitude:.6*Math.PI}}};function b3(d,v,O,A,j,te,pe){(0,Et.s)(pe.ambient.color,1,1,1),pe.ambient.intensity=hh.global.ambient,(0,Et.s)(pe.direct.color,1,1,1),pe.direct.intensity=hh.global.direct;const Re=(0,cs.uZ)((Math.abs(v[2])-hh.local.altitude)/(hh.global.altitude-hh.local.altitude),0,1);let Ge;if(pe.globalFactor=Re,"sun"===te&&(Ge=u0.getTimes(d,v[1],v[0])),Re<1){let tt;if("sun"===te)tt=function S3(d,v,O){const A=d.valueOf();let j,te;v.polarException===u0.PolarException.MIDNIGHT_SUN?(j=A-60*(d.getHours()+48)*60*1e3-60*d.getMinutes()*1e3,te=j+432e6):v.polarException===u0.PolarException.POLAR_NIGHT?(j=A-2,te=A-1):(j=v.sunrise.valueOf(),te=v.sunset.valueOf());const pe=te-j,be=j+pe/2,Re=pe/4,Ge=be-Re,tt=be+Re,ft=.06*pe,yt=j-ft/2,It=j+ft/2,Nt=te-ft/2,Rt=te+ft/2,Jt=hh.local,jt=[.01,Jt.ambientAtNight],ir=[.8,.8,1],or=[.01,.01,.01],pr=[Jt.directAtTwilight,Jt.ambientAtTwilight],Lr=[1,.6,.5],Br=[.8,.8,1],gs=[.9*Jt.directAtNoon,Jt.ambientAtNoon],Cs=[1,.98,.98],Us=[.98,.98,1],Ks=[Jt.directAtNoon,Jt.ambientAtNoon],li=[1,1,1],si=[1,1,1],Ei=gs,ts=Cs,$s=Us,Ms=pr,ms=Lr,ws=Br;let Ss,Fs,ci=[0,0],Xs=[0,0,0],xs=[0,0,0];A<yt||A>Rt?(ci=jt,Xs=or,xs=ir,Fs="night"):A<It?(Ss=It-yt,ci=jl(A-yt,Ss,jt,pr),Xs=jl(A-yt,Ss,or,Lr),xs=jl(A-yt,Ss,ir,Br),Fs="sun rising"):A<Ge?(Ss=Ge-It,ci=jl(A-It,Ss,pr,gs),Xs=jl(A-It,Ss,Lr,Cs),xs=jl(A-It,Ss,Br,Us),Fs="early morning"):A<be?(Ss=be-Ge,ci=jl(A-Ge,Ss,gs,Ks),Xs=jl(A-Ge,Ss,Cs,li),xs=jl(A-Ge,Ss,Us,si),Fs="late morning"):A<tt?(Ss=tt-be,ci=jl(A-be,Ss,Ks,Ei),Xs=jl(A-be,Ss,li,ts),xs=jl(A-be,Ss,si,$s),Fs="early afternoon"):A<Nt?(Ss=Nt-tt,ci=jl(A-tt,Ss,Ei,Ms),Xs=jl(A-tt,Ss,ts,ms),xs=jl(A-tt,Ss,$s,ws),Fs="late afternoon"):A<Rt&&(Ss=Rt-Nt,ci=jl(A-Nt,Ss,Ms,jt),Xs=jl(A-Nt,Ss,ms,or),xs=jl(A-Nt,Ss,ws,ir),Fs="sun setting");let Js=0;switch(O){case"rainy":case"foggy":Js=.9;case"snowy":Js=.5}Js>0&&(Xs=JP(Xs,Js),xs=JP(xs,Js));const xi=(0,br.f)(Xs[0],Xs[1],Xs[2]),Ii=(0,br.f)(xs[0],xs[1],xs[2]),Si=$P(O);return{direct:{intensity:ci[0]*Si.direct,color:xi},ambient:{intensity:ci[1]*Si.ambient,color:Ii},timeOfDay:Fs}}(d,Ge,A);else{const ft=$P(A);tt={direct:{intensity:hh.local.directAtNoon*ft.direct,color:(0,br.f)(1,1,1)},ambient:{intensity:hh.local.ambientAtNoon*ft.ambient,color:(0,br.f)(1,1,1)},timeOfDay:"early afternoon"}}(0,Et.h)(pe.ambient.color,tt.ambient.color,pe.ambient.color,Re),pe.ambient.intensity=(0,cs.t7)(tt.ambient.intensity,pe.ambient.intensity,Re),(0,Et.h)(pe.direct.color,tt.direct.color,pe.direct.color,Re),pe.direct.intensity=(0,cs.t7)(tt.direct.intensity,pe.direct.intensity,Re),pe.specularStrength="rainy"===A||"snowy"===A||"foggy"===A?0:1,pe.environmentStrength="rainy"===A?.7:"snowy"===A||"foggy"===A?.75:1}pe.noonFactor="sun"===te?function x3(d,v){const O=d.valueOf();let A,j;return v.polarException===u0.PolarException.MIDNIGHT_SUN?(A=O-60*(d.getHours()+48)*60*1e3-60*d.getMinutes()*1e3,j=A+432e6):v.polarException===u0.PolarException.POLAR_NIGHT?(A=O-2,j=O-1):(A=v.sunrise.valueOf(),j=v.sunset.valueOf()),1-(0,cs.uZ)(Math.abs(O-(A+(j-A)/2))/432e5,0,1)}(d,Ge):1,"sun"===te?function ZP(d,v,O,A){const j=D3,te=(0,on.i)(P3);if(O===dn.JY.Global)u0.getPosition(d,0,0,j),(0,Et.s)(A,0,0,-1),(0,on.r)(te,te,-j.azimuth),(0,on.o)(te,te,-j.altitude),(0,Et.m)(A,A,te);else{const pe=hh.planarDirection,be=pe.globalAngles;let Ge=(Math.abs(v[2])-pe.localAltitude)/(pe.globalAltitude-pe.localAltitude);Ge=(0,cs.uZ)(Ge,0,1),Ge<1?(u0.getPosition(d,v[1],v[0],j),j.azimuth=(1-Ge)*j.azimuth+Ge*be.azimuth,j.altitude=(1-Ge)*j.altitude+Ge*be.altitude):(j.azimuth=be.azimuth,j.altitude=be.altitude),(0,Et.s)(A,0,-1,0),(0,on.g)(te,te,-j.azimuth),(0,on.r)(te,te,-j.altitude),(0,Et.m)(A,A,te)}}(d,v,O,pe.direct.directionToLightSource):function T3(d,v,O){v===dn.JY.Global?(0,Et.n)(YM,d.eye):(0,Et.s)(YM,0,0,1),(0,Et.g)(ZM,d.viewForward,-1);const A=(0,Ec.EU)(ZM,YM),j=Math.max(A-2*kM,0),pe=Math.max(kM,A-kM-.85*j/(j+1));(0,on.d)(QP,-pe,d.viewRight),(0,Et.m)(O,ZM,QP),(0,Et.a)(O,O,(0,Et.g)(A3,d.viewRight,L3)),(0,Et.n)(O,O)}(j,O,pe.direct.directionToLightSource)}const O3=(0,br.f)(.5773502691896258,-.5773502691896258,.5773502691896258);class kP{constructor(){this.ambient={color:(0,br.f)(1,1,1),intensity:.55},this.direct={color:(0,br.f)(1,1,1),intensity:.55,directionToLightSource:(0,br.a)(O3)},this.noonFactor=.5,this.globalFactor=0,this.specularStrength=1,this.environmentStrength=1}}const P3=(0,ao.c)(),D3={azimuth:0,altitude:0};function $P(d){switch(d){case"disabled":case"sunny":case"cloudy":return{direct:1,ambient:1};case"rainy":return{direct:.4,ambient:1.2};case"snowy":return{direct:.5,ambient:1.3};case"foggy":return{direct:.2,ambient:1.6}}}function JP(d,v){const O=(d[0]+d[1]+d[2])/3;for(let A=0;A<3;A++)d[A]=d[A]+(O-d[A])*v;return d}function jl(d,v,O,A){const j=[];for(let te=0;te<O.length;te++)j[te]=(A[te]-O[te])*d/v+O[te];return j}new Date(0);const QP=(0,ao.c)(),YM=(0,br.c)(),ZM=(0,br.c)(),A3=(0,br.c)(),kM=.25,L3=.2;var $M=T(82244);let Nd=class extends vc.Z.EventedAccessor{constructor(){super(),this._referencePointUpdateDelay=200,this._referencePointUpdateInterval=3e3,this._referencePointUpdateDistThreshold=1e6,this._referencePosUpdateQuery=null,this._referencePosMapCoordsRequested=null,this._viewHandles=new so.Z,this._preserveAbsoluteDateTime=!1,this._trackingEnabled=!1,this._referencePosResetPreserveAbsoluteTime=!1,this._referencePosUpdateTimer=null,this._referencePosMapCoords=null,this._mainLight=new $M.Eg,this._ambientLight=new $M.Mi,this._moonLight=new $M.AM,this.disableQueries=!1,this._disableWeather=!1,this._renderer=null,this._referencePosWGS84Comparable=null,this._resetReferencePosition()}destroy(){this.disconnectView(),this._viewHandles.destroy()}get _view(){return this._renderer?.view}get updating(){return!((this.disableQueries||!this._referencePosUpdateQuery&&!this._referencePosMapCoordsRequested)&&!this._renderer?.updating)}get weatherEnabled(){return this._view?.environment.atmosphereEnabled&&!this._disableWeather&&this._view?.state?.viewingMode===dn.JY.Global&&(0,cd.N$)(this._view.spatialReference)}get weatherVisible(){return this.weatherEnabled&&this._renderer?.weatherVisible}get referencePositionWGS84Comparable(){return this._referencePosWGS84Comparable}connectView(d){if(this._renderer)return;this._renderer=new bc({view:d});const v=()=>this._updateRenderParameters(),O=()=>this._cameraHandler(),A=()=>this._updateLighting();this._viewHandles.add([(0,wr.YP)(()=>d.environment.lighting,j=>this._updateLightingHandler(j),wr.Z_),(0,wr.YP)(()=>"sun"===d.environment.lighting.type?d.environment.lighting.date:null,j=>this._lightingDateHandler(j),wr.Z_),(0,wr.YP)(()=>d.stationary,()=>this._interactingStationaryHandler()),(0,wr.YP)(()=>d.environment.lighting.directShadowsEnabled,v,wr.Z_),(0,wr.YP)(()=>d.environment.lighting.ambientOcclusionEnabled,v,wr.Z_),(0,wr.YP)(()=>d.environment.lighting.waterReflectionEnabled,v,wr.Z_),(0,wr.YP)(()=>d.environment.background?.color,v,wr.Z_),(0,wr.YP)(()=>d.spatialReference,()=>this._resetReferencePosition(!0),wr.Z_),(0,wr.YP)(()=>d.environment.weather.type,A,wr.Z_),(0,wr.YP)(()=>this.weatherEnabled,A,wr.Z_),(0,wr.YP)(()=>d.viewingMode,()=>this._resetReferencePosition(!0),wr.tX),(0,wr.YP)(()=>"sun"===d.environment.lighting.type&&d.environment.lighting.cameraTrackingEnabled,j=>this._updateCameraTracking(j),wr.tX),(0,wr.YP)(()=>d.state.camera,O,wr.tX),(0,wr.YP)(()=>this.disableQueries,O)]),this._updateRenderParameters(),this._updateLighting(),this._cameraHandler(),this.notifyChange("updating")}disconnectView(){this._viewHandles.removeAll(),this._resetReferencePosition(),this._renderer=(0,at.SC)(this._renderer)}_updateLightingHandler(d){this._updateCameraTracking("sun"===d.type&&d.cameraTrackingEnabled),this._lightingDateHandler("sun"===d.type?d.date:null),this._updateRenderParameters()}_updateCameraTracking(d){if(this._trackingEnabled=d,d)this._cameraHandler();else{const v=this._view.environment.lighting;"sun"===v?.type&&(v.positionTimezoneInfo.autoUpdated=!1)}}_lightingDateHandler(d){const v=this._view.environment.lighting;if("virtual"!==v?.type){if(d){if(!v.positionTimezoneInfo.autoUpdated){if(this._preserveAbsoluteDateTime=!0,!(0,tn.jF)(this._view.spatialReference)){const A=this._view.camera.position;if(!this._referencePosMapCoords||!this._referencePosMapCoords.equals(A))return void this._requestReferencePositionUpdate(A)}if(this._preupdateTracking(d),(0,at.pC)(this._referencePosWGS84Comparable)){const A=zP(this._referencePosWGS84Comparable,qP);(0,at.pC)(A)&&(v.autoUpdate(null,A),this._trackingEnabled&&(v.positionTimezoneInfo.autoUpdated=!0))}}this._updateLighting(d)}}else this._updateLighting()}_preupdateTracking(d){!this._trackingEnabled&&"sun"===this._view.environment.lighting.type&&this._view.environment.lighting.cameraTrackingEnabled&&this._cameraHandler(d)}_cameraHandler(d=null){const v=this._view;if(!v.ready)return;const O=v.stateManager.camera;O&&(this._cameraHandlerClientSide(O,d)||this._cameraHandlerServerSide(O))}_cameraHandlerClientSide(d,v){const O=(0,cd.N$)(this._view.spatialReference);if(O&&!(0,tn.jF)(this._view.spatialReference))return!1;const A=d.position;return(0,at.Wi)(this._referencePosWGS84Comparable)&&(this._referencePosWGS84Comparable=(0,br.c)()),O?(0,tn.UY)(A,this._referencePosWGS84Comparable):(0,Et.s)(this._referencePosWGS84Comparable,A.longitude,A.latitude,A.z),this.notifyChange("referencePositionWGS84Comparable"),this._autoUpdateTimezone(this._referencePosWGS84Comparable,v)||this._updateLighting(v),!0}_cameraHandlerServerSide(d){const v=d.position;(!this._referencePosMapCoords||this._referencePosMapCoordsRequested||this._exceedsReferencePosDistThreshold(v))&&this._requestReferencePositionUpdate(v,!0),this._view.mapCoordsHelper&&this._referencePosWGS84Comparable&&(this._referencePosWGS84Comparable[2]=v.z*this._view.mapCoordsHelper.unitInMeters,this._referencePosChanged())}_interactingStationaryHandler(){this._view.stationary&&this._executePendingReferencePositionUpdate()}_updateLighting(d){const v=this._view,O=d||("sun"===v.environment.lighting.type?v.environment.lighting.date:null),A=this._referencePosWGS84Comparable,j=(0,at.pC)(A)?w3:R3;(0,at.pC)(A)&&b3(O,A,v.state.viewingMode,this.weatherVisible?v.environment.weather.type:"disabled",v.state.camera,v.environment.lighting.type,j);const te=this._mainLight,pe=j.direct;(0,Et.g)(te.intensity,pe.color,pe.intensity*Math.PI),(0,Et.c)(te.direction,pe.directionToLightSource),te.specularStrength=j.specularStrength,te.environmentStrength=j.environmentStrength;const be=this._ambientLight;(0,Et.g)(be.intensity,j.ambient.color,j.ambient.intensity);const Re=this._moonLight;(0,Et.h)(Re.intensity,U3,B3,j.globalFactor),(0,Et.g)(Re.intensity,Re.intensity,(1-.5*j.globalFactor)*(1-.4*j.noonFactor*(1-j.globalFactor))),(0,Et.c)(Re.direction,pe.directionToLightSource),v._stage.renderView.updateLightSources([te,be,Re],1-j.noonFactor,j.globalFactor),this._updateRenderParameters()}_autoUpdateTimezone(d,v=null){if("virtual"===this._view.environment.lighting.type||!this._view.environment.lighting.cameraTrackingEnabled||(0,at.Wi)(d))return!1;const O=I3;O.setTime((v||this._view.environment.lighting.date).getTime());const A=zP(d,qP);if((0,at.Wi)(A))return!1;let j=this._view.environment.lighting.positionTimezoneInfo;if(j.autoUpdated){if(j.hours===A.hours&&j.minutes===A.minutes&&j.seconds===A.seconds)return!1}else j=A;const te=O.getUTCHours()-(A.hours-j.hours),pe=O.getUTCMinutes()-(A.minutes-j.minutes),be=O.getUTCSeconds()-(A.seconds-j.seconds);return O.setUTCHours(te),O.setUTCMinutes(pe),O.setUTCSeconds(be),!v&&this._view.environment.lighting.autoUpdate(O,A)}_updateRenderParameters(){const d=this._view._stage;if(!d)return;const v=(0,at.R2)(this._referencePosWGS84Comparable,!0,j=>function C3(d,v){if(v===dn.JY.Global)return!0;const O=hh.planarDirection;return Math.abs(d)<O.localAltitude}(j[2],this._view.state.viewingMode)),O=this._view.environment.background,A=O instanceof _P?{type:"color",color:(0,Ao.b)(yc.Z.toUnitRGBA(O.color))}:{type:"color",color:(0,Ao.f)(0,0,0,1)};d.renderView.setRenderParameters({shadowMap:this._view.environment.lighting.directShadowsEnabled&&v,background:A,environment:this._view.environment,weatherVisible:this._view.environmentManager.weatherVisible})}_resetReferencePosition(d=!1){this._cancelReferencePosUpdates(),this._referencePosMapCoords=null,this._referencePosMapCoordsRequested=null,this._referencePosResetPreserveAbsoluteTime=null,this._referencePosWGS84Comparable=null,this.notifyChange("updating"),d&&this._cameraHandler()}_requestReferencePositionUpdate(d,v=!1){if(!this.disableQueries&&(this._referencePosMapCoordsRequested?this._referencePosMapCoordsRequested.copy(d):this._referencePosMapCoordsRequested=d.clone(),this._referencePosResetPreserveAbsoluteTime=!!v,!this._referencePosUpdateQuery&&!this._referencePosUpdateTimer&&this._view.stationary)){const O=this._referencePosUpdateQuery=(0,fi.e4)(this._referencePointUpdateDelay).then(()=>{if(this._referencePosUpdateQuery===O)return this._doReferencePositionUpdateQuery(()=>this._referencePosUpdateQuery!==O)}).catch(j=>{"mapcoordshelper:missing-geometry-service"===j.name&&(this.disableQueries=!0)}).then(()=>{this._referencePosUpdateQuery===O&&(this._referencePosUpdateQuery=null,this._referencePosUpdateTimer||this._executePendingReferencePositionUpdate(),this.notifyChange("updating"))}),A=this._referencePosUpdateTimer=(0,fi.e4)(this._referencePointUpdateInterval).then(()=>{this._referencePosUpdateTimer===A&&(this._referencePosUpdateTimer=null,this._referencePosUpdateQuery||this._executePendingReferencePositionUpdate())});this.notifyChange("updating")}}_doReferencePositionUpdateQuery(d){var v=this;return(0,oi.Z)(function*(){v._referencePosResetPreserveAbsoluteTime&&(v._preserveAbsoluteDateTime=!1),v._referencePosMapCoords?v._referencePosMapCoords.copy(v._referencePosMapCoordsRequested):v._referencePosMapCoords=v._referencePosMapCoordsRequested.clone(),v._referencePosResetPreserveAbsoluteTime=null,v._referencePosMapCoordsRequested=null;const O=yield v._view.mapCoordsHelper.toGeographic(v._referencePosMapCoords);if(!d()&&!isNaN(O[0])&&!isNaN(O[1])){const A=v._referencePosMapCoords.z*v._view.mapCoordsHelper.unitInMeters;v._referencePosWGS84Comparable?(v._referencePosWGS84Comparable[0]=O[0],v._referencePosWGS84Comparable[1]=O[1],v._referencePosWGS84Comparable[2]=A):v._referencePosWGS84Comparable=[O[0],O[1],A],v._referencePosChanged()}})()}_executePendingReferencePositionUpdate(){const d=this._referencePosMapCoordsRequested;d&&this._requestReferencePositionUpdate(d,this._referencePosResetPreserveAbsoluteTime)}_referencePosChanged(){this._preserveAbsoluteDateTime?this._updateLighting():this._autoUpdateTimezone(this._referencePosWGS84Comparable)||this._updateLighting(),this.notifyChange("referencePositionWGS84Comparable")}_exceedsReferencePosDistThreshold(d){if(this._referencePosMapCoords){let v=this._referencePosMapCoords.distance(d);return this._view.mapCoordsHelper&&(v*=this._view.mapCoordsHelper.unitInMeters),v>this._referencePointUpdateDistThreshold}return!0}_cancelReferencePosUpdates(){const d=!!this._referencePosUpdateQuery;return this._referencePosUpdateQuery=null,this._referencePosUpdateTimer=null,d}get test(){const d=this;return{get renderer(){return d._renderer},set referencePointUpdateInterval(v){d._referencePointUpdateInterval=v},set referencePointUpdateDistThreshold(v){d._referencePointUpdateDistThreshold=v},set referencePosUpdateTimer(v){d._referencePosUpdateTimer=v},set referencePointUpdateDelay(v){d._referencePointUpdateDelay=v},set disableWeather(v){d._disableWeather=v}}}};(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],Nd.prototype,"updating",null),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"disableQueries",void 0),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"_disableWeather",void 0),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"weatherEnabled",null),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"weatherVisible",null),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"referencePositionWGS84Comparable",null),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"_renderer",void 0),(0,Je._)([(0,ht.Cb)()],Nd.prototype,"_referencePosWGS84Comparable",void 0),Nd=(0,Je._)([(0,Ds.j)("esri.views.3d.environment.SceneViewEnvironmentManager")],Nd);const w3=new kP,R3=new kP,I3=new Date,qP={hours:0,minutes:0,seconds:0},U3=(0,br.f)(.22,.22,.33),B3=(0,br.f)(.22,.22,.22);var xn,wo,cl,qo=T(97126),Fu=T(70562);function ug(d,v){return 0!=(d&v)}function hv(d,v,O,A,j,te){0!==d&&(O?(te.min=Math.min(te.min,v),te.max=Math.max(te.max,v)):null!=A?(te.min-=Math.max(0,(v-te.min)*(1-A)),te.max+=Math.max(0,(v-te.max)*(1-A))):j&&(te.min-=Math.max(0,v-te.min-j),te.max+=Math.max(0,v-te.max-j)))}(function(d){d[d.NONE=0]="NONE",d[d.ZOOM=1]="ZOOM",d[d.TUMBLE=2]="TUMBLE",d[d.LOOK_AROUND=3]="LOOK_AROUND",d[d.PAN=4]="PAN",d[d.ASCEND=5]="ASCEND"})(xn||(xn={})),function(d){d[d.NONE=0]="NONE",d[d.TILT=1]="TILT",d[d.ALTITUDE=2]="ALTITUDE",d[d.DISTANCE=4]="DISTANCE",d[d.COLLISION=8]="COLLISION",d[d.ALL=15]="ALL",d[d.ALL_EXCEPT_COLLISION=7]="ALL_EXCEPT_COLLISION"}(wo||(wo={})),function(d){d[d.TUMBLE=0]="TUMBLE",d[d.LOOK_AROUND=1]="LOOK_AROUND"}(cl||(cl={}));const G_={selection:wo.NONE,interactionType:xn.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE};function eD(d,v,O,A){return(0,Et.c)(A,v=v||d.viewForward),(0,Et.g)(A,A,Math.sign((0,Et.e)(v,O))),A}var j3=T(24229);function JM(d,v,O=G_){if(!function N3(d,v){return!(!d.state.isGlobal||!d.state.constraints.altitude||v.interactionType===xn.TUMBLE&&ug(v.selection,wo.TILT))}(d,O))return 0;const A=function z3(d,v){return v.min=d.min,v.max=d.max,v}(d.state.constraints.altitude,H3);!function W3(d,v,O){const A=v.interactionType;if(A===xn.NONE)return;const{min:j,max:te}=O,{interactionStartCamera:pe,interactionFactor:be}=v,Re=A===xn.TUMBLE||A===xn.ZOOM,Ge=JM(d,pe),tt=0===Ge?0:d.renderCoordsHelper.getAltitude(pe.eye);O.min=j,O.max=te,hv(Ge,tt,Re,be,.05*tt,O)}(d,O,A);const j=d.renderCoordsHelper.getAltitude(v.eye),te=(0,cs.uZ)(j,A.min,A.max)-j;return Math.abs(te)<=1e-6?0:te}const H3={min:0,max:0},G3=(0,br.c)(),K3=(0,br.c)(),Y3=(0,br.c)(),XM=(0,br.c)();function QM(d,v,O=G_){if(!d.state.isLocal)return 0;const A=d.state.constraints.distance;if(!d.pointsOfInterest.surfaceOrigin.renderLocation||A===1/0)return 0;_v.min=0,_v.max=A,function k3(d,v,O){const A=v.interactionType;if(A===xn.NONE)return;const{min:j,max:te}=O,{interactionStartCamera:pe,interactionFactor:be}=v,Re=A===xn.ZOOM||A===xn.PAN,Ge=QM(d,pe),tt=0===Ge?0:qM(d,pe);O.min=j,O.max=te,hv(Ge,tt,Re,be,.05*tt,O)}(d,O,_v);const j=qM(d,v),te=_v.max-j;return te>=-1e-6?0:te}function qM(d,v){return(0,Et.i)(v.eye,d.pointsOfInterest.surfaceOrigin.renderLocation)}const _v={min:0,max:0},J3=(0,br.c)(),X3=(0,br.c)(),Q3=(0,br.c)(),q3=(0,br.c)(),pv=(0,br.c)();var oc=T(62483);function tD(d,v,O,A){return(0,at.pC)(d.renderCoordsHelper.fromRenderCoords(v.eye,mv,A))&&(0,ui.BD)(O,mv)}function fv(d,v){return d.elevationProvider?(0,at.Pt)(d.elevationProvider.getElevation(v[0],v[1],v[2],d.renderCoordsHelper.spatialReference,"ground"),0):0}function d0(d,v,O,A){const j=d.state.camera.clone();v&&(j.eye=v,j.center=O,j.up=A),function eI(d,v,O){let A=sD[d.viewingMode];A||(A=(0,oc.Z8)(d.state.viewingMode),A.options.backfacesTerrain=!d.state.isGlobal,A.options.invisibleTerrain=!0,sD[d.viewingMode]=A);const{isGlobal:j}=d.state;return!(!d.sceneIntersectionHelper.intersectRay(v,A,O)||rD(d,v.origin,O))||!(!d.renderCoordsHelper.intersectManifold(v,0,O)||rD(d,v.origin,O))||!!j&&function tI(d,v,O){const A=(0,Et.e)(d.origin,d.origin)-O*O,j=A>0?Math.sqrt(A)/3:1;return(0,Et.g)(v,d.direction,j/(0,Et.l)(d.direction)),(0,Et.a)(v,v,d.origin),!0}(v,O,(0,Mo.Iu)(d.spatialReference).radius)}(d,j.ray,K_)||(0,Et.c)(K_,j.center);const te=d.state.constraints,pe=te.minimumPoiDistance;if((0,Et.d)(j.eye,K_)<pe){const be=te.collision.enabled;(0,Et.c)(h0,j.viewForward),(0,Et.g)(h0,h0,pe),be?j.eye=(0,Et.b)(mv,K_,h0):(0,Et.a)(K_,j.eye,h0);const Re=d.renderCoordsHelper,Ge=Re.getAltitude(j.eye),tt=te.collision.elevationMargin;be&&Ge<tt&&((0,Et.b)(h0,K_,j.eye),j.eye=Re.setAltitude(mv,tt,j.eye),(0,Et.a)(K_,j.eye,h0))}return j.center=K_,j}function rD(d,v,O){if(!d.state.isGlobal)return!1;const A=fv(d,v),j=d.stateManager.constraintsManager.nearFarHeuristic,{far:te}=j.compute(v,O,d.renderDataExtent,A,rI),pe=te*te;return(0,Et.d)(v,O)>pe}const sD={},mv=(0,br.c)(),K_=(0,br.c)(),h0=(0,br.c)(),rI={near:0,far:0};function yf(d,v,O=pd.EYE){const A=d.state.constraints;if(!A.collision.enabled)return!1;const j=fv(d,v.eye),te=d.renderCoordsHelper.getAltitude(v.eye),pe=j+A.collision.elevationMargin;if(te>=pe)return!1;const be=(0,Et.l)(v.eye);return(0,Et.b)(gv,v.center,v.eye),v.eye=d.renderCoordsHelper.setAltitude(sI,pe,v.eye),O===pd.EYE_AND_CENTER?v.center=(0,Et.a)(gv,v.eye,gv):O===pd.EYE_AND_CENTER_SCALE&&(v.center=(0,Et.g)(gv,v.center,(be-te+pe)/be)),!0}var pd;!function(d){d[d.EYE=0]="EYE",d[d.EYE_AND_CENTER=1]="EYE_AND_CENTER",d[d.EYE_AND_CENTER_SCALE=2]="EYE_AND_CENTER_SCALE"}(pd||(pd={}));const gv=(0,br.c)(),sI=(0,br.c)();function Y_(d,v,O){d.worldUpAtPosition(v,iD),(0,Et.b)(eb,O,v);const A=(0,Et.l)(eb);return 0===A?0:(0,cs.ZF)((0,Et.e)(eb,iD)/A)}const iD=(0,br.c)(),eb=(0,br.c)();function tb(d,v,O=G_,A=G_,j){if(!d.state.constraints.tilt)return 0;const pe=d.state.constraints.tilt(v.distance,_I);return function hI(d,v,O){if(v.interactionType===xn.NONE)return;const{interactionStartCamera:A,interactionFactor:j}=v,{min:te,max:pe}=O,be=tb(d,A,G_,v),Re=0===be?0:Y_(d.renderCoordsHelper,A.center,A.eye);O.min=te,O.max=pe,v.interactionType===xn.TUMBLE?(ug(v.selection,wo.ALTITUDE)&&oD(d,A,O),hv(be,Re,!0,j,aD,O)):hv(be,Re,!1,j,aD,O)}(d,O,pe),A.interactionType===xn.TUMBLE&&ug(A.selection,wo.ALTITUDE)&&oD(d,A.interactionStartCamera,pe),O.tiltMode===cl.LOOK_AROUND||A.tiltMode===cl.LOOK_AROUND?function nI(d,v,O,A){switch(A&&(A.requiresTwoSteps=!1),d.viewingMode){case"global":return function aI(d,v,O,A){const j=function lI(d,v,O){const A=d.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,j=A+(0,Mo.Iu)(d.spatialReference).radius,te=d.renderCoordsHelper.intersectManifold(v.ray,A,k_);return O.eyeCenterDistance=v.distance,O.centerIsOnSurface=!1,(0,at.pC)(te)?(O.eyeCenterDistance=(0,Et.i)(v.eye,te),O.tiltAtCenter=Y_(d.renderCoordsHelper,te,v.eye),O.centerIsOnSurface=!0):d.state.isLocal?O.tiltAtCenter=Y_(d.renderCoordsHelper,v.center,v.eye):((0,qo.j)((0,qo.k)(qo.t,j),v.ray,k_),O.eyeCenterDistance=(0,Et.i)(v.eye,k_),O.tiltAtCenter=(0,cs.ZF)(-(0,Et.e)(v.viewForward,(0,Et.n)(k_,k_)))),O.radius=j,O.eyeRadius=(0,Et.l)(v.eye),O.constraints=d.state.constraints,O}(d,v,pI),te=(0,cs.uZ)(j.tiltAtCenter,O.min,O.max);if(!dg(j.tiltAtCenter-te))return 0;let pe,be;return j.centerIsOnSurface?(pe=function cI(d){const{constraints:v,eyeCenterDistance:O,tiltAtCenter:A}=d;let j=A,te=v.clampTilt(O,A);const pe=rb(d,te);if(v.clampTilt(pe,A)===te)return te;let be=0;for(;be<10&&dg(te-j);){const Re=(j+te)/2,Ge=rb(d,Re);dg(v.clampTilt(Ge,Re)-Re)?j=Re:te=Re,be++}return te}(j),be=function uI(d,v){const O=(0,cs.Kt)(d.radius/d.eyeRadius*Math.sin(d.tiltAtCenter)),A=(0,cs.Kt)(d.radius/d.eyeRadius*Math.sin(v));return d.eyeRadius>d.radius?O-A:A-O}(j,pe)):(pe=j.constraints.clampTilt(j.eyeCenterDistance,j.tiltAtCenter),A&&pe<Math.PI/2&&(A.requiresTwoSteps=!0,pe=Math.PI/2-1e-5),be=function dI(d,v){return d.tiltAtCenter-Math.PI/2-(v-Math.PI/2)}(j,pe)),A&&(A.eyeCenterDistance=rb(j,pe)),be}(d,v,O,A);case"local":return function oI(d,v,O,A){const j=Y_(d.renderCoordsHelper,v.center,v.eye),te=(0,cs.uZ)(j,O.min,O.max),pe=j-te;if(!dg(pe))return 0;if(A){const be=d.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,Re=d.renderCoordsHelper.getAltitude(v.eye)-be,Ge=Math.cos(te);A.eyeCenterDistance=Math.abs(Ge)>1e-4?Re/Ge:v.distance}return pe}(d,v,O,A);default:return void(0,Gy.Bg)(d.viewingMode)}}(d,v,pe,j):function iI(d,v,O){const A=Y_(d.renderCoordsHelper,v.center,v.eye),j=A-(0,cs.uZ)(A,O.min,O.max);return dg(j)?j:0}(d,v,pe)}function dg(d){return Math.abs(d)>1e-9}function rb(d,v){if(!d.centerIsOnSurface)return d.eyeCenterDistance;const O=Math.PI-(0,cs.uZ)(v,0,Math.PI),A=(0,cs.Kt)(d.radius/d.eyeRadius*Math.sin(O)),j=Math.PI-O-A,te=Math.sin(j)/Math.sin(O);if(d.eyeRadius<d.radius&&te>1){const pe=Math.PI-A,be=Math.PI-O-pe;return Math.sin(be)/Math.sin(O)*d.eyeRadius}return te*d.eyeRadius}function oD(d,v,O){if(d.state.isLocal)return;const A=d.state.constraints;if(!A.altitude)return;const j=(0,Et.p)(v.center),te=Math.sqrt(j),pe=v.distance,be=(0,Mo.Iu)(d.spatialReference).radius,Re=A.altitude.min+be,Ge=A.altitude.max+be,tt=(Re*Re-pe*pe-j)/(-2*te*pe);O.min=Math.max(O.min,Math.min(Math.PI-(0,cs.ZF)((Ge*Ge-pe*pe-j)/(-2*te*pe)),O.max)),O.max=Math.min(O.max,Math.PI-(0,cs.ZF)(tt))}const Z_=(0,br.c)(),yv=(0,ao.c)(),k_=(0,br.c)(),aD=(0,cs.Vl)(5),_I={min:0,max:0},pI={constraints:null,radius:0,eyeRadius:0,centerIsOnSurface:!0,eyeCenterDistance:0,tiltAtCenter:0},hg={eyeCenterDistance:0,requiresTwoSteps:!1},vv=d=>d*d,sb=d=>1-vv(1-d),ib=d=>d*d*d,lD=d=>1-ib(1-d),cD=d=>d<.5?ib(2*d)/2:(lD(2*(d-.5))+1)/2,nb=d=>d*d*d*d,uD=d=>1-nb(1-d),ob=d=>d*d*d*d*d,dD=d=>1-ob(1-d),ab=d=>1-Math.cos(d*Math.PI/2),hD=d=>1-ab(1-d),lb=d=>2**(10*(d-1)),_g=d=>1-lb(1-d),cb=d=>-(Math.sqrt(1-d*d)-1),_D=d=>1-cb(1-d);function fd(d){const v=2*(d-Math.sqrt((d-1)*d)),O=v/2/d;return A=>A<O?d*A*A:v*A-v+1}function md(d,v){return(O,A)=>O<v?v*d(O/v,A):1-d((1-O)/(1-v),A)*(1-v)}const bI=md(fd(1),1),TI=md(fd(1),0),pD=md(fd(1),.5),CI=md(fd(2),1),OI=md(fd(2),0),PI=md(fd(2),.5),DI=md(fd(3),1),xI=md(fd(3),0),SI=md(fd(3),.5),AI=md(fd(4),1),LI=md(fd(4),0),wI=md(fd(4),.5),RI={linear:function fI(d){return d},"in-quad":vv,"out-quad":sb,"in-out-quad":d=>d<.5?vv(2*d)/2:(sb(2*(d-.5))+1)/2,"in-coast-quad":bI,"out-coast-quad":TI,"in-out-coast-quad":pD,"in-cubic":ib,"out-cubic":lD,"in-out-cubic":cD,"in-coast-cubic":CI,"out-coast-cubic":OI,"in-out-coast-cubic":PI,"in-quart":nb,"out-quart":uD,"in-out-quart":d=>d<.5?nb(2*d)/2:(uD(2*(d-.5))+1)/2,"in-coast-quart":DI,"out-coast-quart":xI,"in-out-coast-quart":SI,"in-quint":ob,"out-quint":dD,"in-out-quint":d=>d<.5?ob(2*d)/2:(dD(2*(d-.5))+1)/2,"in-coast-quint":AI,"out-coast-quint":LI,"in-out-coast-quint":wI,"in-sine":ab,"out-sine":hD,"in-out-sine":d=>d<.5?ab(2*d)/2:(hD(2*(d-.5))+1)/2,"in-expo":lb,"out-expo":_g,"in-out-expo":d=>d<.5?lb(2*d)/2:(_g(2*(d-.5))+1)/2,"in-circ":cb,"out-circ":_D,"in-out-circ":d=>d<.5?cb(2*d)/2:(_D(2*(d-.5))+1)/2};function _a(d,v,O=jI,A=v){let j=!1;A!==v&&A.copyFrom(v),A.computeUp(d.state.viewingMode);for(let be=0;be<FI;be++){let Re=0;for(const Ge of BI)if(ug(O.selection,Ge.type)){const tt=Math.abs(Ge.error(d,A,O));Ge.apply(d,A,O)&&(j=!0,Re+=tt)}if(0===Re)break}const te=ug(O.selection,wo.COLLISION),pe=function II(d,v){switch(d){case xn.PAN:return pd.EYE_AND_CENTER;case xn.ASCEND:return v.state.isGlobal?pd.EYE_AND_CENTER_SCALE:pd.EYE_AND_CENTER;default:return pd.EYE}}(O.interactionType,d);return te&&yf(d,A,pe)&&(j=!0),j&&A.computeUp(d.state.viewingMode),j}function Wd(d,v){const O="number"==typeof d?d:(0,Yi.j)(d,v),A=Math.min(1,O/150);return cD(A)}const BI=[{type:wo.TILT,error:function UI(d,v,O){return tb(d,v,O)*v.distance},apply:function nD(d,v,O=G_,A=!0){hg.eyeCenterDistance=0,hg.requiresTwoSteps=!1;const j=tb(d,v,O,void 0,hg);if(0===j)return!1;switch((0,on.d)(yv,-j,v.viewRight),O.tiltMode){case cl.LOOK_AROUND:(0,Et.m)(Z_,v.viewForward,yv),(0,Et.g)(Z_,Z_,hg.eyeCenterDistance),v.center=(0,Et.a)(k_,v.eye,Z_);break;case cl.TUMBLE:(0,Et.b)(Z_,v.center,v.eye),(0,Et.m)(Z_,Z_,yv),v.eye=(0,Et.b)(k_,v.center,Z_);break;default:(0,Gy.Bg)(O.tiltMode)}return v.up=(0,Et.m)(k_,v.up,yv),!hg.requiresTwoSteps||!A||nD(d,v,O,!1)}},{type:wo.ALTITUDE,error:JM,apply:function F3(d,v,O=G_){const A=JM(d,v,O);if(0===A)return!1;const j=d.renderCoordsHelper,te=j.getAltitude(v.eye)+A,pe=eD(v,O.interactionDirection,function V3(d,v,O,A){return d.renderCoordsHelper.worldUpAtPosition(v.eye,A),(0,Et.g)(A,A,O),A}(d,v,Math.sign(A),K3),G3),be=(0,Et.c)(Y3,v.viewForward),Re=j.intersectInfiniteManifold((0,Fu.re)(v.eye,pe),te,XM);return v.eye=(0,at.pC)(Re)?Re:j.setAltitude(XM,te,v.eye),v.center=(0,j3.W8)(XM,v.eye,be,v.center),!0}},{type:wo.DISTANCE,error:QM,apply:function Z3(d,v,O=G_){const A=QM(d,v,O);if(0===A)return!1;const j=d.pointsOfInterest.surfaceOrigin,te=qM(d,v)+A,pe=(0,Et.c)(J3,v.eye),be=eD(v,O.interactionDirection,function $3(d,v,O){return(0,Et.r)(O,v.eye,d.pointsOfInterest.surfaceOrigin.renderLocation)}(d,v,q3),Q3);if(!(0,qo.h)((0,qo.l)(j.renderLocation,te),(0,Fu.re)(v.eye,be),pv))return!1;v.eye=pv;const Re=(0,Et.b)(X3,v.eye,pe);v.center=(0,Et.a)(pv,v.center,Re);const Ge=d.renderCoordsHelper.getAltitude(v.center),tt=d.renderCoordsHelper.intersectInfiniteManifold(v.ray,Ge,pv);return(0,at.pC)(tt)&&(v.center=tt),!0}}],jI={selection:wo.ALL,interactionType:xn.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE},FI=5;var Jh=T(550);const Nu=(0,br.c)(),du=(0,br.c)(),$_=(0,br.c)(),ac=(0,br.c)(),_0=(0,br.c)(),NI=(0,br.c)(),Wu={upward:(0,br.f)(0,0,1),forward:(0,br.f)(0,1,0),sideway:(0,br.f)(1,0,0)},fD=(0,Jh.c)();class mD{constructor(v=dn.JY.Global){this.viewingMode=v,this.center=(0,br.c)(),this.pitch=0,this.yaw=0,this.distance=0,this.lookAtDirection=(0,br.a)(Wu.forward)}pixelsPerPanAtZoom(v){return this.size/2/(this._zoomToPanScale*v)}zoomAtPixelsPerPan(v){return this.size/2/(this._zoomToPanScale*v)}pixelsPerRotateAtZoom(){const v=Math.max(Math.cos(Math.abs(this.pitch)),.5);return this.size/2/v}compareTo(v,O){if(O||(O={pan:0,rotate:0,sourceZoom:0,targetZoom:0}),this.viewingMode===dn.JY.Global){const te=((0,Et.l)(this.center)+(0,Et.l)(v.center))/2;O.pan=(0,Ec.EU)(this.center,v.center)*te}else O.pan=(0,Et.i)(this.center,v.center);let A=Math.abs(v.yaw-this.yaw);A>=Math.PI&&(A=2*Math.PI-A);const j=Math.abs(v.pitch-this.pitch);return O.rotate=Math.max(A,j),O.sourceZoom=this.distance,O.targetZoom=v.distance,O}interpolate(v,O,A){this.viewingMode===dn.JY.Global?(0,Ec.ZA)(v.center,O.center,A.pan,this.center):(0,Et.h)(this.center,v.center,O.center,A.pan),this.distance=(0,cs.t7)(v.distance,O.distance,A.zoom),this.pitch=(0,cs.t7)(v.pitch,O.pitch,A.rotate);let j=v.yaw;const te=O.yaw;Math.abs(te-j)>=Math.PI&&(j+=2*(j<te?1:-1)*Math.PI),this.yaw=(0,cs.t7)(j,te,A.rotate)}copyFrom(v){(0,Et.c)(this.center,v.center),this.pitch=v.pitch,this.yaw=v.yaw,this.distance=v.distance,(0,Et.c)(this.lookAtDirection,v.lookAtDirection),this.size=v.size,this.copyFromCommon(v),this.viewingMode=v.viewingMode}copyFromRenderCamera(v){const O=this._lookAtOrientation(v.center,fD);(0,Et.c)(this.center,v.center),(0,Et.b)(ac,v.center,v.eye),(0,Et.t)(ac,ac,O),(0,Et.t)(_0,v.up,O),this.distance=(0,Et.l)(ac),ac[0]/=this.distance,ac[1]/=this.distance,ac[2]/=this.distance,this.pitch=this._eyeUpToPitch(ac),this.yaw=this._eyeUpToYaw(ac,_0),this.size=Math.sqrt(v.width*v.width+v.height*v.height),this.copyFromCommon(v)}copyFromCommon(v){this.fov=v.fov,this._zoomToPanScale=Math.atan(.5*this.fov)}copyToRenderCamera(v){const O=this._lookAtOrientation(this.center,fD);(0,Ta.t)(O,O),this._axisAngleVec3(Wu.sideway,this.pitch-Math.PI/2,Wu.forward,ac),this._axisAngleVec3(Wu.upward,this.yaw,ac),this._axisAngleVec3(Wu.sideway,this.pitch-Math.PI/2,Wu.upward,_0),this._axisAngleVec3(Wu.upward,this.yaw,_0),(0,Et.g)(ac,ac,this.distance),(0,Et.t)(ac,ac,O),(0,Et.t)(_0,_0,O),v.center=this.center,v.eye=(0,Et.b)(ac,this.center,ac),v.up=_0}_axisAngleVec3(v,O,A,j=A){const te=Math.cos(O),pe=Math.sin(O);return(0,Et.g)(Nu,A,te),(0,Et.f)(du,v,A),(0,Et.g)(du,du,pe),(0,Et.g)($_,v,(1-te)*(0,Et.e)(v,A)),(0,Et.a)(j,(0,Et.a)(j,Nu,du),$_)}_lookAtOrientation(v,O=(0,Jh.c)()){return this._upAtLookAt(v,$_),(0,Et.f)(Nu,this.lookAtDirection,$_),(0,Et.n)(Nu,Nu),0===Nu[0]&&0===Nu[1]&&0===Nu[2]&&(0,Et.c)(Nu,Wu.sideway),(0,Et.f)(du,$_,Nu),(0,Et.n)(du,du),O[0]=Nu[0],O[1]=du[0],O[2]=$_[0],O[3]=Nu[1],O[4]=du[1],O[5]=$_[1],O[6]=Nu[2],O[7]=du[2],O[8]=$_[2],O}_upAtLookAt(v,O){return this.viewingMode===dn.JY.Local?(0,Et.c)(O,Wu.upward):(0,Et.n)(O,v)}_eyeUpToPitch(v){return Math.PI-(0,Ec.EU)(Wu.upward,v)}_eyeUpToYaw(v,O){const A=NI;return Math.abs(O[2])<.5?((0,Et.c)(A,O),v[2]>0&&(0,Et.g)(A,A,-1)):(0,Et.c)(A,v),(0,Et.f)(du,A,Wu.upward),(0,Et.n)(du,du),(0,Ec.EU)(Wu.sideway,du,Wu.upward)}}var qn=T(59856);const Ev_minDuration=(0,ro.HA)(500),Ev_maxDuration=(0,ro.HA)(8e3);class ub{constructor(v){this.createCamera=v,this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0},this.settings={desiredScreenFlow:2},this.source=v(),this.target=v()}clone(){const v=new ub(this.createCamera);return v.copyFrom(this),v}copyFrom(v){this.update(v.source,v.target,v.settings)}update(v,O,A){this.source!==v&&this.source.copyFrom(v),this.target!==O&&this.target.copyFrom(O),this.compared=this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=null!=A.desiredScreenFlow?A.desiredScreenFlow:2,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(v){const O=this.target.pixelsPerPanAtZoom(v);return this.halfWindowSize/O}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>1e-9}get hasRotate(){return this.compared.rotate>1e-9}}class WI{constructor(){this.segments=[]}get time(){return this.segments.reduce((v,O)=>(0,ro._H)(v+O.time),(0,ro._H)(0))}interpolateComponentsAt(v,O){v=Math.min(Math.max(v,0),1),v*=this.time;let A=0,j=0;const te=this.definition;for(let pe=0;pe<this.segments.length;pe++){const be=this.segments[pe],Re=be.definition;if(v<=be.time||pe===this.segments.length-1){(O=this.segmentInterpolateComponentsAt(be,v/be.time,O)).pan=te.hasPan?(A+Re.compared.pan*O.pan)/te.compared.pan:1,O.rotate=te.hasRotate?(j+Re.compared.rotate*O.rotate)/te.compared.rotate:1;const Ge=O.zoom*(Re.compared.targetZoom-Re.compared.sourceZoom)+Re.compared.sourceZoom,tt=this.segments[0].definition.compared.sourceZoom,ft=this.segments[this.segments.length-1].definition.compared.targetZoom;return O.zoom=te.hasZoom?(Ge-tt)/(ft-tt):1,O}v-=be.time,A+=Re.compared.pan,j+=Re.compared.rotate}}segmentInterpolateComponentsAt(v,O,A){return v.interpolateComponentsAt(O,A)}}class db{constructor(v){v&&this.update(v)}get time(){return this._time}update(v){v&&(this.definition?this.definition.copyFrom(v):this.definition=v.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const v=this.definition,O=v.compared,A=O.sourceZoom,j=O.targetZoom;this._zoomSign=A>j?1:-1,this._panPixelsAtSource=O.pan*v.source.pixelsPerPanAtZoom(A);const te=(v.source.pixelsPerRotateAtZoom(A)+v.target.pixelsPerRotateAtZoom(j))/2;this._rotatePixels=O.rotate*te}_updatePixelFlow(){const v=this.definition.compared.sourceZoom,O=this.definition.compared.targetZoom,{hasZoom:A,hasPan:j,hasRotate:te}=this.definition;let pe=0,be=0;A&&(j&&(pe=(O/v-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),te&&(be=this._zoomSign*(Math.log(v/O)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const Re=this.definition.desiredPixelFlow;if(A&&j&&te){const Ge=pe+be+pe*be;this._zoomPixelFlow=pe*be/Ge*Re,this._panPixelFlow=be/Ge*Re,this._rotatePixelFlow=pe/Ge*Re}else if(A&&j){const Ge=1+pe;this._zoomPixelFlow=pe/Ge*Re,this._panPixelFlow=1/Ge*Re}else if(A&&te){const Ge=1+be;this._zoomPixelFlow=be/Ge*Re,this._rotatePixelFlow=1/Ge*Re}else if(j&&te){const Ge=this._panPixelsAtSource/this._rotatePixels,tt=1+Ge;this._panPixelFlow=Ge/tt*Re,this._rotatePixelFlow=1/tt*Re}else j?this._panPixelFlow=Re:A?this._zoomPixelFlow=Re:te&&(this._rotatePixelFlow=Re);this._time=te?this.rotateTime:A?this.zoomTime:j?this.panTime:(0,ro._H)(0)}get rotateTime(){return(0,ro._H)(this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0)}get zoomTime(){return(0,ro._H)(this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0)}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const v=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return(0,ro._H)(Math.log(v*this._panPixelsAtSource*(this._zoomPixelFlow/this._panPixelFlow)+1)/(v*this._zoomPixelFlow))}return(0,ro._H)(this._panPixelsAtSource/this._panPixelFlow)}return(0,ro._H)(0)}_interpolateComponentsZoom(v){if(0===v||1===v)return v;if(this.definition.hasZoom){const O=this.definition.compared.sourceZoom,A=this.definition.compared.targetZoom;return(O*(O/A)**-v-O)/(A-O)}return v}_interpolateComponentsPan(v){if(0===v||1===v)return v;if(this.definition.hasPan&&this.definition.hasZoom){const O=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(O*v*this._time)-1))/(O*Math.LN2)}return v}_interpolateComponentsRotate(v){return v}interpolateComponentsAt(v,O){v=Math.min(Math.max(v,0),1);const A=this._interpolateComponentsZoom(v),j=this._interpolateComponentsPan(v),te=this._interpolateComponentsRotate(v);return O?(O.zoom=A,O.pan=j,O.rotate=te):O={zoom:A,pan:j,rotate:te},O}}function VI(d,v,O){const j=d.halfWindowPanAtZoom(v-d.compared.sourceZoom);return-d.halfWindowSize*(O.ascensionFactor*Math.LN2*d.compared.pan+j)*Math.log(d.compared.sourceZoom/v)/(d.desiredPixelFlow*Math.LN2*j)}function zI(d,v,O){const A=1/v,j=Math.log(d.compared.sourceZoom*A),te=1/d.desiredPixelFlow,pe=1/Math.LN2,be=v-d.compared.sourceZoom,Re=1/be,Ge=(O.ascensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(be))/d.halfWindowPanAtZoom(1);return d.halfWindowSize*A*te*pe*Re*Ge-d.halfWindowSize*j*te*pe*Re+d.halfWindowSize*j*te*pe*Ge/(be*be)}function HI(d,v,O){const A=v-d.compared.sourceZoom,j=1/A,te=1/v,pe=Math.log(d.compared.sourceZoom*te),be=(O.ascensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(A))/d.halfWindowPanAtZoom(1);return d.halfWindowSize*j*(-2*j*te*be+2*j*pe+2*te-2*pe*be/(A*A)-be/(v*v))/(d.desiredPixelFlow*Math.LN2)}function GI(d,v){return-d.halfWindowSize*Math.log(d.compared.sourceZoom/v)/(d.desiredPixelFlow*Math.LN2)}function KI(d,v){return d.halfWindowSize/(v*d.desiredPixelFlow*Math.LN2)}function YI(d,v){return-d.halfWindowSize/(v*v*d.desiredPixelFlow*Math.LN2)}function JI(d,v,O){return d.halfWindowSize*(-d.halfWindowPanAtZoom(v)-O.descensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(d.compared.targetZoom))*Math.log(v/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2*d.halfWindowPanAtZoom(-v+d.compared.targetZoom))}function XI(d,v,O){const A=Math.log(v/d.compared.targetZoom),j=1/d.desiredPixelFlow,te=1/Math.LN2,pe=-v+d.compared.targetZoom,be=1/pe,Re=(-d.halfWindowPanAtZoom(v)-O.descensionFactor*Math.LN2*d.compared.pan+d.halfWindowPanAtZoom(d.compared.targetZoom))/d.halfWindowPanAtZoom(1);return-d.halfWindowSize*A*j*te*be+d.halfWindowSize*A*j*te*Re/(pe*pe)+d.halfWindowSize*j*te*be*Re/v}function QI(d,v,O){const A=v-d.compared.targetZoom,j=1/A,te=1/v,pe=Math.log(v/d.compared.targetZoom),be=(d.halfWindowPanAtZoom(v)+O.descensionFactor*Math.LN2*d.compared.pan-d.halfWindowPanAtZoom(d.compared.targetZoom))/d.halfWindowPanAtZoom(1);return d.halfWindowSize*j*(-2*j*te*be-2*j*pe+2*te+2*pe*be/(A*A)-be/(v*v))/(d.desiredPixelFlow*Math.LN2)}function qI(d,v){return d.halfWindowSize*Math.log(v/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2)}function eU(d,v){return d.halfWindowSize/(v*d.desiredPixelFlow*Math.LN2)}function tU(d,v){return-d.halfWindowSize/(v*v*d.desiredPixelFlow*Math.LN2)}class nU extends WI{constructor(v,O){super(),this._preallocSegments=[new db,new db,new db],this.update(v,O)}update(v,O){if(!v)return;this.definition?this.definition.copyFrom(v):this.definition=v.clone();let A=null;O&&O.apex&&(A=function sU(d,v){let O=function iU(d,v){const O=Math.max(d.compared.sourceZoom,d.compared.targetZoom),A=d.source.zoomAtPixelsPerPan(d.desiredPixelFlow/d.compared.pan)/2;return A<O?null!=v.maximumDistance?O+(v.maximumDistance-O)/2:1.5*O:v.maximumDistance?Math.min(v.maximumDistance,A):A}(d,v);const A={ascensionFactor:null!=v.ascensionFactor?v.ascensionFactor:.5,descensionFactor:null!=v.descensionFactor?v.descensionFactor:.5},j=0===A.ascensionFactor,te=0===A.descensionFactor,pe=j?GI:VI,be=j?KI:zI,Re=j?YI:HI,Ge=te?qI:JI,tt=te?eU:XI,ft=te?tU:QI,yt=pr=>pe(d,pr,A)+function ZI(d,v,O){return-d.compared.pan*d.halfWindowSize*(O.ascensionFactor+O.descensionFactor-1)/(d.desiredPixelFlow*d.halfWindowPanAtZoom(v))}(d,pr,A)+Ge(d,pr,A),Nt=pr=>Re(d,pr,A)+function $I(d,v,O){return-2*d.compared.pan*d.halfWindowSize*(O.ascensionFactor+O.descensionFactor-1)/(d.desiredPixelFlow*d.halfWindowPanAtZoom(v*v*v))}(d,pr,A)+ft(d,pr,A);let Rt=yt(O);const Jt=function rU(d){const v=Math.LN2*d.compared.pan,A=d.halfWindowPanAtZoom(d.compared.sourceZoom-d.compared.targetZoom),j=d.halfWindowSize*Math.log(d.compared.sourceZoom/d.compared.targetZoom)/(d.desiredPixelFlow*Math.LN2*A);return d.compared.sourceZoom<=d.compared.targetZoom?j*(v-A):j*(v+A)}(d);let jt;const ir=v.maximumIterations||20,or=null!=v.maximumDistance?v.maximumDistance:1/0;for(jt=0;jt<ir;jt++){const Lr=(be(d,pr=O,A)+function kI(d,v,O){return d.compared.pan*d.halfWindowSize*(O.ascensionFactor+O.descensionFactor-1)/(d.desiredPixelFlow*d.halfWindowPanAtZoom(v*v))}(d,pr,A)+tt(d,pr,A)+1e-6)/Nt(O);if(isNaN(Lr)||O>=or&&Lr<0){if(!isFinite(or))return null;O=or,Rt=yt(O);break}if(O-=Lr,O<d.compared.sourceZoom||O<d.compared.targetZoom)return null;const Br=yt(O);if(Math.abs(Br-Rt)/Rt<=.005)break;Rt=Br}var pr;return Rt>.7*Jt||O<d.compared.sourceZoom||O<d.compared.targetZoom?null:O}(v,O.apex)),this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,null==A?this._updateWithoutApex():this._updateWithApex(A,O.apex)}segmentInterpolateComponentsAt(v,O,A){return A=v.interpolateComponentsAt(O,A),v===this._ascensionSegment?A.zoom=sb(A.zoom):v===this._descensionSegment&&(A.zoom=vv(A.zoom)),A}_updateWithApex(v,O){const[A,j,te]=this._preallocSegments,pe=null!=O.ascensionFactor?O.ascensionFactor:.5,be=Math.min(1-pe,null!=O.ascensionFactor?O.descensionFactor:.5),Re=1-pe-be;A.definition?A.definition.copyFrom(this.definition):A.definition=this.definition.clone(),A.definition.compared.targetZoom=v,A.definition.compared.pan=this.definition.compared.pan*pe,A.definition.compared.rotate=this.definition.compared.rotate*pe,A.update(),this._ascensionSegment=A,this.segments.push(A),Re>0&&(j.definition?j.definition.copyFrom(this.definition):j.definition=this.definition.clone(),j.definition.copyFrom(this.definition),j.definition.compared.sourceZoom=v,j.definition.compared.targetZoom=v,j.definition.compared.pan=this.definition.compared.pan*Re,j.definition.compared.rotate=this.definition.compared.rotate*Re,j.update(),this.segments.push(j)),te.definition?te.definition.copyFrom(this.definition):te.definition=this.definition.clone(),te.definition.compared.sourceZoom=v,te.definition.compared.pan=this.definition.compared.pan*be,te.definition.compared.rotate=this.definition.compared.rotate*be,te.update(),this._descensionSegment=te,this.segments.push(te)}_updateWithoutApex(){const[v]=this._preallocSegments;v.update(this.definition),this.segments.push(v)}}const oU={zoom:0,pan:0,rotate:0};class aU{constructor(v){this.createCamera=v,this._time=(0,ro.HA)(0),this.definition=new ub(v),this.path=new nU}get time(){return this._time}update(v,O,A){this.definition.update(v,O,A),this.path.update(this.definition,A),this._time=this._applyTimeSettings((0,ro.up)(this.path.time),A),this._easing=A.easing?A.easing:this._time>=1e3?pD:_g}cameraAt(v,O){O=O||this.createCamera(),v=Math.min(Math.max(0,v),1),v=this._normalizedEasing(v);const A=this.path.interpolateComponentsAt(v,oU);return O.interpolate(this.definition.source,this.definition.target,A),O}_normalizedEasing(v){const O=this._easing(0,this._time),A=this._easing(1,this._time);return(this._easing(v,this._time)-O)/(A-O)}_applyTimeSettings(v,O){const A=null!=O.speedFactor?O.speedFactor:1;null!=O.duration?v=O.duration:null!=O.speedFactor&&(v=(0,ro.HA)(v/A));const te=null!=O.maxDuration?O.maxDuration:Ev_maxDuration/A;return(0,ro.HA)(Math.min(Math.max(null!=O.minDuration?O.minDuration:Ev_minDuration/A,v),te))}}const lU=(0,br.c)();class cU{constructor(v){this.currentTime=(0,ro.HA)(0),this._animation=new aU(()=>new mD(v)),this._current=new mD(v)}get finished(){return this.currentTime>=this._animation.time}get time(){return this._animation.time}update(v,O,A){const j=this._animation.definition.source,te=this._animation.definition.target,pe=(0,Et.b)(lU,O.center,v.center),be=(0,Et.l)(pe);be>=1e-5?(pe[0]/=be,pe[1]/=be,pe[2]/=be):(pe[0]=0,pe[1]=1,pe[0]=0),(0,Et.c)(j.lookAtDirection,pe),(0,Et.c)(te.lookAtDirection,pe),j.copyFromRenderCamera(v),te.copyFromRenderCamera(O),this._current.copyFrom(j),this._animation.update(j,te,A),this.currentTime=(0,ro.HA)(0),v.almostEquals(O)&&(this.currentTime=this._animation.time)}cameraAt(v,O){return this._animation.cameraAt(v,this._current),O=O||new qn.V,this._current.copyToRenderCamera(O),O}step(v,O){return this.finished||(this.currentTime=(0,ro.HA)(this.currentTime+(0,ro.up)(v)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,O)}}var Jo;!function(d){d.Ready="ready",d.Rejected="rejected",d.Running="running",d.Stopped="stopped",d.Finished="finished"}(Jo||(Jo={}));let p0=class extends Li.Z{constructor(){super(...arguments),this.state=Jo.Ready}get active(){return this.state===Jo.Running}get isInteractive(){return!1}get canStop(){return!1}stopController(){return!!this.canStop&&(this.state=Jo.Stopped,!0)}finishController(){this.state=Jo.Finished}get steppingFinished(){return!1}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],p0.prototype,"active",null),(0,Je._)([(0,ht.Cb)()],p0.prototype,"state",void 0),p0=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.CameraController")],p0);let pg=class extends p0{get canStop(){return!0}set asyncResult(d){this._asyncResult&&(this._asyncResult.reject((0,fi.zE)()),this._asyncResult=null),this.state===Jo.Finished||this.state===Jo.Stopped?this.state===Jo.Finished?d.resolve():d.reject((0,fi.zE)()):this._asyncResult=d}get asyncResult(){return this._asyncResult}onControllerStart(){this.state=Jo.Running,(0,at.pC)(this.viewAnimation)&&this.viewAnimation.when(()=>this.updateStateFromViewAnimation(),()=>this.updateStateFromViewAnimation())}updateStateFromViewAnimation(){!(0,at.pC)(this.viewAnimation)||this.state!==Jo.Ready&&this.state!==Jo.Running||(this.viewAnimation.state===rf.State.FINISHED?this.finish():this.viewAnimation.state===rf.State.STOPPED&&(this.state=Jo.Stopped))}onControllerEnd(){(0,at.pC)(this.viewAnimation)&&!this.viewAnimation.done&&(this.state===Jo.Finished?this.viewAnimation.finish():this.state===Jo.Stopped&&this.viewAnimation.stop()),this._asyncResult&&(this.state===Jo.Finished?this._asyncResult.resolve():this._asyncResult.reject((0,fi.zE)()))}finish(){this.finishController()}};pg=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.AnimationController")],pg);let Xh=class extends pg{constructor(d){super(d),this.view=null,this.mode="interaction",this.hasTarget=!1}get intersectionHelper(){return this.view.sceneIntersectionHelper}initialize(){this.animation=new cU(this.view.state.viewingMode),this.viewAnimation="interaction"===this.mode?null:new rf}get isInteractive(){return"interaction"===this.mode}begin(d,v){this.hasTarget=!0;const O=this.animationSettings(v);Mv.copyFrom(this.view.state.camera);const A=(0,oc.Z8)(this.view.state.viewingMode);this.intersectionHelper.intersectRay(Mv.ray,A,gD)&&(Mv.center=gD),this.animation.update(Mv,d,O),this.animation.finished&&this.finish()}finish(){this.animation.currentTime=this.animation.time,super.finish()}get steppingFinished(){return this.hasTarget&&this.animation.finished}stepController(d,v){this.hasTarget&&this.animation.step(d,v)}onControllerEnd(d){this.hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,d),this.animation.currentTime=this.animation.time),super.onControllerEnd(d)}animationSettings(d={}){return{apex:{maximumDistance:this.view.state.constraints.clampAltitude(1/0)/6,ascensionFactor:void 0,descensionFactor:void 0},...d,easing:"string"==typeof d.easing?RI[d.easing]:d.easing}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Xh.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Xh.prototype,"mode",void 0),Xh=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.PointToPointAnimationController")],Xh);const Mv=new qn.V,gD=(0,br.c)();var Ro=T(90014),_h=T(26046);function hb(d,v,O,A){const j=(0,_h.iE)(v,O,uU);return(0,qo.h)(d,j,A)}const uU=(0,Fu.Ue)();var vf;!function(d){d[d.Ellipsoid=0]="Ellipsoid",d[d.Silhouette=1]="Silhouette"}(vf||(vf={}));const bv=[1,3e8];function f0(d,v,O){return O[0]=v[0]/(d.fullWidth/d.pixelRatio),O[1]=v[1]/(d.fullHeight/d.pixelRatio),O}function _b(d){for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;return d}function J_(d,v,O){const A=(0,on.d)(Lo.MP.get(),O[3],O);(0,at.Wi)(A)||((0,Et.b)(fo,d.eye,v),(0,Et.m)(fo,fo,A),d.eye=(0,Et.a)(fo,fo,v),(0,Et.b)(fo,d.center,v),(0,Et.m)(fo,fo,A),d.center=(0,Et.a)(fo,fo,v),d.up=(0,Et.m)(fo,d.up,A))}function pb(d,v,O,A){return(0,Ro.BR)(d,(0,_h.iE)(v,O,yb),A)}function fb(d,v,O,A){const j=Lo.WM.get();let te=1-O;(0,Et.b)(j,v,d.eye);const pe=(0,Et.l)(j);let be=pe*(1-te);te>=0&&be<A&&(be=A,te=-(be-pe)/pe),Math.abs(pe-be)<1e-6||((0,Et.g)(j,j,te),d.eye=(0,Et.a)(fo,d.eye,j),d.center=(0,Et.h)(fo,d.center,v,te))}function ED(d,v,O){v.getScreenCenter(MD),hb(d,v,MD,fo)&&(v.center=fo);const A=v.distance,j=A*O;if(Math.abs(A-j)<1e-6)return;const te=(0,Et.g)(Lo.WM.get(),v.viewForward,j);v.eye=(0,Et.b)(fo,v.center,te)}const MD=(0,rn.s1)();function Tv(d,v){(0,Et.s)(v,0,0,0);for(const O of d)(0,Et.a)(v,v,O);(0,Et.g)(v,v,1/d.length)}function Cv(d,v,O,A){return Math.sin(d/(0,Et.l)(v))*(O+A.radius)}function bD(d,v,O,A){return Cv(Math.PI/2,v,O,A)+(d-Math.PI/2)}var El;!function(d){d[d.Vertical=0]="Vertical",d[d.Horizontal=1]="Horizontal"}(El||(El={}));const TD_Angle=(0,cs.Vl)(6),fg={Pole:.95,Angle:(0,cs.Vl)(18),Tilt:45},CD=(0,cs.Vl)(80);function OD(d,v,O,A,j,te){const pe=(0,br.c)(),be=(0,qo.c)();let Re=!0,Ge=!0;return d.intersectScreen(O,pe,te)?be[3]=(0,Et.l)(pe):(Ge=!1,be[3]=v.aboveGround&&j!==vf.Ellipsoid?Math.max((0,Et.l)(v.center),.9*A.radius):(0,Et.l)(v.eye)-v.relativeElevation,j===vf.Silhouette?mg(be,v,O,pe):Re=hb(be,v,O,pe)),{sphere:be,scenePickPoint:Re?pe:null,hasGeometryIntersection:Ge}}function Ov(d,v,O,A){return(0,Et.l)(d.eye)-A.radius>3e4?El.Horizontal:O?((0,_h.iE)(d,v,WD),-Math.sign(d.relativeElevation)*(.5*Math.PI+(0,jM.EU)(d.eye,WD.direction))<TD_Angle?El.Vertical:El.Horizontal):El.Vertical}function PD(d,v,O){(0,Et.b)(mb,O,v),d.eye=(0,Et.b)(fo,d.eye,mb),d.center=(0,Et.b)(fo,d.center,mb)}const mb=(0,br.c)();function mg(d,v,O,A){const j=(0,_h.iE)(v,O,yb);return!((0,at.Wi)(j)||((0,qo.j)(d,j,Pv),(0,qo.h)(d,j,A)?(0,Et.d)(Pv,j.origin)<(0,Et.d)(A,j.origin)&&((0,Et.c)(A,Pv),1):((0,Et.b)(Ef,v.eye,v.center),(0,Et.n)(Ef,Ef),(0,Ro.Oy)(Ef,-(0,Et.e)((0,Et.n)(Ef,Ef),Pv),DD),(0,Ro.BR)(DD,j,A),1)))}const Pv=(0,br.c)(),Ef=(0,br.c)(),DD=(0,Ro.Ue)();function xD(d,v,O,A,j,te){let pe;if((0,Et.f)(Iv,d,v),(0,Et.b)(wv,d,v),(0,Et.l)(d)<=j||!A.aboveGround){(0,Et.f)(O,wv,A.eye);const be=(0,Et.e)(d,v)/((0,Et.l)(d)*(0,Et.l)(v)),Re=Math.cos((0,cs.uZ)(ic.Q4.normalize((0,cs.Vl)(te)),0,CD));pe=-(0,cs.ZF)(be)-Math.max(0,(0,Et.l)(v)-j)/(Re*j)}else(0,Et.b)(SD,A.eye,A.center),(0,Et.f)(O,wv,SD),pe=-(0,Et.l)(wv)/j;return(0,Et.n)(O,O),(0,Et.g)(O,O,(0,Et.l)(Iv)),pe}const SD=(0,br.c)();function AD(d,v,O,A){let j,te;const pe=Math.cos((0,cs.uZ)(ic.Q4.normalize((0,cs.Vl)(A)),0,CD));return j=v>O?-(v-O)/(pe*O):v<-O?Math.PI-(v+O)/(pe*O):(0,cs.ZF)(v/O),te=d>O?-(d-O)/(pe*O):d<-O?Math.PI-(d+O)/(pe*O):(0,cs.ZF)(d/O),(te-j)*O}function LD(d,v,O,A,j,te,pe,be,Re,Ge){(0,Et.f)(Iv,d,v),(0,Q0.Tz)(te.up,te.eye,Dv,xv,Sv),(0,Q0.Tz)([0,0,1],te.eye,Qh,X_,UD),(0,Et.c)(O,X_),(0,Et.c)(A,Qh),(0,Et.n)(O,O),(0,Et.g)(O,O,(0,Et.l)(Iv)),(0,Q0.yS)(d,(0,Et.n)(xv,xv),(0,Et.n)(Sv,Sv),(0,Et.n)(Dv,Dv),BD),(0,Q0.yS)(v,xv,Sv,Dv,jD),function hU(d,v,O,A,j,te,pe,be,Re,Ge){const tt=AD(d[2],v[2],pe[3],Re),ft=Ge?AD(d[0],v[0],pe[3],180):v[0]-d[0],yt=Math.sin(be)*ft-Math.cos(be)*tt,It=Math.cos(be)*ft+Math.sin(be)*tt;(0,Et.n)(fo,j);const Nt=Ge?yt/Math.sqrt(Math.abs(pe[3]**2-(0,Et.e)(O,fo)**2)):yt/pe[3],Rt=It/Math.sqrt(Math.abs(pe[3]**2-(0,Et.e)(O,A)**2));(0,Yi.a)(te,Nt,Rt)}(BD,jD,d,Qh,X_,j,pe,be,Re,Ge)}function _U(d,v,O,A,j,te,pe){(0,on.d)(Av,j,A),(0,on.d)(Lv,pe,te),(0,on.m)(Mf,Av,Lv),(0,Et.b)(v,d,O),(0,Et.m)(v,v,Mf),(0,Et.a)(v,v,O)}function wD(d,v,O,A,j,te){(0,on.d)(Av,A,O),(0,on.d)(Lv,te,j),(0,on.m)(Mf,Av,Lv),(0,Et.b)(fo,d.eye,v),(0,Et.m)(fo,fo,Mf),d.eye=(0,Et.a)(fo,fo,v),(0,Et.b)(fo,d.center,v),(0,Et.m)(fo,fo,Mf),d.center=(0,Et.a)(fo,fo,v),(0,Et.b)(fo,d.up,v),(0,Et.m)(fo,fo,Mf),d.up=(0,Et.a)(fo,fo,v)}function gb(d,v,O,A,j,te,pe=fg.Pole,be=fg.Angle){const Re=Math.abs(A)>Math.PI-be||Math.abs(A)<be,Ge=Math.abs(d[2])<O*pe||Math.abs(v)>O;return!!(Re&&Ge&&te.aboveGround&&j<fg.Tilt)}function RD(d,v,O,A,j,te){if(te)sg(O,A,FD),J_(v,d,FD);else{const pe=xD(O,A,ND,v,d[3],j);J_(v,d,rg(ND,pe))}}function ID(d,v,O,A,j,te,pe){const be=pe?20:1;let Ge,tt;(0,Et.c)(m0,A),Rv.copyFrom(v);for(let ft=0;ft<be&&(0,Et.d)(O,m0)>1e-12&&(Ge=(0,Et.d)(O,m0),LD(O,m0,X_,Qh,gg,Rv,d,j,te,pe),wD(Rv,d,Qh,gg[1],X_,gg[0]),_U(m0,m0,d,Qh,gg[1],X_,gg[0]),tt=(0,Et.d)(O,m0),tt<Ge||0===ft);ft++)v.copyFrom(Rv)}const Qh=(0,br.c)(),X_=(0,br.c)(),UD=(0,br.c)(),Dv=(0,br.c)(),xv=(0,br.c)(),Sv=(0,br.c)(),BD=(0,br.c)(),jD=(0,br.c)(),gg=(0,po.a)(),FD=kh(),Av=(0,ao.c)(),Lv=(0,ao.c)(),Mf=(0,ao.c)(),m0=(0,br.c)(),fo=(0,br.c)(),wv=(0,br.c)(),Rv=new qn.V,Iv=(0,br.c)(),ND=(0,br.c)(),yb={origin:(0,br.c)(),direction:(0,br.c)()},WD={origin:(0,br.c)(),direction:(0,br.c)()};var Vu=T(40841);let Uv=class extends Xh{constructor(){super(...arguments),this.zoomLocation=(0,br.c)(),this.tmpCamera=new qn.V,this.tmpViewDir=(0,br.c)(),this.tmpRayDir={origin:(0,br.c)(),direction:(0,br.c)()},this.targetOnSphere=(0,br.c)(),this.tmpCenter=(0,br.c)(),this.constraintOptions={selection:wo.ALL_EXCEPT_COLLISION,interactionType:xn.ZOOM,interactionFactor:null,interactionStartCamera:new qn.V,interactionDirection:null,tiltMode:cl.TUMBLE},this.sphere=(0,qo.c)()}initialize(){this.intersector=(0,oc.Z8)(this.view.state.viewingMode)}zoomStep(d,v){if(!this.active)return;const O=this.view.state,{interactionStartCamera:A}=this.constraintOptions;this.animation.finished?A.copyFrom(O.camera):this.animation.cameraAt(1,A);let j=!1,te=!1;this.intersectionHelper.intersectScreen(v,this.zoomLocation,0===this.view.map.ground.opacity?MU:{})&&(j=d>0,te=!0),this.tmpCamera.copyFrom(O.camera),j?this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.intersector,this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter):this.intersectionHelper.intersectRay(this.tmpCamera.ray,this.intersector,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:(0,Et.c)(this.zoomLocation,this.tmpCamera.center),this._updateCamera(this.tmpCamera,d,this.zoomLocation,v,te),this.begin(this.tmpCamera)}animationSettings(){return{apex:null,duration:(0,ro.HA)(600),easing:_g}}_updateCamera(d,v,O,A,j){const pe=Ov(d,A,j,(0,Mo.Iu)(this.view.spatialReference));let be;this.view.camera.position.hasZ&&(be=Math.abs(this.view.camera.position.z)),(0,Et.n)(jv,d.eye),(0,Et.g)(jv,jv,-1),(0,_h.iE)(d,A,this.tmpRayDir),(0,Et.n)(this.tmpRayDir.direction,this.tmpRayDir.direction);const Re=Math.max(Math.min(12,1/Math.abs((0,Et.e)(jv,this.tmpRayDir.direction)))*be,200);if(pe===El.Horizontal){let Ge=.6**v;this.sphere[3]=(0,Et.l)(O),(0,Et.b)(this.tmpViewDir,d.center,d.eye);const tt=Math.min((0,Et.l)(this.tmpViewDir),Re);let ft=tt*Ge;if(Ge<=1&&ft<4&&(ft=4,Ge=ft/tt),Math.abs(tt-ft)<1e-6)return;const yt=(0,Et.l)(d.center);this.sphere[3]!==yt&&(d.center=(0,Et.g)(Bv,d.center,(this.sphere[3]+Ge*(yt-this.sphere[3]))/yt)),(0,Et.g)(this.tmpViewDir,this.tmpViewDir,-Ge),d.eye=(0,Et.a)(Bv,d.center,this.tmpViewDir),_a(this.view,d,this.constraintOptions),(0,Et.d)(O,d.center)>1e-12&&hb(this.sphere,d,A,this.targetOnSphere)&&function pU(d,v,O,A,j,te,pe){gb(O,(0,Et.e)(v.up,O),d[3],-ic.Q4.normalize((0,cs.Vl)(j)),te,v,fg.Pole,fg.Angle)?ID(d,v,O,A,-ic.Q4.normalize((0,cs.Vl)(j)),te,pe):RD(d,v,O,A,te,pe)}(this.sphere,d,O,this.targetOnSphere,this.view.camera.heading,this.view.camera.tilt,!0)}else{let Ge=.6**Math.abs(v);const tt=v>0?1:-1;(0,Et.b)(this.tmpViewDir,O,d.eye);const ft=(0,Et.l)(this.tmpViewDir),yt=this.view._stage.renderView.getMinimalDepthForArea(null,A[0],A[1],this.view.state.camera,60);let It=yt?Math.min(Re,yt):Re;It=j?Math.min(It,ft):It,(0,Et.g)(this.tmpRayDir.direction,this.tmpRayDir.direction,It),(0,Et.a)(O,this.tmpRayDir.origin,this.tmpRayDir.direction);let Nt=It*Ge;const Rt=Math.max(4,1.01*d.nearFar[0]);if(v>0&&Nt<Rt&&(Nt=Rt,Ge=Nt/It),Math.abs(It-Nt)<1e-6)return;(0,Et.g)(this.tmpRayDir.direction,this.tmpRayDir.direction,tt*(1-Ge)),d.eye=(0,Et.a)(Bv,d.eye,this.tmpRayDir.direction),d.center=(0,Et.a)(Bv,d.center,this.tmpRayDir.direction)}yf(this.view,d)}};Uv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.global.ZoomStepController")],Uv);const Bv=(0,br.c)(),jv=(0,br.c)(),MU={exclude:new Set([Vu.cy])};let Fv=class extends Xh{constructor(){super(...arguments),this.zoomLocation=(0,br.c)(),this.tmpCamera=new qn.V,this.tmpRayDir=(0,br.c)(),this.tmpCenter=(0,br.c)(),this.constraintOptions={selection:wo.ALL,interactionType:xn.ZOOM,interactionFactor:null,interactionStartCamera:new qn.V,interactionDirection:null,tiltMode:cl.TUMBLE}}zoomStep(d,v){if(!this.active)return;const O=this.view.state,{interactionStartCamera:A}=this.constraintOptions;this.animation.finished?A.copyFrom(O.camera):this.animation.cameraAt(1,A),this.tmpCamera.copyFrom(O.camera);const j=(0,oc.Z8)(this.view.state.viewingMode);d>0?(0===this.view.map.ground.opacity?this.intersectionHelper.intersectScreenFreePointFallback(v,this.zoomLocation,xU):this.intersectionHelper.intersectScreenFreePointFallback(v,this.zoomLocation),this.intersectionHelper.intersectRay(this.tmpCamera.ray,j,this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter)):this.intersectionHelper.intersectRay(this.tmpCamera.ray,j,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:(0,Et.c)(this.zoomLocation,this.tmpCamera.center);const te=.6**d;let pe=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,v[0],v[1],this.view.state.camera,60);(0,Et.b)(Nv,this.tmpCamera.eye,this.zoomLocation),(0,Et.n)(Nv,Nv);const be=Math.max(Math.min(14,1/Math.abs((0,Et.e)(DU,Nv)))*Math.abs(this.view.camera.position.z),200);if(pe=pe?Math.min(pe,be):be,pe){const Re=(0,br.c)();(0,Et.b)(Re,this.zoomLocation,this.tmpCamera.eye),pe<(0,Et.l)(Re)&&((0,Et.n)(Re,Re),(0,Et.a)(this.zoomLocation,this.tmpCamera.eye,(0,Et.g)(Re,Re,pe)))}this._updateCamera(this.tmpCamera,te,this.zoomLocation),this.begin(this.tmpCamera)}animationSettings(){return{apex:null,duration:(0,ro.HA)(600),easing:_g}}_updateCamera(d,v,O){(0,Et.b)(this.tmpRayDir,O,d.eye);const A=(0,Et.l)(this.tmpRayDir);let j=A*v;const te=v<=1,pe=Math.max(4,1.01*d.nearFar[0]);te&&j<pe&&(j=pe,v=j/A),Math.abs(A-j)<1e-6||((0,Et.g)(this.tmpRayDir,this.tmpRayDir,v),d.eye=(0,Et.b)(zD,O,this.tmpRayDir),d.center=(0,Et.h)(zD,d.center,O,1-v),_a(this.view,d,this.constraintOptions))}};Fv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.local.ZoomStepController")],Fv);const zD=(0,br.c)(),DU=(0,br.f)(0,0,1),Nv=(0,br.c)(),xU={exclude:new Set([Vu.cy])};var Tc=T(35216);function Eb(d,v){if("touch"===d.pointerType)return!1;switch(v){case"primary":return 0===d.button;case"secondary":return 2===d.button;case"tertiary":return 1===d.button}}class AU extends Tc.a{constructor(v,O){super(!0),this.view=v,this.registerIncoming("double-click",O,A=>this._handleDoubleClick(A))}_handleDoubleClick(v){const O=v.data;if(function SU(d,v){switch(v){case"primary":return"touch"===d.pointerType||0===d.button;case"secondary":return"touch"!==d.pointerType&&2===d.button;case"tertiary":return"touch"!==d.pointerType&&1===d.button}}(O,"primary")){const A=this.view.state.isGlobal?new Uv({view:this.view,mode:"animation"}):new Fv({view:this.view,mode:"animation"});this.view.state.switchCameraController(A),A.zoomStep(Math.log(.5)/Math.log(.6),(0,rn.s1)(O.x,O.y)),v.stopPropagation()}}}let Q_=class extends p0{constructor(){super(...arguments),this.startCamera=new qn.V,this.currentCamera=new qn.V}get isInteractive(){return!0}stepController(d,v){v.copyViewFrom(this.currentCamera),this.currentCamera.copyFrom(v)}onControllerStart(d){this.state=Jo.Running,this.startCamera.copyFrom(d),this.currentCamera.copyFrom(d)}onControllerEnd(d){d.copyViewFrom(this.currentCamera)}};var hu;Q_=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.InteractiveController")],Q_),function(d){d[d.CENTER=0]="CENTER",d[d.EYE=1]="EYE"}(hu||(hu={}));let bf=class extends Q_{constructor(d){super(d),this.view=null,this.pivot=hu.CENTER,this.lastPoint=(0,po.a)(),this.tmpWorldUp=(0,br.c)(),this.tmpViewDir=(0,br.c)(),this.tmpRotCurPoint=(0,po.a)(),this.tmpTransf=(0,ao.c)(),this.tmpAxis=(0,br.c)(),this.tmpPivotPoint=(0,br.c)(),this.pivotPos=(0,br.c)(),this.constraintOptions={selection:wo.ALL,interactionType:xn.TUMBLE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE}}get intersectionHelper(){return this.view.sceneIntersectionHelper}initialize(){this.rotScale=this.pivot===hu.CENTER?3:1.5}begin(d){if(this.active){switch(this.pivot){case hu.EYE:(0,Et.c)(this.pivotPos,this.startCamera.eye),this.constraintOptions.interactionType=xn.LOOK_AROUND,this.constraintOptions.tiltMode=cl.LOOK_AROUND,this.constraintOptions.selection=wo.NONE;break;case hu.CENTER:{const v=this.intersectionHelper.intersectRayFreePointFallback(this.startCamera.ray,this.pivotPos);v||(0,Et.c)(this.pivotPos,this.startCamera.center),this._constrainPivotPoint(d,v),this.startCamera.center=this.pivotPos,this.constraintOptions.interactionType=xn.TUMBLE,this.constraintOptions.tiltMode=cl.TUMBLE,this.constraintOptions.selection=wo.ALL&~wo.DISTANCE;break}}this.constraintOptions.interactionStartCamera=this.startCamera,f0(this.startCamera,d,this.lastPoint)}}_constrainPivotPoint(d,v){const O=this.startCamera,A=(0,br.c)();(0,Et.b)(A,this.pivotPos,O.eye);const j=(0,Et.l)(A);let te=Math.min(j,7*Math.abs(this.view.camera.position.z));const pe=(0,Mo.Iu)(this.view.spatialReference),be=(0,rn.s1)(O.width/O.pixelRatio*.5,O.height/O.pixelRatio*.5),Re=Ov(this.startCamera,be,!0,pe);let Ge=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,O.fullWidth/O.pixelRatio*.5,O.fullHeight/O.pixelRatio*.5,O,225,90),tt=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,d[0],d[1],O,90);void 0===Ge&&void 0===tt||(Ge=void 0===Ge?tt:Ge,tt=void 0===tt||Re===El.Horizontal?Ge:tt,te=Ge>tt?tt:Ge,te=v?Math.min(te,j):te),(0,Et.n)(A,A),(0,Et.c)(this.pivotPos,(0,Et.a)(this.tmpPivotPoint,O.eye,(0,Et.g)(this.tmpPivotPoint,A,te)))}update(d){if(this.active){switch(this.pivot){case hu.EYE:this.currentCamera.center=this._applyRotation(this.currentCamera,d,this.currentCamera.center,this.pivotPos);break;case hu.CENTER:this.currentCamera.center=this.pivotPos,this.currentCamera.eye=this._applyRotation(this.currentCamera,d,this.currentCamera.eye,this.pivotPos)}_a(this.view,this.currentCamera,this.constraintOptions)}}end(){this.active&&this.finishController()}_applyRotation(d,v,O,A){this.view.renderCoordsHelper.worldUpAtPosition(A,this.tmpWorldUp),f0(d,v,this.tmpRotCurPoint);let j=(this.lastPoint[1]-this.tmpRotCurPoint[1])*this.rotScale,te=(this.tmpRotCurPoint[0]-this.lastPoint[0])*this.rotScale;(0,Et.b)(this.tmpViewDir,O,A);const pe=(0,Et.l)(this.tmpViewDir),be=(0,cs.ZF)((0,Et.e)(this.tmpViewDir,this.tmpWorldUp)/pe);if(this.pivot===hu.EYE){j*=-.5;const Re=.5*Math.PI-be,Ge=.5*Math.PI*.99;j=Re-Math.max(-Ge,Math.min(Ge,Re+j))}return j=(0,cs.uZ)(j+be,Il.min,Il.max)-be,(0,Et.f)(this.tmpAxis,d.up,this.tmpViewDir),this.pivot===hu.CENTER&&(te=-te),(0,on.d)(this.tmpTransf,te,this.tmpWorldUp),(0,on.e)(this.tmpTransf,this.tmpTransf,j,this.tmpAxis),(0,Et.m)(this.tmpViewDir,this.tmpViewDir,this.tmpTransf),d.up=(0,Et.m)(bb,d.up,this.tmpTransf),(0,Et.a)(bb,A,this.tmpViewDir),(0,Yi.c)(this.lastPoint,this.tmpRotCurPoint),bb}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],bf.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],bf.prototype,"pivot",void 0),bf=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.RotateController")],bf);const bb=(0,br.c)();class Tb extends Tc.a{constructor(v,O,A,j){super(!0),this.view=v,this.pointerAction=O,this.pivot=A,this.registerIncoming("drag",j,te=>this._handleDrag(te))}_handleDrag(v){const O=v.data;if(O.pointers.size>1||!Eb(v.data,this.pointerAction))return;const A=(0,rn.s1)(O.center.x,O.center.y);switch(O.action){case"start":this.cameraController&&(this.cameraController.end(),this.cameraController=null),this.cameraController=new bf({view:this.view,pivot:this.pivot}),this.view.state.switchCameraController(this.cameraController),this.cameraController.begin(A);break;case"update":this.cameraController&&this.cameraController.update(A);break;case"end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}v.stopPropagation()}}let Wv=class extends Q_{constructor(d){super(d),this.view=null,this.pickPoint=(0,br.c)(),this.tmpP0=(0,po.a)(),this.panAxisAngle=kh(),this.tmpRayDir=(0,br.c)(),this.tmpRayDirPick=(0,br.c)(),this.targetOnSphere=(0,br.c)(),this.tmpRay={origin:(0,br.c)(),direction:(0,br.c)()},this.dragBeginPoint=(0,rn.s1)(),this.normalizedAnchorPoint=(0,po.a)(),this.constraintOptions={selection:wo.ALL_EXCEPT_COLLISION,interactionType:xn.ZOOM,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE},this.sphere=(0,qo.c)(),this.hasPickPoint=!1}get intersectionHelper(){return this.view.sceneIntersectionHelper}begin(d){if(!this.active)return;(0,Yi.c)(this.dragBeginPoint,d),f0(this.startCamera,d,this.normalizedAnchorPoint);const v=(0,Mo.Iu)(this.view.spatialReference),O=OD(this.intersectionHelper,this.startCamera,d,v,vf.Ellipsoid,0===this.view.map.ground.opacity?wU:{});if(this.navMode=Ov(this.startCamera,d,O.hasGeometryIntersection,v),this.navMode===El.Horizontal)this.hasPickPoint=!!O.scenePickPoint,this.pickPoint=O.scenePickPoint,this.sphere=O.sphere;else{let A,j;(0,_h.iE)(this.startCamera,d,this.tmpRay),(0,Et.n)(this.tmpRay.direction,this.tmpRay.direction),O.scenePickPoint&&((0,Et.b)(this.tmpRayDirPick,this.startCamera.eye,O.scenePickPoint),j=(0,Et.l)(this.tmpRayDirPick)),this.view.camera.position.hasZ&&(A=Math.abs(this.view.camera.position.z));let te=(0,cs.uZ)(30*A,bv[0],bv[1]);const pe=this.view._stage.renderView.getMinimalDepthForArea(null,d[0],d[1],this.view.state.camera,70);te=pe?Math.min(te,pe):te,te=O.scenePickPoint?Math.min(te,j):te,this.hasPickPoint=!0,(0,Et.g)(this.tmpRay.direction,this.tmpRay.direction,te),(0,Et.a)(this.pickPoint,this.tmpRay.origin,this.tmpRay.direction)}this.constraintOptions.interactionStartCamera=this.startCamera}update(d){if(this.active){if(this.currentCamera.eye=this.startCamera.eye,this.currentCamera.center=this.startCamera.center,this.currentCamera.up=this.startCamera.up,this.navMode===El.Horizontal){(0,Et.b)(this.tmpRayDir,this.currentCamera.center,this.currentCamera.eye);const v=(0,Et.l)(this.tmpRayDir);f0(this.currentCamera,d,this.tmpP0);const O=12*(this.normalizedAnchorPoint[1]-this.tmpP0[1]);let A=v*2**O;const j=this.view.state.constraints.minimumPoiDistance;if(O<0&&A<j&&(A=j),Math.abs(v-A)<1e-6)return;if(this.hasPickPoint&&A<v){const te=1-(1-A/v)*(1-this.sphere[3]/(0,Et.l)(this.currentCamera.center));this.currentCamera.center=(0,Et.g)(Vv,this.currentCamera.center,te)}(0,Et.g)(this.tmpRayDir,this.tmpRayDir,-A/v),this.currentCamera.eye=(0,Et.a)(Vv,this.currentCamera.center,this.tmpRayDir),this.constraintOptions.interactionFactor=Wd(this.dragBeginPoint,d),_a(this.view,this.currentCamera,this.constraintOptions),this.hasPickPoint&&(mg(this.sphere,this.currentCamera,this.dragBeginPoint,this.targetOnSphere),sg(this.pickPoint,this.targetOnSphere,this.panAxisAngle),J_(this.currentCamera,this.sphere,this.panAxisAngle))}else{const v=(0,Et.l)(this.tmpRay.direction);f0(this.currentCamera,d,this.tmpP0);const O=12*(this.normalizedAnchorPoint[1]-this.tmpP0[1]);let A=v*2**O;const j=this.view.state.constraints.minimumPoiDistance;if(O<0&&A<j&&(A=j),Math.abs(v-A)<1e-6)return;(0,Et.g)(this.tmpRayDir,this.tmpRay.direction,1-A/v),this.currentCamera.eye=(0,Et.a)(Vv,this.currentCamera.eye,this.tmpRayDir),this.currentCamera.center=(0,Et.a)(Vv,this.currentCamera.center,this.tmpRayDir)}yf(this.view,this.currentCamera)}}end(){this.active&&this.finishController()}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Wv.prototype,"view",void 0),Wv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.global.ZoomController")],Wv);const Vv=(0,br.c)(),wU={exclude:new Set([Vu.cy])};let zv=class extends Q_{constructor(d){super(d),this.view=null,this.tmpP=(0,br.c)(),this.tmpDir=(0,br.c)(),this.tmpN=(0,br.c)(),this.tmpP0=(0,po.a)(),this.tmpPoi=(0,br.c)(),this.tmpRayDir=(0,br.c)(),this.dragBeginPoint=(0,rn.s1)(),this.normalizedAnchorPoint=(0,po.a)(),this.constraintOptions={selection:wo.ALL,interactionType:xn.ZOOM,interactionFactor:0,interactionStartCamera:null,interactionDirection:(0,br.c)(),tiltMode:cl.TUMBLE},this.plane=(0,Ro.Ue)()}get intersectionHelper(){return this.view.sceneIntersectionHelper}begin(d){if(!this.active)return;(0,Yi.c)(this.dragBeginPoint,d),f0(this.startCamera,d,this.normalizedAnchorPoint);const v=this.intersectionHelper.intersectScreenFreePointFallback(d,this.tmpP,0===this.view.map.ground.opacity?RU:{});(0,Et.b)(this.tmpDir,this.tmpP,this.startCamera.eye);const O=(0,Et.l)(this.tmpDir);let A;(0,Et.n)(this.tmpDir,this.tmpDir),this.view.camera.position.hasZ&&(A=Math.abs(this.view.camera.position.z));let j=(0,cs.uZ)(30*A,bv[0],bv[1]);const te=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,d[0],d[1],this.view.state.camera,70);j=te?Math.min(j,te):j,j=v?Math.min(j,O):j,(0,Et.g)(this.tmpDir,this.tmpDir,j),(0,Et.a)(this.tmpP,this.startCamera.eye,this.tmpDir),(0,Et.b)(this.tmpN,this.startCamera.eye,this.startCamera.center),(0,Et.n)(this.tmpN,this.tmpN),this.tmpN[1]<0&&(0,Et.o)(this.tmpN,this.tmpN),(0,Ro.Yq)(this.tmpP,this.tmpN,this.plane),this.constraintOptions.interactionStartCamera=this.startCamera}update(d){if(!this.active)return;(function dU(d,v,O,A){return(0,Ro.BR)(d,(0,_h.u4)(v,O,yb),A)})(this.plane,this.currentCamera,this.dragBeginPoint,this.tmpPoi)||(0,Et.c)(this.tmpPoi,this.currentCamera.center),f0(this.currentCamera,d,this.tmpP0);let v=4*(this.tmpP0[1]-this.normalizedAnchorPoint[1]);(0,Yi.c)(this.normalizedAnchorPoint,this.tmpP0),(0,Et.b)(this.tmpRayDir,this.tmpPoi,this.currentCamera.eye);const O=(0,Et.l)(this.tmpRayDir);let A=O*(1-v);(0,Et.c)(this.constraintOptions.interactionDirection,this.tmpRayDir),(0,Et.g)(this.constraintOptions.interactionDirection,this.constraintOptions.interactionDirection,Math.sign(v)/O);const j=this.view.state.constraints.minimumPoiDistance;v>=0&&A<j&&(A=j,v=-(A-O)/O),Math.abs(O-A)<1e-6||((0,Et.g)(this.tmpRayDir,this.tmpRayDir,v),this.currentCamera.eye=(0,Et.a)(g0,this.currentCamera.eye,this.tmpRayDir),(0,Et.h)(g0,this.currentCamera.center,this.tmpPoi,v),g0[2]=this.tmpPoi[2]>this.startCamera.center[2]?Math.max(this.startCamera.center[2],g0[2]):Math.min(this.startCamera.center[2],g0[2]),this.currentCamera.center=g0,this.constraintOptions.interactionFactor=Wd(this.dragBeginPoint,d),_a(this.view,this.currentCamera,this.constraintOptions))}end(){this.active&&this.finishController()}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],zv.prototype,"view",void 0),zv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.local.ZoomController")],zv);const g0=(0,br.c)(),RU={exclude:new Set([Vu.cy])};class IU extends Tc.a{constructor(v,O,A){super(!0),this.view=v,this.pointerAction=O,this.registerIncoming("drag",A,j=>this._handleDrag(j))}_handleDrag(v){const O=v.data;if(O.pointers.size>1||!Eb(v.data,this.pointerAction))return;const A=(0,rn.s1)(O.center.x,O.center.y);switch(O.action){case"start":this.cameraController&&(this.cameraController.end(),this.cameraController=null),this.cameraController=this.view.state.isGlobal?new Wv({view:this.view}):new zv({view:this.view}),this.view.state.switchCameraController(this.cameraController),this.cameraController.begin(A);break;case"update":this.cameraController&&this.cameraController.update(A);break;case"end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}v.stopPropagation()}}const UU=(0,br.c)(),Hv=(0,br.c)();function Cb(){return{direction:(0,br.c)(),up:(0,br.c)()}}function HD(d,v,O,A,j){let te=(0,Et.n)(UU,d),pe=(0,Et.e)(te,A);const be=pe>0;pe=Math.abs(pe),pe>.99&&(pe=Math.abs((0,Et.e)(v,A)),pe<.99?((0,Et.c)(te,v),be&&(0,Et.g)(te,te,-1)):te=null);let Re=0;if(te){(0,Et.g)(Hv,A,(0,Et.e)(A,te)),(0,Et.b)(te,te,Hv);const tt=(0,Et.e)(te,j)/((0,Et.l)(te)*(0,Et.l)(j));(0,Et.f)(Hv,te,j),Re=((0,Et.e)(Hv,A)>0?1:-1)*(0,cs.BV)((0,cs.ZF)(tt))}const Ge=(0,cs.BV)((0,cs.ZF)(-(0,Et.e)(A,d)/(0,Et.l)(d)));return O?(O.heading=Re,O.tilt=Ge,O):{heading:Re,tilt:Ge}}const GD=(0,br.f)(0,1,0),KD=(0,br.f)(0,0,1),yg=(0,ao.c)(),qh=(0,br.c)(),e_=(0,br.c)();function YD(d,v,O,A=Cb()){const{direction:j,up:te}=A;return(0,on.b)(yg,-(0,cs.Vl)(v)),(0,on.r)(yg,yg,(0,cs.Vl)(O)),(0,Et.m)(j,KD,yg),(0,Et.g)(j,j,-1),(0,Et.m)(te,GD,yg),A}function ZD(d,v,O,A,j){const te=d.renderSpatialReference,pe=d.map&&d.spatialReference||v.spatialReference;return(0,tn.KC)(v,qh,te),(0,tn.KC)(v,e_,te),qh[0]-=O/2,e_[0]+=O/2,qh[1]-=A/2,e_[1]+=A/2,(0,tn.SH)(qh,te,qh,pe),(0,tn.SH)(e_,te,e_,pe),j?(j.xmin=qh[0],j.ymin=qh[1],j.xmax=e_[0],j.ymax=e_[1],j.spatialReference=pe):j=new jc.Z(qh[0],qh[1],e_[0],e_[1],pe),j}const WU=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:YD,directionToHeadingTilt:function BU(d,v,O,A){return HD(v,O,A,KD,GD)},eyeForCenterWithHeadingTilt:function jU(d,v,O,A){const j=YD(0,O,A),te=(0,br.c)();return(0,Et.g)(te,j.direction,-v),(0,Et.a)(te,te,d),{up:j.up,eye:te,heading:O,tilt:A}},lookAtTiltToEyeTilt:function FU(d){return(0,cs.BV)(d)},eyeTiltToLookAtTilt:function NU(d){return(0,cs.Vl)(d)},toExtent:ZD},Symbol.toStringTag,{value:"Module"}));var ph=T(46367);const kD=(0,br.f)(0,0,1),$D=(0,Et.n)((0,br.c)(),(0,br.f)(1,1,1)),VU=new ic.pE(-180,180),vg=(0,ao.c)(),q_=(0,br.c)(),Tf=(0,br.c)();function JD(d,v,O,A=Cb()){(0,Et.f)(q_,d,kD),0===(0,Et.e)(q_,q_)&&(0,Et.f)(q_,d,$D),(0,on.d)(vg,-(0,cs.Vl)(v),d),(0,on.e)(vg,vg,-(0,cs.Vl)(O),q_);const{up:j,direction:te}=A;return(0,Et.f)(j,q_,d),(0,Et.n)(j,j),(0,Et.m)(j,j,vg),(0,Et.n)(te,d),(0,Et.o)(te,te),(0,Et.m)(te,te,vg),A}function Ob(d){const v=d[1];d[1]=-d[2],d[2]=v}function Pb(d,v){const O=JD(v,d.heading,d.tilt);return d.up=O.up,d}function XD(d,v,O,A,j){let te,pe,be,Re;const Ge=v.latitude,tt=(0,Mo.Iu)(d.spatialReference).radius,ft=v.longitude,yt=function M3(d,v,O){const A=v/O,j=(0,cs.Vl)(d),te=Math.sin(A/2),pe=Math.cos(j),be=2*(0,cs.Kt)(Math.sqrt(te*te/(pe*pe)));return(0,cs.BV)(be)}(Ge,O,tt)/2;te=ft-yt,pe=ft+yt;const It=(0,cs.Vl)(Ge),Nt=(1+Math.sin(It))/(1-Math.sin(It)),Rt=(Nt+1)*Math.tan(A/tt/2);function jt(or){const pr=Math.PI/2;return(or=ic.c5.normalize(or,-pr))>pr&&(or=Math.PI-or),or}if(be=1.5*Math.PI-2*Math.atan(.5*(Rt+Math.sqrt(4*Nt+Rt*Rt))),Re=be+A/tt,be=jt(be),Re=jt(Re),Re<be){const or=Re;Re=be,be=or}if(be=Math.max((0,cs.BV)(be),-90),Re=Math.min((0,cs.BV)(Re),90),pe=VU.monotonic(te,pe),pe-te>180){const or=(pe-te-180)/2;te+=or,pe-=or}const ir=d.spatialReference&&d.spatialReference.isGeographic?d.spatialReference:ba.Z.WGS84;return j?(j.xmin=te,j.ymin=be,j.xmax=pe,j.ymax=Re,j.spatialReference=ir):j=new jc.Z(te,be,pe,Re,ir),d.spatialReference&&d.spatialReference.isWebMercator&&(0,ph.$)(j,!1,j),j}const YU=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:JD,directionToHeadingTilt:function zU(d,v,O,A){const j=q_,te=Tf;return(0,Et.n)(j,d),(0,Et.f)(Tf,j,kD),0===(0,Et.e)(Tf,Tf)&&(0,Et.f)(Tf,j,$D),(0,Et.f)(te,Tf,j),HD(v,O,A,j,te)},eyeForCenterWithHeadingTilt:function HU(d,v,O,A){const j={eye:(0,br.c)(),up:null,tilt:A,heading:O},te=q_;te[0]=d[0],te[1]=d[2],te[2]=-d[1];const pe=v,be=(0,cs.Vl)(O),Re=(0,cs.Vl)(A),Ge=Math.sin(be),tt=Math.cos(be),ft=Math.sin(Re),yt=Math.cos(Re),It=(0,Et.l)(te);let Nt;if(Math.abs(Re)<1e-8)Nt=pe+It;else{const Ms=It/ft,ms=(0,cs.Kt)(pe/Ms),ws=Math.PI-Re-ms;Nt=Ms*Math.sin(ws)}const Rt=yt*pe,Jt=pe*pe*(ft*ft),jt=tt*tt*Jt,ir=Nt-Rt,or=ir*ir,pr=jt*(jt+or-te[1]*te[1]);if(pr<0)return(0,Et.g)(j.eye,te,Nt/It),j.tilt=0,j;const Lr=Math.sqrt(pr),Br=te[1]*ir,gs=jt+or;let Cs;if(Cs=tt>0?-Lr+Br:Lr+Br,Math.abs(gs)<1e-8)return It<1e-8?(j.eye[0]=0,j.eye[1]=0,j.eye[2]=pe):(0,Et.g)(j.eye,te,Nt/It),j.tilt=0,Ob(j.eye),Pb(j,d);j.eye[1]=Cs/gs;const Us=Ge*Ge*Jt,Ks=ft*pe,li=tt*Ks*j.eye[1],si=j.eye[1]*j.eye[1],Ei=1-si,ts=Math.sqrt(Ei),$s=jt*si+Us-2*li*ts*ir+Ei*or;return Math.abs($s)<1e-8?((0,Et.g)(j.eye,te,Nt/It),j.tilt=0,Ob(j.eye),Pb(j,d)):(j.eye[0]=(Ei*(Nt*te[0]-Rt*te[0])-Ks*ts*(te[0]*j.eye[1]*tt+te[2]*Ge))/$s,j.eye[2]=(Ei*(Nt*te[2]-Rt*te[2])-Ks*ts*(te[2]*j.eye[1]*tt-te[0]*Ge))/$s,(0,Et.g)(j.eye,j.eye,Nt),Ob(j.eye),Pb(j,d))},lookAtTiltToEyeTilt:function GU(d,v,O){const A=(0,Et.l)(v),j=Math.sqrt(O*O+A*A-2*O*A*Math.cos(Math.PI-d)),te=(0,cs.Kt)(O/(j/Math.sin(d)));return(0,cs.BV)(d-te)},eyeTiltToLookAtTilt:function KU(d,v,O){const A=(0,cs.Vl)(d),j=(0,Et.l)(v);return(0,cs.Kt)(O/(j/Math.sin(A)))+A},toExtent:XD},Symbol.toStringTag,{value:"Module"}));var Cf=T(53929),Db=T(86080);const QD=vo.Z.getLogger("esri.views.3d.support.cameraUtils"),r2=(0,br.c)(),Gv=(0,br.c)(),$U={heading:0,tilt:0},t_=new Eo.Z,JU=new ic.pE(-20037508.342788905,20037508.342788905),XU=new ic.pE(-180,180);var Fl;function Eg(d){return d.spatialReference||ba.Z.WGS84}function Of(d){return"global"===d.viewingMode?YU:WU}function r_(d,v){if((0,at.Wi)(v))return null;const O=d.renderSpatialReference,A=Of(d).headingTiltToDirectionUp,j=(0,br.c)();if(!(0,tn.KC)(v.position,j,O))return null;const te=A(j,v.heading,v.tilt);(0,Et.g)(te.direction,te.direction,d.state.camera.distance),(0,Et.a)(te.direction,te.direction,j);const pe=d0(d,j,te.direction,te.up);return pe.fov=(0,cs.Vl)(v.fov),pe}!function(d){d[d.LOCKED=0]="LOCKED",d[d.ADJUST=1]="ADJUST"}(Fl||(Fl={}));const Pf=(0,br.c)();function Df(d,v,O){const A=d.renderSpatialReference,j=Kv(d,v.eye,v.viewForward,v.up,$U);let te=Eg(d);return(0,tn.SH)(v.eye,A,Pf,te)||(te=ba.Z.WGS84,(0,tn.SH)(v.eye,A,Pf,te)),(0,at.Wi)(O)?new au(new Eo.Z(Pf,te),j.heading,j.tilt,(0,cs.BV)(v.fov)):(O.position.x=Pf[0],O.position.y=Pf[1],O.position.z=Pf[2],O.position.spatialReference=te,O.heading=j.heading,O.tilt=j.tilt,O.fov=(0,cs.BV)(v.fov),O)}function Sb(d,v,O){const A=d.state.camera,j=A.width/2/A.pixelRatio;return d.renderCoordsHelper.viewingMode===dn.JY.Global&&null!=O&&(v*=Math.cos((0,cs.Vl)(O))),j/(96*39.37/(v/=d.renderCoordsHelper.unitInMeters))/Math.tan(A.fovX/2)}function y0(d,v,O){const A=d.state.camera,j=v*Math.tan(A.fovX/2);let pe=96*39.37/(A.width/2/A.pixelRatio/j);return d.renderCoordsHelper.viewingMode===dn.JY.Global&&(pe/=Math.cos((0,cs.Vl)(O))),pe*=d.renderCoordsHelper.unitInMeters,pe}function s2(d,v,O,A,j,te){return i2(d,v,Sb(d,O,v.latitude),A,j,te)}function i2(d,v,O,A,j,te){if(v0(te)){const be=new xf(te.signal);return Mg(d,A.heading,A.tilt,v,O,j,be),void be.resolver.promise.then(Re=>{const Ge=Zv(d,Re,A.fov);if(!(0,at.Wi)(Ge))return te.resolver.resolve(Ge);te.resolver.reject()},Re=>te.resolver.reject(Re))}const pe=Mg(d,A.heading,A.tilt,v,O,j);return Zv(d,pe,A.fov,te)}function Kv(d,v,O,A,j){return Of(d).directionToHeadingTilt(v,O,A,j)}function Ab(){return Ab=(0,oi.Z)(function*(d,v,O){if(!d.renderCoordsHelper.fromRenderCoords(v,t_,d.spatialReference))return!1;const A=yield d.elevationProvider.queryElevation(t_.x,t_.y,t_.z,t_.spatialReference,"ground",O);return(0,at.Pt)(A,0)>t_.z-1}),Ab.apply(this,arguments)}function Lb(){return Lb=(0,oi.Z)(function*(d,v,O){const A=(0,br.c)();if(v)if(v instanceof Eo.Z){if((0,tn.KC)(v,A,d.renderSpatialReference),null==v.z&&null!=d.basemapTerrain){const j=yield d.elevationProvider.queryElevation(v.x,v.y,v.z,v.spatialReference,"ground",O);return(0,at.pC)(j)&&d.renderCoordsHelper.setAltitude(A,j),A}}else(0,Et.c)(A,v);else(0,Et.c)(A,d.state.camera.center);return A}),Lb.apply(this,arguments)}function Mg(d,v,O,A,j,te,pe){const be=A&&A instanceof Eo.Z?A:null;if(v0(pe))return function t4(d,v,O){return Lb.apply(this,arguments)}(d,A,pe.signal).then(Ge=>{wb(d,v,O,be,Ge,j,te,pe)},Ge=>pe.resolver.reject(Ge)),null;const Re=function r4(d,v){const O=(0,br.c)();if(v&&v instanceof Eo.Z){if((0,tn.KC)(v,O,d.renderSpatialReference),null==v.z&&null!=d.basemapTerrain){const A=(0,Cf.KO)(d.elevationProvider,v);(0,at.pC)(A)&&d.renderCoordsHelper.setAltitude(O,A)}}else(0,Et.c)(O,v||d.state.camera.center);return O}(d,A);return wb(d,v,O,be,Re,j,te,pe)}function wb(d,v,O,A,j,te,pe,be){if((0,at.Wi)(A)&&(A=(0,tn.fA)(j,d.renderSpatialReference,Eg(d)),(0,at.Wi)(A)))return null;te=Math.max(te,d.state.constraints.minimumPoiDistance);const Re=function n4(d,v,O,A,j,te){let pe=0;return te===Fl.ADJUST&&function i4(d,v,O){const A=d.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(O/A)/Math.LN2>8)return!0;const j=d.renderSpatialReference,te=Eg(d),pe=(0,tn.fA)(v,j,te),be=(0,tn.fA)(d.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,j,te);if((0,at.Wi)(pe)||(0,at.Wi)(be))return!1;const Re=Math.tan(.5*d.state.camera.fov)*A;return be.distance(pe)/Re>5}(d,A,j)?(v=0,pe=function o4(d,v,O,A){const j=d.state.constraints.tilt(v);j.max=Math.min(j.max,.5*Math.PI);const te=j.min*(1-.7)+.7*j.max,pe=Rb(d,A,v,O);return Math.min(pe,te)}(d,j,O,A)):pe=Rb(d,A,j,O),pe=d.state.constraints.clampTilt(j,pe),{heading:v,tilt:O=n2(d,A,j,pe)}}(d,v,O,j,te,pe),Ge=(0,Of(d).eyeForCenterWithHeadingTilt)(j,te,Re.heading,Re.tilt);if(pe===Fl.ADJUST&&"global"===d.viewingMode&&O>0){const ft=()=>{const It=n2(d,j,te,function a4(d,v,O,A){const j=d.state.constraints.tilt(v);let te=Rb(d,A,v,O);return te=Math.min(te,.5*Math.PI),j.min*(1-Yv)+te*Yv}(d,te,O,j));return wb(d,v,It,A,j,te,pe=O-It<1?Fl.LOCKED:Fl.ADJUST,be)},yt=d.map.ground.navigationConstraint;if(!yt||"stay-above"===yt.type){if(function qU(d,v){return!!(d.basemapTerrain&&d.renderCoordsHelper.fromRenderCoords(v,t_,d.spatialReference)&&(0,at.Pt)((0,Cf.KO)(d.elevationProvider,t_),0)>t_.z-1)}(d,Ge.eye))return ft();if(v0(be))return function e4(d,v,O){return Ab.apply(this,arguments)}(d,Ge.eye,be.signal).then(It=>It?ft():(be.resolver.resolve({eye:Ge.eye,up:Ge.up,center:(0,br.a)(j),heading:Ge.heading,tilt:Ge.tilt}),null)),null}}const tt=!be||v0(be)?{center:(0,br.c)(),eye:(0,br.c)(),up:(0,br.c)(),tilt:0,heading:0}:be;return tt.eye=Ge.eye,tt.up=Ge.up,tt.center=(0,br.a)(j),tt.heading=Ge.heading,tt.tilt=Ge.tilt,v0(be)&&be.resolver.resolve(tt),tt}function bg(d,v,O,A,j,te=null){const pe=null!=v.zmax&&null!=v.zmin;let be,Re,Ge;if(d.state.isGlobal){if(!(0,Db.D)(v.spatialReference,dn.JY.Global))return v0(te)&&te.resolver.reject(),null;const jt=new Eo.Z(v.xmin,v.ymin,v.spatialReference),ir=new Eo.Z(v.xmax,v.ymax,v.spatialReference),or=v.spatialReference.isGeographic?XU:JU;be=new Eo.Z({x:or.center(jt.x,ir.x),y:(ir.y+jt.y)/2,z:pe?(v.zmax+v.zmin)/2:null,spatialReference:v.spatialReference});const pr=(0,Mo.Iu)(v.spatialReference),Lr=function E3(d,v,O){const A=v.spatialReference,j=(0,Mo.Iu)(A),te=new Eo.Z(v.x,d.y,A),pe=new Eo.Z(O.x,d.y,A),be=new Eo.Z(d.x,v.y,A),Re=new Eo.Z(d.x,O.y,A);return{lon:WP(j.radius,te,pe),lat:WP(j.radius,be,Re)}}(be,jt,ir);Re=Lr.lon,Ge=Lr.lat,or.diff(jt.x,ir.x)>or.range/2&&(Re+=pr.halfCircumference),Re=Math.min(Re,pr.halfCircumference),Ge=Math.min(Ge,pr.halfCircumference)}else{const jt=(0,at.Pt)(d.renderSpatialReference,v.spatialReference);jt.equals(v.spatialReference)||(v=(0,tn.iV)(v,jt)),Re=v.xmax-v.xmin,Ge=v.ymax-v.ymin,be=new Eo.Z({x:v.xmin+.5*Re,y:v.ymin+.5*Ge,z:pe?(v.zmax+v.zmin)/2:null,spatialReference:jt})}const tt=pe?v.zmax-v.zmin:0,ft=d.state.camera,yt=1/Math.tan(ft.fovX/2),It=1/Math.tan(ft.fovY/2),Nt=1/Math.tan(ft.fov/2),Rt=Math.max(.5*Re*yt,.5*Ge*It,.5*tt*Nt)/1;if(v0(te)){const jt=new xf(te.signal);return Mg(d,O,A,be,Rt,j,jt),void jt.resolver.promise.then(ir=>{const or=Zv(d,ir,d.camera.fov);if(!(0,at.Wi)(or))return te.resolver.resolve(or);te.resolver.reject()},ir=>te.resolver.reject(ir))}const Jt=Mg(d,O,A,be,Rt,j);return Zv(d,Jt,d.camera.fov,te)}const Yv=.7;function n2(d,v,O,A){return Of(d).lookAtTiltToEyeTilt(A,v,O)}function Rb(d,v,O,A){return Of(d).eyeTiltToLookAtTilt(A,v,O)}function Zv(d,v,O,A){if((0,at.Wi)(v))return null;const te=(0,tn.fA)(v.eye,d.renderSpatialReference,Eg(d));return(0,at.Wi)(te)?null:(0,at.pC)(A)?(A.position=te,A.heading=v.heading,A.tilt=v.tilt,A.fov=O,A):new au(te,v.heading,v.tilt,O)}function o2(d,v){const O=d.basemapTerrain?.tilingScheme;if(O)return O.levelAtScale(v);QD.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function a2(d,v){const O=d.basemapTerrain?.tilingScheme;if(O)return O.scaleAtLevel(v);QD.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function l2(d,v,O){const A=d.renderSpatialReference;let j,te;v||(v=d.state.camera);const pe=ba.Z.WGS84;return v instanceof au?(j=v.position.latitude,(0,tn.KC)(v.position,r2,A),(0,tn.KC)(O,Gv,A),te=(0,Et.i)(r2,Gv)):((0,tn.SH)(v.center,A,Gv,pe),j=Gv[1],te=v.distance),y0(d,te,j)}class xf{constructor(v){this.signal=v,this.resolver=(0,fi.hh)()}}function v0(d){return d&&"resolver"in d}function Vd(d){let v=d*d;return d<0&&(v*=-1),v}function c2(d,v,O){const A=O,j=d.state,te=d.device,pe="forward-down"===v.tiltDirection?1:-1;return"standard"===te.deviceType?(A.translation[0]=Vd(j.axes[0]),A.translation[1]=Vd(j.axes[1]),A.translation[2]=Vd(j.buttons[7])-Vd(j.buttons[6]),A.heading=Vd(j.axes[2]),A.tilt=Vd(j.axes[3])):"spacemouse"===te.deviceType&&(A.translation[0]=1.2*Vd(j.axes[0]),A.translation[1]=1.2*Vd(j.axes[1]),A.translation[2]=2*-Vd(j.axes[2]),A.heading=1.2*Vd(j.axes[5]),A.tilt=1.2*Vd(j.axes[3])),A.tilt*=pe,(0,Et.g)(A.translation,A.translation,1),A}function u2(d,v){const O=v;return O.translation[0]=d[1]-d[0],O.translation[1]=d[3]-d[2],O.translation[2]=d[4]-d[5],O.heading=d[7]-d[6],O.tilt=d[8]-d[9],O.zoom=d[10]-d[11],O}function Ib(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt&&0===d.zoom}let ep=class extends Q_{constructor(d){super(d),this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.keysButtonState=[0,0,0,0,0,0,0,0,0,0,0,0],this.tmpCamera=new qn.V,this.constraintOptions={selection:wo.ALL,interactionType:xn.NONE,interactionStartCamera:new qn.V,interactionFactor:0,interactionDirection:null,tiltMode:cl.LOOK_AROUND}}handleEventGamepad(d){const v=c2(d,this.view.navigation.gamepad,this.transformation);("end"===d.action||Ib(v))&&this.finishController()}activateDirection(d){this.keysButtonState[d]=1,u2(this.keysButtonState,this.transformation)}deactivateDirection(d){this.keysButtonState[d]=0,Ib(u2(this.keysButtonState,this.transformation))&&this.finishController()}onControllerStart(d){this.filteredSurfaceElevation=this.view.pointsOfInterest.cameraOnSurface.location.z,this.headingStart=this.view.camera.heading,super.onControllerStart(d)}_updateFilteredSurfaceElevation(d){this.filteredSurfaceElevation+=1*(this.view.pointsOfInterest.cameraOnSurface.location.z-this.filteredSurfaceElevation)*d}stepController(d,v){this._updateStartHeading(),this._updateFilteredSurfaceElevation(d),this.currentCamera.copyViewFrom(v),this._updateCameraCenter(),this.constraintOptions.interactionStartCamera.copyFrom(this.currentCamera),this._calculateControlTransformation(d,this.currentCamera,E0),this._applyDisabledMovementTypes(E0),this._applyPan(E0.pan),this._applyRotate(E0.rotate),this._applyZoom(E0.zoom),this._applyAscend(E0.ascend),this.constraintOptions.interactionType=xn.NONE,this.constraintOptions.selection=wo.COLLISION,_a(this.view,this.currentCamera,this.constraintOptions),super.stepController(d,v)}_updateStartHeading(){0!==this.transformation.heading&&(this.headingStart=this.view.camera.heading)}_applyRotate(d){if(!d.enabled)return;const v=this.currentCamera;(0,Et.b)(Nc,v.center,v.eye),(0,Et.m)(Nc,Nc,d.matrix),v.center=(0,Et.a)(Nc,Nc,v.eye),v.up=(0,Et.m)(Nc,v.up,d.matrix),this.constraintOptions.interactionType=xn.LOOK_AROUND,this.constraintOptions.selection=wo.ALL_EXCEPT_COLLISION,_a(this.view,v,this.constraintOptions)}_applyPan(d,v=this.currentCamera){!d.enabled||(v.eye=(0,Et.m)(Nc,v.eye,d.matrix),v.center=(0,Et.m)(Nc,v.center,d.matrix),this.view.state.isGlobal&&(v.up=(0,Et.m)(Nc,v.up,d.matrix)),this.constraintOptions.interactionType=xn.PAN,this.constraintOptions.selection=wo.ALL,_a(this.view,v,this.constraintOptions))}_applyZoom(d){if(!d)return;const v=this.currentCamera.viewForward;this.currentCamera.eye=(0,Et.a)(Nc,this.currentCamera.eye,(0,Et.g)(Lo.WM.get(),v,d)),(0,Et.c)(Tg,v),(0,Et.o)(Tg,Tg),this.constraintOptions.interactionDirection=Tg,this.constraintOptions.interactionType=xn.ZOOM,this.constraintOptions.selection=wo.ALL_EXCEPT_COLLISION,_a(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null}_applyAscend(d){if(!d)return;const v=this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye,Lo.WM.get());if(this.constraintOptions.interactionDirection=(0,Et.c)(Tg,v),this.view.state.isGlobal){const O=(0,Et.l)(this.currentCamera.eye),A=(O+d)/O;this.currentCamera.eye=(0,Et.g)(Nc,this.currentCamera.eye,A),this.currentCamera.center=(0,Et.g)(Nc,this.currentCamera.center,A)}else{const O=(0,Et.g)(Lo.WM.get(),v,d);this.currentCamera.eye=(0,Et.a)(Nc,this.currentCamera.eye,O),this.currentCamera.center=(0,Et.a)(Nc,this.currentCamera.center,O)}this._updateCameraCenter(),this.constraintOptions.interactionType=xn.ASCEND,this.constraintOptions.selection=wo.COLLISION,_a(this.view,this.currentCamera,this.constraintOptions)&&this._updateCameraCenter(),this.constraintOptions.selection=wo.ALL_EXCEPT_COLLISION,_a(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null}_calculateControlTransformation(d,v,O){!function f4(d){d.zoom=0,d.ascend=0,d.pan.enabled=!1,(0,on.i)(d.pan.matrix),d.rotate.enabled=!1,(0,on.i)(d.rotate.matrix)}(O);const A=this._computeVelocities(d);this.view.state.isLocal?this._calculateControlTransformationLocal(A,v,O):this._calculateControlTransformationGlobal(A,v,O)}_updateCameraCenter(){this.currentCamera.center=this.view.renderCoordsHelper.intersectManifoldClosestSilhouette(this.currentCamera.ray,this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude,Nc)}_calculateControlTransformationLocal(d,v,O){const{viewRight:A,viewForward:j}=v,te=this.transformation,pe=this.view.navigation.gamepad,be=(0,Et.s)(Lo.WM.get(),j[0],j[1],0);(0,Et.n)(be,be);const Re=te.translation[0]*d.pan;if(0!==Re){const Nt=(0,Et.g)(Lo.WM.get(),A,Re);(0,on.j)(O.pan.matrix,O.pan.matrix,Nt),O.pan.enabled=!0}switch(pe.mode){case"pan":{const Nt=-te.translation[1]*d.pan;if(0!==Nt){const Rt=(0,Et.g)(Lo.WM.get(),be,Nt);(0,on.j)(O.pan.matrix,O.pan.matrix,Rt),O.pan.enabled=!0}O.zoom=te.zoom*d.zoom;break}case"zoom":O.zoom=(-te.translation[1]+te.zoom)*d.zoom;break;default:(0,Gy.Bg)(pe.mode)}O.ascend=te.translation[2]*d.ascend;const tt=-te.heading*d.rotate;0!==tt&&((0,on.e)(O.rotate.matrix,O.rotate.matrix,tt,this.view.renderCoordsHelper.worldUpAtPosition(v.eye,Lo.WM.get())),O.rotate.enabled=!0);const ft=te.tilt*d.rotate,yt=Y_(this.view.renderCoordsHelper,v.center,v.eye),It=(0,cs.uZ)(yt+ft,Il.min,Il.max)-yt;It&&((0,on.e)(O.rotate.matrix,O.rotate.matrix,It,A),O.rotate.enabled=!0)}_calculateControlTransformationGlobal(d,v,O){const{eye:A,viewRight:j}=v,te=this.transformation,pe=this.view.navigation.gamepad,be=(0,Et.f)(Lo.WM.get(),j,A);(0,Et.n)(be,be),(0,Et.o)(be,be),function gU(d,v,O,A,j,te,pe,be,Re){gb(d.center,(0,Et.e)(d.up,d.center),(0,Et.l)(d.center),-ic.Q4.normalize((0,cs.Vl)(te)),pe,v)?function fU(d,v,O,A,j,te){const{eye:pe}=d;(0,Q0.Tz)([0,0,1],pe,Qh,X_,UD);const be=v.translation[0]*O.pan,Re="zoom"===j.mode?0:v.translation[1]*O.pan,Ge=Math.max(Math.sqrt(Math.abs(1-(0,Et.e)(d.center,Qh)**2/(0,Et.l)(d.center)**2)),.5),tt=(Math.sin(te)*Re+Math.cos(te)*be)/Ge,ft=-Math.cos(te)*Re+Math.sin(te)*be;switch((0,on.e)(A.pan.matrix,A.pan.matrix,tt,Qh),A.pan.enabled=!0,j.mode){case"pan":(0,on.e)(A.pan.matrix,A.pan.matrix,ft,X_),A.pan.enabled=!0;break;case"zoom":A.zoom=-v.translation[1]*O.zoom}}(v,O,A,be,Re,-ic.Q4.normalize((0,cs.Vl)(j))):function mU(d,v,O,A,j){const{eye:te,viewRight:pe}=d,be=(0,Et.f)(Lo.WM.get(),pe,te),Re=v.translation[0]*O.pan;switch(0!==Re&&((0,on.e)(A.pan.matrix,A.pan.matrix,-Re,be),A.pan.enabled=!0),j.mode){case"pan":{const Ge=v.translation[1]*O.pan;0!==Ge&&((0,on.e)(A.pan.matrix,A.pan.matrix,Ge,pe),A.pan.enabled=!0);break}case"zoom":A.zoom=-v.translation[1]*O.zoom}}(v,O,A,be,Re)}(this.startCamera,v,te,d,this.view.camera.heading,this.headingStart,this.view.camera.tilt,O,pe),this.tmpCamera.copyFrom(this.currentCamera),this._applyPan(E0.pan,this.tmpCamera);const Re=this.view.pointsOfInterest.centerOnSurfaceFrequent.estimatedSurfaceAltitude;O.ascend=te.translation[2]*d.ascend;const tt=-te.heading*d.rotate;0!==tt&&((0,on.e)(O.rotate.matrix,O.rotate.matrix,tt,this.tmpCamera.eye),O.rotate.enabled=!0);const yt=this._clampTiltDeltaGlobalToValidRange(te.tilt*d.rotate,v.ray,Re);0!==yt&&((0,on.e)(O.rotate.matrix,O.rotate.matrix,yt,this.tmpCamera.viewRight),O.rotate.enabled=!0),O.zoom+=te.zoom*d.zoom}_clampTiltDeltaGlobalToValidRange(d,v,O){const A=(0,Mo.Iu)(this.view.spatialReference),j=Cv(Il.min,v.origin,O,A);let te=0,pe=0;const be=Lo.WM.get();return this.view.renderCoordsHelper.intersectManifold(v,O,be)?(te=Cv(Y_(this.view.renderCoordsHelper,be,v.origin),v.origin,O,A),pe=Cv(Il.max,v.origin,O,A)):((0,qo.j)((0,qo.k)(qo.t,O+A.radius),v,be),te=bD((0,cs.ZF)(-(0,Et.e)(v.direction,(0,Et.n)(be,be))),v.origin,O,A),pe=bD(Il.max,v.origin,O,A)),(0,cs.uZ)(te+d,j,pe)-te}_getPointAbsoluteSurfaceElevation(d,v,O){const{renderCoordsHelper:A}=this.view,j=A.getAltitude(d),te=v+Math.abs(j-v);return A.setAltitude(O,te,d),te}_clampedDistanceToSurface(d,v){const{renderCoordsHelper:O}=this.view,{camera:A}=this.view.state,{direction:j}=function QU(d,v,O,A,j){return Of(d).headingTiltToDirectionUp(v,O,A,j)}(this.view,v,0,d2,p4),te=O.intersectManifoldClosestSilhouette((0,Fu.re)(v,j),d,Lo.WM.get()),pe=(0,Et.i)(v,te),be=O.intersectManifoldClosestSilhouette((0,Fu.re)(v,(0,Et.r)(Lo.WM.get(),v,A.center)),d,Lo.WM.get()),Re=(0,Et.i)(v,be);return Math.min(pe,Re)}_computeHeadingRotateRadius(d){const{renderCoordsHelper:v,state:O}=this.view,{camera:A,isGlobal:j}=O,te=v.intersectManifoldClosestSilhouette(A.ray,this.filteredSurfaceElevation,Lo.WM.get());if(j){const pe=(0,Et.b)(Lo.WM.get(),d,te),be=(0,Et.l)(pe);(0,Et.g)(pe,pe,1/be);const Re=(0,Et.n)(Lo.WM.get(),d),Ge=(0,cs.ZF)((0,Et.e)(Re,pe));return be*Math.sin(Math.min(u4,Ge))}{const pe=(0,Et.c)(Lo.WM.get(),d);return v.setAltitude(pe,this.filteredSurfaceElevation),(0,Et.i)(te,pe)}}_minimumAscendVelocity(){return this.view.state.constraints.collision.enabled?0:d4}_computeVelocities(d){const v=this.filteredSurfaceElevation,O=v+(0,Mo.Iu)(this.view.spatialReference).radius,{camera:A,isGlobal:j}=this.view.state,te=Lo.WM.get(),pe=this._getPointAbsoluteSurfaceElevation(A.eye,v,te),be=this._clampedDistanceToSurface(v,te),Re=A.width/2,Ge=h2*A.width,tt=h2*A.width,ft=be*Math.tan(.5*A.fovX)/Re,yt=ft/O,It=ft/this._computeHeadingRotateRadius(te),Nt=pe-v;return{pan:(j?yt:ft)*Ge*d,ascend:Math.max(this._minimumAscendVelocity()*d,2**(Ge*d/Re)*Nt-Nt),zoom:2**(Ge*d/Re)*be-be,rotate:(0,cs.uZ)(It*tt,h4,_4)*d}}_applyDisabledMovementTypes(d){!(0,at.pC)(this.disableMovements)||void 0!==this.disableMovements.mode&&this.view.state.viewingMode!==this.disableMovements.mode||(d.zoom=this.disableMovements.zoom?0:d.zoom,d.ascend=this.disableMovements.ascend?0:d.ascend,d.pan.enabled=!this.disableMovements.pan,this.disableMovements.pan&&(0,on.i)(d.pan.matrix),d.rotate.enabled=!this.disableMovements.rotate,this.disableMovements.rotate&&(0,on.i)(d.rotate.matrix))}static activatesFor(d,v){const O=c2(v,d.navigation.gamepad,c4);return!("end"===v.action||Ib(O))}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ep.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ep.prototype,"gamepadDevice",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ep.prototype,"disableMovements",void 0),ep=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.GamepadKeyboardController")],ep);const c4={translation:[0,0,0],heading:0,tilt:0,zoom:0},d2=80,u4=(0,cs.Vl)(d2),h2=.75,d4=5,h4=(0,cs.Vl)(30),_4=(0,cs.Vl)(80),E0={zoom:0,ascend:0,pan:{enabled:!1,matrix:(0,ao.c)()},rotate:{enabled:!1,matrix:(0,ao.c)()}},Nc=(0,br.c)(),Tg=(0,br.c)(),p4=Cb();class m4 extends Tc.a{constructor(v){super(!0),this.view=v,this.watchHandles=new so.Z,this.handle=this.registerIncoming("gamepad",O=>this._handleEventGamepad(O)),this.handle.pause()}onInstall(v){super.onInstall(v),this.watchHandles.add([(0,wr.YP)(()=>this.view.navigation.gamepad.enabled,O=>{O?this.handle.resume():(this.handle.pause(),this.cameraControllerGamepad&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null))},wr.nn),(0,wr.YP)(()=>this.view.navigation.gamepad.device,O=>{this.cameraControllerGamepad&&O&&this.cameraControllerGamepad.gamepadDevice!==O&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null)})])}onUninstall(){this.watchHandles.removeAll(),super.onUninstall()}_handleEventGamepad(v){const O=this.view.navigation.gamepad.device;if(O&&v.data.device!==O)return;const A=this.cameraControllerGamepad&&this.cameraControllerGamepad.active;if(A||ep.activatesFor(this.view,v.data)){if(!A){const j=new ep({view:this.view,gamepadDevice:v.data.device});this.view.state.switchCameraController(j)&&(this.cameraControllerGamepad=j)}this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&this.cameraControllerGamepad.gamepadDevice===v.data.device&&this.cameraControllerGamepad.handleEventGamepad(v.data)}}}var _u;!function(d){d[d.LEFT=0]="LEFT",d[d.RIGHT=1]="RIGHT",d[d.FORWARD=2]="FORWARD",d[d.BACKWARD=3]="BACKWARD",d[d.UP=4]="UP",d[d.DOWN=5]="DOWN",d[d.HEADINGLEFT=6]="HEADINGLEFT",d[d.HEADINGRIGHT=7]="HEADINGRIGHT",d[d.TILTUP=8]="TILTUP",d[d.TILTDOWN=9]="TILTDOWN",d[d.ZOOMIN=10]="ZOOMIN",d[d.ZOOMOUT=11]="ZOOMOUT"}(_u||(_u={}));class g4 extends Tc.a{constructor(v,O){super(!0),this.view=v,this.disableMovements={pan:!0,zoom:!1,ascend:!0,rotate:!1,mode:dn.JY.Local},this.keyToNumber={[O.left]:_u.LEFT,[O.right]:_u.RIGHT,[O.forward]:_u.FORWARD,[O.backward]:_u.BACKWARD,[O.up]:_u.UP,[O.down]:_u.DOWN,[O.headingLeft]:_u.HEADINGLEFT,[O.headingRight]:_u.HEADINGRIGHT,[O.tiltUp]:_u.TILTUP,[O.tiltDown]:_u.TILTDOWN,[O.zoomIn]:_u.ZOOMIN,[O.zoomOut]:_u.ZOOMOUT},this.registerIncoming("key-down",null,A=>this._handleKeyDown(A)),this.registerIncoming("key-up",null,A=>this._handleKeyUp(A)),this.registerIncoming("blur",null,()=>this._handleBlur())}_handleKeyDown(v){if(v.data.native.ctrlKey||v.data.native.metaKey)return;const O=this.keyToNumber[v.data.key];null!=O&&(this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active||(this.cameraControllerKeyboard=new ep({view:this.view,disableMovements:this.disableMovements}),this.view.state.switchCameraController(this.cameraControllerKeyboard)),this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.activateDirection(O),v.stopPropagation()))}_handleBlur(){this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.finishController(),this.cameraControllerKeyboard=null)}_handleKeyUp(v){if(v.data.native.ctrlKey||v.data.native.metaKey)return;const O=this.keyToNumber[v.data.key];null!=O&&this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.deactivateDirection(O),v.stopPropagation())}}class y4 extends Tc.a{constructor(v,O){super(!0),this.view=v,this.registerIncoming("mouse-wheel",O,A=>this._handleMouseWheel(A))}_handleMouseWheel(v){if(!this.view.navigation.mouseWheelZoomEnabled)return;const O=v.data;this.cameraController&&this.cameraController.active||(this.cameraController=this.view.state.isGlobal?new Uv({view:this.view,mode:"interaction"}):new Fv({view:this.view,mode:"interaction"}),this.view.state.switchCameraController(this.cameraController)),this.cameraController.zoomStep(-1/60*O.deltaY,(0,rn.s1)(O.x,O.y)),v.preventDefault(),v.stopPropagation()}}class kv{constructor(v){this._gain=v}reset(v){this._value=v}set gain(v){this._gain=v}get value(){return void 0===this._value?0:this._value}update(v){this._value=void 0===this._value?v:this._gain*v+(1-this._gain)*this._value}}let tp=class extends pg{constructor(d){super(d),this.view=null,this.beginCamera=new qn.V,this.elapsedTimeSec=0,this.constraintOptions={selection:wo.ALL,interactionType:xn.PAN,interactionFactor:0,interactionStartCamera:new qn.V,interactionDirection:null,tiltMode:cl.TUMBLE}}initialize(){this.constraintOptions.interactionType=this.interactionType,this.viewAnimation=new rf}get steppingFinished(){return this.momentum.isFinished(this.elapsedTimeSec)}onControllerStart(d){this.beginCamera.copyFrom(d),this.constraintOptions.interactionStartCamera=this.beginCamera,super.onControllerStart(d)}stepController(d,v){v.copyViewFrom(this.beginCamera),this.elapsedTimeSec+=d,this.momentumStep(this.elapsedTimeSec,v),_a(this.view,v,this.constraintOptions)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],tp.prototype,"view",void 0),tp=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.MomentumController")],tp);let Cg=class extends tp{constructor(d){super(d),this.interactionType=xn.PAN,this.tmpPan=(0,br.c)()}momentumStep(d,v){const O=this.momentum.value(d);(0,Et.g)(this.tmpPan,this.momentum.direction,O),v.eye=(0,Et.b)(_2,v.eye,this.tmpPan),v.center=(0,Et.b)(_2,v.center,this.tmpPan),this.constraintOptions.interactionDirection=this.tmpPan}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Cg.prototype,"momentum",void 0),Cg=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.PanPlanarMomentumController")],Cg);const _2=(0,br.c)(),v4=(0,br.c)(),$v=(0,br.c)();let Jv=class extends tp{constructor(d){super(d),this.interactionType=xn.PAN}momentumStep(d,v){const O=this.momentum.value1(d),A=this.momentum.value2(d);(0,Et.c)($v,v.eye),(0,Et.n)($v,$v),(0,Et.f)(this.momentum.axis2,$v,this.momentum.axis1),wD(v,v4,this.momentum.axis1,O,this.momentum.axis2,A)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Jv.prototype,"momentum",void 0),Jv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.PanSphericalMomentumController")],Jv);let M0=class extends tp{constructor(d){super(d),this.interactionType=xn.TUMBLE}set center(d){this._set("center",(0,br.a)(d))}set axis(d){this._set("axis",(0,br.a)(d))}momentumStep(d,v){const O=this.momentum.value(d);J_(v,this.center,rg(this.axis,O))}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],M0.prototype,"momentum",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],M0.prototype,"center",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],M0.prototype,"axis",null),M0=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.MomentumController")],M0);let Sf=class extends tp{constructor(d){super(d),this.interactionType=xn.ZOOM,this.constraintOptions.interactionDirection=(0,br.c)()}set zoomCenter(d){this._set("zoomCenter",(0,br.a)(d))}momentumStep(d,v){(0,Et.c)(this.constraintOptions.interactionDirection,v.eye);const O=this.momentum.valueDelta(0,d);fb(v,this.zoomCenter,O,this.view.state.constraints.minimumPoiDistance),this.constraintOptions.interactionDirection=(0,Et.r)(this.constraintOptions.interactionDirection,v.eye,this.constraintOptions.interactionDirection)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Sf.prototype,"momentum",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Sf.prototype,"zoomCenter",null),Sf=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.ZoomPlanarMomentumController")],Sf);let b0=class extends tp{constructor(d){super(d),this.interactionType=xn.ZOOM,this.radius=0,this.tmpSceneCenter=(0,br.c)(),this.tmpZoomAxisAngle=kh(),this.sphere=(0,qo.c)()}set screenCenter(d){this._set("screenCenter",(0,rn.s1)(d[0],d[1]))}set sceneCenter(d){this._set("sceneCenter",(0,br.a)(d))}initialize(){this.sphere[3]=this.radius}momentumStep(d,v){const O=this.momentum.valueDelta(0,d);ED(this.sphere,v,O),this.constraintOptions.interactionType=xn.ZOOM,_a(this.view,v,this.constraintOptions),mg(this.sphere,v,this.screenCenter,this.tmpSceneCenter),sg(this.sceneCenter,this.tmpSceneCenter,this.tmpZoomAxisAngle),J_(v,this.sphere,this.tmpZoomAxisAngle),this.constraintOptions.interactionType=xn.PAN}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],b0.prototype,"momentum",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],b0.prototype,"screenCenter",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],b0.prototype,"sceneCenter",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],b0.prototype,"radius",void 0),b0=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.momentum.ZoomSphericalMomentumController")],b0);class zd{constructor(v){this.gain=v}update(v){if(this.hasLastValue){const O=this.computeDelta(v);this._updateDelta(O)}this.lastValue=v}reset(){this.lastValue=void 0,this.filteredDelta=void 0}get hasLastValue(){return void 0!==this.lastValue}get hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(v){return v-this.lastValue}_updateDelta(v){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*v:v}}class Xv{constructor(v,O,A){this._initialVelocity=v,this._stopVelocity=O,this._friction=A,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(v){return v>this.duration}get friction(){return this._friction}value(v){return this.valueFromInitialVelocity(this._initialVelocity,v)}valueDelta(v,O){const A=this.value(v);return this.value(v+O)-A}valueFromInitialVelocity(v,O){O=Math.min(O,this.duration);const A=1-this.friction;return v*(A**O-1)/Math.log(A)}}class E4 extends Xv{constructor(v,O,A,j,te){super(v,O,A),this.sceneVelocity=j,this.direction=te}value(v){return super.valueFromInitialVelocity(this.sceneVelocity,v)}}class p2{constructor(v=300,O=12,A=.84){this.minimumInitialVelocity=v,this.stopVelocity=O,this.friction=A,this.enabled=!0,this.time=new zd(.6),this.screen=[new zd(.4),new zd(.4)],this.scene=[new zd(.6),new zd(.6),new zd(.6)],this.tmpDirection=(0,br.c)()}add(v,O,A){if(this.enabled){if(this.time.hasLastValue&&this.time.computeDelta(A)<.015)return;this.screen[0].update(v[0]),this.screen[1].update(v[1]),this.scene[0].update(O[0]),this.scene[1].update(O[1]),this.scene[2].update(O[2]),this.time.update(A)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.scene[0].reset(),this.scene[1].reset(),this.scene[2].reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const v=this.screen[0].filteredDelta,O=this.screen[1].filteredDelta,A=Math.sqrt(v*v+O*O)/this.time.filteredDelta;return Math.abs(A)<this.minimumInitialVelocity?null:this.createMomentum(A,this.stopVelocity,this.friction)}createMomentum(v,O,A){(0,Et.s)(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);const j=(0,Et.l)(this.tmpDirection);return j>0&&(0,Et.g)(this.tmpDirection,this.tmpDirection,1/j),new E4(v,O,A,j/this.time.filteredDelta,this.tmpDirection)}}class f2{constructor(v){this.gain=v}update(v){this.filteredValue=this.hasFilteredValue?(1-this.gain)*this.filteredValue+this.gain*v:v}reset(){this.filteredValue=void 0}get hasFilteredValue(){return void 0!==this.filteredValue}}class M4 extends Xv{constructor(v,O,A,j,te,pe=0,be){super(v,O,A),this.angularVelocity1=j,this.axis1=te,this.angularVelocity2=pe,this.axis2=be}value1(v){return super.valueFromInitialVelocity(this.angularVelocity1,v)}value2(v){return super.valueFromInitialVelocity(this.angularVelocity2,v)}}class b4{constructor(v=300,O=12,A=.84){this.minimumInitialVelocity=v,this.stopVelocity=O,this.friction=A,this.enabled=!0,this.tmpAxis1=(0,br.c)(),this.tmpAxis2=(0,br.c)(),this.tmpAngles=(0,po.a)(),this.time=new zd(.3),this.screen=[new zd(.4),new zd(.4)],this.angle1=new f2(.6),this.angle2=new f2(.6),this.axis1=(0,br.c)(),this.axis2=(0,br.c)(),this.lastScene=(0,br.c)()}addMomentumDirectRotation(v,O,A,j,te,pe){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(A)<.01)return;let be=xD(this.lastScene,O,this.tmpAxis2,j,te,pe);this.angle2.update(0),(0,Et.p)(this.tmpAxis2)<1e-5?be=0:(0,Et.n)(this.axis1,this.tmpAxis2),this.angle1.update(be),(0,Et.c)(this.lastScene,O)}this.screen[0].update(v[0]),this.screen[1].update(v[1]),this.time.update(A)}}addMomentumPreserveHeading(v,O,A,j,te,pe,be){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(A)<.01)return;LD(this.lastScene,O,this.tmpAxis2,this.tmpAxis1,this.tmpAngles,j,te,pe,be,!1),(0,Et.p)(this.tmpAxis2)<1e-5?(this.angle1.update(0),this.angle2.update(0)):(this.angle1.update(this.tmpAngles[1]),this.angle2.update(this.tmpAngles[0]),(0,Et.n)(this.axis1,this.tmpAxis1),(0,Et.n)(this.axis2,this.tmpAxis2)),(0,Et.c)(this.lastScene,O)}this.screen[0].update(v[0]),this.screen[1].update(v[1]),this.time.update(A)}}reset(){this.screen[0].reset(),this.screen[1].reset(),this.angle1.reset(),this.angle2.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;const v=this.screen[0].filteredDelta,O=this.screen[1].filteredDelta,A=Math.sqrt(v*v+O*O)/this.time.filteredDelta;return Math.abs(A)<this.minimumInitialVelocity?null:this.createMomentum(A,this.stopVelocity,this.friction)}createMomentum(v,O,A){return new M4(v,O,A,this.angle1.filteredValue/this.time.filteredDelta,this.axis1,this.angle2.filteredValue/this.time.filteredDelta,this.axis2)}}class g2{constructor(v=2.5,O=.01,A=.95,j=12){this.minimumInitialVelocity=v,this.stopVelocity=O,this.friction=A,this.maxVelocity=j,this.enabled=!0,this.value=new zd(.8),this.time=new zd(.3)}add(v,O){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(O)<.01)return;if(this.value.hasFilteredDelta){const A=this.value.computeDelta(v);this.value.filteredDelta*A<0&&this.value.reset()}}this.time.update(O),this.value.update(v)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let v=this.value.filteredDelta/this.time.filteredDelta;return v=(0,cs.uZ)(v,-this.maxVelocity,this.maxVelocity),Math.abs(v)<this.minimumInitialVelocity?null:this.createMomentum(v,this.stopVelocity,this.friction)}createMomentum(v,O,A){return new Xv(v,O,A)}}class y2 extends g2{constructor(v=3,O=.01,A=.95,j=12){super(v,O,A,j)}add(v,O){if(this.value.hasLastValue){const A=this.value.lastValue;let j=v-A;for(;j>Math.PI;)j-=2*Math.PI;for(;j<-Math.PI;)j+=2*Math.PI;v=A+j}super.add(v,O)}}class T4 extends Xv{constructor(v,O,A){super(v,O,A)}value(v){const O=super.value(v);return Math.exp(O)}valueDelta(v,O){const A=super.value(v),j=super.value(v+O)-A;return Math.exp(j)}}class v2 extends g2{constructor(v=2.5,O=.01,A=.95,j=12){super(v,O,A,j)}add(v,O){super.add(Math.log(v),O)}createMomentum(v,O,A){return new T4(v,O,A)}}let Qv=class extends Q_{constructor(d){super(d),this.view=null,this.smoothRotation=new kv(.05),this.rotationAxis=(0,br.c)(),this.panningPlane=(0,Ro.Ue)(),this.smoothScaling=new kv(.05),this.zoomCenterScreen=(0,rn.s1)(),this.zoomMomentumEstimator=new v2,this.rotationMomentumEstimator=new y2,this.panSphericalMomentumEstimator=new b4,this.panPlanarMomentumEstimator=new p2,this.adjustedSphere=(0,qo.c)(),this.tmp3d=(0,br.c)(),this.tmpScreenPointArray=(0,rn.s1)(),this.beginScreenPoint=(0,rn.s1)(),this.beginScenePoint=(0,br.c)(),this.screenPickPoint=(0,rn.s1)(),this.navMode=El.Horizontal,this.tmpInteractionDirection=(0,br.c)(),this.constraintOptions={selection:wo.ALL,interactionType:xn.NONE,interactionFactor:0,interactionStartCamera:new qn.V,interactionDirection:null,tiltMode:cl.TUMBLE}}get intersectionHelper(){return this.view.sceneIntersectionHelper}begin(d){if(!this.active)return;const v=this.view.navigation.momentumEnabled;this.zoomMomentumEstimator.enabled=v,this.rotationMomentumEstimator.enabled=v,this.panPlanarMomentumEstimator.enabled=v,this.panSphericalMomentumEstimator.enabled=v,this.beginHeading=-ic.Q4.normalize((0,cs.Vl)(this.view.camera.heading)),this.beginRadius=d.radius,this.pointerCount=d.pointers.size,this.beginAngle=d.angle,this.smoothRotation.reset(),(0,rn.md)(d.center,this.screenPickPoint),(0,Yi.c)(this.beginScreenPoint,this.screenPickPoint);const O=(0,Mo.Iu)(this.view.spatialReference),A=OD(this.intersectionHelper,this.startCamera,this.screenPickPoint,O,vf.Silhouette);this.scenePickPoint=A.scenePickPoint,this.sphere=A.sphere,(0,Et.c)(this.beginScenePoint,this.scenePickPoint),this.navMode=Ov(this.startCamera,this.screenPickPoint,A.hasGeometryIntersection,O),this.navMode===El.Vertical&&this._preparePlanarPanMode(d),this.constraintOptions.interactionStartCamera.copyFrom(this.startCamera)}_preparePlanarPanMode(d){const v=(0,Et.o)(this.tmp3d,this.startCamera.viewForward);(0,Ro.Yq)(this.scenePickPoint,v,this.panningPlane);const O=(0,rn.s1)(this.screenPickPoint[0],0),A=(0,br.c)(),j=(0,Et.l)(this.startCamera.eye);this.adjustedSphere[3]=j<this.sphere[3]?j-100:this.sphere[3],mg(this.adjustedSphere,this.startCamera,O,A);const te=(0,rn.J$)();this.startCamera.projectToRenderScreen(A,te),this.screenPickPoint[1]=Math.min(this.screenPickPoint[1],.9*te[1]);const be=this.intersectionHelper.intersectScreen(this.screenPickPoint,this.scenePickPoint);be&&(0,Ro.Yq)(this.scenePickPoint,(0,Ro.mJ)(this.panningPlane),this.panningPlane);const Re=(0,br.c)(),Ge=(0,br.c)(),tt=(0,br.c)();(0,Et.b)(Re,this.scenePickPoint,this.currentCamera.eye);const Nt=(0,Et.l)(Re);(0,Et.n)(Re,Re);const Rt=5*Math.max(Math.abs(this.view.camera.position.z),50),Jt=this.view._stage.renderView.getMinimalDepthForArea(null,this.screenPickPoint[0],this.screenPickPoint[1],this.view.state.camera,80);let jt=Jt?Math.min(Jt,Rt):Rt;jt=be?Math.min(jt,Nt):jt,(0,Et.c)(tt,(0,Et.a)(Ge,this.currentCamera.eye,(0,Et.g)(Ge,Re,jt))),this.panningPlane[3]=-(0,Et.e)(this.panningPlane,tt),this.startCamera.center=(0,Et.a)(Ge,this.startCamera.eye,(0,Et.g)(Ge,this.startCamera.viewForward,jt));const ir=(0,rn.md)(d.center,this.tmpScreenPointArray);pb(this.panningPlane,this.startCamera,ir,this.beginScenePoint)}update(d){if(!this.active)return;this.currentCamera.copyFrom(this.startCamera);const v=d.pointers.size>1;this.navMode===El.Horizontal?(v&&this._zoomSpherical(d),this._panningSpherical(d),v&&this._rotateSpherical(d)):(v&&this._zoomPlanar(d),this._panningPlanar(d),v&&this._rotatePlanar(d))}end(d){d.pointers.size===this.pointerCount&&this.update(d),this.finishController();const v=this.zoomMomentumEstimator.evaluateMomentum();if(v)return this.navMode===El.Horizontal?new b0({view:this.view,momentum:v,screenCenter:this.zoomCenterScreen,sceneCenter:this.beginScenePoint,radius:this.sphere[3]}):new Sf({view:this.view,momentum:v,zoomCenter:this.beginScenePoint});const O=this.rotationMomentumEstimator.evaluateMomentum();if(O)return new M0({view:this.view,momentum:O,center:this.sphere,axis:this.rotationAxis});if(this.navMode===El.Horizontal){const A=this.panSphericalMomentumEstimator.evaluateMomentum();if(A)return new Jv({view:this.view,momentum:A})}else{const A=this.panPlanarMomentumEstimator.evaluateMomentum();if(A)return new Cg({view:this.view,momentum:A})}return null}_zoomSpherical(d){const v=this.beginRadius/d.radius,O=.001875*Math.min(Math.max(d.radius,40),120);this.smoothScaling.gain=O,this.smoothScaling.update(v),ED(this.sphere,this.currentCamera,this.smoothScaling.value),(0,rn.md)(d.center,this.zoomCenterScreen),this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*d.timestamp),this.constraintOptions.interactionType=xn.ZOOM,this.constraintOptions.interactionFactor=Wd(d.radius-this.beginRadius),_a(this.view,this.currentCamera,this.constraintOptions)}_panningSpherical(d){const v=(0,rn.md)(d.center,this.tmpScreenPointArray);mg(this.sphere,this.currentCamera,v,this.tmp3d),gb(this.beginScenePoint,(0,Et.e)(this.currentCamera.up,this.beginScenePoint),this.sphere[3],this.beginHeading,this.view.camera.tilt,this.startCamera)?(ID(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.beginHeading,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumPreserveHeading(v,this.tmp3d,.001*d.timestamp,this.startCamera,this.sphere,this.beginHeading,this.view.camera.tilt)):(RD(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumDirectRotation(v,this.tmp3d,.001*d.timestamp,this.startCamera,this.sphere[3],this.view.camera.tilt)),this.constraintOptions.interactionType=xn.PAN,this.constraintOptions.interactionFactor=Wd(this.screenPickPoint,v),_a(this.view,this.currentCamera,this.constraintOptions)}_rotateSpherical(d){(0,Et.n)(this.rotationAxis,this.scenePickPoint),this.currentCamera.aboveGround||(0,Et.o)(this.rotationAxis,this.rotationAxis);const v=this.smoothRotation.value,O=v+_b(d.angle-v),A=.00125*Math.min(Math.max(d.radius,40),120);this.smoothRotation.gain=A,this.smoothRotation.update(O);const j=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(j,.001*d.timestamp),J_(this.currentCamera,this.sphere,rg(this.rotationAxis,j)),this.constraintOptions.interactionType=xn.TUMBLE,this.constraintOptions.interactionFactor=Wd(d.radius*O),_a(this.view,this.currentCamera,this.constraintOptions)}_panningPlanar(d){const v=(0,rn.md)(d.center,this.tmpScreenPointArray);pb(this.panningPlane,this.currentCamera,v,this.tmp3d)&&(PD(this.currentCamera,this.beginScenePoint,this.tmp3d),this.panPlanarMomentumEstimator.add(v,this.tmp3d,.001*d.timestamp),this.constraintOptions.interactionType=xn.PAN,this.constraintOptions.interactionFactor=Wd(this.beginScreenPoint,v),this.constraintOptions.interactionDirection=this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye,this.tmpInteractionDirection),_a(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null)}_zoomPlanar(d){const v=this.beginRadius/d.radius,O=.001875*Math.min(Math.max(d.radius,40),120);this.smoothScaling.gain=O,this.smoothScaling.update(v),this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*d.timestamp),fb(this.currentCamera,this.beginScenePoint,this.smoothScaling.value,this.view.state.constraints.minimumPoiDistance),this.constraintOptions.interactionType=xn.ZOOM,this.constraintOptions.interactionFactor=Wd(d.radius-this.beginRadius),_a(this.view,this.currentCamera,this.constraintOptions)}_rotatePlanar(d){(0,Et.c)(this.rotationAxis,this.beginScenePoint),this.currentCamera.aboveGround||(0,Et.o)(this.rotationAxis,this.rotationAxis);const v=this.smoothRotation.value;let O=d.angle-v;O=_b(O);const A=v+O,j=.00125*Math.min(Math.max(d.radius,40),120);this.smoothRotation.gain=j,this.smoothRotation.update(A);const te=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(te,.001*d.timestamp),J_(this.currentCamera,this.sphere,rg(this.rotationAxis,te)),this.constraintOptions.interactionType=xn.TUMBLE,this.constraintOptions.interactionFactor=Wd(d.radius*te),_a(this.view,this.currentCamera,this.constraintOptions)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Qv.prototype,"view",void 0),Qv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.global.PinchAndPanController")],Qv);const E2=(0,br.f)(0,0,1),C4_ANGLE_THRESHOLD=16/180*Math.PI;let qv=class extends Q_{constructor(d){super(d),this.view=null,this.rotationValueSmooth=new kv(.05),this.scalingValueSmooth=new kv(.05),this.planeHorizontal=(0,Ro.Ue)(),this.planeVertical=(0,Ro.Ue)(),this.rotationMomentumEstimator=new y2,this.panMomentumEstimator=new p2(300,12,.9),this.zoomMomentumEstimator=new v2,this.beginCenter=(0,br.c)(),this.tmpPoints=[],this.beginCenterScreen=(0,rn.s1)(),this.tmpCentroid3d=(0,br.c)(),this.tmpCentroid2d=(0,rn.s1)(),this.tmp2d=(0,rn.s1)(),this.constraintOptions={selection:wo.ALL,interactionType:xn.NONE,interactionFactor:0,interactionStartCamera:new qn.V,interactionDirection:null,tiltMode:cl.TUMBLE}}get intersectionHelper(){return this.view.sceneIntersectionHelper}begin(d){if(!this.active)return;const v=this.view.navigation.momentumEnabled;this.zoomMomentumEstimator.enabled=v,this.rotationMomentumEstimator.enabled=v,this.panMomentumEstimator.enabled=v,this.beginRadius=d.radius,this.pointerCount=d.pointers.size,this.beginAngle=d.angle,this.rotationValueSmooth.reset(),this.scalingValueSmooth.reset(),(0,rn.md)(d.center,this.beginCenterScreen),(0,Ro.Oy)(E2,0,this.planeHorizontal);const O=(0,br.c)(),A=this.intersectionHelper.intersectScreenFreePointFallback(this.beginCenterScreen,O),j=(0,br.c)();(0,Et.o)(j,this.startCamera.viewForward);const te=(0,br.c)();(0,Et.c)(te,E2);const pe=(0,Et.e)(j,te),be=(0,cs.Kt)(pe<0?-pe:pe);if(this.panMode=be>=C4_ANGLE_THRESHOLD?El.Horizontal:El.Vertical,(0,Ro.T5)(this.planeHorizontal,this.planeHorizontal,O),this.startCamera.aboveGround||(0,Ro.tk)(this.planeHorizontal,this.planeHorizontal),this.panMode===El.Vertical){(0,Et.g)(te,te,pe),(0,Et.b)(this.planeVertical,j,te),(0,Et.n)(this.planeVertical,this.planeVertical),(0,Ro.T5)(this.planeVertical,this.planeVertical,O);const Re=(0,br.c)(),Ge=(0,br.c)(),tt=(0,br.c)();(0,Et.b)(Re,O,this.currentCamera.eye);const ft=(0,Et.l)(Re);(0,Et.n)(Re,Re);const yt=5*Math.max(Math.abs(this.view.camera.position.z),50),It=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,this.beginCenterScreen[0],this.beginCenterScreen[1],this.view.state.camera,80);let Nt=It?Math.min(It,yt):yt;Nt=A?Math.min(Nt,ft):Nt,(0,Et.c)(tt,(0,Et.a)(Ge,this.currentCamera.eye,(0,Et.g)(Ge,Re,Nt))),this.planeVertical[3]=-(0,Et.e)(this.planeVertical,tt),this.computePlanePoints(d.pointers,this.planeVertical,this.startCamera,this.tmpPoints),Tv(this.tmpPoints,this.beginCenter)}else this.computePlanePoints(d.pointers,this.planeHorizontal,this.startCamera,this.tmpPoints),Tv(this.tmpPoints,this.beginCenter);this.constraintOptions.interactionStartCamera.copyFrom(this.startCamera)}update(d){if(!this.active)return;this.currentCamera.copyFrom(this.startCamera);const v=d.pointers.size>1,O=this.panMode===El.Horizontal?this.planeHorizontal:this.planeVertical,A=this.beginCenter;if(v){const j=this.beginRadius/d.radius,te=.001875*Math.min(Math.max(d.radius,40),120);this.scalingValueSmooth.gain=te,this.scalingValueSmooth.update(j),fb(this.currentCamera,A,this.scalingValueSmooth.value,this.view.state.constraints.minimumPoiDistance),this.zoomMomentumEstimator.add(this.scalingValueSmooth.value,.001*d.timestamp),this.constraintOptions.interactionType=xn.ZOOM,this.constraintOptions.interactionFactor=Wd(Math.abs(d.radius-this.beginRadius)),_a(this.view,this.currentCamera,this.constraintOptions)}if(this.computePlanePoints(d.pointers,O,this.currentCamera,this.tmpPoints),Tv(this.tmpPoints,this.tmpCentroid3d),(0,rn.md)(d.center,this.tmpCentroid2d),PD(this.currentCamera,A,this.tmpCentroid3d),this.panMomentumEstimator.add(this.tmpCentroid2d,this.tmpCentroid3d,.001*d.timestamp),this.constraintOptions.interactionType=xn.PAN,this.constraintOptions.interactionFactor=Wd(this.beginCenterScreen,this.tmpCentroid2d),_a(this.view,this.currentCamera,this.constraintOptions),v){const j=this.planeHorizontal,te=A,pe=this.rotationValueSmooth.value,be=pe+_b(d.angle-pe),Re=.00125*Math.min(Math.max(d.radius,40),120);this.rotationValueSmooth.gain=Re,this.rotationValueSmooth.update(be);const Ge=this.rotationValueSmooth.value-this.beginAngle;this.rotationMomentumEstimator.add(Ge,.001*d.timestamp),J_(this.currentCamera,te,rg(j,Ge)),this.constraintOptions.interactionType=xn.TUMBLE,this.constraintOptions.interactionFactor=Wd(Math.abs(d.radius*Ge)),_a(this.view,this.currentCamera,this.constraintOptions)}}end(d){d.pointers.size===this.pointerCount&&this.update(d),this.finishController();const v=this.zoomMomentumEstimator.evaluateMomentum();if(v)return new Sf({view:this.view,momentum:v,zoomCenter:this.beginCenter});const O=this.rotationMomentumEstimator.evaluateMomentum();if(O)return new M0({view:this.view,momentum:O,center:this.beginCenter,axis:(0,Ro.mJ)(this.planeHorizontal)});const A=this.panMomentumEstimator.evaluateMomentum();return A?new Cg({view:this.view,momentum:A}):null}computePlanePoints(d,v,O,A){A.length=d.size;const j=this.tmp2d;let te=0;return d.forEach(pe=>{j[0]=pe.x,j[1]=pe.y,void 0===A[te]&&(A[te]=(0,br.c)()),pb(v,O,j,A[te]),te+=1}),A}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],qv.prototype,"view",void 0),qv=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.local.PinchAndPanController")],qv);class M2 extends Tc.a{constructor(v,O,A){super(!0),this.view=v,this.pointerAction=O,this.lastEndTimestamp=0,this.lastTimestamp=0,this.registerIncoming("drag",A,j=>this._handleDrag(j))}_handleDrag(v){if("mouse"===v.data.pointerType&&!Eb(v.data,this.pointerAction))return;const j=this.momentum&&this.momentum.active&&v.timestamp-this.lastEndTimestamp<40;switch(v.data.action){case"start":case"update":if(j)break;this.controller&&this.controller.active?v.data.timestamp-this.lastTimestamp>2&&(this.controller.update(v.data),this.lastTimestamp=v.timestamp):this._startController(v);break;case"end":case"removed":this._endController(v,!0);break;case"added":this._endController(v,!1),this._startController(v)}v.stopPropagation()}_endController(v,O){if(this.controller&&this.controller.active){this.lastEndTimestamp=v.timestamp;const A=this.controller.end(v.data);O&&A&&(this.momentum=A,this.view.state.switchCameraController(this.momentum))}this.controller=null}_startController(v){this.controller=this._createController(),this.view.state.switchCameraController(this.controller),this.controller.begin(v.data),this.lastTimestamp=v.timestamp}_createController(){return this.view.state.isGlobal?new Qv({view:this.view}):new qv({view:this.view})}}class P4 extends Tc.a{constructor(v,O){super(!0),this.view=v,this.registerIncoming("pointer-down",O,()=>this.view.state.stopActiveCameraController())}}class b2 extends Tc.a{constructor(v,O){super(!0),this.key=v,this.registerIncoming("key-down",O,A=>this._handleKeyDown(A))}_handleKeyDown(v){v.data.key===this.key&&(this.activate(),v.stopPropagation())}}class D4 extends b2{constructor(v,O,A){super(O,A),this.view=v}activate(){this.view.goTo({heading:0}).catch(()=>{})}}class x4 extends b2{constructor(v,O,A){super(O,A),this.view=v}activate(){this.view.goTo({tilt:0}).catch(()=>{})}}class S4 extends Tc.a{constructor(v,O=!1){super(!0),this.view=v,this.invert=O,this.registerIncoming("vertical-two-finger-drag",A=>this._handleTwoFinger(A))}_handleTwoFinger(v){const A=(0,rn.s1)(0,v.data.delta*(this.invert?-1:1));switch(v.data.action){case"begin":this.cameraController?.end(),this.cameraController=new bf({view:this.view,pivot:hu.CENTER}),this.view.state.switchCameraController(this.cameraController),this.cameraController.begin(A);break;case"update":this.cameraController?.update(A);break;case"end":this.cameraController?.end(),this.cameraController=null}}}var A4=T(25441);function T2(d){const v=d.native;return v?{buttons:v.buttons.map(O=>O.pressed?O.value?O.value:1:0),axes:v.axes.map(O=>function R4(d,v){const O=Math.abs(d);return O<v?0:Math.sign(d)*(O-v)/(1-v)}(O,d.axisThreshold))}:{buttons:[],axes:[]}}class I4{constructor(v,O){this.element=v,this.input=O,this._hasEventListeners=!1,this._onConnectGamepad=te=>{this._connectGamepad(te.gamepad)},this._onDisconnectGamepad=te=>{const pe=te.gamepad,be=pe.index,Re=this.inputDevices[be];Re&&(this._emitGamepadEvent(pe,T2(Re),!1),this.inputDevices.splice(be,1),this.latestUpdate.splice(be,1),this.input.gamepad.devices.remove(Re),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const A="getGamepads"in window.navigator,j=window.isSecureContext;this.supported=A&&j,this.supported&&(this._forEachGamepad(te=>this._connectGamepad(te)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(v){this._hasEventListeners!==v&&(this._hasEventListeners=v,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(v){this.callback=v}_connectGamepad(v){const O=new pM(v);"unknown"!==O.deviceType&&(this.inputDevices[v.index]=O,this.input.gamepad.devices.add(O)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this.frameTask&&(this.frameTask=(0,w_.A)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const v=document.hasFocus(),O=this.element.contains(document.activeElement),A="document"===this.input.gamepad.enabledFocusMode&&!v||"view"===this.input.gamepad.enabledFocusMode&&!O;this._forEachGamepad(j=>{const te=this.inputDevices[j.index];if(!te)return;const pe=this.latestUpdate[j.index],be=T2(te),Re=A||function w4(d){for(let v=0;v<d.axes.length;v++)if(0!==d.axes[v])return!1;for(let v=0;v<d.buttons.length;v++)if(0!==d.buttons[v])return!1;return!0}(be);pe&&(pe.timestamp===j.timestamp||!pe.active&&Re||function L4(d,v){if(d.axes.length!==v.axes.length||d.buttons.length!==v.buttons.length)return!1;for(let O=0;O<d.axes.length;O++)if(d.axes[O]!==v.axes[O])return!1;for(let O=0;O<d.buttons.length;O++)if(d.buttons[O]!==v.buttons[O])return!1;return!0}(pe.state,be))||this._emitGamepadEvent(j,be,!Re)})}_forEachGamepad(v){const O=window.navigator.getGamepads();for(let A=0;A<O.length;A++){const j=O[A];this._validate(j)&&v(j)}}_emitGamepadEvent(v,O,A){const j=this.latestUpdate[v.index],te=j&&j.active;if(!te&&!A)return;const pe=!te&&A?"start":te&&A?"update":"end";this.latestUpdate[v.index]={timestamp:v.timestamp,state:O,active:A},this.callback&&this.callback({device:this.inputDevices[v.index],state:O,action:pe})}_validate(v){if(!v||!v.connected)return!1;for(let O=0;O<v.axes.length;O++)if(isNaN(v.axes[O]))return!1;return!0}}const C2=(0,al.Z)("trident"),O2=(0,al.Z)("edge"),U4=(0,al.Z)("chrome"),B4=(0,al.Z)("ff"),j4=(0,al.Z)("safari"),Af_touchNone="esri-view-surface--touch-none",Af_touchPan="esri-view-surface--touch-pan";let F4=(()=>{class d{constructor(O,A){this.input=A,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=O,O.getAttribute("tabindex")||O.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new I4(O,this.input),this._gamepadSource.onEvent=j=>this._callback("gamepad",j)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(O=>{this._releasePointerCaptureSafe(O)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(O){this._browserTouchPanningEnabled=O,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(O){this._callback=O}set activeEvents(O){for(const A in this._active)O&&O.has(A)||(this._element.removeEventListener(Ub[A],this._active[A]),delete this._active[A]);O&&O.forEach(A=>{if(!this._active[A]&&Ub[A]){const j=(this._eventHandlers[A]||this._handleDefault).bind(this,A);this._element.addEventListener(Ub[A],j),this._active[A]=j}}),this._gamepadSource.hasEventListeners=O&&O.has("gamepad")}setPointerCapture(O,A){A?(this._element.setPointerCapture(O.pointerId),this._activePointerCaptures.add(O.pointerId)):(this._releasePointerCaptureSafe(O.pointerId),this._activePointerCaptures.delete(O.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Af_touchNone:Af_touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Af_touchPan:Af_touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Af_touchNone),this._element.classList.remove(Af_touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(O){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(O))return;this._element.releasePointerCapture(O)}catch{}}_updateNormalizedPointerLikeEvent(O,A){const j=(0,uu.Eu)(this._element,O);return d.test.disableSubpixelCoordinates&&(j.x=Math.round(j.x),j.y=Math.round(j.y)),A.x=j.x,A.y=j.y,A}_handleKey(O,A){const j=(0,A4.kK)(A);j&&"key-up"===O&&this._keyDownState.delete(j);const te={native:A,key:j,repeat:j&&this._keyDownState.has(j)};j&&"key-down"===O&&this._keyDownState.add(te.key),this._callback(O,te)}_handlePointer(O,A){const j=this._updateNormalizedPointerLikeEvent(A,{native:A,x:0,y:0,pointerType:A.pointerType,button:A.button,buttons:A.buttons,eventId:this._eventId++});this._callback(O,j)}_handlePointerPreventDefault(O,A){const j=this._updateNormalizedPointerLikeEvent(A,{native:A,x:0,y:0,pointerType:A.pointerType,button:A.button,buttons:A.buttons,eventId:this._eventId++});A.preventDefault(),this._callback(O,j)}_handleMouseWheel(O,A){let j=A.deltaY;switch(A.deltaMode){case 0:(C2||O2)&&(j=j/document.documentElement.clientHeight*600);break;case 1:j*=30;break;case 2:j*=900}C2||O2?j*=.7:U4||j4?j*=.6:B4&&(j*=1.375);const pe=Math.abs(j);pe>100&&(j=j/pe*200/(1+Math.exp(-.02*(pe-100))));const be=this._updateNormalizedPointerLikeEvent(A,{native:A,x:0,y:0,deltaY:j});this._callback(O,be)}_handlePointerCaptureLost(O,A){this._activePointerCaptures.delete(A.pointerId),this._handleDefault(O,A)}_handleDefault(O,A){const j={native:A};A.preventDefault(),this._callback(O,j)}_preventAltKeyDefault(O){"Alt"===O.key&&O.preventDefault()}_preventMultiTouchPanning(O){O.touches.length>1&&O.preventDefault()}}return d.test={disableSubpixelCoordinates:!1},d})();const Ub={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class N4 extends Tc.a{constructor(){super(!0),this.registerIncoming("context-menu",v=>{v.data.native.preventDefault()})}}function P2(d,v){return Math.abs(v.x-d.x)+Math.abs(v.y-d.y)}class z4 extends Tc.a{constructor(v){super(!1),this.navigationTouch=v,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(v,O,A,j){return{action:v,pointerType:this.pointerType,button:this.mouseButton,buttons:O.buttons,timestamp:j,pointers:H4(this.activePointerMap),pointer:O,angle:A.angle,radius:A.radius,center:A.center}}_addPointer(v){const O=v.native.pointerId,A=e1(this.activePointerMap).angle,j={event:v,initialAngle:0,lastAngle:0};this.activePointerMap.set(O,j);const te=t1(j,D2(this.activePointerMap));j.initialAngle=te,j.lastAngle=te,this._updatePointerAngles(A)}_updatePointer(v){if(v&&null==v.x&&null==v.y)return;const A=this.activePointerMap.get(v.native.pointerId);A?A.event=v:this._addPointer(v)}_removePointer(v){const O=e1(this.activePointerMap).angle;this.activePointerMap.delete(v),this._updatePointerAngles(O)}_updatePointerAngles(v){const O=e1(this.activePointerMap);this.activePointerMap.forEach(A=>{A.initialAngle=t1(A,O)-v,A.lastAngle=t1(A,O)-v})}_emitEvent(v,O,A){const j=e1(this.activePointerMap);this.drag.emit(this._createPayload(v,O,j,A),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(v){const O=v.data.native.pointerId,A=(0,ro.HA)(v.timestamp);this.activePointerMap.get(O)&&(1===this.activePointerMap.size?(this._updatePointer(v.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",v.data,A),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(O)):(this._removePointer(O),this._emitEvent("removed",v.data,(0,ro.HA)(v.timestamp))))}_handlePointerDrag(v){const O=v.data,A=O.currentEvent,j=(0,ro.HA)(v.timestamp);switch(O.action){case"start":case"update":this.isDragging?this.activePointerMap.has(A.native.pointerId)?(this._updatePointer(A),!this.isCurrentDragSuppressed&&this._emitEvent("update",A,j)):(this._addPointer(A),this._emitEvent("added",A,j),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(A),this.pointerType=v.data.startEvent.pointerType,this.mouseButton=v.data.startEvent.button,this.startStateModifiers=v.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",A,j))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function D2(d){const v=[];return d.forEach(O=>{v.push((0,rn.vW)(O.event.x,O.event.y))}),function V4(d,v){if(v?(v.radius=0,v.center.x=0,v.center.y=0):v={radius:0,center:(0,rn.vW)()},0===d.length)return v;if(1===d.length)return v.center.x=d[0].x,v.center.y=d[0].y,v;if(2===d.length){const[or,pr]=d,[Lr,Br]=[pr.x-or.x,pr.y-or.y];return v.radius=Math.sqrt(Lr*Lr+Br*Br)/2,v.center.x=(or.x+pr.x)/2,v.center.y=(or.y+pr.y)/2,v}let O=0,A=0;for(let or=0;or<d.length;or++)O+=d[or].x,A+=d[or].y;O/=d.length,A/=d.length;const j=d.map(or=>or.x-O),te=d.map(or=>or.y-A);let pe=0,be=0,Re=0,Ge=0,tt=0,ft=0,yt=0;for(let or=0;or<j.length;or++){const pr=j[or],Lr=te[or],Br=pr*pr,gs=Lr*Lr;pe+=Br,be+=gs,Re+=pr*Lr,Ge+=Br*pr,tt+=gs*Lr,ft+=pr*gs,yt+=Lr*Br}const It=.5*(Ge+ft),Nt=.5*(tt+yt),Rt=pe*be-Re*Re,Jt=(It*be-Nt*Re)/Rt,jt=(pe*Nt-Re*It)/Rt,ir=(0,rn.vW)(Jt+O,jt+A);return{radius:Math.sqrt(Jt*Jt+jt*jt+(pe+be)/d.length),center:ir}}(v)}function e1(d){const v=D2(d);let O=0;return d.forEach(A=>{let j=t1(A,v),te=j-A.lastAngle;for(;te>Math.PI;)te-=2*Math.PI;for(;te<-Math.PI;)te+=2*Math.PI;j=A.lastAngle+te,A.lastAngle=j,O+=j-A.initialAngle}),O/=d.size||1,{angle:O,radius:v.radius,center:v.center}}function H4(d){const v=new Map;return d.forEach((O,A)=>v.set(A,O.event)),v}function t1(d,v){const O=d.event;return Math.atan2(O.y-v.center.y,O.x-v.center.x)}var x2;!function(d){d[d.Left=0]="Left",d[d.Middle=1]="Middle",d[d.Right=2]="Right",d[d.Back=3]="Back",d[d.Forward=4]="Forward",d[d.Undefined=-1]="Undefined"}(x2||(x2={}));var Bb=T(84244);class G4 extends Tc.a{constructor(v=250,O=10,A=350,j=35,te=Bb.m){super(!1),this.maximumDoubleClickDelay=v,this.maximumDoubleClickDistance=O,this.maximumDoubleTouchDelay=A,this.maximumDoubleTouchDistance=j,this._clock=te,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(v=>v.doubleClickTimeout=(0,at.hw)(v.doubleClickTimeout))}get hasPendingInputs(){return(0,cu.oE)(this._pointerState,v=>null!=v.doubleClickTimeout)}_pointerId(v){const O=v.native;return"mouse"===O.pointerType?`${O.pointerId}:${O.button}`:`${O.pointerType}`}_handleImmediateClick(v){const O=v.data,A=this._pointerId(O),j=this._pointerState.get(A);if(j){const te="touch"===O.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;P2(j.event.data,O)>te?(this._clearDoubleClickTimeout(A,!0),this._startClick(v)):(this._clearDoubleClickTimeout(A,!1),this._doubleClick.emit(j.event.data,void 0,j.event.modifiers))}else this._startClick(v)}_startClick(v){const O=this._pointerId(v.data);this._pointerState.set(O,{event:v,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(O),"touch"===v.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}),this.refreshHasPendingInputs()}_handlePointerDrag(v){const O=this._pointerId(v.data.currentEvent);this._clearDoubleClickTimeout(O,!0)}_handleDrag(v){const O=this._pointerId(v.data.pointer);this._clearDoubleClickTimeout(O,!0)}_clearDoubleClickTimeout(v,O){const A=this._pointerState.get(v);A&&(A.doubleClickTimeout.remove(),A.doubleClickTimeout=null,O&&this._doubleClickTimeoutExceeded(v),this._pointerState.delete(v),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(v){const O=this._pointerState.get(v);this._click.emit(O.event.data,void 0,O.event.modifiers),O.doubleClickTimeout=null,this._pointerState.delete(v),this.refreshHasPendingInputs()}}class K4 extends Tc.a{constructor(v=250,O=10,A=350,j=35,te=Bb.m){super(!1),this.maximumDoubleClickDelay=v,this.maximumDoubleClickDistance=O,this.maximumDoubleTouchDelay=A,this.maximumDoubleTouchDistance=j,this._clock=te,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",pe=>{this._handlePointerLoss(pe,"pointer-up")}),this.registerIncoming("pointer-capture-lost",pe=>{this._handlePointerLoss(pe,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",pe=>{this._handlePointerLoss(pe,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(v=>{v.immediateDoubleClick&&v.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(v){const O=v.data,A=this._pointerId(O);this._pointerState.has(A)||(this._pointerState.set(A,{downButton:O.native.button,immediateDoubleClick:null}),this.startCapturingPointer(O.native))}_handlePointerLoss(v,O){const A=v.data,j=this._pointerId(A),te=this._pointerState.get(j);if(te&&"pointer-up"===O&&te.downButton===A.native.button){const pe=te.immediateDoubleClick;if(pe){pe.timeoutHandle.remove();const be="touch"===v.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;P2(pe,v.data)>be?this._startImmediateDoubleClick(v,te):(this._immediateDoubleClick.emit(v.data,void 0,pe.modifiers),this._removeState(A))}else this._startImmediateDoubleClick(v,te)}}_startImmediateDoubleClick(v,O){O.immediateDoubleClick={x:v.data.x,y:v.data.y,modifiers:v.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(v.data),"touch"===v.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}}_pointerId(v){const O=v.native;return"mouse"===O.pointerType?`${O.pointerId}:${O.button}`:`${O.pointerType}`}_removeState(v){const O=this._pointerId(v);this._pointerState.delete(O),this.stopCapturingPointer(v.native),this.refreshHasPendingInputs()}}class Y4 extends Tc.a{constructor(v=300,O=1.5,A=6,j=6,te=500,pe=Bb.m){super(!1),this.maximumClickDelay=v,this.movementUntilMouseDrag=O,this.movementUntilPenDrag=A,this.movementUntilTouchDrag=j,this.holdDelay=te,this._clock=pe,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",be=>{this._handlePointerLoss(be,"pointer-up")}),this.registerIncoming("pointer-capture-lost",be=>{this._handlePointerLoss(be,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",be=>{this._handlePointerLoss(be,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(v=>{null!=v.holdTimeout&&(v.holdTimeout.remove(),v.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(v){const O=v.data,A=O.native.pointerId;let j=null;0===this._pointerState.size&&(j=this._clock.setTimeout(()=>{const pe=this._pointerState.get(A);pe&&(pe.isDragging||(this._pointerHold.emit(pe.previousEvent,void 0,v.modifiers),pe.holdEmitted=!0),pe.holdTimeout=null)},this.holdDelay)),this._pointerState.set(A,{startEvent:O,previousEvent:O,startTimestamp:v.timestamp,isDragging:!1,downButton:O.native.button,holdTimeout:j,modifiers:new Set}),this.startCapturingPointer(O.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(v)}_createPointerDragData(v,O,A){return{action:v,startEvent:O.startEvent,previousEvent:O.previousEvent,currentEvent:A}}_handlePointerMove(v){const O=v.data,j=this._pointerState.get(O.native.pointerId);j&&(j.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",j,O),void 0,j.modifiers):function W4(d,v){const O=v.x-d.x,A=v.y-d.y;return Math.sqrt(O*O+A*A)}(O,j.startEvent)>this._getDragThreshold(O.native.pointerType)&&this._startDragging(v),j.previousEvent=O)}_getDragThreshold(v){switch(v){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(v){const O=v.data,A=O.native.pointerId;this._pointerState.forEach(j=>{null!=j.holdTimeout&&(j.holdTimeout.remove(),j.holdTimeout=null),j.isDragging||(j.modifiers=v.modifiers,j.isDragging=!0,A===j.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",j,O)):this._pointerDrag.emit(this._createPointerDragData("start",j,j.previousEvent),v.timestamp))})}_handlePointerLoss(v,O){const A=v.data,j=A.native.pointerId,te=this._pointerState.get(j);te&&(null!=te.holdTimeout&&(te.holdTimeout.remove(),te.holdTimeout=null),te.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",te,"pointer-up"===O?A:te.previousEvent),void 0,te.modifiers):"pointer-up"===O&&te.downButton===A.native.button&&v.timestamp-te.startTimestamp<=this.maximumClickDelay&&!te.holdEmitted&&this._immediateClick.emit(A),this._pointerState.delete(j),this.stopCapturingPointer(A.native),0===this._pointerState.size&&this._moveHandle.pause())}}class Z4{constructor(v){this.callbacks=v,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(v){const O=v.data,A=O.pointers.size;switch(O.action){case"start":this.currentCount=A,this._emitStart(v);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=A,this._emitStart(v);break;case"update":this._emitUpdate(v);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=A,this._emitStart(v);break;case"end":this._emitEnd(v),this.currentCount=0}this.previousEvent=v}_emitStart(v){this.startEvent=v,this.callbacks.condition(this.currentCount,v)&&this.callbacks.start(this.currentCount,v,this.startEvent)}_emitUpdate(v){this.callbacks.condition(this.currentCount,v)&&this.callbacks.update(this.currentCount,v,this.startEvent)}_emitEnd(v){this.callbacks.condition(this.currentCount,v)&&this.callbacks.end(this.currentCount,v,this.startEvent),this.startEvent=null}}class k4 extends Tc.a{constructor(v=20,O=40){super(!1),this._threshold=v,this._maxDelta=O,this.state="ready",this.emittedArtificalEnd2=!1,this._vertical=this.registerOutgoing("vertical-two-finger-drag"),this._artificalDrag=this.registerOutgoing("drag"),this.dragEventSeparator=new Z4({start:(A,j)=>this._observeStart(A,j),update:(A,j,te)=>this._observeUpdate(A,j,te),end:(A,j)=>this._observeEnd(j)}),this.registerIncoming("drag",A=>this.dragEventSeparator.handle(A))}get failed(){return"failed"===this.state}_observeStart(v,O){1===v&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:O.data.button,buttons:O.data.buttons,pointerType:O.data.pointerType,timestamp:O.data.timestamp,pointers:O.data.pointers,pointer:O.data.pointer,angle:O.data.angle,radius:O.data.radius,center:O.data.center}),O.stopPropagation()),this.state=2===v?"ready":"failed"}_observeUpdate(v,O,A){if("failed"!==this.state&&2===v)return"active"===this.state?(this._vertical.emit({delta:O.data.center.y-this._thresholdReachedCenter.y,action:"update"}),void O.stopPropagation()):void(this._checkMovementWithinLimits(O.data,A.data)?this._checkVerticalThresholdReached(O.data,A.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=O.data.center,this._artificalDrag.emit({action:"end",button:O.data.button,buttons:O.data.buttons,pointerType:O.data.pointerType,timestamp:O.data.timestamp,pointers:O.data.pointers,pointer:O.data.pointer,angle:O.data.angle,radius:O.data.radius,center:O.data.center}),this._vertical.emit({delta:O.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),O.stopPropagation()):this.state="failed")}_observeEnd(v){"active"===this.state&&(this._vertical.emit({delta:v.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",v.stopPropagation())}_checkMovementWithinLimits(v,O){let A=-1/0,j=1/0,te=-1/0,pe=1/0;O.pointers.forEach(Rt=>{A=Math.max(A,Rt.x),j=Math.min(j,Rt.x),te=Math.max(te,Rt.y),pe=Math.min(pe,Rt.y)});let be=-1/0,Re=1/0,Ge=-1/0,tt=1/0;v.pointers.forEach(Rt=>{be=Math.max(be,Rt.x),Re=Math.min(Re,Rt.x),Ge=Math.max(Ge,Rt.y),tt=Math.min(tt,Rt.y)});const ft=A-j,yt=te-pe,It=be-Re,Nt=Ge-tt;return Math.abs(v.center.x-O.center.x)<this._threshold&&Math.abs(It-ft)<=this._maxDelta&&Math.abs(Nt-yt)<=this._maxDelta}_checkVerticalThresholdReached(v,O){let A=Math.abs(v.center.y-O.center.y);return v.pointers.forEach((j,te)=>{const pe=O.pointers.get(te);A=Math.min(A,Math.abs(j.y-pe.y))}),A>=this._threshold}}let fh=class extends Li.Z{constructor(){super(...arguments),this._handles=new so.Z}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this.disconnect()}get primaryDragAction(){return this._get("primaryDragAction")}set primaryDragAction(d){"pan"!==d&&"rotate"!==d||d===this._get("primaryDragAction")||(this._set("primaryDragAction",d),this._updateMode())}get mode(){return this._get("mode")}set mode(d){"default"!==d&&"pro"!==d||d===this._get("mode")||(this._set("mode",d),this._updateMode())}get hasPendingInputs(){return this._inputManager?.hasPendingInputs}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}disconnect(){this.view.viewEvents.disconnect(),this._inputManager&&(this._inputManager.destroy(),this._inputManager=null),this._source&&(this._source.destroy(),this._source=null)}connect(){const d=this.view;this._source=new F4(this.view.surface,d.input);const v=[new K4,new Y4,new G4,new z4(this.view.navigation),new k4],O=new Jy.$({eventSource:this._source,recognizers:v});this._inputManager=O,O.installHandlers("prevent-context-menu",[new N4],Jy.f.INTERNAL),this._modeDragPan=new M2(d,"primary"),this._modeDragRotate=new Tb(d,"secondary",hu.CENTER),this._modeDragZoom=new IU(d,"tertiary");O.installHandlers("navigation",[new P4(d),new AU(d),new m4(d),new g4(d,{left:"ArrowLeft",right:"ArrowRight",forward:"ArrowUp",backward:"ArrowDown",up:"u",down:"j",headingLeft:"a",headingRight:"d",tiltUp:"w",tiltDown:"s",zoomIn:"+",zoomOut:"-"}),new y4(d),new x4(d,"p"),new D4(d,"n"),new Tb(d,"primary",hu.EYE,["b"]),new Tb(d,"secondary",hu.CENTER,["b"]),new M2(d,"tertiary",["b"]),this._modeDragRotate,this._modeDragZoom,this._modeDragPan,new S4(d)],Jy.f.INTERNAL),this.view.viewEvents.connect(O),this._updateMode(),this._handles.add((0,wr.YP)(()=>this.view.navigation?.browserTouchPanEnabled,j=>{this._source.browserTouchPanningEnabled=!j},wr.nn))}_updateMode(){const v=this.primaryDragAction,O=jb.get(this.mode).get(v);this._modeDragPan&&(this._modeDragPan.pointerAction=O.pan),this._modeDragRotate&&(this._modeDragRotate.pointerAction=O.rotate),this._modeDragZoom&&(this._modeDragZoom.pointerAction=O.zoom)}get test(){return{inputManager:this._inputManager,modeDragPan:this._modeDragPan,modeDragRotate:this._modeDragRotate,modeDragZoom:this._modeDragZoom}}};(0,Je._)([(0,ht.Cb)()],fh.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({value:"pan"})],fh.prototype,"primaryDragAction",null),(0,Je._)([(0,ht.Cb)({value:"default"})],fh.prototype,"mode",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],fh.prototype,"hasPendingInputs",null),(0,Je._)([(0,ht.Cb)()],fh.prototype,"latestPointerType",null),(0,Je._)([(0,ht.Cb)()],fh.prototype,"latestPointerLocation",null),(0,Je._)([(0,ht.Cb)()],fh.prototype,"_inputManager",void 0),fh=(0,Je._)([(0,Ds.j)("esri.views.3d.input.SceneInputManager")],fh);const jb=new Map,Fb=new Map,Nb=new Map;Fb.set("pan",{pan:"primary",rotate:"secondary",zoom:"tertiary"}),Fb.set("rotate",{pan:"secondary",rotate:"primary",zoom:"tertiary"}),Nb.set("pan",{pan:"primary",rotate:"tertiary",zoom:"secondary"}),Nb.set("rotate",{pan:"tertiary",rotate:"primary",zoom:"secondary"}),jb.set("default",Fb),jb.set("pro",Nb);const $4=fh;var La=T(77029),Ml=T(993),Nl=T(93605);let zu,Lf,Wb=!1,Vb=!1,zb=!1,Hb=!1,Pg=null;function S2(){Pg&&(Pg(),Pg=null)}function A2(d,v,O,A,j){S2();const te=zu.height,pe=Lf;pe.beginPath(),pe.lineWidth=1,pe.strokeStyle=j,pe.moveTo(d,te-O),pe.lineTo(v,te-O),pe.stroke(),pe.lineTo(v,te-A),pe.stroke(),pe.lineTo(v,te-O),pe.stroke(),pe.lineTo(d,te-O),pe.stroke(),pe.lineTo(d,te-O),pe.stroke(),pe.closePath()}function q4(d,v){Wb&&(v&&zb||!v&&Hb)&&A2(d.aabr[0],d.aabr[2],d.aabr[1],d.aabr[3],v?"green":"red")}var Za=T(79721),r1=T(17962),L2=T(80805);const mh=(0,br.c)(),wf=(0,Ao.c)(),Dg=(0,Ao.c)(),Gb=(0,br.c)(),e5=(0,ao.c)(),t5=(0,qo.c)(),Kb=(0,Fu.Ue)(),r5=(0,br.c)(),s5=(0,ui.Ue)();class i5{constructor(){this.aabr=(0,ui.Ue)(),this.distance=0,this.culled=!1,this.visible=!1}}class n5{constructor(v,O,A={}){this.graphics3DGraphic=v,this.slicePlaneEnabled=O,this.info=A}}class o5{constructor(){this.active=new Map,this.visible=new Map}clear(){this.active.clear(),this.visible.clear()}}class a5{}class l5{constructor(){this.sortArray=new La.Z({allocator:v=>v||new a5})}}var pu;!function(d){d[d.Idle=0]="Idle",d[d.Process=1]="Process",d[d.Sort=2]="Sort",d[d.Deconflict=3]="Deconflict",d[d.NumStates=4]="NumStates"}(pu||(pu={}));class w2{constructor(){this.camera=new qn.V,this.slicePlane=(0,jd.c)(),this.slicePlaneEnabled=!1}copyFrom(v){this.camera.copyFrom(v.camera),(0,jd.a)(v.slicePlane,this.slicePlane),this.slicePlaneEnabled=v.slicePlaneEnabled}}let Rf=class extends Li.Z{constructor(){super(...arguments),this._dirty=!1,this._runningViewState=new w2,this._state=pu.Idle,this.graphics=new o5,this.iterators=new l5,this.accBinsNumX=15,this.accBinsNumY=20,this.accBinsSizeX=0,this.accBinsSizeY=0,this.accBins=null,this.accNumTests=0}get dirty(){return this._dirty}get state(){return this._state}destroy(){this.graphics.clear(),this.iterators=null}setDirty(){!this._dirty&&this.graphics.active.size>0&&(this._dirty=!0,this.notifyChange("updating"))}get updating(){return this._state!==pu.Idle||this._dirty}get updatingProgress(){if(!this.updating)return 1;const d=this._state/pu.NumStates;return this._dirty?.5*d:d}get running(){return this.view.ready&&null!=this.view.state&&this.updating}runTask(d){switch(this._state){case pu.Idle:this._startUpdate(),d.madeProgress();case pu.Process:if(this._state=pu.Process,!this._processActiveGraphics(d))return;case pu.Sort:if(this._state=pu.Sort,!this._sortVisibleGraphics(d))return;case pu.Deconflict:if(this._state=pu.Deconflict,!this._deconflictVisibleGraphics(d))return;default:(function J4(d,v){if(!Vb||!Lf)return;S2();const O=Lf;let A=0;for(let j=0;j<d.accBinsNumX;j++)for(let te=0;te<d.accBinsNumY;te++){const pe=d.accBins[j][d.accBinsNumY-1-te];A+=pe.length;const be=j*d.accBinsSizeX,Re=(j+1)*d.accBinsSizeX,Ge=te*d.accBinsSizeY,tt=(te+1)*d.accBinsSizeY;O.fillText(pe.length.toFixed(),be+5,Ge+15),A2(be,Re,Ge,tt,"blue")}O.fillText("total totalShownLabels: "+A,70,40),O.fillText("total visible labels: "+v.size,70,50),O.fillText("total numTests: "+d.accNumTests,70,30)})(this,this.graphics.visible),this._state=pu.Idle,this.notifyChange("updating")}}modifyGraphics(d,v){d.forEach(v?O=>this.addToActiveGraphics(O):O=>this.removeFromActiveGraphics(O)),this.setDirty()}layerSupportsDeconfliction(d){if((0,at.Wi)(d)||"object3d"!==d.type)return!1;const v=d.stageObject;return 1===(v?v.geometryRecords.length:0)&&v.geometryRecords[0].material instanceof L2.A}_startUpdate(){(function X4(d){zb=Nl.Z.DECONFLICTOR_SHOW_VISIBLE,Hb=Nl.Z.DECONFLICTOR_SHOW_INVISIBLE,Wb=zb||Hb,Vb=Nl.Z.DECONFLICTOR_SHOW_GRID,Pg=null,Wb||Vb?Pg=()=>function Q4(d){null==zu&&(zu=document.createElement("canvas"),zu.setAttribute("id","canvas2d"),d.surface.parentElement.style.position="relative",d.surface.parentElement.appendChild(zu));const{state:v}=d,{camera:O,pixelRatio:A}=v,{width:j,height:te}=O,be=te*A;zu.setAttribute("width",j*A+"px"),zu.setAttribute("height",`${be}px`),zu.setAttribute("style",`position:absolute;left:0px;top:0px;display:block;pointer-events:none;width:${j}px;height:${te}px`),Lf=zu.getContext("2d"),Lf.clearRect(0,0,j,te),Lf.font="12px Arial"}(d):zu&&(zu.parentElement.removeChild(zu),zu=null)})(this.view),this._dirty=!1,this._runningViewState.copyFrom(this.viewState);const{fullWidth:d,fullHeight:v}=this._runningViewState.camera;this._initBins(d,v),this._resetIterators()}addToActiveGraphics(d){d.info[this.visibilityGroup]=new i5,this.graphics.active.set(d.graphics3DGraphic.graphic.uid,d),this.setDirty()}removeFromActiveGraphics(d){this._removeFromVisibleGraphics(d),function c5(d,v){const O=d.graphics3DGraphic;O.destroyed||O.clearVisibilityFlag(Za.P.DECONFLICTION,v)}(d,this.visibilityGroup),delete d.info[this.visibilityGroup],this.graphics.active.delete(d.graphics3DGraphic.graphic.uid),this.setDirty()}_addToVisibleGraphics(d){this.graphics.visible.set(d.graphics3DGraphic.graphic.uid,d)}_removeFromVisibleGraphics(d){this.graphics.visible.delete(d.graphics3DGraphic.graphic.uid)}_processActiveGraphics(d){const v=this._ensureActiveGraphicsIterator(),O=(0,on.a)(e5,this._runningViewState.camera.projectionMatrix),A="global"===this.view.viewingMode&&1===this.view.map.ground.opacity&&this._runningViewState.camera.relativeElevation>0?t5:null;let j=0;for((0,at.pC)(A)&&((0,Et.m)(A,br.Z,this._runningViewState.camera.viewMatrix),A[3]=(0,Mo.Iu)(this.view.spatialReference).radius,j=(0,qo.e)(A,br.Z));!d.done;){d.madeProgress();const te=v.next();if(!0===te.done)return this._resetActiveGraphicsIterator(),!0;const pe=te.value,be=pe&&pe.info[this.visibilityGroup];be&&(this._collectGraphics3DGraphics(pe,O,A,j),be.culled?this._removeFromVisibleGraphics(pe):this._addToVisibleGraphics(pe))}return!1}_sortVisibleGraphics(d){const v=this._ensureSortGraphicsIterator();for(;!d.done;){const O=v.next();if(d.madeProgress(),!0===O.done)return this._resetSortGraphicsIterator(),!0}return!1}_deconflictVisibleGraphics(d){const v=this._ensureVisibleGraphicsIterator(),O=this.visibilityGroup===Za.E.LABEL;for(;!d.done;){d.madeProgress();const A=v.next();if(!0===A.done)return this._resetVisibleGraphicsIterator(),!0;const j=A.value,te=j.info[this.visibilityGroup];if(!te||te.culled)continue;const pe=j.graphics3DGraphic,be=(!O||pe.isVisible())&&!this._isConflicted(j);be&&this._addToBins(j),te.visible=be,this._setGraphicVisibility(j,be),q4(te,be)}return!1}_resetIterators(){this.iterators.active=null,this.iterators.visible=null,this.iterators.sort=null}_ensureActiveGraphicsIterator(){return this.iterators.active||(this.iterators.active=R2(this.graphics.active)),this.iterators.active}_resetActiveGraphicsIterator(){this.iterators.active=null}_ensureVisibleGraphicsIterator(){return this.iterators.visible||(this.iterators.visible=R2(this.graphics.visible)),this.iterators.visible}_resetVisibleGraphicsIterator(){this.iterators.visible=null}_ensureSortGraphicsIterator(){return this.iterators.sort||(this.iterators.sort=function*u5(d,v,O){v.clear(),d.forEach((j,te)=>{const pe=v.pushNew();pe.id=te,pe.prio=j.info?-j.info[O].distance:Number.MAX_VALUE}),yield;const A=v.iterableSort((j,te)=>te.prio-j.prio);for(let j=A.next();!j.done;j=A.next())yield;v.forAll(j=>{const te=d.get(j.id);te&&(d.delete(j.id),d.set(j.id,te))}),v.clear()}(this.graphics.visible,this.iterators.sortArray,this.visibilityGroup)),this.iterators.sort}_resetSortGraphicsIterator(){this.iterators.sort=null}_collectGraphics3DGraphics(d,v,O,A){const j=d.graphics3DGraphic;if(j.destroyed)return;const te=d.info[this.visibilityGroup];if(!j.isVisible(Za.E.GRAPHIC,Za.P.DECONFLICTION))return void(te.culled=!0);const pe=this.getGraphicsLayers(j);(0,ui.cS)(te.aabr);let be=null;for(const Re of pe){if(!this.layerSupportsDeconfliction(Re))continue;const Ge=Re.stageObject.geometryRecords[0].material;if((0,at.Wi)(be)){if(be=this._getProjectionInfo(Re,v,_5),be.isOutsideScreen||this._isCulledBySlice(d,mh)||(0,at.pC)(O)&&this._isCulledByHorizon(be,O,A))return void(te.culled=!0);!Nl.Z.TESTS_DISABLE_OPTIMIZATIONS&&te.visible&&(be.distance*=.7)}this._expandBoundingRect(te,Re,Ge,be)}(0,at.Wi)(be)?te.culled=!0:(te.distance=be.distance,te.culled=!1)}_getProjectionInfo(d,v,O){const A=this._runningViewState.camera,j=d.stageObject,te=j.geometryRecords[0],pe=te.material,be=(0,qo.g)(j.boundingVolumeWorldSpace.bounds);(0,Et.m)(mh,be,A.viewMatrix);const Re=te.geometry.vertexAttributes,Ge=Re.get(No.T.NORMAL).data,tt=Re.get(No.T.AUXPOS1).data;return pe.applyShaderOffsetsView(mh,Ge,j.transformation,tt,A,O.scaleInfo,mh),(0,Ml.s)(wf,mh[0],mh[1],mh[2],1),(0,Ml.t)(Dg,wf,A.projectionMatrix),(0,Et.g)(O.positionNDC,Dg,1/Dg[3]),pe.applyShaderOffsetsNDC(O.positionNDC,tt,A,O.positionNDC,Gb),O.distanceWithoutPolygonOffset=A.depthNDCToWorld(Gb[2]),O.distance=Gb[2]===O.positionNDC[2]?O.distanceWithoutPolygonOffset:A.depthNDCToWorld(O.positionNDC[2]),(0,Ml.s)(Dg,O.positionNDC[0],O.positionNDC[1],O.positionNDC[2],1),(0,Ml.t)(wf,Dg,v),(0,Ml.b)(wf,wf,1/wf[3]),(0,Et.s)(O.positionView,mh[0],mh[1],mh[2]),O}_isCulledByHorizon(d,v,O){return(0,Et.c)(Kb.direction,d.positionView),(0,Et.s)(Kb.origin,0,0,0),!!(0,qo.h)(v,Kb,r5)&&d.distanceWithoutPolygonOffset>O}_isCulledBySlice(d,v){return d.slicePlaneEnabled&&this._runningViewState.slicePlaneEnabled&&(0,jd.e)(this._runningViewState.slicePlane,v)}_expandBoundingRect(d,v,O,{positionNDC:A,scaleInfo:j}){const te=this._runningViewState.camera,pe=v.getScreenSize(d5);(0,r1.TU)(pe,j.factor,pe),pe[0]*=te.pixelRatio,pe[1]*=te.pixelRatio;const be=(0,ui.cv)(O.calculateRelativeScreenBounds(pe,j.factorAlignment.scale,s5),(0,cs.t7)(0,te.fullWidth,.5+.5*A[0]),(0,cs.t7)(0,te.fullHeight,.5+.5*A[1])),Re=this.iconMarginFactor;if(0!==Re){const Ge=Re*Math.min((0,ui.bf)(be),(0,ui.Cb)(be));be[0]-=Ge,be[1]-=Ge,be[2]+=Ge,be[3]+=Ge}(0,ui.jn)(d.aabr,be,d.aabr)}_isConflicted(d){const v=d.graphics3DGraphic.graphic.uid,O=d.info[this.visibilityGroup];for(let A=Math.floor(O.aabr[0]/this.accBinsSizeX);A<=Math.floor(O.aabr[2]/this.accBinsSizeX);A++)if(!(A<0||A>=this.accBinsNumX))for(let j=Math.floor(O.aabr[1]/this.accBinsSizeY);j<=Math.floor(O.aabr[3]/this.accBinsSizeY);j++){if(j<0||j>=this.accBinsNumY)continue;const te=this.accBins[A][j];for(let pe=0;pe<te.length;pe++){const be=te.data[pe],Re=be.info[this.visibilityGroup];if(Re&&Re.visible&&be.graphics3DGraphic.graphic.uid!==v&&(this.accNumTests++,(0,ui.kK)(Re.aabr,O.aabr)))return!0}}return!1}_initBins(d,v){if(null==this.accBins){this.accBins=[];for(let O=0;O<this.accBinsNumX;O++){this.accBins.push([]);const A=this.accBins[this.accBins.length-1];for(let j=0;j<this.accBinsNumY;j++)A.push(new La.Z)}}else for(let O=0;O<this.accBinsNumX;O++)for(let A=0;A<this.accBinsNumY;A++)this.accBins[O][A].clear();this.accBinsSizeX=d/this.accBinsNumX,this.accBinsSizeY=v/this.accBinsNumY,this.accNumTests=0}_addToBins(d){const v=d.info[this.visibilityGroup],O=Math.floor(v.aabr[0]/this.accBinsSizeX),A=Math.floor(v.aabr[2]/this.accBinsSizeX),j=Math.floor(v.aabr[1]/this.accBinsSizeY),te=Math.floor(v.aabr[3]/this.accBinsSizeY);for(let pe=O;pe<=A;pe++)if(!(pe<0||pe>=this.accBinsNumX))for(let be=j;be<=te;be++)be<0||be>=this.accBinsNumY||this.accBins[pe][be].push(d)}_setGraphicVisibility(d,v){const O=d.graphics3DGraphic;O.destroyed||(O.setVisibilityFlag(Za.P.DECONFLICTION,v,this.visibilityGroup),this.visibilityGroup===Za.E.LABEL&&this.view.labeler.setLabelGraphicVisibility(O,v))}};function*R2(d){if(Map.prototype.entries){const v=d.entries();for(let O=v.next();!O.done;O=v.next())yield O.value[1]}else yield*d.values()}(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Rf.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],Rf.prototype,"updating",null),Rf=(0,Je._)([(0,Ds.j)("esri.views.3d.layers.graphics.Deconflictor")],Rf);const d5=(0,po.a)(),_5=new class h5{constructor(){this.positionView=(0,br.c)(),this.positionNDC=(0,br.c)(),this.distance=0,this.distanceWithoutPolygonOffset=0,this.scaleInfo={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}}}get isOutsideScreen(){const v=this.positionNDC;return v[0]<-1||v[1]<-1||v[2]<-1||v[0]>=1||v[1]>=1}};let s1=class extends Rf{constructor(){super(...arguments),this.visibilityGroup=Za.E.LABEL,this.iconMarginFactor=0,this._lastDeconfliction=0}get viewState(){return this.parent.viewState}runTask(d){if(this.parent.running)return;const v=performance.now();(d.state===lo.ZM.IDLE||v-this._lastDeconfliction>2e3)&&(super.runTask(d),this.state===pu.Idle&&(this._lastDeconfliction=v))}enabledChanged(d,v){this.modifyGraphics(v,d.labelsEnabled)}getGraphicsLayers(d){return d.labelGraphics}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],s1.prototype,"parent",void 0),s1=(0,Je._)([(0,Ds.j)("esri.views.3d.layers.graphics.LabelDeconflictor")],s1);let Yb=class extends Rf{constructor(){super(...arguments),this._handles=new so.Z,this._contexts=new Map,this._viewState=new w2,this.visibilityGroup=Za.E.GRAPHIC,this._iconMarginFactor=-.1}get labels(){return this._labels}get viewState(){return this._viewState}initialize(){this._handles.add([(0,wr.YP)(()=>this.view?.state?.camera,()=>{this._updateViewState(),this.setDirty()}),(0,wr.YP)(()=>this.view?.map?.ground?.opacity,(d,v)=>{1!==d&&1!==v||this.setDirty()}),(0,wr.YP)(()=>this.view?.slicePlane,()=>{this._updateSlicePlane(),this._slicePlaneChanged()},wr.nn)]),this._frameTask=this.view.resourceController.scheduler.registerTask(lo.T8.GRAPHICS_DECONFLICTOR,this),this._labels=new s1({view:this.view,parent:this})}destroy(){this._labels.destroy(),this._labels=null,this._handles.destroy(),this._handles=null,this._frameTask&&(this._frameTask.remove(),this._frameTask=null)}get iconMarginFactor(){return this._iconMarginFactor}set iconMarginFactor(d){this._iconMarginFactor=d,this.setDirty()}setDirty(){this._contexts.size>0&&(super.setDirty(),this._labels.setDirty())}runTask(d){super.runTask(d),this.running||this._labels.setDirty()}setInitialIconVisibilityFlag(d,v){const O=!(this._graphicSupportsDeconfliction(v)&&Zb(d));v.setVisibilityFlag(Za.P.DECONFLICTION,O,Za.E.GRAPHIC)}_updateViewState(){this.view&&this.view.state&&(this._viewState.camera.copyFrom(this.view.state.camera),this._updateSlicePlane())}_updateSlicePlane(){const d=this.view?this.view.slicePlane:null;(0,at.pC)(d)&&(0,jd.t)(d,this._viewState.camera.viewMatrix,this._viewState.slicePlane),this._viewState.slicePlaneEnabled=(0,at.pC)(d)}_slicePlaneChanged(){(0,cu.oE)(this._contexts,(d,v)=>v.symbolCreationContext.slicePlaneEnabled)&&this.setDirty()}addGraphicsOwner(d){let v=this._contexts.get(d);return null==v&&(v=new Map,this._contexts.set(d,v),this.setDirty()),{addGraphic:O=>this._addGraphic(d,v,O),removeGraphic:O=>this._removeGraphic(v,O),labelingInfoChange:()=>this._labels.enabledChanged(d,v),featureReductionChange:()=>this.enabledChanged(d,v),slicePlaneEnabledChange:()=>this._slicePlaneEnabledChanged(d,v),clear:()=>v.forEach(O=>this._removeGraphic(v,O.graphics3DGraphic))}}removeGraphicsOwner(d){const v=this._contexts.get(d);v&&(v.forEach(O=>this._removeGraphic(v,O.graphics3DGraphic)),this._contexts.delete(d),this.setDirty())}_addGraphic(d,v,O){const A=O.graphic.uid,j=new n5(O,d.symbolCreationContext.slicePlaneEnabled);v.set(A,j),Zb(d)&&this.addToActiveGraphics(j),d.labelsEnabled&&this._labels.addToActiveGraphics(j)}_removeGraphic(d,v){const O=v.graphic.uid,A=d.get(O);A&&(this.removeFromActiveGraphics(A),this._labels.removeFromActiveGraphics(A),d.delete(O),this.setDirty())}enabledChanged(d,v){const O=Zb(d);O||function f5(d){const v=d.graphics3DGraphics;v&&v.forEach(O=>O.clearVisibilityFlag(Za.P.DECONFLICTION))}(d),this.modifyGraphics(v,O)}_slicePlaneEnabledChanged(d,v){const O=d.symbolCreationContext.slicePlaneEnabled;v.forEach(A=>A.slicePlaneEnabled=O),this.setDirty()}getGraphicsLayers(d){return d.graphics}_graphicSupportsDeconfliction(d){if(d.isDraped)return!1;const v=d.graphics;if(!v||!v.length)return!1;for(const O of v)if(this.layerSupportsDeconfliction(O))return!0;return!1}};function Zb(d){const v=d.layer;return!(!v||!v.featureReduction||"selection"!==v.featureReduction.type)}Yb=(0,Je._)([(0,Ds.j)("esri.views.3d.layers.graphics.GraphicsDeconflictor")],Yb);var xg=T(59213),m5=T(84786),g5=T(22445),y5=T(9824),v5=T(18170),E5=T(23641),M5=T(95428),b5=T(13939);function kb(d){return d instanceof b5.Z?d.graphics3DSymbol:d instanceof M5.Z?d:null}var pa=T(5548);const Sg=vo.Z.getLogger("esri.views.3d.layers.graphics.labelPlacement");function T5(d){const v=function w5(d){const v=d.labelClass.labelPlacement,{labelSymbol:O,graphics3DGraphic:A}=d,j=kb(A.graphics3DSymbol),te=(0,at.yw)(j,be=>"point-3d"===be.symbol.type?be.symbol:null),pe=Hd[v]||i1(d);return(0,at.pC)(te)&&te.supportsCallout()&&te.hasVisibleVerticalOffset()&&!A.isDraped?{placement:null,hasLabelVerticalOffset:!1,verticalOffset:U2(te.verticalOffset),anchor:null,normalizedOffset:null}:O&&O.hasVisibleVerticalOffset()&&((0,at.Wi)(te)||!te.supportsCallout()||!te.verticalOffset||A.isDraped)?function L5(d){return"above-center"===d}(pe.placement)?{placement:"above-center",verticalOffset:U2(O.verticalOffset),anchor:"bottom",normalizedOffset:[0,pe.normalizedOffset[1],0],hasLabelVerticalOffset:!0}:(Sg.errorOncePerTick("Callouts and vertical offset on labels are currently only supported with 'above-center' label placement (not with "+v+" placement)"),null):{placement:null,verticalOffset:null,anchor:null,normalizedOffset:null,hasLabelVerticalOffset:!1}}(d);if((0,at.Wi)(v))return null;const O=function C5(d,v){if(v.anchor)return v;const O=d.labelClass.labelPlacement,A=Hd[O],j=A||i1(d);return O&&!A&&Sg.warnOncePerTick(`the requested label placement '${O}' is currently unsupported in SceneView.`),function O5(d,v){const O=v.graphics3DGraphic.graphic.geometry;if((0,at.Wi)(O))return null;if((0,at.pC)(v.disablePlacement))return v.labelClass.labelPlacement?(Sg.warnOncePerTick(I2(d.placement,v.disablePlacement.logEntityDescription)),i1(v)):d;const A=O.type;switch(A){case"polyline":case"polygon":case"extent":case"multipoint":if(v.labelClass.labelPlacement)return Sg.warnOncePerTick(I2(d.placement,`'${A}' geometries`)),i1(v);break;case"point":case"mesh":return d}return d}(j,d)}(d,v);if((0,at.Wi)(O))return null;const j=!!v.hasLabelVerticalOffset;return function P5(d,v,O){const A=O.graphics3DGraphic.graphic.geometry;if((0,at.Wi)(A))return null;switch(A.type){case"point":!function x5(d,v,O){const A=$b(O);if((0,at.Wi)(A))return;const j=O.graphics3DGraphic.graphics[0];switch((0,at.pC)(j)?j.getCenterObjectSpace(d.translation):(0,Et.s)(d.translation,0,0,0),A.type){case"icon":case"text":!function S5(d,v,O,A){const{graphics3DGraphic:j}=O,te=(0,at.pC)(A)?A.getScreenSize():null;if(!j.isDraped&&(0,at.pC)(te)){const pe=function A5(d,v=R5){const{graphics3DGraphic:O}=d,A=O.graphics[0],j=(0,at.pC)(A)?A.stageObject.geometryRecords[0].material:null;if(j&&j instanceof L2.A){const te=j.parameters.anchorPosition;v[0]=2*(te[0]-.5),v[1]=2*(te[1]-.5)}else v[0]=0,v[1]=0;return v}(O);Ag[0]=te[0]/2*(v.normalizedOffset[0]-pe[0]),Ag[1]=te[1]/2*(v.normalizedOffset[1]-pe[1]),d.screenOffset[0]=Ag[0],d.hasLabelVerticalOffset?(d.centerOffset[1]=Ag[1],d.centerOffsetUnits="screen"):d.screenOffset[1]=Ag[1]}else d.hasLabelVerticalOffset||"center"===d.anchor||(Hd[O.labelClass.labelPlacement]&&Sg.warnOncePerTick(`the requested placement '${v.placement}' is currently unsupported for draped graphics`),d.anchor="center")}(d,v,O,j);break;case"object":Jb(d,v,j)}}(d,v,O);break;case"polygon":!function D5(d,v,O){const A=$b(O);if(!(0,at.Wi)(A))switch(A.type){case"extrude":{const j=O.graphics3DGraphic.graphics[0];(0,at.pC)(j)?(j.getBoundingBoxObjectSpace(Lg),(0,pa.be)(Lg,d.translation),d.translation[2]=(0,pa.Cb)(Lg)/2):(0,Et.s)(d.translation,0,0,0),Jb(d,v,j);break}}}(d,v,O);break;case"mesh":Jb(d,v,O.graphics3DGraphic.graphics[0])}return d}({anchor:O.anchor,verticalOffset:v.verticalOffset,screenOffset:(0,po.a)(),centerOffset:(0,Ao.f)(0,0,0,-1),centerOffsetUnits:"world",translation:(0,br.c)(),elevationOffset:0,hasLabelVerticalOffset:j},O,d)}function $b(d){const O=kb(d.graphics3DGraphic.graphics3DSymbol);return(0,at.pC)(O)?O.symbol.symbolLayers.getItemAt(0):null}function I2(d,v){return`the requested label placement '${d}' is currently unsupported for ${v} in SceneView.`}function i1(d){const v=d.graphics3DGraphic.graphic.geometry;if((0,at.Wi)(v))return null;switch(v.type){case"polyline":case"extent":case"multipoint":return{placement:"center-center",normalizedOffset:null,anchor:"center"};case"polygon":{const O=$b(d);return(0,at.pC)(O)&&"extrude"===O.type?Hd["above-center"]:{placement:"center-center",normalizedOffset:null,anchor:"center"}}case"point":case"mesh":return Hd["above-center"];default:return}}function Jb(d,v,O){const A=(0,at.pC)(O)?O.getBoundingBoxObjectSpace(Lg):Lg,j=(0,br.f)(A[3]-A[0],A[4]-A[1],A[5]-A[2]),te=Math.sqrt(j[0]*j[0]+j[1]*j[1]);d.centerOffset[0]=te/2*v.normalizedOffset[0];const pe=d.translation[2],be=j[2]/2*v.normalizedOffset[1];d.translation[2]=0,d.elevationOffset=pe+be;const Re=(0,Et.l)(j);d.centerOffset[2]=Re/2*v.normalizedOffset[2]}function U2(d){const{screenLength:v,minWorldLength:O,maxWorldLength:A}=d;return{screenLength:v,minWorldLength:O,maxWorldLength:A}}const Hd={"above-center":{placement:"above-center",normalizedOffset:[0,1,0],anchor:"bottom"},"above-left":{placement:"above-left",normalizedOffset:[-1,1,0],anchor:"bottom-right"},"above-right":{placement:"above-right",normalizedOffset:[1,1,0],anchor:"bottom-left"},"below-center":{placement:"below-center",normalizedOffset:[0,-1,2],anchor:"top"},"below-left":{placement:"below-left",normalizedOffset:[-1,-1,0],anchor:"top-right"},"below-right":{placement:"below-right",normalizedOffset:[1,-1,0],anchor:"top-left"},"center-center":{placement:"center-center",normalizedOffset:[0,0,1],anchor:"center"},"center-left":{placement:"center-left",normalizedOffset:[-1,0,0],anchor:"right"},"center-right":{placement:"center-right",normalizedOffset:[1,0,0],anchor:"left"}},B2={"above-center":["default","esriServerPointLabelPlacementAboveCenter"],"above-left":["esriServerPointLabelPlacementAboveLeft"],"above-right":["esriServerPointLabelPlacementAboveRight"],"below-center":["esriServerPointLabelPlacementBelowCenter"],"below-left":["esriServerPointLabelPlacementBelowLeft"],"below-right":["esriServerPointLabelPlacementBelowRight"],"center-center":["esriServerPointLabelPlacementCenterCenter"],"center-left":["esriServerPointLabelPlacementCenterLeft"],"center-right":["esriServerPointLabelPlacementCenterRight"]};for(const d in B2){const O=Hd[d];B2[d].forEach(A=>{Hd[A]=O})}Object.freeze&&(Object.freeze(Hd),Object.keys(Hd).forEach(d=>{Object.freeze(Hd[d]),Object.freeze(Hd[d].normalizedOffset)}));const Ag=[0,0],R5=[0,0],Lg=(0,pa.Ue)();var n1=T(75688);class j2{constructor(v){this._stage=v,this._materials=new Map}get(v){return this._materials.get(v)}add(v,O){this._materials.set(v,O),this._stage.add(O)}dispose(){this._stage.removeMany(Array.from(this._materials.values())),this._materials.clear()}}var I5=T(6169),U5=T(65542),o1=T(86236),Xb=T(24425),B5=T(39782);let wg=class extends Li.Z{constructor(d){super(d),this.type=Xb.U.Texture,this.id=(0,o1.D)(),this.events=new vc.Z,this._glTexture=null,this.needsClear=!1,this.elementsToAddOrUpdate=new Map,this.elementsToRemove=new Map,this.elementsToRender=new Map,this.elements=new Map,this.stageObjects=new Map,this.updating=!1}initialize(){this.stage=this.view._stage,this.canvas=this._create2DCanvas(),this.ctx=this.canvas.getContext("2d"),this.stage.add(this);const d=this._computeAtlasResolution(this.view.width,this.view.height);this._createAtlasRegion(d),this._update2DCanvasSize(),this._resetAtlasCursor()}unload(){this._glTexture=(0,at.O3)(this._glTexture),this.updating=!1,this.events.emit("unloaded")}get width(){return this.atlas.size.width}get height(){return this.atlas.size.height}get requiresFrameUpdates(){return!1}_createDescriptor(d){return{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,flipped:!0,samplingMode:Gt.cw.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:d.parameters.maxMaxAnisotropy}}get glTexture(){return this._glTexture}load(d){return(0,at.pC)(this._glTexture)||(this._glTexture=new Va.x(d,this._createDescriptor(d),this.canvas),this.frameWorker=this.view.resourceController.scheduler.registerTask(lo.T8.TEXT_TEXTURE_ATLAS,this),this.setDirty()),this._glTexture}dispose(){this.elements=null,this.elementsToAddOrUpdate=null,this.elementsToRemove=null,this.elementsToRender=null,this.frameWorker=(0,at.hw)(this.frameWorker),this._glTexture&&(this.stage.remove(this),this._glTexture=(0,at.O3)(this._glTexture)),this.canvas.width=0,this.canvas.height=0,this.canvas=null,this.ctx=null}_create2DCanvas(){const d=document.createElement("canvas");return d.setAttribute("id","canvas2d"),d.setAttribute("style","display:none"),d.setAttribute("width",512..toString()),d.setAttribute("height",512..toString()),d}_update2DCanvasSize(){this.canvas.setAttribute("width",this.atlas.size.width.toString()),this.canvas.setAttribute("height",this.atlas.size.height.toString())}_createAtlasRegion(d=512){this.atlas={size:{width:d,height:d},cursor:{x:0,y:0},lineHeight:0}}_computeAtlasResolution(d,v){let O=Math.max(d,v);return O+=256,O=(0,cs.Sf)(O),O=Math.min(O,4096),O}_resizeAtlas(d,v){v=v||d;const O=this.atlas;O.size.width=d,O.size.height=v,(0,at.pC)(this._glTexture)&&this._glTexture.resize(d,v),this._update2DCanvasSize()}_resetAtlasCursor(){const d=this.atlas;d.cursor.x=Rg,d.cursor.y=Rg+F2,d.lineHeight=0,this.needsClear=!0}_getAtlasUsage(){const d=this.atlas;return(d.cursor.x+d.cursor.y*d.size.width)/(d.size.width*d.size.height)}_getExpectedAtlasUsage(){const d=this.elementsToRemove.size,v=this.elementsToAddOrUpdate.size,O=this.elements.size;return this._getAtlasUsage()/O*(O+v-d)}_addAtlasElement(d,v,O,A){const j=this.atlas,{renderedWidth:te,renderedHeight:pe,displayWidth:be,displayHeight:Re}=d.textRenderer;d.placement.offset.x=j.cursor.x,d.placement.offset.y=j.cursor.y,d.placement.size.width=te,d.placement.size.height=pe,d.placement.size.displayWidth=be,d.placement.size.displayHeight=Re,d.placement.uvMinMax=[d.placement.offset.x/j.size.width,1-(d.placement.offset.y+pe)/j.size.height,(d.placement.offset.x+te)/j.size.width,1-d.placement.offset.y/j.size.height],j.cursor.x+=O,j.lineHeight=Math.max(j.lineHeight,A),this.elements.set(v,d)}_removeAtlasElement(d){if(d&&this.elements.has(d.textId)){const v=d.placement.offset,O=d.placement.size;this.ctx.clearRect(v.x,v.y,O.width,O.height),this.elements.delete(d.textId)}}_ensureStageObjects(d){const v=this.stageObjects.get(d);if(v)return v;const O=new Set;return this.stageObjects.set(d,O),O}_addStageObject(d,v){this._ensureStageObjects(d).add(v)}_removeStageObject(d,v){const O=this.stageObjects.get(d);O&&O.delete(v)&&(v.geometries[0].vertexAttributes.get(No.T.SIZE).data=[0,0],v.geometryVertexAttrsUpdated(v.geometryRecords[0]))}_processAddition(d,v){const O=this.atlas,A=d.textId,pe=d.textRenderer.renderedWidth+Rg,be=d.textRenderer.renderedHeight+Rg+F2;if(O.cursor.x+pe<O.size.width&&O.cursor.y+be<O.size.height)this._addAtlasElement(d,A,pe,be),this.elementsToRender.set(A,d),this.elementsToAddOrUpdate.delete(A);else{if(!(O.cursor.y+be+O.lineHeight<O.size.height)){const Re=this._getExpectedAtlasUsage(),Ge=Re>.85&&O.size.width<4096;return Ge&&this._resizeAtlas(2*O.size.width,2*O.size.height),!v||!Ge&&Re>.95&&4096===O.size.width?(this._processRemovals(),If.OK):(this._repack(),If.REPACK)}O.cursor.x=Rg,O.cursor.y+=O.lineHeight,O.lineHeight=0,this._addAtlasElement(d,A,pe,be),this.elementsToRender.set(A,d),this.elementsToAddOrUpdate.delete(A)}return If.OK}_processRemovals(){this.elementsToRemove.forEach((d,v)=>{const O=this.stageObjects.get(v);O&&0!==O.size||this._removeAtlasElement(d),O&&0===O.size&&this.stageObjects.delete(v)}),this.elementsToRemove.clear()}_repack(){this._processRemovals(),this.elements.forEach((d,v)=>{d.rendered=!1,this.elementsToAddOrUpdate.set(v,d)}),this.elements.clear(),this._resetAtlasCursor(),this.elementsToRender.clear()}_processRenderingRequest(d){this.ctx.clearRect(d.placement.offset.x,d.placement.offset.y,d.placement.size.width,d.placement.size.height),d.textRenderer.render(this.ctx,d.placement.offset.x,d.placement.offset.y);const v=this.stageObjects.get(d.textId);v&&v.forEach(O=>{O.geometries[0].vertexAttributes.get(No.T.UV0).data=new Float32Array(d.placement.uvMinMax),O.geometries[0].vertexAttributes.get(No.T.SIZE).data=[d.placement.size.displayWidth,d.placement.size.displayHeight],O.geometryVertexAttrsUpdated(O.geometryRecords[0])}),d.rendered=!0}get running(){return this.updating}runTask(d,v=!0){if(!this._glTexture)return;let O=!1;if((0,cu.oE)(this.elementsToAddOrUpdate,(j,te)=>{const pe=this.elements.get(te);if(pe&&pe.rendered){const be=this.stageObjects.get(te);return be&&be.forEach(Re=>{const Ge=Re.geometries[0].vertexAttributes,tt=this.elements.get(te);Ge.get(No.T.UV0).data=new Float32Array(tt.placement.uvMinMax),Ge.get(No.T.SIZE).data=new Float32Array([tt.placement.size.displayWidth,tt.placement.size.displayHeight]),Re.geometryVertexAttrsUpdated(Re.geometryRecords[0])}),this.elementsToAddOrUpdate.delete(te),!1}return this._processAddition(this.elementsToAddOrUpdate.get(te),v)===If.REPACK&&(O=!0,!0)}),O)return void this.runTask(lo.G5,!1);let A=!1;this.elementsToRender.size>0&&this.needsClear&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.needsClear=!1),(0,cu.oE)(this.elementsToRender,(j,te)=>(this._processRenderingRequest(j),this.elementsToRender.delete(te),A=!0,d.madeProgress(),d.done)),A&&(0,at.pC)(this._glTexture)&&this._glTexture.setData(this.canvas),this.updating=this.elementsToRender.size>0,!this.updating&&B5.y.orderedRepackingEnabled&&this.repackOrdered()}addTextTexture(d,v){const O=d.key;this.elementsToAddOrUpdate.has(O)||this.elementsToAddOrUpdate.set(O,{textId:O,placement:{offset:{x:0,y:0},size:{width:0,height:0,displayWidth:0,displayHeight:0},uvMinMax:[]},textRenderer:d,rendered:!1}),this._addStageObject(O,v),this.elementsToRemove.delete(O),this.setDirty()}removeTextTexture(d,v){const O=d.key;this.elementsToRemove.set(O,this.elements.get(O)),this._removeStageObject(O,v)}setDirty(){this._glTexture&&(this.updating=!0)}repackOrdered(){if(0===this.elements.size)return;const d=[];this.elements.forEach((O,A)=>d.push({element:O,key:A}));let v=!0;for(let O=0;O<d.length-1;O++)if(d[O].key.localeCompare(d[O+1].key)>0){v=!1;break}if(!v||this.elementsToRemove.size){d.sort((O,A)=>O.key.localeCompare(A.key)),this.elements.clear();for(const{element:O,key:A}of d)this.elements.set(A,O);this._repack(),this.setDirty()}}get test(){const{elements:d,stageObjects:v,elementsToRemove:O,atlas:A}=this,j=this;return{elements:d,stageObjects:v,elementsToRemove:O,atlas:A,_resizeAtlas:(te,pe)=>j._resizeAtlas(te,pe),run:(te,pe)=>j.runTask(te,pe)}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],wg.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],wg.prototype,"updating",void 0),wg=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.TextTextureAtlas")],wg);const Rg=2,F2=2;var If;!function(d){d[d.OK=0]="OK",d[d.REPACK=1]="REPACK"}(If||(If={}));var Ig=T(34103);const N2=vo.Z.getLogger("esri.views.3d.layers.graphics.Labeler");let T0=class extends Li.Z{constructor(){super(...arguments),this._dirty=!1,this._labels=new Map,this._labelsToAdd=new Map,this._labelsToRemove=new Map,this._labelingContexts=new Array}setup(){this.dispose(),this._handles=new so.Z,this._handles.add([(0,wr.YP)(()=>this.view.state?.camera,()=>this.setDirty()),(0,wr.YP)(()=>this.view.state?.pixelRatio,()=>this._resetAllLabels()),this.view.resourceController.scheduler.registerTask(lo.T8.LABELER,this)]),this._textTextureAtlas=new wg({view:this.view}),this._hudMaterialCollection=new j2(this.view._stage),this._calloutMaterialCollection=new j2(this.view._stage)}dispose(){this._handles=(0,at.SC)(this._handles),this._textTextureAtlas=(0,at.O3)(this._textTextureAtlas),this._hudMaterialCollection=(0,at.O3)(this._hudMaterialCollection),this._calloutMaterialCollection=(0,at.O3)(this._calloutMaterialCollection),this._labelingContexts.length=0,this._labels.clear(),this._labelsToAdd.clear(),this._labelsToRemove.clear()}_activateLabelingContext(d){d.labels.forEach((v,O)=>{this._labels.set(O,v),v.graphics3DGraphic.setVisibilityFlag(Za.P.USER_SETTING,!0,Za.E.LABEL)}),d.active=!0}_deactivateLabelingContext(d){d.labels.forEach((v,O)=>{v.graphics3DGraphic.setVisibilityFlag(Za.P.USER_SETTING,!1,Za.E.LABEL),this.setLabelGraphicVisibility(v.graphics3DGraphic,!1),this._labels.delete(O)}),d.active=!1}_addLabelTextureToAtlas(d){for(const v of d.graphics3DGraphic.labelGraphics){if(!v._labelClass)continue;const O=d.textTextureResources.textRenderers[v._labelIndex];(0,at.pC)(O)&&this._textTextureAtlas.addTextTexture(O,v.stageObject)}d.rendered=!0}_removeLabelTextureFromAtlas(d){for(const v of d.graphics3DGraphic.labelGraphics){if(!v._labelClass)continue;const O=d.textTextureResources.textRenderers[v._labelIndex];(0,at.pC)(O)&&this._textTextureAtlas.removeTextTexture(O,v.stageObject)}d.rendered=!1}get running(){return this.view.ready&&(this._dirty||this._textTextureAtlas?.updating||this.deconflictor.running)}runTask(d){this._updateLabels(d),!this._dirty&&this.deconflictor.running&&this.deconflictor.runTask(d)}_updateLabels(d){if(this._dirty){this._dirty=!1;for(const v of this._labelingContexts)if(N5(v)){if(!W2(v)){if(W5(v)){this._deactivateLabelingContext(v);continue}if(this._createLabelClassContext(v),eT(v)){this._dirty=!0;continue}if(!W2(v))continue}(0,cu.oE)(v.labelsToInitialize,(O,A)=>(this._ensureGraphics3DResources(O)&&(this._labels.set(A,O),this.deconflictor.setDirty(),d.madeProgress()),(O.visible&&O.textTextureResources.initialized||!O.visible&&O.hasGraphics3DResources)&&(v.labelsToInitialize.delete(A),d.madeProgress()),d.done))&&(this._dirty=!0)}this._labelsToRemove.forEach(v=>this._removeLabelTextureFromAtlas(v)),this._labelsToAdd.forEach(v=>this._addLabelTextureToAtlas(v)),this._labelsToRemove.clear(),this._labelsToAdd.clear(),this._dirty||this.notifyChange("updating")}}_createLabelClassContextAsync(d){var v=this;return(0,oi.Z)(function*(){const O=d.labelClassAbortController.signal;yield d.layer.when(),(0,fi.k_)(O),d.scaleVisibility&&d.scaleVisibility.updateScaleRangeActive();const A=d.graphics3DCore,j=A.layer,te=j.labelingInfo&&j.labelingInfo.filter(Re=>!!Re.symbol);if(!te||0===te.length)return;const pe=new Array(te.length);let be=!1;yield(0,xg.Ed)(te,function(){var Re=(0,oi.Z)(function*(Ge,tt){const ft=Ge.symbol,yt=kb(A.getOrCreateGraphics3DSymbol(ft));if((0,at.Wi)(yt))return void N2.error("Failed to create Graphics3DSymbol for label");yield yt.load(),(0,fi.k_)(O);let It=null;(0,y5.Pd)(ft)&&ft.hasVisibleCallout()&&(It=(0,v5.S)(ft,A.symbolCreationContext),yield It.load(),(0,fi.k_)(O));const Nt=yield(0,xg.q6)((0,g5.createLabelFunction)(Ge,d.layer.fieldsIndex,v.view.spatialReference));if((0,fi.k_)(O),!0===Nt.ok){const Rt=yield v._createTextRenderParameters(yt.symbol);(0,fi.k_)(O),pe[tt]={labelClass:Ge,labelFunction:Nt.value,graphics3DSymbol:yt,graphics3DCalloutSymbolLayer:It,calloutSymbolLayerIndex:0,textRenderParameters:Rt}}else N2.error(`Label expression failed to evaluate: ${Nt.error}`),be=!0});return function(Ge,tt){return Re.apply(this,arguments)}}()),(0,fi.k_)(O),be||(d.labelClassContexts=pe)})()}_createLabelClassContext(d){var v=this;return(0,oi.Z)(function*(){return d.labelClassPromise||(d.labelClassPromise=v._createLabelClassContextAsync(d).catch(O=>{if((0,fi.D_)(O))throw O;d.labelClassContexts=null}).then(()=>{d.labelClassAbortController=null,v.notifyChange("updating")}).catch(()=>{}),v.notifyChange("updating")),d.labelClassPromise})()}_createTextRenderParameters(d){var v=this;return(0,oi.Z)(function*(){const O=d.symbolLayers.getItemAt(0);return O&&"text"===O.type?U5.V.fromSymbol(O,v.view.state.pixelRatio):null})()}_destroyLabelClassContext(d){for(const O of d.labelClassContexts)--O.graphics3DSymbol.referenced,O.graphics3DSymbol=null;const v=d.labelClassAbortController;d.labelClassAbortController=new AbortController,v&&v.abort(),d.labelClassContexts=[],d.labelClassPromise=null,this.notifyChange("updating")}_createTextSymbolGraphic(d,v,O,A,j){const te={text:d.text,centerOffset:O.centerOffset,translation:O.translation,elevationOffset:O.elevationOffset,screenOffset:O.screenOffset,centerOffsetUnits:O.centerOffsetUnits,horizontalPlacement:(0,n1.zi)(O.anchor),verticalPlacement:(0,n1.EP)(O.anchor),verticalOffset:O.verticalOffset,debugDrawLabelBorder:Nl.Z.LABELS_SHOW_BORDER,displayWidth:d.displayWidth,displayHeight:d.displayHeight};return sp.graphic=v,sp.renderingInfo=null,sp.layer=A,j.createLabel(sp,te,this._hudMaterialCollection,this._textTextureAtlas)}_createLineCalloutGraphic(d,v,O,A,j){const te={symbol:v,translation:A.translation,elevationOffset:A.elevationOffset,screenOffset:A.screenOffset,centerOffset:A.centerOffset,centerOffsetUnits:A.centerOffsetUnits,materialCollection:this._calloutMaterialCollection};return sp.graphic=d,sp.renderingInfo=te,sp.layer=j,O.createGraphics3DGraphic(sp)}_ensureGraphics3DResources(d){if(d.hasGraphics3DResources)return!1;const v=d.graphics3DGraphic;if(v.destroyed)return!1;this._ensureTextTextureResources(d);const{textTextureResources:O}=d,A=d.labelingContext,j=A.labelClassContexts;if(!j||0===j.length||!A.emptySymbolLabelSupported&&0===v.graphics.length)return!1;let te=!1;const pe=v.graphic,be=A.layer,Re=(0,lu.C6)(A.layer),Ge=this.view._stage;for(let tt=0;tt<j.length;tt++){const ft=O.textRenderers[tt],yt=O.labelPlacements[tt];if((0,at.Wi)(ft)||(0,at.Wi)(yt))continue;const It=j[tt],Nt=It.graphics3DSymbol,Rt=Nt.symbol&&"label-3d"===Nt.symbol.type?Nt.symbol:null,Jt=Nt.symbolLayers[0];if(!Jt)continue;Jt.setElevationInfoOverride(A.elevationInfoOverride);const jt=this._createTextSymbolGraphic(ft,pe,yt,be,Jt);if(!jt)return!1;jt._labelClass=It.labelClass,jt._labelIndex=tt,v.addLabelGraphic(jt,Ge,A.stageLayer),v.setVisibilityFlag(Za.P.USER_SETTING,Re,Za.E.LABEL),v.clearVisibilityFlag(Za.P.SCALE_RANGE,Za.E.LABEL),v.setVisibilityFlag(Za.P.DECONFLICTION,!1,Za.E.LABEL),te=!0;const ir=It.graphics3DCalloutSymbolLayer;if(ir&&yt.hasLabelVerticalOffset){ir.setElevationInfoOverride(A.elevationInfoOverride);const or=this._createLineCalloutGraphic(pe,Rt,ir,yt,be);(0,at.pC)(or)&&(It.calloutSymbolLayerIndex=v.labelGraphics.length,v.addLabelGraphic(or,Ge,A.stageLayer))}break}return A.scaleVisibility&&te&&A.scaleVisibility.updateGraphicLabelScaleVisibility(v),d.hasGraphics3DResources=!0,!0}_destroyGraphics3DResources(d){const v=d.labelingContext.labelClassContexts;for(const O of d.graphics3DGraphic.labelGraphics)null!=O._labelClass&&v[O._labelIndex].graphics3DSymbol.symbolLayers[0]?.onRemoveGraphic(O);d.graphics3DGraphic.clearLabelGraphics(),d.hasGraphics3DResources=!1}_ensureTextTextureResources(d){const{textTextureResources:v}=d;if(v.initialized)return;const O=d.labelingContext,A=O.labelClassContexts;if(!A||0===A.length)return;const j=d.graphics3DGraphic.graphic;for(let te=0;te<A.length;te++){const pe=A[te];if(v.textRenderers[te]=null,v.labelPlacements[te]=null,!pe.textRenderParameters)continue;const be=pe.labelFunction;let Re;if("arcade"===be.type)try{const jt=be.needsHydrationToEvaluate()?(0,m5.mW)(j,O.layer):j;Re=be.evaluate(jt)}catch{Re=null}else Re=be.evaluate(j);if((0,at.Wi)(Re)||""===Re||/^\s+$/.test(Re))continue;const Ge=pe.graphics3DSymbol,tt=Ge.symbol&&"label-3d"===Ge.symbol.type?Ge.symbol:null;if(!Ge.symbolLayers[0])continue;const Nt=T5({graphics3DGraphic:d.graphics3DGraphic,labelSymbol:tt,labelClass:pe.labelClass,disablePlacement:O.disablePlacement});if((0,at.Wi)(Nt))continue;const Rt=(0,n1.zi)(Nt.anchor),Jt=(0,n1.mq)(Rt);v.textRenderers[te]=new I5.tV(Re,Jt,pe.textRenderParameters),v.labelPlacements[te]=Nt}v.initialized=!0}_destroyTextTextureResources(d){const{textTextureResources:v}=d;v.initialized=!1,v.textRenderers=[],v.labelPlacements=[]}_addGraphic(d,v){const O={hasGraphics3DResources:!1,visible:!1,rendered:!1,labelingContext:d,graphics3DGraphic:v,textTextureResources:{initialized:!1,textRenderers:[],labelPlacements:[]}},A=v.graphic.uid;d.labels.set(A,O),d.labelsToInitialize.set(A,O),this.setDirty(),this.deconflictor.setDirty()}_removeGraphic(d,v){const O=v.graphic.uid,A=d.labels.get(O);A&&(this._destroyGraphic(A,O),d.labels.delete(O),d.labelsToInitialize.delete(O),this.setDirty(),this.deconflictor.setDirty())}_destroyGraphic(d,v){this._labels.has(v)&&(this._labels.delete(v),this._labelsToAdd.delete(v),this._labelsToRemove.delete(v)),d.textTextureResources.initialized&&(this._removeLabelTextureFromAtlas(d),this._destroyTextTextureResources(d)),d.hasGraphics3DResources&&this._destroyGraphics3DResources(d)}_labelingInfoChange(d,v){var O=this;return(0,oi.Z)(function*(){if(!v)return O._visibilityInfoChange(d),O._resetLabels(d),O._createLabelClassContext(d);for(const A of v){const j=d.labels.get(A);j&&(O._removeGraphic(d,j.graphics3DGraphic),O._addGraphic(d,j.graphics3DGraphic))}})()}_globalPropertyChanged(d,v){for(const O of v.labelClassContexts){const A=new Map;v.labels.forEach(te=>{const pe=te.graphics3DGraphic;A.set(pe.graphic.uid,pe)});const j=te=>te.labelGraphics[0];(0,at.Wg)(O.graphics3DSymbol.symbolLayers[0]).globalPropertyChanged(d,A,j),O.graphics3DCalloutSymbolLayer&&O.graphics3DCalloutSymbolLayer.globalPropertyChanged(d,A,pe=>pe.labelGraphics[O.calloutSymbolLayerIndex])}}_visibilityInfoChange(d){const v=d.layer.labelsVisible;v&&!d.active&&this._activateLabelingContext(d),!v&&d.active&&this._deactivateLabelingContext(d),this.setDirty()}_resetAllLabels(){for(const d of this._labelingContexts)this._resetLabels(d)}_resetLabels(d){d.labels.forEach((v,O)=>{this._destroyGraphic(v,O),v.visible=!1,v.rendered=!1,d.labelsToInitialize.set(O,v)}),this._destroyLabelClassContext(d),this.setDirty(),this.deconflictor.setDirty()}_findLabelingContext(d){for(const v of this._labelingContexts)if(v.graphics3DCore===d)return v;return null}addGraphicsOwner(d,v,O){const A=O&&O.emptySymbolLabelSupported||!1,j=O&&O.elevationInfoOverride||null,te=O&&O.disablePlacement||null;if(this._findLabelingContext(d))return;const pe=d.layer,be={graphics3DCore:d,layer:pe,scaleVisibility:v,emptySymbolLabelSupported:A,elevationInfoOverride:j,disablePlacement:te,active:pe.labelsVisible,labelClassPromise:null,labelClassAbortController:new AbortController,labelClassContexts:[],labels:new Map,labelsToInitialize:new Map,stageLayer:new Ig.F({isPickable:!0},pe.uid)};return this.view._stage.add(be.stageLayer),this._labelingContexts.push(be),this.setDirty(),{addGraphic:Re=>this._addGraphic(be,Re),removeGraphic:Re=>this._removeGraphic(be,Re),featureReductionChange:()=>{},layerLabelsEnabled:()=>(0,lu.C6)(be.layer),labelingInfoChange:Re=>this._labelingInfoChange(be,Re),elevationInfoChange:()=>this._globalPropertyChanged("elevationInfo",be),slicePlaneEnabledChange:()=>this._globalPropertyChanged("slicePlaneEnabled",be),visibilityInfoChange:()=>this._visibilityInfoChange(be),reset:()=>this._resetLabels(be),clear:()=>{}}}removeGraphicsOwner(d){const v=this._findLabelingContext(d);if(!v)return;const O=this._labelingContexts.indexOf(v);this._labelingContexts.splice(O,1),v.labels.forEach(A=>this._removeGraphic(v,A.graphics3DGraphic)),this.view._stage.remove(v.stageLayer),v.stageLayer=null,this.setDirty()}setLabelGraphicVisibility(d,v){const O=d.graphic.uid,A=this._labels.get(O);A&&A.visible!==v&&(v&&!A.rendered?(this._labelsToAdd.set(O,A),this._labelsToRemove.delete(O),A.textTextureResources.initialized||A.labelingContext.labelsToInitialize.set(O,A)):!v&&A.rendered&&(this._labelsToRemove.set(O,A),this._labelsToAdd.delete(O)),A.visible=v,this.setDirty())}setDirty(){!this._dirty&&this._labelingContexts.length>0&&(this._dirty=!0,this.notifyChange("updating"))}get updating(){return this._dirty||this._textTextureAtlas?.updating||this.deconflictor.updating||this._labelingContexts.some(d=>eT(d))}get updatingProgress(){if(!this.updating||!this._textTextureAtlas)return 1;const d=this._labelingContexts.length>0?this._labelingContexts.reduce((v,O)=>v+(eT(O)?0:1),0)/this._labelingContexts.length:1;return(this._dirty?0:.3)+(this._textTextureAtlas.updating?0:.1)+.1*d+.5*this.deconflictor.updatingProgress}get test(){return{textTextureAtlas:this._textTextureAtlas,resetAllLabels:()=>this._resetAllLabels()}}};function N5(d){return d.active&&(0,lu.C6)(d.layer)}function eT(d){return d.labelClassPromise&&!!d.labelClassAbortController}function W2(d){return d.labelClassContexts&&d.labelClassContexts.length}function W5(d){return null===d.labelClassContexts}(0,Je._)([(0,ht.Cb)({constructOnly:!0})],T0.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],T0.prototype,"deconflictor",void 0),(0,Je._)([(0,ht.Cb)()],T0.prototype,"_textTextureAtlas",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],T0.prototype,"updating",null),T0=(0,Je._)([(0,Ds.j)("esri.views.3d.layers.graphics.Labeler")],T0);const sp=new E5.Z(null,null,null);var V5=T(9160),z5=T(93831),H5=T(98973);class G5{constructor(){this.gltfCache=new Map,this.wosrCache=new Map,this.evictHandles=new so.Z}loadGLTF(v,O,A){return this._fromCache(this.gltfCache,A?`gltfPBR:${v}`:`gltf:${v}`,te=>(0,z5.z)(new V5.C(te.streamDataRequester),v,te,A),O)}loadWOSR(v,O){return this._fromCache(this.wosrCache,`wosr:${v}:${O.disableTextures}`,j=>(0,H5.zD)(v,j),O)}destroy(){this.evictHandles.destroy(),this.gltfCache.clear(),this.wosrCache.clear()}get size(){return this.wosrCache.size+this.gltfCache.size}_fromCache(v,O,A,j){return new Promise((te,pe)=>{if((0,fi.Hc)(j))return void pe((0,fi.zE)());const be=(0,fi.fu)(j,()=>{this._remove(v,O),pe((0,fi.zE)())}),Re=v.get(O);if(Re)return this.evictHandles.remove(O),Re.refCount++,void Re.item.then(te,pe);const Ge=new AbortController,tt={...j,signal:Ge.signal},ft={refCount:1,abortController:Ge,item:A(tt).then(yt=>(ft.abortController=null,yt.remove=()=>this._remove(v,O),yt))};v.set(O,ft),ft.item.then(yt=>{(0,at.pC)(be)&&be.remove(),te(yt)},yt=>{(0,at.pC)(be)&&be.remove(),pe(yt)})})}_remove(v,O){const A=v.get(O);A&&(A.refCount--,0===A.refCount&&this.evictHandles.add((0,L_.HO)(()=>{v.delete(O),(0,at.pC)(A.abortController)&&A.abortController.abort()},tT),O))}}let tT=1e4;var bl=T(27351),to=T(8834),z2=T(11544),Gd=T(27899),Uf=T(24805),K5=T(37810);class Y5{constructor(v){this.renderCoordsHelper=v,this.surfaceElevation=0,this.cache=new Map,this.frustum=new Uf.i(v),this.extendedFrustum=new Uf.i(v),this.intersector=new K5.q({renderCoordsHelper:v}),this.renderCoordsHelper=v}begin(v,O){this.surfaceElevation=O,this.aboveGround=this.renderCoordsHelper.getAltitude(v.eye)>O,this.frustum.update(v),this._shortenFrustumFarPlane(this.frustum),this._updateExtendedFrustum(v)}end(){this.cache.clear()}calculate(v){if(this.allTilesInvisible)return bl.E.INVISIBLE;const O=this.renderCoordsHelper.viewingMode===dn.JY.Global&&v.lij[0]>=Z5&&v.lij[0]<k5,A=this._getOrCalculateSingleTileVisibility(v,!O);return A!==bl.E.INVISIBLE&&O?this._calculateAggregatedChildrenVisibility(v):A}_shortenFrustumFarPlane(v){const O=Uf.i.nearFarLineIndices,A=v.mutablePoints;for(const j of O){const[te,pe]=j,be=A[te];(0,Et.b)(Hu,A[pe],be),(0,Et.g)(Hu,Hu,J5),(0,Et.a)(A[pe],be,Hu)}v.updatePoints(A)}_calculateAggregatedChildrenVisibility(v){let O=bl.E.INVISIBLE;const A=this.cache.get(v.id);if(null!=A)return A;const j=Y2.acquire();v.getChildren(j);for(const te of j){const pe=this.calculate(te);if(pe!==bl.E.INVISIBLE&&(O=pe,pe===bl.E.VISIBLE_ON_SURFACE))break}return Y2.release(j),this.cache.set(v.id,O),O}_getOrCalculateSingleTileVisibility(v,O){const A=this.cache.get(v.id);if(null!=A)return A;const j=this._calculateSingleTileVisibility(v);return O&&this.cache.set(v.id,j),j}_calculateSingleTileVisibility(v){return!this.aboveGround&&this.renderCoordsHelper.viewingMode===dn.JY.Global&&v.lij[0]<$5?this._calculateSingleTileVisibilitySided(v,!1)===bl.E.INVISIBLE?this._calculateSingleTileVisibilitySided(v,!0):void 0:this._calculateSingleTileVisibilitySided(v,this.aboveGround)}_calculateSingleTileVisibilitySided(v,O){this.intersector.update(v.extent,v.tilingScheme.spatialReference,this.surfaceElevation,O);const A=(0,Mo.Iu)(v.tilingScheme.spatialReference).radius;return this.intersector.isVisibleInFrustum(this.extendedFrustum,A)?this.intersector.isVisibleInFrustum(this.frustum,A,!0)?bl.E.VISIBLE_ON_SURFACE:bl.E.VISIBLE_WHEN_EXTENDED:bl.E.INVISIBLE}_updateExtendedFrustum(v){this.extendedFrustum.update(v),this._shortenFrustumFarPlane(this.extendedFrustum);const O=this.renderCoordsHelper.worldUpAtPosition(v.eye,Hu);this.aboveGround||(0,Et.o)(O,O);const A=(0,cs.ZF)(-(0,Et.e)(O,v.viewForward));if(this.allTilesInvisible=A>(Math.PI+v.fovY)/2,this.allTilesInvisible||(this.hasExtendedFrustum=A>v.fovY/2,!this.hasExtendedFrustum))return;const j=this._extendedFrustumParameters(),te=this.extendedFrustum.mutablePoints;for(let pe=0;pe<4;pe++){const be=j.pointIndices[pe],Re=te[be],Ge=this.renderCoordsHelper.getAltitude(Re);if(j.needsAltitudeAdjustment(Ge)){switch(this.renderCoordsHelper.worldUpAtPosition(Re,Hu),be){case to.NQ.FAR_BOTTOM_LEFT:case to.NQ.FAR_TOP_LEFT:case to.NQ.NEAR_BOTTOM_LEFT:case to.NQ.NEAR_TOP_LEFT:(0,Ro._l)(this.extendedFrustum.planes[to.Nu.LEFT],Hu,Hu);break;case to.NQ.FAR_BOTTOM_RIGHT:case to.NQ.FAR_TOP_RIGHT:case to.NQ.NEAR_BOTTOM_RIGHT:case to.NQ.NEAR_TOP_RIGHT:(0,Ro._l)(this.extendedFrustum.planes[to.Nu.RIGHT],Hu,Hu)}(0,Et.g)(Hu,Hu,j.direction),this.renderCoordsHelper.intersectInfiniteManifold((0,Fu.re)(Re,Hu),j.zWithMargin,Re)}}if(this.extendedFrustum.updatePoints(te),(0,Ro.zk)(te[to.NQ.NEAR_BOTTOM_LEFT],te[to.NQ.NEAR_BOTTOM_RIGHT],te[to.NQ.NEAR_TOP_RIGHT],G2),(0,Ro.zk)(te[to.NQ.NEAR_BOTTOM_RIGHT],te[to.NQ.NEAR_TOP_RIGHT],te[to.NQ.NEAR_TOP_LEFT],K2),(0,Et.e)((0,Ro.mJ)(G2),(0,Ro.mJ)(K2))<0){const pe=this.extendedFrustum.mutablePoints;this.aboveGround?[pe[to.NQ.NEAR_BOTTOM_LEFT],pe[to.NQ.NEAR_BOTTOM_RIGHT]]=[pe[to.NQ.NEAR_BOTTOM_RIGHT],pe[to.NQ.NEAR_BOTTOM_LEFT]]:[pe[to.NQ.NEAR_TOP_LEFT],pe[to.NQ.NEAR_TOP_RIGHT]]=[pe[to.NQ.NEAR_TOP_RIGHT],pe[to.NQ.NEAR_TOP_LEFT]],this.extendedFrustum.updatePoints(pe)}}_extendedFrustumParameters(){return this.aboveGround?this._extendedFrustumParametersAboveSurface():this._extendedFrustumParametersBelowSurface()}_extendedFrustumParametersAboveSurface(){const v=this.surfaceElevation-H2;return{zWithMargin:v,pointIndices:Uf.i.planePointIndices.bottom,direction:-1,needsAltitudeAdjustment:O=>O>v}}_extendedFrustumParametersBelowSurface(){const v=this.surfaceElevation+H2;return{zWithMargin:v,pointIndices:Uf.i.planePointIndices.top,direction:1,needsAltitudeAdjustment:O=>O<v}}}const Z5=2,k5=6,$5=12,J5=.95,H2=1,Hu=(0,br.c)(),G2=(0,Ro.Ue)(),K2=(0,Ro.Ue)(),Y2=new Gd.Z(Array,d=>{4!==d.length&&(d[0]=new bl.C,d[1]=new bl.C,d[2]=new bl.C,d[3]=new bl.C)},d=>{d[0].release(),d[1].release(),d[2].release(),d[3].release()});class X5{constructor(v){this.camera=new qn.V,this.focusOnMap=[0,0],this.screenRect=(0,ui.Ue)(),this.tileSize=v.tileSize,this.renderCoordsHelper=v.renderCoordsHelper,this.tilingScheme=v.tilingScheme,this.visibility=new Y5(v.renderCoordsHelper)}begin(v,O,A){this.camera.copyFrom(v),this.surfaceElevation=A,this.focusOnMap[0]=O.x,this.focusOnMap[1]=O.y,(0,ui.al)(0,0,v.fullWidth,v.fullHeight,this.screenRect),this.visibility.begin(this.camera,A)}end(){this.visibility.end()}updateTile(v){v.measures.visibility=this.visibility.calculate(v),v.measures.distance=(0,ui.TE)(v.extent,this.focusOnMap),v.measures.visibility!==bl.E.INVISIBLE&&this._updateScreenMeasure(v)}_updateScreenMeasure(v){const O=Q5,A=1<<O,j=v.measures.screenRect;(0,ui.cS)(j);let te=0;const pe=v.lij[0]+O,be=v.lij[1]<<O,Re=v.lij[2]<<O,Ge=this._tileSizeWithBias(v),tt=Ge*Ge;for(let ft=0;ft<A;ft++)for(let yt=0;yt<A;yt++)if(te+=this._computeScreenArea(v,pe,be+ft,Re+yt,j),te>tt)return void(v.measures.shouldSplit=!0);v.measures.shouldSplit=!1}_tileSizeWithBias(v){return v.measures.visibility===bl.E.VISIBLE_WHEN_EXTENDED?this.tileSize*q5:this.tileSize}_computeScreenArea(v,O,A,j,te){this._projectToScreen(O,A,j,v.measures.visibility===bl.E.VISIBLE_WHEN_EXTENDED,ip),(0,ui.cS)(rT);for(let be=0;be<4;be++)(0,ui.Ho)(rT,ip[be]);return(0,ui.jn)(te,rT,te),(0,z2.wu)(ip[0],ip[1],ip[2])+(0,z2.wu)(ip[0],ip[2],ip[3])}_projectToScreen(v,O,A,j,te){this.tilingScheme.ensureMaxLod(v),this.tilingScheme.getExtent(v,O,A,Ug),this._toRenderCoords(Ug,0,3,np[0]),this._toRenderCoords(Ug,2,3,np[1]),this._toRenderCoords(Ug,2,1,np[2]),this._toRenderCoords(Ug,0,1,np[3]),j&&(this._projectToPlane(np,this.camera.frustum[to.Nu.NEAR]),this._projectToPlane(np,this.camera.frustum[to.Nu.TOP]),this._projectToPlane(np,this.camera.frustum[to.Nu.BOTTOM]));for(let pe=0;pe<4;pe++)this.camera.projectToRenderScreen(np[pe],Z2),this.camera.renderToScreen(Z2,te[pe])}_projectToPlane(v,O){for(let j=0;j<4;j++)jg[j]=(0,Ro.jH)(O,v[j]);const A=Math.max(jg[0],jg[1],jg[2],jg[3]);if(A>0){const j=(0,Et.g)(Bg,(0,Ro.mJ)(O),-A);for(let te=0;te<4;te++)(0,Et.a)(v[te],v[te],j)}}_toRenderCoords(v,O,A,j){return Bg[0]=v[O],Bg[1]=v[A],Bg[2]=this.surfaceElevation,this.renderCoordsHelper.toRenderCoords(Bg,this.tilingScheme.spatialReference,j),j}}const rT=(0,ui.Ue)(),Q5=2,q5=5,ip=[(0,rn.s1)(),(0,rn.s1)(),(0,rn.s1)(),(0,rn.s1)()],Ug=(0,ui.Ue)(),Bg=(0,br.c)(),np=[(0,br.c)(),(0,br.c)(),(0,br.c)(),(0,br.c)()],jg=[0,0,0,0],Z2=(0,rn.J$)();var k2=T(55745);const e6=vo.Z.getLogger("esri.views.3d.layers.support.FeatureTileTree3D");let Tl=class extends Li.Z{constructor(d){super(d),this.tiles=new Na.Z,this.tileSize=512,this._idToTile=new Map,this._handles=new so.Z,this._clients=new Set,this._dirty=!1,this._newTiles=new La.Z}get tilingScheme(){const d=this.tilingSchemeOwner.tilingScheme;return d?d.clone():null}set filterExtent(d){if((0,at.pC)(d)&&!d.spatialReference.equals(this.viewState.spatialReference))return void e6.error("#extent","extent spatial reference needs to be in the same spatial reference as the view");const v=this._get("filterExtent");if(v===d||(0,at.pC)(v)&&d&&v.equals(d))return;const O=(0,at.pC)(d)?d.clone():null;this._set("filterExtent",O),this._setDirty()}get filterExtentRect(){if((0,at.Wi)(this.filterExtent)||!this.tilingScheme)return null;const d=(0,ui.Ue)();return(0,k2.G)(this.filterExtent,d,this.tilingScheme.spatialReference),d}get rootTileIds(){return this.filterExtentRect?this.tilingScheme.rootTilesInExtent(this.filterExtentRect):[[0,0,0]]}set suspended(d){d!==this._get("suspended")&&(this._set("suspended",d),this._setDirty())}get updating(){return this._dirty||!!this._pendingTiles}initialize(){this._handles.add([(0,wr.YP)(()=>[this.tilingScheme,this.tileSize],()=>this._reset(),wr.Z_),(0,wr.YP)(()=>[this.tileSize,this.cameraOnSurface?.location,this.tilingScheme,this.viewState?.contentCamera,this.focus?.location],()=>this._setDirty(),wr.tX)]),this.scheduler&&(this._frameWorker=this.scheduler.registerTask(lo.T8.FEATURE_TILE_TREE,this))}destroy(){this._frameWorker=(0,at.hw)(this._frameWorker),this._handles=(0,at.SC)(this._handles)}addClient(){const d=function r6(){return t6++}();return this._clients.add(d),1===this._clients.size&&this._setDirty(),{remove:()=>this._removeClient(d)}}_removeClient(d){this._clients.delete(d),this._hasClients||this._clear()}get _hasClients(){return this._clients.size>0}_setDirty(){!this._hasClients||this.suspended||this._dirty||(this._frameWorker?(this._dirty=!0,this.notifyChange("updating")):this.runTask(lo.G5))}_clear(){this.tiles.removeAll(),this._idToTile.clear(),this._reset(),this._dirty=!1,this.notifyChange("updating")}get running(){return this.updating}runTask(d){this._dirty=!1,this._pendingTiles||(this._startUpdate(),(0,at.pC)(this._frameWorker)&&(this._frameWorker.priority=lo.T8.FEATURE_TILE_TREE_ACTIVE)),this._subdivideTilesForView(d),!this._pendingTiles&&(0,at.pC)(this._frameWorker)&&(this._frameWorker.priority=lo.T8.FEATURE_TILE_TREE),this.notifyChange("updating")}_startUpdate(){this.suspended||(this.tilingScheme?(this._tileMeasurements||(this._tileMeasurements=new X5({renderCoordsHelper:this.renderCoordsHelper,tilingScheme:this.tilingScheme,tileSize:this.tileSize})),this._tileMeasurements.begin(this.viewState.contentCamera,this.focus.location,this.cameraOnSurface.location.z),this._pendingTiles=this._getRootTiles()):this._clear())}_reset(){this._newTiles.clear(),this._tileMeasurements=null,this._pendingTiles=null,this._setDirty()}_getRootTiles(){return this.rootTileIds.map(d=>new bl.C(d[0],d[1],d[2],this.tilingScheme))}_purgeHorizonTiles(d){d.sort((v,O)=>{const A=v.measures.screenRect,j=O.measures.screenRect;return A[1]+A[3]-(j[1]+j[3])}),(0,ui.cS)(a1);for(let v=0;v<d.length;v++)if((0,ui.jn)(a1,d.data[v].measures.screenRect,a1),(0,ui.Cb)(a1)>s6)return d.data.slice(v,d.length);return[]}_subdivideTilesForView(d){if(this._pendingTiles){for(;this._pendingTiles.length>0&&!d.done;){const v=this._pendingTiles.pop();d.madeProgress(),this.filterExtentRect&&!(0,ui.kK)(this.filterExtentRect,v.extent)||(this._tileMeasurements.updateTile(v),v.measures.visibility!==bl.E.INVISIBLE&&(v.measures.shouldSplit?(this.tilingScheme.ensureMaxLod(v.lij[0]+1),this._pendingTiles.push(...v.getChildren())):this._newTiles.push(v)))}0===this._pendingTiles.length&&(this._updateTiles(this._purgeHorizonTiles(this._newTiles)),this._newTiles.clear(),this._tileMeasurements.end(),this._pendingTiles=null)}}_updateTiles(d){for(const A of this.tiles.items)A.used=!1;const v=d.filter(A=>{const j=this._idToTile.get(A.id);return j?(j.copyMeasurementsFrom(A),j.used=!0):this._idToTile.set(A.id,A),!j}),O=this.tiles.items.filter(A=>!A.used&&(this._idToTile.delete(A.id),!0));this.tiles.removeMany(O),this.tiles.addMany(v),this._sortTiles()}_sortTiles(){this.viewState.fixedContentCamera||this.tiles.sort((d,v)=>d.measures.visibility!==v.measures.visibility?d.measures.visibility===bl.E.VISIBLE_ON_SURFACE?-1:1:d.measures.distance-v.measures.distance),this.tiles.forEach((d,v)=>d.loadPriority=v)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"scheduler",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"renderCoordsHelper",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"tilingSchemeOwner",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"cameraOnSurface",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"focus",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"viewState",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Tl.prototype,"terrain",void 0),(0,Je._)([(0,ht.Cb)()],Tl.prototype,"tiles",void 0),(0,Je._)([(0,ht.Cb)()],Tl.prototype,"tileSize",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Tl.prototype,"tilingScheme",null),(0,Je._)([(0,ht.Cb)()],Tl.prototype,"filterExtent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Tl.prototype,"filterExtentRect",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Tl.prototype,"rootTileIds",null),(0,Je._)([(0,ht.Cb)({value:!1})],Tl.prototype,"suspended",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Tl.prototype,"updating",null),Tl=(0,Je._)([(0,Ds.j)("esri.views.3d.layers.support.FeatureTileTree3D")],Tl);let t6=0;const a1=(0,ui.Ue)(),s6=10;var i6=T(30755),op=T(63416);let Cl=class extends Li.Z{constructor(){super(...arguments),this._propertiesPool=new op.L({camera:qn.V},this),this._lastSeenCameraProjectionValues=new qn.V,this.events=new vc.Z,this.viewingMode=dn.JY.Global,this._cameraChanged=!1,this.updateQueue=new Array,this.processingUpdates=!1}init(d,v){this._set("viewingMode",d),this._set("spatialReference",v),this._set("constraints",new Yh({mode:this.viewingMode}))}exit(){this.cameraController=null,this._propertiesPool.destroy(),this._propertiesPool=new op.L({camera:qn.V},this)}createInitialCamera(){if(this.viewingMode===dn.JY.Global){const d=(0,Mo.Iu)(this.spatialReference).radius;this.camera=new qn.V((0,br.f)(4*d,0,0),(0,br.f)(d,0,0),(0,br.f)(0,0,1))}else this.camera=new qn.V((0,br.f)(0,0,100),(0,br.f)(0,0,0),(0,br.f)(0,1,0))}get animation(){return this.cameraController instanceof pg&&(0,at.pC)(this.cameraController.viewAnimation)?this.cameraController.viewAnimation:null}get camera(){return this._get("camera")}set camera(d){d!==gd&&gd.copyFrom(d),gd.computeUp(this.viewingMode),$2.camera=gd,this.events.emit("before-camera-change",$2);const v=this._get("camera");if(this._cameraProjectionChanged(this._lastSeenCameraProjectionValues,gd)&&(this._lastSeenCameraProjectionValues.copyFrom(gd),J2.camera=this._lastSeenCameraProjectionValues,this.events.emit("camera-projection-changed",J2)),(!v||!v.equals(gd))&&(this._set("camera",this._propertiesPool.get("camera").copyFrom(gd)),this._cameraChanged=!v||!v.almostEquals(gd),this._cameraChanged)){const O=(0,i6.Fs)(()=>{this._cameraChanged=!1,O.remove()})}}get pixelRatio(){return this.camera.pixelRatio}get contentCamera(){return(0,at.pC)(this._contentCamera)?this._contentCamera:this.camera}set contentCamera(d){this._contentCamera=(0,at.pC)(d)?d.clone():null}get fixedContentCamera(){return(0,at.pC)(this._contentCamera)}get isGlobal(){return this.viewingMode===dn.JY.Global}get isLocal(){return this.viewingMode===dn.JY.Local}get navigating(){return!(!this.cameraController||!this.cameraController.isInteractive)}get stationary(){return!this._cameraChanged&&!this.navigating}get cameraController(){return this._get("cameraController")}set cameraController(d){this.stopActiveCameraController()?(d&&(this.own((0,wr.YP)(()=>d.state,v=>{v!==Jo.Finished&&v!==Jo.Stopped||(this._set("cameraController",null),this.updateCamera(O=>d.onControllerEnd(O)))},wr.Z_)),d.onControllerStart(this.camera)),this._set("cameraController",d)):d&&(d.state=Jo.Rejected)}switchCameraController(d){return this.cameraController=d,d.state!==Jo.Rejected}stopActiveCameraController(){return!(this.cameraController&&!this.cameraController.stopController())}updateCamera(d){this.updateQueue.push(d),this._processUpdateQueue()}_processUpdateQueue(){if(0===this.updateQueue.length||this.processingUpdates)return;this.processingUpdates=!0;const d=this.updateQueue.shift();gd.copyFrom(this._get("camera")),d(gd),this.camera=gd,this.processingUpdates=!1,this._processUpdateQueue()}_cameraProjectionChanged(d,v){return d.fov!==v.fov||d.fullViewport[0]!==v.fullViewport[0]||d.fullViewport[1]!==v.fullViewport[1]||d.fullViewport[2]!==v.fullViewport[2]||d.fullViewport[3]!==v.fullViewport[3]||d.padding[qn.N.TOP]!==v.padding[qn.N.TOP]||d.padding[qn.N.RIGHT]!==v.padding[qn.N.RIGHT]||d.padding[qn.N.BOTTOM]!==v.padding[qn.N.BOTTOM]||d.padding[qn.N.LEFT]!==v.padding[qn.N.LEFT]}};(0,Je._)([(0,ht.Cb)({readOnly:!0,type:rf})],Cl.prototype,"animation",null),(0,Je._)([(0,ht.Cb)({type:qn.V})],Cl.prototype,"camera",null),(0,Je._)([(0,ht.Cb)()],Cl.prototype,"pixelRatio",null),(0,Je._)([(0,ht.Cb)({})],Cl.prototype,"_contentCamera",void 0),(0,Je._)([(0,ht.Cb)({type:qn.V})],Cl.prototype,"contentCamera",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"fixedContentCamera",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"constraints",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"events",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"isGlobal",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"isLocal",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"viewingMode",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"spatialReference",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"navigating",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Cl.prototype,"stationary",null),(0,Je._)([(0,ht.Cb)()],Cl.prototype,"_cameraChanged",void 0),(0,Je._)([(0,ht.Cb)()],Cl.prototype,"cameraController",null),Cl=(0,Je._)([(0,Ds.j)("esri.views.3d.state.ViewState")],Cl);const n6=Cl,gd=new qn.V,$2={camera:null},J2={camera:null};var sT=T(16730);class a6{constructor(v,O){this.elevationProvider=v,this._referenceEllipsoid=(0,Mo.Iu)(O),this.unitInMeters=(0,sT.c9)(O,this._referenceEllipsoid.metersPerDegree)}compute(v,O,A,j,te){te||(te={near:0,far:0});let pe=v[2]*this.unitInMeters;const Re=pe-j,Ge=this.elevationProvider?this.elevationProvider.elevationBounds:null;Ge&&(pe=Re>=0?pe-this.unitInMeters*Ge.min:this.unitInMeters*Ge.max-pe);const tt={x:(A=(0,at.pC)(A)?A:new jc.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0})).xmax-A.xmin,y:A.ymax-A.ymin,z:4*Math.max(A.xmax-A.xmin,A.ymax-A.ymin)},ft=Math.max(tt.x,tt.y,tt.z);(0,Et.b)(C0,O,v),Bf[0]=C0[0]>0?A.xmax:A.xmin,Bf[1]=C0[1]>0?A.ymax:A.ymin,Bf[2]=C0[2]>0?ft/2:-ft/2,(0,Et.b)(Bf,Bf,v),(0,Et.n)(C0,C0);const yt=1.1*(0,Et.e)(Bf,C0)*this.unitInMeters,It=Math.sqrt(pe*(pe+2*this._referenceEllipsoid.radius)),Nt=Math.max(A.xmax-A.xmin,A.ymax-A.ymin),Jt=Nt*h6*this.unitInMeters;let jt=(0,cs.uZ)((pe-Jt)/(Nt*d6*this.unitInMeters-Jt),0,1);jt*=jt*jt;let ir=(0,cs.t7)(It,yt,jt);return ir*=Math.max(Math.log(Math.abs(Re)),1),ir=Math.min(ir,Math.max(34064e4,ft)),ir/=this.unitInMeters,X2(ir,c6,this.unitInMeters,te)}}class l6{constructor(v){this._referenceEllipsoid=(0,Mo.Iu)(v)}compute(v,O,A,j,te){te||(te={near:0,far:0});const pe=(0,Et.l)(v)-this._referenceEllipsoid.radius,be=this._referenceEllipsoid.radius+Math.min(0,j),Re=Math.abs(pe-j),Ge=Math.max(Re,Math.abs(pe));return X2(1.2*Math.sqrt(Ge*(Ge+2*be)),(0,cs.uZ)(2e4-(Math.log(Ge)-7.983)/9.011*19e3,1e3,2e4),1,te)}}function X2(d,v,O,A){const j=u6/O;return d/v>j?(A.far=d,A.near=A.far/v):(A.near=j,A.far=A.near*v),A}const c6=2e4,u6=2,d6=.001,h6=1e-4,Bf=(0,br.c)(),C0=(0,br.c)();let l1=class extends Li.Z{constructor(d){super(d),this.handles=new so.Z}initialize(){this.handles.add(this.view.basemapTerrain.on("elevation-change",d=>this._handleElevationChangeEvent(d)))}destroy(){this.handles&&(this.handles.destroy(),this.handles=null)}_handleElevationChangeEvent(d){this.view.state.cameraController||tD(this.view,this.view.state.camera,d.extent,d.spatialReference)&&this._applyToCurrentCamera()}_applyToCurrentCamera(){this.view.state.updateCamera(d=>{yf(this.view,d,pd.EYE_AND_CENTER)})}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],l1.prototype,"view",void 0),l1=(0,Je._)([(0,Ds.j)("esri.views.3d.state.ElevationCollisionConstraint")],l1);let Fg=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this.nearFarHeuristic=function o6(d,v,O){return d===dn.JY.Global?new l6(O):new a6(v,O)}(d.view.state.viewingMode,d.view.basemapTerrain,d.view.renderCoordsHelper.spatialReference)}initialize(){this._handles.add([(0,wr.YP)(()=>[this.view.constraints?.clipDistance?.near,this.view.constraints?.clipDistance?.far],()=>this._clipDistanceNearFarChanged()),(0,wr.YP)(()=>this.view.constraints?.clipDistance?.mode,()=>this._updateNearFar()),this.view.state.events.on("before-camera-change",d=>this._updateCameraNearFar(d.camera)),(0,wr.YP)(()=>this.view.renderDataExtent,()=>this._updateNearFar(),wr.Z_),(0,wr.YP)(()=>[this.view.constraints?.altitude?.min,this.view.constraints?.altitude?.max],()=>this._updateAltitude(),wr.Z_),(0,wr.YP)(()=>this.view.constraints?.tilt?.max,()=>this._updateTiltMax(),wr.Z_),(0,wr.YP)(()=>this.view.constraints?.tilt?.mode,()=>this._updateTilt(),wr.Z_),(0,wr.YP)(()=>this.view.state?.camera,()=>this._updateTiltAutoMax(),wr.Z_),(0,wr.YP)(()=>[this.view.map?.ground?.navigationConstraint?.type,this.view.state?.constraints?.collision?.enabled],()=>this._updateCollision(),wr.Z_)]),this.view.state.isLocal&&this._handles.add((0,wr.YP)(()=>this.view.renderDataExtent,d=>this._updateLocalSurfaceDistance(d),wr.nn)),this._updateNearFar(),this.view.state.viewingMode!==dn.JY.Local&&this._updateAltitude(),this._updateTilt(),this._updateCollision(),this._set("surfaceCollisionConstraint",new l1({view:this.view}))}destroy(){this._handles=(0,at.SC)(this._handles),this.surfaceCollisionConstraint&&(this.surfaceCollisionConstraint.destroy(),this._set("surfaceCollisionConstraint",null))}_clipDistanceNearFarChanged(){const d=this.view.constraints?.clipDistance;d&&"auto"!==d.mode&&this.view.state.updateCamera(v=>(this._updateCameraNearFarManual(v,d),!0))}_updateNearFar(){this.view.state.updateCamera(d=>(this._updateCameraNearFar(d),!0))}_updateCameraNearFar(d){const v=this.view.constraints&&this.view.constraints.clipDistance;"manual"===(v?v.mode:"auto")?this._updateCameraNearFarManual(d,v):this._updateCameraNearFarAuto(d,v)}_updateCameraNearFarAuto(d,v){this.nearFarHeuristic.compute(d.eye,d.center,this.view.renderDataExtent,fv(this.view,d.eye),d),v&&v.autoUpdate(d.near,d.far)}_updateCameraNearFarManual(d,v){v&&(d.near=v.near,d.far=v.far)}_updateCollision(){const d=this.view.map?.ground?.navigationConstraint?.type,v=!d||"stay-above"===d,O=this.view.state.constraints.collision;if(v!==O.enabled){O.enabled=v,v&&this._reapplyConstraints(wo.COLLISION);const A=this.view.constraints&&this.view.constraints.tilt;A&&"auto"!==A.mode||this._updateTiltAuto()}}_updateAltitude(){const d=this.view.constraints&&this.view.constraints.altitude;this.view.state.constraints.altitude=d&&this.view.state.viewingMode!==dn.JY.Local?{min:d.min,max:d.max}:null,this._reapplyConstraints()}_updateTiltMax(){const d=this.view.constraints&&this.view.constraints.tilt;d&&"auto"!==d.mode&&(this._updateTiltManual(d),this._reapplyConstraints())}_updateTilt(){const d=this.view.constraints&&this.view.constraints.tilt;"manual"===(d?d.mode:"auto")?this._updateTiltManual(d):this._updateTiltAuto(),this._reapplyConstraints()}_updateTiltManual(d){const v=this.view.state.constraints;v.tilt=v.createConstantMaxTilt((0,cs.Vl)(d.max))}_updateTiltAuto(){const d=this.view.state.constraints;d.tilt=d.createDefaultTilt(),this._updateTiltAutoMax()}_updateTiltAutoMax(){const d=this.view.constraints&&this.view.constraints.tilt;if(!d||"auto"!==d.mode)return;const v=this.view.state.constraints;if(v.tilt){const O=v.tilt(this.view.state.camera.distance).max;d.autoUpdate((0,cs.BV)(O))}}_updateLocalSurfaceDistance(d){if((0,at.Wi)(d))return;let v=Math.max(d.width,d.height);if(v<=0)return;d.hasZ&&(v=Math.max(v,d.zmax-d.zmin));const O=this.view.state,A=3*v/Math.atan(O.camera.fov/2);A!==O.constraints.distance&&(O.constraints.distance=A)}_reapplyConstraints(d=wo.ALL){this.view.state.updateCamera(v=>_a(this.view,v,{selection:d,interactionType:xn.NONE,interactionFactor:null,interactionStartCamera:null,interactionDirection:null,tiltMode:cl.TUMBLE}))}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Fg.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Fg.prototype,"surfaceCollisionConstraint",void 0),Fg=(0,Je._)([(0,Ds.j)("esri.views.3d.state.ConstraintsManager")],Fg);let jf=class extends p0{constructor(d){super(d),this.handles=new so.Z}set desiredCamera(d){this._set("desiredCamera",d.clone())}get canStop(){return!0}get constraintEnabled(){return this.view.state.constraints.collision.enabled}onControllerStart(){this.state=Jo.Running,this.handles.add(this.view.basemapTerrain.on("elevation-change",d=>this._handleElevationChangeEvent(d))),this._applyCorrection()}onControllerEnd(){this.handles.removeAll()}stepController(){}_handleElevationChangeEvent(d){tD(this.view,this.desiredCamera,d.extent,d.spatialReference)&&this._applyCorrection()}_applyCorrection(){this.view.state.updateCamera(d=>{d.copyViewFrom(this.desiredCamera),yf(this.view,d,pd.EYE_AND_CENTER)||this.constraintEnabled||(this.state=Jo.Stopped)})}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],jf.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],jf.prototype,"desiredCamera",null),jf=(0,Je._)([(0,Ds.j)("esri.views.3d.state.controllers.SurfaceCollisionCorrectionController")],jf);var _6=T(21674);function Q2(d){return 360-ic.BV.normalize(d)}function c1(d){return ic.BV.normalize(360-d)}function u1(d){return(0,at.pC)(d)&&d.resolver&&d.resolver.reject(),null}function q2(d,v,O,A=null){if(!v)return u1(A);const j=d.spatialReference||ba.Z.WGS84;if((0,at.pC)(v.camera)){const Ge=(0,ph.iV)(v.camera.position,j);if((0,at.Wi)(Ge))return u1(A);const tt=v.camera.clone();return tt.position=Ge,function f6(d,v){return(0,at.pC)(d)&&d.resolver&&d.resolver.resolve(v),v}(A,tt)}if((0,at.Wi)(v.targetGeometry))return u1(A);const te=v.get("targetGeometry.spatialReference");if(te&&!(0,ph.Q8)(te,j))return u1(A);const pe=Df(d,d.state.camera);let be=Fl.ADJUST;if(null!=v.rotation&&(pe.heading=Q2(v.rotation),be=Fl.LOCKED),null!=O&&(pe.tilt=O),"point"===v.targetGeometry.type){const Ge=v.targetGeometry;let tt;const ft=v.targetGeometry.clone();return tt=null!=v.scale?Sb(d,v.scale,Ge.latitude):d.state.camera.distance,i2(d,ft,tt,pe,be,A)}return bg(d,v.targetGeometry.extent,pe.heading,pe.tilt,be,A)}function iT(){return iT=(0,oi.Z)(function*(d,v,O){const A=D6(d,v);if(!A)throw new So.Z("viewpointutils-create:no-target","Missing target for creating viewpoint");const j=new au({fov:d.camera.fov}),te=new Bd({camera:j});if(A.target instanceof Bd)return O0(yield E6(d,A.target,A,O,te));if(A.target instanceof au)return O0(tx(d,A.target,te));const pe=null!=A.scale||null!=A.zoom;if(A.target instanceof jc.Z){const Ge=A.target.xmin===A.target.xmax||A.target.ymin===A.target.ymax;return O0(pe||Ge?yield dT(d,A,A.target.center,j,O,te):yield C6(d,A,A.target,j,O,te))}const be={boundingBox:(0,pa.cS)(),hasZ:!1,screenSpaceObjects:[]},Re=pe?y6(d,A):void 0;if(yield ex(d,A.target,Re,be),isFinite(be.boundingBox[0])){let Ge;if((0,pa.be)(be.boundingBox,fa),Gu.x=fa[0],Gu.y=fa[1],Gu.z=fa[2],Gu.spatialReference=d.spatialReference,isFinite(Gu.z)&&be.hasZ?Ge=(0,pa.wp)(be.boundingBox):(Gu.z=void 0,Ge=(0,ui.wp)((0,pa.y8)(be.boundingBox,S6))),pe||Ge)return O0(yield dT(d,A,Gu,j,O,te));const tt=x6(d,be.screenSpaceObjects);return O0(yield P6(d,A,Gu,be.boundingBox,tt,j,O,te))}return O0(A.position?b6(d,A,j,te):yield T6(d,A,j,O,te))}),iT.apply(this,arguments)}function nT(d,v){return null==v.scale&&null!=v.zoom?a2(d,v.zoom):v.scale}function y6(d,v){return function l4(d,v){return d.spatialReference?(0,ZO.dp)(v,d.spatialReference):void 0}(d,nT(d,v))}function oT(d,v){let O=!1;return null!=v.heading?(d.heading=v.heading,O=!0):null!=v.rotation&&(d.heading=Q2(v.rotation),O=!0),null!=v.tilt&&(d.tilt=v.tilt,O=!0),null!=v.fov&&(d.fov=v.fov),O}function aT(d,v,O,A){const j=d.spatialReference||ba.Z.WGS84;return v=(0,at.pC)(v)?v:r_(d,O),(0,at.Wi)(v)||(A.targetGeometry=(0,tn.fA)(v.center,d.renderSpatialReference,j),A.scale=l2(d,v),A.rotation=c1(O.heading),A.camera=O),A}function d1(d,v,O){if(!v)return;if(!(0,ph.Q8)(v.spatialReference,d.spatialReference))throw new So.Z("viewpointutils:incompatible-spatialreference",`Spatial reference (${v.spatialReference?v.spatialReference.wkid:"unknown"}) is incompatible with the view (${d.spatialReference.wkid})`,{geometry:v});const A=[];if(!v.hasZ&&d.basemapTerrain){let pe;switch(v.type){case"point":pe=v;break;case"multipoint":case"polyline":pe=v.extent.center;break;case"mesh":pe=v.origin;break;case"extent":pe=v.center;break;case"polygon":pe=v.centroid}fa[2]=pe&&(0,ph.Q8)(pe,d.basemapTerrain.spatialReference)?(0,at.Pt)((0,Cf.KO)(d.elevationProvider,pe),0):0}(0,A6[v.type])(v,pe=>{A.push(pe[0],pe[1],pe[2])},fa);const j=A.length/3;if(0===j)return;const te=new Array(A.length);if((0,tn.CM)(A,v.spatialReference,0,te,d.spatialReference,0,j)){v.hasZ&&(O.hasZ=!0);for(let pe=0;pe<te.length;pe+=3)v.hasZ?(fa[0]=te[pe+0],fa[1]=te[pe+1],fa[2]=te[pe+2]):(fa[0]=te[pe+0],fa[1]=te[pe+1]),(0,pa.pp)(O.boundingBox,fa)}}function v6(d,v,O,A){return lT.apply(this,arguments)}function lT(){return lT=(0,oi.Z)(function*(d,v,O,A){const j=yield(0,xg.q6)(d.whenViewForGraphic(v));if(!1===j.ok||(0,at.Wi)(j.value)||!("whenGraphicBounds"in j.value))return void d1(d,v.geometry,A);const te=j.value,pe=yield(0,xg.q6)(te.whenGraphicBounds(v,{minDemResolution:O}));if(!1===pe.ok)return void d1(d,v.geometry,A);const{screenSpaceObjects:be,boundingBox:Re}=pe.value;(0,pa.TC)(A.boundingBox,Re),be&&be.forEach(Ge=>{A.screenSpaceObjects.push(Ge)}),isFinite(Re[2])&&(A.hasZ=!0)}),lT.apply(this,arguments)}function ex(d,v,O,A){return cT.apply(this,arguments)}function cT(){return cT=(0,oi.Z)(function*(d,v,O,A){if(Array.isArray(v)&&2===v.length){const j=v[0],te=v[1];if("number"==typeof j&&"number"==typeof te)return Gu.x=j,Gu.y=te,Gu.z=void 0,Gu.spatialReference=d.spatialReference.isGeographic?d.spatialReference:ba.Z.WGS84,void d1(d,Gu,A)}v&&"function"==typeof v.map?yield(0,fi.as)(v.map(j=>ex(d,j,O,A))):v instanceof _6.Z?d1(d,v,A):v instanceof aM.Z&&(yield v6(d,v,O,A))}),cT.apply(this,arguments)}function E6(d,v,O,A,j){return uT.apply(this,arguments)}function uT(){return uT=(0,oi.Z)(function*(d,v,O,A,j){if((0,at.pC)(v.camera))return tx(d,v.camera,j);j.scale=v.scale,j.rotation=v.rotation,j.targetGeometry=(0,at.pC)(v.targetGeometry)?v.targetGeometry.clone():null,j.camera=null,null!=O.heading?j.rotation=c1(O.heading):null!=O.rotation&&(j.rotation=O.rotation);const te=nT(d,O);null!=te&&(j.scale=te);const pe=new xf(A);return q2(d,j,O.tilt,pe),j.camera=yield pe.resolver.promise,j}),uT.apply(this,arguments)}function tx(d,v,O){const j=(0,ph.iV)(v.position,d.spatialReference);return(0,at.Wi)(j)?null:((v=v.clone()).fov=d.camera.fov,v.position=j,aT(d,null,v,O))}function M6(d,v,O,A,j,te){const pe=d.renderSpatialReference;return(0,tn.KC)(O.position,p1,pe),(0,tn.KC)(v,mT,pe),te.targetGeometry=new Eo.Z(v),j.position=new Eo.Z(O.position),(0,Et.b)(_1,mT,p1),Kv(d,p1,_1,A.up,j),te.scale=y0(d,(0,Et.i)(p1,mT),te.targetGeometry.latitude),te.rotation=c1(j.heading),te.camera=j,te}function dT(d,v,O,A,j,te){return hT.apply(this,arguments)}function hT(){return hT=(0,oi.Z)(function*(d,v,O,A,j,te){if((0,at.Wi)(O))throw new So.Z("createfromcenter","invalid point");te.targetGeometry=O.clone();const pe=d0(d);if(v.position)return M6(d,te.targetGeometry,v,pe,A,te);if(v.zoomFactor){const Re=pe.distance/v.zoomFactor,Ge=(0,Et.g)(fa,pe.viewForward,-Re);pe.eye=(0,Et.a)(fa,pe.center,Ge),te.scale=y0(d,Re,O.latitude)}Df(d,pe,A);const be=oT(A,v)?Fl.LOCKED:Fl.ADJUST;if(!v.zoomFactor){te.scale=nT(d,v),null==te.scale&&((0,tn.KC)(O,fa,d.renderSpatialReference),te.scale=(0,to.g8)(pe.frustum,fa)?y0(d,(0,Et.i)(pe.eye,fa),O.latitude):l2(d,pe));const Re=new xf(j);s2(d,te.targetGeometry,te.scale,A,be,Re),te.camera=yield Re.resolver.promise}return te}),hT.apply(this,arguments)}function b6(d,v,O,A){const j=d0(d);return(0,Et.c)(_1,j.viewForward),Kv(d,j.eye,_1,j.up,gT),O.position=new Eo.Z(v.position),O.heading=null!=v.heading?v.heading:gT.heading,O.tilt=null!=v.tilt?v.tilt:gT.tilt,aT(d,null,O,A)}function T6(d,v,O,A,j){return _T.apply(this,arguments)}function _T(){return _T=(0,oi.Z)(function*(d,v,O,A,j){const te=d0(d);return dT(d,v,(0,tn.fA)(te.center,d.renderSpatialReference,d.spatialReference),O,A,j)}),_T.apply(this,arguments)}function C6(d,v,O,A,j,te){return pT.apply(this,arguments)}function pT(){return pT=(0,oi.Z)(function*(d,v,O,A,j,te){te.targetGeometry=O.clone(),Df(d,d0(d),A);const be=oT(A,v)?Fl.LOCKED:Fl.ADJUST,Re=new xf(j);return bg(d,O,A.heading,A.tilt,be,Re),te.camera=yield Re.resolver.promise,te}),pT.apply(this,arguments)}function O6(d,v,O,A,j){let te=0;O.hasZ?te=O.z:d.basemapTerrain&&(te=(0,at.Wg)((0,Cf.KO)(d.elevationProvider,O))),(0,Et.s)(fa,O.x,O.y,te),(0,tn.Bm)(d.spatialReference,fa,rx,d.renderSpatialReference),(0,Ta.f)(h1,rx),(0,Ta.t)(h1,h1),(0,pa.cS)(Ng);const pe=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let Nt=0;Nt<pe.length;Nt++){const Rt=pe[Nt];let Jt=A[Rt[2]];isFinite(Jt)||(Jt=te),(0,Et.s)(fa,A[Rt[0]],A[Rt[1]],Jt),(0,tn.SH)(fa,d.spatialReference,fa,d.renderSpatialReference),(0,pa.pp)(Ng,(0,Et.t)(fa,fa,h1))}const be=(0,pa.bf)(Ng),Re=(0,pa.Cb)(Ng),Ge=(0,pa.Ye)(Ng),tt=1/Math.tan(v.fovX/2),ft=1/Math.tan(v.fovY/2),yt=.5*Math.sqrt(be*be+Ge*Ge)*Math.max(ft,tt)+.5*Re,It=.5*Re*ft+.5*Math.max(be,Ge);return Math.max(yt,It)/j}function P6(d,v,O,A,j,te,pe,be){return fT.apply(this,arguments)}function fT(){return fT=(0,oi.Z)(function*(d,v,O,A,j,te,pe,be){be.targetGeometry=O.clone();const Re=d0(d),Ge=O6(d,Re,O,A,j);Df(d,Re,te);const tt=oT(te,v)?Fl.LOCKED:Fl.ADJUST;be.scale=y0(d,Ge,be.targetGeometry.latitude);const ft=new xf(pe);return s2(d,be.targetGeometry,be.scale,te,tt,ft),be.camera=yield ft.resolver.promise,be}),fT.apply(this,arguments)}function D6(d,v){if(!v||!d.spatialReference)return null;const O={target:null};if("declaredClass"in v||Array.isArray(v))O.target=v;else{for(const A in v)O[A]=v[A];v.center&&!O.target&&(O.target=v.center)}return O}function O0(d){return d&&(0,at.pC)(d.camera)&&(d.rotation=c1(d.camera.heading)),d}function x6(d,v){if(!v.length)return.66;let A=Number.NEGATIVE_INFINITY;for(let j=0;j<v.length;j++){const te=v[j].screenSpaceBoundingRect;A=Math.max(A,Math.abs(te[0]),Math.abs(te[1]),Math.abs(te[2]),Math.abs(te[3]))}return.66-A/Math.min(d.width,d.height)*2}const fa=(0,br.c)(),rx=(0,ao.c)(),h1=(0,Jh.c)(),Ng=(0,pa.Ue)(),S6=(0,ui.Ue)(),_1=(0,br.c)(),p1=(0,br.c)(),mT=(0,br.c)(),gT={heading:0,tilt:0},Gu=new Eo.Z,A6={point(d,v,O){O[0]=d.x,O[1]=d.y,d.hasZ&&(O[2]=d.z),v(O)},polygon(d,v,O){const A=d.hasZ;for(let j=0;j<d.rings.length;j++){const te=d.rings[j];for(let pe=0;pe<te.length;pe++)O[0]=te[pe][0],O[1]=te[pe][1],A&&(O[2]=te[pe][2]),v(O)}},polyline(d,v,O){const A=d.hasZ;for(let j=0;j<d.paths.length;j++){const te=d.paths[j];for(let pe=0;pe<te.length;pe++)O[0]=te[pe][0],O[1]=te[pe][1],A&&(O[2]=te[pe][2]),v(O)}},multipoint(d,v,O){const A=d.points,j=d.hasZ;for(let te=0;te<A.length;te++)O[0]=A[te][0],O[1]=A[te][1],j&&(O[2]=A[te][2]),v(O)},extent(d,v,O){d.hasZ?(v((0,Et.s)(O,d.xmin,d.ymin,d.zmin)),v((0,Et.s)(O,d.xmax,d.ymin,d.zmin)),v((0,Et.s)(O,d.xmin,d.ymax,d.zmin)),v((0,Et.s)(O,d.xmax,d.ymax,d.zmin)),v((0,Et.s)(O,d.xmin,d.ymin,d.zmax)),v((0,Et.s)(O,d.xmax,d.ymin,d.zmax)),v((0,Et.s)(O,d.xmin,d.ymax,d.zmax)),v((0,Et.s)(O,d.xmax,d.ymax,d.zmax))):(v((0,Et.s)(O,d.xmin,d.ymin,O[2])),v((0,Et.s)(O,d.xmax,d.ymin,O[2])),v((0,Et.s)(O,d.xmin,d.ymax,O[2])),v((0,Et.s)(O,d.xmax,d.ymax,O[2])))},mesh(d,v,O){const A=d.vertexAttributes&&d.vertexAttributes.position;if(A)for(let j=0;j<A.length;j+=3)v((0,Et.s)(O,A[j+0],A[j+1],A[j+2]))}};class L6{constructor(v,O,A){this.target=v,this.options=O,this.view=A,this.state="pending",this.abortController=null,this.animationController=null,this.promise=new Promise((j,te)=>{this.resolveCallback=j,this.rejectCallback=te;const pe=new AbortController;(0,at.pC)(this.options.signal)&&(0,fi.fu)(this.options.signal,()=>{this.abort()}),this.abortController=pe,this.waitForReady()})}then(v,O){return this.promise.then(v,O)}catch(v){return this.promise.catch(v)}resolve(v){return this.state="finished",this.resolveCallback(v)}reject(v){return this.state="finished",this.rejectCallback(v)}abort(v=!1){switch(this.state){case"pending":case"wait-for-ready":case"wait-for-viewpoint":this.reject((0,fi.zE)());break;case"wait-for-animation-finish":!v&&(0,at.pC)(this.animationController)&&this.view.state.cameraController===this.animationController&&this.animationController.active&&this.animationController.stopController(),this.reject((0,fi.zE)())}}waitForReady(){var v=this;return(0,oi.Z)(function*(){if(v.state="wait-for-ready",!v.view.ready)try{yield(0,wr.N1)(()=>v.view.ready,v.abortController.signal)}catch(O){return v.reject(O)}v.createViewPoint()})()}createViewPoint(){"finished"!==this.state&&(this.state="wait-for-viewpoint",this.animationController=this.options.animate?this._getAnimationController():null,function g6(d,v,O){return iT.apply(this,arguments)}(this.view,this.target,this.abortController.signal).then(v=>{if("finished"===this.state)return;const O=this._getCameraFromViewpoint(v);if(!(0,at.Wi)(O))if(this.options.animate){if((0,at.Wi)(this.animationController))return;this.startAnimation(O,this.animationController)}else this.view.stateManager.setStateCamera(O.camera,{applyConstraints:!O.isFullySpecified,positionAndOrientationOnly:!0,doNotCancelGoToOperation:!0}),this.resolve()},v=>{this.reject(v)}))}_getCameraFromViewpoint(v){const O=!!(this.target instanceof Bd&&this.target.camera||this.target instanceof au),A=v.camera;if((0,at.Wi)(A))return null;if(!this.view.stateManager.isCompatible(A)){const te=A.position,pe=te&&te.spatialReference;return this.reject(new So.Z("GotoAnimation:incompatible-spatialreference",`Resulting camera has an incompatible spatial reference (camera: ${pe?pe.wkid:"none"}, view: ${this.view.spatialReference.wkid})`,{camera:A})),null}const j=r_(this.view,A);return(0,at.Wi)(j)?(this.reject(new So.Z("GotoAnimation:invalid-camera","Resulting camera is invalid")),null):{viewpoint:v,camera:j,isFullySpecified:O}}startAnimation(v,O){this.state="wait-for-animation-finish";const A=O.viewAnimation;if((0,at.Wi)(A))return void this.reject(new So.Z("GotoAnimation:missing-animation","Unreachable code in view.stateManager"));if(A.update(v.viewpoint,"running"),!O.active||(0,at.Wi)(O.viewAnimation)||O.viewAnimation.target!==v.viewpoint||this.view.state.cameraController!==O)return this.abort();let j;v.isFullySpecified?(j=new jf({view:this.view,desiredCamera:v.camera}),yf(this.view,v.camera,pd.EYE_AND_CENTER)):_a(this.view,v.camera),O.begin(v.camera,this.options);const pe=be=>{if(!(0,at.Wi)(this.view.state))switch(O.state){case Jo.Finished:switch(this.state){case"pending":case"wait-for-ready":case"wait-for-viewpoint":case"wait-for-animation-finish":this.resolve()}break;case Jo.Ready:case Jo.Rejected:case Jo.Running:case Jo.Stopped:switch(this.state){case"pending":case"wait-for-ready":case"wait-for-viewpoint":case"wait-for-animation-finish":this.reject(be)}}};A.when(()=>{const be=this.view.state.cameraController;j&&(be&&be.active?be instanceof Xh&&(0,at.pC)(be.viewAnimation)&&be.viewAnimation.target===v.viewpoint&&(this.view.state.cameraController=j):(0,at.pC)(O.viewAnimation)&&O.viewAnimation.target===v.viewpoint&&"finished"===O.state&&(this.view.state.cameraController=j))},be=>pe(be)),O.asyncResult={resolve:()=>pe(),reject:be=>pe(be)}}_getAnimationController(){let v,O=null;const A=this.view.state.cameraController;return A instanceof Xh&&(A.updateStateFromViewAnimation(),A.active&&(v=A,O=v.viewAnimation)),null!=v||(v=new Xh({view:this.view,mode:"animation"}),O=v.viewAnimation,this.view.state.switchCameraController(v))?v:((0,at.pC)(O)&&O.stop(),this.reject(new So.Z("GotoAnimation:goto-cannot-interrupt","Cannot start an animation while interacting")),null)}}const yd=vo.Z.getLogger("esri.views.3d.state.ViewStateManager");let ka=class extends Li.Z{constructor(d){super(d),this.propertiesPool=new op.L({frustum:Uf.i},this),this.handles=new so.Z,this.cameraSetByUser=!1,this.gotoOperation=null,this.ready=!1,this._windowDevicePixelRatio=1,this._devicePixelRatioOverride=null,this._maximumPixelRatioOverride=null,this.test={contentCameraResetState:new Map,setDevicePixelRatio:v=>this._devicePixelRatioOverride=v,setMaximumPixelRatio:v=>this._maximumPixelRatioOverride=v}}get camera(){const d=this._get("camera");if(!this.ready)return d;const v=Df(this.view,this.view.state.camera);return v&&d&&v.equals(d)?d:v}set camera(d){this._updatePropertyBeforeReady("camera",d)||(this.view.elevationProvider.enableElevationCache(!0),this.setStateCamera(r_(this.view,d),{applyConstraints:!1})||yd.error("#camera=","Invalid camera",d),this.view.elevationProvider.enableElevationCache(!1))}get contentCamera(){const d=this._get("contentCamera");if(!this.ready)return d;const v=Df(this.view,this.view.state.contentCamera);return v&&d&&v.equals(d)?d:v}set contentCamera(d){if(this._updatePropertyBeforeReady("contentCamera",d))return;const v=r_(this.view,d);(0,at.Wi)(v)?this.view.state.contentCamera=null:(this._updateElevation(v),this.view.state.contentCamera=v)}installContentCameraReset(d){if(this.handles.remove("contentCameraReset"),this.test.contentCameraResetState.clear(),!this.view.state.fixedContentCamera)return!1;const v=this.zoom,O=this.view.state.camera.distance**2,A=(0,br.d)(this.view.state.camera.center),j=d.sticky?this.contentCamera.clone():null;return this.handles.add([(0,wr.YP)(()=>this.contentCamera,()=>{d.sticky||(this.handles.remove("contentCameraReset"),this.test.contentCameraResetState.clear())}),(0,wr.YP)(()=>this.zoom,te=>{this.test.contentCameraResetState.set("view.zoom",Math.abs(te-v)/2),Math.abs(te-v)>2?this.contentCamera=null:this.view.state.fixedContentCamera||(this.contentCamera=j)}),(0,wr.YP)(()=>this.view.state.camera,te=>{const pe=(0,Et.d)(A,te.center);this.test.contentCameraResetState.set("camera.center",pe/O),pe>O?this.contentCamera=null:this.view.state.fixedContentCamera||(this.contentCamera=j)})],"contentCameraReset"),!0}get center(){return this.ready?this.view.pointsOfInterest.centerOnContent.location:this._get("center")}set center(d){this._updatePropertyBeforeReady("center",d)||(d?this.isCompatible(d)?this.setStateCamera(this._centerToCamera(d),{applyConstraints:!0})?this.view.pointsOfInterest.centerOnContent.runTask():yd.error("#center=","Invalid center",d):yd.error("#center=","Center has an incompatible spatial reference (center: "+(d.spatialReference?d.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",d):yd.error("#center=","Center may not be null or undefined"))}get extent(){if(!this.ready)return this._get("extent");const d=this.view,v=function s4(d,v,O){const j=(0,tn.fA)(O,d.renderSpatialReference,Eg(d));if((0,at.Wi)(j))return null;const te=Math.tan(v.fovX/2),pe=Math.tan(v.fovY/2),be=(0,Et.j)(v.eye,O),Re=2*be*te*1,Ge=2*be*pe*1;return"global"===d.viewingMode?XD(d,j,Re,Ge):ZD(d,j,Re,Ge)}(d,d.state.camera,d.pointsOfInterest.centerOnContent.renderLocation);return(0,at.pC)(v)?v:this._get("extent")}set extent(d){this._updatePropertyBeforeReady("extent",d)||(d?this.isCompatible(d)?this.setStateCamera(this._extentToCamera(d),{applyConstraints:!0})||yd.error("#extent=","Invalid extent",d):yd.error("#extent=","Extent has an incompatible spatial reference (extent: "+(d.spatialReference?d.spatialReference.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",d):yd.error("#extent=","Extent may not be null or undefined"))}get frustum(){const d=this.propertiesPool.get("frustum");return d.renderCoordsHelper=this.view.renderCoordsHelper,d.update(this.view.state.camera),d}get hasInitialView(){return!!this.view.get("map.initialViewProperties.viewpoint")}get scale(){if(this.ready){const d=this.view.pointsOfInterest.centerOnContent;return y0(this.view,d.distance,d.location.latitude)}return this._get("scale")}set scale(d){this._updatePropertyBeforeReady("scale",d)||this.setStateCamera(this._scaleToCamera(d),{applyConstraints:!0})||yd.error("#scale=","Invalid scale",d)}get padding(){if(!this.ready)return this._get("padding");const d=this.view.state.camera,v=d.padding,O=d.pixelRatio,A=this._get("padding"),j=Math.round(v[qn.N.TOP]/O),te=Math.round(v[qn.N.RIGHT]/O),pe=Math.round(v[qn.N.BOTTOM]/O),be=Math.round(v[qn.N.LEFT]/O);return null!=A&&A.top===j&&A.right===te&&A.bottom===pe&&A.left===be?A:{top:j,right:te,bottom:pe,left:be}}set padding(d){this._updatePropertyBeforeReady("padding",d)||(this._paddingToArray(d,this.view.state.camera.pixelRatio,f1),this.view.state.updateCamera(v=>v.padding=f1))}_paddingToArray(d,v,O){d?(0,Ml.s)(O,d.top||0,d.right||0,d.bottom||0,d.left||0):(0,Ml.s)(O,0,0,0,0);for(let A=0;A<4;A++)O[A]=Math.round(O[A]*v)}get screenCenter(){const d=this.padding;return(0,rn.vW)((this.view.width-(d.left+d.right))/2+d.left,(this.view.height-(d.top+d.bottom))/2+d.top)}get viewpoint(){return this.ready?function m6(d,v,O=null){return(0,at.Wi)(O)&&(O=new Bd),aT(d,null,v.clone(),O)}(this.view,this.camera):this._get("viewpoint")}set viewpoint(d){if(!this._updatePropertyBeforeReady("viewpoint",d))if(d)if(this.isCompatible(d))this.setStateCamera(this._viewpointToCamera(d),{applyConstraints:!d.camera})||yd.error("#viewpoint=","Invalid viewpoint",d);else{const v=(0,at.pC)(d.camera)?d.camera.position:d.targetGeometry,O=(0,at.pC)(v)&&v.spatialReference;yd.error("#viewpoint=","Viewpoint has an incompatible spatial reference (viewpoint: "+(O?O.wkid:"none")+", view: "+this.view.spatialReference.wkid+")",d)}else yd.error("#viewpoint=","Viewpoint may not be null or undefined")}get zoom(){return this.ready?o2(this.view,this.scale):this._get("zoom")}set zoom(d){this._updatePropertyBeforeReady("zoom",d)||this.setStateCamera(this._zoomToCamera(d),{applyConstraints:!0})||yd.error("#zoom=","Invalid zoom",d)}get maximumPixelRatio(){if((0,at.pC)(this._maximumPixelRatioOverride))return this._maximumPixelRatioOverride;let d=1/0;const{maximumPixelRatio:v,maximumRenderResolution:O}=this.view.qualitySettings;if(null!=v&&(d=Math.min(d,v)),null!=O){const A=O/Math.max(this.view.width,this.view.height);d=Math.min(d,A)}return d}get _devicePixelRatio(){return(0,at.Wi)(this._devicePixelRatioOverride)?Math.min(this._windowDevicePixelRatio,this.maximumPixelRatio):this._devicePixelRatioOverride}initialize(){this.handles.add([(0,wr.on)(()=>this.view.state.events,"before-camera-change",d=>this._updateElevation(d.camera))]),(0,wr.YP)(()=>this.view.state.camera,d=>this._updateElevation(d),{once:!0,sync:!0}),this.handles.add((0,w_.A)({prepare:()=>this._prepareFrame()})),this.handles.add((0,wr.YP)(()=>this.view.state.cameraController,()=>{this.cameraSetByUser=!0,this.handles.remove(m1)})),this.handles.add((0,wr.on)(()=>this.view.state.events,"camera-projection-changed",()=>this.notifyChange("scale")))}destroy(){this.deinit(),this.handles&&(this.handles.destroy(),this.handles=null),this.propertiesPool&&(this.propertiesPool.destroy(),this.propertiesPool=null)}init(){this.constraintsManager=new Fg({view:this.view}),this._prepareFrame();const d=this._getInitialProperties();this.cameraSetByUser=!1,this._set("ready",!0);for(const v of d)this.set(v.name,v.value);if(!this.cameraSetByUser){const v=this.view.get("map.initialViewProperties.viewpoint")||this.view.initialExtent;v&&this.isCompatible(v)?this._setInitialView(v):this.view.state.viewingMode===dn.JY.Local&&this.handles.add((0,wr.gx)(()=>this.view.basemapTerrain.ready,()=>{this.handles.remove(m1),this._setInitialView(this.view.dataExtent)},{once:!0,initial:!0}),m1)}}deinit(){this._cancelGoToOperation(),this.ready&&(this._override("padding",this.padding),this._set("ready",!1),this._clearOverride("hasInitialView"),this.cameraSetByUser=!1,this.handles.remove(m1),this.constraintsManager&&(this.constraintsManager.destroy(),this.constraintsManager=null))}goTo(d,v){var O=this;return(0,oi.Z)(function*(){const A={animate:!0,...v};return(0,at.pC)(O.gotoOperation)&&O.gotoOperation.abort(A.animate),O.gotoOperation=new L6(d,A,O.view),O.view.resourceController.scheduler.stopFrame(),O.gotoOperation})()}debugSetCameraOnContent(){this.setStateCamera(d0(this.view),{applyConstraints:!1})}step(d){const v=this.view.state,O=v&&this.view.state.cameraController;O&&(v.updateCamera(A=>{O.stepController(d,A)}),O.steppingFinished&&O.finishController())}_cancelGoToOperation(){(0,at.pC)(this.gotoOperation)&&(this.gotoOperation.abort(),this.gotoOperation=null)}_getInitialProperties(){const d=new Set,v=[];for(const{propertyName:O,overrides:A}of I6){const j=d.has(O),te=this._isOverridden(O);!j&&te&&v.push({name:O,value:this._get(O)}),this._clearOverride(O),(j||te)&&A.forEach(pe=>d.add(pe))}return v}_setInitialView(d){if((0,at.Wi)(d)||this.cameraSetByUser)return;if(d instanceof au)return void this.setStateCamera(r_(this.view,d),{applyConstraints:!1});if(d instanceof Bd){if(d.targetGeometry instanceof jc.Z){const j=bg(this.view,d.targetGeometry,0,.5,Fl.LOCKED);return void((0,at.pC)(j)&&this.setStateCamera(r_(this.view,j),{applyConstraints:!0}))}const O={applyConstraints:!d.camera},A=this._viewpointToCamera(d);return void this.setStateCamera(A,O)}const v=bg(this.view,d,0,.5,Fl.LOCKED);(0,at.pC)(v)&&this.setStateCamera(r_(this.view,v),{applyConstraints:!0})}_updatePropertyBeforeReady(d,v){return!this.ready&&(this._override(d,v),v&&R6.includes(d)&&this._override("hasInitialView",!0),!0)}isCompatible(d){return!(0,at.Wi)(d)&&(d instanceof Bd?this.isCompatible(d.camera?d.camera:d.targetGeometry):d instanceof au?this.isCompatible(d.position):d.spatialReference&&(0,ph.Q8)(d.spatialReference,this.view.spatialReference))}_getPreservingHeadingTilt(d=U6){return this.cameraSetByUser?(d.heading=this.camera.heading,d.tilt=this.camera.tilt):(d.heading=0,d.tilt=.5),d}_centerPointAtDistanceToCamera(d,v,O=ap){const{heading:A,tilt:j}=this._getPreservingHeadingTilt(),te=Mg(this.view,A,j,d,v,Fl.ADJUST);return(0,at.Wi)(te)?null:(O.copyFrom(this.view.state.camera),O.eye=te.eye,O.center=te.center,O.up=te.up,O)}_centerToCamera(d){const v=this.view.pointsOfInterest.centerOnContent;return v.runTask(),this._centerPointAtDistanceToCamera(d,v.distance)}_extentToCamera(d){const{heading:v,tilt:O}=this._getPreservingHeadingTilt(),A=bg(this.view,d,v,O,Fl.ADJUST,B6);return(0,at.pC)(A)?r_(this.view,A):null}_scaleToCamera(d){if(null==d)return null;const v=this.view.pointsOfInterest.centerOnContent;v.runTask();const O=v.renderLocation,j=Sb(this.view,d,v.location.latitude);return this._centerPointAtDistanceToCamera(O,j)}_zoomToCamera(d){return this._scaleToCamera(a2(this.view,d))}_viewpointToCamera(d){return r_(this.view,q2(this.view,d))}setStateCamera(d,v){return!((0,at.Wi)(d)||!this.view.state.stopActiveCameraController()||(this.cameraSetByUser=!0,v.doNotCancelGoToOperation||this._cancelGoToOperation(),this.view.state.updateCamera(O=>{v.positionAndOrientationOnly?(O.eye=d.eye,O.center=d.center,O.up=d.up):O.copyFrom(d),v.applyConstraints&&_a(this.view,O)}),v.applyConstraints||(this.view.state.cameraController=new jf({view:this.view,desiredCamera:d})),0))}_prepareFrame(){const{surface:d,canvas:v}=this.view;if(!d||!v)return;this._windowDevicePixelRatio=window.devicePixelRatio;const O=this._devicePixelRatio,A=Math.round(d.clientWidth*O),j=Math.round(d.clientHeight*O);if(0!==A&&0!==j&&(v.width===A&&v.height===j||(v.width=A,v.height=j),this.view.state)){const te=this.view.state.camera;te.fullWidth===A&&te.fullHeight===j&&te.pixelRatio===O||(ap.copyFrom(te),ap.pixelRatio!==O&&(this._paddingToArray(this.padding,O,f1),ap.padding=f1),ap.fullWidth=A,ap.fullHeight=j,ap.pixelRatio=O,this.view.state.camera=ap)}}_updateElevation(d){const v=this.view.basemapTerrain&&this.view.basemapTerrain.spatialReference,O=this.view.renderCoordsHelper.getAltitude(d.eye),A=v?fv(this.view,d.eye):0;d.relativeElevation=O-A}};(0,Je._)([(0,ht.Cb)({type:au,dependsOn:["view.state.camera","ready"]})],ka.prototype,"camera",null),(0,Je._)([(0,ht.Cb)({type:au,dependsOn:["view.state.contentCamera","ready"]})],ka.prototype,"contentCamera",null),(0,Je._)([(0,ht.Cb)({type:Eo.Z})],ka.prototype,"center",null),(0,Je._)([(0,ht.Cb)({type:jc.Z})],ka.prototype,"extent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ka.prototype,"frustum",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ka.prototype,"hasInitialView",null),(0,Je._)([(0,ht.Cb)({readOnly:!0,type:Boolean})],ka.prototype,"ready",void 0),(0,Je._)([(0,ht.Cb)({type:Number})],ka.prototype,"scale",null),(0,Je._)([(0,ht.Cb)()],ka.prototype,"padding",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ka.prototype,"screenCenter",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ka.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:Bd})],ka.prototype,"viewpoint",null),(0,Je._)([(0,ht.Cb)({type:Number})],ka.prototype,"zoom",null),(0,Je._)([(0,ht.Cb)()],ka.prototype,"maximumPixelRatio",null),(0,Je._)([(0,ht.Cb)()],ka.prototype,"_devicePixelRatio",null),(0,Je._)([(0,ht.Cb)()],ka.prototype,"_windowDevicePixelRatio",void 0),(0,Je._)([(0,ht.Cb)()],ka.prototype,"_devicePixelRatioOverride",void 0),(0,Je._)([(0,ht.Cb)()],ka.prototype,"_maximumPixelRatioOverride",void 0),ka=(0,Je._)([(0,Ds.j)("esri.views.3d.state.ViewStateManager")],ka);const w6=ka,R6=["camera","viewpoint","extent","scale","center","zoom"],I6=[{propertyName:"camera",overrides:["viewpoint"]},{propertyName:"viewpoint",overrides:["extent"]},{propertyName:"extent",overrides:["center","scale"]},{propertyName:"center",overrides:[]},{propertyName:"scale",overrides:["zoom"]},{propertyName:"zoom",overrides:[]},{propertyName:"padding",overrides:[]}],U6={heading:0,tilt:0},B6=new au,ap=new qn.V,f1=(0,Ao.c)(),m1="pending-initial-view";var Ol=T(67857),g1=T(91480);class j6{constructor(v,O,A){this.viewingMode=v,this._forEachLayer=O,this.view=A,this.externalIntersectionHandlers=new La.Z,this.tolerance=oc.vh,this.tmpRay=(0,Fu.Ue)(),this.tmpRegion=(0,ui.Ue)(),this.validateHUDIntersector=(0,oc.Z8)(this.viewingMode),this.validateHUDIntersector.options.hud=!1}intersectScreen(v,O,A){return this.intersectRay(this._getPickRay(v,this.tmpRay),sx(this.viewingMode),O,A)}intersectScreenFreePointFallback(v,O,A){return this.intersectRayFreePointFallback(this._getPickRay(v,this.tmpRay),O,A)}intersectRayFreePointFallback(v,O,A){return this.intersectRay(v,sx(this.viewingMode),O,A)||this._intersectRayFreePointLocal(v,O)}intersectRay(v,O,A,j){return O.options.selectionMode=!1,O.options.store=Ol.eC.MIN,this.computeIntersection(v,O,j),!!O.results.min&&O.results.min.getIntersectionPoint(A)}getCenterRayWithSubpixelOffset(v,O,A=.5,j=.5){return v.getRenderCenter(E1,A,j),E1[0]+=.0466,E1[1]-=.0123,(0,_h.eW)(v,E1,O)}intersectIntersectorScreen(v,O,A){this.computeIntersection(this._getPickRay(v,this.tmpRay),O,A)}intersectToolIntersectorScreen(v,O,A){const j=this._getPickRay(v,this.tmpRay);this.intersectToolIntersectorRay(j,O,A)}intersectToolIntersectorRay(v,O,A){O.options.selectionMode=!0,this.computeIntersection(v,O,A);const j=O.results.min;this.view.basemapTerrain&&this.view.basemapTerrain.opaque||(0,g1.nn)(j)&&j.intersector!==Ol.q7.TERRAIN||(O.options.selectionMode=!1,this.computeIntersection(v,O,A))}setTolerance(v=oc.vh){this.tolerance=v}addIntersectionHandler(v){this.externalIntersectionHandlers.push(v),this.externalIntersectionHandlers.sort((O,A)=>O.type===Ol.q7.TERRAIN?1:A.type===Ol.q7.TERRAIN?-1:0)}removeIntersectionHandler(v){null!=this.externalIntersectionHandlers.removeUnordered(v)&&this.externalIntersectionHandlers.sort((O,A)=>O.type===Ol.q7.TERRAIN?1:A.type===Ol.q7.TERRAIN?-1:0)}_getPickRay(v,O){return(0,_h.u4)(this.view.state.camera,v,O)}_intersectRayFreePointLocal(v,O){if(this.viewingMode!==dn.JY.Local||(0,at.Wi)(v))return!1;const A=this.view.renderDataExtent;if((0,at.Wi)(A))return(0,Et.a)(O,v.origin,(0,Et.n)(Lo.WM.get(),v.direction)),!0;const j={x:A.xmax-A.xmin,y:A.ymax-A.ymin,z:8*Math.max(A.xmax-A.xmin,A.ymax-A.ymin)},te=Math.max(j.x,j.y,j.z);if(0===te)return(0,Et.a)(O,v.origin,(0,Et.n)(Lo.WM.get(),v.direction)),!0;const pe=this.view.state.camera,be=Math.max(0,A.xmin-pe.eye[0],pe.eye[0]-A.xmax),Re=Math.max(0,A.ymin-pe.eye[1],pe.eye[1]-A.ymax),Ge=Math.sqrt(be*be+Re*Re),tt=Math.abs(pe.relativeElevation)+Number.MIN_VALUE,ft=Math.max(0,Math.log(te/tt))**2;let yt=te/Math.max(1,ft);yt=Math.max(yt,Math.min(Ge,te));const It=(0,Et.g)(Lo.WM.get(),v.direction,yt/(0,Et.l)(v.direction));return(0,Et.a)(O,v.origin,It),!0}intersectElevationFromScreen(v,O,A=0,j=null){return this._intersectElevation(this._getPickRay(v,this.tmpRay),O,A,j)}_intersectElevation(v,O,A=0,j=null){if((0,at.Wi)(v))return null;const te=(0,at.pC)(O)?O.mode:"absolute-height",pe=(0,at.pC)(O)?(0,at.Pt)(O.offset,0):0,be="on-the-ground"!==te?pe+A:0,Re=be/this.view.renderCoordsHelper.unitInMeters;if("absolute-height"===te){if(this.view.renderCoordsHelper.intersectInfiniteManifold(v,be,v1)){const ir=this.view.computeMapPointFromVec3d(v1);return ir.z-=pe,ir}return null}const Ge=this.view.state.camera,tt=(0,rn.Wv)(Lo.WM.get());Ge.projectToRenderScreen(v.origin,tt);const ft=new ix(null,this._forEachLayer),yt=this.view.slicePlane,It=(0,at.pC)(yt)?(0,g1.e4)(yt):null,Nt=(0,oc.Z8)(this.viewingMode);Nt.options.store=Ol.eC.MIN,Nt.options.verticalOffset=Re;const Rt=v.origin,Jt=(0,Et.a)(Lo.WM.get(),Rt,v.direction);Nt.reset(Rt,Jt,Ge),Nt.point=tt;const jt=(0,at.pC)(j)?"type"in j&&"graphics"===j.type?ir=>ir.metadata.layerUid!==j.uid:ir=>ir.metadata.graphicUid!==j.uid:null;switch(te){case"relative-to-scene":Nt.intersect(ft.layers,tt,this.tolerance,null,or=>((0,at.Wi)(jt)||jt(or))&&or.metadata&&or.metadata.isElevationSource),this.externalIntersectionHandlers.forAll(or=>{or.type!==Ol.q7.I3S&&or.type!==Ol.q7.TERRAIN||or.intersect(Nt,or.slicePlaneEnabled?It:null,Nt.rayBegin,Nt.rayEnd,tt)});break;case"on-the-ground":case"relative-to-ground":this.externalIntersectionHandlers.forAll(ir=>{ir.isGround&&ir.intersect(Nt,ir.slicePlaneEnabled?It:null,Nt.rayBegin,Nt.rayEnd,tt)})}if(Nt.results.min.getIntersectionPoint(v1)){const ir=this.view.computeMapPointFromVec3d(v1);return ir.z=A,ir}return null}computeIntersection(v,O,A){if((0,at.Wi)(v))return;const j=this.view.state.camera,te=(0,rn.Wv)(Lo.WM.get());j.projectToRenderScreen(v.origin,te);const pe=new ix(A,this._forEachLayer);O.options.selectOpaqueTerrainOnly=!A||!("include"in A||"exclude"in A);const be=v.origin,Re=(0,Et.a)(Lo.WM.get(),v.origin,v.direction);O.reset(be,Re,j),O.intersect(pe.layers,te,this.tolerance);const Ge=this.view.slicePlane,tt=(0,at.pC)(Ge)?(0,g1.e4)(Ge):null;O.intersect(pe.sliceableLayers,te,this.tolerance,tt);const ft=A&&(A.requiresGroundFeedback||A.enableDraped);this.externalIntersectionHandlers.forAll(It=>{O.options.isFiltered=!pe.filterLayerUid(It.layerUid),(It.isGround&&ft||!O.options.isFiltered)&&It.intersect(O,It.slicePlaneEnabled?tt:null,be,Re,te)});const yt=Lo.WM.get();if(A&&A.enableDraped&&O.results.ground.getIntersectionPoint(yt)){const It=this.view.basemapTerrain,Nt=It.overlayManager.renderer,Rt=this.view.renderCoordsHelper.spatialReference,Jt=Lo.WM.get();this.view.renderCoordsHelper.fromRenderCoords(yt,Jt,It.spatialReference),Jt[2]=(0,at.Pt)(this.view.elevationProvider.getElevation(yt[0],yt[1],yt[2],Rt,"ground"),0),Nt.intersect(O,Jt,O.results.ground,jt=>pe.filterRenderGeometry(jt))}O.sortResults(),this._processHUDResults(O)}_processHUDResults(v){const O=v.results.hud;(0,ui.JG)(this.tmpRegion,ui.Gv);const A=this.view.state.camera,j=[],te=this.tmpRegion,pe=jt=>{const ir=new N6(jt);A.projectToRenderScreen(jt.target.center,ir.screenPoint),ir.screenPoint[0]=Math.floor(ir.screenPoint[0]),ir.screenPoint[1]=Math.floor(ir.screenPoint[1]),j.push(ir),(0,ui.Ho)(te,ir.screenPoint)};v.sortResults(O.all),(0,at.pC)(O.min.dist)&&pe(O.min);for(const jt of O.all)O.min.target.object!==jt.target.object&&O.max.target.object!==jt.target.object&&pe(jt);if((0,at.pC)(O.max.dist)&&O.max.target.object!==O.min.target.object&&pe(O.max),!j.length)return;te[0]===te[2]&&(te[2]+=1),te[1]===te[3]&&(te[3]+=1);const be=A.fullWidth,Re=A.fullHeight,Ge=Math.max(0,te[0]-Wg),tt=Math.max(0,te[1]-Wg),ft=Math.min((0,ui.bf)(te)+2*Wg,be-Ge),yt=Math.min((0,ui.Cb)(te)+2*Wg,Re-tt),It=new Uint8Array(ft*yt*4);this.view._stage.renderView.readHUDVisibility(Ge,tt,ft,yt,It);let Nt=!0;const Rt=(0,at.Wi)(v.results.max.dist);let Jt=0;for(const jt of j)for(const ir of F6)if(It[4*(Math.min(jt.screenPoint[0]+ir[0],be)-te[0]+(Math.min(jt.screenPoint[1]+ir[1],Re)-te[1])*ft)]){Nt&&(v.results.min.copy(jt.result),Nt=!1),Rt&&v.results.max.copy(jt.result),v.options.store===Ol.eC.ALL&&v.results.all.splice(Jt++,0,jt.result);break}}}const Wg=1,F6=(()=>{const d=[],v=Wg;for(let O=-v;O<=v;O++)for(let A=-v;A<=v;A++)d.push([A+v,O+v]);return d})();class N6{constructor(v){this.result=v,this.screenPoint=(0,rn.J$)()}}let y1;function sx(d){return y1&&y1.viewingMode===d||(y1=(0,oc.Z8)(d)),y1}class ix{constructor(v,O){this.layers=new Array,this.sliceableLayers=new Array,this.include=v?.include,this.exclude=v?.exclude,O(A=>{A.isPickable&&this.filterLayerUid(A.apiLayerUid)&&(A.isSliceable?this.sliceableLayers:this.layers).push(A)})}filterLayerUid(v){const{include:O,exclude:A}=this;return(0,at.Wi)(v)?null==O&&null==A:(null==O||O.has(v))&&(null==A||!A.has(v))}filterRenderGeometry(v){return this.filterLayerUid(v.layerUid)}}function nx(d){return"object"==typeof d&&"intersect"in d}const v1=(0,br.c)(),E1=(0,rn.J$)();var W6=T(39912);let Vg=class extends(vc.Z.EventedMixin(Li.Z)){constructor(d){super(d),this.im=new Array,this.ground=new Array,this.scene=new Array,this.handles=new Map,this.lastElevationQuery=null,this.elevationCacheEnabled=!1}destroy(){this._elevationQuery=(0,at.SC)(this._elevationQuery)}get elevationQuery(){return(0,at.Wi)(this._elevationQuery)&&(this._elevationQuery=new W6.K(this.view.resourceController.scheduler,this.view.spatialReference,()=>this.view.map&&this.view.map.ground,{maximumAutoTileRequests:4})),this._elevationQuery}enableElevationCache(d){d||(this.lastElevationQuery=null),this.elevationCacheEnabled=d}getElevation(d,v,O,A,j){if(this.elevationCacheEnabled&&null!=this.lastElevationQuery){const pe=this.lastElevationQuery;if(d===pe.x&&v===pe.y&&O===pe.z&&A.equals(pe.spatialReference)&&j===pe.queryContext)return pe.result}let te=null;return te=M1(te,this.im,d,v,O,A,j),(0,at.Wi)(te)&&(te=M1(te,this.ground,d,v,O,A,j)),"scene"===j&&(te=M1(te,this.scene,d,v,O,A,j)),this.elevationCacheEnabled&&(this.lastElevationQuery={x:d,y:v,z:O,spatialReference:A,queryContext:j,result:te}),te}queryElevation(d,v,O,A,j,te=null,pe=0){const be=(0,fi.hh)();return this.elevationQuery.queryElevation(d,v,te,pe).then(Re=>{"scene"===j&&(Re=M1(Re,this.scene,d,v,O,A,j)),be.resolve(Re)}).catch(Re=>{(0,fi.D_)(Re)?be.reject(Re):be.resolve(this.getElevation(d,v,O,A,j))}),be.promise}register(d,v){this.handles.set(v,v.on("elevation-change",O=>this.emit("elevation-change",O))),this[d].push(v)}unregister(d){this.handles.has(d)&&(this.handles.get(d).remove(),this.handles.delete(d));for(const v of[this.im,this.ground,this.scene]){const O=v.indexOf(d);O>-1&&v.splice(O,1)}}};function M1(d,v,O,A,j,te,pe){for(const be of v){const Re=be.getElevation(O,A,j,te,pe);(0,at.pC)(Re)&&(d=(0,at.pC)(d)?Math.max(Re,d):Re)}return d}(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Vg.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],Vg.prototype,"spatialReference",void 0),Vg=(0,Je._)([(0,Ds.j)("esri.views.3d.support.CombinedElevationProvider")],Vg);class lp{static isValidProfile(v){return v in lp.profiles}static getDefaultProfile(){return(0,al.Z)("trident")||(0,al.Z)("esri-iPhone")?"low":"medium"}static apply(v,O){const A=lp.profiles[v];O.graphics3D.maxTotalNumberOfFeatures=A.graphics3D.maxTotalNumberOfFeatures,O.graphics3D.maxTotalNumberOfPrimitives=A.graphics3D.maxTotalNumberOfPrimitives,O.graphics3D.polygonLodFactor=A.graphics3D.polygonLodFactor,O.graphics3D.polylineLodFactor=A.graphics3D.polylineLodFactor,O.graphics3D.snapshotAvailable=A.graphics3D.snapshotAvailable;{const j=O.sceneService["3dObject"],te=A.sceneService["3dObject"];j.lodFactor=te.lodFactor,j.lodCrossfadeinDuration=te.lodCrossfadeinDuration,j.lodCrossfadeoutDuration=te.lodCrossfadeoutDuration,j.lodCrossfadeUncoveredDuration=te.lodCrossfadeUncoveredDuration}O.sceneService.point.lodFactor=A.sceneService.point.lodFactor,O.sceneService.integratedMesh.lodFactor=A.sceneService.integratedMesh.lodFactor,O.sceneService.pointCloud.lodFactor=A.sceneService.pointCloud.lodFactor,O.sceneService.uncompressedTextureDownsamplingEnabled=A.sceneService.uncompressedTextureDownsamplingEnabled,O.tiledSurface.lodBias=A.tiledSurface.lodBias,O.tiledSurface.angledSplitBias=A.tiledSurface.angledSplitBias,O.tiledSurface.reduceTileLevelDifferences=A.tiledSurface.reduceTileLevelDifferences,O.tiledSurface.textureFadeDuration=A.tiledSurface.textureFadeDuration,O.heatmap.pixelRatio=A.heatmap.pixelRatio,O.heatmap.maxTotalNumberOfFeatures=A.heatmap.maxTotalNumberOfFeatures,O.antialiasingEnabled=A.antialiasingEnabled,O.physicallyBasedRenderingEnabled=A.physicalBasedRenderingEnabled,O.highQualityTransparency=A.highQualityTransparency,O.memoryLimit=A.memoryLimit,O.additionalCacheMemory=A.additionalCacheMemory,O.frameRate=A.frameRate,O.maximumRenderResolution=A.maximumRenderResolution,O.maximumPixelRatio=A.maximumPixelRatio}}function ox(){const d=!!(0,al.Z)("esri-mobile"),v=!!(0,al.Z)("ios");return{low:{graphics3D:{maxTotalNumberOfFeatures:25e3,maxTotalNumberOfPrimitives:85e4,polygonLodFactor:.5,polylineLodFactor:1,snapshotAvailable:!1},heatmap:{pixelRatio:.125,maxTotalNumberOfFeatures:25e3},sceneService:{"3dObject":{lodFactor:.2,lodCrossfadeinDuration:0,lodCrossfadeoutDuration:0,lodCrossfadeUncoveredDuration:0},point:{lodFactor:1},integratedMesh:{lodFactor:.6},pointCloud:{lodFactor:.5},uncompressedTextureDownsamplingEnabled:!0},tiledSurface:{lodBias:-1,angledSplitBias:.5,reduceTileLevelDifferences:!1,textureFadeDuration:0},antialiasingEnabled:!1,physicalBasedRenderingEnabled:!1,highQualityTransparency:!1,memoryLimit:200,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},medium:{graphics3D:{maxTotalNumberOfFeatures:5e4,maxTotalNumberOfPrimitives:17e5,polygonLodFactor:d?.8:1,polylineLodFactor:d?1.2:1.5,snapshotAvailable:!v},heatmap:{pixelRatio:.25,maxTotalNumberOfFeatures:5e4},sceneService:{"3dObject":{lodFactor:1,lodCrossfadeinDuration:0,lodCrossfadeoutDuration:0,lodCrossfadeUncoveredDuration:400},point:{lodFactor:1},integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:d},tiledSurface:{lodBias:0,angledSplitBias:1,reduceTileLevelDifferences:!(0,al.Z)("disable-feature:reduce-map-tile-levels"),textureFadeDuration:400},antialiasingEnabled:!0,physicalBasedRenderingEnabled:!0,highQualityTransparency:!0,memoryLimit:d?600:750,additionalCacheMemory:d?0:150,frameRate:0,maximumRenderResolution:null,maximumPixelRatio:1},high:{graphics3D:{maxTotalNumberOfFeatures:5e4,maxTotalNumberOfPrimitives:17e5,polygonLodFactor:d?1.2:2,polylineLodFactor:d?1.2:2,snapshotAvailable:!v},heatmap:{pixelRatio:.5,maxTotalNumberOfFeatures:5e4},sceneService:{"3dObject":{lodFactor:1,lodCrossfadeinDuration:0,lodCrossfadeoutDuration:0,lodCrossfadeUncoveredDuration:400},point:{lodFactor:1},integratedMesh:{lodFactor:1},pointCloud:{lodFactor:1},uncompressedTextureDownsamplingEnabled:!1},tiledSurface:{lodBias:0,angledSplitBias:1,reduceTileLevelDifferences:!(0,al.Z)("disable-feature:reduce-map-tile-levels"),textureFadeDuration:400},antialiasingEnabled:!0,physicalBasedRenderingEnabled:!0,highQualityTransparency:!0,memoryLimit:d?900:1500,additionalCacheMemory:0,frameRate:0,maximumRenderResolution:d?null:4096,maximumPixelRatio:d?1:null}}}lp.debug={reset(){const d=ox();for(const v in d)lp.profiles[v]=d[v]}},function(d){d.profiles=ox()}(lp||(lp={}));const b1=lp;var P0=T(67709);let gh=class extends Li.Z{constructor(){super(...arguments),this.color=new yc.Z([0,255,255]),this.haloColor=null,this.haloOpacity=1,this.fillOpacity=.25,this.shadowOpacity=.4,this.shadowColor=new yc.Z([0,0,0]),this.shadowDifference=.2}static toEngineOptions(d){const v=yc.Z.toUnitRGBA(d.color),O=(0,at.pC)(d.haloColor)?yc.Z.toUnitRGBA(d.haloColor):v,A=yc.Z.toUnitRGBA(d.shadowColor);return{color:(0,P0.f)(v[0],v[1],v[2],v[3]),haloColor:(0,P0.f)(O[0],O[1],O[2],O[3]),haloOpacity:d.haloOpacity,haloOpacityOccluded:.25*d.haloOpacity,fillOpacity:d.fillOpacity,fillOpacityOccluded:.25*d.fillOpacity,shadowOpacity:d.shadowOpacity,shadowColor:(0,Ao.f)(A[0],A[1],A[2],A[3]),occludedShadowOpacity:d.shadowOpacity*(1-d.shadowDifference)}}};(0,Je._)([(0,ht.Cb)({type:yc.Z})],gh.prototype,"color",void 0),(0,Je._)([(0,ht.Cb)({type:yc.Z})],gh.prototype,"haloColor",void 0),(0,Je._)([(0,ht.Cb)()],gh.prototype,"haloOpacity",void 0),(0,Je._)([(0,ht.Cb)()],gh.prototype,"fillOpacity",void 0),(0,Je._)([(0,ht.Cb)()],gh.prototype,"shadowOpacity",void 0),(0,Je._)([(0,ht.Cb)({type:yc.Z})],gh.prototype,"shadowColor",void 0),(0,Je._)([(0,ht.Cb)()],gh.prototype,"shadowDifference",void 0),gh=(0,Je._)([(0,Ds.j)("esri.views.3d.support.HighlightOptions")],gh);const yT=gh;var V6=T(35082),z6=T(68886),H6=T(77294);class G6{constructor(v,O){this.spatialReference=O,this.unitInMeters=(0,sT.c9)(this.spatialReference,(0,Mo.Iu)(this.spatialReference).metersPerDegree),this._geometryServiceURLPromise=(0,V6.getGeometryServiceURL)(v&&v.get("portalItem")).catch(()=>{throw new So.Z("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config")})}toGeographic(v){var O=this;return(0,oi.Z)(function*(){const A=yield O._geometryServiceURLPromise;let j,te=!0;Array.isArray(v[0])&&"number"!=typeof v[0]?j=v:(j=[v],te=!1);const pe=j.map(Ge=>Ge instanceof Eo.Z?Ge:new Eo.Z(Ge,O.spatialReference)),be=new H6.Z({geometries:pe,outSpatialReference:ba.Z.WGS84}),Re=(yield(0,z6.i)(A,be)).map(Ge=>"point"===Ge.type?[Ge.x,Ge.y]:void 0);return te?Re:Re[0]})()}}let yh=class extends Li.Z{constructor(){super(...arguments),this.minTotalNumberOfFeatures=2e3,this.maxTotalNumberOfFeatures=5e4,this.maxTotalNumberOfPrimitives=17e5,this.snapshotAvailable=!0,this.polygonLodFactor=1,this.polylineLodFactor=1}};(0,Je._)([(0,ht.Cb)()],yh.prototype,"minTotalNumberOfFeatures",void 0),(0,Je._)([(0,ht.Cb)()],yh.prototype,"maxTotalNumberOfFeatures",void 0),(0,Je._)([(0,ht.Cb)()],yh.prototype,"maxTotalNumberOfPrimitives",void 0),(0,Je._)([(0,ht.Cb)()],yh.prototype,"snapshotAvailable",void 0),(0,Je._)([(0,ht.Cb)()],yh.prototype,"polygonLodFactor",void 0),(0,Je._)([(0,ht.Cb)()],yh.prototype,"polylineLodFactor",void 0),yh=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.Graphics3DSettings")],yh);let vh=class extends Li.Z{constructor(){super(...arguments),this.lodFactor=1}};(0,Je._)([(0,ht.Cb)()],vh.prototype,"lodFactor",void 0),vh=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.LoDFactorSettings")],vh);let T1=class extends vh{constructor(){super(...arguments),this.lodCrossfadeinDuration=0,this.lodCrossfadeoutDuration=0,this.lodCrossfadeUncoveredDuration=0}};T1=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.LoDFactor3DObjectSettings")],T1);let s_=class extends Li.Z{constructor(){super(...arguments),this["3dObject"]=new T1,this.point=new vh,this.integratedMesh=new vh,this.pointCloud=new vh,this.uncompressedTextureDownsamplingEnabled=!1}};(0,Je._)([(0,ht.Cb)({type:T1})],s_.prototype,"3dObject",void 0),(0,Je._)([(0,ht.Cb)({type:vh})],s_.prototype,"point",void 0),(0,Je._)([(0,ht.Cb)({type:vh})],s_.prototype,"integratedMesh",void 0),(0,Je._)([(0,ht.Cb)({type:vh})],s_.prototype,"pointCloud",void 0),(0,Je._)([(0,ht.Cb)()],s_.prototype,"uncompressedTextureDownsamplingEnabled",void 0),s_=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.SceneServiceSettings")],s_);let cp=class extends Li.Z{constructor(){super(...arguments),this.lodBias=0,this.angledSplitBias=1,this.reduceTileLevelDifferences=!0,this.textureFadeDuration=500}};(0,Je._)([(0,ht.Cb)()],cp.prototype,"lodBias",void 0),(0,Je._)([(0,ht.Cb)()],cp.prototype,"angledSplitBias",void 0),(0,Je._)([(0,ht.Cb)()],cp.prototype,"reduceTileLevelDifferences",void 0),(0,Je._)([(0,ht.Cb)()],cp.prototype,"textureFadeDuration",void 0),cp=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.TiledSurfaceSettings")],cp);let Ff=class extends Li.Z{constructor(){super(...arguments),this.pixelRatio=1,this.maxTotalNumberOfFeatures=5e4}};(0,Je._)([(0,ht.Cb)()],Ff.prototype,"pixelRatio",void 0),(0,Je._)([(0,ht.Cb)()],Ff.prototype,"maxTotalNumberOfFeatures",void 0),Ff=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.HeatmapSettings")],Ff);let Wc=class extends Li.Z{constructor(){super(...arguments),this.graphics3D=new yh,this.sceneService=new s_,this.tiledSurface=new cp,this.heatmap=new Ff,this.antialiasingEnabled=!0,this.physicallyBasedRenderingEnabled=!1,this.highQualityTransparency=!0}};(0,Je._)([(0,ht.Cb)({type:yh})],Wc.prototype,"graphics3D",void 0),(0,Je._)([(0,ht.Cb)({type:s_})],Wc.prototype,"sceneService",void 0),(0,Je._)([(0,ht.Cb)({type:cp})],Wc.prototype,"tiledSurface",void 0),(0,Je._)([(0,ht.Cb)({type:Ff})],Wc.prototype,"heatmap",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"antialiasingEnabled",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"physicallyBasedRenderingEnabled",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"highQualityTransparency",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"memoryLimit",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"additionalCacheMemory",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"frameRate",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"maximumRenderResolution",void 0),(0,Je._)([(0,ht.Cb)()],Wc.prototype,"maximumPixelRatio",void 0),Wc=(0,Je._)([(0,Ds.j)("esri.views.3d.support.QualitySettings.QualitySettings")],Wc);const ax=Wc;var K6=T(60011),zg=T(39135),lx=T(1036);function cx(d){return"function"==typeof d.getUsedMemory}const Y6=vo.Z.getLogger("esri.views.3d.support.MemoryController");let Vc=class extends Li.Z{constructor(d){super(d),this._quality=1,this._memoryUsed=0,this._updating=!1,this.minQuality=.1,this._stableQuality=0,this._downscaleMemoryUsed=0,this._canFastRecover=!1,this._memoryPredicted=0,this._cacheStorage=new lx.WJ,this._numQualityChanges=0,this._maxMemory=500,this._additionalCacheMemory=100}destroy(){this._cacheStorage.destroy()}set maxMemory(d){null==d||d<=0||(this._stableQuality=0,this._canFastRecover=!1,this._maxMemory<d&&this._updateQuality(1),this._maxMemory=d)}get maxMemory(){return this._maxMemory}set additionalCacheMemory(d){null!=d&&d>=0&&(this._additionalCacheMemory=d)}get additionalCacheMemory(){return this._additionalCacheMemory}get memoryFactor(){return this._quality}get updating(){return this._updating}get usedMemory(){return this._memoryUsed}newCache(d,v){return new lx.Xq(d,this._cacheStorage,v)}resetStableQuality(){this._stableQuality=0}disableMemCache(){this.additionalCacheMemory=-4096}update(){if(this._updateMemory(),this._memoryPredicted<=0&&!this._updating)return;let d=this._layersUpdating();this._memoryPredicted<.6&&this._canFastRecover?(this._downscaleMemoryUsed=0,this._stableQuality=0,this._canFastRecover=!1,this._updateQuality(1)):d?(this._memoryPredicted>1.1||this._memoryUsed>1)&&(this._stableQuality>0?(this._downscaleMemoryUsed=0,this._updateQuality(this._stableQuality)):this._quality>this.minQuality&&this._downscaleMemoryUsed<this._memoryUsed&&(this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryUsed,this._canFastRecover=!1)):(this._downscaleMemoryUsed=0,this._memoryUsed>1?(this._stableQuality=0,this._canFastRecover=!1,d=this._updateQuality(this._quality/1.3),this._downscaleMemoryUsed=this._memoryPredicted):this._stableQuality!==this._quality&&(this._memoryUsed<.75&&this._quality<1?(this._stableQuality=this._quality,d=this._updateQuality(this._quality+.05)):this._quality<1&&(this._canFastRecover=!0))),this._updating=d}_updateQuality(d){return(d=Math.min(Math.max(d,this.minQuality),1))!==this._quality&&(this._quality=d,++this._numQualityChanges,!0)}_layersUpdating(){return this.view.allLayerViews.some(d=>!!d.updating)}_updateMemory(){let d=0,v=0;this.view.basemapTerrain&&this.view.basemapTerrain.getUsedMemory&&(d+=this.view.basemapTerrain.getUsedMemory());const O=this.view._stage&&this.view._stage.renderView&&this.view._stage.renderView.edgeView;(0,at.pC)(O)&&(d+=O.usedMemory),this.view.allLayerViews&&this.view.allLayerViews.forEach(pe=>{if(cx(pe)){const be=pe.ignoresMemoryFactor()?this._quality:1;d+=pe.getUsedMemory()*be,v+=pe.getUnloadedMemory()*be}});const A=null==this._warnMemoryUsage||Math.round(10*d)!==Math.round(10*this._warnMemoryUsage),j=1048576*this.maxMemory;if(d>j&&A){this._warnMemoryUsage=d;const pe=Re=>(Re/1048576).toLocaleString(void 0,{maximumFractionDigits:1})+" MB",be=Math.round(100*this._quality);Y6.warn(`Memory Limit exceeded! Limit: ${pe(j)} Current: ${pe(d)} Projected: ${pe(d+v)} Quality: ${be}%`)}this._memoryUsed=d/j,this._memoryPredicted=(d+v)/j,this._cacheStorage.maxSize=Math.max(0,j-d+1048576*this.additionalCacheMemory)}get test(){const d=this;return{cacheStorage:this._cacheStorage,resetQualityChanges:()=>{const v=d._numQualityChanges;return d._numQualityChanges=0,v}}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Vc.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"maxMemory",null),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"additionalCacheMemory",null),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"memoryFactor",null),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"updating",null),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"usedMemory",null),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_quality",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_memoryUsed",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_updating",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_stableQuality",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_maxMemory",void 0),(0,Je._)([(0,ht.Cb)()],Vc.prototype,"_additionalCacheMemory",void 0),Vc=(0,Je._)([(0,Ds.j)("esri.views.3d.support.MemoryController")],Vc);var ET=T(91540);let O1=class extends Li.Z{constructor(){super(...arguments),this.updating=!1}};var MT;(0,Je._)([(0,ht.Cb)({readOnly:!0})],O1.prototype,"updating",void 0),O1=(0,Je._)([(0,Ds.j)("esri.views.3d.support.ResourceController")],O1),function(d){let v=class extends O1{constructor(){super(...arguments),this._scheduler=null,this._memoryController=null,this._streamDataLoader=null,this._scheduleTask=lo.sq,this._cameraChangeTime=0,this._handles=new so.Z,this._frameTask=null,this._state=lo.ZM.IDLE}initialize(){this._cameraChangeTime=performance.now(),this._scheduler=(0,lo.z4)(),this._memoryController=function Z6(d){return new Vc({view:d})}(this.view),this._streamDataLoader=new ET.wu,this._streamDataLoader.setup(zg.NT,zg.Ty,this._scheduler),this._handles.add([(0,wr.YP)(()=>this.view.state?.camera,(A,j)=>this._cameraChangedHandler(A,j),wr.Z_),(0,wr.YP)(()=>this.view.stationary,()=>this._stationaryChangedHandler())]),this._frameTask=(0,w_.A)({update:A=>this._frame(A)}),this._scheduleTask=this._scheduler.registerTask(lo.T8.RESOURCE_CONTROLLER)}destroy(){this._handles=(0,at.SC)(this._handles),this._scheduleTask.remove(),this._frameTask=(0,at.hw)(this._frameTask),this._streamDataLoader=(0,at.SC)(this._streamDataLoader),this._memoryController=(0,at.SC)(this._memoryController),this._scheduler=(0,at.SC)(this._scheduler)}get updating(){return!!(this._memoryController?.updating||this._streamDataLoader?.updating||this._scheduleTask?.updating)}get scheduler(){return this._scheduler}get memoryController(){return this._memoryController}schedule(A,j,te){return this._scheduleTask.schedule(A,j,te)}createStreamDataRequester(A){const j=this._streamDataLoader;return{request:(te,pe,be)=>j.request(te,pe,A,be),get busy(){return!j.hasDownloadSlots(A)}}}_frame(A){this.view.suspended||this.view.stateManager&&(this.view.stateManager.step((0,ro.D9)(A.deltaTime)),!this._scheduler)||(this._updateState(),this._scheduler.state=this._state,this._scheduler.updateBudget(A)?(this._memoryController.update(),this._scheduler.frame()):this._memoryController.updating&&this._memoryController.update())}_cameraChangedHandler(A,j){A&&j&&A.almostEquals(j)||(this._cameraChangeTime=performance.now(),this._updateState(),this._scheduler.state=this._state)}_stationaryChangedHandler(){this.memoryController.resetStableQuality()}_updateState(){this.view.animation?this._state=lo.ZM.ANIMATING:this.view.interacting?this._state=lo.ZM.INTERACTING:(this._state===lo.ZM.ANIMATING&&(this._cameraChangeTime=0),this._state=performance.now()-this._cameraChangeTime<=O?lo.ZM.INTERACTING:lo.ZM.IDLE)}get test(){return{getQueueStats:A=>this._streamDataLoader.test.loadQueue.getStatsForType(A),state:this._state}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],v.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"_scheduler",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"_memoryController",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"_streamDataLoader",void 0),(0,Je._)([(0,ht.Cb)()],v.prototype,"_scheduleTask",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],v.prototype,"updating",null),v=(0,Je._)([(0,Ds.j)("esri.views.3d.support.ResourceController")],v),d.ResourceController=v;const O=300}(MT||(MT={}));var X6=T(27306),ti=T(61779);class q6{constructor(v,O){if(this.layer=null,this.memory=0,this.displayedNumberOfFeatures=0,this.maximumNumberOfFeatures=null,this.totalNumberOfFeatures=null,this.layer=v.layer,this.memory=(0,ti.wP)(v)?O.basemapTerrain.getUsedMemoryForLayerView(v):v.getUsedMemory(),function Q6(d){return"performanceInfo"in d}(v)){const A=v.performanceInfo;this.displayedNumberOfFeatures=A.displayedNumberOfFeatures,this.maximumNumberOfFeatures=A.maximumNumberOfFeatures,this.totalNumberOfFeatures=A.totalNumberOfFeatures}}}class eB{constructor(v){this.totalMemory=0,this.usedMemory=0,this.quality=1,this.load=0,this.terrainMemory=0,this.edgesMemory=0,this.layerPerformanceInfos=new Array;const O=v.resourceController.memoryController;this.totalMemory=O.maxMemory*X6.Y8.MEGABYTES,this.usedMemory=Math.round(O.usedMemory*this.totalMemory),this.quality=O.memoryFactor,this.load=v.resourceController.scheduler.load,this.terrainMemory=v.basemapTerrain?v.basemapTerrain.getUsedMemory():0;const A=v._stage&&v._stage.renderView&&v._stage.renderView.edgeView;this.edgesMemory=(0,at.pC)(A)?A.usedMemory:0,v.allLayerViews.items.forEach(j=>{(cx(j)||(0,ti.wP)(j))&&this.layerPerformanceInfos.push(new q6(j,v))}),this.layerPerformanceInfos.sort((j,te)=>te.memory-j.memory)}}var Gi=T(42743),tB=T(81695);class rB extends ef{constructor(v,O,A,j){super(O,j),this._streamDataRequester=v,this._parameters=A}fromUrl(v,O,A){var j=this;return(0,oi.Z)(function*(){(0,fi.k_)(A);const te=(0,at.pC)(A)&&A.signal,pe=j.makeUid(v,O);let be=j._textureRequests.get(pe);if(!be){const Re=new AbortController,Ge=j._streamDataRequester.request(v,"image",{uid:pe,signal:Re.signal});be={referenceCount:0,texture:null,textureAsync:null,abortController:Re},j._textureRequests.set(pe,be),be.textureAsync=Ge.then(function(){var tt=(0,oi.Z)(function*(ft){const yt=j._createTexture(v,ft,O);return be.texture=yt,be.abortController=null,j._stage.add(yt),yield j._stage.load(yt),{uid:pe,texture:yt,release:()=>j._release(pe)}});return function(ft){return tt.apply(this,arguments)}}(),tt=>{throw be.abortController=null,tt})}return be.referenceCount++,new Promise((Re,Ge)=>{(0,fi.fu)(te,()=>{Ge((0,fi.zE)())}),be.textureAsync.then(Re,Ge)}).catch(Re=>{throw j._release(pe),Re})})()}_createTexture(v,O,A){const j={...this._parameters,powerOfTwoResizeMode:Gi.CE.PAD};if((0,sM.zd)(v)){if(A||0===O.width&&0===O.height){const te=O.width?O.height/O.width:1;A=A||64,te>1?(O.width=Math.round(A/te),O.height=A):(O.width=A,O.height=Math.round(A*te))}this._stage.renderView&&this._stage.renderView.renderingContext.driverTest.svgAlwaysPremultipliesAlpha&&(j.preMultiplyAlpha=!1)}return j.width=O.width,j.height=O.height,new tB.x(O,j)}}class sB{constructor(v){this.textures=null,this.streamDataRequester=null,this.graphicsOwners=[],this.screenSizePerspectiveHandles=null,this.cimSymbolRasterizer=null,this.viewState=v.viewState,this.view=v.view,this.pointsOfInterest=v.pointsOfInterest,this.objectResourceCache=v.objectResourceCache,this.streamDataRequester=v.resourceController.createStreamDataRequester(zg.Bh.SYMBOLOGY),this.textures=new rB(this.streamDataRequester,v.view._stage,{preMultiplyAlpha:!0,wrap:{s:Gt.e8.CLAMP_TO_EDGE,t:Gt.e8.CLAMP_TO_EDGE}},v.resourceController.scheduler);const O=(0,Mo.Iu)(this.view.spatialReference).radius;this.screenSizePerspectiveSettings=(0,r1.Gw)(v.viewingMode,O),this.screenSizePerspectiveSettingsLabels=(0,r1.n9)(v.viewingMode,O)}destroy(){this.textures.destroy(),this.textures=null,this.streamDataRequester=null}addGraphicsOwner(v){if(!v)return(0,L_.kB)();this.graphicsOwners.push(v);const O=(0,wr.YP)(()=>v.layer?.screenSizePerspectiveEnabled,()=>this._updateScreenSizePerspectiveEnabled());return this._updateScreenSizePerspectiveEnabled(),(0,L_.kB)(()=>{O.remove(),(0,Qp.e$)(this.graphicsOwners,v),this._updateScreenSizePerspectiveEnabled()})}_updateScreenSizePerspectiveEnabled(){const v=this.graphicsOwners.some(O=>!0===O.layer?.screenSizePerspectiveEnabled);if(v&&!this.screenSizePerspectiveHandles){this.screenSizePerspectiveHandles=new so.Z;const O=()=>this._updateScreenSizePerspectiveSettings();this.screenSizePerspectiveHandles.add([(0,wr.YP)(()=>this.pointsOfInterest.centerOnSurfaceInfrequent.distance,O,wr.Z_),this.viewState.events.on("camera-projection-changed",O)]),this._updateScreenSizePerspectiveSettings()}else!v&&this.screenSizePerspectiveHandles&&(this.screenSizePerspectiveHandles.destroy(),this.screenSizePerspectiveHandles=null)}_updateScreenSizePerspectiveSettings(){P1.distance=this.pointsOfInterest.centerOnSurfaceInfrequent.distance,P1.fovY=this.viewState.camera.fovY,this.screenSizePerspectiveSettings.update(P1),this.screenSizePerspectiveSettingsLabels.update(P1),this.view._stage.renderView.requestRender()}get test(){return{screenSizePerspectiveHandles:this.screenSizePerspectiveHandles}}}const P1={distance:0,fovY:0};var dx=T(20383),iB=(T(37118),T(9260),T(89673),T(69852)),nB=T(26531),oB=T(21716);class up{constructor(v,O,A=""){this.graphics=v,this._symbol=new iB.Z({symbolLayers:[new nB.Z({material:{color:O},outline:{color:[255,255,255],size:1},resource:{primitive:"circle"}}),new oB.Z({text:A,halo:{color:"white",size:1/.75},material:{color:O},size:12})]})}show(v,O){if((0,at.Wi)(O))return;this.hide();const A=new Eo.Z({x:v[0],y:v[1],z:v[2],spatialReference:O});this._graphic=new aM.Z({geometry:A,symbol:this._symbol}),this.graphics.add(this._graphic)}hide(){(0,at.pC)(this._graphic)&&(this.graphics.remove(this._graphic),this._graphic=null)}}let dp=class extends Li.Z{constructor(d){super(d),this.handles=new so.Z}destroy(){this.handles.destroy()}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],dp.prototype,"renderCoordsHelper",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],dp.prototype,"surface",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],dp.prototype,"state",void 0),dp=(0,Je._)([(0,Ds.j)("esri.views.3d.support.PointOfInterest")],dp);const aB=Array;let Ku=class extends dp{constructor(d){super(d),this._dirty=!1,this._propertiesPool=new op.L({location:Eo.Z,renderLocation:aB},this),this._estimatedSurfaceAltitude=0,this._pendingElevationQueryController=null,this.cameraName="camera",this.renderLocation=(0,br.c)(),this.tmpPoint=new Eo.Z}initialize(){if(this.scheduler&&this.handles.add(this.scheduler.registerTask(this.task,this)),this.runTask(),this.map){const d=()=>this._setDirty();this.handles.add((0,wr.on)(()=>this.map?.ground?.layers,"change",d,{onListenerAdd:d,onListenerRemove:d}))}this._updateRenderLocation()}destroy(){this._cancelPendingRequest(),this._propertiesPool.destroy(),this._propertiesPool=null}get _camera(){return this.state[this.cameraName]}get location(){const d=this._propertiesPool.get("location");return this.renderCoordsHelper.fromRenderCoords(this.renderLocation,d,this.state.spatialReference),d}get scale(){const d=this._camera,v=(0,Et.i)(d.eye,this.renderLocation);return y0({renderCoordsHelper:this.renderCoordsHelper,state:{camera:d}},v,0)}get updating(){return this._dirty||null!=this._pendingElevationQueryController}updateRenderLocation(){this._setDirty(),this._updateRenderLocation()}_setDirty(){this._dirty||(this._dirty=!0,this.notifyChange("updating"))}_cancelPendingRequest(){const d=this._pendingElevationQueryController;d&&(this._pendingElevationQueryController=null,d.abort(),this.notifyChange("updating"))}get running(){return!this._pendingElevationQueryController&&this._dirty}runTask(){if(this._cancelPendingRequest(),this._dirty=!1,this.notifyChange("updating"),!this.map||!this.map.ground)return void this._updateSurfaceAltitude(0);this.renderCoordsHelper.fromRenderCoords(this._camera.eye,this.tmpPoint,this.state.spatialReference);let d=new AbortController;this.map.ground.queryElevation(this.tmpPoint,{signal:d.signal,cache:this.cache}).then(v=>this._updateSurfaceAltitude(v.geometry.z)).catch(v=>{(0,fi.D_)(v)||this._updateSurfaceAltitude(0)}).catch(()=>{}).then(()=>{this._pendingElevationQueryController===d&&(this._pendingElevationQueryController=null,this.notifyChange("updating")),d=null}),this._pendingElevationQueryController=d}_updateSurfaceAltitude(d){this._estimatedSurfaceAltitude!==d&&(this._estimatedSurfaceAltitude=d,this._updateRenderLocation())}_updateRenderLocation(){this.renderCoordsHelper.setAltitude(bT,this._estimatedSurfaceAltitude,this._camera.eye),(0,Et.k)(this._get("renderLocation"),bT)||this._set("renderLocation",(0,Et.c)(this._propertiesPool.get("renderLocation"),bT))}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ku.prototype,"scheduler",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ku.prototype,"cache",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ku.prototype,"task",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ku.prototype,"cameraName",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ku.prototype,"location",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ku.prototype,"map",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ku.prototype,"renderLocation",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ku.prototype,"scale",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ku.prototype,"updating",null),Ku=(0,Je._)([(0,Ds.j)("esri.views.3d.support.CameraOnSurface")],Ku);const bT=(0,br.c)(),lB=Array;let fu=class extends dp{constructor(d){super(d),this._propertiesPool=new op.L({location:Eo.Z,renderLocation:lB},this),this._currentSurfaceAltitude=0,this._latestSurfaceAltitude=0,this.cameraName="camera",this.distance=0,this.renderLocation=(0,br.c)(),this.updating=!1}initialize(){this._frameWorker=this.scheduler.registerTask(this.task,this),this.runTask()}destroy(){this._frameWorker=(0,at.hw)(this._frameWorker),this._propertiesPool=(0,at.SC)(this._propertiesPool)}get _camera(){return this.state[this.cameraName]}get location(){const d=this._propertiesPool.get("location");return this.renderCoordsHelper.fromRenderCoords(this.renderLocation,d,this.state.spatialReference),d}updateRenderLocation(){this.updating=!0,this._updateRenderLocation()}get estimatedSurfaceAltitude(){return this._latestSurfaceAltitude}get running(){return this.updating}runTask(){this._latestSurfaceAltitude=this.estimateSurfaceAltitudeAtCenter(),this._updateRenderLocation(),this.updating=!1}_updateRenderLocation(){const d=uB;let v=this._calculateSurfaceIntersection(this._currentSurfaceAltitude,d);!v&&this._currentSurfaceAltitude!==this._latestSurfaceAltitude&&(v=this._calculateSurfaceIntersection(this._latestSurfaceAltitude,d),v&&(this._currentSurfaceAltitude=this._latestSurfaceAltitude));const A=dB;v&&this._latestSurfaceAltitudeChangesDistanceSignificantly(d,A)&&((0,Et.c)(d,A),this._currentSurfaceAltitude=this._latestSurfaceAltitude),v?this.distance=(0,Et.i)(this._camera.eye,d):((0,Et.g)(d,this._camera.viewForward,this._get("distance")),(0,Et.a)(d,d,this._camera.eye)),(0,Et.k)(this._get("renderLocation"),d)||this._set("renderLocation",(0,Et.c)(this._propertiesPool.get("renderLocation"),d))}_calculateSurfaceIntersection(d,v){const O=this._camera;if(!this.renderCoordsHelper.intersectManifold(O.ray,d,v))return!1;if(this.state.isGlobal){const A=(0,Mo.Iu)(this.renderCoordsHelper.spatialReference).radius,j=A+d,te=(0,Et.p)(O.eye),pe=te<j*j,be=(0,Et.i)(O.eye,v);if(pe&&be>A/4){const Re=j-Math.sqrt(te);return(0,Et.g)(v,O.viewForward,Re),(0,Et.a)(v,v,O.eye),!0}}else{const A=this.surface.ready?this.surface.extent:null;(0,at.pC)(A)&&(0,tn.dH)(A,this.surface.spatialReference,Hg,this.renderCoordsHelper.spatialReference)&&(v[0]=(0,cs.uZ)(v[0],Hg[0],Hg[2]),v[1]=(0,cs.uZ)(v[1],Hg[1],Hg[3]))}return!0}_latestSurfaceAltitudeChangesDistanceSignificantly(d,v){if(this._latestSurfaceAltitude===this._currentSurfaceAltitude||null==d)return!1;if(this._calculateSurfaceIntersection(this._latestSurfaceAltitude,v)){if(Nl.Z.TESTS_DISABLE_OPTIMIZATIONS)return!0;const O=this._camera.eye,A=(0,Et.i)(O,d),j=(0,Et.i)(O,v);if(Math.abs(j-A)/A>cB)return!0}return!1}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],fu.prototype,"scheduler",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],fu.prototype,"task",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],fu.prototype,"cameraName",void 0),(0,Je._)([(0,ht.Cb)()],fu.prototype,"distance",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],fu.prototype,"estimateSurfaceAltitudeAtCenter",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],fu.prototype,"location",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],fu.prototype,"renderLocation",void 0),(0,Je._)([(0,ht.Cb)()],fu.prototype,"updating",void 0),fu=(0,Je._)([(0,Ds.j)("esri.views.3d.support.CenterOnSurface")],fu);const cB=.05,uB=(0,br.c)(),dB=(0,br.c)(),Hg=(0,ui.Ue)();class hB{constructor(v){this.handles=new so.Z,this.events=new vc.Z,this.contentLayerViews=v.contentLayerViews,this.handles.add(this.contentLayerViews.on("change",O=>this._layerViewsChanged(O))),this._layerViewsChanged({added:this.contentLayerViews.toArray(),removed:[],moved:[],target:this.contentLayerViews})}destroy(){this.handles&&(this.handles.destroy(),this.handles=null)}_layerViewsChanged(v){v.added.forEach(O=>{"esri.views.3d.layers.SceneLayerView3D"===O.declaredClass&&this.handles.add(O.on("visible-geometry-changed",()=>this._contentChanged()),O.uid)}),v.removed.forEach(O=>this.handles.remove(O.uid))}_contentChanged(){this.events.emit("request-update",_B)}}const _B={},pB=Array;let Eh=class extends dp{constructor(d){super(d),this._propertiesPool=new op.L({location:Eo.Z,renderLocation:pB},this),this._dirty=!0,this.renderLocation=this._propertiesPool.get("renderLocation")}initialize(){this.handles.add([(0,wr.YP)(()=>this.centerOnSurface.renderLocation,()=>this.updateRenderLocation()),(0,wr.YP)(()=>this.state.contentCamera,()=>this.updateRenderLocation())]),this.scheduler&&this.handles.add(this.scheduler.registerTask(lo.T8.POINT_OF_INTEREST_FREQUENT,this))}destroy(){this._propertiesPool.destroy(),this._propertiesPool=null}get updating(){return this._dirty||this.centerOnSurface.updating}get location(){const d=this._propertiesPool.get("location");return this.renderCoordsHelper.fromRenderCoords(this.renderLocation,d,this.state.spatialReference),d}get running(){return this._dirty}runTask(){const d=this._get("renderLocation"),v=this.centerOnSurface.renderLocation,O=this.renderCoordsHelper,A=this.state.contentCamera;this._dirty=!1,O.worldUpAtPosition(v,hx);const j=Math.max(0,(Math.acos((0,Et.e)(hx,A.viewForward))-.5*Math.PI)*(A.aboveGround?1:-1));if(Number.isNaN(j)){if(!d||!(0,Et.z)(d,v)){const Re=this._propertiesPool.get("renderLocation");(0,Et.c)(Re,v),this._set("renderLocation",Re)}return}const te=1-(0,cs.uZ)(j/(.5*Math.PI),0,1),pe=te*te*te;this._calculateScreenHorizontalEdgeOnSurface(_x);const be=this._propertiesPool.get("renderLocation");(0,Et.h)(be,v,_x,pe),d&&(0,Et.z)(d,be)||this._set("renderLocation",be)}_calculateScreenHorizontalEdgeOnSurface(d){const v=this.state.contentCamera,O=v.getRenderCenter((0,rn.J$)());if(O[1]=v.aboveGround?v.padding[qn.N.BOTTOM]:v.fullHeight-v.padding[qn.N.TOP],this.estimateSurfaceIntersectionAtRenderPoint(O,d))return d;const A=this.renderCoordsHelper.getAltitude(this.centerOnSurface.renderLocation);if(v.unprojectFromRenderScreen(O,Gg)){(0,Et.b)(Gg,Gg,v.eye);const j=(0,Et.n)(Gg,Gg);if(this.renderCoordsHelper.intersectManifold((0,Fu.re)(v.eye,j),A,d))return d}return this.renderCoordsHelper.setAltitude(d,A,v.eye)}updateRenderLocation(){this._dirty=!0}};(0,Je._)([(0,ht.Cb)()],Eh.prototype,"_dirty",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Eh.prototype,"scheduler",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Eh.prototype,"centerOnSurface",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Eh.prototype,"estimateSurfaceIntersectionAtRenderPoint",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Eh.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Eh.prototype,"location",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Eh.prototype,"renderLocation",void 0),Eh=(0,Je._)([(0,Ds.j)("esri.views.3d.support.CenterOnSurface")],Eh);const hx=(0,br.c)(),Gg=(0,br.c)(),_x=(0,br.c)();let i_=class extends Li.Z{constructor(d){super(d),this.location=null,this._updateController=null,this._handles=new so.Z}get renderLocation(){if(!this.location)return null;const d=(0,br.c)();return this.view.renderCoordsHelper.toRenderCoords(this.location,d),d}initialize(){this.view.state.isLocal&&(this._handles.add([(0,wr.YP)(()=>[this.surfaceView?.spatialReference,this.surfaceView?.extent],()=>this._update()),(0,wr.on)(()=>this.surface?.layers,"change",()=>this._update())]),this._update())}destroy(){this._handles.destroy()}_update(){if(this._updateController&&(this._updateController.abort(),this._updateController=null),!this.surfaceView||(0,at.Wi)(this.surfaceView.extent)||!this.surfaceView.spatialReference)return void this._set("location",null);const d=(0,ui.be)(this.surfaceView.extent),v=new Eo.Z({x:d[0],y:d[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&this.surface.layers.length>0?(this._set("location",null),this._updateController=new AbortController,this.surface.queryElevation(v,{noDataValue:0,signal:this._updateController.signal,cache:this.cache}).then(O=>{this._updateController=null,this._set("location",O.geometry)}).catch(O=>{(0,fi.D_)(O)||O&&"elevation-query:invalid-layer"===O.name||console.error("StableSurfaceCenter failed to update: ",O)})):this._set("location",v)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],i_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],i_.prototype,"cache",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"view.map.ground"})],i_.prototype,"surface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"view.basemapTerrain"})],i_.prototype,"surfaceView",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],i_.prototype,"location",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],i_.prototype,"renderLocation",null),i_=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.StableSurfaceCenter")],i_);let n_=class extends Li.Z{constructor(){super(...arguments),this.handles=new so.Z,this._tileGeometryUpdateExtent=(0,ui.cS)(),this._tileGeometryUpdateSpatialReference=null,this.events=new vc.Z,this.updating=!1}initialize(){this.handles.add([this.surface.on("elevation-change",d=>this._tileGeometryChanged(d)),this.scheduler.registerTask(lo.T8.SURFACE_GEOMETRY_UPDATES,this)])}destroy(){this.handles=(0,at.SC)(this.handles)}get running(){return this.updating}runTask(){this.updating&&(this._centerIntersectsExtent(this._tileGeometryUpdateExtent,this._tileGeometryUpdateSpatialReference)&&this.events.emit("request-update",fB),(0,ui.cS)(this._tileGeometryUpdateExtent),this._set("updating",!1))}_tileGeometryChanged(d){this._tileGeometryUpdateSpatialReference=d.spatialReference,(0,ui.jn)(this._tileGeometryUpdateExtent,d.tile.extent,this._tileGeometryUpdateExtent),this._set("updating",!0)}_furthestCenterOnSurface(){let d=this.centerOnSurfaces[0];for(let v=1;v<this.centerOnSurfaces.length;v++){const O=this.centerOnSurfaces[v];O.distance>d.distance&&(d=O)}return d}_centerIntersectsExtent(d,v){const O=this.state.camera.eye,A=mB,j=this._furthestCenterOnSurface();return this.renderCoordsHelper.fromRenderCoords(O,D0,v),this.renderCoordsHelper.fromRenderCoords(j.renderLocation,x0,v),D0[0]<x0[0]?(A[0]=D0[0],A[2]=x0[0]):(A[0]=x0[0],A[2]=D0[0]),D0[1]<x0[1]?(A[1]=D0[1],A[3]=x0[1]):(A[1]=x0[1],A[3]=D0[1]),(0,ui.kK)(A,d)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],n_.prototype,"state",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],n_.prototype,"centerOnSurfaces",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],n_.prototype,"renderCoordsHelper",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],n_.prototype,"scheduler",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],n_.prototype,"surface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],n_.prototype,"updating",void 0),n_=(0,Je._)([(0,Ds.j)("esri.views.3d.support.SurfaceGeometryUpdates")],n_);const fB={},D0=(0,br.c)(),x0=(0,br.c)(),mB=(0,ui.cS)();let lc=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this._tmpRay=(0,Fu.Ue)(),this._centerRayDirty=!0,this._surfaceAltitudeAtCenter=0,this._surfaceAltitudeAtCenterDirty=!0,this._contentAltitudeAtCenter=0,this._contentAltitudeAtCenterDirty=!0,this._propertiesPool=new op.L({renderPointOfView:gB},this),this.renderPointOfView=(0,br.c)(),this._pois=new Array,this._debugCenters=new Map}initialize(){const{state:d,basemapTerrain:v,renderCoordsHelper:O,map:A}=this.view;this._surfaceIntersector=(0,oc.Z8)(d.viewingMode),this._surfaceIntersector.options.backfacesTerrain=!d.isGlobal,this._surfaceIntersector.options.invisibleTerrain=!1,this._surfaceIntersector.options.store=Ol.eC.MIN,this._contentIntersector=(0,oc.Z8)(d.viewingMode);const j=()=>this._estimateSurfaceAltitudeAtCenter(),te=this.view.resourceController.scheduler,pe=(0,at.Wg)(this.view.basemapTerrain?.elevationQueryCache),be={state:d,scheduler:te,surface:v,renderCoordsHelper:O};this._set("centerOnSurfaceInfrequent",new fu({...be,task:lo.T8.POINT_OF_INTEREST_INFREQUENT,estimateSurfaceAltitudeAtCenter:j})),this._set("centerOnSurfaceFrequent",new fu({...be,task:lo.T8.POINT_OF_INTEREST_FREQUENT,estimateSurfaceAltitudeAtCenter:j})),this._set("contentCenterOnSurface",new fu({...be,task:lo.T8.POINT_OF_INTEREST_INFREQUENT,estimateSurfaceAltitudeAtCenter:j,cameraName:"contentCamera"})),this._set("centerOnContent",new fu({...be,task:lo.T8.POINT_OF_INTEREST_FREQUENT,estimateSurfaceAltitudeAtCenter:()=>this._estimateContentAltitudeAtCenter()})),this._set("cameraOnSurface",new Ku({...be,cache:pe,task:lo.T8.POINT_OF_INTEREST_INFREQUENT,map:A})),this._set("contentCameraOnSurface",new Ku({...be,cache:pe,task:lo.T8.POINT_OF_INTEREST_INFREQUENT,map:A,cameraName:"contentCamera"})),this._set("surfaceGeometryUpdates",new n_({...be,centerOnSurfaces:[this.centerOnSurfaceFrequent,this.centerOnContent,this.centerOnSurfaceInfrequent]})),this._set("contentGeometryUpdates",new hB({contentLayerViews:this.view.allLayerViews,renderCoordsHelper:O})),this._set("surfaceOrigin",new i_({cache:pe,view:this.view})),this._set("focus",new Eh({state:d,scheduler:te,surface:v,renderCoordsHelper:O,centerOnSurface:this.contentCenterOnSurface,estimateSurfaceIntersectionAtRenderPoint:(Ge,tt)=>this._estimateSurfaceIntersectionAtRenderPoint(Ge,this.view.state.contentCamera,tt)})),this._pois.push(this.centerOnContent,this.centerOnSurfaceFrequent,this.centerOnSurfaceInfrequent,this.contentCenterOnSurface,this.cameraOnSurface,this.contentCameraOnSurface,this.focus);const Re=this.view.graphics;this._debugCenters.set(this.centerOnContent,new up(Re,"red","CenterOnContent")),this._debugCenters.set(this.centerOnSurfaceFrequent,new up(Re,"red","CenterOnSurface")),this._debugCenters.set(this.centerOnSurfaceInfrequent,new up(Re,"red","CenterOnSurface")),this._debugCenters.set(this.contentCenterOnSurface,new up(Re,"red","ContentCenterOnSurface")),this._debugCenters.set(this.cameraOnSurface,new up(Re,"blue","CameraOnSurface")),this._debugCenters.set(this.contentCameraOnSurface,new up(Re,"blue","ContentCameraOnSurface")),this._debugCenters.set(this.focus,new up(Re,"green","Focus")),this._handles.add([(0,wr.YP)(()=>d.camera,Ge=>this._cameraChanged(Ge),wr.Z_),(0,wr.YP)(()=>v.extent,()=>this._updateCenterPointsOfInterest()),(0,wr.gx)(()=>!v.updating,()=>this._updateCenterPointsOfInterest(),wr.Z_),(0,wr.on)(()=>this.surfaceGeometryUpdates.events,"request-update",()=>this._updateCenterPointsOfInterest()),(0,wr.on)(()=>this.contentGeometryUpdates.events,"request-update",()=>this._updateCenterOnContent()),(0,wr.gx)(()=>Nl.Z.SHOW_POI,Ge=>this._setDebug(Ge),wr.nn)]),this._cameraChanged(this.view.state.camera);for(const Ge of this._pois)Ge.runTask()}destroy(){this._setDebug(!1),this._handles.destroy(),this._propertiesPool.destroy();for(const d of this._pois)d.destroy();this.surfaceOrigin.destroy()}get updating(){return!(!this.surfaceGeometryUpdates?.updating&&!this._pois.some(d=>d.updating))}get centerRay(){return this._centerRayDirty&&(this._centerRay=this.view.sceneIntersectionHelper.getCenterRayWithSubpixelOffset(this.view.state.camera,this._tmpRay),this._centerRayDirty=!1),this._centerRay}_estimateContentAltitudeAtCenter(){if(!this._contentAltitudeAtCenterDirty)return this._contentAltitudeAtCenter;this._contentAltitudeAtCenterDirty=!1;const d=this.centerRay;return(0,at.Wi)(d)||(this._contentAltitudeAtCenter=this.view.sceneIntersectionHelper.intersectRay(d,this._contentIntersector,Nf,vB)?this.view.renderCoordsHelper.getAltitude(Nf):this._estimateSurfaceAltitudeAtCenter()),this._contentAltitudeAtCenter}_estimateSurfaceAltitudeAtCenter(){if(!this.view.basemapTerrain)return 0;if(!this._surfaceAltitudeAtCenterDirty)return this._surfaceAltitudeAtCenter;this._surfaceAltitudeAtCenterDirty=!1;const d=this.centerRay;if((0,at.Wi)(d))return this._surfaceAltitudeAtCenter;const v=d.origin,O=(0,Et.a)(Nf,d.origin,d.direction);return this._surfaceIntersector.resetWithRay(d,this.view.state.camera),this.view.basemapTerrain.intersect(this._surfaceIntersector,null,v,O),this._surfaceIntersector.results.min.getIntersectionPoint(Nf)&&(this._surfaceAltitudeAtCenter=this.view.renderCoordsHelper.getAltitude(Nf)),this._surfaceAltitudeAtCenter}_estimateSurfaceIntersectionAtRenderPoint(d,v,O){const A=(0,_h.eW)(v,d,yB);if((0,at.Wi)(A))return null;const j=A.origin,te=(0,Et.a)(Nf,A.origin,A.direction);return this._surfaceIntersector.resetWithRay(A,v),this.view.basemapTerrain.intersect(this._surfaceIntersector,null,j,te),this._surfaceIntersector.results.min.getIntersectionPoint(O)?O:null}_cameraChanged(d){this._updateCenterPointsOfInterest();const v=d.eye;(0,Et.k)(this.renderPointOfView,v)||this._set("renderPointOfView",(0,Et.c)(this._propertiesPool.get("renderPointOfView"),v))}_updateCenterPointsOfInterest(){this._centerRayDirty=!0,this._surfaceAltitudeAtCenterDirty=!0,this._contentAltitudeAtCenterDirty=!0;for(const d of this._pois)d.updateRenderLocation()}_updateCenterOnContent(){this._contentAltitudeAtCenterDirty=!0,this.centerOnContent.updateRenderLocation()}_setDebug(d){if(!d)return this._debugCenters.forEach(v=>v.hide()),void this._handles.remove("debug");for(const v of this._pois)this._handles.add((0,wr.YP)(()=>v.renderLocation,O=>this._debugCenters.get(v).show(O,v.renderCoordsHelper.spatialReference),wr.nn),"debug")}get test(){return{update:()=>{this.surfaceGeometryUpdates.runTask();for(const d of this._pois)d.runTask()},surfaceGeometryUpdates:this.surfaceGeometryUpdates}}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"centerOnContent",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"centerOnSurfaceFrequent",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"centerOnSurfaceInfrequent",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"contentCenterOnSurface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"cameraOnSurface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"contentCameraOnSurface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"focus",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"renderPointOfView",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"surfaceOrigin",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"contentGeometryUpdates",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"surfaceGeometryUpdates",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],lc.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],lc.prototype,"updating",null),lc=(0,Je._)([(0,Ds.j)("esri.views.3d.support.PointsOfInterest")],lc);const gB=Array,Nf=(0,br.c)(),yB=(0,Fu.Ue)(),vB={exclude:new Set([Vu.cy])};var EB=T(30346);class MB{constructor(v){this.store=v}destroy(){this.store.destroy()}get(v){return this.store.get(v)}put(v,O){this.store.put(v,O,O.values.byteLength+256)}}var bB=T(36596),D1=T(21410),TB=T(41632);class TT{constructor(v=0,O=0){this.min=v,this.max=O,this.level=0,this.hasNoDataValues=!1}copyFrom(v){this.min=v.min,this.max=v.max,this.level=v.level,this.hasNoDataValues=v.hasNoDataValues}}class CB{constructor(v,O,A){this.type="elevation",this.samplerData=null,this.level=v[0],this.i=v[1],this.j=v[2],this.extent=O;const j=A.noDataValue,te=A.values;let pe=1/0,be=-1/0,Re=!0,Ge=!1;for(let tt=0;tt<te.length;tt++){const ft=te[tt];ft!==j?(pe=ft<pe?ft:pe,be=ft>be?ft:be,Re=!1):Ge=!0}Re&&(pe=0,be=0),be=be>-3e38?be:0,this.samplerData={pixelData:A.values,width:A.width,height:A.height,noDataValue:j,safeWidth:.99999999*(A.width-1),dx:(A.width-1)/(O[2]-O[0]),dy:(A.width-1)/(O[3]-O[1]),x0:O[0],y1:O[3]},this.bounds=[pe,be],this.hasNoDataValues=Ge}release(){this.samplerData=null,this.bounds=null}computeMinMaxValue(v,O,A,j){j.min=1/0,j.max=-1/0,j.hasNoDataValues=!1;const te=v-this.level;if(te<=0)return j;const pe=2**te;if(Math.floor(O/pe)!==this.i||Math.floor(A/pe)!==this.j)return j;let be=1/0,Re=-1/0;const Ge=this.samplerData.width,tt=this.samplerData.pixelData,ft=.5*_o.$7;let yt=(Ge-1)/pe,It=(A-this.j*pe)*yt,Nt=(O-this.i*pe)*yt;if(yt<1){const Rt=Math.floor(It),Jt=Math.floor(Nt),jt=Rt+Jt*Ge,ir=tt[jt],or=tt[jt+1],pr=tt[jt+Ge],Lr=tt[jt+Ge+1];if(ir+or+pr+Lr<ft){const Br=It-Rt,gs=Nt-Jt,Cs=(0,Ec.bX)(ir,or,pr,Lr,Br,gs),Us=(0,Ec.bX)(ir,or,pr,Lr,Br+yt,gs),Ks=(0,Ec.bX)(ir,or,pr,Lr,Br,gs+yt),li=(0,Ec.bX)(ir,or,pr,Lr,Br+yt,gs+yt);return j.min=Math.min(Cs,Us,Ks,li),j.max=Math.max(Cs,Us,Ks,li),j}It=Rt,Nt=Jt,yt=1}else It=Math.floor(It),Nt=Math.floor(Nt),yt=Math.ceil(yt);for(let Rt=It;Rt<=It+yt;Rt++)for(let Jt=Nt;Jt<=Nt+yt;Jt++){const jt=tt[Rt+Jt*Ge];jt<ft?(be=Math.min(be,jt),Re=Math.max(Re,jt)):j.hasNoDataValues=!0}return j.min=be,j.max=Re,j}}function px(d,v,O){if((0,at.Wi)(O))return null;for(const A of O){if(!A)continue;const j=A.safeWidth;let te=(0,cs.uZ)(A.dy*(A.y1-v),0,j),pe=(0,cs.uZ)(A.dx*(d-A.x0),0,j);const be=Math.floor(te),Re=Math.floor(pe),Ge=A.width,tt=be*Ge+Re,ft=A.pixelData,yt=ft[tt],It=ft[tt+1],Nt=tt+Ge,Rt=ft[Nt],Jt=ft[Nt+1];if(yt+Rt+It+Jt<.5*_o.$7){te-=be,pe-=Re;const jt=yt+(It-yt)*pe;return jt+(Rt+(Jt-Rt)*pe-jt)*te}}return null}function Io(d,v,O){const A=px(d,v,O);return(0,at.pC)(A)?A:0}let vd=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z}initialize(){this._handles.add([this.layerViews.on("change",()=>this.notifyChange("stencilEnabledExtents"))])}destroy(){this._handles.destroy(),this._handles=null}get layerViewsExtent(){return this._computeLayerViewsExtent()}get tiledLayersExtent(){return this._computeTiledLayersExtent()}get stencilEnabledExtents(){return this._computeStencilEnabledExtents()}_computeStencilEnabledExtents(){const d=[];return this.layerViews.forEach(v=>{const O=v.layer;if("IntegratedMeshLayer"===O.operationalLayerType&&null!=this.viewSpatialReference){const A=fx(O.fullExtent,this.viewSpatialReference);(0,at.pC)(A)&&d.push((0,ui.oJ)(A))}}),d}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],vd.prototype,"layerViewsExtent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],vd.prototype,"tiledLayersExtent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],vd.prototype,"stencilEnabledExtents",null),(0,Je._)([(0,ht.Cb)()],vd.prototype,"viewSpatialReference",void 0),(0,Je._)([(0,ht.Cb)()],vd.prototype,"tilingScheme",void 0),(0,Je._)([(0,ht.Cb)()],vd.prototype,"defaultTiledLayersExtent",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],vd.prototype,"layers",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],vd.prototype,"layerViews",void 0),vd=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.ExtentHelper")],vd);let CT=class extends vd{_computeLayerViewsExtent(){return this._globalExtent}_computeTiledLayersExtent(){return this._globalExtent}get _globalExtent(){return this.viewSpatialReference.isWebMercator?_o.cy:_o.Lz}};CT=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.ExtentHelperGlobal")],CT);let OT=class extends vd{_computeLayerViewsExtent(){const d=(0,ui.cS)(),v=this.viewSpatialReference;this.layerViews.forEach(j=>{const te=j.layer;if(j.isResolved()&&("graphics"!==te.type||!te.internal)){const pe=fx("fullExtentInLocalViewSpatialReference"in j&&j.fullExtentInLocalViewSpatialReference||j.layer.fullExtent,v);(0,ui.jn)(d,pe,d)}});const O=(0,ui.sU)(d)?d:null,A=this._get("layerViewsExtent");return(0,ui.fS)(O,A)?A:O}_computeTiledLayersExtent(){const d=this.tilingScheme;if(!d)return null;const v=this.viewSpatialReference,O=(0,ui.cS)();this.layers.forEach(te=>{if(te.loaded&&(0,lu.iC)(te)){const pe=(0,ti.E_)(te,v,dn.JY.Local);if((0,at.Wi)(pe))return;const{tileInfo:be,fullExtent:Re}=pe;(0,at.pC)(be)&&(0,at.pC)(Re)&&((0,ti.x4)(te)||d.compatibleWith(be)&&Re.spatialReference.equals(d.spatialReference))&&(0,ui.jn)(O,Re,O)}}),(0,ui.jn)(O,this.defaultTiledLayersExtent,O);const A=(0,ui.sU)(O)?O:null,j=this._get("tiledLayersExtent");return(0,ui.fS)(A,j)?j:A}};function fx(d,v){return(0,at.pC)(d)&&!d.spatialReference.equals(v)?(0,tn.fi)(d,d.spatialReference,v):d}OT=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.ExtentHelperLocal")],OT);var Bn,en=T(75224);!function(d){d[d.ELEVATION=0]="ELEVATION",d[d.MAP=1]="MAP"}(Bn||(Bn={}));const S0=[Bn.ELEVATION,Bn.MAP];var Ed=T(61034),PT=T(64835),PB=T(30993),DB=T(14411);function mx(){const d=globalThis.require?.modules;if(d){const v=Object.keys(d);for(const O of v)-1!==O.search(".glsl")&&delete d[O]}}const xB=[[-.1,-2,3.9,2],[-.1,-3.9,3.9,.1],[-2,-3.9,2,.1],[-3.9,-3.9,.1,.1],[-3.9,-2,.1,2],[-3.9,-.1,.1,3.9],[-2,-.1,2,3.9],[-.1,-.1,3.9,3.9]];let hp,zc=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this._spatialReference=null,this._renderSR=null,this._overlaySREqualsRenderSR=!0,this._drapeSources=new Set,this._drapeTargets=new Set,this._placementDirty=!1,this._contentUpdated=!1,this._drawTexturesDirty=!1,this._drawTexturesAnimateDirty=!1,this._hasUnusedRenderTargets=!1,this._longitudeCyclical=null,this._latestOriginId=0,this._maxResolution=(0,al.Z)("esri-mobile")?2048:4096,this._animationTimeLast=0}get running(){return this._placementDirty&&(this._drapeSources.size>0||this.view.graphics.length>0||Nl.Z.OVERLAY_DRAW_DEBUG_TEXTURE)&&!!this._spatialReference&&!this.suspended&&this.surface.ready}get _isSpherical(){return this.view.state.isGlobal}get _worldToPCSRatio(){return(0,at.pC)(this._spatialReference)&&this._spatialReference.isGeographic&&!this.view.state.isLocal?(0,Mo.Iu)(this._spatialReference).metersPerDegree:1}get view(){return this.surface.view}get updating(){return this.running||this.renderer.updating||this._contentUpdated}get hasHighlights(){return this.renderer.hasHighlights}get rendersOccluded(){return this.renderer.rendersOccluded}initialize(){const d=this.view;this.renderer=new PT.CB({view:d,worldToPCSRatio:this._worldToPCSRatio,spatialReference:this._spatialReference}),this._groundIntersector=(0,oc.Z8)(this.view.state.viewingMode),this._groundIntersector.options.backfacesTerrain=!0,this._groundIntersector.options.invisibleTerrain=!0,this._groundIntersector.options.hud=!1,this._handles.add([this.renderer.events.on("has-highlights",()=>{this.setDrawTexturesDirty(),this.notifyChange("hasHighlights")}),this.renderer.events.on("has-water",v=>d._stage?.renderView.setRenderParameters({hasOverlayWater:v})),this.renderer.events.on("renders-occluded",()=>{this.setDrawTexturesDirty(),this.notifyChange("rendersOccluded")}),this.renderer.events.on("content-changed",()=>this.setDrawTexturesDirty()),this.renderer.events.on("textures-disposed",()=>this.updateOverlayResult()),(0,wr.YP)(()=>[d.pointsOfInterest?.renderPointOfView,d.pointsOfInterest?.centerOnSurfaceFrequent?.location],()=>this.setPlacementDirty()),(0,wr.YP)(()=>d.state?.pixelRatio,()=>this.setPlacementDirty(),wr.Z_),this.surface.on("elevation-change",()=>this.setPlacementDirty()),d.on("resize",()=>this.setPlacementDirty()),(0,w_.A)({preRender:v=>{this._contentUpdated=!1,this.renderer.processSyncDrapeSources(),this.renderer.hasOverlays&&(this._dispatchAnimationUpdate(v),this._drawOverlayTextures(this.renderer.overlays,Gi.Xx.UPDATE)),this._hasUnusedRenderTargets&&this._collectUnusedRenderTargetMemory()}}),d.resourceController.scheduler.registerTask(lo.T8.OVERLAY,this),d._stage.renderView.events.on("force-camera-for-screenshot",v=>{this._updateOverlays(v,Gi.Xx.BACKGROUND),this.renderer.hasOverlays&&this._drawOverlayTextures(this.renderer.overlays,Gi.Xx.BACKGROUND,v)})])}destroy(){this.renderer.dispose(),this._handles&&(this._handles.destroy(),this._handles=null),(0,at.pC)(hp)&&(hp.hide(),hp=null)}get hasOverlays(){return this.renderer.hasOverlays}setSpatialReference(d){this._spatialReference=d,this.renderer.spatialReference=d,this._longitudeCyclical=null;const v=this.view.renderSpatialReference;(0,at.pC)(d)&&(0,at.pC)(v)?(this._renderSR=v,this._overlaySREqualsRenderSR=d.equals(this._renderSR),this._isSpherical&&(this._longitudeCyclical=d.isWebMercator?new ic.pE(-20037508.342787,20037508.342787):new ic.pE(-180,180),this.renderer.longitudeCyclical=this._longitudeCyclical),this.renderer&&(this.renderer.worldToPCSRatio=this._worldToPCSRatio)):this.renderer.disposeOverlays()}get gpuMemoryUsage(){return this.renderer.gpuMemoryUsage}registerDrapeSource(d,v,O){this._drapeSources.add(d),this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources);const A=this.renderer.createDrapeSourceRenderer(d,v,O);return this._updateDrapeSourceExtent(d),this._setContentDirty(),this.notifyChange("running"),A}registerGeometryDrapeSource(d){return this.registerDrapeSource(d,DB.S)}_updateDrapeSourceExtent(d){2===this.renderer.overlays.length&&(0,at.pC)(d.setDrapingExtent)&&(0,at.pC)(this._spatialReference)&&d.setDrapingExtent(this.renderer.overlays,this._spatialReference)}unregisterDrapeSource(d){this._drapeSources.has(d)&&(this._drapeSources.delete(d),this.renderer.removeDrapeSourceRenderer(d),this.renderer.ensureDrapeSources(this._drapeSources),this._setContentDirty(),this.notifyChange("running"))}registerDrapeTarget(d){this._drapeTargets.add(d),this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources)}updateOverlayResult(){this.view._stage?.renderView.setRenderParameters({overlays:this.renderer.overlays})}unregisterDrapeTarget(d){this._drapeTargets.delete(d),this.renderer.ensureDrapeTargets(this._drapeTargets)}_setContentDirty(){this.setPlacementDirty(),this.setDrawTexturesDirty()}setPlacementDirty(){this._placementDirty=!0}runTask(){this._updateOverlays(this.view.state.camera,Gi.Xx.UPDATE)}_updateOverlays(d,v){if(!this._spatialReference)return;const O=(0,Ed.Jk)(d.fullWidth,d.fullHeight,this._maxResolution);this._computeOverlayExtents(d,O,o_);const A=(0,ui.bf)(o_.inner)/(0,ui.bf)(o_.outer);this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources);const j=this._updateOverlay(en.fu.INNER,o_.inner,O,1*o_.pixelRatioAdjustment,o_.mapUnitsPerPixel),te=this._updateOverlay(en.fu.OUTER,o_.outer,O,A*o_.pixelRatioAdjustment,o_.mapUnitsPerPixel);j!==Mh.EXTENT&&te!==Mh.EXTENT||(this._drapeSources.forEach(pe=>this._updateDrapeSourceExtent(pe)),this.surface.updateTileOverlayParams(v)),j===Mh.NONE&&te===Mh.NONE||this.setDrawTexturesDirty(),this._placementDirty=!1}_updateOverlay(d,v,O,A,j){if(0===this.renderer.overlays.length)return Mh.NONE;const te=this.renderer.overlays[d],pe=te.mapUnitsPerPixel;if(te.mapUnitsPerPixel=j,te.pixelRatio=A,function SB(d,v){const A=Nl.Z.TESTS_DISABLE_OPTIMIZATIONS?0:1e-5*Math.max(d[2]-d[0],d[3]-d[1],v[2]-v[0],v[3]-v[1]);return Math.abs(v[0]-d[0])<=A&&Math.abs(v[1]-d[1])<=A&&Math.abs(v[2]-d[2])<=A&&Math.abs(v[3]-d[3])<=A}(v,te.extent)&&O===te.resolution)return pe===j?Mh.NONE:Mh.RERENDER_ONLY;(0,ui.JG)(te.extent,v),te.resolution=O;const be=(0,ui.be)(te.extent);return te.renderLocalOrigin=(0,PB.al)(be[0],be[1],0,"OV_"+this._latestOriginId++),Mh.EXTENT}setTileParameters(d){const v=d.renderData.overlay;if(this.renderer.overlays.length>0){const O=this.renderer.overlays[en.fu.INNER],A=this.renderer.overlays[en.fu.OUTER],j=(0,ui.jV)(d.extent,this.surface.extent,gx);this._rectInsideRect(O.extent,j)||this._rectanglesOverlap(j,O.extent)||this._rectanglesOverlap(j,A.extent)?(this._setTileOverlayData(j,en.fu.INNER,v),this._setTileOverlayData(j,en.fu.OUTER,v)):(this._clearTileOverlayData(en.fu.INNER,v),this._clearTileOverlayData(en.fu.OUTER,v))}else this._clearTileOverlayData(en.fu.INNER,v),this._clearTileOverlayData(en.fu.OUTER,v)}overlayPixelSizeInMapUnits(d){if(0===this.renderer.overlays.length)return 0;const v=this.renderer.overlays[en.fu.INNER],O=this.renderer.overlays[en.fu.OUTER],A=this._pointIsInExtent(d,v.extent)?v:O;return(A.extent[2]-A.extent[0])/A.resolution}_setTileOverlayData(d,v,O){if(0===this.renderer.overlays.length)return;const A=this.renderer.overlays[v].extent,j=(0,ui.bf)(A),te=(0,ui.Cb)(A);let pe=d[0];if(this._longitudeCyclical){pe=this._longitudeCyclical.minimalMonotonic(A[0],pe);const be=this._longitudeCyclical.minimalMonotonic(A[0],d[2]);pe>be&&(pe=be-(d[2]-d[0]))}O.setScale(v,(0,ui.bf)(d)/j,(0,ui.Cb)(d)/te),O.setOffset(v,(pe-A[0])/j,(d[1]-A[1])/te)}_clearTileOverlayData(d,v){v.setScale(d,-1,-1),v.setOffset(d,-1,-1)}reloadShaders(){var d=this;return(0,oi.Z)(function*(){mx(),yield d.renderer.reloadShaders(),d.setDrawTexturesDirty(),d.runTask()})()}_dispatchAnimationUpdate(d){const v=(0,ro.HA)(d.time-this._animationTimeLast);(v>=this.surface.view._stage.renderView.animationTimestep||(0,at.pC)(this.forcedAnimationTime)||this._drawTexturesDirty||this._drawTexturesAnimateDirty)&&(this.renderer.updateAnimation({dt:v,forcedTime:this.forcedAnimationTime,camera:this.view.state.camera})&&(this._drawTexturesAnimateDirty=!0),this._animationTimeLast=d.time)}setDrawTexturesDirty(){this.renderer.hasOverlays?(this._contentUpdated=!0,this._drawTexturesDirty=!0):this.setPlacementDirty()}_intersectGroundFromView(d,v,O,A){const j=this.view.sceneIntersectionHelper.getCenterRayWithSubpixelOffset(d,LB,v,O);if((0,at.Wi)(j))return!1;const te=j.origin,pe=(0,Et.a)(x1,j.origin,j.direction);return this._groundIntersector.reset(te,pe,d),this._groundIntersector.intersect([],null),this.view.basemapTerrain.intersect(this._groundIntersector,null,te,pe),this._groundIntersector.results.min.getIntersectionPoint(A)}_findHorizonBasedPointOfInterest(d,v){let O=.5;const A=.55,j=this.view.renderCoordsHelper.getAltitude(d.eye),te=this.view.pointsOfInterest.centerOnSurfaceFrequent,be=(0,cs.uZ)(te.estimatedSurfaceAltitude,d.aboveGround?-1/0:j+1e-5,d.aboveGround?j-1e-5:1/0),Re=d.aboveGround;if("global"===this.view.viewingMode){const Ge=x1;(0,qo.j)((0,qo.k)(qo.t,(0,Mo.Iu)(this.view.spatialReference).radius+be),(0,Fu.re)(d.eye,d.viewForward),Ge),(0,Et.b)(Ge,Ge,d.eye);const tt=ic.Q4.normalize((0,jM.cp)(d.viewForward,Ge,d.viewRight))/d.fovY+.5,ft=tt<=0||tt>=1?.5:A;O=Re?ft*tt:tt+ft*(1-tt)}else{const Ge=.5*Math.PI-Math.acos(-d.viewForward[2]),tt=Math.tan(Ge),ft=(0,Ao.f)(0,tt,1,0),yt=(0,Ml.t)(ft,ft,d.projectionMatrix)[1],It=(0,cs.uZ)(.5+.5*yt,0,1);O=1===It||0===It?.5:Re?It*A:1-(1-It)*A}return!!this._intersectGroundFromView(d,.5,O,v)&&(0,Et.x)(v,d.eye)<te.distance*te.distance}_computeOverlayExtents(d,v,O){const A=this.view.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,j=(0,br.c)();this._findHorizonBasedPointOfInterest(d,j)||(0,Et.c)(j,A);const te=Math.max(.1,(0,Et.i)(d.eye,j)),pe=Y_(this.view.renderCoordsHelper,A,d.eye),be=Math.PI/2-Math.abs(pe-Math.PI/2);Nl.Z.OVERLAY_SHOW_CENTER?((0,at.Wi)(hp)&&(hp=new up(this.view.graphics,"red")),hp.show(j,this._renderSR)):(0,at.pC)(hp)&&hp.hide(),this._overlaySREqualsRenderSR||(0,tn.SH)(j,this._renderSR,j,this._spatialReference);const Re=this.surface.extent,Ge=!this._isSpherical&&(0,at.pC)(this._spatialReference)&&this._spatialReference.isGeographic,tt=Ge&&(0,at.pC)(this._spatialReference)?1/(0,Mo.Iu)(this._spatialReference).metersPerDegree:1,ft=d.perRenderPixelRatio*te*tt;O.mapUnitsPerPixel=ft/this._worldToPCSRatio;let yt=v*ft/2,It=!1,Nt=Ge?90:1/0;this._isSpherical&&(0,at.pC)(Re)&&(0,at.pC)(this._spatialReference)&&(this._spatialReference.isWebMercator?(yt/=Math.cos((0,ph.mZ)(j[1])),Nt=Re[3]):(It=!0,yt/=(0,Mo.Iu)(this._spatialReference).metersPerDegree,Nt=90),yt>=Nt&&(yt=Nt,j[1]=0,this._spatialReference.isWebMercator&&(j[0]=0)));let Rt=1;It&&(Rt=1/Math.max(.2,Math.cos(Math.abs((0,cs.Vl)(j[1])))),yt*Rt>180&&(Rt=180/yt),O.mapUnitsPerPixel*=Rt);const Jt=Math.log(2)/12;yt=Math.exp(Math.round(Math.log(yt)/Jt)*Jt);const jt=yt*Rt,or=.5*v/(32*jt),pr=.5*v/(32*yt);j[0]=Math.round(j[0]*or)/or,j[1]=Math.round(j[1]*pr)/pr;const Lr=O.inner;Lr[0]=j[0]-jt,Lr[1]=j[1]-yt,Lr[2]=j[0]+jt,Lr[3]=j[1]+yt,this._isSpherical&&this._shiftExtentToFitBounds(Lr,1/0,Nt);const Br=O.outer;if(6*jt>(0,ui.bf)(Re))(0,ui.JG)(Br,(0,at.Wg)(Re));else if(be<=.25*Math.PI)Br[0]=Lr[0]-jt,Br[1]=Lr[1]-yt,Br[2]=Lr[2]+jt,Br[3]=Lr[3]+yt;else{(0,tn.SH)(d.eye,this._renderSR,x1,this._spatialReference),(0,Yi.g)(A0,j,x1);let Cs=-Math.atan2(A0[1],A0[0])+.125*Math.PI;Cs<0&&(Cs+=2*Math.PI);const Us=Math.floor(Cs/(.25*Math.PI));(0,Ml.b)(A0,xB[Us],2*yt),A0[0]*=Rt,A0[2]*=Rt,(0,Ml.a)(Br,Lr,A0)}if(this._isSpherical)Br[0]=this._longitudeCyclical.clamp(Br[0]),Br[2]=this._longitudeCyclical.clamp(Br[2]),Br[1]=Math.max(Br[1],-Nt),Br[3]=Math.min(Br[3],Nt);else{const Cs=(0,ui.jV)(Lr,Re,gx),Us=(0,ui.jV)(Br,Re,AB);(0,ui.r3)(Cs,Us)&&(Br[2]=Br[0],Br[3]=Br[1])}const gs=Math.abs(Lr[2]-Lr[0])/v;O.mapUnitsPerPixel=Math.max(O.mapUnitsPerPixel,gs),O.pixelRatioAdjustment=O.mapUnitsPerPixel/gs}_drawOverlayTextures(d,v,O=this.view.state.camera){if(0===d.length||!this._drawTexturesDirty&&!this._drawTexturesAnimateDirty)return;const A=this._drawTexturesDirty;this._drawTexturesDirty=!1,this._drawTexturesAnimateDirty=!1;const j=this._drawOverlay(d[en.fu.INNER],O),te=this._drawOverlay(d[en.fu.OUTER],O);j!==Gi.Yg.CHANGED&&te!==Gi.Yg.CHANGED||this.surface.updateTileOverlayParams(Gi.Xx.UPDATE),this._collectUnusedRenderTargetMemory(),this.updateOverlayResult(),A?(this.surface.requestRender(v),v===Gi.Xx.UPDATE&&this.surface.requestUpdate()):this.surface.requestRender(Gi.Xx.BACKGROUND)}_drawOverlay(d,v){return this._longitudeCyclical?d.setupGeometryViewsCyclical(this._longitudeCyclical):d.setupGeometryViewsDirect(),d.draw(this.renderer,v.pixelRatio)}_collectUnusedRenderTargetMemory(){if(this._hasUnusedRenderTargets=!1,this.renderer.hasOverlays){const d=performance.now();this._hasUnusedRenderTargets=this.renderer.collectUnusedRenderTargetMemory(d)}}_rectanglesOverlap(d,v){return!(0,at.Wi)(d)&&(this._longitudeCyclical?(this._longitudeCyclical.contains(v[0],v[2],d[0])||this._longitudeCyclical.contains(v[0],v[2],d[2])||this._longitudeCyclical.contains(d[0],d[2],v[0]))&&!(d[1]>v[3]||d[3]<v[1]):(0,ui.kK)(d,v))}_rectInsideRect(d,v){return!(0,at.Wi)(v)&&(this._longitudeCyclical?this._longitudeCyclical.contains(d[0],d[2],v[0])&&this._longitudeCyclical.contains(d[0],d[2],v[2])&&v[1]>d[1]&&v[3]<d[3]:(0,ui.r3)(d,v))}_pointIsInExtent(d,v){if(this._longitudeCyclical)return this._longitudeCyclical.contains(v[0],v[2],d.x)&&d.y>=v[1]&&d.y<=v[3];const O=d.x,A=d.y;return O>v[0]&&O<v[2]&&A>v[1]&&A<v[3]}_shiftExtentToFitBounds(d,v,O){let A=0,j=0;d[0]<-v?A=d[0]+v:d[2]>v&&(A=v-d[2]),d[1]<-O?j=d[1]+O:d[3]>O&&(j=O-d[3]),(0,ui.cv)(d,A,j)}get test(){return{renderer:this.renderer,update:()=>this.runTask()}}};(0,Je._)([(0,ht.Cb)()],zc.prototype,"_spatialReference",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],zc.prototype,"running",null),(0,Je._)([(0,ht.Cb)()],zc.prototype,"_placementDirty",void 0),(0,Je._)([(0,ht.Cb)()],zc.prototype,"_contentUpdated",void 0),(0,Je._)([(0,ht.Cb)()],zc.prototype,"_isSpherical",null),(0,Je._)([(0,ht.Cb)()],zc.prototype,"_worldToPCSRatio",null),(0,Je._)([(0,ht.Cb)()],zc.prototype,"renderer",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],zc.prototype,"surface",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"surface.suspended"})],zc.prototype,"suspended",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],zc.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({type:Boolean})],zc.prototype,"hasHighlights",null),(0,Je._)([(0,ht.Cb)({type:Boolean})],zc.prototype,"rendersOccluded",null),zc=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.OverlayManager")],zc);const A0=(0,Ao.c)(),x1=(0,br.c)(),o_={inner:(0,ui.Ue)(),outer:(0,ui.Ue)(),mapUnitsPerPixel:0,pixelRatioAdjustment:1},gx=(0,ui.Ue)(),AB=(0,ui.Ue)(),LB=(0,Fu.Ue)();var Mh;!function(d){d[d.NONE=0]="NONE",d[d.EXTENT=1]="EXTENT",d[d.RERENDER_ONLY=2]="RERENDER_ONLY"}(Mh||(Mh={}));let wB=(()=>{class d{constructor(O,A){this._factoryCallback=O,this._lengthCallback=A,this._pool=new Map}acquire(O){if(!d.test.disabled){const A=this._pool.get(O);if(A&&0!==A.length)return A.pop()}try{return this._factoryCallback(O)}catch(A){const j=window.performance&&window.performance.memory;let te="";throw j&&(te=`\n  totalJSHeapSize: ${j.totalJSHeapSize}, usedJSHeapSize: ${j.usedJSHeapSize}, jsHeapSizeLimit: ${j.jsHeapSizeLimit}`),console.log("Array allocation of size "+O+" failed: "+A+te),A}}release(O){if(d.test.disabled)return;const A=this._lengthCallback(O);let j=this._pool.get(A);j||(j=new La.Z({shrink:!0}),this._pool.set(A,j)),j.push(O)}clear(){this._pool.clear()}get test(){return{size:this._pool.size}}}return d.test={disabled:!1},d})();class RB{constructor(){this.indices=null,this.vertexAttributes=null,this.boundingBox=(0,pa.cS)(),this.indexCount=0,this.numVerticesPerSide=0,this.uvOffsetAndScale=(0,Ao.c)(),this.outerEdges=[null,null,null,null],this.innerEdges=[null,null,null,null]}}class yx{constructor(v,O,A,j,te){this._buf=v,this._localOrigin=O,this.offset0=A,this.stride=j,this.count=te}getVertexOffset(v){return(0,ti.Fp)(0<=v&&v<this.count),this.offset0+this.stride*v}getVertex(v,O){const A=this.getVertexOffset(O)*_o.Vs;v[0]=this._buf[A+0]+this._localOrigin[0],v[1]=this._buf[A+1]+this._localOrigin[1],v[2]=this._buf[A+2]+this._localOrigin[2]}getVertexZ(v){const O=this.getVertexOffset(v)*_o.Vs;return this._buf[O+2]+this._localOrigin[2]}setVertex(v,O,A,j){const te=this.getVertexOffset(v)*_o.Vs;this._buf[te+0]=O[0]-this._localOrigin[0],this._buf[te+1]=O[1]-this._localOrigin[1],this._buf[te+2]=O[2]-this._localOrigin[2],this._buf[te+3]=A,this._buf[te+4]=j}getNormal(v,O){const A=this.getVertexOffset(O)*_o.Vs;v[0]=this._buf[A+5],v[1]=this._buf[A+6],v[2]=this._buf[A+7]}setVertexRawXYZUV(v,O,A,j,te,pe){const be=this.getVertexOffset(v)*_o.Vs;this._buf[be+0]=O,this._buf[be+1]=A,this._buf[be+2]=j,this._buf[be+3]=te,this._buf[be+4]=pe}setVertexRawXYZUVN(v,O,A,j,te,pe,be,Re,Ge){const tt=this.getVertexOffset(v)*_o.Vs;this._buf[tt+0]=O,this._buf[tt+1]=A,this._buf[tt+2]=j,this._buf[tt+3]=te,this._buf[tt+4]=pe,this._buf[tt+5]=be,this._buf[tt+6]=Re,this._buf[tt+7]=Ge}setVertexRawNormal(v,O,A,j){const te=this.getVertexOffset(v)*_o.Vs;this._buf[te+5]=O,this._buf[te+6]=A,this._buf[te+7]=j}getVertexRawNormal(v,O){const A=this.getVertexOffset(O)*_o.Vs;v[0]=this._buf[A+5],v[1]=this._buf[A+6],v[2]=this._buf[A+7]}}const IB=(0,l0.U$)().vec3f(No.T.POSITION).vec2f(No.T.UV0).vec3f(No.T.NORMAL),DT=new wB(d=>IB.createBuffer(d),d=>d.count);function vx(d){return DT.acquire(d)}class S1{constructor(){this.elevation=0,this.normal=[0,0,1],this.cornerTiles=[null,null,null,null]}}class FB{constructor(){this.edgeNeighbours=[null,null,null,null],this.cornerNeighborData=[new S1,new S1,new S1,new S1],this.edgeResolutions=[1,1,1,1],this.modifiedEdgeResolutions=[!1,!1,!1,!1]}}class NB{constructor(){this.numVerticesPerSide=0,this.samplerData=null,this.clippingArea=null,this.wireframe=!1,this.samplerDataVersion=0,this.neighborData=new FB}}class Wf{constructor(v){this._getFadeDuration=v,this._fadeStart=0,this._delayedTime=0}clear(){this._current=(0,at.SC)(this._current),this._next=(0,at.SC)(this._next),this._waiting=(0,at.SC)(this._waiting),this._delayed=(0,at.SC)(this._delayed)}get current(){if((0,at.Wi)(this._current))return null;if(!this._isFadingEnabled){const O=this._delayed||this._waiting||this._next||this._current;O!==this._current&&(this._current=null,this.clear(),this._current=O)}let v=Wf.test.fadeMoment;if((0,at.pC)(this._delayed)&&(v=v||performance.now(),v>=this._delayedTime&&(this._push(this._delayed,a_.Immediate),this._delayed=null)),(0,at.pC)(this._next)){v=v||performance.now();const O=this._fadeDuration,A=(0,at.pC)(this._current)&&this._next.texture===this._current.texture,j=this._next.type!==en.Ns.FADING,te=v-this._fadeStart>=O;(A||j||te)&&((0,at.SC)(this._current),this._current=this._next,this._next=this._waiting,this._waiting=null,this._fadeStart=this._alignFadeStart(v))}return this._current}get next(){return this._next}get fadeFactor(){if((0,at.Wi)(this._next))return 1;const v=Wf.test.fadeMoment||performance.now(),O=Math.max(0,v-this._fadeStart),A=this._fadeDuration;return O>A?0:1-O/A}get isFading(){return(0,at.pC)(this._next)||(0,at.pC)(this._delayed)}push(v,O=a_.Immediate){this._delayed=(0,at.SC)(this._delayed),this._push(v,O)}_push(v,O){if(this._isFadingEnabled||this.clear(),(0,at.Wi)(this._current))return void(this._current=v);const A=Wf.test.fadeMoment||performance.now();return O!==a_.Immediate?(this._delayed=v,void(this._delayedTime=A+O)):(0,at.Wi)(this._next)?(this._next=v,void(this._fadeStart=this._alignFadeStart(A))):void((0,at.Wi)(v)||((0,at.SC)(this._waiting),this._waiting=v))}get _fadeDuration(){return(0,at.Wi)(this._waiting)?this._getFadeDuration():.5*this._getFadeDuration()}_alignFadeStart(v){const O=this._getFadeDuration();return v+O-v%O}get _isFadingEnabled(){return this._getFadeDuration()>0}}var a_;Wf.test={fadeMoment:0},function(d){d[d.Immediate=0]="Immediate",d[d.Delayed=5e3]="Delayed"}(a_||(a_={}));var A1=T(39863),mu=T(15076);class xT{get updating(){return!!this._tileRequested}init(v,O,A,j){this.tile=v,this._layerIdx=O,this._layerClass=A,this._suspended=j,this._tileLayerInfo=v.getLayerInfo(O,A),this._tileRequested=null;const te=this._findAncestorWithData();this._setUpsampleTile(te)}startLoading(){return this._requestNext()}dispose(){this._tileRequested&&(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null),this.tile=null,this._tileLayerInfo=null}setSuspension(v){v!==this._suspended&&(this._suspended=v,v?this._tileRequested&&(this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null):this._tileLayerInfo.data||this.update())}update(){const v=this._findAncestorWithData();return this._setUpsampleTile(v),this._requestNext()}dataArrived(v){this._setUpsampleTile(v),this._tileRequested=null,v===this.tile?this.tile.updateRenderData(this._layerClass,en.Ns.FADING):this._requestNext()}dataMissing(){this._tileRequested=null,this._tileLayerInfo.data=null,this._requestNext()}_agentDone(){this.tile.agentDone(this._layerIdx,this._layerClass),this.dispose()}_requestNext(){if(this._suspended)return!0;const v=this._findNextDownload();if(this._tileRequested){if(v===this._tileRequested)return!0;this._tileRequested.unrequestLayerData(this._layerIdx,this._layerClass,this),this._tileRequested=null}return(0,at.pC)(v)?v.requestLayerData(this._layerIdx,this._layerClass,this)&&(this._tileRequested=v):this._agentDone(),!!this._tileRequested}_findNextDownload(){const v=this._layerIdx,O=this._layerClass,A=this.tile.surface.layerViewByIndex(v,O),j=(0,ti.RB)(A),{minLevel:te,maxLevel:pe}=A.dataLevelRange,be=this._desiredMinLevelDelta,Re=this._progressiveLevelModulo+be,Ge=this._scaleRangeEnabled?mu.yf:()=>!0;let tt=this.tile;const ft=tt.level;let yt;const It=this._tileLayerInfo.upsampleInfo,Nt=(0,at.pC)(It)?It.tile.level:-1,Rt=!!(0,at.pC)(It)&&Nt-ft>=be,Jt=(0,at.U2)(j,"tilemapCache");for(;tt&&Ge(tt,j,!1)&&tt.level>=te;){const jt=tt.level,ir=ft-jt,or=tt.layerInfo[O][v];if(or.data&&ir>=be){(!Rt||jt>Nt)&&this._setUpsampleTile(tt),or.dataInvalidated&&(yt=tt);break}if(((0,at.Wi)(Jt)||"unavailable"!==Jt.getAvailability(tt.lij[0],tt.lij[1],tt.lij[2]))&&jt<=pe&&!or.data&&!or.dataMissing&&(((0,at.Wi)(yt)||tt.level===te||jt%_o.Sx==0||ft-yt.level<be)&&(yt=tt),ir>=Re))break;tt=tt.parent}return(0,at.pC)(yt)&&ft-yt.level<be&&this._tileLayerInfo.upsampleInfo&&(yt=null),yt}_findAncestorWithData(){const v=this.tile.vlevel,O=this._desiredMinLevelDelta;let A;for(let j=this.tile;j;j=j.parent)if(j.hasLayerData(this._layerIdx,this._layerClass)){if(v-j.level>=O)return j;A=j}return A}_setUpsampleTile(v){this._tileLayerInfo.setUpsampleInfo(this.tile,v),this.tile.updateRenderData(this._layerClass,en.Ns.FADING)}get test(){return{findNextDownload:()=>this._findNextDownload(),tileLayerInfo:this._tileLayerInfo}}}const Ex=new Error("Abstract method called on TileAgent"),gu=new class WB extends xT{get _desiredMinLevelDelta(){throw Ex}get _progressiveLevelModulo(){throw Ex}dispose(){}};class Mx extends xT{constructor(){super(...arguments),this._scaleRangeEnabled=!1}get _desiredMinLevelDelta(){return(0,_o.L)(this.tile.level)-(this.tile.vlevel-this.tile.level)}get _progressiveLevelModulo(){return 0}}class bx extends xT{constructor(){super(),this._scaleRangeEnabled=!0}get _desiredMinLevelDelta(){return 0}get _progressiveLevelModulo(){return _o.Sx}}var VB=T(31498);class L1{constructor(){this.waitingAgents=new La.Z,this._upsampleInfo=null,this.loadingAgent=null,this.requestPromise=null,this.requestAbort=null,this.pendingUpdates=0}static acquire(v){const O=ST.acquire();return O._init(v),O}release(){this.dispose(),w1.delete(this),ST.release(this)}dispose(){this.loadingAgent=(0,at.O3)(this.loadingAgent),this.abortRequest(),this._unsetUpsampleInfo(),this.pendingUpdates=0,this._data=(0,ti.z4)(this._data)}static prune(){ST.prune(0)}_init(v){this.waitingAgents.clear(),this._data=(0,ti.z4)(this._data),this.dataMissing=!1,this.dataInvalidated=!1,this._unsetUpsampleInfo(),this.abortRequest(),this.loadingAgent=null,this.pendingUpdates=0,this._pool=v,this.elevationBounds=null}invalidateSourceData(){this.dataInvalidated=!0,this.dataMissing=!1,this._unsetUpsampleInfo()}abortRequest(){this.requestAbort=(0,at.IM)(this.requestAbort),this.requestPromise=null}get upsampleInfo(){return this._upsampleInfo}_unsetUpsampleInfo(){(0,at.pC)(this._upsampleInfo)&&(this._upsampleInfo.tile.unrefMapData(),this._pool.release(this._upsampleInfo),this._upsampleInfo=null)}setUpsampleInfo(v,O){if(v===O||(0,at.Wi)(O))this._unsetUpsampleInfo();else{if((0,at.Wi)(this._upsampleInfo))this._upsampleInfo=this._pool.acquire();else{if(this._upsampleInfo.tile===O)return;this._upsampleInfo.tile.unrefMapData()}O.refMapData(),(0,mu.QT)(v,O,this._upsampleInfo)}}get data(){return this._data}set data(v){(0,ti.z4)(this._data),this._data=v}}const ST=new Gd.Z(L1,null,()=>{}),w1=new Map;class Vf{constructor(v){this._texture=v,this.type="tile-texture",this._refCount=1}retain(){++this._refCount}release(){--this._refCount,0===this._refCount&&this._texture.dispose()}get texture(){return this._texture}generateMipmap(){this._texture.generateMipmap()}get descriptor(){return this._texture.descriptor}}var $i;!function(d){d[d.NONE=0]="NONE",d[d.NONE_HIT_MAXLOD=1]="NONE_HIT_MAXLOD",d[d.SPLIT=2]="SPLIT",d[d.VSPLITMERGE=4]="VSPLITMERGE",d[d.MERGE=8]="MERGE",d[d.RENDERDATA=16]="RENDERDATA",d[d.GEOMETRY=32]="GEOMETRY",d[d.TEXTURE_NOFADING=64]="TEXTURE_NOFADING",d[d.TEXTURE_FADING=128]="TEXTURE_FADING"}($i||($i={}));const AT=(0,br.c)(),zf=(0,br.c)(),Pl=(0,br.c)();class GB{constructor(){this.fovX=0,this.fovY=0,this.relativeWidthLimit=0,this.relativeHeightLimit=0,this.maxLod=0,this.angledSplitBias=0,this.aboveGround=!0}}class LT{constructor(){this.lij=[0,0,0],this._children=[null,null,null,null],this._pendingUpdates=0,this._dirty=!0,this._previouslyRendered=!1,this.extent=(0,ui.Ue)(),this._elevationBounds=(0,po.a)(),this.layerInfo=[[],[]],this.extentInRadians=(0,ui.Ue)(),this.centerAtSeaLevel=(0,br.c)(),this._center=[(0,br.c)(),(0,qo.c)(),(0,br.c)()],this.up=(0,br.u)(),this._isWithinClippingArea=!0,this._intersectsClippingArea=!0,this._maxTesselation=0,this._usedMemory=null,this._mapTileMemory=0,this._mapDataRefCount=0,this._screenDepth=0,this.renderOrder=0,this._edgeLen=0,this._edgeLen2=0,this._curvatureHeight=0}static prune(){wT.prune(0),RT.prune(0),L1.prune()}get isCached(){return!this.shouldLoad&&this._mapDataRefCount<=0}get maxTesselation(){return this._maxTesselation}get isWithinClippingArea(){return this._isWithinClippingArea}get intersectsClippingArea(){return this._intersectsClippingArea}get clippingArea(){return this._clippingArea}get parent(){return this._parent}get children(){return this._children}get surface(){return this._surface}get elevationBounds(){return this._elevationBounds}get level(){return this.lij[0]}get key(){return`${this.lij[0]}/${this.lij[1]}/${this.lij[2]}`}get edgeLen(){return this._edgeLen}get radius(){return this._center[Cc.MIDDLE][3]}get screenDepth(){return this._screenDepth}get visible(){return this._dirty&&this.computeVisibility(),this._visible}computeVisibility(){this._dirty=!1;const v=this._intersectsClippingArea&&this._isVisible(this.surface.frustum);return v!==this._visible&&(this._visible=v,this._surface.emit("tiles-visibility-changed"),this._surface.renderer.setNeedsRender(),this.updateAgentSuspension()),this._visible}get loadable(){return this.visible||this._surface.view.state.fixedContentCamera}get rendered(){const v=!!this.renderData;return v!==this._previouslyRendered&&(this._surface.emit("tiles-visibility-changed"),this._previouslyRendered=v,this._surface.renderer.setNeedsRender()),v}get shouldLoad(){if(!this.loadable)return!1;if(this._surface.lodSnapping===en.VB.ON){const v=this.level-this._surface.snapLevel;if(0===v)return!0;if(1===v)return!1}return this.isLeaf}init(v,O,A){this.lij[0]=v[0],this.lij[1]=v[1],this.lij[2]=v[2],this.ellipsoid=(0,Mo.Iu)(A.tilingScheme.spatialReference),A.tilingScheme.getExtent(v[0],v[1],v[2],this.extent),A.tilingScheme.convertExtentToRadians(this.extent,this.extentInRadians),this._isWithinClippingArea=!0,this._intersectsClippingArea=!0,this._clippingArea=null,this._mapDataRefCount=0,A.upsampleMapCache.pop(this.key),this._edgeLen=0,this._edgeLen2=0,this._center[Cc.MIDDLE][3]=0,this.vlevel=v?v[0]:0,O&&O.elevationBounds?(0,Yi.c)(this._elevationBounds,O.elevationBounds):(0,Yi.a)(this._elevationBounds,0,0),this._pendingUpdates=0,this.renderData=null,this._screenDepth=0,this._visible=!1,this._previouslyRendered=!1,this._parent=O,this.unsetChildren(),this._surface=A,this.updateVisibility();for(const j of S0){const te=A.numLayers(j),pe=this.layerInfo[j];for(const be of pe)be.release();pe.length=te;for(let be=0;be<te;be++)pe[be]=L1.acquire(this._surface.upsampleInfoPool),j===Bn.ELEVATION&&this.findElevationBoundsForLayer(be,-1)}this.computeElevationBounds(),this._maxTesselation=Math.min(A.tilingScheme.pixelSize,_o.HB)}release(){(0,ti.wu)(!this.renderData,"tile.renderData was not unloaded"),this._surface.upsampleMapCache.pop(this.key);for(const v of S0){for(const O of this.layerInfo[v])O.release();this.layerInfo[v].length=0}this._parent=null,this._surface=null,this.setMemoryDirty()}refMapData(){++this._mapDataRefCount,this.isCached||this._surface.upsampleMapCache.pop(this.key)}unrefMapData(){if(--this._mapDataRefCount,this.isCached){this.setMemoryDirty();const v=this.cachedMemory;v>0&&this._surface.upsampleMapCache.put(this.key,this,v)}}setMemoryDirty(){this._usedMemory=null}get usedMemory(){return this._ensureUsedMemory()+(this.isCached?0:this._mapTileMemory)}get cachedMemory(){return this.isCached?this.mapTileMemory:0}get mapTileMemory(){return this._ensureUsedMemory(),this.layerInfo[Bn.MAP].reduce((v,O)=>v+(O instanceof D1.i?O.memoryUsage:0),this._mapTileMemory)}get cpuImageMemorySize(){const O=this._surface.tilingScheme.pixelSize;return O*O*4}_ensureUsedMemory(){if((0,at.pC)(this._usedMemory))return this._usedMemory;this._usedMemory=0,this._mapTileMemory=0;let v=0;for(const{data:A}of this.layerInfo[Bn.MAP])A instanceof D1.i?v+=this._getTerrainDataMemory(A):this._mapTileMemory+=this._getTerrainDataMemory(A);const O=this.cpuImageMemorySize;for(const A of this.layerInfo[Bn.ELEVATION])this._usedMemory+=A.data?O:0;return this.renderData&&(this._usedMemory+=this.renderData.estimatedGeometryMemoryUsage,this._mapTileMemory+=(0,ll.un)(this.renderData.textureDescriptor)),this.isCached&&this._surface.upsampleMapCache.updateSize(this.key,this,this._mapTileMemory+v),this._usedMemory}getUsedMemoryForLayer(v,O){const A=this.layerInfo[v][O];return A?.data?v===Bn.MAP?this.isCached?0:this._getTerrainDataMemory(A.data):v===Bn.ELEVATION?this.cpuImageMemorySize:0:0}_getTerrainDataMemory(v){return v instanceof Vf?(0,ll.un)(v.texture):v instanceof HTMLImageElement||v instanceof ET.nN?this.cpuImageMemorySize:v instanceof D1.i||v instanceof VB.H?v.memoryUsage:0}updateScreenDepth(v){const O=this._center[Cc.MIDDLE],j=O[0],te=O[1],pe=O[2],be=v[2]*j+v[6]*te+v[10]*pe+v[14];this._screenDepth=be<0?0:be/(v[3]*j+v[7]*te+v[11]*pe+v[15])}shouldSplit(v,O,A){if((0,at.pC)(v.frustum)&&(!this._intersectsClippingArea||!this._isVisible(v.frustum)))return $i.NONE;const j=this.level;(0,Et.b)(AT,this._center[Cc.MIDDLE],O);let te=(0,Et.p)(AT),pe=Cc.MIDDLE;(0,Et.b)(zf,this._center[Cc.TOP],O);const be=(0,Et.p)(zf);be<te&&(te=be,pe=Cc.TOP),(0,Et.b)(zf,this._center[Cc.BOTTOM],O);const Re=(0,Et.p)(zf);if(Re<te&&(te=Re,pe=Cc.BOTTOM),this._edgeLen2>te&&j<v.maxLod)return $i.SPLIT;const Ge=Math.sqrt(te),ft=this._edgeLen/(v.fovX*Ge*2),yt=()=>{const Jt=j+Math.ceil(-Math.log2(v.relativeWidthLimit/ft));return Jt!==this.vlevel?(this.vlevel=Jt,$i.VSPLITMERGE):$i.NONE_HIT_MAXLOD};if(A===en.VB.ON&&this._surface.snapLevel-j==1)return j>=v.maxLod?yt():$i.SPLIT;const It=(0,Et.e)(this.up,AT),Nt=this._elevationBounds[1]-this._elevationBounds[0],Rt=Nt/this.edgeLen;if(v.aboveGround&&It>0&&Rt<.001&&It/Ge-Math.sin(this._curvatureHeight/(this.edgeLen*Math.SQRT1_2)*Math.PI)-Rt>0)return $i.NONE;if(ft<v.relativeWidthLimit)return this.vlevel!==this.level?(this.vlevel=this.level,$i.VSPLITMERGE):$i.NONE;if(j>=v.maxLod)return yt();if(j>6){(0,Et.b)(zf,this._center[pe],O),(0,Et.g)(Pl,this.up,It),(0,Et.b)(Pl,Pl,zf);const Jt=(0,Et.p)(Pl);if(Jt>this.radius*this.radius&&((0,Et.g)(Pl,Pl,this.radius/Math.sqrt(Jt)),(0,Et.a)(Pl,Pl,this._center[pe]),(0,Et.b)(Pl,O,Pl),Math.min(1,(Math.abs((0,Et.e)(Pl,this.up))+.5*Nt+this._curvatureHeight)/(0,Et.l)(Pl))*(this._edgeLen/(v.fovY*Ge*2))<.1/v.angledSplitBias*v.relativeHeightLimit))return $i.NONE}return $i.SPLIT}setChildren(v,O,A,j){(0,ti.wu)(!!(v&&O&&A&&j),"Null child passed"),this._children[0]=v,this._children[1]=O,this._children[2]=A,this._children[3]=j}unsetChildren(){this._children[0]=null,this._children[1]=null,this._children[2]=null,this._children[3]=null}get isLoaded(){return this.renderData?.hasGeometry??!1}prepareToLoad(v){this.refMapData();for(const O of S0)this._createOrUpdateAgents(0,O);v.updateTileGeometryState(this)}load(v){this.prepareToLoad(v),this.loadPrepared(v)}loadPrepared(v){v.loadTile(this)}unload(v){v.unloadTile(this);for(const O of S0){const A=this.layerInfo[O];for(const j of A)j.loadingAgent&&j.loadingAgent!==gu&&(R1(j.loadingAgent),j.loadingAgent=null),j.pendingUpdates=0}this.resetPendingUpdate($i.GEOMETRY),this.resetPendingUpdate($i.TEXTURE_NOFADING),this.resetPendingUpdate($i.TEXTURE_FADING),this.unrefMapData()}unloadMapData(){const v=this.layerInfo[Bn.MAP];for(const O of v)O.loadingAgent&&O.loadingAgent!==gu&&(R1(O.loadingAgent),O.loadingAgent=null),O.pendingUpdates=0;this.renderData&&this.renderData.releaseTexture(),this.setMemoryDirty()}updateClippingStatus(v){if((0,ui.fS)(v,this._clippingArea))return!1;const O=this._intersectsClippingArea,A=this._isWithinClippingArea;return(0,at.pC)(v)?(this._intersectsClippingArea=this.intersectsExtent(v),this._isWithinClippingArea=this._isWithinExtent(v)):(this._intersectsClippingArea=!0,this._isWithinClippingArea=!0),this._clippingArea=v,this.updateVisibility(),!this.renderData||A&&this._isWithinClippingArea||!(A||O||this._isWithinClippingArea||this._intersectsClippingArea)||this.setPendingUpdate($i.GEOMETRY),!0}updateVisibility(){this._dirty=!0,this._surface.setTileTreeDirty()}getLayerInfo(v,O){return this.layerInfo[O][v]}hasLayerData(v,O){const A=this.layerInfo[O][v];return!(!A||!A.data||A.dataInvalidated)}get updating(){if(this.hasPendingUpdates)return!0;for(const v of S0){const O=this.layerInfo[v];for(const A of O)if(A.loadingAgent&&A.loadingAgent!==gu&&A.loadingAgent.updating)return!0}return!1}_isSuspended(v){return!!this.hasPendingUpdate($i.SPLIT)||v!==Bn.ELEVATION&&!this.loadable}get hasPendingUpdates(){return 0!==this._pendingUpdates}hasPendingUpdate(v){return(this._pendingUpdates&v)===v}setPendingUpdate(v){this._pendingUpdates|=v,v===$i.SPLIT||v===$i.MERGE?this._surface.setTileTreeDirty():this._surface.requestUpdate()}resetPendingUpdate(v){return!!this.hasPendingUpdate(v)&&(this._pendingUpdates&=~v,!0)}requestLayerData(v,O,A){const j=this.layerInfo[O][v];if(j.waitingAgents.has(A))return console.warn("agent already requested this piece of map data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),A.tile.lij.toString(),O,v),!0;if(j.waitingAgents.push(A),j.data&&!j.dataInvalidated)return console.warn("agent requested existing data (tile %s, agent tile %s, layer: %d/%d)",this.lij.toString(),A.tile.lij.toString(),O,v),A.dataArrived(this),!0;if(j.requestPromise)return!0;(0,at.IM)(j.requestAbort),j.requestAbort=new AbortController;const te=this._surface.requestTileData(this,v,O,j.requestAbort);if(!te)return j.requestAbort=null,!1;const pe=()=>{j.requestPromise===te&&(j.requestPromise=null,j.requestAbort=null)};return j.requestPromise=te,te.then(pe,pe),!0}get isLeaf(){return null==this._children[0]}hasLij(v){return this.lij[0]===v[0]&&this.lij[1]===v[1]&&this.lij[2]===v[2]}findByLij(v){return this.hasLij(v)?this:this.isLeaf?null:this._children[0].findByLij(v)||this._children[1].findByLij(v)||this._children[2].findByLij(v)||this._children[3].findByLij(v)||null}distanceToSquared(v){return(0,Et.p)((0,Et.b)(Pl,this._center[Cc.MIDDLE],v))}containsPoint(v){const O=this.extent;return v[0]>=O[0]&&v[1]>=O[1]&&v[0]<=O[2]&&v[1]<=O[3]}unrequestLayerData(v,O,A){const j=this.layerInfo[O][v],te=j.waitingAgents,pe=null!=te.removeUnordered(A);(0,ti.wu)(pe,"agent has not requested this piece of map data"),te.length<1&&(j.abortRequest(),this.setMemoryDirty())}dataArrived(v,O,A){const j=this.layerInfo[O][v];j.data=A,j.dataInvalidated=!1,j.waitingAgents.forAll(te=>te.dataArrived(this)),j.waitingAgents.clear(),this.setMemoryDirty()}dataMissing(v,O,A){A.notInTilemap||console.error(`Tile ${this.lij.toString()} layer ${O}/${v} error ${A}`);const j=this.layerInfo[O][v];j.dataMissing=!0,j.waitingAgents.forAll(te=>te.dataMissing()),j.waitingAgents.clear(),this.setMemoryDirty()}updateRenderData(v,O){switch(v){case Bn.MAP:return this._updateTexture(O);case Bn.ELEVATION:return this._updateGeometry()}}_updateTexture(v){this.renderData&&(this.resetPendingUpdate(v===en.Ns.FADING?$i.TEXTURE_NOFADING:$i.TEXTURE_FADING),this.setPendingUpdate(v===en.Ns.FADING?$i.TEXTURE_FADING:$i.TEXTURE_NOFADING))}_updateGeometry(){this.setPendingUpdate($i.GEOMETRY);for(const v of this.layerInfo[Bn.ELEVATION])v.pendingUpdates|=$i.GEOMETRY}invalidateLayerData(v,O){this.layerInfo[O][v].invalidateSourceData(),this.restartAgents(O)}computeElevationBounds(){const v=this._elevationBounds;(0,Yi.a)(v,Number.MAX_VALUE,-Number.MAX_VALUE);const O=this.layerInfo[Bn.ELEVATION];let A=!0;for(const j of O)(0,at.pC)(j.elevationBounds)&&(v[0]=Math.min(v[0],j.elevationBounds.min),v[1]=Math.max(v[1],j.elevationBounds.max),j.elevationBounds.hasNoDataValues||(A=!1));A&&(v[0]=Math.min(v[0],0),v[1]=Math.max(v[1],0)),this.updateRadiusAndCenter(),this._surface.setTileTreeDirty()}_updateCenter(){const v=this._elevationBounds;(0,Et.g)(Pl,this.up,.5*(v[0]+v[1])),(0,Et.a)(this._center[Cc.MIDDLE],this.centerAtSeaLevel,Pl),(0,Et.g)(Pl,this.up,v[0]),(0,Et.a)(this._center[Cc.TOP],this.centerAtSeaLevel,Pl),(0,Et.g)(Pl,this.up,v[1]),(0,Et.a)(this._center[Cc.BOTTOM],this.centerAtSeaLevel,Pl)}findElevationBoundsForLayer(v,O){const A=this.layerInfo[Bn.ELEVATION][v];if((0,at.pC)(A.elevationBounds)&&A.elevationBounds.level>=O)return;const j=this._surface.layerViewByIndex(v,Bn.ELEVATION),te=(0,ti.RB)(j);if(!(0,mu.yf)(this,te,!1))return;const pe=YB;let be=!1;if(A.data){const Re=A.data;pe.min=Re.bounds[0],pe.max=Re.bounds[1],pe.hasNoDataValues=Re.hasNoDataValues,pe.level=this.level,be=!0}else{let Re,Ge,tt=0;for(let ft=this._parent;ft&&(!Ge||tt<(0,_o.L)(this.level))&&(tt=this.vlevel-ft.level,Re=Ge||Re,Ge=ft.layerInfo[Bn.ELEVATION][v].data,!(!Ge&&Re&&tt>=(0,_o.L)(this.level)));ft=ft.parent);Ge=Ge||Re,Ge&&(Ge.computeMinMaxValue(this.lij[0],this.lij[1],this.lij[2],pe),pe.min!==1/0&&(pe.level=Ge.level,be=!0))}be&&((0,at.Wi)(A.elevationBounds)&&(A.elevationBounds=new TT),A.elevationBounds.copyFrom(pe))}modifyLayers(v,O,A){const j=this.layerInfo[A];for(const be of j)be.loadingAgent&&be.loadingAgent!==gu&&(R1(be.loadingAgent),be.loadingAgent=null),be.waitingAgents.clear();for(let be=0;be<j.length;++be)void 0===v[be]&&j[be].release();const te=new Array(...j),pe=O.length;j.length=pe;for(let be=0;be<pe;be++){const Re=O[be];j[be]=Re>-1?te[Re]:L1.acquire(this._surface.upsampleInfoPool)}this.setMemoryDirty()}restartAgents(v){this.renderData&&(this._createOrUpdateAgents(0,v),this.updateRenderData(v,en.Ns.FADING))}updateAgents(v){if(this.renderData){const O=this.layerInfo[v];for(const A of O)A.loadingAgent===gu&&(A.loadingAgent=null);this._createOrUpdateAgents(0,v)}}updateAgentSuspension(){for(const v of S0){const O=this._isSuspended(v);for(const A of this.layerInfo[v])A.loadingAgent&&A.loadingAgent!==gu&&(A.loadingAgent.setSuspension(O),A.loadingAgent===gu&&this.updateRenderData(v,en.Ns.FADING))}}removeLayerAgent(v,O){const A=this.layerInfo[O][v];A.loadingAgent&&A.loadingAgent!==gu&&A.loadingAgent.dispose(),A.loadingAgent=null}agentDone(v,O){const A=this.layerInfo[O][v];A.loadingAgent=gu,!A.data&&(0,at.Wi)(A.upsampleInfo)&&this._createOrUpdateAgents(v+1,O)}_createOrUpdateAgents(v,O){const A=this.layerInfo[O];if(0===A.length)return;const j=(()=>{for(let pe=v;pe<A.length;++pe){const be=this._surface.layerViewByIndex(pe,O);if((0,ti.TK)(be)&&"normal"!==be.layer.blendMode)return!0}return!1})(),te=this._isSuspended(O);for(let pe=v;pe<A.length;++pe){const be=A[pe];let Re=!1;const Ge=this._surface.layerViewByIndex(pe,O),tt=(0,ti.RB)(Ge);if(be.loadingAgent?(0,mu.yf)(this,tt,!1)?(be.loadingAgent!==gu&&be.loadingAgent.setSuspension(te),be.loadingAgent!==gu&&(Re=be.loadingAgent.update())):be.dispose():(0,mu.yf)(this,tt,!1)&&(be.loadingAgent=KB(this,pe,O,te),Re=be.loadingAgent.startLoading(),Re?be.loadingAgent===gu&&this.setPendingUpdate($i.GEOMETRY):(R1(be.loadingAgent),be.loadingAgent=gu)),be.loadingAgent===gu&&this.updateRenderData(O,en.Ns.FADING),!j&&Re&&Ge.isOpaque)return}}_isWithinExtent(v){const O=this.extent;return O[0]>=v[0]&&v[2]>=O[2]&&O[1]>=v[1]&&v[3]>=O[3]}intersectsExtent(v){const O=this.extent;return O[2]>=v[0]&&v[2]>=O[0]&&O[3]>=v[1]&&v[3]>=O[1]}getElevationBasedVerticesPerSide(v){const O=this.vlevel-this.level,A=Math.max(this.level-v,(0,_o.L)(this.level)-O);return(0,cs.uZ)(1+(this.maxTesselation>>A),2,this.maxTesselation+1)}get test(){return{cachedMemory:this.cachedMemory}}_findLIJ(v,O){if(!v)return null;const A=this.surface.rootTiles;if((0,at.pC)(A))for(const j of A)if(ZB(j,v)){let te=j,pe=v[0]-te.level-1;for(;pe>=0&&!te.isLeaf&&!O(te);)te=te.children[2*(v[1]>>pe&1)+(v[2]>>pe&1)],pe--;return O(te)?te:null}return null}findNeighborTile(v,O){const A=this.lij,j=this.getNeighborLIJ(A,v);return j?function kB(d,v){return d[0]===v[0]&&d[1]===v[1]&&d[2]===v[2]}(A,j)?O(this)?this:null:this._findLIJ(j,O):null}findCorner(v,O){const A=v===en.Xo.NORTH_EAST?1:v===en.Xo.NORTH_WEST?0:v===en.Xo.SOUTH_WEST?2:3;let j=this;for(;!(j.isLeaf||O&&O(j));)j=j.children[A];return j}findNeighborCornerTileExact(v,O){return this.findNeighborTile(v,A=>O(A)||A.level===this.level)?.findCorner((0,ti.$v)(v),O)}forAllSubtreeOnSide(v,O){const A=v===en.Xo.NORTH?[0,1]:v===en.Xo.NORTH_EAST?[1]:v===en.Xo.EAST?[1,3]:v===en.Xo.SOUTH_EAST?[3]:v===en.Xo.SOUTH?[2,3]:v===en.Xo.SOUTH_WEST?[2]:v===en.Xo.WEST?[0,2]:[0],j=te=>{O(te)||te.isLeaf||A.forEach(pe=>j(te.children[pe]))};j(this)}forallNeighbors(v){ti.cA.forEach(O=>this.findNeighborCornerTileExact(O,v)),ti.OC.forEach(O=>this.findNeighborTile(O,A=>A.level===this.level||v(A))?.forAllSubtreeOnSide((0,ti._F)(O),v))}getNeighborEdgeStartVertexIndex(v,O){const A=O??this.findNeighborTile(ti.OC[v],tt=>tt.isLoaded);if(!A||!this.isLoaded||!A.isLoaded)return 0;const j=this.level-A.level;if(0===j)return 0;const te=2**j,pe=1==(1&v),be=pe?0:1,Ge=this.lij[be+1]-A.lij[be+1]*te;return pe?te-1-Ge:Ge}_updateNeighborsWithChangedEdgeResolution(){for(let v=0;v<4;++v)if(this.renderData.geometryState.neighborData.modifiedEdgeResolutions[v]){const O=ti.OC[v],A=this.findNeighborTile(O,j=>j.isLoaded||j.level===this.level);if(!A)continue;if(!A.isLoaded){(0,ti.Fp)(!A.isLeaf);const j=(v+2)%4,te=(0,ti._F)(O);A.forAllSubtreeOnSide(te,pe=>pe.isLoaded?(pe.updateEdgeAfterResolutionChange(j),!0):((0,ti.Fp)(!pe.isLeaf),!1))}this.renderData.geometryState.neighborData.modifiedEdgeResolutions[v]=!1}}updateNeighborDataAndGeometryIfNeeded(){this.isLoaded&&this.renderData.updateNeighborDataAndGeometryIfNeeded()}updateNeighborsAfterGeometryChange(v=this.level){this.forEachLoadedNeighbor(O=>this._updateNeighbor(O)),ti.OC.forEach(O=>{this.findNeighborTile(O,A=>A.isLoaded&&A.level<v)?.updateNeighborsWithChangedEdgeResolution()})}updateNeighborsWithChangedEdgeResolution(){this.isLoaded&&this._updateNeighborsWithChangedEdgeResolution()}updateEdgeAfterResolutionChange(v){this.renderData.updateEdgeAfterResolutionChange(v)}forEachLoadedNeighbor(v){const O=this.level,A=j=>j.level===O||j.isLoaded;ti.OC.forEach((j,te)=>{const pe=this.findNeighborTile(j,A);null!=pe&&pe!==this&&pe.forAllSubtreeOnSide((0,ti._F)(j),Re=>!!Re.isLoaded&&(v(Re),!0));const be=this.renderData?.geometryState?.neighborData;be&&(be.modifiedEdgeResolutions[te]=!1)}),ti.cA.forEach(j=>{const te=this.findNeighborTile(j,A)?.findCorner((0,ti.$v)(j),pe=>pe.isLoaded);(0,ti.Fp)(!te||function $B(d,v,O){return!(0,at.Wi)(d)&&!(0,at.Wi)(v)&&v!==d&&(d.level>=v.level?Tx(d,v,O):Tx(v,d,(0,ti.$v)(O)))}(this,te,j)),te?.isLoaded&&v(te)})}_updateNeighbor(v){v?.isLoaded&&v.updateNeighborDataAndGeometryIfNeeded()}getNeighborLIJ(v,O){const A=(0,ti.Mw)(O)?-1:(0,ti.uv)(O)?1:0,j=(0,ti.OD)(O)?-1:(0,ti.Eu)(O)?1:0,te=[v[0],v[1]+A,v[2]+j];return te[1]<0?null:this.surface.isGlobal?this.wrapLIJ(te):te[2]<0?null:te}wrapLIJ(v){return!v||v[1]<0||v[1]>=2**v[0]?null:this.surface.wrapEastWest(v)}get westNeighborWestExtent(){return this.extent[0]*(this.isWestEnd?-1:1)}get eastNeighborEastExtent(){return this.extent[2]*(this.isEastEnd?-1:1)}get isEastEnd(){return this.lij[2]===this.surface.lijEastEnd(this.level)-1}get isWestEnd(){return 0===this.lij[2]}get isNorthEnd(){return 0===this.lij[1]}get isSouthEnd(){return this.extent[1]+A1.E>=this.surface.extent[1]}compareLIJs(v){const O=this.lij,A=O[0],j=v[0];if(A===j)return[O,v];const te=A-j;if(te<0){const pe=2**-te;return[[j,O[1]*pe,O[2]*pe],v]}{const pe=2**te;return[O,[A,v[1]*pe,v[2]*pe]]}}checkGeometryWaterproofness(){ti.XJ&&((0,ti.Fp)(this.isLoaded),this.renderData.checkGeometryWaterproofness())}shouldHaveNeighbor(v){const O=this.extent,A=this.surface.rootTilesExtent,j=.25*(O[2]-O[0]);if((0,ti.Mw)(v)&&O[3]+j>=A[3]||(0,ti.uv)(v)&&O[1]-j<=A[1])return!1;const te=this.surface.isGlobal;return!(!te&&(0,ti.OD)(v)&&O[0]-j<=A[0]||!te&&(0,ti.Eu)(v)&&O[2]+j>=A[2])}}function KB(d,v,O,A){const j=O===Bn.ELEVATION?RT.acquire():wT.acquire();return j.init(d,v,O,A),j}function R1(d){d.dispose(),d instanceof Mx?RT.release(d):d instanceof bx&&wT.release(d)}const wT=new Gd.Z(bx),RT=new Gd.Z(Mx),YB=new TT;var Cc;function ZB(d,v){const O=d.level,A=v[0];if(O>A)return!1;const j=A-O,te=Math.floor(v[1]/2**j),pe=Math.floor(v[2]/2**j);return te===d.lij[1]&&pe===d.lij[2]}function l_(d,v,O){return Math.abs(d-v)<=O}function Tx(d,v,O){(0,ti.Fp)(d.level>=v.level);const A=(0,ti._0)(O),j=(0,ti.wt)(O),te=d.extent,pe=v.extent,be=[A?te[0]:te[2],j?te[3]:te[1]],Re=[A?pe[2]:pe[0],j?pe[1]:pe[3]],Ge=1e-5*(te[2]-te[0]),tt=l_(be[0],Re[0],Ge)||d.surface.isGlobal&&l_(be[0],-Re[0],Ge),ft=l_(be[1],Re[1],Ge);return!(!tt||!ft)||!(d.level===v.level||!tt&&!ft)&&(tt?Cx(pe[1],pe[3],te[1],te[3],Ge):Cx(pe[0],pe[2],te[0],te[2],Ge))}function Cx(d,v,O,A,j=A1.E){return d-j<=O&&O<=A&&A<=v+j}!function(d){d[d.TOP=0]="TOP",d[d.MIDDLE=1]="MIDDLE",d[d.BOTTOM=2]="BOTTOM"}(Cc||(Cc={}));class JB{constructor(){this._scales=[-1,-1,-1,-1],this._offsets=[-1,-1,-1,-1]}clear(){this._scales[0]=this._scales[1]=this._scales[2]=this._scales[3]=-1,this._offsets[0]=this._offsets[1]=this._offsets[2]=this._offsets[3]=-1}setScale(v,O,A){this._scales[2*v]=O,this._scales[2*v+1]=A}setOffset(v,O,A){this._offsets[2*v]=O,this._offsets[2*v+1]=A}get scales(){return this._scales}get offsets(){return this._offsets}}class c_{constructor(){this.geometryInfo=new RB,this.intersectionData=null,this.geometryState=null,this._textureRef=new Wf(()=>this.tile.surface.textureFadeDuration),this.overlay=new JB,this._geometryStateChangedSinceLastUpdate=!0,this._hasGeometry=!1,this._numVerticesPerSideChanged=!1,this._samplerDataChanged=!1,this._edgeResolutionChanged=!1,this._edgeNeighborChanged=!1,this._cornerElevationChanged=!1,this._clippingAreaChanged=!1,this._wireframeChanged=!1}get tile(){return this._tile}init(v){this._tile=v,this.clear();const O=this.geometryInfo;O.indices=null,O.vertexAttributes=null,(0,pa.cS)(O.boundingBox),O.indexCount=0,O.numVerticesPerSide=0,this.intersectionData=null,this.geometryState=new NB,this.localOrigin=null,this.overlay.clear()}clear(){this._releaseGeometry(),this.releaseTexture(),this._textureRef.clear()}updateGeometryIfChanged(v,O){const A=this.updateGeometryStateAndPrepareForGeometryGeneration(O);return this._hasGeometry=!0,this.updateNeighborDataAndGeometryIfNeeded(A,v)}updateNeighborDataAndGeometryIfNeeded(v=!1,O=this.vao.context){const A=this._updateNeighborData(),j=v||this._geometryStateChangedSinceLastUpdate||A;return j&&(this._updateGeometry(O),this._geometryStateChangedSinceLastUpdate=!1),j}_calculateEdgeResolution(v,O){const A=this.tile,j=this.geometryState.numVerticesPerSide-1;if(!A.surface.isGlobal){const Ge=A.surface.extent;if((0,at.pC)(Ge)&&(0===v&&A.extent[3]>Ge[3]||1===v&&A.extent[2]>Ge[2]||2===v&&A.extent[1]<Ge[1]||3===v&&A.extent[0]<Ge[0]))return j}const te=A.level,pe=ti.OC[v],be=O||A.findNeighborTile(pe,Ge=>Ge.isLoaded||Ge.level===te);if(!be||be.isLeaf&&!be.isLoaded)return(0,ti.Fp)((0,at.Wi)(A.surface?.rootTiles)||A.surface.updatingRootTiles||!A.shouldHaveNeighbor(pe)),j;if(be.isLoaded){const tt=be.renderData.geometryState,ft=te-be.level;return 0===ft?Math.max(tt.numVerticesPerSide-1,j):Math.max(1,tt.neighborData.edgeResolutions[(v+2)%4]/2**ft)}(0,ti.Fp)(!be.isLeaf);let Re=j;return be.forAllSubtreeOnSide((0,ti._F)(pe),Ge=>Ge===A||(Ge.isLoaded?(Re=Math.max(Re,2**(Ge.level-te)),!0):((0,ti.Fp)(!Ge.isLeaf),!1))),Re}_updateNeighborData(){const v=this.tile,O=Ge=>Ge.isLoaded||Ge.level===v.level,A=Ge=>Ge.isLoaded,j=[null,null,null,null],te=[null,null,null,null];(()=>{for(let Ge=0;Ge<4;++Ge){const tt=v.findNeighborTile(ti.OC[Ge],O);j[Ge]=tt,te[Ge]=tt?.isLoaded?tt:null}})();const pe=[null,null,null,null];(()=>{for(let Ge=0;Ge<4;++Ge)pe[Ge]=v.findNeighborTile(ti.cA[Ge],A)})();const be=this.geometryState.neighborData;let Re=!1;return(()=>{for(let Ge=0;Ge<4;++Ge){const tt=be.edgeResolutions[Ge],ft=j[Ge],yt=this._calculateEdgeResolution(Ge,ft);be.edgeResolutions[Ge]=yt,tt!==yt&&(Re=!0,this._edgeResolutionChanged=!0,ft&&ft!==v&&!ft.isLoaded&&ft.level===v.level&&(be.modifiedEdgeResolutions[Ge]=!0))}})(),(()=>{const tt=be.cornerNeighborData,ft=(yt,It)=>{const Nt=tt[yt],Rt=Nt.cornerTiles;for(let jt=0;jt<4;++jt){const or=It[jt]?.findCorner((0,ti.$v)(ti.cA[jt]),pr=>pr?.isLoaded||pr===v);Rt[jt]=or}const Jt=((yt,It)=>{const Nt=yt.reduce((jt,ir)=>Math.min(jt,ir?.level??1/0),1/0);for(let jt=0;jt<4;++jt){const ir=yt[(jt+3)%4],or=yt[jt];if(ir&&ir.level<v.level&&ir===or){const pr=ir,Lr=1==(1&jt),Br=(v.getNeighborEdgeStartVertexIndex(jt,pr)+(0===It||1===It&&!Lr||3===It&&Lr?1:0))/2**(v.level-pr.level);return Io(Lr?0===It||1===It?pr.extent[0]:pr.extent[2]:(0,cs.t7)(pr.extent[0],pr.extent[2],Br),Lr?(0,cs.t7)(pr.extent[1],pr.extent[3],Br):0===It||3===It?pr.extent[1]:pr.extent[3],pr.renderData.geometryState.samplerData)}}let Rt=0,Jt=0;for(let jt=0;jt<4;++jt){const ir=yt[jt];if(ir&&ir.level===Nt){const Lr=ir.extent;Jt+=Io(Lr[0===jt||1===jt?0:2],Lr[0===jt||3===jt?1:3],ir.renderData?.geometryState?.samplerData),Rt++}}return Rt?Jt/Rt:0})(Rt,yt);return Nt.elevation!==Jt&&(Nt.elevation=Jt,!0)};for(let yt=0;yt<4;++yt){const Rt=[pe[yt],te[(yt+1)%4],v,te[yt]],Jt=Rt.map((jt,ir)=>Rt[(ir+4-yt)%4]);ft(yt,Jt)&&(this._cornerElevationChanged=!0,Re=!0)}})(),(()=>{const Ge=(ft,yt)=>{if(!ft?.isLoaded||ft.lij[0]>v.lij[0])return null;const It=ft.renderData.geometryState;return{neighborSamplerData:It.samplerData,neighborEdgeOverlapResolution:It.neighborData.edgeResolutions[yt+2],version:It.samplerDataVersion,neighborVerticesPerSide:It.numVerticesPerSide,neighborTile:ft}},tt=be.edgeNeighbours;for(let ft=0;ft<4;++ft){const yt=te[ft];yt&&((0,ti.Fp)(yt?.isLoaded),(0,ti.Fp)(yt?.lij[0]<=v.lij[0]));const It=tt[ft],Nt=It?.version,Rt=Ge(yt,ft),Jt=Rt?.version??null,ir=It&&Rt&&Nt!==Jt,or=It&&Rt&&It?.neighborTile!==Rt?.neighborTile,pr=null!=It!=(null!=Rt)||ir||or;this._edgeNeighborChanged||(this._edgeNeighborChanged=pr),Re||(Re=pr),!pr&&Nt||(tt[ft]=Rt)}})(),Re}updateEdgeAfterResolutionChange(v){const O=this._calculateEdgeResolution(v),A=this.geometryState.neighborData.edgeResolutions,j=A[v];(0,ti.Fp)((this.geometryState.neighborData.edgeNeighbours[v]?.neighborTile.level??0)<=this.tile.level),O!==j&&(A[v]=O,this._edgeResolutionChanged=!0,c_.deferTileNeighborUpdate?c_.neighborTilesToUpdate.add(this.tile):this._updateGeometry(this.vao.context))}_updateGeometry(v){this.intersectionData=null;const O=this.tile,A=O.lij,j=c_.updatedGeometryTiles.get(A)||0;c_.updatedGeometryTiles.set(A,j+1);const be=!this._vao||!this.geometryInfo.vertexAttributes||this._wireframeChanged||this._numVerticesPerSideChanged||this._samplerDataChanged||this._clippingAreaChanged||this._edgeResolutionChanged,Re=!be&&this._edgeNeighborChanged,Ge=!Re&&this._cornerElevationChanged;this._numVerticesPerSideChanged=!1,this._samplerDataChanged=!1,this._edgeResolutionChanged=!1,this._edgeNeighborChanged=!1,this._cornerElevationChanged=!1,this._clippingAreaChanged=!1,this._wireframeChanged=!1,be?(this._releaseGeometry(),this._createGeometry(v)):Re?O.updateEdgeElevations():Ge?O.updateCornerElevations():console.warn("Update for no reason?")}releaseGeometry(){return this._releaseGeometry()}get hasGeometry(){return this._hasGeometry}ensureTexture(v,O){return(0,at.pC)(this._texture)&&this._texture.descriptor.width!==v&&this.releaseTexture(),(0,at.Wi)(this._texture)&&(this._texture=O(),this.tile.setMemoryDirty()),this._texture}releaseTexture(){(0,at.pC)(this._texture)&&(this._texture.release(),this._texture=null,this.tile.setMemoryDirty())}updateGeometryStateAndPrepareForGeometryGeneration(v){const O=this._getElevationInfo(),A=O.samplerData?this.tile.getElevationBasedVerticesPerSide(O.maxTileLevel):this.tile.getDefaultVerticesPerRowOnLevel(),j=Math.max(A,5);let te=this.tile.clippingArea;this.tile.intersectsClippingArea&&!this.tile.isWithinClippingArea||(te=null);const pe=this.geometryState;let be=!1;return pe.numVerticesPerSide!==j&&(this._numVerticesPerSideChanged=!0,pe.numVerticesPerSide=j,pe.samplerDataVersion++,be=!0),O.changed&&(this._samplerDataChanged=!0,pe.samplerData=O.samplerData,pe.samplerDataVersion++,be=!0),(0,Qp.fS)(pe.clippingArea,te)||(this._clippingAreaChanged=!0,pe.clippingArea=te,be=!0),pe.wireframe!==v&&(this._wireframeChanged=!0,pe.wireframe=v,be=!0),this._geometryStateChangedSinceLastUpdate||(this._geometryStateChangedSinceLastUpdate=be),this._hasGeometry=!0,be}_createGeometry(v){this.tile.createGeometry();const O=this.geometryInfo.vertexAttributes,A=this.geometryInfo.indices,j=v.gl;this._vao=new ju.U(v,Aa.i,{geometry:(0,z_.K)(O.layout)},{geometry:Bl.f.createVertex(v,j.STATIC_DRAW,O.buffer)},Bl.f.createIndex(v,j.STATIC_DRAW,A)),this._hasGeometry=!0}_releaseGeometry(){return this._hasGeometry=!1,!!this._vao&&(this._vao.dispose(),this._vao=null,function BB(d){DT.release(d.vertexAttributes),d.vertexAttributes=null,d.indices=null}(this.geometryInfo),!0)}get vao(){return this._vao}setTextureReference(v,O=a_.Immediate){(0,at.pC)(v)&&v.texture!==this._texture&&this.releaseTexture(),this._textureRef.push(v,O)}get textureReference(){return this._textureRef.current}get nextTextureReference(){return this._textureRef.next}get textureFadeFactor(){return this._textureRef.fadeFactor}get textureIsFading(){return this._textureRef.isFading}_getElevationInfo(){const v=this.geometryState.samplerData,O=this.tile.layerInfo[Bn.ELEVATION],A=O.length;let j=new Array(A),te=0,pe=0,be=!1;for(let Re=0;Re<A;Re++){const Ge=O[Re];if((0,at.pC)(Ge.upsampleInfo)){const tt=Ge.upsampleInfo.tile,ft=tt.layerInfo[Bn.ELEVATION][Re].data,yt=ft&&ft.samplerData;v&&v[te]===yt||(be=!0),j[te++]=yt,pe=Math.max(pe,tt.lij[0])}else if(Ge.data){const tt=this.tile.surface.layerViewByIndex(Re,Bn.ELEVATION);if((0,mu.yf)(this.tile,tt.layer,!1)){const ft=Ge.data;v&&v[te]===ft.samplerData||(be=!0),j[te++]=ft.samplerData,pe=this.tile.level}}}return(0,at.pC)(v)&&v.length!==te&&(be=!0),te>0?j.length=te:j=null,{changed:be,samplerData:j,maxTileLevel:pe}}get estimatedGeometryMemoryUsage(){const v=(0,at.R2)(this.intersectionData,0,O=>O.estimatedMemoryUsage);return this.geometryInfo.indices.byteLength+this.geometryInfo.vertexAttributes.byteLength+v}get textureDescriptor(){return(0,at.pC)(this._texture)?this._texture.descriptor:null}get test(){return{hasTexture:null!=this._texture}}checkGeometryWaterproofness(){}}function Ox(d,v,O,A,j,te){const pe=v-1,be=d.vertexAttributes.count,Re=2*(Math.min(v-2,A[1])-Math.max(1,A[0]))*(Math.min(v-2,j[1])-Math.max(1,j[0])),Ge=ti.OC.map((jt,ir)=>0===ir&&j[1]<v-2||1===ir&&A[1]<v-2||2===ir&&j[0]>1||3===ir&&A[0]>1),tt=3*(Re+d.outerEdges.reduce((jt,ir,or)=>jt+(Ge[or]?0:pe-2+ir.count-1),0)+O.reduce((jt,ir)=>jt+pe*(2*(ir.latitudeResolution-1)+1),0))*(te?2:1),ft=new(be>65536?Uint32Array:Uint16Array)(tt);let yt=0;const It=te?(jt,ir,or)=>{ft[yt++]=jt,ft[yt++]=ir,ft[yt++]=ir,ft[yt++]=or,ft[yt++]=or,ft[yt++]=jt}:(jt,ir,or)=>{ft[yt++]=jt,ft[yt++]=ir,ft[yt++]=or},Nt=v-2,Rt=pe-2;(()=>{for(let jt=Math.max(j[0],1)-1;jt<Math.min(j[1],v-2)-1;++jt)for(let ir=Math.max(A[0],1)-1;ir<Math.min(A[1],v-2)-1;++ir){const or=jt*Nt+ir,pr=or+1,Lr=pr+Nt,Br=Lr-1;It(or,pr,Lr),It(Lr,Br,or)}})(),(()=>{for(let jt=0;jt<4;++jt){if(Ge[jt])continue;const ir=d.outerEdges[jt],or=d.innerEdges[jt];let pr=0,Lr=0;const Br=ir.count,gs=or.count,Cs=1===jt||2===jt?(Us,Ks,li)=>It(Us,Ks,li):(Us,Ks,li)=>It(Us,li,Ks);for(;pr<Br-1||Lr<gs-1;){const Us=or.getVertexOffset(Lr),Ks=ir.getVertexOffset(pr),li=pr<Br-1,si=Lr<gs-1,Ei=li?0+pe*(pr+.5)/(Br-1):0,ts=si?1+Rt*(Lr+.5)/(gs-1):0;li&&(!si||Ei<=ts)?(++pr,Cs(Us,Ks,ir.getVertexOffset(pr))):(++Lr,Cs(Us,Ks,or.getVertexOffset(Lr)))}}})(),O.forEach(jt=>{let ir=d.outerEdges[jt.connectedOuterEdgeOffset].offset0;for(let or=0;or<jt.latitudeResolution;++or){const pr=0===or?jt.rowOffset:ir+v;for(let Lr=0;Lr<pe;Lr++)It(ir,ir+1,pr+Lr),or<jt.latitudeResolution-1&&It(ir+1,pr+Lr+1,pr+Lr),++ir;ir=pr}}),d.indices=ft,d.indexCount=tt}function Px(d,v){const O=d.localOrigin,A=d.geometryInfo,j=d.geometryState.neighborData.edgeResolutions,te=A.numVerticesPerSide-2,pe=A.vertexAttributes.position.typedBuffer;let be=v;for(let Re=0;Re<4;++Re){{const Ge=0===Re||2===Re;A.innerEdges[Re]=new yx(pe,O,(0===Re?te-1:0)*te+(1===Re?te-1:0),(Ge?0:1)*te+(Ge?1:0),te)}{const tt=j[Re]+1;A.outerEdges[Re]=new yx(pe,O,be,1,tt),be+=tt}}}function Dx(d,v){Ax(d,v),function u8(d,v){const O=d.geometryState.clippingArea,A=d.tile.extent,j=(0,at.pC)(O)&&(A[0]<O[0]||A[2]>O[2]||A[1]<O[1]||A[3]>O[3])?h8:d8;for(let te=0;te<4;++te)j(d,te,v)}(d,v),Bx(d,v)}function xx(d,v,O,A,j){const te=Math.cos(O),pe=Math.sin(O),be=Math.sin(v),Re=Math.cos(v),Ge=j+A;d[0]=Re*te*Ge,d[1]=be*te*Ge,d[2]=pe*Ge}function Kg(d,v,O){return d?A=>function n8(d,v){return(Math.PI/2-2*Math.atan(Math.exp(-d/v)))*v}(A,v):A=>function o8(d,v){return d*v}(A,O)}function Sx(d){Lx(d,(v,O,A,j)=>function i8(d,v,O,A,j,te){xx(d,j[0===v?0:2],j[0===O?1:3],A,te)}(v,O,A,j,d.tile.extentInRadians,d.tile.ellipsoid.radius))}function Ax(d,v){const O=d.tile;(0,at.pC)(O.renderData.geometryState.clippingArea)?function l8(d,v){const O=d.geometryState,A=d.tile,j=A.extent,te=(0,at.Pt)(O.clippingArea,j),pe=d.geometryInfo,be=pe.boundingBox,Re=pe.outerEdges,Ge=O.neighborData.cornerNeighborData,yt=pe.uvOffsetAndScale[2],It=pe.uvOffsetAndScale[3],Nt=yt>0?1/yt:1,Rt=It>0?1/It:1,Jt=-pe.uvOffsetAndScale[0]*Nt,jt=-pe.uvOffsetAndScale[1]*Rt,ir=A.surface.isWebMercatorOnPlateeCarree,or=Kg(ir,ir?A.ellipsoid.radius:0,v),pr=O.samplerData,Lr=O.neighborData.edgeNeighbours,Br=d.localOrigin,gs=(Cs,Us,Ks,li,si)=>{const ts=j[1]*(1-si)+j[3]*si,$s=(0,cs.uZ)(j[0]*(1-li)+j[2]*li,te[0],te[2]),Ms=(0,cs.uZ)(ts,te[1],te[3]),ms=[Ms===j[3],$s===j[2],Ms===j[1],$s===j[0]],ws=!ms[3]&&!ms[1]||!ms[0]&&!ms[2],Ss=ws?ms[0]&&(0,at.pC)(Lr[0])?Lr[0]:ms[1]&&(0,at.pC)(Lr[1])?Lr[1]:ms[2]&&(0,at.pC)(Lr[2])?Lr[2]:ms[3]&&(0,at.pC)(Lr[3])?Lr[3]:null:null,Fs=ws?Ss?Ss.neighborTile.level===A.level?.5*(Io($s,Ms,pr)+Io($s,Ms,Ss.neighborSamplerData)):Io($s,Ms,Ss.neighborSamplerData):Io($s,Ms,pr):Ge[Ks].elevation,ci=$s*v-Br[0],Xs=or(Ms)-Br[1],xs=Fs-Br[2];u_(ci,Xs,xs,be);const Js=(0,cs.uZ)(Jt+li*Nt,0,1),xi=(0,cs.uZ)(jt+si*Rt,0,1);Cs.setVertexRawXYZUV(Us,ci,Xs,xs,Js,xi)};for(let Cs=0;Cs<4;++Cs){const Us=Re[Cs];gs(Us,0,0===Cs?3:1===Cs?1:2,1===Cs?1:0,0===Cs?1:0),gs(Us,Us.count-1,2===Cs?1:3===Cs?3:0,3===Cs?0:1,2===Cs?0:1)}}(d,v):Lx(d,(A,j,te,pe)=>function a8(d,v,O,A,j,te,pe){const Re=0===O?j[1]:j[3],Ge=A;d[0]=(0===v?j[0]:j[2])*te,d[1]=pe(Re),d[2]=Ge}(A,j,te,pe,d.tile.extent,v,Kg(O.surface.isWebMercatorOnPlateeCarree,O.ellipsoid.radius,v)))}function Lx(d,v){const O=d.geometryInfo,A=O.outerEdges,j=d.geometryState.neighborData.cornerNeighborData,te=O.boundingBox,pe=d.localOrigin,be=(Re,Ge,tt,ft,yt)=>{v(_p,tt,ft,j[Ge].elevation);for(let It=0;It<3;++It)_p[It]-=pe[It];u_(_p[0],_p[1],_p[2],te),Re.setVertexRawXYZUV(yt,_p[0],_p[1],_p[2],tt,ft)};for(let Re=0;Re<4;++Re){const Ge=A[Re];be(Ge,0===Re?3:1===Re?1:2,1===Re?1:0,0===Re?1:0,0),be(Ge,2===Re?1:3===Re?3:0,3===Re?0:1,2===Re?0:1,Ge.count-1)}}function IT(d){d.vao?.vertexBuffers?.geometry?.setSubData(d.geometryInfo.vertexAttributes.position.typedBuffer)}function wx(d){Sx(d);for(let v=0;v<4;++v)c8(d,v);Ux(d)}function c8(d,v){const O=d.geometryState,A=O.neighborData,j=d.tile,te=j.extent,pe=te[2]-te[0],be=te[3]-te[1],Re=j.extentInRadians,Ge=Re[0],tt=Re[2],ft=j.ellipsoid.radius,yt=UT(d),Nt=A.edgeNeighbours[v],Rt=A.edgeResolutions[v],Jt=1===v||3===v,jt=1===v?1:0,ir=0===v?1:0,or=te[0]+jt*pe,pr=te[1]+ir*be,Lr=Ge*(1-jt)+tt*jt,Br=yt(ir),gs=Nt?.neighborTile,Cs=j.level-(gs?.level??j.level),Us=2**Cs,Ks=Rt*Us,li=(co=>{if(!co)return 0;const Dc=Jt?0:1,Sy=j.lij[Dc+1]-co.lij[Dc+1]*Us;return(Jt?Us-1-Sy:Sy)*Rt})(gs),si=gs?.extent,Ei=(v+2)%4,ts=O.samplerData,$s=gs?.renderData?.geometryState?.samplerData,Ms=gs&&0===Cs,Ss=Ms?(co,Jc,Dc,Cd)=>.5*(Io(co,Jc,$s)+Io(Dc,Cd,ts)):(co,Jc)=>Io(co,Jc,$s);let Fs=si?1===Ei?si[2]:si[0]:or,ci=si?0===Ei?si[3]:si[1]:pr;const Js=gs?Jt?(co,Jc,Dc)=>{const Cd=(li+co)/Ks;return ci=si[1]*(1-Cd)+si[3]*Cd,Ss(Fs,ci,Jc,Dc)}:(co,Jc,Dc)=>{const Cd=(li+co)/Ks;return Fs=si[0]*(1-Cd)+si[2]*Cd,Ss(Fs,ci,Jc,Dc)}:(co,Jc,Dc)=>Io(Jc,Dc,ts),xi=(co,Jc,Dc)=>Js(co,Jc,Dc);let Ii=jt,Si=or,Bi=Lr,Bs=ir,mi=pr,Ni=Br,js=Math.sin(Bi),In=Math.cos(Bi),Vi=Math.cos(Ni),Sn=Math.sin(Ni);const gn=Jt?()=>yt(Bs):()=>Br,Pi=Jt?co=>{Bs=co,mi=te[1]*(1-co)+te[3]*co,Ni=gn(),Vi=Math.cos(Ni),Sn=Math.sin(Ni)}:co=>{Ii=co,Si=te[0]*(1-co)+te[2]*co,Bi=Ge*(1-Ii)+tt*Ii,js=Math.sin(Bi),In=Math.cos(Bi)},jn=d.geometryInfo,ra=jn.boundingBox,To=jn.vertexAttributes,Ca=To.position.typedBuffer,Ip=To.uv0.typedBuffer,b_=To.normal.typedBuffer,Sh=jn.outerEdges[v];let Up=Sh.getVertexOffset(1);const Bp=Rt+1,z0=d.localOrigin,xy=z0[0],yW=z0[1],vW=z0[2],uL=j.surface.shadingEnabled,dL=1===v?-1:3===v?1:0,hL=0===v?-1:2===v?1:0,_L=pe/Rt,EW=dL*_L,MW=hL*_L,bW=dL*(1/Rt),TW=hL*(1/Rt),QC=co=>{(0,Et.v)(d_,co,bh),(0,Et.f)(Gf,d_,pp),(0,Et.f)(Kf,Gf,d_),(0,Et.a)(ma,ma,Kf)};for(let co=1;co<Bp-1;++co){Pi(co/Rt);const Jc=xi(co,Si,mi),Dc=ft+Jc,Cd=In*Vi*Dc,Sy=js*Vi*Dc,pL=Sn*Dc,fL=Cd-xy,mL=Sy-yW,gL=pL-vW;u_(fL,mL,gL,ra);const jp=_o.Vs*Up;if(Ca[jp+0]=fL,Ca[jp+1]=mL,Ca[jp+2]=gL,Ip[jp+0]=Ii,Ip[jp+1]=Bs,uL){(0,Et.s)(ma,0,0,0),(0,Et.s)(bh,Cd,Sy,pL),(0,Et.n)(pp,bh);const yL=(NE,CW)=>{const OW=Io(Si+NE*EW,mi+NE*MW,CW),qC=ft+OW,vL=Ii+NE*bW,EL=Ge*(1-vL)+tt*vL,PW=Math.sin(EL),DW=Math.cos(EL),ML=yt(Bs+NE*TW),xW=Math.sin(ML),bL=Math.cos(ML),SW=(0,br.f)(DW*bL*qC,PW*bL*qC,xW*qC);QC(SW)};gs&&yL(-1,$s),gs&&!Ms||yL(1,ts),b_[jp+0]=ma[0],b_[jp+1]=ma[1],b_[jp+2]=ma[2]}++Up}if(uL)for(let co=1;co<Bp-1;++co)Sh.getVertexRawNormal(ma,co),Sh.getVertex(bh,co),(0,Et.n)(pp,bh),Sh.getVertex(yu,co-1),QC(yu),Sh.getVertex(yu,co+1),QC(yu),(0,Et.n)(ma,ma),Sh.setVertexRawNormal(co,ma[0],ma[1],ma[2])}function Rx(d,v,O,A,j,te,pe){return pe===j?!d||v?(be,Re)=>Io(be,Re,O):null:pe===te&&d?(be,Re)=>Io(be,Re,A):null}function I1(d,v,O,A){if(v!==d)return()=>0;const j=v?3:2,te=v?1:0,pe=A(j,te),be=A(te,j),Re=(null!=pe?1:0)+(null!=be?1:0),Ge=v?O:0,tt=v?0:O;return(ft,yt,It)=>((null!=pe?-(pe(ft+Ge,yt+tt)-It):0)+(null!=be?+(be(ft-Ge,yt-tt)-It):0))/Re}function d8(d,v,O){const A=d.geometryState.neighborData,te=d.tile,be=te.surface,Re=be.shadingEnabled,tt=A.edgeResolutions[v],ft=tt,yt=te.extent,Nt=ft+1,Rt=A.edgeNeighbours[v],Jt=d.localOrigin,jt=d.geometryState.samplerData,Lr=Rt?.neighborTile.level===te.level,Br=Lr?(xs,Js)=>.5*(Io(xs,Js,Rt.neighborSamplerData)+Io(xs,Js,jt)):(xs,Js)=>Io(xs,Js,Rt.neighborSamplerData),gs=(0,at.pC)(Rt)?Br:(xs,Js)=>Io(xs,Js,jt),Cs=d.geometryInfo,Us=Cs.outerEdges[v],Ks=Kg(be.isWebMercatorOnPlateeCarree,te.ellipsoid.radius,O),li=Cs.boundingBox,si=1===v||3===v,Ei=1===v?yt[2]:yt[0],ts=0===v?yt[3]:yt[1],$s=1===v?1:0,Ms=0===v?1:0,ms=(yt[2]-yt[0])/tt,ws=Rt?.neighborSamplerData,Ss=(0,at.pC)(Rt),Fs=(xs,Js)=>Rx(Ss,Lr,jt,ws,xs,Js,v),ci=I1(si,!0,ms,Fs),Xs=I1(si,!1,ms,Fs);for(let xs=1;xs<Nt-1;++xs){const Js=xs/ft,xi=si?Ei:yt[0]*(1-Js)+yt[2]*Js,Ii=si?yt[1]*(1-Js)+yt[3]*Js:ts,Si=si?$s:Js,Bi=si?Js:Ms,Bs=gs(xi,Ii),mi=xi*O-Jt[0],Ni=Ks(Ii)-Jt[1],js=Bs-Jt[2];if(u_(mi,Ni,js,li),Re){const In=ci(xi,Ii,Bs),Vi=Xs(xi,Ii,Bs);Us.setVertexRawXYZUVN(xs,mi,Ni,js,Si,Bi,In,Vi,ms)}else Us.setVertexRawXYZUV(xs,mi,Ni,js,Si,Bi)}if(Re){const xs=si?0:1,Js=si?1:0;for(let xi=1;xi<Nt-1;++xi){Us.getNormal(Yf,xi);const Ii=Us.getVertexZ(xi-1)-Us.getVertexZ(xi+1),Si=Yf[0]+.5*xs*Ii,Bi=Yf[1]+.5*Js*Ii,Bs=2*ms,mi=1/Math.sqrt(Si*Si+Bi*Bi+Bs*Bs);Us.setVertexRawNormal(xi,mi*Si,mi*Bi,mi*Bs)}}}function h8(d,v,O){const A=d.geometryState.neighborData,te=d.tile,pe=te.level,be=te.surface,Re=be.shadingEnabled,Ge=A.edgeNeighbours[v],tt=A.edgeResolutions[v],ft=tt,yt=te.extent,It=d.geometryState,Nt=(0,at.Pt)(It.clippingArea,Fx),Rt=d.geometryInfo,Jt=Rt.uvOffsetAndScale[0],jt=Rt.uvOffsetAndScale[1],ir=Jt+Rt.uvOffsetAndScale[2],or=jt+Rt.uvOffsetAndScale[3],pr=ir>Jt?1/(ir-Jt):1,Lr=or>jt?1/(or-jt):1,Br=-Jt*pr,gs=-jt*Lr,Cs=ft+1,Us=[yt[3]>Nt[3],yt[2]>Nt[2],yt[1]<Nt[1],yt[0]<Nt[0]],Ks=Ge,li=It.samplerData,si=(Vi,Sn)=>Io(Vi,Sn,li),Ei=Ks?.neighborTile.level===pe,$s=si,Ms=(0,at.pC)(Ks)?(Vi,Sn)=>{const gn=Io(Vi,Sn,Ks.neighborSamplerData);return Ei?.5*(gn+Io(Vi,Sn,li)):gn}:si,ms=Us[v]?$s:Ms,ws=Rt.outerEdges[v],Ss=Rt.boundingBox,Fs=1===v||3===v,ci=(0,cs.uZ)(1===v?yt[2]:yt[0],Nt[0],Nt[2]),Xs=(0,cs.uZ)(0===v?yt[3]:yt[1],Nt[1],Nt[3]),xs=1===v?1:0,Js=0===v?1:0,xi=d.localOrigin,Ii=Kg(be.isWebMercatorOnPlateeCarree,te.ellipsoid.radius,O),Si=(yt[2]-yt[0])/tt,Bi=Ks?.neighborSamplerData,Bs=(0,at.pC)(Ks),mi=Ks?.neighborTile.level===pe,Ni=(Vi,Sn)=>Rx(Bs,mi,li,Bi,Vi,Sn,v),js=I1(Fs,!0,Si,Ni),In=I1(Fs,!1,Si,Ni);for(let Vi=1;Vi<Cs-1;++Vi){const Sn=Vi/ft,gn=Fs?ci:(0,cs.uZ)(yt[0]*(1-Sn)+yt[2]*Sn,Nt[0],Nt[2]),Pi=Fs?(0,cs.uZ)(yt[1]*(1-Sn)+yt[3]*Sn,Nt[1],Nt[3]):Xs,jn=Fs?xs:(0,cs.uZ)(Br+Sn*pr,0,1),ra=Fs?(0,cs.uZ)(gs+Sn*Lr,0,1):Js,To=ms(gn,Pi),Ca=gn*O-xi[0],Ip=Ii(Pi)-xi[1],b_=To-xi[2];if(u_(Ca,Ip,b_,Ss),Re){const Sh=js(gn,Pi,To),Up=In(gn,Pi,To);ws.setVertexRawXYZUVN(Vi,Ca,Ip,b_,jn,ra,Sh,Up,Si)}else ws.setVertexRawXYZUV(Vi,Ca,Ip,b_,jn,ra)}if(Re){const Vi=Fs?0:1,Sn=Fs?1:0;for(let gn=1;gn<Cs-1;++gn){ws.getNormal(Yf,gn);const Pi=ws.getVertexZ(gn-1)-ws.getVertexZ(gn+1),jn=Yf[0]+.5*Vi*Pi,ra=Yf[1]+.5*Sn*Pi,To=2*Si,Ca=1/Math.sqrt(jn*jn+ra*ra+To*To);ws.setVertexRawNormal(gn,Ca*jn,Ca*ra,Ca*To)}}}function Ix(d,v){return Math.PI/2-2*Math.atan(Math.exp(-d/v))}function UT(d){const v=d.tile;if(v.surface.isWebMercator){const A=v.extent,j=v.ellipsoid.radius;return te=>function _8(d,v,O,A){return Ix(d+A*(v-d),O)}(A[1],A[3],j,te)}const O=v.extentInRadians;return A=>function p8(d,v,O){return d*(1-O)+v*O}(O[1],O[3],A)}function Ux(d){d.tile.surface.shadingEnabled&&jx(d,(v,O,A,j,te,pe,be)=>function f8(d,v,O,A,j,te,pe){(function g8(d,v,O,A,j){const te=UT(d),pe=d.tile,be=pe.extent;(0,ti.Fp)((0,ui.OC)(be,O,A,1));const Re=(O-be[0])/(be[2]-be[0]),tt=pe.extentInRadians;xx(v,tt[0]*(1-Re)+tt[2]*Re,te((A-be[1])/(be[3]-be[1])),j,pe.ellipsoid.radius)})(d,yu,j,te,pe),(0,Et.v)(d_,yu,O),(0,Et.f)(Gf,d_,A),(0,Et.f)(v,Gf,d_)}(O,v,A,j,te,pe,be))}function Bx(d,v){d.tile.surface.shadingEnabled&&jx(d,(O,A,j,te,pe,be,Re)=>function m8(d,v,O,A,j,te){d(yu,A,j,te);const pe=yu[0]-O[0],be=yu[1]-O[1],Re=yu[2]-O[2];v[0]=-pe*Re,v[1]=-be*Re,v[2]=pe*pe+be*be}(function y8(d,v){return d.tile.surface.isWebMercatorOnPlateeCarree?(O,A,j,te)=>function E8(d,v,O,A,j,te){O[0]=A*d,O[1]=(Math.PI/2-2*Math.atan(Math.exp(-j/v)))*v,O[2]=te}(v,d.tile.ellipsoid.radius,O,A,j,te):(O,A,j,te)=>function v8(d,v,O,A,j){v[0]=O*d,v[1]=A*d,v[2]=j}(v,O,A,j,te)}(d,v),O,j,pe,be,Re))}function jx(d,v){if(!d.tile.surface.shadingEnabled)return;const O=d.geometryState.neighborData.cornerNeighborData,A=d.tile,j=A.extent,te="local"===d.tile.surface.view?.viewingMode;te&&(0,Et.s)(pp,0,0,1);{const pe=(Nt,Rt,Jt,jt)=>{v(Kf,Nt.renderData,bh,pp,Rt,Jt,jt),(0,Et.a)(ma,ma,Kf)},Re=(Nt,Rt,Jt,jt,ir,or)=>{const Br=(1===or?ir.extent[0]:3===or?ir.extent[2]:Nt)+Hf[Jt][0]*jt,gs=(0===or?ir.extent[1]:2===or?ir.extent[3]:Rt)+Hf[Jt][1]*jt;(0,ti.Fp)((0,ui.OC)(ir.extent,Br,gs,1));const Cs=Io(Br,gs,ir.renderData.geometryState.samplerData);pe(ir,Br,gs,Cs)},Ge=(Nt,Rt,Jt)=>Nt.extent[0===Rt||1===Rt?2:0]+Jt,tt=(Nt,Rt,Jt)=>Nt.extent[0===Rt||3===Rt?3:1]+Jt,ft=(Nt,Rt,Jt,jt)=>{const ir=Ge(Jt,jt,Hf[Nt][0]*Rt),or=tt(Jt,jt,Hf[Nt][1]*Rt);(0,ti.Fp)((0,ui.OC)(Jt.extent,ir,or,1));const pr=Io(ir,or,Jt.renderData.geometryState.samplerData);pe(Jt,ir,or,pr)},yt=(Nt,Rt,Jt,jt,ir,or)=>{const pr=Hf[Nt][0]*Rt,Lr=Hf[Nt][1]*Rt,Br=Ge(Jt,jt,pr),gs=tt(Jt,jt,Lr),Cs=Ge(ir,or,pr),Us=tt(ir,or,Lr);(0,ti.Fp)((0,ui.OC)(Jt.extent,Br,gs,1)),(0,ti.Fp)((0,ui.OC)(ir.extent,Cs,Us,1));const Ks=Io(Br,gs,Jt.renderData.geometryState.samplerData),li=Io(Cs,Us,ir.renderData.geometryState.samplerData);pe(Jt,Br,gs,.5*(Ks+li))},It=Nt=>{const Rt=0===Nt||1===Nt?j[2]:j[0],Jt=0===Nt||3===Nt?j[3]:j[1],jt=O[Nt].cornerTiles,ir=jt.reduce((or,pr)=>Math.min(or,pr?.level??1/0),1/0);for(let or=0;or<4;++or){const pr=jt[or];fp[or]=pr?.level===ir?pr:null}for(let or=0;or<4;++or){const pr=fp[(or+3)%4],Lr=fp[or];if(null!=pr&&pr!==A&&pr===Lr){const Br=pr,Us=Math.max(Br.renderData.geometryState.neighborData.edgeResolutions[(or+2)%4],2**(A.level-Br.level)),Ks=(Br.extent[2]-Br.extent[0])/Us,li=(or+0)%4,si=(or+1)%4;return Re(Rt,Jt,(or+3)%4,Ks,Br,or),Re(Rt,Jt,li,Ks,Br,or),Re(Rt,Jt,si,Ks,Br,or),ma}}{(0,ti.Fp)(fp.some(pr=>pr?.isLoaded||pr===A));const or=fp.reduce((pr,Lr)=>Lr?Lr.extent[2]-Lr.extent[0]:pr,0)/fp.reduce((pr,Lr)=>Math.max(pr,Lr?.renderData.geometryState.numVerticesPerSide??1),1);for(let pr=0;pr<4;++pr){const Lr=fp[(pr+3)%4],Br=fp[(pr+0)%4];if(!Lr&&!Br)continue;const gs=0===pr?1:1===pr?2:2===pr?3:0,Cs=0===pr?2:1===pr?3:2===pr?0:1;Lr&&Br?yt(pr,or,Lr,gs,Br,Cs):ft(pr,or,Lr??Br,Lr?gs:Cs)}}return ma};for(let Nt=0;Nt<4;++Nt){const Rt=d.geometryInfo.outerEdges[Nt];Rt.getVertex(bh,1===Nt||2===Nt?0:Rt.count-1),te||(0,Et.n)(pp,bh),(0,Et.s)(ma,0,0,0);const jt=It(Nt);(0,Et.n)(jT[Nt],jt)}}{const pe=(Re,Ge,tt,ft,yt)=>{Re.setVertexRawNormal(yt,Ge,tt,ft)},be=d.geometryInfo.outerEdges;for(let Re=0;Re<4;++Re){const Ge=be[Re];{const tt=jT[0===Re?3:1===Re?1:2];pe(Ge,tt[0],tt[1],tt[2],0)}{const tt=jT[2===Re?1:3===Re?3:0];pe(Ge,tt[0],tt[1],tt[2],Ge.count-1)}}}}function u_(d,v,O,A){d<A[0]?A[0]=d:d>A[3]&&(A[3]=d),v<A[1]?A[1]=v:v>A[4]&&(A[4]=v),O<A[2]?A[2]=O:O>A[5]&&(A[5]=O)}c_.updatedGeometryTiles=new Map,c_.deferTileNeighborUpdate=!1,c_.neighborTilesToUpdate=new Set;const Hf=[[0,1],[1,0],[0,-1],[-1,0]],L0=new class jB{constructor(){this.sinLonLUT=new Array(_o.HB+1),this.cosLonLUT=new Array(_o.HB+1)}update(v,O){const A=O[0],j=O[2];for(let te=0;te<=v;te++){const pe=te/v,be=A*(1-pe)+j*pe;this.sinLonLUT[te]=Math.sin(be),this.cosLonLUT[te]=Math.cos(be)}}},Fx=(0,ui.al)(-1/0,-1/0,1/0,1/0),_p=(0,br.c)(),yu=(0,br.c)(),d_=(0,br.c)(),Gf=(0,br.c)(),Kf=(0,br.c)(),bh=(0,br.c)(),BT=(0,br.c)(),pp=(0,br.c)(),ma=(0,br.c)(),Yf=(0,br.c)(),jT=[(0,br.c)(),(0,br.c)(),(0,br.c)(),(0,br.c)()],fp=[null,null,null,null];var w0=T(57623);class M8 extends LT{constructor(v,O,A){super(),this.horizontalScaleFactor=1,this.extentInRenderSR=(0,ui.Ue)(),void 0!==v&&this.init(v,O,A)}init(v,O,A){super.init(v,O,A);const j=A.view.renderSpatialReference,te=A.spatialReference,pe=(0,at.pC)(j)&&(0,cd.QM)(j)&&te.isGeographic?this.ellipsoid.radius*Math.PI/180:1;this.horizontalScaleFactor=pe;const Re=this.extentInRenderSR,Ge=this.extent;if(this.surface.isWebMercatorOnPlateeCarree){const tt=(0,br.f)(Ge[0],Ge[1],0);(0,tn.SH)(tt,ba.Z.WebMercator,tt,ba.Z.PlateCarree);const ft=(0,br.f)(Ge[2],Ge[3],0);(0,tn.SH)(ft,ba.Z.WebMercator,ft,ba.Z.PlateCarree),Re[0]=tt[0],Re[1]=tt[1],Re[2]=ft[0],Re[3]=ft[1]}else for(let tt=0;tt<4;++tt)Re[tt]=Ge[tt]*pe;this.centerAtSeaLevel[0]=.5*(Re[0]+Re[2]),this.centerAtSeaLevel[1]=.5*(Re[1]+Re[3]),this.centerAtSeaLevel[2]=0,this._edgeLen=Math.max(Re[2]-Re[0],Re[3]-Re[1]),this._edgeLen2=this._edgeLen*this._edgeLen,this.updateRadiusAndCenter()}updateRadiusAndCenter(){this._updateCenter();const v=this.extentInRenderSR,O=.5*(v[2]-v[0]),A=.5*(v[3]-v[1]),j=Math.sqrt(O*O+A*A),pe=Math.max(j,.5*(this.elevationBounds[0]-this.elevationBounds[1]));this._center[Cc.MIDDLE][3]=pe}_isVisible(v){return(0,to.fz)(v,this._aabb())}_aabb(){const v=this.extentInRenderSR;return(0,pa.re)(v[0],v[1],this.elevationBounds[0],v[2],v[3],this.elevationBounds[1])}intersectsRay(v,O,A,j){return U1[0]=1/O[0],U1[1]=1/O[1],U1[2]=1/O[2],(0,w0.Fw)(this._aabb(),v,U1,A,j)}createGeometry(){(function qB(d,v){const O=d.tile,A=O.extent,j=d.localOrigin,te=d.geometryState,pe=O.surface,be=pe.isWebMercatorOnPlateeCarree,Re=pe.shadingEnabled,Ge=A[0],tt=A[1],ft=A[2]-Ge,yt=A[3]-tt,It=te.clippingArea,Nt=(0,at.pC)(It)?Math.max(0,(It[0]-A[0])/ft):0,Rt=(0,at.pC)(It)?Math.max(0,(It[1]-A[1])/yt):0,Jt=(0,at.pC)(It)?Math.min(1,(It[2]-A[0])/ft):1,jt=(0,at.pC)(It)?Math.min(1,(It[3]-A[1])/yt):1,ir=Jt-Nt,or=jt-Rt,pr=ir>0?1/ir:1,Lr=or>0?1/or:1,Br=-Nt*pr,gs=-Rt*Lr,Cs=te.numVerticesPerSide,Us=Cs-1,Ks=(Cs-2)**2+te.neighborData.edgeResolutions.reduce((Ii,Si)=>Ii+Si+1,0),li=vx(Ks),si=li.position.typedBuffer,Ei=li.uv0.typedBuffer,ts=li.normal.typedBuffer,$s=d.geometryInfo,Ms=$s.boundingBox;(0,pa.cS)(Ms);let ms=0;const ws=O.ellipsoid.radius,Ss=te.samplerData,Fs=(0,at.pC)(It)?It:Fx,ci=(0,ui.al)(Math.max(A[0],Fs[0]),Math.max(A[1],Fs[1]),Math.min(A[2],Fs[2]),Math.min(A[3],Fs[3])),Xs=j[0],xs=j[1],Js=j[2],xi=Kg(be,ws,v);(()=>{for(let Ii=1;Ii<=Us-1;Ii++){const Si=Ii/Us,Bi=gs+Si*Lr,Bs=(0,cs.uZ)(tt+Si*yt,ci[1],ci[3]),mi=(0,cs.uZ)(Bi,0,1),Ni=xi(Bs)-xs,js=ft/Us;for(let In=1;In<=Us-1;In++){const Vi=In/Us,Sn=Br+Vi*pr,gn=(0,cs.uZ)(Ge+Vi*ft,ci[0],ci[2]),Pi=(0,cs.uZ)(Sn,0,1),jn=Io(gn,Bs,Ss),ra=gn*v-Xs,To=jn-Js;u_(ra,Ni,To,Ms);const Ca=_o.Vs*ms;if(si[Ca+0]=ra,si[Ca+1]=Ni,si[Ca+2]=To,Ei[Ca+0]=Pi,Ei[Ca+1]=mi,Re){const Ip=Io(gn+js,Bs,Ss),b_=Io(gn-js,Bs,Ss),Sh=Io(gn,Bs+js,Ss),Up=.25*(b_-Ip),Bp=.25*(Io(gn,Bs-js,Ss)-Sh),z0=js,xy=Math.sqrt(Up*Up+Bp*Bp+z0*z0);ts[Ca+0]=Up/xy,ts[Ca+1]=Bp/xy,ts[Ca+2]=z0/xy}++ms}}})(),$s.numVerticesPerSide=te.numVerticesPerSide,$s.vertexAttributes=li,(0,Ml.s)(d.geometryInfo.uvOffsetAndScale,Nt,Rt,Jt-Nt,jt-Rt),Px(d,ms),Dx(d,v),ms=Ks,Ox($s,te.numVerticesPerSide,[],[0,Cs-1],[0,Cs-1],te.wireframe),d.intersectionData=null})(this.renderData,this.horizontalScaleFactor),this.setMemoryDirty()}getDefaultVerticesPerRowOnLevel(){return this.level<9?3:2}updateCornerElevations(){!function r8(d,v){Ax(d,v),Bx(d,v),IT(d)}(this.renderData,this.horizontalScaleFactor)}updateEdgeElevations(){!function s8(d,v){Dx(d,v),IT(d)}(this.renderData,this.horizontalScaleFactor)}}const U1=(0,br.c)();var Yg;!function(d){d[d.BACK_TO_FRONT=-1]="BACK_TO_FRONT",d[d.NONE=0]="NONE",d[d.FRONT_TO_BACK=1]="FRONT_TO_BACK"}(Yg||(Yg={}));class b8 extends LT{constructor(v,O,A){super(),this.obb=new Array(8);for(let j=0;j<8;j++)this.obb[j]=(0,br.c)();void 0!==v&&this.init(v,O,A)}init(v,O,A){super.init(v,O,A);const j=this.ellipsoid.radius,te=this.extentInRadians[0],pe=this.extentInRadians[1],be=this.extentInRadians[2],Re=this.extentInRadians[3],Ge=v[0],tt=(0,cs.t7)(pe,Re,.5),ft=(0,cs.t7)(te,be,.5),yt=0===Ge?0:Math.min(Math.abs(pe),Math.abs(Re));this._edgeLen=(be-te)*Math.cos(yt)*j,this._edgeLen2=this._edgeLen*this._edgeLen,this._curvatureHeight=j-Math.sqrt(j*j-this._edgeLen2/4),(0,tn.zP)(this.centerAtSeaLevel,ft,tt,this.ellipsoid.radius);const It=(0,br.d)(this.centerAtSeaLevel);(0,Et.n)(It,It),this.up=It,this._updateOBB(),this.updateRadiusAndCenter()}updateRadiusAndCenter(){if(0===this.lij[0])(0,Et.s)(this._center[Kd.MIDDLE],0,0,0),(0,Et.s)(this._center[Kd.TOP],0,0,0),(0,Et.s)(this._center[Kd.BOTTOM],0,0,0),this.ellipsoid||(this.ellipsoid=(0,Mo.Iu)(this.surface.spatialReference)),this._center[Kd.MIDDLE][3]=this.ellipsoid.radius+this.elevationBounds[1];else{this._updateCenter();const v=Math.max((0,Et.d)(this._center[Kd.MIDDLE],this.obb[0]),(0,Et.d)(this._center[Kd.MIDDLE],this.obb[1]));this._center[Kd.MIDDLE][3]=Math.sqrt(v)}}_isVisible(v){if(!(0,to.hr)(v,this._center[Kd.MIDDLE]))return!1;if(this.lij[0]<10)return!0;const O=this.obb;for(let A=0;A<to.tc.NUM;A++){const j=A===to.Nu.NEAR,te=v[A];j&&(Zg[0]=te[0],Zg[1]=te[1],Zg[2]=te[2],Zg[3]=te[3]-this.surface.view.state.camera.near);const pe=j?Zg:te;let be;for(be=0;be<8;be++){const Re=O[be];if(pe[0]*Re[0]+pe[1]*Re[1]+pe[2]*Re[2]+pe[3]<0)break}if(8===be)return!1}return!0}computeElevationBounds(){super.computeElevationBounds(),this._updateOBB()}createGeometry(){const v=this._getPatchType(this.lij[1],this.lij[0]);(function QB(d,v){const O=d.tile,{extent:A,extentInRadians:j,surface:te}=O,pe=d.localOrigin,be=d.geometryState,Re=te.isWebMercator,Ge=te.shadingEnabled,tt=be.numVerticesPerSide,ft=tt-1,yt=(tt-2)**2,It=Re&&(v===en.tk.HAS_SOUTH_POLE||v===en.tk.HAS_BOTH_POLES),Nt=Re&&(v===en.tk.HAS_NORTH_POLE||v===en.tk.HAS_BOTH_POLES),Jt=6*((It?1:0)+(Nt?1:0))*(ft+1),jt=be.neighborData,ir=jt.edgeResolutions.reduce((Xs,xs)=>Xs+xs+1,0),or=vx(yt+Jt+ir),pr=d.geometryInfo;pr.numVerticesPerSide=be.numVerticesPerSide,pr.vertexAttributes=or,(0,Ml.s)(pr.uvOffsetAndScale,0,0,1,1);const Lr=or.position.typedBuffer,Br=or.uv0.typedBuffer,gs=or.normal.typedBuffer,Cs=pr.boundingBox;(0,pa.cS)(Cs);const Us=pe[0],Ks=pe[1],li=pe[2];L0.update(ft,j);let si=0;const Ei=be.samplerData,ts=O.ellipsoid.radius,$s=UT(d),Ms=tt-2,ms=A[0],ws=A[2],Ss=A[1],Fs=A[3];(()=>{for(let Xs=1;Xs<=Ms;Xs++){const xs=Xs/ft,Js=Ss*(1-xs)+Fs*xs,xi=$s(xs),Ii=Math.cos(xi),Si=Math.sin(xi);for(let Bi=1;Bi<=Ms;Bi++){const Bs=Bi/ft,Ni=L0.sinLonLUT[Bi],js=L0.cosLonLUT[Bi],In=ts+Io(ms*(1-Bs)+ws*Bs,Js,Ei),Vi=js*Ii*In-Us,Sn=Ni*Ii*In-Ks,gn=Si*In-li;u_(Vi,Sn,gn,Cs);const Pi=_o.Vs*si;Lr[Pi+0]=Vi,Lr[Pi+1]=Sn,Lr[Pi+2]=gn,Br[Pi+0]=Bs,Br[Pi+1]=xs,++si}}})(),Ge&&(()=>{const Xs=Bi=>((0,Et.b)(d_,Bi,BT),(0,Et.f)(Gf,d_,pp),(0,Et.f)(Kf,Gf,d_),Kf),xs=or.position,Js=or.normal;si=0;const Si=(Bi,Bs,mi)=>{Bi>1&&Bs>1&&Bi<Ms&&Bs<Ms?(Bi=>{xs.getVec(Bi,yu),(0,Et.a)(ma,ma,Xs(yu))})(si+mi):((Bi,Bs)=>{{const mi=Bi/ft,Ni=ms*(1-mi)+ws*mi,js=L0.sinLonLUT[Bi],In=L0.cosLonLUT[Bi],Vi=Bs/ft,Sn=Ss*(1-Vi)+Fs*Vi,gn=$s(Vi),Pi=Math.cos(gn),jn=Math.sin(gn),ra=ts+Io(Ni,Sn,Ei);(0,Et.s)(yu,In*Pi*ra-Us,js*Pi*ra-Ks,jn*ra-li)}(0,Et.a)(ma,ma,Xs(yu))})(Bi,Bs)};for(let Bi=1;Bi<=Ms;Bi++)for(let Bs=1;Bs<=Ms;Bs++)xs.getVec(si,BT),(0,Et.a)(bh,BT,d.localOrigin),(0,Et.n)(pp,bh),(0,Et.s)(ma,0,0,0),Si(Bs-1,Bi,-1),Si(Bs+1,Bi,1),Si(Bs,Bi-1,-Ms),Si(Bs,Bi+1,+Ms),(0,Et.n)(ma,ma),Js.setVec(si,ma),++si})(),si=yt,Px(d,yt),wx(d),si=yt+ir;const ci=[];(()=>{const Xs=(xs,Js)=>{const xi=Js*tt;u_(-Us,-Ks,xs*ts-li,Cs),ci.push({connectedRowOffset:xi,connectedOuterEdgeOffset:1===xs?0:2,rowOffset:si,latitudeResolution:6});const Ii=Ix(-1===xs?Ss:Fs,ts),Si=xs*Math.PI/2-Ii,Bi=.99*(1===xs?1:-1),Bs=ts+0;for(let mi=1;mi<=6;++mi){const Ni=Ii+Si*(mi/6),js=Math.cos(Ni),In=Math.sin(Ni);for(let Vi=0;Vi<=ft;Vi++){const Sn=Vi/ft,Pi=L0.cosLonLUT[Vi]*js*Bs-Us,jn=L0.sinLonLUT[Vi]*js*Bs-Ks,ra=In*Bs-li;u_(Pi,jn,ra,Cs);const To=_o.Vs*si;if(Lr[To+0]=Pi,Lr[To+1]=jn,Lr[To+2]=ra,Br[To+0]=Sn,Br[To+1]=Bi,Ge){const Ca=1/Math.sqrt(Pi*Pi+jn*jn+ra*ra);gs[To+0]=Ca*Pi,gs[To+1]=Ca*jn,gs[To+2]=Ca*ra}++si}}};It&&Xs(-1,0),Nt&&Xs(1,ft)})(),Ox(pr,be.numVerticesPerSide,ci,[0,tt-1],[0,tt-1],be.wireframe),d.intersectionData=null;for(let Xs=0;Xs<4;++Xs)(0,ti.Fp)(pr.outerEdges[Xs].count===jt.edgeResolutions[Xs]+1)})(this.renderData,v),this.setMemoryDirty()}_updateOBB(){const v=this.extentInRadians,O=this.obb;for(let A=0;A<2;A++){const j=this.elevationBounds[A];let te=4*A;(0,tn.zP)(O[te++],v[0],v[1],this.ellipsoid.radius+j),(0,tn.zP)(O[te++],v[0],v[3],this.ellipsoid.radius+j),(0,tn.zP)(O[te++],v[2],v[3],this.ellipsoid.radius+j),(0,tn.zP)(O[te++],v[2],v[1],this.ellipsoid.radius+j)}if(this.surface.isWebMercator)switch(this._getPatchType(this.lij[1],this.lij[0])){case en.tk.HAS_NORTH_POLE:(0,Et.s)(O[1],0,0,this.ellipsoid.radius),(0,Et.s)(O[2],0,0,this.ellipsoid.radius),(0,Et.s)(O[5],0,0,this.ellipsoid.radius),(0,Et.s)(O[6],0,0,this.ellipsoid.radius);break;case en.tk.HAS_SOUTH_POLE:(0,Et.s)(O[0],0,0,-this.ellipsoid.radius),(0,Et.s)(O[3],0,0,-this.ellipsoid.radius),(0,Et.s)(O[4],0,0,-this.ellipsoid.radius),(0,Et.s)(O[7],0,0,-this.ellipsoid.radius)}}_getPatchType(v,O){return v===(1<<O)-1?0===v?en.tk.HAS_BOTH_POLES:en.tk.HAS_SOUTH_POLE:0===v?en.tk.HAS_NORTH_POLE:en.tk.REGULAR}intersectsRay(v,O,A,j){const te=this._center[Kd.MIDDLE],pe=te[3]+A,Re=te[0]-v[0],Ge=te[1]-v[1],tt=te[2]-v[2],ft=(Re*O[0]+Ge*O[1]+tt*O[2])/(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]),yt=O[0]*ft-Re,It=O[1]*ft-Ge,Nt=O[2]*ft-tt;return yt*yt+It*It+Nt*Nt<pe*pe}getDefaultVerticesPerRowOnLevel(){return this.level<Nx.length?Nx[this.level]+1:2}updateCornerElevations(){!function e8(d){Sx(d),Ux(d),d.vao?.vertexBuffers?.geometry?.setSubData(d.geometryInfo.vertexAttributes.position.typedBuffer)}(this.renderData)}updateEdgeElevations(){!function t8(d){wx(d),IT(d)}(this.renderData)}}const Nx=[128,64,32,16,16,8,8,4],Zg=(0,Ro.Ue)();var Kd;!function(d){d[d.TOP=0]="TOP",d[d.MIDDLE=1]="MIDDLE",d[d.BOTTOM=2]="BOTTOM"}(Kd||(Kd={}));var B1=T(60479);class T8{constructor(){this.extent=(0,Ao.c)(),this.minLevel=0,this.maxLevel=0,this.callback=null}}class C8{constructor(){this._queries=new La.Z({initialSize:10}),this._queriesInvPtr=0,this._queryQueue=new La.Z({initialSize:30}),this._queryPool=new Gd.Z(T8)}queryVisibleLevelRange(v,O,A,j){const te=this._queryPool.acquire();(0,Ml.c)(te.extent,v),te.minLevel=O||-Number.MAX_VALUE,te.maxLevel=A??Number.MAX_VALUE,te.callback=j,this._queryQueue.push(te)}hasPendingQueries(){return 0!==this._queryQueue.length}prepareQueries(){for(;this._queries.length<this._queries.data.length&&this._queryQueue.length>0;){const v=this._queryQueue.pop();this._queries.push(v)}this._queriesInvPtr=this._queries.length}processQueries(){for(let v=0;v<this._queries.length;v++){const O=this._queries.data[v];this._queryPool.release(O),O.callback(v>=this._queriesInvPtr),O.callback=null}this._queries.clear()}scaleQueriesForTile(v){const O=v.level;let A=0;for(;A<this._queriesInvPtr;){const j=this._queries.data[A],te=j.extent;O>=j.minLevel&&O<=j.maxLevel&&te[0]<=v.extent[2]&&te[2]>=v.extent[0]&&te[1]<=v.extent[3]&&te[3]>=v.extent[1]?(this._queries.swapElements(A,this._queriesInvPtr-1),this._queriesInvPtr--):A++}}}var Yu=T(7699);class FT extends Rn.m{constructor(){super(...arguments),this.blendMode=Yu.iM.Normal}}(0,Je._)([(0,Rn.o)({count:Yu.iM.COUNT})],FT.prototype,"blendMode",void 0);var O8=T(14273),wa=T(87204);class P8 extends O8.R{constructor(){super(...arguments),this.opacity=1,this.baseOpacity=1,this.texture=null,this.fboTexture=null,this.blendMode=Yu.iM.Normal,this.backgroundColor=br.Z}}class j1 extends Ka.A{initializeProgram(v){const O=j1.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.if)(Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK})}}j1.shader=new Ga.J(wa.b,()=>T.e(7298).then(T.bind(T,7298)));class F1 extends FT{constructor(){super(...arguments),this.output=wa.B.Composite,this.baseOpacityMode=wa.a.One,this.premultipliedSource=!1}}(0,Je._)([(0,Rn.o)({count:wa.B.COUNT})],F1.prototype,"output",void 0),(0,Je._)([(0,Rn.o)({count:wa.a.COUNT})],F1.prototype,"baseOpacityMode",void 0),(0,Je._)([(0,Rn.o)()],F1.prototype,"premultipliedSource",void 0);class NT{constructor(v,O,A,j,te,pe){this.texture=v,this.type=O,v.retain(),this.offsetAndScale=(0,Ao.f)(A.offset[0],A.offset[1],A.scale,A.scale),this.opacities=(0,br.f)(j,pe,te)}destroy(){this.texture.release()}}var Zf=T(62449),Hc=T(31478),D8=T(12225);Object.freeze(Object.defineProperty({__proto__:null,create:function mp(){return[1,0,0,1,0,0]},clone:function x8(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]},fromValues:function S8(d,v,O,A,j,te){return[d,v,O,A,j,te]},createView:function A8(d,v){return new Float64Array(d,v,6)}},Symbol.toStringTag,{value:"Module"}));var kf=T(49966),WT=T(75957);Math;function VT(d,v){return v.type?(0,Yi.a)(d,v.x,v.y):(0,Yi.c)(d,v)}function h_(d,v){const O=d.targetGeometry,A=v.targetGeometry;return O.x=A.x,O.y=A.y,O.spatialReference=A.spatialReference,d.scale=v.scale,d.rotation=v.rotation,d}const I8=function(){const d=(0,po.a)();return function(v,O,A){const j=O.targetGeometry;VT(d,j);const te=.5*$f(O);return v.xmin=d[0]-te*A[0],v.ymin=d[1]-te*A[1],v.xmax=d[0]+te*A[0],v.ymax=d[1]+te*A[1],v.spatialReference=j.spatialReference,v}}(),Gx=function(){const d=(0,po.a)();return function(v,O,A){return(0,Yi.k)(v,function N8(d,v){return(0,Yi.f)(d,v,.5)}(v,O),function R8(d,v,O){return O?(0,Yi.a)(d,.5*(v[0]-O.right+O.left),.5*(v[1]-O.bottom+O.top)):(0,Yi.f)(d,v,.5)}(d,O,A))}}();!function(){const d=[1,0,0,1,0,0],v=(0,po.a)()}();function $f(d){return d.scale*function j8(d){return(0,at.pC)(d)&&(0,cd.JY)(d.spatialReference)?1/(39.37*function Hx(d){return(0,sT.c9)(d)}(d.spatialReference)*96):1}(d.targetGeometry)}function KT(d){return(0,A1.t)(d.rotation)||0}const YT=function(){const d=(0,po.a)(),v=(0,po.a)(),O=(0,po.a)();return function(A,j,te,pe,be,Re){return(0,Yi.n)(d,j),(0,Yi.f)(v,te,.5*Re),(0,Yi.a)(O,1/pe*Re,-1/pe*Re),(0,Hc.a)(A,v),be&&(0,Hc.r)(A,A,be),(0,Hc.s)(A,A,O),(0,Hc.t)(A,A,d),A}}(),ZT=function(){const d=(0,po.a)();return function(v,O,A,j){const te=$f(O),pe=KT(O);return VT(d,O.targetGeometry),YT(v,d,A,te,pe,j)}}(),W8=function(){const d=(0,po.a)();return function(v,O,A,j){const te=$f(O);return VT(d,O.targetGeometry),YT(v,d,A,te,0,j)}}();(0,po.a)(),(0,po.a)(),(0,po.a)(),(0,po.a)();(function(){const d=(0,po.a)()})(),function(){const d=(0,po.a)()}();const Kx=((0,po.a)(),(0,po.a)(),function(){const d=[1,0,0,1,0,0];return function(v,O,A,j){return(0,Yi.t)(v,O,function U8(d,v,O,A){return ZT(d,v,O,A),(0,Hc.b)(d,d)}(d,A,j,1))}}()),Yx=function(){const d=[1,0,0,1,0,0];return function(v,O,A,j){return(0,Yi.t)(v,O,ZT(d,A,j,1))}}(),kT=function(){const d=(0,po.a)(),v=[1,0,0,1,0,0];return function(O,A,j){h_(O,A);const te=$f(A),pe=O.targetGeometry;return(0,Hc.c)(v,KT(A)),(0,Hc.s)(v,v,(0,po.f)(te,te)),(0,Yi.t)(d,j,v),pe.x+=d[0],pe.y+=d[1],O}}();var $T;const __=[0,0];let gp=$T=class extends nu.wq{constructor(d){super(d),this._viewpoint2D={center:(0,po.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new jc.Z,this.id=0,this.inverseTransform=[1,0,0,1,0,0],this.resolution=0,this.rotation=0,this.scale=0,this.transform=[1,0,0,1,0,0],this.transformNoRotation=[1,0,0,1,0,0],this.displayMat3=(0,kf.c)(),this.displayViewMat3=(0,kf.c)(),this.viewMat3=(0,kf.c)(),this.viewMat2d=(0,D8.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(d){this._set("pixelRatio",d),this._update()}set size(d){this._set("size",d),this._update()}set viewpoint(d){if(d){const v=this._viewpoint2D,O=d.targetGeometry;v.center[0]=O.x,v.center[1]=O.y,v.rotation=d.rotation,v.scale=d.scale,v.spatialReference=O.spatialReference}this._update()}copy(d){const v=this.size,O=this.viewpoint;return O&&v?(this.viewpoint=h_(O,d.viewpoint),this._set("size",(0,Yi.c)(v,d.size))):(this.viewpoint=d.viewpoint.clone(),this._set("size",[d.size[0],d.size[1]])),this._set("pixelRatio",d.pixelRatio),this}clone(){return new $T({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(d,v,O){return(0,WT.lM)(v)?(0,Yi.t)(d,v,this.inverseTransform):(__[0]=v,__[1]=O,(0,Yi.t)(d,__,this.inverseTransform))}toScreen(d,v,O){return(0,WT.lM)(v)?(0,Yi.t)(d,v,this.transform):(__[0]=v,__[1]=O,(0,Yi.t)(d,__,this.transform))}toScreenNoRotation(d,v,O){return(0,WT.lM)(v)?(0,Yi.t)(d,v,this.transformNoRotation):(__[0]=v,__[1]=O,(0,Yi.t)(d,__,this.transformNoRotation))}getScreenTransform(d,v){const{center:O}=this._viewpoint2D,A=this._get("pixelRatio")||1,j=this._get("size");return YT(d,O,j,v,0,A),d}_update(){const{center:d,spatialReference:v,scale:O,rotation:A}=this._viewpoint2D,j=this._get("pixelRatio")||1,te=this._get("size"),pe=new Bd({targetGeometry:new Eo.Z(d[0],d[1],v),scale:O,rotation:A});if(this._set("viewpoint",pe),!te||!v||!O)return;this.resolution=$f(pe),this.rotation=A,this.scale=O,this.spatialReference=v,(0,Yi.c)(this.center,d),(0,Ta.s)(this.displayMat3,0!==te[0]?2/te[0]:0,0,0,0,0!==te[1]?-2/te[1]:0,0,-1,1,1);const Ge=(0,Ta.b)(this.viewMat3),tt=(0,_f.f)(te[0]/2,te[1]/2),ft=(0,_f.f)(-te[0]/2,-te[1]/2),yt=(0,A1.t)(A);(0,Ta.c)(Ge,Ge,tt),(0,Ta.r)(Ge,Ge,yt),(0,Ta.c)(Ge,Ge,ft),(0,Ta.m)(this.displayViewMat3,this.displayMat3,Ge);const It=(0,Hc.a)(this.viewMat2d,tt);return(0,Hc.r)(It,It,yt),(0,Hc.t)(It,It,ft),I8(this.extent,pe,te),ZT(this.transform,pe,te,j),(0,Hc.b)(this.inverseTransform,this.transform),W8(this.transformNoRotation,pe,te,j),this.worldScreenWidth=function z8(d,v){return Math.round(function V8(d){const v=(0,cd.C5)(d);return v?v.valid[1]-v.valid[0]:0}(d)/v)}(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],gp.prototype,"id",void 0),(0,Je._)([(0,ht.Cb)({value:1,json:{write:!0}})],gp.prototype,"pixelRatio",null),(0,Je._)([(0,ht.Cb)({json:{write:!0}})],gp.prototype,"size",null),(0,Je._)([(0,ht.Cb)()],gp.prototype,"spatialReference",void 0),(0,Je._)([(0,ht.Cb)({type:Bd,json:{write:!0}})],gp.prototype,"viewpoint",null),gp=$T=(0,Je._)([(0,Ds.j)("esri.views.2d.ViewState")],gp);const Y8=gp;class k8{constructor(){this._renderParams={context:null,drawPhase:1,state:new Y8({viewpoint:new Bd({targetGeometry:new Eo.Z(0,0),scale:1,rotation:0}),size:[256,256]}),stationary:!0,pixelRatio:1,displayLevel:-1,requiredLevel:-1,globalOpacity:1,renderPass:"background",styleLayer:null,styleLayerUID:-1,painter:null,glyphMosaic:null,spriteMosaic:null,profiler:null,renderingOptions:null,requestRender:null,deltaTime:-1,timeline:null,time:0,hasClipping:!1,blendMode:null,dataUploadCounter:0,effects:null,inFadeTransition:!1,requireFBO:!1}}dispose(){this._renderParams=null}render(v,O,A,j,te,pe,be,Re,Ge,tt){const ft=pe.adjustLevel(O[0]),yt=this._renderParams;yt.context=v,yt.painter=j,yt.glyphMosaic=j.glyphMosaic,yt.spriteMosaic=j.spriteMosaic,yt.pixelRatio=tt,yt.displayLevel=ft,yt.requiredLevel=ft;const It=pe.getScale(O[0]),[Nt,Rt]=pe.getShift(O,be*It),Jt=.125*be*It/Ge,jt=A.transforms.dvs;jt[0]=Jt,jt[4]=-Jt,jt[6]=-1-Nt-Re[0]*be*2,jt[7]=1+Rt+(1-Re[1])*be*2-2,yt.state.size[0]=Ge,yt.state.size[1]=Ge,A.stage||A.attachWithContext(v),A.triangleCount=0,j.drawTile(yt,A,te)}}var $8=T(44796),Yd=T(87633);class W1 extends Ka.A{initializeProgram(v){const O=W1.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.if)(Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK})}}W1.shader=new Ga.J($8.R,()=>T.e(9903).then(T.bind(T,89903)));class Jf extends FT{constructor(){super(...arguments),this.colorizerType=Zf.U.Stretch,this.stretchType=Zf.H.Noop,this.tileBlendInput=Yd.R.LayerOnly,this.baseOpacityMode=wa.a.One,this.applyColormap=!0}}(0,Je._)([(0,Rn.o)({count:Zf.U.COUNT})],Jf.prototype,"colorizerType",void 0),(0,Je._)([(0,Rn.o)({count:Zf.H.COUNT})],Jf.prototype,"stretchType",void 0),(0,Je._)([(0,Rn.o)({count:Yd.R.COUNT})],Jf.prototype,"tileBlendInput",void 0),(0,Je._)([(0,Rn.o)({count:wa.a.COUNT})],Jf.prototype,"baseOpacityMode",void 0),(0,Je._)([(0,Rn.o)()],Jf.prototype,"applyColormap",void 0);class Zx{constructor(v){this._rctx=v,this._pools=new Map}acquire(v){return this._getPool(v).acquire()}clear(){this._pools.forEach(v=>v.destroy()),this._pools.clear()}_getPool(v){let O=this._pools.get(v);if(!O){const A=kx.bind(kx,this._rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.DEPTH_RENDER_BUFFER,width:v,height:v},j=>this._getPool(j.width).release(j));O=new Gd.Z(A,null,()=>{}),this._pools.set(v,O)}return O}}class kx extends nc.X{constructor(v,O,A){super(v,O),this.release=()=>A(this)}}const J8=vo.Z.getLogger("esri.views.3d.terrain");class X8{constructor(v,O){this._rctx=v,this._techniqueRepository=O,this._fboPools=[],this._doubleBufferFbo=[],this._vectorTileHelper=new k8,this._bindParameters=new NM.p(null,null,null),this._blendLayersTechniqueConfig=new F1,this._poolToWrite=0,this._vaoQuad=(0,Ul.ow)(this._rctx,tg.Bn),this._fboPools.push(new Zx(this._rctx)),this._fboPools.push(new Zx(this._rctx))}dispose(){this._fboPools.forEach(v=>{v.clear(),v=null}),this._fboPools=null,this._doubleBufferFbo.forEach(v=>(0,at.O3)(v)),this._vaoQuad=(0,at.O3)(this._vaoQuad),this._vectorTileHelper=(0,at.O3)(this._vectorTileHelper),this._backgroundTechnique=(0,at.RY)(this._backgroundTechnique),this._applyOpacityTechnique=(0,at.RY)(this._applyOpacityTechnique),this._blendLayersTechnique=(0,at.RY)(this._blendLayersTechnique)}_getBlendLayersTechnique(v,O,A,j=!1){return this._blendLayersTechniqueConfig.output=O,this._blendLayersTechniqueConfig.blendMode=v,this._blendLayersTechniqueConfig.baseOpacityMode=A?O===wa.B.Composite?wa.a.OnBaseLayer:wa.a.OnBackground:wa.a.One,this._blendLayersTechniqueConfig.premultipliedSource=j,this._blendLayersTechnique=this._techniqueRepository.releaseAndAcquire(j1,this._blendLayersTechniqueConfig,this._blendLayersTechnique),this._blendLayersTechnique}drawBackground(v,O){const A=this._getBlendLayersTechnique(Yu.iM.Normal,O,!1),j=this._rctx.bindTechnique(A,v,this._bindParameters);this._render(j)}_render(v){this._rctx.bindVAO(this._vaoQuad),v.assertCompatibleVertexAttributeLocations(this._vaoQuad),this._rctx.drawArrays(Gt.MX.TRIANGLE_STRIP,0,(0,ll._V)(this._vaoQuad,"geometry"))}drawRasterData(v,O,A=!1){if((0,at.Wi)(O.texture))return;const j=O.baseOpacity<1;O.blendMode!==Yu.iM.Normal||j||A?(O.fboTexture=this._currentFBO.colorTexture,this._switchPool(this._currentFBO.width)):O.fboTexture=null;const te=this._getBlendLayersTechnique(O.blendMode,v,j,A),pe=this._rctx.bindTechnique(te,O,this._bindParameters);this._render(pe)}drawImageryTileData(v,O,A){const j=v.sourceLayerInfo.data;if(!j.source)return;v.tile.surface.layerViewByIndex(v.layerIndex,Bn.MAP).ensureSymbolizerParameters(j);const te=A.baseOpacity<1;A.blendMode!==Yu.iM.Normal||te?(A.fboTexture=this._currentFBO.colorTexture,this._switchPool(this._currentFBO.width)):A.fboTexture=null;const pe=this._getRasterColorizerTechnique(j,O,A.blendMode,te),be=this._rctx.bindTechnique(pe);if(!j.bind(this._rctx))return;j.opacity=A.opacity;const Re=j.getUniforms();Re.scale=v.scale,Re.offset=v.offset,Re.backgroundColor=A.backgroundColor,Re.fboTexture=A.fboTexture,Re.baseOpacity=A.baseOpacity,pe.bindPass(Re,null),this._render(be)}_getRasterColorizerTechnique(v,O,A,j){const te=v.symbolizerParameters,pe=["stretch","lut","hillshade"].indexOf(te.type);return(0,at.Wi)(this._rasterColorizerConfig)&&(this._rasterColorizerConfig=new Jf,this._rctx.gl.getExtension("WEBGL_color_buffer_float"),this._rctx.gl.getExtension("OES_texture_float")),this._rasterColorizerConfig.tileBlendInput=O===wa.B.ColorComposite?Yd.R.ColorComposite:O===wa.B.GridComposite?Yd.R.GridComposite:Yd.R.LayerOnly,this._rasterColorizerConfig.blendMode=A,this._rasterColorizerConfig.baseOpacityMode=j?O===wa.B.Composite?wa.a.OnBaseLayer:wa.a.OnBackground:wa.a.One,this._rasterColorizerConfig.colorizerType=pe,this._rasterColorizerConfig.applyColormap=!!te.colormap,this._rasterColorizerConfig.stretchType=v.hasStretchTypeNone()?Zf.H.Noop:Zf.H.PerBand,this._rasterColorizerTechnique=this._techniqueRepository.releaseAndAcquire(W1,this._rasterColorizerConfig,this._rasterColorizerTechnique),this._rasterColorizerTechnique}drawVectorData(v,O,A,j,te,pe,be){const Re=this._rctx,Ge=O.sourceLayerInfo.data,tt=O.tile.surface.layerViewByIndex(O.layerIndex,Bn.MAP),ft=v.baseOpacity<1||v.opacity<1||v.blendMode!==Yu.iM.Normal||be!==wa.B.Composite;let yt;this._getBlendLayersTechnique(v.blendMode,be,v.baseOpacity<1,ft).bindPipelineState(Re),ft?(yt=this._acquire(te),Re.bindFramebuffer(yt),Re.setClearColor(0,0,0,0),Re.clearSafe(Gt.lk.COLOR_BUFFER_BIT|Gt.lk.DEPTH_BUFFER_BIT)):pe&&Re.clearSafe(Gt.lk.DEPTH_BUFFER_BIT);try{this._vectorTileHelper.render(Re,O.sourceLod,Ge,tt.painter,tt.layer.styleRepository,tt.schemaHelper,Math.round(1/O.scale),O.offset,j,A)}catch(It){J8.warnOnce("A render call containing vector tiles did not resolve correctly.",It)}return!(0,at.pC)(yt)||(Re.bindFramebuffer(this._currentFBO),v.texture=yt.colorTexture,v.offset=po.Z,v.scale=1,this.drawRasterData(be,v,ft),yt.release(),pe)}copyFBOToTexture(v){const O=this._rctx,A=O.bindTexture(v.texture,Va.x.TEXTURE_UNIT_FOR_UPDATES),j=v.descriptor;O.gl.copyTexImage2D(Gt.No.TEXTURE_2D,0,j.pixelFormat,0,0,j.width,j.height,0),v.generateMipmap(),O.bindTexture(A,Va.x.TEXTURE_UNIT_FOR_UPDATES)}_initFBO(v,O){this._rctx.bindFramebuffer(v),this._rctx.setViewport(0,0,O,O),this._rctx.setClearColor(0,0,0,0),this._rctx.setClearDepth(1),this._rctx.clearSafe(Gt.lk.COLOR_BUFFER_BIT|Gt.lk.DEPTH_BUFFER_BIT)}_acquire(v){return this._fboPools[this._poolToWrite].acquire(v)}bindPool(v,O){this._poolToWrite=v,null==this._doubleBufferFbo[v]&&(this._doubleBufferFbo[v]=this._acquire(O),this._initFBO(this._doubleBufferFbo[v],O))}_switchPool(v){this._releaseCurrentFBO(),this._doubleBufferFbo[this._poolToWrite]=null,this._poolToWrite=0===this._poolToWrite?1:0,this.bindPool(this._poolToWrite,v)}get _currentFBO(){return this._doubleBufferFbo[this._poolToWrite]}_releaseCurrentFBO(){this._doubleBufferFbo[this._poolToWrite].release(),this._doubleBufferFbo[this._poolToWrite]=null}releasePool(){this._rctx.bindFramebuffer(null),this._releaseCurrentFBO()}cleanupFBOPool(v,O){v===this._lastPixelRatio&&O===this._lastNumLayers||(this._fboPools.forEach(A=>A.clear()),this._lastPixelRatio=v,this._lastNumLayers=O)}}class Q8{constructor(v,O,A){this._rctx=v,this.tileSize=O,this._techniqueRepository=A,this._passParameters=new P8,this._backgroundTexture=null,this._backgroundColor=null,this._backgroundDirty=!1,this._blackTex=null,this._numTexturedLayer=0,this._maxAnisotropy=this._rctx.parameters.maxMaxAnisotropy,this._composition=new X8(this._rctx,this._techniqueRepository),this._blackTex=new Vf((0,Ul.YO)(this._rctx,[0,0,0,1])),this._ensureBackgroundTexture(this.tileSize)}dispose(){this._composition=(0,at.O3)(this._composition),this._backgroundTexture=(0,at.RY)(this._backgroundTexture),this._blackTex=(0,at.RY)(this._blackTex)}get backgroundIsGrid(){return(0,at.Wi)(this._backgroundColor)}get backgroundColor(){return this._backgroundColor}updateTileTexture(v,O){if(!v.renderData)return;const A=v.surface,j=A.baseOpacity;this._numTexturedLayer=0;let te=0,pe=this.tileSize,be=!1;const Re=A.view.state.pixelRatio;let Ge=!1;const tt=v.layerInfo[Bn.MAP];let ft=tt.length,yt=0;for(;yt<tt.length;yt++){const Rt=A.layerViewByIndex(yt,Bn.MAP),Jt=Rt.fullOpacity;if(XT[yt]=Jt,(0,lu.sy)(Rt.layer)&&ft>=tt.length&&(ft=yt),0===Jt){tt[yt].pendingUpdates&=~($i.TEXTURE_NOFADING&$i.TEXTURE_FADING);continue}++te;const jt=JT(v,yt);if(jt){if(tt[yt].pendingUpdates&=~($i.TEXTURE_NOFADING&$i.TEXTURE_FADING),(0,ti.TK)(Rt)){const ir=(0,ti.CY)(Rt.layer.parent)?"normal":Rt.layer.blendMode;$x[yt]=ir;const or="normal"!==ir;or&&(Ge=or,be=!1)}(0,ti.Q)(Rt)?pe=Math.max(pe,this.tileSize*Re):1===j&&1===Jt&&(Rt.isOpaque||this._dataToTexture(jt)&&jt.sourceLayerInfo.data.descriptor.isOpaque)&&(be=!0),++this._numTexturedLayer}}this._composition.cleanupFBOPool(Re,tt.length),pe=function q8(d){const v=(0,cs.Sf)(d),O=v*v,A=d*d;if(O===A)return d;const j=v/2;return O-A<A-j*j?v:j}(pe);const It=pe/this.tileSize,Nt=yt-1;this._ensureBackgroundTexture(this.tileSize),0!==this._numTexturedLayer?1===this._numTexturedLayer&&!Ge&&this._useLayerTexture(v,Nt,ft,XT[Nt])||this._composeMapLayers(v,O,Nt,ft,XT,$x,pe,It,!be||Ge):this._useBackgroundTexture(v,te)}_ensureBackgroundTexture(v){(0,at.Wi)(this._backgroundTexture)&&(this._backgroundTexture=this._buildTexture(v),this._backgroundDirty=!0),this._backgroundDirty&&(this._composition.bindPool(0,v),this._passParameters.offset=po.Z,this._passParameters.scale=1,this._passParameters.opacity=1,this._passParameters.blendMode=Yu.iM.Normal,(0,at.pC)(this.backgroundColor)&&(this._passParameters.backgroundColor=this.backgroundColor),this._composition.drawBackground(this._passParameters,(0,at.pC)(this.backgroundColor)?wa.B.ColorOnly:wa.B.GridOnly),this._composition.copyFBOToTexture(this._backgroundTexture),this._composition.releasePool(),this._backgroundDirty=!1)}_useBackgroundTexture(v,O){let A=a_.Immediate;(v.surface.view.layerViewManager.updating||O>0)&&(A=a_.Delayed),this._backgroundTexture&&(0,at.Wi)(v.renderData.textureReference)&&(A=a_.Immediate),v.renderData.setTextureReference((0,at.pC)(this._backgroundTexture)?new NT(this._backgroundTexture,en.Ns.FADING,Jx,v.surface.baseOpacity,1,0):null,A)}_useLayerTexture(v,O,A,j){const te=O<A,pe=te?1:v.surface.baseOpacity,be=te?v.surface.baseOpacity:1,Re=JT(v,O);return!!this._dataToTexture(Re)&&(v.renderData.setTextureReference(new NT(Re.sourceLayerInfo.data,en.Ns.FADING,Re,pe,j,be)),!0)}_composeMapLayers(v,O,A,j,te,pe,be,Re,Ge){this._composition.bindPool(0,be);const tt=v.surface.baseOpacity;let ft=!1,yt=Gt.cw.LINEAR_MIPMAP_LINEAR,It=!1,Nt=0;for(let Jt=A;Jt>=0;Jt--){const jt=JT(v,Jt);if(!jt||0===te[Jt])continue;const ir=Jt<j&&tt<1&&!ft;this._passParameters.baseOpacity=ir?tt:1,ir&&(ft=!0);const or=0===Nt,pr=Ge&&or?this.backgroundIsGrid?wa.B.GridComposite:wa.B.ColorComposite:wa.B.Composite;(0,ti.Ke)(jt)?(this._passParameters.opacity=te[Jt],this._passParameters.blendMode=Yu.pU[pe[Jt]],It=this._composition.drawVectorData(this._passParameters,jt,Re,this.tileSize,be,It,pr)):(0,ti.Ay)(jt)?(this._passParameters.opacity=te[Jt],this._passParameters.blendMode=Yu.pU[pe[Jt]],this._composition.drawImageryTileData(jt,pr,this._passParameters),this._hasNearestInterpolation(jt)&&(yt=Gt.cw.NEAREST)):this._dataToTexture(jt)&&(this._passParameters.texture=jt.sourceLayerInfo.data.texture,this._passParameters.offset=jt.offset,this._passParameters.scale=jt.scale,this._passParameters.opacity=te[Jt],this._passParameters.blendMode=Yu.pU[pe[Jt]],this._composition.drawRasterData(pr,this._passParameters)),Nt++}const Rt=v.renderData.ensureTexture(be,()=>this._buildTexture(be,yt));this._composition.copyFBOToTexture(Rt),this._composition.releasePool(),v.renderData.setTextureReference(new NT(Rt,O,Jx,ft?1:tt,1,0))}_hasNearestInterpolation(v){const O=v.sourceLayerInfo.data;return!!O.source&&"nearest"===O.interpolation}_dataToTexture(v){return(0,ti.L4)(v)&&this._rasterDataToTexture(v),(0,ti.z7)(v)}_rasterDataToTexture(v){const O=v.sourceLayerInfo;O.data=this._buildTexture(O.data),v.tile.setMemoryDirty()}setBackground(v){this._backgroundColor!==v&&(this._backgroundColor=v,this._backgroundDirty=!0)}_buildTexture(v,O=Gt.cw.LINEAR_MIPMAP_LINEAR){if((0,at.Wi)(v))return null;const A={target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:O,maxAnisotropy:this._maxAnisotropy,flipped:!0,hasMipmap:!0},j=this._rctx;let te;if("number"==typeof v)A.width=A.height=v,te=new Vf(new Va.x(j,A));else if(v instanceof ET.nN)A.isOpaque=v.isOpaque,te=new Vf(new Va.x(j,A,v.image)),v.release();else try{te=new Vf(new Va.x(j,A,v))}catch{te=new Vf((0,Ul.l_)(j)),console.warn("TileRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.")}const pe=j.bindTexture(te.texture,Va.x.TEXTURE_UNIT_FOR_UPDATES);return te.generateMipmap(),j.bindTexture(pe,Va.x.TEXTURE_UNIT_FOR_UPDATES),te}get test(){return{backgroundTexture:this._backgroundTexture}}}function JT(d,v){Zu.layerIndex=v;const O=d.layerInfo[Bn.MAP][v];if((0,at.pC)(O.data))return(0,Yi.a)(Zu.offset,0,0),Zu.tile=d,Zu.scale=1,Zu.sourceLod=d.lij,Zu.sourceLayerInfo=O,Zu;const A=O.upsampleInfo;if((0,at.pC)(A)){const j=A.tile.layerInfo[Bn.MAP][v];return Zu.tile=A.tile,(0,Yi.c)(Zu.offset,A.offset),Zu.scale=A.scale,Zu.sourceLod=A.tile.lij,Zu.sourceLayerInfo=j,Zu}return null}const XT=new Array,$x=new Array,Zu={tile:null,sourceLayerInfo:null,sourceLod:null,offset:[0,0],scale:1,layerIndex:0},Jx={offset:[0,0],scale:1},$g=1e-6;class Qx{constructor(v,O,A,j,te){this.aabb=v,this.axis=O,this.d=A,this.midStartIndex=j,this.rightStartIndex=te}}let qx=(()=>{class d{constructor(O,A,j,te){this.globalTriangleVertexIndices=O,this.firstTriangleIndex=A,this.positionAttribute=te,this.rayDirection=(0,br.c)(),this.bspNodeTree=new Array,this.vertexPositionBuffer=te.data,this.vertexPositionStride=te.stride;const pe=j-A,be=pe<=eS?new Uint16Array(pe):new Uint32Array(pe);this.indices=be;for(let Re=0;Re<pe;++Re)be[Re]=Re;{const Re=function a9(d,v,O,A,j){const te=O-v,pe=new Float32Array(6*te);for(let be=0;be<te;++be){const Re=3*(be+v),Ge=d[Re+0]*j,tt=d[Re+1]*j,ft=d[Re+2]*j;for(let yt=0;yt<3;++yt){const It=A[Ge+yt],Nt=A[tt+yt],Rt=A[ft+yt];pe[6*be+yt]=Math.min(It,Nt,Rt),pe[6*be+3+yt]=Math.max(It,Nt,Rt)}}return pe}(O,A,j,te.data,te.stride),Ge=(0,cs.uZ)(Math.log2(pe/40),2,10),tt=(ft,yt,It)=>{const Nt=function n9(d,v,O,A){if(A<=O)return(0,pa.al)(NaN,NaN,NaN,NaN,NaN,NaN);{const j=6*d[O];for(let te=0;te<3;++te)Xf[te]=v[j+0+te],Qf[te]=v[j+3+te]}for(let j=O+1;j<A;++j){const te=6*d[j];for(let pe=0;pe<3;++pe)Xf[pe]=Math.min(Xf[pe],v[te+0+pe]),Qf[pe]=Math.max(Qf[pe],v[te+3+pe])}return(0,pa.al)(Xf[0],Xf[1],Xf[2],Qf[0],Qf[1],Qf[2])}(be,Re,ft,yt),Rt=yt-ft;if(Rt<=40){const Lr=new Qx(Nt,void 0,0,ft,yt);return this.bspNodeTree.push(Lr),Lr}const{axis:Jt,midValue:jt}=function o9(d){const v=d[3]-d[0],O=d[4]-d[1],A=d[5]-d[2],j=v>O?v>A?0:O>A?1:2:O>A?1:A>v?2:0;return{axis:j,midValue:(d[j]+d[j+3])/2}}(Nt),ir=function i9(d,v,O,A,j,te){let pe=O,be=A;for(;pe<be;){const Ge=d[pe];v[6*Ge+j+3]<=te?++pe:(--be,d[pe]=d[be],d[be]=Ge)}let Re=pe;for(be=A;Re<be;){const Ge=d[be-1];v[6*Ge+j]>=te?--be:(d[be-1]=d[Re],d[Re]=Ge,++Re)}return{next:pe,mid:Re}}(be,Re,ft,yt,Jt,jt),or=(Lr,Br)=>{if(It>Ge)return;const gs=Br-Lr;return gs<40||gs>=.8*Rt?void 0:tt(Lr,Br,It+1)},pr=new Qx(Nt,Jt,jt,ir.next,ir.mid);return this.bspNodeTree.push(pr),pr.leftNode=or(ft,ir.next),pr.rightNode=or(ir.mid,yt),pr};tt(0,pe,0),this.triangleVertexIndices=function l9(d,v,O,A){const j=A-O;let te=0;for(let be=O;be<A;++be)for(let Re=0;Re<3;++Re)te=Math.max(v[3*be+Re],te);const pe=te<=eS?new Uint16Array(3*j):new Uint32Array(3*j);for(let be=0;be<j;++be){const Re=3*(d[be]+O);for(let Ge=0;Ge<3;++Ge)pe[3*be+Ge]=v[Re+Ge]}return pe}(be,O,A,j)}}intersectRayTriangleRange(O,A){{if(O>=A)return;const j=this.triangleVertexIndices,te=this.positionAttribute.data,pe=this.positionAttribute.stride,be=this.rayOrigin,Re=be[0],Ge=be[1],tt=be[2],ft=this.rayDirection,yt=ft[0],It=ft[1],Nt=ft[2];for(let Rt=O,Jt=3*O;Rt<A;++Rt){const jt=j[Jt]*pe,ir=te[jt],or=te[jt+1],pr=te[jt+2],Lr=j[Jt+1]*pe,Us=j[Jt+2]*pe;Jt+=3;const Ei=te[Lr]-ir,ts=te[Lr+1]-or,$s=te[Lr+2]-pr,Ms=te[Us]-ir,ms=te[Us+1]-or,ws=te[Us+2]-pr,Ss=It*ws-ms*Nt,Fs=Nt*Ms-ws*yt,ci=yt*ms-Ms*It,Xs=Ei*Ss+ts*Fs+$s*ci;if(Math.abs(Xs)<=Number.EPSILON)continue;const xs=Re-ir,Js=Ge-or,xi=tt-pr,Ii=xs*Ss+Js*Fs+xi*ci;if(Xs>0){if(Ii<0||Ii>Xs)continue}else if(Ii>0||Ii<Xs)continue;const Si=Js*$s-ts*xi,Bi=xi*Ei-$s*xs,Bs=xs*ts-Ei*Js,mi=yt*Si+It*Bi+Nt*Bs;if(Xs>0){if(mi<0||Ii+mi>Xs)continue}else if(mi>0||Ii+mi<Xs)continue;const Ni=(Ms*Si+ms*Bi+ws*Bs)/Xs;if(Ni>=0){const js=this.indices[Rt]+this.firstTriangleIndex,In=(0,w0.Mw)(Ei,ts,$s,Ms,ms,ws,s9);this.callback(Ni,In,js,!1)}}}d.numFacesTested+=A-O}intersectRay(O,A){d.numFacesTested=0;const j=(0,br.f)(O.r0[0],O.r0[1],O.r0[2]),te=(0,br.f)(O.r1[0],O.r1[1],O.r1[2]),pe=te[0]-j[0],be=te[1]-j[1],Re=te[2]-j[2];if(pe*pe+be*be+Re*Re<$g)return;this.rayOrigin=j;const Ge=this.rayDirection;Ge[0]=pe,Ge[1]=be,Ge[2]=Re;const tt=this.triangleVertexIndices.length/3;this.callback=A,this.intersectRayBSP(this.bspNodeTree[0],0,tt)}intersectRayBSP(O,A,j){const te=this.rayOrigin,pe=this.rayDirection;if(!function r9(d,v,O){const A=v,j=O;let te=0,pe=1/0;for(let be=0;be<3;++be){{const Re=d[be];if(A[be]<Re){if(j[be]<=$g)return!1;te=Math.max(te,(Re-A[be])/j[be])}else j[be]<=-$g&&(pe=Math.min(pe,(Re-A[be])/j[be]));if(te>pe)return!1}{const Re=d[be+3];if(A[be]>Re){if(j[be]>=-$g)return!1;te=Math.max(te,(Re-A[be])/j[be])}else j[be]>=$g&&(pe=Math.min(pe,(Re-A[be])/j[be]));if(te>pe)return!1}}return!0}(O.aabb,te,pe))return;const be=O.axis,Re=O.d;if(te[be]<Re||pe[be]<0){const Ge=A,tt=O.midStartIndex;if(Ge<tt){const ft=O.leftNode;void 0!==ft?this.intersectRayBSP(ft,Ge,tt):this.intersectRayTriangleRange(Ge,tt)}}if(this.intersectRayTriangleRange(O.midStartIndex,O.rightStartIndex),te[be]>Re||pe[be]>0){const Ge=O.rightStartIndex,tt=j;if(Ge<tt){const ft=O.rightNode;void 0!==ft?this.intersectRayBSP(ft,Ge,tt):this.intersectRayTriangleRange(Ge,tt)}}}get estimatedMemoryUsage(){return this.triangleVertexIndices.byteLength+this.indices.byteLength}}return d.numFacesTested=0,d})();const s9=(0,br.c)(),Xf=[1/0,1/0,1/0],Qf=[-1/0,-1/0,-1/0],eS=65535;var Oc=T(6945),Jg=T(30249),tS=T(73693),vu=T(40723),rS=T(7949),V1=T(64127);class z1 extends Ka.A{constructor(){super(...arguments),this.useStencil=!1}initializeConfiguration(v,O){O.spherical=v.viewingMode===dn.JY.Global}initializeProgram(v){const O=z1.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return this._stencilPipelineState=this._createPipeline(!0),this._createPipeline(!1)}_createPipeline(v){const O=this.configuration,A=O.backfaceCullingEnabled&&!O.renderOccluded;return(0,Ti.sm)({blending:O.renderOccluded?(0,Ti.if)(Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA):null,culling:A&&Ti.Rd,depthTest:!O.renderOccluded&&{func:Gt.wb.LESS},depthWrite:!O.renderOccluded&&Ti.LZ,colorWrite:Ti.BK,stencilTest:v?(0,V1.iV)(Gi.hU.IntegratedMeshMaskExcluded):null})}getPipelineState(v,O){return this.useStencil?this._stencilPipelineState:super.getPipelineState(v,O)}}z1.shader=new Ga.J(tS.a,()=>T.e(3277).then(T.bind(T,13277)));var Xg=T(92724),sS=T(41528);class Ra extends sS.W{constructor(){super(...arguments),this.output=Oc.H.Color,this.overlayMode=Jg.gT.Disabled,this.tileBlendInput=Yd.R.LayerOnly,this.spherical=!1,this.atmosphere=!1,this.receiveShadows=!1,this.hasSlicePlane=!1,this.backfaceCullingEnabled=!1,this.stencilEnabled=!1,this.textureFadingEnabled=!1,this.renderOccluded=!1,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1,this.tileBorders=!1,this.screenSizePerspective=!1,this.receiveAmbientOcclusion=!1,this.shading=(0,al.Z)("enable-feature:terrain-shading")}}(0,Je._)([(0,Rn.o)({count:Oc.H.COUNT})],Ra.prototype,"output",void 0),(0,Je._)([(0,Rn.o)({count:Jg.gT.COUNT})],Ra.prototype,"overlayMode",void 0),(0,Je._)([(0,Rn.o)({count:Yd.R.COUNT})],Ra.prototype,"tileBlendInput",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"spherical",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"atmosphere",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"receiveShadows",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"hasSlicePlane",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"backfaceCullingEnabled",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"stencilEnabled",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"textureFadingEnabled",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"renderOccluded",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"hasScreenSpaceReflections",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"hasCloudsReflections",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"tileBorders",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"screenSizePerspective",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"receiveAmbientOcclusion",void 0),(0,Je._)([(0,Rn.o)()],Ra.prototype,"shading",void 0),(0,Je._)([(0,Rn.o)({constValue:!0})],Ra.prototype,"isGround",void 0),(0,Je._)([(0,Rn.o)({constValue:Xg.f7.Disabled})],Ra.prototype,"pbrMode",void 0),(0,Je._)([(0,Rn.o)({constValue:!1})],Ra.prototype,"highStepCount",void 0),(0,Je._)([(0,Rn.o)({constValue:!1})],Ra.prototype,"useCustomDTRExponentForWater",void 0),(0,Je._)([(0,Rn.o)({constValue:!1})],Ra.prototype,"useFillLights",void 0);const eC=(0,pa.Ue)(),H1=(0,Ao.c)();let ku=class extends Li.Z{constructor(d){super(d),this.type=Ol.q7.TERRAIN,this.isGround=!0,this.tileSize=256,this._techniqueConfiguration=new Ra,this._passParameters=new tS.T,this.rctx=null,this._isTransparent=!1,this._scaleRangeQueries=new C8,this.renderDataPool=new Gd.Z(c_),this._patchGroups=new Map,this.patchGroupsDirty=!0,this.tileIterator=new mu.AA,this.highestVisibleLODTile=null,this.visible=!0,this._opaque=!0,this._velvetOverground=!0,this._castShadows=!0,this.emptyTex=null,this.tileRenderer=null,this.stencilEnabledLayerExtents=[],this.numTilesRendered=0,this.numTilesCulled=0,this.numOriginsRendered=0,this.needsHighlight=!1,this.renderOccludedFlags=vu.yD.Occlude}get isGlobal(){return this.stage.viewingMode===dn.JY.Global}get shadingEnabled(){return this._techniqueConfiguration?.shading}initialize(){this.stage.addRenderPlugin([mn.r.OPAQUE_TERRAIN,mn.r.TRANSPARENT_TERRAIN,mn.r.OCCLUDED_TERRAIN],this)}destroy(){this.stage.removeRenderPlugin(this),function UB(){DT.clear()}()}get canRender(){return this.visible&&!!this._rootTiles&&!this.renderingDisabled}set renderingDisabled(d){this._set("renderingDisabled",!!d),this.setNeedsRender()}set opaque(d){this._opaque!==d&&(this._opaque=d,this.setNeedsRender())}get opaque(){return this._opaque&&!this._techniqueConfiguration.hasSlicePlane}get needsLinearDepth(){return this.overlayRenderer.hasWater}set isTransparent(d){this._isTransparent!==d&&(this._isTransparent=d,this.setNeedsRender())}get isTransparent(){return this._isTransparent}get renderPatchBorders(){return!!this._techniqueConfiguration.tileBorders}set renderPatchBorders(d){this._techniqueConfiguration.tileBorders!==d&&(this._techniqueConfiguration.tileBorders=d,this.setNeedsRender(),this.notifyChange("renderPatchBorders"))}get cullBackFaces(){return this._techniqueConfiguration.backfaceCullingEnabled}set cullBackFaces(d){this._techniqueConfiguration.backfaceCullingEnabled!==d&&(this._techniqueConfiguration.backfaceCullingEnabled=d,this.notifyChange("cullBackFaces"),this.setNeedsRender())}set renderOrder(d){this._set("renderOrder",d),this.setNeedsRender()}set velvetOverground(d){this._velvetOverground!==d&&(this._velvetOverground=d,this.setNeedsRender())}get layerUid(){return Vu.cy}get slicePlaneEnabled(){return this._techniqueConfiguration.hasSlicePlane}set slicePlaneEnabled(d){this._techniqueConfiguration.hasSlicePlane!==d&&(this._techniqueConfiguration.hasSlicePlane=d,this.setNeedsRender())}set textureFadingEnabled(d){this._techniqueConfiguration.textureFadingEnabled!==d&&(this._techniqueConfiguration.textureFadingEnabled=d,this.setNeedsRender())}setDebugScreenSizePerspective(d){this._techniqueConfiguration.screenSizePerspective!==d&&(this._techniqueConfiguration.screenSizePerspective=d,this.setNeedsRender())}toggleShading(){this._techniqueConfiguration.shading=!this._techniqueConfiguration.shading,this.setNeedsRender()}setRootTiles(d){this._rootTiles=d,this.setNeedsRender()}setNeedsHighlight(d){this.needsHighlight=d,this.setNeedsRender()}setRenderOccludedOverlay(d){this.renderOccludedFlags=d?PT.Qi:vu.yD.Occlude,this.setNeedsRender()}setStencilEnabledLayerExtents(d){this.stencilEnabledLayerExtents=d,this.setNeedsRender()}setTileSize(d){this.tileSize=d,(0,at.pC)(this.tileRenderer)&&(this.tileRenderer.tileSize=d),this.setNeedsRender()}_prepareTileForLoading(d){d.renderData||(d.renderData=this.renderDataPool.acquire(),d.renderData.init(d),d.renderData.localOrigin=this._getLocalOriginOfTile(d))}loadTile(d){this._prepareTileForLoading(d),this.updateTileGeometry(d),this.updateTileTexture(d,$i.TEXTURE_FADING)}queryVisibleLevelRange(d,v,O,A){this._scaleRangeQueries.queryVisibleLevelRange(d,v,O,A),this.setNeedsRender()}updateTileTexture(d,v){(0,at.pC)(this.tileRenderer)&&(this.tileRenderer.updateTileTexture(d,v===$i.TEXTURE_FADING?en.Ns.FADING:en.Ns.UNFADED),this.setNeedsRender(),d.resetPendingUpdate(v))}updateTileGeometryState(d){this._prepareTileForLoading(d),d.renderData.updateGeometryStateAndPrepareForGeometryGeneration(this.wireframe)}updateTileGeometry(d){for(const v of d.layerInfo[Bn.ELEVATION])v.pendingUpdates&=~$i.GEOMETRY;d.resetPendingUpdate($i.GEOMETRY),d.renderData.updateGeometryIfChanged(this.rctx,this.wireframe)&&this.setNeedsRender()}unloadTile(d){const v=d.renderData;v&&(v.releaseGeometry(),this.renderDataPool.release(v),v.clear(),d.renderData=null,d.setMemoryDirty(),this.setNeedsRender())}_getLocalOriginOfTile(d){const O=Math.max(0,7*Math.floor((d.level-3)/7));if(this.isGlobal&&0===O)return br.Z;for(;d.parent&&d.level>O;)d=d.parent;return d.centerAtSeaLevel}setVisibility(d){this.visible=d,this.setNeedsRender()}getStats(){return{numTilesRendered:this.numTilesRendered,numTilesCulled:this.numTilesCulled,numOriginsRendered:this.numOriginsRendered}}set wireframe(d){this._get("wireframe")!==d&&(this._set("wireframe",d),this.allTiles.forAll(v=>{v.isLoaded&&(this.updateTileGeometry(v),v.updateNeighborsAfterGeometryChange())}),this.setNeedsRender())}setNeedsRender(d=Gi.Xx.UPDATE){this.patchGroupsDirty=!0,this._context.requestRender(d)}initializeRenderContext(d){this._context=d,this.rctx=d.renderContext.rctx,this._techniqueRepository=d.shaderTechniqueRepository,this.tileRenderer=new Q8(this.rctx,this.tileSize,this._techniqueRepository),this.updateTileBackground(),this.emptyTex=(0,Ul.l_)(this.rctx)}uninitializeRenderContext(){this.emptyTex=(0,at.O3)(this.emptyTex),this.tileRenderer=(0,at.O3)(this.tileRenderer)}intersect(d,v,O,A){if(!this._rootTiles||d.options.selectOpaqueTerrainOnly&&d.options.selectionMode&&!this._opaque)return;const j=d9,te=h9;(0,Et.b)(j,A,O),(0,Et.s)(te,1/j[0],1/j[1],1/j[2]);const pe=d.results.min,be=d.results.max,Re=d.results.ground,Ge=d.options.store===Ol.eC.MIN,tt=!!d.results.ground.target,ft=(0,Vu.lV)(d.verticalOffset),yt=d.tolerance;let It,Nt=Ge&&(0,at.pC)(pe.dist)?pe.dist:1/0;const Rt=jt=>{const ir=jt.renderData;if(!ir?.vao)return;const or=ir.geometryInfo;(0,pa.t8)(eC,or.boundingBox);const pr=ir.localOrigin;(0,at.pC)(ft)&&(ft.localOrigin=pr,ft.applyToAabb(eC));const Lr=eC;if(qf[0]=O[0]-pr[0],qf[1]=O[1]-pr[1],qf[2]=O[2]-pr[2],!(0,w0.Fw)(Lr,qf,te,yt,Nt))return;const Br=(Ei,ts,$s)=>{Ei.set(this.type,jt,ts,$s,ao.I),Nt=Ge&&(0,at.pC)(pe.dist)?pe.dist:1/0},gs=(Ei,ts)=>{if((0,at.pC)(ts)&&Ei>=0&&(d.options.backfacesTerrain||(0,Et.e)(ts,j)<0)&&(d.options.invisibleTerrain||!d.options.selectionMode||null==v||v(O,A,Ei))){if((null==Re.dist||Ei<Re.dist)&&Br(Re,Ei,ts),d.options.isFiltered)return;d.options.store===Ol.eC.ALL&&((0,at.Wi)(It)?(It=(0,oc.LP)(d.ray),Br(It,Ei,ts),d.results.all.push(It)):Ei<It.dist&&Br(It,Ei,ts)),(null==pe.dist||Ei<pe.dist)&&Br(pe,Ei,ts),d.options.store!==Ol.eC.MIN&&(null==be.dist||Ei>be.dist)&&Br(be,Ei,ts)}},Cs=_9;(0,Et.b)(Cs,A,pr);const Us=or.indices,Ks=or.vertexAttributes,li={data:Ks.getField(No.T.POSITION,B1.ct).typedBuffer,size:3,stride:Ks.stride/4},si=or.indexCount/3;if((0,at.Wi)(ft)&&si>200){const Ei=jt.renderData;(0,at.Wi)(Ei.intersectionData)&&(Ei.intersectionData=new qx(Us,0,si,li)),Ei.intersectionData.intersectRay({r0:qf,r1:Cs},gs)}else(0,w0.CN)(qf,Cs,0,si,Us,li,null,ft,gs)},Jt=this._rootTiles;(0,at.pC)(Jt)&&(()=>{const jt=this.tileIterator;jt.reset(Jt);const ir=d.options.invisibleTerrain;for(;!jt.done;){const or=jt.next();!(or.visible||ir&&or.intersectsClippingArea)||!(0,at.pC)(ft)&&!or.intersectsRay(O,j,yt,Nt)||tt&&this._useStencilForTile(or)?jt.skipSubtree():Rt(or)}})()}prepareTechnique(d){if(d.bindParameters.slot===mn.r.OCCLUDED_TERRAIN){if(0==(d.renderOccludedMask&PT.Qi))return null}else if(d.bindParameters.slot!==(this.opaque?mn.r.OPAQUE_TERRAIN:mn.r.TRANSPARENT_TERRAIN))return null;switch(d.pass){case Mn.C.MATERIAL:return this._techniqueConfiguration.hasScreenSpaceReflections=d.bindParameters.ssr.enabled,this._techniqueConfiguration.hasCloudsReflections=(0,at.pC)(d.bindParameters.clouds.data),this._techniqueConfiguration.receiveShadows=d.bindParameters.shadowMap.ready,this._techniqueConfiguration.receiveAmbientOcclusion=d.bindParameters.ssaoHelper.ready,this._techniqueConfiguration.overlayMode=this.overlayRenderer.isEmpty()?Jg.gT.Disabled:this.overlayRenderer.hasWater?Jg.gT.EnabledWithWater:Jg.gT.Enabled,this._updateTechnique(Oc.H.Color,(d.bindParameters.slot===mn.r.OCCLUDED_TERRAIN?Ed.$e.Occluded:Ed.$e.ColorAndWater)===Ed.$e.Occluded);case Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL:case Mn.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:return this._castShadows&&1===d.bindParameters.lighting.globalFactor?(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(Oc.H.Shadow,!1)):null;case Mn.C.MATERIAL_DEPTH:return this.isTransparent&&this.overlayRenderer.isEmpty()?null:(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(Oc.H.Depth,!1));case Mn.C.MATERIAL_NORMAL:return this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(Oc.H.Normal,!1);case Mn.C.MATERIAL_HIGHLIGHT:return this.needsHighlight?(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(Oc.H.Highlight,!1)):null}return null}render(d,v){const O=d.pass,A=1===d.bindParameters.lighting.globalFactor;switch(this._updatePatchGroups(),v.useStencil=!1,O){case Mn.C.MATERIAL:this._renderMaterialPass(d,v,d.bindParameters.slot===mn.r.OCCLUDED_TERRAIN?Ed.$e.Occluded:Ed.$e.ColorAndWater);break;case Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL:case Mn.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:this._castShadows&&A&&this._renderAuxiliaryPass(d,v,Ed.$e.None);break;case Mn.C.MATERIAL_DEPTH:this.isTransparent&&this.overlayRenderer.isEmpty()||this._renderAuxiliaryPass(d,v,Ed.$e.None);break;case Mn.C.MATERIAL_NORMAL:this._renderAuxiliaryPass(d,v,Ed.$e.None);break;case Mn.C.MATERIAL_HIGHLIGHT:this.needsHighlight&&(this._renderAuxiliaryPass(d,v,Ed.$e.Highlight),d.rctx.clearSafe(Gt.lk.DEPTH_BUFFER_BIT))}this._scaleRangeQueries.hasPendingQueries()&&this.setNeedsRender()}_renderMaterialPass(d,v,O){const{rctx:A}=d;this._passParameters.overlaySource=O,A.bindTechnique(v,this._passParameters,d.bindParameters),this.numTilesRendered=0,this.numTilesCulled=0,this.numOriginsRendered=0,this._scaleRangeQueries.prepareQueries(),this.opaque?this._renderPatchGroups(d,v,O):d.offscreenRenderingHelper.renderToTargets(()=>this._renderPatchGroups(d,v,O),d.offscreenRenderingHelper.tmpColor,d.offscreenRenderingHelper.mainDepth,[0,0,0,0]),this._scaleRangeQueries.processQueries()}_renderAuxiliaryPass(d,v,O){const A=d.rctx;this._passParameters.overlaySource=O,A.bindTechnique(v,this._passParameters,d.bindParameters),this._renderPatchGroupsAuxiliary(d,v,O)}updateTileBackground(d=null){if((0,at.Wi)(this.tileRenderer))return;const v=this.tileRenderer;let O=null;if((0,at.pC)(d)){const A=yc.Z.toUnitRGBA(d);O=(0,br.f)(A[0]||0,A[1]||0,A[2]||0)}v.setBackground(O),this.allTiles.forAll(A=>v.updateTileTexture(A,en.Ns.FADING)),this._techniqueConfiguration.tileBlendInput=v.backgroundIsGrid?Yd.R.GridComposite:(0,at.pC)(v.backgroundColor)?Yd.R.ColorComposite:Yd.R.LayerOnly,this.setNeedsRender()}_updatePatchGroups(){if(this.patchGroupsDirty){if(this.highestVisibleLODTile=null,this._rebuildPatchGroups(),this.renderOrder!==Yg.NONE){const d=Array.from(this._patchGroups.values());d.forEach(v=>(0,mu.zW)(this.renderOrder,v)),d.sort((v,O)=>(0,mu.dF)(v[0],O[0],this.renderOrder)),this._patchGroups=new Map(d.map(v=>[v[0].renderData.localOrigin,v]))}this.patchGroupsDirty=!1}}_rebuildPatchGroups(){const d=this._rootTiles;if(!(0,at.Wi)(d)){d[0]?.surface.checkAllTileWaterproofness(),this._patchGroups.clear();for(const v of d)this._rebuildPatchGroupsForRootTile(v)}}_rebuildPatchGroupsForRootTile(d){const v=this.tileIterator;for(v.resetOne(d);!v.done;){const O=v.next(),A=O.renderData;if(!A||O.visible)if(O.rendered){if(A){const j=this._patchGroups.get(A.localOrigin)||new Array;this._patchGroups.set(A.localOrigin,j),j.push(O),(!this.highestVisibleLODTile||O.vlevel>this.highestVisibleLODTile.vlevel)&&(this.highestVisibleLODTile=O),v.skipSubtree()}}else this.numTilesCulled++;else this.numTilesCulled++,v.skipSubtree()}}_useStencilForTile(d){for(const v of this.stencilEnabledLayerExtents)if(d.intersectsExtent(v))return!0;return!1}_renderPatchGroupsAuxiliary(d,v,O){const A=this.stencilEnabledLayerExtents.length>0;this._patchGroups.forEach(j=>{v.program.bindDraw(new rS.w(j[0].renderData.localOrigin),d.bindParameters);for(let pe=0;pe<j.length;pe++)this._renderPatch(d,v,j[pe],Gt.MX.TRIANGLES,A,O)}),d.rctx.bindVAO(null)}_renderPatchGroups(d,v,O){const A=d.rctx,j=d.bindParameters.camera,te=v.program;this._techniqueConfiguration.screenSizePerspective&&this.pointsOfInterest&&(0,r1.Gw)(this.stage.viewingMode,this.ellipsoidRadius).update({distance:this.pointsOfInterest.centerOnSurfaceFrequent.distance,fovY:j.fovY});const pe=this.stencilEnabledLayerExtents.length>0,be=O===Ed.$e.Occluded;be&&(te.bindTexture("tex",this.emptyTex),te.setUniform1f("blend",1),te.setUniform4fv("texOffsetAndScale",Ao.Z));const Re=(0,at.pC)(this.tileRenderer)&&(0,at.pC)(this.tileRenderer.backgroundColor)?this.tileRenderer.backgroundColor:br.Z;this._techniqueConfiguration.tileBlendInput===Yd.R.ColorComposite&&te.setUniform3fv("backgroundColor",Re);const Ge=this.wireframe?Gt.MX.LINES:Gt.MX.TRIANGLES;this._techniqueConfiguration.textureFadingEnabled&&te.bindTexture("texNext",this.emptyTex),this._patchGroups.forEach(tt=>{v.program.bindDraw(new rS.w(tt[0].renderData.localOrigin),d.bindParameters),this.numOriginsRendered++;for(let yt=0;yt<tt.length;yt++){const It=tt[yt],Nt=It.renderData.textureReference;if(!(0,at.Wi)(Nt)){if(!be){this._scaleRangeQueries.scaleQueriesForTile(It),iS(It.renderData.geometryInfo.uvOffsetAndScale,Nt.offsetAndScale,H1),te.setUniform4fv("texOffsetAndScale",H1),te.bindTexture("tex",Nt.texture.texture);const Rt=It.renderData.textureFadeFactor,Jt=Rt<1?It.renderData.nextTextureReference:null;this._techniqueConfiguration.textureFadingEnabled&&(0,at.pC)(Jt)&&Rt<1?(iS(It.renderData.geometryInfo.uvOffsetAndScale,Jt.offsetAndScale,H1),te.setUniform1f("fadeFactor",Rt),te.setUniform4fv("nextTexOffsetAndScale",H1),te.setUniform3fv("nextTexOpacities",Jt.opacities),te.bindTexture("texNext",Jt.texture.texture)):te.setUniform1f("fadeFactor",1),It.renderData.textureIsFading&&this.setNeedsRender(),te.setUniform3fv("textureOpacities",Nt.opacities)}this._renderPatch(d,v,It,Ge,pe,O),It.renderOrder=this.numTilesRendered,this.numTilesRendered++}}}),A.bindVAO(null)}_renderPatch(d,v,O,A,j,te){const pe=O.renderData,be=pe.vao,Re=be.indexBuffer;if((0,at.Wi)(Re))return;const Ge=v.program;te!==Ed.$e.None&&this._bindOverlayPatchData(Ge,pe.overlay),j&&(v.useStencil=this._useStencilForTile(O),v.bindPipelineState(d.rctx,d.bindParameters.slot));const tt=pe.geometryInfo.indexCount;d.rctx.bindVAO(be),Ge.assertCompatibleVertexAttributeLocations(be),d.rctx.drawElements(A,tt,Re.indexType,0)}_bindOverlayPatchData(d,v){d.setUniform4fv("overlayTexOffset",v.offsets),d.setUniform4fv("overlayTexScale",v.scales)}_updateTechnique(d,v){return this._techniqueConfiguration.output=d,d===Oc.H.Color&&(this._techniqueConfiguration.atmosphere=this.isGlobal&&this._velvetOverground),this._techniqueConfiguration.renderOccluded=v,this._techniqueConfiguration.stencilEnabled=!1,this._shaderTechnique=this._techniqueRepository.releaseAndAcquire(z1,this._techniqueConfiguration,this._shaderTechnique),this._shaderTechnique}get test(){return{tileRenderer:this.tileRenderer}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ku.prototype,"overlayRenderer",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ku.prototype,"stage",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],ku.prototype,"isGlobal",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ku.prototype,"allTiles",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],ku.prototype,"ellipsoidRadius",void 0),(0,Je._)([(0,ht.Cb)({value:!1})],ku.prototype,"renderingDisabled",null),(0,Je._)([(0,ht.Cb)()],ku.prototype,"renderPatchBorders",null),(0,Je._)([(0,ht.Cb)()],ku.prototype,"cullBackFaces",null),(0,Je._)([(0,ht.Cb)({value:Yg.FRONT_TO_BACK})],ku.prototype,"renderOrder",null),(0,Je._)([(0,ht.Cb)()],ku.prototype,"wireframe",null),ku=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.TerrainRenderer")],ku);const u9=ku;function iS(d,v,O){O[0]=d[0]*v[2]+v[0],O[1]=d[1]*v[3]+v[1],O[2]=d[2]*v[2],O[3]=d[3]*v[3]}const d9=(0,br.c)(),h9=(0,br.c)(),qf=(0,br.c)(),_9=(0,br.c)();class p9{constructor(){this.numNodes=0,this.numLeaves=0,this.numVisible=0,this.numRendered=0,this.numSplit=0,this.numMerged=0,this.numRenderedPerLevel=new Array,this.numLoadedPerLevel=new Array}}var em=T(23461);let Th=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z}initialize(){this._handles.add(this.layers.on("change",()=>this._update())),this._handles.add((0,wr.YP)(()=>this.extentHelper.layerViewsExtent,()=>this._setAdHocTilingScheme())),this._update(),this.tilingSchemeLocked||this._setAdHocTilingScheme()}destroy(){this._handles=(0,at.SC)(this._handles),this._waitTask=null}_update(){if(this._waitTask=null,this.tilingSchemeLocked)return;let d;if(this.layers.some(v=>!(!(0,lu.iC)(v)||v.isRejected()||v.isFulfilled()&&!function f9(d,v,O){return(0,at.pC)((0,ti.E_)(d,v,O))}(v,this.viewSpatialReference,this.viewingMode)||(d=v,"vector-tile"===v?.type||(0,ti.x4)(v)))),d)if(d.isResolved()){const v=(0,ti.E_)(d,this.viewSpatialReference,this.viewingMode);if((0,at.pC)(v)){const O=new em.t(v.tileInfo);this._lockTilingScheme(O)}}else this._updateWhen(d)}_updateWhen(d){const v=d.when().catch(()=>{}).then(()=>{v!==this._waitTask||this.destroyed||this._update()});this._waitTask=v}_lockTilingScheme(d){if(this.viewingMode===dn.JY.Global){const v=d.levels.length-1;d.spatialReference.isWebMercator?d=em.t.makeWebMercatorAuxiliarySphere(v):(0,tn.jF)(d.spatialReference)&&(d=em.t.makeGCSWithTileSize(d.spatialReference,d.pixelSize,v))}this.tilingSchemeLocked=!0,this.tilingScheme=d,this.extentHelper.tilingScheme=this.tilingScheme,this._updateTiledLayerExtent(),this._handles.removeAll(),this._handles.add((0,wr.YP)(()=>this.extentHelper.tiledLayersExtent,()=>this._updateTiledLayerExtent()))}_updateTiledLayerExtent(){this._set("extent",this.extentHelper.tiledLayersExtent)}_setAdHocTilingScheme(){if(this.viewingMode===dn.JY.Global){const d=this.extentHelper.viewSpatialReference,v=(0,tn.jF)(d)||(0,cd.BZ)(d)||(0,cd.V2)(d);d.isWebMercator?this.tilingScheme=em.t.WebMercatorAuxiliarySphere:v&&(this.tilingScheme=em.t.makeGCSWithTileSize(d,256)),this._set("extent",this.extentHelper.layerViewsExtent)}else{const d=this.extentHelper.layerViewsExtent;(0,at.pC)(d)&&!(0,ui.fS)(d,this.extent)&&(this.tilingScheme=em.t.fromExtent(d,this.extentHelper.viewSpatialReference),this._set("extent",d))}}get test(){return{lockTilingScheme:d=>this._lockTilingScheme(d),done:!this._waitTask}}};(0,Je._)([(0,ht.Cb)()],Th.prototype,"tilingScheme",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Th.prototype,"extent",void 0),(0,Je._)([(0,ht.Cb)({value:!1})],Th.prototype,"tilingSchemeLocked",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Th.prototype,"viewSpatialReference",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Th.prototype,"layers",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Th.prototype,"extentHelper",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Th.prototype,"viewingMode",void 0),Th=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.TilingSchemeLogic")],Th);class m9{constructor(){this.offset=(0,po.a)(),this.scale=0,this.tile=null}init(v,O,A,j){this.tile=v,this.offset[0]=O,this.offset[1]=A,this.scale=j}dispose(){this.tile=null,this.offset[0]=0,this.offset[1]=0,this.scale=0}}const Zd=vo.Z.getLogger("esri.views.3d.terrain.TerrainSurface");let Hn=class extends(vc.Z.EventedMixin(Li.Z)){constructor(d){super(d),this._elevationBounds=new TT,this._iteratorPool=new Gd.Z(mu.AA,v=>v.remove=()=>this._iteratorPool.release(v)),this._postorderIterator=new mu.rv,this._hasPendingUpdates=!1,this._pendingUpdates=0,this._asyncWorkItems=0,this._allTilesDirty=!0,this._allTilesSorted=!0,this._visible=!1,this._usedMemory=null,this._performanceInfo=new p9,this._viewChanged=!1,this._inFrameTask=!1,this._viewChangeUpdateDirty=!1,this._eyePosRenderSR=(0,br.c)(),this._eyePosSurfaceSR=(0,br.c)(),this._splitLimits=new GB,this._snapLevel=1/0,this._frustum=(0,to.Ue)(),this._viewProjectionMatrix=(0,ao.c)(),this._layerViews=[new Array,new Array],this._layerIndexByUid=[new Map,new Map],this._basemapLayerViewHandles=new Map,this._handles=new so.Z,this._watchUpdatingTracking=new Wm.t,this._frameTask=lo.sq,this._allTiles=new La.Z,this._upsampleInfoPool=new Gd.Z(m9),this._rootTilesExtent=(0,ui.Ue)(),this._maxNumUpdating=1,this.maxTextureScale=1.2,this.backgroundColor=null,this._updatingRootTiles=!1,this.deferTileNeighborUpdate=!1,this.neighborTilesToUpdate=new Set,this.totalGeometryUpdates=0,this.totalTileUpdates=0,this._layerViewsDirty=!1,this._isGlobal=!d.view?.state?.isLocal}initialize(){this._lercDecoder=(0,bB.w)(this.view.resourceController),this._tilePool=new Gd.Z(this.view.state.isLocal?M8:b8);const d=this.view.resourceController.memoryController;this._upsampleMapCache=d.newCache("esri.views.3d.terrain.upsample",j=>j.unloadMapData()),this._elevationQueryCache=new MB(d.newCache("elevation-query")),this._set("overlayManager",new zc({surface:this})),this._handles.add([(0,wr.YP)(()=>this.overlayManager.hasHighlights,j=>this._renderer.setNeedsHighlight(j)),(0,wr.YP)(()=>this.overlayManager.rendersOccluded,j=>this._renderer.setRenderOccludedOverlay(j))],"overlayManager"),this._renderer=new u9({overlayRenderer:this.overlayManager.renderer,ellipsoidRadius:(0,Mo.Iu)(this.view.spatialReference).radius,stage:this.view._stage,allTiles:this._allTiles}),this._handles.add([(0,wr.YP)(()=>this.baseOpacity,j=>{this._handleLayerViewChanges(),this._updateBaseOpacity(j)},wr.tX),(0,wr.YP)(()=>this.hasCompositeBlendMode,()=>{this._updateBaseOpacity(this.baseOpacity)},wr.tX),(0,wr.YP)(()=>this.renderingDisabled,()=>this._updateTransparentTerrain(),wr.Z_),(0,wr.YP)(()=>this.backgroundColor,j=>{this._handleLayerViewChanges(),this._renderer.updateTileBackground(j)},wr.tX),(0,wr.YP)(()=>this.view.pointsOfInterest,j=>{this._renderer.pointsOfInterest=j,this._watchUpdatingTracking.removeAll(),j&&this._watchUpdatingTracking.add(()=>j.focus.renderLocation,()=>()=>this._allTilesSorted=!1)}),(0,wr.YP)(()=>Nl.Z.TERRAIN_TILE_TREE_SHOW_TILES,j=>{j&&!this._treeDebugger?Promise.all([T.e(8592),T.e(1318)]).then(T.bind(T,21318)).then(({TerrainTileTree3DDebugger:te})=>{!this._treeDebugger&&Nl.Z.TERRAIN_TILE_TREE_SHOW_TILES&&(this._treeDebugger=new te({view:this.view}))}):j||(this._treeDebugger=(0,at.SC)(this._treeDebugger))},wr.nn)]),this._extentHelper=function OB(d,v){return d===dn.JY.Global?new CT(v):new OT(v)}(this.viewingMode,{layers:this.view.map.allLayers,layerViews:this.view.allLayerViews,viewSpatialReference:this.view.spatialReference});const v=this.view.defaultsFromMap?new jm.Z({getCollections:()=>this.view?.defaultsFromMap?.mapCollections?.map(({layers:j})=>j),getChildrenFunction:j=>j&&"layers"in j?j.layers:null}):this.view.map.allLayers,O=new Th({layers:v,extentHelper:this._extentHelper,viewingMode:this.viewingMode,viewSpatialReference:this.view.spatialReference});this._set("tilingSchemeLogic",O),this._updateTilingScheme(),this._elevationDataRequester=this.view.resourceController.createStreamDataRequester(zg.Bh.ELEVATION),this._mapDataRequester=this.view.resourceController.createStreamDataRequester(zg.Bh.BASEMAP),this._frameTask=this.view.resourceController.scheduler.registerTask(lo.T8.TERRAIN_SURFACE,this),this._handles.add([(0,wr.YP)(()=>this._extentHelper.stencilEnabledExtents,j=>this._renderer.setStencilEnabledLayerExtents(j),wr.nn),(0,wr.YP)(()=>this.tilingSchemeLogic.tilingScheme,()=>this._updateTilingScheme(),wr.Z_),(0,wr.YP)(()=>this.extent,()=>this._updateRootTiles(),wr.nn),this.view.on("resize",()=>this._viewChangeUpdate()),(0,wr.YP)(()=>{const j=this.view,te=j.state;return[this.lodBias,this.lodSnapping,j.resourceController?.memoryController?.memoryFactor,te.camera,te.contentCamera,te.fixedContentCamera]},()=>this._viewChangeUpdate(),wr.tX),(0,wr.YP)(()=>this.view.qualitySettings?.tiledSurface?.textureFadeDuration,j=>this._renderer.textureFadingEnabled=j>0,wr.nn),(0,wr.YP)(()=>this._userClippingExtent,()=>this._updateClippingExtent(),wr.Z_)]),this._handles.add(this.view.allLayerViews.on("after-changes",()=>this._layerViewsDirty=!0)),this._layerViewsDirty=!0,this._handleLayerViewChanges()}destroy(){this._frameTask.remove(),this._handles.destroy(),this._watchUpdatingTracking.destroy(),this._lercDecoder=(0,at.RY)(this._lercDecoder),this._removeAllTiles(),this._upsampleMapCache=(0,at.SC)(this._upsampleMapCache),this._elevationQueryCache=(0,at.SC)(this._elevationQueryCache),this._set("tilingSchemeLogic",(0,at.SC)(this.tilingSchemeLogic)),this._extentHelper=(0,at.SC)(this._extentHelper),this._basemapLayerViewHandles.forEach((d,v)=>this._unregisterTiledLayerView(v)),this._elevationDataRequester=null,this._mapDataRequester=null,this._set("overlayManager",(0,at.SC)(this.overlayManager)),this._tilePool=(0,at.SC)(this._tilePool),LT.prune(),this._treeDebugger&&(this._treeDebugger.destroy(),this._treeDebugger=null),this._renderer=(0,at.SC)(this._renderer),this._iteratorPool=(0,at.SC)(this._iteratorPool),this._set("view",null),this._upsampleInfoPool=(0,at.SC)(this._upsampleInfoPool),(0,D1.K)(),function zB(){w1.size>0&&(console.log(`${w1.size} live TilePerLayerInfo allocations:`),w1.forEach(d=>console.log(d,"\n")))}()}get renderer(){return this._renderer}get frustum(){return this._frustum}get snapLevel(){const d=this.view.pointsOfInterest?.contentCameraOnSurface?.scale;if(d){const v=this.view.state.contentCamera;let O=Kv(this.view,v.eye,v.viewForward,v.up).tilt;O>90&&(O=180-O);const A=2*(O/90)**2,j=o2(this.view,d)-A;Math.abs(this._snapLevel-j)>.25&&(Math.round(j)!==Math.round(this._snapLevel)&&(this._viewChanged=!0),this._snapLevel=j)}return Math.round(this._snapLevel)}get lodSnapping(){return this.view.qualitySettings.tiledSurface.reduceTileLevelDifferences?en.VB.ON:en.VB.OFF}get upsampleInfoPool(){return this._upsampleInfoPool}get upsampleMapCache(){return this._upsampleMapCache}get elevationQueryCache(){return this._elevationQueryCache}get mapTileRequester(){return this._mapDataRequester}get _userClippingExtent(){const{spatialReference:d}=this,{clippingArea:v}=this.view;if((0,at.Wi)(v)||(0,at.Wi)(d))return null;const O=(0,ui.Ue)(),A=(0,k2.G)(v,O,d)?O:null,j=this._get("extent");return(0,ui.fS)(A,j)?j:A}get rootTilesExtent(){return this._rootTilesExtent}get extent(){const d=(0,ui.jV)(this.groundExtent,this._userClippingExtent,(0,ui.Ue)()),v=this._get("extent");return(0,ui.fS)(d,v)?v:d}get groundExtent(){return(0,at.pC)(this._tilingSchemeExtent)?this._tilingSchemeExtent:this._rootTilesExtent}get _tilingSchemeExtent(){return this.tilingSchemeLogic?.extent}get updating(){return this._hasPendingUpdates||(this._maxNumUpdating=1),!!((this._watchUpdatingTracking.updating||this._hasPendingUpdates||this._viewChanged||this._allTilesDirty||this._asyncWorkItems>0||!this._allTilesSorted||this._layerViewsDirty)&&this.ready&&!this.suspended||this.overlayManager.updating||this._frameTask.updating)}get updatingProgressValue(){return this._maxNumUpdating=Math.max(this._pendingUpdates,this._maxNumUpdating),1-this._pendingUpdates/this._maxNumUpdating}get viewingMode(){return this.view.state.viewingMode}get ready(){return(0,at.pC)(this.rootTiles)}set renderOrder(d){this._renderer.renderOrder=d,this._set("renderOrder",d)}get spatialReference(){return this.tilingScheme?.spatialReference??null}set slicePlaneEnabled(d){this._renderer.slicePlaneEnabled=d,this._set("slicePlaneEnabled",d),this._updateTransparentTerrain()}_updateTransparentTerrain(){this.view?._stage?.renderView.setRenderParameters({transparentTerrain:!this.renderingDisabled&&!this.opaque})}set velvetOverground(d){d!==this.velvetOverground&&(this._renderer.velvetOverground=d),this._set("velvetOverground",d)}set visible(d){d!==this._visible&&(this._visible=d,this._renderer.setVisibility(d),this.suspended=!d)}get opaque(){return this._renderer.opaque}set suspended(d){this._set("suspended",d),this._viewChangeUpdate()}intersect(d,v,O,A){this._renderer.intersect(d,v,O,A)}getElevation(d,v,O,A){const j=this.getTileWithElevation(d,v,O,A,Wl);return(0,at.Wi)(j)?null:px(Wl[0],Wl[1],j.renderData.geometryState.samplerData)}getTileWithElevation(d,v,O,A,j=Wl){const te=this.rootTiles;if((0,at.Wi)(te)||!te.length||0===te[0].layerInfo[Bn.ELEVATION].length)return null;if(j[0]=d,j[1]=v,j[2]=O,!(0,tn.SH)(j,A,j,this.tilingScheme?.spatialReference))return Zd.error("TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system"),null;for(let pe of te){if(!pe.containsPoint(j))continue;for(;pe&&!pe.rendered&&!pe.isLeaf;){let Re=0;j[0]>.5*(pe.extent[0]+pe.extent[2])&&(Re+=1),j[1]<.5*(pe.extent[1]+pe.extent[3])&&(Re+=2),pe=pe.children[Re]}const be=pe.renderData;return be&&be.geometryState.samplerData?pe:null}return null}get elevationBounds(){return this._elevationBounds}getScale(d){if(this.tilingScheme){if(!(0,tn.KC)(d,Wl,this.spatialReference))return Zd.error("TerrainSurface.getScale(): could not project given point to tiling scheme coordinate system"),null;const v=this.rootTiles;if((0,at.pC)(v))for(let O of v)if(O?.containsPoint(Wl)){for(;!O.isLeaf&&!O.rendered;){let A=0;Wl[0]>O.children[0].extent[2]&&(A+=1),Wl[1]<O.children[0].extent[1]&&(A+=2),O=O.children[A]}return this._getLodBiasCorrectedScale(O.level)}}return 1e100}getSphereElevationBounds(d,v,O,A,j){if(Wl[0]=d,Wl[1]=v,Wl[2]=O,Wl[3]=A,!(0,tn.SH)(Wl,j,Wl,this.tilingScheme?.spatialReference))return Zd.error("TerrainSurface.getSphereElevationBounds(): could not project given point to tiling scheme coordinate system"),null;let te=1/0,pe=-1/0;const be=Ge=>{if(Ge&&(0,ui.hr)(Ge.extent,Wl))if(Ge.isLeaf||Ge.rendered)te=Math.min(te,Ge.elevationBounds[0]),pe=Math.max(pe,Ge.elevationBounds[1]);else for(const tt of Ge.children)be(tt)},Re=this.rootTiles;if((0,at.pC)(Re))for(const Ge of Re)be(Ge);return{min:te,max:pe}}getSphereScale(d,v){if(!this.tilingScheme)return null;if(!(0,tn.KC)(d,Wl,this.spatialReference))return Zd.error("TerrainSurface.getSphereScale(): could not project given point to tiling scheme coordinate system"),null;Wl[3]=v;let O=null;const A=te=>{if(te&&(0,ui.hr)(te.extent,Wl))if(te.isLeaf||te.rendered){const pe=this._getLodBiasCorrectedScale(te.level);O=null==O?pe:Math.min(O,pe)}else for(const pe of te.children)A(pe)},j=this.rootTiles;if((0,at.pC)(j))for(const te of j)A(te);return O}queryVisibleScaleRange(d,v,O,A){const j=v?this.tilingScheme.levelAtScale(v):0,te=O?this.tilingScheme.levelAtScale(O):1/0,pe=this.lodBias;this._renderer.queryVisibleLevelRange(d,j+pe,te+pe,A)}_updateBaseOpacity(d){const v=this._renderer.opaque;this._renderer.opaque=d>=1&&!this.hasCompositeBlendMode,this._renderer.isTransparent=this._allSurfaceLayersTransparent();const O=v!==this._renderer.opaque;O&&this._updateTransparentTerrain(),this._updateTileTextures(O?en.Ns.UNFADED:en.Ns.IMMEDIATE)}_updateTilingScheme(){const d=this.tilingSchemeLogic.tilingScheme;d!==this.tilingScheme&&((0,ti.wu)(!!d,"tiling scheme cannot be reset to undefined"),this._isGlobal=!this.view?.state?.isLocal,this.tilingScheme&&this._removeAllTiles(),this._set("tilingScheme",d),this._updateClippingExtent(),d&&(this._updateTiledLayers(),this._renderer.setTileSize(d.pixelSize),this.overlayManager.setSpatialReference(d.spatialReference),this._updateRootTiles()))}_acquireTile(d,v,O,A){const j=this._tilePool.acquire();return G1[0]=d,G1[1]=v,G1[2]=O,j.init(G1,A,this),j}get updatingRootTiles(){return this._updatingRootTiles}_updateRootTiles(){const{extent:d,tilingScheme:v}=this;if(!v)return;const O=E9;let A=v.rootTilesInExtent(d,O,5*_o.$r);if((0,at.pC)(this.rootTiles)){if(A.length>_o.$r)return void Zd.warn(_o.Tg);const j=this.rootTiles.map(pe=>pe.lij),te=(0,Qp.e5)(j,A,nS);if(this._updatingRootTiles=!0,te.removed.length>0||te.added.length>0){const pe=this.rootTiles.filter(be=>!(te.removed.findIndex(Re=>nS(Re,be.lij))>-1&&(this._purgeTile(be,!0),1)));te.added.forEach(be=>pe.push(this._newRootTile(be))),this._setRootTiles(pe)}}else this._updatingRootTiles=!0,A.length>_o.$r&&(Zd.warn(_o.iU),A=v.rootTilesInExtent(d,O,_o.$r)),this._setRootTiles(A.map(j=>this._newRootTile(j)));(0,ui.fS)(O,this._rootTilesExtent)||(this._rootTilesExtent=(0,ui.Ue)(O)),this.visible=!0,this._viewChangeUpdate(),this.overlayManager.setPlacementDirty(),this.notifyChange("ready"),this._allTiles.forEach(j=>{j.isLoaded&&this._prepareToLoadTile(j)}),this._allTiles.forAll(j=>{j.isLoaded&&(this._updateTileGeometry(j),this._updateTileNeighborsAfterGeometryChange(j))}),this._updatingRootTiles=!1,this.checkAllTileWaterproofness()}_newRootTile(d){const v=this._acquireTile(0,d[1],d[2],null);return v.shouldSplit(this._splitLimits,this._eyePosRenderSR,this.lodSnapping)===$i.SPLIT&&v.setPendingUpdate($i.SPLIT),this._loadTile(v),this.deferTileNeighborUpdate||v.checkGeometryWaterproofness(),v}_setRootTiles(d){if(this._set("rootTiles",d),this._allTiles.clear(),(0,at.pC)(d)){const v=this._iteratorPool.acquire();for(v.reset(d);!v.done;)this._allTiles.push(v.next());v.remove()}this._renderer.setRootTiles(this.rootTiles),this._updateTilesVisibility(d)}_runViewChangeUpdateIfDirty(){this._viewChangeUpdateDirty&&(this._viewChangeUpdateDirty=!1,this._viewChangeUpdate())}_viewChangeUpdate(){this.view&&!this.suspended&&this.tilingScheme&&this._visible&&(this._inFrameTask?this._viewChangeUpdateDirty=!0:(this._viewChangeUpdateDirty=!1,this._updateViewDependentParameters(),this._updateTilesVisibility(this.rootTiles)))}_updateClippingStatus(d){d.updateClippingStatus(this.extent)&&d.resetPendingUpdate($i.GEOMETRY)&&this._updateTileGeometry(d)}_updateTilesVisibility(d){if((0,at.Wi)(d))return;const v=(0,mu.t8)(d);let O=v?this._elevationBounds.min:1/0,A=v?this._elevationBounds.max:-1/0;const j=this.view.state.fixedContentCamera,te=this.extent,pe=this._viewProjectionMatrix;this.setTileTreeDirty();const be=this._iteratorPool.acquire();for(be.reset(d);!be.done;){const Re=be.next();Re.updateClippingStatus(te)&&Re.resetPendingUpdate($i.GEOMETRY)&&this._updateTileGeometry(Re),Re.setPendingUpdate($i.RENDERDATA);const Ge=Re.computeVisibility();j||Ge?(Re.updateScreenDepth(pe),Re.renderData&&(O=Math.min(Re.elevationBounds[0],O),A=Math.max(Re.elevationBounds[1],A))):be.skipSubtree()}be.remove(),this._viewChanged=!0,this._allTilesDirty=!0,isFinite(O)&&isFinite(A)&&(this._elevationBounds.min===O&&this._elevationBounds.max===A||(this._elevationBounds.min=O,this._elevationBounds.max=A,this.emit("elevation-bounds-change",null)))}_updateViewDependentParameters(){const d=this.view.state.camera,v=this.view.state.contentCamera,O=Math.tan(.5*v.fovX),A=Math.tan(.5*v.fovY),j=this.tilingScheme.pixelSize,te=2**-this.lodBias*d.pixelRatio;this._splitLimits.aboveGround=d.aboveGround,this._splitLimits.fovX=O,this._splitLimits.fovY=A,this._splitLimits.relativeWidthLimit=j/d.width*this.maxTextureScale*te,this._splitLimits.relativeHeightLimit=j/d.height*this.maxTextureScale*te,this._splitLimits.maxLod=this.tilingScheme.getMaxLod(),this._splitLimits.angledSplitBias=this.view.qualitySettings.tiledSurface.angledSplitBias,this.view.state.fixedContentCamera?((0,at.Wi)(this._splitLimits.frustum)&&(this._splitLimits.frustum=(0,to.Ue)()),(0,to.JG)(this._splitLimits.frustum,v.frustum)):this._splitLimits.frustum=null,(0,to.JG)(this._frustum,d.frustum),(0,on.m)(this._viewProjectionMatrix,v.projectionMatrix,v.viewMatrix),(0,Et.c)(this._eyePosRenderSR,v.eye),(0,tn.SH)(d.eye,this.view.renderSpatialReference,this._eyePosSurfaceSR,this.spatialReference)}_updateRenderData(d){d.rendered&&!d.shouldLoad&&(oS(d)?(this._loadChildren(d),this.deferTileNeighborUpdate||(this._checkTileNeighborsWaterproofness(d),d.children.forEach(v=>v.checkGeometryWaterproofness()))):function v9(d){return d.isLeaf&&d.parent&&d.parent.shouldLoad}(d)&&this._loadParent(d))}_updateTileGeometry(d){d.updateVisibility(),this._renderer.updateTileGeometry(d),this._updateTileNeighborsAfterGeometryChange(d),this._elevationUpdate(d),this._usedMemory=null,this.deferTileNeighborUpdate&&this.neighborTilesToUpdate.delete(d)}_updateTileNeighborsAfterGeometryChange(d,v){if(this.deferTileNeighborUpdate){const O=this.neighborTilesToUpdate;d.forEachLoadedNeighbor(A=>{O.add(A)})}else d.updateNeighborsAfterGeometryChange(v)}_updateTileTexture(d,v){const O=d.resetPendingUpdate($i.TEXTURE_FADING)?$i.TEXTURE_FADING:!!d.resetPendingUpdate($i.TEXTURE_NOFADING)&&$i.TEXTURE_NOFADING;O&&(this._renderer.updateTileTexture(d,O),this._usedMemory=null,v.madeProgress())}_elevationUpdate(d){K1.spatialReference=this.spatialReference,K1.tile=d,K1.extent=d.extent,this.emit("elevation-change",K1)}get running(){return this.updating&&this.ready&&!this.suspended}runTask(d){this._handleLayerViewChanges(d),this._frameTask.processQueue(d),this._inFrameTask=!0,this._pendingUpdates=0,this._hasPendingUpdates=!1,this._updateTileStatus(d),this._sortTiles(d);const v=!this.view.state.fixedContentCamera;this._mergeAndSplit(d,v),d.run(()=>this._updateElevation(d)),d.run(()=>this._updateTextures(d)),v||this._mergeAndSplit(d,!0),this._inFrameTask=!1,this._runViewChangeUpdateIfDirty(),d.done?this.requestUpdate():this._usedMemory=this._recalculateUsedMemory(),this.notifyChange("updatingProgressValue")}_updateTileStatus(d){if(!this._viewChanged||!this.rootTiles||d.done)return;this._viewChanged=!1;const v=this._iteratorPool.acquire();for(v.reset(this.rootTiles);!v.done;){const O=v.next();if(O.loadable){const A=O.shouldSplit(this._splitLimits,this._eyePosRenderSR,this.lodSnapping);if(A===$i.SPLIT){O.resetPendingUpdate($i.MERGE),O.isLeaf&&(O.setPendingUpdate($i.SPLIT),v.skipSubtree());continue}O.resetPendingUpdate($i.SPLIT)&&O.updateAgentSuspension(),A===$i.VSPLITMERGE&&O.updateAgents(Bn.ELEVATION)}if(v.skipSubtree(),!O.isLeaf){O.setPendingUpdate($i.MERGE),O.resetPendingUpdate($i.SPLIT);const A=this._iteratorPool.acquire();A.resetOne(O);for(let j=A.next();!A.done;j=A.next())this._updateClippingStatus(j),j.updateVisibility(),j.loadable&&j.updateScreenDepth(this._viewProjectionMatrix);A.remove()}}v.remove(),this.requestUpdate(),d.madeProgress()}_sortTiles(d){d.done||this._allTilesSorted||((0,mu.b)(this._allTiles,this.view.pointsOfInterest.focus.renderLocation),this._allTilesSorted=!0,this._treeDebugger&&this._treeDebugger.update(),d.madeProgress())}_prepareBatchTileGeometryUpdate(){(0,ti.Fp)(0===this.neighborTilesToUpdate.size),this.deferTileNeighborUpdate=!0}_batchUpdateUpdatedTileNeighbors(){this.deferTileNeighborUpdate=!1;const d=this.neighborTilesToUpdate;(()=>{for(const O of d)O.updateNeighborDataAndGeometryIfNeeded()})(),(()=>{for(const O of d)O.updateNeighborsWithChangedEdgeResolution()})(),d.clear()}_mergeAndSplit(d,v){if(this.suspended||d.done||!this._allTilesDirty)return;this._allTilesDirty=!1,this.requestUpdate(),this._prepareBatchTileGeometryUpdate();let O=!1;for(;!d.done;){O=!0;let A=!1;const j=!this._allTiles.some(te=>{if(te.resetPendingUpdate($i.MERGE)){if(!v)return te.setPendingUpdate($i.MERGE),d.done;this._mergeTile(te),A=!0,d.madeProgress()}else te.resetPendingUpdate($i.SPLIT)&&(this._splitTile(te),A=!0,d.madeProgress());return!d.done&&te.resetPendingUpdate($i.RENDERDATA)&&(this._updateRenderData(te),d.madeProgress()),d.done});if(A&&(this._allTilesSorted=!1,this._allTilesDirty=!0),j){if(!A)break;this._updateTilesVisibility(this.rootTiles)}else this._allTilesDirty=!0}O||(this._allTilesDirty=!0),this._batchUpdateUpdatedTileNeighbors(),this._sortTiles(d)}_updateElevation(d){return this._prepareBatchTileGeometryUpdate(),this._allTiles.some(v=>(v.resetPendingUpdate($i.GEOMETRY)&&(this._updateTileGeometry(v),this._updateTileTexture(v,d),d.madeProgress()),d.done)),this._batchUpdateUpdatedTileNeighbors(),d.hasProgressed}_updateTextures(d){return this._allTiles.some(v=>(this._updateTileTexture(v,d),d.done)),d.hasProgressed}_updateClippingExtent(){this.spatialReference&&(this.updateTileOverlayParams(Gi.Xx.UPDATE),this.overlayManager.setPlacementDirty(),this._updateRootTiles())}get lodBias(){return this.view.qualitySettings.tiledSurface.lodBias-(1-this.view.resourceController.memoryController.memoryFactor)*_o.DR}_getLodBiasCorrectedScale(d){const v=this.tilingScheme.levels,O=(0,cs.uZ)(d-this.lodBias,0,v.length-1),A=O-Math.floor(O);return v[Math.floor(O)].scale*(1-A)+v[Math.ceil(O)].scale*A}_removeAllTiles(){(0,at.pC)(this.rootTiles)&&(this.rootTiles.forEach(d=>this._purgeTile(d,!1)),this._setRootTiles(null),this.notifyChange("ready")),this._allTiles.clear(),this.visible=!1}_purgeDescendantTiles(d){if(d.isLeaf)return!1;let v=!1;for(let O=0;O<4;++O)v=this._purgeTile(d.children[O],!1)||v;return d.unsetChildren(),v}_purgeTile(d,v){const O=this._purgeDescendantTiles(d)||d.rendered;return this._allTiles.removeUnordered(d),this._unloadTile(d),v&&this._updateTileNeighborsAfterGeometryChange(d),this._tilePool.release(d),O}_unloadTile(d){this.deferTileNeighborUpdate&&this.neighborTilesToUpdate.delete(d),d.unload(this._renderer)}_splitTile(d){(0,ti.wu)(d.isLeaf,"tile that is already split should not be split again!");const v=d.level+1,O=2*d.lij[1],A=2*d.lij[2];d.setChildren(this._createTile(v,O,A,d),this._createTile(v,O,A+1,d),this._createTile(v,O+1,A,d),this._createTile(v,O+1,A+1,d)),d.setPendingUpdate($i.RENDERDATA),d.updateAgentSuspension(),this._allTiles.pushArray(d.children),this._allTilesDirty=!0,this._emitTileScaleChange(d,v),++this._performanceInfo.numSplit}_emitTileScaleChange(d,v=d.level){Y1.spatialReference=this.spatialReference,Y1.extent=d.extent,Y1.scale=this._getLodBiasCorrectedScale(v),this.emit("scale-change",Y1)}_createTile(d,v,O,A){(0,ti.wu)(!!A,"_createTile sanity check");const j=this._acquireTile(d,v,O,A);return j.updateClippingStatus(this.extent),j.loadable&&(j.updateScreenDepth(this._viewProjectionMatrix),j.shouldSplit(this._splitLimits,this._eyePosRenderSR,this.lodSnapping)===$i.SPLIT&&j.setPendingUpdate($i.SPLIT)),j}_mergeTile(d){(0,ti.wu)(!d.hasPendingUpdate($i.SPLIT),"_mergeTile sanity check"),this._purgeDescendantTiles(d)&&((0,ti.wu)(!d.renderData,"_mergeTile sanity check"),this._loadTile(d),this._updateTileNeighborsAfterGeometryChange(d),this.deferTileNeighborUpdate||this._checkTileAndNeighborsWaterproofness(d)),this._allTilesDirty=!0,++this._performanceInfo.numMerged,this._emitTileScaleChange(d)}_checkTileAndNeighborsWaterproofness(d){d.checkGeometryWaterproofness(),this._checkTileNeighborsWaterproofness(d)}_checkTileNeighborsWaterproofness(d){ti.XJ&&d.forallNeighbors(v=>!!v.isLoaded&&(v.checkGeometryWaterproofness(),!0))}_loadChildren(d){this.deferTileNeighborUpdate||this._checkTileAndNeighborsWaterproofness(d),(0,ti.wu)(d.rendered,"parent should be rendered"),this._unloadTile(d);const v=d.children;v.forEach(O=>this._prepareToLoadTile(O)),v.forEach(O=>this._loadTilePrepared(O)),this._updateTileNeighborsAfterGeometryChange(d,d.level+1),this.deferTileNeighborUpdate||(v.forEach(O=>O.updateNeighborsWithChangedEdgeResolution()),v.forEach(O=>O.checkGeometryWaterproofness()),this._checkTileNeighborsWaterproofness(d))}_loadParent(d){this.deferTileNeighborUpdate||this._checkTileAndNeighborsWaterproofness(d);const v=d.parent;this._unloadChildren(v),this._loadTile(v),this._updateTileNeighborsAfterGeometryChange(v),this.deferTileNeighborUpdate||this._checkTileAndNeighborsWaterproofness(v)}_unloadChildren(d){if(!d.isLeaf)for(let v=0;v<4;++v){const O=d.children[v];this._unloadChildren(O),this._unloadTile(O)}}_postLoadTile(d){d.setPendingUpdate($i.RENDERDATA),this.requestUpdate(),this._allTilesDirty=!0,this.overlayManager&&this.overlayManager.hasOverlays&&this.overlayManager.setTileParameters(d),this._elevationUpdate(d)}_loadTile(d){d.load(this._renderer),this._postLoadTile(d)}_loadTilePrepared(d){d.loadPrepared(this._renderer),this._postLoadTile(d)}_prepareToLoadTile(d){d.prepareToLoad(this._renderer)}_elevationDataArrived(d,v,O){const A=new CB(d.lij,d.extent,O);d.dataArrived(v,Bn.ELEVATION,A);const j=[d],te=d.level,pe=this._iteratorPool.acquire();for(pe.reset(j);!pe.done;){const be=pe.next();be.findElevationBoundsForLayer(v,te),be.computeElevationBounds()}pe.remove(),this._updateTilesVisibility(j)}_handleLayerViewChanges(d=lo.G5){if(!this._layerViewsDirty)return;this._layerViewsDirty=!1;let v=!1;const O=new Set;let A=-1;for(const j of this.view.allLayerViews.items)if(O.add(j.uid),(0,ti.wP)(j))if(this._basemapLayerViewHandles.has(j.uid)){const te=this._layerClassFromLayerView(j),pe=this._getLayerIdxByUID(te,j.uid);(0,at.pC)(pe)&&((pe<A||(0,at.Wi)(A))&&(v=!0),A=pe)}else this._registerTiledLayerView(j),j.layer.loaded&&(v=!0);this._basemapLayerViewHandles.forEach((j,te)=>{O.has(te)||(this._unregisterTiledLayerView(te),v=!0)}),v&&this._updateTiledLayers(),this._renderer.isTransparent=this._allSurfaceLayersTransparent(),this.hasCompositeBlendMode=this._hasCompositeBlendMode(),d.madeProgress()}_allSurfaceLayersTransparent(){let d=0===this.view.map?.ground?.opacity;for(const v of this.view.allLayerViews.items)if((0,ti.GL)(v)&&!(0,lu.sy)(v.layer)&&0!==v.fullOpacity)return d=!1,d;return d}_hasCompositeBlendMode(){for(const d of this.view.allLayerViews.items)if((0,ti.TK)(d)){const v=(0,ti.CY)(d.layer.parent)?"normal":d.layer.blendMode;if((0,Yu.MV)(Yu.pU[v]))return!0}return!1}_layerClassFromLayerView(d){return(0,ti._1)(d)?Bn.ELEVATION:Bn.MAP}_registerTiledLayerView(d){const v=[],O=this._layerClassFromLayerView(d);v.push((0,wr.YP)(()=>d.suspended,()=>this._updateTiledLayers())),v.push((0,wr.YP)(()=>d.fullOpacity,()=>this._updateTileTextures(en.Ns.UNFADED))),v.push((0,wr.YP)(()=>"effectiveScaleRange"in d.layer?d.layer.effectiveScaleRange:null,()=>this._restartAllAgents(O))),(0,ti.TK)(d)&&v.push((0,wr.YP)(()=>d.layer.blendMode,()=>{this.hasCompositeBlendMode=this._hasCompositeBlendMode(),this._updateTileTextures(en.Ns.UNFADED)})),d.on("data-changed",()=>{const A=this._getLayerIdxByUID(O,d.uid);(0,at.pC)(A)&&this._invalidateLayerData(A,O)}),this._basemapLayerViewHandles.set(d.uid,v)}_unregisterTiledLayerView(d){const v=this._basemapLayerViewHandles.get(d);if(v){for(let O=0;O<v.length;O++)v[O].remove();this._basemapLayerViewHandles.delete(d)}}_updateTiledLayers(){if(!this.tilingScheme||this.view.suspended)return;const v=[[],[]];let O=null;this.view.allLayerViews.forEach(A=>{if(!A.layer||A.suspended||!(0,ti.wP)(A)||!A.fullExtent)return;const j=this._layerClassFromLayerView(A);if(j===Bn.MAP){const te=A.displayLevelRange.maxLevel;te!==1/0&&(null===O||te>O)&&(O=te)}v[j].push(A)});for(const A of S0){const j=this._layerViews[A],te=v[A];te.reverse();const pe=te.length;let be=j.length!==pe;const Re=new Array(pe),Ge=new Array(j.length);this._layerIndexByUid[A].clear();for(let tt=0;tt<pe;tt++){this._layerIndexByUid[A].set(te[tt].uid,tt);const yt=j.indexOf(te[tt]);Re[tt]=yt,tt!==yt&&(be=!0),yt>-1&&(Ge[yt]=tt)}if(be){const tt=this._postorderIterator;for(tt.reset(this.rootTiles);!tt.done;)tt.next().modifyLayers(Ge,Re,A);this._layerViews[A]=te,this._restartAllAgents(A),this._updateTilesVisibility(this.rootTiles)}}this.tilingScheme.ensureMaxLod(O)&&this._viewChangeUpdate()}_restartAllAgents(d){const v=this._postorderIterator;for(v.reset(this.rootTiles);!v.done;){const O=v.next();O.restartAgents(d),d===Bn.ELEVATION&&O.computeElevationBounds()}}layerViewByIndex(d,v){return this._layerViews[v][d]}numLayers(d){return this._layerViews[d].length}_updateTileTextures(d){this._allTiles.forAll(v=>{v.updateAgents(Bn.MAP),d===en.Ns.IMMEDIATE?this.renderer.updateTileTexture(v,$i.TEXTURE_NOFADING):v.updateRenderData(Bn.MAP,d)}),this._renderer.isTransparent=this._allSurfaceLayersTransparent()}_invalidateLayerData(d,v){this._allTiles.forAll(O=>O.removeLayerAgent(d,v)),this._allTiles.forAll(O=>O.invalidateLayerData(d,v))}setTileTreeDirty(){this._allTilesDirty=!0}requestRender(d=Gi.Xx.UPDATE){this.renderer.setNeedsRender(d)}requestUpdate(){1==++this._pendingUpdates&&(this._hasPendingUpdates=!0)}requestTileData(d,v,O,A){const j=this.layerViewByIndex(v,O),te=j.layer;return!te.tilemapCache||(0,ti.Q)(j)?this._requestTileData(d,O,j,A):(++this._asyncWorkItems,te.tilemapCache.fetchAvailability(d.lij[0],d.lij[1],d.lij[2],{...A,timeout:6e3}).then(()=>--this._asyncWorkItems).catch(pe=>{throw--this._asyncWorkItems,(0,fi.D_)(pe)||this._dataMissing(d,O,j,{notInTilemap:!0}),pe}).then(()=>this._frameTask.schedule(()=>this._requestTileData(d,O,j,A),A.signal)))}_requestTileData(d,v,O,A){return v===Bn.ELEVATION?(0,ti._1)(O)?this._requestElevationTileData(d,O,A):Promise.reject():(0,ti.GL)(O)?this._requestMapTileData(d,O,A):Promise.reject()}_requestElevationTileData(d,v,O){++this._asyncWorkItems;const A=pe=>{if((0,fi.Hc)(O))return;const be=this._layerIndexByUid[Bn.ELEVATION].get(v.uid);null!=be?(this._usedMemory=null,this.requestUpdate(),this._elevationDataArrived(d,be,pe)):Zd.warn("TerrainSurface: received data from unknown layer %d %s",Bn.ELEVATION,d.lij.toString())},j=pe=>{(0,fi.D_)(pe)||(this._dataMissing(d,Bn.ELEVATION,v,pe),this.requestUpdate())};if((0,ti.FZ)(v.layer))return v.layer.fetchTile(d.lij[0],d.lij[1],d.lij[2],{noDataValue:_o.$7,signal:O.signal}).then(pe=>{if(!(0,fi.Hc)(O))return this._frameTask.schedule(()=>A(pe),O.signal,j);Zd.warnOnce("A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.")},j).finally(()=>{--this._asyncWorkItems});const te=v.getTileUrl(d.lij[0],d.lij[1],d.lij[2]);return this._elevationDataRequester.request(te,"binary",O).then(pe=>this._lercDecoder.decode(pe,{noDataValue:_o.$7},O.signal)).then(pe=>{pe?A({values:pe.pixelData,width:pe.width,height:pe.height,noDataValue:pe.noDataValue,minValue:pe.minValue,maxValue:pe.maxValue}):j(new Error("LERC decoding failed"))},j).finally(()=>{--this._asyncWorkItems})}_requestMapTileData(d,v,O){++this._asyncWorkItems;const A=(Ge,tt)=>{--this._asyncWorkItems,(0,ti.z4)(tt),(0,fi.Hc)(O)||(this._dataMissing(d,Bn.MAP,v,Ge),this.requestUpdate())},j=Ge=>tt=>A(tt,Ge),te=Ge=>this._frameTask.schedule(()=>{--this._asyncWorkItems,this.requestUpdate(),(0,fi.Hc)(O)?(0,ti.z4)(Ge):this._mapTileDataArrived(d,v,Ge)},O.signal,j(Ge)).catch(j(Ge)),pe=(Ge,tt=null)=>this._frameTask.schedule(()=>A(Ge,tt));if((0,ti.Q)(v)){const Ge=v.schemaHelper.getLevelRowColumn(d.lij);return v.fetchTile(Ge[0],Ge[1],Ge[2],O).then(te,pe)}if((0,ti.sR)(v))return v.fetchTile(d.lij[0],d.lij[1],d.lij[2],O).then(te,pe);if((0,ti.FH)(v)&&(0,ti.FZ)(v.layer))return v.layer.fetchTile(d.lij[0],d.lij[1],d.lij[2],O).then(Ge=>{if((0,fi.Hc)(O))return Zd.warnOnce("A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true."),void pe((0,fi.zE)());te(Ge)},pe);let be=v.getTileUrl(d.lij[0],d.lij[1],d.lij[2]);return(0,EB.d)(v.layer)&&v.layer.refreshTimestamp&&(be+=`${be.includes("?")?"&":"?"}_ts=${v.layer.refreshTimestamp}`),this._mapDataRequester.request(be,v.hasMixedImageFormats?"image+type":"image",O).then(te,pe)}_mapTileDataArrived(d,v,O){const A=this._getLayerIdxByUID(Bn.MAP,v.uid);(0,at.pC)(A)?d.dataArrived(A,Bn.MAP,O):((0,ti.z4)(O),Zd.warn("TerrainSurface: received data from unknown layer"))}_getLayerIdxByUID(d,v){return this._layerIndexByUid[d].get(v)}_dataMissing(d,v,O,A){const j=this._getLayerIdxByUID(v,O.uid);(0,at.pC)(j)?d.dataMissing(j,v,A):Zd.warn("TerrainSurface: received data from unknown layer")}updateTileOverlayParams(d){this.rootTiles&&this.overlayManager&&(this._allTiles.forAll(v=>{v.renderData&&this.overlayManager.setTileParameters(v)}),this._renderer.setNeedsRender(d))}get performanceInfo(){const d=this._performanceInfo;return d.numNodes=this._allTiles.length,d.numLeaves=d.numVisible=d.numRendered=d.numLoadedPerLevel.length=d.numRenderedPerLevel.length=0,this._allTiles.forAll(v=>{v.isLeaf&&d.numLeaves++;const O=v.level;v.renderData&&(d.numLoadedPerLevel[O]=(d.numLoadedPerLevel[O]||0)+1),v.visible&&(d.numVisible++,v.rendered&&(d.numRenderedPerLevel[O]=(d.numRenderedPerLevel[O]||0)+1,d.numRendered++))}),d}getUsedMemory(){return this.tilingScheme?((0,at.Wi)(this._usedMemory)&&(this._usedMemory=this._recalculateUsedMemory()),(0,at.pC)(this._usedMemory)?this._usedMemory:0):0}_recalculateUsedMemory(){return this.tilingScheme?this._allTiles.reduce((d,v)=>d+v.usedMemory,0):null}getUsedMemoryForLayerView(d){let v=0;const O=this._layerClassFromLayerView(d),A=this._getLayerIdxByUID(O,d.uid);return(0,at.pC)(A)&&this._allTiles.forAll(j=>v+=j.getUsedMemoryForLayer(O,A)),v}getTile(d){if((0,at.Wi)(d)||(0,at.Wi)(this.rootTiles))return null;const v=d.split("/").map(pe=>+pe);if(0===v[0])return this.rootTiles.find(pe=>pe.lij[1]===v[1]&&pe.lij[2]===v[2]);const O=2**v[0],A=Math.floor(v[1]/O),j=Math.floor(v[2]/O);let te;if(this.rootTiles.some(pe=>pe.lij[1]===A&&pe.lij[2]===j&&(te=pe,!0)),te){let pe=1<<v[0]-1;for(;te.lij[0]<v[0];){let be=v[1]&pe?2:0;if((v[2]&pe)>0&&be++,!te.children[be])return null;te=te.children[be],pe>>=1}return(0,ti.wu)(te.lij[0]===v[0]&&te.lij[1]===v[1]&&te.lij[2]===v[2],"not the right tile?"),te}return null}get test(){const d=this;return{renderer:d._renderer,lercDecoder:d._lercDecoder,forceReload:()=>{(0,at.pC)(d.rootTiles)&&(d._mergeTile(d.rootTiles[0]),d._viewChangeUpdate())},getTiles:()=>d._allTiles.toArray(),getRenderedTiles(){tC.clear(),d._allTiles.forAll(O=>{O.visible&&O.rendered&&tC.push(O)});const v=tC.toArray();return(0,mu.zW)(d.renderOrder,v),v},lockTilingScheme(v,O){d._extentHelper.defaultTiledLayersExtent=O,d.tilingSchemeLogic.test.lockTilingScheme(v)}}}checkAllTileWaterproofness(){if(!ti.XJ)return;const d=this.rootTiles;if((0,at.Wi)(d))return;const v=te=>te?.renderData?.geometryInfo?.indices?.length>0,O=(te,pe)=>{v(te)&&console.error("Tile[",te.lij,"] has geometry although parent[",pe.lij,"] has geom")},A=te=>{if(te.renderData&&!te.renderData.geometryState&&console.error("Tile[",te.lij,"] has renderData but not geometryState"),te.renderData&&!te.renderData.geometryInfo&&console.error("Tile[",te.lij,"] has renderData but not geometryInfo"),!te.renderData?.geometryInfo||(te.renderData.geometryInfo.indices?.length??0)>0||console.error("Tile[",te.lij,"] has renderData but no indices - geometryInfo: ",te.renderData.geometryInfo),v(te)){te.checkGeometryWaterproofness();for(const pe of te.children)O(pe,te)}else if(te.isLeaf)console.error("Tile[",te.lij,"] has no geometry and no children, from root to leaf");else for(const pe of te.children)A(pe)},j=te=>{const pe=te.parent?.visible??!0,be=te.visible;te.computeVisibility();const Re=te.visible;if(be!==Re&&pe&&console.error(" Tile[",te.lij,"] has out of date visibility: ",be," instead of ",Re),!te.isLeaf)for(const Ge of te.children)j(Ge)};for(const te of d)A(te),j(te)}get isGlobal(){return this._isGlobal}get shadingEnabled(){return this._renderer.shadingEnabled}get isWebMercator(){return!!this.tilingScheme?.spatialReference.isWebMercator}get isWebMercatorOnPlateeCarree(){return this.isWebMercator&&(0,cd.QM)(this.view?.renderSpatialReference)}isEastEndWrap(d){return this.isGlobal&&d[2]===this.lijEastEnd(d[0])-1}isWestEndWrap(d){return this.isGlobal&&0===d[2]}lijEastEnd(d){return 2**(d+(this.spatialReference.isGeographic?1:0))}wrapEastWest(d){const v=this.lijEastEnd(d[0]),O=d[2];return 0<=O&&O<v?d:this.isGlobal?[d[0],d[1],(O+(O<0?v:0))%v]:null}};(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_renderer",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_hasPendingUpdates",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_asyncWorkItems",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_allTilesDirty",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_allTilesSorted",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_viewChanged",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"_watchUpdatingTracking",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_frameTask",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"snapLevel",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"lodSnapping",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Hn.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_userClippingExtent",null),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_rootTilesExtent",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"extent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"groundExtent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"_tilingSchemeExtent",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"updating",null),(0,Je._)([(0,ht.Cb)(TB.q)],Hn.prototype,"updatingProgress",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"updatingProgressValue",null),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_maxNumUpdating",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:"view.map.ground.opacity"})],Hn.prototype,"baseOpacity",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"hasCompositeBlendMode",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"overlayManager",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"viewingMode",null),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"maxTextureScale",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"ready",null),(0,Je._)([(0,ht.Cb)({value:Yg.FRONT_TO_BACK})],Hn.prototype,"renderOrder",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"rootTiles",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"spatialReference",null),(0,Je._)([(0,ht.Cb)({type:yc.Z,aliasOf:"view.map.ground.surfaceColor"})],Hn.prototype,"backgroundColor",void 0),(0,Je._)([(0,ht.Cb)({value:!1})],Hn.prototype,"slicePlaneEnabled",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"tilingScheme",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"tilingSchemeLogic.tilingSchemeLocked"})],Hn.prototype,"tilingSchemeLocked",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Hn.prototype,"tilingSchemeLogic",void 0),(0,Je._)([(0,ht.Cb)({value:!0})],Hn.prototype,"velvetOverground",null),(0,Je._)([(0,Rl.B)("_renderer.wireframe")],Hn.prototype,"wireframe",void 0),(0,Je._)([(0,ht.Cb)({value:!1})],Hn.prototype,"suspended",null),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"view.qualitySettings.tiledSurface.textureFadeDuration"})],Hn.prototype,"textureFadeDuration",void 0),(0,Je._)([(0,ht.Cb)()],Hn.prototype,"_layerViewsDirty",void 0),(0,Je._)([(0,Rl.B)("_renderer.renderPatchBorders")],Hn.prototype,"renderPatchBorders",void 0),(0,Je._)([(0,Rl.B)("_renderer.renderingDisabled")],Hn.prototype,"renderingDisabled",void 0),Hn=(0,Je._)([(0,Ds.j)("esri.views.3d.terrain.TerrainSurface")],Hn);const y9=Hn;function nS(d,v){return d[0]===v[0]&&d[1]===v[1]&&d[2]===v[2]}function oS(d){return!d.isLeaf&&(d.children.some(v=>v.shouldLoad)||d.children.some(v=>oS(v)))}const Wl=(0,Ao.c)(),E9=(0,ui.Ue)(),G1=[0,0,0],tC=new La.Z,K1={spatialReference:null,tile:null,extent:null,context:"ground"},Y1={spatialReference:null,extent:null,scale:0};var Dl=T(2286),M9=T(26594),rC=T(24260),aS=T(57851),ea=T(54840);let Qg=class extends Li.Z{constructor(d){super(d),this._residentGeomRecords=new Map,this._dirtyGeomRecords=new Map,this.dirty=!1}commit(d){this.dirty=!1,this._dirtyGeomRecords.forEach((v,O)=>this.commitLayer(O,d))}commitLayer(d,v){const O=this._dirtyGeomRecords.get(d);O&&(O.forEach((A,j)=>{const te=this._ensureGeomRecord(d,j);A.forEach((pe,be)=>{const Re=pe[0],Ge=pe[1],tt=pe[2];let ft=!1;if(Ge&ea.$.Geometry.UPDATE){const yt=te.get(be);if(yt){const It=yt[1];if(tt&ea.$.State.TRANSFORMATION){const Nt=this.model.getObject(j);this.model.updateRenderGeometryTransformation(Nt,Re,It)&&(ft=!0)}ft||v.updates.push({renderGeometry:It,updateType:tt})}else(0,_d.hu)(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid update")}if(Ge&ea.$.Geometry.REMOVE||ft){const yt=te.get(be);yt?(v.removes.push(yt[1]),te.delete(be),yt[0].disposed&&rC.k.pool.release(yt[0])):Ge===ea.$.Geometry.REMOVE&&(0,_d.hu)(!1,"ModelDirtySet.getAddRemoveListFilteredByLayers: invalid remove")}if(Ge&ea.$.Geometry.ADD||ft){const yt=this.model.getObject(j);if((0,at.pC)(yt)){const It=this.model.getRenderGeometry(yt,Re),Nt=[Re,It];v.adds.push(It),te.set(be,Nt)}}}),0===te.size&&this._residentGeomRecords.get(d).delete(j)}),0===this._residentGeomRecords.get(d).size&&this._residentGeomRecords.delete(d),this._dirtyGeomRecords.delete(d))}getResidentRenderGeometries(d,v){const O=this._residentGeomRecords.get(d);O&&O.forEach(A=>A.forEach(j=>v.push(j[1])))}_objectStateChanged(d,v){for(const O of v.geometryRecords)this._updateOrCreateDirtyRecord(v,O,null,ea.$.Geometry.UPDATE,0,0,ea.$.Geometry.UPDATE,ea.$.Geometry.ADD|ea.$.Geometry.REMOVE,d)}visibilityChanged(d){this._objectStateChanged(ea.$.State.VISIBILITIES,d)}highlightChanged(d){this._objectStateChanged(ea.$.State.HIGHLIGHTS,d)}occlusionChanged(d){this._objectStateChanged(ea.$.State.OCCLUDEES,d)}vertexAttrsUpdated(d){this._updateOrCreateDirtyRecord(d.object,d.record,null,ea.$.Geometry.UPDATE,0,0,ea.$.Geometry.UPDATE,ea.$.Geometry.ADD|ea.$.Geometry.REMOVE,ea.$.State.VERTEXATTRS)}layerAdded(d){d.objects.forAll(v=>this._layerObjectAdded(d,v))}layerRemoved(d){d.objects.forAll(v=>this._layerObjectRemoved(d,v))}layerObjectAdded(d){this._layerObjectAdded(d.layer,d.object)}_layerObjectAdded(d,v){const O=d.id;for(const A of v.geometryRecords)this._objectGeometryAdded(v,A,O)}layerObjectRemoved(d){this._layerObjectRemoved(d.layer,d.object)}layerObjectsAdded(d){for(const v of d.objects)this._layerObjectAdded(d.layer,v)}layerObjectsRemoved(d){for(const v of d.objects)this._layerObjectRemoved(d.layer,v)}_layerObjectRemoved(d,v){const O=d.id;for(const A of v.geometryRecords)this._objectGeometryRemoved(v,A,O)}shaderTransformationChanged(d){const v=this._residentGeomRecords.get(d.id);v&&v.forEach((O,A)=>{const j=this.model.getObject(A);j&&j.hasVolativeTransformation()&&O.forEach(te=>{te[1].shaderTransformationChanged()})})}objectTransformation(d){const v=this._getParentLayerId(d);this._ensureGeomRecord(v,d.id).forEach(A=>{this._updateOrCreateDirtyRecord(d,A[0],v,ea.$.Geometry.UPDATE,0,0,ea.$.Geometry.UPDATE,ea.$.Geometry.ADD|ea.$.Geometry.REMOVE,ea.$.State.TRANSFORMATION)})}objectGeometryAdded(d){this._objectGeometryAdded(d.object,d.record)}_objectGeometryAdded(d,v,O=null){this._updateOrCreateDirtyRecord(d,v,O,ea.$.Geometry.ADD,ea.$.Geometry.REMOVE,0,0,0)}objectGeometryRemoved(d){this._objectGeometryRemoved(d.object,d.record)}_objectGeometryRemoved(d,v,O=null){this._updateOrCreateDirtyRecord(d,v,O,ea.$.Geometry.REMOVE,ea.$.Geometry.ADD,ea.$.Geometry.UPDATE,0,0)}_updateOrCreateDirtyRecord(d,v,O,A,j,te,pe,be,Re){O=(0,at.Pt)(O,this._getParentLayerId(d));const tt=v.id,ft=this._ensureDirtyRecord(O,d.id),yt=ft.get(tt);if(yt){const It=yt[1];It&j?(ft.delete(tt),yt[0].disposed&&rC.k.pool.release(yt[0])):It&te?(yt[1]=A,yt[2]=Re):It&pe?yt[2]|=Re:It&be||(0,_d.hu)(!1,"ModelDirtySet.objectGeometryAdded: inconsistent state")}else ft.set(tt,[v,A,Re]);this.dirty=this._hasDirtyGeometryRecords}_ensureGeomRecord(d,v){let O=this._residentGeomRecords.get(d);O||(O=new Map,this._residentGeomRecords.set(d,O));let A=O.get(v);return A||(A=new Map,O.set(v,A)),A}get _hasDirtyGeometryRecords(){return(0,cu.oE)(this._dirtyGeomRecords,d=>(0,cu.oE)(d,v=>v&&v.size>0))}_ensureDirtyRecord(d,v){let O=this._dirtyGeomRecords.get(d);O||(O=new Map,this._dirtyGeomRecords.set(d,O));let A=O.get(v);return A||(A=new Map,O.set(v,A)),A}_getParentLayerId(d){return(0,at.pC)(d.parentLayer)?d.parentLayer.id:o1.u}formatDebugInfo(){const d=["ADD","UPD",void 0,"REM"];let v="";return this._dirtyGeomRecords.forEach((O,A)=>{O.forEach((j,te)=>{v.length>0&&(v+="\n"),v+=A+"."+te;const pe=[];j.forEach(be=>{const Re=be[1];pe[Re]||(pe[Re]=[]),pe[Re].push(be[0].geometry.id)});for(let be=0;be<pe.length;be++)if(pe[be]){v+=" "+d[be-1]+": ";for(let Re=0;Re<pe[be].length;Re++)v+=pe[be][Re]+", "}})}),v}get test(){const d=this;return{get residentLayerCount(){return d._residentGeomRecords.size},get residentObjectCount(){return Array.from(d._residentGeomRecords.values()).reduce((v,O)=>v+O.size,0)}}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Qg.prototype,"model",void 0),(0,Je._)([(0,ht.Cb)()],Qg.prototype,"dirty",void 0),Qg=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.ModelDirtySet")],Qg);const b9=Qg;var T9=T(53855);let Z1=class extends Li.Z{constructor(){super(...arguments),this.dirtySet=new b9({model:this}),this._content=new Map,this._originFactory=new aS.C(null,75e4)}getObject(d){return this._content.get(d)}add(d){const v=d.id;(0,_d.hu)(!this._content.has(v),"Model/Stage already contains object to be added"),this._content.set(v,d),(0,Ig.e)(d)&&this.dirtySet.layerAdded(d)}remove(d){(0,_d.hu)(this._content.has(d.id),"Model/Stage doesn't contain object to be removed"),this._content.delete(d.id),d.unload(),(0,Ig.e)(d)&&this.dirtySet.layerRemoved(d)}addMany(d){for(const v of d)(0,at.pC)(v)&&((0,_d.hu)(!this._content.has(v.id),"Model/Stage already contains object to be added"),this._content.set(v.id,v))}removeMany(d){for(const v of d)(0,_d.hu)(this._content.has(v.id),"Model/Stage doesn't contain object to be removed"),this._content.delete(v.id),v.unload()}has(d){return this._content.has(d.id)}forEachOfType(d,v){this._content.forEach(O=>{O.type===d&&v(O)})}getRenderGeometry(d,v){const{geometry:O,material:A,id:j,shaderTransformation:te,origin:pe,instanceParameters:be}=v,Re=new T9.z(O,A,{id:j,boundingInfo:O.boundingInfo,calculateShaderTransformation:te,castShadow:d.castShadow});return Re.updateTransformation(Ge=>d.getCombinedStaticTransformation(v,Ge)),Re.origin=pe||this._originFactory.getOrigin(Re.boundingSphere),Re.instanceParameters=be,Re}updateRenderGeometryTransformation(d,v,O){if((0,at.Wi)(d))return!1;O.updateTransformation(j=>d.getCombinedStaticTransformation(v,j));const A=this._originFactory.getOrigin(O.boundingSphere);return O.origin!==A}getStats(){const d={},v=Array.from(this._content.values());for(let O=0;O<Xb.U.COUNT;++O)d[O]=v.filter(A=>A.type===O).length;return{contentTypes:d,dirtySet:this.dirtySet.formatDebugInfo()}}get test(){return{content:Array.from(this._content.values())}}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Z1.prototype,"dirtySet",void 0),Z1=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.parts.Model")],Z1);var C9=T(79800),lS=T(9554),O9=T(42964),qg=T(9044),ey=T(93394),P9=T(55713);class D9{constructor(v){this._totalCount=v,this._indexRanges=[0,v]}allVisible(){return this.componentCount()===this._totalCount}allInvisible(){return 0===this._indexRanges.length}componentCount(){const v=this._indexRanges;let O=0;for(let A=0;A<v.length;A+=2)O+=v[A+1];return O}reset(v){this._indexRanges="all"===v||v.length===this._totalCount?[0,this._totalCount]:function x9(d){const v=new Array;if(0===d.length)return v;let O=d[0],A=1;for(let j=1;j<d.length;j++){const te=d[j];O+A===te?A+=1:(v.push(O),v.push(A),O=te,A=1)}return v.push(O),v.push(A),v}(v)}forEachComponent(v){const O=this._indexRanges;for(let A=0;A<O.length;A+=2){const j=O[A],te=j+O[A+1];for(let pe=j;pe<te;pe++)if(!v(pe))return!1}return!0}forEachComponentRange(v){const O=this._indexRanges;for(let A=0;A<O.length;A+=2){const j=O[A];if(!v(j,j+O[A+1]))return!1}return!0}computeOffsetRanges(v){const O=new Array(this._indexRanges.length),A=this._indexRanges;for(let j=0;j<A.length;j+=2){const te=A[j],be=v[te],Re=v[te+A[j+1]];O[j]=be,O[j+1]=Re-be}return O}}class S9 extends Dl.Xn{constructor(v,O){super(),this.pickability=null,this.highlightCounts=null,this.verticalOffsets=null,this.cachedGeometryRanges=null,this.cachedHighlightRanges=null,this.cachedDefaultRanges=null,this.offsets=(0,P9.tP)(O);const A=this.count;this.visibility=new D9(A),this.materialDataBuffer=v.getBuffer(A),this.materialDataIndices=new Uint16Array(A);for(let j=0;j<A;j++)this.materialDataIndices[j]=this.materialDataBuffer.acquireIndex()}dispose(){super.dispose();for(let v=0;v<this.count;v++)this.materialDataBuffer.releaseIndex(this.materialDataIndices[v])}get count(){return this.offsets.length-1}get geometryRanges(){return(0,at.Wi)(this.cachedGeometryRanges)&&(this.cachedGeometryRanges=this.visibility.computeOffsetRanges(this.offsets)),this.cachedGeometryRanges}get highlightRanges(){return(0,at.Wi)(this.highlightCounts)?null:(this._updateCachedHighlightRanges(),this.cachedHighlightRanges)}get defaultShadowMapRanges(){return(0,at.Wi)(this.highlightCounts)?this.geometryRanges:(this._updateCachedHighlightRanges(),this.cachedDefaultRanges)}highlightsDirty(){this.cachedHighlightRanges=null,this.cachedDefaultRanges=null}visibilityDirty(){this.cachedGeometryRanges=null,this.highlightsDirty()}_updateCachedHighlightRanges(){if(((0,at.Wi)(this.cachedHighlightRanges)||(0,at.Wi)(this.cachedDefaultRanges))&&(0,at.pC)(this.highlightCounts)){const{highlightRanges:v,defaultRanges:O}=function A9(d,v,O){const A=[],j=[];let te=O.length,pe=O.length;return v.forEachComponent(be=>(d[be]>0?(te!==be-1&&(A.length&&A.push(O[te+1]-A[A.length-1]),A.push(O[be])),te=be):(pe!==be-1&&(j.length&&j.push(O[pe+1]-j[j.length-1]),j.push(O[be])),pe=be),!0)),A.length&&A.push(O[te+1]-A[A.length-1]),j.length&&j.push(O[pe+1]-j[j.length-1]),{highlightRanges:A,defaultRanges:j}}(this.highlightCounts,this.visibility,this.offsets);this.cachedHighlightRanges=v,this.cachedDefaultRanges=O}}}var k1=T(24225);function L9(d,v,O,A){if(O>=v)return d;null==d&&(d=function w9(d=!0){return{isVisibleBit:!d,data:new Uint32Array(0)}}());const j=d.isVisibleBit;let te=d.data;const pe=uS(te),be=O/pe|0,Re=O-pe*be,Ge=(v-1)/pe|0,tt=te,ft=A===j;if(!(O<tt.length*pe)&&ft){const It=be+1,Nt=Math.ceil(1.5*tt.length),Rt=Ge+1;let Jt=Math.max(It,Nt);Jt=Math.min(Jt,Rt),te=new Uint32Array(Jt),te.set(tt)}return be<te.length&&(te[be]=function I9(d,v,O){return d&~(1<<v)|(O?1:0)<<v}(te[be],Re,ft)),d.data=te,d}function cS(d,v){if(null==d)return!0;const{isVisibleBit:O,data:A}=d,j=uS(A);return v<A.length*j?function R9(d,v,O,A){const j=O/A|0;return function U9(d,v){return 0!=(d&1<<v)}(v[j],O-j*A)===d}(O,A,v,j):!d.isVisibleBit}function uS(d){return 8*d.BYTES_PER_ELEMENT}var B9=T(36848);class j9{constructor(v,O){this._indices=(0,at.pC)(v.indices)?v.indices:(0,B9.p)(v.positions.length/3),this._positions=new B1.ct(v.positions),this._components=O,this._componentIntersectionData=new Array(O.count)}getComponentAabb(v,O){if((0,at.pC)(this._perComponentAabbs)){for(let A=0;A<6;A++)O[A]=this._perComponentAabbs[6*v+A];return O}return this._computePerComponentAabbs(),this.getComponentAabb(v,O)}getComponentPositions(v,O){O.indices=this._indices,O.data=this._positions.typedBuffer,O.stride=this._positions.typedBufferStride,O.startIndex=this._components.offsets[v],O.endIndex=this._components.offsets[v+1]}intersect(v,O,A,j,te,pe,be){const Re={data:this._positions.typedBuffer,stride:this._positions.typedBufferStride,size:3},Ge=this._indices,tt=this._components.offsets,ft=(0,w0.Ue)(v,O,F9),yt=v[2],It=O[2];this._components.visibility.forEachComponent(Nt=>{if(!cS(this._components.pickability,Nt))return!0;const Rt=this.getComponentAabb(Nt,N9);if((0,at.pC)(pe)){const pr=pe[Nt];(0,at.pC)(te)?te.componentOffset=pr:(v[2]=yt-pr,O[2]=It-pr)}if((0,at.pC)(te)&&te.applyToAabb(Rt),!(0,w0.Tw)(Rt,v,ft,A))return!0;const Jt=tt[Nt]/3,jt=tt[Nt+1]/3,ir=(pr,Lr,Br)=>{be(Nt,pr,(0,Et.t)(Lr,Lr,j),Br)},or=jt-Jt;return(0,at.Wi)(te)&&or>200?(null==this._componentIntersectionData[Nt]&&(this._componentIntersectionData[Nt]=new qx(this._indices,Jt,jt,Re)),this._componentIntersectionData[Nt].intersectRay({r0:v,r1:O},ir)):(0,w0.CN)(v,O,Jt,jt,Ge,Re,void 0,te,ir),!0})}_computePerComponentAabbs(){const v=this._components.count;this._perComponentAabbs=new Float32Array(6*v);const O=this._indices,A=this._positions.typedBuffer,j=this._positions.typedBufferStride,te=this._components.offsets;let pe=0;for(let be=0;be<v;be++){const Ge=te[be+1];let tt=1/0,ft=1/0,yt=1/0,It=-1/0,Nt=-1/0,Rt=-1/0;for(let Jt=te[be];Jt<Ge;Jt++){const jt=O[Jt]*j,ir=A[jt],or=A[jt+1],pr=A[jt+2];tt=Math.min(tt,ir),ft=Math.min(ft,or),yt=Math.min(yt,pr),It=Math.max(It,ir),Nt=Math.max(Nt,or),Rt=Math.max(Rt,pr)}this._perComponentAabbs[pe++]=tt,this._perComponentAabbs[pe++]=ft,this._perComponentAabbs[pe++]=yt,this._perComponentAabbs[pe++]=It,this._perComponentAabbs[pe++]=Nt,this._perComponentAabbs[pe++]=Rt}}get positions(){return this._positions}get indices(){return this._indices}}const F9=(0,br.c)(),N9=(0,pa.Ue)();class W9{constructor(v,O,A){this.material=v,this.geometry=O,this.meta=A}dispose(){this.material.dispose(),this.geometry.dispose()}}class dS extends Dl.Xn{constructor(v,O,A,j){super(),this.primitiveType=O,this.parameters=A,this.indexed=j,this.vao=v}}function ty(d){return d?ry(d,1/0,-1/0):function V9(d,v){return{near:d,far:v}}(1/0,-1/0)}function ry(d,v,O){return d.near=v,d.far=O,d}function tm(d,v,O=d){return O.near=Math.min(d.near,v.near),O.far=Math.max(d.far,v.far),O}function $1(d,v){return d.near<=v&&v<=d.far}(0,Je._)([(0,Dl.gT)()],dS.prototype,"vao",void 0);const sC={near:0,far:0};const J1=new La.Z({allocator:d=>d||{near:1/0,far:-1/0,mask:0,object:null},deallocator:d=>(d.object=null,d)}),p_=ty(),Gc=(0,br.c)(),R0=(0,br.c)(),H9=new La.Z({deallocator:null}),G9=new La.Z({deallocator:null});function K9(d,v,O){O.length=0;const A=v.length-3;iC(Gc,v,A);const j=(0,Ro.jH)(d,Gc);j<=0&&(O.push(Gc[0]),O.push(Gc[1]),O.push(Gc[2]));let te=0,pe=j;for(;te<A;te+=3){iC(R0,v,te);const be=(0,Ro.jH)(d,R0);pe*be<0&&((0,Et.h)(Gc,R0,Gc,be/(be-pe)),Kc(O,Gc)),be<=0&&Kc(O,R0),pe=be,(0,Et.c)(Gc,R0)}pe*j<0&&(iC(R0,v,A),(0,Et.h)(Gc,R0,Gc,j/(j-pe)),Kc(O,Gc))}function iC(d,v,O){return(0,Et.s)(d,v.data[O+0],v.data[O+1],v.data[O+2])}function Kc(d,v){d.push(v[0]),d.push(v[1]),d.push(v[2])}function Y9(d,v,O,A){(0,UR.c)(pS,d.quaternion),(0,Et.v)($u,v,d.center),(0,Et.q)($u,$u,pS);const j=8*(($u[0]<-d.halfSize[0]?-1:$u[0]>d.halfSize[0]?1:0)+3*($u[1]<-d.halfSize[1]?-1:$u[1]>d.halfSize[1]?1:0)+9*($u[2]<-d.halfSize[2]?-1:$u[2]>d.halfSize[2]?1:0)+13),te=hS[j];if(0===te)return te;(0,Ta.g)(X1,d.quaternion),(0,Ta.d)(X1,X1,d.halfSize);const pe=(be,Re)=>{const Ge=hS[j+Re+1];return(0,Et.s)(be,((1&Ge)<<1)-1,(2&Ge)-1,((4&Ge)>>1)-1),(0,Et.t)(be,be,X1),(0,Et.a)(be,d.center,be)};return O.length=0,Kc(O,pe(nC,0)),Kc(O,pe(fS,1)),Kc(O,pe($u,2)),Kc(O,pe(mS,3)),A(O),1===te||(O.length=0,Kc(O,nC),Kc(O,mS),Kc(O,pe($u,4)),Kc(O,pe(gS,5)),A(O),2===te||(O.length=0,Kc(O,nC),Kc(O,gS),Kc(O,pe($u,6)),Kc(O,fS),A(O))),te}const hS=(()=>{const d=new Int8Array(216);let v=0;const O=A=>{for(let j=0;j<A.length;j++)d[v+j]=A[j];v+=8};return O([3,0,6,2,3,1,5,4]),O([2,0,2,3,1,5,4,0]),O([3,1,0,2,3,7,5,4]),O([2,0,1,3,2,6,4,0]),O([1,0,1,3,2,0,0,0]),O([2,1,5,7,3,2,0,0]),O([3,2,0,1,3,7,6,4]),O([2,2,0,1,3,7,6,0]),O([3,3,0,1,5,7,6,2]),O([2,0,1,5,4,6,2,0]),O([1,0,1,5,4,0,0,0]),O([2,1,3,7,5,4,0,0]),O([1,0,2,6,4,0,0,0]),O([0,0,0,0,0,0,0,0]),O([1,1,3,7,5,0,0,0]),O([2,2,3,7,6,4,0,0]),O([1,2,3,7,6,0,0,0]),O([2,3,1,5,7,6,2,0]),O([3,4,0,1,5,7,6,2]),O([2,5,7,6,4,0,1,0]),O([3,5,0,1,3,7,6,4]),O([2,4,5,7,6,2,0,0]),O([1,4,5,7,6,0,0,0]),O([2,5,1,3,7,6,4,0]),O([3,6,0,2,3,7,5,4]),O([2,6,2,3,7,5,4,0]),O([3,7,6,2,3,1,5,4]),d})(),_S=4,X1=(0,Jh.c)(),pS=(0,BM.a)(),$u=(0,br.c)(),nC=(0,br.c)(),fS=(0,br.c)(),mS=(0,br.c)(),gS=(0,br.c)();class k9{constructor(v){this._objects=v}submit(v,O){this._objects.preSubmit(O),this._objects.visibleObjects.forAll(A=>A.renderable.material.submit(v,O,A))}queryShadowCasterDepthRange(v){return this._objects.visibleObjects.length?function z9(d,v){const O=ty(),{eye:A,frustum:j,viewForward:te}=d;v.forAll(pe=>{const be=(0,at.pC)(pe.offsetObb)?pe.offsetObb:pe.obb,Re=(0,Et.e)((0,Et.v)($u,be.center,A),te),Ge=(0,ey.xz)(be,te);if($1(O,Re-Ge)&&$1(O,Re+Ge))return;const tt=function Z9(d,v){let O=0;for(let A=0;A<_S;A++){const j=(0,ey.hZ)(d,v[A]);if(j>0)return-1;0===j&&(O|=1<<A)}return O}(be,j);if(-1===tt)return;if(0===tt)return p_.far=Re+Ge,p_.near=Re-Ge,void tm(O,p_);const ft=J1.pushNew();ft.near=Re-Ge,ft.far=Re+Ge,ft.mask=tt,ft.object=pe});for(let pe=0;pe<J1.length;pe++){const be=J1.data[pe];$1(O,be.near)&&$1(O,be.far)||(p_.far=be.far,p_.near=1/0,0===Y9((0,at.pC)(be.object.offsetObb)?be.object.offsetObb:be.object.obb,A,H9,Ge=>{let tt=G9;for(let ft=0;ft<_S&&Ge.length>0;ft++){if(0==(be.mask&1<<ft))continue;K9(j[ft],Ge,tt);const yt=Ge;Ge=tt,tt=yt}for(let ft=0;ft<Ge.length;ft+=3){(0,Et.s)(Gc,Ge.data[ft+0],Ge.data[ft+1],Ge.data[ft+2]);const yt=(0,Et.e)((0,Et.v)(Gc,Gc,A),te);p_.near=Math.min(p_.near,yt)}})&&(p_.near=0),tm(O,p_))}return J1.length=0,O}(v,this._objects.visibleObjects):null}}var $9=T(27355),yp=T(75550),sy=T(35357),oC=T(15261),yS=T(7228),rm=T(88569);class Q1 extends Ka.A{bindDraw(v,O){const A=this.program;A.bindDraw(v,O),A.rebindTextures(),v.componentParameters.type===sy._N.Varying&&v.componentParameters.texture.bind(A,"componentColorTex","componentColorTexInvDim")}initializeConfiguration(v,O){O.spherical=v.viewingMode===dn.JY.Global,O.doublePrecisionRequiresObfuscation=(0,yS.I)(v.rctx)}initializeProgram(v){const O=Q1.shader.get(),A=O.build(this.configuration);return new Wa.$(v.rctx,A,O.attributeLocations)}_setPipelineState(v){const O=this.configuration,A=O.integratedMeshMode!==yp.OH.None,j=v===Gi.Am.NONE,te=v===Gi.Am.FrontFace;return(0,Ti.sm)({blending:O.output!==Oc.H.Color&&O.output!==Oc.H.Alpha||!O.blendingEnabled?null:j?rm.wu:(0,rm.j7)(v),culling:(0,Ti.zp)(O.cullFace),depthTest:{func:(0,rm.Bh)(v)},depthWrite:j||te?Ti.LZ:null,colorWrite:Ti.BK,stencilWrite:A||O.hasOccludees?V1.s3:null,stencilTest:A?(0,V1.ec)(Gi.hU.IntegratedMeshMaskExcluded):O.hasOccludees?V1.RY:null,polygonOffset:j||te?O.hasPolygonOffset?{factor:2,units:2}:null:rm.E0})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}Q1.shader=new Ga.J(oC.C,()=>T.e(6777).then(T.bind(T,26777)));var iy=T(50574);class J9 extends Fd.K{constructor(){super(...arguments),this._dirty=!0}_setDirty(){this._dirty=!0}_setClean(){if(this._dirty=!1,null!=this._parameterBlocks)for(const v of this._parameterBlocks)this[v]._setClean()}get dirty(){return this._dirty||this._checkParameterBlocksDirty()}_checkParameterBlocksDirty(){if(null==this._parameterBlocks)return!1;for(const v of this._parameterBlocks)if(this[v].dirty)return!0;return!1}}class aC{constructor(){this._dirty=!0}_setDirty(){this._dirty=!0}_setClean(){this._dirty=!1}get dirty(){return this._dirty}}function ta(d={}){return(v,O)=>{const A=v._parameterCount??0;if(v._parameterCount=A+1,d.vectorOps){const j=d.vectorOps;Object.defineProperty(v,O,{get(){return this[A]},set(te){const pe=this[A];if(null==pe)this[A]=te;else{if(j.equals(pe,te))return;j.copy(pe,te)}this._setDirty()}})}else Object.defineProperty(v,O,{get(){return this[A]},set(j){this[A]!==j&&(d.dispose&&this[A]&&this[A].dispose(),this[A]=j,this._setDirty())}})}}function vS(){return(d,v)=>{const O=d._parameterCount??0;d._parameterCount=O+1,d._parameterBlocks=d._parameterBlocks||[],d._parameterBlocks.push(O),Object.defineProperty(d,v,{get(){return this[O]},set(A){this[O]!==A&&(this[O]=A,this._setDirty())}})}}var ga=T(43553),lC=T(26859),ES=T(96395),X9=T(67022),Q9=T(22799);class q1{constructor(v){this._low=(0,Ya.c)(),this._high=(0,Ya.c)(),v&&this.set(v)}get low(){return this._low}get high(){return this._high}set(v){const O=this._low,A=this._high;(0,Et.c)(O,v),(0,Et.v)(A,v,O)}setElements(v,O,A){(0,Et.s)(MS,v,O,A),this.set(MS)}get(v){return(0,Et.a)(v,this._low,this._high)}getLowScaled(v){return(0,Et.g)(v,this._low,1)}}const MS=(0,br.c)();class ul extends J9{constructor(v,O){super(),this.toMapSpace=O,this.baseColor=(0,P0.f)(1,1,1,1),this.usePBR=!1,this.hasParametersFromSource=!1,this.mrrFactors=(0,Ya.f)(1,1,.5),this.emissiveFactor=(0,Ya.f)(0,0,0),this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.emissionTexture=null,this.occlusionTexture=null,this.normalTexture=null,this.objectOpacity=1,this.commonMaterialParameters=new eE,this.componentParameters=new ny,this.textureAlphaCutoff=X9.F,this.alphaDiscardMode=Gi.JJ.Opaque,this.isIntegratedMesh=!1,this.polygonOffsetEnabled=!1,this.ellipsoidMode=Q9.U.Earth,this.hasOccludees=!1,this._techniqueConfiguration=new yp._O;const A=new q1(v.position),j=(0,kf.a)(v.rotationScale);(0,Ta.e)(j,j),this.transformNormalGlobalFromModel=(0,Ta.t)(j,j),this.transformWorldFromModelTL=A.low,this.transformWorldFromModelTH=A.high,this.transformWorldFromModelRS=v.rotationScale}dispose(){this._technique=(0,at.RY)(this._technique),this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.emissionTexture=null,this.occlusionTexture=null,this.normalTexture=null}get texture(){return(0,at.pC)(this.baseColorTexture)?this.baseColorTexture.glTexture:null}get textureMetallicRoughness(){return(0,at.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.glTexture:null}get textureEmissive(){return(0,at.pC)(this.emissionTexture)?this.emissionTexture.glTexture:null}get textureOcclusion(){return(0,at.pC)(this.occlusionTexture)?this.occlusionTexture.glTexture:null}get textureNormal(){return(0,at.pC)(this.normalTexture)?this.normalTexture.glTexture:null}prepareTechnique(v,O,A,j){const te=this._techniqueConfiguration;te.hasVertexColors=j.colors,te.hasNormals=j.normals,te.textureCoordinateType=j.textureCoordinates,te.hasMetalnessAndRoughnessTexture=(0,at.pC)(this.metallicRoughnessTexture),te.hasEmissionTexture=(0,at.pC)(this.emissionTexture),te.hasOcclusionTexture=(0,at.pC)(this.occlusionTexture),te.hasNormalTexture=(0,at.pC)(this.normalTexture),te.transparencyPassType=O.identifier===ga.o9.Material&&null!=A.transparencyPassType?A.transparencyPassType:Gi.Am.NONE,te.hasMultipassTerrain=O.identifier===ga.o9.Material&&null!=A.multipassTerrain&&A.multipassTerrain.enabled,te.cullAboveGround=O.identifier===ga.o9.Material&&null!=A.multipassTerrain&&A.multipassTerrain.cullAboveGround,te.ellipsoidMode=this.ellipsoidMode,te.componentData=this.componentParameters.type,te.cullFace=this.commonMaterialParameters.cullFace,te.doubleSidedMode=this.commonMaterialParameters.doubleSided?ES.q.View:ES.q.None,te.hasBaseColorTexture=(0,at.pC)(this.baseColorTexture);const pe=this._computeWhichMaterialPass();te.blendingEnabled=pe===Pc.Transparent||pe===Pc.OpaqueAndTransparent,te.alphaDiscardMode=this.alphaDiscardMode,te.integratedMeshMode=this.isIntegratedMesh?function tj(d){return 0!==d.overlays.length&&(0,at.pC)(d.overlays[en.fu.INNER].getColorTextureNoRasterImage())}(A)?(0,oC.g)(A)?yp.OH.ColorOverlayWithWater:yp.OH.ColorOverlay:yp.OH.NoOverlay:yp.OH.None,te.isGround=this.isIntegratedMesh,te.hasPolygonOffset=this.polygonOffsetEnabled;const be=this.hasParametersFromSource&&(0,at.Wi)(this.baseColorTexture);return te.pbrMode=te.integratedMeshMode===yp.OH.ColorOverlayWithWater?Xg.f7.WaterOnIntegratedMesh:this.usePBR?be?Xg.f7.Schematic:Xg.f7.Normal:Xg.f7.Disabled,te.normalType=te.integratedMeshMode===yp.OH.None?te.hasNormals?lC.h.CompressedAttribute:lC.h.ScreenDerivative:lC.h.Ground,te.hasSlicePlane=(0,at.pC)(A.slicePlane)&&this.commonMaterialParameters.hasSlicePlane,O.identifier===ga.o9.ShadowMap?(te.output=Oc.H.Shadow,te.vertexDiscardMode=iy.a.None):O.identifier===ga.o9.Highlight?(te.output=Oc.H.Highlight,te.vertexDiscardMode=iy.a.None):(te.vertexDiscardMode=this._computeWhichMaterialPass()===Pc.OpaqueAndTransparent?O.transparent?iy.a.Opaque:iy.a.Transparent:iy.a.None,te.output=function q9(d){switch(d){case ga.zp.Color:return Oc.H.Color;case ga.zp.Alpha:return Oc.H.Alpha;case ga.zp.Depth:return Oc.H.Depth;case ga.zp.Normal:return Oc.H.Normal}}(O.subPass),O.subPass===ga.zp.Alpha&&(te.hasOccludees=A.hasOccludees),O.subPass===ga.zp.Color?(te.receiveAmbientOcclusion=A.ssaoHelper.ready,te.hasOccludees=A.hasOccludees,te.receiveShadows=A.shadowMap.ready,te.hasScreenSpaceReflections=A.ssr.enabled,te.hasCloudsReflections=(0,at.pC)(A.clouds.data)):(te.receiveAmbientOcclusion=!1,te.receiveShadows=!1),te.snowCover=this.hasSnowCover(A)),this._technique=v.releaseAndAcquire(Q1,te,this._technique),this._setClean(),this._technique}hasSnowCover(v){return(0,at.pC)(v.weather)&&v.weatherVisible&&"snowy"===v.weather.type&&"enabled"===v.weather.snowCover}submit(v,O,A){if(0===this.objectOpacity)return;const j=A.renderable.geometry,te=A.components,pe=A.renderable.meta.cameraDepthSquared,be=te.geometryRanges,Re=te.highlightRanges,Ge=te.defaultShadowMapRanges;switch(this._computeWhichMaterialPass()){case Pc.Opaque:v.materialOpaque.submitDraw(this,j,be,pe);break;case Pc.Transparent:v.materialTransparent.submitDraw(this,j,be,pe);break;case Pc.OpaqueAndTransparent:v.materialOpaque.submitDraw(this,j,be,pe),v.materialTransparent.submitDraw(this,j,be,pe);break;case Pc.IntegratedMesh:v.materialIntegratedMesh.submitDraw(this,j,be,pe),function ej(d){return 0!==d.overlays.length&&(0,at.pC)(d.overlays[en.fu.INNER].getValidTexture(en.NH.Highlight))}(O)&&v.highlightIntegratedMesh.submitDraw(this,j,be,pe)}const tt=this.componentParameters.castShadows!==$a.None;tt&&v.shadowMap.submitDraw(this,j,be,pe),(0,at.pC)(Re)&&(v.highlight.submitDraw(this,j,Re,pe),tt&&v.highlightShadowMap.submitDraw(this,j,Re,pe)),tt&&(0,at.pC)(Ge)&&v.defaultShadowMap.submitDraw(this,j,Ge,pe)}get attributeLocations(){return oC.a}_computeWhichMaterialPass(){return this.isIntegratedMesh?Pc.IntegratedMesh:this.objectOpacity<1?Pc.Transparent:this.componentParameters.opaqueOverride===$a.All?Pc.Opaque:this.baseColor[3]<1||this.alphaDiscardMode===Gi.JJ.Blend||this.alphaDiscardMode===Gi.JJ.MaskBlend?Pc.Transparent:this.componentParameters.transparent===$a.None?Pc.Opaque:this.componentParameters.transparent===$a.All?Pc.Transparent:Pc.OpaqueAndTransparent}}var bS,Pc,$a;(0,Je._)([ta({vectorOps:Ml.v})],ul.prototype,"baseColor",void 0),(0,Je._)([ta()],ul.prototype,"usePBR",void 0),(0,Je._)([ta()],ul.prototype,"hasParametersFromSource",void 0),(0,Je._)([ta({vectorOps:Et.F})],ul.prototype,"mrrFactors",void 0),(0,Je._)([ta({vectorOps:Et.F})],ul.prototype,"emissiveFactor",void 0),(0,Je._)([ta({dispose:!0})],ul.prototype,"baseColorTexture",void 0),(0,Je._)([ta({dispose:!0})],ul.prototype,"metallicRoughnessTexture",void 0),(0,Je._)([ta({dispose:!0})],ul.prototype,"emissionTexture",void 0),(0,Je._)([ta({dispose:!0})],ul.prototype,"occlusionTexture",void 0),(0,Je._)([ta({dispose:!0})],ul.prototype,"normalTexture",void 0),(0,Je._)([ta()],ul.prototype,"objectOpacity",void 0),(0,Je._)([vS()],ul.prototype,"commonMaterialParameters",void 0),(0,Je._)([vS()],ul.prototype,"componentParameters",void 0),(0,Je._)([ta()],ul.prototype,"textureAlphaCutoff",void 0),(0,Je._)([ta()],ul.prototype,"alphaDiscardMode",void 0),(0,Je._)([ta()],ul.prototype,"isIntegratedMesh",void 0),(0,Je._)([ta()],ul.prototype,"polygonOffsetEnabled",void 0),(0,Je._)([ta()],ul.prototype,"ellipsoidMode",void 0),(0,Je._)([ta()],ul.prototype,"hasOccludees",void 0),function(d){d[d.VERTEX=0]="VERTEX",d[d.GROUND=1]="GROUND",d[d.SCREEN_DERIVATIVE=2]="SCREEN_DERIVATIVE"}(bS||(bS={})),function(d){d[d.Opaque=0]="Opaque",d[d.Transparent=1]="Transparent",d[d.OpaqueAndTransparent=2]="OpaqueAndTransparent",d[d.IntegratedMesh=3]="IntegratedMesh"}(Pc||(Pc={}));class eE extends aC{constructor(){super(...arguments),this.doubleSided=!1,this.cullFace=Gi.Vr.Back,this.hasSlicePlane=!0}}(0,Je._)([ta()],eE.prototype,"doubleSided",void 0),(0,Je._)([ta()],eE.prototype,"cullFace",void 0),(0,Je._)([ta()],eE.prototype,"hasSlicePlane",void 0);class ny extends aC{constructor(){super(...arguments),this.externalColor=(0,P0.f)(1,1,1,1),this.externalColorMixMode=qg.a9.Multiply,this.castShadows=$a.All}get transparent(){return this.externalColor[3]<1?$a.All:$a.None}get opaqueOverride(){return this.externalColorMixMode===qg.a9.Replace&&1===this.externalColor[3]?$a.All:$a.None}get visible(){return this.externalColor[3]>0?$a.All:$a.None}get type(){return sy._N.Uniform}}(0,Je._)([ta({vectorOps:Ml.v})],ny.prototype,"externalColor",void 0),(0,Je._)([ta()],ny.prototype,"externalColorMixMode",void 0),(0,Je._)([ta()],ny.prototype,"castShadows",void 0),function(d){d[d.All=0]="All",d[d.Some=1]="Some",d[d.None=2]="None"}($a||($a={}));class oy extends aC{constructor(){super(...arguments),this.texture=null,this.transparent=$a.None,this.opaqueOverride=$a.None,this.castShadows=$a.None}get type(){return sy._N.Varying}}(0,Je._)([ta()],oy.prototype,"texture",void 0),(0,Je._)([ta()],oy.prototype,"transparent",void 0),(0,Je._)([ta()],oy.prototype,"opaqueOverride",void 0),(0,Je._)([ta()],oy.prototype,"castShadows",void 0);var f_=T(7184),rj=T(51445);class sj{constructor(v){this.maxCount=v,this._nextIndex=0,this.recycledIndices=[]}get activeCount(){return this._nextIndex-this.recycledIndices.length}get availableCount(){return this.recycledIndices.length+this.maxCount-this._nextIndex}acquire(){return this.recycledIndices.length>0?this.recycledIndices.pop():this.availableCount?this._nextIndex++:void 0}release(v){this.recycledIndices.push(v)}}class ij{constructor(v,O=1){this.rctx=v,this.fieldCount=O,this.textureWidth=4096,this.dirty=!0,this.texture=new Va.x(this.rctx,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.NEAREST,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:this.textureWidth,height:1,flipped:!1}),this.data=new B1.mc(new ArrayBuffer(4*this.textureWidth))}dispose(){this.texture.dispose(),this.texture=void 0,this.data=void 0}setData(v,O,A,j,te,pe){const be=v*this.fieldCount+O;this.dirty=!0,this.data.set(be,0,A),this.data.set(be,1,j),this.data.set(be,2,te),this.data.set(be,3,pe)}setDataElement(v,O,A,j){const te=v*this.fieldCount+O;this.dirty=!0,this.data.set(te,A,j)}resizeToFit(v){const O=v*this.fieldCount;if(O>=this.data.count){const A=Math.ceil((O+1)/this.textureWidth)*this.textureWidth,j=new B1.mc(new ArrayBuffer(4*A));j.typedBuffer.set(this.data.typedBuffer),this.data=j}}updateTexture(){if(!this.dirty)return;const v=this.texture.descriptor.width;this.data.count>v*this.texture.descriptor.height&&this.texture.resize(v,this.data.count/v),this.texture.setData(this.data.typedBuffer),this.dirty=!1}bind(v,O,A){v.bindTexture(O,this.texture),v.setUniform2f(A,1/this.texture.descriptor.width,1/this.texture.descriptor.height)}}class nj{constructor(v,O=1){this.textureBuffer=new ij(v,O),this.indexManager=new sj(65536)}dispose(){this.textureBuffer.dispose(),this.textureBuffer=void 0}get availableCount(){return this.indexManager.availableCount}get activeCount(){return this.indexManager.activeCount}acquireIndex(){const v=this.indexManager.acquire();return this.textureBuffer.resizeToFit(v),v}releaseIndex(v){this.indexManager.release(v)}}class CS{constructor(v,O=1){this.rctx=v,this.fieldCount=O,this.buffers=[]}garbageCollect(){this.buffers=this.buffers.filter(v=>0!==v.activeCount||(v.dispose(),!1))}destroy(){this.buffers.forEach(v=>v.dispose()),this.buffers=[]}getBuffer(v){for(const A of this.buffers)if(A.availableCount>=v)return A;if(v>65536)return null;const O=new nj(this.rctx,this.fieldCount);return this.buffers.push(O),O}updateTextures(){for(const v of this.buffers)v.textureBuffer.updateTexture()}}const OS=vo.Z.getLogger("esri.views.3d.webgl-engine.collections.Component.ComponentObjectCollection");class oj{constructor(v,O){this._renderManager=v,this._viewingMode=O,this._objects=[new La.Z,new La.Z],this._renderSubmit=new k9(this),this._renderManager.register(this._renderSubmit),this._componentBufferManager=new CS(v.rctx,2)}dispose(){(0,_d.hu)(0===this._objects[k1.Z.Hidden].length&&0===this._objects[k1.Z.Visible].length,"ObjectCollection should be empty upon disposal"),this._componentBufferManager.destroy()}createObject(v){const O=new k1.c;return O.toMapSpace=v.toMapSpace,O.transform=v.transform,O.obb=(0,ey.d9)(v.obb),O.components=new S9(this._componentBufferManager,v.geometry.componentOffsets),O.renderable=this._createRenderable(v,O.components),O.intersectionGeometry=new j9(v.geometry.positionData,O.components),this._objects[O.visible].push(O),O}destroyObject(v){const O=v;this._objects[O.visible].removeUnordered(O),O.dispose(),this._notifyDirty()}setObjectVisibility(v,O){const A=v;O!==A.visible&&(this._objects[A.visible].removeUnordered(A),this._objects[O].push(A),A.visible=O,this._notifyDirty())}preSubmit(v){const O=v.camera.eye;this.visibleObjects.forAll(A=>A.renderable.meta.cameraDepthSquared=(0,Et.d)(O,A.obb.center))}getMaterial(v){return v.renderable.material}updateMaterial(v,O){const A=v.renderable.material;O(A),A.dirty&&this._notifyDirty()}setAllComponentVisibilities(v,O){const A=v;A.components.visibility.reset(O),A.components.visibilityDirty(),this._notifyDirty()}forEachVisibleComponent(v,O){return v.components.visibility.forEachComponent(O)}getComponentCount(v){const O=v,A=O.components.visibility.componentCount();return{visible:A,invisible:O.components.count-A}}setComponentData(v,O){const A=v,j=A.renderable.material,te=A.components,pe=te.materialDataBuffer,be=te.materialDataIndices,Re={castShadows:!0,pickable:!0,externalColor:(0,P0.c)(),externalColorMixMode:qg.a9.Multiply,elevationOffset:0},Ge=pe.textureBuffer,tt=new Uint8Array(4),ft=new Uint32Array(tt.buffer);let yt=0,It=0,Nt=0,Rt=te.verticalOffsets,Jt=1/0,jt=-1/0,ir=!1,or=!1,pr=0;for(let Lr=0;Lr<te.count;Lr++)O(Lr,Re),yt+=+(Re.externalColor[3]<1),It+=+(Re.externalColorMixMode===qg.a9.Replace&&1===Re.externalColor[3]),Nt+=+Re.castShadows,(0,qg.HB)(Re.externalColor,Re.externalColorMixMode,tt),tt[2]=254&tt[2]|+Re.castShadows,Ge.setData(be[Lr],0,tt[0],tt[1],tt[2],tt[3]),ir||(ir=Lr>0&&pr!==ft[0]),pr=ft[0],or||(or=0!==Re.elevationOffset),or&&(0,at.Wi)(Rt)&&(Rt=new Array(Lr).fill(0)),(0,at.pC)(Rt)&&(Rt[Lr]=Re.elevationOffset),Jt=Math.min(Jt,Re.elevationOffset),jt=Math.max(jt,Re.elevationOffset),(0,sy.nO)(Re.elevationOffset,tt),Ge.setData(be[Lr],1,tt[0],tt[1],tt[2],tt[3]),Re.pickable!==cS(te.pickability,Lr)&&(te.pickability=L9(te.pickability,te.count,Lr,Re.pickable));te.verticalOffsets=or?Rt:null,A.offsetObb=or?(0,O9.gI)(A.obb,Jt,jt,this._viewingMode,(0,at.pC)(A.offsetObb)?A.offsetObb:(0,ey.d9)(A.obb)):null,ir||or?(j.componentParameters=new oy,j.componentParameters.castShadows=cC(Nt,te.count),j.componentParameters.transparent=cC(yt,te.count),j.componentParameters.opaqueOverride=cC(It,te.count),j.componentParameters.texture=Ge,Ge.updateTexture()):(j.componentParameters=new ny,j.componentParameters.castShadows=Re.castShadows?$a.All:$a.None,j.componentParameters.externalColor=Re.externalColor,j.componentParameters.externalColorMixMode=Re.externalColorMixMode),this._notifyDirty()}getComponentAabb(v,O,A,j=!1){v.intersectionGeometry.getComponentAabb(O,A);const te=v,pe=te.components.verticalOffsets;if(j||(0,at.Wi)(pe))return A;const be=pe[O];if(this._viewingMode===dn.JY.Local||0===be)return A[2]+=be,A[5]+=be,A;const Re=(0,at.Wg)((0,Vu.iO)(be));return Re.localOrigin=te.transform.position,Re.applyToAabb(A)}getComponentObb(v){return v.obb}getObjectTransform(v){return v.transform}getComponentPositions(v,O,A){return v.intersectionGeometry.getComponentPositions(O,A)}intersect(v,O,A,j,te,pe){const be=v;(0,at.pC)(te)&&(te.localOrigin=be.transform.position);const Re=(0,Ta.e)(PS,be.transform.rotationScale);(0,Et.v)(tE,O,be.transform.position),(0,Et.v)(rE,A,be.transform.position),(0,Et.t)(tE,tE,Re),(0,Et.t)(rE,rE,Re);const Ge=(0,Ta.t)(PS,Re);return be.intersectionGeometry.intersect(tE,rE,j,Ge,te,be.components.verticalOffsets,pe)}addEdges(v,O,A,j){const te=v,{indices:pe,positions:be}=te.intersectionGeometry,Re=te.components.offsets;return O.addComponentObject(v,te.transform,{center:te.obb.center,radius:(0,ey.q0)(te.obb)},be,pe,Re,A,j)}extractEdgeInformation(v,O,A){var j=this;return(0,oi.Z)(function*(){const te=v,pe=te.components.visibility;if(pe.allInvisible())return{buffer:rj.extractComponentsEdgeLocationsLayout.createBuffer(0),origin:[0,0,0]};const{indices:be,positions:Re}=te.intersectionGeometry,Ge=te.components.offsets,tt=f_.tf.createBuffer(Re.count);(0,lS.c)(tt.position,Re),(0,C9.a)(tt.position,tt.position,te.transform.rotationScale),j._setComponentIndices(tt.componentIndex,be,Ge);const yt=j._computeVisibilityIndices(be,pe,Ge,tt.count);return{origin:(0,br.a)(te.transform.position),buffer:yield O.extractComponentsEdgeLocations({indices:yt,indicesLength:yt.length,skipDeduplicate:!0,data:tt,writerSettings:{reducedPrecision:!1,variants:0}},A)}})()}_setComponentIndices(v,O,A){let j=0;for(let te=0;te<A.length-1;te++){const be=A[te+1];for(let Re=A[te];Re<be;Re++)v.set(O?O[Re]:Re,j);j++}}_computeVisibilityIndices(v,O,A,j){if(v&&O.allVisible())return v;let te=0;O.forEachComponentRange((Re,Ge)=>(te+=A[Ge]-A[Re],!0));const pe=2===v?.BYTES_PER_ELEMENT||j<=65536?new Uint16Array(te):new Uint32Array(te);let be=0;return O.forEachComponentRange((Re,Ge)=>{const ft=A[Ge];for(let yt=A[Re];yt<ft;yt++)pe[be++]=v?v[yt]:yt;return!0}),pe}addComponentHighlight(v,O){const A=v.components;(0,at.Wi)(A.highlightCounts)&&(A.highlightCounts=new Uint32Array(A.count+1)),0==A.highlightCounts[O]++&&(A.highlightsDirty(),this._notifyDirty()),A.highlightCounts[A.count]++}removeComponentHighlight(v,O){const A=v.components;if((0,at.Wi)(A.highlightCounts))return void OS.warn("Removing non-existing highlight.");const j=A.highlightCounts[O],te=A.highlightCounts[A.count];if(0!==j){if(j>1)return A.highlightCounts[O]=j-1,void(A.highlightCounts[A.count]=te-1);A.highlightCounts[O]=0,A.highlightsDirty(),this._notifyDirty(),1===te?A.highlightCounts=null:A.highlightCounts[A.count]=te-1}else OS.warn("Removing non-existing highlight.")}clearHighlights(v){const O=v.components;(0,at.pC)(O.highlightCounts)&&(O.highlightCounts=null,O.highlightsDirty(),this._notifyDirty())}getObjectGPUMemoryUsage(v){return v.renderable.meta.gpuMemoryEstimate}get visibleObjects(){return this._objects[k1.Z.Visible]}_createRenderable(v,O){const A=this._renderManager.rctx,j=v.geometry,te=j.vertices.layoutParameters,pe=Bl.f.createVertex(A,Gt.l1.STATIC_DRAW,j.vertices.data),be=(0,at.yw)(j.indices,Rt=>Bl.f.createIndex(A,Gt.l1.STATIC_DRAW,Rt)),Re=(0,z_.K)((0,$9.N)(te)),Ge=new Uint16Array(j.vertices.count);for(let Rt=0;Rt<O.count;Rt++){const Jt=O.offsets[Rt],jt=O.offsets[Rt+1],ir=O.materialDataIndices[Rt];if((0,at.pC)(j.indices))for(let or=Jt;or<jt;or++)Ge[j.indices[or]]=ir;else for(let or=Jt;or<jt;or++)Ge[or]=ir}const tt=Bl.f.createVertex(A,Gt.l1.STATIC_DRAW,Ge.buffer),ft=new ul(v.transform,v.toMapSpace),yt=new ju.U(A,ft.attributeLocations,{data:Re,componentIndices:aj},{data:pe,componentIndices:tt},(0,at.Wg)(be)),It=new dS(yt,Gt.MX.TRIANGLES,te,(0,at.pC)(be)),Nt={cameraDepthSquared:.5,gpuMemoryEstimate:pe.byteSize+tt.byteSize+((0,at.pC)(be)?be.byteSize:0)};return new W9(ft,It,Nt)}_notifyDirty(){this._renderManager.notifyDirty()}}const aj=(0,z_.K)((0,l0.U$)().u16(No.T.COMPONENTINDEX));function cC(d,v){return d===v?$a.All:0===d?$a.None:$a.Some}const PS=(0,kf.c)(),tE=(0,br.c)(),rE=(0,br.c)();var lj=T(45323),DS=T(70264),Vl=T(54580);class ay extends Ka.A{initializeProgram(v){const O=ay.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){if(this.configuration.function===Vl.v3.TransparentToHUDVisibility)return(0,Ti.sm)({colorWrite:{r:!1,g:!0,b:!1,a:!1}});switch(this.configuration.alphaMode){case Vl.Fv.None:return(0,Ti.sm)({colorWrite:Ti.BK});case Vl.Fv.Alpha:return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK});default:return(0,Ti.sm)({blending:(0,Ti.if)(Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK})}}}ay.shader=new Ga.J(DS.a,()=>T.e(505).then(T.bind(T,40505)));class cj{constructor(v,O){this._rctx=v,this._techniqueRepository=O,this._configuration=new Vl.ZB,this._passParameters=new DS.C}dispose(){this._vao=(0,at.O3)(this._vao)}compositeTransparent(v,O,A,j,te=1){this._configuration.alphaMode=Vl.Fv.Alpha,this._configuration.function=Vl.v3.Transparency,this._configuration.hasOpacityFactor=1!==te,this._passParameters.colorTexture=O,this._passParameters.alphaTexture=A,this._passParameters.frontFaceTexture=j;const pe=this._rctx,be=this._techniqueRepository.acquire(ay,this._configuration);pe.bindTechnique(be,this._passParameters,v);const Re=this._ensureVAO();pe.bindVAO(Re),pe.drawArrays(Gt.MX.TRIANGLE_STRIP,0,(0,ll._V)(Re,"geometry")),be.release()}composite(v,O,A=Vl.Fv.None,j=1,te=Vl.v3.Standard,pe=en.fu.INNER){const be=this._rctx;this._configuration.alphaMode=A,this._configuration.function=te,this._configuration.hasOpacityFactor=1!==j,this._passParameters.overlayIndex=pe,this._passParameters.texture=O,this._passParameters.opacity=j;const Re=this._techniqueRepository.acquire(ay,this._configuration);be.bindTechnique(Re,this._passParameters,v);const Ge=this._ensureVAO();be.bindVAO(Ge),be.drawArrays(Gt.MX.TRIANGLE_STRIP,0,(0,ll._V)(Ge,"geometry")),Re.release()}_ensureVAO(){return(0,at.Wi)(this._vao)&&(this._vao=(0,Ul.ow)(this._rctx)),this._vao}}var sE=T(36161),I0=T(82274);function pj(d,v,O){return(0,sE.v)(v,d)*(O[1]-O[0])+O[0]}function dC(d,v,O){if(!O.isVisible||!(0,to.hr)(v.frustum,O.boundingVolumeWorldSpace.bounds))return;const A=O.transformation,j=bj;O.geometryRecords.forEach(te=>{(0,on.m)(j,A,te.getShaderTransformation());const pe=(0,Ec.u1)(j);xS(d,v,te.geometry.boundingInfo,j,pe)})}function xS(d,v,O,A,j){if((0,at.Wi)(O))return;const te=v.eye,pe=v.viewForward;(0,Et.m)(zl,O.center,A);const be=pe[0]*(zl[0]-te[0])+pe[1]*(zl[1]-te[1])+pe[2]*(zl[2]-te[2]);if(zl[3]=O.radius*j,!(be-zl[3]>d.near&&be+zl[3]<d.far)&&(0,to.hr)(v.frustum,zl))if(O.radius>100&&O.getChildren()){const Re=O.getChildren();for(let Ge=0;Ge<8;++Ge)Re[Ge]&&xS(d,v,Re[Ge],A,j)}else _C.unionDepthRangeWithAABB(d,v.viewProjectionMatrix,A,O.bbMin,O.bbMax)}function SS(d,v,O){const A=v.eye,j=v.viewForward,te=(O[0]-A[0])*j[0]+(O[1]-A[1])*j[1]+(O[2]-A[2])*j[2];d.near=Math.min(d.near,te-O[3]),d.far=Math.max(d.far,te+O[3])}const hC=[[0,1,3],[2,3,1],[1,5,2],[6,2,5],[5,4,6],[7,6,4],[4,0,7],[3,7,0],[3,2,7],[6,7,2],[4,5,0],[1,0,5]],zl=(0,qo.c)(),bj=(0,ao.c)(),Md=ty(),sm=new class vj{constructor(){this._items=new La.Z({allocator:v=>v||{obj:null,distance:0,near:0,far:0},deallocator:v=>(v.obj=null,v.distance=0,v.near=0,v.far=0,v)})}get length(){return this._items.length}get empty(){return 0===this._items.length}clear(){this._items.clear()}add(v){this._items.pushNew().obj=v}sort(v){const O=v.eye,A=v.viewForward;this._items.forAll(j=>{const te=j.obj.boundingVolumeWorldSpace.bounds,pe=(te[0]-O[0])*A[0]+(te[1]-O[1])*A[1]+(te[2]-O[2])*A[2];j.distance=pe,j.near=pe-te[3],j.far=pe+te[3]}),this._items.sort((j,te)=>j.distance-te.distance)}forEachInDepthRange(v,O,A){if(O===I0.Z.DepthOrder.FRONT_TO_BACK)for(let j=0;j<this._items.length;++j){const te=this._items.data[j];te.far<v.near||te.near>v.far||A(te.obj,te.near,te.far)}else for(let j=this._items.length-1;j>=0;--j){const te=this._items.data[j];te.far<v.near||te.near>v.far||A(te.obj,te.near,te.far)}}},Tj=new class Ej{constructor(){this.view=(0,ao.c)(),this.viewProj=(0,ao.c)(),this.frustum=(0,to.Ue)(),this.geometries=[],this.near=[],this.far=[],this.nearCandidates=[],this.farCandidates=[],this.range={near:0,far:0},this.looseRange={near:0,far:0}}compute(v,O){this._reset(),(0,on.c)(this.view,v.viewMatrix),(0,on.m)(this.viewProj,v.projectionMatrix,this.view),(0,to.JG)(this.frustum,v.frustum);const A=this.view,j=A[2],te=A[6],pe=A[10],be=A[14],Re=this.range;let Ge=0;if(O.forEach(It=>{if(!It.instanceParameters.visible||!It.castShadow)return;let Nt;It.hasShaderTransformation?(It.computeBoundingSphere(It.getShaderTransformation(),zl,1),Nt=zl):Nt=It.boundingSphere;const Rt=j*Nt[0]+te*Nt[1]+pe*Nt[2]+be,Jt=Rt-Nt[3],jt=Rt+Nt[3];this.geometries[Ge]=It,this.near[Ge]=-jt,this.far[Ge]=-Jt,++Ge}),0===this.geometries.length)return Re;for(let It=0;It<this.geometries.length;++It)this.near[It]>Re.far&&(Re.far=this.near[It]),this.near[It]>2&&this.far[It]<Re.near&&(Re.near=this.far[It]);const tt=this.looseRange;tt.near=Math.max(.5*Re.near,2),tt.far=2*Re.far;let ft=0,yt=0;for(let It=0;It<this.geometries.length;++It)this.near[It]<Re.near&&(this.near[It]>=tt.near?Re.near=this.near[It]:this.nearCandidates[ft++]=It),this.far[It]>Re.far&&(this.far[It]<=tt.far?Re.far=this.far[It]:this.farCandidates[yt++]=It);if(0===this.nearCandidates.length&&0===this.farCandidates.length)return Re;this.nearCandidates.sort((It,Nt)=>this.near[It]<this.near[Nt]?-1:this.near[It]>this.near[Nt]?1:0),this.farCandidates.sort((It,Nt)=>this.far[It]<this.far[Nt]?1:this.far[It]>this.far[Nt]?-1:0);for(let It=0;It<this.nearCandidates.length;++It){const Nt=this.nearCandidates[It];if(this.near[Nt]<Re.near){const Rt=this.geometries[Nt];this._includeNearBoundingInfoRec(Rt.boundingInfo,Rt.getShaderTransformation())}}for(let It=0;It<this.farCandidates.length;++It){const Nt=this.farCandidates[It];if(this.far[Nt]>Re.far){const Rt=this.geometries[Nt];this._includeFarBoundingInfoRec(Rt.boundingInfo,Rt.getShaderTransformation())}}return Re}_reset(){this.geometries.length=0,this.near.length=0,this.far.length=0,this.nearCandidates.length=0,this.farCandidates.length=0,this.range.near=Number.MAX_VALUE,this.range.far=-Number.MAX_VALUE}_includeNearBoundingInfoRec(v,O){if((0,at.Wi)(v))return;const A=v.getCenter();(0,Et.m)(zl,A,O);const j=(0,Ec.u1)(O),te=zl[0],pe=zl[1],be=zl[2],Re=v.getBSRadius()*j,Ge=this.frustum;if(Ge[0][0]*te+Ge[0][1]*pe+Ge[0][2]*be+Ge[0][3]>Re||Ge[1][0]*te+Ge[1][1]*pe+Ge[1][2]*be+Ge[1][3]>Re||Ge[2][0]*te+Ge[2][1]*pe+Ge[2][2]*be+Ge[2][3]>Re||Ge[3][0]*te+Ge[3][1]*pe+Ge[3][2]*be+Ge[3][3]>Re)return;const tt=this.view[2]*te+this.view[6]*pe+this.view[10]*be+this.view[14],ft=tt+Re;if(!(-(tt-Re)<2||-ft>=this.range.near))if(-ft>this.looseRange.near)this.range.near=-ft;else{if(Re>100){const yt=v.getChildren();if(void 0!==yt){for(let It=0;It<8;++It)void 0!==yt[It]&&this._includeNearBoundingInfoRec(yt[It],O);return}}_C.unionDepthRangeWithAABB(this.range,this.viewProj,O,v.getBBMin(),v.getBBMax())}}_includeFarBoundingInfoRec(v,O){if((0,at.Wi)(v))return;let A=v.getBSRadius();const j=v.getCenter();(0,Et.m)(zl,j,O);const te=(0,Ec.u1)(O),pe=zl[0],be=zl[1],Re=zl[2];A*=te;const Ge=this.frustum;if(Ge[0][0]*pe+Ge[0][1]*be+Ge[0][2]*Re+Ge[0][3]>A||Ge[1][0]*pe+Ge[1][1]*be+Ge[1][2]*Re+Ge[1][3]>A||Ge[2][0]*pe+Ge[2][1]*be+Ge[2][2]*Re+Ge[2][3]>A||Ge[3][0]*pe+Ge[3][1]*be+Ge[3][2]*Re+Ge[3][3]>A)return;const tt=this.view[2]*pe+this.view[6]*be+this.view[10]*Re+this.view[14]-A;if(!(-tt<=this.range.far))if(-tt<this.looseRange.far)this.range.far=-tt;else{if(A>100){const ft=v.getChildren();if(void 0!==ft){for(let yt=0;yt<8;++yt)void 0!==ft[yt]&&this._includeFarBoundingInfoRec(ft[yt],O);return}}_C.unionDepthRangeWithAABB(this.range,this.viewProj,O,v.getBBMin(),v.getBBMax())}}},_C=new class Mj{constructor(){this.modelViewProj=(0,ao.c)(),this.clipPosition=[(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)(),(0,Ao.c)()]}unionDepthRangeWithAABB(v,O,A,j,te){const pe=this.modelViewProj;(0,on.m)(pe,O,A);let be=!1;for(let Re=0;Re<8;++Re){const Ge=this.clipPosition[Re],tt=0===Re||3===Re||4===Re||7===Re?j[0]:te[0],ft=0===Re||1===Re||4===Re||5===Re?j[1]:te[1],yt=Re<4?j[2]:te[2];Ge[0]=pe[0]*tt+pe[4]*ft+pe[8]*yt+pe[12],Ge[1]=pe[1]*tt+pe[5]*ft+pe[9]*yt+pe[13],Ge[2]=pe[2]*tt+pe[6]*ft+pe[10]*yt+pe[14],Ge[3]=pe[3]*tt+pe[7]*ft+pe[11]*yt+pe[15]}for(let Re=0;Re<12;++Re){const yt=this._clipTriangle(this.clipPosition[hC[Re][0]],this.clipPosition[hC[Re][1]],this.clipPosition[hC[Re][2]]);let It=!0;for(let Nt=0;Nt<yt.length;++Nt)if(yt[Nt][3]>=2){It=!1;break}if(!It){be=!0;for(let Nt=0;Nt<yt.length;++Nt){const Rt=yt[Nt][3];Rt<v.near&&(v.near=Rt),Rt>v.far&&(v.far=Rt)}}}return be}_inside(v,O){return 0===O?v[0]>=-v[3]:1===O?v[1]>=-v[3]:2===O?v[0]<=v[3]:3===O?v[1]<=v[3]:void(0,_d.hu)(!1)}_intersect(v,O,A){let j=0;return 0===A?j=(-v[3]-v[0])/(O[0]-v[0]+O[3]-v[3]):1===A?j=(-v[3]-v[1])/(O[1]-v[1]+O[3]-v[3]):2===A?j=(v[3]-v[0])/(O[0]-v[0]-O[3]+v[3]):3===A&&(j=(v[3]-v[1])/(O[1]-v[1]-O[3]+v[3])),(0,Ml.l)((0,Ao.c)(),v,O,j)}_clipTriangle(v,O,A){let j=[v,O,A];for(let te=0;te<4;++te){const pe=j;j=[];for(let be=0;be<pe.length;++be){const Re=pe[be],Ge=pe[(be+1)%pe.length];this._inside(Ge,te)?(this._inside(Re,te)||j.push(this._intersect(Re,Ge,te)),j.push(Ge)):this._inside(Re,te)&&j.push(this._intersect(Re,Ge,te))}}return j}};var Cj=T(50907),AS=T(78038),Oj=T(66054),Pj=T(22355),pC=T(66838);class Dj extends Fd.K{constructor(){super(...arguments),this.maskEnabled=!1,this.overlayEnabled=!1}}function fC(){return fC=(0,oi.Z)(function*(d){const v=T.e(9080).then(T.bind(T,29080)),O=T.e(5690).then(T.bind(T,5690)),A=(0,V_.t)((yield v).default,{signal:d}),j=(0,V_.t)((yield O).default,{signal:d}),te={mask:yield A,overlay:yield j};return(0,fi.k_)(d),te}),fC.apply(this,arguments)}let im=class extends Li.Z{constructor(){super(...arguments),this._handles=new so.Z,this._magnifier=null,this._imageSources=null,this._imageLoadTask=null,this._resources=null,this._passParameters=new Dj,this.events=new vc.Z,this.attributeLocations=new Map([[No.T.POSITION,0]]),this.tmpScreenPoint=(0,rn.s1)(),this.tmpRenderPoint=(0,rn.gX)()}get updating(){return(0,at.Wi)(this._imageSources)&&(0,at.pC)(this._imageLoadTask)&&!this._imageLoadTask.task.finished}get magnifier(){return this._magnifier}set magnifier(d){if(d===this._magnifier)return;this._handles.removeAll(),this._magnifier=d;const v=()=>{this._updateResourceLoading(),this.events.emit("request-render")};(0,at.pC)(this._magnifier)&&this._handles.add((0,wr.YP)(()=>(0,at.yw)(this._magnifier,O=>O.version),v)),v()}get enabled(){return(0,at.pC)(this._validMagnifier)}get _validMagnifier(){return(0,at.pC)(this._magnifier)&&this._magnifier.visible&&(0,at.pC)(this._magnifier.position)&&this._magnifier.size>0?this._magnifier:null}get factor(){return(0,at.pC)(this._magnifier)&&this._magnifier.factor||1}dispose(){this._magnifier=null,this._handles.destroy(),(0,at.pC)(this._imageLoadTask)&&(this._imageLoadTask.task.abort(),this._imageLoadTask=null),this._disposeResources()}render(d,v){const O=this._validMagnifier;if((0,at.Wi)(O))return;const A=v.camera.pixelRatio,j=Math.ceil(A*O.size);if(this._updateResources(d,j),(0,at.Wi)(this._resources))return;this._passParameters.maskEnabled=O.maskEnabled,this._passParameters.overlayEnabled=O.overlayEnabled;const te=this._resources.program;d.useProgram(te),te.bindPass(this._passParameters,v);const pe=this._resources.textures,be=Math.ceil(1/this.factor*j);pe.input.resize(be,be);const Re=v.camera.fullWidth,Ge=v.camera.fullHeight;(0,rn.md)(O.position,this.tmpScreenPoint);const tt=v.camera.screenToRender(this.tmpScreenPoint,this.tmpRenderPoint),ft=.5*be,yt=.5*be;tt[0]=(0,cs.uZ)(tt[0],ft,Re-ft-1),tt[1]=(0,cs.uZ)(tt[1],yt,Ge-yt-1);const It=Math.floor(tt[0]-ft),Nt=Math.floor(tt[1]-yt);te.bindTexture("textureInput",pe.input),d.gl.copyTexImage2D(pe.input.descriptor.target,0,pe.input.descriptor.pixelFormat,It,Nt,be,be,0);const jt=(tt[0]+O.offset.x*A)/Re*2-1,ir=(tt[1]-O.offset.y*A)/Ge*2-1,or=j/Re*2,pr=j/Ge*2;d.bindVAO(this._resources.vao),te.bindTexture("textureOverlay",pe.overlay),te.bindTexture("textureMask",pe.mask),te.setUniform4f("drawPosition",jt,ir,or,pr),d.setPipelineState(this._resources.pipelineState),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4)}_updateResourceLoading(){var d=this;const v=this._validMagnifier;if((0,at.Wi)(v))return;const O=v.maskUrl,A=v.overlayUrl;!(0,at.pC)(this._imageLoadTask)||this._imageLoadTask.maskUrl===O&&this._imageLoadTask.overlayUrl===A||(this._imageLoadTask.task.abort(),this._imageLoadTask=null,this._imageSources=null),(0,at.pC)(this._imageSources)||(0,at.pC)(this._imageLoadTask)||(this._imageLoadTask={maskUrl:O,overlayUrl:A,task:(0,fi.vr)(function(){var j=(0,oi.Z)(function*(te){const pe=(0,at.Wi)(O)||(0,at.Wi)(A)?function Sj(d){return fC.apply(this,arguments)}(te):null,be=(0,at.pC)(O)?(0,V_.t)(O,{signal:te}):pe.then(Ge=>Ge.mask),Re=(0,at.pC)(A)?(0,V_.t)(A,{signal:te}):pe.then(Ge=>Ge.overlay);d._imageSources={mask:yield be,overlay:yield Re},d._disposeResources(),d.events.emit("request-render")});return function(te){return j.apply(this,arguments)}}())},this._imageLoadTask.task.promise.then(()=>this.notifyChange("updating"),()=>this.notifyChange("updating")))}_updateResources(d,v){if(!this.enabled)return void this._disposeResources();if((0,at.pC)(this._resources)){if(this._resources.textures.size!==v){const A=this._createTextureResources(d,v);if((0,at.Wi)(A))return void this._disposeResources();this._disposeTextureResources(this._resources.textures),this._resources.textures=A}return}const O=this._createTextureResources(d,v);(0,at.Wi)(O)||(this._resources={textures:O,program:this._createProgram(d),vao:(0,Ul.ow)(d,tg.QI,this.attributeLocations,0,1),pipelineState:(0,Ti.sm)({blending:(0,Ti.if)(Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA),depthTest:null,depthWrite:null,colorWrite:Ti.BK})})}_disposeResources(){(0,at.Wi)(this._resources)||(this._disposeTextureResources(this._resources.textures),this._resources.program.dispose(),this._resources.vao.dispose(),this._resources=null)}_disposeTextureResources(d){d.mask.dispose(),d.overlay.dispose(),d.input.dispose()}_createTextureResources(d,v){if((0,at.Wi)(this._imageSources))return null;this._imageSources.overlay.width=v,this._imageSources.overlay.height=v,this._imageSources.mask.width=v,this._imageSources.mask.height=v;const O=new Va.x(d,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,internalFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,flipped:!0,preMultiplyAlpha:!(0,sM.zd)(this._imageSources.overlay.src)||!d.driverTest.svgAlwaysPremultipliesAlpha},this._imageSources.overlay),A=new Va.x(d,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.ALPHA,internalFormat:Gt.VI.ALPHA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,flipped:!0},this._imageSources.mask);return{input:new Va.x(d,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,internalFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR,flipped:!1}),mask:A,overlay:O,size:v}}_createProgram(d){return new Wa.$(d,function xj(){const d=new Pj.kG;return d.attributes.add(No.T.POSITION,"vec2"),d.vertex.uniforms.add(new Oj.y("drawPosition")),d.varyings.add("vUV","vec2"),d.vertex.code.add(Fd.H`void main(void) {
vUV = position;
gl_Position = vec4(drawPosition.xy + vec2(position - 0.5) * drawPosition.zw, 0.0, 1.0);
}`),d.fragment.uniforms.add(new pC.Q("textureInput")),d.fragment.uniforms.add(new pC.Q("textureMask")),d.fragment.uniforms.add(new pC.Q("textureOverlay")),d.fragment.uniforms.add(new AS.U("maskEnabled",v=>v.maskEnabled)),d.fragment.uniforms.add(new AS.U("overlayEnabled",v=>v.overlayEnabled)),d.fragment.code.add(Fd.H`const float barrelFactor = 1.1;
vec2 barrel(vec2 uv) {
vec2 uvn = uv * 2.0 - 1.0;
if (uvn.x == 0.0 && uvn.y == 0.0) {
return vec2(0.5, 0.5);
}
float theta = atan(uvn.y, uvn.x);
float r = pow(length(uvn), barrelFactor);
return r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;
}
void main() {
float mask = maskEnabled ? texture2D(textureMask, vUV).a : 1.0;
vec4 inputColor = texture2D(textureInput, barrel(vUV)) * mask;
vec4 overlayColor = overlayEnabled ? texture2D(textureOverlay, vUV) : vec4(0);
gl_FragColor = overlayColor + (1.0 - overlayColor.a) * inputColor;
}`),d}(),this.attributeLocations)}};(0,Je._)([(0,ht.Cb)()],im.prototype,"_imageSources",void 0),(0,Je._)([(0,ht.Cb)()],im.prototype,"_imageLoadTask",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],im.prototype,"updating",null),im=(0,Je._)([(0,Ds.j)("esri/views/3d/webgl-engine/lib/MagnifierHelper")],im);const Lj=(0,ro.HA)(1e3/30);var ly;!function(d){d[d.FrontToBack=0]="FrontToBack",d[d.BackToFront=1]="BackToFront"}(ly||(ly={}));class vp{constructor(v,O,A=ly.FrontToBack){this._rctx=v,this._techniqueRepository=O,this._sorting=A,this._draws=new La.Z({initialSize:32,allocator:j=>j||{material:null,geometry:null,geometryRanges:null,bindDrawParams:null,depthSquaredHint:0,indexType:0}}),this._previouslyBoundDraw=new Map}submitDraw(v,O,A,j){const te=this._draws.pushNew();te.geometry=O,te.geometryRanges=A,te.material=v,te.depthSquaredHint=j,te.indexType=O.indexed?(0,at.Wg)(O.vao.indexBuffer).indexType:0}dispatch(v,O){const A=this._rctx;this._previouslyBoundDraw.clear();let j=null;const te=this._draws.map(be=>be.material.prepareTechnique(this._techniqueRepository,v,O,be.geometry.parameters)),pe=this._draws.length;for(let be=0;be<pe;be++){const Re=te[be];Re===j&&Re.configuration.transparencyPassType===Gi.Am.NONE||(A.bindTechnique(Re,v,O),j=Re);const Ge=this._draws.data[be],tt=Ge.geometry;A.bindVAO(tt.vao),this._previouslyBoundDraw.get(Re)!==Ge.material&&(Re.bindDraw(Ge.material,O),this._previouslyBoundDraw.set(Re,Ge.material));const ft=Ge.geometryRanges,yt=ft.length;if(0!==Ge.indexType){const It=iE.get(Ge.indexType);for(let Nt=0;Nt<yt;Nt+=2)A.drawElements(tt.primitiveType,ft[Nt+1],Ge.indexType,ft[Nt]*It)}else for(let It=0;It<yt;It+=2)A.drawArrays(tt.primitiveType,ft[It],ft[It+1])}}prepareSubmit(){this._draws.clear()}finishSubmit(){const v=this._sorting===ly.FrontToBack?1:-1;this._draws.sort((O,A)=>{const j=v*(O.depthSquaredHint-A.depthSquaredHint);return 0!==j?j:O.geometry.vao.size-A.geometry.vao.size})}get count(){return this._draws.length}}const iE=new Map;iE.set(Gt.g.UNSIGNED_BYTE,1),iE.set(Gt.g.UNSIGNED_SHORT,2),iE.set(Gt.g.UNSIGNED_INT,4);class wj{constructor(v,O){this.rctx=v,this.shaderTechniqueRepository=O,this.canRender=!0,this._materialPassParameters=new ga.SP,this._shadowPassParameters=new ga.kF,this._highlightPassParameters=new ga.T5,this._systems=new Set,this._passes={materialOpaque:new vp(v,O),materialTransparent:new vp(v,O,ly.BackToFront),materialIntegratedMesh:new vp(v,O),shadowMap:new vp(v,O),highlight:new vp(v,O),highlightIntegratedMesh:new vp(v,O),highlightShadowMap:new vp(v,O),defaultShadowMap:new vp(v,O)}}register(v){this._systems.add(v)}prepareRender(v){if(0!==this._systems.size){for(const O of Object.values(this._passes))O.prepareSubmit();this._systems.forEach(O=>O.submit(this._passes,v.bindParameters));for(const O of Object.values(this._passes))O.finishSubmit();this.shaderTechniqueRepository.frameUpdate()}}render(v){if(0!==this._systems.size)switch(this._configure(v),v.bindParameters.slot){case mn.r.OPAQUE_MATERIAL:switch(v.pass){case Mn.C.MATERIAL:return this._materialPassParameters.subPass=ga.zp.Color,this._passes.materialOpaque.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH:return this._materialPassParameters.subPass=ga.zp.Depth,this._passes.materialOpaque.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_NORMAL:return this._materialPassParameters.subPass=ga.zp.Normal,this._passes.materialOpaque.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_HIGHLIGHT:return this._passes.highlight.dispatch(this._highlightPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL:return this._passes.shadowMap.dispatch(this._shadowPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT:return this._passes.highlightShadowMap.dispatch(this._shadowPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:return this._passes.defaultShadowMap.dispatch(this._shadowPassParameters,v.bindParameters)}return;case mn.r.TRANSPARENT_MATERIAL:switch(v.pass){case Mn.C.MATERIAL:return this._materialPassParameters.subPass=ga.zp.Color,this._passes.materialTransparent.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_ALPHA:return this._materialPassParameters.subPass=ga.zp.Alpha,this._passes.materialTransparent.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH:return this._materialPassParameters.subPass=ga.zp.Depth,this._passes.materialTransparent.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_NORMAL:return this._materialPassParameters.subPass=ga.zp.Normal,this._passes.materialTransparent.dispatch(this._materialPassParameters,v.bindParameters)}return;case mn.r.INTEGRATED_MESH:switch(v.pass){case Mn.C.MATERIAL:return this._materialPassParameters.subPass=ga.zp.Color,this._passes.materialIntegratedMesh.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_DEPTH:return this._materialPassParameters.subPass=ga.zp.Depth,this._passes.materialIntegratedMesh.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_NORMAL:return this._materialPassParameters.subPass=ga.zp.Normal,this._passes.materialIntegratedMesh.dispatch(this._materialPassParameters,v.bindParameters);case Mn.C.MATERIAL_HIGHLIGHT:return this._passes.highlightIntegratedMesh.dispatch(this._highlightPassParameters,v.bindParameters)}return}}notifyDirty(){this._context.requestRender()}slots(){return[mn.r.OPAQUE_MATERIAL,mn.r.TRANSPARENT_MATERIAL,mn.r.INTEGRATED_MESH]}initializeRenderContext(v){this._context=v}uninitializeRenderContext(){}queryDepthRange(v){const O={near:1/0,far:-1/0};return this._systems.forEach(A=>{const j=A.queryShadowCasterDepthRange(v);(0,at.pC)(j)&&tm(O,j,O)}),O}_configure(v){this._updateParameters(v,v.pass===Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL||v.pass===Mn.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT||v.pass===Mn.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT?this._shadowPassParameters:v.pass===Mn.C.MATERIAL_HIGHLIGHT?this._highlightPassParameters:this._materialPassParameters)}_updateParameters(v,O){const A=v.bindParameters.camera,j=A.viewInverseTransposeMatrix;(0,Et.s)(mC,j[3],j[7],j[11]),gC.set(mC),(0,Et.c)(O.transformWorldFromViewTH,gC.high),(0,Et.c)(O.transformWorldFromViewTL,gC.low),(0,Et.c)(O.slicePlaneLocalOrigin,mC),(0,Ta.f)(O.transformViewFromCameraRelativeRS,A.viewMatrix),(0,on.c)(O.transformProjFromView,A.projectionMatrix),O.identifier===ga.o9.Material&&(this._materialPassParameters.transparent=v.bindParameters.slot===mn.r.TRANSPARENT_MATERIAL,this._materialPassParameters.integratedMesh=v.bindParameters.slot===mn.r.INTEGRATED_MESH,(0,Ta.t)(LS,O.transformViewFromCameraRelativeRS),(0,Ta.e)(O.transformNormalViewFromGlobal,LS))}get needsHighlight(){return this._passes.highlight.count>0||this._passes.highlightIntegratedMesh.count>0}get needsTransparentPass(){return this._passes.materialTransparent.count>0}}const mC=(0,br.c)(),LS=(0,Jh.c)(),gC=new q1;var Ep=T(42309),Rj=T(98565),Ij=T(17923);class nE extends Ka.A{initializeProgram(v){const O=nE.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK})}}nE.shader=new Ga.J(Ij.H,()=>T.e(5265).then(T.bind(T,5265)));var wS=T(47482);class oE extends Ka.A{initializeProgram(v){const O=oE.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({colorWrite:Ti.BK})}}oE.shader=new Ga.J(wS.a,()=>T.e(2337).then(T.bind(T,52337)));var RS=T(36227);class aE extends Ka.A{initializeProgram(v){const O=aE.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({colorWrite:Ti.BK})}}aE.shader=new Ga.J(RS.a,()=>T.e(4496).then(T.bind(T,14496)));class IS extends Fd.K{constructor(){super(...arguments),this.color=(0,P0.f)(1,0,1,1),this.haloColor=(0,P0.f)(1,0,1,1),this.haloOpacity=1,this.haloOpacityOccluded=.25,this.fillOpacity=.2,this.fillOpacityOccluded=.05,this.shadowColor=(0,Ao.f)(1,0,1,1),this.shadowOpacity=.15,this.occludedShadowOpacity=.075}}class Bj{constructor(v,O){this._techniqueRep=v,this._rctx=O,this.viewportToRestore=(0,Ao.c)(),this._passParameters=new IS,this._downsampleDrawParameters=new RS.H,this._blurDrawParameters=new wS.H,this._grid={coverageMipmap:null,vao:null,verticalCellCount:0,horizontalCellCount:0,cellPixelSize:0,mipmapLevels:0,viewportWidth:0,viewportHeight:0}}_assertResources(){if(this.quadVAO)return;this.quadVAO=(0,Ul.ow)(this._rctx);const v={colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE,width:0,height:0},O={target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:0,height:0};this.blur0Fbo=new nc.X(this._rctx,v,O),this.blur1Fbo=new nc.X(this._rctx,v,O);const A=new Rn.m;this._blurTechnique=this._techniqueRep.acquire(oE,A),this._downsampleTechnique=this._techniqueRep.acquire(aE,A),this._applyTechnique=this._techniqueRep.acquire(nE,A)}dispose(){if(this._blurTechnique=(0,at.RY)(this._blurTechnique),this._downsampleTechnique=(0,at.RY)(this._downsampleTechnique),this._applyTechnique=(0,at.RY)(this._applyTechnique),this._grid.coverageMipmap)for(let v=1;v<this._grid.coverageMipmap.length;v++)this._grid.coverageMipmap[v].dispose();this._grid.vao&&this._grid.vao.dispose(!0),this.quadVAO&&(this.quadVAO.dispose(!0),this.quadVAO=null),this.blur0Fbo=(0,at.O3)(this.blur0Fbo),this.blur1Fbo=(0,at.O3)(this.blur1Fbo)}setDefaultOptions(v){this._passParameters={...new IS,...v}}render(v,O,A){this._passParameters.highlightColorTexture=O.colorTexture,this._assertResources();const j=v.camera;(0,Ml.c)(this.viewportToRestore,j.fullViewport);const pe=j.fullHeight,be=j.pixelRatio,Re=Math.ceil(j.fullWidth/be),Ge=Math.ceil(pe/be);this.blur0Fbo.resize(Re,Ge),this.blur1Fbo.resize(Re,Ge);const tt=this._rctx;tt.bindVAO(this.quadVAO);let ft=null;this._gridUpdateResources(O,32),this._gridComputeMipmap(v),this._passParameters.coverageTexture=this._grid.coverageMipmap[this._grid.mipmapLevels].colorTexture,ft=this._grid.vao;const yt=tt.bindTechnique(this._blurTechnique,this._passParameters,v);tt.bindVAO(ft),tt.bindFramebuffer(this.blur0Fbo),tt.setViewport(0,0,Re,Ge),tt.setClearColor(0,0,0,0),tt.clear(Gt.lk.COLOR_BUFFER_BIT),this._blurDrawParameters.blurInputTexture=O.colorTexture,(0,Yi.a)(this._blurDrawParameters.blurSize,1/Re,0),yt.bindDraw(this._blurDrawParameters,v),tt.drawArrays(this._blurTechnique.primitiveType,0,(0,ll._V)(ft,"geometry")),tt.bindFramebuffer(this.blur1Fbo),tt.clear(Gt.lk.COLOR_BUFFER_BIT),this._blurDrawParameters.blurInputTexture=this.blur0Fbo.colorTexture,(0,Yi.a)(this._blurDrawParameters.blurSize,0,1/Ge),yt.bindDraw(this._blurDrawParameters,v),tt.drawArrays(this._blurTechnique.primitiveType,0,(0,ll._V)(ft,"geometry")),tt.bindFramebuffer(A),tt.setViewport(this.viewportToRestore[0],this.viewportToRestore[1],this.viewportToRestore[2],this.viewportToRestore[3]),this._passParameters.blurColorTexture=this.blur1Fbo.colorTexture,tt.bindTechnique(this._applyTechnique,this._passParameters,v),tt.drawArrays(this._applyTechnique.primitiveType,0,(0,ll._V)(ft,"geometry")),tt.bindVAO(null)}_gridUpdateResources(v,O){const A=this._rctx,j=this._grid;let te=!1;if(null===j.coverageMipmap&&(j.coverageMipmap=[v],te=!0),j.viewportWidth===v.width&&j.viewportHeight===v.height||(te=!0,j.viewportWidth=v.width,j.viewportHeight=v.height),j.coverageMipmap[0]=v,j.cellPixelSize!==O&&(j.cellPixelSize=O,te=!0),te){for(let Re=1;Re<j.coverageMipmap.length;Re++)j.coverageMipmap[Re].dispose();j.mipmapLevels=Math.ceil(Math.log(j.cellPixelSize)*Math.LOG2E),j.coverageMipmap.length=j.mipmapLevels+1;for(let Re=0;Re<j.mipmapLevels;Re++){const Ge=j.coverageMipmap[Re],tt={target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGB,dataType:Gt.Br.UNSIGNED_SHORT_5_6_5,samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:Math.ceil(Ge.width/2),height:Math.ceil(Ge.height/2)},ft={colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE,width:Math.ceil(Ge.width/2),height:Math.ceil(Ge.height/2)};j.coverageMipmap[Re+1]=new nc.X(A,ft,tt)}}const pe=Math.ceil(v.height/j.cellPixelSize),be=Math.ceil(v.width/j.cellPixelSize);if(!j.vao||j.verticalCellCount!==pe||j.horizontalCellCount!==be){j.verticalCellCount=pe,j.horizontalCellCount=be;const Re=pe+1,Ge=be+1,tt=1/pe,ft=1/be,yt=6,It=4,Nt=new Float32Array(yt*It*Re*Ge);let Rt=0;for(let Jt=0;Jt<Re;Jt++)for(let jt=0;jt<Ge;jt++)Nt[Rt+0]=(jt-.5)*ft*2-1,Nt[Rt+1]=(Jt-.5)*tt*2-1,Nt[Rt+2]=jt*ft,Nt[Rt+3]=Jt*tt,Nt[Rt+4]=(jt+.5)*ft*2-1,Nt[Rt+5]=(Jt-.5)*tt*2-1,Nt[Rt+6]=jt*ft,Nt[Rt+7]=Jt*tt,Nt[Rt+8]=(jt-.5)*ft*2-1,Nt[Rt+9]=(Jt+.5)*tt*2-1,Nt[Rt+10]=jt*ft,Nt[Rt+11]=Jt*tt,Nt[Rt+12]=(jt-.5)*ft*2-1,Nt[Rt+13]=(Jt+.5)*tt*2-1,Nt[Rt+14]=jt*ft,Nt[Rt+15]=Jt*tt,Nt[Rt+16]=(jt+.5)*ft*2-1,Nt[Rt+17]=(Jt-.5)*tt*2-1,Nt[Rt+18]=jt*ft,Nt[Rt+19]=Jt*tt,Nt[Rt+20]=(jt+.5)*ft*2-1,Nt[Rt+21]=(Jt+.5)*tt*2-1,Nt[Rt+22]=jt*ft,Nt[Rt+23]=Jt*tt,Rt+=yt*It;j.vao&&j.vao.dispose(!0),j.vao=new ju.U(A,Aa.i,{geometry:tg.Bn},{geometry:Bl.f.createVertex(A,Gt.l1.STATIC_DRAW,Nt)})}}_gridComputeMipmap(v){const O=this._rctx,A=this._grid,j=O.bindTechnique(this._downsampleTechnique,this._passParameters,v);O.bindVAO(this.quadVAO);for(let te=0;te<A.mipmapLevels;te++){O.bindFramebuffer(A.coverageMipmap[te+1]);const pe=A.coverageMipmap[te+1].width,be=A.coverageMipmap[te+1].height;this._downsampleDrawParameters.inputTexture=A.coverageMipmap[te].colorTexture,(0,Yi.a)(this._downsampleDrawParameters.invFramebufferDim,1/pe,1/be),j.bindDraw(this._downsampleDrawParameters,v),O.setViewport(0,0,pe,be),O.drawArrays(Gt.MX.TRIANGLE_STRIP,0,(0,ll._V)(this.quadVAO,"geometry"))}}get gpuMemoryUsage(){let v=((0,at.pC)(this.blur0Fbo)?this.blur0Fbo.gpuMemoryUsage:0)+((0,at.pC)(this.blur1Fbo)?this.blur1Fbo.gpuMemoryUsage:0);if(this._grid.coverageMipmap)for(const O of this._grid.coverageMipmap)v+=O.gpuMemoryUsage;return v}get test(){return{coverage:this._grid.coverageMipmap,blur:[this.blur0Fbo,this.blur1Fbo]}}}var jj=T(49266);const Fj={dataType:Gt.Br.UNSIGNED_BYTE,internalFormat:Gt.VI.RGBA},Nj={};class Wj{constructor(v){this.rctx=v,this._activeTargets=new Set,this._depthTextures=new Map,this._depthBuffers=new Map,this._colorTextures=new Map,this._framebuffers=new Map,this.depthTextureSupported=v.capabilities.depthTexture}dispose(){this._depthBuffers.forEach(v=>v.dispose()),this._depthBuffers.clear(),this._depthTextures.forEach(v=>v.dispose()),this._depthTextures.clear(),this._colorTextures.forEach(v=>v.dispose()),this._colorTextures.clear(),this._framebuffers.forEach(v=>v.dispose()),this._framebuffers.clear(),this._activeTargets.clear()}disposeTargetResource(v){const O=v.id;this._activeTargets.has(O)&&(this._activeTargets.delete(O),this._disposeWithFramebuffers(this._depthTextures,O),this._disposeWithFramebuffers(this._depthBuffers,O),this._disposeWithFramebuffers(this._colorTextures,O))}_disposeWithFramebuffers(v,O){const A=v.get(O);A&&(this._framebuffers.forEach((j,te)=>{j.colorAttachment!==A&&j.depthStencilAttachment!==A||(j.detachAll(),j.dispose(),this._framebuffers.delete(te))}),A.dispose(),v.delete(O))}getDepthTexture(v,O){if(!this.depthTextureSupported)return null;let A=this._depthTextures.get(v.id);return!A||A.descriptor.width===O.width&&A.descriptor.height===O.height||(A.dispose(),A=null),A||(A=new Va.x(this.rctx,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.DEPTH_STENCIL,dataType:Gt.Br.UNSIGNED_INT_24_8,samplingMode:Gt.cw.NEAREST,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:O.width,height:O.height}),this._depthTextures.set(v.id,A),this._activeTargets.add(v.id)),A}getAllocatedDepthTexture(v){return this._depthTextures.get(v.id)}getDepthBuffer(v,O){if(this.depthTextureSupported)return null;let A=this._depthBuffers.get(v.id);return A?A.descriptor.width===O.width&&A.descriptor.height===O.height||A.resize(O.width,O.height):(A=new jj.r(this.rctx,{internalFormat:Gt.Tg.DEPTH_STENCIL,...O}),this._depthBuffers.set(v.id,A),this._activeTargets.add(v.id)),A}getColorTexture(v,O){let A=this._colorTextures.get(v.id);return A&&(A.descriptor.width===O.width&&A.descriptor.height===O.height||(A.dispose(),A=null)),A||(A=new Va.x(this.rctx,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,internalFormat:v.internalFormat,dataType:v.dataType,samplingMode:null!=v.samplingMode?v.samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:O.width,height:O.height}),this._colorTextures.set(v.id,A),this._activeTargets.add(v.id)),A}getAllocatedColorTexture(v){return this._colorTextures.get(v.id)}registerDepthTarget(v={}){return{id:(0,o1.D)(),...Nj,...v}}registerColorTarget(v={}){return{id:(0,o1.D)(),...Fj,...v}}getFramebuffer(v,O,A){const j=this._getKey(O,A);let te=this._framebuffers.get(j);const pe=this.getColorTexture(O,v);if(this.depthTextureSupported){const Re=A?this.getDepthTexture(A,v):void 0;return te?((te.width!==v.width||te.height!==v.height||te.colorTexture!==pe||te.depthStencilTexture!==Re)&&(te.detachAll(),te.resize(v.width,v.height),te.attachColorTexture(pe),te.attachDepthStencilTexture(Re)),te):(te=(0,at.pC)(A)?new nc.X(this.rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.DEPTH_STENCIL_TEXTURE},pe,Re):new nc.X(this.rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},pe),this._framebuffers.set(j,te),te)}const be=A?this.getDepthBuffer(A,v):void 0;return te?((te.width!==v.width||te.height!==v.height||te.colorTexture!==pe)&&(te.detachAll(),te.resize(v.width,v.height),te.attachColorTexture(pe),te.attachDepthStencilBuffer(be)),te):(te=new nc.X(this.rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:A?Gt.OU.DEPTH_STENCIL_RENDER_BUFFER:Gt.OU.NONE},pe,be),this._framebuffers.set(j,te),te)}_getKey(v,O){return`${v.id}_${O?O.id:"X"}_${v.name}${O?"_"+O.name:""}`}get gpuMemoryUsage(){let v=0;const O=new Set,A=j=>{O.has(j)||(O.add(j),v+=(0,ll.un)(j))};return this._depthTextures.forEach(A),this._colorTextures.forEach(A),this._depthBuffers.forEach(A),v}}var U0=T(57596);class Vj{constructor(v,O){this._rctx=v,this._compositingHelper=O,this._mainColorTarget=0,this._dimensions={width:4,height:4},this._needLastFrameColorTexture=!1,this._background={type:"color",color:[0,0,0,1]};const A=v.type===U0.zO.WEBGL2;this._renderTargetHelper=new Wj(v);const j=this._renderTargetHelper;this.mainColorTargets=[j.registerColorTarget({name:"mainColorTarget0"}),j.registerColorTarget({name:"mainColorTarget1"})],this.frontFaceTarget=j.registerColorTarget({name:"frontFaceTarget"});const te=pe=>j.registerColorTarget({name:pe,dataType:Gt.Br.FLOAT,internalFormat:A?Gt.lP.RGBA32F:Gt.VI.RGBA,samplingMode:Gt.cw.NEAREST});this.colorFloatTarget=te("colorFloatTarget"),this.alphaFloatTarget=te("alphaFloatTarget"),this.mainDepth=j.registerDepthTarget({name:"mainDepth"}),this.linearDepth=j.registerColorTarget({name:"linearDepth",samplingMode:Gt.cw.NEAREST}),this.terrainLinearDepth=j.registerColorTarget({name:"terrainLinearDepth"}),this.geometryLinearDepth=j.registerColorTarget({name:"geometryLinearDepth"}),this.normal=j.registerColorTarget({name:"normal"}),this.highlight=j.registerColorTarget({name:"highlight",internalFormat:A?Gt.lP.RGBA4:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_SHORT_4_4_4_4}),this.hudVisibility=j.registerColorTarget({name:"hudVisibility",internalFormat:A?Gt.lP.RGBA4:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_SHORT_4_4_4_4}),this.tmpColor=j.registerColorTarget({name:"tmpColor"}),this.tmpDepth=j.registerDepthTarget({name:"tmpDepth"}),this.hudColor=j.registerColorTarget({name:"hudColor"})}dispose(){this._renderTargetHelper.dispose()}get width(){return this._dimensions.width}get height(){return this._dimensions.height}set background(v){this._background=v}get background(){return this._background}get currentColorTarget(){return this.mainColorTargets[this._mainColorTarget]}get previousColorTarget(){return this.mainColorTargets[1-this._mainColorTarget]}get framebuffer(){return this.getFramebuffer(this.currentColorTarget,this.mainDepth)}getFramebuffer(v,O){return this._renderTargetHelper.getFramebuffer(this._dimensions,v,O)}get colorTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.currentColorTarget)}get depthTexture(){return this._renderTargetHelper.getAllocatedDepthTexture(this.mainDepth)}get linearDepthTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.linearDepth)}get terrainLinearDepthTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.terrainLinearDepth)}get geometryLinearDepthTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.geometryLinearDepth)}get lastFrameColorTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.previousColorTarget)}get normalTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.normal)}get highlightTexture(){return this._renderTargetHelper.getAllocatedColorTexture(this.highlight)}get hudVisibilityTexture(){return this._getColorTexture(this.hudVisibility)}get tmpColorTexture(){return this._getColorTexture(this.tmpColor)}get hudColorTexture(){return this._getColorTexture(this.hudColor)}get mainColorTexture(){return this._getColorTexture(this.currentColorTarget)}advanceCurrentRenderTarget(){this._mainColorTarget=0===this._mainColorTarget&&this._needLastFrameColorTexture?1:0}initializeFrame(v){const O=this._rctx;this._dimensions.width=v.fullWidth,this._dimensions.height=v.fullHeight,this.bindTarget(this.currentColorTarget,this.mainDepth),O.setClearStencil(0);const A=this._background.color;O.setClearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),O.clearSafe(Gt.lk.COLOR_BUFFER_BIT|Gt.lk.DEPTH_BUFFER_BIT|Gt.lk.STENCIL_BUFFER_BIT)}composite(v){(0,at.pC)(this.colorTexture)&&this._compositingHelper.composite(v,this.colorTexture,Vl.Fv.None)}renderTmpAndCompositeToMain(v,O,A,j=!1){this.renderToTargets(v,this.tmpColor,j?this.tmpDepth:this.mainDepth,zj),this._compositingHelper.composite(O,this._getColorTexture(this.tmpColor),A)}renderHUDVisibility(v,O=!1){this.renderToTargets(v,this.hudVisibility,O?this.tmpDepth:this.mainDepth,Hj)}compositeTransparentTerrainOntoHUDVisibility(v){this.renderToTargets(()=>this._compositingHelper.composite(v,this._getColorTexture(this.tmpColor),Vl.Fv.None,1,Vl.v3.TransparentToHUDVisibility),this.hudVisibility,this.tmpDepth)}renderOITPass(v,O,A){let j,te;switch(O){case Gi.Am.Color:j=this.colorFloatTarget,te=[0,0,0,0];break;case Gi.Am.Alpha:j=this.alphaFloatTarget,te=[1,1,1,1];break;case Gi.Am.FrontFace:j=this.frontFaceTarget,te=[0,0,0,0]}A?this.renderToTargets(v,j,this.tmpDepth,te,!0,!0):this.renderToTargets(v,j,this.mainDepth,te,!1)}compositeTransparentTerrainOntoMain(v){this.bindFramebuffer(),this._compositingHelper.composite(v,this._getColorTexture(this.tmpColor),Vl.Fv.PremultipliedAlpha)}compositeOccludedOntoMain(v,O){this.bindFramebuffer(),this._compositingHelper.composite(v,this._getColorTexture(this.tmpColor),Vl.Fv.PremultipliedAlpha,O)}compositeTransparentOntoOpaque(v,O){O?(this.bindTarget(this.hudColor,this.tmpDepth),this._rctx.setClearColor(0,0,0,1e-13),this._rctx.clearSafe(Gt.lk.COLOR_BUFFER_BIT)):this.bindFramebuffer(),this._compositingHelper.compositeTransparent(v,this._getColorTexture(this.colorFloatTarget),this._getColorTexture(this.alphaFloatTarget),this._getColorTexture(this.frontFaceTarget))}bindFramebuffer(){this._rctx.bindFramebuffer(this.framebuffer)}renderDepthDetached(v){this.bindTarget(this.currentColorTarget),v(),this.bindTarget(this.currentColorTarget,this.mainDepth)}disposeTarget(v){this._renderTargetHelper.disposeTargetResource(v)}set needLastFrameColorTexture(v){!v&&this._needLastFrameColorTexture&&(this._mainColorTarget=0,this.disposeTarget(this.mainColorTargets[1])),this._needLastFrameColorTexture=v}get needLastFrameColorTexture(){return this._needLastFrameColorTexture}renderToTargets(v,O,A,j,te=!1,pe=!1){const be=this._rctx,Re=this.bindTarget(O,A);let Ge=0;if(j){const ft=Math.max(1e-13,j[3]);be.setClearColor(j[0],j[1],j[2],ft),Ge|=Gt.lk.COLOR_BUFFER_BIT}return te&&(Ge|=Gt.lk.DEPTH_BUFFER_BIT),!1===pe?pe=0:(!0===pe&&(pe=255),Ge|=Gt.lk.STENCIL_BUFFER_BIT),Ge&&be.clearSafe(Ge,pe),v(),be.gl.flush(),this.bindTarget(this.currentColorTarget,this.mainDepth),Re}bindTarget(v,O){const A=this._renderTargetHelper.getFramebuffer(this._dimensions,v,O);return this._rctx.bindFramebuffer(A),A}_getColorTexture(v){return this._renderTargetHelper.getColorTexture(v,this._dimensions)}get gpuMemoryUsage(){let v=0;return this._renderTargetHelper&&(v+=this._renderTargetHelper.gpuMemoryUsage),v}}const zj=[0,0,0,0],Hj=[0,1,0,1];var Gj=T(64624),Kj=T(83196);class Yj{constructor(v){this.context=v,this._renderPlugins=new La.Z,this.slots=[];for(let O=0;O<mn.r.MAX_SLOTS;++O)this.slots[O]=[]}add(v,O,A){const j=()=>{if(A?.aborted)throw O.uninitializeRenderContext(),(0,fi.zE)();this._renderPlugins.push(O);for(const pe of v)this.slots[pe].push(O);this.context.requestRender()},te=O.initializeRenderContext(this.context,A);if((0,fi.y8)(te))return te.then(j);j()}remove(v){if(null!=this._renderPlugins.removeUnordered(v)){for(let O=0;O<this.slots.length;++O)this.slots[O]=this.slots[O].filter(A=>A!==v);v.uninitializeRenderContext(),this.context.requestRender()}}prepareRender(){this._renderPlugins.forAll(v=>{v.prepareRender&&v.prepareRender(this.context.renderContext)})}updateAnimation(v){let O=!1;return this._renderPlugins.forAll(A=>{A.updateAnimation&&(O=A.updateAnimation(v)||O)}),O}render(){const v=this.slots[this.context.renderContext.bindParameters.slot],O=new Array;v.filter(A=>{if(!A.canRender)return!1;if(function Zj(d){return"prepareTechnique"in d}(A)){const j=A.prepareTechnique(this.context.renderContext);return!!j&&(O.push(j),!0)}return O.push(null),!0}).forEach((A,j)=>A.render(this.context.renderContext,O[j]))}queryDepthRange(v){const O=kj;return O.near=1/0,O.far=-1/0,this._renderPlugins.forAll(A=>{if(A.queryDepthRange){const j=A.queryDepthRange(v);j&&tm(O,j,O)}}),O}get needsTransparentPass(){return this._renderPlugins.some(v=>v.needsTransparentPass)}get needsHighlight(){return this._renderPlugins.some(v=>v.needsHighlight)}get needsLinearDepth(){return this._renderPlugins.some(v=>v.needsLinearDepth)}get needsLaserlineWithContrastControl(){const v=this.slots[mn.r.LASERLINES_CONTRAST_CONTROL];return!!v&&v.length>0}get renderOccludedFlags(){return this._renderPlugins.reduce((v,O)=>v|O.renderOccludedFlags,0)}}const kj={near:0,far:0};var $j=T(82148);class lE extends Ka.A{constructor(v,O){super(v,O,()=>this.destroy())}initializeProgram(v){const O=lE.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:rm.wu,colorWrite:Ti.BK,depthTest:null,depthWrite:null})}get primitiveType(){return Gt.MX.TRIANGLE_STRIP}}lE.shader=new Ga.J($j.S,()=>T.e(5915).then(T.bind(T,45915)));var US=T(69828);const Jj=(0,Ao.f)(.01,0,.25,1),BS=1/512;let cE=class extends Li.Z{constructor(d,v,O,A){super({}),this._techniqueRepository=d,this._rctx=v,this._shadowAccumulator=O,this._requestRender=A,this._passParameters={shadowCastMap:this._shadowCastTexture,sampleScale:0,color:Jj,threshold:.5,bandSize:.1,opacityFromElevation:1,__tagStrict:"NoParameters"},this._techniqueConfig=new US.l,this._enabled=!1,this._vao=(0,Ul.ow)(v),this._techniqueConfig.visualization=US.w.Gradient}normalizeCtorArgs(){return{}}dispose(){this._stop(),this._vao=(0,at.O3)(this._vao),this._techniqueRepository.release(this._technique),this._technique=null,this._shadowAccumulator=null}get visualizeShadowCastTechnique(){return this._technique=this._techniqueRepository.releaseAndAcquire(lE,this._techniqueConfig,this._technique),this._technique}render(d){if(!this._isRenderingVisualization)return;this._passParameters.sampleScale=1/this._computedSamples;const v=this.visualizeShadowCastTechnique;this._rctx.bindVAO(this._vao),this._rctx.bindTechnique(v,this._passParameters,d),this._rctx.drawArrays(v.primitiveType,0,(0,ll._V)(this._vao,"geometry"))}setOptions(d){void 0!==d.enabled&&this._setEnabled(d.enabled),void 0!==d.color&&this._setColor(d.color),void 0!==d.threshold&&(this._threshold=d.threshold),void 0!==d.visualization&&(this._visualization=d.visualization),void 0!==d.bandSize&&(this._bandSize=d.bandSize),void 0!==d.bandsEnabled&&(this._bandsEnabled=d.bandsEnabled)}get opacityFromElevation(){return this._passParameters.opacityFromElevation}set opacityFromElevation(d){this._passParameters.opacityFromElevation!==d&&(this._passParameters.opacityFromElevation=d,this.notifyChange("opacityFromElevation"))}get _isRenderingVisualization(){return this._enabled&&this._computedSamples>0&&this.opacityFromElevation>BS}get _computedSamples(){return this._shadowAccumulator.computedSamples}get _shadowCastTexture(){return this._shadowAccumulator.shadowCastTexture}get _threshold(){return this._passParameters.threshold}set _threshold(d){this._threshold!==d&&(this._passParameters.threshold=d,this._requestRenderIfRunning())}get _visualization(){return this._techniqueConfig.visualization}set _visualization(d){d!==this._visualization&&(this._techniqueConfig.visualization=d,this._techniqueRepository.release(this._technique),this._technique=null,this._requestRenderIfRunning())}get _bandSize(){return this._passParameters.bandSize}set _bandSize(d){d!==this._bandSize&&(this._passParameters.bandSize=d,this._requestRenderIfRunning())}get _bandsEnabled(){return this._techniqueConfig.bandsEnabled}set _bandsEnabled(d){d!==this._bandsEnabled&&(this._techniqueConfig.bandsEnabled=d,this._techniqueRepository.release(this._technique),this._technique=null,this._requestRenderIfRunning())}_setColor(d){(0,Ml.g)(d,this._passParameters.color)||((0,Ml.c)(this._passParameters.color,d),this._requestRenderIfRunning())}_setEnabled(d){d!==this._enabled&&(d?this._start():this._stop())}_requestRenderIfRunning(){this._enabled&&this._requestRender()}_start(){this._enabled=!0,this._requestRender()}_stop(){this._enabled=!1,this._requestRender()}};(0,Je._)([(0,ht.Cb)()],cE.prototype,"opacityFromElevation",null),cE=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.ShadowCastRenderer")],cE);var cy,uE=T(53319),yC=T(94195);class dE extends Ka.A{constructor(v,O){super(v,O,()=>this.destroy())}initializeProgram(v){const O=dE.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ONE),colorWrite:Ti.BK,depthTest:null,depthWrite:null})}get primitiveType(){return Gt.MX.TRIANGLE_STRIP}}dE.shader=new Ga.J(yC.a,()=>T.e(8897).then(T.bind(T,58897)));let cc=cy=class extends Li.Z{constructor(d,v,O,A,j,te){super({}),this._rctx=d,this._stage=O,this._prepareForShadowMapPass=A,this._renderToShadowMap=j,this._requestRender=te,this._progress=0,this._sampleCount=0,this._passParameters=new yC.S,this._enabled=!1,this._cachedLightDirections=[],this._depthRange=sC,this._previewing=!1,this._handles=new so.Z,this._cameraForcedForScreenshot=!1,this._bindParameters=new NM.p(new uE.l(d,O.viewingMode),null,null),this._bindParameters.shadowMap.enabled=!0,this._bindParameters.camera=new qn.V,this._vao=(0,Ul.ow)(d),this._fbo=new nc.X(d,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE,width:0,height:0},{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:0,height:0}),this._accumulationRenderer=new cE(v,d,this,te),this._handles.add(this._stage.resourceController.scheduler.registerTask(lo.T8.SHADOW_ACCUMULATOR,this)),this._handles.add((0,wr.YP)(()=>O.renderView,Ge=>{this._handles.remove(cy.renderViewHandleKey),(0,at.Wi)(Ge)||this._handles.add(Ge.events.on("force-camera-for-screenshot",()=>this._cameraForcedForScreenshot=!0),cy.renderViewHandleKey)},wr.tX))}normalizeCtorArgs(){return{}}get computedSamples(){return this._progress}get shadowCastTexture(){return this._fbo.colorTexture}get isAccumulating(){return this._isPreviewing||this._isRefining}get accumulationTechnique(){return(0,at.Wi)(this._accumulationTechnique)&&(this._accumulationTechnique=new dE({rctx:this._rctx,viewingMode:this._stage.viewingMode},new Rn.m)),this._accumulationTechnique}get _isRefining(){return this._isActive&&!this._isDoneAccumulating&&!this._previewing}get _isPreviewing(){return this._isActive&&this._previewing}get _isActive(){return this._enabled&&this._sampleCount>0}get canAccumulate(){return null!==this._passParameters.linearDepthTexture&&this._depthRange!==sC&&this._opacityFromElevation>BS}get _isDoneAccumulating(){return this._progress>=this._sampleCount}get _lightDirections(){return this._cachedLightDirections}set _lightDirections(d){const v=this._cachedLightDirections;if((0,Qp.fS)(v,d,Et.z))return;const O=d.length;v.length=O,this._sampleCount=Math.min(yC.s,O);for(let A=0;A<O;++A){const j=d[A],te=v[A]||(0,br.c)();(0,Et.c)(te,j),v[A]=te}this._invalidate()}get _opacityFromElevation(){return this._accumulationRenderer.opacityFromElevation}set _opacityFromElevation(d){this._accumulationRenderer.opacityFromElevation=d}get running(){return this._isRefining&&this.canAccumulate&&this._progress>0}runTask(d){for(this._prepareForShadowMapPass(this._bindParameters);!d.done&&!this._isDoneAccumulating;)this._accumulateShadow(),d.madeProgress();this._requestRender()}renderAccumulation(d,v,O,A){if(this._passParameters.linearDepthTexture=d,this._depthRange=v,this._updateCamera(O),this._bindParameters.contentCamera=A,this.notifyChange("canAccumulate"),!this.isAccumulating||!this.canAccumulate)return;(this._previewing||0===this._progress||this._cameraForcedForScreenshot)&&this._clear();const j=this._cameraForcedForScreenshot?this._sampleCount:Math.min(cy.previewSamples,this._sampleCount-this._progress);for(let te=0;te<j;++te)this._accumulateShadow();this._cameraForcedForScreenshot=!1}render(d){this._accumulationRenderer.render(d)}dispose(){this._stop(),this._handles.destroy(),this._accumulationRenderer=(0,at.O3)(this._accumulationRenderer),this._bindParameters.shadowMap.dispose(),this._fbo=(0,at.O3)(this._fbo),this._vao=(0,at.O3)(this._vao),this._accumulationTechnique=(0,at.RY)(this._accumulationTechnique),this._cachedLightDirections.length=0,this._sampleCount=0}setOptions(d){void 0!==d.enabled&&(this.enabled=d.enabled),void 0!==d.previewing&&(this.previewing=d.previewing),void 0!==d.lightDirections&&(this.lightDirections=d.lightDirections),this._accumulationRenderer.setOptions(d)}set previewing(d){this._previewing!==d&&(this._previewing=d,this._requestRenderIfEnabled())}set lightDirections(d){this._lightDirections=d}readAccumulatedShadow(d,v){if(!this._isActive||this._progress<1||d<0||d>this._fbo.width||v<0||v>this._fbo.height)return 0;const O=qj;return this._fbo.readPixels(d,v,1,1,Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,O),O[0]/this._progress}_start(){this._progress=0,this._enabled=!0}_stop(){this._enabled=!1}_invalidate(){this._progress=0,this._requestRenderIfEnabled()}_clear(){this._rctx.bindFramebuffer(this._fbo),this._rctx.setClearColor(0,0,0,0),this._rctx.clearSafe(Gt.lk.COLOR_BUFFER_BIT),this._progress=0}_accumulateShadow(){this._renderToShadowMap(this._bindParameters,this._lightDirections[this._progress],this._depthRange),this._passParameters.origin=this._bindParameters.camera.center,this._rctx.bindFramebuffer(this._fbo);const v=this.accumulationTechnique;this._rctx.bindTechnique(v,this._passParameters,this._bindParameters),this._rctx.bindVAO(this._vao),this._rctx.drawArrays(v.primitiveType,0,(0,ll._V)(this._vao,"geometry")),this._progress++}_updateCamera(d){d.equals(this._bindParameters.camera)||(this._bindParameters.camera.copyFrom(d),this._fbo.resize(d.fullWidth,d.fullHeight),this._opacityFromElevation=1-(0,cs.CW)(4e4,5e4,d.relativeElevation))}set enabled(d){d!==this._enabled&&(d?this._start():this._stop())}_requestRenderIfEnabled(){this._enabled&&this._requestRender()}get test(){const d=this;return{lightDirections:this._lightDirections,get isDone(){return d._isDoneAccumulating},get isActive(){return d._isActive}}}};cc.previewSamples=6,cc.renderViewHandleKey="renderView",(0,Je._)([(0,ht.Cb)()],cc.prototype,"_progress",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_sampleCount",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_enabled",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_depthRange",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_previewing",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_accumulationRenderer",void 0),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_isRefining",null),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_isActive",null),(0,Je._)([(0,ht.Cb)()],cc.prototype,"canAccumulate",null),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_isDoneAccumulating",null),(0,Je._)([(0,ht.Cb)()],cc.prototype,"_opacityFromElevation",null),(0,Je._)([(0,ht.Cb)()],cc.prototype,"running",null),cc=cy=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.ShadowAccumulator")],cc);const qj=new Uint8Array(4);var eF=T(56693),tF=T(19263);class rF extends Fd.K{constructor(){super(...arguments),this.shadowColor=(0,Ao.f)(1,0,1,1),this.shadowOpacity=.2,this.occludedShadowOpacity=.1,this.opacityElevation=1,this.dayNightTerminator=1}}class hE extends Ka.A{constructor(v){super(v,null,()=>this.destroy())}initializeProgram(v){const O=hE.shader.get().build();return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({blending:(0,Ti.wK)(Gt.zi.SRC_ALPHA,Gt.zi.ONE,Gt.zi.ONE_MINUS_SRC_ALPHA,Gt.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Ti.BK,depthTest:null,depthWrite:null})}get primitiveType(){return Gt.MX.TRIANGLE_STRIP}}hE.shader=new Ga.J(tF.S,()=>T.e(5147).then(T.bind(T,95147)));class oF{constructor(v,O){this._rctx=v,this._viewingMode=O,this._maxOpacity=1,this._passParameters=new rF,this._drawParameters=new eF.ry,this._vao=(0,Ul.ow)(this._rctx)}get technique(){return(0,at.Wi)(this._technique)&&(this._technique=new hE({rctx:this._rctx,viewingMode:this._viewingMode})),this._technique}render(v,O){if(!v.shadowMap.enabled||!v.linearDepthTexture||!this.isVisible)return;const A=this.technique;this._drawParameters.origin=v.camera.center,this._rctx.bindFramebuffer(O),this._rctx.bindTechnique(A,this._passParameters,v).bindDraw(this._drawParameters,v),this._rctx.bindVAO(this._vao),this._rctx.drawArrays(A.primitiveType,0,(0,ll._V)(this._vao,"geometry"))}get gpuMemoryUsage(){return this._vao?.size??0}setDefaultOptions(v){this._passParameters={...this._passParameters,...v},this._updateMaxOpacity()}updateParameters(v,O){this._passParameters.opacityElevation=1-(0,cs.CW)(4e4,5e4,v.relativeElevation);const A=this._viewingMode===dn.JY.Global?(0,Et.n)(jS,v.center):(0,Et.s)(jS,0,0,1),j=(0,Et.e)(A,O);this._passParameters.dayNightTerminator=(0,cs.CW)(0,1,(0,cs.uZ)(30*j,0,1))}dispose(){this._vao=(0,at.O3)(this._vao),this._technique=(0,at.RY)(this._technique)}get isVisible(){const{opacityElevation:v,dayNightTerminator:O}=this._passParameters;return this._maxOpacity*v*O>=.001953125}_updateMaxOpacity(){const v=Math.max(this._passParameters.shadowOpacity,this._passParameters.occludedShadowOpacity);this._maxOpacity=v*this._passParameters.shadowColor[3]}}const jS=(0,br.c)(),FS=(0,jd.c)();class aF{constructor(){this._plane=(0,jd.c)()}get isEnabled(){return!(0,jd.d)(this.plane,FS)}get plane(){return this._plane}set plane(v){(0,jd.a)(v||FS,this._plane)}}var lF=T(7508);class _E extends Ka.A{initializeProgram(v){const O=_E.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,Aa.i)}initializePipeline(){return(0,Ti.sm)({colorWrite:Ti.BK})}}_E.shader=new Ga.J(lF.S,()=>T.e(7308).then(T.bind(T,57308)));var pE=T(53218);let uy=class extends Li.Z{constructor(d,v){super({}),this.rctx=d,this._techniqueRep=v,this._isEnabled=!1}normalizeCtorArgs(){return{}}dispose(){this._abortController=(0,at.IM)(this._abortController),this.disable()}_loadResources(d){if((0,at.pC)(this._abortController))return!1;if((0,at.pC)(this._searchTexture))return!0;this._abortController=new AbortController;const v=this._abortController.signal;return T.e(3129).then(T.bind(T,63129)).then(O=>this._loadTextures(O,v)).then(()=>d()).finally(()=>this._abortController=null),!1}_loadTextures(d,v){return(0,fi.k_)(v),Promise.all([this._loadTextureFromBase64(d.areaTexture,Gt.cw.LINEAR,Gt.VI.RGB),this._loadTextureFromBase64(d.searchTexure,Gt.cw.NEAREST,Gt.VI.LUMINANCE)]).then(([O,A])=>{(0,fi.Hc)(v)?(O.dispose(),A.dispose(),(0,fi.k_)(v)):(this._areaTexture=O,this._searchTexture=A)})}get updating(){return(0,at.pC)(this._abortController)}enable(d){if(this._isEnabled)return!0;if(!this._edgeDetectTechnique||!this._blendWeightsTechnique||!this._blurTechnique){const v=new pE.L,O=(A,j)=>this._techniqueRep.releaseAndAcquire(_E,A,j);v.output=pE.f.EdgeDetector,this._edgeDetectTechnique=O(v,this._edgeDetectTechnique),v.output=pE.f.BlendWeight,this._blendWeightsTechnique=O(v,this._blendWeightsTechnique),v.output=pE.f.Blur,this._blurTechnique=O(v,this._blurTechnique)}return!!this._loadResources(d)&&(this._vao=(0,Ul.E9)(this.rctx),this._edges=new nc.X(this.rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGB,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:4,height:4}),this._blend=new nc.X(this.rctx,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.LINEAR,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:4,height:4}),this._isEnabled=!0,!0)}disable(){this._isEnabled&&(this._vao=(0,at.O3)(this._vao),this._areaTexture=(0,at.O3)(this._areaTexture),this._searchTexture=(0,at.O3)(this._searchTexture),this._blend=(0,at.O3)(this._blend),this._edges=(0,at.O3)(this._edges),this._isEnabled=!1)}render(d){if(!this._isEnabled)return;const v=this.rctx,O=v.getBoundFramebufferObject(),A={x:0,y:0,width:d.descriptor.width,height:d.descriptor.height};v.bindVAO(this._vao),v.setViewport(A.x,A.y,A.width,A.height),this._edges.resize(A.width,A.height),v.bindFramebuffer(this._edges),v.setClearColor(0,0,0,1),v.clear(Gt.lk.COLOR_BUFFER_BIT);const j=v.bindTechnique(this._edgeDetectTechnique);j.bindTexture("tColor",d),j.setUniform4f("resolution",1/A.width,1/A.height,A.width,A.height),v.drawArrays(Gt.MX.TRIANGLES,0,3),this._blend.resize(A.width,A.height),v.bindFramebuffer(this._blend),v.setClearColor(0,0,1,1),v.clear(Gt.lk.COLOR_BUFFER_BIT);const te=v.bindTechnique(this._blendWeightsTechnique);te.setUniform4f("resolution",1/A.width,1/A.height,A.width,A.height),te.bindTexture("tSearch",this._searchTexture),te.bindTexture("tArea",this._areaTexture),te.bindTexture("tEdges",this._edges.colorTexture),v.drawArrays(Gt.MX.TRIANGLES,0,3),v.bindFramebuffer(O),v.setClearColor(0,1,0,1),v.clear(Gt.lk.COLOR_BUFFER_BIT);const pe=v.bindTechnique(this._blurTechnique);pe.setUniform4f("resolution",1/A.width,1/A.height,A.width,A.height),pe.bindTexture("tColor",d),pe.bindTexture("tBlendWeights",this._blend.colorTexture),v.drawArrays(Gt.MX.TRIANGLES,0,3)}_loadTextureFromBase64(d,v,O){return(0,V_.t)(d).then(A=>new Va.x(this.rctx,{pixelFormat:O,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.CLAMP_TO_EDGE,width:A.width,height:A.height,samplingMode:v},A))}};(0,Je._)([(0,ht.Cb)()],uy.prototype,"_abortController",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],uy.prototype,"updating",null),uy=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.SmaaRenderPass")],uy);var cF=T(93783);class hF{constructor(v){this.factory=v,this.originData=new Map}acquire(v){return this.register(this.factory.getOrigin(v))}register(v){const O=this.originData.get(v.id);return O?(O.refCount++,O.origin):(this.originData.set(v.id,{refCount:1,viewMatrix:(0,ao.c)(),origin:v}),v)}release(v){const O=this.originData.get(v.id);O&&(O.refCount--,0===O.refCount&&this.originData.delete(v.id))}updateViewMatrices(v){this.originData.forEach(O=>{(0,on.c)(O.viewMatrix,v),function dF(d,v){const O=v,A=d[0],j=d[1],te=d[2];O[12]+=A*O[0]+j*O[4]+te*O[8],O[13]+=A*O[1]+j*O[5]+te*O[9],O[14]+=A*O[2]+j*O[6]+te*O[10],O[14]+=A*O[3]+j*O[7]+te*O[11]}(O.origin.vec3,O.viewMatrix)})}getViewMatrix(v){return this.originData.get(v.id).viewMatrix}}var _F=T(96867),NS=T(89917),WS=T(25558),VS=T(51040);class pF extends VS.su{constructor(v,O,A){super(),this.distanceFalloffFactor=v,this.minimumEdgeLength=O,this.transparency=A,this.transformNormalViewFromGlobal=(0,Jh.c)()}}class fF extends VS.OU{constructor(){super(...arguments),this.transformNormalViewFromGlobal=(0,Jh.c)(),this.slicePlaneLocalOrigin=(0,br.c)(),this.transformNormalGlobalFromModel=(0,Jh.c)()}}var mF=T(71964);class fE extends Ka.A{initializeProgram(v){const O=fE.shader.get().build(this.configuration);return new Wa.$(v.rctx,O,f_.so)}initializePipeline(v){return(0,Ti.sm)(v.blendMinMax?{blending:(0,Ti.wK)(Gt.zi.ONE,Gt.zi.ONE,Gt.zi.ZERO,Gt.zi.ONE,Gt.db.ADD,v.blendMinMax.MAX),depthTest:{func:Gt.wb.LEQUAL},colorWrite:Ti.BK}:{depthTest:{func:Gt.wb.LEQUAL},depthWrite:Ti.LZ,colorWrite:Ti.BK})}}fE.shader=new Ga.J(mF.E,()=>T.e(6625).then(T.bind(T,76625)));var dy=T(73105);class Ch extends sS.W{constructor(){super(...arguments),this.mode=dy.Jb.SOLID,this.hasSlicePlane=!1,this.silhouette=!1,this.legacy=!1,this.antialiasing=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.spherical=!1}}(0,Je._)([(0,Rn.o)({count:dy.Jb.COUNT})],Ch.prototype,"mode",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"hasSlicePlane",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"silhouette",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"legacy",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"antialiasing",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"hasMultipassTerrain",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"cullAboveGround",void 0),(0,Je._)([(0,Rn.o)()],Ch.prototype,"spherical",void 0);var Wn=T(17803);const yF={type:"uber",hasSlicePlane:!1,strokesTexture:null,legacy:!0,spherical:!0};class vF{constructor(){this._value=0}get value(){return this._value}increment(){this._value++}decrement(){this._value--}}const EF={solid:dy.Jb.SOLID,sketch:dy.Jb.SKETCH,uber:dy.Jb.MIXED};class hy{constructor(v,O,A){this.rctx=v,this.shaderTechniqueRepository=O,this._configuration=new Ch,this.refCount=new vF,this.renderables=new Set,this.sortedRenderables={[Wn.i.TRANSPARENT]:{[Wn.i.TRANSPARENT]:new La.Z,[Wn.i.OPAQUE]:new La.Z},[Wn.i.OPAQUE]:{[Wn.i.TRANSPARENT]:new La.Z,[Wn.i.OPAQUE]:new La.Z}},this._renderablesDirty=!1,this._drawParameters=new fF,this._settings={...yF,...A},this.key=hy.getKey(this._settings.type,this._settings.hasSlicePlane,this._settings.legacy),this.writerSettings={variants:this._settings.strokesTexture.variants,reducedPrecision:Nl.Z.TESTS_DISABLE_OPTIMIZATIONS},this._configuration.legacy=this._settings.legacy,this._configuration.mode=EF[this._settings.type],this._configuration.silhouette=!1,this._configuration.antialiasing=!!this.rctx.capabilities.blendMinMax,this._configuration.hasSlicePlane=this._settings.hasSlicePlane,this._configuration.doublePrecisionRequiresObfuscation=(0,yS.I)(v),this._configuration.spherical=A.spherical}dispose(){this._technique=(0,at.RY)(this._technique)}addRenderable(v){this.renderables.add(v),this._renderablesDirty=!0}removeRenderable(v){this.renderables.delete(v),this._renderablesDirty=!0}setRenderablesDirty(){this._renderablesDirty=!0}forEachRenderable(v,O){this._renderablesDirty&&this._sortRenderables(),this.sortedRenderables[O][Wn.i.TRANSPARENT].forAll(v),this.sortedRenderables[O][Wn.i.OPAQUE].forAll(v)}updateTechnique(v,O){return this._configuration.hasMultipassTerrain=!!v.multipassTerrain.enabled,this._configuration.cullAboveGround=!!v.multipassTerrain.cullAboveGround,this._configuration.silhouette=O,this._technique=this.shaderTechniqueRepository.releaseAndAcquire(fE,this._configuration,this._technique),this._technique}bindRegularEdges(v,O){return this.rctx.bindTechnique(this.updateTechnique(O,!1),v,O)}bindSilhouetteEdges(v,O){return this.rctx.bindTechnique(this.updateTechnique(O,!0),v,O)}renderRegularEdges(v,O,A,j,te){this._render(v,O,O.regular.vao,A,j,te)}renderSilhouetteEdges(v,O,A,j,te){this._render(v,O,O.silhouette.vao,A,j,te)}_render(v,O,A,j,te,pe){this._bindDraw(v,O,j,pe),this.rctx.bindVAO(A),this.rctx.capabilities.instancing.drawArraysInstanced(Gt.MX.TRIANGLE_FAN,0,4,te)}_bindDraw(v,O,A,j){if(O.components.buffer.textureBuffer.bind(v,MF,bF),"origin"in O.transform)v.setUniformMatrix4fv("localView",j),v.setUniformMatrix4fv("model",O.transform.modelMatrix),(0,Et.c)(this._drawParameters.slicePlaneLocalOrigin,O.transform.origin.vec3);else{const te=new q1(O.transform.position),pe=(0,Ta.t)(zS,(0,Ta.e)(zS,O.transform.rotationScale));this._drawParameters.transformWorldFromModelTL=te.low,this._drawParameters.transformWorldFromModelTH=te.high,this._drawParameters.transformWorldFromModelRS=O.transform.rotationScale,this._drawParameters.transformNormalGlobalFromModel=pe;const be=A.camera.viewInverseTransposeMatrix;(0,Et.s)(this._drawParameters.slicePlaneLocalOrigin,be[3],be[7],be[11])}v.bindDraw(this._drawParameters,A),"uber"!==this._settings.type&&"sketch"!==this._settings.type||this._setSketchUniforms(v)}_setSketchUniforms(v){const O=this._settings.strokesTexture,A=O.texture;(0,at.Wi)(A)||(v.bindTexture("strokesTexture",A),v.setUniform2f("strokesTextureScale",1/A.descriptor.width,1/A.descriptor.height),v.setUniform1f("strokesLog2Resolution",Math.log2(O.resolution)),v.setUniform1f("strokesNormalizationScale",O.normalizationScale),v.setUniform1f("strokesAmplitude",O.amplitude),v.setUniform1f("strokeVariants",O.variants))}_sortRenderables(){this._renderablesDirty=!1,this.sortedRenderables[Wn.i.TRANSPARENT][Wn.i.TRANSPARENT].clear(),this.sortedRenderables[Wn.i.TRANSPARENT][Wn.i.OPAQUE].clear(),this.sortedRenderables[Wn.i.OPAQUE][Wn.i.TRANSPARENT].clear(),this.sortedRenderables[Wn.i.OPAQUE][Wn.i.OPAQUE].clear(),this.renderables.forEach(O=>{O.objectTransparency!==Wn.i.INVISIBLE&&O.edgeTransparency!==Wn.i.INVISIBLE&&this.sortedRenderables[O.objectTransparency][O.edgeTransparency].push(O)});const v=(O,A)=>"origin"in O.transform&&"origin"in A.transform?O.transform.origin.id<A.transform.origin.id?-1:O.transform.origin.id>A.transform.origin.id?1:0:0;this.sortedRenderables[Wn.i.TRANSPARENT][Wn.i.TRANSPARENT].sort(v),this.sortedRenderables[Wn.i.TRANSPARENT][Wn.i.OPAQUE].sort(v),this.sortedRenderables[Wn.i.OPAQUE][Wn.i.TRANSPARENT].sort(v),this.sortedRenderables[Wn.i.OPAQUE][Wn.i.OPAQUE].sort(v)}static getKey(v,O,A){return`edges-t:${v}:${O}:${A}`}}const MF="componentDataTex",bF="componentDataTexInvDim",zS=(0,kf.c)();var B0,TF=T(14171);function mE(d,v){if(!d)return null;const O=d.length/2,A=OF*O,j=new Array(O);let te=0;const pe=v===B0.PRESSURE;for(let be=0;be<d.length;be+=2){const Re=(d[be]+d[be+1])/2;j[te++]=pe?Math.min(A,1-(1-Re)*HS):Math.min(A,Re*HS)}return j}!function(d){d[d.DISTANCE=0]="DISTANCE",d[d.PRESSURE=1]="PRESSURE"}(B0||(B0={}));const OF=.1,HS=.5;class PF{constructor(v,O,A,j,te){this.resolution=v,this.normalizationScale=O,this.amplitude=A,this.variants=j,this.texture=te}dispose(){this.texture=(0,at.O3)(this.texture)}}const m__amplitude=8,m__resolution=256,m__strokes=[{distance:[-1.59027,-1.59426,-1.59674,-1.59766,-1.59702,-1.59479,-1.59095,-1.5855,-1.57843,-1.56973,-1.55942,-1.5475,-1.53398,-1.5189,-1.50226,-1.4841,-1.46446,-1.44337,-1.42088,-1.39703,-1.37188,-1.34547,-1.31786,-1.28912,-1.2593,-1.22847,-1.19668,-1.16402,-1.13053,-1.09629,-1.06137,-1.02582,-.98972,-.95313,-.91611,-.87872,-.84102,-.80306,-.76488,-.72654,-.68807,-.64952,-.61092,-.57232,-.53375,-.49527,-.45692,-.41874,-.38078,-.34309,-.3057,-.26867,-.23204,-.19585,-.16015,-.12497,-.09036,-.05634,-.02296,.00977,.04183,.07321,.10389,.13386,.16313,.19169,.21956,.24672,.27321,.299,.32413,.34858,.37237,.3955,.41798,.43981,.461,.48154,.50145,.52073,.53939,.55744,.57488,.5917,.6079,.62347,.63837,.65259,.66609,.67885,.69083,.70201,.71235,.72183,.73042,.73812,.7449,.75076,.7557,.75973,.76284,.76507,.76642,.76692,.76659,.76545,.76352,.76083,.7574,.75324,.74837,.74279,.73652,.72959,.72199,.71377,.70493,.69553,.68558,.67515,.66426,.65298,.64135,.62944,.6173,.60499,.59257,.58008,.56759,.55513,.54275,.5305,.51842,.50654,.4949,.48353,.47246,.4617,.45128,.44121,.43149,.42213,.41313,.40448,.39617,.38818,.3805,.37309,.36594,.35902,.35229,.34572,.33927,.33292,.32663,.32035,.31407,.30774,.30135,.29486,.28824,.28148,.27454,.26739,.26002,.25241,.24454,.23639,.22796,.21922,.21016,.20076,.19098,.18082,.17023,.1592,.14768,.13566,.1231,.10996,.09624,.08188,.06688,.05121,.03485,.01778,0,-.0185,-.03771,-.05763,-.07824,-.09952,-.12144,-.14396,-.16706,-.19069,-.21481,-.23938,-.26436,-.28971,-.31539,-.34136,-.36759,-.39404,-.42067,-.44746,-.47437,-.50136,-.52839,-.55544,-.58248,-.60948,-.63642,-.66329,-.6901,-.71684,-.74352,-.77015,-.79675,-.82332,-.84988,-.87644,-.90301,-.92958,-.95615,-.98272,-1.00926,-1.03575,-1.06217,-1.08847,-1.11463,-1.1406,-1.16633,-1.19178,-1.2169,-1.24164,-1.26595,-1.28979,-1.31312,-1.3359,-1.35809,-1.37963,-1.4005,-1.42064,-1.44,-1.45853,-1.47616,-1.49285,-1.50853,-1.52313,-1.53659,-1.54886,-1.55986,-1.56955,-1.57788,-1.5848],pressure:[-.01365,-.00206,.01025,.02327,.03696,.05129,.06619,.08163,.09755,.11393,.1307,.14784,.16531,.18308,.20111,.21938,.23786,.25651,.2753,.29419,.31315,.33215,.35115,.37015,.38913,.40806,.42694,.44576,.46449,.48313,.50167,.5201,.53839,.55653,.57448,.59222,.60971,.62692,.6438,.66033,.67648,.69221,.70753,.72242,.73688,.75093,.76456,.77779,.79063,.80309,.81517,.82686,.83817,.84911,.85967,.86987,.87972,.88924,.89845,.90734,.91594,.92425,.93229,.94005,.94754,.95475,.96166,.96826,.97451,.9804,.98588,.99092,.99549,.99957,.99685,.99381,.99131,.98936,.98796,.98711,.98681,.98706,.98787,.98923,.99113,.99357,.99654,1,.99607,.99171,.98695,.98181,.97634,.97057,.96452,.95824,.95175,.94506,.93818,.93113,.92389,.91647,.90887,.90109,.89314,.88501,.87672,.86831,.85978,.85119,.84256,.83393,.82533,.8168,.80836,.80002,.79181,.78374,.77582,.7681,.76059,.75331,.74629,.73955,.73311,.72697,.72116,.71568,.71054,.70572,.70121,.697,.69304,.68931,.68576,.68236,.67905,.67582,.67262,.66941,.66619,.66291,.65957,.65613,.65259,.64892,.6451,.6411,.6369,.63248,.62783,.62295,.61783,.61247,.60688,.60104,.59498,.58868,.58216,.57542,.56845,.56125,.5538,.5461,.53813,.52986,.52129,.51239,.50316,.49359,.4837,.47349,.46299,.45223,.44124,.43005,.41869,.40719,.39557,.38386,.37207,.36023,.34836,.33648,.32464,.31287,.30119,.28963,.27822,.26698,.25594,.2451,.23448,.22409,.21391,.20394,.19415,.18452,.17503,.16565,.15636,.14713,.13794,.1288,.11968,.11058,.10151,.09247,.08346,.07447,.06552,.05659,.0477,.03885,.03007,.02137,.01278,.00433,-.00393,-.012,-.01983,-.02738,-.03463,-.04155,-.0481,-.05429,-.0601,-.06553,-.07057,-.07524,-.07954,-.08347,-.08703,-.09022,-.09303,-.09544,-.09744,-.09898,-.10004,-.10059,-.1006,-.10005,-.09892,-.0972,-.09487,-.09192,-.08833,-.08409,-.07918,-.07357,-.06724,-.06019,-.0524,-.04386,-.03455,-.02448]},{distance:[-3.46259,-3.47131,-3.47668,-3.47863,-3.47712,-3.4721,-3.46352,-3.45138,-3.43566,-3.41635,-3.39347,-3.36704,-3.33709,-3.30368,-3.26684,-3.22667,-3.18322,-3.1366,-3.08689,-3.0342,-2.97865,-2.92036,-2.85946,-2.79607,-2.73034,-2.66241,-2.59242,-2.52052,-2.44686,-2.37159,-2.29485,-2.2168,-2.13757,-2.05731,-1.97616,-1.89426,-1.81174,-1.72875,-1.64543,-1.56191,-1.47833,-1.39483,-1.3115,-1.22847,-1.14581,-1.06361,-.98193,-.90083,-.82036,-.74054,-.66141,-.583,-.50532,-.4284,-.35228,-.277,-.20261,-.12916,-.05672,.01463,.08485,.15384,.22153,.28784,.35269,.41602,.47776,.53787,.59629,.653,.70799,.76123,.81274,.86253,.9106,.95698,1.0017,1.04477,1.0862,1.126,1.16415,1.20065,1.23546,1.26857,1.29994,1.32953,1.35731,1.38321,1.40719,1.42921,1.44922,1.46719,1.48309,1.49691,1.50862,1.51825,1.52581,1.53133,1.53486,1.53644,1.53616,1.53409,1.53031,1.52493,1.51803,1.50972,1.50009,1.48924,1.47725,1.46421,1.45019,1.43527,1.4195,1.40295,1.38568,1.36778,1.34929,1.3303,1.31087,1.29108,1.27099,1.25066,1.23018,1.2096,1.18898,1.16838,1.14785,1.12745,1.10721,1.08719,1.06741,1.04791,1.02871,1.00986,.99136,.97324,.95551,.93819,.92127,.90476,.88866,.87296,.85767,.84277,.82823,.81406,.80022,.7867,.77346,.76049,.74774,.73519,.72278,.71049,.69827,.68606,.67381,.66145,.64893,.63618,.62313,.60973,.5959,.5816,.56675,.5513,.53516,.51826,.50053,.4819,.46231,.44169,.42002,.39725,.37336,.34834,.32219,.2949,.2665,.23698,.20638,.17469,.14193,.10809,.07316,.03714,0,-.03827,-.07772,-.11836,-.16022,-.20332,-.24768,-.29332,-.34024,-.38844,-.43788,-.48854,-.54036,-.59329,-.64724,-.70211,-.75782,-.81425,-.87128,-.92881,-.98674,-1.04498,-1.10346,-1.1621,-1.22086,-1.27969,-1.33854,-1.3974,-1.45625,-1.51511,-1.57396,-1.63283,-1.69173,-1.75067,-1.80968,-1.86875,-1.9279,-1.98712,-2.04639,-2.10568,-2.16495,-2.22416,-2.28322,-2.34208,-2.40063,-2.4588,-2.51647,-2.57354,-2.62989,-2.68543,-2.74002,-2.79357,-2.84597,-2.89711,-2.94689,-2.99521,-3.04195,-3.087,-3.13023,-3.17152,-3.21075,-3.24779,-3.28252,-3.3148,-3.34451,-3.37154,-3.39577,-3.41709,-3.43539,-3.45059],pressure:[.87183,.87151,.87129,.87118,.87117,.87128,.87149,.87182,.87225,.8728,.87347,.87424,.87513,.87613,.87723,.87845,.87978,.88122,.88276,.88441,.88616,.88801,.88996,.892,.89414,.89637,.89868,.90108,.90356,.90611,.90874,.91144,.91421,.91704,.91993,.92287,.92587,.92892,.93201,.93514,.93831,.94151,.94474,.94799,.95126,.95456,.95786,.96118,.9645,.96783,.97116,.97448,.9778,.98111,.98441,.9877,.99096,.99421,.99742,.99938,.99622,.9931,.99001,.98697,.98397,.98101,.97811,.97526,.97246,.96972,.96703,.96441,.96185,.95935,.95691,.95455,.95225,.95002,.94786,.94577,.94376,.94182,.93995,.93817,.93646,.93483,.93328,.93181,.93042,.92911,.92788,.92673,.92566,.92467,.92376,.92293,.92217,.92149,.92088,.92034,.91987,.91947,.91913,.91886,.91864,.91849,.91838,.91833,.91834,.91839,.91849,.91863,.91883,.91907,.91935,.91968,.92005,.92046,.92092,.92142,.92195,.92253,.92314,.9238,.92449,.92521,.92598,.92677,.9276,.92847,.92936,.93029,.93125,.93224,.93325,.9343,.93537,.93646,.93758,.93872,.93988,.94106,.94225,.94346,.94469,.94593,.94718,.94844,.94971,.95098,.95226,.95354,.95482,.9561,.95738,.95867,.95995,.96122,.9625,.96377,.96504,.9663,.96757,.96883,.97009,.97135,.97261,.97387,.97513,.9764,.97767,.97895,.98023,.98153,.98284,.98416,.98549,.98684,.98821,.9896,.99101,.99244,.99389,.99537,.99688,.99842,1,.99839,.99675,.99508,.99336,.99161,.98982,.98799,.98613,.98422,.98228,.98029,.97827,.97622,.97414,.97202,.96987,.9677,.96551,.9633,.96107,.95882,.95656,.9543,.95202,.94975,.94747,.94519,.94292,.94065,.93838,.93613,.93388,.93164,.92941,.9272,.92499,.9228,.92062,.91846,.91631,.91418,.91207,.90998,.90792,.90588,.90387,.90189,.89995,.89804,.89617,.89434,.89256,.89083,.88914,.88752,.88595,.88443,.88299,.88161,.8803,.87907,.87791,.87683,.87584,.87494,.87412,.8734,.87278,.87225]},{distance:[.39335,.43437,.47737,.52234,.56923,.61801,.66864,.72109,.7753,.83123,.88882,.94801,1.00875,1.07097,1.13461,1.1996,1.26586,1.33333,1.40193,1.47158,1.54221,1.61373,1.68607,1.75913,1.83284,1.90711,1.98186,2.05699,2.13243,2.20809,2.28387,2.35971,2.4355,2.51117,2.58663,2.66179,2.73658,2.81092,2.88473,2.95792,3.03043,3.10217,3.17308,3.24309,3.31211,3.3801,3.44697,3.51267,3.57712,3.64028,3.70208,3.76247,3.8214,3.87881,3.93467,3.98892,4.04152,4.09244,4.14164,4.18908,4.23474,4.27859,4.32061,4.36077,4.39905,4.43544,4.46992,4.50249,4.53314,4.56185,4.58864,4.61349,4.63642,4.65745,4.67657,4.69381,4.7092,4.72274,4.73447,4.74441,4.75259,4.75903,4.76376,4.76682,4.76822,4.768,4.76618,4.76279,4.75786,4.75142,4.74348,4.73409,4.72326,4.71102,4.69739,4.68241,4.6661,4.64849,4.6296,4.60948,4.58816,4.56567,4.54204,4.51732,4.49154,4.46473,4.43694,4.4082,4.37854,4.348,4.31662,4.28443,4.25145,4.21773,4.1833,4.14819,4.11243,4.07606,4.03912,4.00162,3.96361,3.92512,3.88618,3.84683,3.80708,3.76697,3.72653,3.68579,3.64478,3.60351,3.56202,3.52033,3.47845,3.43642,3.39425,3.35196,3.30957,3.2671,3.22455,3.18196,3.13933,3.09668,3.05402,3.01136,2.96873,2.92613,2.88357,2.84108,2.79865,2.75631,2.71407,2.67195,2.62994,2.58807,2.54634,2.50477,2.46338,2.42216,2.38114,2.34032,2.29971,2.25933,2.21916,2.17923,2.13954,2.10008,2.06087,2.02189,1.98316,1.94468,1.90644,1.86845,1.83069,1.79316,1.75586,1.71877,1.68189,1.6452,1.60868,1.57232,1.53611,1.50004,1.46407,1.4282,1.39241,1.35668,1.321,1.28535,1.24972,1.2141,1.17849,1.14286,1.10723,1.07158,1.03593,1.00028,.96464,.92902,.89344,.85793,.8225,.78719,.75203,.71705,.68231,.64784,.61369,.57991,.54656,.51368,.48134,.44959,.41849,.3881,.35848,.32967,.30174,.27474,.24872,.22373,.19982,.17702,.15539,.13497,.11579,.09791,.08137,.06621,.05248,.04022,.02948,.02029,.01271,.00677,.00252,0,-76e-5,27e-5,.00314,.00788,.01451,.02307,.03357,.04604,.0605,.07697,.09546,.11599,.13858,.16322,.18992,.21869,.24952,.28241,.31735,.35434],pressure:[.95248,.95236,.95228,.95223,.95222,.95224,.95231,.95241,.95256,.95274,.95296,.95322,.95352,.95385,.95423,.95465,.9551,.9556,.95613,.9567,.95731,.95796,.95864,.95936,.96012,.96091,.96173,.96259,.96348,.9644,.96535,.96633,.96734,.96838,.96944,.97053,.97164,.97277,.97393,.9751,.97629,.9775,.97873,.97997,.98122,.98249,.98376,.98505,.98634,.98763,.98893,.99023,.99154,.99284,.99414,.99544,.99673,.99802,.9993,.99942,.99816,.99691,.99568,.99445,.99324,.99205,.99087,.98972,.98858,.98746,.98636,.98528,.98423,.9832,.98219,.98121,.98025,.97931,.9784,.97752,.97666,.97582,.97501,.97423,.97347,.97274,.97203,.97135,.9707,.97007,.96948,.9689,.96836,.96784,.96735,.96689,.96646,.96605,.96567,.96533,.965,.96471,.96445,.96421,.964,.96382,.96367,.96355,.96346,.96339,.96335,.96334,.96336,.9634,.96348,.96358,.9637,.96385,.96403,.96423,.96446,.96471,.96499,.96529,.96561,.96595,.96631,.96669,.96709,.96751,.96795,.9684,.96887,.96935,.96984,.97035,.97087,.9714,.97194,.97249,.97304,.97361,.97418,.97476,.97534,.97592,.97651,.97711,.9777,.9783,.9789,.9795,.9801,.9807,.9813,.9819,.9825,.98309,.98369,.98428,.98486,.98545,.98603,.98661,.98718,.98775,.98832,.98888,.98944,.99,.99056,.99112,.99167,.99223,.99279,.99335,.99392,.99449,.99507,.99565,.99624,.99684,.99745,.99807,.9987,.99934,1,.99933,.99866,.99797,.99727,.99656,.99583,.9951,.99435,.99359,.99283,.99205,.99126,.99046,.98966,.98885,.98803,.9872,.98637,.98554,.9847,.98387,.98303,.98219,.98134,.9805,.97967,.97883,.978,.97717,.97634,.97552,.97471,.97389,.97309,.97229,.9715,.97071,.96993,.96915,.96838,.96762,.96687,.96612,.96539,.96466,.96395,.96324,.96255,.96187,.9612,.96055,.95991,.95929,.95869,.95811,.95754,.957,.95648,.95599,.95552,.95508,.95467,.95428,.95393,.9536,.95331,.95305,.95283,.95264]},{distance:[2.85606,2.86149,2.86432,2.8645,2.862,2.85686,2.84912,2.83886,2.82618,2.81117,2.79393,2.77456,2.75314,2.72975,2.70447,2.67734,2.64844,2.61784,2.58564,2.55196,2.5169,2.48057,2.44305,2.40438,2.36462,2.32383,2.28208,2.23943,2.19591,2.15153,2.10628,2.06016,2.01321,1.96548,1.91702,1.86793,1.8183,1.76829,1.71803,1.66767,1.61737,1.56726,1.51746,1.46803,1.41902,1.37044,1.32228,1.27452,1.22716,1.18023,1.13376,1.08781,1.04244,.99769,.95357,.91003,.86701,.82447,.78238,.74069,.69938,.65836,.61758,.57699,.53656,.49627,.45611,.41611,.37632,.33683,.29776,.25924,.22141,.18441,.14839,.11346,.07972,.04727,.01619,-.01348,-.0417,-.0684,-.09351,-.11698,-.13875,-.1588,-.17713,-.19381,-.20889,-.22242,-.23444,-.24501,-.25421,-.26216,-.26897,-.27473,-.27951,-.28336,-.28631,-.28836,-.28948,-.28963,-.28873,-.28673,-.28355,-.27916,-.27354,-.26673,-.25878,-.2498,-.23992,-.22929,-.21802,-.20623,-.19398,-.18134,-.16836,-.1551,-.14163,-.12809,-.11461,-.1013,-.08826,-.07557,-.06335,-.0517,-.04077,-.03065,-.02143,-.01321,-.00606,0,.00496,.00888,.01181,.01385,.01511,.0157,.01574,.01533,.01458,.01358,.0124,.01112,.00979,.00851,.00738,.0065,.006,.00596,.00646,.00754,.00924,.01161,.01471,.01858,.02323,.02865,.03481,.04169,.0493,.05765,.06677,.07671,.08754,.09934,.11222,.12628,.14159,.15823,.17624,.19561,.21632,.23828,.26142,.28563,.31083,.33696,.36397,.39185,.42057,.4501,.48036,.51125,.54264,.5744,.60646,.63871,.67105,.70337,.73556,.76751,.79918,.83048,.86139,.8919,.92202,.95184,.98144,1.01094,1.04045,1.0701,1.10002,1.13029,1.16103,1.1923,1.22416,1.25664,1.28979,1.32364,1.35824,1.39363,1.42985,1.4669,1.50475,1.54332,1.58252,1.62227,1.6625,1.70312,1.744,1.78501,1.82598,1.8668,1.90734,1.94754,1.98732,2.02666,2.06555,2.10402,2.1421,2.17985,2.2173,2.25448,2.29139,2.328,2.36424,2.4,2.43515,2.46955,2.50309,2.53565,2.56717,2.59761,2.62692,2.65505,2.68191,2.7074,2.73138,2.75375,2.7744,2.79324,2.81017,2.82504,2.83772,2.8481],pressure:[.22758,.23641,.24578,.25568,.26609,.27699,.28835,.30016,.31237,.32495,.33789,.35113,.36466,.37843,.39241,.40658,.4209,.43535,.44989,.4645,.47916,.49385,.50853,.5232,.53784,.55243,.56696,.58141,.59578,.61004,.62419,.63821,.65209,.6658,.67934,.69268,.70582,.71873,.73139,.7438,.75594,.76779,.77935,.79061,.80156,.81221,.82254,.83258,.84231,.85176,.86091,.86978,.87837,.88669,.89473,.9025,.91,.91725,.92425,.931,.93752,.9438,.94985,.95566,.96124,.96658,.97168,.97652,.98109,.98539,.98939,.99309,.99646,.99949,.99783,.99552,.99361,.99209,.99098,.99029,.99003,.99019,.99079,.99181,.99324,.9951,.99735,1,.99698,.99361,.98992,.98592,.98163,.97709,.97231,.96731,.96212,.95676,.95122,.94554,.93973,.93378,.92773,.92157,.91532,.90899,.90258,.89612,.88961,.88308,.87653,.87,.8635,.85705,.85068,.8444,.83823,.83219,.82628,.82052,.81493,.80952,.8043,.79929,.7945,.78994,.78561,.78151,.77765,.77402,.77062,.76742,.76443,.76161,.75896,.75645,.75406,.75175,.74951,.7473,.74511,.74289,.74064,.73833,.73592,.73341,.73078,.728,.72507,.72197,.71869,.71522,.71156,.70769,.70363,.69936,.69489,.69021,.68533,.68023,.67492,.66939,.66363,.65765,.65145,.64501,.63833,.63143,.62428,.61691,.60931,.60148,.59344,.58521,.57679,.5682,.55948,.55063,.54167,.53264,.52354,.51439,.50522,.49603,.48686,.47773,.46865,.45964,.45072,.44192,.43324,.42469,.41629,.40804,.39994,.392,.3842,.37655,.36903,.36164,.35437,.3472,.34012,.33312,.3262,.31933,.31251,.30574,.299,.2923,.28563,.27899,.27239,.26583,.25933,.25288,.24652,.24025,.2341,.22808,.22221,.21653,.21104,.20576,.20072,.19592,.19138,.18712,.18313,.17943,.17602,.17292,.17013,.16766,.16551,.16369,.16222,.1611,.16036,.16001,.16007,.16055,.16148,.16286,.16471,.16705,.16988,.17321,.17706,.18144,.18636,.19182,.19785,.20443,.21158,.2193]},{distance:[-2.31317,-2.3191,-2.32189,-2.32154,-2.31811,-2.31174,-2.30254,-2.29062,-2.27609,-2.25904,-2.23954,-2.21767,-2.19355,-2.16732,-2.13907,-2.10885,-2.07672,-2.04268,-2.00677,-1.96911,-1.92985,-1.88914,-1.84713,-1.80397,-1.75979,-1.71467,-1.66864,-1.62171,-1.57395,-1.52546,-1.47625,-1.42628,-1.3755,-1.32384,-1.27131,-1.218,-1.16408,-1.10972,-1.05508,-1.00031,-.94551,-.89077,-.83615,-.7817,-.72757,-.6739,-.62076,-.56821,-.51625,-.46484,-.41397,-.36366,-.314,-.26506,-.21689,-.16957,-.12316,-.07766,-.03301,.01085,.05399,.09643,.13827,.17967,.22079,.26176,.30265,.34342,.38397,.42414,.46381,.50285,.54115,.57863,.61524,.65093,.6856,.71914,.75153,.78275,.81283,.84182,.86972,.89651,.92208,.94634,.96919,.99052,1.01025,1.02835,1.04484,1.05976,1.07309,1.08479,1.09492,1.1036,1.11096,1.11714,1.12224,1.12627,1.12916,1.13083,1.13125,1.13036,1.12816,1.12466,1.11992,1.11397,1.10677,1.09827,1.08849,1.07746,1.06527,1.05203,1.03786,1.02283,1.00695,.99025,.97279,.9546,.93573,.9163,.8965,.8765,.85647,.83652,.81687,.79775,.77939,.76199,.74568,.73049,.71635,.70316,.69082,.67925,.66834,.65804,.64831,.63911,.63032,.62184,.61363,.60564,.59788,.59036,.58308,.57597,.5689,.56177,.55447,.5469,.53896,.53062,.5219,.51283,.5034,.49355,.48335,.47287,.46223,.45154,.44085,.43012,.41923,.40805,.39648,.38441,.37176,.35849,.34458,.32999,.31461,.29833,.28109,.26288,.2437,.22361,.20265,.18082,.15807,.13434,.1096,.0838,.0569,.02894,0,-.0298,-.0604,-.09173,-.12364,-.15594,-.18843,-.22092,-.25331,-.28559,-.31781,-.35006,-.38244,-.41502,-.44785,-.48098,-.5144,-.54811,-.58218,-.61666,-.65153,-.68677,-.72232,-.75807,-.79397,-.83002,-.86628,-.90281,-.93968,-.97693,-1.01465,-1.05282,-1.09139,-1.13031,-1.16956,-1.20917,-1.24905,-1.28907,-1.32908,-1.36891,-1.40844,-1.44765,-1.48658,-1.52527,-1.56376,-1.60206,-1.64016,-1.67801,-1.71552,-1.75264,-1.78936,-1.8257,-1.86161,-1.89702,-1.93182,-1.96584,-1.99894,-2.03102,-2.06203,-2.0919,-2.12056,-2.14794,-2.17397,-2.19852,-2.22138,-2.24235,-2.26129,-2.27805,-2.29243,-2.30422],pressure:[.9681,.97424,.98046,.98674,.99309,.9995,.99404,.98754,.981,.97444,.96785,.96124,.95462,.94801,.94139,.93479,.92822,.92167,.91515,.90868,.90225,.89589,.88959,.88336,.87722,.87115,.86519,.85932,.85356,.84792,.84239,.83699,.83173,.8266,.82162,.81679,.81211,.80759,.80324,.79906,.79505,.79121,.78756,.78409,.78081,.77771,.77481,.77211,.76959,.76728,.76516,.76324,.76153,.76001,.75869,.75757,.75665,.75593,.7554,.75507,.75493,.75498,.75523,.75565,.75627,.75706,.75803,.75917,.76049,.76197,.76361,.76541,.76737,.76947,.77172,.77409,.7766,.77923,.78198,.78484,.7878,.79086,.79401,.79724,.80055,.80394,.8074,.81092,.8145,.81813,.82182,.82556,.82934,.83317,.83703,.84093,.84487,.84884,.85284,.85687,.86094,.86503,.86915,.87329,.87746,.88166,.88587,.89011,.89436,.89863,.90291,.9072,.91149,.91579,.92009,.92438,.92867,.93295,.9372,.94144,.94566,.94985,.954,.95812,.96219,.96623,.97021,.97415,.97802,.98184,.9856,.9893,.99293,.9965,1,.99657,.9932,.98991,.98668,.98352,.98042,.97738,.9744,.97148,.9686,.96577,.96298,.96023,.95751,.95482,.95214,.94949,.94684,.9442,.94156,.93892,.93627,.93361,.93094,.92825,.92555,.92284,.9201,.91735,.91458,.91179,.90899,.90616,.90332,.90047,.8976,.89472,.89183,.88893,.88603,.88314,.88024,.87735,.87448,.87162,.86878,.86597,.86319,.86044,.85774,.85508,.85247,.84993,.84744,.84503,.84269,.84042,.83825,.83616,.83417,.83227,.83048,.8288,.82724,.82578,.82445,.82324,.82215,.82119,.82037,.81967,.81911,.81868,.81839,.81824,.81823,.81835,.81862,.81903,.81957,.82026,.82109,.82206,.82317,.82443,.82583,.82737,.82906,.83089,.83287,.83499,.83726,.83968,.84223,.84494,.84778,.85077,.8539,.85717,.86058,.86412,.86781,.87163,.87559,.87968,.88391,.88826,.89275,.89737,.90211,.90698,.91198,.91709,.92233,.92768,.93315,.93873,.94441,.95019,.95607,.96205]},{distance:[4.72925,4.81721,4.9037,4.98859,5.07177,5.15311,5.23249,5.3098,5.38491,5.45772,5.52811,5.59598,5.66122,5.72375,5.78346,5.84028,5.8941,5.94486,5.99248,6.03689,6.07803,6.11584,6.15028,6.18128,6.20882,6.23285,6.25336,6.27031,6.28369,6.29348,6.29969,6.3023,6.30133,6.29678,6.28867,6.27703,6.26187,6.24324,6.22116,6.19567,6.16683,6.13468,6.09928,6.06068,6.01896,5.97417,5.92639,5.87569,5.82217,5.76589,5.70696,5.64545,5.58147,5.5151,5.44644,5.37559,5.30265,5.2277,5.15085,5.0722,4.99184,4.90987,4.82639,4.74151,4.65533,4.56794,4.47945,4.38996,4.29959,4.20843,4.11658,4.02416,3.93125,3.83796,3.74437,3.65057,3.55666,3.46272,3.36884,3.27509,3.18155,3.08831,2.99545,2.90303,2.81114,2.71984,2.62922,2.53933,2.45026,2.36207,2.27484,2.18862,2.10349,2.01951,1.93675,1.85528,1.77515,1.69644,1.61919,1.54348,1.46935,1.39685,1.32605,1.25698,1.18967,1.12417,1.06049,.99863,.93862,.88044,.82408,.76953,.71676,.66574,.61644,.56882,.52282,.47841,.43553,.39413,.35414,.31551,.27817,.24206,.20712,.17328,.14048,.10866,.07776,.04772,.01848,-.00999,-.03776,-.06487,-.09134,-.11721,-.14251,-.16725,-.19144,-.21509,-.2382,-.26076,-.28275,-.30416,-.32496,-.34511,-.36459,-.38334,-.40134,-.41852,-.43485,-.45026,-.46471,-.47815,-.49052,-.50179,-.51189,-.52081,-.52849,-.5349,-.54003,-.54383,-.54627,-.54734,-.54702,-.54528,-.54211,-.53752,-.53149,-.52403,-.51515,-.50487,-.4932,-.48015,-.46575,-.45001,-.43297,-.41463,-.39503,-.37419,-.35213,-.32887,-.30443,-.27885,-.25214,-.22432,-.19541,-.16544,-.13442,-.10235,-.06926,-.03514,0,.03616,.07336,.11159,.15088,.19125,.23272,.27531,.31906,.36401,.41019,.45764,.5064,.55651,.60802,.66096,.71538,.77129,.82874,.88776,.94836,1.01056,1.07438,1.13982,1.20687,1.27554,1.34581,1.41766,1.49107,1.56599,1.64239,1.72025,1.79951,1.88013,1.96209,2.04532,2.12979,2.21546,2.30226,2.39017,2.47911,2.56905,2.65991,2.75164,2.84416,2.93742,3.03133,3.12582,3.2208,3.31619,3.41191,3.50785,3.60393,3.70006,3.79612,3.89202,3.98765,4.08291,4.17767,4.27182,4.36525,4.45783,4.54944,4.63995],pressure:[.30942,.30838,.30765,.30724,.30715,.30738,.30795,.30884,.31007,.31164,.31354,.31578,.31837,.32129,.32455,.32815,.33209,.33636,.34097,.34591,.35117,.35675,.36265,.36887,.37539,.38221,.38933,.39674,.40442,.41238,.4206,.42907,.43779,.44675,.45593,.46533,.47493,.48473,.49471,.50486,.51517,.52563,.53623,.54694,.55777,.5687,.57971,.59079,.60194,.61313,.62435,.6356,.64686,.65811,.66935,.68056,.69174,.70286,.71391,.72489,.73579,.74659,.75728,.76785,.7783,.7886,.79876,.80877,.81861,.82827,.83776,.84706,.85617,.86507,.87378,.88227,.89056,.89863,.90649,.91412,.92153,.92872,.93568,.94241,.94892,.95519,.96122,.96702,.97258,.97791,.98299,.98783,.99242,.99677,.99911,.99525,.99164,.98827,.98515,.98228,.97966,.97728,.97514,.97324,.97159,.97017,.96898,.96801,.96727,.96674,.96641,.96629,.96635,.96661,.96703,.96762,.96838,.96928,.97032,.97149,.97279,.9742,.97572,.97734,.97905,.98085,.98273,.98468,.98669,.98877,.99091,.99311,.99535,.99765,1,.9976,.99516,.99267,.99014,.98755,.98491,.98222,.97947,.97666,.97378,.97083,.96781,.96471,.96153,.95826,.9549,.95144,.94787,.9442,.94042,.93651,.93249,.92834,.92407,.91966,.91512,.91045,.90564,.90069,.8956,.89037,.885,.87949,.87384,.86806,.86214,.85608,.84988,.84356,.83711,.83053,.82383,.81702,.81009,.80306,.79594,.78872,.78141,.77403,.76657,.75905,.75148,.74385,.73619,.72849,.72076,.71302,.70526,.69749,.68972,.68195,.67419,.66644,.65871,.65099,.64329,.63561,.62795,.62032,.61271,.60512,.59755,.59001,.58248,.57497,.56749,.56002,.55256,.54512,.5377,.5303,.52291,.51554,.50819,.50087,.49358,.48632,.4791,.47192,.4648,.45773,.45072,.44378,.43692,.43015,.42346,.41687,.41039,.40403,.39779,.39168,.38571,.37989,.37423,.36873,.36342,.35828,.35335,.34862,.34409,.3398,.33573,.3319,.32831,.32498,.32192,.31912,.3166,.31436,.31242,.31077]}];function GS(d){let v=null;for(const O of d){const A=O.type;if(DF(O))if((0,at.Wi)(v))v=A;else if(v!==A)return"uber"}return(0,at.pC)(v)?v:"uber"}function EC(d){let v=Wn.i.INVISIBLE;for(const{material:O}of d)if(KS(O)){if(O.color[3]*O.opacity<1)return Wn.i.TRANSPARENT;v=Wn.i.OPAQUE}return v}function MC(d){let v=Wn.i.INVISIBLE;for(const{material:O}of d)if(KS(O)){switch(O.objectTransparency){case Wn.i.TRANSPARENT:case Wn.i.INVISIBLE:return Wn.i.TRANSPARENT;case Wn.i.OPAQUE:if(O.opacity<1)return Wn.i.TRANSPARENT}v=Wn.i.OPAQUE}return v}function KS(d){return d.size*d.color[3]*d.opacity>0}function DF(d){return d.size*d.color[3]>0}function YS(d,v,O){return d.length-function xF(d,v){const O=(0,Qp.$A)(d,v,!0);return-1===O?v<d[0]?0:d.length:O}(d,v*O.minimumEdgeLength)}function ZS(d,v,O,A){for(let j=0;j<d.length;j++){const te=d[j].index,pe=v[j],be=v[j+1];if(A)for(let Re=pe;Re<be;Re++)O.set(A[Re],te);else for(let Re=pe;Re<be;Re++)O.set(Re,te)}}const SF=vo.Z.getLogger("esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView");let kd=class extends Li.Z{constructor(d){super(d),this.updatingHandles=new Wm.t,this.perObjectData=new Map,this.perObjectDataEvictionCache=new Set,this.renderers=new Map,this.numberOfRenderedEdges={[Wn.i.TRANSPARENT]:0,[Wn.i.OPAQUE]:0},this.gpuMemoryUsage=0,this.workerAbort=new AbortController,this.tmpModelPosition=(0,br.c)(),this.localOrigins=new hF(new aS.C(d.renderSR))}initialize(){this.worker=new TF.Z(this.schedule),this.componentColorManager=new CS(this.rctx,3);const d=f_.rD.createBuffer(4);for(let v=0;v<4;v++)d.sideness.set(v,0,0===v||3===v?0:1),d.sideness.set(v,1,0===v||1===v?0:1);this.verticesBufferObject=Bl.f.createVertex(this.rctx,Gt.l1.STATIC_DRAW,d.buffer)}destroy(){this.destroyed||(this.perObjectData.forEach(d=>this._discardObjectEntry(d)),this.perObjectData.clear(),this.strokesTexture=(0,at.O3)(this.strokesTexture),this.componentColorManager=(0,at.SC)(this.componentColorManager),this.workerAbort.abort(),this.worker.destroy(),this.verticesBufferObject=(0,at.O3)(this.verticesBufferObject),this.renderers.clear(),this.updatingHandles.destroy())}get updating(){return this.updatingHandles.updating}get usedMemory(){return this.gpuMemoryUsage}get numberOfRenderedPrimitives(){return this.numberOfRenderedEdges[Wn.i.TRANSPARENT]+this.numberOfRenderedEdges[Wn.i.OPAQUE]}shouldRender(){return this.renderers.size>0}addComponentObject(d,v,O,A,j,te,pe,be){var Re=this;return(0,oi.Z)(function*(){if(Re.hasObject(d))return Re.getObjectMemoryUsage(d);let Ge;const tt=new kS(new Promise(yt=>Ge=yt),O.center,O.radius);Re.perObjectData.set(d,tt);const ft=yield Re.updatingHandles.addPromise(Re._addComponentGeometry(v,tt,A,j,te,pe,be));return Re.setNeedsRender(),Ge(),ft})()}addOrUpdateObject3D(d,v,O,A){var j=this;return(0,oi.Z)(function*(){if(j.destroyed)return void SF.warn("Attempt to add an object to a destroyed instance");const te=j.perObjectData.get(d);let pe;te?.renderables.length>0&&j.perObjectDataEvictionCache.add(te);const be=d.boundingVolumeWorldSpace.bounds,Re=new kS(new Promise(tt=>pe=tt),(0,qo.g)(be),(0,qo.d)(be));j.perObjectData.set(d,Re);const Ge=new Array;if(O.mergeGeometries&&d.geometries.length>1&&function LF(d){let v=null,O=null;for(let A=0;A<d.geometries.length;A++){const j=d.geometryRecords[A];if(j.material.supportsEdges){if(v){if(!(0,Qp.fS)(v,j.transformation))return!1}else v=j.transformation;if(!O&&(0,at.pC)(j.origin))O=j;else if((0,at.pC)(O?.origin)&&(0,at.pC)(j.origin)&&O.origin.id!==j.origin.id)return!1}}return!0}(d))Ge.push(j._addObjectMergedGeometries(d,Re,v,O,A));else for(let tt=0;tt<d.geometries.length;tt++){const ft=d.geometryRecords[tt];ft.material.supportsEdges&&Ge.push(j._addGeometry(d,Re,d.geometries[tt],ft,v[0],O,A))}yield j.updatingHandles.addPromise(Promise.all(Ge)),j.perObjectDataEvictionCache.delete(Re),j._discardObjectEntry(te),j.setNeedsRender(),pe()})()}_discardObjectEntry(d){d&&(d.renderables.length&&(d.renderables.forEach(v=>this._removeRenderable(v)),this.setNeedsRender()),d.loaded=null)}hasObject(d){return this.perObjectData.has(d)}updateAllComponentOpacities(d,v){var O=this;return(0,oi.Z)(function*(){const A=v instanceof Array?j=>v[j]:()=>v;(yield O.updatingHandles.addPromise(O._getObjectEntry(d))).renderables.forEach(j=>{const te=j.components.meta.length;for(let pe=0;pe<te;pe++){const be=A(pe),Re=j.components.meta[pe],Ge=Re.index;Re.material.opacity=be,j.components.buffer.textureBuffer.setDataElement(Ge,1,3,255*be)}O._updateTransparency(j)}),O.setNeedsRender()})()}getObjectMemoryUsage(d){var v=this;return(0,oi.Z)(function*(){return(yield v._getObjectEntry(d)).renderables.reduce((O,A)=>O+A.statistics.gpuMemoryUsage,0)})()}updateAllComponentMaterials(d,v,O,A){var j=this;return(0,oi.Z)(function*(){const te=d instanceof _F.T,pe=!!O.hasSlicePlane,be=GS(v),Re=hy.getKey(be,pe,te);(yield j.updatingHandles.addPromise(j._getObjectEntry(d))).renderables.forEach(Ge=>{if(Re!==Ge.rendererKey){const tt=j.renderers.get(Ge.rendererKey),ft=j._acquireRenderer(be,pe,te);tt.removeRenderable(Ge),tt.refCount.decrement(),Ge.rendererKey=Re,ft.addRenderable(Ge)}for(let tt=0;tt<v.length;tt++)Ge.components.meta[tt].material=v[tt];A&&j._updateComponentBuffer(Ge.components),j._updateTransparency(Ge)}),j.setNeedsRender()})()}updateAllVerticalOffsets(d,v){var O=this;return(0,oi.Z)(function*(){(yield O.updatingHandles.addPromise(O._getObjectEntry(d))).renderables.forEach(A=>{const j=A.components.meta;for(let te=0;te<j.length;te++)A.components.meta[te].verticalOffset=v?.[te]??0;O._updateComponentBuffer(A.components)}),O.setNeedsRender()})()}updateObjectVisibility(d,v){var O=this;return(0,oi.Z)(function*(){(yield O.updatingHandles.addPromise(O._getObjectEntry(d))).renderables.forEach(A=>A.visible=v),O.setNeedsRender()})()}removeObject(d){const v=this.perObjectData.get(d);v&&(this.perObjectData.delete(d),this._discardObjectEntry(v))}_getObjectEntry(d){var v=this;return(0,oi.Z)(function*(){const O=v.perObjectData.get(d);if(!O)throw"no object";if(yield O.loaded,null==O.loaded)throw(0,fi.zE)();return O})()}removeAll(){this.perObjectData.forEach((d,v)=>this.removeObject(v))}render(d,v){if(this.numberOfRenderedEdges[v]=0,(0,at.Wi)(this.componentColorManager))return;this.localOrigins.updateViewMatrices(d.camera.viewMatrix);const O=d.camera.viewInverseTransposeMatrix,A=(0,br.c)(),j=new q1;let te=0,pe=0;if(this.renderers.forEach(tt=>{0===tt.refCount.value?(this.renderers.delete(tt.key),tt.dispose()):tt.forEachRenderable(ft=>{ft.visible&&(te+=ft.statistics.averageEdgeLength,pe++,ft.regular&&tt.updateTechnique(d,!1),ft.silhouette&&tt.updateTechnique(d,!0))},v)}),this.componentColorManager.garbageCollect(),this.componentColorManager.updateTextures(),0===pe)return;const Ge=new pF(40*te/pe,d.camera.perScreenPixelRatio,v);(0,Et.s)(A,O[3],O[7],O[11]),j.set(A),(0,Et.c)(Ge.transformWorldFromViewTH,j.high),(0,Et.c)(Ge.transformWorldFromViewTL,j.low),(0,Ta.f)(Ge.transformViewFromCameraRelativeRS,d.camera.viewMatrix),(0,Ta.t)($S,Ge.transformViewFromCameraRelativeRS),(0,Ta.e)(Ge.transformNormalViewFromGlobal,$S),Ge.transformProjFromView=d.camera.projectionMatrix,this._updateObjectCameraDistances(d),this.renderers.forEach(tt=>{this._renderRegularEdges(tt,d,Ge),this._renderSilhouetteEdges(tt,d,Ge)})}_updateTransparency(d){const v=EC(d.components.meta),O=MC(d.components.meta);v===d.edgeTransparency&&O===d.objectTransparency||(d.edgeTransparency=v,d.objectTransparency=O,this.renderers.get(d.rendererKey).setRenderablesDirty())}_computeModelTransformWithLocalOrigin(d,v,O){if(d.getCombinedStaticTransformation(v,O),(0,at.pC)(v.origin))this.localOrigins.register(v.origin);else{const A=(0,Et.s)(this.tmpModelPosition,O[12],O[13],O[14]);v.origin=this.localOrigins.acquire(A)}return function uF(d,v){const O=v,A=-d[0],j=-d[1],te=-d[2],pe=O[3],be=O[7],Re=O[11],Ge=O[15];O[0]+=pe*A,O[1]+=pe*j,O[2]+=pe*te,O[4]+=be*A,O[5]+=be*j,O[6]+=be*te,O[8]+=Re*A,O[9]+=Re*j,O[10]+=Re*te,O[12]+=Ge*A,O[13]+=Ge*j,O[14]+=Ge*te}(v.origin.vec3,O),v.origin}_updateComponentBuffer(d){const{meta:v,buffer:O}=d,A=new Uint8Array(4);for(let j=0;j<v.length;j++){const te=v[j].material,pe=v[j].index,be=(0,cs.uZ)(Math.round(8*te.size),0,255),Re=(0,cs.uZ)(te.extensionLength,-128,127)+128,Ge="solid"===te.type?WS.P.SOLID:WS.P.SKETCH,tt=255*te.opacity,ft=te.color;O.textureBuffer.setData(pe,0,255*ft[0],255*ft[1],255*ft[2],255*ft[3]),O.textureBuffer.setData(pe,1,be,Re,Ge,tt),(0,sy.nO)(v[j].verticalOffset,A),O.textureBuffer.setData(pe,2,A[0],A[1],A[2],A[3])}}_createComponentBuffers(d){if((0,at.Wi)(this.componentColorManager))return null;const v=new Array,O=this.componentColorManager.getBuffer(d.length);for(let j=0;j<d.length;j++){const te=d[j],pe=O.acquireIndex();v.push({index:pe,verticalOffset:0,material:te})}const A={meta:v,buffer:O};return this._updateComponentBuffer(A),A}_extractEdges(d,v,O,A,j,te=j.length){return this.worker.process({data:v,indices:j,indicesLength:te,writerSettings:d,skipDeduplicate:O},this.workerAbort.signal,A)}_createEdgeResources(d){const v={};if((0,at.Wi)(this.verticesBufferObject))return v;if(d.regular.lodInfo.lengths.length>0){const O=new ju.U(this.rctx,f_.so,{vertices:f_.dx,instances:NS.D9.glLayout},{vertices:this.verticesBufferObject,instances:Bl.f.createVertex(this.rctx,Gt.l1.STATIC_DRAW,d.regular.instancesData.buffer)});v.regular={vao:O,lod:d.regular.lodInfo}}if(d.silhouette.lodInfo.lengths.length>0){const O=new ju.U(this.rctx,f_.so,{vertices:f_.dx,instances:NS.qE.glLayout},{vertices:this.verticesBufferObject,instances:Bl.f.createVertex(this.rctx,Gt.l1.STATIC_DRAW,d.silhouette.instancesData.buffer)});v.silhouette={vao:O,lod:d.silhouette.lodInfo}}return v}_addGeometry(d,v,O,A,j,te,pe){var be=this;return(0,oi.Z)(function*(){const Re=O.vertexAttributes.get(No.T.POSITION),Ge=O.indices.get(No.T.POSITION),tt=(0,ao.c)(),ft={position:Re,indices:Ge,modelTransform:tt,origin:be._computeModelTransformWithLocalOrigin(d,A,tt)};return be._addPositionData(v,ft,O.edgeIndicesLength,j,te,pe)})()}_addPositionData(d,v,O,A,j,te=!1){var pe=this;return(0,oi.Z)(function*(){if(null==d.loaded)return;const be=pe._createComponentBuffers([A]);if((0,at.Wi)(be)||O<=0)return;const Re=pe._acquireRenderer(A.type,!!j.hasSlicePlane,!0),{modelTransform:Ge,origin:tt}=v,ft=v.indices,yt=v.position,It=yt.data.length/yt.size,Nt=f_.tf.createBuffer(It);for(let pr=0;pr<It;pr++)Nt.position.set(pr,0,yt.data[pr*yt.size+0]),Nt.position.set(pr,1,yt.data[pr*yt.size+1]),Nt.position.set(pr,2,yt.data[pr*yt.size+2]);ZS(be.meta,[0,Nt.componentIndex.count],Nt.componentIndex);const Rt=yield pe.updatingHandles.addPromise(pe._extractEdges(Re.writerSettings,Nt,!1,te,ft,O));if(null==d.loaded)return;const{regular:Jt,silhouette:jt}=pe._createEdgeResources(Rt),ir=(Jt?Jt.vao.size:0)+(jt?jt.vao.size:0),or={regular:Jt,silhouette:jt,transform:{modelMatrix:Ge,origin:tt},statistics:{gpuMemoryUsage:ir,externalMemoryUsage:!1,averageEdgeLength:Rt.averageEdgeLength},components:be,visible:!0,edgeTransparency:EC(be.meta),objectTransparency:MC(be.meta),distanceToCamera:0,rendererKey:Re.key};d.renderables.push(or),Re.addRenderable(or),pe.gpuMemoryUsage+=ir})()}_addComponentGeometry(d,v,O,A,j,te,pe){var be=this;return(0,oi.Z)(function*(){if(null==v.loaded)return 0;const Re=be._createComponentBuffers(te);if((0,at.Wi)(Re))return 0;const Ge=GS(te),tt=be._acquireRenderer(Ge,pe.hasSlicePlane||!1,!1),ft=f_.tf.createBuffer(O.count);(0,lS.c)(ft.position,O),ZS(Re.meta,j,ft.componentIndex,A);const It=tt.writerSettings,Nt=yield be.updatingHandles.addPromise(be._extractEdges(It,ft,!0,!1,A));if(null==v.loaded)return 0;const{regular:Rt,silhouette:Jt}=be._createEdgeResources(Nt),jt=(Rt?Rt.vao.size:0)+(Jt?Jt.vao.size:0),ir={regular:Rt,silhouette:Jt,transform:d,statistics:{gpuMemoryUsage:jt,externalMemoryUsage:!0,averageEdgeLength:Nt.averageEdgeLength},components:Re,visible:!0,edgeTransparency:EC(Re.meta),objectTransparency:MC(Re.meta),distanceToCamera:0,rendererKey:tt.key};return v.renderables.push(ir),tt.addRenderable(ir),jt})()}_addObjectMergedGeometries(d,v,O,A,j){var te=this;return(0,oi.Z)(function*(){const pe=new Map;let be=0,Re=null,Ge=0;for(let ir=0;ir<d.geometries.length;ir++){const or=d.geometries[ir],pr=d.geometryRecords[ir];if(!pr.material.supportsEdges)continue;!Re&&pr.origin&&(Re=pr);const Lr=or.vertexAttributes.get(No.T.POSITION);Ge+=Lr.data.length/Lr.size,be+=or.edgeIndicesLength}const tt=Ge>=65536?Uint32Array:Uint16Array,ft=be?new tt(be):null,yt=[];let It=0;for(let ir=0;ir<d.geometries.length;ir++){const or=d.geometries[ir];if(!d.geometryRecords[ir].material.supportsEdges)continue;const pr=or.vertexAttributes.get(No.T.POSITION),Lr=or.indices.get(No.T.POSITION);let Br=pe.get(pr.data);if(null==Br){Br=yt.length/3;for(let gs=0;gs<pr.data.length;gs+=pr.size)yt.push(pr.data[gs+0]),yt.push(pr.data[gs+1]),yt.push(pr.data[gs+2]);pe.set(pr.data,Br)}if(Lr)for(let gs=0;gs<or.edgeIndicesLength;gs++)ft[It++]=Br+Lr[gs]}const Nt=Re||d.geometryRecords[0],Rt=(0,ao.c)(),Jt=te._computeModelTransformWithLocalOrigin(d,Nt,Rt);for(let ir=0;ir<d.geometryRecords.length;ir++)d.geometryRecords[ir].origin=Jt;const jt={position:{data:yt,size:3},indices:ft,modelTransform:Rt,origin:Jt};yield te.updatingHandles.addPromise(te._addPositionData(v,jt,ft.length,O[0],A,j))})()}_acquireRenderer(d,v,O){const A=hy.getKey(d,v,O);let j=this.renderers.get(A);return(0,at.Wi)(this.strokesTexture)&&(this.strokesTexture=function CF(d){const O=m__resolution,A=O/2,j=new Uint8Array(4*O*O),te=4*O*A,pe=m__amplitude,be=2*pe,Re=4*O,Ge=Math.log2(O)+1,tt=m__strokes.length;let ft=(Ge-1)*tt*Re;for(const{distance:It,pressure:Nt}of m__strokes){let Rt=It,Jt=Nt,jt=ft;for(let ir=0;ir<Ge;ir++){0!==ir&&(Rt=mE(Rt,B0.DISTANCE),Jt=mE(Jt,B0.PRESSURE));for(let or=0;or<m__resolution;or++){const Lr=Jt?Jt[or%Jt.length]:1;(0,sE.I)(.5+(Rt?Rt[or%Rt.length]/be:0),j,jt),(0,sE.I)(Lr,j,jt+te),jt+=4}jt-=Re*(tt+1)}ft+=Re}const yt=new Va.x(d,{pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,hasMipmap:!1,samplingMode:Gt.cw.LINEAR,width:O,height:O,wrapMode:Gt.e8.REPEAT},j);return new PF(O,be,pe,tt,yt)}(this.rctx)),j||(j=new hy(this.rctx,this.techniqueRepository,{type:d,hasSlicePlane:v,strokesTexture:this.strokesTexture,legacy:O,spherical:this.viewingMode===dn.JY.Global}),this.renderers.set(A,j)),j.refCount.increment(),j}_removeRenderable(d){!function AF(d){d.regular&&(d.regular.vao.vertexBuffers.instances.dispose(),d.regular.vao.dispose(!1),d.regular.vao=null),d.silhouette&&(d.silhouette.vao.vertexBuffers.instances.dispose(),d.silhouette.vao.dispose(!1),d.silhouette.vao=null)}(d);const v=this.renderers.get(d.rendererKey);if(v){v.removeRenderable(d),v.refCount.decrement(),"origin"in d.transform&&this.localOrigins.release(d.transform.origin),this.gpuMemoryUsage-=d.statistics.externalMemoryUsage?0:d.statistics.gpuMemoryUsage;for(const O of d.components.meta)d.components.buffer.releaseIndex(O.index)}}_updateObjectCameraDistances(d){const v=d.camera.eye,O=d.camera.viewForward,A=(0,br.c)(),j=te=>{const{center:pe,radius:be}=te;(0,Et.v)(A,pe,v);const Re=(0,Et.e)(A,O),Ge=Re<-be?1/0:Re<be?0:Re-be;te.renderables.forEach(tt=>tt.distanceToCamera=Ge)};this.perObjectData.forEach(j),this.perObjectDataEvictionCache.forEach(j)}_renderRegularEdges(d,v,O){const A=d.bindRegularEdges(O,v),j=O.transparency;d.forEachRenderable(te=>{if(!te.visible||!te.regular)return;const pe=YS(te.regular.lod.lengths,te.distanceToCamera,O),be="origin"in te.transform?this.localOrigins.getViewMatrix(te.transform.origin):ao.I;d.renderRegularEdges(A,te,v,pe,be),this.numberOfRenderedEdges[j]+=pe},j)}_renderSilhouetteEdges(d,v,O){const A=d.bindSilhouetteEdges(O,v),j=O.transparency;d.forEachRenderable(te=>{if(!te.visible||!te.silhouette)return;const pe=YS(te.silhouette.lod.lengths,te.distanceToCamera,O),be="origin"in te.transform?this.localOrigins.getViewMatrix(te.transform.origin):ao.I;d.renderSilhouetteEdges(A,te,v,pe,be),this.numberOfRenderedEdges[j]+=pe},j)}};(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"rctx",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"renderSR",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"viewingMode",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"techniqueRepository",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"setNeedsRender",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],kd.prototype,"schedule",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],kd.prototype,"updatingHandles",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],kd.prototype,"updating",null),kd=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView")],kd);class kS{constructor(v,O,A){this.center=O,this.radius=A,this.renderables=new Array,this.loaded=v,this.loaded.then(()=>{null!=this.loaded&&(this.loaded=!0)})}}const $S=(0,Jh.c)();var wF=T(38516),bC=T(73362),RF=T(52323);class UF{constructor(v){this.timer=v,this.start=v.createQuery(),v.createTimestamp(this.start)}stop(v,O=50){this.end=this.timer.createQuery(),this.timer.createTimestamp(this.end),this._checkQueryResult(v,O)}_checkQueryResult(v,O){if(!this.timer.resultAvailable(this.end))return void setTimeout(()=>this._checkQueryResult(v,O),O);if(this.timer.disjoint())return void v(null);const A=this.timer.getResult(this.start),j=this.timer.getResult(this.end);v((j-A)/1e6)}}class BF{constructor(v){this.timer=v,this.query=v.createQuery(),TC=!0,this.timer.beginTimeElapsed(this.query)}stop(v,O=50){this.timer.endTimeElapsed(),TC=!1,this._checkQueryResult(v,O)}_checkQueryResult(v,O){const A=this.timer.resultAvailable(this.query),j=this.timer.disjoint();if(!A||j)j?v(null):setTimeout(()=>this._checkQueryResult(v,O),O);else{const te=this.timer.getResult(this.query);v(te/1e6)}}}let TC=!1;var Ia;!function(d){d[d.Prepare=0]="Prepare",d[d.Shadowmap=1]="Shadowmap",d[d.Lineardepth=2]="Lineardepth",d[d.Normals=3]="Normals",d[d.SSAO=4]="SSAO",d[d.Opaque=5]="Opaque",d[d.OpaqueEdges=6]="OpaqueEdges",d[d.Transparent=7]="Transparent",d[d.TransparentEdges=8]="TransparentEdges",d[d.Hudvisibility=9]="Hudvisibility",d[d.TransparentTerrain=10]="TransparentTerrain",d[d.Atmosphere=11]="Atmosphere",d[d.Laserline=12]="Laserline",d[d.Occluded=13]="Occluded",d[d.Antialiasing=14]="Antialiasing",d[d.Highlights=15]="Highlights",d[d.HudOccluded=16]="HudOccluded",d[d.HudNotoccluded=17]="HudNotoccluded"}(Ia||(Ia={}));const jF=["prepare","shadowmap","lineardepth","normals","ssao","opaque","opaque edges","transparent","transparent edges","hudvisibility","transparent terrain","atmosphere","laserline","occluded","antialiasing","highlights","hudOccluded","hudNotoccluded"];class FF extends bC.Z{constructor(){super("total"),this.total=0,this.frameCount=0}}class NF{constructor(){this._startTime=(0,ro.HA)(0),this._lastSample=(0,ro.HA)(0),this._enableGPUTimer=0,this.totalTime=new FF,this.gpuTime=new bC.Z("gpu",9),this.renderPassTimings=jF.map(v=>new bC.Z(v))}get elapsedTime(){return(0,ro.HA)(performance.now()-this._startTime)}enableGPUTimer(){return++this._enableGPUTimer,{remove:(0,RF.IH)(()=>--this._enableGPUTimer)}}prerender(v){this._startTime=this._lastSample=(0,ro.HA)(performance.now()),this._enableGPUTimer&&(this._gpuTimer=function IF(d){const v=d.capabilities.disjointTimerQuery;return(0,at.Wi)(v)?null:v.timestampBits()>0?new UF(v):TC?null:new BF(v)}(v))}advance(v){const O=(0,ro.HA)(performance.now());this.renderPassTimings[v].record(O-this._lastSample),this._lastSample=O}postrender(){(0,at.pC)(this._gpuTimer)&&(this._gpuTimer.stop(O=>(0,at.pC)(O)&&this.gpuTime.record(O),16),this._gpuTimer=null);const v=performance.now()-this._startTime;this.totalTime.record(v),this.totalTime.total+=v,this.totalTime.frameCount++}}let g_=class extends Li.Z{constructor(d,v,O,A,j,te,pe,be,Re){super({}),this._materialRepository=d,this._shaderTechniqueRepository=O,this._rctx=A,this._compositingHelper=j,this._magnifierHelper=te,this._requestRender=pe,this._stage=Re,this._materialRenderers=new Map,this._needsTransparentPass=!1,this._hasHUDElements=!1,this._hasHighlights=!1,this._hasWater=!1,this._hasOverlayWater=!1,this._content=new Map,this._isRendering=!1,this._fallbackDepthStencilTexture=null,this.performanceInfo=new NF,this._antialiasing=Gi.C_.SMAA,this._oitEnabled=!1,this._multipassTerrain=!0,this._transparentTerrain=!1,this._hasAnimations=!1,this._animationTimestep=(0,ro.HA)(0),this._handles=new so.Z,this._renderHiddenTransparentEdges=()=>{},this._oitUsed=!1,this._smaaPass=new uy(this._rctx,O),this._oitEnabled=this._hasOITSupport,this._requestRender(),this._offscreenRendering=new Vj(this._rctx,this._compositingHelper),this._sliceHelper=new aF,this._shadowMap=new uE.l(this._rctx,Re.viewingMode,2),this._ssaoHelper=new cF.L(O,this._rctx,()=>this._requestRender()),this._highlight=new Bj(O,this._rctx),this._shadowHighlight=new oF(this._rctx,Re.viewingMode),this._shadowAccumulator=new cc(this._rctx,O,Re,Ge=>{const tt=this.shadowsEnabled;this._shadowMap.enabled=!0,this._ensureCameraBindParameters(Ge.camera,Ge.contentCamera),this._renderPlugins.prepareRender(),this._shadowMap.enabled=tt},(Ge,tt,ft)=>{Ge.shadowMap.start(Ge.camera,tt,ft),this._renderShadowCascades(Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL,Ge.shadowMap),Ge.camera.setGLViewport(this._rctx),this._ensureCameraBindParameters(Ge.camera,Ge.contentCamera)},()=>this._requestRender()),this._renderContext=new Gj.V(this._rctx,this._offscreenRendering,this._shadowMap,this._ssaoHelper,this._sliceHelper),this._renderPlugins=new Yj({renderContext:this._renderContext,shaderTechniqueRepository:O,textureRep:v,materialRep:this._materialRepository,requestRender:this._requestRender,schedule:be}),this.renderPassManager=new wj(this._rctx,this._shaderTechniqueRepository),this._renderPlugins.add(this.renderPassManager.slots(),this.renderPassManager),this._handles.add([(0,wr.YP)(()=>this._stage.state.camera,()=>this._requestRender(),wr.tX),(0,wr.YP)(()=>Nl.Z.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES,Ge=>{this._renderHiddenTransparentEdges=Ge?()=>this._renderEdges(Wn.i.TRANSPARENT):()=>{},this._requestRender()},wr.nn)])}get _bindParameters(){return this._renderContext.bindParameters}get hasWater(){return this._hasWater||this._hasOverlayWater}get hasWaterReflection(){return this.hasWater&&this._waterReflectionEnabled}normalizeCtorArgs(){return{}}dispose(){this._handles.destroy(),this._smaaPass.dispose(),this._materialRenderers.forEach(d=>d.dispose()),this._materialRenderers.clear(),this._edgeView=(0,at.SC)(this._edgeView),this._offscreenRendering.dispose(),this._fallbackDepthStencilTexture=(0,at.O3)(this._fallbackDepthStencilTexture),this._shadowMap.enabled=!1,this._shadowMap.dispose(),this._ssaoHelper.enabled=!1,this._ssaoHelper.dispose(),this._highlight.dispose(),this._shadowHighlight.dispose(),this._shadowAccumulator.dispose(),Rj.j.prune(),this._content.clear()}disposeOffscreenBuffers(){this._offscreenRendering.dispose(),this._shadowMap.dispose(),this._smaaPass.disable(),this._ssaoHelper.disposeOffscreenBuffers()}get updating(){return this._antialiasing===Gi.C_.SMAA&&this._smaaPass.updating||(0,at.pC)(this._edgeView)&&this._edgeView.updating||this._shadowAccumulator.running||!this.isCameraFinal}ensureEdgeView(){return(0,at.Wi)(this._edgeView)&&(this._edgeView=new kd({rctx:this._rctx,renderSR:this._stage.renderSR,viewingMode:this._stage.viewingMode,techniqueRepository:this._shaderTechniqueRepository,setNeedsRender:()=>this._requestRender(),schedule:d=>this._stage.resourceController.schedule(d)}),this._handles.add((0,wr.YP)(()=>(0,at.yw)(this._edgeView,d=>d.updating),()=>this._requestRender(),wr.Z_)),this._requestRender()),this._edgeView}get edgeView(){return this._edgeView}get isCameraFinal(){return(0,on.v)(this._bindParameters.ssr.reprojectionMatrix,ao.I)}set _reprojectionMatrix(d){(0,Qp.Vx)(this._bindParameters.ssr.reprojectionMatrix,d)&&this.notifyChange("isCameraFinal")}get shadowsEnabled(){return!!this._shadowMap?.enabled}setRenderParameters(d){const{_shadowMap:v,_ssaoHelper:O,_bindParameters:A}=this;if(void 0!==d.screenSpaceReflectionsEnabled&&A.ssr.enabled!==d.screenSpaceReflectionsEnabled&&(A.ssr.enabled=d.screenSpaceReflectionsEnabled,this._requestRender()),void 0!==d.shadowMap&&v.enabled!==d.shadowMap&&(v.enabled=d.shadowMap,this._requestRender()),void 0!==d.shadowMapMaxCascades&&v.maxCascades!==d.shadowMapMaxCascades&&(v.maxCascades=d.shadowMapMaxCascades,this._requestRender()),(0,at.pC)(d.environment)){(0,at.pC)(d.environment.weather)&&(this._bindParameters.weather=d.environment.weather,this._bindParameters.weatherVisible=d.weatherVisible,this._renderContext.bindParameters.weather=d.environment.weather,this._renderContext.bindParameters.weatherVisible=d.weatherVisible),void 0!==d.environment.lighting.ambientOcclusionEnabled&&O.enabled!==d.environment.lighting.ambientOcclusionEnabled&&(O.enabled=d.environment.lighting.ambientOcclusionEnabled,this._requestRender()),void 0!==d.environment.lighting.waterReflectionEnabled&&this._waterReflectionEnabled!==d.environment.lighting.waterReflectionEnabled&&(this._waterReflectionEnabled=d.environment.lighting.waterReflectionEnabled,this._requestRender());const te="sun"===d.environment.lighting.type;A.enableFillLights!==te&&(A.enableFillLights=te,this._requestRender())}d.background&&this._offscreenRendering.background!==d.background&&(this._offscreenRendering.background=d.background,this._requestRender());const j=d.antialiasingEnabled?Gi.C_.SMAA:Gi.C_.NONE;void 0!==d.antialiasingEnabled&&this._antialiasing!==j&&(this._antialiasing=j,this._requestRender()),void 0!==d.highQualityTransparency&&this._multipassTerrain!==d.highQualityTransparency&&(this._multipassTerrain=d.highQualityTransparency,this._oitEnabled=d.highQualityTransparency&&this._hasOITSupport,this._requestRender()),void 0!==d.defaultHighlightOptions&&(this._highlight.setDefaultOptions(d.defaultHighlightOptions),this._shadowHighlight.setDefaultOptions(d.defaultHighlightOptions),this._requestRender()),void 0!==d.overlays&&this._bindParameters.overlays!==d.overlays&&(this._bindParameters.overlays=d.overlays,this._requestRender()),void 0!==d.slicePlane&&this._sliceHelper.plane!==d.slicePlane&&(this._sliceHelper.plane=(0,at.Wg)(d.slicePlane),this._requestRender()),void 0!==d.transparentTerrain&&this._transparentTerrain!==d.transparentTerrain&&(this._transparentTerrain=d.transparentTerrain,this._requestRender()),void 0!==d.hasOverlayWater&&this._hasOverlayWater!==d.hasOverlayWater&&(this._hasOverlayWater=d.hasOverlayWater,this._requestRender()),void 0!==d.shadowCastOptions&&this._shadowAccumulator.setOptions(d.shadowCastOptions)}get hasSlicePlane(){return!!this._sliceHelper.plane}get renderPlugins(){return this._renderPlugins}get _hasOITSupport(){return this._rctx.driverTest.floatBufferBlendWorking}modify(d){this._isRendering&&console.warn("Renderer.modify called while rendering");const{adds:v,removes:O,updates:A}=d;if(0===v.length&&0===O.length&&0===A.length)return;O.forAll(({id:pe})=>this._content.delete(pe)),v.forAll(pe=>this._content.set(pe.id,pe));const j=(0,Kj.q)(d);let te=!1;j.forEach((pe,be)=>{let Re=this._materialRenderers.get(be);if(!Re){if(!(pe.adds.length>0))return;Re=new wF.A(this._rctx,this._materialRepository,be),this._materialRenderers.set(be,Re)}Re.modify(pe),Re.isEmpty&&(te=!0)}),te&&this._materialRenderers.forEach((pe,be)=>{pe.isEmpty&&(this._materialRenderers.delete(be),pe.dispose())}),this._hasHighlights=(0,cu.oE)(this._materialRenderers,pe=>pe.hasHighlights),this._bindParameters.hasOccludees=(0,cu.oE)(this._materialRenderers,pe=>pe.hasOccludees),this._hasWater=(0,cu.oE)(this._materialRenderers,pe=>pe.hasWater),this._needsTransparentPass=(0,cu.oE)(this._materialRenderers,pe=>pe.requiresSlot(mn.r.TRANSPARENT_MATERIAL,Mn.C.MATERIAL)),this._hasHUDElements=(0,cu.oE)(this._materialRenderers,pe=>pe.requiresSlot(mn.r.LINE_CALLOUTS_HUD_DEPTH,Mn.C.MATERIAL)||pe.requiresSlot(mn.r.HUD_MATERIAL,Mn.C.MATERIAL)||pe.requiresSlot(mn.r.LABEL_MATERIAL,Mn.C.MATERIAL)),this._requestRender()}updateAnimation(d){return this._hasAnimations=!1,this._materialRenderers.forEach(v=>this._hasAnimations=v.updateAnimation(d)||this._hasAnimations),this._hasAnimations=this._renderPlugins.updateAnimation(d)||this._hasAnimations,this._hasAnimations}get animationTimestep(){return this._animationTimestep}updateLightSources(d,v,O){this._bindParameters.lighting.groundLightingFactor=v,this._bindParameters.lighting.globalFactor=O,this._bindParameters.lighting.set(d)}render(d,v,O,A){this._isRendering=!0,this.performanceInfo.prerender(this._rctx),this._bindParameters.transparencyPassType=Gi.Am.NONE;const j=this._offscreenRendering;j.needLastFrameColorTexture=this.hasWaterReflection,j.advanceCurrentRenderTarget();const te=(0,jd.c)(this._sliceHelper.plane);A===Gi.Iq.OFF&&(this._sliceHelper.plane=null),this._rctx.bindFramebuffer(d),v.setGLViewport(this._rctx),this._ensureCameraBindParameters(v,O),this._renderPlugins.prepareRender(),this.performanceInfo.advance(Ia.Prepare);const pe=this._computeDepthRange(v);this._renderShadowMap(d,v,this._bindParameters.lighting.lightingMainDirection,pe),this.performanceInfo.advance(Ia.Shadowmap),j.initializeFrame(v),this._ensureBindParameters(v,O),this._renderLinearDepth(),this.performanceInfo.advance(Ia.Lineardepth),this._accumulateShadows(pe,v,O),this._renderNormal(),this.performanceInfo.advance(Ia.Normals),this._ensureBindParametersSSR(),this._ssaoHelper.computeSSAO(this._bindParameters,j.linearDepthTexture,j.normalTexture),this.performanceInfo.advance(Ia.SSAO),this._renderContext.pass=Mn.C.MATERIAL,j.bindFramebuffer(),this._renderOpaqueGeometry(),this.performanceInfo.advance(Ia.Opaque);const be=this._multipassTerrain&&this._transparentTerrain;this._renderTerrainLinearDepth(be),this._setMultipassEnabled(be),this._setTerrainCulling(be),this._renderEdges(Wn.i.OPAQUE),this.performanceInfo.advance(Ia.OpaqueEdges),this._offscreenRendering.bindTarget(this._offscreenRendering.currentColorTarget,this._offscreenRendering.mainDepth),this._renderSlot(mn.r.VOXEL),this._renderHiddenTransparentEdges();const Re=this._needsTransparentPass||this._renderPlugins.needsTransparentPass;Re&&(this._oitEnabled?this._renderOrderIndependentTransparency(()=>this._renderTransparentGeometry(),!1):this._renderTransparentGeometry()),this.performanceInfo.advance(Ia.Transparent),this._renderGeometryLinearDepth(be);const Ge=this._renderHUDVisibility();be||this._renderInternalSlot(mn.r.LINE_CALLOUTS),this.performanceInfo.advance(Ia.Hudvisibility),this._renderEdges(Wn.i.TRANSPARENT,be),this.performanceInfo.advance(Ia.TransparentEdges),this._renderTransparentTerrain(),this._transparentTerrain&&Ge&&(be?this._renderLineCallouts(Ep.v.Occluded):j.compositeTransparentTerrainOntoHUDVisibility(this._bindParameters),this._renderHUD(Ep.v.Occluded,j.framebuffer),this.performanceInfo.advance(Ia.HudOccluded)),this.performanceInfo.advance(Ia.TransparentTerrain),this._setTerrainCulling(!1),this._transparentTerrain&&(j.compositeTransparentTerrainOntoMain(this._bindParameters),be&&(this._renderEdges(Wn.i.OPAQUE),this.performanceInfo.advance(Ia.OpaqueEdges),Re&&(this._oitEnabled?this._renderOrderIndependentTransparency(()=>this._renderTransparentGeometry(),!1):this._renderTransparentGeometry()),this.performanceInfo.advance(Ia.Transparent),this._renderEdges(Wn.i.TRANSPARENT),this.performanceInfo.advance(Ia.TransparentEdges))),be&&this._renderLineCallouts(Ep.v.NotOccluded),this._setMultipassEnabled(!1),this._shadowAccumulator.render(this._bindParameters),j.renderToTargets(()=>{this._renderInternalSlot(mn.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),this._renderSlot(mn.r.POSTPROCESSING_ENVIRONMENT_TRANSPARENT),this._renderSlot(mn.r.LASERLINES)},j.currentColorTarget,j.mainDepth),this.performanceInfo.advance(Ia.Atmosphere),this._renderPlugins.needsLaserlineWithContrastControl&&j.renderTmpAndCompositeToMain(()=>this._renderSlot(mn.r.LASERLINES_CONTRAST_CONTROL),this._bindParameters,Vl.Fv.PremultipliedAlpha),this.performanceInfo.advance(Ia.Laserline),this._renderOccluded(),this.performanceInfo.advance(Ia.Occluded);const tt=A===Gi.Iq.ON&&this._magnifierHelper.enabled,ft=tt&&(0,at.Wi)(d)?this._offscreenRendering.getFramebuffer(this._offscreenRendering.tmpColor,this._offscreenRendering.tmpDepth):d;this._rctx.bindFramebuffer(ft);const yt=this._offscreenRendering.colorTexture;!this._renderAntiAliasing(this._antialiasing,yt)&&(0,at.pC)(yt)&&this._compositingHelper.composite(this._bindParameters,yt,Vl.Fv.None),this.performanceInfo.advance(Ia.Antialiasing),this._renderHUD(Ep.v.NotOccluded,ft),this.performanceInfo.advance(Ia.HudNotoccluded),this._renderHighlights(ft,this._bindParameters),this.performanceInfo.advance(Ia.Highlights),tt&&this._magnifierHelper.render(this._rctx,this._bindParameters),ft!==d&&(this._rctx.bindFramebuffer(d),this._compositingHelper.composite(this._bindParameters,this._offscreenRendering.tmpColorTexture,Vl.Fv.None)),this._disposeOITBuffers(),this._renderContext.lastFrameCamera.copyFrom(this._bindParameters.camera),this._sliceHelper.plane=te,this._isRendering=!1,this.onPostRender&&this.onPostRender(),this.performanceInfo.postrender()}finish(d){this._hasAnimations||(this._animationTimestep=(0,ro.HA)(0)),d===Gi.Xx.BACKGROUND&&(this._rctx.gl.getError(),this._animationTimestep=(0,ro.HA)(Math.max(.9*this._animationTimestep+this.performanceInfo.elapsedTime/.5*(1-.9),Lj)))}readDepthPixels(d,v,O){const A=this._offscreenRendering.bindTarget(this._offscreenRendering.linearDepth,this._offscreenRendering.tmpDepth);this._needsLinearDepth||(this._ensureBindParameters(d,d),this._bindParameters.camera.setGLViewport(this._rctx),this._rctx.setClearColor(0,0,0,0),this._rctx.clearSafe(Gt.lk.COLOR_BUFFER_BIT|Gt.lk.DEPTH_BUFFER_BIT|Gt.lk.STENCIL_BUFFER_BIT),this._renderGeometryAndTransparentTerrainPass(Mn.C.MATERIAL_DEPTH)),A.readPixels(v[0],v[1],v[2],v[3],Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,O)}readHUDVisibility(d,v,O,A,j){this._offscreenRendering.bindTarget(this._offscreenRendering.hudVisibility).readPixels(d,v,O,A,Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,j)}readAccumulatedShadow(d,v){return this._shadowAccumulator.readAccumulatedShadow(d,v)}_setMultipassEnabled(d){this._bindParameters.multipassTerrain.enabled=this._bindParameters.multipassGeometry.enabled=d}_setTerrainCulling(d){this._bindParameters.multipassTerrain.cullAboveGround=d}_renderSlot(d){this._bindParameters.slot=d,this._renderPlugins.render()}_renderEdges(d,v=!1){const O=this._edgeView;(0,at.pC)(O)&&O.shouldRender()&&this._offscreenRendering.renderTmpAndCompositeToMain(()=>O.render(this._bindParameters,d),this._bindParameters,Vl.Fv.Alpha,v)}_renderShadowMap(d,v,O,A){const j=this._shadowMap;j.enabled&&(j.start(v,O,A),this._shadowHighlight.updateParameters(v,O),this.needsShadowHighlight?(this._renderShadowCascades(Mn.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT,this._shadowMap,te=>j.takeCascadeSnapshotTo(te,uE.i.Highlight)),j.clear(),this._renderShadowCascades(Mn.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT,this._shadowMap,te=>{j.takeCascadeSnapshotTo(te,uE.i.Default),this._renderGeometryAndTransparentTerrainPass(Mn.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT)})):this._renderShadowCascades(Mn.C.MATERIAL_DEPTH_SHADOWMAP_ALL),j.finish(d),v.setGLViewport(this._rctx))}_renderShadowCascades(d,v=this._shadowMap,O=(A=>{})){for(const A of v.getCascades())A.camera.setGLViewport(this._rctx),this._ensureCameraBindParameters(A.camera,A.camera),this._renderGeometryAndTransparentTerrainPass(d),O(A)}get _needsLinearDepth(){return this._ssaoHelper.enabled||this._renderPlugins.needsLinearDepth||this._hasWater&&this._waterReflectionEnabled||this.needsShadowHighlight||this.needsShadowCast}_renderLinearDepth(){this._needsLinearDepth?this._offscreenRendering.renderToTargets(()=>this._renderGeometryAndTransparentTerrainPass(Mn.C.MATERIAL_DEPTH),this._offscreenRendering.linearDepth,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.linearDepth),this._bindParameters.linearDepthTexture=this._offscreenRendering.linearDepthTexture}_renderTerrainLinearDepth(d){if(d){const v=this._renderContext.pass;this._renderContext.pass=Mn.C.MATERIAL_DEPTH,this._offscreenRendering.renderToTargets(()=>this._renderTransparentTerrain(),this._offscreenRendering.terrainLinearDepth,this._offscreenRendering.tmpDepth,[-1e10,-1e10,-1e10,1],!0,!0),this._renderContext.pass=v}else this._offscreenRendering.disposeTarget(this._offscreenRendering.terrainLinearDepth);this._bindParameters.multipassTerrain.linearDepthTexture=this._offscreenRendering.terrainLinearDepthTexture}_renderGeometryLinearDepth(d){if(d){const v=this._renderContext.pass;this._offscreenRendering.renderToTargets(()=>this._renderGeometryPass(Mn.C.MATERIAL_DEPTH),this._offscreenRendering.geometryLinearDepth,this._offscreenRendering.tmpDepth,[1,1,1,1],!0,!0),this._renderContext.pass=v}else this._offscreenRendering.disposeTarget(this._offscreenRendering.geometryLinearDepth);this._bindParameters.multipassGeometry.linearDepthTexture=this._offscreenRendering.geometryLinearDepthTexture}get needsNormal(){return this._ssaoHelper.enabled}_renderNormal(){this.needsNormal?this._offscreenRendering.renderToTargets(()=>{this._renderGeometryAndTransparentTerrainPass(Mn.C.MATERIAL_NORMAL)},this._offscreenRendering.normal,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.normal)}get needsDepthRange(){return this._shadowMap.enabled||this.needsShadowCast}_computeDepthRange(d){if(!this.needsDepthRange)return sC;const v=function fj(d,v,O){if(v.size<1e4)return Tj.compute(d,v);const A=ty();return O.forAll(j=>{j.isVisible&&tm(A,function mj(d,v){if(!v.isVisible)return;const O=ty(),A=v.getSpatialQueryAccelerator();return(0,at.pC)(A)?function gj(d,v,O){const A=v.eye,j=v.viewForward,te=v.frustum,pe=Re=>Re.isVisible,be=O.objectCount;if(be<500)ry(Md,v.near,Math.min(d.near,v.far)),O.forEachInDepthRange(A,j,I0.Z.DepthOrder.FRONT_TO_BACK,Md,(Re,Ge)=>{dC(d,v,Re),Md.far=d.near,Ge.setRange(Md)},te,pe),ry(Md,Math.max(d.far,v.near),v.far),O.forEachInDepthRange(A,j,I0.Z.DepthOrder.BACK_TO_FRONT,Md,(Re,Ge)=>{dC(d,v,Re),Md.near=d.far,Ge.setRange(Md)},te,pe);else{const Re=Math.max(Math.min(be,500),Math.ceil(.1*be)),Ge=O.findClosest(j,I0.Z.DepthOrder.FRONT_TO_BACK,te,pe,Re),tt=O.findClosest(j,I0.Z.DepthOrder.BACK_TO_FRONT,te,pe,Re);Ge&&tt&&(SS(d,v,Ge.boundingVolumeWorldSpace.bounds),SS(d,v,tt.boundingVolumeWorldSpace.bounds))}}(O,d,A):function yj(d,v,O){sm.clear(),O.forAll(A=>{A.isVisible&&0!==A.geometryRecords.length&&sm.add(A)}),sm.empty||(sm.sort(v),ry(Md,v.near,Math.min(d.near,v.far)),sm.forEachInDepthRange(Md,I0.Z.DepthOrder.FRONT_TO_BACK,(A,j)=>{j<d.near&&dC(d,v,A)}),ry(Md,Math.max(d.far,v.near),v.far),sm.forEachInDepthRange(Md,I0.Z.DepthOrder.BACK_TO_FRONT,(A,j,te)=>{d.far=Math.max(d.far,te)}))}(O,d,v.objects),O}(d,j))}),A}(d,this._content,this._stage.layers);return tm(v,this.renderPlugins.queryDepthRange(d)),v.near=Math.max(d.near,v.near),v.far=Math.min(d.far,v.far),v}_renderGeometryAndTransparentTerrainPass(d){this._renderContext.pass=d,this._renderGeometryPass(d),this._renderTransparentTerrain()}_renderGeometryPass(d){this._renderContext.pass=d,this._renderOpaqueGeometry(),this._renderTransparentGeometry()}_renderOpaqueGeometry(){this._renderSlot(mn.r.INTEGRATED_MESH),this._renderSlot(mn.r.OPAQUE_TERRAIN),this._renderInternalSlot(mn.r.OPAQUE_MATERIAL),this._renderSlot(mn.r.OPAQUE_MATERIAL),this._renderSlot(mn.r.POSTPROCESSING_ENVIRONMENT_OPAQUE)}_renderTransparentGeometry(){this._renderInternalSlot(mn.r.TRANSPARENT_MATERIAL),this._renderSlot(mn.r.TRANSPARENT_MATERIAL)}_renderTransparentTerrain(){this._renderSlot(mn.r.TRANSPARENT_TERRAIN)}_renderHUDVisibility(){let d=!1;return this._renderContext.offscreenRenderingHelper&&this._renderContext.offscreenRenderingHelper.renderHUDVisibility(()=>{this._bindParameters.hudVisibilityTexture=this._renderContext.offscreenRenderingHelper.hudVisibilityTexture,d=this._renderInternalSlot(mn.r.OCCLUSION_PIXELS)},this._multipassTerrain&&this._transparentTerrain),d}_renderLineCallouts(d){this._bindParameters.renderTransparentlyOccludedHUD=d,d===Ep.v.Occluded?this._offscreenRendering.renderToTargets(()=>this._renderInternalSlot(mn.r.LINE_CALLOUTS),this._offscreenRendering.currentColorTarget,this._offscreenRendering.tmpDepth,void 0,!0,!0):this._renderInternalSlot(mn.r.LINE_CALLOUTS)}_renderHUD(d,v){this._hasHUDElements&&(this._oitEnabled?(this._renderOrderIndependentTransparency(()=>this._renderHUDElements(d),!0),this._rctx.bindFramebuffer(v),this._compositingHelper.composite(this._bindParameters,this._offscreenRendering.hudColorTexture,Vl.Fv.PremultipliedAlpha)):d===Ep.v.Occluded?this._offscreenRendering.renderToTargets(()=>this._renderHUDElements(Ep.v.Occluded),this._offscreenRendering.currentColorTarget,this._offscreenRendering.tmpDepth,void 0,!0,!0):this._renderHUDElements(d))}_renderHUDElements(d){this._bindParameters.renderTransparentlyOccludedHUD=d,this._renderInternalSlot(mn.r.LINE_CALLOUTS_HUD_DEPTH),this._renderInternalSlot(mn.r.HUD_MATERIAL),this._renderInternalSlot(mn.r.LABEL_MATERIAL)}get needsHighlight(){return this._hasHighlights||this._renderPlugins.needsHighlight}get needsShadowHighlight(){return this._shadowMap.enabled&&this._shadowHighlight.isVisible&&this.needsHighlight}_renderHighlights(d,v){if(!this.needsHighlight)return void this._offscreenRendering.disposeTarget(this._offscreenRendering.highlight);const O=this._highlight,A=this._offscreenRendering.renderToTargets(()=>{this._renderGeometryAndTransparentTerrainPass(Mn.C.MATERIAL_HIGHLIGHT),this._rctx.clearSafe(Gt.lk.DEPTH_BUFFER_BIT),this._renderHUDElements(Ep.v.Both)},this._offscreenRendering.highlight,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0);this._bindParameters.highlightColorTexture=A.colorTexture,this.needsShadowHighlight&&this._shadowHighlight.render(v,d),O.render(this._bindParameters,A,d)}get needsShadowCast(){return this._shadowAccumulator.isAccumulating}_accumulateShadows(d,v,O){this.needsShadowCast&&this._shadowAccumulator.renderAccumulation(this._offscreenRendering.linearDepthTexture,d,v,O)}_renderOrderIndependentTransparency(d,v){const O=j=>{this._bindParameters.transparencyPassType=j,this._offscreenRendering.renderOITPass(()=>d(),j,v)},A=this._renderContext.pass;this._renderContext.pass=Mn.C.MATERIAL_ALPHA,O(Gi.Am.Alpha),this._renderContext.pass=Mn.C.MATERIAL,O(Gi.Am.Color),O(Gi.Am.FrontFace),this._offscreenRendering.compositeTransparentOntoOpaque(this._bindParameters,v),this._bindParameters.transparencyPassType=Gi.Am.NONE,this._renderContext.pass=A,this._oitUsed=!0}_disposeOITBuffers(){this._oitUsed||(this._offscreenRendering.disposeTarget(this._offscreenRendering.alphaFloatTarget),this._offscreenRendering.disposeTarget(this._offscreenRendering.colorFloatTarget),this._offscreenRendering.disposeTarget(this._offscreenRendering.frontFaceTarget)),this._oitUsed=!1}_renderOccluded(){let d=0;this._materialRenderers.forEach((te,pe)=>{pe&&pe.isVisible()&&pe.renderOccluded===vu.yD.OccludeAndTransparentStencil&&(d|=pe.renderOccluded,py.push(pe))});const v=this._offscreenRendering,O=(te,pe,be,Re,Ge)=>{0!=(d&pe)&&(v.renderToTargets(be,v.tmpColor,v.mainDepth,[0,0,0,0],Re,Ge),v.compositeOccludedOntoMain(this._bindParameters,te))};0!==py.length&&(this._renderInternalSlot(mn.r.OCCLUDER_MATERIAL,py),O(.5,vu.yD.OccludeAndTransparentStencil,()=>this._renderInternalSlot(mn.r.TRANSPARENT_OCCLUDER_MATERIAL,py),!1,!1),py.length=0),this._materialRenderers.forEach((te,pe)=>{pe&&pe.isVisible()&&(pe.renderOccluded===vu.yD.OccludeAndTransparent||pe.renderOccluded===vu.yD.Transparent||pe.renderOccluded===vu.yD.Opaque)&&(d|=pe.renderOccluded,_y.push(pe))});const A=this._renderPlugins.renderOccludedFlags;if(d|=A,!d)return;const j=te=>{this._renderContext.renderOccludedMask=te,A>vu.yD.Occlude&&this._renderSlot(mn.r.OCCLUDED_TERRAIN),this._renderInternalSlot(mn.r.OPAQUE_MATERIAL,_y),this._renderInternalSlot(mn.r.TRANSPARENT_MATERIAL,_y),this._renderInternalSlot(mn.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,_y),this._renderContext.resetRenderOccludedMask()};this._renderContext.pass=Mn.C.MATERIAL,O(.5,vu.yD.OccludeAndTransparent,()=>j(vu.yD.OccludeAndTransparent),!0,Gi.hU.OutlineVisualElementMask),O(.5,vu.yD.Transparent,()=>j(vu.yD.Transparent),!0,Gi.hU.OutlineVisualElementMask),O(1,vu.yD.Opaque,()=>j(vu.yD.Opaque),!0,Gi.hU.OutlineVisualElementMask),_y.length=0}_renderAntiAliasing(d,v){if(d===Gi.C_.SMAA){if(this._smaaPass.enable(()=>this._requestRender())&&(0,at.pC)(v))return this._smaaPass.render(v),!0}else this._smaaPass.disable();return!1}_ensureCameraBindParameters(d,v){this._bindParameters.camera=d,this._bindParameters.contentCamera=v}_ensureBindParameters(d,v){this._ensureCameraBindParameters(d,v);const O=this._renderContext.offscreenRenderingHelper;this._bindParameters.hudVisibilityTexture=O.hudVisibilityTexture,this._bindParameters.highlightDepthTexture=O.depthTexture??this._getFallbackDepthTexture()}_ensureBindParametersSSR(){this.hasWaterReflection?(this._renderContext.lastFrameCamera.equals(this._bindParameters.camera)?this._reprojectionMatrix=ao.I:((0,on.a)(QS,this._bindParameters.camera.viewMatrix),(0,on.a)(XS,this._bindParameters.camera.projectionMatrix),(0,on.m)(nm,QS,XS),(0,on.m)(nm,this._renderContext.lastFrameCamera.viewMatrix,nm),(0,on.m)(nm,this._renderContext.lastFrameCamera.projectionMatrix,nm),this._reprojectionMatrix=nm),this._bindParameters.ssr.lastFrameColorTexture=this._offscreenRendering.lastFrameColorTexture):this._bindParameters.ssr.lastFrameColorTexture=null,this._bindParameters.ssr.enabled=this.hasWaterReflection}_renderInternalSlot(d,v){let O=!1;return this._bindParameters.slot=d,(0,at.pC)(v)?v.forEach(A=>{if(!A.shouldRender(this._renderContext))return;const j=this._materialRenderers.get(A);(0,at.pC)(j)&&(O=j.render(this._renderContext.pass,this._bindParameters)||O)}):this._materialRenderers.forEach((A,j)=>{j.shouldRender(this._renderContext)&&A.render(this._renderContext.pass,this._bindParameters)&&(O=!0)}),O}_getFallbackDepthTexture(){return this._fallbackDepthStencilTexture||(this._fallbackDepthStencilTexture=(0,Ul.hf)(this._rctx)),this._fallbackDepthStencilTexture}get gpuMemoryUsage(){return{offscreen:this._offscreenRendering?.gpuMemoryUsage??0,highlights:(this._highlight?.gpuMemoryUsage??0)+(this._shadowHighlight?.gpuMemoryUsage??0),shadows:this._shadowMap?.gpuMemoryUsage??0,ssao:this._ssaoHelper?.gpuMemoryUsage??0}}get test(){const d=this;return{offscreen:this._offscreenRendering,shadowMap:this._shadowMap,ssao:this._ssaoHelper,highlight:this._highlight,lighting:this._bindParameters.lighting,materialRenderers:this._materialRenderers,shadowAccumulator:this._shadowAccumulator,getFramebufferTexture:v=>{switch(v){case Mp.Color:return d._offscreenRendering.colorTexture;case Mp.LinearDepth:return d._offscreenRendering.linearDepthTexture;case Mp.Normals:return d._offscreenRendering.normalTexture;case Mp.ShadowMap:return d._shadowMap.depthTexture;case Mp.HudVisibility:return d._offscreenRendering.hudVisibilityTexture;case Mp.Highlight:return d._offscreenRendering.highlightTexture}}}}};var Mp;(0,Je._)([(0,ht.Cb)()],g_.prototype,"_shadowAccumulator",void 0),(0,Je._)([(0,ht.Cb)()],g_.prototype,"_smaaPass",void 0),(0,Je._)([(0,ht.Cb)()],g_.prototype,"_antialiasing",void 0),(0,Je._)([(0,ht.Cb)()],g_.prototype,"_edgeView",void 0),(0,Je._)([(0,ht.Cb)()],g_.prototype,"updating",null),(0,Je._)([(0,ht.Cb)()],g_.prototype,"isCameraFinal",null),g_=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.Renderer")],g_),function(d){d[d.Color=0]="Color",d[d.LinearDepth=1]="LinearDepth",d[d.Normals=2]="Normals",d[d.ShadowMap=3]="ShadowMap",d[d.HudVisibility=4]="HudVisibility",d[d.Highlight=5]="Highlight"}(Mp||(Mp={}));const _y=[],py=[],XS=(0,ao.c)(),QS=(0,ao.c)(),nm=(0,ao.c)();var bp=T(68598);class qS{constructor(){this.blend=!1,this.blendColor={r:0,g:0,b:0,a:0},this.blendFunction={srcRGB:Gt.zi.ONE,dstRGB:Gt.zi.ZERO,srcAlpha:Gt.zi.ONE,dstAlpha:Gt.zi.ZERO},this.blendEquation={mode:Gt.db.ADD,modeAlpha:Gt.db.ADD},this.colorMask={r:!0,g:!0,b:!0,a:!0},this.faceCulling=!1,this.cullFace=Gt.LR.BACK,this.frontFace=Gt.Wf.CCW,this.scissorTest=!1,this.scissorRect={x:0,y:0,width:0,height:0},this.depthTest=!1,this.depthFunction=Gt.wb.LESS,this.clearDepth=1,this.depthWrite=!0,this.depthRange={zNear:0,zFar:1},this.viewport=null,this.stencilTest=!1,this.polygonOffsetFill=!1,this.polygonOffset=[0,0],this.stencilFunction={face:Gt.LR.FRONT_AND_BACK,func:Gt.wb.ALWAYS,ref:0,mask:1},this.clearStencil=0,this.stencilWriteMask=1,this.stencilOperation={face:Gt.LR.FRONT_AND_BACK,fail:Gt.xS.KEEP,zFail:Gt.xS.KEEP,zPass:Gt.xS.KEEP},this.clearColor={r:0,g:0,b:0,a:0},this.program=null,this.vertexBuffer=null,this.indexBuffer=null,this.uniformBuffer=null,this.pixelPackBuffer=null,this.pixelUnpackBuffer=null,this.copyReadBuffer=null,this.copyWriteBuffer=null,this.uniformBufferBindingPoints=new Array,this.readFramebuffer=null,this.drawFramebuffer=null,this.renderbuffer=null,this.activeTexture=0,this.textureUnitMap=new Array}}class WF{constructor(v){this._allocations=new Map,v?Error.stackTraceLimit=1/0:(this.add=()=>{},this.remove=()=>{})}add(v){this._allocations.set(v,(new Error).stack)}remove(v){this._allocations.delete(v)}print(){if(this._allocations.size>0){console.log(`${this._allocations.size} live object allocations:`);const v=new Map;this._allocations.forEach(O=>{v.set(O,(v.get(O)??0)+1)}),v.forEach((O,A)=>{const j=A.split("\n");j.shift(),j.shift(),console.log(`${O}: ${j.shift()}`),j.forEach(te=>console.log("   ",te))})}}}class zF{constructor(){for(this._current=new Array,this._max=new Array,this._allocations=new WF(false);this._current.length<Gt._g.COUNT;)this._current.push(0),this._max.push(0)}resetMax(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)}increment(v,O){const A=++this._current[v];this._max[v]=Math.max(A,this._max[v]),this._allocations.add(O)}decrement(v,O){--this._current[v],this._allocations.remove(O)}get max(){return this._max}get current(){return this._current}get total(){return this.current.reduce((v,O)=>v+O,0)}printResourceCount(){if(this.total>0){console.log("Live objects:");for(let v=0;v<Gt._g.COUNT;++v){const O=this._current[v];O>0&&console.log(`${Gt._g[v]}: ${O}`)}}this._allocations.print()}}var HF=T(1101),GF=T(21285);class KF{constructor(v){this._rctx=v,this._store=new HF.r}dispose(){this._store.forEach(v=>v.forEach(O=>O.dispose())),this._store.clear()}acquire(v,O,A,j){const te=this._store.get(v,O);if((0,at.pC)(te))return te.ref(),te;const pe=new GF.$(this._rctx,v,O,A,j);return pe.ref(),this._store.set(v,O,pe),pe}get test(){let v=0;return this._store.forEach(O=>O.forEach(A=>v+=A.hasGLName?2:1)),{cachedWebGLObjects:v}}}var eA=T(2757),CC=T(40852);function tA(d,v){const O=new nc.X(d,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,wrapMode:Gt.e8.CLAMP_TO_EDGE,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.NEAREST,width:1,height:1}),j=Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),te=new ju.U(d,new Map([["position",0]]),{geometry:[new CC.G("position",2,Gt.g.UNSIGNED_SHORT,0,4)]},{geometry:j}),pe=(0,br.f)(5633261.287538229,2626832.878767164,1434988.0495278358),be=(0,br.f)(5633271.46742708,2626873.6381334523,1434963.231608387),Re=function A(jt,ir){const Lr=d.programCache.acquire(`\n\n  precision highp float;\n\n  attribute vec2 position;\n\n  uniform vec3 u_highA;\n  uniform vec3 u_lowA;\n  uniform vec3 u_highB;\n  uniform vec3 u_lowB;\n\n  varying vec4 v_color;\n\n  ${v?"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION":""}\n\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\n\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\n  }\n\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\n  }\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = dpPlusFrc(hiA, hiB);\n    vec3 e = dpMinusFrc(t1, hiA);\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\n    return t1 + t2;\n  }\n\n  #else\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = hiA + hiB;\n    vec3 e = t1 - hiA;\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\n    return t1 + t2;\n  }\n\n  #endif\n\n  const float MAX_RGBA_FLOAT =\n    255.0 / 256.0 +\n    255.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n  vec4 float2rgba(const float value) {\n    // Make sure value is in the domain we can represent\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n    // Decompose value in 32bit fixed point parts represented as\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\n    // by a power of 256 (this removes the bits that are represented in the previous\n    // component) and then converts the fractional part to 8bits.\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n    // Convert uint8 values (from 0 to 255) to floating point representation for\n    // the shader\n    const float toU8AsFloat = 1.0 / 255.0;\n\n    return fixedPointU8 * toU8AsFloat;\n  }\n\n  void main() {\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\n\n    v_color = float2rgba(val.z / 25.0);\n\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\n  }\n  `,"\n  precision highp float;\n\n  varying vec4 v_color;\n\n  void main() {\n    gl_FragColor = v_color;\n  }\n  ",new Map([["position",0]])),Br=new Float32Array(6);(0,eA.LF)(jt,Br,3);const gs=new Float32Array(6);return(0,eA.LF)(ir,gs,3),d.useProgram(Lr),Lr.setUniform3f("u_highA",Br[0],Br[2],Br[4]),Lr.setUniform3f("u_lowA",Br[1],Br[3],Br[5]),Lr.setUniform3f("u_highB",gs[0],gs[2],gs[4]),Lr.setUniform3f("u_lowB",gs[1],gs[3],gs[5]),Lr}(pe,be),Ge=d.getBoundFramebufferObject(),{x:tt,y:ft,width:yt,height:It}=d.getViewport();d.bindFramebuffer(O),d.setViewport(0,0,1,1),d.bindVAO(te),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4);const Nt=new Uint8Array(4);O.readPixels(0,0,1,1,Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,Nt),Re.dispose(),te.dispose(!1),j.dispose(),O.dispose(),d.setViewport(tt,ft,yt,It),d.bindFramebuffer(Ge);const Rt=(pe[2]-be[2])/25,Jt=(0,sE.v)(Nt);return Math.abs(Rt-Jt)}var rA,iA,nA={exports:{}};rA=nA,void 0!==(iA=function(){var O={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},A=null,j=null;function te(Rt){if(null==A)for(var Jt in A={},j={},Rt)"number"==typeof Rt[Jt]&&(A[Rt[Jt]]=Jt,j[Jt]=Rt[Jt])}function pe(){if(null==A)throw"WebGLDebugUtils.init(ctx) not called"}function Re(Rt){pe();var Jt=A[Rt];return void 0!==Jt?"gl."+Jt:"/*UNKNOWN WebGL ENUM*/ 0x"+Rt.toString(16)}function Ge(Rt,Jt,jt,ir){var or;if(void 0!==(or=O[Rt])&&void 0!==(or=or[Jt])&&or[jt]){if("object"==typeof or[jt]&&void 0!==or[jt].enumBitwiseOr){for(var pr=or[jt].enumBitwiseOr,Lr=0,Br=[],gs=0;gs<pr.length;++gs){var Cs=j[pr[gs]];0!=(ir&Cs)&&(Lr|=Cs,Br.push(Re(Cs)))}return Lr===ir?Br.join(" | "):Re(ir)}return Re(ir)}return null===ir?"null":void 0===ir?"undefined":ir.toString()}function ft(Rt,Jt,jt){Rt.__defineGetter__(jt,function(){return Jt[jt]}),Rt.__defineSetter__(jt,function(ir){Jt[jt]=ir})}function It(Rt){var Jt=Rt.getParameter(Rt.MAX_VERTEX_ATTRIBS),jt=Rt.createBuffer();Rt.bindBuffer(Rt.ARRAY_BUFFER,jt);for(var ir=0;ir<Jt;++ir)Rt.disableVertexAttribArray(ir),Rt.vertexAttribPointer(ir,4,Rt.FLOAT,!1,0,0),Rt.vertexAttrib1f(ir,0);Rt.deleteBuffer(jt);var or=Rt.getParameter(Rt.MAX_TEXTURE_IMAGE_UNITS);for(ir=0;ir<or;++ir)Rt.activeTexture(Rt.TEXTURE0+ir),Rt.bindTexture(Rt.TEXTURE_CUBE_MAP,null),Rt.bindTexture(Rt.TEXTURE_2D,null);for(Rt.activeTexture(Rt.TEXTURE0),Rt.useProgram(null),Rt.bindBuffer(Rt.ARRAY_BUFFER,null),Rt.bindBuffer(Rt.ELEMENT_ARRAY_BUFFER,null),Rt.bindFramebuffer(Rt.FRAMEBUFFER,null),Rt.bindRenderbuffer(Rt.RENDERBUFFER,null),Rt.disable(Rt.BLEND),Rt.disable(Rt.CULL_FACE),Rt.disable(Rt.DEPTH_TEST),Rt.disable(Rt.DITHER),Rt.disable(Rt.SCISSOR_TEST),Rt.blendColor(0,0,0,0),Rt.blendEquation(Rt.FUNC_ADD),Rt.blendFunc(Rt.ONE,Rt.ZERO),Rt.clearColor(0,0,0,0),Rt.clearDepth(1),Rt.clearStencil(-1),Rt.colorMask(!0,!0,!0,!0),Rt.cullFace(Rt.BACK),Rt.depthFunc(Rt.LESS),Rt.depthMask(!0),Rt.depthRange(0,1),Rt.frontFace(Rt.CCW),Rt.hint(Rt.GENERATE_MIPMAP_HINT,Rt.DONT_CARE),Rt.lineWidth(1),Rt.pixelStorei(Rt.PACK_ALIGNMENT,4),Rt.pixelStorei(Rt.UNPACK_ALIGNMENT,4),Rt.pixelStorei(Rt.UNPACK_FLIP_Y_WEBGL,!1),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),Rt.UNPACK_COLORSPACE_CONVERSION_WEBGL&&Rt.pixelStorei(Rt.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt.BROWSER_DEFAULT_WEBGL),Rt.polygonOffset(0,0),Rt.sampleCoverage(1,!1),Rt.scissor(0,0,Rt.canvas.width,Rt.canvas.height),Rt.stencilFunc(Rt.ALWAYS,0,4294967295),Rt.stencilMask(4294967295),Rt.stencilOp(Rt.KEEP,Rt.KEEP,Rt.KEEP),Rt.viewport(0,0,Rt.canvas.width,Rt.canvas.height),Rt.clear(Rt.COLOR_BUFFER_BIT|Rt.DEPTH_BUFFER_BIT|Rt.STENCIL_BUFFER_BIT);Rt.getError(););}return{init:te,mightBeEnum:function be(Rt){return pe(),void 0!==A[Rt]},glEnumToString:Re,glFunctionArgToString:Ge,glFunctionArgsToString:function tt(Rt,Jt){for(var jt="",ir=Jt.length,or=0;or<ir;++or)jt+=(0==or?"":", ")+Ge(Rt,ir,or,Jt[or]);return jt},makeDebugContext:function yt(Rt,Jt,jt,ir){ir=ir||Rt,te(Rt),Jt=Jt||function(Cs,Us,Ks){for(var li="",si=Ks.length,Ei=0;Ei<si;++Ei)li+=(0==Ei?"":", ")+Ge(Us,si,Ei,Ks[Ei]);!function(Rt){window.console&&window.console.error?window.console.error(Rt):function(Rt){window.console&&window.console.log&&window.console.log(Rt)}(Rt)}("WebGL error "+Re(Cs)+" in "+Us+"("+li+")")};var or={};function pr(Cs,Us){return function(){jt&&jt(Us,arguments);var Ks=Cs[Us].apply(Cs,arguments),li=ir.getError();return 0!=li&&(or[li]=!0,Jt(li,Us,arguments)),Ks}}var Lr={};for(var Br in Rt)if("function"==typeof Rt[Br])if("getExtension"!=Br)Lr[Br]=pr(Rt,Br);else{var gs=pr(Rt,Br);Lr[Br]=function(){return yt(gs.apply(Rt,arguments),Jt,jt,ir)}}else ft(Lr,Rt,Br);return Lr.getError=function(){for(var Cs in or)if(or.hasOwnProperty(Cs)&&or[Cs])return or[Cs]=!1,Cs;return Rt.NO_ERROR},Lr},makeLostContextSimulatingCanvas:function Nt(Rt){var Jt,jt,ir=[],or=[],pr={},Lr=1,Br=!1,gs=[],Cs=0,Us=0,Ks=!1,li=0,si={};function Ei(xs){return"function"==typeof xs?xs:function(Js){xs.handleEvent(Js)}}Rt.getContext=(jt=Rt.getContext,function(){var xs=jt.apply(Rt,arguments);if(xs instanceof WebGLRenderingContext){if(xs!=Jt){if(Jt)throw"got different context";pr=Xs(Jt=xs)}return pr}return xs});var ts=function(xs){ir.push(Ei(xs))},$s=function(xs){or.push(Ei(xs))};function ws(){++Us,Br||Cs==Us&&Rt.loseContext()}function Ss(xs,Js){var xi=xs[Js];return function(){if(ws(),!Br)return xi.apply(xs,arguments)}}function ci(xs){return{statusMessage:xs,preventDefault:function(){Ks=!0}}}return function Ms(xs){var Js=xs.addEventListener;xs.addEventListener=function(xi,Ii,Si){switch(xi){case"webglcontextlost":ts(Ii);break;case"webglcontextrestored":$s(Ii);break;default:Js.apply(xs,arguments)}}}(Rt),Rt.loseContext=function(){if(!Br){for(Br=!0,Cs=0,++Lr;Jt.getError(););(function ms(){for(var xs=Object.keys(si),Js=0;Js<xs.length;++Js)delete si[xs]})(),si[Jt.CONTEXT_LOST_WEBGL]=!0;var xs=ci("context lost"),Js=ir.slice();setTimeout(function(){for(var xi=0;xi<Js.length;++xi)Js[xi](xs);li>=0&&setTimeout(function(){Rt.restoreContext()},li)},0)}},Rt.restoreContext=function(){Br&&or.length&&setTimeout(function(){if(!Ks)throw"can not restore. webglcontestlost listener did not call event.preventDefault";(function Fs(){for(var xs=0;xs<gs.length;++xs){var Js=gs[xs];Js instanceof WebGLBuffer?Jt.deleteBuffer(Js):Js instanceof WebGLFramebuffer?Jt.deleteFramebuffer(Js):Js instanceof WebGLProgram?Jt.deleteProgram(Js):Js instanceof WebGLRenderbuffer?Jt.deleteRenderbuffer(Js):Js instanceof WebGLShader?Jt.deleteShader(Js):Js instanceof WebGLTexture&&Jt.deleteTexture(Js)}})(),It(Jt),Br=!1,Us=0,Ks=!1;for(var xs=or.slice(),Js=ci("context restored"),xi=0;xi<xs.length;++xi)xs[xi](Js)},0)},Rt.loseContextInNCalls=function(xs){if(Br)throw"You can not ask a lost contet to be lost";Cs=Us+xs},Rt.getNumCalls=function(){return Us},Rt.setRestoreTimeout=function(xs){li=xs},Rt;function Xs(xs){for(var Js in xs)"function"==typeof xs[Js]?pr[Js]=Ss(xs,Js):ft(pr,xs,Js);pr.getError=function(){if(ws(),!Br)for(;mi=Jt.getError();)si[mi]=!0;for(var mi in si)if(si[mi])return delete si[mi],mi;return pr.NO_ERROR};for(var xi=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],Ii=0;Ii<xi.length;++Ii){var Si=xi[Ii];pr[Si]=function(mi){return function(){if(ws(),Br)return null;var Ni=mi.apply(xs,arguments);return Ni.__webglDebugContextLostId__=Lr,gs.push(Ni),Ni}}(xs[Si])}var Bi=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(Ii=0;Ii<Bi.length;++Ii)pr[Si=Bi[Ii]]=function(mi){return function(){return ws(),Br?null:mi.apply(xs,arguments)}}(pr[Si]);var mi,Bs=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(Ii=0;Ii<Bs.length;++Ii)pr[Si=Bs[Ii]]=function(mi){return function(){return ws(),!Br&&mi.apply(xs,arguments)}}(pr[Si]);return pr.checkFramebufferStatus=(mi=pr.checkFramebufferStatus,function(){return ws(),Br?pr.FRAMEBUFFER_UNSUPPORTED:mi.apply(xs,arguments)}),pr.getAttribLocation=function(mi){return function(){return ws(),Br?-1:mi.apply(xs,arguments)}}(pr.getAttribLocation),pr.getVertexAttribOffset=function(mi){return function(){return ws(),Br?0:mi.apply(xs,arguments)}}(pr.getVertexAttribOffset),pr.isContextLost=function(){return Br},pr}},resetToInitialState:It}}())&&(rA.exports=iA);const ZF=vo.Z.getLogger("esri.views.WebGLDriverTest");var $F=T(93292);function OC(){return OC=(0,oi.Z)(function*(d){const v=new Image;if(v.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",v.width=5,v.height=5,yield v.decode(),!d.gl)return!0;const O=new nc.X(d,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,wrapMode:Gt.e8.CLAMP_TO_EDGE,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.NEAREST,width:1,height:1}),A=Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),j=new ju.U(d,new Map([["a_pos",0]]),$F.cD,{geometry:A}),be=d.programCache.acquire("\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]]));d.useProgram(be);const Re=new Va.x(d,{dataType:Gt.Br.UNSIGNED_BYTE,pixelFormat:Gt.VI.RGBA,preMultiplyAlpha:!1,wrapMode:Gt.e8.CLAMP_TO_EDGE,samplingMode:Gt.cw.LINEAR},v);d.bindTexture(Re,0),be.setUniform1i("u_texture",0);const Ge=d.getBoundFramebufferObject(),{x:tt,y:ft,width:yt,height:It}=d.getViewport();d.bindFramebuffer(O),d.setViewport(0,0,1,1),d.setClearColor(0,0,0,0),d.setBlendingEnabled(!1),d.clearSafe(Gt.lk.COLOR_BUFFER_BIT),d.bindVAO(j),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4);const Nt=new Uint8Array(4);return O.readPixels(0,0,1,1,Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,Nt),be.dispose(),j.dispose(!1),A.dispose(),O.dispose(),Re.dispose(),d.setViewport(tt,ft,yt,It),d.bindFramebuffer(Ge),v.src="",255===Nt[0]}),OC.apply(this,arguments)}class XF{constructor(v){this.context=v,this._floatBufferBlendWorking=function YF(d){if(!d.gl)return!1;if(d.type===U0.zO.WEBGL1)return!(!d.capabilities.textureFloat?.textureFloat||!d.capabilities.colorBufferFloat?.textureFloat);if(!(d.capabilities.textureFloat?.textureFloat&&d.capabilities.colorBufferFloat?.textureFloat&&d.capabilities.colorBufferFloat?.floatBlend))return!1;const v=new nc.X(d,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,wrapMode:Gt.e8.CLAMP_TO_EDGE,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.FLOAT,internalFormat:Gt.lP.RGBA32F,samplingMode:Gt.cw.NEAREST,width:1,height:1}),O=Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),A=new ju.U(d,new Map([["a_pos",0]]),{geometry:[new CC.G("a_pos",2,Gt.g.UNSIGNED_SHORT,0,4)]},{geometry:O}),pe=d.programCache.acquire("\n  precision highp float;\n  attribute vec2 a_pos;\n\n  void main() {\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n   precision highp float;\n\n   void main() {\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\n   }\n  ",new Map([["a_pos",0]]));d.useProgram(pe);const be=d.getBoundFramebufferObject(),{x:Re,y:Ge,width:tt,height:ft}=d.getViewport();d.bindFramebuffer(v),d.setViewport(0,0,1,1),d.bindVAO(A),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4);const yt=(0,Ti.sm)({blending:rm.IB});d.setPipelineState(yt),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4),nA.exports.init(d);const It=d.gl.getError();return d.setViewport(Re,Ge,tt,ft),d.bindFramebuffer(be),pe.dispose(),A.dispose(!1),O.dispose(),v.dispose(),1282!==It||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}(v),function JF(d){return OC.apply(this,arguments)}(v).then(O=>this._svgAlwaysPremultipliesAlpha=!O)}get floatBufferBlendWorking(){if((0,at.Wi)(this._floatBufferBlendWorking))throw new Error("floatBufferBlendWorking test not yet available");return this._floatBufferBlendWorking}get svgAlwaysPremultipliesAlpha(){if((0,at.Wi)(this._svgAlwaysPremultipliesAlpha))throw new Error("svgAlwaysPremultipliesAlpha test not yet available");return this._svgAlwaysPremultipliesAlpha}get doublePrecisionRequiresObfuscation(){if((0,at.Wi)(this._doublePrecisionRequiresObfuscation)){const v=tA(this.context,!1),O=tA(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==v&&(0===O||v/O>5)}return this._doublePrecisionRequiresObfuscation}get ignoresSamplerPrecision(){return(0,at.Wi)(this._ignoresSamplerPrecision)&&(this._ignoresSamplerPrecision=function kF(d){const v=new nc.X(d,{colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.NONE},{target:Gt.No.TEXTURE_2D,wrapMode:Gt.e8.CLAMP_TO_EDGE,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.NEAREST,width:1,height:1}),j=new Uint8Array(4),te=Bl.f.createVertex(d,Gt.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),pe=new ju.U(d,new Map([["a_position",0]]),{geometry:[new CC.G("a_position",2,Gt.g.SHORT,0,4)]},{geometry:te}),be=d.programCache.acquire("\nprecision highp float;\nattribute vec2 a_pos;\nuniform highp sampler2D u_texture;\nvarying vec4 v_color;\n\nfloat getBit(in float bitset, in int bitIndex) {\n  float offset = pow(2.0, float(bitIndex));\n  return mod(floor(bitset / offset), 2.0);\n}\n\nvoid main() {\n  vec4 value = texture2D(u_texture, vec2(0.0));\n  float bit = getBit(value.x * 255.0, 1);\n\n  v_color = bit * vec4(1.0);\n  gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}\n","\nprecision highp float;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = v_color;\n}\n",new Map([["a_pos",0]]));d.useProgram(be);const Re=new Va.x(d,{target:Gt.No.TEXTURE_2D,wrapMode:Gt.e8.CLAMP_TO_EDGE,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,samplingMode:Gt.cw.NEAREST,width:1,height:1},new Uint8Array([2,255,0,0]));be.setUniform1i("u_texture",0),d.bindTexture(Re,0);const Ge=d.getBoundFramebufferObject();d.bindFramebuffer(v),d.useProgram(be);const{x:tt,y:ft,width:yt,height:It}=d.getViewport();d.setViewport(0,0,1,1),d.bindVAO(pe),d.drawArrays(Gt.MX.TRIANGLE_STRIP,0,4),d.setViewport(tt,ft,yt,It),v.readPixels(0,0,1,1,Gt.VI.RGBA,Gt.Br.UNSIGNED_BYTE,j),be.dispose(),pe.dispose(!1),te.dispose(),v.dispose();const Nt=255!==j[0]||255!==j[1]||255!==j[2]||255!==j[3];return Nt&&ZF.warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${j[0]}.${j[1]}.${j[2]}.${j[3]}]`),d.bindFramebuffer(Ge),Nt}(this.context)),this._ignoresSamplerPrecision}}var Yc=T(38210);class oA{constructor(v,O,A,j,te,pe,be,Re){this.createQuery=v,this.resultAvailable=O,this.getResult=A,this.disjoint=j,this.beginTimeElapsed=te,this.endTimeElapsed=pe,this.createTimestamp=be,this.timestampBits=Re}}function fy(d,v,O,A,j){if(A&&(0,Yc.Z)(d))return!0;if(v[O])return!1;for(const te of j)if(d.getExtension(te))return!0;return!1}class uN{constructor(v,O){this.gl=v,this._depthTexture=null,this._standardDerivatives=null,this._shaderTextureLOD=null,this._fragDepth=null,this._textureFloatLinear=null,this._disabledExtensions=O.disabledExtensions||{},this._debugWebGLExtensions=O.debugWebGLExtensions||{}}get drawBuffers(){return this._drawBuffers||(this._drawBuffers=function qF(d,v){if(v.disjointTimerQuery)return null;if((0,Yc.Z)(d))return{drawBuffers:d.drawBuffers.bind(d),MAX_DRAW_BUFFERS:d.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:d.MAX_COLOR_ATTACHMENTS};if(v.drawBuffers)return null;const O=d.getExtension("WEBGL_draw_buffers");return O?{drawBuffers:O.drawBuffersWEBGL.bind(O),MAX_DRAW_BUFFERS:O.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:O.MAX_COLOR_ATTACHMENTS_WEBGL}:null}(this.gl,this._disabledExtensions)),this._drawBuffers}get instancing(){return this._instancing||(this._instancing=function eN(d){if((0,Yc.Z)(d))return{drawArraysInstanced:d.drawArraysInstanced.bind(d),drawElementsInstanced:d.drawElementsInstanced.bind(d),vertexAttribDivisor:d.vertexAttribDivisor.bind(d)};const v=d.getExtension("ANGLE_instanced_arrays");return v?{drawArraysInstanced:v.drawArraysInstancedANGLE.bind(v),drawElementsInstanced:v.drawElementsInstancedANGLE.bind(v),vertexAttribDivisor:v.vertexAttribDivisorANGLE.bind(v)}:null}(this.gl)),this._instancing}get vao(){return this._vertexArrayObject||(this._vertexArrayObject=function cN(d,v){if((0,Yc.Z)(d))return{createVertexArray:d.createVertexArray.bind(d),deleteVertexArray:d.deleteVertexArray.bind(d),bindVertexArray:d.bindVertexArray.bind(d)};if(v.vao)return null;const O=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object");return O?{createVertexArray:O.createVertexArrayOES.bind(O),deleteVertexArray:O.deleteVertexArrayOES.bind(O),bindVertexArray:O.bindVertexArrayOES.bind(O)}:null}(this.gl,this._disabledExtensions)),this._vertexArrayObject}get compressedTextureETC(){return this._compressedTextureETC||(this._compressedTextureETC=function tN(d,v){if(v.compressedTextureETC)return null;const O=d.getExtension("WEBGL_compressed_texture_etc");return O?{COMPRESSED_R11_EAC:O.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:O.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:O.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:O.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:O.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:O.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:O.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:O.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:O.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:O.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}(this.gl,this._disabledExtensions)),this._compressedTextureETC}get compressedTextureS3TC(){return this._compressedTextureS3TC||(this._compressedTextureS3TC=function rN(d,v){if(v.compressedTextureS3TC)return null;const O=d.getExtension("WEBGL_compressed_texture_s3tc");return O?{COMPRESSED_RGB_S3TC_DXT1:O.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:O.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:O.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:O.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(this.gl,this._disabledExtensions)),this._compressedTextureS3TC}get textureFilterAnisotropic(){return this._textureFilterAnisotropic||(this._textureFilterAnisotropic=function iN(d,v){if(v.textureFilterAnisotropic)return null;const O=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return O?{MAX_TEXTURE_MAX_ANISOTROPY:O.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:O.TEXTURE_MAX_ANISOTROPY_EXT}:null}(this.gl,this._disabledExtensions)),this._textureFilterAnisotropic}get disjointTimerQuery(){return this._disjointTimerQuery||(this._disjointTimerQuery=function QF(d,v){if(v.disjointTimerQuery)return null;let O=d.getExtension("EXT_disjoint_timer_query_webgl2");return O&&(0,Yc.Z)(d)?new oA(()=>d.createQuery(),A=>d.getQueryParameter(A,d.QUERY_RESULT_AVAILABLE),A=>d.getQueryParameter(A,d.QUERY_RESULT),()=>d.getParameter(O.GPU_DISJOINT_EXT),A=>d.beginQuery(O.TIME_ELAPSED_EXT,A),()=>d.endQuery(O.TIME_ELAPSED_EXT),A=>O.queryCounterEXT(A,O.TIMESTAMP_EXT),()=>d.getQuery(O.TIMESTAMP_EXT,O.QUERY_COUNTER_BITS_EXT)):(O=d.getExtension("EXT_disjoint_timer_query"),O?new oA(()=>O.createQueryEXT(),A=>O.getQueryObjectEXT(A,O.QUERY_RESULT_AVAILABLE_EXT),A=>O.getQueryObjectEXT(A,O.QUERY_RESULT_EXT),()=>d.getParameter(O.GPU_DISJOINT_EXT),A=>O.beginQueryEXT(O.TIME_ELAPSED_EXT,A),()=>O.endQueryEXT(O.TIME_ELAPSED_EXT),A=>O.queryCounterEXT(A,O.TIMESTAMP_EXT),()=>O.getQueryEXT(O.TIMESTAMP_EXT,O.QUERY_COUNTER_BITS_EXT)):null)}(this.gl,this._disabledExtensions)),this._disjointTimerQuery}get textureFloat(){return this._textureFloat||(this._textureFloat=function nN(d,v){if((0,Yc.Z)(d))return{textureFloat:!0,textureFloatLinear:!v.textureFloatLinear&&!!d.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!0,HALF_FLOAT:d.HALF_FLOAT,R16F:d.R16F,RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F,RGB16F:d.RGB16F};if(d instanceof WebGLRenderingContext){const O=!v.textureHalfFloat&&d.getExtension("OES_texture_half_float");return{textureFloat:!v.textureFloat&&!!d.getExtension("OES_texture_float"),textureFloatLinear:!v.textureFloatLinear&&!!d.getExtension("OES_texture_float_linear"),textureHalfFloat:!!O,textureHalfFloatLinear:!v.textureHalfFloatLinear&&!!d.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:O?O.HALF_FLOAT_OES:void 0}}return null}(this.gl,this._disabledExtensions)),this._textureFloat}get colorBufferFloat(){return this._colorBufferFloat||(this._colorBufferFloat=function oN(d,v){if((0,Yc.Z)(d)){const O=!v.colorBufferHalfFloat&&d.getExtension("EXT_color_buffer_half_float")||!v.colorBufferFloat&&d.getExtension("EXT_color_buffer_float"),A=!v.colorBufferFloat&&d.getExtension("EXT_color_buffer_float"),j=!v.floatBlend&&!v.colorBufferFloat&&d.getExtension("EXT_float_blend");return O||A||j?{textureFloat:!!A,textureHalfFloat:!!O,floatBlend:!!j,R16F:d.R16F,RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F,RGB16F:d.RGB16F}:null}if(d instanceof WebGLRenderingContext){const O=!v.colorBufferHalfFloat&&d.getExtension("EXT_color_buffer_half_float"),A=!v.colorBufferFloat&&d.getExtension("WEBGL_color_buffer_float"),j=!v.floatBlend&&!v.colorBufferFloat&&d.getExtension("EXT_float_blend");return O||A||j?{textureFloat:!!A,textureHalfFloat:!!O,floatBlend:!!j,RGBA16F:O?O.RGBA16F_EXT:void 0,RGB16F:O?O.RGB16F_EXT:void 0,RGBA32F:A?A.RGBA32F_EXT:void 0}:null}return null}(this.gl,this._disabledExtensions)),this._colorBufferFloat}get blendMinMax(){return this._minMaxBlending||(this._minMaxBlending=function sN(d,v){if((0,Yc.Z)(d))return{MIN:d.MIN,MAX:d.MAX};if(v.blendMinMax)return null;{const O=d.getExtension("EXT_blend_minmax");return O?{MIN:O.MIN_EXT,MAX:O.MAX_EXT}:null}}(this.gl,this._disabledExtensions)),this._minMaxBlending}get depthTexture(){return null===this._depthTexture&&(this._depthTexture=fy(this.gl,this._disabledExtensions,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),this._depthTexture}get standardDerivatives(){return null===this._standardDerivatives&&(this._standardDerivatives=fy(this.gl,this._disabledExtensions,"standardDerivatives",!0,["OES_standard_derivatives"])),this._standardDerivatives}get shaderTextureLOD(){return null===this._shaderTextureLOD&&(this._shaderTextureLOD=fy(this.gl,this._disabledExtensions,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),this._shaderTextureLOD}get fragDepth(){return null===this._fragDepth&&(this._fragDepth=fy(this.gl,this._disabledExtensions,"fragDepth",!0,["EXT_frag_depth"])),this._fragDepth}get loseContext(){return this._loseContext||(this._loseContext=function lN(d,v){const O=v.loseContext&&d.getExtension("WEBGL_lose_context");return O?{loseRenderingContext:()=>O.loseContext()}:null}(this.gl,this._debugWebGLExtensions)),this._loseContext}get textureNorm16(){return this._textureNorm16||(this._textureNorm16=function aN(d,v){if(!(0,Yc.Z)(d)||v.textureNorm16)return null;const O=d.getExtension("EXT_texture_norm16");return O?{R16:O.R16_EXT,RG16:O.RG16_EXT,RGB16:O.RGB16_EXT,RGBA16:O.RGBA16_EXT,R16_SNORM:O.R16_SNORM_EXT,RG16_SNORM:O.RG16_SNORM_EXT,RGB16_SNORM:O.RGB16_SNORM_EXT,RGBA16_SNORM:O.RGBA16_SNORM_EXT}:null}(this.gl,this._disabledExtensions)),this._textureNorm16}get textureFloatLinear(){return null===this._textureFloatLinear&&(this._textureFloatLinear=fy(this.gl,this._disabledExtensions,"textureFloatLinear",!1,["OES_texture_float_linear"])),this._textureFloatLinear}enable(v){return this[v]}}class dN{constructor(v,O){this.gl=v,this.instanceCounter=new zF,this.programCache=new KF(this),this._state=new qS,this._numOfDrawCalls=0,this._numOfTriangles=0,this.type=(0,Yc.Z)(v)?U0.zO.WEBGL2:U0.zO.WEBGL1,this._loadExtensions(),this.configure(O)}configure(v){this._capabilities=new uN(this.gl,v),this._parameters=this._loadParameters(v);const O=this.gl.getParameter(this.gl.VIEWPORT);this._state=new qS,this._state.viewport={x:O[0],y:O[1],width:O[2],height:O[3]},this._stateTracker=new Ti.jp({setBlending:A=>{if(A){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(A.opRgb,A.opAlpha),this.setBlendFunctionSeparate(A.srcRgb,A.dstRgb,A.srcAlpha,A.dstAlpha);const j=A.color;this.setBlendColor(j.r,j.g,j.b,j.a)}else this.setBlendingEnabled(!1)},setCulling:A=>{A?(this.setFaceCullingEnabled(!0),this.setCullFace(A.face),this.setFrontFace(A.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:A=>{A?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(A.factor,A.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:A=>{A?(this.setDepthTestEnabled(!0),this.setDepthFunction(A.func)):this.setDepthTestEnabled(!1)},setStencilTest:A=>{if(A){this.setStencilTestEnabled(!0);const j=A.function;this.setStencilFunction(j.func,j.ref,j.mask);const te=A.operation;this.setStencilOp(te.fail,te.zFail,te.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:A=>{A?(this.setDepthWriteEnabled(!0),this.setDepthRange(A.zNear,A.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:A=>{A?this.setColorMask(A.r,A.g,A.b,A.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:A=>{this.setStencilWriteMask(A?A.mask:0)}}),this.enforceState(),this._driverTest=new XF(this)}get driverTest(){return this._driverTest}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.programCache.dispose(),this.bindVAO(null),this.unbindBuffer(Gt.w0.ARRAY_BUFFER),this.unbindBuffer(Gt.w0.ELEMENT_ARRAY_BUFFER),(0,Yc.Z)(this.gl)&&(this.unbindBuffer(Gt.w0.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(Gt.w0.PIXEL_PACK_BUFFER),this.unbindBuffer(Gt.w0.PIXEL_UNPACK_BUFFER),this.unbindBuffer(Gt.w0.COPY_READ_BUFFER),this.unbindBuffer(Gt.w0.COPY_WRITE_BUFFER)),this._state.textureUnitMap.length=0,(0,bp.hZ)()&&this.instanceCounter.printResourceCount()}setPipelineState(v){this._stateTracker.setPipeline(v)}setBlendingEnabled(v){this._state.blend!==v&&(!0===v?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=v,this._stateTracker.invalidateBlending())}externalProgramUpdate(){this._state.program?.stop(),this._state.program=null}externalTextureUnitUpdate(v,O){for(let A=0;A<v.length;++A)this._state.textureUnitMap[v[A]]=null;O>=0&&(this._state.activeTexture=O)}externalVertexArrayObjectUpdate(){const v=this.capabilities.vao;v&&(v.bindVertexArray(null),this._state.vertexArrayObject=null),this._state.vertexBuffer=null,this._state.indexBuffer=null}externalVertexBufferUpdate(){this._state.vertexBuffer=null}externalIndexBufferUpdate(){this._state.indexBuffer=null}setBlendColor(v,O,A,j){v===this._state.blendColor.r&&O===this._state.blendColor.g&&A===this._state.blendColor.b&&j===this._state.blendColor.a||(this.gl.blendColor(v,O,A,j),this._state.blendColor.r=v,this._state.blendColor.g=O,this._state.blendColor.b=A,this._state.blendColor.a=j,this._stateTracker.invalidateBlending())}setBlendFunction(v,O){v===this._state.blendFunction.srcRGB&&O===this._state.blendFunction.dstRGB||(this.gl.blendFunc(v,O),this._state.blendFunction.srcRGB=v,this._state.blendFunction.srcAlpha=v,this._state.blendFunction.dstRGB=O,this._state.blendFunction.dstAlpha=O,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(v,O,A,j){this._state.blendFunction.srcRGB===v&&this._state.blendFunction.srcAlpha===A&&this._state.blendFunction.dstRGB===O&&this._state.blendFunction.dstAlpha===j||(this.gl.blendFuncSeparate(v,O,A,j),this._state.blendFunction.srcRGB=v,this._state.blendFunction.srcAlpha=A,this._state.blendFunction.dstRGB=O,this._state.blendFunction.dstAlpha=j,this._stateTracker.invalidateBlending())}setBlendEquation(v){this._state.blendEquation.mode!==v&&(this.gl.blendEquation(v),this._state.blendEquation.mode=v,this._state.blendEquation.modeAlpha=v,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(v,O){this._state.blendEquation.mode===v&&this._state.blendEquation.modeAlpha===O||(this.gl.blendEquationSeparate(v,O),this._state.blendEquation.mode=v,this._state.blendEquation.modeAlpha=O,this._stateTracker.invalidateBlending())}setColorMask(v,O,A,j){this._state.colorMask.r===v&&this._state.colorMask.g===O&&this._state.colorMask.b===A&&this._state.colorMask.a===j||(this.gl.colorMask(v,O,A,j),this._state.colorMask.r=v,this._state.colorMask.g=O,this._state.colorMask.b=A,this._state.colorMask.a=j,this._stateTracker.invalidateColorWrite())}setClearColor(v,O,A,j){this._state.clearColor.r===v&&this._state.clearColor.g===O&&this._state.clearColor.b===A&&this._state.clearColor.a===j||(this.gl.clearColor(v,O,A,j),this._state.clearColor.r=v,this._state.clearColor.g=O,this._state.clearColor.b=A,this._state.clearColor.a=j)}setFaceCullingEnabled(v){this._state.faceCulling!==v&&(!0===v?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=v,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(v){this._state.polygonOffsetFill!==v&&(!0===v?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=v,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(v,O){this._state.polygonOffset[0]===v&&this._state.polygonOffset[1]===O||(this._state.polygonOffset[0]=v,this._state.polygonOffset[1]=O,this.gl.polygonOffset(v,O),this._stateTracker.invalidatePolygonOffset())}setCullFace(v){this._state.cullFace!==v&&(this.gl.cullFace(v),this._state.cullFace=v,this._stateTracker.invalidateCulling())}setFrontFace(v){this._state.frontFace!==v&&(this.gl.frontFace(v),this._state.frontFace=v,this._stateTracker.invalidateCulling())}setScissorTestEnabled(v){this._state.scissorTest!==v&&(!0===v?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=v)}setScissorRect(v,O,A,j){this._state.scissorRect.x===v&&this._state.scissorRect.y===O&&this._state.scissorRect.width===A&&this._state.scissorRect.height===j||(this.gl.scissor(v,O,A,j),this._state.scissorRect.x=v,this._state.scissorRect.y=O,this._state.scissorRect.width=A,this._state.scissorRect.height=j)}setDepthTestEnabled(v){this._state.depthTest!==v&&(!0===v?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=v,this._stateTracker.invalidateDepthTest())}setClearDepth(v){this._state.clearDepth!==v&&(this.gl.clearDepth(v),this._state.clearDepth=v)}setDepthFunction(v){this._state.depthFunction!==v&&(this.gl.depthFunc(v),this._state.depthFunction=v,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(v){this._state.depthWrite!==v&&(this.gl.depthMask(v),this._state.depthWrite=v,this._stateTracker.invalidateDepthWrite())}setDepthRange(v,O){this._state.depthRange.zNear===v&&this._state.depthRange.zFar===O||(this.gl.depthRange(v,O),this._state.depthRange.zNear=v,this._state.depthRange.zFar=O,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(v){this._state.stencilTest!==v&&(!0===v?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=v,this._stateTracker.invalidateStencilTest())}setClearStencil(v){v!==this._state.clearStencil&&(this.gl.clearStencil(v),this._state.clearStencil=v)}setStencilFunction(v,O,A){this._state.stencilFunction.func===v&&this._state.stencilFunction.ref===O&&this._state.stencilFunction.mask===A||(this.gl.stencilFunc(v,O,A),this._state.stencilFunction.face=Gt.LR.FRONT_AND_BACK,this._state.stencilFunction.func=v,this._state.stencilFunction.ref=O,this._state.stencilFunction.mask=A,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(v,O,A,j){this._state.stencilFunction.face===v&&this._state.stencilFunction.func===O&&this._state.stencilFunction.ref===A&&this._state.stencilFunction.mask===j||(this.gl.stencilFuncSeparate(v,O,A,j),this._state.stencilFunction.face=v,this._state.stencilFunction.func=O,this._state.stencilFunction.ref=A,this._state.stencilFunction.mask=j,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(v){this._state.stencilWriteMask!==v&&(this.gl.stencilMask(v),this._state.stencilWriteMask=v,this._stateTracker.invalidateStencilWrite())}setStencilOp(v,O,A){this._state.stencilOperation.face===Gt.LR.FRONT_AND_BACK&&this._state.stencilOperation.fail===v&&this._state.stencilOperation.zFail===O&&this._state.stencilOperation.zPass===A||(this.gl.stencilOp(v,O,A),this._state.stencilOperation.face=Gt.LR.FRONT_AND_BACK,this._state.stencilOperation.fail=v,this._state.stencilOperation.zFail=O,this._state.stencilOperation.zPass=A,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(v,O,A,j){this._state.stencilOperation.face===v&&this._state.stencilOperation.fail===O&&this._state.stencilOperation.zFail===A&&this._state.stencilOperation.zPass===j||(this.gl.stencilOpSeparate(v,O,A,j),this._state.stencilOperation.face=v,this._state.stencilOperation.fail=O,this._state.stencilOperation.zFail=A,this._state.stencilOperation.zPass=j,this._stateTracker.invalidateStencilTest())}setActiveTexture(v,O=!1){const A=this._state.activeTexture;return v>=0&&(O||v!==this._state.activeTexture)&&(this.gl.activeTexture(Gt.Ld+v),this._state.activeTexture=v),A}clear(v){v&&this.gl.clear(v)}clearSafe(v,O=255){v&&(v&Gt.lk.COLOR_BUFFER_BIT&&this.setColorMask(!0,!0,!0,!0),v&Gt.lk.DEPTH_BUFFER_BIT&&this.setDepthWriteEnabled(!0),v&Gt.lk.STENCIL_BUFFER_BIT&&this.setStencilWriteMask(O),this.gl.clear(v))}drawArrays(v,O,A){if((0,bp.hZ)()&&(this._numOfDrawCalls++,this._numOfTriangles+=aA(v,A)),this.gl.drawArrays(v,O,A),(0,bp.hZ)()){const j=(0,ll.HH)(this);j&&console.error("drawArrays:",j)}}drawElements(v,O,A,j){if((0,bp.hZ)()&&(this._numOfDrawCalls++,this._numOfTriangles+=aA(v,O)),this.gl.drawElements(v,O,A,j),(0,bp.hZ)()){const te=(0,ll.HH)(this);if(te){const pe=this.getBoundVAO(),be=pe?.indexBuffer,Re=pe?.vertexBuffers,Ge={indexBuffer:be,vertexBuffers:Re},tt={mode:v,count:O,type:A,offset:j},ft=(0,at.yw)(be,Nt=>Nt.size)??0,yt=j+O;console.error(`drawElements: ${te}${ft<yt?`. Buffer is too small. Attempted to draw index ${yt} of ${ft}`:""}`,{args:tt,vao:Ge})}}}logInfo(){(0,bp.hZ)()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}resetInfo(){(0,bp.hZ)()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}get capabilities(){return this._capabilities}setViewport(v,O,A,j){A=Math.max(Math.round(A),1),j=Math.max(Math.round(j),1);const te=this._state.viewport;te.x===v&&te.y===O&&te.width===A&&te.height===j||(te.x=v,te.y=O,te.width=A,te.height=j,this.gl.viewport(v,O,A,j))}getViewport(){return{x:this._state.viewport.x,y:this._state.viewport.y,width:this._state.viewport.width,height:this._state.viewport.height}}useProgram(v){this._state.program!==v&&(this._state.program?.stop(),this._state.program=v,this.gl.useProgram(v?.glName??null))}bindTexture(v,O,A=!1){(O>=this.parameters.maxTextureImageUnits||O<0)&&console.error("Input texture unit is out of range of available units!");const j=this._state.textureUnitMap[O];return(0,at.Wi)(v)||null==v.glName?((0,at.pC)(j)&&(this.setActiveTexture(O,A),this.gl.bindTexture(j.descriptor.target,null)),this._state.textureUnitMap[O]=null,j):A||j!==v?(this.setActiveTexture(O,A),this.gl.bindTexture(v.descriptor.target,v.glName),v.applyChanges(),this._state.textureUnitMap[O]=v,j):(v.isDirty&&(this.setActiveTexture(O,A),v.applyChanges()),j)}unbindTexture(v){if(!(0,at.Wi)(v))for(let O=0;O<this.parameters.maxTextureImageUnits;O++)this._state.textureUnitMap[O]===v&&(this.bindTexture(null,O),this._state.textureUnitMap[O]=null)}bindFramebuffer(v,O=!1){if(O||this._state.readFramebuffer!==v||this._state.drawFramebuffer!==v){if((0,at.Wi)(v))return this.gl.bindFramebuffer(Gt.qi.FRAMEBUFFER,null),this._state.readFramebuffer=null,void(this._state.drawFramebuffer=null);v.initializeAndBind(Gt.qi.FRAMEBUFFER),this._state.readFramebuffer=v,this._state.drawFramebuffer=v}}bindFramebufferSeparate(v,O,A=!1){const j=O===Gt.qi.READ_FRAMEBUFFER;(A||(j?this._state.readFramebuffer:this._state.drawFramebuffer)!==v)&&((0,at.Wi)(v)?this.gl.bindFramebuffer(O,null):v.initializeAndBind(O),j?this._state.readFramebuffer=(0,at.Pt)(v,null):this._state.drawFramebuffer=(0,at.Pt)(v,null))}blitFramebuffer(v,O,A=0,j=0,te=v.width,pe=v.height,be=0,Re=0,Ge=O.width,tt=O.height,ft=Gt.lk.COLOR_BUFFER_BIT,yt=Gt.cw.NEAREST){this.bindFramebufferSeparate(v,Gt.qi.READ_FRAMEBUFFER),this.bindFramebufferSeparate(O,Gt.qi.DRAW_FRAMEBUFFER),this.gl.blitFramebuffer(A,j,te,pe,be,Re,Ge,tt,ft,yt)}bindBuffer(v,O){if(v)switch(O??(O=v.bufferType),O){case Gt.w0.ARRAY_BUFFER:this._state.vertexBuffer=Eu(this.gl,v,O,this._state.vertexBuffer);break;case Gt.w0.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=Eu(this.gl,v,O,this._state.indexBuffer);break;case Gt.w0.UNIFORM_BUFFER:this._state.uniformBuffer=Eu(this.gl,v,O,this._state.uniformBuffer);break;case Gt.w0.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=Eu(this.gl,v,O,this._state.pixelPackBuffer);break;case Gt.w0.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=Eu(this.gl,v,O,this._state.pixelUnpackBuffer);break;case Gt.w0.COPY_READ_BUFFER:this._state.copyReadBuffer=Eu(this.gl,v,O,this._state.copyReadBuffer);break;case Gt.w0.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=Eu(this.gl,v,O,this._state.copyWriteBuffer)}}bindRenderbuffer(v){const O=this.gl;v||(O.bindRenderbuffer(O.RENDERBUFFER,null),this._state.renderbuffer=null),this._state.renderbuffer!==v&&(O.bindRenderbuffer(O.RENDERBUFFER,v.glName),this._state.renderbuffer=v)}_getBufferBinding(v,O){if(O>=this.parameters.maxUniformBufferBindings||O<0)return console.error("Uniform buffer binding point is out of range!"),null;const A=this._state.uniformBufferBindingPoints;let j=A[O];return(0,at.Wi)(j)&&(j={buffer:null,offset:0,size:0},A[O]=j),j}bindBufferBase(v,O,A){const j=this._getBufferBinding(v,O);(0,at.Wi)(j)||j.buffer===A&&0===j.offset&&0===j.size||(this.gl.bindBufferBase(v,O,A?A.glName:null),j.buffer=A,j.offset=0,j.size=0)}bindBufferRange(v,O,A,j,te){const pe=this._getBufferBinding(v,O);if(!(0,at.Wi)(pe)&&(pe.buffer!==A||pe.offset!==j||pe.size!==te)){if(j%this._parameters.uniformBufferOffsetAlignment!=0)return void console.error("Uniform buffer binding offset is not a multiple of the context offset alignment");this.gl.bindBufferRange(v,O,A.glName,j,te),pe.buffer=A,pe.offset=j,pe.size=te}}bindUBO(v,O,A,j){(0,at.Wi)(O)?this.bindBufferBase(Gt.w0.UNIFORM_BUFFER,v,null):((0,bp.hZ)()&&(j??O.byteLength)>this._parameters.maxUniformBlockSize&&console.error("Attempting to bind more data than the maximum uniform block size"),O.initialize(),void 0!==A&&void 0!==j?this.bindBufferRange(Gt.w0.UNIFORM_BUFFER,v,O.buffer,A,j):this.bindBufferBase(Gt.w0.UNIFORM_BUFFER,v,O.buffer))}unbindUBO(v){for(let O=0,A=this._state.uniformBufferBindingPoints.length;O<A;O++){const j=this._state.uniformBufferBindingPoints[O];(0,at.pC)(j)&&j.buffer===v.buffer&&this.bindBufferBase(Gt.w0.UNIFORM_BUFFER,O,null)}}unbindBuffer(v){switch(v){case Gt.w0.ARRAY_BUFFER:this._state.vertexBuffer=Eu(this.gl,null,v,this._state.vertexBuffer);break;case Gt.w0.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=Eu(this.gl,null,v,this._state.indexBuffer);break;case Gt.w0.UNIFORM_BUFFER:this._state.uniformBuffer=Eu(this.gl,null,v,this._state.uniformBuffer);break;case Gt.w0.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=Eu(this.gl,null,v,this._state.pixelPackBuffer);break;case Gt.w0.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=Eu(this.gl,null,v,this._state.pixelUnpackBuffer);break;case Gt.w0.COPY_READ_BUFFER:this._state.copyReadBuffer=Eu(this.gl,null,v,this._state.copyReadBuffer);break;case Gt.w0.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=Eu(this.gl,null,v,this._state.copyWriteBuffer)}}bindVAO(v=null){(0,at.Wi)(v)?this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null):this._state.vertexArrayObject!==v&&(v.bind(),this._state.vertexArrayObject=v)}clientWaitAsync(v=(0,ro.HA)(10)){var O=this;return(0,oi.Z)(function*(){const A=O.gl,j=A.fenceSync(Gt.V7.SYNC_GPU_COMMANDS_COMPLETE,0);let te;O.instanceCounter.increment(Gt._g.Sync,j),A.flush();do{yield(0,fi.e4)(v),te=A.clientWaitSync(j,0,0)}while(te===Gt.Y5.TIMEOUT_EXPIRED);if(O.instanceCounter.decrement(Gt._g.Sync,j),A.deleteSync(j),te===Gt.Y5.WAIT_FAILED)throw new Error("Client wait failed")})()}getBoundFramebufferObject(v=Gt.qi.FRAMEBUFFER){return v===Gt.qi.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer}getBoundVAO(){return this._state.vertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null,!0),this.unbindBuffer(Gt.w0.ARRAY_BUFFER),this.unbindBuffer(Gt.w0.ELEMENT_ARRAY_BUFFER),(0,Yc.Z)(this.gl)&&(this.unbindBuffer(Gt.w0.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(Gt.w0.PIXEL_PACK_BUFFER),this.unbindBuffer(Gt.w0.PIXEL_UNPACK_BUFFER),this.unbindBuffer(Gt.w0.COPY_READ_BUFFER),this.unbindBuffer(Gt.w0.COPY_WRITE_BUFFER));for(let v=0;v<this.parameters.maxTextureImageUnits;++v)this.bindTexture(null,v);this.setBlendingEnabled(!1),this.setBlendFunction(Gt.zi.ONE,Gt.zi.ZERO),this.setBlendEquation(Gt.db.ADD),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(Gt.LR.BACK),this.setFrontFace(Gt.Wf.CCW),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(Gt.wb.LESS),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(Gt.wb.ALWAYS,0,0),this.setStencilOp(Gt.xS.KEEP,Gt.xS.KEEP,Gt.xS.KEEP),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){const v=this.gl,O=this.capabilities.vao;O&&O.bindVertexArray(null);for(let A=0;A<this.parameters.maxVertexAttributes;A++)v.disableVertexAttribArray(A);if(this._state.vertexBuffer?v.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):v.bindBuffer(Gt.w0.ARRAY_BUFFER,null),this._state.indexBuffer?v.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):v.bindBuffer(Gt.w0.ELEMENT_ARRAY_BUFFER,null),(0,Yc.Z)(v)){this._state.uniformBuffer?v.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):v.bindBuffer(Gt.w0.UNIFORM_BUFFER,null);for(let A=0;A<this._parameters.maxUniformBufferBindings;A++){const j=this._state.uniformBufferBindingPoints[A];if((0,at.pC)(j)){const{buffer:te,offset:pe,size:be}=j;null!==te?0===pe&&0===be?v.bindBufferBase(Gt.w0.UNIFORM_BUFFER,A,te.glName):v.bindBufferRange(Gt.w0.UNIFORM_BUFFER,A,te.glName,pe,be):v.bindBufferBase(Gt.w0.UNIFORM_BUFFER,A,null)}}this._state.pixelPackBuffer?v.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):v.bindBuffer(Gt.w0.PIXEL_PACK_BUFFER,null),this._state.pixelUnpackBuffer?v.bindBuffer(this._state.pixelUnpackBuffer.bufferType,this._state.pixelUnpackBuffer.glName):v.bindBuffer(Gt.w0.PIXEL_UNPACK_BUFFER,null),this._state.copyReadBuffer?v.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):v.bindBuffer(Gt.w0.COPY_READ_BUFFER,null),this._state.copyWriteBuffer?v.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):v.bindBuffer(Gt.w0.COPY_WRITE_BUFFER,null),v.bindFramebuffer(Gt.qi.READ_FRAMEBUFFER,null),v.readBuffer(v.BACK),this._state.readFramebuffer&&(v.bindFramebuffer(Gt.qi.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),v.readBuffer(Gt.VY.COLOR_ATTACHMENT0)),v.bindFramebuffer(Gt.qi.DRAW_FRAMEBUFFER,this._state.drawFramebuffer?.glName??null)}else this._state.readFramebuffer=this._state.drawFramebuffer,v.bindFramebuffer(Gt.qi.FRAMEBUFFER,this._state.drawFramebuffer?.glName??null);if(O&&this._state.vertexArrayObject){const A=this._state.vertexArrayObject;this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null),this.bindVAO(A)}v.useProgram(this._state.program?.glName??null),v.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a),v.bindRenderbuffer(v.RENDERBUFFER,this._state.renderbuffer?this._state.renderbuffer.glName:null),!0===this._state.blend?v.enable(this.gl.BLEND):v.disable(this.gl.BLEND),v.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha),v.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha),v.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a),v.clearDepth(this._state.clearDepth),v.clearStencil(this._state.clearStencil),v.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a),v.cullFace(this._state.cullFace),v.depthFunc(this._state.depthFunction),v.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar),!0===this._state.depthTest?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),v.depthMask(this._state.depthWrite),v.frontFace(this._state.frontFace),v.lineWidth(1),!0===this._state.faceCulling?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),v.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]),!0===this._state.polygonOffsetFill?v.enable(v.POLYGON_OFFSET_FILL):v.disable(v.POLYGON_OFFSET_FILL),v.scissor(this._state.scissorRect.x,this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height),!0===this._state.scissorTest?v.enable(v.SCISSOR_TEST):v.disable(v.SCISSOR_TEST),v.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask),v.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass),!0===this._state.stencilTest?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),v.stencilMask(this._state.stencilWriteMask);for(let A=0;A<this.parameters.maxTextureImageUnits;A++){v.activeTexture(Gt.Ld+A),v.bindTexture(Gt.No.TEXTURE_2D,null),v.bindTexture(Gt.No.TEXTURE_CUBE_MAP,null),(0,Yc.Z)(v)&&(v.bindTexture(Gt.No.TEXTURE_3D,null),v.bindTexture(Gt.No.TEXTURE_2D_ARRAY,null));const j=this._state.textureUnitMap[A];(0,at.pC)(j)&&v.bindTexture(j.descriptor.target,j.glName)}v.activeTexture(Gt.Ld+this._state.activeTexture),v.viewport(this._state.viewport.x,this._state.viewport.y,this._state.viewport.width,this._state.viewport.height),this.resetInfo()}_loadExtensions(){this.type===U0.zO.WEBGL1&&this.gl.getExtension("OES_element_index_uint"),this.gl.getExtension("KHR_parallel_shader_compile")}_loadParameters(v){const O=this.capabilities.textureFilterAnisotropic,A=v.maxAnisotropy??1/0,j=(0,Yc.Z)(this.gl),te=this.gl,pe={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:O?Math.min(this.gl.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY),A):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),maxUniformBufferBindings:j?te.getParameter(te.MAX_UNIFORM_BUFFER_BINDINGS):0,maxVertexUniformBlocks:j?te.getParameter(te.MAX_VERTEX_UNIFORM_BLOCKS):0,maxFragmentUniformBlocks:j?te.getParameter(te.MAX_FRAGMENT_UNIFORM_BLOCKS):0,maxUniformBlockSize:j?te.getParameter(te.MAX_UNIFORM_BLOCK_SIZE):0,uniformBufferOffsetAlignment:j?te.getParameter(te.UNIFORM_BUFFER_OFFSET_ALIGNMENT):1,maxArrayTextureLayers:j?te.getParameter(te.MAX_ARRAY_TEXTURE_LAYERS):1,maxSamples:j?te.getParameter(te.MAX_SAMPLES):1};return Va.x.TEXTURE_UNIT_FOR_UPDATES=pe.maxTextureImageUnits-1,pe}}function Eu(d,v,O,A){return v?A!==v&&d.bindBuffer(O,v.glName):d.bindBuffer(O,null),v}function aA(d,v){switch(d){case Gt.MX.POINTS:return 2*v;case Gt.MX.TRIANGLES:return v/3;case Gt.MX.TRIANGLE_STRIP:case Gt.MX.TRIANGLE_FAN:return v-2;default:return 0}}class lA extends dN{constructor(v,O,A){super(v,O),this.newCache=A,this._refCount=1}dispose(){--this._refCount>0||super.dispose()}ref(){++this._refCount}bindTechnique(v,O,A,j){this.useProgram(v.program);const te=(0,at.pC)(A)?A.slot:null;return v.bindPipelineState(this,te,j),(0,at.pC)(O)&&(0,at.pC)(A)&&v.bindPass(O,A),v.program}get test(){return this.programCache.test}}var hN=T(80855),_N=T(97825);const cA=vo.Z.getLogger("esri.views.3d.webgl-engine.lib.TextureRepository");let om=class extends Li.Z{constructor(d,v,O){super({}),this._stage=d,this._techniqueRepository=v,this._rctx=O,this._textures=new Map,this._loadingCount=0,this._frameUpdates=new Map,this.events=new vc.Z,this._frameTask=d.resourceController.scheduler.registerTask(lo.T8.TEXTURE_UNLOAD)}normalizeCtorArgs(){return{}}dispose(){this._frameTask.remove(),this._stage.forEachOfType(Xb.U.Texture,d=>d.unload())}get updating(){return this._loadingCount>0||this._frameTask.updating}get textureTechnique(){return(0,at.Wi)(this._textureTechnique)&&(this._textureTechnique=this._techniqueRepository.acquire(hN.K,new _N.V)),this._textureTechnique}acquire(d){const v=this._textures.get(d);return v?(v.ref(),(0,at.Pt)(v.loadingPromise,v)):this._createNewRef(d)}update(){let d=!1;this._frameUpdates.forEach(v=>{const O=v.texture.frameUpdate(this._rctx,this.textureTechnique,v.previousToken);O>=0&&O!==v.previousToken&&(v.previousToken=O,d=!0)}),d&&this.events.emit("changed",Gi.Xx.BACKGROUND)}_createNewRef(d){const v=this._stage.getObject(d);if((0,at.Wi)(v))return(0,_d.hu)(void 0!==v),null;const O=v.events.on("unloaded",()=>{O.remove(),this._onTextureUnloaded(d)}),A=new pN(d,()=>{this._frameTask.schedule(()=>{A.isUnreferenced&&v.unload()})});return this._textures.set(d,A),A.ref(),(0,at.pC)(v.glTexture)?(this._updateGLTexture(A,v.glTexture),v.requiresFrameUpdates&&this._frameUpdates.set(d,{texture:v,previousToken:-1}),A):(this._loadingCount++,A.loadingPromise=this._stage.schedule(()=>{const j=v.load(this._rctx,()=>this.textureTechnique),te=be=>(this._loadingCount--,A.loadingPromise=null,this._updateGLTexture(A,be),v.requiresFrameUpdates&&this._frameUpdates.set(d,{texture:v,previousToken:-1}),A);return(0,fi.y8)(j)?j.then(te,be=>(this._loadingCount--,A.loadingPromise=null,(0,fi.D_)(be)||cA.error(be),null)):te(j)}),A.loadingPromise)}_updateGLTexture(d,v){d.glTexture=v,this.events.emit("changed",Gi.Xx.UPDATE)}_onTextureUnloaded(d){this._textures.delete(d),this._frameUpdates.delete(d)}};(0,Je._)([(0,ht.Cb)()],om.prototype,"_loadingCount",void 0),(0,Je._)([(0,ht.Cb)()],om.prototype,"_frameTask",void 0),(0,Je._)([(0,ht.Cb)()],om.prototype,"updating",null),om=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.lib.TextureRepository")],om);class pN{constructor(v,O){this.id=v,this._release=O,this._refCount=0}get isUnreferenced(){return 0===this._refCount}ref(){++this._refCount}release(){--this._refCount,this._refCount>0||(0!==this._refCount?(cA.error("Cannot dereference texture that has no references!"),this._refCount=0):this._release())}}var fN=T(51899);const mN=vo.Z.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils");let my=class extends Li.Z{constructor(){super(...arguments),this._data=new Array,this._state=Gi.Rw.NOT_LOADED}dispose(){this._state=Gi.Rw.NOT_LOADED,this._data.forEach(d=>d.dispose()),this._data.length=0}get updating(){return this._state===Gi.Rw.LOADING}get resourceState(){return this._state}loadTextures(d){const v=[(0,KM.V)("esri/images/materials/water/normals.jpg"),(0,KM.V)("esri/images/materials/water/perturbation.jpg")];this._state=Gi.Rw.LOADING,Promise.all(v.map(O=>(0,V_.t)(O))).then(O=>{O.forEach(A=>this._data.push(new Va.x(d,{target:Gt.No.TEXTURE_2D,pixelFormat:Gt.VI.RGBA,dataType:Gt.Br.UNSIGNED_BYTE,wrapMode:Gt.e8.REPEAT,samplingMode:Gt.cw.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,maxAnisotropy:8,width:A.width,height:A.height},A))),this._state=Gi.Rw.LOADED}).catch(O=>{mN.error("Failed to load textures for water material.",O),this._state=Gi.Rw.NOT_LOADED})}bind(d){this._state===Gi.Rw.LOADED&&(d.bindTexture("texWaveNormal",this._data[0]),d.bindTexture("texWavePerturbation",this._data[1]))}};(0,Je._)([(0,ht.Cb)()],my.prototype,"_state",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],my.prototype,"updating",null),my=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],my);const gN=new Map;var Tp=T(18605);class yN extends Dl.Xn{constructor(v,O,A,j,te,pe){super(),this._rctx=v,this._renderScene=O,this._requestRenderScene=A,this._renderOverlay=j,this._forceCameraHook=te,this._disposeOffscreenBuffers=pe,this.supersample=!0,this._screenshotQueue=new Array}dispose(){this._rctx=null}takeScreenshot(v){this._requestRenderScene(Gi.Xx.BACKGROUND);const O=(0,fi.hh)();return this._screenshotQueue.push({settings:v,resolver:O}),O.promise}update(v){for(const O of this._screenshotQueue){if(this.isDisposed){O.resolver.reject();continue}const A={...O.settings,pixelRatio:O.settings.pixelRatio*v.viewCamera.pixelRatio},j=this._renderScreenshot(v,A);O.resolver(j)}this._screenshotQueue.length=0}_renderScreenshotOverlay(v,O,A){if((0,at.Wi)(this._renderOverlay))return O;v.width=O.width,v.height=O.height;const j=v.getContext("2d"),te=A.pixelRatio;return j.save(),j.translate(0,O.height),j.scale(1,-1),A.region&&j.translate(-A.region.x,-A.region.y),j.scale(te,te),O=this._renderOverlay(v,O),j.restore(),O}_readbackScreenshot(v,O){return v.resample?this._readbackScreenshotResampled(v,O):this._readbackScreenshotImmediate(v,O)}_readbackScreenshotResampled(v,O){const{framebufferWidth:A,framebufferHeight:j,region:te,resample:pe}=v,be=this._ensureScreenshotEncodeCanvas();let Re=(0,Tp.r7)(A,j,be);this._rctx.gl.readPixels(0,0,A,j,Gt.VI.RGBA,Gt.g.UNSIGNED_BYTE,new Uint8Array(Re.data.buffer)),O(),Re=this._renderScreenshotOverlay(be,Re,{...v,region:null});const Ge=(0,Tp.r7)(te.width,te.height,be);return(0,Tp.TT)(Re,Ge,!0,pe.region.x,j-(pe.region.y+pe.region.height),pe.region.width,pe.region.height)}_readbackScreenshotImmediate(v,O){const{framebufferHeight:A,region:j}=v,te=this._ensureScreenshotEncodeCanvas(),pe=(0,Tp.r7)(j.width,j.height,te);return this._rctx.gl.readPixels(j.x,A-(j.y+j.height),j.width,j.height,Gt.VI.RGBA,Gt.g.UNSIGNED_BYTE,new Uint8Array(pe.data.buffer)),O(),this._renderScreenshotOverlay(te,pe,v)}_renderScreenshot(v,O){let A=null;const j=v.viewCamera,{framebufferWidth:te,framebufferHeight:pe}=O;let be=!1;const ft=te!==j.fullWidth||pe!==j.fullHeight||O.disableDecorations&&v.frameHasDecorations||O.ignorePadding&&j.pixelRatio!==O.pixelRatio;if(ft){const Nt=j.clone();if(O.ignorePadding){const jt=(0,Ao.d)(Nt.padding);for(let ir=0;ir<4;ir++)jt[ir]=Math.round(jt[ir]/Nt.pixelRatio*O.pixelRatio);Nt.padding=jt}Nt.fullWidth=te,Nt.fullHeight=pe,Nt.pixelRatio=O.pixelRatio;const Rt=j.fovX-Nt.fovX,Jt=j.fovY-Nt.fovY;Rt<0&&Rt<Jt?Nt.fovX=j.fovX:Jt<0&&Jt<Rt&&(Nt.fovY=j.fovY),this._forceCameraHook(Nt),be=!0,A=new nc.X(this._rctx,{width:Nt.fullWidth,height:Nt.fullHeight,colorTarget:Gt.Lm.TEXTURE,depthStencilTarget:Gt.OU.DEPTH_STENCIL_RENDER_BUFFER}),this._renderScene(A,Nt,O.disableDecorations?Gi.Iq.OFF:Gi.Iq.ON),this._disposeOffscreenBuffers()}const yt=()=>{this._rctx.bindFramebuffer(null),(0,at.O3)(A)},It=this._readbackScreenshot(O,yt);if(yt(),ft&&!this._rctx.contextAttributes.alpha)for(let Nt=3;Nt<It.data.length;Nt+=4)It.data[Nt]=255;return be&&this._forceCameraHook(j),It}_ensureScreenshotEncodeCanvas(){return this._screenshotEncodeCanvas||(this._screenshotEncodeCanvas=document.createElement("canvas")),this._screenshotEncodeCanvas}}const dA=vo.Z.getLogger("esri.views.3d.webgl-engine.parts.View");let Hl=class extends((0,Dl.TF)(Li.Z)){constructor(d){super({}),this.events=new vc.Z,this.waterTextureRepository=new my,this._magnifierHelper=new im,this._needsUpdate=!0,this._needsRender=!0,this._idleSuspend=!0,this._needsWaterReflectionUpdate=!1,this._lastAnimationUpdate=0,this._container=d.container,this._viewingMode=d.viewingMode,this._initializeContext(d),(0,wr.YP)(()=>this.waterTextureRepository?.updating,()=>this.requestRender(),wr.nn),this._magnifierHelper.events.on("request-render",()=>this.requestRender()),this._stippleTextureRepository=new fN.h(this._rctx),this._shaderTechniqueRepository=new lj.M({rctx:this._rctx,viewingMode:d.viewingMode,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),this._textureRepository=new om(d,this._shaderTechniqueRepository,this._rctx),this._textureRepository.events.on("changed",v=>this.requestRender(v)),this._materialRepository=new Cj.h(this._textureRepository,this._shaderTechniqueRepository,()=>this.requestRender(),()=>this.requestRender()),this._compositingHelper=new cj(this._rctx,this._shaderTechniqueRepository),this._renderer=new g_(this._materialRepository,this._textureRepository,this._shaderTechniqueRepository,this._rctx,this._compositingHelper,this._magnifierHelper,v=>this.requestRender(v),(v,O)=>d.schedule(v,O),d),this._screenshotManager=new yN(this._rctx,(v,O,A)=>this._renderer.render(v,O,O,A),v=>this.requestRender(v),d.options.screenshot.renderOverlay,v=>this.events.emit("force-camera-for-screenshot",v),()=>this._renderer.disposeOffscreenBuffers()),this._registerFrameTask(d)}normalizeCtorArgs(){return{}}dispose(){this._container.contains(this._canvas)&&this._container.removeChild(this._canvas),this._frameTask=(0,at.hw)(this._frameTask),this._shaderTechniqueRepository=(0,at.O3)(this._shaderTechniqueRepository),super.dispose(),this._tmpDepthBuffer=null,this._rctx=null}get performanceInfo(){const d=this._rctx.gl;return{renderer:this._renderer.performanceInfo,textureMemory:void 0!==d.getUsedTextureMemory?d.getUsedTextureMemory():void 0,renderbufferMemory:void 0!==d.getUsedRenderbufferMemory?d.getUsedRenderbufferMemory():void 0,VBOMemory:void 0!==d.getUsedVBOMemory?d.getUsedVBOMemory():void 0}}requestRender(d=Gi.Xx.UPDATE){d===Gi.Xx.UPDATE?this._needsUpdate=!0:this._needsRender=!0}get updating(){return this._needsUpdate||this._needsWaterReflectionUpdate||this._renderer.updating||this._textureRepository.updating||this.waterTextureRepository.updating||this._magnifierHelper.updating}ensureEdgeView(){return this._renderer.ensureEdgeView()}get edgeView(){return this._renderer.edgeView}get textureRepository(){return this._textureRepository}get compositingHelper(){return this._compositingHelper}set magnifier(d){this._magnifierHelper.magnifier=d}updateLightSources(d,v,O){this._renderer.updateLightSources(d,v,O),this.requestRender()}setRenderParameters(d){void 0!==d.idleSuspend&&this._idleSuspend!==!!d.idleSuspend&&(this._idleSuspend=!!d.idleSuspend,this.requestRender()),this._renderer.setRenderParameters(d)}get renderingContext(){return this._rctx}get capabilities(){return this._rctx.capabilities}modify(d){this._renderer.modify(d),d.clear()}get canvas(){return this._canvas}takeScreenshot(d){return this._screenshotManager.takeScreenshot(d)}getAlpha(){return this._rctx.contextAttributes.alpha}get shadowsEnabled(){return this._renderer.shadowsEnabled}readAccumulatedShadow(d){return this._renderer.readAccumulatedShadow(d[0],d[1])}readHUDVisibility(d,v,O,A,j){this._renderer.readHUDVisibility(d,v,O,A,j)}getMinimalDepthForArea(d,v,O,A,j,te=j){const pe=A.constrainWindowSize(v,O,j*A.pixelRatio,te*A.pixelRatio),be=this._ensureDepthBuffer(pe);this._renderer.readDepthPixels(A,pe,be);let Re=Number.MAX_VALUE;for(let Ge=0;Ge<pe[2]*pe[3];Ge++){const tt=pj(4*Ge,be,A.nearFar);Re>tt&&tt!==A.nearFar[0]&&tt!==A.nearFar[1]&&(Re=tt)}if((0,at.pC)(d)){const Ge=d.pickDepth(v*A.pixelRatio,O*A.pixelRatio,A);(0,at.pC)(Ge)&&Re>Ge&&Ge!==A.nearFar[0]&&Ge!==A.nearFar[1]&&(Re=Ge)}return Re===Number.MAX_VALUE?void 0:Re}_ensureDepthBuffer(d){const v=4*d[2]*d[3];return((0,at.Wi)(this._tmpDepthBuffer)||this._tmpDepthBuffer.byteLength<v)&&(this._tmpDepthBuffer=new Uint8Array(v)),this._tmpDepthBuffer}get renderPlugins(){return this._renderer.renderPlugins}get test(){return{renderer:this._renderer}}get gpuMemoryUsage(){return this._renderer.gpuMemoryUsage}reloadShaders(){var d=this;return(0,oi.Z)(function*(){mx(),yield d._shaderTechniqueRepository.reloadAll(),d.requestRender()})()}get animationTimestep(){return this._renderer.animationTimestep}_registerFrameTask(d){const v=d.state,O={viewCamera:v.camera,frameHasDecorations:!1};let A=!1,j=Gi.Xx.BACKGROUND,te=!1;this._frameTask=(0,w_.A)({preRender:be=>{A=this.updating,j=this._needsUpdate?Gi.Xx.UPDATE:Gi.Xx.BACKGROUND,d.processSyncLayers();const Re=(0,ro.HA)(be.time-this._lastAnimationUpdate);(Re>this.animationTimestep||(0,at.pC)(this.forcedAnimationTime)||A||this._needsRender)&&(this._renderer.updateAnimation({camera:v.camera,dt:Re,forcedTime:this.forcedAnimationTime})&&this.requestRender(Gi.Xx.BACKGROUND),this._lastAnimationUpdate=be.time)},render:()=>{if((this._needsUpdate||this._needsRender||!this._idleSuspend||!this._renderer.isCameraFinal||this._needsWaterReflectionUpdate)&&v.camera.fullWidth>0&&v.camera.fullHeight>0){const be=this._needsUpdate&&this._idleSuspend&&this._renderer.isCameraFinal;this._needsRender=!1,this._needsUpdate=!1,this._needsWaterReflectionUpdate=!1,this._renderer.render(null,v.camera,v.contentCamera,Gi.Iq.ON),te=!0,be&&this._renderer.hasWaterReflection&&(this.requestRender(Gi.Xx.BACKGROUND),this._needsWaterReflectionUpdate=!0)}},update:()=>{O.viewCamera=v.camera,O.frameHasDecorations=this._renderer.hasSlicePlane||this._magnifierHelper.enabled,this._textureRepository.update(),this._screenshotManager.update(O)},finish:()=>{te&&(this._renderer.finish(j),te=!1)}})}_initializeContext(d){const v=d.options;this._canvas=v.canvas,this._canvas||(this._canvas=document.createElement("canvas")),this._canvas.setAttribute("style","width: 100%; height:100%; display:block;");const A=(0,U0.sj)("3d",this._canvas,{alpha:v.alpha||!1,premultipliedAlpha:!0,antialias:!1,depth:!0,stencil:null==v.stencil||v.stencil,powerPreference:"high-performance",preserveDrawingBuffer:v.preserveDrawingBuffer??!1});if((0,at.Wi)(A)){const j=(0,al.Z)("esri-force-webgl");dA.error(j)}else this._rctx=this._newRenderingContext(A,d),this._loadShaderOnlyExtensions(),!v.alpha&&this._rctx.contextAttributes.alpha&&dA.error("WebGL context has alpha channel even though no alpha channel was requested"),!this._rctx.contextAttributes.alpha&&(0,al.Z)("safari")>=11&&(this._container.style.backgroundColor="black"),this._container.appendChild(this._canvas)}_newRenderingContext(d,v){const O={disabledExtensions:v.options.deactivatedWebGLExtensions||{},debugWebGLExtensions:v.options.debugWebGLExtensions||{},maxAnisotropy:8},A=(j,te)=>v.resourceController.memoryController.newCache(j,te);return new lA(d,O,A)}_loadShaderOnlyExtensions(){this._rctx.capabilities.enable("standardDerivatives"),this._rctx.capabilities.enable("shaderTextureLOD"),this._rctx.capabilities.enable("textureFloat")}get componentObjectCollection(){return(0,at.Wi)(this._componentObjectCollection)&&(this._componentObjectCollection=new oj(this._renderer.renderPassManager,this._viewingMode)),this._componentObjectCollection}set componentObjectCollection(d){this._componentObjectCollection=d}};(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],Hl.prototype,"updating",null),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_rctx",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_container",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_canvas",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_stippleTextureRepository",void 0),(0,Je._)([(0,Dl.gT)(),(0,ht.Cb)()],Hl.prototype,"waterTextureRepository",void 0),(0,Je._)([(0,Dl.gT)(),(0,ht.Cb)()],Hl.prototype,"_magnifierHelper",void 0),(0,Je._)([(0,Dl.gT)(),(0,ht.Cb)()],Hl.prototype,"_textureRepository",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_compositingHelper",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_renderer",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_screenshotManager",void 0),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"componentObjectCollection",null),(0,Je._)([(0,Dl.gT)()],Hl.prototype,"_componentObjectCollection",void 0),(0,Je._)([(0,ht.Cb)()],Hl.prototype,"_needsUpdate",void 0),(0,Je._)([(0,ht.Cb)()],Hl.prototype,"_needsWaterReflectionUpdate",void 0),Hl=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.parts.RenderView")],Hl);(function uA(){return gN})();var gE;let Zc=gE=class extends((0,Dl.TF)(Li.Z)){constructor(d){super(d),this._handles=new so.Z,this._model=new Z1,this._layers=new La.Z,this._changeSet=new M9.as,this._layerSyncSet=new Set}initialize(){this._set("renderView",new Hl(this)),this._frameTask=this.resourceController.scheduler.registerTask(lo.T8.STAGE,this),this._handles.add(this._frameTask)}destroy(){rC.k.pool.prune(0),this._handles.destroy(),this.dispose()}get viewingMode(){return this.state.viewingMode}get updating(){return this._model.dirtySet.dirty||this.renderView.updating||this._frameTask.updating}add(d){this._model.add(d),(0,Ig.e)(d)&&(d.attachStage(this),this._addLayer(d)),this.renderView.requestRender()}remove(d){(0,at.Wi)(d)||(this.renderView.requestRender(),this._model.remove(d),(0,Ig.e)(d)&&(this._removeLayer(d),d.detachStage()))}addMany(d){(0,at.pC)(d)&&(this._model.addMany(d),this.renderView.requestRender())}removeMany(d){(0,at.pC)(d)&&(this._model.removeMany(d),this.renderView.requestRender())}load(d){var v=this;return(0,oi.Z)(function*(){(0,at.Wi)(d)||(Array.isArray(d)||(d=[d]),yield Promise.all(d.filter(O=>(0,at.Wi)(O.glTexture)).map(O=>v.schedule(()=>v._model.has(O)?O.load(v.renderView.renderingContext,()=>v.renderView.textureRepository.textureTechnique):null))))})()}loadImmediate(d){return d.load(this.renderView.renderingContext,()=>this.renderView.textureRepository.textureTechnique)}forEachOfType(d,v){this._model.forEachOfType(d,v)}handleEvent(d,v){this.destroyed||(this._model.dirtySet[d](v),this.renderView.requestRender())}get running(){return this._model.dirtySet.dirty}runTask(d){this._frameTask.processQueue(d),d.done||this._commit()}_commit(){const d=this._model.dirtySet;gE.DebugSettings.logDirtySet&&console.log("Dirty set: "+d.formatDebugInfo()),d.commit(this._changeSet),gE.DebugSettings.logDirtySet&&(console.log("RGs add: "+this._changeSet.adds.map(v=>v.id)),console.log("RGs remove: "+this._changeSet.removes.map(v=>v.id))),this._layerSyncSet.clear(),this.renderView.modify(this._changeSet),this.renderView.requestRender()}schedule(d,v){return this._frameTask.schedule(d,v)}syncLayer(d){this._layerSyncSet.add(d),this.renderView.requestRender()}processSyncLayers(){const d=this._model.dirtySet;this._layers.forAll(v=>{(this._layerSyncSet.has(v.id)||v.updatePolicy===Gi.jq.SYNC)&&(d.commitLayer(v.id,this._changeSet),this._layerSyncSet.delete(v.id))});for(const v of this._layerSyncSet)d.commitLayer(v,this._changeSet);this._layerSyncSet.clear(),this.renderView.modify(this._changeSet)}getObject(d){return this._model.getObject(d)}get layers(){return this._layers}_addLayer(d){this._layers.includes(d)||this._layers.push(d)}_removeLayer(d){this._commit(),null!=this._layers.removeUnordered(d)&&(this._model.dirtySet.getResidentRenderGeometries(d.id,this._changeSet.removes),this.renderView.modify(this._changeSet))}addRenderPlugin(d,v,O){const A=this.renderView.renderPlugins.add(d,v,O),j=()=>{nx(v)&&this.sceneIntersectionHelper.addIntersectionHandler(v)};if((0,fi.y8)(A))return A.then(j);j()}removeRenderPlugin(d){nx(d)&&this.sceneIntersectionHelper.removeIntersectionHandler(d),this.renderView.renderPlugins.remove(d)}get performanceInfo(){return{renderView:this.renderView.performanceInfo,model:this._model.getStats()}}get test(){const d=this;return{getCount:v=>d._model.test.content.filter(O=>O.type===v).length,model:d._model}}};Zc.DebugSettings={endFrameContentValidation:!1,logDirtySet:!1},(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"resourceController",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"options",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"state",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"sceneIntersectionHelper",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Zc.prototype,"viewingMode",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"container",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"renderSR",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"_handles",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Zc.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Zc.prototype,"_model",void 0),(0,Je._)([(0,Dl.gT)(),(0,ht.Cb)()],Zc.prototype,"renderView",void 0),Zc=gE=(0,Je._)([(0,Ds.j)("esri.views.3d.webgl-engine.Stage")],Zc);var yE=T(55314);function PC(){return PC=(0,oi.Z)(function*(d,v){if("2d"===d.type)return d.hitTest(v);const O=yield d.hitTest(v);if(0===O.results.length)return O;const A=O.results[0],j=(0,at.pC)(A.distance)?A.distance*(1+MN):A.distance,te=O.results.findIndex(pe=>pe.distance>j);return-1!==te&&(O.results=O.results.slice(0,te)),O}),PC.apply(this,arguments)}const MN=.05;var bN=T(93579),TN=T(31637);let j0=class extends Li.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(d){const v=this._get("node");d!==v&&(d&&d.classList.add("esri-component"),v&&v.classList.remove("esri-component"),this._set("node",d))}castNode(d){return d?"string"==typeof d||function ON(d){return d&&"nodeType"in d}(d)?(this._set("widget",null),(0,Fm.L7)(d)):(function PN(d){return d&&"function"==typeof d.render}(d)&&!d.domNode&&(d.domNode=document.createElement("div")),this._set("widget",d),d.domNode):(this._set("widget",null),null)}};(0,Je._)([(0,ht.Cb)({dependsOn:[]})],j0.prototype,"id",null),(0,Je._)([(0,ht.Cb)()],j0.prototype,"node",null),(0,Je._)([(0,Uu.p)("node")],j0.prototype,"castNode",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],j0.prototype,"widget",void 0),j0=(0,Je._)([(0,Ds.j)("esri.views.ui.Component")],j0);const vE=j0;var fA=T(64183),Cp=T(38570);const DN={left:0,top:0,bottom:0,right:0},mA={bottom:30,top:15,right:15,left:15},DC="manual",kc_corner="esri-ui-corner";function xC(d){const v=d,O="object"==typeof v&&null!==v&&Object.getPrototypeOf(v);return null!==O&&O!==Object.prototype||!("component"in v||"index"in v||"position"in v)?null:d}function SC(d,{top:v,bottom:O,left:A,right:j}){d.style.top=v,d.style.bottom=O,d.style.left=A,d.style.right=j}let y_=class extends vc.Z.EventedAccessor{constructor(d){super(d),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new so.Z,this.view=null,this._applyViewPadding=()=>{const v=this.container;v&&SC(v,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const v=this._innerContainer;v&&SC(v,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([(0,wr.YP)(()=>[this.view?.padding,this.container],this._applyViewPadding,wr.nn),(0,wr.YP)(()=>this.padding,this._applyUIPadding,wr.nn)])}destroy(){this.container=null;for(const d of this._components)d.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(d){const v=this._get("container");d!==v&&(d&&(d.classList.add("esri-ui"),(0,fA.V$)(d),this._attachContainers(d)),v&&(v.classList.remove("esri-ui"),SC(v,{top:"",bottom:"",left:"",right:""}),(0,Fm.cS)(v)),this._set("container",d))}get height(){const d=this.get("view.height")||0;if(0===d)return d;const v=this._getViewPadding();return Math.max(d-(v.top+v.bottom),0)}get padding(){return this._get("padding")}set padding(d){d?this._override("padding",d):this._clearOverride("padding")}castPadding(d){return"number"==typeof d?{bottom:d,top:d,right:d,left:d}:{...mA,...d}}get width(){const d=this.get("view.width")||0;if(0===d)return d;const v=this._getViewPadding();return Math.max(d-(v.left+v.right),0)}add(d,v){let O,A;if(Array.isArray(d))return void d.forEach(te=>this.add(te,v));const j=xC(d);j&&({index:O,position:v,component:d,key:A}=j),v&&"object"==typeof v&&({index:O,key:A,position:v}=v),!d||v&&!this._isValidPosition(v)||this._add(d,v,O,A)}remove(d,v){if(!d)return;if(Array.isArray(d))return d.map(A=>this.remove(A,v));const O=this._find(d);if(O){const A=this._componentToKey;if(A.has(d)&&A.get(d)!==v)return;const j=this._components.indexOf(O);return O.node.parentNode&&O.node.parentNode.removeChild(O.node),this._componentToKey.delete(d),this._components.splice(j,1)[0]}}empty(d){return Array.isArray(d)?d.map(v=>this.empty(v)).reduce((v,O)=>v.concat(O)):(d=d||DC)===DC?Array.prototype.slice.call(this._manualContainer.children).filter(v=>!v.classList.contains(kc_corner)).map(v=>this.remove(v)):this._isValidPosition(d)?Array.prototype.slice.call(this._cornerNameToContainerLookup[d].children).map(this.remove,this):null}move(d,v){if(Array.isArray(d)&&d.forEach(te=>this.move(te,v)),!d)return;let O;const A=xC(d)||xC(v);if(A&&(O=A.index,v=A.position,d=A.component||d),v&&!this._isValidPosition(v))return;const j=this.remove(d);j&&this.add(j,{position:v,index:O})}find(d){if(!d)return null;const v=this._findById(d);return v&&(v.widget||v.node)}getPosition(d){for(const v in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[v].contains(d))return v;return null}_add(d,v,O,A){d instanceof vE||(d=new vE({node:d})),this._place({component:d,position:v,index:O}),this._components.push(d),A&&this._componentToKey.set(d,A)}_find(d){return d?d instanceof vE?this._findByComponent(d):"string"==typeof d?this._findById(d):this._findByNode(d.domNode||d):null}_getViewPadding(){return this.get("view.padding")||DN}_attachContainers(d){d.appendChild(this._innerContainer),d.appendChild(this._manualContainer)}_initContainers(){const d=document.createElement("div");d.classList.add("esri-ui-inner-container"),d.classList.add("esri-ui-corner-container");const v=document.createElement("div");v.classList.add("esri-ui-inner-container"),v.classList.add("esri-ui-manual-container");const O=document.createElement("div");O.classList.add("esri-ui-top-left"),O.classList.add(kc_corner),d.appendChild(O);const A=document.createElement("div");A.classList.add("esri-ui-top-right"),A.classList.add(kc_corner),d.appendChild(A);const j=document.createElement("div");j.classList.add("esri-ui-bottom-left"),j.classList.add(kc_corner),d.appendChild(j);const te=document.createElement("div");te.classList.add("esri-ui-bottom-right"),te.classList.add(kc_corner),d.appendChild(te),this._innerContainer=d,this._manualContainer=v;const pe=(0,Cp.dZ)();this._cornerNameToContainerLookup={"top-left":O,"top-right":A,"bottom-left":j,"bottom-right":te,"top-leading":pe?A:O,"top-trailing":pe?O:A,"bottom-leading":pe?te:j,"bottom-trailing":pe?j:te},this._positionNameToContainerLookup={manual:v,...this._cornerNameToContainerLookup}}_isValidPosition(d){return!!this._positionNameToContainerLookup[d]}_place(d){const v=d.component,A=d.index,j=this._positionNameToContainerLookup[d.position||DC],te=A>-1;if(function xN(d){return d&&!d._started&&"function"==typeof d.postMixInProperties&&"function"==typeof d.buildRendering&&"function"==typeof d.postCreate&&"function"==typeof d.startup}(v.widget)&&v.widget.startup(),!te)return void j.appendChild(v.node);const pe=Array.prototype.slice.call(j.children);0!==A?A>=pe.length?j.appendChild(v.node):(0,Fm.Vt)(v.node,pe[A]):j.firstChild?(0,Fm.Vt)(v.node,j.firstChild):j.appendChild(v.node)}_toPxPosition(d){return{top:this._toPxUnit(d.top),left:this._toPxUnit(d.left),right:this._toPxUnit(d.right),bottom:this._toPxUnit(d.bottom)}}_toPxUnit(d){return 0===d?"0":d+"px"}_findByComponent(d){let v,O=null;return this._components.some(A=>(v=A===d,v&&(O=A),v)),O}_findById(d){let v,O=null;return this._components.some(A=>(v=A.id===d,v&&(O=A),v)),O}_findByNode(d){let v,O=null;return this._components.some(A=>(v=A.node===d,v&&(O=A),v)),O}};(0,Je._)([(0,ht.Cb)()],y_.prototype,"container",null),(0,Je._)([(0,ht.Cb)()],y_.prototype,"height",null),(0,Je._)([(0,ht.Cb)({value:mA})],y_.prototype,"padding",null),(0,Je._)([(0,Uu.p)("padding")],y_.prototype,"castPadding",null),(0,Je._)([(0,ht.Cb)()],y_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],y_.prototype,"width",null),y_=(0,Je._)([(0,Ds.j)("esri.views.ui.UI")],y_);const SN=y_;var Op=T(10391);function gA(d,v){return d&&"copyright"in d&&(!v||"function"==typeof d.originOf&&"user"===d.originOf("copyright"))}function EE(d,v,O){!O||!v||d.find(A=>A.layerView===v&&A.text===O)||d.push({text:O,layerView:v})}const Pp=[];let am=class extends Nm.r{constructor(d){super(d),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Na.Z,this.view=null,this._allLayerViewsChange=v=>{this.handles.remove("suspension");const O=this.get("view.allLayerViews");O&&this.handles.add(O.map(A=>(0,wr.YP)(()=>[A.suspended,A.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),v&&v.removed&&v.removed.forEach(A=>{this._pendingAttributions.delete(A),this._fetchedAttributionData.delete(A)}),this._updateAttributionItems()},this.handles.add([(0,wr.on)(()=>this.view?.allLayerViews,"change",v=>this._allLayerViewsChange(v),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,wr.gx)(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const d=this.get("view.allLayerViews");Pp.length=0,d?(d.forEach(v=>{if(v.suspended||!v.layer?.attributionVisible)return;const O=v.layer;if(gA(O,"user"))return void EE(Pp,v,O.copyright);if(O.hasAttributionData){if(this._fetchedAttributionData.has(v)){const j=this._fetchedAttributionData.get(v);return void(j?EE(Pp,v,this._getDynamicAttribution(j,this.view,O)):gA(O)&&EE(Pp,v,O.copyright))}return void this._fetchAttributionData(v)}const A=O.get("portalItem.accessInformation");EE(Pp,v,A||O.copyright)}),function AN(d,v){return d.length!==v.length||d.some((O,A)=>O.text!==v[A].text)}(this.items,Pp)&&(this.items.removeAll(),this.items.addMany(Pp)),Pp.length=0,this.notifyChange("state")):this._clear()}_fetchAttributionData(d){var v=this;return(0,oi.Z)(function*(){if(v._pendingAttributions.has(d))return;v._pendingAttributions.add(d);const O=yield(0,xg.q6)(d.layer.fetchAttributionData());if(v._pendingAttributions.has(d)){const A=O.ok?v._createContributionIndex(O.value,function LN(d){return"bing-maps"===d.type}(d.layer)):null;v._pendingAttributions.delete(d),v._fetchedAttributionData.set(d,A)}v._updateAttributionItems()})()}_createContributionIndex(d,v){const O=d.contributors,A={};if(!O)return A;for(let j=0;j<O.length;j++){const te=O[j],pe=te.coverageAreas;if(!pe)return;for(const be of pe){const Re=be.bbox,Ge=be.zoomMin-(v&&be.zoomMin?1:0),tt=be.zoomMax-(v&&be.zoomMax?1:0),yt={extent:(0,ph.$)({xmin:Re[1],ymin:Re[0],xmax:Re[3],ymax:Re[2],spatialReference:ba.Z.WGS84}),attribution:te.attribution||"",score:null!=be.score?be.score:100,id:j};for(let It=Ge;It<=tt;It++)A[It]=A[It]||[],A[It].push(yt)}}return A.maxKey=Math.max.apply(null,Object.keys(A)),A}_getDynamicAttribution(d,v,O){const{extent:A,scale:j}=v;let te=O.tileInfo.scaleToZoom(j);if(te=Math.min(d.maxKey,Math.round(te)),!A||null==te||te<=-1)return"";const pe=d[te],be=(0,ph.iV)(A.center.clone().normalize(),v.spatialReference),Re={};return pe?pe.filter(Ge=>{const tt=!Re[Ge.id]&&be&&(0,kO.aV)(Ge.extent,be);return tt&&(Re[Ge.id]=!0),tt}).sort((Ge,tt)=>tt.score-Ge.score||Ge.objectId-tt.objectId).map(Ge=>Ge.attribution).join(", "):""}};(0,Je._)([(0,ht.Cb)({readOnly:!0,type:Na.Z})],am.prototype,"items",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],am.prototype,"state",null),(0,Je._)([(0,ht.Cb)()],am.prototype,"view",void 0),am=(0,Je._)([(0,Ds.j)("esri.widgets.Attribution.AttributionViewModel")],am);const yA=am;var gy=T(24940),Dp=T(25552),vs=T(94450);let $c=class extends Op.Z{constructor(d,v){super(d,v),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(O=>O.forEach(({target:A})=>this._checkSourceTextOverflow(A))),this.iconClass="esri-icon-description",this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new yA}initialize(){this.own((0,wr.on)(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((d,v)=>(d.includes(v.text)||d.push(v.text),d),[]).join(this.itemDelimiter)}render(){return(0,vs.u)("div",{bind:this,class:this.classes("esri-attribution esri-widget",{"esri-attribution--open":this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,vs.u)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",(0,vs.u)("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const d=this._isOpen,v=this._isInteractive,O=v?"0":"",{attributionText:A}=this;return(0,vs.u)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{"esri-attribution__sources--open":d,"esri-interactive":v}),innerHTML:A,tabindex:O})}_afterSourcesNodeCreate(d){this._prevSourceNodeHeight=d.clientWidth,this._resizeObserver.observe(d)}_checkSourceTextOverflow(d){let v=!1;const{clientHeight:O,clientWidth:A,scrollWidth:j}=d,te=j>A,pe=this._attributionTextOverflowed!==te;if(this._attributionTextOverflowed=te,pe&&(v=!0),this._isOpen){const be=O<this._prevSourceNodeHeight;this._prevSourceNodeHeight=O,be&&(this._isOpen=!1,v=!0)}v&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,Je._)([(0,ht.Cb)()],$c.prototype,"_isOpen",void 0),(0,Je._)([(0,ht.Cb)()],$c.prototype,"_isInteractive",null),(0,Je._)([(0,ht.Cb)()],$c.prototype,"_attributionTextOverflowed",void 0),(0,Je._)([(0,ht.Cb)()],$c.prototype,"_prevSourceNodeHeight",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],$c.prototype,"attributionText",null),(0,Je._)([(0,ht.Cb)()],$c.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)()],$c.prototype,"itemDelimiter",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],$c.prototype,"label",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Attribution/t9n/Attribution")],$c.prototype,"messages",void 0),(0,Je._)([(0,Rl.B)("viewModel.view")],$c.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:yA})],$c.prototype,"viewModel",void 0),(0,Je._)([(0,gy.h)()],$c.prototype,"_toggleState",null),$c=(0,Je._)([(0,Ds.j)("esri.widgets.Attribution")],$c);const wN=$c;var RN=T(67436);let F0=class extends((0,RN._)(Li.Z)){constructor(d){super(d),this._handles=new so.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,wr.YP)(()=>this.view,this._updateRotationWatcher,wr.nn))}destroy(){this._handles=(0,at.hw)(this._handles),this.view=null}get canShowNorth(){const d=this.get("view.spatialReference");return!(!d||!d.isWebMercator&&!d.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const d={};"2d"===this.view.type?d.rotation=0:d.heading=0,this.callGoTo({target:d})}_updateForRotation(d){null!=d&&(this.orientation={z:d})}_updateForCamera(d){d&&(this.orientation={x:0,y:0,z:-d.heading})}_updateRotationWatcher(d){this._handles.removeAll(),d&&this._handles.add("2d"===d.type?(0,wr.YP)(()=>d?.rotation,this._updateForRotation,wr.nn):(0,wr.YP)(()=>d?.camera,this._updateForCamera,wr.nn))}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],F0.prototype,"canShowNorth",null),(0,Je._)([(0,ht.Cb)()],F0.prototype,"orientation",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],F0.prototype,"state",null),(0,Je._)([(0,ht.Cb)()],F0.prototype,"view",void 0),F0=(0,Je._)([(0,Ds.j)("esri.widgets.CompassViewModel")],F0);const vA=F0;let Oh=class extends Op.Z{constructor(d,v){super(d,v),this.goToOverride=null,this.iconClass="esri-icon-locate-circled",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new vA}reset(){return this.viewModel.reset()}render(){const{orientation:d,state:v}=this.viewModel,O="disabled"===v,A="compass"==("rotation"===v?"rotation":"compass"),j=O?-1:0,te={"esri-disabled":O,"esri-interactive":!O},pe={"esri-icon-compass":A,"esri-icon-dial":!A},{messages:be}=this;return(0,vs.u)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",te),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:j,"aria-label":be.reset,title:be.reset},(0,vs.u)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",pe),styles:this._toRotationTransform(d)}),(0,vs.u)("span",{class:"esri-icon-font-fallback-text"},be.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(d){return{transform:`rotateZ(${d.z}deg)`}}};(0,Je._)([(0,Rl.B)("viewModel.goToOverride")],Oh.prototype,"goToOverride",void 0),(0,Je._)([(0,ht.Cb)()],Oh.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Oh.prototype,"label",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Compass/t9n/Compass")],Oh.prototype,"messages",void 0),(0,Je._)([(0,Rl.B)("viewModel.view")],Oh.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:vA})],Oh.prototype,"viewModel",void 0),(0,Je._)([(0,gy.h)()],Oh.prototype,"_reset",null),Oh=(0,Je._)([(0,Ds.j)("esri.widgets.Compass")],Oh);const UN=Oh;let lm=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,wr.gx)(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],lm.prototype,"state",null),(0,Je._)([(0,ht.Cb)()],lm.prototype,"navigationMode",void 0),(0,Je._)([(0,ht.Cb)()],lm.prototype,"view",void 0),lm=(0,Je._)([(0,Ds.j)("esri.widgets.NavigationToggleViewModel")],lm);const EA=lm,bd_button="esri-navigation-toggle__button esri-widget--button";let Ph=class extends Op.Z{constructor(d,v){super(d,v),this.iconClass="esri-icon-pan2",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new EA}set layout(d){"horizontal"!==d&&(d="vertical"),this._set("layout",d)}toggle(){return this.viewModel.toggle()}render(){const d="disabled"===this.get("viewModel.state"),v="pan"===this.get("viewModel.navigationMode"),A={"esri-navigation-toggle__button--active":v},j={"esri-navigation-toggle__button--active":!v},te=d?-1:0,pe=this.messages.toggle;return(0,vs.u)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{"esri-disabled":d,"esri-navigation-toggle--horizontal":"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:te,"aria-label":pe,title:pe},(0,vs.u)("div",{class:this.classes(bd_button,"esri-navigation-toggle__button--pan",A)},(0,vs.u)("span",{class:"esri-icon-pan"})),(0,vs.u)("div",{class:this.classes(bd_button,"esri-navigation-toggle__button--rotate",j)},(0,vs.u)("span",{class:"esri-icon-rotate"})))}_toggle(){this.toggle()}};(0,Je._)([(0,ht.Cb)()],Ph.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ph.prototype,"label",void 0),(0,Je._)([(0,ht.Cb)({value:"vertical"})],Ph.prototype,"layout",null),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ph.prototype,"messages",void 0),(0,Je._)([(0,Rl.B)("viewModel.view")],Ph.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:EA})],Ph.prototype,"viewModel",void 0),(0,Je._)([(0,gy.h)()],Ph.prototype,"_toggle",null),Ph=(0,Je._)([(0,Ds.j)("esri.widgets.NavigationToggle")],Ph);const BN=Ph;let Ap=class extends Op.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const d=this.enabled?0:-1,O={[this.iconClass]:!!this.iconClass};return(0,vs.u)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{"esri-disabled":!this.enabled,"esri-interactive":this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:d,title:this.title},(0,vs.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",O)}),(0,vs.u)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,Je._)([(0,ht.Cb)()],Ap.prototype,"action",void 0),(0,Je._)([(0,ht.Cb)()],Ap.prototype,"enabled",void 0),(0,Je._)([(0,ht.Cb)()],Ap.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)()],Ap.prototype,"title",void 0),(0,Je._)([(0,gy.h)()],Ap.prototype,"_triggerAction",null),Ap=(0,Je._)([(0,Ds.j)("esri.widgets.IconButton")],Ap);const MA=Ap;let cm=class extends Li.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),v=this.get("view.constraints.effectiveMaxScale");return 0===v||d>v}get canZoomOut(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),v=this.get("view.constraints.effectiveMinScale");return 0===v||d<v}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],cm.prototype,"canZoomIn",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],cm.prototype,"canZoomOut",null),(0,Je._)([(0,ht.Cb)()],cm.prototype,"view",void 0),cm=(0,Je._)([(0,Ds.j)("esri.widgets.Zoom.ZoomConditions2D")],cm);const jN=cm;let um=class extends Li.Z{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,Je._)([(0,ht.Cb)({readOnly:!0})],um.prototype,"canZoomIn",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],um.prototype,"canZoomOut",null),(0,Je._)([(0,ht.Cb)()],um.prototype,"view",void 0),um=(0,Je._)([(0,Ds.j)("esri.widgets.Zoom.ZoomConditions3D")],um);const FN=um;let Lp=class extends Li.Z{constructor(d){super(d),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(d){d?"2d"===d.type?this._zoomConditions=new jN({view:d}):"3d"===d.type&&(this._zoomConditions=new FN({view:d})):this._zoomConditions=null,this._set("view",d)}zoomIn(){if(!this.canZoomIn)return;const d=this.view;"2d"===d.type?d.mapViewNavigation.zoomIn():(0,fi.R8)(d.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const d=this.view;"2d"===d.type?d.mapViewNavigation.zoomOut():(0,fi.R8)(d.goTo({zoomFactor:.5}))}};(0,Je._)([(0,ht.Cb)()],Lp.prototype,"_zoomConditions",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Lp.prototype,"canZoomIn",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Lp.prototype,"canZoomOut",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Lp.prototype,"state",null),(0,Je._)([(0,ht.Cb)()],Lp.prototype,"view",null),Lp=(0,Je._)([(0,Ds.j)("esri.widgets.Zoom.ZoomViewModel")],Lp);const bA=Lp;let v_=class extends Op.Z{constructor(d,v){super(d,v),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new bA}initialize(){this._zoomInButton=new MA({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new MA({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(d){"horizontal"!==d&&(d="vertical"),this._set("layout",d)}render(){const d=this.viewModel,v={"esri-zoom--horizontal":"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===d.state&&d.canZoomIn,this._zoomOutButton.enabled="ready"===d.state&&d.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,vs.u)("div",{class:this.classes("esri-zoom esri-widget",v)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,Je._)([(0,ht.Cb)()],v_.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],v_.prototype,"label",void 0),(0,Je._)([(0,ht.Cb)({value:"vertical"})],v_.prototype,"layout",null),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Zoom/t9n/Zoom")],v_.prototype,"messages",void 0),(0,Je._)([(0,Rl.B)("viewModel.view")],v_.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)({type:bA})],v_.prototype,"viewModel",void 0),v_=(0,Je._)([(0,Ds.j)("esri.widgets.Zoom")],v_);const NN=v_,TA="esri.views.ui.DefaultUI";vo.Z.getLogger(TA);let ME=class extends SN{constructor(d){super(d),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([(0,wr.YP)(()=>this.components,this._componentsWatcher.bind(this),wr.nn),(0,wr.YP)(()=>this.view,this._updateViewAwareWidgets.bind(this),wr.nn)])}_add(d,v,O,A){if("string"==typeof d&&this._defaultPositionLookup[d]){if(this._find(d))return;d=this._createComponent(d)}super._add(d,v,O,A)}_removeComponents(d){d.forEach(v=>{const O=this._find(v);O&&(this.remove(O),O.destroy())})}_updateViewAwareWidgets(d){this.components.forEach(v=>{const O=this._find(v),A=O&&O.widget;(function WN(d){return d&&void 0!==d.view})(A)&&(A.view=d)})}_componentsWatcher(d,v){this._removeComponents(v),this._addComponents(d),this._adjustPadding(d)}_adjustPadding(d){if(!d.includes("attribution")&&!this._isOverridden("padding")){const{top:v}=this.padding;this.padding=v}}_addComponents(d){this.initialized&&d.forEach(v=>this.add(this._createComponent(v),this._defaultPositionLookup[v]))}_createComponent(d){const v=this._createWidget(d);if(v)return new vE({id:d,node:v})}_createWidget(d){return"attribution"===d?this._createAttribution():"compass"===d?this._createCompass():"navigation-toggle"===d?this._createNavigationToggle():"zoom"===d?this._createZoom():void 0}_createAttribution(){return new wN({view:this.view})}_createCompass(){return new UN({view:this.view})}_createNavigationToggle(){return new BN({view:this.view})}_createZoom(){return new NN({view:this.view})}};(0,Je._)([(0,ht.Cb)()],ME.prototype,"components",void 0),ME=(0,Je._)([(0,Ds.j)(TA)],ME);const VN=ME;let bE=class extends VN{constructor(d){super(d),this.components=["attribution","zoom","navigation-toggle","compass"]}};(0,Je._)([(0,ht.Cb)()],bE.prototype,"components",void 0),bE=(0,Je._)([(0,Ds.j)("esri.views.ui.3d.DefaultUI3D")],bE);const CA=bE,Ju=vo.Z.getLogger("esri.views.SceneView");let Ui=class extends(Kw((0,Yw.f)(Xw(_R)))){constructor(d){var v;super(d),v=this,this._userClippingArea=null,this._clippingArea=null,this._initialDefaultSpatialReference=null,this._defaults={},this._externallySet={environment:!1},this._createGraphicsViewController=null,this._resolveWhenReady=[],this.propertiesPool=new op.L({slicePlane:jd.B},this),this._resourceController=function J6(d){return new MT.ResourceController({view:d})}(this),this._defaultToMapOptions={include:new Set},this._defaultHitTestOptions={exclude:new Set},this.deconflictor=new Yb({view:this}),this.labeler=new T0({view:this,deconflictor:this.deconflictor.labels}),this.sharedSymbolResources=null,this.analyses=new q0,this.basemapTerrain=null,this.elevationProvider=null,this.camera=null,this.canvas=null,this.center=null,this.constraints=new i0,this.environmentManager=new Nd,this.extent=null,this.floors=new Na.Z,this.fullOpacity=1,this.graphicsView=null,this.analysisViewManager=new mR({view:this}),this.groundView=null,this.navigating=!1,this.map=null,this.screenSizePerspectiveEnabled=!0,this.state=new n6,this.scale=null,this.spatialReference=null,this.alphaCompositingEnabled=!1,this.preserveDrawingBufferEnabled=!1,this.supersampleScreenshotsEnabled=!0,this.type="3d",this.ui=new CA,this._numUpdating=0,this._lastUpdateTime=0,this.updatingProgress=.5,this.viewpoint=null,this.zoom=null,this.highlightOptions=new yT,this.voxelWasm=null,this.voxelWasmPromise=null,(0,zw.j2)(),d&&d.environment||(this._defaults.environment=new uf,this.environment=this._defaults.environment);const O=(A=null)=>{(0,at.pC)(A)&&A.type===KO.y.MOVE||(this._updatingChanged(),this.map&&this.map.allLayers.forEach(function(){var j=(0,oi.Z)(function*(te){try{yield te.when()}catch{}v._updatingChanged()});return function(te){return j.apply(this,arguments)}}()))};this.handles.add([(0,wr.on)(()=>this.map?.allLayers,"after-changes",A=>O(A),{onListenerAdd:()=>O(),onListenerRemove:()=>O(),sync:!0}),this.allLayerViews.on("after-changes",A=>this._updateUpdatingMonitors(A)),(0,wr.YP)(()=>this.map,A=>{A&&"load"in A&&A.load&&A.load().catch(()=>{})})]),this.inputManager=new $4({view:this}),this.stateManager=new w6({view:this})}initialize(){this.groundView=new Jw({view:this}),this._updateUpdatingMonitors();const d=()=>this._updateDefaultToMapOptions();this.handles.add((0,wr.on)(()=>this.map?.allLayers,"after-changes",d,{onListenerAdd:d,onListenerRemove:d})),this.updatingHandles.add(()=>this.qualitySettings.memoryLimit,v=>{this.resourceController&&(this.resourceController.memoryController.maxMemory=v)},wr.nn),this.updatingHandles.add(()=>this.qualitySettings.additionalCacheMemory,v=>{this.resourceController&&(this.resourceController.memoryController.additionalCacheMemory=v)},wr.nn),this.updatingHandles.add(()=>this.qualitySettings.frameRate,v=>(0,w_.bP)(v>0?1e3/Math.ceil(v):0),wr.nn),this.updatingHandles.add(()=>this.map?.ground,d,wr.tX),this.updatingHandles.add(()=>this.map?.ground?.opacity,()=>this._updateDefaultHitTestOptions(),wr.tX),this.handles.add((0,wr.YP)(()=>this.spatialReference,()=>this.notifyChange("clippingArea"),wr.Z_))}destroy(){this.destroyed||(this.invalidate(),this.activeTool=null,this.layerViewManager.clear(),this._exitSurface(),this._disposeGraphicsView(),this.sharedSymbolResources=(0,at.SC)(this.sharedSymbolResources),this.labeler.destroy(),this._set("labeler",null),this.deconflictor.destroy(),this._set("deconflictor",null),this._resourceController=(0,at.SC)(this._resourceController),this.stateManager.destroy(),this._set("stateManager",null),this.inputManager.destroy(),this._set("inputManager",null),this.propertiesPool.destroy(),this.handles.remove("updatingMonitors"),this.environmentManager.destroy(),this._set("environmentManager",null),this.groundView=(0,at.SC)(this.groundView))}get renderSpatialReference(){return this.renderCoordsHelper&&this.renderCoordsHelper.spatialReference}get basemapSpatialReference(){return this.basemapTerrain?.spatialReference}installContentCameraReset(d={sticky:!1}){return this.stateManager.installContentCameraReset(d)}get clippingArea(){if("global"===this.viewingMode)return null;let d=this._userClippingArea||this.get("map.clippingArea");return!this._userClippingArea&&!this.get("map.clippingEnabled")||(0,at.Wi)(d)?(this._clippingArea=null,null):d instanceof jc.Z?this.spatialReference&&(d=TE(d,this.spatialReference),(0,at.Wi)(d))?(Ju.error("#clippingArea","setting clippingArea with incompatible SpatialReference"),this._clippingArea):(d=d.clone(),(0,at.Wi)(d.intersection(this.groundAndLayersExtent))&&(d.xmin=d.xmax,d.ymin=d.ymax),d.zmin=void 0,d.zmax=void 0,d.equals(this._clippingArea)||(this._clippingArea=d),this._clippingArea):(Ju.error("#clippingArea","only clippingArea geometries of type Extent are supported"),this._clippingArea)}set clippingArea(d){this.ready&&"global"===this.viewingMode&&(0,at.pC)(d)?Ju.error("#clippingArea=","Clipping area is only supported in local viewingMode"):this._userClippingArea=d}get renderDataExtent(){if(this.state.viewingMode===dn.JY.Global)return null;const d=this.renderSpatialReference,v=this.dataExtent;return(0,at.Wi)(v)||(0,at.Wi)(d)||v.spatialReference.equals(d)?v:TE(v,d)}get dataExtent(){let d=this.groundAndLayersExtent;const O=TE(this.clippingArea,this.spatialReference||ba.Z.WGS84);(0,at.pC)(O)&&(d=(0,at.pC)(d)?d.intersection(O):O);const A=this._get("dataExtent");return(0,at.pC)(d)&&d.equals(A)?A:d}get groundAndLayersExtent(){const d=this.spatialReference||ba.Z.WGS84;let v;const O=te=>{const pe=TE(te,d);(0,at.Wi)(pe)||((0,at.pC)(v)?v.union(pe):v=pe.clone())},A=this.basemapTerrain;if(A?.spatialReference){const te=A.groundExtent;O(new jc.Z({xmin:te[0],ymin:te[1],zmin:0,xmax:te[2],ymax:te[3],zmax:0,spatialReference:A.spatialReference}))}if(this.map){const te=pe=>{!(0,at.pC)(pe.fullExtent)||"graphics"===pe.type&&pe.internal||O(pe.fullExtent)};this.map.allLayers.forEach(pe=>te(pe))}if((0,at.Wi)(v))return null;v.hasZ?(v.zmin=Math.min(0,v.zmin),v.zmax=Math.max(0,v.zmax)):(v.zmin=0,v.zmax=0);const j=this._get("groundAndLayersExtent");return v.equals(j)?j:v}set environment(d){d!==this._defaults.environment&&(this._externallySet.environment=!0),this._set("environment",d)}castEnvironment(d){return d?d instanceof uf?d:d instanceof mP?null!=this.environment?this.environment.cloneWithWebsceneEnvironment(d):uf.fromWebsceneEnvironment(d):(0,ou.se)(uf,d):new uf}get initialExtentRequired(){return this.stateManager&&!this.stateManager.hasInitialView}get _defaultsFromMapSettings(){return{required:{tileInfo:!1,heightModelInfo:!0,extent:!1}}}get interacting(){return this.navigating||(0,at.pC)(this.activeTool)}get stationary(){return!this.animation&&!this.resizing&&((0,at.Wi)(this.state)||this.state.stationary)}set qualityProfile(d){b1.isValidProfile(d)&&(b1.apply(d,this.qualitySettings),this._set("qualityProfile",d))}get qualityProfile(){return this._get("qualityProfile")||b1.getDefaultProfile()}set slicePlane(d){if((0,at.pC)(this._stage)&&this._stage.renderView.setRenderParameters({slicePlane:d}),(0,at.Wi)(d))return void this._set("slicePlane",null);const v=this.propertiesPool.get("slicePlane");(0,jd.a)(d,v),this._set("slicePlane",v)}get typeSpecificPreconditionsReady(){return!!this.viewingMode}get resolution(){return null!=this.spatialReference?(0,ZO.dp)(this.scale,this.spatialReference):0}get heightModelInfo(){const d=this.getDefaultHeightModelInfo();return null!=d?YO.Z.deriveUnitFromSR(d,this.spatialReference):null}get updating(){if(this.destroyed)return!1;let d=0,v=this.layerViewManager.updating,O=v?this.layerViewManager.updatingRemaining:0;this.allLayerViews.forEach(A=>{if(A.isFulfilled()){if(A.updating){if(v=!0,A.suspended||(0,ti.wP)(A))return;++O,d+=A.updatingProgress}}else++O});for(const A of[this.graphicsView,this.basemapView,this._resourceController,this._stage,this.featureTiles,this.pointsOfInterest,this.environmentManager,this.overlay,this.featureTreeDebugger,this.toolViewManager,this.analysisViewManager])(0,at.pC)(A)&&A.updating&&(O+=.1,d+=.05);for(const A of[this.deconflictor,this.labeler,this.basemapTerrain])(0,at.pC)(A)&&A.updating&&(++O,d+=A.updatingProgress);if(v=!!(v||O>0||this.updatingHandles.updating||!this.ready||!this.stationary||this._createGraphicsViewController||this.inputManager?.hasPendingInputs||this.map?.allLayers?.some(A=>!A.isFulfilled())),v?(this._numUpdating=Math.max(O,this._numUpdating),d+=this._numUpdating-O):this._numUpdating=0,this._numUpdating>0?d/=this._numUpdating:d=v?0:1,this._get("updatingProgress")!==d){const A=performance.now();if(d<1){const j=Math.min((A-this._lastUpdateTime)/2e3,1);d=this.updatingProgress*(1-j)+d*j}this._set("updatingProgress",d),this._lastUpdateTime=v&&d<1?A:0}return v}get viewingMode(){const d=this._predeterminedViewingMode;if((0,at.pC)(d))return(0,dn.M7)(d);const v=this.spatialReference;return v?(0,at.pC)(this.defaultsFromMap?.viewingMode)&&v.equals(this.defaultsFromMap.spatialReference)?(0,dn.M7)(this.defaultsFromMap.viewingMode):(0,Db.D)(v,dn.JY.Global)?"global":"local":"global"}set viewingMode(d){this.ready?Ju.error("#viewingMode","viewingMode cannot be set once view is ready"):d?this._override("viewingMode",d):void 0===d&&this._clearOverride("viewingMode")}get resourceController(){return this._resourceController}get performanceInfo(){return new eB(this)}forceAnimationTime(d){this._stage.renderView.forcedAnimationTime=this.basemapTerrain.overlayManager.forcedAnimationTime=d}on(d,v,O,A){return this.viewEvents.on(d,v,O,A)||super.on(d,v)}hasEventListener(d){return super.hasEventListener(d)||this.viewEvents.hasHandler(d)}toMap(d,v){if(!this.ready)return Ju.error("#toMap()","Scene view cannot be used before it is ready"),null;const O=v?this.externalToInternalIntersectOptions(v):this._defaultToMapOptions,A=(0,at.pC)(O.graphics)&&((0,at.pC)(O.graphics.include)||(0,at.pC)(O.graphics.exclude)),j=(0,uu.Rw)(d)?(0,uu.s6)(this,d):d,te=(0,rn.md)(j);O.enableDraped=O.include&&!O.include.has(Vu.cy)||O.exclude&&O.exclude.has(Vu.cy);const pe=this.sceneIntersectionHelper,be=(0,oc.Z8)(this.state.viewingMode);if(be.options.selectionMode=!0,be.options.store=A?Ol.eC.ALL:Ol.eC.MIN,pe.intersectIntersectorScreen(te,be,O),A){for(const Re of be.results.all){const Ge=(0,yE.bK)(Re,this);if((0,at.Wi)(Ge))return this._intersectResultToMapPoint(Re);if("graphic"!==Ge.type||this._testGraphicUidFilter(O.graphics,Ge.graphic))return this._intersectResultToMapPoint(Re)}return null}return this._intersectResultToMapPoint(be.results.min)}toScreen(d){if(!this.ready)return Ju.error("#toScreen()","Scene view cannot be used before it is ready"),null;const v=(0,at.Pt)(null==d.z&&(0,Cf.KO)(this.elevationProvider,d),0);return(0,tn.KC)(d,dm,this.renderSpatialReference,v),this.state.camera.projectToScreen(dm,AC),(0,rn.vW)(AC[0],AC[1])}pixelSizeAt(d){return this.ready?d?((0,tn.KC)(d,dm,this.renderSpatialReference),this.state.camera.computeScreenPixelSizeAt(dm)):0:(Ju.error("#pixelSizeAt()","Scene view cannot be used before it is ready"),null)}overlayPixelSizeInMapUnits(d){const v=this.basemapTerrain.overlayManager;return v?v.overlayPixelSizeInMapUnits(d):1}hitTest(d,v){if(!this.ready)return Ju.error("#hitTest()","Scene view cannot be used before it is ready"),null;const O=(0,uu.Rw)(d)?(0,uu.s6)(this,d):d,A=(0,rn.s1)(O.x,O.y),j=v?this.externalToInternalIntersectOptions(v):this._defaultHitTestOptions;j.requiresGroundFeedback=!0,j.enableDraped=!0;const te=(0,oc.Z8)(this.state.viewingMode);te.options.selectionMode=!0,te.options.store=Ol.eC.ALL,this.sceneIntersectionHelper.intersectIntersectorScreen(A,te,j);const pe=this._intersectResultsToHits(te.results.all,j.graphics),be=te.results.ground,Re=(0,yE.J4)(be,this),Ge=(0,at.pC)(Re)&&"type"in Re&&"integrated-mesh"===Re.type?Re:null,tt={screenPoint:O,results:pe,ground:{mapPoint:this._intersectResultToMapPoint(be),distance:(0,g1.nn)(be)?be.distanceInRenderSpace:0,layer:Ge}};return Nl.Z.SCENEVIEW_HITTEST_RETURN_INTERSECTOR&&(tt.intersector=te),Promise.resolve(tt)}popupHitTest(d){var v=this;return(0,oi.Z)(function*(){const{results:O,ground:A}=yield function EN(d,v){return PC.apply(this,arguments)}(v,d);let j=null;return!(0===O.length||Math.abs((0,at.Pt)(O[0].distance,0)-A.distance)<1e-5)||A.layer&&"integrated-mesh"===A.layer.type||(j=A.mapPoint),{results:O,screenPoint:d,mapPoint:j}})()}goTo(d,v){return this.updatingHandles.addPromise(this.stateManager.goTo(d,v))}whenAnalysisView(d){var v=this;return(0,oi.Z)(function*(){if((0,at.Wi)(d.parent))throw new So.Z("view:no-analysisview-for-analysis","The analysis has not been added to view.analyses",{analysis:d});return"line-of-sight"===d.parent.type?(yield v.whenLayerView(d.parent)).whenAnalysisView():v.analysisViewManager.whenAnalysisView(d)})()}whenLayerView(d){return super.whenLayerView(d)}takeScreenshot(d){var v=this;return(0,oi.Z)(function*(){const O=v._completeSettings(d);yield v.whenReady();const A=yield v._stage.renderView.takeScreenshot(O);return(0,Tp.cv)(A,O,v._pixelFormat())})()}_takeScreenshot(d){var v=this;return(0,oi.Z)(function*(){const O=v._completeSettings(d);yield v.whenReady();const A=yield v._stage.renderView.takeScreenshot(O);return(0,Tp.v8)(A,v._pixelFormat())})()}_completeSettings(d){const v=(0,Tp.uz)(d,this);return v.pixelRatio/=this.state.pixelRatio,(0,Tp.$3)(v,this.supersampleScreenshotsEnabled,this.padding)}_pixelFormat(){return{flipY:!0,premultipliedAlpha:this._stage.renderView.getAlpha()}}get test(){return{takeScreenshot:d=>this._takeScreenshot(d)}}addUpdatingPromise(d){return this.updatingHandles.addPromise(d)}importLayerView(d){return(d=>{const v=aP[d.type];if((0,at.Wi)(v))throw function pR(d){const v=d.declaredClass?d.declaredClass.slice(d.declaredClass.lastIndexOf(".")+1):"Unknown",O=v.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new So.Z(`${O}:view-not-supported`,`${v} is not supported in 3D`)}(d);return v(d)})(d)}hasLayerViewModule(d){return(d=>(0,at.pC)(aP[d.type]))(d)}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||this.defaultsFromMap?.ready&&this._initialDefaultSpatialReference||null}validate(){var d=this;return(0,oi.Z)(function*(){let v=function CN(d){const v=(0,TN.hc)(d);if(!v.available)return new So.Z("webgl:required","WebGL is required but not supported.");if("3d"===d&&v.majorPerformanceCaveat)return new So.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!v.supportsHighPrecisionFragment)return new So.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!v.supportsVertexShaderSamplers)return new So.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(v.type===U0.zO.WEBGL1){if(!v.supportsElementIndexUint)return new So.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!v.supportsStandardDerivatives)return new So.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!v.supportsInstancedArrays)return new So.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}(d.type);if((0,al.Z)("safari")&&(0,al.Z)("safari")<9&&(v=new So.Z("sceneview:browser-not-supported","This browser is not supported by SceneView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,al.Z)("safari")})),(0,at.pC)(v))throw Ju.warn("#validate()",v.message),v})()}get _predeterminedViewingMode(){const d=this._isOverridden("viewingMode")?this._get("viewingMode"):(this.map&&"initialViewProperties"in this.map?this.map.initialViewProperties?.viewingMode:null)??null;return(0,at.pC)(d)?(0,dn.wg)(d):null}getSpatialReferenceSupport({spatialReference:d,layer:v}){const O=this._predeterminedViewingMode;if((0,at.pC)(O))return this._validateSpatialReferenceForViewingMode(d,v,O)?{constraints:this._makeSpatialReferenceConstraints(d,v,O)}:null;const A=this._validateSpatialReferenceForViewingMode(d,v,dn.JY.Local),j=this._validateSpatialReferenceForViewingMode(d,v,dn.JY.Global);return A||j?A&&j?{constraints:this._makeSpatialReferenceConstraints(d,v,null)}:A?{constraints:this._makeSpatialReferenceConstraints(d,v,dn.JY.Local)}:{constraints:this._makeSpatialReferenceConstraints(d,v,dn.JY.Global)}:null}_validateSpatialReferenceForViewingMode(d,v,O){return!(!(0,Db.D)(d,O)||!(0,at.Wi)(v)&&!(0,lu.Am)(v)&&((0,lu.iC)(v)&&(0,at.Wi)((0,ti.E_)(v,d,O))||(0,lu.Tv)(v)&&O===dn.JY.Global))}_makeSpatialReferenceConstraints(d,v,O){if((0,at.Wi)(v))return[{spatialReference:d,viewingMode:O}];const A=d.isWebMercator,j=d.isWGS84;return(0,lu.Am)(v)&&(A||j)?j&&O!==dn.JY.Local&&null!==(0,ti.er)(v.tileInfo,v.fullExtent,d,dn.JY.Global)?[{spatialReference:A?ba.Z.WGS84:ba.Z.WebMercator,viewingMode:O}]:[{spatialReference:d,viewingMode:O},{spatialReference:ba.Z.WebMercator,viewingMode:O}]:(0,lu.iC)(v)||(0,lu.Tv)(v)||!A&&!j?(0,lu.iC)(v)&&A&&O!==dn.JY.Global?[{spatialReference:d,viewingMode:O},{spatialReference:ba.Z.WGS84,viewingMode:dn.JY.Local}]:[{spatialReference:d,viewingMode:O}]:[{spatialReference:d,viewingMode:O},{spatialReference:A?ba.Z.WGS84:ba.Z.WebMercator,viewingMode:O}]}_validateSpatialReference(d){const v=(0,at.pC)(this.getSpatialReferenceSupport({spatialReference:d})),O=this._predeterminedViewingMode;return v||((0,at.pC)(O)?Ju.warnOnce(`Spatial reference defined on view not supported in ${(0,dn.M7)(O)} viewing mode.`):d.isGeographic&&Ju.warnOnce("Spatial reference is geographic but not supported.")),v}whenReady(){return new Promise(d=>{this.ready?d(this):this._resolveWhenReady.push(d)})}computeMapPointFromVec3d(d,v){let O=this.spatialReference||ba.Z.WGS84;return(0,tn.SH)(d,this.renderSpatialReference,d,O)||(O=ba.Z.WGS84,(0,tn.SH)(d,this.renderSpatialReference,d,O)),v?(v.x=d[0],v.y=d[1],v.z=d[2],v.spatialReference=O):v=new Eo.Z(d,O),v}trackGraphicState(d){if(!d.graphic)return Ju.error("trackGraphicState","GraphicState.graphic must not be null or undefined to start tracking"),null;const v=this.getViewForGraphic(d.graphic);let O=null,A=!1;const j=te=>{!A&&(0,at.pC)(te)&&"processor"in te&&"graphics-3d"===te.processor?.type&&te.processor.graphicsCore&&(O=te.processor.graphicsCore.trackGraphicState(d))};return(0,at.pC)(v)?j(v):this.whenViewForGraphic(d.graphic,{waitForLayer:!0}).then(te=>j(te),()=>{}).catch(()=>{}),{remove:()=>{A=!0,(0,at.pC)(O)&&(O.remove(),O=null)}}}highlight(d){if(Array.isArray(d))return(0,L_.AL)(d.map(O=>this.highlight(O)));if(Na.Z.isCollection(d))return(0,L_.AL)(d.toArray().map(O=>this.highlight(O)));const v=this.getViewForGraphic(d);return v&&"highlight"in v?v.highlight(d):(0,L_.kB)()}maskOccludee(d){if(!d)return Ju.error("maskOccludee","GraphicState.graphic must not be null or undefined to mask an occludee"),null;const v=this.getViewForGraphic(d);let O=null,A=!1;const j=te=>{!A&&(0,at.pC)(te)&&(0,bN._1)(te)&&(O=te.maskOccludee(d))};return(0,at.pC)(v)?j(v):this.whenViewForGraphic(d,{waitForLayer:!0}).then(te=>j(te),()=>{}).catch(()=>{}),{remove:()=>{A=!0,(0,at.pC)(O)&&(O.remove(),O=null)}}}getViewForGraphic(d){return d.layer===this.graphics?this.graphicsView:d.layer?this.allLayerViews.find(v=>v.layer===d.layer):null}graphicChanged(d){(0,at.pC)(this.graphicsView)&&this.graphicsView.graphicChanged(d)}whenViewForGraphic(d,v){var O=this;return(0,oi.Z)(function*(){if(d.layer===O)return yield(0,wr.N1)(()=>O.graphicsView),O.graphicsView;if(!d.layer||!O.map)throw new So.Z("no-view-for-graphic");return v&&v.waitForLayer&&!O.map.allLayers.includes(d.layer)?new Promise((A,j)=>{const te=O.map.allLayers.on("change",pe=>{pe.added.includes(d.layer)&&(te.remove(),O.whenLayerView(d.layer).then(A,j))})}):O.whenLayerView(d.layer)})()}externalToInternalIntersectOptions(d){const v=this._externalToInternalRenderItems(d.include,My.INCLUDE),O=this._externalToInternalRenderItems(d.exclude,My.EXCLUDE);return{include:v.layerUids,exclude:O.layerUids,graphics:{include:v.graphicUids,exclude:O.graphicUids}}}_intersectResultToMapPoint(d,v){return d.getIntersectionPoint(dm)?(v=this.computeMapPointFromVec3d(dm,v),d.intersector===Ol.q7.TERRAIN&&this.basemapTerrain&&(v.z=(0,at.Pt)((0,Cf.KO)(this.basemapTerrain,v),0)),v):null}_intersectResultsToHits(d,v){const O=new Array;let A=null;for(let j=0;j<d.length;j++){const te=d[j],pe=(0,yE.J4)(te,this);if((0,at.pC)(pe)&&(pe===this.map.ground||"type"in pe&&"integrated-mesh"===pe.type))break;const be=(0,yE.bK)(te,this);if((0,at.Wi)(be))continue;if("graphic"===be.type){if((0,at.Wi)(A)&&j!==d.length-1&&(A=new Set),(0,at.pC)(A)){const tt=this._getGraphicFilterUid(be.graphic);if(A.has(tt))continue;A.add(tt)}if(!this._testGraphicUidFilter(v,be.graphic))continue}const Re=this._intersectResultToMapPoint(te),Ge=te.distanceInRenderSpace;O.push({...be,mapPoint:Re,distance:Ge})}return O}_getGraphicFilterUid(d){if(d.layer&&"objectIdField"in d.layer){const v=d.attributes[d.layer.objectIdField];if(v)return`o-${d.layer.id}-${v}`}return`u-${d.uid}`}_testGraphicUidFilter(d,v){const O=this._getGraphicFilterUid(v);return(0,at.Wi)(d)||((0,at.Wi)(d.include)||d.include.has(O))&&((0,at.Wi)(d.exclude)||!d.exclude.has(O))}_externalToInternalRenderItems(d,v,O={layerUids:null,graphicUids:null}){if(!d)return O;if(d instanceof aM.Z)(function zN(d,v){d.graphicUids||(d.graphicUids=new Set),d.graphicUids.add(v)})(O,this._getGraphicFilterUid(d)),v===My.INCLUDE&&((0,at.pC)(this.graphicsView)&&d.layer===this?Ey(O,this.graphicsView.processor.layer.id):d.layer&&Ey(O,d.layer.uid));else if((0,Vw.TW)(d))for(const A of d)A===this.graphics&&(0,at.pC)(this.graphicsView)?Ey(O,this.graphicsView.processor.layer.id):A===this.map.ground?Ey(O,Vu.cy):this._externalToInternalRenderItems(A,v,O);else"uid"in d&&Ey(O,d.uid);return O}_initBasemapTerrain(){this._set("basemapTerrain",new y9({view:this})),this._set("elevationProvider",new Vg({view:this})),this.elevationProvider.register("ground",this.basemapTerrain)}_exitBasemapTerrain(){this.basemapTerrain&&(this.elevationProvider.unregister(this.basemapTerrain),this.elevationProvider.destroy(),this._set("elevationProvider",null),this.basemapTerrain.destroy(),this._set("basemapTerrain",null))}_initGlobe(){this._initCoordinateSystem(),this.state.createInitialCamera(),this._initBasemapTerrain(),this._set("pointsOfInterest",new lc({view:this})),this._set("featureTiles",new Tl({renderCoordsHelper:this.renderCoordsHelper,cameraOnSurface:this.pointsOfInterest.contentCameraOnSurface,focus:this.pointsOfInterest.focus,tilingSchemeOwner:this.basemapTerrain,viewState:this.state,scheduler:this._resourceController.scheduler,terrain:this.basemapTerrain}));const d=()=>{const v=this.basemapTerrain?.extent;if(this.clippingArea||v)if(v&&this.basemapTerrain.spatialReference){const O=(0,at.pC)(this.basemapTerrain.extent)?(0,tn.iV)((0,ui.HH)(this.basemapTerrain.extent,this.basemapTerrain.spatialReference),this.spatialReference):null;this.featureTiles.filterExtent=(0,at.pC)(this.clippingArea)?this.clippingArea.intersection(O):O}else this.featureTiles.filterExtent=this.clippingArea;else this.featureTiles.filterExtent=null};this.handles.add([this.updatingHandles.add(()=>Nl.Z.FEATURE_TILE_TREE_SHOW_TILES,v=>{v&&this.featureTiles&&!this.featureTreeDebugger?this.updatingHandles.addPromise(Promise.all([T.e(8592),T.e(5566)]).then(T.bind(T,15566))).then(({FeatureTileTree3DDebugger:O})=>{!this.featureTreeDebugger&&Nl.Z.FEATURE_TILE_TREE_SHOW_TILES&&(this.featureTreeDebugger=new O({view:this}))}):v||!this.featureTreeDebugger||Nl.Z.FEATURE_TILE_TREE_SHOW_TILES||(this.featureTreeDebugger.destroy(),this.featureTreeDebugger=null)},wr.tX),this.updatingHandles.add(()=>this.clippingArea,d,wr.tX),this.updatingHandles.add(()=>this.basemapTerrain.extent,d,wr.tX)],"feature-tiles"),this.stateManager.init()}_exitGlobe(){this.state&&(this.stateManager.deinit(),this.handles.remove("render-coords-helper"),this.handles.remove("feature-tiles"),this.featureTiles.destroy(),this._set("featureTiles",null),this.pointsOfInterest.destroy(),this._set("pointsOfInterest",null),this._exitBasemapTerrain(),this.state.exit(),this._exitCoordinateSystem())}_initCoordinateSystem(){if(this.spatialReference){const d=this.spatialReference;this.mapCoordsHelper&&this.mapCoordsHelper.spatialReference.equals(d)||this._set("mapCoordsHelper",new G6(this.map,d));const v=this.state.isGlobal,O=(0,Q0.E2)(v,d);O!==this.renderSpatialReference&&(this._set("renderCoordsHelper",K6.Z.create(this.state.viewingMode,O)),v||this.handles.add((0,wr.YP)(()=>this.basemapTerrain?.extent,A=>{A&&(0!==A[0]||0!==A[1]||0!==A[2]||0!==A[3])&&(0,tn.dH)(A,this.basemapTerrain.spatialReference,OA,this.renderCoordsHelper.spatialReference)&&(this.renderCoordsHelper.extent=OA)},wr.Z_),"render-coords-helper"),this.sceneIntersectionHelper&&this.sceneIntersectionHelper.setTolerance(oc.vh/this.renderCoordsHelper.unitInMeters))}else this._set("mapCoordsHelper",null),this._set("renderCoordsHelper",null)}_exitCoordinateSystem(){this.mapCoordsHelper&&(this.handles.remove("render-coords-helper"),this._set("renderCoordsHelper",null),this._set("mapCoordsHelper",null))}_updatingChanged(){this.notifyChange("updating")}_updateUpdatingMonitors(d=null){(0,at.pC)(d)&&d.type===KO.y.MOVE||(this.handles.remove("updatingMonitors"),this.allLayerViews.forEach(v=>{v.destroyed||(this.handles.add((0,wr.YP)(()=>[v.updating,v.updatingProgress],()=>this._updatingChanged(),wr.Z_),"updatingMonitors"),v.when(()=>this._updatingChanged(),()=>this._updatingChanged()))}),this._updatingChanged())}_renderScreenshotOverlay(d,v){if(!this.overlay||!this.overlay.hasVisibleItems)return v;const O=d.getContext("2d");return O.putImageData(v,0,0),this.overlay.renderCanvas(d),O.getImageData(0,0,v.width,v.height)}_initStage(){const d={deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions,alpha:this.alphaCompositingEnabled,preserveDrawingBuffer:this.preserveDrawingBufferEnabled,canvas:this.renderCanvas,screenshot:{renderOverlay:(be,Re)=>this._renderScreenshotOverlay(be,Re)}},v=new j6(this.state.viewingMode,be=>this._stage.layers.forAll(be),this);this._set("sceneIntersectionHelper",v);const O=(0,Fm.L7)(this.surface),{resourceController:A,state:j,renderSpatialReference:te}=this;this._stage=new Zc({options:d,container:O,resourceController:A,state:j,sceneIntersectionHelper:v,renderSR:te}),this._stage.renderView.setRenderParameters({slicePlane:this.slicePlane}),this._lostWebGLContextHandle=(0,Ww.on)(this._stage.renderView.canvas,"webglcontextlost",()=>this.fatalError=new So.Z("webgl-context-lost")),this.handles.add([this.updatingHandles.add(()=>this.qualitySettings.antialiasingEnabled,()=>this._stage.renderView.setRenderParameters({antialiasingEnabled:this.qualitySettings.antialiasingEnabled}),wr.nn),this.updatingHandles.add(()=>this.qualitySettings.highQualityTransparency,()=>this._stage.renderView.setRenderParameters({highQualityTransparency:this.qualitySettings.highQualityTransparency}),wr.nn),(0,wr.YP)(()=>this.magnifier,be=>this._stage.renderView.magnifier=be,wr.tX)],"stage");const pe=()=>{this._stage.renderView.setRenderParameters({defaultHighlightOptions:yT.toEngineOptions(this.highlightOptions)})};this.handles.add(this.updatingHandles.add(()=>[this.highlightOptions.color,this.highlightOptions.haloColor,this.highlightOptions.haloOpacity,this.highlightOptions.fillOpacity,this.highlightOptions.shadowOpacity,this.highlightOptions.shadowColor,this.highlightOptions.shadowDifference],pe),"stage"),pe(),this.renderCoordsHelper&&this.sceneIntersectionHelper.setTolerance(oc.vh/this.renderCoordsHelper.unitInMeters),this._set("canvas",this._stage.renderView.canvas)}_exitStage(){this._set("sceneIntersectionHelper",null),this._stage.destroy(),this._stage=null,this._lostWebGLContextHandle.remove(),this._lostWebGLContextHandle=null,this.handles.remove("stage"),this._set("canvas",null)}_initSurface(d){this._exitSurface(),this.state.init(d,this.spatialReference),this._initStage(),this._initGlobe(),this.sharedSymbolResources=new sB({view:this,viewingMode:d,resourceController:this._resourceController,pointsOfInterest:this.pointsOfInterest,viewState:this.state,objectResourceCache:new G5})}_exitSurface(){this.sharedSymbolResources&&(this.sharedSymbolResources.objectResourceCache.destroy(),this.sharedSymbolResources.destroy(),this.sharedSymbolResources=null,this._exitGlobe(),this._exitStage())}_createGraphicsViewIfNeeded(){if(this.graphicsView||this._createGraphicsViewController||0===this.graphics.length)return;this.handles.remove("graphics-view"),this._createGraphicsViewController=new AbortController;const d=()=>{this._createGraphicsViewController=null,this._updatingChanged()};this._createGraphicsViewAsync(this._createGraphicsViewController.signal).then(d,d),this._updatingChanged()}_createGraphicsViewAsync(d){var v=this;return(0,oi.Z)(function*(){const O=(yield Promise.all([T.e(2436),T.e(3487),T.e(7312)]).then(T.bind(T,87312))).default;(0,fi.k_)(d),yield(0,wr.N1)(()=>v.basemapTerrain?.ready,d),v._set("graphicsView",new O({view:v}))})()}_disposeGraphicsView(){this._createGraphicsViewController&&(this._createGraphicsViewController.abort(),this._createGraphicsViewController=null),this.handles.remove("graphics-view"),(0,at.pC)(this.graphicsView)&&(this.handles.remove(this.graphicsView.processor.layer.id),this.graphicsView.destroy(),this._set("graphicsView",null))}_startup(){const d=(0,dn.wg)(this.viewingMode);if(d===dn.JY.Global&&(this._clippingArea=null),this._initSurface(d),this._set("ready",!0),this.handles.add((0,wr.on)(()=>this.graphics,"after-changes",()=>this._createGraphicsViewIfNeeded()),"graphics-view"),this._createGraphicsViewIfNeeded(),!this._externallySet.environment){const O=this.get("map.initialViewProperties.environment");O&&(this.environment=O)}this.labeler.setup(),this.environmentManager.connectView(this),this.inputManager.connect();const v=this._resolveWhenReady;this._resolveWhenReady=[],v.forEach(O=>O(this))}_teardown(){this._initialDefaultSpatialReference=null,this.inputManager.disconnect(),this.environmentManager.disconnectView(),this.labeler.dispose(),this._disposeGraphicsView(),this.handles.remove("graphics-view"),this._exitSurface(),this._set("ready",!1)}_updateDefaultToMapOptions(){if(this._defaultToMapOptions.include.clear(),this.map){this.map.ground&&this._defaultToMapOptions.include.add(Vu.cy);for(const d of this.map.allLayers.items)"integrated-mesh"===d.type&&this._defaultToMapOptions.include.add(d.uid)}}_updateDefaultHitTestOptions(){if(this._defaultHitTestOptions.exclude.clear(),this.map){this.map.ground&&this.map.ground.opacity<1&&this._defaultHitTestOptions.exclude.add(Vu.cy);for(const d of this.map.allLayers.items)"integrated-mesh"===d.type&&d.opacity<1&&this._defaultToMapOptions.exclude.add(d.uid)}}addVoxelLayerViewToWasm(d){return(0,at.Wi)(this.voxelWasm)?((0,at.Wi)(this.voxelWasmPromise)&&(this.voxelWasmPromise=T.e(3208).then(T.bind(T,23208)).then(v=>(this.voxelWasm=new v.default(this),this.voxelWasm))),this.voxelWasmPromise.then(v=>v.addVoxelLayer(d))):this.voxelWasm.addVoxelLayer(d)}removeVoxelLayerViewFromWasm(d){(0,at.pC)(this.voxelWasm)&&this.voxelWasm.removeVoxelLayer(d)<1&&(this.voxelWasm=null,this.voxelWasmPromise=null)}};function Ey(d,v){d.layerUids||(d.layerUids=new Set),d.layerUids.add(v)}function TE(d,v){return(0,at.pC)(d)&&(0,tn.Up)(d.spatialReference,v)?(0,tn.iV)(d,v):null}var My;Ui.type="3d",(0,Je._)([(0,ht.Cb)()],Ui.prototype,"_userClippingArea",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"_resourceController",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"_stage",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"deconflictor",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"labeler",void 0),(0,Je._)([(0,ht.Cb)((0,Zy.z)(q0,"analyses"))],Ui.prototype,"analyses",void 0),(0,Je._)([(0,ht.Cb)({type:rf,readOnly:!0,aliasOf:"state.animation"})],Ui.prototype,"animation",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"basemapTerrain",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"elevationProvider",void 0),(0,Je._)([(0,ht.Cb)({type:au,aliasOf:"stateManager.camera"})],Ui.prototype,"camera",void 0),(0,Je._)([(0,ht.Cb)({type:au,aliasOf:"stateManager.contentCamera"})],Ui.prototype,"contentCamera",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"canvas",void 0),(0,Je._)([(0,ht.Cb)({type:Eo.Z,aliasOf:"stateManager.center"})],Ui.prototype,"center",void 0),(0,Je._)([(0,ht.Cb)({type:jc.Z})],Ui.prototype,"clippingArea",null),(0,Je._)([(0,ht.Cb)({type:i0})],Ui.prototype,"constraints",void 0),(0,Je._)([(0,ht.Cb)({type:jc.Z,readOnly:!0})],Ui.prototype,"renderDataExtent",null),(0,Je._)([(0,ht.Cb)({type:jc.Z,readOnly:!0})],Ui.prototype,"dataExtent",null),(0,Je._)([(0,ht.Cb)({type:jc.Z,readOnly:!0})],Ui.prototype,"groundAndLayersExtent",null),(0,Je._)([(0,ht.Cb)({value:null,type:uf})],Ui.prototype,"environment",null),(0,Je._)([(0,Uu.p)("environment")],Ui.prototype,"castEnvironment",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"environmentManager",void 0),(0,Je._)([(0,ht.Cb)({type:jc.Z,aliasOf:"stateManager.extent"})],Ui.prototype,"extent",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"floors",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,aliasOf:"stateManager.screenCenter"})],Ui.prototype,"screenCenter",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:"stateManager.frustum"})],Ui.prototype,"frustum",void 0),(0,Je._)([(0,ht.Cb)({type:Number,readOnly:!0})],Ui.prototype,"fullOpacity",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"graphicsView",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"analysisViewManager",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"groundView",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],Ui.prototype,"initialExtentRequired",null),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"_defaultsFromMapSettings",null),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0})],Ui.prototype,"interacting",null),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"stationary",null),(0,Je._)([(0,ht.Cb)({aliasOf:"state.navigating"})],Ui.prototype,"navigating",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"map",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"mapCoordsHelper",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:"stateManager.padding"})],Ui.prototype,"padding",void 0),(0,Je._)([(0,ht.Cb)({type:lc,readOnly:!0})],Ui.prototype,"pointsOfInterest",void 0),(0,Je._)([(0,ht.Cb)({type:Tl,readOnly:!0})],Ui.prototype,"featureTiles",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"featureTreeDebugger",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],Ui.prototype,"screenSizePerspectiveEnabled",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ui.prototype,"deactivatedWebGLExtensions",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ui.prototype,"debugWebGLExtensions",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ui.prototype,"renderCanvas",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ui.prototype,"state",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"inputManager",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"stateManager",void 0),(0,Je._)([(0,ht.Cb)({type:["low","medium","high"]})],Ui.prototype,"qualityProfile",null),(0,Je._)([(0,ht.Cb)({type:ax,get(){let d=this._get("qualitySettings");return d||(d=new ax,b1.apply(this.qualityProfile,d)),d}})],Ui.prototype,"qualitySettings",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"slicePlane",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"typeSpecificPreconditionsReady",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"renderCoordsHelper",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"sceneIntersectionHelper",void 0),(0,Je._)([(0,ht.Cb)({type:Number,dependsOn:["scale","spatialReference"],readOnly:!0})],Ui.prototype,"resolution",null),(0,Je._)([(0,ht.Cb)({type:Number,aliasOf:"stateManager.scale"})],Ui.prototype,"scale",void 0),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"heightModelInfo",null),(0,Je._)([(0,ht.Cb)()],Ui.prototype,"spatialReference",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,constructOnly:!0})],Ui.prototype,"alphaCompositingEnabled",void 0),(0,Je._)([(0,ht.Cb)({constructOnly:!0})],Ui.prototype,"preserveDrawingBufferEnabled",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean})],Ui.prototype,"supersampleScreenshotsEnabled",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Ui.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)({type:CA})],Ui.prototype,"ui",void 0),(0,Je._)([(0,ht.Cb)({type:Boolean,readOnly:!0,dependsOn:["graphicsView.updating","basemapView.updating","basemapTerrain.updating","layerViewManager.updating","layerViewManager.updatingRemaining","_resourceController.updating","_stage.updating","featureTiles.updating","pointsOfInterest.updating","environmentManager.updating","overlay.updating","updatingHandles.updating","featureTreeDebugger.updating","labeler.updating","deconflictor.updating","ready","stationary","inputManager.hasPendingInputs","toolViewManager.updating","analysisViewManager.updating"]})],Ui.prototype,"updating",null),(0,Je._)([(0,ht.Cb)({type:Number,readOnly:!0,dependsOn:["updating"]})],Ui.prototype,"updatingProgress",void 0),(0,Je._)([(0,ht.Cb)({type:["global","local"]})],Ui.prototype,"viewingMode",null),(0,Je._)([(0,ht.Cb)({type:Bd,aliasOf:"stateManager.viewpoint"})],Ui.prototype,"viewpoint",void 0),(0,Je._)([(0,ht.Cb)({type:Number,aliasOf:"stateManager.zoom"})],Ui.prototype,"zoom",void 0),(0,Je._)([(0,ht.Cb)({type:yT})],Ui.prototype,"highlightOptions",void 0),Ui=(0,Je._)([(0,Ds.j)("esri.views.SceneView")],Ui),function(d){d[d.INCLUDE=0]="INCLUDE",d[d.EXCLUDE=1]="EXCLUDE"}(My||(My={}));const dm=(0,br.c)(),AC=(0,rn.s1)(),OA=(0,ui.Ue)(),HN=Ui;T(52515);var GN=T(24263),PA=T(84792),KN=T(2076),by=T(31283),YN=T(29538),DA=T(53390);let Dh=class extends Li.Z{constructor(d){super(d),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,al.Z)("mapview-transitions-duration"),this.effects=[]}set effect(d){if(this._get("effect")!==(d=d||"")){this._set("effect",d);try{this._transitionTo(xA(d))}catch(v){this._transitionTo([]),vo.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:d,error:v})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(d){this._updateForScale(d)}get transitioning(){return null!==this._to}canTransitionTo(d){try{return this.scale>0&&SA(this._current,xA(d),this.scale)}catch{return!1}}transitionStep(d,v){this._applyTimeTransition(d),this._updateForScale(v)}end(){this._applyTimeTransition(this.duration)}_transitionTo(d){this.scale>0&&SA(this._current,d,this.scale)?(this._final=d,this._to=(0,zh.d9)(d),function ZN(d,v,O){const A=d.length>v.length?d:v,j=d.length>v.length?v:d,te=j[j.length-1],pe=te?.scale??O,be=te?.effects??[];for(let Re=j.length;Re<A.length;Re++)j.push({scale:pe,effects:[...be]});for(let Re=0;Re<A.length;Re++)j[Re].scale=-1===j[Re].scale?O:j[Re].scale,A[Re].scale=-1===A[Re].scale?O:A[Re].scale,(0,DA.uF)(j[Re].effects,A[Re].effects)}(this._current,this._to,this.scale),this._from=(0,zh.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=d),this._set("effects",this._current[0]?(0,zh.d9)(this._current[0].effects):[])}_applyTimeTransition(d){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=d;const v=Math.min(1,this._time/this.duration);for(let O=0;O<this._current.length;O++){const A=this._current[O],j=this._from[O],te=this._to[O];A.scale=kN(j.scale,te.scale,v);for(let pe=0;pe<A.effects.length;pe++)A.effects[pe].interpolate(j.effects[pe],te.effects[pe],v)}1===v&&(this._current=this._final,this._set("effects",this._current[0]?(0,zh.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(d){if(this._set("scale",d),0===this._current.length)return;const v=this._current,O=this._current.length-1;let A,j,te=1;if(1===v.length||d>=v[0].scale)j=A=v[0].effects;else if(d<=v[O].scale)j=A=v[O].effects;else for(let pe=0;pe<O;pe++){const be=v[pe],Re=v[pe+1];if(be.scale>=d&&Re.scale<=d){te=(d-be.scale)/(Re.scale-be.scale),A=be.effects,j=Re.effects;break}}for(let pe=0;pe<this.effects.length;pe++)this.effects[pe].interpolate(A[pe],j[pe],te)}};function xA(d){const v=(0,YN.Q)(d)||[];return function $N(d){const v=d[0];return!!v&&"type"in v}(v)?[{scale:-1,effects:v}]:v}function SA(d,v,O){return!d[0]?.effects||!v[0]?.effects||!((-1===d[0]?.scale||-1===v[0]?.scale)&&(d.length>1||v.length>1)&&O<=0)&&(0,DA.AS)(d[0].effects,v[0].effects)}function kN(d,v,O){return d+(v-d)*O}(0,Je._)([(0,ht.Cb)()],Dh.prototype,"_to",void 0),(0,Je._)([(0,ht.Cb)()],Dh.prototype,"duration",void 0),(0,Je._)([(0,ht.Cb)({value:""})],Dh.prototype,"effect",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Dh.prototype,"effects",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Dh.prototype,"hasEffects",null),(0,Je._)([(0,ht.Cb)({value:0})],Dh.prototype,"scale",null),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Dh.prototype,"transitioning",null),Dh=(0,Je._)([(0,Ds.j)("esri.layers.effects.EffectView")],Dh);var JN=T(71149),XN=T(14772),QN=T(36630),qN=T(33474),e7=T(50134),t7=T(24729),AA=T(56445),r7=T(71131),s7=T(34057),xh=T(3854),N0=T(86606),i7=T(80239),Cy=T(88380),a7=T(26831),LC=T(74741),l7=T(66960);const LA={HH:315,HL:45,LL:135,LH:225},c7={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function u7(d){if(!d)return;const{type:v}=d;if(v.includes("3d"))return(0,l7.getSymbolLayerFill)(d.symbolLayers.getItemAt(0));if("simple-line"===v){const O=(0,LC.mx)(d);return O&&O.color}if("simple-marker"===d.type&&("x"===d.style||"cross"===d.style)){const O=(0,LC.mx)(d);return O&&O.color}return(0,LC._M)(d)}function d7(d,v){const O=v.HH.label,A=v.LL.label,j=v.HL.label,te=v.LH.label;switch(d){case"HH":default:return{top:O,bottom:A,left:j,right:te};case"HL":return{top:j,bottom:te,left:A,right:O};case"LL":return{top:A,bottom:O,left:te,right:j};case"LH":return{top:te,bottom:j,left:O,right:A}}}function wA(d){let v=LA[d];return d&&null==v&&(v=LA.HH),v||0}var E_=T(98494),wp=T(18722),hm=T(57213),_7=T(52068);const RA=[255,255,255],IA=[200,200,200],_m=[128,128,128];function E7(d,v){const O=d.length-1;return d.map((A,j)=>(0,wp.MN)(A,j,O,v))}function M7(d,v,O,A,j,te){return IC.apply(this,arguments)}function IC(){return IC=(0,oi.Z)(function*(d,v,O,A,j,te){const pe=v.legendOptions,be=pe&&pe.customValues,Re=yield C7(d,O),yt=v.stops&&v.stops.length>1;if(!Re||!be&&!(null!=v.minSize&&null!=v.maxSize||yt&&!v.target))return;const Nt=(0,N0.YW)(Re);let Rt=null,Jt=null,jt=null;Jt=Nt&&!yt?(0,E_.NM)([v.minDataValue,v.maxDataValue]):be||(yield P7(v,Re,A,j));const ir=d?.authoringInfo,or="univariate-color-size"===ir?.type,pr=or&&"above-and-below"===ir?.univariateTheme;if(!Jt&&yt&&(Jt=v.stops.map(Cs=>Cs.value),Rt=v.stops.some(Cs=>!!Cs.label),"flow"===d.type&&(Jt=(0,E_.NM)(Jt)),Rt&&(jt=v.stops.map(Cs=>Cs.label))),Nt&&Jt?.length>2&&!pr&&(Jt=[Jt[0],Jt[Jt.length-1]]),!Jt)return null;or&&5!==Jt?.length&&(Jt=jA({minSize:Jt[0],maxSize:Jt[Jt.length-1]}));const Lr=Nt?b7(d,Jt):null,Br=(0,N0.Y6)(Re),gs=Rt?null:E7(Jt,te);return(yield Promise.all(Jt.map(function(){var Cs=(0,oi.Z)(function*(Us,Ks){const li=Nt?Lr[Ks]:yield pm(v,Re,Us,A,j);return{value:Us,symbol:S7(pr&&"class-breaks"===d.type?T7(d,Ks):Re,li),label:Rt?jt[Ks]:gs[Ks],size:li,outlineSize:Br}});return function(Us,Ks){return Cs.apply(this,arguments)}}()))).reverse()}),IC.apply(this,arguments)}function b7(d,v){const O=d?.authoringInfo,A="univariate-color-size"===O?.type;let j=[12,30];if(A){const te=v[0],pe=v[v.length-1],be=12,Re=30;j=v.map(Ge=>be+(Ge-te)/(pe-te)*(Re-be))}return A&&"below"===O?.univariateTheme&&j.reverse(),j}function T7(d,v){const O=d.classBreakInfos,A=O.length,j=A<2||!(v>=2)?O[0].symbol.clone():O[A-1].symbol.clone();return d.visualVariables.some(te=>"color"===te.type)&&(j.type.includes("3d")?UA(j):BA(j)),j}function C7(d,v){return UC.apply(this,arguments)}function UC(){return UC=(0,oi.Z)(function*(d,v){if("flow"===d.type)return(0,wp.y$)(d,v);if("pie-chart"===d.type)return new hm.Z({color:null,outline:d.outline?.width?d.outline:new _7.Z});let O=null,A=null;if("simple"===d.type)O=d.symbol;else if("class-breaks"===d.type){const j=d.classBreakInfos;O=j&&j[0]&&j[0].symbol,A=j.length>1}else if("unique-value"===d.type){const j=d.uniqueValueInfos;O=j&&j[0]&&j[0].symbol,A=j.length>1}return!O||O7(O)?null:(O=O.clone(),(v||A)&&(O.type.includes("3d")?UA(O):BA(O)),O)}),UC.apply(this,arguments)}function O7(d){return!!d&&((0,dx.dU)(d)?!!d.symbolLayers&&d.symbolLayers.some(v=>v&&"fill"===v.type):d.type.includes("fill"))}function UA(d){d.symbolLayers.forEach("line-3d"===d.type?v=>{v.material={color:_m}}:v=>{"icon"!==v.type||v.resource&&v.resource.href?v.material={color:IA}:(v.material={color:RA},v.outline={color:_m,size:1.5})})}function BA(d){const v=(0,fA.$o)();"cim"===d.type?(0,AA.ZB)(d,new yc.Z(IA)):d.type.includes("line")?d.color=_m:(d.color=v?_m:RA,"simple-marker"===d.type&&(d.outline?"#ffffff"===d.outline?.color?.toHex()&&(d.outline.color=_m):d.outline={color:_m,width:1.5}))}function P7(d,v,O,A){return BC.apply(this,arguments)}function BC(){return BC=(0,oi.Z)(function*(d,v,O,A){const j=(yield Promise.resolve().then(T.bind(T,81808))).getSizeRangeAtScale(d,O,A),te=j&&jA(j);if(!j&&!te)return;let pe=te.map(be=>D7(be,d,j));pe=(0,E_.NM)(pe);for(let be=1;be<pe.length-1;be++){const Re=yield x7(d,v,pe[be],pe[be-1],O,A);Re&&(pe[be]=Re[0],te[be]=Re[1])}return pe}),BC.apply(this,arguments)}function jA(d){const v=d.minSize,j=(d.maxSize-v)/4,te=[];for(let pe=0;pe<5;pe++)te.push(v+j*pe);return te}function D7(d,v,O){const A=O.minSize,j=O.maxSize,te=v.minDataValue,pe=v.maxDataValue;let be=null;return be=d<=A?te:d>=j?pe:(d-A)/(j-A)*(pe-te)+te,be}function x7(d,v,O,A,j,te){return jC.apply(this,arguments)}function jC(){return jC=(0,oi.Z)(function*(d,v,O,A,j,te){const pe=yield pm(d,v,O,j,te),be=yield pm(d,v,A,j,te),Re=(0,E_.D2)(O);let ft=Re.integer,yt=null,It=null;O>0&&O<1&&(yt=10**Re.fractional,ft=(0,E_.D2)(O*=yt).integer);for(let Nt=ft-1;Nt>=0;Nt--){const Rt=10**Nt;let Jt=Math.floor(O/Rt)*Rt,jt=Math.ceil(O/Rt)*Rt;null!=yt&&(Jt/=yt,jt/=yt);let ir=(Jt+jt)/2;[,ir]=(0,E_.NM)([Jt,ir,jt],{indexes:[1]});const or=yield pm(d,v,Jt,j,te),pr=yield pm(d,v,jt,j,te),Lr=yield pm(d,v,ir,j,te),Br=(0,E_.f1)(pe,or,be,null),gs=(0,E_.f1)(pe,pr,be,null),Cs=(0,E_.f1)(pe,Lr,be,null);let Us=Br.previous<=20,Ks=gs.previous<=20;if(Us&&Ks&&(Br.previous<=gs.previous?(Us=!0,Ks=!1):(Ks=!0,Us=!1)),Us?It=[Jt,or]:Ks?It=[jt,pr]:Cs.previous<=20&&(It=[ir,Lr]),It)break}return It}),jC.apply(this,arguments)}function pm(d,v,O,A,j){return FC.apply(this,arguments)}function FC(){return FC=(0,oi.Z)(function*(d,v,O,A,j){const{getSize:te}=yield Promise.resolve().then(T.bind(T,81808));return te(d,O,{scale:A,view:j,shape:"simple-marker"===v.type?v.style:null})}),FC.apply(this,arguments)}function S7(d,v){const O=d.clone();if((0,dx.dU)(O))(0,N0.YW)(O)||O.symbolLayers.forEach(A=>{"fill"!==A.type&&(A.size=v)});else if(function m7(d){return"esri.symbols.SimpleMarkerSymbol"===d.declaredClass}(O))O.size=v;else if(function g7(d){return"esri.symbols.PictureMarkerSymbol"===d.declaredClass}(O)){const A=O.width,j=O.height;O.height=v,O.width=v*(A/j)}else!function y7(d){return"esri.symbols.SimpleLineSymbol"===d.declaredClass}(O)?function v7(d){return"esri.symbols.TextSymbol"===d.declaredClass}(O)&&O.font&&(O.font.size=v):O.width=v;return O}T(88411);var FA=T(15348);T(64831);var NA=T(88493);const Rp=vo.Z.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),CE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,U7=new KN.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),WA={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},OE=new hm.Z({size:6,outline:{color:[128,128,128,.5],width:.5}}),B7=new NA.Z({style:"solid"});function NC(d){return"flow"===d.type}function VA(d){return"vector-field"===d.type}function zA(d){return"raster-colormap"===d.type}function HA(d){return"raster-stretch"===d.type}function GA(d){return"raster-shaded-relief"===d.type}function fm(d){return"esri.renderers.SimpleRenderer"===d.declaredClass}function mm(d){return"esri.renderers.ClassBreaksRenderer"===d.declaredClass}function WC(d){return"esri.renderers.UniqueValueRenderer"===d.declaredClass}function KA(d){return"esri.renderers.HeatmapRenderer"===d.declaredClass}function VC(d){return"esri.renderers.PointCloudClassBreaksRenderer"===d.declaredClass}function zC(d){return"esri.renderers.PointCloudStretchRenderer"===d.declaredClass}function HC(d){return"esri.renderers.PointCloudUniqueValueRenderer"===d.declaredClass}function YA(d){return"esri.renderers.DotDensityRenderer"===d.declaredClass}function ZA(d){return"esri.renderers.PieChartRenderer"===d.declaredClass}function kA(d){return"esri.layers.BuildingSceneLayer"===d.declaredClass}function $A(d){return"esri.layers.MapImageLayer"===d.declaredClass}function Oy(d){return"esri.layers.ImageryLayer"===d.declaredClass}function GC(d){return"esri.layers.ImageryTileLayer"===d.declaredClass}const $7=new hm.Z({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let gm={},dl=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new Na.Z,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const d=()=>this.notifyChange("ready");this._handles.add([(0,wr.on)(()=>this.children,"change",v=>{const{added:O,removed:A}=v,j=this._handles;O.forEach(te=>{const pe=`activeLayerInfo-ready-watcher-${te.layer.uid}`;j.add((0,wr.YP)(()=>te.ready,d,wr.nn),pe)}),A.forEach(te=>j.remove(te.layer.uid)),d()})]),this.keepCacheOnDestroy||(gm={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(gm=null)}get effectList(){const d=this.layer;let v=null;return"effect"in d&&d.effect&&(v=new Dh,v.effect=d.effect,v.end(),v.scale=this.scale),v}get opacity(){const d=this.layer.opacity,v=this.parent?.opacity,O=this.layer.parent,A=O&&"uid"in O?this._getParentLayerOpacity(O):null;return null!=v?v*d:null!=A?A*d:d}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const d=this.layer;if(null===d)return!1;if("effect"in d&&d.effect&&Array.isArray(d.effect))return!0;if("featureReduction"in d&&d.featureReduction){if("cluster"===d.featureReduction.type)return!0;if("binning"===d.featureReduction.type&&"renderer"in d.featureReduction&&d.featureReduction.renderer)return this._isRendererScaleDriven(d.featureReduction.renderer)}return"renderer"in d&&d.renderer?this._isRendererScaleDriven(d.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}buildLegendElementsForFeatureCollections(d){var v=this;return(0,oi.Z)(function*(){if(v.hideLayersNotInCurrentView&&!(yield v._isLayerInCurrentView()))return v.legendElements=[],void v.notifyChange("ready");const O=Array.from(d,A=>{if(function G7(d){return"esri.layers.FeatureLayer"===d.declaredClass}(A))return v._getRendererLegendElements(A.renderer,{title:A.title});if(A.featureSet&&A.featureSet.features.length){const j=A.layerDefinition,te=j&&j.drawingInfo,pe=te&&(0,qN.i)(te.renderer),be=U7.read(j.geometryType);return pe?v._getRendererLegendElements(pe,{title:A.name,geometryType:be}):(Rp.warn("drawingInfo not available!"),null)}return null});try{const A=[];yield(0,fi.as)(O).then(j=>{j.forEach(({value:te})=>te&&A.push(...te))}),v.legendElements=A,v.notifyChange("ready")}catch(A){Rp.warn("error while building legend for layer!",A)}})()}buildLegendElementsForRenderer(d){var v=this;return(0,oi.Z)(function*(){try{const O=!v.hideLayersNotInCurrentView||(yield v._isLayerInCurrentView());v.legendElements=O?yield v._getRendererLegendElements(d):[],v.notifyChange("ready")}catch(O){Rp.warn("error while building legend for layer!",O)}})()}buildLegendElementsForTools(){var d=this;return(0,oi.Z)(function*(){const v=d.layer;if(function W7(d){return"esri.layers.VoxelLayer"===d.declaredClass}(v))d._constructLegendElementsForVoxellayer();else if(function z7(d){return"esri.layers.WMTSLayer"===d.declaredClass}(v))d._constructLegendElementsForWMTSlayer();else if(function V7(d){return"esri.layers.WMSLayer"===d.declaredClass}(v))yield d._constructLegendElementsForWMSSublayers();else if(kA(v))yield d._constructLegendElementsForBuildingSceneLayer();else if($A(v)||function H7(d){return"esri.layers.TileLayer"===d.declaredClass}(v)||kA(v))yield d._constructLegendElementsForSublayers();else{d._handles.remove("imageryLayers-watcher");let O="default";Oy(v)&&(O=(v?.renderingRule?.functionName||"default")+"_"+(v.bandIds?.length?v.bandIds.join(""):"###")),yield d._getLegendLayers(`${v.uid}-${O}`).then(function(){var A=(0,oi.Z)(function*(j){d.legendElements=[],d.notifyChange("ready");const te=j.map(function(){var pe=(0,oi.Z)(function*(be){if(Oy(v)||GC(v)){const Ge=(0,wr.YP)(()=>["renderingRule"in v&&v.renderingRule,v.bandIds],()=>(0,fi.Ds)((0,oi.Z)(function*(){gm.default=null,v.renderer?yield d.buildLegendElementsForRenderer(v.renderer):yield d.buildLegendElementsForTools()}))());d._handles.add(Ge,"imageryLayers-watcher")}const Re=d._generateSymbolTableElementForLegendLayer(be);Re&&Re.infos.length&&(Oy(v)&&(Re.title=v.title),d.legendElements.push(Re)),d.notifyChange("ready")});return function(be){return pe.apply(this,arguments)}}());yield(0,fi.as)(te)});return function(j){return A.apply(this,arguments)}}()).catch(A=>{Rp.warn("Request to server for legend has failed!",A)})}})()}_isLayerInCurrentView(){var d=this;return(0,oi.Z)(function*(){const v=d.layer,O=d.layerView,A=O&&"createQuery"in O&&"queryFeatureCount"in O;if(!(A||O&&"createQuery"in v&&"queryFeatureCount"in v))return!0;yield(0,wr.N1)(()=>!O.updating);const j=A?"createQuery"in O&&O.createQuery():"createQuery"in v&&v.createQuery();return j.geometry=d.view.extent,0!==(A?"queryFeatureCount"in O&&(yield O.queryFeatureCount(j)):"queryFeatureCount"in v&&(yield v.queryFeatureCount(j)))})()}_getParentLayerOpacity(d){let v=1;const O=d.parent;return O&&"uid"in O&&(v=this._getParentLayerOpacity(O)),d.opacity*v}_isGroupActive(){const d=this.children;return!!d.length&&d.some(v=>v.ready)}_isRendererScaleDriven(d){if("dot-density"===d.type)return!0;if(CE.test("valueExpression"in d&&d.valueExpression))return!0;const O="visualVariables"in d&&d.visualVariables;return!!O&&O.some(A=>this._isScaleDrivenSizeVariable(A))}_isScaleDrivenSizeVariable(d){if(d&&"size"!==d.type)return!1;const v=d,O=v.minSize,A=v.maxSize;return"object"==typeof O&&O?this._isScaleDrivenSizeVariable(O):"object"==typeof A&&A?this._isScaleDrivenSizeVariable(A):!!v.expression||CE.test(v.valueExpression)}_isLayerScaleDriven(d){if("minScale"in d&&d.minScale>0||"maxScale"in d&&d.maxScale>0)return!0;if("sublayers"in d&&d.sublayers)return d.sublayers.some(O=>this._isLayerScaleDriven(O));const v=d.parent;if(!1===d.loaded&&v&&$A(v)&&"source"in d&&d.source&&"map-layer"===d.source.type)for(const O of v.sourceJSON.layers)if(O.id===d.source.mapLayerId&&(O.minScale>0||O.maxScale>0))return!0;return!1}_constructLegendElementsForVoxellayer(){var d=this;return(0,oi.Z)(function*(){d.legendElements=[],d._handles.remove("voxel-style-watcher");const v=d.layer;d._handles.add((0,wr.YP)(()=>v.currentVariableId,()=>d._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const O=(0,at.Wg)(v.getVariableStyle(null)),A=[];if(O)if(O.uniqueValues?.length){const pe=[];O.uniqueValues.forEach(be=>{be.enabled&&pe.push({label:be.label||`${be.value}`,value:be.value,symbol:new NA.Z({color:be.color,outline:null})})}),pe.length&&A.push({type:"symbol-table",title:O.label,infos:pe})}else if(O.transferFunction){const{colorStops:pe,stretchRange:be}=O.transferFunction,Re=pe.toArray().reverse(),Ge=be.map((ft,yt)=>`${0===yt?wp.zZ:wp.Eh} ${function A7(d){const O=Math.floor(Math.log10(Math.abs(d)))+1,A=O<4||O>6?4:O,te=Math.abs(d)>=1e6?"compact":"standard";return(0,FA.uf)(d,{notation:te,minimumSignificantDigits:2,maximumSignificantDigits:A})}(ft)}`).reverse(),tt=Re.map(ft=>({color:ft.color,value:null,label:null}));tt[0].label=Ge[0],tt[tt.length-1].label=Ge[1],A.push({type:"color-ramp",title:O.label,infos:tt,preview:(0,xh.jT)(Re.map(ft=>ft.color))})}const j=v.opacity,te=A.reduce((pe,be)=>pe.concat(d._getAllInfos(be)),[]).filter(pe=>!!pe?.symbol).map(pe=>d._getSymbolPreview(pe,j));yield(0,fi.as)(te),d.legendElements=A,d.notifyChange("ready")})()}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const d=this.layer.activeLayer;if(this._handles.add((0,wr.YP)(()=>{const{layer:v}=this;return v&&"activeLayer"in v&&v.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),d.styleId&&d.styles){let v=null;d.styles.some(O=>d.styleId===O.id&&(v=O.legendUrl,!0)),v&&(this.legendElements=[{type:"symbol-table",title:d.title,infos:[{src:v,opacity:this.opacity}]}])}this.notifyChange("ready")}_constructLegendElementsForWMSSublayers(){var d=this;return(0,oi.Z)(function*(){d.legendElements=[],d._handles.remove("wms-sublayers-watcher");const v=d.layer;let O=null;(v.customParameters||v.customLayerParameters)&&(O={...v.customParameters,...v.customLayerParameters}),d._handles.add((0,wr.YP)(()=>{const{layer:A}=d;return A&&"sublayers"in A&&A.sublayers},()=>d._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),d.legendElements=yield d._generateLegendElementsForWMSSublayers(v.sublayers,O),d.notifyChange("ready")})()}_generateLegendElementsForWMSSublayers(d,v){var O=this;return(0,oi.Z)(function*(){const A=[];O._handles.add(d.on("change",()=>O._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const j=d.toArray();for(const te of j){const pe=(0,wr.YP)(()=>[te.title,te.visible,te.legendEnabled],()=>O._constructLegendElementsForWMSSublayers());if(O._handles.add(pe,"wms-sublayers-watcher"),!O.respectLayerVisibility||te.visible&&te.legendEnabled){const be=yield O._generateSymbolTableElementForWMSSublayer(te,v);be&&be.infos.length&&A.unshift(be)}}return A})()}_generateSymbolTableElementForWMSSublayer(d,v){var O=this;return(0,oi.Z)(function*(){if(!d.legendUrl&&d.sublayers){const A=(yield O._generateLegendElementsForWMSSublayers(d.sublayers,v)).filter(j=>j);return{type:"symbol-table",title:d.title,infos:A}}return O._generateSymbolTableElementForLegendUrl(d,v)})()}_generateSymbolTableElementForLegendUrl(d,v){return(0,oi.Z)(function*(){let O=d.legendUrl;if(!O)return;const A={type:"symbol-table",title:d.title||d.name||d.id&&d.id+"",infos:[]};v&&(O=(0,sM.fl)(O,v));let j=null;const te=d.layer?.opacity;try{j=(yield(0,PA.default)(O,{responseType:"image"})).data,j&&(j.style.opacity=te)}catch{}return A.infos.push({src:O,preview:j,opacity:te}),A})()}_getLegendLayers(d,v){const O=gm&&gm[d];return O?Promise.resolve(O):this._legendRequest(v).then(A=>{const j=A.layers;return gm[d]=j,j})}_legendRequest(d){const v=this.layer;let O={f:"json",dynamicLayers:d};if(Oy(v)){const j=v.exportImageServiceParameters.renderingRule;if(j&&(O.renderingRule=JSON.stringify(j.rasterFunctionDefinition||j.toJSON())),v.bandIds&&(O.bandIds=v.bandIds.join()),v.raster||v.viewId||v.customParameters){const{raster:te,viewId:pe,customParameters:be}=v;O={raster:te,viewId:pe,...O,...be}}}let A=v.url.replace(/(\/)+$/,"");if("version"in v&&v.version>=10.01){const j=A.indexOf("?");j>-1?A=A.substring(0,j)+"/legend"+A.substring(j):A+="/legend"}else{const j=A.toLowerCase().indexOf("/rest/"),te=A.substring(0,j)+A.substring(j+5,A.length);A="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(te)+"&returnbytes=true"}return(0,PA.default)(A,{query:O}).then(j=>j.data)}_constructLegendElementsForBuildingSceneLayer(){var d=this;return(0,oi.Z)(function*(){d.legendElements=[],d._handles.remove("sublayers-watcher");const v=d.layer;d._handles.add((0,wr.YP)(()=>v.sublayers,()=>d._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{d.legendElements=yield d._generateLegendElementsForBuildingSublayers(v.sublayers,d.opacity),d.notifyChange("ready")}catch(O){Rp.warn("Request to server for legend has failed!",O)}})()}_generateLegendElementsForBuildingSublayers(d,v){var O=this;return(0,oi.Z)(function*(){let A=[];O._handles.add(d.on("change",()=>O._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const j=d.toArray();for(const te of j){const pe=(0,wr.YP)(()=>["renderer"in te&&te.renderer,te.opacity,te.title,te.visible],()=>O._constructLegendElementsForBuildingSceneLayer());if(O._handles.add(pe,"sublayers-watcher"),!O.respectLayerVisibility||te.visible){const be=te&&null!=te.opacity?te.opacity:null,Re=null!=be?be*v:v;if("building-group"===te.type){const Ge={type:"symbol-table",title:te.title,infos:[]},tt=yield O._generateLegendElementsForBuildingSublayers(te.sublayers,Re);Ge.infos.push(...tt),A=[Ge,...A]}else te.renderer&&(A=[...yield O._getRendererLegendElements(te.renderer,{title:te.title,opacity:Re,sublayer:te}),...A])}}return A.filter(te=>!!te&&(!("infos"in te)||te.infos.length>0))})()}_constructLegendElementsForSublayers(){var d=this;return(0,oi.Z)(function*(){d.legendElements=[],d._handles.remove("sublayers-watcher");const v=d.layer;d._handles.add((0,wr.YP)(()=>v.sublayers,()=>d._constructLegendElementsForSublayers),"sublayers-watcher");try{d.legendElements=yield d._generateLegendElementsForSublayers(v.sublayers,d.opacity),d.notifyChange("ready")}catch(O){Rp.warn("Request to server for legend has failed!",O)}})()}_generateLegendElementsForSublayers(d,v,O){var A=this;return(0,oi.Z)(function*(){const j=A.layer;let te=[];A._handles.add(d.on("change",()=>A._constructLegendElementsForSublayers()),"sublayers-watcher");let pe=d.toArray();!O&&A.sublayerIds&&A.sublayerIds.length&&(pe=A.sublayerIds.map(be=>j.findSublayerById(be)).filter(Boolean));for(const be of pe){const Re=(0,wr.YP)(()=>[be.renderer,be.opacity,be.title,be.visible,be.legendEnabled],()=>A._constructLegendElementsForSublayers());if(A._handles.add(Re,"sublayers-watcher"),!A.respectLayerVisibility||be.visible&&be.legendEnabled&&A._isSublayerInScale(be)){const Ge=be&&null!=be.opacity?be.opacity:null,tt=null!=Ge?Ge*v:v;if(be.renderer&&!be.sublayers&&be.originIdOf("renderer")>by.s3.SERVICE)yield be.load(),te=[...yield A._getRendererLegendElements(be.renderer,{title:be.title,opacity:tt,sublayer:be}),...te];else{const ft=yield A._generateSymbolTableElementForSublayer(be,tt,O);ft&&te.unshift(ft)}}}return te.filter(be=>!!be&&(!("infos"in be)||be.infos.length>0))})()}_generateSymbolTableElementForSublayer(d,v,O){var A=this;return(0,oi.Z)(function*(){if(!O){O=new Map;const te=A.layer,pe=d.source;let be=null;if(pe&&("map-layer"!==pe.type||pe.mapLayerId!==d.id||pe.gdbVersion&&pe.gdbVersion!==("gdbVersion"in te&&te.gdbVersion))||d.originIdOf("renderer")>by.s3.SERVICE||d.originIdOf("labelingInfo")>by.s3.SERVICE||d.originIdOf("labelsVisible")>by.s3.SERVICE){const Ge=new XN.R({layer:A.layer});be=Ge.hasDynamicLayers?Ge.dynamicLayers:null,Ge.destroy()}const Re=be||`${te.uid}-default`;(yield A._getLegendLayers(Re,be)).forEach(Ge=>O.set(Ge.layerId,Ge))}const j=O.get(d.id);if((!j||j?.subLayerIds&&j.defaultVisibility)&&d.sublayers){const te=yield A._generateLegendElementsForSublayers(d.sublayers,v,O);return{type:"symbol-table",title:d.title,infos:te}}return A._generateSymbolTableElementForLegendLayer(j,d,v)})()}_generateSymbolTableElementForLegendLayer(d,v,O){if(!d||!d.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(d,v))return null;const A=v?.renderer;let j=v?.title||d.layerName;if(A&&(!v||v?.originIdOf("renderer")>by.s3.SERVICE)){const be=v?.title||this._getRendererTitle(A,v);be&&(j&&"string"!=typeof be&&"title"in be&&(be.title=j),j=be)}const te={type:"symbol-table",title:j,legendType:d.legendType?d.legendType:null,infos:[]},pe=v?this._sanitizeLegendForSublayer(d.legend.slice(),v):d.legend;return d.legendGroups?.length>0?d.legendGroups.forEach(be=>{const Re={type:"symbol-table",title:be.heading,legendType:d.legendType?d.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(pe.filter(Ge=>Ge.groupId===be.id),d.layerId,O)};Re.infos?.length>0&&te.infos.push(Re)}):te.infos=this._generateSymbolTableElementInfosForLegendLayer(pe,d.layerId,O),te.infos.length>0?te:null}_generateSymbolTableElementInfosForLegendLayer(d,v,O){return d.map(A=>{let j=A.url;if(A.imageData&&A.imageData.length>0)j=`data:image/png;base64,${A.imageData}`;else{if(0===j.indexOf("http"))return null;j=(0,GN.Dp)(`${this.layer.url}/${v}/images/${j}`)}return{label:A.label,src:j,opacity:O??this.opacity,width:A.width,height:A.height}}).filter(A=>!!A)}_isSublayerInScale(d){const v=d.minScale||0;return!(v>0&&v<this.scale||(d.maxScale||0)>this.scale)}_isLegendLayerInScale(d,v){const O=v||this.layer;let A=null,j=null,te=!0;return!O.minScale&&0!==O.minScale||!O.maxScale&&0!==O.maxScale?(0===d.minScale&&O.tileInfo&&(A=O.tileInfo.lods[0].scale),0===d.maxScale&&O.tileInfo&&(j=O.tileInfo.lods[O.tileInfo.lods.length-1].scale)):(A=Math.min(O.minScale,d.minScale)||O.minScale||d.minScale,j=Math.max(O.maxScale,d.maxScale)),(A>0&&A<this.scale||j>this.scale)&&(te=!1),te}_sanitizeLegendForSublayer(d,v){if("version"in this.layer&&this.layer.version<10.1||0===d.length)return d;const O=v.renderer,A=d.some(pe=>pe.values);let j=null,te=null;return A&&d.some((pe,be)=>(pe.values||(j=be,te=pe,te.label||(te.label="others")),null!=te)),O?"unique-value"===O.type?te&&(d.splice(j,1),d.push(te)):"class-breaks"===O.type&&(te&&d.splice(j,1),d.reverse(),te&&d.push(te)):te&&(d.splice(j,1),d.push(te)),d}_getRendererLegendElements(d,v={}){var O=this;return(0,oi.Z)(function*(){return function N7(d,v){return fm(d)||mm(d)||WC(d)||KA(d)||YA(d)||ZA(d)?"2d"===v.type||(0,e7.e)(d):HA(d)||zA(d)||GA(d)||VC(d)||zC(d)||HC(d)||VA(d)||NC(d)}(d,O.view)?function j7(d){return VC(d)||zC(d)||HC(d)||function F7(d){return"esri.renderers.PointCloudRGBRenderer"===d.declaredClass}(d)}(d)?O._constructPointCloudRendererLegendElements(d,v):YA(d)?O._constructDotDensityRendererLegendElements(d):ZA(d)?O._constructPieChartRendererLegendElements(d):O._constructRendererLegendElements(d,v):(Rp.warn(`Renderer of type '${d.type}' not supported!`),[])})()}_getPointCloudRendererTitle(d){return d.legendOptions&&d.legendOptions.title||d.field}_constructPointCloudRendererLegendElements(d,v={}){const O=v.title,A=[];let j=null,te=null;if(VC(d))j={type:"symbol-table",title:O||this._getPointCloudRendererTitle(d),infos:[]},d.colorClassBreakInfos.forEach(be=>{j.infos.unshift({label:be.label||be.minValue+" - "+be.maxValue,value:[be.minValue,be.maxValue],symbol:this._getAppliedCloneSymbol(OE,be.color)})});else if(zC(d)){const be=d.stops;let Re=null;if(be.length&&(1===be.length&&(Re=be[0].color),!Re)){const tt=be[0].value,ft=be[be.length-1].value;null!=tt&&null!=ft&&(Re=(0,Cy.QQ)(tt+(ft-tt)/2,be))}j={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(OE,Re||OE.color)}]};const Ge=(0,Cy.NA)(d.stops);te={type:"color-ramp",title:O||this._getPointCloudRendererTitle(d),infos:Ge,preview:(0,xh.jT)(Ge.map(tt=>tt.color))}}else HC(d)&&(j={type:"symbol-table",title:O||this._getPointCloudRendererTitle(d),infos:[]},d.colorUniqueValueInfos.forEach(be=>{j.infos.push({label:be.label||be.values.join(", "),value:be.values.join(", "),symbol:this._getAppliedCloneSymbol(OE,be.color)})}));j&&j.infos.length&&A.push(j),te&&te.infos.length&&A.push(te);const pe=A.reduce((be,Re)=>be.concat(Re.infos),[]).filter(be=>!!be.symbol).map(be=>this._getSymbolPreview(be,this.opacity,{symbolConfig:{applyColorModulation:!!d.colorModulation}}));return(0,fi.as)(pe).then(()=>A)}_getElementInfoForDotDensity(d,v){const{backgroundColor:O,outline:A,dotSize:j}=d,te=this.effectList?.effects.map(yt=>yt.toJSON()),pe=(0,JN.rM)(te),be=j+"-"+v+"-"+O+"-"+(A&&JSON.stringify(A.toJSON()))+"-"+pe,Re=this._dotDensityUrlCache,Ge=Re.has(be)?Re.get(be):(0,xh.k)(d,v);Re.set(be,Ge);const ft=(0,s7.w)([[{shape:{type:"image",x:0,y:0,width:Ge.width,height:Ge.height,src:Ge.src},fill:null,stroke:null,offset:[0,0]}]],[Ge.width,Ge.height],{effectView:this.effectList});return{opacity:1,src:Ge.src,preview:ft,width:Ge.width,height:Ge.height}}_constructDotDensityRendererLegendElements(d){const v=d.calculateDotValue(this.view.scale),O=d.legendOptions&&d.legendOptions.unit,A={type:"symbol-table",title:{value:v&&Math.round(v),unit:O||""},infos:[]};return d.attributes.forEach(j=>{const te=this._getElementInfoForDotDensity(d,j.color);te.label=j.label||j.valueExpressionTitle||j.field,A.infos.push(te)}),Promise.resolve([A])}_constructPieChartRendererLegendElements(d){var v=this;return(0,oi.Z)(function*(){const O=v.layer.opacity,A=[],j="Others",te=d.outline;d.attributes.forEach(Ge=>{const tt=new hm.Z({color:Ge.color,outline:te});A.push({label:Ge.label||Ge.valueExpressionTitle||Ge.field,symbol:tt})});const pe=A.length?[...A]:[];if(d.othersCategory?.color&&0!==d.othersCategory?.threshold){const Ge=new hm.Z({color:d.othersCategory.color,outline:te});A.push({label:d.othersCategory.label||j,symbol:Ge})}if(d.defaultColor?.a){const Ge=new hm.Z({color:d.defaultColor,outline:te});A.push({label:d.defaultLabel,symbol:Ge})}const be=(yield v._getVisualVariableLegendElements(d,v.layer))||[];if(A.length){be.unshift({type:"symbol-table",title:null,infos:A});const Ge=pe.filter(ft=>ft.label!==j).map(ft=>ft.symbol.color).filter(Boolean),tt=(0,xh.LC)(Ge,{holePercentage:d.holePercentage,backgroundColor:d.backgroundFillSymbol?.color,effectList:v.effectList,outline:te});be.unshift({type:"pie-chart-ramp",title:v._getRendererTitle(d,v.layer),infos:A,preview:tt})}const Re=be.reduce((Ge,tt)=>Ge.concat(v._getAllInfos(tt)),[]).filter(Ge=>!!Ge?.symbol&&!Ge?.preview).map(Ge=>v._getSymbolPreview(Ge,O,{effectList:v.effectList}));return yield(0,fi.as)(Re),be})()}_constructRendererLegendElements(d,v={}){var O=this;return(0,oi.Z)(function*(){const{title:A,sublayer:j}=v,te=j||O.layer;let pe=yield O._loadRenderer(d);O._hasColorRamp=!1,O._hasOpacityRamp=!1,O._hasSizeRamp=!1,O._scaleDrivenSizeVariable=null;const be=(yield O._getVisualVariableLegendElements(pe,te))||[],Re={type:"symbol-table",title:A||O._getRendererTitle(pe,te),infos:[]};let Ge=null,tt=!1;const ft=new Set;if(NC(pe)&&!O._hasSizeRamp){const jt=yield(0,wp.y$)(pe);Re.infos.push({label:null,symbol:jt})}else if(function Z7(d){return"univariate-color-size"===("authoringInfo"in d&&d?.authoringInfo)?.type}(pe)){let jt=A;const ir=function k7(d){const v="authoringInfo"in d&&d?.authoringInfo;return"univariate-color-size"===v?.type&&"above-and-below"===v?.univariateTheme}(pe)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",or=be.findIndex(Cs=>"color-ramp"===Cs.type),pr=-1!==or?be.splice(or,1)[0]:null,Lr=be.findIndex(Cs=>"size-ramp"===Cs.type),Br=-1!==Lr?be.splice(Lr,1)[0]:null,gs=[];pr&&(jt=pr.title,gs.push(pr)),Br&&(jt=Br.title,gs.push(Br)),gs.length>0&&be.push({type:ir,title:jt,infos:gs})}else if(KA(pe)){const jt=(0,a7.h)(pe);be.push({type:"heatmap-ramp",title:A||pe.legendOptions?.title,infos:jt,preview:(0,xh.jT)(jt.map(ir=>ir.color),{effectList:O.effectList})})}else if(WC(pe)){const jt=pe&&pe.authoringInfo;if(jt&&"relationship"===jt.type){const{focus:ir,numClasses:or,field1:pr,field2:Lr}=jt;if(or&&pr&&Lr){const Br=[pr,Lr];let gs=wA(ir)||0;for(const Us of Br){const{field:Ks,normalizationField:li,label:si}=Us,Ei=si||{field:O._getFieldAlias(Ks,te),normField:li&&O._getFieldAlias(li,te)},ts=$7.clone();ts.angle=gs,Re.infos.push({label:Ei,symbol:ts}),ft.add(ts),gs+=90}const Cs=function h7(d){const{focus:v,infos:O,numClasses:A}=d,j=c7[A],te={};O.forEach(be=>{te[be.value]={label:be.label,fill:u7(be.symbol)}});const pe=[];for(let be=0;be<A;be++){const Re=[];for(let Ge=0;Ge<A;Ge++)Re.push(te[j[be][Ge]].fill);pe.push(Re)}return{type:"relationship-ramp",numClasses:A,focus:v,colors:pe,labels:d7(v,te),rotation:wA(v)}}({focus:ir,numClasses:or,infos:pe.uniqueValueInfos});be.unshift(Cs)}}else{const ir=pe.field;pe.uniqueValueInfos.forEach(or=>{or.symbol&&Re.infos.push({label:or.label||O._getDomainName(ir,or.value,te)||or.value,value:or.value,symbol:or.symbol})})}pe.defaultSymbol&&(Re.infos.push({label:pe.defaultLabel||"others",symbol:pe.defaultSymbol}),tt=!0)}else if(mm(pe))Ge=O._isUnclassedRenderer(pe),(!Ge||!O._hasSizeRamp)&&(pe.classBreakInfos.forEach(jt=>{jt.symbol&&Re.infos.unshift({label:jt.label||(Ge?null:jt.minValue+" - "+jt.maxValue),value:[jt.minValue,jt.maxValue],symbol:jt.symbol})}),Ge&&(Re.title=null),O._updateInfosforClassedSizeRenderer(pe,Re.infos)),pe.defaultSymbol&&!Ge&&(Re.infos.push({label:pe.defaultLabel||"others",symbol:pe.defaultSymbol}),tt=!0);else if(HA(pe))if(GC(O.layer)||function K7(d){return"esri.layers.WCSLayer"===d.declaredClass}(O.layer)){const jt=O._constructTileImageryStretchRendererElements(pe);!function Y7(d){return"stretch-ramp"===d.type}(jt)?Re.infos=jt:be.push(jt)}else{const jt=O.layer;let ir,or;pe.statistics&&pe.statistics.length&&(ir=null!=pe.statistics[0].min?pe.statistics[0].min:pe.statistics[0][0],or=null!=pe.statistics[0].max?pe.statistics[0].max:pe.statistics[0][1]);let pr=[];const Lr=(0,at.Wg)(jt.renderingRule?yield jt.generateRasterInfo(jt.renderingRule):jt.serviceRasterInfo),Br=Lr.keyProperties.BandProperties,gs=WA[jt.rasterInfo.pixelType.toLowerCase()];1===Lr.bandCount||jt.bandIds&&1===jt.bandIds.length?(ir=ir??(Lr.statistics?Lr.statistics[jt.bandIds[0]].min:gs[0]),or=or??(Lr.statistics?Lr.statistics[jt.bandIds[0]].max:gs[1]),ir||or?be.push(O._getStretchLegendElements(pe,{min:ir,max:or})):O._getServerSideLegend()):Lr.bandCount>=3?Br&&Br.length>=Lr.bandCount?jt.bandIds&&3===jt.bandIds.length?(pr=jt.bandIds.map(Cs=>Br[Cs].BandName),Re.infos=O._createSymbolTableElementMultiBand(pr)):"lerc"===jt.format?(pr=[0,1,2].map(Cs=>Br[Cs].BandName),Re.infos=O._createSymbolTableElementMultiBand(pr)):O._getServerSideLegend():"lerc"===jt.format?(pr=["band1","band2","band3"],Re.infos=O._createSymbolTableElementMultiBand(pr)):O._getServerSideLegend():O._getServerSideLegend()}else if(zA(pe))pe.colormapInfos.forEach(jt=>{Re.infos.push({label:jt.label,value:jt.value,symbol:O._getAppliedCloneSymbol(B7,jt.color)})});else if(fm(pe)){let jt=pe.symbol;switch(v.geometryType){case"point":jt="pointSymbol"in te&&te.pointSymbol;break;case"polyline":jt="lineSymbol"in te&&te.lineSymbol;break;case"polygon":jt="polygonSymbol"in te&&te.polygonSymbol}pe.symbol&&!O._hasSizeRamp&&Re.infos.push({label:pe.label,symbol:jt})}else if(VA(pe)){pe.outputUnit&&(O.title="("+pe.toJSON().outputUnit+")"),Re.title=pe.attributeField;const jt=pe.getClassBreakInfos();jt?.length?jt.forEach(ir=>{Re.infos.push({label:ir.minValue+" - "+ir.maxValue,symbol:ir.symbol})}):Re.infos.push({label:pe.attributeField,symbol:pe.getDefaultSymbol()})}else GA(pe)&&be.push(O._getStretchLegendElements(pe,{min:0,max:255}));const yt=pe.defaultSymbol;!yt||tt||fm(pe)||Ge&&!O._hasColorRamp&&!O._hasSizeRamp&&!O._hasOpacityRamp||be.push({type:"symbol-table",infos:[{label:pe.defaultLabel||"others",symbol:yt}]}),Re.infos.length&&be.unshift(Re);const It=v.opacity??O.opacity,Nt=O._isTallSymbol("visualVariables"in pe&&pe.visualVariables),Rt=Oy(O.layer)||GC(O.layer),Jt=be.reduce((jt,ir)=>jt.concat(O._getAllInfos(ir)),[]).filter(jt=>!!jt?.symbol).map(jt=>O._getSymbolPreview(jt,It,{isDefault:jt.symbol===yt,applyScaleDrivenSize:!ft.has(jt.symbol),symbolConfig:{isTall:Nt,isSquareFill:Rt},effectList:ft.has(jt.symbol)?null:O.effectList}));return pe=null,yield(0,fi.as)(Jt),be})()}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(d){const v=d?.infos;return v?v.reduce((O,A)=>O.concat(this._getAllInfos(A)),[]):[d]}_constructTileImageryStretchRendererElements(d){const v=this.layer,O=v.rasterInfo,A=O.bandCount||d.statistics.length;let j,te,pe=[];const be=O.keyProperties&&O.keyProperties.BandProperties,Re=d?.statistics?.length?d.statistics:O?.statistics;if(Re)j=void 0!==Re[0].min?Re[0].min:Re[0][0],te=Re[0].max||Re[0][1];else{const tt=WA[v.rasterInfo.pixelType.toLowerCase()];j=tt[0],te=tt[1]}if(v.hasStandardTime()&&(j=v.getStandardTimeValue(j),te=v.getStandardTimeValue(te)),1===O.bandCount||1===v.bandIds?.length)return this._getStretchLegendElements(d,{min:j,max:te});function Ge(tt){const ft=(v?.bandIds?.length?v.bandIds:Array.from(Array(Math.min(O.bandCount,3)).keys())).map(yt=>tt&&tt[yt]&&tt[yt].BandName||"band"+(yt+1));return ft.length<3?ft.push(ft[1]):ft.length>3&&ft.splice(3),ft}return pe=be&&be.length>=A?Ge(be):Ge(),this._createSymbolTableElementMultiBand(pe)}_getStretchLegendElements(d,v){const A=(0,Cy.fD)(d.colorRamp,v);return{type:"stretch-ramp",title:"",infos:A,preview:(0,xh.jT)(A.map(j=>j.color))}}_getSizeLegendElement(d,v,O,A){var j=this;return(0,oi.Z)(function*(){return{type:"size-ramp",title:j._hasClusterSizeVariable?j._getClusterTitle(v):d,infos:yield M7(O,v,yield(0,wp.jb)(O),j.scale,j.view.type,A)}})()}_createSymbolTableElementMultiBand(d){const v=[],O=["red","green","blue"];return d.forEach((A,j)=>{v.push({label:{colorName:O[j],bandName:A},src:wp.uY[j],opacity:this.opacity??1})}),v}_updateInfosforClassedSizeRenderer(d,v){const O=d.authoringInfo&&"class-breaks-size"===d.authoringInfo.type,A=d.classBreakInfos.some(j=>(0,N0.YW)(j.symbol));if(O&&A){const j=30,pe=d.classBreakInfos.length,be=(j-12)/(pe>1?pe-1:pe);v.forEach((Re,Ge)=>{Re.size=j-be*Ge})}}_isTallSymbol(d){let v=!1,O=!1;if(d)for(let A=0;A<d.length&&(!v||!O);A++){const j=d[A];"size"===j.type&&("height"===j.axis&&(v=!0),"width-and-depth"===j.axis&&(O=!0))}return v&&O}_getSymbolPreview(d,v,O){var A=this;return(0,oi.Z)(function*(){let j=!O?.isDefault&&null==d.size&&A._hasSizeRamp?(0,rn.Wz)(r7.b_.size):d.size;if(A._scaleDrivenSizeVariable&&O?.applyScaleDrivenSize){const{getSize:te}=yield Promise.resolve().then(T.bind(T,81808));j=te(A._scaleDrivenSizeVariable,null,{view:A.view.type,scale:A.scale,shape:"simple-marker"===d.symbol.type?d.symbol.style:null})}return(0,xh.l3)(d.symbol,{size:j,opacity:v,scale:!1,symbolConfig:O?.symbolConfig,effectView:O?.effectList}).then(te=>(d.preview=te,d)).catch(()=>(d.preview=null,d))})()}_loadRenderer(d){var v=this;return(0,oi.Z)(function*(){const O=[],A=v.layer;d=d.clone(),v._hasClusterSizeVariable=!1;const j="visualVariables"in d&&d.visualVariables?.some(pe=>"size"===pe.type&&"outline"!==pe.target&&!CE.test(pe.valueExpression));if(d&&"visualVariables"in d&&!j&&"featureReduction"in A&&"cluster"===A.featureReduction?.type){const be=(0,at.Wg)(function o7(d,v){if(!d||!("visualVariables"in d)||!d.visualVariables)return null;const O=d.visualVariables.find(j=>"size"===j.type),A=((d,v)=>{const O=d.featuresTilingScheme.getClosestInfoForScale(d.scale).level;return v?.levels?v.levels[O]:null})(v,O);return A?new i7.Z({field:O.field,minSize:A[2].size,minDataValue:A[2].value,maxSize:A[3].size,maxDataValue:A[3].value}):null}(v.layerView._effectiveRenderer,v.view));if(be){const Re=A.featureReduction;if("clusterMinSize"in Re&&"clusterMaxSize"in Re){const{clusterMinSize:tt,clusterMaxSize:ft}=Re;be.legendOptions=new t7.Z({showLegend:tt!==ft})}d.visualVariables=(d.visualVariables||[]).concat([be]),v._hasClusterSizeVariable=!0}}const te=yield(0,wp.jb)(d);if(mm(d)||WC(d)){const pe=(d.classBreakInfos||d.uniqueValueInfos).map(be=>v._fetchSymbol(be.symbol,te).then(Re=>{be.symbol=Re}).catch(()=>{be.symbol=null}));Array.prototype.push.apply(O,pe)}return O.push(v._fetchSymbol(d.symbol||d.defaultSymbol,d.defaultSymbol?null:te).then(pe=>{v._applySymbolToRenderer(d,pe,fm(d))}).catch(()=>{v._applySymbolToRenderer(d,null,fm(d))})),(0,fi.as)(O).then(()=>d)})()}_applySymbolToRenderer(d,v,O){O?d.symbol=v:d.defaultSymbol=v}_fetchSymbol(d,v){var O=this;return(0,oi.Z)(function*(){if(!d)throw new Error;if("web-style"===d.type){const A=O._webStyleSymbolCache;try{const j=yield"2d"===O.view.type?d.fetchCIMSymbol({cache:A}):d.fetchSymbol({cache:A});return O._getAppliedCloneSymbol(j,v)}catch{throw Rp.warn("Fetching web-style failed!"),new Error}}return O._getAppliedCloneSymbol(d,v)})()}_getAppliedCloneSymbol(d,v){if(!d||!v)return d;const O=d.clone(),A=v&&v.toRgba();return O.type.includes("3d")?this._applyColorTo3dSymbol(O,A):"cim"===O.type?(0,AA.ZB)(O,v):O.color&&(O.color=new yc.Z(A||O.color)),O}_applyColorTo3dSymbol(d,v){v&&d.symbolLayers.forEach(O=>{O&&(O.material||(O.material={}),O.material.color=new yc.Z(v))})}_getVisualVariableLegendElements(d,v){var O=this;return(0,oi.Z)(function*(){if(!("visualVariables"in d)||!d.visualVariables||"vector-field"===d.type)return null;const A=d.visualVariables,j=[],te=[],pe=[];for(const ft of A)"color"===ft.type?j.push(ft):"size"===ft.type?te.push(ft):"opacity"===ft.type&&pe.push(ft);const be=[...j,...te,...pe];let Re,Ge;if(0===j.length&&mm(d)&&d.classBreakInfos&&1===d.classBreakInfos.length){const ft=d.classBreakInfos[0];Re=ft&&ft.symbol}if(0===j.length&&fm(d)&&(Re=d.symbol),Re)if(Re.type.includes("3d")){const ft=Re.symbolLayers.getItemAt(0);"water"===ft.type?(0,at.pC)(ft.color)&&(Ge=ft.color):(0,at.pC)(ft.material)&&(0,at.pC)(ft.material.color)&&(Ge=ft.material.color)}else Re.url||(Ge=Re.color);const tt=O.effectList;return(yield Promise.all(be.map(function(){var ft=(0,oi.Z)(function*(yt){if(!yt.legendOptions||!1!==yt.legendOptions.showLegend){const It=NC(d)?yt.field:O._getRampTitle(yt,v);let Nt=null;const Rt="getField"in v&&v.getField&&v.getField(yt.field),Jt=Rt&&(0,QN.y2)(Rt);if("color"===yt.type){const jt=yield(0,Cy.pO)(yt,null,Jt);Nt={type:"color-ramp",title:It,infos:jt,preview:(0,xh.jT)(jt.map(ir=>ir.color),{effectList:tt})},O._hasColorRamp||(O._hasColorRamp=!(null==Nt.infos||!Nt.infos.length))}else if("size"===yt.type&&"outline"!==yt.target)CE.test(yt.valueExpression)?O._hasClusterSizeVariable||(O._scaleDrivenSizeVariable=yt):(Nt=yield O._getSizeLegendElement(It,yt,d,Jt),O._hasSizeRamp||(O._hasSizeRamp=!(null==Nt.infos||!Nt.infos.length)));else if("opacity"===yt.type){const jt=yield(0,Cy.pO)(yt,Ge,Jt);Nt={type:"opacity-ramp",title:It,infos:jt,preview:(0,xh.jT)(jt.map(ir=>ir.color),{effectList:tt})},O._hasOpacityRamp||(O._hasOpacityRamp=!(null==Nt.infos||!Nt.infos.length))}return Nt&&Nt.infos?Nt:null}});return function(yt){return ft.apply(this,arguments)}}()))).filter(ft=>!!ft)})()}_getDomainName(d,v,O){if(d&&"function"!=typeof d){const A="getField"in O&&O.getField&&O.getField(d),j=A&&"getFieldDomain"in O&&O.getFieldDomain?O.getFieldDomain(A.name):null;return j&&"coded-value"===j.type?j.getName(v):null}return null}_getClusterTitle(d){const v=this.layer,O=d.field;if("featureReduction"in v&&v.featureReduction&&"cluster"===v.featureReduction.type){const A=v.featureReduction,j="popupTemplate"in A&&A.popupTemplate,te=j&&j.fieldInfos;if(te)for(const pe of te)if(pe.fieldName===O)return"cluster_count"===O?pe.label||{showCount:!0}:pe.label}return{showCount:!0}}_getRampTitle(d,v){let O=d.field,A=d.normalizationField,j=!1,te=!1,pe=!1,be=null;O="function"==typeof O?null:O,A="function"==typeof A?null:A;const Re=d.legendOptions&&d.legendOptions.title;if(null!=Re)be=Re;else if(d.valueExpressionTitle)be=d.valueExpressionTitle;else{if("renderer"in v&&v.renderer&&"authoringInfo"in v.renderer&&v.renderer.authoringInfo&&v.renderer.authoringInfo.visualVariables){const Ge=v.renderer.authoringInfo.visualVariables;for(let tt=0;tt<Ge.length;tt++){const ft=Ge[tt];if("color"===ft.type){if("ratio"===ft.style){j=!0;break}if("percent"===ft.style){te=!0;break}if("percent-of-total"===ft.style){pe=!0;break}}}}be={field:O&&this._getFieldAlias(O,v),normField:A&&this._getFieldAlias(A,v),ratio:j,ratioPercent:te,ratioPercentTotal:pe}}return be}_getRendererTitle(d,v){const O=d;if(O.legendOptions&&O.legendOptions.title)return O.legendOptions.title;if(O.valueExpressionTitle)return O.valueExpressionTitle;let A=O.field,j=null,te=null;mm(O)&&(j=O.normalizationField,te="percent-of-total"===O.normalizationType),A="function"==typeof A?null:A,j="function"==typeof j?null:j;let pe=null;return(A||j)&&(pe={field:A&&this._getFieldAlias(A,v),normField:j&&this._getFieldAlias(j,v),normByPct:te}),pe}_getFieldAlias(d,v){const O="popupTemplate"in v&&v.popupTemplate,A=O&&O.fieldInfos;let j=null;A&&A.some(Re=>d===Re.fieldName&&(j=Re,!0));let te=null;"getField"in v&&v.getField?te=v.getField(d):"fieldsIndex"in v&&v.fieldsIndex&&(te=v.fieldsIndex.get(d));const pe=j||te;let be=null;return pe&&(be=j&&j.label||te&&te.alias||"name"in pe&&pe.name||"fieldName"in pe&&pe.fieldName),be}_isUnclassedRenderer(d){const v=d.visualVariables;let O=!1;return mm(d)&&d.classBreakInfos&&1===d.classBreakInfos.length&&v&&(O=d.field?v.some(A=>!(!A||d.field!==A.field||(d.normalizationField||A.normalizationField)&&d.normalizationField!==A.normalizationField)):!!v.length),O}};(0,Je._)([(0,ht.Cb)()],dl.prototype,"children",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],dl.prototype,"effectList",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"layerView",void 0),(0,Je._)([(0,ht.Cb)()],dl.prototype,"layer",void 0),(0,Je._)([(0,ht.Cb)()],dl.prototype,"legendElements",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],dl.prototype,"opacity",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"parent",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,dependsOn:[]})],dl.prototype,"ready",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"hideLayersNotInCurrentView",void 0),(0,Je._)([(0,ht.Cb)()],dl.prototype,"keepCacheOnDestroy",void 0),(0,Je._)([(0,ht.Cb)()],dl.prototype,"respectLayerVisibility",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],dl.prototype,"scale",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"sublayerIds",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],dl.prototype,"isScaleDriven",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"title",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0,dependsOn:["ready"],value:0})],dl.prototype,"version",null),(0,Je._)([(0,ht.Cb)()],dl.prototype,"view",void 0),dl=(0,Je._)([(0,Ds.j)("esri.widgets.Legend.support.ActiveLayerInfo")],dl);const JA=dl;var J7=T(56683);const XA=Na.Z.ofType(JA),X7=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],QA="view.basemapView.baseLayerViews",qA="view.groundView.layerViews",eL="view.basemapView.referenceLayerViews",Q7=[QA,qA,"view.layerViews",eL];let Td=class extends Li.Z{constructor(d){super(d),this._handles=new so.Z,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Na.Z,this.activeLayerInfos=new XA,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add((0,wr.YP)(()=>this.view,()=>this._viewHandles(),wr.nn),"view"),this._handles.add((0,J7.qe)(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove("state"),this.view&&this._handles.add((0,wr.YP)(()=>this.state,()=>this._stateHandles(),wr.nn),"state")}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove(["all-layer-views","legend-properties"]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(d){this._handles.remove(d);const v=this._activeLayerInfosByLayerViewId[d];delete this._activeLayerInfosByLayerViewId[d],v&&v.parent&&v.parent.children.remove(v)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:d}=this.view;d.length&&this._refresh(),this._handles.add(d.on("change",v=>this._allLayerViewsChangeHandle(v)),"all-layer-views"),this._handles.add((0,wr.YP)(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),"legend-properties")}_allLayerViewsChangeHandle(d){d.removed.forEach(v=>this._destroyViewActiveLayerInfo(v.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(d){if(d.length<2)return;const v=[];d.forEach(A=>{if(!A.parent){const j=A.layer.parent,te=j&&"uid"in j&&this._layerViewByLayerId[j.uid],pe=te&&this._activeLayerInfosByLayerViewId[te.uid];pe&&d.includes(pe)&&(v.push(A),A.parent=pe,pe.children.add(A),this._sortActiveLayerInfos(pe.children))}}),d.removeMany(v);const O={};this.view.allLayerViews.forEach((A,j)=>O[A.layer.uid]=j),d.sort((A,j)=>(O[j.layer.uid]||0)-(O[A.layer.uid]||0))}_generateLayerViews(){const d=[];return Q7.filter(this._filterLayerViews,this).map(this.get,this).filter(v=>null!=v).forEach(this._collectLayerViews("layerViews",d)),d}_filterLayerViews(d){return!(!this.basemapLegendVisible&&(d===QA||d===eL)||!this.groundLegendVisible&&d===qA)}_collectLayerViews(d,v){const O=A=>(A&&A.forEach(j=>{v.push(j),O(j[d])}),v);return O}_filterLayerViewsByLayerInfos(d){const v=this.layerInfos;return!v||!v.length||v.some(O=>this._hasLayerInfo(O,d))}_hasLayerInfo(d,v){const O=this._isLayerUIDMatching(d.layer,v.layer.uid);return O&&(this._layerInfosByLayerViewId[v.uid]=d),O}_isLayerUIDMatching(d,v){return d&&(d.uid===v||this._hasLayerUID(d.layers,v))}_hasLayerUID(d,v){return d&&d.some(O=>this._isLayerUIDMatching(O,v))}_isLayerViewSupported(d){return!!X7.includes(d.layer.declaredClass)&&(this._layerViewByLayerId[d.layer.uid]=d,!0)}_generateActiveLayerInfo(d){this._isLayerActive(d)?this._buildActiveLayerInfo(d):(this._handles.remove(d.uid),this._handles.add((0,wr.YP)(()=>[d.legendEnabled,d.layer?.legendEnabled],()=>this._layerActiveHandle(d)),d.uid))}_layerActiveHandle(d){this._isLayerActive(d)&&(this._handles.remove(d.uid),this._buildActiveLayerInfo(d))}_isLayerActive(d){return!this.respectLayerVisibility||d.legendEnabled&&d.get("layer.legendEnabled")}_buildActiveLayerInfo(d){const v=d.layer,O=d.uid,A=this._layerInfosByLayerViewId[O];let j=this._activeLayerInfosByLayerViewId[O];if(j||(j=new JA({layer:v,layerView:d,title:A&&void 0!==A.title&&A.layer.uid===v.uid?A.title:v.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:A&&A.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[O]=j),j.parent=this._activeLayerInfosByLayerViewId[(v.parent&&"uid"in v.parent&&this._layerViewByLayerId[v.parent?.uid])?.uid],!this._handles.has(O)){const pe=[(0,wr.YP)(()=>v.title,be=>this._titleHandle(be,j)),(0,wr.YP)(()=>[v.opacity,"renderer"in v&&v.renderer,"pointSymbol"in v&&v.pointSymbol,"lineSymbol"in v&&v.lineSymbol,"polygonSymbol"in v&&v.polygonSymbol],()=>this._constructLegendElements(j)),(0,wr.gx)(()=>!0===this.view?.stationary,()=>this._scaleHandle(j),wr.nn),(0,wr.YP)(()=>d._effectiveRenderer,()=>this._constructLegendElements(j)),(0,wr.YP)(()=>"effect"in v&&v.effect,()=>this._constructLegendElements(j))];if(this.respectLayerVisibility){const be=(0,wr.YP)(()=>d.legendEnabled,Ge=>this._legendEnabledHandle(Ge,j)),Re=(0,wr.YP)(()=>v.legendEnabled,Ge=>this._legendEnabledHandle(Ge,j));pe.push(be,Re)}this._handles.add(pe,O)}j.isScaleDriven||this._constructLegendElements(j),this._addActiveLayerInfo(j)}_titleHandle(d,v){v.title=d,this._constructLegendElements(v)}_legendEnabledHandle(d,v){d?this._addActiveLayerInfo(v):this._removeActiveLayerInfo(v)}_scaleHandle(d){(d.isScaleDriven||d.hideLayersNotInCurrentView)&&this._constructLegendElements(d)}_addActiveLayerInfo(d){const{layerView:v,layer:O}=d;if(this._isLayerActive(v)&&!this.activeLayerInfos.includes(d)){const A=d.parent;if(A)A.children.includes(d)||A.children.push(d),this._sortActiveLayerInfos(A.children);else{const j=this.layerInfos?.some(te=>te.layer.uid===O.uid);O.parent&&"uid"in O.parent&&!j?this._activeLayerInfosWithNoParent.add(d):(this.activeLayerInfos.add(d),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const j=[];this._activeLayerInfosWithNoParent.forEach(te=>{const pe=te.layer.parent,Re=this._activeLayerInfosByLayerViewId[(pe&&"uid"in pe&&this._layerViewByLayerId[pe?.uid])?.uid];Re&&(j.push(te),te.parent=Re)}),j.length&&(this._activeLayerInfosWithNoParent.removeMany(j),j.forEach(te=>this._addActiveLayerInfo(te)))}}}_removeActiveLayerInfo(d){const v=d.parent;v?v.children.remove(d):this.activeLayerInfos.remove(d)}_constructLegendElements(d){const v=d.layer;"featureCollections"in v&&v.featureCollections?d.buildLegendElementsForFeatureCollections(v.featureCollections):"featureReduction"in v&&"binning"===v.featureReduction?.type&&"renderer"in v.featureReduction?d.buildLegendElementsForRenderer(v.featureReduction.renderer):"renderer"in v&&v.renderer?d.buildLegendElementsForRenderer(v.renderer):"url"in v&&v.url?d.buildLegendElementsForTools():d.children.forEach(O=>this._constructLegendElements(O))}};(0,Je._)([(0,ht.Cb)({type:XA})],Td.prototype,"activeLayerInfos",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"basemapLegendVisible",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"groundLegendVisible",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"hideLayersNotInCurrentView",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"keepCacheOnDestroy",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"respectLayerVisibility",void 0),(0,Je._)([(0,ht.Cb)()],Td.prototype,"layerInfos",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],Td.prototype,"state",null),(0,Je._)([(0,ht.Cb)()],Td.prototype,"view",void 0),Td=(0,Je._)([(0,Ds.j)("esri.widgets.Legend.LegendViewModel")],Td);const q7=Td;var M_=T(30695);const Xo_squareTableRow="esri-relationship-ramp--square__table-row",Xo_squareTableCell="esri-relationship-ramp--square__table-cell",Xo_squareTableLabel="esri-relationship-ramp--square__table-label";function tL(d,v,O,A){const{focus:j,labels:te}=d,pe=!!j,be=function tW(d,v,O,A,j=60){const{focus:te,numClasses:pe,colors:be,rotation:Re}=d,Ge=!!te,tt=Math.sqrt(j**2+j**2)+(Ge?0:5),ft=[],yt=[],It=[],Nt=(j||75)/pe;for(let Ks=0;Ks<pe;Ks++){const li=Ks*Nt;for(let si=0;si<pe;si++){const Ei=si*Nt,ts=(0,M_.jA)(be[Ks][si]),$s=(0,M_.kQ)(null),Ms={type:"rect",x:Ei,y:li,width:Nt,height:Nt};ft.push((0,M_.ch)(ts)),yt.push((0,M_.vq)(Ms,ts.fill,$s,null)),It.push((0,M_.A5)(Ms))}}let or=null;Ge||(or="margin: -15px -15px -18px -15px");const pr=rL("left",te,v),Lr=rL("right",te,v),Br=(0,M_.al)(It),gs=(0,M_.iL)(Br,tt,tt,0,!1,Re,!1),Cs=(0,M_.iL)(Br,tt,tt,0,!1,Ge?-45:null,!1),Us={filter:(0,N0.wJ)(A),opacity:null==O?null:`${O}`};return(0,vs.u)("div",{styles:Us,class:Ge?"esri-relationship-ramp--diamond__middle-column--ramp":Xo_squareTableCell},(0,vs.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:tt,height:tt,style:or},(0,vs.u)("defs",null,(0,vs.u)("marker",{id:`${v}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},(0,vs.u)("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),(0,vs.u)("marker",{id:`${v}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},(0,vs.u)("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),ft),(0,vs.u)("g",{transform:gs},yt),(0,vs.u)("g",{transform:Cs},(0,vs.u)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":pr.markerStart,"marker-end":pr.markerEnd,x1:-10,y1:j-15,x2:-10,y2:15}),(0,vs.u)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":Lr.markerStart,"marker-end":Lr.markerEnd,x1:15,y1:j+10,x2:j-15,y2:j+10}))))}(d,v,O,A),Ge=(0,Cp.dZ)();return pe?(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__container",styles:{justifyContent:"center"}},(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__left-column"},Ge?te.right:te.left),(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__middle-column"},(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},te.top),be,(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},te.bottom)),(0,vs.u)("div",{class:"esri-relationship-ramp--diamond__right-column"},Ge?te.left:te.right)):(0,vs.u)("div",{class:"esri-relationship-ramp--square__table"},(0,vs.u)("div",{class:Xo_squareTableRow},(0,vs.u)("div",{class:(0,Cp.Sh)(Xo_squareTableCell,Xo_squareTableLabel,"esri-relationship-ramp--square__table-label--right-bottom")},Ge?te.top:te.left),(0,vs.u)("div",{class:Xo_squareTableCell}),(0,vs.u)("div",{class:(0,Cp.Sh)(Xo_squareTableCell,Xo_squareTableLabel,"esri-relationship-ramp--square__table-label--left-bottom")},Ge?te.left:te.top)),(0,vs.u)("div",{class:Xo_squareTableRow},(0,vs.u)("div",{class:Xo_squareTableCell}),be,(0,vs.u)("div",{class:Xo_squareTableCell})),(0,vs.u)("div",{class:Xo_squareTableRow},(0,vs.u)("div",{class:(0,Cp.Sh)(Xo_squareTableCell,Xo_squareTableLabel,"esri-relationship-ramp--square__table-label--right-top")},Ge?te.right:te.bottom),(0,vs.u)("div",{class:Xo_squareTableCell}),(0,vs.u)("div",{class:(0,Cp.Sh)(Xo_squareTableCell,Xo_squareTableLabel,"esri-relationship-ramp--square__table-label--left-top")},Ge?te.bottom:te.right)))}function rL(d,v,O){const A=`${O}_arrowStart`,j=`${O}_arrowEnd`,te="left"===d,pe={markerStart:null,markerEnd:null};switch(v){case"HL":te?pe.markerStart=`url(#${j})`:pe.markerEnd=`url(#${A})`;break;case"LL":pe.markerStart=`url(#${j})`;break;case"LH":te?pe.markerEnd=`url(#${A})`:pe.markerStart=`url(#${j})`;break;default:pe.markerEnd=`url(#${A})`}return pe}T(50645);const sW=(0,T(62996).E)();function iW(d="vertical"){const v="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===d?(0,vs.u)("svg",{height:"4",width:"10"},(0,vs.u)("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:v})):(0,vs.u)("svg",{height:"10",width:"10"},(0,vs.u)("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:v}))}function nW(d,v="vertical"){const O=document.createElement("div");return O.style.height="20px",O.className="esri-univariate-above-and-below-ramp__symbol",null!=d&&(O.style.opacity=d.toString()),sW.append(O,iW.bind(null,v)),O}function iL(d,v,O="vertical",A){d.infos.forEach((j,te)=>{if(A&&2===te)j.preview=nW(v,O);else{const pe=(0,rn.F2)(j.size)+("horizontal"===O?20:10),be="div"===j.preview.tagName.toLowerCase(),Re=be?j.preview:document.createElement("div");Re.className="esri-univariate-above-and-below-ramp__symbol","horizontal"===O?Re.style.width=`${pe}px`:Re.style.height=`${pe}px`,be||Re.appendChild(j.preview),j.preview=Re}})}function DE(d,v="classic"){const O=d.infos;return"classic"===v?((0,rn.F2)(O[0].size)+10)/2:((0,rn.F2)(O[0].size)-(0,rn.F2)(O[O.length-1].size))/2}function ym(d,v){if(!d)return null;const O=d.infos.map(j=>j.color),A=(0,xh.jT)("full"===v.type?O:"above"===v.type?O.slice(0,3):O.slice(2,5),{width:v.width,height:v.height,align:v.rampAlignment,effectList:v.effectList});return A.className="esri-legend__color-ramp",null!=v.opacity&&(A.style.opacity=v.opacity.toString()),A}function kC(d,v,O,A="vertical"){let j=0;const te=d.infos,pe=Math.floor(te.length/2),Re="full"===v||"below"===v?te.length-1:pe;for(let Ge="full"===v||"above"===v?0:pe;Ge<=Re;Ge++)j+=O&&Ge===pe?"horizontal"===A?10:20:(0,rn.F2)(te[Ge].size)+("horizontal"===A?20:10);return Math.round(j)}function vm(d,v,O,A="vertical"){const j=kC(d,v,O,A),te=d.infos,pe=Math.floor(te.length/2),be="full"===v||"above"===v?0:pe,Re="full"===v||"below"===v?te.length-1:pe,tt=O?"vertical"===A?20:10:0,ft="vertical"===A?10*("full"===v?2:1):20*("full"===v?2:1);return Math.round(j-((0,rn.F2)("full"===v?te[be].size+te[Re].size:"above"===v?te[be].size:te[Re].size)/2+tt/2+ft/2))}function nL(d,v,O="vertical"){const A=d.infos;let j=A.find(({type:pe})=>"size-ramp"===pe),te=A.find(({type:pe})=>"color-ramp"===pe);return j&&(j={...j},j.infos=[...j.infos],iL(j,v,O,!0)),te&&(te={...te},te.infos=[...te.infos]),"horizontal"===O&&(j?.infos.reverse(),te?.infos.reverse()),{sizeRampElement:j,colorRampElement:te}}function oL(d,v="vertical"){const O=d.infos;let A=O.find(({type:te})=>"size-ramp"===te),j=O.find(({type:te})=>"color-ramp"===te);return A&&(A={...A},A.infos=[...A.infos],iL(A,null,v,!1)),j&&(j={...j},j.infos=[...j.infos]),"horizontal"===v&&(A?.infos.reverse(),j?.infos.reverse()),{sizeRampElement:A,colorRampElement:j}}var $C=T(97059);function xl(d){d.appendChild(this)}function Em(d,v,O){if(!v)return;if("string"==typeof v||"number"==typeof v)return v;if("value"in v||"unit"in v)return(0,$C.n)(d.dotValue,v);if("colorName"in v||"bandName"in v)return d[v.colorName]+": "+(d[v.bandName]||v.bandName);if("showCount"in v)return v.showCount?d.clusterCountTitle:null;let A=null;return function oW(d,v){return v}(0,O)?A=v.ratioPercentTotal?"showRatioPercentTotal":v.ratioPercent?"showRatioPercent":v.ratio?"showRatio":v.normField?"showNormField":v.field?"showField":null:aL(0,O)&&(A=v.normField?"showNormField":v.normByPct?"showNormPct":v.field?"showField":null),A?(0,$C.n)("showField"===A?"{field}":d[A],{field:v.field,normField:v.normField}):null}function aL(d,v){return!v}function lL(d,v){return!!(v&&"Stretched"===v&&d.version>=10.3&&"esri.layers.ImageryLayer"===d.declaredClass)}var Py=T(13065);const Ji_layerRow="esri-legend--card__layer-row",Ji_rampLabel="esri-legend--card__ramp-label",Ji_symbol="esri-legend--card__symbol",Ji_layerInfo="esri-legend__layer-cell esri-legend__layer-cell--info";var Dy;!function(d){d.Auto="auto",d.Stack="stack",d.SideBySide="side-by-side"}(Dy||(Dy={}));const Mm=window.devicePixelRatio;let $d=class extends Op.Z{constructor(d,v){super(d,v),this._handles=new so.Z,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=Dy.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own((0,wr.YP)(()=>this.activeLayerInfos,d=>{this._handles.removeAll(),this._watchForSectionChanges(d)}))}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===Dy.Auto&&this.view.container.clientWidth<=768||this.layout===Dy.Stack;const d=this.activeLayerInfos,v=d&&d.toArray().map(be=>this._renderLegendForLayer(be)).filter(be=>!!be);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const O=this._sectionNames.length,A=this._sectionNames.map((be,Re)=>{const Ge=(0,$C.n)(this.messagesCommon.pagination.pageText,{index:Re+1,total:O});return(0,vs.u)("div",{key:be,role:"tab",id:be,"aria-label":Ge,"aria-controls":`${be}-panel`,"aria-selected":(this._selectedSectionName===be).toString(),tabIndex:this._selectedSectionName===be?0:-1,title:Ge,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes("esri-legend--card__carousel-indicator",{"esri-legend--card__carousel-indicator--activated":this._selectedSectionName===be}),"data-section-name":be})}),j=this._hasIndicators&&O>1?(0,vs.u)("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},A):null,te=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):v&&v.length?v:null;return(0,vs.u)("div",{class:this.classes("esri-legend--card",{"esri-legend--stacked":this._hasIndicators})},te||(0,vs.u)("div",{class:"esri-legend--card__message"},this.messages.noLegend),j)}_selectSection(d){const v=d.target.getAttribute("data-section-name");v&&(this._selectedSectionName=v)}_focusSection(d){switch(d.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(d);break;case"Enter":case" ":this._selectSection(d)}}_switchSectionOnArrowPress(d){const v=d.key,O="ArrowLeft"===v?-1:1,A=d.target.getAttribute("data-section-name"),j=this._sectionNames.indexOf(A),te=this._sectionNames;let pe=null;-1!==j&&(te[j+O]?pe=document.getElementById(te[j+O]):"ArrowLeft"===v?pe=document.getElementById(te[te.length-1]):"ArrowRight"===v&&(pe=document.getElementById(te[0])),pe&&pe.focus())}_watchForSectionChanges(d){if(this._generateSectionNames(),d){d.forEach(O=>{const A=`activeLayerInfo-${O.layer.uid}-version-change`;this._handles.remove(A),this._watchForSectionChanges(O.children),this._handles.add((0,wr.YP)(()=>O.version,()=>this._generateSectionNames()),A)});const v="activeLayerInfos-collection-change";this._handles.remove(v),this._handles.add(d.on("change",()=>this._watchForSectionChanges(d)),v)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(d,v,O){return`${this.id}${d.uid}-type-${v.type}-${O}`}_generateSectionNamesForActiveLayerInfo(d){d.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),d.legendElements&&d.legendElements.forEach((v,O)=>{this._sectionNames.push(this._getSectionName(d.layer,v,O))})}_renderLegendForLayer(d){if(!d.ready)return null;if(d.children.length){const v=d.children.map(O=>this._renderLegendForLayer(O)).toArray();return(0,vs.u)("div",{key:d.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},(0,vs.u)("div",{class:"esri-legend--card__service-caption-container"},d.title),v)}{const v=d.legendElements;if(v&&!v.length)return null;const O=v.some(te=>"relationship-ramp"===te.type),A=v.map((te,pe)=>this._renderLegendForElement(te,d,pe,O)).filter(te=>!!te);return A.length?(0,vs.u)("div",{key:d.layer.uid,class:this.classes("esri-legend--card__service",{"esri-legend--card__group-layer-child":!!d.parent})},(0,vs.u)("div",{class:"esri-legend--card__service-caption-container"},(0,vs.u)("div",{class:"esri-legend--card__service-caption-text"},d.title)),(0,vs.u)("div",{class:"esri-legend--card__service-content"},A)):null}}_renderLegendForElement(d,v,O,A=!1){const pe="size-ramp"===d.type,be=v.layer;let Re=null;if("string"==typeof d.title)Re=d.title;else if(d.title){const Nt=d.title,Rt=Em(this.messages,Nt,"color-ramp"===d.type||"opacity-ramp"===d.type);Re=Nt.title?`${Nt.title} (${Rt})`:Rt}const Ge=this._getSectionName(be,d,O),tt=this._hasIndicators?(0,vs.u)("div",null,(0,vs.u)(Py.X6,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},v.title),(0,vs.u)(Py.X6,{level:(0,Py.MJ)(this.headingLevel),class:"esri-legend--card__layer-caption"},Re)):Re?(0,vs.u)(Py.X6,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},Re):null,ft=v.effectList;let yt=null;if("symbol-table"===d.type){const Nt=d.infos.map((Rt,Jt)=>this._renderLegendForElementInfo(Rt,v,d.legendType,Jt)).filter(Rt=>!!Rt);Nt.length&&(yt=(0,vs.u)("div",{class:this.classes({"esri-legend--card__label-container":!(Nt[0].properties.classes&&Nt[0].properties.classes["esri-legend--card__symbol-row"]||A),"esri-legend--card__relationship-label-container":A})},Nt))}else"color-ramp"===d.type||"opacity-ramp"===d.type||"heatmap-ramp"===d.type?yt=this._renderLegendForRamp(d,be.opacity,ft):pe?yt=this._renderSizeRamp(d,be.opacity):"pie-chart-ramp"===d.type?yt=this._renderPieChartRamp(d):"relationship-ramp"===d.type?yt=tL(d,this.id,be.opacity,ft):"univariate-above-and-below-ramp"===d.type?yt=this._renderUnivariateAboveAndBelowRamp(d,be.opacity,ft):"univariate-color-size-ramp"===d.type&&(yt=this._renderUnivariateColorSizeRamp(d,be.opacity,ft));if(!yt)return null;const It=(0,vs.u)("div",{key:Ge,class:"esri-legend--card__section",id:`${Ge}-panel`,role:"tabpanel","aria-labelledby":Ge,tabIndex:0},[tt,yt]);return this._sectionMap.set(Ge,It),It}_renderPieChartRamp(d){return(0,vs.u)("div",{class:"esri-legend--card__pie-chart-ramp-preview",bind:d.preview,afterCreate:xl})}_renderUnivariateAboveAndBelowRamp(d,v,O){const{sizeRampElement:A,colorRampElement:j}=nL(d,v,"horizontal");if(!A)return null;const te=kC(A,"full",!0,"horizontal"),pe=vm(A,"above",!0,"horizontal"),be=vm(A,"below",!0,"horizontal"),Ge=ym(j,{width:pe,height:12,rampAlignment:"horizontal",opacity:v,type:"above",effectList:O}),tt=ym(j,{width:be,height:12,rampAlignment:"horizontal",opacity:v,type:"below",effectList:O}),ft=DE(A,"card"),yt=A.infos.map(or=>or.label),It=yt.length-1,Nt=yt.map((or,pr)=>0===pr||pr===It?(0,vs.u)("div",{key:pr},or):null),jt={marginTop:"3px",display:"flex"};(0,Cp.dZ)(this.container)?jt.marginRight=`${ft}px`:jt.marginLeft=`${ft}px`;const ir={width:`${te}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,vs.u)("div",{class:Ji_layerRow,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},(0,vs.u)("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},A.infos.map((or,pr)=>(0,vs.u)("div",{key:pr,class:Ji_symbol,bind:or.preview,afterCreate:xl}))),Ge?(0,vs.u)("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:jt,key:"color-ramp-preview"},(0,vs.u)("div",{bind:Ge,afterCreate:xl}),(0,vs.u)("div",{bind:tt,afterCreate:xl})):null,(0,vs.u)("div",{class:Ji_layerInfo},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:ir},Nt)))}_renderUnivariateColorSizeRamp(d,v,O){const{sizeRampElement:A,colorRampElement:j}=oL(d,"horizontal");if(!A)return null;const te=kC(A,"full",!1,"horizontal"),be=ym(j,{width:vm(A,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:v,type:"full",effectList:O}),Re=DE(A,"card"),Ge=A.infos.length-1,tt=A.infos.map((Rt,Jt)=>0===Jt||Jt===Ge?(0,vs.u)("div",{key:Jt},Rt.label):null),It={marginTop:"3px",display:"flex"};(0,Cp.dZ)(this.container)?It.marginRight=`${Re}px`:It.marginLeft=`${Re}px`;const Nt={width:`${te}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,vs.u)("div",{class:Ji_layerRow,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},(0,vs.u)("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},A.infos.map((Rt,Jt)=>(0,vs.u)("div",{key:Jt,class:Ji_symbol,bind:Rt.preview,afterCreate:xl}))),(0,vs.u)("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:It,key:"color-ramp-preview"},(0,vs.u)("div",{bind:be,afterCreate:xl})),(0,vs.u)("div",{class:Ji_layerInfo},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:Nt},tt)))}_renderLegendForElementInfo(d,v,O,A){const j=v.layer;if(d.type)return this._renderLegendForElement(d,v,A);const te=lL(j,O);if(d.preview){if(!d.symbol||!d.symbol.type.includes("simple-fill")){if(!d.label)return(0,vs.u)("div",{key:A,bind:d.preview,afterCreate:xl});const or={"esri-legend--card__symbol-cell":this._hasIndicators};return(0,vs.u)("div",{key:A,class:this.classes(Ji_layerRow,{"esri-legend--card__symbol-row":this._hasIndicators})},(0,vs.u)("div",{class:this.classes(or),bind:d.preview,afterCreate:xl}),(0,vs.u)("div",{class:this.classes("esri-legend--card__image-label",{"esri-legend--card__label-cell":this._hasIndicators})},Em(this.messages,d.label,!1)||""))}let pe=255,be=255,Re=255,Ge=0,tt=255,ft=255,yt=255,It=0;const Nt=d.symbol.color&&d.symbol.color.a,Rt=d.symbol.outline&&d.symbol.outline.color&&d.symbol.outline.color.a;Nt&&(pe=d.symbol.color.r,be=d.symbol.color.g,Re=d.symbol.color.b,Ge=d.symbol.color.a*j.opacity),Rt&&(tt=d.symbol.outline.color.r,ft=d.symbol.outline.color.g,yt=d.symbol.outline.color.b,It=d.symbol.outline.color.a*j.opacity);const Jt=d.symbol.color?.isBright??!0,jt=Jt?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",ir={background:Nt?`rgba(${pe}, ${be}, ${Re}, ${Ge})`:"none",color:Jt?"black":"white",textShadow:`-1px -1px 0 ${jt},\n                                              1px -1px 0 ${jt},\n                                              -1px 1px 0 ${jt},\n                                              1px 1px 0 ${jt}`,border:Rt?`1px solid rgba(${tt}, ${ft}, ${yt}, ${It})`:"none",filter:(0,N0.wJ)(v.effectList)};return(0,vs.u)("div",{key:A,class:Ji_layerRow},(0,vs.u)("div",{class:"esri-legend--card__label-element",styles:ir}," ",d.label," "))}if(d.src){const pe=this._renderImage(d,j,te);return(0,vs.u)("div",{key:A,class:Ji_layerRow},pe,(0,vs.u)("div",{class:"esri-legend--card__image-label"},d.label||""))}}_renderImage(d,v,O){const{label:A,src:j,opacity:te}=d,pe={"esri-legend--card__imagery-layer-image--stretched":O,[Ji_symbol]:!O},be={opacity:`${te??v.opacity}`};return(0,vs.u)("img",{alt:Em(this.messages,A,!1),src:j,border:0,width:d.width,height:d.height,class:this.classes(pe),styles:be})}_renderSizeRampLines(d){const v=d.infos,O=v[0],A=v[v.length-1],j=O.symbol,te=this._hasIndicators,pe=(0,rn.F2)(O.size+O.outlineSize)*Mm,be=(0,rn.F2)(A.size+A.outlineSize)*Mm,Re=te?pe:pe+50*Mm,Ge=te?pe/2+50*Mm:pe,tt=function _W(d){if(d){if(d.type.includes("3d")){const v=d.symbolLayers&&d.symbolLayers.length;if(!v)return;const O=d.symbolLayers.getItemAt(v-1).get("resource.primitive");return"triangle"===O||"cone"===O||"tetrahedron"===O}return"triangle"===d.style}}(j),ft=function hW(d){if(d){if(d.type.includes("3d")){const v=d.symbolLayers&&d.symbolLayers.length;if(!v)return;const O=d.symbolLayers.getItemAt(v-1),A=O.resource&&O.resource.primitive;return"circle"===A||"cross"===A||"kite"===A||"sphere"===A||"cube"===A||"diamond"===A}{const v=d.style;return"circle"===v||"diamond"===v||"cross"===v}}}(j),yt=document.createElement("canvas");yt.width=Re,yt.height=Ge,yt.style.width=yt.width/Mm+"px",yt.style.height=yt.height/Mm+"px";const It=yt.getContext("2d");if(te){It.beginPath();const Jt=Re/2-be/2,jt=Ge;It.moveTo(0,0),It.lineTo(Jt,jt);const pr=Re/2+be/2,Lr=Ge;It.moveTo(Re,0),It.lineTo(pr,Lr)}else{It.beginPath();const Jt=Re,jt=0;It.moveTo(0,Ge/2-be/2),It.lineTo(Jt,jt);const pr=Re,Lr=Ge;It.moveTo(0,Ge/2+be/2),It.lineTo(pr,Lr)}return It.strokeStyle="#ddd",It.stroke(),(0,vs.u)("div",{bind:yt,afterCreate:xl,styles:te?{display:"flex",marginTop:`-${tt?0:ft?pe/2:0}px`,marginBottom:`-${tt?be:ft?be/2:0}px`}:{display:"flex",marginRight:`-${tt?0:ft?pe/2:0}px`,marginLeft:`-${tt?0:ft?be/2:0}px`}})}_renderSizeRamp(d,v){const O=d.infos,A=O[0].label,j=O[O.length-1].label;let te=O[0].preview,pe=O[O.length-1].preview;const be=this._hasIndicators,Re={"flex-direction":be?"column":"row-reverse"};te&&(te=te.cloneNode(!0),te.style.display="flex"),pe&&(pe=pe.cloneNode(!0),pe.style.display="flex");const Ge={opacity:null!=v?`${v}`:""};return(0,vs.u)("div",{class:this.classes(Ji_layerRow,{"esri-legend--card__size-ramp-row":be})},(0,vs.u)("div",{class:Ji_rampLabel},be?A:j),(0,vs.u)("div",{class:"esri-legend--card__size-ramp-container",styles:Re},(0,vs.u)("div",{bind:te,afterCreate:xl,class:"esri-legend--card__size-ramp-preview",styles:Ge}),this._renderSizeRampLines(d),(0,vs.u)("div",{bind:pe,afterCreate:xl,class:"esri-legend--card__size-ramp-container",styles:Ge})),(0,vs.u)("div",{class:Ji_rampLabel},be?j:A))}_renderLegendForRamp(d,v,O){const A=d.infos,j="heatmap-ramp"===d.type,te=A.length-1,be=te>2&&!j?25*te:100,Re=be+20,tt=A.slice(0).reverse();tt.forEach((Lr,Br)=>{Lr.offset=j?Lr.ratio:Br/te});const ft=tt.length-1,yt=tt.length%2!=0&&tt[tt.length/2|0],It=yt&&(0,vs.u)("div",{class:"esri-legend--card__interval-separators-container"},(0,vs.u)("div",{class:"esri-legend--card__interval-separator"},"|"),(0,vs.u)("div",{class:Ji_rampLabel},yt.label)),Nt=A[A.length-1].label,Rt=A[0].label,jt=(0,M_.KB)([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:tt[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,y:0,width:be,height:25},fill:{type:"linear",x1:10,y1:0,x2:be+10,y2:0,colors:tt},stroke:{width:0}},{shape:{type:"path",path:`M${be+10} 0 L${Re} 12.5 L${be+10} 25 Z`},fill:tt[ft].color,stroke:{width:0}}]],Re,25),{messages:ir}=this,or={filter:(0,N0.wJ)(O),opacity:null==v?null:`${v}`};return(0,vs.u)("div",{class:Ji_layerRow,styles:{justifyContent:"center"}},(0,vs.u)("div",{class:Ji_rampLabel},j?ir[Nt]:Nt),(0,vs.u)("div",{class:"esri-legend--card__symbol-container"},(0,vs.u)("div",{styles:or},jt),It),(0,vs.u)("div",{class:Ji_rampLabel},j?ir[Rt]:Rt))}};(0,Je._)([(0,ht.Cb)()],$d.prototype,"activeLayerInfos",void 0),(0,Je._)([(0,ht.Cb)()],$d.prototype,"headingLevel",void 0),(0,Je._)([(0,ht.Cb)()],$d.prototype,"layout",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Legend/t9n/Legend")],$d.prototype,"messages",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/t9n/common")],$d.prototype,"messagesCommon",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],$d.prototype,"type",void 0),(0,Je._)([(0,ht.Cb)()],$d.prototype,"view",void 0),(0,Je._)([(0,gy.h)()],$d.prototype,"_selectSection",null),$d=(0,Je._)([(0,Ds.j)("esri.widgets.Legend.styles.Card")],$d);const JC=$d,bn_layerRow="esri-legend__layer-row",bn_layerInfo="esri-legend__layer-cell esri-legend__layer-cell--info",bn_symbolContainer="esri-legend__layer-cell esri-legend__layer-cell--symbols",bn_symbol="esri-legend__symbol",bn_sizeRamp="esri-legend__size-ramp",bn_rampLabel="esri-legend__ramp-label",cL={display:"flex",alignItems:"flex-start"},XC={marginLeft:"3px"},bm={display:"table-cell",verticalAlign:"middle"};let V0=class extends Op.Z{constructor(d,v){super(d,v),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const d=this.activeLayerInfos,v=d&&d.toArray().map(O=>this._renderLegendForLayer(O)).filter(O=>!!O);return(0,vs.u)("div",null,v&&v.length?v:(0,vs.u)("div",{class:"esri-legend__message"},this.messages.noLegend))}_renderLegendForLayer(d){if(!d.ready)return null;const v=!!d.children.length,O=`esri-legend__${d.layer.uid}-version-${d.version}`,A=d.title?(0,Py.X6)({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},d.title):null;if(v){const j=d.children.map(te=>this._renderLegendForLayer(te)).toArray();return(0,vs.u)("div",{key:O,class:this.classes("esri-legend__service","esri-legend__group-layer")},A,j)}{const j=d.legendElements;if(j&&!j.length)return null;const te=j.map(be=>this._renderLegendForElement(be,d.layer,d.effectList)).filter(be=>!!be);return te.length?(0,vs.u)("div",{key:O,class:this.classes("esri-legend__service",{"esri-legend__group-layer-child":!!d.parent}),tabIndex:0},A,(0,vs.u)("div",{class:"esri-legend__layer"},te)):null}}_renderLegendForElement(d,v,O,A){const j="color-ramp"===d.type,te="opacity-ramp"===d.type,pe="size-ramp"===d.type;let be=null;if("symbol-table"===d.type||pe){const It=d.infos.map(Nt=>this._renderLegendForElementInfo(Nt,v,O,pe,d.legendType)).filter(Nt=>!!Nt);It.length&&(be=(0,vs.u)("div",{class:"esri-legend__layer-body"},It))}else"color-ramp"===d.type||"opacity-ramp"===d.type||"heatmap-ramp"===d.type||"stretch-ramp"===d.type?be=this._renderLegendForRamp(d,v.opacity):"relationship-ramp"===d.type?be=tL(d,this.id,v.opacity,O):"pie-chart-ramp"===d.type?be=this._renderPieChartRamp(d):"univariate-above-and-below-ramp"===d.type?be=this._renderUnivariateAboveAndBelowRamp(d,v.opacity,O):"univariate-color-size-ramp"===d.type&&(be=this._renderUnivariateColorSizeRamp(d,v.opacity,O));if(!be)return null;const Re=d.title;let Ge=null;if("string"==typeof Re)Ge=Re;else if(Re){const It=Em(this.messages,Re,j||te);Ge=aL(0,j||te)&&Re.title?`${Re.title} (${It})`:It}const tt=A?"esri-legend__layer-child-table":"esri-legend__layer-table",ft=Ge?(0,vs.u)("div",{class:"esri-legend__layer-caption"},Ge):null;return(0,vs.u)("div",{class:this.classes(tt,{"esri-legend__layer-table--size-ramp":pe||!A})},ft,be)}_renderPieChartRamp(d){return(0,vs.u)("div",{bind:d.preview,afterCreate:xl})}_renderUnivariateAboveAndBelowRamp(d,v,O){const{sizeRampElement:A,colorRampElement:j}=nL(d,v);if(!A)return null;const te=vm(A,"above",!0),pe=vm(A,"below",!0),Re=ym(j,{width:12,height:te,rampAlignment:"vertical",opacity:v,type:"above",effectList:O}),Ge=ym(j,{width:12,height:pe,rampAlignment:"vertical",opacity:v,type:"below",effectList:O}),tt=DE(A),ft=A.infos.map(pr=>pr.label),yt=ft.map((pr,Lr)=>0===Lr?(0,vs.u)("div",{key:Lr,class:pr?Re?"esri-univariate-above-and-below-ramp__label":bn_rampLabel:null},pr):2===Lr?(0,vs.u)("div",null):null),It=ft.length-1,Nt=Math.floor(ft.length/2),Rt=ft.map((pr,Lr)=>Lr===Nt||Lr===It?(0,vs.u)("div",{key:Lr,class:pr?Re?"esri-univariate-above-and-below-ramp__label":bn_rampLabel:null},pr):null),Jt={display:"table-cell",verticalAlign:"middle"},jt={marginTop:`${tt}px`},ir={height:`${te}px`},or={height:`${pe}px`};return(0,vs.u)("div",{key:"univariate-above-and-below-ramp-preview",styles:cL},(0,vs.u)("div",{class:"esri-legend__layer-body"},A.infos.map((pr,Lr)=>(0,vs.u)("div",{class:this.classes(bn_layerRow,bn_sizeRamp)},(0,vs.u)("div",{class:bn_symbol,styles:Jt,bind:pr.preview,afterCreate:xl}),Re||Lr%2!=0?null:(0,vs.u)("div",{class:bn_layerInfo},ft[Lr])))),Re?(0,vs.u)("div",{styles:jt,key:"color-ramp-preview"},(0,vs.u)("div",{styles:XC},(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramps",bind:Re,afterCreate:xl})),(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:ir},yt))),(0,vs.u)("div",{styles:XC},(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramps",bind:Ge,afterCreate:xl})),(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:or},Rt)))):null)}_renderUnivariateColorSizeRamp(d,v,O){const{sizeRampElement:A,colorRampElement:j}=oL(d);if(!A)return null;const te=DE(A),be=vm(A,"full",!1),Re=ym(j,{width:12,height:be,rampAlignment:"vertical",opacity:v,type:"full",effectList:O}),Ge=A.infos.length-1,tt=A.infos.map((Nt,Rt)=>0===Rt||Rt===Ge?(0,vs.u)("div",{key:Rt,class:Nt.label?j?"esri-univariate-above-and-below-ramp__label":bn_rampLabel:null},Nt.label):null),ft={display:"table-cell",verticalAlign:"middle"},yt={marginTop:`${te}px`},It={height:`${be}px`};return(0,vs.u)("div",{key:"univariate-above-and-below-ramp-preview",styles:cL},(0,vs.u)("div",{class:"esri-legend__layer-body"},A.infos.map(Nt=>(0,vs.u)("div",{class:this.classes(bn_layerRow,bn_sizeRamp)},(0,vs.u)("div",{class:bn_symbol,styles:ft,bind:Nt.preview,afterCreate:xl})))),(0,vs.u)("div",{styles:yt,key:"color-ramp-preview"},(0,vs.u)("div",{styles:XC},(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramps",bind:Re,afterCreate:xl})),(0,vs.u)("div",{styles:bm},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:It},tt)))))}_renderLegendForRamp(d,v){const O=d.infos,j="heatmap-ramp"===d.type,te="stretch-ramp"===d.type,pe=d.preview;pe.className="esri-legend__color-ramp "+("opacity-ramp"===d.type?"esri-legend__opacity-ramp":""),null!=v&&(pe.style.opacity=v.toString());const Re=O.map(ft=>(0,vs.u)("div",{class:ft.label?bn_rampLabel:null},j?this.messages[ft.label]||ft.label:te?this._getStretchStopLabel(ft):ft.label)),tt={height:pe.style.height};return(0,vs.u)("div",{class:bn_layerRow},(0,vs.u)("div",{class:bn_symbolContainer,styles:{width:"24px"}},(0,vs.u)("div",{class:"esri-legend__ramps",bind:pe,afterCreate:xl})),(0,vs.u)("div",{class:bn_layerInfo},(0,vs.u)("div",{class:"esri-legend__ramp-labels",styles:tt},Re)))}_getStretchStopLabel(d){return d.label?this.messages[d.label]+": "+("string"==typeof d.value?d.value:(0,FA.uf)(d.value,{style:"decimal",notation:d.value.toString().includes("e")?"scientific":"standard"})):""}_renderLegendForElementInfo(d,v,O,A,j){if(d.type)return this._renderLegendForElement(d,v,O,!0);let te=null;const pe=lL(v,j);if(d.preview?te=(0,vs.u)("div",{class:bn_symbol,bind:d.preview,afterCreate:xl}):d.src&&(te=this._renderImage(d,v,pe)),!te)return null;const be={"esri-legend__imagery-layer-info--stretched":pe};return(0,vs.u)("div",{class:bn_layerRow},(0,vs.u)("div",{class:this.classes(bn_symbolContainer,{"esri-legend__imagery-layer-info--stretched":pe,[bn_sizeRamp]:!pe&&A})},te),(0,vs.u)("div",{class:this.classes(bn_layerInfo,be)},Em(this.messages,d.label,!1)||""))}_renderImage(d,v,O){const{label:A,src:j,opacity:te}=d,pe={"esri-legend__imagery-layer-image--stretched":O,[bn_symbol]:!O},be={opacity:`${te??v.opacity}`};return(0,vs.u)("img",{alt:Em(this.messages,A,!1),src:j,border:0,width:d.width,height:d.height,class:this.classes(pe),styles:be})}};(0,Je._)([(0,ht.Cb)()],V0.prototype,"activeLayerInfos",void 0),(0,Je._)([(0,ht.Cb)()],V0.prototype,"headingLevel",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Legend/t9n/Legend")],V0.prototype,"messages",void 0),(0,Je._)([(0,ht.Cb)({readOnly:!0})],V0.prototype,"type",void 0),V0=(0,Je._)([(0,Ds.j)("esri.widgets.Legend.styles.Classic")],V0);const Tm=V0;let Gl=class extends Op.Z{constructor(d,v){super(d,v),this._handles=new so.Z,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass="esri-icon-layer-list",this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new Tm,this.view=null,this.viewModel=new q7}initialize(){this.own([(0,wr.on)(()=>this.view,"resize",()=>this.scheduleRender()),(0,wr.on)(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),(0,wr.YP)(()=>this.headingLevel,d=>{const{style:v}=this;v&&(v.headingLevel=d)}),(0,wr.YP)(()=>this.style,(d,v)=>{v&&d!==v&&v.destroy(),d&&(d.activeLayerInfos=this.activeLayerInfos,"card"===d.type&&(d.view=this.view),d.headingLevel=this.headingLevel)},wr.nn)])}destroy(){this._handles=(0,at.SC)(this._handles)}castStyle(d){if(d instanceof JC||d instanceof Tm)return d;if("string"==typeof d)return"card"===d?new JC:new Tm;if(d&&"string"==typeof d.type){const v={...d};return delete v.type,new("card"===d.type?JC:Tm)(v)}return new Tm}render(){return(0,vs.u)("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof Tm?"esri-widget--panel":null)},this.style.render())}_refreshActiveLayerInfos(d){this._handles.removeAll(),d.forEach(v=>this._renderOnActiveLayerInfoChange(v)),this.scheduleRender()}_renderOnActiveLayerInfoChange(d){const v=(0,wr.YP)(()=>d.version,()=>this.scheduleRender());this._handles.add(v,`version_${d.layer.uid}`);const O=(0,wr.on)(()=>d.children,"change",()=>d.children.forEach(A=>this._renderOnActiveLayerInfoChange(A)),wr.nn);this._handles.add(O,`children_${d.layer.uid}`),d.children.forEach(A=>this._renderOnActiveLayerInfoChange(A))}};(0,Je._)([(0,Rl.B)("viewModel.activeLayerInfos")],Gl.prototype,"activeLayerInfos",void 0),(0,Je._)([(0,Rl.B)("viewModel.basemapLegendVisible")],Gl.prototype,"basemapLegendVisible",void 0),(0,Je._)([(0,Rl.B)("viewModel.groundLegendVisible")],Gl.prototype,"groundLegendVisible",void 0),(0,Je._)([(0,ht.Cb)()],Gl.prototype,"headingLevel",void 0),(0,Je._)([(0,Rl.B)("viewModel.hideLayersNotInCurrentView")],Gl.prototype,"hideLayersNotInCurrentView",void 0),(0,Je._)([(0,Rl.B)("viewModel.keepCacheOnDestroy")],Gl.prototype,"keepCacheOnDestroy",void 0),(0,Je._)([(0,Rl.B)("viewModel.respectLayerVisibility")],Gl.prototype,"respectLayerVisibility",void 0),(0,Je._)([(0,ht.Cb)()],Gl.prototype,"iconClass",void 0),(0,Je._)([(0,ht.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Gl.prototype,"label",void 0),(0,Je._)([(0,Rl.B)("viewModel.layerInfos")],Gl.prototype,"layerInfos",void 0),(0,Je._)([(0,ht.Cb)(),(0,Dp.H)("esri/widgets/Legend/t9n/Legend")],Gl.prototype,"messages",void 0),(0,Je._)([(0,ht.Cb)()],Gl.prototype,"style",void 0),(0,Je._)([(0,Uu.p)("style")],Gl.prototype,"castStyle",null),(0,Je._)([(0,Rl.B)("viewModel.view")],Gl.prototype,"view",void 0),(0,Je._)([(0,ht.Cb)()],Gl.prototype,"viewModel",void 0),Gl=(0,Je._)([(0,Ds.j)("esri.widgets.Legend")],Gl);const mW=Gl,gW=["mapRef"];class SE{ngAfterViewInit(){this.initMap()}initMap(){if(this.mapRef){const O=new Tw.default({url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/0",renderer:{type:"simple",symbol:{type:"point-3d",symbolLayers:[{type:"object",resource:{primitive:"cone"},width:5e4}]},label:"hurricane location",visualVariables:[{type:"color",field:"PRESSURE",stops:[{value:950,color:"red"},{value:1020,color:"blue"}]},{type:"size",field:"WINDSPEED",stops:[{value:20,size:6e4},{value:150,size:5e5}],axis:"height"},{type:"size",axis:"width-and-depth",useSymbolValue:!0}]}}),A=new HO({basemap:"oceans",layers:[O]}),te=new HN({map:A,container:this.mapRef.nativeElement,camera:{position:{x:-7094839,y:-113987,z:8032780,spatialReference:{wkid:3857}},heading:358.8,tilt:13.7},environment:{lighting:{type:"virtual"}}}),pe=new mW({view:te});te.ui.add(pe,"bottom-left")}}static#e=this.\u0275fac=function(O){return new(O||SE)};static#t=this.\u0275cmp=W.Xpm({type:SE,selectors:[["porrtal-hurricane-map"]],viewQuery:function(O,A){if(1&O&&W.Gf(gW,5),2&O){let j;W.iGM(j=W.CRH())&&(A.mapRef=j.first)}},inputs:{viewState:"viewState"},standalone:!0,features:[W.jDz],decls:2,vars:0,consts:[[1,"container"],["mapRef",""]],template:function(O,A){1&O&&W._UZ(0,"div",0,1)},dependencies:[D.ez],styles:['@import"https://js.arcgis.com/4.24/@arcgis/core/assets/esri/themes/light/main.css";.container[_ngcontent-%COMP%]{position:absolute;inset:0}'],changeDetection:0})}class AE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||AE)};static#t=this.\u0275cmp=W.Xpm({type:AE,selectors:[["porrtal-earthquake-map"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"earthquake-map works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class LE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||LE)};static#t=this.\u0275cmp=W.Xpm({type:LE,selectors:[["porrtal-digital-elevation-map"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"digital-elevation-map works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class wE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||wE)};static#t=this.\u0275cmp=W.Xpm({type:wE,selectors:[["porrtal-building-scene-with-query"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"building-scene-with-query works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class RE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||RE)};static#t=this.\u0275cmp=W.Xpm({type:RE,selectors:[["porrtal-zoomable-circle-pack"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"zoomable-circle-pack works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class IE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||IE)};static#t=this.\u0275cmp=W.Xpm({type:IE,selectors:[["porrtal-zoomable-sunburst"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"zoomable-sunburst works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class UE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||UE)};static#t=this.\u0275cmp=W.Xpm({type:UE,selectors:[["porrtal-zoomable-treemap"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"zoomable-treemap works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class BE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||BE)};static#t=this.\u0275cmp=W.Xpm({type:BE,selectors:[["porrtal-zoomable-icicle"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"zoomable-icicle works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class jE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||jE)};static#t=this.\u0275cmp=W.Xpm({type:jE,selectors:[["porrtal-collapsible-tree"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"collapsible-tree works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}class FE{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(O){return new(O||FE)};static#t=this.\u0275cmp=W.Xpm({type:FE,selectors:[["porrtal-hierarchical-bar-chart"]],standalone:!0,features:[W.jDz],decls:2,vars:0,template:function(O,A){1&O&&(W.TgZ(0,"p"),W._uU(1,"hierarchical-bar-chart works!"),W.qZA())},dependencies:[D.ez],changeDetection:0})}},76210:(qe,xe,T)=>{"use strict";T.d(xe,{Z5:()=>Oo,mv:()=>se,AA:()=>Mt,yM:()=>sr,xE:()=>Is,K3:()=>Dr,h:()=>lt,GH:()=>Ns,YY:()=>er});var D=T(15861);let U,W,Y,$=!1,re=!1,ue=!1,ae=!1,oe=null,X=!1;const Z=typeof window<"u"?window:{},J=Z.document||{head:{}},se=Z.HTMLElement||class{},ee={$flags$:0,$resourcesUrl$:"",jmp:Bt=>Bt(),raf:Bt=>requestAnimationFrame(Bt),ael:(Bt,Wt,rr,Er)=>Bt.addEventListener(Wt,rr,Er),rel:(Bt,Wt,rr,Er)=>Bt.removeEventListener(Wt,rr,Er),ce:(Bt,Wt)=>new CustomEvent(Bt,Wt)},ce=(()=>{let Bt=!1;try{J.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Bt=!0}}))}catch{}return Bt})(),me=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch{}return!1})(),he=(Bt,Wt,rr,Er)=>{rr&&rr.map(([ur,Fr,ls])=>{const Pt=fe(Bt,ur),St=ye(Wt,ls),mr=De(ur);ee.ael(Pt,Fr,St,mr),(Wt.$rmListeners$=Wt.$rmListeners$||[]).push(()=>ee.rel(Pt,Fr,St,mr))})},ye=(Bt,Wt)=>rr=>{try{Bt.$hostElement$[Wt](rr)}catch(Er){An(Er)}},fe=(Bt,Wt)=>4&Wt?J:8&Wt?Z:16&Wt?J.body:Bt,De=Bt=>ce?{passive:0!=(1&Bt),capture:0!=(2&Bt)}:0!=(2&Bt),Ae="http://www.w3.org/1999/xlink",Ke=new WeakMap,Ne=(Bt,Wt,rr,Er)=>{let ur=We(Wt,rr),Fr=Co.get(ur);if(Bt=11===Bt.nodeType?Bt:J,Fr)if("string"==typeof Fr){let Pt,ls=Ke.get(Bt=Bt.head||Bt);ls||Ke.set(Bt,ls=new Set),ls.has(ur)||(Pt=J.createElement("style"),Pt.innerHTML=Fr,Bt.insertBefore(Pt,Bt.querySelector("link")),ls&&ls.add(ur))}else!Bt.adoptedStyleSheets.includes(Fr)&&(Bt.adoptedStyleSheets=[...Bt.adoptedStyleSheets,Fr]);return ur},We=(Bt,Wt)=>"sc-"+(Wt&&32&Bt.$flags$?Bt.$tagName$+"-"+Wt:Bt.$tagName$),nt={},Ze=Bt=>"object"==(Bt=typeof Bt)||"function"===Bt,lt=(Bt,Wt,...rr)=>{let Er=null,ur=null,Fr=null,ls=!1,Pt=!1,St=[];const mr=fs=>{for(let qs=0;qs<fs.length;qs++)Er=fs[qs],Array.isArray(Er)?mr(Er):null!=Er&&"boolean"!=typeof Er&&((ls="function"!=typeof Bt&&!Ze(Er))&&(Er=String(Er)),ls&&Pt?St[St.length-1].$text$+=Er:St.push(ls?st(null,Er):Er),Pt=ls)};if(mr(rr),Wt&&(Wt.key&&(ur=Wt.key),Wt.name&&(Fr=Wt.name),true)){const fs=Wt.className||Wt.class;fs&&(Wt.class="object"!=typeof fs?fs:Object.keys(fs).filter(qs=>fs[qs]).join(" "))}if("function"==typeof Bt)return Bt(null===Wt?{}:Wt,St,kt);const qr=st(Bt,null);return qr.$attrs$=Wt,St.length>0&&(qr.$children$=St),qr.$key$=ur,qr.$name$=Fr,qr},st=(Bt,Wt)=>{const rr={$flags$:0,$tag$:Bt,$text$:Wt,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return rr},Mt={},Ft=Bt=>Bt&&Bt.$tag$===Mt,kt={forEach:(Bt,Wt)=>Bt.map(wt).forEach(Wt),map:(Bt,Wt)=>Bt.map(wt).map(Wt).map(zt)},wt=Bt=>({vattrs:Bt.$attrs$,vchildren:Bt.$children$,vkey:Bt.$key$,vname:Bt.$name$,vtag:Bt.$tag$,vtext:Bt.$text$}),zt=Bt=>{if("function"==typeof Bt.vtag){const rr=Object.assign({},Bt.vattrs);return Bt.vkey&&(rr.key=Bt.vkey),Bt.vname&&(rr.name=Bt.vname),lt(Bt.vtag,rr,...Bt.vchildren||[])}const Wt=st(Bt.vtag,Bt.vtext);return Wt.$attrs$=Bt.vattrs,Wt.$children$=Bt.vchildren,Wt.$key$=Bt.vkey,Wt.$name$=Bt.vname,Wt},ar=(Bt,Wt,rr,Er,ur,Fr)=>{if(rr!==Er){let ls=io(Bt,Wt),Pt=Wt.toLowerCase();if("class"===Wt){const St=Bt.classList,mr=kr(rr),qr=kr(Er);St.remove(...mr.filter(fs=>fs&&!qr.includes(fs))),St.add(...qr.filter(fs=>fs&&!mr.includes(fs)))}else if("style"===Wt){for(const St in rr)(!Er||null==Er[St])&&(St.includes("-")?Bt.style.removeProperty(St):Bt.style[St]="");for(const St in Er)(!rr||Er[St]!==rr[St])&&(St.includes("-")?Bt.style.setProperty(St,Er[St]):Bt.style[St]=Er[St])}else if("key"!==Wt)if("ref"===Wt)Er&&Er(Bt);else if(Bt.__lookupSetter__(Wt)||"o"!==Wt[0]||"n"!==Wt[1]){{const St=Ze(Er);if((ls||St&&null!==Er)&&!ur)try{if(Bt.tagName.includes("-"))Bt[Wt]=Er;else{let qr=Er??"";"list"===Wt?ls=!1:(null==rr||Bt[Wt]!=qr)&&(Bt[Wt]=qr)}}catch{}let mr=!1;Pt!==(Pt=Pt.replace(/^xlink\:?/,""))&&(Wt=Pt,mr=!0),null==Er||!1===Er?(!1!==Er||""===Bt.getAttribute(Wt))&&(mr?Bt.removeAttributeNS(Ae,Wt):Bt.removeAttribute(Wt)):(!ls||4&Fr||ur)&&!St&&(Er=!0===Er?"":Er,mr?Bt.setAttributeNS(Ae,Wt,Er):Bt.setAttribute(Wt,Er))}}else Wt="-"===Wt[2]?Wt.slice(3):io(Z,Pt)?Pt.slice(2):Pt[2]+Wt.slice(3),rr&&ee.rel(Bt,Wt,rr,!1),Er&&ee.ael(Bt,Wt,Er,!1)}},Pr=/\s/,kr=Bt=>Bt?Bt.split(Pr):[],ss=(Bt,Wt,rr,Er)=>{const ur=11===Wt.$elm$.nodeType&&Wt.$elm$.host?Wt.$elm$.host:Wt.$elm$,Fr=Bt&&Bt.$attrs$||nt,ls=Wt.$attrs$||nt;for(Er in Fr)Er in ls||ar(ur,Er,Fr[Er],void 0,rr,Wt.$flags$);for(Er in ls)ar(ur,Er,Fr[Er],ls[Er],rr,Wt.$flags$)},os=(Bt,Wt,rr,Er)=>{let ls,Pt,St,ur=Wt.$children$[rr],Fr=0;if(!$&&(ue=!0,"slot"===ur.$tag$&&(U&&Er.classList.add(U+"-s"),ur.$flags$|=ur.$children$?2:1)),null!==ur.$text$)ls=ur.$elm$=J.createTextNode(ur.$text$);else if(1&ur.$flags$)ls=ur.$elm$=J.createTextNode("");else{if(!ae&&(ae="svg"===ur.$tag$),ls=ur.$elm$=J.createElementNS(ae?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&ur.$flags$?"slot-fb":ur.$tag$),ae&&"foreignObject"===ur.$tag$&&(ae=!1),ss(null,ur,ae),(Bt=>null!=Bt)(U)&&ls["s-si"]!==U&&ls.classList.add(ls["s-si"]=U),ur.$children$)for(Fr=0;Fr<ur.$children$.length;++Fr)Pt=os(Bt,ur,Fr,ls),Pt&&ls.appendChild(Pt);"svg"===ur.$tag$?ae=!1:"foreignObject"===ls.tagName&&(ae=!0)}return ls["s-hn"]=Y,3&ur.$flags$&&(ls["s-sr"]=!0,ls["s-cr"]=W,ls["s-sn"]=ur.$name$||"",St=Bt&&Bt.$children$&&Bt.$children$[rr],St&&St.$tag$===ur.$tag$&&Bt.$elm$&&Hr(Bt.$elm$,!1)),ls},Hr=(Bt,Wt)=>{ee.$flags$|=1;const rr=Bt.childNodes;for(let Er=rr.length-1;Er>=0;Er--){const ur=rr[Er];ur["s-hn"]!==Y&&ur["s-ol"]&&(hr(ur).insertBefore(ur,_r(ur)),ur["s-ol"].remove(),ur["s-ol"]=void 0,ue=!0),Wt&&Hr(ur,Wt)}ee.$flags$&=-2},pt=(Bt,Wt,rr,Er,ur,Fr)=>{let Pt,ls=Bt["s-cr"]&&Bt["s-cr"].parentNode||Bt;for(ls.shadowRoot&&ls.tagName===Y&&(ls=ls.shadowRoot);ur<=Fr;++ur)Er[ur]&&(Pt=os(null,rr,ur,Bt),Pt&&(Er[ur].$elm$=Pt,ls.insertBefore(Pt,_r(Wt))))},Ut=(Bt,Wt,rr,Er,ur)=>{for(;Wt<=rr;++Wt)(Er=Bt[Wt])&&(ur=Er.$elm$,ns(Er),re=!0,ur["s-ol"]?ur["s-ol"].remove():Hr(ur,!0),ur.remove())},Xt=(Bt,Wt)=>Bt.$tag$===Wt.$tag$&&("slot"===Bt.$tag$?Bt.$name$===Wt.$name$:Bt.$key$===Wt.$key$),_r=Bt=>Bt&&Bt["s-ol"]||Bt,hr=Bt=>(Bt["s-ol"]?Bt["s-ol"]:Bt).parentNode,gr=(Bt,Wt)=>{const rr=Wt.$elm$=Bt.$elm$,Er=Bt.$children$,ur=Wt.$children$,Fr=Wt.$tag$,ls=Wt.$text$;let Pt;null!==ls?(Pt=rr["s-cr"])?Pt.parentNode.textContent=ls:Bt.$text$!==ls&&(rr.data=ls):(ae="svg"===Fr||"foreignObject"!==Fr&&ae,"slot"===Fr||ss(Bt,Wt,ae),null!==Er&&null!==ur?((Bt,Wt,rr,Er)=>{let fn,Fn,ur=0,Fr=0,ls=0,Pt=0,St=Wt.length-1,mr=Wt[0],qr=Wt[St],fs=Er.length-1,qs=Er[0],wi=Er[fs];for(;ur<=St&&Fr<=fs;)if(null==mr)mr=Wt[++ur];else if(null==qr)qr=Wt[--St];else if(null==qs)qs=Er[++Fr];else if(null==wi)wi=Er[--fs];else if(Xt(mr,qs))gr(mr,qs),mr=Wt[++ur],qs=Er[++Fr];else if(Xt(qr,wi))gr(qr,wi),qr=Wt[--St],wi=Er[--fs];else if(Xt(mr,wi))("slot"===mr.$tag$||"slot"===wi.$tag$)&&Hr(mr.$elm$.parentNode,!1),gr(mr,wi),Bt.insertBefore(mr.$elm$,qr.$elm$.nextSibling),mr=Wt[++ur],wi=Er[--fs];else if(Xt(qr,qs))("slot"===mr.$tag$||"slot"===wi.$tag$)&&Hr(qr.$elm$.parentNode,!1),gr(qr,qs),Bt.insertBefore(qr.$elm$,mr.$elm$),qr=Wt[--St],qs=Er[++Fr];else{for(ls=-1,Pt=ur;Pt<=St;++Pt)if(Wt[Pt]&&null!==Wt[Pt].$key$&&Wt[Pt].$key$===qs.$key$){ls=Pt;break}ls>=0?(Fn=Wt[ls],Fn.$tag$!==qs.$tag$?fn=os(Wt&&Wt[Fr],rr,ls,Bt):(gr(Fn,qs),Wt[ls]=void 0,fn=Fn.$elm$),qs=Er[++Fr]):(fn=os(Wt&&Wt[Fr],rr,Fr,Bt),qs=Er[++Fr]),fn&&hr(mr.$elm$).insertBefore(fn,_r(mr.$elm$))}ur>St?pt(Bt,null==Er[fs+1]?null:Er[fs+1].$elm$,rr,Er,Fr,fs):Fr>fs&&Ut(Wt,ur,St)})(rr,Er,Wt,ur):null!==ur?(null!==Bt.$text$&&(rr.textContent=""),pt(rr,null,Wt,ur,0,ur.length-1)):null!==Er&&Ut(Er,0,Er.length-1),ae&&"svg"===Fr&&(ae=!1))},vr=Bt=>{let rr,Er,ur,Fr,ls,Pt,Wt=Bt.childNodes;for(Er=0,ur=Wt.length;Er<ur;Er++)if(rr=Wt[Er],1===rr.nodeType){if(rr["s-sr"])for(ls=rr["s-sn"],rr.hidden=!1,Fr=0;Fr<ur;Fr++)if(Pt=Wt[Fr].nodeType,Wt[Fr]["s-hn"]!==rr["s-hn"]||""!==ls){if(1===Pt&&ls===Wt[Fr].getAttribute("slot")){rr.hidden=!0;break}}else if(1===Pt||3===Pt&&""!==Wt[Fr].textContent.trim()){rr.hidden=!0;break}vr(rr)}},Kr=[],Gr=Bt=>{let Wt,rr,Er,ur,Fr,ls,Pt=0,St=Bt.childNodes,mr=St.length;for(;Pt<mr;Pt++){if(Wt=St[Pt],Wt["s-sr"]&&(rr=Wt["s-cr"])&&rr.parentNode)for(Er=rr.parentNode.childNodes,ur=Wt["s-sn"],ls=Er.length-1;ls>=0;ls--)rr=Er[ls],!rr["s-cn"]&&!rr["s-nr"]&&rr["s-hn"]!==Wt["s-hn"]&&(Jr(rr,ur)?(Fr=Kr.find(qr=>qr.$nodeToRelocate$===rr),re=!0,rr["s-sn"]=rr["s-sn"]||ur,Fr?Fr.$slotRefNode$=Wt:Kr.push({$slotRefNode$:Wt,$nodeToRelocate$:rr}),rr["s-sr"]&&Kr.map(qr=>{Jr(qr.$nodeToRelocate$,rr["s-sn"])&&(Fr=Kr.find(fs=>fs.$nodeToRelocate$===rr),Fr&&!qr.$slotRefNode$&&(qr.$slotRefNode$=Fr.$slotRefNode$))})):Kr.some(qr=>qr.$nodeToRelocate$===rr)||Kr.push({$nodeToRelocate$:rr}));1===Wt.nodeType&&Gr(Wt)}},Jr=(Bt,Wt)=>1===Bt.nodeType?null===Bt.getAttribute("slot")&&""===Wt||Bt.getAttribute("slot")===Wt:Bt["s-sn"]===Wt||""===Wt,ns=Bt=>{Bt.$attrs$&&Bt.$attrs$.ref&&Bt.$attrs$.ref(null),Bt.$children$&&Bt.$children$.map(ns)},lr=(Bt,Wt)=>{const rr=Bt.$hostElement$,Er=Bt.$cmpMeta$,ur=Bt.$vnode$||st(null,null),Fr=Ft(Wt)?Wt:lt(null,null,Wt);if(Y=rr.tagName,Er.$attrsToReflect$&&(Fr.$attrs$=Fr.$attrs$||{},Er.$attrsToReflect$.map(([ls,Pt])=>Fr.$attrs$[Pt]=rr[ls])),Fr.$tag$=null,Fr.$flags$|=4,Bt.$vnode$=Fr,Fr.$elm$=ur.$elm$=rr.shadowRoot||rr,U=rr["s-sc"],W=rr["s-cr"],$=0!=(1&Er.$flags$),re=!1,gr(ur,Fr),ee.$flags$|=1,ue){Gr(Fr.$elm$);let ls,Pt,St,mr,qr,fs,qs=0;for(;qs<Kr.length;qs++)ls=Kr[qs],Pt=ls.$nodeToRelocate$,Pt["s-ol"]||(St=J.createTextNode(""),St["s-nr"]=Pt,Pt.parentNode.insertBefore(Pt["s-ol"]=St,Pt));for(qs=0;qs<Kr.length;qs++)if(ls=Kr[qs],Pt=ls.$nodeToRelocate$,ls.$slotRefNode$){for(mr=ls.$slotRefNode$.parentNode,qr=ls.$slotRefNode$.nextSibling,St=Pt["s-ol"];St=St.previousSibling;)if(fs=St["s-nr"],fs&&fs["s-sn"]===Pt["s-sn"]&&mr===fs.parentNode&&(fs=fs.nextSibling,!fs||!fs["s-nr"])){qr=fs;break}(!qr&&mr!==Pt.parentNode||Pt.nextSibling!==qr)&&Pt!==qr&&(!Pt["s-hn"]&&Pt["s-ol"]&&(Pt["s-hn"]=Pt["s-ol"].parentNode.nodeName),mr.insertBefore(Pt,qr))}else 1===Pt.nodeType&&(Pt.hidden=!0)}re&&vr(Fr.$elm$),ee.$flags$&=-2,Kr.length=0},sr=(Bt,Wt,rr)=>{const Er=Bt;return{emit:ur=>Rr(Er,Wt,{bubbles:!!(4&rr),composed:!!(2&rr),cancelable:!!(1&rr),detail:ur})}},Rr=(Bt,Wt,rr)=>{const Er=ee.ce(Wt,rr);return Bt.dispatchEvent(Er),Er},Qt=(Bt,Wt)=>{Bt.$flags$|=16;const rr=()=>qt(Bt,Wt);return ai(rr)},qt=(Bt,Wt)=>{const rr=Bt.$hostElement$,Er=()=>{},ur=rr;let Fr;return Wt?(Cr(rr,"componentWillLoad"),Fr=Rs(ur,"componentWillLoad")):(Cr(rr,"componentWillUpdate"),Fr=Rs(ur,"componentWillUpdate")),Cr(rr,"componentWillRender"),Fr=Zi(Fr,()=>Rs(ur,"componentWillRender")),Er(),Zi(Fr,()=>yr(Bt,ur,Wt))},yr=function(){var Bt=(0,D.Z)(function*(Wt,rr,Er){const ur=Wt.$hostElement$,Fr=()=>{};Er&&(Bt=>{const Wt=Bt.$cmpMeta$,rr=Bt.$hostElement$,Er=Wt.$flags$,ur=()=>{},Fr=Ne(rr.shadowRoot?rr.shadowRoot:rr.getRootNode(),Wt,Bt.$modeName$);10&Er&&(rr["s-sc"]=Fr,rr.classList.add(Fr+"-h"),2&Er&&rr.classList.add(Fr+"-s")),ur()})(Wt);const Pt=()=>{};jr(Wt,rr,ur),Pt(),Fr(),hs(Wt)});return function(rr,Er,ur){return Bt.apply(this,arguments)}}(),jr=(Bt,Wt,rr)=>{try{oe=Wt,Wt=Wt.render&&Wt.render(),Bt.$flags$&=-17,Bt.$flags$|=2,lr(Bt,Wt)}catch(Pt){An(Pt,Bt.$hostElement$)}return oe=null,null},hs=Bt=>{const rr=Bt.$hostElement$,Er=()=>{},ur=rr;Rs(ur,"componentDidRender"),Cr(rr,"componentDidRender"),64&Bt.$flags$?(Rs(ur,"componentDidUpdate"),Cr(rr,"componentDidUpdate"),Er()):(Bt.$flags$|=64,Rs(ur,"componentDidLoad"),Cr(rr,"componentDidLoad"),Er())},Is=Bt=>{{const Wt=sn(Bt),rr=Wt.$hostElement$.isConnected;return rr&&2==(18&Wt.$flags$)&&Qt(Wt,!1),rr}},Rs=(Bt,Wt,rr)=>{if(Bt&&Bt[Wt])try{return Bt[Wt](rr)}catch(Er){An(Er)}},Zi=(Bt,Wt)=>Bt&&Bt.then?Bt.then(Wt):Wt(),Cr=(Bt,Wt)=>{},ds=(Bt,Wt,rr)=>{if(Wt.$members$){Bt.watchers&&(Wt.$watchers$=Bt.watchers);const Er=Object.entries(Wt.$members$),ur=Bt.prototype;Er.map(([Fr,[ls]])=>{(31&ls||32&ls)&&Object.defineProperty(ur,Fr,{get(){return((Bt,Wt)=>sn(this).$instanceValues$.get(Wt))(0,Fr)},set(Pt){((Bt,Wt,rr,Er)=>{const ur=sn(Bt),Fr=Bt,ls=ur.$instanceValues$.get(Wt),Pt=ur.$flags$,St=Fr;rr=((Bt,Wt)=>null==Bt||Ze(Bt)?Bt:4&Wt?"false"!==Bt&&(""===Bt||!!Bt):2&Wt?parseFloat(Bt):1&Wt?String(Bt):Bt)(rr,Er.$members$[Wt][0]);const mr=Number.isNaN(ls)&&Number.isNaN(rr);if(rr!==ls&&!mr&&(ur.$instanceValues$.set(Wt,rr),1)){if(Er.$watchers$&&128&Pt){const fs=Er.$watchers$[Wt];fs&&fs.map(qs=>{try{St[qs](rr,ls,Wt)}catch(wi){An(wi,Fr)}})}if(2==(18&Pt)){if(St.componentShouldUpdate&&!1===St.componentShouldUpdate(rr,ls,Wt))return;Qt(ur,!1)}}})(this,Fr,Pt,Wt)},configurable:!0,enumerable:!0})});{const Fr=new Map;ur.attributeChangedCallback=function(ls,Pt,St){ee.jmp(()=>{const mr=Fr.get(ls);if(this.hasOwnProperty(mr))St=this[mr],delete this[mr];else if(ur.hasOwnProperty(mr)&&"number"==typeof this[mr]&&this[mr]==St)return;this[mr]=(null!==St||"boolean"!=typeof this[mr])&&St})},Bt.observedAttributes=Er.filter(([ls,Pt])=>15&Pt[0]).map(([ls,Pt])=>{const St=Pt[1]||ls;return Fr.set(St,ls),512&Pt[0]&&Wt.$attrsToReflect$.push([ls,St]),St})}}return Bt},Tn=function(){var Bt=(0,D.Z)(function*(Wt,rr,Er,ur,Fr){if(0==(32&rr.$flags$)&&(Fr=Wt.constructor,rr.$flags$|=32,customElements.whenDefined(Er.$tagName$).then(()=>rr.$flags$|=128),Fr.style)){let St=Fr.style;"string"!=typeof St&&(St=St[rr.$modeName$=(Bt=>Ja.map(Wt=>Wt(Bt)).find(Wt=>!!Wt))(Wt)]);const mr=We(Er,rr.$modeName$);if(!Co.has(mr)){const qr=()=>{};((Bt,Wt,rr)=>{let Er=Co.get(Bt);me&&rr?(Er=Er||new CSSStyleSheet,Er.replace(Wt)):Er=Wt,Co.set(Bt,Er)})(mr,St,!!(1&Er.$flags$)),qr()}}const Pt=()=>Qt(rr,!0);Pt()});return function(rr,Er,ur,Fr,ls){return Bt.apply(this,arguments)}}(),Ci=Bt=>{},Wr=Bt=>{const Wt=Bt["s-cr"]=J.createComment("");Wt["s-cn"]=!0,Bt.insertBefore(Wt,Bt.firstChild)},Ns=(Bt,Wt)=>{const rr={$flags$:Wt[0],$tagName$:Wt[1]};rr.$members$=Wt[2],rr.$listeners$=Wt[3],rr.$watchers$=Bt.$watchers$,rr.$attrsToReflect$=[];const Er=Bt.prototype.connectedCallback,ur=Bt.prototype.disconnectedCallback;return Object.assign(Bt.prototype,{__registerHost(){Vn(this,rr)},connectedCallback(){(Bt=>{if(0==(1&ee.$flags$)){const Wt=sn(Bt),rr=Wt.$cmpMeta$,Er=()=>{};if(1&Wt.$flags$)he(Bt,Wt,rr.$listeners$),Ci(Wt.$lazyInstance$);else{let ur;Wt.$flags$|=1,!ur&&12&rr.$flags$&&Wr(Bt),rr.$members$&&Object.entries(rr.$members$).map(([Fr,[ls]])=>{if(31&ls&&Bt.hasOwnProperty(Fr)){const Pt=Bt[Fr];delete Bt[Fr],Bt[Fr]=Pt}}),Tn(Bt,Wt,rr)}Er()}})(this),Er&&Er.call(this)},disconnectedCallback(){(Bt=>{if(0==(1&ee.$flags$)){const Wt=sn(Bt);Wt.$rmListeners$&&(Wt.$rmListeners$.map(Er=>Er()),Wt.$rmListeners$=void 0)}})(this),ur&&ur.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&rr.$flags$)})}}),Bt.is=rr.$tagName$,ds(Bt,rr)},Dr=Bt=>{const Wt=new URL(Bt,ee.$resourcesUrl$);return Wt.origin!==Z.location.origin?Wt.href:Wt.pathname},er=Bt=>ee.$resourcesUrl$=Bt,ki=new WeakMap,sn=Bt=>ki.get(Bt),Vn=(Bt,Wt)=>{const rr={$flags$:0,$hostElement$:Bt,$cmpMeta$:Wt,$instanceValues$:new Map};return he(Bt,rr,Wt.$listeners$),ki.set(Bt,rr)},io=(Bt,Wt)=>Wt in Bt,An=(Bt,Wt)=>(0,console.error)(Bt,Wt),Co=new Map,Ja=[],Kn=[],Yn=[],Sr=(Bt,Wt)=>rr=>{Bt.push(rr),X||(X=!0,Wt&&4&ee.$flags$?an(Wi):ee.raf(Wi))},Ts=Bt=>{for(let Wt=0;Wt<Bt.length;Wt++)try{Bt[Wt](performance.now())}catch(rr){An(rr)}Bt.length=0},Wi=()=>{Ts(Kn),Ts(Yn),(X=Kn.length>0)&&ee.raf(Wi)},an=Bt=>Promise.resolve(void 0).then(Bt),ai=Sr(Yn,!0),Oo={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},27122:(qe,xe)=>{"use strict";function D(dt,xt){for(var mt=0;mt<xt.length;mt++){var ct=xt[mt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(dt,ct.key,ct)}}function x(dt,xt,mt){return xt&&D(dt.prototype,xt),mt&&D(dt,mt),dt}function w(){return w=Object.assign||function(dt){for(var xt=1;xt<arguments.length;xt++){var mt=arguments[xt];for(var ct in mt)Object.prototype.hasOwnProperty.call(mt,ct)&&(dt[ct]=mt[ct])}return dt},w.apply(this,arguments)}function B(dt,xt){dt.prototype=Object.create(xt.prototype),dt.prototype.constructor=dt,W(dt,xt)}function U(dt){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)})(dt)}function W(dt,xt){return(W=Object.setPrototypeOf||function(ct,Ot){return ct.__proto__=Ot,ct})(dt,xt)}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(dt,xt,mt){return(H=Y()?Reflect.construct:function(Ot,Kt,fr){var Ar=[null];Ar.push.apply(Ar,Kt);var Es=new(Function.bind.apply(Ot,Ar));return fr&&W(Es,fr.prototype),Es}).apply(null,arguments)}function $(dt){var xt="function"==typeof Map?new Map:void 0;return $=function(ct){if(null===ct||!function G(dt){return-1!==Function.toString.call(dt).indexOf("[native code]")}(ct))return ct;if("function"!=typeof ct)throw new TypeError("Super expression must either be null or a function");if(typeof xt<"u"){if(xt.has(ct))return xt.get(ct);xt.set(ct,Ot)}function Ot(){return H(ct,arguments,U(this).constructor)}return Ot.prototype=Object.create(ct.prototype,{constructor:{value:Ot,enumerable:!1,writable:!0,configurable:!0}}),W(Ot,ct)},$(dt)}function re(dt,xt){if(null==dt)return{};var Ot,Kt,mt={},ct=Object.keys(dt);for(Kt=0;Kt<ct.length;Kt++)!(xt.indexOf(Ot=ct[Kt])>=0)&&(mt[Ot]=dt[Ot]);return mt}function ae(dt,xt){(null==xt||xt>dt.length)&&(xt=dt.length);for(var mt=0,ct=new Array(xt);mt<xt;mt++)ct[mt]=dt[mt];return ct}function oe(dt,xt){var mt=typeof Symbol<"u"&&dt[Symbol.iterator]||dt["@@iterator"];if(mt)return(mt=mt.call(dt)).next.bind(mt);if(Array.isArray(dt)||(mt=function ue(dt,xt){if(dt){if("string"==typeof dt)return ae(dt,xt);var mt=Object.prototype.toString.call(dt).slice(8,-1);if("Object"===mt&&dt.constructor&&(mt=dt.constructor.name),"Map"===mt||"Set"===mt)return Array.from(dt);if("Arguments"===mt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return ae(dt,xt)}}(dt))||xt&&dt&&"number"==typeof dt.length){mt&&(dt=mt);var ct=0;return function(){return ct>=dt.length?{done:!0}:{done:!1,value:dt[ct++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ie=function(dt){function xt(){return dt.apply(this,arguments)||this}return B(xt,dt),xt}($(Error)),X=function(dt){function xt(mt){return dt.call(this,"Invalid DateTime: "+mt.toMessage())||this}return B(xt,dt),xt}(ie),Z=function(dt){function xt(mt){return dt.call(this,"Invalid Interval: "+mt.toMessage())||this}return B(xt,dt),xt}(ie),Q=function(dt){function xt(mt){return dt.call(this,"Invalid Duration: "+mt.toMessage())||this}return B(xt,dt),xt}(ie),J=function(dt){function xt(){return dt.apply(this,arguments)||this}return B(xt,dt),xt}(ie),se=function(dt){function xt(mt){return dt.call(this,"Invalid unit "+mt)||this}return B(xt,dt),xt}(ie),ee=function(dt){function xt(){return dt.apply(this,arguments)||this}return B(xt,dt),xt}(ie),le=function(dt){function xt(){return dt.call(this,"Zone is an abstract class")||this}return B(xt,dt),xt}(ie),ne="numeric",ce="short",de="long",me={year:ne,month:ne,day:ne},_e={year:ne,month:ce,day:ne},he={year:ne,month:ce,day:ne,weekday:ce},ye={year:ne,month:de,day:ne},fe={year:ne,month:de,day:ne,weekday:de},De={hour:ne,minute:ne},ve={hour:ne,minute:ne,second:ne},Ce={hour:ne,minute:ne,second:ne,timeZoneName:ce},ge={hour:ne,minute:ne,second:ne,timeZoneName:de},Te={hour:ne,minute:ne,hourCycle:"h23"},Le={hour:ne,minute:ne,second:ne,hourCycle:"h23"},je={hour:ne,minute:ne,second:ne,hourCycle:"h23",timeZoneName:ce},ze={hour:ne,minute:ne,second:ne,hourCycle:"h23",timeZoneName:de},Ee={year:ne,month:ne,day:ne,hour:ne,minute:ne},Ae={year:ne,month:ne,day:ne,hour:ne,minute:ne,second:ne},we={year:ne,month:ce,day:ne,hour:ne,minute:ne},Be={year:ne,month:ce,day:ne,hour:ne,minute:ne,second:ne},Pe={year:ne,month:ce,day:ne,weekday:ce,hour:ne,minute:ne},Oe={year:ne,month:de,day:ne,hour:ne,minute:ne,timeZoneName:ce},Ke={year:ne,month:de,day:ne,hour:ne,minute:ne,second:ne,timeZoneName:ce},Ve={year:ne,month:de,day:ne,weekday:de,hour:ne,minute:ne,timeZoneName:de},Ne={year:ne,month:de,day:ne,weekday:de,hour:ne,minute:ne,second:ne,timeZoneName:de};function Ie(dt){return typeof dt>"u"}function We(dt){return"number"==typeof dt}function Se(dt){return"number"==typeof dt&&dt%1==0}function et(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function it(dt,xt,mt){if(0!==dt.length)return dt.reduce(function(ct,Ot){var Kt=[xt(Ot),Ot];return ct&&mt(ct[0],Kt[0])===ct[0]?ct:Kt},null)[1]}function rt(dt,xt){return Object.prototype.hasOwnProperty.call(dt,xt)}function Ze(dt,xt,mt){return Se(dt)&&dt>=xt&&dt<=mt}function st(dt,xt){return void 0===xt&&(xt=2),dt<0?"-"+(""+-dt).padStart(xt,"0"):(""+dt).padStart(xt,"0")}function Mt(dt){if(!Ie(dt)&&null!==dt&&""!==dt)return parseInt(dt,10)}function Ft(dt){if(!Ie(dt)&&null!==dt&&""!==dt)return parseFloat(dt)}function kt(dt){if(!Ie(dt)&&null!==dt&&""!==dt){var xt=1e3*parseFloat("0."+dt);return Math.floor(xt)}}function wt(dt,xt,mt){void 0===mt&&(mt=!1);var ct=Math.pow(10,xt);return(mt?Math.trunc:Math.round)(dt*ct)/ct}function zt(dt){return dt%4==0&&(dt%100!=0||dt%400==0)}function Zt(dt){return zt(dt)?366:365}function ar(dt,xt){var mt=function lt(dt,xt){return dt-xt*Math.floor(dt/xt)}(xt-1,12)+1;return 2===mt?zt(dt+(xt-mt)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][mt-1]}function Pr(dt){var xt=Date.UTC(dt.year,dt.month-1,dt.day,dt.hour,dt.minute,dt.second,dt.millisecond);return dt.year<100&&dt.year>=0&&(xt=new Date(xt)).setUTCFullYear(xt.getUTCFullYear()-1900),+xt}function kr(dt){var xt=(dt+Math.floor(dt/4)-Math.floor(dt/100)+Math.floor(dt/400))%7,mt=dt-1,ct=(mt+Math.floor(mt/4)-Math.floor(mt/100)+Math.floor(mt/400))%7;return 4===xt||3===ct?53:52}function ss(dt){return dt>99?dt:dt>60?1900+dt:2e3+dt}function os(dt,xt,mt,ct){void 0===ct&&(ct=null);var Ot=new Date(dt),Kt={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ct&&(Kt.timeZone=ct);var fr=w({timeZoneName:xt},Kt),Ar=new Intl.DateTimeFormat(mt,fr).formatToParts(Ot).find(function(Xr){return"timezonename"===Xr.type.toLowerCase()});return Ar?Ar.value:null}function Hr(dt,xt){var mt=parseInt(dt,10);Number.isNaN(mt)&&(mt=0);var ct=parseInt(xt,10)||0;return 60*mt+(mt<0||Object.is(mt,-0)?-ct:ct)}function pt(dt){var xt=Number(dt);if("boolean"==typeof dt||""===dt||Number.isNaN(xt))throw new ee("Invalid unit value "+dt);return xt}function Ut(dt,xt){var mt={};for(var ct in dt)if(rt(dt,ct)){var Ot=dt[ct];if(null==Ot)continue;mt[xt(ct)]=pt(Ot)}return mt}function $t(dt,xt){var mt=Math.trunc(Math.abs(dt/60)),ct=Math.trunc(Math.abs(dt%60)),Ot=dt>=0?"+":"-";switch(xt){case"short":return""+Ot+st(mt,2)+":"+st(ct,2);case"narrow":return""+Ot+mt+(ct>0?":"+ct:"");case"techie":return""+Ot+st(mt,2)+st(ct,2);default:throw new RangeError("Value format "+xt+" is out of range for property format")}}function Xt(dt){return function Xe(dt,xt){return xt.reduce(function(mt,ct){return mt[ct]=dt[ct],mt},{})}(dt,["hour","minute","second","millisecond"])}var _r=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,hr=["January","February","March","April","May","June","July","August","September","October","November","December"],gr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vr=["J","F","M","A","M","J","J","A","S","O","N","D"];function Kr(dt){switch(dt){case"narrow":return[].concat(vr);case"short":return[].concat(gr);case"long":return[].concat(hr);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Gr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Jr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ns=["M","T","W","T","F","S","S"];function lr(dt){switch(dt){case"narrow":return[].concat(ns);case"short":return[].concat(Jr);case"long":return[].concat(Gr);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Tr=["AM","PM"],zr=["Before Christ","Anno Domini"],Tt=["BC","AD"],sr=["B","A"];function Rr(dt){switch(dt){case"narrow":return[].concat(sr);case"short":return[].concat(Tt);case"long":return[].concat(zr);default:return null}}function es(dt,xt){for(var Ot,mt="",ct=oe(dt);!(Ot=ct()).done;){var Kt=Ot.value;mt+=Kt.literal?Kt.val:xt(Kt.val)}return mt}var hs={D:me,DD:_e,DDD:ye,DDDD:fe,t:De,tt:ve,ttt:Ce,tttt:ge,T:Te,TT:Le,TTT:je,TTTT:ze,f:Ee,ff:we,fff:Oe,ffff:Ve,F:Ae,FF:Be,FFF:Ke,FFFF:Ne},Is=function(){function dt(mt,ct){this.opts=ct,this.loc=mt,this.systemLoc=null}dt.create=function(ct,Ot){return void 0===Ot&&(Ot={}),new dt(ct,Ot)},dt.parseFormat=function(ct){for(var Ot=null,Kt="",fr=!1,Ar=[],Xr=0;Xr<ct.length;Xr++){var Es=ct.charAt(Xr);"'"===Es?(Kt.length>0&&Ar.push({literal:fr,val:Kt}),Ot=null,Kt="",fr=!fr):fr||Es===Ot?Kt+=Es:(Kt.length>0&&Ar.push({literal:!1,val:Kt}),Kt=Es,Ot=Es)}return Kt.length>0&&Ar.push({literal:fr,val:Kt}),Ar},dt.macroTokenToFormatOpts=function(ct){return hs[ct]};var xt=dt.prototype;return xt.formatWithSystemDefault=function(ct,Ot){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(ct,w({},this.opts,Ot)).format()},xt.formatDateTime=function(ct,Ot){return void 0===Ot&&(Ot={}),this.loc.dtFormatter(ct,w({},this.opts,Ot)).format()},xt.formatDateTimeParts=function(ct,Ot){return void 0===Ot&&(Ot={}),this.loc.dtFormatter(ct,w({},this.opts,Ot)).formatToParts()},xt.resolvedOptions=function(ct,Ot){return void 0===Ot&&(Ot={}),this.loc.dtFormatter(ct,w({},this.opts,Ot)).resolvedOptions()},xt.num=function(ct,Ot){if(void 0===Ot&&(Ot=0),this.opts.forceSimple)return st(ct,Ot);var Kt=w({},this.opts);return Ot>0&&(Kt.padTo=Ot),this.loc.numberFormatter(Kt).format(ct)},xt.formatDateTimeFromString=function(ct,Ot){var Kt=this,fr="en"===this.loc.listingMode(),Ar=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Xr=function(Qi,go){return Kt.loc.extract(ct,Qi,go)},Es=function(Qi){return ct.isOffsetFixed&&0===ct.offset&&Qi.allowZ?"Z":ct.isValid?ct.zone.formatOffset(ct.ts,Qi.format):""},Zs=function(Qi,go){return fr?function qt(dt,xt){return Kr(xt)[dt.month-1]}(ct,Qi):Xr(go?{month:Qi}:{month:Qi,day:"numeric"},"month")},Qs=function(Qi,go){return fr?function Qt(dt,xt){return lr(xt)[dt.weekday-1]}(ct,Qi):Xr(go?{weekday:Qi}:{weekday:Qi,month:"long",day:"numeric"},"weekday")},ln=function(Qi){return fr?function yr(dt,xt){return Rr(xt)[dt.year<0?0:1]}(ct,Qi):Xr({era:Qi},"era")};return es(dt.parseFormat(Ot),function(Qi){switch(Qi){case"S":return Kt.num(ct.millisecond);case"u":case"SSS":return Kt.num(ct.millisecond,3);case"s":return Kt.num(ct.second);case"ss":return Kt.num(ct.second,2);case"uu":return Kt.num(Math.floor(ct.millisecond/10),2);case"uuu":return Kt.num(Math.floor(ct.millisecond/100));case"m":return Kt.num(ct.minute);case"mm":return Kt.num(ct.minute,2);case"h":return Kt.num(ct.hour%12==0?12:ct.hour%12);case"hh":return Kt.num(ct.hour%12==0?12:ct.hour%12,2);case"H":return Kt.num(ct.hour);case"HH":return Kt.num(ct.hour,2);case"Z":return Es({format:"narrow",allowZ:Kt.opts.allowZ});case"ZZ":return Es({format:"short",allowZ:Kt.opts.allowZ});case"ZZZ":return Es({format:"techie",allowZ:Kt.opts.allowZ});case"ZZZZ":return ct.zone.offsetName(ct.ts,{format:"short",locale:Kt.loc.locale});case"ZZZZZ":return ct.zone.offsetName(ct.ts,{format:"long",locale:Kt.loc.locale});case"z":return ct.zoneName;case"a":return fr?function bt(dt){return Tr[dt.hour<12?0:1]}(ct):Xr({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return Ar?Xr({day:"numeric"},"day"):Kt.num(ct.day);case"dd":return Ar?Xr({day:"2-digit"},"day"):Kt.num(ct.day,2);case"c":case"E":return Kt.num(ct.weekday);case"ccc":return Qs("short",!0);case"cccc":return Qs("long",!0);case"ccccc":return Qs("narrow",!0);case"EEE":return Qs("short",!1);case"EEEE":return Qs("long",!1);case"EEEEE":return Qs("narrow",!1);case"L":return Ar?Xr({month:"numeric",day:"numeric"},"month"):Kt.num(ct.month);case"LL":return Ar?Xr({month:"2-digit",day:"numeric"},"month"):Kt.num(ct.month,2);case"LLL":return Zs("short",!0);case"LLLL":return Zs("long",!0);case"LLLLL":return Zs("narrow",!0);case"M":return Ar?Xr({month:"numeric"},"month"):Kt.num(ct.month);case"MM":return Ar?Xr({month:"2-digit"},"month"):Kt.num(ct.month,2);case"MMM":return Zs("short",!1);case"MMMM":return Zs("long",!1);case"MMMMM":return Zs("narrow",!1);case"y":return Ar?Xr({year:"numeric"},"year"):Kt.num(ct.year);case"yy":return Ar?Xr({year:"2-digit"},"year"):Kt.num(ct.year.toString().slice(-2),2);case"yyyy":return Ar?Xr({year:"numeric"},"year"):Kt.num(ct.year,4);case"yyyyyy":return Ar?Xr({year:"numeric"},"year"):Kt.num(ct.year,6);case"G":return ln("short");case"GG":return ln("long");case"GGGGG":return ln("narrow");case"kk":return Kt.num(ct.weekYear.toString().slice(-2),2);case"kkkk":return Kt.num(ct.weekYear,4);case"W":return Kt.num(ct.weekNumber);case"WW":return Kt.num(ct.weekNumber,2);case"o":return Kt.num(ct.ordinal);case"ooo":return Kt.num(ct.ordinal,3);case"q":return Kt.num(ct.quarter);case"qq":return Kt.num(ct.quarter,2);case"X":return Kt.num(Math.floor(ct.ts/1e3));case"x":return Kt.num(ct.ts);default:return function(Qi){var go=dt.macroTokenToFormatOpts(Qi);return go?Kt.formatWithSystemDefault(ct,go):Qi}(Qi)}})},xt.formatDurationFromString=function(ct,Ot){var Qs,Kt=this,fr=function(Qs){switch(Qs[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},Xr=dt.parseFormat(Ot),Es=Xr.reduce(function(Zs,Qs){return Qs.literal?Zs:Zs.concat(Qs.val)},[]),ei=ct.shiftTo.apply(ct,Es.map(fr).filter(function(Zs){return Zs}));return es(Xr,(Qs=ei,function(ji){var ln=fr(ji);return ln?Kt.num(Qs.get(ln),ji.length):ji}))},dt}(),Yr=function(){function dt(mt,ct){this.reason=mt,this.explanation=ct}return dt.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},dt}(),Rs=function(){function dt(){}var xt=dt.prototype;return xt.offsetName=function(ct,Ot){throw new le},xt.formatOffset=function(ct,Ot){throw new le},xt.offset=function(ct){throw new le},xt.equals=function(ct){throw new le},x(dt,[{key:"type",get:function(){throw new le}},{key:"name",get:function(){throw new le}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new le}},{key:"isValid",get:function(){throw new le}}]),dt}(),Zi=null,Cr=function(dt){function xt(){return dt.apply(this,arguments)||this}B(xt,dt);var mt=xt.prototype;return mt.offsetName=function(Ot,Kt){return os(Ot,Kt.format,Kt.locale)},mt.formatOffset=function(Ot,Kt){return $t(this.offset(Ot),Kt)},mt.offset=function(Ot){return-new Date(Ot).getTimezoneOffset()},mt.equals=function(Ot){return"system"===Ot.type},x(xt,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Zi&&(Zi=new xt),Zi}}]),xt}(Rs),as={},zs={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},di={},Nr=function(dt){function xt(ct){var Ot;return(Ot=dt.call(this)||this).zoneName=ct,Ot.valid=xt.isValidZone(ct),Ot}B(xt,dt),xt.create=function(Ot){return di[Ot]||(di[Ot]=new xt(Ot)),di[Ot]},xt.resetCache=function(){di={},as={}},xt.isValidSpecifier=function(Ot){return this.isValidZone(Ot)},xt.isValidZone=function(Ot){if(!Ot)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:Ot}).format(),!0}catch{return!1}};var mt=xt.prototype;return mt.offsetName=function(Ot,Kt){return os(Ot,Kt.format,Kt.locale,this.name)},mt.formatOffset=function(Ot,Kt){return $t(this.offset(Ot),Kt)},mt.offset=function(Ot){var Kt=new Date(Ot);if(isNaN(Kt))return NaN;var fr=function ps(dt){return as[dt]||(as[dt]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:dt,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),as[dt]}(this.name),Ar=fr.formatToParts?function Ys(dt,xt){for(var mt=dt.formatToParts(xt),ct=[],Ot=0;Ot<mt.length;Ot++){var Kt=mt[Ot],fr=Kt.type,Ar=Kt.value,Xr=zs[fr];"era"===fr?ct[Xr]=Ar:Ie(Xr)||(ct[Xr]=parseInt(Ar,10))}return ct}(fr,Kt):function As(dt,xt){var mt=dt.format(xt).replace(/\u200E/g,""),ct=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(mt);return[ct[3],ct[1],ct[2],ct[4],ct[5],ct[6],ct[7]]}(fr,Kt),Xr=Ar[0],Es=Ar[1],ei=Ar[2],Qs=Ar[4],ji=Ar[5],ln=Ar[6];"BC"===Ar[3]&&(Xr=1-Math.abs(Xr));var Qi=+Kt,go=Qi%1e3;return(Pr({year:Xr,month:Es,day:ei,hour:24===Qs?0:Qs,minute:ji,second:ln,millisecond:0})-(Qi-=go>=0?go:1e3+go))/6e4},mt.equals=function(Ot){return"iana"===Ot.type&&Ot.name===this.name},x(xt,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),xt}(Rs),Ai=null,ds=function(dt){function xt(ct){var Ot;return(Ot=dt.call(this)||this).fixed=ct,Ot}B(xt,dt),xt.instance=function(Ot){return 0===Ot?xt.utcInstance:new xt(Ot)},xt.parseSpecifier=function(Ot){if(Ot){var Kt=Ot.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(Kt)return new xt(Hr(Kt[1],Kt[2]))}return null};var mt=xt.prototype;return mt.offsetName=function(){return this.name},mt.formatOffset=function(Ot,Kt){return $t(this.fixed,Kt)},mt.offset=function(){return this.fixed},mt.equals=function(Ot){return"fixed"===Ot.type&&Ot.fixed===this.fixed},x(xt,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+$t(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+$t(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===Ai&&(Ai=new xt(0)),Ai}}]),xt}(Rs),Tn=function(dt){function xt(ct){var Ot;return(Ot=dt.call(this)||this).zoneName=ct,Ot}B(xt,dt);var mt=xt.prototype;return mt.offsetName=function(){return null},mt.formatOffset=function(){return""},mt.offset=function(){return NaN},mt.equals=function(){return!1},x(xt,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),xt}(Rs);function Ci(dt,xt){if(Ie(dt)||null===dt)return xt;if(dt instanceof Rs)return dt;if(function He(dt){return"string"==typeof dt}(dt)){var mt=dt.toLowerCase();return"local"===mt||"system"===mt?xt:"utc"===mt||"gmt"===mt?ds.utcInstance:ds.parseSpecifier(mt)||Nr.create(dt)}return We(dt)?ds.instance(dt):"object"==typeof dt&&dt.offset&&"number"==typeof dt.offset?dt:new Tn(dt)}var _i,gt=function(){return Date.now()},Wr="system",xr=null,bs=null,Ns=null,gi=function(){function dt(){}return dt.resetCaches=function(){Vn.resetCache(),Nr.resetCache()},x(dt,null,[{key:"now",get:function(){return gt},set:function(mt){gt=mt}},{key:"defaultZone",get:function(){return Ci(Wr,Cr.instance)},set:function(mt){Wr=mt}},{key:"defaultLocale",get:function(){return xr},set:function(mt){xr=mt}},{key:"defaultNumberingSystem",get:function(){return bs},set:function(mt){bs=mt}},{key:"defaultOutputCalendar",get:function(){return Ns},set:function(mt){Ns=mt}},{key:"throwOnInvalid",get:function(){return _i},set:function(mt){_i=mt}}]),dt}(),hi=["base"],Di=["padTo","floor"],Oi={},Zr={};function ii(dt,xt){void 0===xt&&(xt={});var mt=JSON.stringify([dt,xt]),ct=Zr[mt];return ct||(ct=new Intl.DateTimeFormat(dt,xt),Zr[mt]=ct),ct}var yn={},Dr={},Ir=null;function Xi(dt,xt,mt,ct,Ot){var Kt=dt.listingMode(mt);return"error"===Kt?null:"en"===Kt?ct(xt):Ot(xt)}var ki=function(){function dt(mt,ct,Ot){this.padTo=Ot.padTo||0,this.floor=Ot.floor||!1;var Kt=re(Ot,Di);if(!ct||Object.keys(Kt).length>0){var fr=w({useGrouping:!1},Ot);Ot.padTo>0&&(fr.minimumIntegerDigits=Ot.padTo),this.inf=function dr(dt,xt){void 0===xt&&(xt={});var mt=JSON.stringify([dt,xt]),ct=yn[mt];return ct||(ct=new Intl.NumberFormat(dt,xt),yn[mt]=ct),ct}(mt,fr)}}return dt.prototype.format=function(ct){if(this.inf){var Ot=this.floor?Math.floor(ct):ct;return this.inf.format(Ot)}return st(this.floor?Math.floor(ct):wt(ct,3),this.padTo)},dt}(),sn=function(){function dt(mt,ct,Ot){var Kt;if(this.opts=Ot,mt.zone.isUniversal){var fr=mt.offset/60*-1,Ar=fr>=0?"Etc/GMT+"+fr:"Etc/GMT"+fr;0!==mt.offset&&Nr.create(Ar).valid?(Kt=Ar,this.dt=mt):(Kt="UTC",this.dt=Ot.timeZoneName||0===mt.offset?mt:xo.fromMillis(mt.ts+60*mt.offset*1e3))}else"system"===mt.zone.type?this.dt=mt:(this.dt=mt,Kt=mt.zone.name);var Xr=w({},this.opts);Kt&&(Xr.timeZone=Kt),this.dtf=ii(ct,Xr)}var xt=dt.prototype;return xt.format=function(){return this.dtf.format(this.dt.toJSDate())},xt.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},xt.resolvedOptions=function(){return this.dtf.resolvedOptions()},dt}(),Uo=function(){function dt(mt,ct,Ot){this.opts=w({style:"long"},Ot),!ct&&et()&&(this.rtf=function er(dt,xt){void 0===xt&&(xt={});var ct=re(xt,hi),Ot=JSON.stringify([dt,ct]),Kt=Dr[Ot];return Kt||(Kt=new Intl.RelativeTimeFormat(dt,xt),Dr[Ot]=Kt),Kt}(mt,Ot))}var xt=dt.prototype;return xt.format=function(ct,Ot){return this.rtf?this.rtf.format(ct,Ot):function jr(dt,xt,mt,ct){void 0===mt&&(mt="always"),void 0===ct&&(ct=!1);var Ot={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Kt=-1===["hours","minutes","seconds"].indexOf(dt);if("auto"===mt&&Kt){var fr="days"===dt;switch(xt){case 1:return fr?"tomorrow":"next "+Ot[dt][0];case-1:return fr?"yesterday":"last "+Ot[dt][0];case 0:return fr?"today":"this "+Ot[dt][0]}}var Ar=Object.is(xt,-0)||xt<0,Xr=Math.abs(xt),Es=1===Xr,ei=Ot[dt],Zs=ct?Es?ei[1]:ei[2]||ei[1]:Es?Ot[dt][0]:dt;return Ar?Xr+" "+Zs+" ago":"in "+Xr+" "+Zs}(Ot,ct,this.opts.numeric,"long"!==this.opts.style)},xt.formatToParts=function(ct,Ot){return this.rtf?this.rtf.formatToParts(ct,Ot):[]},dt}(),Vn=function(){function dt(mt,ct,Ot,Kt){var fr=function Ws(dt){var xt=dt.indexOf("-u-");if(-1===xt)return[dt];var mt,ct=dt.substring(0,xt);try{mt=ii(dt).resolvedOptions()}catch{mt=ii(ct).resolvedOptions()}return[ct,mt.numberingSystem,mt.calendar]}(mt),Xr=fr[1],Es=fr[2];this.locale=fr[0],this.numberingSystem=ct||Xr||null,this.outputCalendar=Ot||Es||null,this.intl=function yi(dt,xt,mt){return(mt||xt)&&(dt+="-u",mt&&(dt+="-ca-"+mt),xt&&(dt+="-nu-"+xt)),dt}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=Kt,this.fastNumbersCached=null}dt.fromOpts=function(ct){return dt.create(ct.locale,ct.numberingSystem,ct.outputCalendar,ct.defaultToEN)},dt.create=function(ct,Ot,Kt,fr){void 0===fr&&(fr=!1);var Ar=ct||gi.defaultLocale;return new dt(Ar||(fr?"en-US":function Ps(){return Ir||(Ir=(new Intl.DateTimeFormat).resolvedOptions().locale)}()),Ot||gi.defaultNumberingSystem,Kt||gi.defaultOutputCalendar,Ar)},dt.resetCache=function(){Ir=null,Zr={},yn={},Dr={}},dt.fromObject=function(ct){var Ot=void 0===ct?{}:ct;return dt.create(Ot.locale,Ot.numberingSystem,Ot.outputCalendar)};var xt=dt.prototype;return xt.listingMode=function(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"},xt.clone=function(ct){return ct&&0!==Object.getOwnPropertyNames(ct).length?dt.create(ct.locale||this.specifiedLocale,ct.numberingSystem||this.numberingSystem,ct.outputCalendar||this.outputCalendar,ct.defaultToEN||!1):this},xt.redefaultToEN=function(ct){return void 0===ct&&(ct={}),this.clone(w({},ct,{defaultToEN:!0}))},xt.redefaultToSystem=function(ct){return void 0===ct&&(ct={}),this.clone(w({},ct,{defaultToEN:!1}))},xt.months=function(ct,Ot,Kt){var fr=this;return void 0===Ot&&(Ot=!1),void 0===Kt&&(Kt=!0),Xi(this,ct,Kt,Kr,function(){var Ar=Ot?{month:ct,day:"numeric"}:{month:ct},Xr=Ot?"format":"standalone";return fr.monthsCache[Xr][ct]||(fr.monthsCache[Xr][ct]=function Gs(dt){for(var xt=[],mt=1;mt<=12;mt++){var ct=xo.utc(2016,mt,1);xt.push(dt(ct))}return xt}(function(Es){return fr.extract(Es,Ar,"month")})),fr.monthsCache[Xr][ct]})},xt.weekdays=function(ct,Ot,Kt){var fr=this;return void 0===Ot&&(Ot=!1),void 0===Kt&&(Kt=!0),Xi(this,ct,Kt,lr,function(){var Ar=Ot?{weekday:ct,year:"numeric",month:"long",day:"numeric"}:{weekday:ct},Xr=Ot?"format":"standalone";return fr.weekdaysCache[Xr][ct]||(fr.weekdaysCache[Xr][ct]=function Mi(dt){for(var xt=[],mt=1;mt<=7;mt++){var ct=xo.utc(2016,11,13+mt);xt.push(dt(ct))}return xt}(function(Es){return fr.extract(Es,Ar,"weekday")})),fr.weekdaysCache[Xr][ct]})},xt.meridiems=function(ct){var Ot=this;return void 0===ct&&(ct=!0),Xi(this,void 0,ct,function(){return Tr},function(){if(!Ot.meridiemCache){var Kt={hour:"numeric",hourCycle:"h12"};Ot.meridiemCache=[xo.utc(2016,11,13,9),xo.utc(2016,11,13,19)].map(function(fr){return Ot.extract(fr,Kt,"dayperiod")})}return Ot.meridiemCache})},xt.eras=function(ct,Ot){var Kt=this;return void 0===Ot&&(Ot=!0),Xi(this,ct,Ot,Rr,function(){var fr={era:ct};return Kt.eraCache[ct]||(Kt.eraCache[ct]=[xo.utc(-40,1,1),xo.utc(2017,1,1)].map(function(Ar){return Kt.extract(Ar,fr,"era")})),Kt.eraCache[ct]})},xt.extract=function(ct,Ot,Kt){var Xr=this.dtFormatter(ct,Ot).formatToParts().find(function(Es){return Es.type.toLowerCase()===Kt});return Xr?Xr.value:null},xt.numberFormatter=function(ct){return void 0===ct&&(ct={}),new ki(this.intl,ct.forceSimple||this.fastNumbers,ct)},xt.dtFormatter=function(ct,Ot){return void 0===Ot&&(Ot={}),new sn(ct,this.intl,Ot)},xt.relFormatter=function(ct){return void 0===ct&&(ct={}),new Uo(this.intl,this.isEnglish(),ct)},xt.listFormatter=function(ct){return void 0===ct&&(ct={}),function zi(dt,xt){void 0===xt&&(xt={});var mt=JSON.stringify([dt,xt]),ct=Oi[mt];return ct||(ct=new Intl.ListFormat(dt,xt),Oi[mt]=ct),ct}(this.intl,ct)},xt.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},xt.equals=function(ct){return this.locale===ct.locale&&this.numberingSystem===ct.numberingSystem&&this.outputCalendar===ct.outputCalendar},x(dt,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function Hs(dt){return(!dt.numberingSystem||"latn"===dt.numberingSystem)&&("latn"===dt.numberingSystem||!dt.locale||dt.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(dt.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}}]),dt}();function io(){for(var dt=arguments.length,xt=new Array(dt),mt=0;mt<dt;mt++)xt[mt]=arguments[mt];var ct=xt.reduce(function(Ot,Kt){return Ot+Kt.source},"");return RegExp("^"+ct+"$")}function An(){for(var dt=arguments.length,xt=new Array(dt),mt=0;mt<dt;mt++)xt[mt]=arguments[mt];return function(ct){return xt.reduce(function(Ot,Kt){var fr=Ot[0],Ar=Ot[1],Es=Kt(ct,Ot[2]),Zs=Es[1],Qs=Es[2];return[w({},fr,Es[0]),Zs||Ar,Qs]},[{},null,1]).slice(0,2)}}function Gn(dt){if(null==dt)return[null,null];for(var xt=arguments.length,mt=new Array(xt>1?xt-1:0),ct=1;ct<xt;ct++)mt[ct-1]=arguments[ct];for(var Ot=0,Kt=mt;Ot<Kt.length;Ot++){var fr=Kt[Ot],Ar=fr[0],Xr=fr[1],Es=Ar.exec(dt);if(Es)return Xr(Es)}return[null,null]}function hn(){for(var dt=arguments.length,xt=new Array(dt),mt=0;mt<dt;mt++)xt[mt]=arguments[mt];return function(ct,Ot){var fr,Kt={};for(fr=0;fr<xt.length;fr++)Kt[xt[fr]]=Mt(ct[Ot+fr]);return[Kt,null,Ot+fr]}}var ya=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,sa=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ia=RegExp(sa.source+("(?:"+ya.source+"?(?:\\[("+_r.source+")\\])?)?")),nn=RegExp("(?:T"+ia.source+")?"),Yn=hn("weekYear","weekNumber","weekDay"),hl=hn("year","ordinal"),Ts=RegExp(sa.source+" ?(?:"+ya.source+"|("+_r.source+"))?"),ys=RegExp("(?: "+Ts.source+")?");function Wi(dt,xt,mt){var ct=dt[xt];return Ie(ct)?mt:Mt(ct)}function Ln(dt,xt){return[{hours:Wi(dt,xt,0),minutes:Wi(dt,xt+1,0),seconds:Wi(dt,xt+2,0),milliseconds:kt(dt[xt+3])},null,xt+4]}function ai(dt,xt){var mt=!dt[xt]&&!dt[xt+1],ct=Hr(dt[xt+1],dt[xt+2]);return[{},mt?null:ds.instance(ct),xt+3]}function Oo(dt,xt){return[{},dt[xt]?Nr.create(dt[xt]):null,xt+1]}var Bt=RegExp("^T?"+sa.source+"$"),Wt=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function rr(dt){var ct=dt[2],Ot=dt[3],Kt=dt[4],fr=dt[5],Ar=dt[6],Xr=dt[7],Es=dt[8],ei="-"===dt[0][0],Zs=Xr&&"-"===Xr[0],Qs=function(ln,Un){return void 0===Un&&(Un=!1),void 0!==ln&&(Un||ln&&ei)?-ln:ln};return[{years:Qs(Ft(dt[1])),months:Qs(Ft(ct)),weeks:Qs(Ft(Ot)),days:Qs(Ft(Kt)),hours:Qs(Ft(fr)),minutes:Qs(Ft(Ar)),seconds:Qs(Ft(Xr),"-0"===Xr),milliseconds:Qs(kt(Es),Zs)}]}var Er={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ur(dt,xt,mt,ct,Ot,Kt,fr){var Ar={year:2===xt.length?ss(Mt(xt)):Mt(xt),month:gr.indexOf(mt)+1,day:Mt(ct),hour:Mt(Ot),minute:Mt(Kt)};return fr&&(Ar.second=Mt(fr)),dt&&(Ar.weekday=dt.length>3?Gr.indexOf(dt)+1:Jr.indexOf(dt)+1),Ar}var Fr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ls(dt){var ji,Xr=dt[8],Es=dt[9],ei=dt[10],Zs=dt[11],Qs=ur(dt[1],dt[4],dt[3],dt[2],dt[5],dt[6],dt[7]);return ji=Xr?Er[Xr]:Es?0:Hr(ei,Zs),[Qs,new ds(ji)]}var St=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mr=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,qr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function fs(dt){return[ur(dt[1],dt[4],dt[3],dt[2],dt[5],dt[6],dt[7]),ds.utcInstance]}function qs(dt){return[ur(dt[1],dt[7],dt[2],dt[3],dt[4],dt[5],dt[6]),ds.utcInstance]}var wi=io(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,nn),fn=io(/(\d{4})-?W(\d\d)(?:-?(\d))?/,nn),Fn=io(/(\d{4})-?(\d{3})/,nn),un=io(ia),Xn=An(function an(dt,xt){return[{year:Wi(dt,xt),month:Wi(dt,xt+1,1),day:Wi(dt,xt+2,1)},null,xt+3]},Ln,ai,Oo),uo=An(Yn,Ln,ai,Oo),bo=An(hl,Ln,ai,Oo),eo=An(Ln,ai,Oo),_l=An(Ln),na=io(/(\d{4})-(\d\d)-(\d\d)/,ys),xc=io(Ts),oa=An(Ln,ai,Oo),Xa={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Oa=w({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},Xa),Qa=365.2425,Bo=30.436875,Jd=w({years:{quarters:4,months:12,weeks:Qa/7,days:Qa,hours:24*Qa,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:Qa/28,days:Qa/4,hours:24*Qa/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:Bo/7,days:Bo,hours:24*Bo,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},Xa),qa=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Po=qa.slice(0).reverse();function Yl(dt,xt,mt){void 0===mt&&(mt=!1);var ct={values:mt?xt.values:w({},dt.values,xt.values||{}),loc:dt.loc.clone(xt.loc),conversionAccuracy:xt.conversionAccuracy||dt.conversionAccuracy};return new mo(ct)}function Pa(dt,xt,mt,ct,Ot){var Kt=dt[Ot][mt],fr=xt[mt]/Kt,Xr=Math.sign(fr)!==Math.sign(ct[Ot])&&0!==ct[Ot]&&Math.abs(fr)<=1?function Zl(dt){return dt<0?Math.floor(dt):Math.ceil(dt)}(fr):Math.trunc(fr);ct[Ot]+=Xr,xt[mt]-=Xr*Kt}var mo=function(){function dt(mt){var ct="longterm"===mt.conversionAccuracy||!1;this.values=mt.values,this.loc=mt.loc||Vn.create(),this.conversionAccuracy=ct?"longterm":"casual",this.invalid=mt.invalid||null,this.matrix=ct?Jd:Oa,this.isLuxonDuration=!0}dt.fromMillis=function(ct,Ot){return dt.fromObject({milliseconds:ct},Ot)},dt.fromObject=function(ct,Ot){if(void 0===Ot&&(Ot={}),null==ct||"object"!=typeof ct)throw new ee("Duration.fromObject: argument expected to be an object, got "+(null===ct?"null":typeof ct));return new dt({values:Ut(ct,dt.normalizeUnit),loc:Vn.fromObject(Ot),conversionAccuracy:Ot.conversionAccuracy})},dt.fromDurationLike=function(ct){if(We(ct))return dt.fromMillis(ct);if(dt.isDuration(ct))return ct;if("object"==typeof ct)return dt.fromObject(ct);throw new ee("Unknown duration argument "+ct+" of type "+typeof ct)},dt.fromISO=function(ct,Ot){var Kt=function Sl(dt){return Gn(dt,[Wt,rr])}(ct),fr=Kt[0];return fr?dt.fromObject(fr,Ot):dt.invalid("unparsable",'the input "'+ct+"\" can't be parsed as ISO 8601")},dt.fromISOTime=function(ct,Ot){var Kt=function Od(dt){return Gn(dt,[Bt,_l])}(ct),fr=Kt[0];return fr?dt.fromObject(fr,Ot):dt.invalid("unparsable",'the input "'+ct+"\" can't be parsed as ISO 8601")},dt.invalid=function(ct,Ot){if(void 0===Ot&&(Ot=null),!ct)throw new ee("need to specify a reason the Duration is invalid");var Kt=ct instanceof Yr?ct:new Yr(ct,Ot);if(gi.throwOnInvalid)throw new Q(Kt);return new dt({invalid:Kt})},dt.normalizeUnit=function(ct){var Ot={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[ct&&ct.toLowerCase()];if(!Ot)throw new se(ct);return Ot},dt.isDuration=function(ct){return ct&&ct.isLuxonDuration||!1};var xt=dt.prototype;return xt.toFormat=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=w({},Ot,{floor:!1!==Ot.round&&!1!==Ot.floor});return this.isValid?Is.create(this.loc,Kt).formatDurationFromString(this,ct):"Invalid Duration"},xt.toHuman=function(ct){var Ot=this;void 0===ct&&(ct={});var Kt=qa.map(function(fr){var Ar=Ot.values[fr];return Ie(Ar)?null:Ot.loc.numberFormatter(w({style:"unit",unitDisplay:"long"},ct,{unit:fr.slice(0,-1)})).format(Ar)}).filter(function(fr){return fr});return this.loc.listFormatter(w({type:"conjunction",style:ct.listStyle||"narrow"},ct)).format(Kt)},xt.toObject=function(){return this.isValid?w({},this.values):{}},xt.toISO=function(){if(!this.isValid)return null;var ct="P";return 0!==this.years&&(ct+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(ct+=this.months+3*this.quarters+"M"),0!==this.weeks&&(ct+=this.weeks+"W"),0!==this.days&&(ct+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(ct+="T"),0!==this.hours&&(ct+=this.hours+"H"),0!==this.minutes&&(ct+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(ct+=wt(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===ct&&(ct+="T0S"),ct},xt.toISOTime=function(ct){if(void 0===ct&&(ct={}),!this.isValid)return null;var Ot=this.toMillis();if(Ot<0||Ot>=864e5)return null;ct=w({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},ct);var Kt=this.shiftTo("hours","minutes","seconds","milliseconds"),fr="basic"===ct.format?"hhmm":"hh:mm";(!ct.suppressSeconds||0!==Kt.seconds||0!==Kt.milliseconds)&&(fr+="basic"===ct.format?"ss":":ss",(!ct.suppressMilliseconds||0!==Kt.milliseconds)&&(fr+=".SSS"));var Ar=Kt.toFormat(fr);return ct.includePrefix&&(Ar="T"+Ar),Ar},xt.toJSON=function(){return this.toISO()},xt.toString=function(){return this.toISO()},xt.toMillis=function(){return this.as("milliseconds")},xt.valueOf=function(){return this.toMillis()},xt.plus=function(ct){if(!this.isValid)return this;for(var Ar,Ot=dt.fromDurationLike(ct),Kt={},fr=oe(qa);!(Ar=fr()).done;){var Xr=Ar.value;(rt(Ot.values,Xr)||rt(this.values,Xr))&&(Kt[Xr]=Ot.get(Xr)+this.get(Xr))}return Yl(this,{values:Kt},!0)},xt.minus=function(ct){if(!this.isValid)return this;var Ot=dt.fromDurationLike(ct);return this.plus(Ot.negate())},xt.mapUnits=function(ct){if(!this.isValid)return this;for(var Ot={},Kt=0,fr=Object.keys(this.values);Kt<fr.length;Kt++){var Ar=fr[Kt];Ot[Ar]=pt(ct(this.values[Ar],Ar))}return Yl(this,{values:Ot},!0)},xt.get=function(ct){return this[dt.normalizeUnit(ct)]},xt.set=function(ct){return this.isValid?Yl(this,{values:w({},this.values,Ut(ct,dt.normalizeUnit))}):this},xt.reconfigure=function(ct){var Ot=void 0===ct?{}:ct,Ar=Ot.conversionAccuracy,Es={loc:this.loc.clone({locale:Ot.locale,numberingSystem:Ot.numberingSystem})};return Ar&&(Es.conversionAccuracy=Ar),Yl(this,Es)},xt.as=function(ct){return this.isValid?this.shiftTo(ct).get(ct):NaN},xt.normalize=function(){if(!this.isValid)return this;var ct=this.toObject();return function Ua(dt,xt){Po.reduce(function(mt,ct){return Ie(xt[ct])?mt:(mt&&Pa(dt,xt,mt,xt,ct),ct)},null)}(this.matrix,ct),Yl(this,{values:ct},!0)},xt.shiftTo=function(){for(var ct=arguments.length,Ot=new Array(ct),Kt=0;Kt<ct;Kt++)Ot[Kt]=arguments[Kt];if(!this.isValid)return this;if(0===Ot.length)return this;Ot=Ot.map(function(go){return dt.normalizeUnit(go)});for(var Es,Zs,fr={},Ar={},Xr=this.toObject(),ei=oe(qa);!(Zs=ei()).done;){var Qs=Zs.value;if(Ot.indexOf(Qs)>=0){Es=Qs;var ji=0;for(var ln in Ar)ji+=this.matrix[ln][Qs]*Ar[ln],Ar[ln]=0;We(Xr[Qs])&&(ji+=Xr[Qs]);var Un=Math.trunc(ji);for(var wn in fr[Qs]=Un,Ar[Qs]=(1e3*ji-1e3*Un)/1e3,Xr)qa.indexOf(wn)>qa.indexOf(Qs)&&Pa(this.matrix,Xr,wn,fr,Qs)}else We(Xr[Qs])&&(Ar[Qs]=Xr[Qs])}for(var Qi in Ar)0!==Ar[Qi]&&(fr[Es]+=Qi===Es?Ar[Qi]:Ar[Qi]/this.matrix[Es][Qi]);return Yl(this,{values:fr},!0).normalize()},xt.negate=function(){if(!this.isValid)return this;for(var ct={},Ot=0,Kt=Object.keys(this.values);Ot<Kt.length;Ot++){var fr=Kt[Ot];ct[fr]=0===this.values[fr]?0:-this.values[fr]}return Yl(this,{values:ct},!0)},xt.equals=function(ct){if(!this.isValid||!ct.isValid||!this.loc.equals(ct.loc))return!1;for(var fr,Kt=oe(qa);!(fr=Kt()).done;){var Ar=fr.value;if(Es=ct.values[Ar],!(void 0===(Xr=this.values[Ar])||0===Xr?void 0===Es||0===Es:Xr===Es))return!1}var Xr,Es;return!0},x(dt,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),dt}(),Ko="Invalid Interval",no=function(){function dt(mt){this.s=mt.start,this.e=mt.end,this.invalid=mt.invalid||null,this.isLuxonInterval=!0}dt.invalid=function(ct,Ot){if(void 0===Ot&&(Ot=null),!ct)throw new ee("need to specify a reason the Interval is invalid");var Kt=ct instanceof Yr?ct:new Yr(ct,Ot);if(gi.throwOnInvalid)throw new Z(Kt);return new dt({invalid:Kt})},dt.fromDateTimes=function(ct,Ot){var Kt=va(ct),fr=va(Ot),Ar=function $n(dt,xt){return dt&&dt.isValid?xt&&xt.isValid?xt<dt?no.invalid("end before start","The end of an interval must be after its start, but you had start="+dt.toISO()+" and end="+xt.toISO()):null:no.invalid("missing or invalid end"):no.invalid("missing or invalid start")}(Kt,fr);return Ar??new dt({start:Kt,end:fr})},dt.after=function(ct,Ot){var Kt=mo.fromDurationLike(Ot),fr=va(ct);return dt.fromDateTimes(fr,fr.plus(Kt))},dt.before=function(ct,Ot){var Kt=mo.fromDurationLike(Ot),fr=va(ct);return dt.fromDateTimes(fr.minus(Kt),fr)},dt.fromISO=function(ct,Ot){var Kt=(ct||"").split("/",2),fr=Kt[0],Ar=Kt[1];if(fr&&Ar){var Xr,Es,ei,Zs;try{Es=(Xr=xo.fromISO(fr,Ot)).isValid}catch{Es=!1}try{Zs=(ei=xo.fromISO(Ar,Ot)).isValid}catch{Zs=!1}if(Es&&Zs)return dt.fromDateTimes(Xr,ei);if(Es){var Qs=mo.fromISO(Ar,Ot);if(Qs.isValid)return dt.after(Xr,Qs)}else if(Zs){var ji=mo.fromISO(fr,Ot);if(ji.isValid)return dt.before(ei,ji)}}return dt.invalid("unparsable",'the input "'+ct+"\" can't be parsed as ISO 8601")},dt.isInterval=function(ct){return ct&&ct.isLuxonInterval||!1};var xt=dt.prototype;return xt.length=function(ct){return void 0===ct&&(ct="milliseconds"),this.isValid?this.toDuration.apply(this,[ct]).get(ct):NaN},xt.count=function(ct){if(void 0===ct&&(ct="milliseconds"),!this.isValid)return NaN;var Ot=this.start.startOf(ct),Kt=this.end.startOf(ct);return Math.floor(Kt.diff(Ot,ct).get(ct))+1},xt.hasSame=function(ct){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,ct))},xt.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},xt.isAfter=function(ct){return!!this.isValid&&this.s>ct},xt.isBefore=function(ct){return!!this.isValid&&this.e<=ct},xt.contains=function(ct){return!!this.isValid&&this.s<=ct&&this.e>ct},xt.set=function(ct){var Ot=void 0===ct?{}:ct;return this.isValid?dt.fromDateTimes(Ot.start||this.s,Ot.end||this.e):this},xt.splitAt=function(){var ct=this;if(!this.isValid)return[];for(var Ot=arguments.length,Kt=new Array(Ot),fr=0;fr<Ot;fr++)Kt[fr]=arguments[fr];for(var Ar=Kt.map(va).filter(function(ji){return ct.contains(ji)}).sort(),Xr=[],Es=this.s,ei=0;Es<this.e;){var Zs=Ar[ei]||this.e,Qs=+Zs>+this.e?this.e:Zs;Xr.push(dt.fromDateTimes(Es,Qs)),Es=Qs,ei+=1}return Xr},xt.splitBy=function(ct){var Ot=mo.fromDurationLike(ct);if(!this.isValid||!Ot.isValid||0===Ot.as("milliseconds"))return[];for(var Ar,Kt=this.s,fr=1,Xr=[];Kt<this.e;){var Es=this.start.plus(Ot.mapUnits(function(ei){return ei*fr}));Xr.push(dt.fromDateTimes(Kt,Ar=+Es>+this.e?this.e:Es)),Kt=Ar,fr+=1}return Xr},xt.divideEqually=function(ct){return this.isValid?this.splitBy(this.length()/ct).slice(0,ct):[]},xt.overlaps=function(ct){return this.e>ct.s&&this.s<ct.e},xt.abutsStart=function(ct){return!!this.isValid&&+this.e==+ct.s},xt.abutsEnd=function(ct){return!!this.isValid&&+ct.e==+this.s},xt.engulfs=function(ct){return!!this.isValid&&this.s<=ct.s&&this.e>=ct.e},xt.equals=function(ct){return!(!this.isValid||!ct.isValid)&&this.s.equals(ct.s)&&this.e.equals(ct.e)},xt.intersection=function(ct){if(!this.isValid)return this;var Ot=this.s>ct.s?this.s:ct.s,Kt=this.e<ct.e?this.e:ct.e;return Ot>=Kt?null:dt.fromDateTimes(Ot,Kt)},xt.union=function(ct){return this.isValid?dt.fromDateTimes(this.s<ct.s?this.s:ct.s,this.e>ct.e?this.e:ct.e):this},dt.merge=function(ct){var Ot=ct.sort(function(Ar,Xr){return Ar.s-Xr.s}).reduce(function(Ar,Xr){var Es=Ar[0],ei=Ar[1];return ei?ei.overlaps(Xr)||ei.abutsStart(Xr)?[Es,ei.union(Xr)]:[Es.concat([ei]),Xr]:[Es,Xr]},[[],null]),Kt=Ot[0],fr=Ot[1];return fr&&Kt.push(fr),Kt},dt.xor=function(ct){for(var Ot,Qs,Kt=null,fr=0,Ar=[],Xr=ct.map(function(ln){return[{time:ln.s,type:"s"},{time:ln.e,type:"e"}]}),Zs=oe((Ot=Array.prototype).concat.apply(Ot,Xr).sort(function(ln,Un){return ln.time-Un.time}));!(Qs=Zs()).done;){var ji=Qs.value;1===(fr+="s"===ji.type?1:-1)?Kt=ji.time:(Kt&&+Kt!=+ji.time&&Ar.push(dt.fromDateTimes(Kt,ji.time)),Kt=null)}return dt.merge(Ar)},xt.difference=function(){for(var ct=this,Ot=arguments.length,Kt=new Array(Ot),fr=0;fr<Ot;fr++)Kt[fr]=arguments[fr];return dt.xor([this].concat(Kt)).map(function(Ar){return ct.intersection(Ar)}).filter(function(Ar){return Ar&&!Ar.isEmpty()})},xt.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":Ko},xt.toISO=function(ct){return this.isValid?this.s.toISO(ct)+"/"+this.e.toISO(ct):Ko},xt.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():Ko},xt.toISOTime=function(ct){return this.isValid?this.s.toISOTime(ct)+"/"+this.e.toISOTime(ct):Ko},xt.toFormat=function(ct,Ot){var fr=(void 0===Ot?{}:Ot).separator,Ar=void 0===fr?" \u2013 ":fr;return this.isValid?""+this.s.toFormat(ct)+Ar+this.e.toFormat(ct):Ko},xt.toDuration=function(ct,Ot){return this.isValid?this.e.diff(this.s,ct,Ot):mo.invalid(this.invalidReason)},xt.mapEndpoints=function(ct){return dt.fromDateTimes(ct(this.s),ct(this.e))},x(dt,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),dt}(),kl=function(){function dt(){}return dt.hasDST=function(mt){void 0===mt&&(mt=gi.defaultZone);var ct=xo.now().setZone(mt).set({month:12});return!mt.isUniversal&&ct.offset!==ct.set({month:6}).offset},dt.isValidIANAZone=function(mt){return Nr.isValidZone(mt)},dt.normalizeZone=function(mt){return Ci(mt,gi.defaultZone)},dt.months=function(mt,ct){void 0===mt&&(mt="long");var Ot=void 0===ct?{}:ct,Kt=Ot.locale,Ar=Ot.numberingSystem,Es=Ot.locObj,Zs=Ot.outputCalendar;return((void 0===Es?null:Es)||Vn.create(void 0===Kt?null:Kt,void 0===Ar?null:Ar,void 0===Zs?"gregory":Zs)).months(mt)},dt.monthsFormat=function(mt,ct){void 0===mt&&(mt="long");var Ot=void 0===ct?{}:ct,Kt=Ot.locale,Ar=Ot.numberingSystem,Es=Ot.locObj,Zs=Ot.outputCalendar;return((void 0===Es?null:Es)||Vn.create(void 0===Kt?null:Kt,void 0===Ar?null:Ar,void 0===Zs?"gregory":Zs)).months(mt,!0)},dt.weekdays=function(mt,ct){void 0===mt&&(mt="long");var Ot=void 0===ct?{}:ct,Kt=Ot.locale,Ar=Ot.numberingSystem,Es=Ot.locObj;return((void 0===Es?null:Es)||Vn.create(void 0===Kt?null:Kt,void 0===Ar?null:Ar,null)).weekdays(mt)},dt.weekdaysFormat=function(mt,ct){void 0===mt&&(mt="long");var Ot=void 0===ct?{}:ct,Kt=Ot.locale,Ar=Ot.numberingSystem,Es=Ot.locObj;return((void 0===Es?null:Es)||Vn.create(void 0===Kt?null:Kt,void 0===Ar?null:Ar,null)).weekdays(mt,!0)},dt.meridiems=function(mt){var Ot=(void 0===mt?{}:mt).locale;return Vn.create(void 0===Ot?null:Ot).meridiems()},dt.eras=function(mt,ct){void 0===mt&&(mt="short");var Kt=(void 0===ct?{}:ct).locale;return Vn.create(void 0===Kt?null:Kt,null,"gregory").eras(mt)},dt.features=function(){return{relative:et()}},dt}();function uc(dt,xt){var mt=function(Kt){return Kt.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},ct=mt(xt)-mt(dt);return Math.floor(mo.fromMillis(ct).as("days"))}var Xd={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},bu={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Qd=Xd.hanidec.replace(/[\[|\]]/g,"").split("");function Ha(dt,xt){return void 0===xt&&(xt=""),new RegExp(""+Xd[dt.numberingSystem||"latn"]+xt)}function zn(dt,xt){return void 0===xt&&(xt=function(ct){return ct}),{regex:dt,deser:function(ct){return xt(function qd(dt){var xt=parseInt(dt,10);if(isNaN(xt)){xt="";for(var mt=0;mt<dt.length;mt++){var ct=dt.charCodeAt(mt);if(-1!==dt[mt].search(Xd.hanidec))xt+=Qd.indexOf(dt[mt]);else for(var Ot in bu){var Kt=bu[Ot],fr=Kt[0];ct>=fr&&ct<=Kt[1]&&(xt+=ct-fr)}}return parseInt(xt,10)}return xt}(ct[0]))}}}var Cu="[ "+String.fromCharCode(160)+"]",Xl=new RegExp(Cu,"g");function Yo(dt){return dt.replace(/\./g,"\\.?").replace(Xl,Cu)}function Ou(dt){return dt.replace(/\./g,"").replace(Xl," ").toLowerCase()}function Zo(dt,xt){return null===dt?null:{regex:RegExp(dt.map(Yo).join("|")),deser:function(ct){var Ot=ct[0];return dt.findIndex(function(Kt){return Ou(Ot)===Ou(Kt)})+xt}}}function Jn(dt,xt){return{regex:dt,deser:function(ct){return Hr(ct[1],ct[2])},groups:xt}}function Ac(dt){return{regex:dt,deser:function(mt){return mt[0]}}}function Ah(dt){return dt.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var Da={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Do=null;function eh(dt,xt,mt){var ct=function Du(dt,xt){var mt;return(mt=Array.prototype).concat.apply(mt,dt.map(function(ct){return function qc(dt,xt){if(dt.literal)return dt;var mt=Is.macroTokenToFormatOpts(dt.val);if(!mt)return dt;var Kt=Is.create(xt,mt).formatDateTimeParts(function Al(){return Do||(Do=xo.fromMillis(1555555555555)),Do}()).map(function(fr){return function Qu(dt,xt,mt){var ct=dt.type;if("literal"===ct)return{literal:!0,val:dt.value};var fr=Da[ct];return"object"==typeof fr&&(fr=fr[mt[ct]]),fr?{literal:!1,val:fr}:void 0}(fr,0,mt)});return Kt.includes(void 0)?dt:Kt}(ct,xt)}))}(Is.parseFormat(mt),dt),Ot=ct.map(function(Qi){return function Qc(dt,xt){var mt=Ha(xt),ct=Ha(xt,"{2}"),Ot=Ha(xt,"{3}"),Kt=Ha(xt,"{4}"),fr=Ha(xt,"{6}"),Ar=Ha(xt,"{1,2}"),Xr=Ha(xt,"{1,3}"),Es=Ha(xt,"{1,6}"),ei=Ha(xt,"{1,9}"),Zs=Ha(xt,"{2,4}"),Qs=Ha(xt,"{4,6}"),ji=function(Qi){return{regex:RegExp(Ah(Qi.val)),deser:function(Au){return Au[0]},literal:!0}},Un=function(Qi){if(dt.literal)return ji(Qi);switch(Qi.val){case"G":return Zo(xt.eras("short",!1),0);case"GG":return Zo(xt.eras("long",!1),0);case"y":return zn(Es);case"yy":case"kk":return zn(Zs,ss);case"yyyy":case"kkkk":return zn(Kt);case"yyyyy":return zn(Qs);case"yyyyyy":return zn(fr);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return zn(Ar);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return zn(ct);case"MMM":return Zo(xt.months("short",!0,!1),1);case"MMMM":return Zo(xt.months("long",!0,!1),1);case"LLL":return Zo(xt.months("short",!1,!1),1);case"LLLL":return Zo(xt.months("long",!1,!1),1);case"o":case"S":return zn(Xr);case"ooo":case"SSS":return zn(Ot);case"u":return Ac(ei);case"uu":return Ac(Ar);case"uuu":case"E":case"c":return zn(mt);case"a":return Zo(xt.meridiems(),0);case"EEE":return Zo(xt.weekdays("short",!1,!1),1);case"EEEE":return Zo(xt.weekdays("long",!1,!1),1);case"ccc":return Zo(xt.weekdays("short",!0,!1),1);case"cccc":return Zo(xt.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Jn(new RegExp("([+-]"+Ar.source+")(?::("+ct.source+"))?"),2);case"ZZZ":return Jn(new RegExp("([+-]"+Ar.source+")("+ct.source+")?"),2);case"z":return Ac(/[a-z_+-/]{1,256}?/i);default:return ji(Qi)}}(dt)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return Un.token=dt,Un}(Qi,dt)}),Kt=Ot.find(function(Qi){return Qi.invalidReason});if(Kt)return{input:xt,tokens:ct,invalidReason:Kt.invalidReason};var fr=function dc(dt){return["^"+dt.map(function(mt){return mt.regex}).reduce(function(mt,ct){return mt+"("+ct.source+")"},"")+"$",dt]}(Ot),Xr=fr[1],Es=RegExp(fr[0],"i"),ei=function Ba(dt,xt,mt){var ct=dt.match(xt);if(ct){var Ot={},Kt=1;for(var fr in mt)if(rt(mt,fr)){var Ar=mt[fr],Xr=Ar.groups?Ar.groups+1:1;!Ar.literal&&Ar.token&&(Ot[Ar.token.val[0]]=Ar.deser(ct.slice(Kt,Kt+Xr))),Kt+=Xr}return[ct,Ot]}return[ct,{}]}(xt,Es,Xr),Zs=ei[0],Qs=ei[1],ji=Qs?function Pu(dt){var ct,mt=null;return Ie(dt.z)||(mt=Nr.create(dt.z)),Ie(dt.Z)||(mt||(mt=new ds(dt.Z)),ct=dt.Z),Ie(dt.q)||(dt.M=3*(dt.q-1)+1),Ie(dt.h)||(dt.h<12&&1===dt.a?dt.h+=12:12===dt.h&&0===dt.a&&(dt.h=0)),0===dt.G&&dt.y&&(dt.y=-dt.y),Ie(dt.u)||(dt.S=kt(dt.u)),[Object.keys(dt).reduce(function(Kt,fr){var Ar=function(fr){switch(fr){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(fr);return Ar&&(Kt[Ar]=dt[fr]),Kt},{}),mt,ct]}(Qs):[null,null,void 0],ln=ji[0],Un=ji[1],wn=ji[2];if(rt(Qs,"a")&&rt(Qs,"H"))throw new J("Can't include meridiem when specifying 24-hour format");return{input:xt,tokens:ct,regex:Es,rawMatches:Zs,matches:Qs,result:ln,zone:Un,specificOffset:wn}}var el=[0,31,59,90,120,151,181,212,243,273,304,334],eu=[0,31,60,91,121,152,182,213,244,274,305,335];function ua(dt,xt){return new Yr("unit out of range","you specified "+xt+" (of type "+typeof xt+") as a "+dt+", which is invalid")}function xu(dt,xt,mt){var ct=new Date(Date.UTC(dt,xt-1,mt));dt<100&&dt>=0&&ct.setUTCFullYear(ct.getUTCFullYear()-1900);var Ot=ct.getUTCDay();return 0===Ot?7:Ot}function Pd(dt,xt,mt){return mt+(zt(dt)?eu:el)[xt-1]}function qu(dt,xt){var mt=zt(dt)?eu:el,ct=mt.findIndex(function(Kt){return Kt<xt});return{month:ct+1,day:xt-mt[ct]}}function oo(dt){var Ar,xt=dt.year,mt=dt.month,ct=dt.day,Ot=Pd(xt,mt,ct),Kt=xu(xt,mt,ct),fr=Math.floor((Ot-Kt+10)/7);return fr<1?fr=kr(Ar=xt-1):fr>kr(xt)?(Ar=xt+1,fr=1):Ar=xt,w({weekYear:Ar,weekNumber:fr,weekday:Kt},Xt(dt))}function tu(dt){var Ar,xt=dt.weekYear,mt=dt.weekNumber,ct=dt.weekday,Ot=xu(xt,1,4),Kt=Zt(xt),fr=7*mt+ct-Ot-3;fr<1?fr+=Zt(Ar=xt-1):fr>Kt?(Ar=xt+1,fr-=Zt(xt)):Ar=xt;var Xr=qu(Ar,fr);return w({year:Ar,month:Xr.month,day:Xr.day},Xt(dt))}function th(dt){var xt=dt.year;return w({year:xt,ordinal:Pd(xt,dt.month,dt.day)},Xt(dt))}function rh(dt){var xt=dt.year,ct=qu(xt,dt.ordinal);return w({year:xt,month:ct.month,day:ct.day},Xt(dt))}function ru(dt){var xt=Se(dt.year),mt=Ze(dt.month,1,12),ct=Ze(dt.day,1,ar(dt.year,dt.month));return xt?mt?!ct&&ua("day",dt.day):ua("month",dt.month):ua("year",dt.year)}function ko(dt){var xt=dt.hour,mt=dt.minute,ct=dt.second,Ot=dt.millisecond,Kt=Ze(xt,0,23)||24===xt&&0===mt&&0===ct&&0===Ot,fr=Ze(mt,0,59),Ar=Ze(ct,0,59),Xr=Ze(Ot,0,999);return Kt?fr?Ar?!Xr&&ua("millisecond",Ot):ua("second",ct):ua("minute",mt):ua("hour",xt)}var Dd="Invalid DateTime",T_=864e13;function Lc(dt){return new Yr("unsupported zone",'the zone "'+dt.name+'" is not supported')}function Ql(dt){return null===dt.weekData&&(dt.weekData=oo(dt.c)),dt.weekData}function pl(dt,xt){var mt={ts:dt.ts,zone:dt.zone,c:dt.c,o:dt.o,loc:dt.loc,invalid:dt.invalid};return new xo(w({},mt,xt,{old:mt}))}function ed(dt,xt,mt){var ct=dt-60*xt*1e3,Ot=mt.offset(ct);if(xt===Ot)return[ct,xt];var Kt=mt.offset(ct-=60*(Ot-xt)*1e3);return Ot===Kt?[ct,Ot]:[dt-60*Math.min(Ot,Kt)*1e3,Math.max(Ot,Kt)]}function rl(dt,xt){var mt=new Date(dt+=60*xt*1e3);return{year:mt.getUTCFullYear(),month:mt.getUTCMonth()+1,day:mt.getUTCDate(),hour:mt.getUTCHours(),minute:mt.getUTCMinutes(),second:mt.getUTCSeconds(),millisecond:mt.getUTCMilliseconds()}}function ql(dt,xt,mt){return ed(Pr(dt),xt,mt)}function wc(dt,xt){var mt=dt.o,ct=dt.c.year+Math.trunc(xt.years),Ot=dt.c.month+Math.trunc(xt.months)+3*Math.trunc(xt.quarters),Kt=w({},dt.c,{year:ct,month:Ot,day:Math.min(dt.c.day,ar(ct,Ot))+Math.trunc(xt.days)+7*Math.trunc(xt.weeks)}),fr=mo.fromObject({years:xt.years-Math.trunc(xt.years),quarters:xt.quarters-Math.trunc(xt.quarters),months:xt.months-Math.trunc(xt.months),weeks:xt.weeks-Math.trunc(xt.weeks),days:xt.days-Math.trunc(xt.days),hours:xt.hours,minutes:xt.minutes,seconds:xt.seconds,milliseconds:xt.milliseconds}).as("milliseconds"),Xr=ed(Pr(Kt),mt,dt.zone),Es=Xr[0],ei=Xr[1];return 0!==fr&&(ei=dt.zone.offset(Es+=fr)),{ts:Es,o:ei}}function hc(dt,xt,mt,ct,Ot,Kt){var fr=mt.setZone,Ar=mt.zone;if(dt&&0!==Object.keys(dt).length){var Es=xo.fromObject(dt,w({},mt,{zone:xt||Ar,specificOffset:Kt}));return fr?Es:Es.setZone(Ar)}return xo.invalid(new Yr("unparsable",'the input "'+Ot+"\" can't be parsed as "+ct))}function fl(dt,xt,mt){return void 0===mt&&(mt=!0),dt.isValid?Is.create(Vn.create("en-US"),{allowZ:mt,forceSimple:!0}).formatDateTimeFromString(dt,xt):null}function xd(dt,xt){var mt=dt.c.year>9999||dt.c.year<0,ct="";return mt&&dt.c.year>=0&&(ct+="+"),ct+=st(dt.c.year,mt?6:4),xt?(ct+="-",ct+=st(dt.c.month),ct+="-",ct+=st(dt.c.day)):(ct+=st(dt.c.month),ct+=st(dt.c.day)),ct}function Lh(dt,xt,mt,ct,Ot,Kt){var fr=st(dt.c.hour);return xt?(fr+=":",fr+=st(dt.c.minute),(0!==dt.c.second||!mt)&&(fr+=":")):fr+=st(dt.c.minute),(0!==dt.c.second||!mt)&&(fr+=st(dt.c.second),(0!==dt.c.millisecond||!ct)&&(fr+=".",fr+=st(dt.c.millisecond,3))),Ot&&(dt.isOffsetFixed&&0===dt.offset&&!Kt?fr+="Z":dt.o<0?(fr+="-",fr+=st(Math.trunc(-dt.o/60)),fr+=":",fr+=st(Math.trunc(-dt.o%60))):(fr+="+",fr+=st(Math.trunc(dt.o/60)),fr+=":",fr+=st(Math.trunc(dt.o%60)))),Kt&&(fr+="["+dt.zone.ianaName+"]"),fr}var Rc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Sd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ad={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ec=["year","month","day","hour","minute","second","millisecond"],Su=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],su=["year","ordinal","hour","minute","second","millisecond"];function Ld(dt){var xt={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[dt.toLowerCase()];if(!xt)throw new se(dt);return xt}function iu(dt,xt){var Kt,fr,mt=Ci(xt.zone,gi.defaultZone),ct=Vn.fromObject(xt),Ot=gi.now();if(Ie(dt.year))Kt=Ot;else{for(var Xr,Ar=oe(ec);!(Xr=Ar()).done;){var Es=Xr.value;Ie(dt[Es])&&(dt[Es]=Rc[Es])}var ei=ru(dt)||ko(dt);if(ei)return xo.invalid(ei);var Qs=ql(dt,mt.offset(Ot),mt);Kt=Qs[0],fr=Qs[1]}return new xo({ts:Kt,zone:mt,loc:ct,o:fr})}function sl(dt,xt,mt){var ct=!!Ie(mt.round)||mt.round,Ot=function(Zs,Qs){return Zs=wt(Zs,ct||mt.calendary?0:2,!0),xt.loc.clone(mt).relFormatter(mt).format(Zs,Qs)},Kt=function(Zs){return mt.calendary?xt.hasSame(dt,Zs)?0:xt.startOf(Zs).diff(dt.startOf(Zs),Zs).get(Zs):xt.diff(dt,Zs).get(Zs)};if(mt.unit)return Ot(Kt(mt.unit),mt.unit);for(var Ar,fr=oe(mt.units);!(Ar=fr()).done;){var Xr=Ar.value,Es=Kt(Xr);if(Math.abs(Es)>=1)return Ot(Es,Xr)}return Ot(dt>xt?-0:0,mt.units[mt.units.length-1])}function il(dt){var mt,xt={};return dt.length>0&&"object"==typeof dt[dt.length-1]?(xt=dt[dt.length-1],mt=Array.from(dt).slice(0,dt.length-1)):mt=Array.from(dt),[xt,mt]}var xo=function(){function dt(mt){var ct=mt.zone||gi.defaultZone,Ot=mt.invalid||(Number.isNaN(mt.ts)?new Yr("invalid input"):null)||(ct.isValid?null:Lc(ct));this.ts=Ie(mt.ts)?gi.now():mt.ts;var Kt=null,fr=null;if(!Ot)if(mt.old&&mt.old.ts===this.ts&&mt.old.zone.equals(ct)){var Xr=[mt.old.c,mt.old.o];Kt=Xr[0],fr=Xr[1]}else{var Es=ct.offset(this.ts);Kt=rl(this.ts,Es),Kt=(Ot=Number.isNaN(Kt.year)?new Yr("invalid input"):null)?null:Kt,fr=Ot?null:Es}this._zone=ct,this.loc=mt.loc||Vn.create(),this.invalid=Ot,this.weekData=null,this.c=Kt,this.o=fr,this.isLuxonDateTime=!0}dt.now=function(){return new dt({})},dt.local=function(){var ct=il(arguments),Ot=ct[0],Kt=ct[1],fr=Kt[0],Ar=Kt[1],Xr=Kt[2],Es=Kt[3],ei=Kt[4],Zs=Kt[5],Qs=Kt[6];return iu({year:fr,month:Ar,day:Xr,hour:Es,minute:ei,second:Zs,millisecond:Qs},Ot)},dt.utc=function(){var ct=il(arguments),Ot=ct[0],Kt=ct[1],fr=Kt[0],Ar=Kt[1],Xr=Kt[2],Es=Kt[3],ei=Kt[4],Zs=Kt[5],Qs=Kt[6];return Ot.zone=ds.utcInstance,iu({year:fr,month:Ar,day:Xr,hour:Es,minute:ei,second:Zs,millisecond:Qs},Ot)},dt.fromJSDate=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=function $e(dt){return"[object Date]"===Object.prototype.toString.call(dt)}(ct)?ct.valueOf():NaN;if(Number.isNaN(Kt))return dt.invalid("invalid input");var fr=Ci(Ot.zone,gi.defaultZone);return fr.isValid?new dt({ts:Kt,zone:fr,loc:Vn.fromObject(Ot)}):dt.invalid(Lc(fr))},dt.fromMillis=function(ct,Ot){if(void 0===Ot&&(Ot={}),We(ct))return ct<-T_||ct>T_?dt.invalid("Timestamp out of range"):new dt({ts:ct,zone:Ci(Ot.zone,gi.defaultZone),loc:Vn.fromObject(Ot)});throw new ee("fromMillis requires a numerical input, but received a "+typeof ct+" with value "+ct)},dt.fromSeconds=function(ct,Ot){if(void 0===Ot&&(Ot={}),We(ct))return new dt({ts:1e3*ct,zone:Ci(Ot.zone,gi.defaultZone),loc:Vn.fromObject(Ot)});throw new ee("fromSeconds requires a numerical input")},dt.fromObject=function(ct,Ot){void 0===Ot&&(Ot={}),ct=ct||{};var Kt=Ci(Ot.zone,gi.defaultZone);if(!Kt.isValid)return dt.invalid(Lc(Kt));var fr=gi.now(),Ar=Ie(Ot.specificOffset)?Kt.offset(fr):Ot.specificOffset,Xr=Ut(ct,Ld),Es=!Ie(Xr.ordinal),ei=!Ie(Xr.year),Zs=!Ie(Xr.month)||!Ie(Xr.day),Qs=ei||Zs,ji=Xr.weekYear||Xr.weekNumber,ln=Vn.fromObject(Ot);if((Qs||Es)&&ji)throw new J("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Zs&&Es)throw new J("Can't mix ordinal dates with month/day");var wn,Qi,Un=ji||Xr.weekday&&!Qs,go=rl(fr,Ar);Un?(wn=Su,Qi=Sd,go=oo(go)):Es?(wn=su,Qi=Ad,go=th(go)):(wn=ec,Qi=Rc);for(var wd,Au=!1,td=oe(wn);!(wd=td()).done;){var pc=wd.value;Ie(Xr[pc])?Xr[pc]=Au?Qi[pc]:go[pc]:Au=!0}var wh=Un?function tl(dt){var xt=Se(dt.weekYear),mt=Ze(dt.weekNumber,1,kr(dt.weekYear)),ct=Ze(dt.weekday,1,7);return xt?mt?!ct&&ua("weekday",dt.weekday):ua("week",dt.week):ua("weekYear",dt.weekYear)}(Xr):Es?function aa(dt){var xt=Se(dt.year),mt=Ze(dt.ordinal,1,Zt(dt.year));return xt?!mt&&ua("ordinal",dt.ordinal):ua("year",dt.year)}(Xr):ru(Xr),ja=wh||ko(Xr);if(ja)return dt.invalid(ja);var Lu=ql(Un?tu(Xr):Es?rh(Xr):Xr,Ar,Kt),sd=new dt({ts:Lu[0],zone:Kt,o:Lu[1],loc:ln});return Xr.weekday&&Qs&&ct.weekday!==sd.weekday?dt.invalid("mismatched weekday","you can't specify both a weekday of "+Xr.weekday+" and a date of "+sd.toISO()):sd},dt.fromISO=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=function za(dt){return Gn(dt,[wi,Xn],[fn,uo],[Fn,bo],[un,eo])}(ct);return hc(Kt[0],Kt[1],Ot,"ISO 8601",ct)},dt.fromRFC2822=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=function Xc(dt){return Gn(function Pt(dt){return dt.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(dt),[Fr,ls])}(ct);return hc(Kt[0],Kt[1],Ot,"RFC 2822",ct)},dt.fromHTTP=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=function Kl(dt){return Gn(dt,[St,fs],[mr,fs],[qr,qs])}(ct);return hc(Kt[0],Kt[1],Ot,"HTTP",Ot)},dt.fromFormat=function(ct,Ot,Kt){if(void 0===Kt&&(Kt={}),Ie(ct)||Ie(Ot))throw new ee("fromFormat requires an input string and a format");var Ar=Kt.locale,Es=Kt.numberingSystem,Qs=function jo(dt,xt,mt){var ct=eh(dt,xt,mt);return[ct.result,ct.zone,ct.specificOffset,ct.invalidReason]}(Vn.fromOpts({locale:void 0===Ar?null:Ar,numberingSystem:void 0===Es?null:Es,defaultToEN:!0}),ct,Ot),ji=Qs[0],ln=Qs[1],Un=Qs[2],wn=Qs[3];return wn?dt.invalid(wn):hc(ji,ln,Kt,"format "+Ot,ct,Un)},dt.fromString=function(ct,Ot,Kt){return void 0===Kt&&(Kt={}),dt.fromFormat(ct,Ot,Kt)},dt.fromSQL=function(ct,Ot){void 0===Ot&&(Ot={});var Kt=function Sc(dt){return Gn(dt,[na,Xn],[xc,oa])}(ct);return hc(Kt[0],Kt[1],Ot,"SQL",ct)},dt.invalid=function(ct,Ot){if(void 0===Ot&&(Ot=null),!ct)throw new ee("need to specify a reason the DateTime is invalid");var Kt=ct instanceof Yr?ct:new Yr(ct,Ot);if(gi.throwOnInvalid)throw new X(Kt);return new dt({invalid:Kt})},dt.isDateTime=function(ct){return ct&&ct.isLuxonDateTime||!1};var xt=dt.prototype;return xt.get=function(ct){return this[ct]},xt.resolvedLocaleOptions=function(ct){void 0===ct&&(ct={});var Ot=Is.create(this.loc.clone(ct),ct).resolvedOptions(this);return{locale:Ot.locale,numberingSystem:Ot.numberingSystem,outputCalendar:Ot.calendar}},xt.toUTC=function(ct,Ot){return void 0===ct&&(ct=0),void 0===Ot&&(Ot={}),this.setZone(ds.instance(ct),Ot)},xt.toLocal=function(){return this.setZone(gi.defaultZone)},xt.setZone=function(ct,Ot){var Kt=void 0===Ot?{}:Ot,fr=Kt.keepLocalTime,Ar=void 0!==fr&&fr,Xr=Kt.keepCalendarTime,Es=void 0!==Xr&&Xr;if((ct=Ci(ct,gi.defaultZone)).equals(this.zone))return this;if(ct.isValid){var ei=this.ts;if(Ar||Es){var Zs=ct.offset(this.ts);ei=ql(this.toObject(),Zs,ct)[0]}return pl(this,{ts:ei,zone:ct})}return dt.invalid(Lc(ct))},xt.reconfigure=function(ct){var Ot=void 0===ct?{}:ct;return pl(this,{loc:this.loc.clone({locale:Ot.locale,numberingSystem:Ot.numberingSystem,outputCalendar:Ot.outputCalendar})})},xt.setLocale=function(ct){return this.reconfigure({locale:ct})},xt.set=function(ct){if(!this.isValid)return this;var Zs,Ot=Ut(ct,Ld),Kt=!Ie(Ot.weekYear)||!Ie(Ot.weekNumber)||!Ie(Ot.weekday),fr=!Ie(Ot.ordinal),Ar=!Ie(Ot.year),Xr=!Ie(Ot.month)||!Ie(Ot.day);if((Ar||Xr||fr)&&(Ot.weekYear||Ot.weekNumber))throw new J("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Xr&&fr)throw new J("Can't mix ordinal dates with month/day");Kt?Zs=tu(w({},oo(this.c),Ot)):Ie(Ot.ordinal)?(Zs=w({},this.toObject(),Ot),Ie(Ot.day)&&(Zs.day=Math.min(ar(Zs.year,Zs.month),Zs.day))):Zs=rh(w({},th(this.c),Ot));var Qs=ql(Zs,this.o,this.zone);return pl(this,{ts:Qs[0],o:Qs[1]})},xt.plus=function(ct){return this.isValid?pl(this,wc(this,mo.fromDurationLike(ct))):this},xt.minus=function(ct){return this.isValid?pl(this,wc(this,mo.fromDurationLike(ct).negate())):this},xt.startOf=function(ct){if(!this.isValid)return this;var Ot={},Kt=mo.normalizeUnit(ct);switch(Kt){case"years":Ot.month=1;case"quarters":case"months":Ot.day=1;case"weeks":case"days":Ot.hour=0;case"hours":Ot.minute=0;case"minutes":Ot.second=0;case"seconds":Ot.millisecond=0}if("weeks"===Kt&&(Ot.weekday=1),"quarters"===Kt){var fr=Math.ceil(this.month/3);Ot.month=3*(fr-1)+1}return this.set(Ot)},xt.endOf=function(ct){var Ot;return this.isValid?this.plus((Ot={},Ot[ct]=1,Ot)).startOf(ct).minus(1):this},xt.toFormat=function(ct,Ot){return void 0===Ot&&(Ot={}),this.isValid?Is.create(this.loc.redefaultToEN(Ot)).formatDateTimeFromString(this,ct):Dd},xt.toLocaleString=function(ct,Ot){return void 0===ct&&(ct=me),void 0===Ot&&(Ot={}),this.isValid?Is.create(this.loc.clone(Ot),ct).formatDateTime(this):Dd},xt.toLocaleParts=function(ct){return void 0===ct&&(ct={}),this.isValid?Is.create(this.loc.clone(ct),ct).formatDateTimeParts(this):[]},xt.toISO=function(ct){var Ot=void 0===ct?{}:ct,Kt=Ot.format,Ar=Ot.suppressSeconds,Xr=void 0!==Ar&&Ar,Es=Ot.suppressMilliseconds,ei=void 0!==Es&&Es,Zs=Ot.includeOffset,Qs=void 0===Zs||Zs,ji=Ot.extendedZone,ln=void 0!==ji&&ji;if(!this.isValid)return null;var Un="extended"===(void 0===Kt?"extended":Kt),wn=xd(this,Un);return(wn+="T")+Lh(this,Un,Xr,ei,Qs,ln)},xt.toISODate=function(ct){var Kt=(void 0===ct?{}:ct).format;return this.isValid?xd(this,"extended"===(void 0===Kt?"extended":Kt)):null},xt.toISOWeekDate=function(){return fl(this,"kkkk-'W'WW-c")},xt.toISOTime=function(ct){var Ot=void 0===ct?{}:ct,Kt=Ot.suppressMilliseconds,Ar=Ot.suppressSeconds,Es=Ot.includeOffset,Zs=Ot.includePrefix,ji=Ot.extendedZone,Un=Ot.format;return this.isValid?(void 0!==Zs&&Zs?"T":"")+Lh(this,"extended"===(void 0===Un?"extended":Un),void 0!==Ar&&Ar,void 0!==Kt&&Kt,void 0===Es||Es,void 0!==ji&&ji):null},xt.toRFC2822=function(){return fl(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},xt.toHTTP=function(){return fl(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},xt.toSQLDate=function(){return this.isValid?xd(this,!0):null},xt.toSQLTime=function(ct){var Ot=void 0===ct?{}:ct,Kt=Ot.includeOffset,fr=void 0===Kt||Kt,Ar=Ot.includeZone,Xr=void 0!==Ar&&Ar,Es=Ot.includeOffsetSpace,Zs="HH:mm:ss.SSS";return(Xr||fr)&&((void 0===Es||Es)&&(Zs+=" "),Xr?Zs+="z":fr&&(Zs+="ZZ")),fl(this,Zs,!0)},xt.toSQL=function(ct){return void 0===ct&&(ct={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(ct):null},xt.toString=function(){return this.isValid?this.toISO():Dd},xt.valueOf=function(){return this.toMillis()},xt.toMillis=function(){return this.isValid?this.ts:NaN},xt.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},xt.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},xt.toJSON=function(){return this.toISO()},xt.toBSON=function(){return this.toJSDate()},xt.toObject=function(ct){if(void 0===ct&&(ct={}),!this.isValid)return{};var Ot=w({},this.c);return ct.includeConfig&&(Ot.outputCalendar=this.outputCalendar,Ot.numberingSystem=this.loc.numberingSystem,Ot.locale=this.loc.locale),Ot},xt.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},xt.diff=function(ct,Ot,Kt){if(void 0===Ot&&(Ot="milliseconds"),void 0===Kt&&(Kt={}),!this.isValid||!ct.isValid)return mo.invalid("created by diffing an invalid DateTime");var fr=w({locale:this.locale,numberingSystem:this.numberingSystem},Kt),Ar=function nt(dt){return Array.isArray(dt)?dt:[dt]}(Ot).map(mo.normalizeUnit),Xr=ct.valueOf()>this.valueOf(),Zs=function $l(dt,xt,mt,ct){var Zs,Ot=function Xu(dt,xt,mt){for(var Kt,fr,Ot={},Ar=0,Xr=[["years",function(Un,wn){return wn.year-Un.year}],["quarters",function(Un,wn){return wn.quarter-Un.quarter}],["months",function(Un,wn){return wn.month-Un.month+12*(wn.year-Un.year)}],["weeks",function(Un,wn){var Qi=uc(Un,wn);return(Qi-Qi%7)/7}],["days",uc]];Ar<Xr.length;Ar++){var Es=Xr[Ar],ei=Es[0],Zs=Es[1];if(mt.indexOf(ei)>=0){var Qs;Kt=ei;var ln,ji=Zs(dt,xt);(fr=dt.plus(((Qs={})[ei]=ji,Qs)))>xt?(dt=dt.plus(((ln={})[ei]=ji-1,ln)),ji-=1):dt=fr,Ot[ei]=ji}}return[dt,Ot,fr,Kt]}(dt,xt,mt),Kt=Ot[0],fr=Ot[1],Ar=Ot[2],Xr=Ot[3],Es=xt-Kt,ei=mt.filter(function(ln){return["hours","minutes","seconds","milliseconds"].indexOf(ln)>=0});0===ei.length&&(Ar<xt&&(Ar=Kt.plus(((Zs={})[Xr]=1,Zs))),Ar!==Kt&&(fr[Xr]=(fr[Xr]||0)+Es/(Ar-Kt)));var ji,Qs=mo.fromObject(fr,ct);return ei.length>0?(ji=mo.fromMillis(Es,ct)).shiftTo.apply(ji,ei).plus(Qs):Qs}(Xr?this:ct,Xr?ct:this,Ar,fr);return Xr?Zs.negate():Zs},xt.diffNow=function(ct,Ot){return void 0===ct&&(ct="milliseconds"),void 0===Ot&&(Ot={}),this.diff(dt.now(),ct,Ot)},xt.until=function(ct){return this.isValid?no.fromDateTimes(this,ct):this},xt.hasSame=function(ct,Ot){if(!this.isValid)return!1;var Kt=ct.valueOf(),fr=this.setZone(ct.zone,{keepLocalTime:!0});return fr.startOf(Ot)<=Kt&&Kt<=fr.endOf(Ot)},xt.equals=function(ct){return this.isValid&&ct.isValid&&this.valueOf()===ct.valueOf()&&this.zone.equals(ct.zone)&&this.loc.equals(ct.loc)},xt.toRelative=function(ct){if(void 0===ct&&(ct={}),!this.isValid)return null;var Ot=ct.base||dt.fromObject({},{zone:this.zone}),Kt=ct.padding?this<Ot?-ct.padding:ct.padding:0,fr=["years","months","days","hours","minutes","seconds"],Ar=ct.unit;return Array.isArray(ct.unit)&&(fr=ct.unit,Ar=void 0),sl(Ot,this.plus(Kt),w({},ct,{numeric:"always",units:fr,unit:Ar}))},xt.toRelativeCalendar=function(ct){return void 0===ct&&(ct={}),this.isValid?sl(ct.base||dt.fromObject({},{zone:this.zone}),this,w({},ct,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},dt.min=function(){for(var ct=arguments.length,Ot=new Array(ct),Kt=0;Kt<ct;Kt++)Ot[Kt]=arguments[Kt];if(!Ot.every(dt.isDateTime))throw new ee("min requires all arguments be DateTimes");return it(Ot,function(fr){return fr.valueOf()},Math.min)},dt.max=function(){for(var ct=arguments.length,Ot=new Array(ct),Kt=0;Kt<ct;Kt++)Ot[Kt]=arguments[Kt];if(!Ot.every(dt.isDateTime))throw new ee("max requires all arguments be DateTimes");return it(Ot,function(fr){return fr.valueOf()},Math.max)},dt.fromFormatExplain=function(ct,Ot,Kt){void 0===Kt&&(Kt={});var Ar=Kt.locale,Es=Kt.numberingSystem;return eh(Vn.fromOpts({locale:void 0===Ar?null:Ar,numberingSystem:void 0===Es?null:Es,defaultToEN:!0}),ct,Ot)},dt.fromStringExplain=function(ct,Ot,Kt){return void 0===Kt&&(Kt={}),dt.fromFormatExplain(ct,Ot,Kt)},x(dt,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Ql(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Ql(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Ql(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?th(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?kl.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?kl.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?kl.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?kl.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return zt(this.year)}},{key:"daysInMonth",get:function(){return ar(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?Zt(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?kr(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return me}},{key:"DATE_MED",get:function(){return _e}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return he}},{key:"DATE_FULL",get:function(){return ye}},{key:"DATE_HUGE",get:function(){return fe}},{key:"TIME_SIMPLE",get:function(){return De}},{key:"TIME_WITH_SECONDS",get:function(){return ve}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ce}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return ge}},{key:"TIME_24_SIMPLE",get:function(){return Te}},{key:"TIME_24_WITH_SECONDS",get:function(){return Le}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return je}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return ze}},{key:"DATETIME_SHORT",get:function(){return Ee}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return Ae}},{key:"DATETIME_MED",get:function(){return we}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Be}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Pe}},{key:"DATETIME_FULL",get:function(){return Oe}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ke}},{key:"DATETIME_HUGE",get:function(){return Ve}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Ne}}]),dt}();function va(dt){if(xo.isDateTime(dt))return dt;if(dt&&dt.valueOf&&We(dt.valueOf()))return xo.fromJSDate(dt);if(dt&&"object"==typeof dt)return xo.fromObject(dt);throw new ee("Unknown datetime argument: "+dt+", of type "+typeof dt)}xe.ou=xo},27088:function(qe,xe,T){!function(D){"use strict";D.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(w){return/^nm$/i.test(w)},meridiem:function(w,B,U){return w<12?U?"vm":"VM":U?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[M\xf4re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(w){return w+(1===w||8===w||w>=20?"ste":"de")},week:{dow:1,doy:4}})}(T(15439))},52502:function(qe,xe,T){!function(D){"use strict";var x=function(Y){return 0===Y?0:1===Y?1:2===Y?2:Y%100>=3&&Y%100<=10?3:Y%100>=11?4:5},w={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},B=function(Y){return function(H,G,$,re){var ue=x(H),ae=w[Y][x(H)];return 2===ue&&(ae=ae[G?0:1]),ae.replace(/%d/i,H)}},U=["\u062c\u0627\u0646\u0641\u064a","\u0641\u064a\u0641\u0631\u064a","\u0645\u0627\u0631\u0633","\u0623\u0641\u0631\u064a\u0644","\u0645\u0627\u064a","\u062c\u0648\u0627\u0646","\u062c\u0648\u064a\u0644\u064a\u0629","\u0623\u0648\u062a","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];D.defineLocale("ar-dz",{months:U,monthsShort:U,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(Y){return"\u0645"===Y},meridiem:function(Y,H,G){return Y<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:B("s"),ss:B("s"),m:B("m"),mm:B("m"),h:B("h"),hh:B("h"),d:B("d"),dd:B("d"),M:B("M"),MM:B("M"),y:B("y"),yy:B("y")},postformat:function(Y){return Y.replace(/,/g,"\u060c")},week:{dow:0,doy:4}})}(T(15439))},30128:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ar-kw",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062a\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062a\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:0,doy:12}})}(T(15439))},84519:function(qe,xe,T){!function(D){"use strict";var x={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},w=function(H){return 0===H?0:1===H?1:2===H?2:H%100>=3&&H%100<=10?3:H%100>=11?4:5},B={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},U=function(H){return function(G,$,re,ue){var ae=w(G),oe=B[H][w(G)];return 2===ae&&(oe=oe[$?0:1]),oe.replace(/%d/i,G)}},W=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];D.defineLocale("ar-ly",{months:W,monthsShort:W,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(H){return"\u0645"===H},meridiem:function(H,G,$){return H<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:U("s"),ss:U("s"),m:U("m"),mm:U("m"),h:U("h"),hh:U("h"),d:U("d"),dd:U("d"),M:U("M"),MM:U("M"),y:U("y"),yy:U("y")},preparse:function(H){return H.replace(/\u060c/g,",")},postformat:function(H){return H.replace(/\d/g,function(G){return x[G]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(T(15439))},65443:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ar-ma",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:1,doy:4}})}(T(15439))},17642:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},w={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"};D.defineLocale("ar-sa",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(U){return"\u0645"===U},meridiem:function(U,W,Y){return U<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},preparse:function(U){return U.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(W){return w[W]}).replace(/\u060c/g,",")},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]}).replace(/,/g,"\u060c")},week:{dow:0,doy:6}})}(T(15439))},68592:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ar-tn",{months:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:1,doy:4}})}(T(15439))},17038:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},w={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"},B=function(G){return 0===G?0:1===G?1:2===G?2:G%100>=3&&G%100<=10?3:G%100>=11?4:5},U={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},W=function(G){return function($,re,ue,ae){var oe=B($),ie=U[G][B($)];return 2===oe&&(ie=ie[re?0:1]),ie.replace(/%d/i,$)}},Y=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];D.defineLocale("ar",{months:Y,monthsShort:Y,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(G){return"\u0645"===G},meridiem:function(G,$,re){return G<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:W("s"),ss:W("s"),m:W("m"),mm:W("m"),h:W("h"),hh:W("h"),d:W("d"),dd:W("d"),M:W("M"),MM:W("M"),y:W("y"),yy:W("y")},preparse:function(G){return G.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function($){return w[$]}).replace(/\u060c/g,",")},postformat:function(G){return G.replace(/\d/g,function($){return x[$]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(T(15439))},51213:function(qe,xe,T){!function(D){"use strict";var x={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-\xfcnc\xfc",4:"-\xfcnc\xfc",100:"-\xfcnc\xfc",6:"-nc\u0131",9:"-uncu",10:"-uncu",30:"-uncu",60:"-\u0131nc\u0131",90:"-\u0131nc\u0131"};D.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ert\u0259si_\xc7\u0259r\u015f\u0259nb\u0259 ax\u015fam\u0131_\xc7\u0259r\u015f\u0259nb\u0259_C\xfcm\u0259 ax\u015fam\u0131_C\xfcm\u0259_\u015e\u0259nb\u0259".split("_"),weekdaysShort:"Baz_BzE_\xc7Ax_\xc7\u0259r_CAx_C\xfcm_\u015e\u0259n".split("_"),weekdaysMin:"Bz_BE_\xc7A_\xc7\u0259_CA_C\xfc_\u015e\u0259".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[g\u0259l\u0259n h\u0259ft\u0259] dddd [saat] LT",lastDay:"[d\xfcn\u0259n] LT",lastWeek:"[ke\xe7\u0259n h\u0259ft\u0259] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \u0259vv\u0259l",s:"bir ne\xe7\u0259 saniy\u0259",ss:"%d saniy\u0259",m:"bir d\u0259qiq\u0259",mm:"%d d\u0259qiq\u0259",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec\u0259|s\u0259h\u0259r|g\xfcnd\xfcz|ax\u015fam/,isPM:function(B){return/^(g\xfcnd\xfcz|ax\u015fam)$/.test(B)},meridiem:function(B,U,W){return B<4?"gec\u0259":B<12?"s\u0259h\u0259r":B<17?"g\xfcnd\xfcz":"ax\u015fam"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0131nc\u0131|inci|nci|\xfcnc\xfc|nc\u0131|uncu)/,ordinal:function(B){if(0===B)return B+"-\u0131nc\u0131";var U=B%10;return B+(x[U]||x[B%100-U]||x[B>=100?100:null])},week:{dow:1,doy:7}})}(T(15439))},69191:function(qe,xe,T){!function(D){"use strict";function w(U,W,Y){return"m"===Y?W?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443":"h"===Y?W?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443":U+" "+function x(U,W){var Y=U.split("_");return W%10==1&&W%100!=11?Y[0]:W%10>=2&&W%10<=4&&(W%100<10||W%100>=20)?Y[1]:Y[2]}({ss:W?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:W?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d",hh:W?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d",dd:"\u0434\u0437\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u0437\u0451\u043d",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u044b_\u043c\u0435\u0441\u044f\u0446\u0430\u045e",yy:"\u0433\u043e\u0434_\u0433\u0430\u0434\u044b_\u0433\u0430\u0434\u043e\u045e"}[Y],+U)}D.defineLocale("be",{months:{format:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044f_\u043b\u044e\u0442\u0430\u0433\u0430_\u0441\u0430\u043a\u0430\u0432\u0456\u043a\u0430_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a\u0430_\u0442\u0440\u0430\u045e\u043d\u044f_\u0447\u044d\u0440\u0432\u0435\u043d\u044f_\u043b\u0456\u043f\u0435\u043d\u044f_\u0436\u043d\u0456\u045e\u043d\u044f_\u0432\u0435\u0440\u0430\u0441\u043d\u044f_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a\u0430_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434\u0430_\u0441\u043d\u0435\u0436\u043d\u044f".split("_"),standalone:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044c_\u043b\u044e\u0442\u044b_\u0441\u0430\u043a\u0430\u0432\u0456\u043a_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u044d\u0440\u0432\u0435\u043d\u044c_\u043b\u0456\u043f\u0435\u043d\u044c_\u0436\u043d\u0456\u0432\u0435\u043d\u044c_\u0432\u0435\u0440\u0430\u0441\u0435\u043d\u044c_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434_\u0441\u043d\u0435\u0436\u0430\u043d\u044c".split("_")},monthsShort:"\u0441\u0442\u0443\u0434_\u043b\u044e\u0442_\u0441\u0430\u043a_\u043a\u0440\u0430\u0441_\u0442\u0440\u0430\u0432_\u0447\u044d\u0440\u0432_\u043b\u0456\u043f_\u0436\u043d\u0456\u0432_\u0432\u0435\u0440_\u043a\u0430\u0441\u0442_\u043b\u0456\u0441\u0442_\u0441\u043d\u0435\u0436".split("_"),weekdays:{format:"\u043d\u044f\u0434\u0437\u0435\u043b\u044e_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0443_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0443_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),standalone:"\u043d\u044f\u0434\u0437\u0435\u043b\u044f_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0430_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0430_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),isFormat:/\[ ?[\u0423\u0443\u045e] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., HH:mm",LLLL:"dddd, D MMMM YYYY \u0433., HH:mm"},calendar:{sameDay:"[\u0421\u0451\u043d\u043d\u044f \u045e] LT",nextDay:"[\u0417\u0430\u045e\u0442\u0440\u0430 \u045e] LT",lastDay:"[\u0423\u0447\u043e\u0440\u0430 \u045e] LT",nextWeek:function(){return"[\u0423] dddd [\u045e] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u0443\u044e] dddd [\u045e] LT";case 1:case 2:case 4:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u044b] dddd [\u045e] LT"}},sameElse:"L"},relativeTime:{future:"\u043f\u0440\u0430\u0437 %s",past:"%s \u0442\u0430\u043c\u0443",s:"\u043d\u0435\u043a\u0430\u043b\u044c\u043a\u0456 \u0441\u0435\u043a\u0443\u043d\u0434",m:w,mm:w,h:w,hh:w,d:"\u0434\u0437\u0435\u043d\u044c",dd:w,M:"\u043c\u0435\u0441\u044f\u0446",MM:w,y:"\u0433\u043e\u0434",yy:w},meridiemParse:/\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,isPM:function(U){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(U)},meridiem:function(U,W,Y){return U<4?"\u043d\u043e\u0447\u044b":U<12?"\u0440\u0430\u043d\u0456\u0446\u044b":U<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0430\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,ordinal:function(U,W){switch(W){case"M":case"d":case"DDD":case"w":case"W":return U%10!=2&&U%10!=3||U%100==12||U%100==13?U+"-\u044b":U+"-\u0456";case"D":return U+"-\u0433\u0430";default:return U}},week:{dow:1,doy:7}})}(T(15439))},90322:function(qe,xe,T){!function(D){"use strict";D.defineLocale("bg",{months:"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u044f\u043d\u0443_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u043d\u0435\u0441 \u0432] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432] LT",nextWeek:"dddd [\u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u041c\u0438\u043d\u0430\u043b\u0430\u0442\u0430] dddd [\u0432] LT";case 1:case 2:case 4:case 5:return"[\u041c\u0438\u043d\u0430\u043b\u0438\u044f] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0441\u043b\u0435\u0434 %s",past:"\u043f\u0440\u0435\u0434\u0438 %s",s:"\u043d\u044f\u043a\u043e\u043b\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0434\u0435\u043d",dd:"%d \u0434\u0435\u043d\u0430",w:"\u0441\u0435\u0434\u043c\u0438\u0446\u0430",ww:"%d \u0441\u0435\u0434\u043c\u0438\u0446\u0438",M:"\u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0430",y:"\u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(w){var B=w%10,U=w%100;return 0===w?w+"-\u0435\u0432":0===U?w+"-\u0435\u043d":U>10&&U<20?w+"-\u0442\u0438":1===B?w+"-\u0432\u0438":2===B?w+"-\u0440\u0438":7===B||8===B?w+"-\u043c\u0438":w+"-\u0442\u0438"},week:{dow:1,doy:7}})}(T(15439))},28042:function(qe,xe,T){!function(D){"use strict";D.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_M\u025bkalo_Zuw\u025bnkalo_Zuluyekalo_Utikalo_S\u025btanburukalo_\u0254kut\u0254burukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M\u025b_Zuw_Zul_Uti_S\u025bt_\u0254ku_Now_Des".split("_"),weekdays:"Kari_Nt\u025bn\u025bn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt\u025b_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm"},calendar:{sameDay:"[Bi l\u025br\u025b] LT",nextDay:"[Sini l\u025br\u025b] LT",nextWeek:"dddd [don l\u025br\u025b] LT",lastDay:"[Kunu l\u025br\u025b] LT",lastWeek:"dddd [t\u025bm\u025bnen l\u025br\u025b] LT",sameElse:"L"},relativeTime:{future:"%s k\u0254n\u0254",past:"a b\u025b %s b\u0254",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"l\u025br\u025b kelen",hh:"l\u025br\u025b %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(T(15439))},65903:function(qe,xe,T){!function(D){"use strict";var x={1:"\u09e7",2:"\u09e8",3:"\u09e9",4:"\u09ea",5:"\u09eb",6:"\u09ec",7:"\u09ed",8:"\u09ee",9:"\u09ef",0:"\u09e6"},w={"\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ef":"9","\u09e6":"0"};D.defineLocale("bn-bd",{months:"\u099c\u09be\u09a8\u09c1\u09df\u09be\u09b0\u09bf_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1\u09df\u09be\u09b0\u09bf_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f\u09c7\u09ae\u09cd\u09ac\u09b0_\u0985\u0995\u09cd\u099f\u09cb\u09ac\u09b0_\u09a8\u09ad\u09c7\u09ae\u09cd\u09ac\u09b0_\u09a1\u09bf\u09b8\u09c7\u09ae\u09cd\u09ac\u09b0".split("_"),monthsShort:"\u099c\u09be\u09a8\u09c1_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f_\u0985\u0995\u09cd\u099f\u09cb_\u09a8\u09ad\u09c7_\u09a1\u09bf\u09b8\u09c7".split("_"),weekdays:"\u09b0\u09ac\u09bf\u09ac\u09be\u09b0_\u09b8\u09cb\u09ae\u09ac\u09be\u09b0_\u09ae\u0999\u09cd\u0997\u09b2\u09ac\u09be\u09b0_\u09ac\u09c1\u09a7\u09ac\u09be\u09b0_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf\u09ac\u09be\u09b0_\u09b6\u09c1\u0995\u09cd\u09b0\u09ac\u09be\u09b0_\u09b6\u09a8\u09bf\u09ac\u09be\u09b0".split("_"),weekdaysShort:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),weekdaysMin:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),longDateFormat:{LT:"A h:mm \u09b8\u09ae\u09df",LTS:"A h:mm:ss \u09b8\u09ae\u09df",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u09b8\u09ae\u09df",LLLL:"dddd, D MMMM YYYY, A h:mm \u09b8\u09ae\u09df"},calendar:{sameDay:"[\u0986\u099c] LT",nextDay:"[\u0986\u0997\u09be\u09ae\u09c0\u0995\u09be\u09b2] LT",nextWeek:"dddd, LT",lastDay:"[\u0997\u09a4\u0995\u09be\u09b2] LT",lastWeek:"[\u0997\u09a4] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u09aa\u09b0\u09c7",past:"%s \u0986\u0997\u09c7",s:"\u0995\u09df\u09c7\u0995 \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",ss:"%d \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",m:"\u098f\u0995 \u09ae\u09bf\u09a8\u09bf\u099f",mm:"%d \u09ae\u09bf\u09a8\u09bf\u099f",h:"\u098f\u0995 \u0998\u09a8\u09cd\u099f\u09be",hh:"%d \u0998\u09a8\u09cd\u099f\u09be",d:"\u098f\u0995 \u09a6\u09bf\u09a8",dd:"%d \u09a6\u09bf\u09a8",M:"\u098f\u0995 \u09ae\u09be\u09b8",MM:"%d \u09ae\u09be\u09b8",y:"\u098f\u0995 \u09ac\u099b\u09b0",yy:"%d \u09ac\u099b\u09b0"},preparse:function(U){return U.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u09b0\u09be\u09a4|\u09ad\u09cb\u09b0|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b8\u09a8\u09cd\u09a7\u09cd\u09af\u09be|\u09b0\u09be\u09a4/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u09b0\u09be\u09a4"===W?U<4?U:U+12:"\u09ad\u09cb\u09b0"===W||"\u09b8\u0995\u09be\u09b2"===W?U:"\u09a6\u09c1\u09aa\u09c1\u09b0"===W?U>=3?U:U+12:"\u09ac\u09bf\u0995\u09be\u09b2"===W||"\u09b8\u09a8\u09cd\u09a7\u09cd\u09af\u09be"===W?U+12:void 0},meridiem:function(U,W,Y){return U<4?"\u09b0\u09be\u09a4":U<6?"\u09ad\u09cb\u09b0":U<12?"\u09b8\u0995\u09be\u09b2":U<15?"\u09a6\u09c1\u09aa\u09c1\u09b0":U<18?"\u09ac\u09bf\u0995\u09be\u09b2":U<20?"\u09b8\u09a8\u09cd\u09a7\u09cd\u09af\u09be":"\u09b0\u09be\u09a4"},week:{dow:0,doy:6}})}(T(15439))},59620:function(qe,xe,T){!function(D){"use strict";var x={1:"\u09e7",2:"\u09e8",3:"\u09e9",4:"\u09ea",5:"\u09eb",6:"\u09ec",7:"\u09ed",8:"\u09ee",9:"\u09ef",0:"\u09e6"},w={"\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ef":"9","\u09e6":"0"};D.defineLocale("bn",{months:"\u099c\u09be\u09a8\u09c1\u09df\u09be\u09b0\u09bf_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1\u09df\u09be\u09b0\u09bf_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f\u09c7\u09ae\u09cd\u09ac\u09b0_\u0985\u0995\u09cd\u099f\u09cb\u09ac\u09b0_\u09a8\u09ad\u09c7\u09ae\u09cd\u09ac\u09b0_\u09a1\u09bf\u09b8\u09c7\u09ae\u09cd\u09ac\u09b0".split("_"),monthsShort:"\u099c\u09be\u09a8\u09c1_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f_\u0985\u0995\u09cd\u099f\u09cb_\u09a8\u09ad\u09c7_\u09a1\u09bf\u09b8\u09c7".split("_"),weekdays:"\u09b0\u09ac\u09bf\u09ac\u09be\u09b0_\u09b8\u09cb\u09ae\u09ac\u09be\u09b0_\u09ae\u0999\u09cd\u0997\u09b2\u09ac\u09be\u09b0_\u09ac\u09c1\u09a7\u09ac\u09be\u09b0_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf\u09ac\u09be\u09b0_\u09b6\u09c1\u0995\u09cd\u09b0\u09ac\u09be\u09b0_\u09b6\u09a8\u09bf\u09ac\u09be\u09b0".split("_"),weekdaysShort:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),weekdaysMin:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),longDateFormat:{LT:"A h:mm \u09b8\u09ae\u09df",LTS:"A h:mm:ss \u09b8\u09ae\u09df",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u09b8\u09ae\u09df",LLLL:"dddd, D MMMM YYYY, A h:mm \u09b8\u09ae\u09df"},calendar:{sameDay:"[\u0986\u099c] LT",nextDay:"[\u0986\u0997\u09be\u09ae\u09c0\u0995\u09be\u09b2] LT",nextWeek:"dddd, LT",lastDay:"[\u0997\u09a4\u0995\u09be\u09b2] LT",lastWeek:"[\u0997\u09a4] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u09aa\u09b0\u09c7",past:"%s \u0986\u0997\u09c7",s:"\u0995\u09df\u09c7\u0995 \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",ss:"%d \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",m:"\u098f\u0995 \u09ae\u09bf\u09a8\u09bf\u099f",mm:"%d \u09ae\u09bf\u09a8\u09bf\u099f",h:"\u098f\u0995 \u0998\u09a8\u09cd\u099f\u09be",hh:"%d \u0998\u09a8\u09cd\u099f\u09be",d:"\u098f\u0995 \u09a6\u09bf\u09a8",dd:"%d \u09a6\u09bf\u09a8",M:"\u098f\u0995 \u09ae\u09be\u09b8",MM:"%d \u09ae\u09be\u09b8",y:"\u098f\u0995 \u09ac\u099b\u09b0",yy:"%d \u09ac\u099b\u09b0"},preparse:function(U){return U.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u09b0\u09be\u09a4"===W&&U>=4||"\u09a6\u09c1\u09aa\u09c1\u09b0"===W&&U<5||"\u09ac\u09bf\u0995\u09be\u09b2"===W?U+12:U},meridiem:function(U,W,Y){return U<4?"\u09b0\u09be\u09a4":U<10?"\u09b8\u0995\u09be\u09b2":U<17?"\u09a6\u09c1\u09aa\u09c1\u09b0":U<20?"\u09ac\u09bf\u0995\u09be\u09b2":"\u09b0\u09be\u09a4"},week:{dow:0,doy:6}})}(T(15439))},69645:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0f21",2:"\u0f22",3:"\u0f23",4:"\u0f24",5:"\u0f25",6:"\u0f26",7:"\u0f27",8:"\u0f28",9:"\u0f29",0:"\u0f20"},w={"\u0f21":"1","\u0f22":"2","\u0f23":"3","\u0f24":"4","\u0f25":"5","\u0f26":"6","\u0f27":"7","\u0f28":"8","\u0f29":"9","\u0f20":"0"};D.defineLocale("bo",{months:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f44\u0f0b\u0f54\u0f7c_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f66\u0f74\u0f58\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f5e\u0f72\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f63\u0f94\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0fb2\u0f74\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f62\u0f92\u0fb1\u0f51\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f42\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f45\u0f72\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54".split("_"),monthsShort:"\u0f5f\u0fb3\u0f0b1_\u0f5f\u0fb3\u0f0b2_\u0f5f\u0fb3\u0f0b3_\u0f5f\u0fb3\u0f0b4_\u0f5f\u0fb3\u0f0b5_\u0f5f\u0fb3\u0f0b6_\u0f5f\u0fb3\u0f0b7_\u0f5f\u0fb3\u0f0b8_\u0f5f\u0fb3\u0f0b9_\u0f5f\u0fb3\u0f0b10_\u0f5f\u0fb3\u0f0b11_\u0f5f\u0fb3\u0f0b12".split("_"),monthsShortRegex:/^(\u0f5f\u0fb3\u0f0b\d{1,2})/,monthsParseExact:!0,weekdays:"\u0f42\u0f5f\u0f60\u0f0b\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f42\u0f5f\u0f60\u0f0b\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysShort:"\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysMin:"\u0f49\u0f72_\u0f5f\u0fb3_\u0f58\u0f72\u0f42_\u0f63\u0fb7\u0f42_\u0f55\u0f74\u0f62_\u0f66\u0f44\u0f66_\u0f66\u0fa4\u0f7a\u0f53".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0f51\u0f72\u0f0b\u0f62\u0f72\u0f44] LT",nextDay:"[\u0f66\u0f44\u0f0b\u0f49\u0f72\u0f53] LT",nextWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f62\u0f97\u0f7a\u0f66\u0f0b\u0f58], LT",lastDay:"[\u0f41\u0f0b\u0f66\u0f44] LT",lastWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f58\u0f50\u0f60\u0f0b\u0f58] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0f63\u0f0b",past:"%s \u0f66\u0f94\u0f53\u0f0b\u0f63",s:"\u0f63\u0f58\u0f0b\u0f66\u0f44",ss:"%d \u0f66\u0f90\u0f62\u0f0b\u0f46\u0f0d",m:"\u0f66\u0f90\u0f62\u0f0b\u0f58\u0f0b\u0f42\u0f45\u0f72\u0f42",mm:"%d \u0f66\u0f90\u0f62\u0f0b\u0f58",h:"\u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51\u0f0b\u0f42\u0f45\u0f72\u0f42",hh:"%d \u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51",d:"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f45\u0f72\u0f42",dd:"%d \u0f49\u0f72\u0f53\u0f0b",M:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f45\u0f72\u0f42",MM:"%d \u0f5f\u0fb3\u0f0b\u0f56",y:"\u0f63\u0f7c\u0f0b\u0f42\u0f45\u0f72\u0f42",yy:"%d \u0f63\u0f7c"},preparse:function(U){return U.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"===W&&U>=4||"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44"===W&&U<5||"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42"===W?U+12:U},meridiem:function(U,W,Y){return U<4?"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c":U<10?"\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66":U<17?"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44":U<20?"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42":"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"},week:{dow:0,doy:6}})}(T(15439))},45020:function(qe,xe,T){!function(D){"use strict";function x(ie,X,Z){return ie+" "+function U(ie,X){return 2===X?function W(ie){var X={m:"v",b:"v",d:"z"};return void 0===X[ie.charAt(0)]?ie:X[ie.charAt(0)]+ie.substring(1)}(ie):ie}({mm:"munutenn",MM:"miz",dd:"devezh"}[Z],ie)}function B(ie){return ie>9?B(ie%10):ie}var Y=[/^gen/i,/^c[\u02bc\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],H=/^(genver|c[\u02bc\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\u02bc\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,ae=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];D.defineLocale("br",{months:"Genver_C\u02bchwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C\u02bchwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc\u02bcher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:ae,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\u02bc\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:ae,monthsRegex:H,monthsShortRegex:H,monthsStrictRegex:/^(genver|c[\u02bc\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[\u02bc\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:Y,longMonthsParse:Y,shortMonthsParse:Y,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc\u02bchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec\u02bch da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s \u02bczo",s:"un nebeud segondenno\xf9",ss:"%d eilenn",m:"ur vunutenn",mm:x,h:"un eur",hh:"%d eur",d:"un devezh",dd:x,M:"ur miz",MM:x,y:"ur bloaz",yy:function w(ie){switch(B(ie)){case 1:case 3:case 4:case 5:case 9:return ie+" bloaz";default:return ie+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a\xf1|vet)/,ordinal:function(ie){return ie+(1===ie?"a\xf1":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(ie){return"g.m."===ie},meridiem:function(ie,X,Z){return ie<12?"a.m.":"g.m."}})}(T(15439))},64792:function(qe,xe,T){!function(D){"use strict";function x(B,U,W){var Y=B+" ";switch(W){case"ss":return Y+(1===B?"sekunda":2===B||3===B||4===B?"sekunde":"sekundi");case"m":return U?"jedna minuta":"jedne minute";case"mm":return Y+(1===B?"minuta":2===B||3===B||4===B?"minute":"minuta");case"h":return U?"jedan sat":"jednog sata";case"hh":return Y+(1===B?"sat":2===B||3===B||4===B?"sata":"sati");case"dd":return Y+(1===B?"dan":"dana");case"MM":return Y+(1===B?"mjesec":2===B||3===B||4===B?"mjeseca":"mjeseci");case"yy":return Y+(1===B?"godina":2===B||3===B||4===B?"godine":"godina")}}D.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[pro\u0161lu] dddd [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:x,m:x,mm:x,h:x,hh:x,d:"dan",dd:x,M:"mjesec",MM:x,y:"godinu",yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},47980:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ca",{months:{standalone:"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar\xe7_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar\xe7_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem\xe0 a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu\xed %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(w,B){var U=1===w?"r":2===w?"n":3===w?"r":4===w?"t":"\xe8";return("w"===B||"W"===B)&&(U="a"),w+U},week:{dow:1,doy:4}})}(T(15439))},47322:function(qe,xe,T){!function(D){"use strict";var x={format:"leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),standalone:"ledna_\xfanora_b\u0159ezna_dubna_kv\u011btna_\u010dervna_\u010dervence_srpna_z\xe1\u0159\xed_\u0159\xedjna_listopadu_prosince".split("_")},w="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_"),B=[/^led/i,/^\xfano/i,/^b\u0159e/i,/^dub/i,/^kv\u011b/i,/^(\u010dvn|\u010derven$|\u010dervna)/i,/^(\u010dvc|\u010dervenec|\u010dervence)/i,/^srp/i,/^z\xe1\u0159/i,/^\u0159\xedj/i,/^lis/i,/^pro/i],U=/^(leden|\xfanor|b\u0159ezen|duben|kv\u011bten|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|z\xe1\u0159\xed|\u0159\xedjen|listopad|prosinec|led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i;function W(G){return G>1&&G<5&&1!=~~(G/10)}function Y(G,$,re,ue){var ae=G+" ";switch(re){case"s":return $||ue?"p\xe1r sekund":"p\xe1r sekundami";case"ss":return $||ue?ae+(W(G)?"sekundy":"sekund"):ae+"sekundami";case"m":return $?"minuta":ue?"minutu":"minutou";case"mm":return $||ue?ae+(W(G)?"minuty":"minut"):ae+"minutami";case"h":return $?"hodina":ue?"hodinu":"hodinou";case"hh":return $||ue?ae+(W(G)?"hodiny":"hodin"):ae+"hodinami";case"d":return $||ue?"den":"dnem";case"dd":return $||ue?ae+(W(G)?"dny":"dn\xed"):ae+"dny";case"M":return $||ue?"m\u011bs\xedc":"m\u011bs\xedcem";case"MM":return $||ue?ae+(W(G)?"m\u011bs\xedce":"m\u011bs\xedc\u016f"):ae+"m\u011bs\xedci";case"y":return $||ue?"rok":"rokem";case"yy":return $||ue?ae+(W(G)?"roky":"let"):ae+"lety"}}D.defineLocale("cs",{months:x,monthsShort:w,monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(leden|ledna|\xfanora|\xfanor|b\u0159ezen|b\u0159ezna|duben|dubna|kv\u011bten|kv\u011btna|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|srpna|z\xe1\u0159\xed|\u0159\xedjen|\u0159\xedjna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),weekdaysShort:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),weekdaysMin:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[z\xedtra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v ned\u011bli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve st\u0159edu v] LT";case 4:return"[ve \u010dtvrtek v] LT";case 5:return"[v p\xe1tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[v\u010dera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou ned\u011bli v] LT";case 1:case 2:return"[minul\xe9] dddd [v] LT";case 3:return"[minulou st\u0159edu v] LT";case 4:case 5:return"[minul\xfd] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"p\u0159ed %s",s:Y,ss:Y,m:Y,mm:Y,h:Y,hh:Y,d:Y,dd:Y,M:Y,MM:Y,y:Y,yy:Y},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},90365:function(qe,xe,T){!function(D){"use strict";D.defineLocale("cv",{months:"\u043a\u04d1\u0440\u043b\u0430\u0447_\u043d\u0430\u0440\u04d1\u0441_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440\u0442\u043c\u0435_\u0443\u0442\u04d1_\u04ab\u0443\u0440\u043b\u0430_\u0430\u0432\u04d1\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448\u0442\u0430\u0432".split("_"),monthsShort:"\u043a\u04d1\u0440_\u043d\u0430\u0440_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440_\u0443\u0442\u04d1_\u04ab\u0443\u0440_\u0430\u0432\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448".split("_"),weekdays:"\u0432\u044b\u0440\u0441\u0430\u0440\u043d\u0438\u043a\u0443\u043d_\u0442\u0443\u043d\u0442\u0438\u043a\u0443\u043d_\u044b\u0442\u043b\u0430\u0440\u0438\u043a\u0443\u043d_\u044e\u043d\u043a\u0443\u043d_\u043a\u04d7\u04ab\u043d\u0435\u0440\u043d\u0438\u043a\u0443\u043d_\u044d\u0440\u043d\u0435\u043a\u0443\u043d_\u0448\u04d1\u043c\u0430\u0442\u043a\u0443\u043d".split("_"),weekdaysShort:"\u0432\u044b\u0440_\u0442\u0443\u043d_\u044b\u0442\u043b_\u044e\u043d_\u043a\u04d7\u04ab_\u044d\u0440\u043d_\u0448\u04d1\u043c".split("_"),weekdaysMin:"\u0432\u0440_\u0442\u043d_\u044b\u0442_\u044e\u043d_\u043a\u04ab_\u044d\u0440_\u0448\u043c".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7]",LLL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm",LLLL:"dddd, YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm"},calendar:{sameDay:"[\u041f\u0430\u044f\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextDay:"[\u042b\u0440\u0430\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastDay:"[\u04d6\u043d\u0435\u0440] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextWeek:"[\u04aa\u0438\u0442\u0435\u0441] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastWeek:"[\u0418\u0440\u0442\u043d\u04d7] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",sameElse:"L"},relativeTime:{future:function(w){return w+(/\u0441\u0435\u0445\u0435\u0442$/i.exec(w)?"\u0440\u0435\u043d":/\u04ab\u0443\u043b$/i.exec(w)?"\u0442\u0430\u043d":"\u0440\u0430\u043d")},past:"%s \u043a\u0430\u044f\u043b\u043b\u0430",s:"\u043f\u04d7\u0440-\u0438\u043a \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",ss:"%d \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",m:"\u043f\u04d7\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u043f\u04d7\u0440 \u0441\u0435\u0445\u0435\u0442",hh:"%d \u0441\u0435\u0445\u0435\u0442",d:"\u043f\u04d7\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u043f\u04d7\u0440 \u0443\u0439\u04d1\u0445",MM:"%d \u0443\u0439\u04d1\u0445",y:"\u043f\u04d7\u0440 \u04ab\u0443\u043b",yy:"%d \u04ab\u0443\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-\u043c\u04d7\u0448/,ordinal:"%d-\u043c\u04d7\u0448",week:{dow:1,doy:7}})}(T(15439))},32092:function(qe,xe,T){!function(D){"use strict";D.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn \xf4l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(w){var U="";return w>20?U=40===w||50===w||60===w||80===w||100===w?"fed":"ain":w>0&&(U=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][w]),w+U},week:{dow:1,doy:4}})}(T(15439))},77387:function(qe,xe,T){!function(D){"use strict";D.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8n_man_tir_ons_tor_fre_l\xf8r".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p\xe5 dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f\xe5 sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"et \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},29459:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[B+" Tage",B+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[B+" Monate",B+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[B+" Jahre",B+" Jahren"]};return U?H[W][0]:H[W][1]}D.defineLocale("de-at",{months:"J\xe4nner_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"J\xe4n._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:x,mm:"%d Minuten",h:x,hh:"%d Stunden",d:x,dd:x,w:x,ww:"%d Wochen",M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},73694:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[B+" Tage",B+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[B+" Monate",B+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[B+" Jahre",B+" Jahren"]};return U?H[W][0]:H[W][1]}D.defineLocale("de-ch",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:x,mm:"%d Minuten",h:x,hh:"%d Stunden",d:x,dd:x,w:x,ww:"%d Wochen",M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},54307:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[B+" Tage",B+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[B+" Monate",B+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[B+" Jahre",B+" Jahren"]};return U?H[W][0]:H[W][1]}D.defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:x,mm:"%d Minuten",h:x,hh:"%d Stunden",d:x,dd:x,w:x,ww:"%d Wochen",M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},39659:function(qe,xe,T){!function(D){"use strict";var x=["\u0796\u07ac\u0782\u07aa\u0787\u07a6\u0783\u07a9","\u078a\u07ac\u0784\u07b0\u0783\u07aa\u0787\u07a6\u0783\u07a9","\u0789\u07a7\u0783\u07a8\u0797\u07aa","\u0787\u07ad\u0795\u07b0\u0783\u07a9\u078d\u07aa","\u0789\u07ad","\u0796\u07ab\u0782\u07b0","\u0796\u07aa\u078d\u07a6\u0787\u07a8","\u0787\u07af\u078e\u07a6\u0790\u07b0\u0793\u07aa","\u0790\u07ac\u0795\u07b0\u0793\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0787\u07ae\u0786\u07b0\u0793\u07af\u0784\u07a6\u0783\u07aa","\u0782\u07ae\u0788\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0791\u07a8\u0790\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa"],w=["\u0787\u07a7\u078b\u07a8\u0787\u07b0\u078c\u07a6","\u0780\u07af\u0789\u07a6","\u0787\u07a6\u0782\u07b0\u078e\u07a7\u0783\u07a6","\u0784\u07aa\u078b\u07a6","\u0784\u07aa\u0783\u07a7\u0790\u07b0\u078a\u07a6\u078c\u07a8","\u0780\u07aa\u0786\u07aa\u0783\u07aa","\u0780\u07ae\u0782\u07a8\u0780\u07a8\u0783\u07aa"];D.defineLocale("dv",{months:x,monthsShort:x,weekdays:w,weekdaysShort:w,weekdaysMin:"\u0787\u07a7\u078b\u07a8_\u0780\u07af\u0789\u07a6_\u0787\u07a6\u0782\u07b0_\u0784\u07aa\u078b\u07a6_\u0784\u07aa\u0783\u07a7_\u0780\u07aa\u0786\u07aa_\u0780\u07ae\u0782\u07a8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0789\u0786|\u0789\u078a/,isPM:function(U){return"\u0789\u078a"===U},meridiem:function(U,W,Y){return U<12?"\u0789\u0786":"\u0789\u078a"},calendar:{sameDay:"[\u0789\u07a8\u0787\u07a6\u078b\u07aa] LT",nextDay:"[\u0789\u07a7\u078b\u07a6\u0789\u07a7] LT",nextWeek:"dddd LT",lastDay:"[\u0787\u07a8\u0787\u07b0\u0794\u07ac] LT",lastWeek:"[\u078a\u07a7\u0787\u07a8\u078c\u07aa\u0788\u07a8] dddd LT",sameElse:"L"},relativeTime:{future:"\u078c\u07ac\u0783\u07ad\u078e\u07a6\u0787\u07a8 %s",past:"\u0786\u07aa\u0783\u07a8\u0782\u07b0 %s",s:"\u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa\u0786\u07ae\u0785\u07ac\u0787\u07b0",ss:"d% \u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa",m:"\u0789\u07a8\u0782\u07a8\u0793\u07ac\u0787\u07b0",mm:"\u0789\u07a8\u0782\u07a8\u0793\u07aa %d",h:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07ac\u0787\u07b0",hh:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07aa %d",d:"\u078b\u07aa\u0788\u07a6\u0780\u07ac\u0787\u07b0",dd:"\u078b\u07aa\u0788\u07a6\u0790\u07b0 %d",M:"\u0789\u07a6\u0780\u07ac\u0787\u07b0",MM:"\u0789\u07a6\u0790\u07b0 %d",y:"\u0787\u07a6\u0780\u07a6\u0783\u07ac\u0787\u07b0",yy:"\u0787\u07a6\u0780\u07a6\u0783\u07aa %d"},preparse:function(U){return U.replace(/\u060c/g,",")},postformat:function(U){return U.replace(/,/g,"\u060c")},week:{dow:7,doy:12}})}(T(15439))},3460:function(qe,xe,T){!function(D){"use strict";D.defineLocale("el",{monthsNominativeEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2_\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2_\u039c\u03ac\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2_\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2_\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2_\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2".split("_"),monthsGenitiveEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u039c\u03b1\u03c1\u03c4\u03af\u03bf\u03c5_\u0391\u03c0\u03c1\u03b9\u03bb\u03af\u03bf\u03c5_\u039c\u03b1\u0390\u03bf\u03c5_\u0399\u03bf\u03c5\u03bd\u03af\u03bf\u03c5_\u0399\u03bf\u03c5\u03bb\u03af\u03bf\u03c5_\u0391\u03c5\u03b3\u03bf\u03cd\u03c3\u03c4\u03bf\u03c5_\u03a3\u03b5\u03c0\u03c4\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u039f\u03ba\u03c4\u03c9\u03b2\u03c1\u03af\u03bf\u03c5_\u039d\u03bf\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u0394\u03b5\u03ba\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5".split("_"),months:function(B,U){return B?"string"==typeof U&&/D/.test(U.substring(0,U.indexOf("MMMM")))?this._monthsGenitiveEl[B.month()]:this._monthsNominativeEl[B.month()]:this._monthsNominativeEl},monthsShort:"\u0399\u03b1\u03bd_\u03a6\u03b5\u03b2_\u039c\u03b1\u03c1_\u0391\u03c0\u03c1_\u039c\u03b1\u03ca_\u0399\u03bf\u03c5\u03bd_\u0399\u03bf\u03c5\u03bb_\u0391\u03c5\u03b3_\u03a3\u03b5\u03c0_\u039f\u03ba\u03c4_\u039d\u03bf\u03b5_\u0394\u03b5\u03ba".split("_"),weekdays:"\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae_\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1_\u03a4\u03c1\u03af\u03c4\u03b7_\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7_\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7_\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae_\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf".split("_"),weekdaysShort:"\u039a\u03c5\u03c1_\u0394\u03b5\u03c5_\u03a4\u03c1\u03b9_\u03a4\u03b5\u03c4_\u03a0\u03b5\u03bc_\u03a0\u03b1\u03c1_\u03a3\u03b1\u03b2".split("_"),weekdaysMin:"\u039a\u03c5_\u0394\u03b5_\u03a4\u03c1_\u03a4\u03b5_\u03a0\u03b5_\u03a0\u03b1_\u03a3\u03b1".split("_"),meridiem:function(B,U,W){return B>11?W?"\u03bc\u03bc":"\u039c\u039c":W?"\u03c0\u03bc":"\u03a0\u039c"},isPM:function(B){return"\u03bc"===(B+"").toLowerCase()[0]},meridiemParse:/[\u03a0\u039c]\.?\u039c?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1 {}] LT",nextDay:"[\u0391\u03cd\u03c1\u03b9\u03bf {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[\u03a7\u03b8\u03b5\u03c2 {}] LT",lastWeek:function(){return 6===this.day()?"[\u03c4\u03bf \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03bf] dddd [{}] LT":"[\u03c4\u03b7\u03bd \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7] dddd [{}] LT"},sameElse:"L"},calendar:function(B,U){var W=this._calendarEl[B],Y=U&&U.hours();return function x(B){return typeof Function<"u"&&B instanceof Function||"[object Function]"===Object.prototype.toString.call(B)}(W)&&(W=W.apply(U)),W.replace("{}",Y%12==1?"\u03c3\u03c4\u03b7":"\u03c3\u03c4\u03b9\u03c2")},relativeTime:{future:"\u03c3\u03b5 %s",past:"%s \u03c0\u03c1\u03b9\u03bd",s:"\u03bb\u03af\u03b3\u03b1 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",ss:"%d \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",m:"\u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",mm:"%d \u03bb\u03b5\u03c0\u03c4\u03ac",h:"\u03bc\u03af\u03b1 \u03ce\u03c1\u03b1",hh:"%d \u03ce\u03c1\u03b5\u03c2",d:"\u03bc\u03af\u03b1 \u03bc\u03ad\u03c1\u03b1",dd:"%d \u03bc\u03ad\u03c1\u03b5\u03c2",M:"\u03ad\u03bd\u03b1\u03c2 \u03bc\u03ae\u03bd\u03b1\u03c2",MM:"%d \u03bc\u03ae\u03bd\u03b5\u03c2",y:"\u03ad\u03bd\u03b1\u03c2 \u03c7\u03c1\u03cc\u03bd\u03bf\u03c2",yy:"%d \u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"},dayOfMonthOrdinalParse:/\d{1,2}\u03b7/,ordinal:"%d\u03b7",week:{dow:1,doy:4}})}(T(15439))},94369:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:0,doy:4}})}(T(15439))},60530:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")}})}(T(15439))},9998:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},13391:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},75414:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")}})}(T(15439))},19615:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:0,doy:6}})}(T(15439))},21248:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},13767:function(qe,xe,T){!function(D){"use strict";D.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},84530:function(qe,xe,T){!function(D){"use strict";D.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_a\u016dgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_a\u016dg_sept_okt_nov_dec".split("_"),weekdays:"diman\u0109o_lundo_mardo_merkredo_\u0135a\u016ddo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_\u0135a\u016d_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_\u0135a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(w){return"p"===w.charAt(0).toLowerCase()},meridiem:function(w,B,U){return w>11?U?"p.t.m.":"P.T.M.":U?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia\u016d je] LT",nextDay:"[Morga\u016d je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera\u016d je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta\u016d %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(T(15439))},18944:function(qe,xe,T){!function(D){"use strict";var x="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),w="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),B=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],U=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;D.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},29116:function(qe,xe,T){!function(D){"use strict";var x="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),w="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),B=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],U=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;D.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:4},invalidDate:"Fecha inv\xe1lida"})}(T(15439))},83609:function(qe,xe,T){!function(D){"use strict";var x="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),w="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),B=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],U=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;D.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:6}})}(T(15439))},86866:function(qe,xe,T){!function(D){"use strict";var x="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),w="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),B=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],U=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;D.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4},invalidDate:"Fecha inv\xe1lida"})}(T(15439))},96725:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={s:["m\xf5ne sekundi","m\xf5ni sekund","paar sekundit"],ss:[B+"sekundi",B+"sekundit"],m:["\xfche minuti","\xfcks minut"],mm:[B+" minuti",B+" minutit"],h:["\xfche tunni","tund aega","\xfcks tund"],hh:[B+" tunni",B+" tundi"],d:["\xfche p\xe4eva","\xfcks p\xe4ev"],M:["kuu aja","kuu aega","\xfcks kuu"],MM:[B+" kuu",B+" kuud"],y:["\xfche aasta","aasta","\xfcks aasta"],yy:[B+" aasta",B+" aastat"]};return U?H[W][2]?H[W][2]:H[W][1]:Y?H[W][0]:H[W][1]}D.defineLocale("et",{months:"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[T\xe4na,] LT",nextDay:"[Homme,] LT",nextWeek:"[J\xe4rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s p\xe4rast",past:"%s tagasi",s:x,ss:x,m:x,mm:x,h:x,hh:x,d:x,dd:"%d p\xe4eva",M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},67931:function(qe,xe,T){!function(D){"use strict";D.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},56417:function(qe,xe,T){!function(D){"use strict";var x={1:"\u06f1",2:"\u06f2",3:"\u06f3",4:"\u06f4",5:"\u06f5",6:"\u06f6",7:"\u06f7",8:"\u06f8",9:"\u06f9",0:"\u06f0"},w={"\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u06f0":"0"};D.defineLocale("fa",{months:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),monthsShort:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),weekdays:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysShort:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysMin:"\u06cc_\u062f_\u0633_\u0686_\u067e_\u062c_\u0634".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,isPM:function(U){return/\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(U)},meridiem:function(U,W,Y){return U<12?"\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631":"\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"},calendar:{sameDay:"[\u0627\u0645\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",nextDay:"[\u0641\u0631\u062f\u0627 \u0633\u0627\u0639\u062a] LT",nextWeek:"dddd [\u0633\u0627\u0639\u062a] LT",lastDay:"[\u062f\u06cc\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",lastWeek:"dddd [\u067e\u06cc\u0634] [\u0633\u0627\u0639\u062a] LT",sameElse:"L"},relativeTime:{future:"\u062f\u0631 %s",past:"%s \u067e\u06cc\u0634",s:"\u0686\u0646\u062f \u062b\u0627\u0646\u06cc\u0647",ss:"%d \u062b\u0627\u0646\u06cc\u0647",m:"\u06cc\u06a9 \u062f\u0642\u06cc\u0642\u0647",mm:"%d \u062f\u0642\u06cc\u0642\u0647",h:"\u06cc\u06a9 \u0633\u0627\u0639\u062a",hh:"%d \u0633\u0627\u0639\u062a",d:"\u06cc\u06a9 \u0631\u0648\u0632",dd:"%d \u0631\u0648\u0632",M:"\u06cc\u06a9 \u0645\u0627\u0647",MM:"%d \u0645\u0627\u0647",y:"\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(U){return U.replace(/[\u06f0-\u06f9]/g,function(W){return w[W]}).replace(/\u060c/g,",")},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]}).replace(/,/g,"\u060c")},dayOfMonthOrdinalParse:/\d{1,2}\u0645/,ordinal:"%d\u0645",week:{dow:6,doy:12}})}(T(15439))},20944:function(qe,xe,T){!function(D){"use strict";var x="nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),w=["nolla","yhden","kahden","kolmen","nelj\xe4n","viiden","kuuden",x[7],x[8],x[9]];function B(Y,H,G,$){var re="";switch(G){case"s":return $?"muutaman sekunnin":"muutama sekunti";case"ss":re=$?"sekunnin":"sekuntia";break;case"m":return $?"minuutin":"minuutti";case"mm":re=$?"minuutin":"minuuttia";break;case"h":return $?"tunnin":"tunti";case"hh":re=$?"tunnin":"tuntia";break;case"d":return $?"p\xe4iv\xe4n":"p\xe4iv\xe4";case"dd":re=$?"p\xe4iv\xe4n":"p\xe4iv\xe4\xe4";break;case"M":return $?"kuukauden":"kuukausi";case"MM":re=$?"kuukauden":"kuukautta";break;case"y":return $?"vuoden":"vuosi";case"yy":re=$?"vuoden":"vuotta"}return function U(Y,H){return Y<10?H?w[Y]:x[Y]:Y}(Y,$)+" "+re}D.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[t\xe4n\xe4\xe4n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s p\xe4\xe4st\xe4",past:"%s sitten",s:B,ss:B,m:B,mm:B,h:B,hh:B,d:B,dd:B,M:B,MM:B,y:B,yy:B},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},61766:function(qe,xe,T){!function(D){"use strict";D.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(w){return w},week:{dow:1,doy:4}})}(T(15439))},95867:function(qe,xe,T){!function(D){"use strict";D.defineLocale("fo",{months:"januar_februar_mars_apr\xedl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_m\xe1nadagur_t\xfdsdagur_mikudagur_h\xf3sdagur_fr\xedggjadagur_leygardagur".split("_"),weekdaysShort:"sun_m\xe1n_t\xfds_mik_h\xf3s_fr\xed_ley".split("_"),weekdaysMin:"su_m\xe1_t\xfd_mi_h\xf3_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[\xcd dag kl.] LT",nextDay:"[\xcd morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xcd gj\xe1r kl.] LT",lastWeek:"[s\xed\xf0stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s s\xed\xf0ani",s:"f\xe1 sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein t\xedmi",hh:"%d t\xedmar",d:"ein dagur",dd:"%d dagar",M:"ein m\xe1na\xf0ur",MM:"%d m\xe1na\xf0ir",y:"eitt \xe1r",yy:"%d \xe1r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},16848:function(qe,xe,T){!function(D){"use strict";D.defineLocale("fr-ca",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(w,B){switch(B){default:case"M":case"Q":case"D":case"DDD":case"d":return w+(1===w?"er":"e");case"w":case"W":return w+(1===w?"re":"e")}}})}(T(15439))},77773:function(qe,xe,T){!function(D){"use strict";D.defineLocale("fr-ch",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(w,B){switch(B){default:case"M":case"Q":case"D":case"DDD":case"d":return w+(1===w?"er":"e");case"w":case"W":return w+(1===w?"re":"e")}},week:{dow:1,doy:4}})}(T(15439))},1636:function(qe,xe,T){!function(D){"use strict";var B=/(janv\.?|f\xe9vr\.?|mars|avr\.?|mai|juin|juil\.?|ao\xfbt|sept\.?|oct\.?|nov\.?|d\xe9c\.?|janvier|f\xe9vrier|mars|avril|mai|juin|juillet|ao\xfbt|septembre|octobre|novembre|d\xe9cembre)/i,U=[/^janv/i,/^f\xe9vr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^ao\xfbt/i,/^sept/i,/^oct/i,/^nov/i,/^d\xe9c/i];D.defineLocale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsRegex:B,monthsShortRegex:B,monthsStrictRegex:/^(janvier|f\xe9vrier|mars|avril|mai|juin|juillet|ao\xfbt|septembre|octobre|novembre|d\xe9cembre)/i,monthsShortStrictRegex:/(janv\.?|f\xe9vr\.?|mars|avr\.?|mai|juin|juil\.?|ao\xfbt|sept\.?|oct\.?|nov\.?|d\xe9c\.?)/i,monthsParse:U,longMonthsParse:U,shortMonthsParse:U,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(Y,H){switch(H){case"D":return Y+(1===Y?"er":"");default:case"M":case"Q":case"DDD":case"d":return Y+(1===Y?"er":"e");case"w":case"W":return Y+(1===Y?"re":"e")}},week:{dow:1,doy:4}})}(T(15439))},14940:function(qe,xe,T){!function(D){"use strict";var x="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),w="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");D.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(U,W){return U?/-MMM-/.test(W)?w[U.month()]:x[U.month()]:x},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[\xf4fr\xfbne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien min\xfat",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(U){return U+(1===U||8===U||U>=20?"ste":"de")},week:{dow:1,doy:4}})}(T(15439))},91402:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ga",{months:["Ean\xe1ir","Feabhra","M\xe1rta","Aibre\xe1n","Bealtaine","Meitheamh","I\xfail","L\xfanasa","Me\xe1n F\xf3mhair","Deireadh F\xf3mhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","M\xe1rt","Aib","Beal","Meith","I\xfail","L\xfan","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["D\xe9 Domhnaigh","D\xe9 Luain","D\xe9 M\xe1irt","D\xe9 C\xe9adaoin","D\xe9ardaoin","D\xe9 hAoine","D\xe9 Sathairn"],weekdaysShort:["Domh","Luan","M\xe1irt","C\xe9ad","D\xe9ar","Aoine","Sath"],weekdaysMin:["Do","Lu","M\xe1","C\xe9","D\xe9","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Am\xe1rach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn\xe9 ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s \xf3 shin",s:"c\xfapla soicind",ss:"%d soicind",m:"n\xf3im\xe9ad",mm:"%d n\xf3im\xe9ad",h:"uair an chloig",hh:"%d uair an chloig",d:"l\xe1",dd:"%d l\xe1",M:"m\xed",MM:"%d m\xedonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(H){return H+(1===H?"d":H%10==2?"na":"mh")},week:{dow:1,doy:4}})}(T(15439))},46924:function(qe,xe,T){!function(D){"use strict";D.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am M\xe0rt","An Giblean","An C\xe8itean","An t-\xd2gmhios","An t-Iuchar","An L\xf9nastal","An t-Sultain","An D\xe0mhair","An t-Samhain","An D\xf9bhlachd"],monthsShort:["Faoi","Gear","M\xe0rt","Gibl","C\xe8it","\xd2gmh","Iuch","L\xf9n","Sult","D\xe0mh","Samh","D\xf9bh"],monthsParseExact:!0,weekdays:["Did\xf2mhnaich","Diluain","Dim\xe0irt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D\xf2","Lu","M\xe0","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-m\xe0ireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d\xe8 aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"m\xecos",MM:"%d m\xecosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(H){return H+(1===H?"d":H%10==2?"na":"mh")},week:{dow:1,doy:4}})}(T(15439))},16398:function(qe,xe,T){!function(D){"use strict";D.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextDay:function(){return"[ma\xf1\xe1 "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"\xe1s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"\xe1":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"\xe1s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(w){return 0===w.indexOf("un")?"n"+w:"en "+w},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},72457:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={s:["\u0925\u094b\u0921\u092f\u093e \u0938\u0945\u0915\u0902\u0921\u093e\u0902\u0928\u0940","\u0925\u094b\u0921\u0947 \u0938\u0945\u0915\u0902\u0921"],ss:[B+" \u0938\u0945\u0915\u0902\u0921\u093e\u0902\u0928\u0940",B+" \u0938\u0945\u0915\u0902\u0921"],m:["\u090f\u0915\u093e \u092e\u093f\u0923\u091f\u093e\u0928","\u090f\u0915 \u092e\u093f\u0928\u0942\u091f"],mm:[B+" \u092e\u093f\u0923\u091f\u093e\u0902\u0928\u0940",B+" \u092e\u093f\u0923\u091f\u093e\u0902"],h:["\u090f\u0915\u093e \u0935\u0930\u093e\u0928","\u090f\u0915 \u0935\u0930"],hh:[B+" \u0935\u0930\u093e\u0902\u0928\u0940",B+" \u0935\u0930\u093e\u0902"],d:["\u090f\u0915\u093e \u0926\u093f\u0938\u093e\u0928","\u090f\u0915 \u0926\u0940\u0938"],dd:[B+" \u0926\u093f\u0938\u093e\u0902\u0928\u0940",B+" \u0926\u0940\u0938"],M:["\u090f\u0915\u093e \u092e\u094d\u0939\u092f\u0928\u094d\u092f\u093e\u0928","\u090f\u0915 \u092e\u094d\u0939\u092f\u0928\u094b"],MM:[B+" \u092e\u094d\u0939\u092f\u0928\u094d\u092f\u093e\u0928\u0940",B+" \u092e\u094d\u0939\u092f\u0928\u0947"],y:["\u090f\u0915\u093e \u0935\u0930\u094d\u0938\u093e\u0928","\u090f\u0915 \u0935\u0930\u094d\u0938"],yy:[B+" \u0935\u0930\u094d\u0938\u093e\u0902\u0928\u0940",B+" \u0935\u0930\u094d\u0938\u093e\u0902"]};return Y?H[W][0]:H[W][1]}D.defineLocale("gom-deva",{months:{standalone:"\u091c\u093e\u0928\u0947\u0935\u093e\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u093e\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u090f\u092a\u094d\u0930\u0940\u0932_\u092e\u0947_\u091c\u0942\u0928_\u091c\u0941\u0932\u092f_\u0911\u0917\u0938\u094d\u091f_\u0938\u092a\u094d\u091f\u0947\u0902\u092c\u0930_\u0911\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u0935\u094d\u0939\u0947\u0902\u092c\u0930_\u0921\u093f\u0938\u0947\u0902\u092c\u0930".split("_"),format:"\u091c\u093e\u0928\u0947\u0935\u093e\u0930\u0940\u091a\u094d\u092f\u093e_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u093e\u0930\u0940\u091a\u094d\u092f\u093e_\u092e\u093e\u0930\u094d\u091a\u093e\u091a\u094d\u092f\u093e_\u090f\u092a\u094d\u0930\u0940\u0932\u093e\u091a\u094d\u092f\u093e_\u092e\u0947\u092f\u093e\u091a\u094d\u092f\u093e_\u091c\u0942\u0928\u093e\u091a\u094d\u092f\u093e_\u091c\u0941\u0932\u092f\u093e\u091a\u094d\u092f\u093e_\u0911\u0917\u0938\u094d\u091f\u093e\u091a\u094d\u092f\u093e_\u0938\u092a\u094d\u091f\u0947\u0902\u092c\u0930\u093e\u091a\u094d\u092f\u093e_\u0911\u0915\u094d\u091f\u094b\u092c\u0930\u093e\u091a\u094d\u092f\u093e_\u0928\u094b\u0935\u094d\u0939\u0947\u0902\u092c\u0930\u093e\u091a\u094d\u092f\u093e_\u0921\u093f\u0938\u0947\u0902\u092c\u0930\u093e\u091a\u094d\u092f\u093e".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"\u091c\u093e\u0928\u0947._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a_\u090f\u092a\u094d\u0930\u0940._\u092e\u0947_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0911\u0917._\u0938\u092a\u094d\u091f\u0947\u0902._\u0911\u0915\u094d\u091f\u094b._\u0928\u094b\u0935\u094d\u0939\u0947\u0902._\u0921\u093f\u0938\u0947\u0902.".split("_"),monthsParseExact:!0,weekdays:"\u0906\u092f\u0924\u093e\u0930_\u0938\u094b\u092e\u093e\u0930_\u092e\u0902\u0917\u0933\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u092c\u093f\u0930\u0947\u0938\u094d\u0924\u093e\u0930_\u0938\u0941\u0915\u094d\u0930\u093e\u0930_\u0936\u0947\u0928\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0906\u092f\u0924._\u0938\u094b\u092e._\u092e\u0902\u0917\u0933._\u092c\u0941\u0927._\u092c\u094d\u0930\u0947\u0938\u094d\u0924._\u0938\u0941\u0915\u094d\u0930._\u0936\u0947\u0928.".split("_"),weekdaysMin:"\u0906_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u092c\u094d\u0930\u0947_\u0938\u0941_\u0936\u0947".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [\u0935\u093e\u091c\u0924\u093e\u0902]",LTS:"A h:mm:ss [\u0935\u093e\u091c\u0924\u093e\u0902]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [\u0935\u093e\u091c\u0924\u093e\u0902]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [\u0935\u093e\u091c\u0924\u093e\u0902]",llll:"ddd, D MMM YYYY, A h:mm [\u0935\u093e\u091c\u0924\u093e\u0902]"},calendar:{sameDay:"[\u0906\u092f\u091c] LT",nextDay:"[\u092b\u093e\u0932\u094d\u092f\u093e\u0902] LT",nextWeek:"[\u092b\u0941\u0921\u0932\u094b] dddd[,] LT",lastDay:"[\u0915\u093e\u0932] LT",lastWeek:"[\u092b\u093e\u091f\u0932\u094b] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s \u0906\u0926\u0940\u0902",s:x,ss:x,m:x,mm:x,h:x,hh:x,d:x,dd:x,M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}(\u0935\u0947\u0930)/,ordinal:function(B,U){return"D"===U?B+"\u0935\u0947\u0930":B},week:{dow:0,doy:3},meridiemParse:/\u0930\u093e\u0924\u0940|\u0938\u0915\u093e\u0933\u0940\u0902|\u0926\u0928\u092a\u093e\u0930\u093e\u0902|\u0938\u093e\u0902\u091c\u0947/,meridiemHour:function(B,U){return 12===B&&(B=0),"\u0930\u093e\u0924\u0940"===U?B<4?B:B+12:"\u0938\u0915\u093e\u0933\u0940\u0902"===U?B:"\u0926\u0928\u092a\u093e\u0930\u093e\u0902"===U?B>12?B:B+12:"\u0938\u093e\u0902\u091c\u0947"===U?B+12:void 0},meridiem:function(B,U,W){return B<4?"\u0930\u093e\u0924\u0940":B<12?"\u0938\u0915\u093e\u0933\u0940\u0902":B<16?"\u0926\u0928\u092a\u093e\u0930\u093e\u0902":B<20?"\u0938\u093e\u0902\u091c\u0947":"\u0930\u093e\u0924\u0940"}})}(T(15439))},52545:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H={s:["thoddea sekondamni","thodde sekond"],ss:[B+" sekondamni",B+" sekond"],m:["eka mintan","ek minut"],mm:[B+" mintamni",B+" mintam"],h:["eka voran","ek vor"],hh:[B+" voramni",B+" voram"],d:["eka disan","ek dis"],dd:[B+" disamni",B+" dis"],M:["eka mhoinean","ek mhoino"],MM:[B+" mhoineamni",B+" mhoine"],y:["eka vorsan","ek voros"],yy:[B+" vorsamni",B+" vorsam"]};return Y?H[W][0]:H[W][1]}D.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:x,ss:x,m:x,mm:x,h:x,hh:x,d:x,dd:x,M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(B,U){return"D"===U?B+"er":B},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(B,U){return 12===B&&(B=0),"rati"===U?B<4?B:B+12:"sokallim"===U?B:"donparam"===U?B>12?B:B+12:"sanje"===U?B+12:void 0},meridiem:function(B,U,W){return B<4?"rati":B<12?"sokallim":B<16?"donparam":B<20?"sanje":"rati"}})}(T(15439))},42641:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0ae7",2:"\u0ae8",3:"\u0ae9",4:"\u0aea",5:"\u0aeb",6:"\u0aec",7:"\u0aed",8:"\u0aee",9:"\u0aef",0:"\u0ae6"},w={"\u0ae7":"1","\u0ae8":"2","\u0ae9":"3","\u0aea":"4","\u0aeb":"5","\u0aec":"6","\u0aed":"7","\u0aee":"8","\u0aef":"9","\u0ae6":"0"};D.defineLocale("gu",{months:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1\u0a86\u0ab0\u0ac0_\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1\u0a86\u0ab0\u0ac0_\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf\u0ab2_\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe\u0a88_\u0a91\u0a97\u0ab8\u0acd\u0a9f_\u0ab8\u0aaa\u0acd\u0a9f\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0a91\u0a95\u0acd\u0a9f\u0acd\u0aac\u0ab0_\u0aa8\u0ab5\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0aa1\u0abf\u0ab8\u0ac7\u0aae\u0acd\u0aac\u0ab0".split("_"),monthsShort:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1._\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1._\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf._\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe._\u0a91\u0a97._\u0ab8\u0aaa\u0acd\u0a9f\u0ac7._\u0a91\u0a95\u0acd\u0a9f\u0acd._\u0aa8\u0ab5\u0ac7._\u0aa1\u0abf\u0ab8\u0ac7.".split("_"),monthsParseExact:!0,weekdays:"\u0ab0\u0ab5\u0abf\u0ab5\u0abe\u0ab0_\u0ab8\u0acb\u0aae\u0ab5\u0abe\u0ab0_\u0aae\u0a82\u0a97\u0ab3\u0ab5\u0abe\u0ab0_\u0aac\u0ac1\u0aa7\u0acd\u0ab5\u0abe\u0ab0_\u0a97\u0ac1\u0ab0\u0ac1\u0ab5\u0abe\u0ab0_\u0ab6\u0ac1\u0a95\u0acd\u0ab0\u0ab5\u0abe\u0ab0_\u0ab6\u0aa8\u0abf\u0ab5\u0abe\u0ab0".split("_"),weekdaysShort:"\u0ab0\u0ab5\u0abf_\u0ab8\u0acb\u0aae_\u0aae\u0a82\u0a97\u0ab3_\u0aac\u0ac1\u0aa7\u0acd_\u0a97\u0ac1\u0ab0\u0ac1_\u0ab6\u0ac1\u0a95\u0acd\u0ab0_\u0ab6\u0aa8\u0abf".split("_"),weekdaysMin:"\u0ab0_\u0ab8\u0acb_\u0aae\u0a82_\u0aac\u0ac1_\u0a97\u0ac1_\u0ab6\u0ac1_\u0ab6".split("_"),longDateFormat:{LT:"A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LTS:"A h:mm:ss \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LLLL:"dddd, D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7"},calendar:{sameDay:"[\u0a86\u0a9c] LT",nextDay:"[\u0a95\u0abe\u0ab2\u0ac7] LT",nextWeek:"dddd, LT",lastDay:"[\u0a97\u0a87\u0a95\u0abe\u0ab2\u0ac7] LT",lastWeek:"[\u0aaa\u0abe\u0a9b\u0ab2\u0abe] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0aae\u0abe",past:"%s \u0aaa\u0ab9\u0ac7\u0ab2\u0abe",s:"\u0a85\u0aae\u0ac1\u0a95 \u0aaa\u0ab3\u0acb",ss:"%d \u0ab8\u0ac7\u0a95\u0a82\u0aa1",m:"\u0a8f\u0a95 \u0aae\u0abf\u0aa8\u0abf\u0a9f",mm:"%d \u0aae\u0abf\u0aa8\u0abf\u0a9f",h:"\u0a8f\u0a95 \u0a95\u0ab2\u0abe\u0a95",hh:"%d \u0a95\u0ab2\u0abe\u0a95",d:"\u0a8f\u0a95 \u0aa6\u0abf\u0ab5\u0ab8",dd:"%d \u0aa6\u0abf\u0ab5\u0ab8",M:"\u0a8f\u0a95 \u0aae\u0ab9\u0abf\u0aa8\u0acb",MM:"%d \u0aae\u0ab9\u0abf\u0aa8\u0acb",y:"\u0a8f\u0a95 \u0ab5\u0ab0\u0acd\u0ab7",yy:"%d \u0ab5\u0ab0\u0acd\u0ab7"},preparse:function(U){return U.replace(/[\u0ae7\u0ae8\u0ae9\u0aea\u0aeb\u0aec\u0aed\u0aee\u0aef\u0ae6]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0ab0\u0abe\u0aa4|\u0aac\u0aaa\u0acb\u0ab0|\u0ab8\u0ab5\u0abe\u0ab0|\u0ab8\u0abe\u0a82\u0a9c/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u0ab0\u0abe\u0aa4"===W?U<4?U:U+12:"\u0ab8\u0ab5\u0abe\u0ab0"===W?U:"\u0aac\u0aaa\u0acb\u0ab0"===W?U>=10?U:U+12:"\u0ab8\u0abe\u0a82\u0a9c"===W?U+12:void 0},meridiem:function(U,W,Y){return U<4?"\u0ab0\u0abe\u0aa4":U<10?"\u0ab8\u0ab5\u0abe\u0ab0":U<17?"\u0aac\u0aaa\u0acb\u0ab0":U<20?"\u0ab8\u0abe\u0a82\u0a9c":"\u0ab0\u0abe\u0aa4"},week:{dow:0,doy:6}})}(T(15439))},7536:function(qe,xe,T){!function(D){"use strict";D.defineLocale("he",{months:"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),monthsShort:"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),weekdays:"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),weekdaysShort:"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),weekdaysMin:"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [\u05d1]MMMM YYYY",LLL:"D [\u05d1]MMMM YYYY HH:mm",LLLL:"dddd, D [\u05d1]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[\u05d4\u05d9\u05d5\u05dd \u05d1\u05be]LT",nextDay:"[\u05de\u05d7\u05e8 \u05d1\u05be]LT",nextWeek:"dddd [\u05d1\u05e9\u05e2\u05d4] LT",lastDay:"[\u05d0\u05ea\u05de\u05d5\u05dc \u05d1\u05be]LT",lastWeek:"[\u05d1\u05d9\u05d5\u05dd] dddd [\u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05d1\u05e9\u05e2\u05d4] LT",sameElse:"L"},relativeTime:{future:"\u05d1\u05e2\u05d5\u05d3 %s",past:"\u05dc\u05e4\u05e0\u05d9 %s",s:"\u05de\u05e1\u05e4\u05e8 \u05e9\u05e0\u05d9\u05d5\u05ea",ss:"%d \u05e9\u05e0\u05d9\u05d5\u05ea",m:"\u05d3\u05e7\u05d4",mm:"%d \u05d3\u05e7\u05d5\u05ea",h:"\u05e9\u05e2\u05d4",hh:function(w){return 2===w?"\u05e9\u05e2\u05ea\u05d9\u05d9\u05dd":w+" \u05e9\u05e2\u05d5\u05ea"},d:"\u05d9\u05d5\u05dd",dd:function(w){return 2===w?"\u05d9\u05d5\u05de\u05d9\u05d9\u05dd":w+" \u05d9\u05de\u05d9\u05dd"},M:"\u05d7\u05d5\u05d3\u05e9",MM:function(w){return 2===w?"\u05d7\u05d5\u05d3\u05e9\u05d9\u05d9\u05dd":w+" \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"},y:"\u05e9\u05e0\u05d4",yy:function(w){return 2===w?"\u05e9\u05e0\u05ea\u05d9\u05d9\u05dd":w%10==0&&10!==w?w+" \u05e9\u05e0\u05d4":w+" \u05e9\u05e0\u05d9\u05dd"}},meridiemParse:/\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,isPM:function(w){return/^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(w)},meridiem:function(w,B,U){return w<5?"\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8":w<10?"\u05d1\u05d1\u05d5\u05e7\u05e8":w<12?U?'\u05dc\u05e4\u05e0\u05d4"\u05e6':"\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":w<18?U?'\u05d0\u05d7\u05d4"\u05e6':"\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":"\u05d1\u05e2\u05e8\u05d1"}})}(T(15439))},96335:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},w={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"},B=[/^\u091c\u0928/i,/^\u092b\u093c\u0930|\u092b\u0930/i,/^\u092e\u093e\u0930\u094d\u091a/i,/^\u0905\u092a\u094d\u0930\u0948/i,/^\u092e\u0908/i,/^\u091c\u0942\u0928/i,/^\u091c\u0941\u0932/i,/^\u0905\u0917/i,/^\u0938\u093f\u0924\u0902|\u0938\u093f\u0924/i,/^\u0905\u0915\u094d\u091f\u0942/i,/^\u0928\u0935|\u0928\u0935\u0902/i,/^\u0926\u093f\u0938\u0902|\u0926\u093f\u0938/i];D.defineLocale("hi",{months:{format:"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),standalone:"\u091c\u0928\u0935\u0930\u0940_\u092b\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u0902\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u0902\u092c\u0930_\u0926\u093f\u0938\u0902\u092c\u0930".split("_")},monthsShort:"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u092c\u091c\u0947",LTS:"A h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A h:mm \u092c\u091c\u0947"},monthsParse:B,longMonthsParse:B,shortMonthsParse:[/^\u091c\u0928/i,/^\u092b\u093c\u0930/i,/^\u092e\u093e\u0930\u094d\u091a/i,/^\u0905\u092a\u094d\u0930\u0948/i,/^\u092e\u0908/i,/^\u091c\u0942\u0928/i,/^\u091c\u0941\u0932/i,/^\u0905\u0917/i,/^\u0938\u093f\u0924/i,/^\u0905\u0915\u094d\u091f\u0942/i,/^\u0928\u0935/i,/^\u0926\u093f\u0938/i],monthsRegex:/^(\u091c\u0928\u0935\u0930\u0940|\u091c\u0928\.?|\u092b\u093c\u0930\u0935\u0930\u0940|\u092b\u0930\u0935\u0930\u0940|\u092b\u093c\u0930\.?|\u092e\u093e\u0930\u094d\u091a?|\u0905\u092a\u094d\u0930\u0948\u0932|\u0905\u092a\u094d\u0930\u0948\.?|\u092e\u0908?|\u091c\u0942\u0928?|\u091c\u0941\u0932\u093e\u0908|\u091c\u0941\u0932\.?|\u0905\u0917\u0938\u094d\u0924|\u0905\u0917\.?|\u0938\u093f\u0924\u092e\u094d\u092c\u0930|\u0938\u093f\u0924\u0902\u092c\u0930|\u0938\u093f\u0924\.?|\u0905\u0915\u094d\u091f\u0942\u092c\u0930|\u0905\u0915\u094d\u091f\u0942\.?|\u0928\u0935\u092e\u094d\u092c\u0930|\u0928\u0935\u0902\u092c\u0930|\u0928\u0935\.?|\u0926\u093f\u0938\u092e\u094d\u092c\u0930|\u0926\u093f\u0938\u0902\u092c\u0930|\u0926\u093f\u0938\.?)/i,monthsShortRegex:/^(\u091c\u0928\u0935\u0930\u0940|\u091c\u0928\.?|\u092b\u093c\u0930\u0935\u0930\u0940|\u092b\u0930\u0935\u0930\u0940|\u092b\u093c\u0930\.?|\u092e\u093e\u0930\u094d\u091a?|\u0905\u092a\u094d\u0930\u0948\u0932|\u0905\u092a\u094d\u0930\u0948\.?|\u092e\u0908?|\u091c\u0942\u0928?|\u091c\u0941\u0932\u093e\u0908|\u091c\u0941\u0932\.?|\u0905\u0917\u0938\u094d\u0924|\u0905\u0917\.?|\u0938\u093f\u0924\u092e\u094d\u092c\u0930|\u0938\u093f\u0924\u0902\u092c\u0930|\u0938\u093f\u0924\.?|\u0905\u0915\u094d\u091f\u0942\u092c\u0930|\u0905\u0915\u094d\u091f\u0942\.?|\u0928\u0935\u092e\u094d\u092c\u0930|\u0928\u0935\u0902\u092c\u0930|\u0928\u0935\.?|\u0926\u093f\u0938\u092e\u094d\u092c\u0930|\u0926\u093f\u0938\u0902\u092c\u0930|\u0926\u093f\u0938\.?)/i,monthsStrictRegex:/^(\u091c\u0928\u0935\u0930\u0940?|\u092b\u093c\u0930\u0935\u0930\u0940|\u092b\u0930\u0935\u0930\u0940?|\u092e\u093e\u0930\u094d\u091a?|\u0905\u092a\u094d\u0930\u0948\u0932?|\u092e\u0908?|\u091c\u0942\u0928?|\u091c\u0941\u0932\u093e\u0908?|\u0905\u0917\u0938\u094d\u0924?|\u0938\u093f\u0924\u092e\u094d\u092c\u0930|\u0938\u093f\u0924\u0902\u092c\u0930|\u0938\u093f\u0924?\.?|\u0905\u0915\u094d\u091f\u0942\u092c\u0930|\u0905\u0915\u094d\u091f\u0942\.?|\u0928\u0935\u092e\u094d\u092c\u0930|\u0928\u0935\u0902\u092c\u0930?|\u0926\u093f\u0938\u092e\u094d\u092c\u0930|\u0926\u093f\u0938\u0902\u092c\u0930?)/i,monthsShortStrictRegex:/^(\u091c\u0928\.?|\u092b\u093c\u0930\.?|\u092e\u093e\u0930\u094d\u091a?|\u0905\u092a\u094d\u0930\u0948\.?|\u092e\u0908?|\u091c\u0942\u0928?|\u091c\u0941\u0932\.?|\u0905\u0917\.?|\u0938\u093f\u0924\.?|\u0905\u0915\u094d\u091f\u0942\.?|\u0928\u0935\.?|\u0926\u093f\u0938\.?)/i,calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0915\u0932] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u0932] LT",lastWeek:"[\u092a\u093f\u091b\u0932\u0947] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u092e\u0947\u0902",past:"%s \u092a\u0939\u0932\u0947",s:"\u0915\u0941\u091b \u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0902\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u091f",mm:"%d \u092e\u093f\u0928\u091f",h:"\u090f\u0915 \u0918\u0902\u091f\u093e",hh:"%d \u0918\u0902\u091f\u0947",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u0940\u0928\u0947",MM:"%d \u092e\u0939\u0940\u0928\u0947",y:"\u090f\u0915 \u0935\u0930\u094d\u0937",yy:"%d \u0935\u0930\u094d\u0937"},preparse:function(Y){return Y.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(H){return w[H]})},postformat:function(Y){return Y.replace(/\d/g,function(H){return x[H]})},meridiemParse:/\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,meridiemHour:function(Y,H){return 12===Y&&(Y=0),"\u0930\u093e\u0924"===H?Y<4?Y:Y+12:"\u0938\u0941\u092c\u0939"===H?Y:"\u0926\u094b\u092a\u0939\u0930"===H?Y>=10?Y:Y+12:"\u0936\u093e\u092e"===H?Y+12:void 0},meridiem:function(Y,H,G){return Y<4?"\u0930\u093e\u0924":Y<10?"\u0938\u0941\u092c\u0939":Y<17?"\u0926\u094b\u092a\u0939\u0930":Y<20?"\u0936\u093e\u092e":"\u0930\u093e\u0924"},week:{dow:0,doy:6}})}(T(15439))},7458:function(qe,xe,T){!function(D){"use strict";function x(B,U,W){var Y=B+" ";switch(W){case"ss":return Y+(1===B?"sekunda":2===B||3===B||4===B?"sekunde":"sekundi");case"m":return U?"jedna minuta":"jedne minute";case"mm":return Y+(1===B?"minuta":2===B||3===B||4===B?"minute":"minuta");case"h":return U?"jedan sat":"jednog sata";case"hh":return Y+(1===B?"sat":2===B||3===B||4===B?"sata":"sati");case"dd":return Y+(1===B?"dan":"dana");case"MM":return Y+(1===B?"mjesec":2===B||3===B||4===B?"mjeseca":"mjeseci");case"yy":return Y+(1===B?"godina":2===B||3===B||4===B?"godine":"godina")}}D.defineLocale("hr",{months:{format:"sije\u010dnja_velja\u010de_o\u017eujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sije\u010danj_velja\u010da_o\u017eujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._o\u017eu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:return"[pro\u0161lu] [nedjelju] [u] LT";case 3:return"[pro\u0161lu] [srijedu] [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:x,m:x,mm:x,h:x,hh:x,d:"dan",dd:x,M:"mjesec",MM:x,y:"godinu",yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},56540:function(qe,xe,T){!function(D){"use strict";var x="vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" ");function w(W,Y,H,G){var $=W;switch(H){case"s":return G||Y?"n\xe9h\xe1ny m\xe1sodperc":"n\xe9h\xe1ny m\xe1sodperce";case"ss":return $+(G||Y)?" m\xe1sodperc":" m\xe1sodperce";case"m":return"egy"+(G||Y?" perc":" perce");case"mm":return $+(G||Y?" perc":" perce");case"h":return"egy"+(G||Y?" \xf3ra":" \xf3r\xe1ja");case"hh":return $+(G||Y?" \xf3ra":" \xf3r\xe1ja");case"d":return"egy"+(G||Y?" nap":" napja");case"dd":return $+(G||Y?" nap":" napja");case"M":return"egy"+(G||Y?" h\xf3nap":" h\xf3napja");case"MM":return $+(G||Y?" h\xf3nap":" h\xf3napja");case"y":return"egy"+(G||Y?" \xe9v":" \xe9ve");case"yy":return $+(G||Y?" \xe9v":" \xe9ve")}return""}function B(W){return(W?"":"[m\xfalt] ")+"["+x[this.day()]+"] LT[-kor]"}D.defineLocale("hu",{months:"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),monthsShort:"jan._feb._m\xe1rc._\xe1pr._m\xe1j._j\xfan._j\xfal._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),weekdaysShort:"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(W){return"u"===W.charAt(1).toLowerCase()},meridiem:function(W,Y,H){return W<12?!0===H?"de":"DE":!0===H?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return B.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return B.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s m\xfalva",past:"%s",s:w,ss:w,m:w,mm:w,h:w,hh:w,d:w,dd:w,M:w,MM:w,y:w,yy:w},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},65283:function(qe,xe,T){!function(D){"use strict";D.defineLocale("hy-am",{months:{format:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580\u056b_\u0583\u0565\u057f\u0580\u057e\u0561\u0580\u056b_\u0574\u0561\u0580\u057f\u056b_\u0561\u057a\u0580\u056b\u056c\u056b_\u0574\u0561\u0575\u056b\u057d\u056b_\u0570\u0578\u0582\u0576\u056b\u057d\u056b_\u0570\u0578\u0582\u056c\u056b\u057d\u056b_\u0585\u0563\u0578\u057d\u057f\u0578\u057d\u056b_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580\u056b_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b".split("_"),standalone:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580_\u0583\u0565\u057f\u0580\u057e\u0561\u0580_\u0574\u0561\u0580\u057f_\u0561\u057a\u0580\u056b\u056c_\u0574\u0561\u0575\u056b\u057d_\u0570\u0578\u0582\u0576\u056b\u057d_\u0570\u0578\u0582\u056c\u056b\u057d_\u0585\u0563\u0578\u057d\u057f\u0578\u057d_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580".split("_")},monthsShort:"\u0570\u0576\u057e_\u0583\u057f\u0580_\u0574\u0580\u057f_\u0561\u057a\u0580_\u0574\u0575\u057d_\u0570\u0576\u057d_\u0570\u056c\u057d_\u0585\u0563\u057d_\u057d\u057a\u057f_\u0570\u056f\u057f_\u0576\u0574\u0562_\u0564\u056f\u057f".split("_"),weekdays:"\u056f\u056b\u0580\u0561\u056f\u056b_\u0565\u0580\u056f\u0578\u0582\u0577\u0561\u0562\u0569\u056b_\u0565\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0579\u0578\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0570\u056b\u0576\u0563\u0577\u0561\u0562\u0569\u056b_\u0578\u0582\u0580\u0562\u0561\u0569_\u0577\u0561\u0562\u0561\u0569".split("_"),weekdaysShort:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),weekdaysMin:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0569.",LLL:"D MMMM YYYY \u0569., HH:mm",LLLL:"dddd, D MMMM YYYY \u0569., HH:mm"},calendar:{sameDay:"[\u0561\u0575\u057d\u0585\u0580] LT",nextDay:"[\u057e\u0561\u0572\u0568] LT",lastDay:"[\u0565\u0580\u0565\u056f] LT",nextWeek:function(){return"dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},lastWeek:function(){return"[\u0561\u0576\u0581\u0561\u056e] dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},sameElse:"L"},relativeTime:{future:"%s \u0570\u0565\u057f\u0578",past:"%s \u0561\u057c\u0561\u057b",s:"\u0574\u056b \u0584\u0561\u0576\u056b \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",ss:"%d \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",m:"\u0580\u0578\u057a\u0565",mm:"%d \u0580\u0578\u057a\u0565",h:"\u056a\u0561\u0574",hh:"%d \u056a\u0561\u0574",d:"\u0585\u0580",dd:"%d \u0585\u0580",M:"\u0561\u0574\u056b\u057d",MM:"%d \u0561\u0574\u056b\u057d",y:"\u057f\u0561\u0580\u056b",yy:"%d \u057f\u0561\u0580\u056b"},meridiemParse:/\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,isPM:function(w){return/^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(w)},meridiem:function(w){return w<4?"\u0563\u056b\u0577\u0565\u0580\u057e\u0561":w<12?"\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561":w<17?"\u0581\u0565\u0580\u0565\u056f\u057e\u0561":"\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,ordinal:function(w,B){switch(B){case"DDD":case"w":case"W":case"DDDo":return 1===w?w+"-\u056b\u0576":w+"-\u0580\u0564";default:return w}},week:{dow:1,doy:7}})}(T(15439))},98780:function(qe,xe,T){!function(D){"use strict";D.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(w,B){return 12===w&&(w=0),"pagi"===B?w:"siang"===B?w>=11?w:w+12:"sore"===B||"malam"===B?w+12:void 0},meridiem:function(w,B,U){return w<11?"pagi":w<15?"siang":w<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(T(15439))},14205:function(qe,xe,T){!function(D){"use strict";function x(U){return U%100==11||U%10!=1}function w(U,W,Y,H){var G=U+" ";switch(Y){case"s":return W||H?"nokkrar sek\xfandur":"nokkrum sek\xfandum";case"ss":return x(U)?G+(W||H?"sek\xfandur":"sek\xfandum"):G+"sek\xfanda";case"m":return W?"m\xedn\xfata":"m\xedn\xfatu";case"mm":return x(U)?G+(W||H?"m\xedn\xfatur":"m\xedn\xfatum"):W?G+"m\xedn\xfata":G+"m\xedn\xfatu";case"hh":return x(U)?G+(W||H?"klukkustundir":"klukkustundum"):G+"klukkustund";case"d":return W?"dagur":H?"dag":"degi";case"dd":return x(U)?W?G+"dagar":G+(H?"daga":"d\xf6gum"):W?G+"dagur":G+(H?"dag":"degi");case"M":return W?"m\xe1nu\xf0ur":H?"m\xe1nu\xf0":"m\xe1nu\xf0i";case"MM":return x(U)?W?G+"m\xe1nu\xf0ir":G+(H?"m\xe1nu\xf0i":"m\xe1nu\xf0um"):W?G+"m\xe1nu\xf0ur":G+(H?"m\xe1nu\xf0":"m\xe1nu\xf0i");case"y":return W||H?"\xe1r":"\xe1ri";case"yy":return x(U)?G+(W||H?"\xe1r":"\xe1rum"):G+(W||H?"\xe1r":"\xe1ri")}}D.defineLocale("is",{months:"jan\xfaar_febr\xfaar_mars_apr\xedl_ma\xed_j\xfan\xed_j\xfal\xed_\xe1g\xfast_september_okt\xf3ber_n\xf3vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma\xed_j\xfan_j\xfal_\xe1g\xfa_sep_okt_n\xf3v_des".split("_"),weekdays:"sunnudagur_m\xe1nudagur_\xferi\xf0judagur_mi\xf0vikudagur_fimmtudagur_f\xf6studagur_laugardagur".split("_"),weekdaysShort:"sun_m\xe1n_\xferi_mi\xf0_fim_f\xf6s_lau".split("_"),weekdaysMin:"Su_M\xe1_\xder_Mi_Fi_F\xf6_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[\xed dag kl.] LT",nextDay:"[\xe1 morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xed g\xe6r kl.] LT",lastWeek:"[s\xed\xf0asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s s\xed\xf0an",s:w,ss:w,m:w,mm:w,h:"klukkustund",hh:w,d:w,dd:w,M:w,MM:w,y:w,yy:w},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},29985:function(qe,xe,T){!function(D){"use strict";D.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(w){return(/^[0-9].+$/.test(w)?"tra":"in")+" "+w},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},34211:function(qe,xe,T){!function(D){"use strict";D.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},31003:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"\u4ee4\u548c",narrow:"\u32ff",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"\u5e73\u6210",narrow:"\u337b",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"\u662d\u548c",narrow:"\u337c",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"\u5927\u6b63",narrow:"\u337d",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"\u660e\u6cbb",narrow:"\u337e",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"\u897f\u66a6",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"\u7d00\u5143\u524d",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(\u5143|\d+)\u5e74/,eraYearOrdinalParse:function(w,B){return"\u5143"===B[1]?1:parseInt(B[1]||w,10)},months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5(ddd) HH:mm"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(w){return"\u5348\u5f8c"===w},meridiem:function(w,B,U){return w<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:function(w){return w.week()!==this.week()?"[\u6765\u9031]dddd LT":"dddd LT"},lastDay:"[\u6628\u65e5] LT",lastWeek:function(w){return this.week()!==w.week()?"[\u5148\u9031]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}\u65e5/,ordinal:function(w,B){switch(B){case"y":return 1===w?"\u5143\u5e74":w+"\u5e74";case"d":case"D":case"DDD":return w+"\u65e5";default:return w}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",ss:"%d\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}(T(15439))},60420:function(qe,xe,T){!function(D){"use strict";D.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(w,B){return 12===w&&(w=0),"enjing"===B?w:"siyang"===B?w>=11?w:w+12:"sonten"===B||"ndalu"===B?w+12:void 0},meridiem:function(w,B,U){return w<11?"enjing":w<15?"siyang":w<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(T(15439))},40851:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ka",{months:"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),monthsShort:"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),weekdays:{standalone:"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),format:"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),isFormat:/(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/},weekdaysShort:"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),weekdaysMin:"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u10d3\u10e6\u10d4\u10e1] LT[-\u10d6\u10d4]",nextDay:"[\u10ee\u10d5\u10d0\u10da] LT[-\u10d6\u10d4]",lastDay:"[\u10d2\u10e3\u10e8\u10d8\u10dc] LT[-\u10d6\u10d4]",nextWeek:"[\u10e8\u10d4\u10db\u10d3\u10d4\u10d2] dddd LT[-\u10d6\u10d4]",lastWeek:"[\u10ec\u10d8\u10dc\u10d0] dddd LT-\u10d6\u10d4",sameElse:"L"},relativeTime:{future:function(w){return w.replace(/(\u10ec\u10d0\u10db|\u10ec\u10e3\u10d7|\u10e1\u10d0\u10d0\u10d7|\u10ec\u10d4\u10da|\u10d3\u10e6|\u10d7\u10d5)(\u10d8|\u10d4)/,function(B,U,W){return"\u10d8"===W?U+"\u10e8\u10d8":U+W+"\u10e8\u10d8"})},past:function(w){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(w)?w.replace(/(\u10d8|\u10d4)$/,"\u10d8\u10e1 \u10ec\u10d8\u10dc"):/\u10ec\u10d4\u10da\u10d8/.test(w)?w.replace(/\u10ec\u10d4\u10da\u10d8$/,"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc"):w},s:"\u10e0\u10d0\u10db\u10d3\u10d4\u10dc\u10d8\u10db\u10d4 \u10ec\u10d0\u10db\u10d8",ss:"%d \u10ec\u10d0\u10db\u10d8",m:"\u10ec\u10e3\u10d7\u10d8",mm:"%d \u10ec\u10e3\u10d7\u10d8",h:"\u10e1\u10d0\u10d0\u10d7\u10d8",hh:"%d \u10e1\u10d0\u10d0\u10d7\u10d8",d:"\u10d3\u10e6\u10d4",dd:"%d \u10d3\u10e6\u10d4",M:"\u10d7\u10d5\u10d4",MM:"%d \u10d7\u10d5\u10d4",y:"\u10ec\u10d4\u10da\u10d8",yy:"%d \u10ec\u10d4\u10da\u10d8"},dayOfMonthOrdinalParse:/0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,ordinal:function(w){return 0===w?w:1===w?w+"-\u10da\u10d8":w<20||w<=100&&w%20==0||w%100==0?"\u10db\u10d4-"+w:w+"-\u10d4"},week:{dow:1,doy:7}})}(T(15439))},16074:function(qe,xe,T){!function(D){"use strict";var x={0:"-\u0448\u0456",1:"-\u0448\u0456",2:"-\u0448\u0456",3:"-\u0448\u0456",4:"-\u0448\u0456",5:"-\u0448\u0456",6:"-\u0448\u044b",7:"-\u0448\u0456",8:"-\u0448\u0456",9:"-\u0448\u044b",10:"-\u0448\u044b",20:"-\u0448\u044b",30:"-\u0448\u044b",40:"-\u0448\u044b",50:"-\u0448\u0456",60:"-\u0448\u044b",70:"-\u0448\u0456",80:"-\u0448\u0456",90:"-\u0448\u044b",100:"-\u0448\u0456"};D.defineLocale("kk",{months:"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),monthsShort:"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),weekdays:"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),weekdaysShort:"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),weekdaysMin:"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u0456\u043d \u0441\u0430\u0493\u0430\u0442] LT",nextDay:"[\u0415\u0440\u0442\u0435\u04a3 \u0441\u0430\u0493\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0493\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0448\u0435 \u0441\u0430\u0493\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u0435\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u04a3] dddd [\u0441\u0430\u0493\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0456\u0448\u0456\u043d\u0434\u0435",past:"%s \u0431\u04b1\u0440\u044b\u043d",s:"\u0431\u0456\u0440\u043d\u0435\u0448\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0456\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u0431\u0456\u0440 \u0441\u0430\u0493\u0430\u0442",hh:"%d \u0441\u0430\u0493\u0430\u0442",d:"\u0431\u0456\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0456\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0456\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0448\u0456|\u0448\u044b)/,ordinal:function(B){return B+(x[B]||x[B%10]||x[B>=100?100:null])},week:{dow:1,doy:7}})}(T(15439))},53343:function(qe,xe,T){!function(D){"use strict";var x={1:"\u17e1",2:"\u17e2",3:"\u17e3",4:"\u17e4",5:"\u17e5",6:"\u17e6",7:"\u17e7",8:"\u17e8",9:"\u17e9",0:"\u17e0"},w={"\u17e1":"1","\u17e2":"2","\u17e3":"3","\u17e4":"4","\u17e5":"5","\u17e6":"6","\u17e7":"7","\u17e8":"8","\u17e9":"9","\u17e0":"0"};D.defineLocale("km",{months:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),monthsShort:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),weekdays:"\u17a2\u17b6\u1791\u17b7\u178f\u17d2\u1799_\u1785\u17d0\u1793\u17d2\u1791_\u17a2\u1784\u17d2\u1782\u17b6\u179a_\u1796\u17bb\u1792_\u1796\u17d2\u179a\u17a0\u179f\u17d2\u1794\u178f\u17b7\u17cd_\u179f\u17bb\u1780\u17d2\u179a_\u179f\u17c5\u179a\u17cd".split("_"),weekdaysShort:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysMin:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u1796\u17d2\u179a\u17b9\u1780|\u179b\u17d2\u1784\u17b6\u1785/,isPM:function(U){return"\u179b\u17d2\u1784\u17b6\u1785"===U},meridiem:function(U,W,Y){return U<12?"\u1796\u17d2\u179a\u17b9\u1780":"\u179b\u17d2\u1784\u17b6\u1785"},calendar:{sameDay:"[\u1790\u17d2\u1784\u17c3\u1793\u17c1\u17c7 \u1798\u17c9\u17c4\u1784] LT",nextDay:"[\u179f\u17d2\u17a2\u17c2\u1780 \u1798\u17c9\u17c4\u1784] LT",nextWeek:"dddd [\u1798\u17c9\u17c4\u1784] LT",lastDay:"[\u1798\u17d2\u179f\u17b7\u179b\u1798\u17b7\u1789 \u1798\u17c9\u17c4\u1784] LT",lastWeek:"dddd [\u179f\u1794\u17d2\u178f\u17b6\u17a0\u17cd\u1798\u17bb\u1793] [\u1798\u17c9\u17c4\u1784] LT",sameElse:"L"},relativeTime:{future:"%s\u1791\u17c0\u178f",past:"%s\u1798\u17bb\u1793",s:"\u1794\u17c9\u17bb\u1793\u17d2\u1798\u17b6\u1793\u179c\u17b7\u1793\u17b6\u1791\u17b8",ss:"%d \u179c\u17b7\u1793\u17b6\u1791\u17b8",m:"\u1798\u17bd\u1799\u1793\u17b6\u1791\u17b8",mm:"%d \u1793\u17b6\u1791\u17b8",h:"\u1798\u17bd\u1799\u1798\u17c9\u17c4\u1784",hh:"%d \u1798\u17c9\u17c4\u1784",d:"\u1798\u17bd\u1799\u1790\u17d2\u1784\u17c3",dd:"%d \u1790\u17d2\u1784\u17c3",M:"\u1798\u17bd\u1799\u1781\u17c2",MM:"%d \u1781\u17c2",y:"\u1798\u17bd\u1799\u1786\u17d2\u1793\u17b6\u17c6",yy:"%d \u1786\u17d2\u1793\u17b6\u17c6"},dayOfMonthOrdinalParse:/\u1791\u17b8\d{1,2}/,ordinal:"\u1791\u17b8%d",preparse:function(U){return U.replace(/[\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9\u17e0]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},week:{dow:1,doy:4}})}(T(15439))},44799:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0ce7",2:"\u0ce8",3:"\u0ce9",4:"\u0cea",5:"\u0ceb",6:"\u0cec",7:"\u0ced",8:"\u0cee",9:"\u0cef",0:"\u0ce6"},w={"\u0ce7":"1","\u0ce8":"2","\u0ce9":"3","\u0cea":"4","\u0ceb":"5","\u0cec":"6","\u0ced":"7","\u0cee":"8","\u0cef":"9","\u0ce6":"0"};D.defineLocale("kn",{months:"\u0c9c\u0ca8\u0cb5\u0cb0\u0cbf_\u0cab\u0cc6\u0cac\u0ccd\u0cb0\u0cb5\u0cb0\u0cbf_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5\u0cac\u0cb0\u0ccd_\u0ca8\u0cb5\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82\u0cac\u0cb0\u0ccd".split("_"),monthsShort:"\u0c9c\u0ca8_\u0cab\u0cc6\u0cac\u0ccd\u0cb0_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5_\u0ca8\u0cb5\u0cc6\u0c82_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82".split("_"),monthsParseExact:!0,weekdays:"\u0cad\u0cbe\u0ca8\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae\u0cb5\u0cbe\u0cb0_\u0cae\u0c82\u0c97\u0cb3\u0cb5\u0cbe\u0cb0_\u0cac\u0cc1\u0ca7\u0cb5\u0cbe\u0cb0_\u0c97\u0cc1\u0cb0\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0\u0cb5\u0cbe\u0cb0_\u0cb6\u0ca8\u0cbf\u0cb5\u0cbe\u0cb0".split("_"),weekdaysShort:"\u0cad\u0cbe\u0ca8\u0cc1_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae_\u0cae\u0c82\u0c97\u0cb3_\u0cac\u0cc1\u0ca7_\u0c97\u0cc1\u0cb0\u0cc1_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0_\u0cb6\u0ca8\u0cbf".split("_"),weekdaysMin:"\u0cad\u0cbe_\u0cb8\u0cc6\u0cc2\u0cd5_\u0cae\u0c82_\u0cac\u0cc1_\u0c97\u0cc1_\u0cb6\u0cc1_\u0cb6".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c87\u0c82\u0ca6\u0cc1] LT",nextDay:"[\u0ca8\u0cbe\u0cb3\u0cc6] LT",nextWeek:"dddd, LT",lastDay:"[\u0ca8\u0cbf\u0ca8\u0ccd\u0ca8\u0cc6] LT",lastWeek:"[\u0c95\u0cc6\u0cc2\u0ca8\u0cc6\u0caf] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0ca8\u0c82\u0ca4\u0cb0",past:"%s \u0cb9\u0cbf\u0c82\u0ca6\u0cc6",s:"\u0c95\u0cc6\u0cb2\u0cb5\u0cc1 \u0c95\u0ccd\u0cb7\u0ca3\u0c97\u0cb3\u0cc1",ss:"%d \u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0cc1\u0c97\u0cb3\u0cc1",m:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",mm:"%d \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",h:"\u0c92\u0c82\u0ca6\u0cc1 \u0c97\u0c82\u0c9f\u0cc6",hh:"%d \u0c97\u0c82\u0c9f\u0cc6",d:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca6\u0cbf\u0ca8",dd:"%d \u0ca6\u0cbf\u0ca8",M:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",MM:"%d \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",y:"\u0c92\u0c82\u0ca6\u0cc1 \u0cb5\u0cb0\u0ccd\u0cb7",yy:"%d \u0cb5\u0cb0\u0ccd\u0cb7"},preparse:function(U){return U.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"===W?U<4?U:U+12:"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6"===W?U:"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8"===W?U>=10?U:U+12:"\u0cb8\u0c82\u0c9c\u0cc6"===W?U+12:void 0},meridiem:function(U,W,Y){return U<4?"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf":U<10?"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6":U<17?"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8":U<20?"\u0cb8\u0c82\u0c9c\u0cc6":"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"},dayOfMonthOrdinalParse:/\d{1,2}(\u0ca8\u0cc6\u0cd5)/,ordinal:function(U){return U+"\u0ca8\u0cc6\u0cd5"},week:{dow:0,doy:6}})}(T(15439))},13549:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ko",{months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h:mm",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY\ub144 MMMM D\uc77c",lll:"YYYY\ub144 MMMM D\uc77c A h:mm",llll:"YYYY\ub144 MMMM D\uc77c dddd A h:mm"},calendar:{sameDay:"\uc624\ub298 LT",nextDay:"\ub0b4\uc77c LT",nextWeek:"dddd LT",lastDay:"\uc5b4\uc81c LT",lastWeek:"\uc9c0\ub09c\uc8fc dddd LT",sameElse:"L"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",ss:"%d\ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"\uc77c";case"M":return w+"\uc6d4";case"w":case"W":return w+"\uc8fc";default:return w}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(w){return"\uc624\ud6c4"===w},meridiem:function(w,B,U){return w<12?"\uc624\uc804":"\uc624\ud6c4"}})}(T(15439))},91037:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},w={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"},B=["\u06a9\u0627\u0646\u0648\u0646\u06cc \u062f\u0648\u0648\u06d5\u0645","\u0634\u0648\u0628\u0627\u062a","\u0626\u0627\u0632\u0627\u0631","\u0646\u06cc\u0633\u0627\u0646","\u0626\u0627\u06cc\u0627\u0631","\u062d\u0648\u0632\u06d5\u06cc\u0631\u0627\u0646","\u062a\u06d5\u0645\u0645\u0648\u0632","\u0626\u0627\u0628","\u0626\u06d5\u06cc\u0644\u0648\u0648\u0644","\u062a\u0634\u0631\u06cc\u0646\u06cc \u06cc\u06d5\u0643\u06d5\u0645","\u062a\u0634\u0631\u06cc\u0646\u06cc \u062f\u0648\u0648\u06d5\u0645","\u0643\u0627\u0646\u0648\u0646\u06cc \u06cc\u06d5\u06a9\u06d5\u0645"];D.defineLocale("ku",{months:B,monthsShort:B,weekdays:"\u06cc\u0647\u200c\u0643\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u062f\u0648\u0648\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0633\u06ce\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0686\u0648\u0627\u0631\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u067e\u06ce\u0646\u062c\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0647\u0647\u200c\u06cc\u0646\u06cc_\u0634\u0647\u200c\u0645\u0645\u0647\u200c".split("_"),weekdaysShort:"\u06cc\u0647\u200c\u0643\u0634\u0647\u200c\u0645_\u062f\u0648\u0648\u0634\u0647\u200c\u0645_\u0633\u06ce\u0634\u0647\u200c\u0645_\u0686\u0648\u0627\u0631\u0634\u0647\u200c\u0645_\u067e\u06ce\u0646\u062c\u0634\u0647\u200c\u0645_\u0647\u0647\u200c\u06cc\u0646\u06cc_\u0634\u0647\u200c\u0645\u0645\u0647\u200c".split("_"),weekdaysMin:"\u06cc_\u062f_\u0633_\u0686_\u067e_\u0647_\u0634".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c|\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc/,isPM:function(W){return/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c/.test(W)},meridiem:function(W,Y,H){return W<12?"\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc":"\u0626\u06ce\u0648\u0627\u0631\u0647\u200c"},calendar:{sameDay:"[\u0626\u0647\u200c\u0645\u0631\u06c6 \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",nextDay:"[\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",nextWeek:"dddd [\u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",lastDay:"[\u062f\u0648\u06ce\u0646\u06ce \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",lastWeek:"dddd [\u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",sameElse:"L"},relativeTime:{future:"\u0644\u0647\u200c %s",past:"%s",s:"\u0686\u0647\u200c\u0646\u062f \u0686\u0631\u0643\u0647\u200c\u06cc\u0647\u200c\u0643",ss:"\u0686\u0631\u0643\u0647\u200c %d",m:"\u06cc\u0647\u200c\u0643 \u062e\u0648\u0644\u0647\u200c\u0643",mm:"%d \u062e\u0648\u0644\u0647\u200c\u0643",h:"\u06cc\u0647\u200c\u0643 \u0643\u0627\u062a\u0698\u0645\u06ce\u0631",hh:"%d \u0643\u0627\u062a\u0698\u0645\u06ce\u0631",d:"\u06cc\u0647\u200c\u0643 \u0695\u06c6\u0698",dd:"%d \u0695\u06c6\u0698",M:"\u06cc\u0647\u200c\u0643 \u0645\u0627\u0646\u06af",MM:"%d \u0645\u0627\u0646\u06af",y:"\u06cc\u0647\u200c\u0643 \u0633\u0627\u06b5",yy:"%d \u0633\u0627\u06b5"},preparse:function(W){return W.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(Y){return w[Y]}).replace(/\u060c/g,",")},postformat:function(W){return W.replace(/\d/g,function(Y){return x[Y]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(T(15439))},93125:function(qe,xe,T){!function(D){"use strict";var x={0:"-\u0447\u04af",1:"-\u0447\u0438",2:"-\u0447\u0438",3:"-\u0447\u04af",4:"-\u0447\u04af",5:"-\u0447\u0438",6:"-\u0447\u044b",7:"-\u0447\u0438",8:"-\u0447\u0438",9:"-\u0447\u0443",10:"-\u0447\u0443",20:"-\u0447\u044b",30:"-\u0447\u0443",40:"-\u0447\u044b",50:"-\u0447\u04af",60:"-\u0447\u044b",70:"-\u0447\u0438",80:"-\u0447\u0438",90:"-\u0447\u0443",100:"-\u0447\u04af"};D.defineLocale("ky",{months:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u0416\u0435\u043a\u0448\u0435\u043c\u0431\u0438_\u0414\u04af\u0439\u0448\u04e9\u043c\u0431\u04af_\u0428\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0428\u0430\u0440\u0448\u0435\u043c\u0431\u0438_\u0411\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0416\u0443\u043c\u0430_\u0418\u0448\u0435\u043c\u0431\u0438".split("_"),weekdaysShort:"\u0416\u0435\u043a_\u0414\u04af\u0439_\u0428\u0435\u0439_\u0428\u0430\u0440_\u0411\u0435\u0439_\u0416\u0443\u043c_\u0418\u0448\u0435".split("_"),weekdaysMin:"\u0416\u043a_\u0414\u0439_\u0428\u0439_\u0428\u0440_\u0411\u0439_\u0416\u043c_\u0418\u0448".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u04af\u043d \u0441\u0430\u0430\u0442] LT",nextDay:"[\u042d\u0440\u0442\u0435\u04a3 \u0441\u0430\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0447\u044d\u044d \u0441\u0430\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u04e9\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u043d] dddd [\u043a\u04af\u043d\u04af] [\u0441\u0430\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0438\u0447\u0438\u043d\u0434\u0435",past:"%s \u043c\u0443\u0440\u0443\u043d",s:"\u0431\u0438\u0440\u043d\u0435\u0447\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0438\u0440 \u043c\u04af\u043d\u04e9\u0442",mm:"%d \u043c\u04af\u043d\u04e9\u0442",h:"\u0431\u0438\u0440 \u0441\u0430\u0430\u0442",hh:"%d \u0441\u0430\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0438\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0438\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,ordinal:function(B){return B+(x[B]||x[B%10]||x[B>=100?100:null])},week:{dow:1,doy:7}})}(T(15439))},69586:function(qe,xe,T){!function(D){"use strict";function x(Y,H,G,$){var re={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return H?re[G][0]:re[G][1]}function U(Y){if(Y=parseInt(Y,10),isNaN(Y))return!1;if(Y<0)return!0;if(Y<10)return 4<=Y&&Y<=7;if(Y<100){var H=Y%10;return U(0===H?Y/10:H)}if(Y<1e4){for(;Y>=10;)Y/=10;return U(Y)}return U(Y/=1e3)}D.defineLocale("lb",{months:"Januar_Februar_M\xe4erz_Abr\xebll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_M\xe9indeg_D\xebnschdeg_M\xebttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M\xe9._D\xeb._M\xeb._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M\xe9_D\xeb_M\xeb_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[G\xebschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function w(Y){return U(Y.substr(0,Y.indexOf(" ")))?"a "+Y:"an "+Y},past:function B(Y){return U(Y.substr(0,Y.indexOf(" ")))?"viru "+Y:"virun "+Y},s:"e puer Sekonnen",ss:"%d Sekonnen",m:x,mm:"%d Minutten",h:x,hh:"%d Stonnen",d:x,dd:"%d Deeg",M:x,MM:"%d M\xe9int",y:x,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},32349:function(qe,xe,T){!function(D){"use strict";D.defineLocale("lo",{months:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),monthsShort:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),weekdays:"\u0ead\u0eb2\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysShort:"\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysMin:"\u0e97_\u0e88_\u0ead\u0e84_\u0e9e_\u0e9e\u0eab_\u0eaa\u0e81_\u0eaa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"\u0ea7\u0eb1\u0e99dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,isPM:function(w){return"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"===w},meridiem:function(w,B,U){return w<12?"\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2":"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"},calendar:{sameDay:"[\u0ea1\u0eb7\u0ec9\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextDay:"[\u0ea1\u0eb7\u0ec9\u0ead\u0eb7\u0ec8\u0e99\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0edc\u0ec9\u0eb2\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastDay:"[\u0ea1\u0eb7\u0ec9\u0ea7\u0eb2\u0e99\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0ec1\u0ea5\u0ec9\u0ea7\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",sameElse:"L"},relativeTime:{future:"\u0ead\u0eb5\u0e81 %s",past:"%s\u0e9c\u0ec8\u0eb2\u0e99\u0ea1\u0eb2",s:"\u0e9a\u0ecd\u0ec8\u0ec0\u0e97\u0ebb\u0ec8\u0eb2\u0ec3\u0e94\u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",ss:"%d \u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",m:"1 \u0e99\u0eb2\u0e97\u0eb5",mm:"%d \u0e99\u0eb2\u0e97\u0eb5",h:"1 \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",hh:"%d \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",d:"1 \u0ea1\u0eb7\u0ec9",dd:"%d \u0ea1\u0eb7\u0ec9",M:"1 \u0ec0\u0e94\u0eb7\u0ead\u0e99",MM:"%d \u0ec0\u0e94\u0eb7\u0ead\u0e99",y:"1 \u0e9b\u0eb5",yy:"%d \u0e9b\u0eb5"},dayOfMonthOrdinalParse:/(\u0e97\u0eb5\u0ec8)\d{1,2}/,ordinal:function(w){return"\u0e97\u0eb5\u0ec8"+w}})}(T(15439))},92400:function(qe,xe,T){!function(D){"use strict";var x={ss:"sekund\u0117_sekund\u017ei\u0173_sekundes",m:"minut\u0117_minut\u0117s_minut\u0119",mm:"minut\u0117s_minu\u010di\u0173_minutes",h:"valanda_valandos_valand\u0105",hh:"valandos_valand\u0173_valandas",d:"diena_dienos_dien\u0105",dd:"dienos_dien\u0173_dienas",M:"m\u0117nuo_m\u0117nesio_m\u0117nes\u012f",MM:"m\u0117nesiai_m\u0117nesi\u0173_m\u0117nesius",y:"metai_met\u0173_metus",yy:"metai_met\u0173_metus"};function B(G,$,re,ue){return $?W(re)[0]:ue?W(re)[1]:W(re)[2]}function U(G){return G%10==0||G>10&&G<20}function W(G){return x[G].split("_")}function Y(G,$,re,ue){var ae=G+" ";return 1===G?ae+B(0,$,re[0],ue):$?ae+(U(G)?W(re)[1]:W(re)[0]):ue?ae+W(re)[1]:ae+(U(G)?W(re)[1]:W(re)[2])}D.defineLocale("lt",{months:{format:"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),weekdaysMin:"S_P_A_T_K_Pn_\u0160".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[\u0160iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Pra\u0117jus\u012f] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie\u0161 %s",s:function w(G,$,re,ue){return $?"kelios sekund\u0117s":ue?"keli\u0173 sekund\u017ei\u0173":"kelias sekundes"},ss:Y,m:B,mm:Y,h:B,hh:Y,d:B,dd:Y,M:B,MM:Y,y:B,yy:Y},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(G){return G+"-oji"},week:{dow:1,doy:4}})}(T(15439))},39991:function(qe,xe,T){!function(D){"use strict";var x={ss:"sekundes_sekund\u0113m_sekunde_sekundes".split("_"),m:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),mm:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),h:"stundas_stund\u0101m_stunda_stundas".split("_"),hh:"stundas_stund\u0101m_stunda_stundas".split("_"),d:"dienas_dien\u0101m_diena_dienas".split("_"),dd:"dienas_dien\u0101m_diena_dienas".split("_"),M:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),MM:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function w(H,G,$){return $?G%10==1&&G%100!=11?H[2]:H[3]:G%10==1&&G%100!=11?H[0]:H[1]}function B(H,G,$){return H+" "+w(x[$],H,G)}function U(H,G,$){return w(x[$],H,G)}D.defineLocale("lv",{months:"janv\u0101ris_febru\u0101ris_marts_apr\u012blis_maijs_j\u016bnijs_j\u016blijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_j\u016bn_j\u016bl_aug_sep_okt_nov_dec".split("_"),weekdays:"sv\u0113tdiena_pirmdiena_otrdiena_tre\u0161diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[\u0160odien pulksten] LT",nextDay:"[R\u012bt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pag\u0101ju\u0161\u0101] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"p\u0113c %s",past:"pirms %s",s:function W(H,G){return G?"da\u017eas sekundes":"da\u017e\u0101m sekund\u0113m"},ss:B,m:U,mm:B,h:U,hh:B,d:U,dd:B,M:U,MM:B,y:U,yy:B},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},28477:function(qe,xe,T){!function(D){"use strict";var x={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(B,U){return 1===B?U[0]:B>=2&&B<=4?U[1]:U[2]},translate:function(B,U,W){var Y=x.words[W];return 1===W.length?U?Y[0]:Y[1]:B+" "+x.correctGrammaticalCase(B,Y)}};D.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedjelje] [u] LT","[pro\u0161log] [ponedjeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srijede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:x.translate,m:x.translate,mm:x.translate,h:x.translate,hh:x.translate,d:"dan",dd:x.translate,M:"mjesec",MM:x.translate,y:"godinu",yy:x.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},55118:function(qe,xe,T){!function(D){"use strict";D.defineLocale("mi",{months:"Kohi-t\u0101te_Hui-tanguru_Pout\u016b-te-rangi_Paenga-wh\u0101wh\u0101_Haratua_Pipiri_H\u014dngoingoi_Here-turi-k\u014dk\u0101_Mahuru_Whiringa-\u0101-nuku_Whiringa-\u0101-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_H\u014dngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"R\u0101tapu_Mane_T\u016brei_Wenerei_T\u0101ite_Paraire_H\u0101tarei".split("_"),weekdaysShort:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),weekdaysMin:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te h\u0113kona ruarua",ss:"%d h\u0113kona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},15943:function(qe,xe,T){!function(D){"use strict";D.defineLocale("mk",{months:"\u0458\u0430\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d\u0438_\u0458\u0443\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u0458\u0430\u043d_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a_\u043f\u0435\u0442\u043e\u043a_\u0441\u0430\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u0435_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u0430\u0431".split("_"),weekdaysMin:"\u043de_\u043fo_\u0432\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u0435\u043d\u0435\u0441 \u0432\u043e] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432\u043e] LT",nextWeek:"[\u0412\u043e] dddd [\u0432\u043e] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432\u043e] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0430\u0442\u0430] dddd [\u0432\u043e] LT";case 1:case 2:case 4:case 5:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0438\u043e\u0442] dddd [\u0432\u043e] LT"}},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"\u043f\u0440\u0435\u0434 %s",s:"\u043d\u0435\u043a\u043e\u043b\u043a\u0443 \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u0435\u0434\u043d\u0430 \u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0435\u0434\u0435\u043d \u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0435\u0434\u0435\u043d \u0434\u0435\u043d",dd:"%d \u0434\u0435\u043d\u0430",M:"\u0435\u0434\u0435\u043d \u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0438",y:"\u0435\u0434\u043d\u0430 \u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(w){var B=w%10,U=w%100;return 0===w?w+"-\u0435\u0432":0===U?w+"-\u0435\u043d":U>10&&U<20?w+"-\u0442\u0438":1===B?w+"-\u0432\u0438":2===B?w+"-\u0440\u0438":7===B||8===B?w+"-\u043c\u0438":w+"-\u0442\u0438"},week:{dow:1,doy:7}})}(T(15439))},13849:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ml",{months:"\u0d1c\u0d28\u0d41\u0d35\u0d30\u0d3f_\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41\u0d35\u0d30\u0d3f_\u0d2e\u0d3e\u0d7c\u0d1a\u0d4d\u0d1a\u0d4d_\u0d0f\u0d2a\u0d4d\u0d30\u0d3f\u0d7d_\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48_\u0d13\u0d17\u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4d_\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31\u0d02\u0d2c\u0d7c_\u0d12\u0d15\u0d4d\u0d1f\u0d4b\u0d2c\u0d7c_\u0d28\u0d35\u0d02\u0d2c\u0d7c_\u0d21\u0d3f\u0d38\u0d02\u0d2c\u0d7c".split("_"),monthsShort:"\u0d1c\u0d28\u0d41._\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41._\u0d2e\u0d3e\u0d7c._\u0d0f\u0d2a\u0d4d\u0d30\u0d3f._\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48._\u0d13\u0d17._\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31._\u0d12\u0d15\u0d4d\u0d1f\u0d4b._\u0d28\u0d35\u0d02._\u0d21\u0d3f\u0d38\u0d02.".split("_"),monthsParseExact:!0,weekdays:"\u0d1e\u0d3e\u0d2f\u0d31\u0d3e\u0d34\u0d4d\u0d1a_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d33\u0d3e\u0d34\u0d4d\u0d1a_\u0d1a\u0d4a\u0d35\u0d4d\u0d35\u0d3e\u0d34\u0d4d\u0d1a_\u0d2c\u0d41\u0d27\u0d28\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a_\u0d36\u0d28\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a".split("_"),weekdaysShort:"\u0d1e\u0d3e\u0d2f\u0d7c_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d7e_\u0d1a\u0d4a\u0d35\u0d4d\u0d35_\u0d2c\u0d41\u0d27\u0d7b_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d02_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f_\u0d36\u0d28\u0d3f".split("_"),weekdaysMin:"\u0d1e\u0d3e_\u0d24\u0d3f_\u0d1a\u0d4a_\u0d2c\u0d41_\u0d35\u0d4d\u0d2f\u0d3e_\u0d35\u0d46_\u0d36".split("_"),longDateFormat:{LT:"A h:mm -\u0d28\u0d41",LTS:"A h:mm:ss -\u0d28\u0d41",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -\u0d28\u0d41",LLLL:"dddd, D MMMM YYYY, A h:mm -\u0d28\u0d41"},calendar:{sameDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d4d] LT",nextDay:"[\u0d28\u0d3e\u0d33\u0d46] LT",nextWeek:"dddd, LT",lastDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d32\u0d46] LT",lastWeek:"[\u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d",past:"%s \u0d2e\u0d41\u0d7b\u0d2a\u0d4d",s:"\u0d05\u0d7d\u0d2a \u0d28\u0d3f\u0d2e\u0d3f\u0d37\u0d19\u0d4d\u0d19\u0d7e",ss:"%d \u0d38\u0d46\u0d15\u0d4d\u0d15\u0d7b\u0d21\u0d4d",m:"\u0d12\u0d30\u0d41 \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",mm:"%d \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",h:"\u0d12\u0d30\u0d41 \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",hh:"%d \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",d:"\u0d12\u0d30\u0d41 \u0d26\u0d3f\u0d35\u0d38\u0d02",dd:"%d \u0d26\u0d3f\u0d35\u0d38\u0d02",M:"\u0d12\u0d30\u0d41 \u0d2e\u0d3e\u0d38\u0d02",MM:"%d \u0d2e\u0d3e\u0d38\u0d02",y:"\u0d12\u0d30\u0d41 \u0d35\u0d7c\u0d37\u0d02",yy:"%d \u0d35\u0d7c\u0d37\u0d02"},meridiemParse:/\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,meridiemHour:function(w,B){return 12===w&&(w=0),"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"===B&&w>=4||"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d"===B||"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02"===B?w+12:w},meridiem:function(w,B,U){return w<4?"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f":w<12?"\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46":w<17?"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d":w<20?"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02":"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"}})}(T(15439))},31977:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){switch(W){case"s":return U?"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434":"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d";case"ss":return B+(U?" \u0441\u0435\u043a\u0443\u043d\u0434":" \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d");case"m":case"mm":return B+(U?" \u043c\u0438\u043d\u0443\u0442":" \u043c\u0438\u043d\u0443\u0442\u044b\u043d");case"h":case"hh":return B+(U?" \u0446\u0430\u0433":" \u0446\u0430\u0433\u0438\u0439\u043d");case"d":case"dd":return B+(U?" \u04e9\u0434\u04e9\u0440":" \u04e9\u0434\u0440\u0438\u0439\u043d");case"M":case"MM":return B+(U?" \u0441\u0430\u0440":" \u0441\u0430\u0440\u044b\u043d");case"y":case"yy":return B+(U?" \u0436\u0438\u043b":" \u0436\u0438\u043b\u0438\u0439\u043d");default:return B}}D.defineLocale("mn",{months:"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),monthsShort:"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),monthsParseExact:!0,weekdays:"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),weekdaysShort:"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),weekdaysMin:"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D",LLL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm",LLLL:"dddd, YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm"},meridiemParse:/\u04ae\u04e8|\u04ae\u0425/i,isPM:function(B){return"\u04ae\u0425"===B},meridiem:function(B,U,W){return B<12?"\u04ae\u04e8":"\u04ae\u0425"},calendar:{sameDay:"[\u04e8\u043d\u04e9\u04e9\u0434\u04e9\u0440] LT",nextDay:"[\u041c\u0430\u0440\u0433\u0430\u0430\u0448] LT",nextWeek:"[\u0418\u0440\u044d\u0445] dddd LT",lastDay:"[\u04e8\u0447\u0438\u0433\u0434\u04e9\u0440] LT",lastWeek:"[\u04e8\u043d\u0433\u04e9\u0440\u0441\u04e9\u043d] dddd LT",sameElse:"L"},relativeTime:{future:"%s \u0434\u0430\u0440\u0430\u0430",past:"%s \u04e9\u043c\u043d\u04e9",s:x,ss:x,m:x,mm:x,h:x,hh:x,d:x,dd:x,M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2} \u04e9\u0434\u04e9\u0440/,ordinal:function(B,U){switch(U){case"d":case"D":case"DDD":return B+" \u04e9\u0434\u04e9\u0440";default:return B}}})}(T(15439))},66184:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},w={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};function B(W,Y,H,G){var $="";if(Y)switch(H){case"s":$="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926";break;case"ss":$="%d \u0938\u0947\u0915\u0902\u0926";break;case"m":$="\u090f\u0915 \u092e\u093f\u0928\u093f\u091f";break;case"mm":$="%d \u092e\u093f\u0928\u093f\u091f\u0947";break;case"h":$="\u090f\u0915 \u0924\u093e\u0938";break;case"hh":$="%d \u0924\u093e\u0938";break;case"d":$="\u090f\u0915 \u0926\u093f\u0935\u0938";break;case"dd":$="%d \u0926\u093f\u0935\u0938";break;case"M":$="\u090f\u0915 \u092e\u0939\u093f\u0928\u093e";break;case"MM":$="%d \u092e\u0939\u093f\u0928\u0947";break;case"y":$="\u090f\u0915 \u0935\u0930\u094d\u0937";break;case"yy":$="%d \u0935\u0930\u094d\u0937\u0947"}else switch(H){case"s":$="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"ss":$="%d \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"m":$="\u090f\u0915\u093e \u092e\u093f\u0928\u093f\u091f\u093e";break;case"mm":$="%d \u092e\u093f\u0928\u093f\u091f\u093e\u0902";break;case"h":$="\u090f\u0915\u093e \u0924\u093e\u0938\u093e";break;case"hh":$="%d \u0924\u093e\u0938\u093e\u0902";break;case"d":$="\u090f\u0915\u093e \u0926\u093f\u0935\u0938\u093e";break;case"dd":$="%d \u0926\u093f\u0935\u0938\u093e\u0902";break;case"M":$="\u090f\u0915\u093e \u092e\u0939\u093f\u0928\u094d\u092f\u093e";break;case"MM":$="%d \u092e\u0939\u093f\u0928\u094d\u092f\u093e\u0902";break;case"y":$="\u090f\u0915\u093e \u0935\u0930\u094d\u0937\u093e";break;case"yy":$="%d \u0935\u0930\u094d\u0937\u093e\u0902"}return $.replace(/%d/i,W)}D.defineLocale("mr",{months:"\u091c\u093e\u0928\u0947\u0935\u093e\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u093e\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u090f\u092a\u094d\u0930\u093f\u0932_\u092e\u0947_\u091c\u0942\u0928_\u091c\u0941\u0932\u0948_\u0911\u0917\u0938\u094d\u091f_\u0938\u092a\u094d\u091f\u0947\u0902\u092c\u0930_\u0911\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u0935\u094d\u0939\u0947\u0902\u092c\u0930_\u0921\u093f\u0938\u0947\u0902\u092c\u0930".split("_"),monthsShort:"\u091c\u093e\u0928\u0947._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a._\u090f\u092a\u094d\u0930\u093f._\u092e\u0947._\u091c\u0942\u0928._\u091c\u0941\u0932\u0948._\u0911\u0917._\u0938\u092a\u094d\u091f\u0947\u0902._\u0911\u0915\u094d\u091f\u094b._\u0928\u094b\u0935\u094d\u0939\u0947\u0902._\u0921\u093f\u0938\u0947\u0902.".split("_"),monthsParseExact:!0,weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0933\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0933_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u0935\u093e\u091c\u0924\u093e",LTS:"A h:mm:ss \u0935\u093e\u091c\u0924\u093e",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e",LLLL:"dddd, D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0909\u0926\u094d\u092f\u093e] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u093e\u0932] LT",lastWeek:"[\u092e\u093e\u0917\u0940\u0932] dddd, LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u0927\u094d\u092f\u0947",past:"%s\u092a\u0942\u0930\u094d\u0935\u0940",s:B,ss:B,m:B,mm:B,h:B,hh:B,d:B,dd:B,M:B,MM:B,y:B,yy:B},preparse:function(W){return W.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(Y){return w[Y]})},postformat:function(W){return W.replace(/\d/g,function(Y){return x[Y]})},meridiemParse:/\u092a\u0939\u093e\u091f\u0947|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940|\u0930\u093e\u0924\u094d\u0930\u0940/,meridiemHour:function(W,Y){return 12===W&&(W=0),"\u092a\u0939\u093e\u091f\u0947"===Y||"\u0938\u0915\u093e\u0933\u0940"===Y?W:"\u0926\u0941\u092a\u093e\u0930\u0940"===Y||"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940"===Y||"\u0930\u093e\u0924\u094d\u0930\u0940"===Y?W>=12?W:W+12:void 0},meridiem:function(W,Y,H){return W>=0&&W<6?"\u092a\u0939\u093e\u091f\u0947":W<12?"\u0938\u0915\u093e\u0933\u0940":W<17?"\u0926\u0941\u092a\u093e\u0930\u0940":W<20?"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940":"\u0930\u093e\u0924\u094d\u0930\u0940"},week:{dow:0,doy:6}})}(T(15439))},64524:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(w,B){return 12===w&&(w=0),"pagi"===B?w:"tengahari"===B?w>=11?w:w+12:"petang"===B||"malam"===B?w+12:void 0},meridiem:function(w,B,U){return w<11?"pagi":w<15?"tengahari":w<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(T(15439))},70485:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(w,B){return 12===w&&(w=0),"pagi"===B?w:"tengahari"===B?w>=11?w:w+12:"petang"===B||"malam"===B?w+12:void 0},meridiem:function(w,B,U){return w<11?"pagi":w<15?"tengahari":w<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(T(15439))},36681:function(qe,xe,T){!function(D){"use strict";D.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_\u0120unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Di\u010bembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_\u0120un_Lul_Aww_Set_Ott_Nov_Di\u010b".split("_"),weekdays:"Il-\u0126add_It-Tnejn_It-Tlieta_L-Erbg\u0127a_Il-\u0126amis_Il-\u0120img\u0127a_Is-Sibt".split("_"),weekdaysShort:"\u0126ad_Tne_Tli_Erb_\u0126am_\u0120im_Sib".split("_"),weekdaysMin:"\u0126a_Tn_Tl_Er_\u0126a_\u0120i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[G\u0127ada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera\u0127 fil-]LT",lastWeek:"dddd [li g\u0127adda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f\u2019 %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"sieg\u0127a",hh:"%d sieg\u0127at",d:"\u0121urnata",dd:"%d \u0121ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},52024:function(qe,xe,T){!function(D){"use strict";var x={1:"\u1041",2:"\u1042",3:"\u1043",4:"\u1044",5:"\u1045",6:"\u1046",7:"\u1047",8:"\u1048",9:"\u1049",0:"\u1040"},w={"\u1041":"1","\u1042":"2","\u1043":"3","\u1044":"4","\u1045":"5","\u1046":"6","\u1047":"7","\u1048":"8","\u1049":"9","\u1040":"0"};D.defineLocale("my",{months:"\u1007\u1014\u103a\u1014\u101d\u102b\u101b\u102e_\u1016\u1031\u1016\u1031\u102c\u103a\u101d\u102b\u101b\u102e_\u1019\u1010\u103a_\u1027\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u1007\u1030\u101c\u102d\u102f\u1004\u103a_\u101e\u103c\u1002\u102f\u1010\u103a_\u1005\u1000\u103a\u1010\u1004\u103a\u1018\u102c_\u1021\u1031\u102c\u1000\u103a\u1010\u102d\u102f\u1018\u102c_\u1014\u102d\u102f\u101d\u1004\u103a\u1018\u102c_\u1012\u102e\u1007\u1004\u103a\u1018\u102c".split("_"),monthsShort:"\u1007\u1014\u103a_\u1016\u1031_\u1019\u1010\u103a_\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u101c\u102d\u102f\u1004\u103a_\u101e\u103c_\u1005\u1000\u103a_\u1021\u1031\u102c\u1000\u103a_\u1014\u102d\u102f_\u1012\u102e".split("_"),weekdays:"\u1010\u1014\u1004\u103a\u1039\u1002\u1014\u103d\u1031_\u1010\u1014\u1004\u103a\u1039\u101c\u102c_\u1021\u1004\u103a\u1039\u1002\u102b_\u1017\u102f\u1012\u1039\u1013\u101f\u1030\u1038_\u1000\u103c\u102c\u101e\u1015\u1010\u1031\u1038_\u101e\u1031\u102c\u1000\u103c\u102c_\u1005\u1014\u1031".split("_"),weekdaysShort:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),weekdaysMin:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u101a\u1014\u1031.] LT [\u1019\u103e\u102c]",nextDay:"[\u1019\u1014\u1000\u103a\u1016\u103c\u1014\u103a] LT [\u1019\u103e\u102c]",nextWeek:"dddd LT [\u1019\u103e\u102c]",lastDay:"[\u1019\u1014\u1031.\u1000] LT [\u1019\u103e\u102c]",lastWeek:"[\u1015\u103c\u102e\u1038\u1001\u1032\u1037\u101e\u1031\u102c] dddd LT [\u1019\u103e\u102c]",sameElse:"L"},relativeTime:{future:"\u101c\u102c\u1019\u100a\u103a\u1037 %s \u1019\u103e\u102c",past:"\u101c\u103d\u1014\u103a\u1001\u1032\u1037\u101e\u1031\u102c %s \u1000",s:"\u1005\u1000\u1039\u1000\u1014\u103a.\u1021\u1014\u100a\u103a\u1038\u1004\u101a\u103a",ss:"%d \u1005\u1000\u1039\u1000\u1014\u1037\u103a",m:"\u1010\u1005\u103a\u1019\u102d\u1014\u1005\u103a",mm:"%d \u1019\u102d\u1014\u1005\u103a",h:"\u1010\u1005\u103a\u1014\u102c\u101b\u102e",hh:"%d \u1014\u102c\u101b\u102e",d:"\u1010\u1005\u103a\u101b\u1000\u103a",dd:"%d \u101b\u1000\u103a",M:"\u1010\u1005\u103a\u101c",MM:"%d \u101c",y:"\u1010\u1005\u103a\u1014\u103e\u1005\u103a",yy:"%d \u1014\u103e\u1005\u103a"},preparse:function(U){return U.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},week:{dow:1,doy:4}})}(T(15439))},42688:function(qe,xe,T){!function(D){"use strict";D.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},68914:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},w={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};D.defineLocale("ne",{months:"\u091c\u0928\u0935\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f\u0932_\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0937\u094d\u091f_\u0938\u0947\u092a\u094d\u091f\u0947\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u092d\u0947\u092e\u094d\u092c\u0930_\u0921\u093f\u0938\u0947\u092e\u094d\u092c\u0930".split("_"),monthsShort:"\u091c\u0928._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f._\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908._\u0905\u0917._\u0938\u0947\u092a\u094d\u091f._\u0905\u0915\u094d\u091f\u094b._\u0928\u094b\u092d\u0947._\u0921\u093f\u0938\u0947.".split("_"),monthsParseExact:!0,weekdays:"\u0906\u0907\u0924\u092c\u093e\u0930_\u0938\u094b\u092e\u092c\u093e\u0930_\u092e\u0919\u094d\u0917\u0932\u092c\u093e\u0930_\u092c\u0941\u0927\u092c\u093e\u0930_\u092c\u093f\u0939\u093f\u092c\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u092c\u093e\u0930_\u0936\u0928\u093f\u092c\u093e\u0930".split("_"),weekdaysShort:"\u0906\u0907\u0924._\u0938\u094b\u092e._\u092e\u0919\u094d\u0917\u0932._\u092c\u0941\u0927._\u092c\u093f\u0939\u093f._\u0936\u0941\u0915\u094d\u0930._\u0936\u0928\u093f.".split("_"),weekdaysMin:"\u0906._\u0938\u094b._\u092e\u0902._\u092c\u0941._\u092c\u093f._\u0936\u0941._\u0936.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A\u0915\u094b h:mm \u092c\u091c\u0947",LTS:"A\u0915\u094b h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947"},preparse:function(U){return U.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u0930\u093e\u0924\u093f"===W?U<4?U:U+12:"\u092c\u093f\u0939\u093e\u0928"===W?U:"\u0926\u093f\u0909\u0901\u0938\u094b"===W?U>=10?U:U+12:"\u0938\u093e\u0901\u091d"===W?U+12:void 0},meridiem:function(U,W,Y){return U<3?"\u0930\u093e\u0924\u093f":U<12?"\u092c\u093f\u0939\u093e\u0928":U<16?"\u0926\u093f\u0909\u0901\u0938\u094b":U<20?"\u0938\u093e\u0901\u091d":"\u0930\u093e\u0924\u093f"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u092d\u094b\u0932\u093f] LT",nextWeek:"[\u0906\u0909\u0901\u0926\u094b] dddd[,] LT",lastDay:"[\u0939\u093f\u091c\u094b] LT",lastWeek:"[\u0917\u090f\u0915\u094b] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u093e",past:"%s \u0905\u0917\u093e\u0921\u093f",s:"\u0915\u0947\u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0947\u0923\u094d\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u0947\u091f",mm:"%d \u092e\u093f\u0928\u0947\u091f",h:"\u090f\u0915 \u0918\u0923\u094d\u091f\u093e",hh:"%d \u0918\u0923\u094d\u091f\u093e",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u093f\u0928\u093e",MM:"%d \u092e\u0939\u093f\u0928\u093e",y:"\u090f\u0915 \u092c\u0930\u094d\u0937",yy:"%d \u092c\u0930\u094d\u0937"},week:{dow:0,doy:6}})}(T(15439))},52272:function(qe,xe,T){!function(D){"use strict";var x="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),w="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),B=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],U=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;D.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(Y){return Y+(1===Y||8===Y||Y>=20?"ste":"de")},week:{dow:1,doy:4}})}(T(15439))},11758:function(qe,xe,T){!function(D){"use strict";var x="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),w="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),B=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],U=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;D.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(Y,H){return Y?/-MMM-/.test(H)?w[Y.month()]:x[Y.month()]:x},monthsRegex:U,monthsShortRegex:U,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",w:"\xe9\xe9n week",ww:"%d weken",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(Y){return Y+(1===Y||8===Y||Y>=20?"ste":"de")},week:{dow:1,doy:4}})}(T(15439))},41510:function(qe,xe,T){!function(D){"use strict";D.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_m\xe5ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m\xe5._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m\xe5_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I g\xe5r klokka] LT",lastWeek:"[F\xf8reg\xe5ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein m\xe5nad",MM:"%d m\xe5nader",y:"eit \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},52797:function(qe,xe,T){!function(D){"use strict";D.defineLocale("oc-lnc",{months:{standalone:"geni\xe8r_febri\xe8r_mar\xe7_abril_mai_junh_julhet_agost_setembre_oct\xf2bre_novembre_decembre".split("_"),format:"de geni\xe8r_de febri\xe8r_de mar\xe7_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'oct\xf2bre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar\xe7_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dim\xe8cres_dij\xf2us_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[u\xe8i a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[i\xe8r a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu\xed %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(w,B){var U=1===w?"r":2===w?"n":3===w?"r":4===w?"t":"\xe8";return("w"===B||"W"===B)&&(U="a"),w+U},week:{dow:1,doy:4}})}(T(15439))},37944:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0a67",2:"\u0a68",3:"\u0a69",4:"\u0a6a",5:"\u0a6b",6:"\u0a6c",7:"\u0a6d",8:"\u0a6e",9:"\u0a6f",0:"\u0a66"},w={"\u0a67":"1","\u0a68":"2","\u0a69":"3","\u0a6a":"4","\u0a6b":"5","\u0a6c":"6","\u0a6d":"7","\u0a6e":"8","\u0a6f":"9","\u0a66":"0"};D.defineLocale("pa-in",{months:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),monthsShort:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),weekdays:"\u0a10\u0a24\u0a35\u0a3e\u0a30_\u0a38\u0a4b\u0a2e\u0a35\u0a3e\u0a30_\u0a2e\u0a70\u0a17\u0a32\u0a35\u0a3e\u0a30_\u0a2c\u0a41\u0a27\u0a35\u0a3e\u0a30_\u0a35\u0a40\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a41\u0a71\u0a15\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a28\u0a40\u0a1a\u0a30\u0a35\u0a3e\u0a30".split("_"),weekdaysShort:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),weekdaysMin:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),longDateFormat:{LT:"A h:mm \u0a35\u0a1c\u0a47",LTS:"A h:mm:ss \u0a35\u0a1c\u0a47",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47",LLLL:"dddd, D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47"},calendar:{sameDay:"[\u0a05\u0a1c] LT",nextDay:"[\u0a15\u0a32] LT",nextWeek:"[\u0a05\u0a17\u0a32\u0a3e] dddd, LT",lastDay:"[\u0a15\u0a32] LT",lastWeek:"[\u0a2a\u0a3f\u0a1b\u0a32\u0a47] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0a35\u0a3f\u0a71\u0a1a",past:"%s \u0a2a\u0a3f\u0a1b\u0a32\u0a47",s:"\u0a15\u0a41\u0a1d \u0a38\u0a15\u0a3f\u0a70\u0a1f",ss:"%d \u0a38\u0a15\u0a3f\u0a70\u0a1f",m:"\u0a07\u0a15 \u0a2e\u0a3f\u0a70\u0a1f",mm:"%d \u0a2e\u0a3f\u0a70\u0a1f",h:"\u0a07\u0a71\u0a15 \u0a18\u0a70\u0a1f\u0a3e",hh:"%d \u0a18\u0a70\u0a1f\u0a47",d:"\u0a07\u0a71\u0a15 \u0a26\u0a3f\u0a28",dd:"%d \u0a26\u0a3f\u0a28",M:"\u0a07\u0a71\u0a15 \u0a2e\u0a39\u0a40\u0a28\u0a3e",MM:"%d \u0a2e\u0a39\u0a40\u0a28\u0a47",y:"\u0a07\u0a71\u0a15 \u0a38\u0a3e\u0a32",yy:"%d \u0a38\u0a3e\u0a32"},preparse:function(U){return U.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,meridiemHour:function(U,W){return 12===U&&(U=0),"\u0a30\u0a3e\u0a24"===W?U<4?U:U+12:"\u0a38\u0a35\u0a47\u0a30"===W?U:"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30"===W?U>=10?U:U+12:"\u0a38\u0a3c\u0a3e\u0a2e"===W?U+12:void 0},meridiem:function(U,W,Y){return U<4?"\u0a30\u0a3e\u0a24":U<10?"\u0a38\u0a35\u0a47\u0a30":U<17?"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30":U<20?"\u0a38\u0a3c\u0a3e\u0a2e":"\u0a30\u0a3e\u0a24"},week:{dow:0,doy:6}})}(T(15439))},1605:function(qe,xe,T){!function(D){"use strict";var x="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),w="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),B=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa\u017a/i,/^lis/i,/^gru/i];function U(H){return H%10<5&&H%10>1&&~~(H/10)%10!=1}function W(H,G,$){var re=H+" ";switch($){case"ss":return re+(U(H)?"sekundy":"sekund");case"m":return G?"minuta":"minut\u0119";case"mm":return re+(U(H)?"minuty":"minut");case"h":return G?"godzina":"godzin\u0119";case"hh":return re+(U(H)?"godziny":"godzin");case"ww":return re+(U(H)?"tygodnie":"tygodni");case"MM":return re+(U(H)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return re+(U(H)?"lata":"lat")}}D.defineLocale("pl",{months:function(H,G){return H?/D MMMM/.test(G)?w[H.month()]:x[H.month()]:x},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),monthsParse:B,longMonthsParse:B,shortMonthsParse:B,weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015b o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel\u0119 o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W \u015brod\u0119 o] LT";case 6:return"[W sobot\u0119 o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:W,m:W,mm:W,h:W,hh:W,d:"1 dzie\u0144",dd:"%d dni",w:"tydzie\u0144",ww:W,M:"miesi\u0105c",MM:W,y:"rok",yy:W},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},73840:function(qe,xe,T){!function(D){"use strict";D.defineLocale("pt-br",{months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_ter\xe7a-feira_quarta-feira_quinta-feira_sexta-feira_s\xe1bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_s\xe1b".split("_"),weekdaysMin:"do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",invalidDate:"Data inv\xe1lida"})}(T(15439))},54225:function(qe,xe,T){!function(D){"use strict";D.defineLocale("pt",{months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(T(15439))},45128:function(qe,xe,T){!function(D){"use strict";function x(B,U,W){var H=" ";return(B%100>=20||B>=100&&B%100==0)&&(H=" de "),B+H+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"s\u0103pt\u0103m\xe2ni",MM:"luni",yy:"ani"}[W]}D.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[m\xe2ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s \xeen urm\u0103",s:"c\xe2teva secunde",ss:x,m:"un minut",mm:x,h:"o or\u0103",hh:x,d:"o zi",dd:x,w:"o s\u0103pt\u0103m\xe2n\u0103",ww:x,M:"o lun\u0103",MM:x,y:"un an",yy:x},week:{dow:1,doy:7}})}(T(15439))},35127:function(qe,xe,T){!function(D){"use strict";function w(W,Y,H){return"m"===H?Y?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":W+" "+function x(W,Y){var H=W.split("_");return Y%10==1&&Y%100!=11?H[0]:Y%10>=2&&Y%10<=4&&(Y%100<10||Y%100>=20)?H[1]:H[2]}({ss:Y?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:Y?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",ww:"\u043d\u0435\u0434\u0435\u043b\u044f_\u043d\u0435\u0434\u0435\u043b\u0438_\u043d\u0435\u0434\u0435\u043b\u044c",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"}[H],+W)}var B=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];D.defineLocale("ru",{months:{format:"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),standalone:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_")},monthsShort:{format:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),standalone:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_")},weekdays:{standalone:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),format:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?] ?dddd/},weekdaysShort:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),monthsParse:B,longMonthsParse:B,shortMonthsParse:B,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., H:mm",LLLL:"dddd, D MMMM YYYY \u0433., H:mm"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430, \u0432] LT",nextWeek:function(W){if(W.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e] dddd, [\u0432] LT"}},lastWeek:function(W){if(W.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd, [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",ss:w,m:w,mm:w,h:"\u0447\u0430\u0441",hh:w,d:"\u0434\u0435\u043d\u044c",dd:w,w:"\u043d\u0435\u0434\u0435\u043b\u044f",ww:w,M:"\u043c\u0435\u0441\u044f\u0446",MM:w,y:"\u0433\u043e\u0434",yy:w},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(W){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(W)},meridiem:function(W,Y,H){return W<4?"\u043d\u043e\u0447\u0438":W<12?"\u0443\u0442\u0440\u0430":W<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(W,Y){switch(Y){case"M":case"d":case"DDD":return W+"-\u0439";case"D":return W+"-\u0433\u043e";case"w":case"W":return W+"-\u044f";default:return W}},week:{dow:1,doy:4}})}(T(15439))},32525:function(qe,xe,T){!function(D){"use strict";var x=["\u062c\u0646\u0648\u0631\u064a","\u0641\u064a\u0628\u0631\u0648\u0631\u064a","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u064a\u0644","\u0645\u0626\u064a","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0621\u0650","\u0622\u06af\u0633\u067d","\u0633\u064a\u067e\u067d\u0645\u0628\u0631","\u0622\u06aa\u067d\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u068a\u0633\u0645\u0628\u0631"],w=["\u0622\u0686\u0631","\u0633\u0648\u0645\u0631","\u0627\u06b1\u0627\u0631\u0648","\u0627\u0631\u0628\u0639","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639","\u0687\u0646\u0687\u0631"];D.defineLocale("sd",{months:x,monthsShort:x,weekdays:w,weekdaysShort:w,weekdaysMin:w,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(U){return"\u0634\u0627\u0645"===U},meridiem:function(U,W,Y){return U<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0627\u0684] LT",nextDay:"[\u0633\u0680\u0627\u06bb\u064a] LT",nextWeek:"dddd [\u0627\u06b3\u064a\u0646 \u0647\u0641\u062a\u064a \u062a\u064a] LT",lastDay:"[\u06aa\u0627\u0644\u0647\u0647] LT",lastWeek:"[\u06af\u0632\u0631\u064a\u0644 \u0647\u0641\u062a\u064a] dddd [\u062a\u064a] LT",sameElse:"L"},relativeTime:{future:"%s \u067e\u0648\u0621",past:"%s \u0627\u06b3",s:"\u0686\u0646\u062f \u0633\u064a\u06aa\u0646\u068a",ss:"%d \u0633\u064a\u06aa\u0646\u068a",m:"\u0647\u06aa \u0645\u0646\u067d",mm:"%d \u0645\u0646\u067d",h:"\u0647\u06aa \u06aa\u0644\u0627\u06aa",hh:"%d \u06aa\u0644\u0627\u06aa",d:"\u0647\u06aa \u068f\u064a\u0646\u0647\u0646",dd:"%d \u068f\u064a\u0646\u0647\u0646",M:"\u0647\u06aa \u0645\u0647\u064a\u0646\u0648",MM:"%d \u0645\u0647\u064a\u0646\u0627",y:"\u0647\u06aa \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(U){return U.replace(/\u060c/g,",")},postformat:function(U){return U.replace(/,/g,"\u060c")},week:{dow:1,doy:4}})}(T(15439))},59893:function(qe,xe,T){!function(D){"use strict";D.defineLocale("se",{months:"o\u0111\u0111ajagem\xe1nnu_guovvam\xe1nnu_njuk\u010dam\xe1nnu_cuo\u014bom\xe1nnu_miessem\xe1nnu_geassem\xe1nnu_suoidnem\xe1nnu_borgem\xe1nnu_\u010dak\u010dam\xe1nnu_golggotm\xe1nnu_sk\xe1bmam\xe1nnu_juovlam\xe1nnu".split("_"),monthsShort:"o\u0111\u0111j_guov_njuk_cuo_mies_geas_suoi_borg_\u010dak\u010d_golg_sk\xe1b_juov".split("_"),weekdays:"sotnabeaivi_vuoss\xe1rga_ma\u014b\u014beb\xe1rga_gaskavahkku_duorastat_bearjadat_l\xe1vvardat".split("_"),weekdaysShort:"sotn_vuos_ma\u014b_gask_duor_bear_l\xe1v".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s gea\u017ees",past:"ma\u014bit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta m\xe1nnu",MM:"%d m\xe1nut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},33123:function(qe,xe,T){!function(D){"use strict";D.defineLocale("si",{months:"\u0da2\u0db1\u0dc0\u0dcf\u0dbb\u0dd2_\u0db4\u0dd9\u0db6\u0dbb\u0dc0\u0dcf\u0dbb\u0dd2_\u0db8\u0dcf\u0dbb\u0dca\u0dad\u0dd4_\u0d85\u0db4\u0dca\u200d\u0dbb\u0dda\u0dbd\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd\u0dc3\u0dca\u0dad\u0dd4_\u0dc3\u0dd0\u0db4\u0dca\u0dad\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0d94\u0d9a\u0dca\u0dad\u0ddd\u0db6\u0dbb\u0dca_\u0db1\u0ddc\u0dc0\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0daf\u0dd9\u0dc3\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca".split("_"),monthsShort:"\u0da2\u0db1_\u0db4\u0dd9\u0db6_\u0db8\u0dcf\u0dbb\u0dca_\u0d85\u0db4\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd_\u0dc3\u0dd0\u0db4\u0dca_\u0d94\u0d9a\u0dca_\u0db1\u0ddc\u0dc0\u0dd0_\u0daf\u0dd9\u0dc3\u0dd0".split("_"),weekdays:"\u0d89\u0dbb\u0dd2\u0daf\u0dcf_\u0dc3\u0db3\u0dd4\u0daf\u0dcf_\u0d85\u0d9f\u0dc4\u0dbb\u0dd4\u0dc0\u0dcf\u0daf\u0dcf_\u0db6\u0daf\u0dcf\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4\u0dc3\u0dca\u0db4\u0dad\u0dd2\u0db1\u0dca\u0daf\u0dcf_\u0dc3\u0dd2\u0d9a\u0dd4\u0dbb\u0dcf\u0daf\u0dcf_\u0dc3\u0dd9\u0db1\u0dc3\u0dd4\u0dbb\u0dcf\u0daf\u0dcf".split("_"),weekdaysShort:"\u0d89\u0dbb\u0dd2_\u0dc3\u0db3\u0dd4_\u0d85\u0d9f_\u0db6\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4_\u0dc3\u0dd2\u0d9a\u0dd4_\u0dc3\u0dd9\u0db1".split("_"),weekdaysMin:"\u0d89_\u0dc3_\u0d85_\u0db6_\u0db6\u0dca\u200d\u0dbb_\u0dc3\u0dd2_\u0dc3\u0dd9".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [\u0dc0\u0dd0\u0db1\u0dd2] dddd, a h:mm:ss"},calendar:{sameDay:"[\u0d85\u0daf] LT[\u0da7]",nextDay:"[\u0dc4\u0dd9\u0da7] LT[\u0da7]",nextWeek:"dddd LT[\u0da7]",lastDay:"[\u0d8a\u0dba\u0dda] LT[\u0da7]",lastWeek:"[\u0db4\u0dc3\u0dd4\u0d9c\u0dd2\u0dba] dddd LT[\u0da7]",sameElse:"L"},relativeTime:{future:"%s\u0d9a\u0dd2\u0db1\u0dca",past:"%s\u0d9a\u0da7 \u0db4\u0dd9\u0dbb",s:"\u0dad\u0dad\u0dca\u0db4\u0dbb \u0d9a\u0dd2\u0dc4\u0dd2\u0db4\u0dba",ss:"\u0dad\u0dad\u0dca\u0db4\u0dbb %d",m:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4\u0dc0",mm:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4 %d",h:"\u0db4\u0dd0\u0dba",hh:"\u0db4\u0dd0\u0dba %d",d:"\u0daf\u0dd2\u0db1\u0dba",dd:"\u0daf\u0dd2\u0db1 %d",M:"\u0db8\u0dcf\u0dc3\u0dba",MM:"\u0db8\u0dcf\u0dc3 %d",y:"\u0dc0\u0dc3\u0dbb",yy:"\u0dc0\u0dc3\u0dbb %d"},dayOfMonthOrdinalParse:/\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,ordinal:function(w){return w+" \u0dc0\u0dd0\u0db1\u0dd2"},meridiemParse:/\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,isPM:function(w){return"\u0db4.\u0dc0."===w||"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4"===w},meridiem:function(w,B,U){return w>11?U?"\u0db4.\u0dc0.":"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4":U?"\u0db4\u0dd9.\u0dc0.":"\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4"}})}(T(15439))},59635:function(qe,xe,T){!function(D){"use strict";var x="janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),w="jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_");function B(Y){return Y>1&&Y<5}function U(Y,H,G,$){var re=Y+" ";switch(G){case"s":return H||$?"p\xe1r sek\xfand":"p\xe1r sekundami";case"ss":return H||$?re+(B(Y)?"sekundy":"sek\xfand"):re+"sekundami";case"m":return H?"min\xfata":$?"min\xfatu":"min\xfatou";case"mm":return H||$?re+(B(Y)?"min\xfaty":"min\xfat"):re+"min\xfatami";case"h":return H?"hodina":$?"hodinu":"hodinou";case"hh":return H||$?re+(B(Y)?"hodiny":"hod\xedn"):re+"hodinami";case"d":return H||$?"de\u0148":"d\u0148om";case"dd":return H||$?re+(B(Y)?"dni":"dn\xed"):re+"d\u0148ami";case"M":return H||$?"mesiac":"mesiacom";case"MM":return H||$?re+(B(Y)?"mesiace":"mesiacov"):re+"mesiacmi";case"y":return H||$?"rok":"rokom";case"yy":return H||$?re+(B(Y)?"roky":"rokov"):re+"rokmi"}}D.defineLocale("sk",{months:x,monthsShort:w,weekdays:"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_\u0161t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_\u0161t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nede\u013eu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo \u0161tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[v\u010dera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul\xfa nede\u013eu o] LT";case 1:case 2:case 4:case 5:return"[minul\xfd] dddd [o] LT";case 3:return"[minul\xfa stredu o] LT";case 6:return"[minul\xfa sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:U,ss:U,m:U,mm:U,h:U,hh:U,d:U,dd:U,M:U,MM:U,y:U,yy:U},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},78106:function(qe,xe,T){!function(D){"use strict";function x(B,U,W,Y){var H=B+" ";switch(W){case"s":return U||Y?"nekaj sekund":"nekaj sekundami";case"ss":return H+(1===B?U?"sekundo":"sekundi":2===B?U||Y?"sekundi":"sekundah":B<5?U||Y?"sekunde":"sekundah":"sekund");case"m":return U?"ena minuta":"eno minuto";case"mm":return H+(1===B?U?"minuta":"minuto":2===B?U||Y?"minuti":"minutama":B<5?U||Y?"minute":"minutami":U||Y?"minut":"minutami");case"h":return U?"ena ura":"eno uro";case"hh":return H+(1===B?U?"ura":"uro":2===B?U||Y?"uri":"urama":B<5?U||Y?"ure":"urami":U||Y?"ur":"urami");case"d":return U||Y?"en dan":"enim dnem";case"dd":return H+(1===B?U||Y?"dan":"dnem":2===B?U||Y?"dni":"dnevoma":U||Y?"dni":"dnevi");case"M":return U||Y?"en mesec":"enim mesecem";case"MM":return H+(1===B?U||Y?"mesec":"mesecem":2===B?U||Y?"meseca":"mesecema":B<5?U||Y?"mesece":"meseci":U||Y?"mesecev":"meseci");case"y":return U||Y?"eno leto":"enim letom";case"yy":return H+(1===B?U||Y?"leto":"letom":2===B?U||Y?"leti":"letoma":B<5?U||Y?"leta":"leti":U||Y?"let":"leti")}}D.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_\u010de_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[v\u010deraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prej\u0161njo] [nedeljo] [ob] LT";case 3:return"[prej\u0161njo] [sredo] [ob] LT";case 6:return"[prej\u0161njo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prej\u0161nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"\u010dez %s",past:"pred %s",s:x,ss:x,m:x,mm:x,h:x,hh:x,d:x,dd:x,M:x,MM:x,y:x,yy:x},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},88799:function(qe,xe,T){!function(D){"use strict";D.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),weekdays:"E Diel_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),weekdaysShort:"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M\xeb_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(w){return"M"===w.charAt(0)},meridiem:function(w,B,U){return w<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n\xeb] LT",nextDay:"[Nes\xebr n\xeb] LT",nextWeek:"dddd [n\xeb] LT",lastDay:"[Dje n\xeb] LT",lastWeek:"dddd [e kaluar n\xeb] LT",sameElse:"L"},relativeTime:{future:"n\xeb %s",past:"%s m\xeb par\xeb",s:"disa sekonda",ss:"%d sekonda",m:"nj\xeb minut\xeb",mm:"%d minuta",h:"nj\xeb or\xeb",hh:"%d or\xeb",d:"nj\xeb dit\xeb",dd:"%d dit\xeb",M:"nj\xeb muaj",MM:"%d muaj",y:"nj\xeb vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},52872:function(qe,xe,T){!function(D){"use strict";var x={words:{ss:["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0435","\u0441\u0435\u043a\u0443\u043d\u0434\u0438"],m:["\u0458\u0435\u0434\u0430\u043d \u043c\u0438\u043d\u0443\u0442","\u0458\u0435\u0434\u043d\u043e\u0433 \u043c\u0438\u043d\u0443\u0442\u0430"],mm:["\u043c\u0438\u043d\u0443\u0442","\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u0430"],h:["\u0458\u0435\u0434\u0430\u043d \u0441\u0430\u0442","\u0458\u0435\u0434\u043d\u043e\u0433 \u0441\u0430\u0442\u0430"],hh:["\u0441\u0430\u0442","\u0441\u0430\u0442\u0430","\u0441\u0430\u0442\u0438"],d:["\u0458\u0435\u0434\u0430\u043d \u0434\u0430\u043d","\u0458\u0435\u0434\u043d\u043e\u0433 \u0434\u0430\u043d\u0430"],dd:["\u0434\u0430\u043d","\u0434\u0430\u043d\u0430","\u0434\u0430\u043d\u0430"],M:["\u0458\u0435\u0434\u0430\u043d \u043c\u0435\u0441\u0435\u0446","\u0458\u0435\u0434\u043d\u043e\u0433 \u043c\u0435\u0441\u0435\u0446\u0430"],MM:["\u043c\u0435\u0441\u0435\u0446","\u043c\u0435\u0441\u0435\u0446\u0430","\u043c\u0435\u0441\u0435\u0446\u0438"],y:["\u0458\u0435\u0434\u043d\u0443 \u0433\u043e\u0434\u0438\u043d\u0443","\u0458\u0435\u0434\u043d\u0435 \u0433\u043e\u0434\u0438\u043d\u0435"],yy:["\u0433\u043e\u0434\u0438\u043d\u0443","\u0433\u043e\u0434\u0438\u043d\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"]},correctGrammaticalCase:function(B,U){return B%10>=1&&B%10<=4&&(B%100<10||B%100>=20)?B%10==1?U[0]:U[1]:U[2]},translate:function(B,U,W,Y){var G,H=x.words[W];return 1===W.length?"y"===W&&U?"\u0458\u0435\u0434\u043d\u0430 \u0433\u043e\u0434\u0438\u043d\u0430":Y||U?H[0]:H[1]:(G=x.correctGrammaticalCase(B,H),"yy"===W&&U&&"\u0433\u043e\u0434\u0438\u043d\u0443"===G?B+" \u0433\u043e\u0434\u0438\u043d\u0430":B+" "+G)}};D.defineLocale("sr-cyrl",{months:"\u0458\u0430\u043d\u0443\u0430\u0440_\u0444\u0435\u0431\u0440\u0443\u0430\u0440_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0431\u0430\u0440_\u043e\u043a\u0442\u043e\u0431\u0430\u0440_\u043d\u043e\u0432\u0435\u043c\u0431\u0430\u0440_\u0434\u0435\u0446\u0435\u043c\u0431\u0430\u0440".split("_"),monthsShort:"\u0458\u0430\u043d._\u0444\u0435\u0431._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433._\u0441\u0435\u043f._\u043e\u043a\u0442._\u043d\u043e\u0432._\u0434\u0435\u0446.".split("_"),monthsParseExact:!0,weekdays:"\u043d\u0435\u0434\u0435\u0459\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u0430\u043a_\u0443\u0442\u043e\u0440\u0430\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u0430\u043a_\u043f\u0435\u0442\u0430\u043a_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434._\u043f\u043e\u043d._\u0443\u0442\u043e._\u0441\u0440\u0435._\u0447\u0435\u0442._\u043f\u0435\u0442._\u0441\u0443\u0431.".split("_"),weekdaysMin:"\u043d\u0435_\u043f\u043e_\u0443\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441\u0443".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[\u0434\u0430\u043d\u0430\u0441 \u0443] LT",nextDay:"[\u0441\u0443\u0442\u0440\u0430 \u0443] LT",nextWeek:function(){switch(this.day()){case 0:return"[\u0443] [\u043d\u0435\u0434\u0435\u0459\u0443] [\u0443] LT";case 3:return"[\u0443] [\u0441\u0440\u0435\u0434\u0443] [\u0443] LT";case 6:return"[\u0443] [\u0441\u0443\u0431\u043e\u0442\u0443] [\u0443] LT";case 1:case 2:case 4:case 5:return"[\u0443] dddd [\u0443] LT"}},lastDay:"[\u0458\u0443\u0447\u0435 \u0443] LT",lastWeek:function(){return["[\u043f\u0440\u043e\u0448\u043b\u0435] [\u043d\u0435\u0434\u0435\u0459\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0443\u0442\u043e\u0440\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0440\u0435\u0434\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0447\u0435\u0442\u0432\u0440\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u0435\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0443\u0431\u043e\u0442\u0435] [\u0443] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"\u043f\u0440\u0435 %s",s:"\u043d\u0435\u043a\u043e\u043b\u0438\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:x.translate,m:x.translate,mm:x.translate,h:x.translate,hh:x.translate,d:x.translate,dd:x.translate,M:x.translate,MM:x.translate,y:x.translate,yy:x.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},97949:function(qe,xe,T){!function(D){"use strict";var x={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(B,U){return B%10>=1&&B%10<=4&&(B%100<10||B%100>=20)?B%10==1?U[0]:U[1]:U[2]},translate:function(B,U,W,Y){var G,H=x.words[W];return 1===W.length?"y"===W&&U?"jedna godina":Y||U?H[0]:H[1]:(G=x.correctGrammaticalCase(B,H),"yy"===W&&U&&"godinu"===G?B+" godina":B+" "+G)}};D.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedelje] [u] LT","[pro\u0161log] [ponedeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:x.translate,m:x.translate,mm:x.translate,h:x.translate,hh:x.translate,d:x.translate,dd:x.translate,M:x.translate,MM:x.translate,y:x.translate,yy:x.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(T(15439))},86167:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(w,B,U){return w<11?"ekuseni":w<15?"emini":w<19?"entsambama":"ebusuku"},meridiemHour:function(w,B){return 12===w&&(w=0),"ekuseni"===B?w:"emini"===B?w>=11?w:w+12:"entsambama"===B||"ebusuku"===B?0===w?0:w+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(T(15439))},39713:function(qe,xe,T){!function(D){"use strict";D.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),weekdaysShort:"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),weekdaysMin:"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Ig\xe5r] LT",nextWeek:"[P\xe5] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"f\xf6r %s sedan",s:"n\xe5gra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en m\xe5nad",MM:"%d m\xe5nader",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?":e":1===B||2===B?":a":":e")},week:{dow:1,doy:4}})}(T(15439))},41982:function(qe,xe,T){!function(D){"use strict";D.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(T(15439))},22732:function(qe,xe,T){!function(D){"use strict";var x={1:"\u0be7",2:"\u0be8",3:"\u0be9",4:"\u0bea",5:"\u0beb",6:"\u0bec",7:"\u0bed",8:"\u0bee",9:"\u0bef",0:"\u0be6"},w={"\u0be7":"1","\u0be8":"2","\u0be9":"3","\u0bea":"4","\u0beb":"5","\u0bec":"6","\u0bed":"7","\u0bee":"8","\u0bef":"9","\u0be6":"0"};D.defineLocale("ta",{months:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),monthsShort:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),weekdays:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bcd\u0bb1\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0b9f\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0ba9\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8".split("_"),weekdaysShort:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bc1_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0bb3\u0bcd_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0ba9\u0bcd_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf_\u0b9a\u0ba9\u0bbf".split("_"),weekdaysMin:"\u0b9e\u0bbe_\u0ba4\u0bbf_\u0b9a\u0bc6_\u0baa\u0bc1_\u0bb5\u0bbf_\u0bb5\u0bc6_\u0b9a".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[\u0b87\u0ba9\u0bcd\u0bb1\u0bc1] LT",nextDay:"[\u0ba8\u0bbe\u0bb3\u0bc8] LT",nextWeek:"dddd, LT",lastDay:"[\u0ba8\u0bc7\u0bb1\u0bcd\u0bb1\u0bc1] LT",lastWeek:"[\u0b95\u0b9f\u0ba8\u0bcd\u0ba4 \u0bb5\u0bbe\u0bb0\u0bae\u0bcd] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0b87\u0bb2\u0bcd",past:"%s \u0bae\u0bc1\u0ba9\u0bcd",s:"\u0b92\u0bb0\u0bc1 \u0b9a\u0bbf\u0bb2 \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",ss:"%d \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",m:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0bae\u0bcd",mm:"%d \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0b99\u0bcd\u0b95\u0bb3\u0bcd",h:"\u0b92\u0bb0\u0bc1 \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",hh:"%d \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",d:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbe\u0bb3\u0bcd",dd:"%d \u0ba8\u0bbe\u0b9f\u0bcd\u0b95\u0bb3\u0bcd",M:"\u0b92\u0bb0\u0bc1 \u0bae\u0bbe\u0ba4\u0bae\u0bcd",MM:"%d \u0bae\u0bbe\u0ba4\u0b99\u0bcd\u0b95\u0bb3\u0bcd",y:"\u0b92\u0bb0\u0bc1 \u0bb5\u0bb0\u0bc1\u0b9f\u0bae\u0bcd",yy:"%d \u0b86\u0ba3\u0bcd\u0b9f\u0bc1\u0b95\u0bb3\u0bcd"},dayOfMonthOrdinalParse:/\d{1,2}\u0bb5\u0ba4\u0bc1/,ordinal:function(U){return U+"\u0bb5\u0ba4\u0bc1"},preparse:function(U){return U.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g,function(W){return w[W]})},postformat:function(U){return U.replace(/\d/g,function(W){return x[W]})},meridiemParse:/\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,meridiem:function(U,W,Y){return U<2?" \u0baf\u0bbe\u0bae\u0bae\u0bcd":U<6?" \u0bb5\u0bc8\u0b95\u0bb1\u0bc8":U<10?" \u0b95\u0bbe\u0bb2\u0bc8":U<14?" \u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd":U<18?" \u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1":U<22?" \u0bae\u0bbe\u0bb2\u0bc8":" \u0baf\u0bbe\u0bae\u0bae\u0bcd"},meridiemHour:function(U,W){return 12===U&&(U=0),"\u0baf\u0bbe\u0bae\u0bae\u0bcd"===W?U<2?U:U+12:"\u0bb5\u0bc8\u0b95\u0bb1\u0bc8"===W||"\u0b95\u0bbe\u0bb2\u0bc8"===W||"\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd"===W&&U>=10?U:U+12},week:{dow:0,doy:6}})}(T(15439))},43636:function(qe,xe,T){!function(D){"use strict";D.defineLocale("te",{months:"\u0c1c\u0c28\u0c35\u0c30\u0c3f_\u0c2b\u0c3f\u0c2c\u0c4d\u0c30\u0c35\u0c30\u0c3f_\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f\u0c32\u0c4d_\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c41\u0c32\u0c48_\u0c06\u0c17\u0c38\u0c4d\u0c1f\u0c41_\u0c38\u0c46\u0c2a\u0c4d\u0c1f\u0c46\u0c02\u0c2c\u0c30\u0c4d_\u0c05\u0c15\u0c4d\u0c1f\u0c4b\u0c2c\u0c30\u0c4d_\u0c28\u0c35\u0c02\u0c2c\u0c30\u0c4d_\u0c21\u0c3f\u0c38\u0c46\u0c02\u0c2c\u0c30\u0c4d".split("_"),monthsShort:"\u0c1c\u0c28._\u0c2b\u0c3f\u0c2c\u0c4d\u0c30._\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f._\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c41\u0c32\u0c48_\u0c06\u0c17._\u0c38\u0c46\u0c2a\u0c4d._\u0c05\u0c15\u0c4d\u0c1f\u0c4b._\u0c28\u0c35._\u0c21\u0c3f\u0c38\u0c46.".split("_"),monthsParseExact:!0,weekdays:"\u0c06\u0c26\u0c3f\u0c35\u0c3e\u0c30\u0c02_\u0c38\u0c4b\u0c2e\u0c35\u0c3e\u0c30\u0c02_\u0c2e\u0c02\u0c17\u0c33\u0c35\u0c3e\u0c30\u0c02_\u0c2c\u0c41\u0c27\u0c35\u0c3e\u0c30\u0c02_\u0c17\u0c41\u0c30\u0c41\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c41\u0c15\u0c4d\u0c30\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c28\u0c3f\u0c35\u0c3e\u0c30\u0c02".split("_"),weekdaysShort:"\u0c06\u0c26\u0c3f_\u0c38\u0c4b\u0c2e_\u0c2e\u0c02\u0c17\u0c33_\u0c2c\u0c41\u0c27_\u0c17\u0c41\u0c30\u0c41_\u0c36\u0c41\u0c15\u0c4d\u0c30_\u0c36\u0c28\u0c3f".split("_"),weekdaysMin:"\u0c06_\u0c38\u0c4b_\u0c2e\u0c02_\u0c2c\u0c41_\u0c17\u0c41_\u0c36\u0c41_\u0c36".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c28\u0c47\u0c21\u0c41] LT",nextDay:"[\u0c30\u0c47\u0c2a\u0c41] LT",nextWeek:"dddd, LT",lastDay:"[\u0c28\u0c3f\u0c28\u0c4d\u0c28] LT",lastWeek:"[\u0c17\u0c24] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0c32\u0c4b",past:"%s \u0c15\u0c4d\u0c30\u0c3f\u0c24\u0c02",s:"\u0c15\u0c4a\u0c28\u0c4d\u0c28\u0c3f \u0c15\u0c4d\u0c37\u0c23\u0c3e\u0c32\u0c41",ss:"%d \u0c38\u0c46\u0c15\u0c28\u0c4d\u0c32\u0c41",m:"\u0c12\u0c15 \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c02",mm:"%d \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c3e\u0c32\u0c41",h:"\u0c12\u0c15 \u0c17\u0c02\u0c1f",hh:"%d \u0c17\u0c02\u0c1f\u0c32\u0c41",d:"\u0c12\u0c15 \u0c30\u0c4b\u0c1c\u0c41",dd:"%d \u0c30\u0c4b\u0c1c\u0c41\u0c32\u0c41",M:"\u0c12\u0c15 \u0c28\u0c46\u0c32",MM:"%d \u0c28\u0c46\u0c32\u0c32\u0c41",y:"\u0c12\u0c15 \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c02",yy:"%d \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c3e\u0c32\u0c41"},dayOfMonthOrdinalParse:/\d{1,2}\u0c35/,ordinal:"%d\u0c35",meridiemParse:/\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"===B?w<4?w:w+12:"\u0c09\u0c26\u0c2f\u0c02"===B?w:"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02"===B?w>=10?w:w+12:"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02"===B?w+12:void 0},meridiem:function(w,B,U){return w<4?"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f":w<10?"\u0c09\u0c26\u0c2f\u0c02":w<17?"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02":w<20?"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02":"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"},week:{dow:0,doy:6}})}(T(15439))},2115:function(qe,xe,T){!function(D){"use strict";D.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Ju\xf1u_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},69801:function(qe,xe,T){!function(D){"use strict";var x={0:"-\u0443\u043c",1:"-\u0443\u043c",2:"-\u044e\u043c",3:"-\u044e\u043c",4:"-\u0443\u043c",5:"-\u0443\u043c",6:"-\u0443\u043c",7:"-\u0443\u043c",8:"-\u0443\u043c",9:"-\u0443\u043c",10:"-\u0443\u043c",12:"-\u0443\u043c",13:"-\u0443\u043c",20:"-\u0443\u043c",30:"-\u044e\u043c",40:"-\u0443\u043c",50:"-\u0443\u043c",60:"-\u0443\u043c",70:"-\u0443\u043c",80:"-\u0443\u043c",90:"-\u0443\u043c",100:"-\u0443\u043c"};D.defineLocale("tg",{months:{format:"\u044f\u043d\u0432\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0430\u043b\u0438_\u043c\u0430\u0440\u0442\u0438_\u0430\u043f\u0440\u0435\u043b\u0438_\u043c\u0430\u0439\u0438_\u0438\u044e\u043d\u0438_\u0438\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442\u0438_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u0438_\u043e\u043a\u0442\u044f\u0431\u0440\u0438_\u043d\u043e\u044f\u0431\u0440\u0438_\u0434\u0435\u043a\u0430\u0431\u0440\u0438".split("_"),standalone:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_")},monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u044f\u043a\u0448\u0430\u043d\u0431\u0435_\u0434\u0443\u0448\u0430\u043d\u0431\u0435_\u0441\u0435\u0448\u0430\u043d\u0431\u0435_\u0447\u043e\u0440\u0448\u0430\u043d\u0431\u0435_\u043f\u0430\u043d\u04b7\u0448\u0430\u043d\u0431\u0435_\u04b7\u0443\u043c\u044a\u0430_\u0448\u0430\u043d\u0431\u0435".split("_"),weekdaysShort:"\u044f\u0448\u0431_\u0434\u0448\u0431_\u0441\u0448\u0431_\u0447\u0448\u0431_\u043f\u0448\u0431_\u04b7\u0443\u043c_\u0448\u043d\u0431".split("_"),weekdaysMin:"\u044f\u0448_\u0434\u0448_\u0441\u0448_\u0447\u0448_\u043f\u0448_\u04b7\u043c_\u0448\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0418\u043c\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextDay:"[\u0424\u0430\u0440\u0434\u043e \u0441\u043e\u0430\u0442\u0438] LT",lastDay:"[\u0414\u0438\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u043e\u044f\u043d\u0434\u0430 \u0441\u043e\u0430\u0442\u0438] LT",lastWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u0433\u0443\u0437\u0430\u0448\u0442\u0430 \u0441\u043e\u0430\u0442\u0438] LT",sameElse:"L"},relativeTime:{future:"\u0431\u0430\u044a\u0434\u0438 %s",past:"%s \u043f\u0435\u0448",s:"\u044f\u043a\u0447\u0430\u043d\u0434 \u0441\u043e\u043d\u0438\u044f",m:"\u044f\u043a \u0434\u0430\u049b\u0438\u049b\u0430",mm:"%d \u0434\u0430\u049b\u0438\u049b\u0430",h:"\u044f\u043a \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u044f\u043a \u0440\u04ef\u0437",dd:"%d \u0440\u04ef\u0437",M:"\u044f\u043a \u043c\u043e\u04b3",MM:"%d \u043c\u043e\u04b3",y:"\u044f\u043a \u0441\u043e\u043b",yy:"%d \u0441\u043e\u043b"},meridiemParse:/\u0448\u0430\u0431|\u0441\u0443\u0431\u04b3|\u0440\u04ef\u0437|\u0431\u0435\u0433\u043e\u04b3/,meridiemHour:function(B,U){return 12===B&&(B=0),"\u0448\u0430\u0431"===U?B<4?B:B+12:"\u0441\u0443\u0431\u04b3"===U?B:"\u0440\u04ef\u0437"===U?B>=11?B:B+12:"\u0431\u0435\u0433\u043e\u04b3"===U?B+12:void 0},meridiem:function(B,U,W){return B<4?"\u0448\u0430\u0431":B<11?"\u0441\u0443\u0431\u04b3":B<16?"\u0440\u04ef\u0437":B<19?"\u0431\u0435\u0433\u043e\u04b3":"\u0448\u0430\u0431"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0443\u043c|\u044e\u043c)/,ordinal:function(B){return B+(x[B]||x[B%10]||x[B>=100?100:null])},week:{dow:1,doy:7}})}(T(15439))},2868:function(qe,xe,T){!function(D){"use strict";D.defineLocale("th",{months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:function(w){return"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===w},meridiem:function(w,B,U){return w<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"},calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",w:"1 \u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c",ww:"%d \u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"}})}(T(15439))},31310:function(qe,xe,T){!function(D){"use strict";var x={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'\xfcnji",4:"'\xfcnji",100:"'\xfcnji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};D.defineLocale("tk",{months:"\xddanwar_Fewral_Mart_Aprel_Ma\xfd_I\xfdun_I\xfdul_Awgust_Sent\xfdabr_Okt\xfdabr_No\xfdabr_Dekabr".split("_"),monthsShort:"\xddan_Few_Mar_Apr_Ma\xfd_I\xfdn_I\xfdl_Awg_Sen_Okt_No\xfd_Dek".split("_"),weekdays:"\xddek\u015fenbe_Du\u015fenbe_Si\u015fenbe_\xc7ar\u015fenbe_Pen\u015fenbe_Anna_\u015eenbe".split("_"),weekdaysShort:"\xddek_Du\u015f_Si\u015f_\xc7ar_Pen_Ann_\u015een".split("_"),weekdaysMin:"\xddk_D\u015f_S\u015f_\xc7r_Pn_An_\u015en".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[d\xfc\xfdn] LT",lastWeek:"[ge\xe7en] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so\u0148",past:"%s \xf6\u0148",s:"birn\xe4\xe7e sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir a\xfd",MM:"%d a\xfd",y:"bir \xfdyl",yy:"%d \xfdyl"},ordinal:function(B,U){switch(U){case"d":case"D":case"Do":case"DD":return B;default:if(0===B)return B+"'unjy";var W=B%10;return B+(x[W]||x[B%100-W]||x[B>=100?100:null])}},week:{dow:1,doy:7}})}(T(15439))},22360:function(qe,xe,T){!function(D){"use strict";D.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(w){return w},week:{dow:1,doy:4}})}(T(15439))},66645:function(qe,xe,T){!function(D){"use strict";var x="pagh_wa\u2019_cha\u2019_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function U(H,G,$,re){var ue=function W(H){var G=Math.floor(H%1e3/100),$=Math.floor(H%100/10),re=H%10,ue="";return G>0&&(ue+=x[G]+"vatlh"),$>0&&(ue+=(""!==ue?" ":"")+x[$]+"maH"),re>0&&(ue+=(""!==ue?" ":"")+x[re]),""===ue?"pagh":ue}(H);switch($){case"ss":return ue+" lup";case"mm":return ue+" tup";case"hh":return ue+" rep";case"dd":return ue+" jaj";case"MM":return ue+" jar";case"yy":return ue+" DIS"}}D.defineLocale("tlh",{months:"tera\u2019 jar wa\u2019_tera\u2019 jar cha\u2019_tera\u2019 jar wej_tera\u2019 jar loS_tera\u2019 jar vagh_tera\u2019 jar jav_tera\u2019 jar Soch_tera\u2019 jar chorgh_tera\u2019 jar Hut_tera\u2019 jar wa\u2019maH_tera\u2019 jar wa\u2019maH wa\u2019_tera\u2019 jar wa\u2019maH cha\u2019".split("_"),monthsShort:"jar wa\u2019_jar cha\u2019_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa\u2019maH_jar wa\u2019maH wa\u2019_jar wa\u2019maH cha\u2019".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa\u2019leS] LT",nextWeek:"LLL",lastDay:"[wa\u2019Hu\u2019] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function w(H){var G=H;return-1!==H.indexOf("jaj")?G.slice(0,-3)+"leS":-1!==H.indexOf("jar")?G.slice(0,-3)+"waQ":-1!==H.indexOf("DIS")?G.slice(0,-3)+"nem":G+" pIq"},past:function B(H){var G=H;return-1!==H.indexOf("jaj")?G.slice(0,-3)+"Hu\u2019":-1!==H.indexOf("jar")?G.slice(0,-3)+"wen":-1!==H.indexOf("DIS")?G.slice(0,-3)+"ben":G+" ret"},s:"puS lup",ss:U,m:"wa\u2019 tup",mm:U,h:"wa\u2019 rep",hh:U,d:"wa\u2019 jaj",dd:U,M:"wa\u2019 jar",MM:U,y:"wa\u2019 DIS",yy:U},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},98374:function(qe,xe,T){!function(D){"use strict";var x={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'\xfcnc\xfc",4:"'\xfcnc\xfc",100:"'\xfcnc\xfc",6:"'nc\u0131",9:"'uncu",10:"'uncu",30:"'uncu",60:"'\u0131nc\u0131",90:"'\u0131nc\u0131"};D.defineLocale("tr",{months:"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),monthsShort:"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_\xc7ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),meridiem:function(B,U,W){return B<12?W?"\xf6\xf6":"\xd6\xd6":W?"\xf6s":"\xd6S"},meridiemParse:/\xf6\xf6|\xd6\xd6|\xf6s|\xd6S/,isPM:function(B){return"\xf6s"===B||"\xd6S"===B},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[yar\u0131n saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[d\xfcn] LT",lastWeek:"[ge\xe7en] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \xf6nce",s:"birka\xe7 saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir y\u0131l",yy:"%d y\u0131l"},ordinal:function(B,U){switch(U){case"d":case"D":case"Do":case"DD":return B;default:if(0===B)return B+"'\u0131nc\u0131";var W=B%10;return B+(x[W]||x[B%100-W]||x[B>=100?100:null])}},week:{dow:1,doy:7}})}(T(15439))},256:function(qe,xe,T){!function(D){"use strict";function w(B,U,W,Y){var H={s:["viensas secunds","'iensas secunds"],ss:[B+" secunds",B+" secunds"],m:["'n m\xedut","'iens m\xedut"],mm:[B+" m\xeduts",B+" m\xeduts"],h:["'n \xfeora","'iensa \xfeora"],hh:[B+" \xfeoras",B+" \xfeoras"],d:["'n ziua","'iensa ziua"],dd:[B+" ziuas",B+" ziuas"],M:["'n mes","'iens mes"],MM:[B+" mesen",B+" mesen"],y:["'n ar","'iens ar"],yy:[B+" ars",B+" ars"]};return Y||U?H[W][0]:H[W][1]}D.defineLocale("tzl",{months:"Januar_Fevraglh_Mar\xe7_Avr\xefu_Mai_G\xfcn_Julia_Guscht_Setemvar_Listop\xe4ts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_G\xfcn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"S\xfaladi_L\xfane\xe7i_Maitzi_M\xe1rcuri_Xh\xfaadi_Vi\xe9ner\xe7i_S\xe1turi".split("_"),weekdaysShort:"S\xfal_L\xfan_Mai_M\xe1r_Xh\xfa_Vi\xe9_S\xe1t".split("_"),weekdaysMin:"S\xfa_L\xfa_Ma_M\xe1_Xh_Vi_S\xe1".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(B){return"d'o"===B.toLowerCase()},meridiem:function(B,U,W){return B>11?W?"d'o":"D'O":W?"d'a":"D'A"},calendar:{sameDay:"[oxhi \xe0] LT",nextDay:"[dem\xe0 \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[ieiri \xe0] LT",lastWeek:"[s\xfcr el] dddd [lasteu \xe0] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:w,ss:w,m:w,mm:w,h:w,hh:w,d:w,dd:w,M:w,MM:w,y:w,yy:w},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(T(15439))},61631:function(qe,xe,T){!function(D){"use strict";D.defineLocale("tzm-latn",{months:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu\u1e0d",mm:"%d minu\u1e0d",h:"sa\u025ba",hh:"%d tassa\u025bin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(T(15439))},61595:function(qe,xe,T){!function(D){"use strict";D.defineLocale("tzm",{months:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),monthsShort:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),weekdays:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysShort:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysMin:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u2d30\u2d59\u2d37\u2d45 \u2d34] LT",nextDay:"[\u2d30\u2d59\u2d3d\u2d30 \u2d34] LT",nextWeek:"dddd [\u2d34] LT",lastDay:"[\u2d30\u2d5a\u2d30\u2d4f\u2d5c \u2d34] LT",lastWeek:"dddd [\u2d34] LT",sameElse:"L"},relativeTime:{future:"\u2d37\u2d30\u2d37\u2d45 \u2d59 \u2d62\u2d30\u2d4f %s",past:"\u2d62\u2d30\u2d4f %s",s:"\u2d49\u2d4e\u2d49\u2d3d",ss:"%d \u2d49\u2d4e\u2d49\u2d3d",m:"\u2d4e\u2d49\u2d4f\u2d53\u2d3a",mm:"%d \u2d4e\u2d49\u2d4f\u2d53\u2d3a",h:"\u2d59\u2d30\u2d44\u2d30",hh:"%d \u2d5c\u2d30\u2d59\u2d59\u2d30\u2d44\u2d49\u2d4f",d:"\u2d30\u2d59\u2d59",dd:"%d o\u2d59\u2d59\u2d30\u2d4f",M:"\u2d30\u2d62o\u2d53\u2d54",MM:"%d \u2d49\u2d62\u2d62\u2d49\u2d54\u2d4f",y:"\u2d30\u2d59\u2d33\u2d30\u2d59",yy:"%d \u2d49\u2d59\u2d33\u2d30\u2d59\u2d4f"},week:{dow:6,doy:12}})}(T(15439))},6050:function(qe,xe,T){!function(D){"use strict";D.defineLocale("ug-cn",{months:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),monthsShort:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),weekdays:"\u064a\u06d5\u0643\u0634\u06d5\u0646\u0628\u06d5_\u062f\u06c8\u0634\u06d5\u0646\u0628\u06d5_\u0633\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u0686\u0627\u0631\u0634\u06d5\u0646\u0628\u06d5_\u067e\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u062c\u06c8\u0645\u06d5_\u0634\u06d5\u0646\u0628\u06d5".split("_"),weekdaysShort:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),weekdaysMin:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649",LLL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm",LLLL:"dddd\u060c YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm"},meridiemParse:/\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5|\u0633\u06d5\u06be\u06d5\u0631|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646|\u0686\u06c8\u0634|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646|\u0643\u06d5\u0686/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5"===B||"\u0633\u06d5\u06be\u06d5\u0631"===B||"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646"===B?w:"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646"===B||"\u0643\u06d5\u0686"===B?w+12:w>=11?w:w+12},meridiem:function(w,B,U){var W=100*w+B;return W<600?"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5":W<900?"\u0633\u06d5\u06be\u06d5\u0631":W<1130?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646":W<1230?"\u0686\u06c8\u0634":W<1800?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646":"\u0643\u06d5\u0686"},calendar:{sameDay:"[\u0628\u06c8\u06af\u06c8\u0646 \u0633\u0627\u0626\u06d5\u062a] LT",nextDay:"[\u0626\u06d5\u062a\u06d5 \u0633\u0627\u0626\u06d5\u062a] LT",nextWeek:"[\u0643\u06d0\u0644\u06d5\u0631\u0643\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",lastDay:"[\u062a\u06c6\u0646\u06c8\u06af\u06c8\u0646] LT",lastWeek:"[\u0626\u0627\u0644\u062f\u0649\u0646\u0642\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0643\u06d0\u064a\u0649\u0646",past:"%s \u0628\u06c7\u0631\u06c7\u0646",s:"\u0646\u06d5\u0686\u0686\u06d5 \u0633\u06d0\u0643\u0648\u0646\u062a",ss:"%d \u0633\u06d0\u0643\u0648\u0646\u062a",m:"\u0628\u0649\u0631 \u0645\u0649\u0646\u06c7\u062a",mm:"%d \u0645\u0649\u0646\u06c7\u062a",h:"\u0628\u0649\u0631 \u0633\u0627\u0626\u06d5\u062a",hh:"%d \u0633\u0627\u0626\u06d5\u062a",d:"\u0628\u0649\u0631 \u0643\u06c8\u0646",dd:"%d \u0643\u06c8\u0646",M:"\u0628\u0649\u0631 \u0626\u0627\u064a",MM:"%d \u0626\u0627\u064a",y:"\u0628\u0649\u0631 \u064a\u0649\u0644",yy:"%d \u064a\u0649\u0644"},dayOfMonthOrdinalParse:/\d{1,2}(-\u0643\u06c8\u0646\u0649|-\u0626\u0627\u064a|-\u06be\u06d5\u067e\u062a\u06d5)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"-\u0643\u06c8\u0646\u0649";case"w":case"W":return w+"-\u06be\u06d5\u067e\u062a\u06d5";default:return w}},preparse:function(w){return w.replace(/\u060c/g,",")},postformat:function(w){return w.replace(/,/g,"\u060c")},week:{dow:1,doy:7}})}(T(15439))},65610:function(qe,xe,T){!function(D){"use strict";function w(Y,H,G){return"m"===G?H?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443":"h"===G?H?"\u0433\u043e\u0434\u0438\u043d\u0430":"\u0433\u043e\u0434\u0438\u043d\u0443":Y+" "+function x(Y,H){var G=Y.split("_");return H%10==1&&H%100!=11?G[0]:H%10>=2&&H%10<=4&&(H%100<10||H%100>=20)?G[1]:G[2]}({ss:H?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434",mm:H?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d",hh:H?"\u0433\u043e\u0434\u0438\u043d\u0430_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d":"\u0433\u043e\u0434\u0438\u043d\u0443_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u043d\u0456\u0432",MM:"\u043c\u0456\u0441\u044f\u0446\u044c_\u043c\u0456\u0441\u044f\u0446\u0456_\u043c\u0456\u0441\u044f\u0446\u0456\u0432",yy:"\u0440\u0456\u043a_\u0440\u043e\u043a\u0438_\u0440\u043e\u043a\u0456\u0432"}[G],+Y)}function U(Y){return function(){return Y+"\u043e"+(11===this.hours()?"\u0431":"")+"] LT"}}D.defineLocale("uk",{months:{format:"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),standalone:"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_")},monthsShort:"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),weekdays:function B(Y,H){var G={nominative:"\u043d\u0435\u0434\u0456\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044f_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),accusative:"\u043d\u0435\u0434\u0456\u043b\u044e_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044e_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),genitive:"\u043d\u0435\u0434\u0456\u043b\u0456_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043a\u0430_\u0432\u0456\u0432\u0442\u043e\u0440\u043a\u0430_\u0441\u0435\u0440\u0435\u0434\u0438_\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u0456_\u0441\u0443\u0431\u043e\u0442\u0438".split("_")};return!0===Y?G.nominative.slice(1,7).concat(G.nominative.slice(0,1)):Y?G[/(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(H)?"accusative":/\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(H)?"genitive":"nominative"][Y.day()]:G.nominative},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0440.",LLL:"D MMMM YYYY \u0440., HH:mm",LLLL:"dddd, D MMMM YYYY \u0440., HH:mm"},calendar:{sameDay:U("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),nextDay:U("[\u0417\u0430\u0432\u0442\u0440\u0430 "),lastDay:U("[\u0412\u0447\u043e\u0440\u0430 "),nextWeek:U("[\u0423] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return U("[\u041c\u0438\u043d\u0443\u043b\u043e\u0457] dddd [").call(this);case 1:case 2:case 4:return U("[\u041c\u0438\u043d\u0443\u043b\u043e\u0433\u043e] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"%s \u0442\u043e\u043c\u0443",s:"\u0434\u0435\u043a\u0456\u043b\u044c\u043a\u0430 \u0441\u0435\u043a\u0443\u043d\u0434",ss:w,m:w,mm:w,h:"\u0433\u043e\u0434\u0438\u043d\u0443",hh:w,d:"\u0434\u0435\u043d\u044c",dd:w,M:"\u043c\u0456\u0441\u044f\u0446\u044c",MM:w,y:"\u0440\u0456\u043a",yy:w},meridiemParse:/\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,isPM:function(Y){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(Y)},meridiem:function(Y,H,G){return Y<4?"\u043d\u043e\u0447\u0456":Y<12?"\u0440\u0430\u043d\u043a\u0443":Y<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u043e\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e)/,ordinal:function(Y,H){switch(H){case"M":case"d":case"DDD":case"w":case"W":return Y+"-\u0439";case"D":return Y+"-\u0433\u043e";default:return Y}},week:{dow:1,doy:7}})}(T(15439))},86077:function(qe,xe,T){!function(D){"use strict";var x=["\u062c\u0646\u0648\u0631\u06cc","\u0641\u0631\u0648\u0631\u06cc","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u06cc\u0644","\u0645\u0626\u06cc","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0626\u06cc","\u0627\u06af\u0633\u062a","\u0633\u062a\u0645\u0628\u0631","\u0627\u06a9\u062a\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u062f\u0633\u0645\u0628\u0631"],w=["\u0627\u062a\u0648\u0627\u0631","\u067e\u06cc\u0631","\u0645\u0646\u06af\u0644","\u0628\u062f\u06be","\u062c\u0645\u0639\u0631\u0627\u062a","\u062c\u0645\u0639\u06c1","\u06c1\u0641\u062a\u06c1"];D.defineLocale("ur",{months:x,monthsShort:x,weekdays:w,weekdaysShort:w,weekdaysMin:w,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(U){return"\u0634\u0627\u0645"===U},meridiem:function(U,W,Y){return U<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0622\u062c \u0628\u0648\u0642\u062a] LT",nextDay:"[\u06a9\u0644 \u0628\u0648\u0642\u062a] LT",nextWeek:"dddd [\u0628\u0648\u0642\u062a] LT",lastDay:"[\u06af\u0630\u0634\u062a\u06c1 \u0631\u0648\u0632 \u0628\u0648\u0642\u062a] LT",lastWeek:"[\u06af\u0630\u0634\u062a\u06c1] dddd [\u0628\u0648\u0642\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0628\u0639\u062f",past:"%s \u0642\u0628\u0644",s:"\u0686\u0646\u062f \u0633\u06cc\u06a9\u0646\u0688",ss:"%d \u0633\u06cc\u06a9\u0646\u0688",m:"\u0627\u06cc\u06a9 \u0645\u0646\u0679",mm:"%d \u0645\u0646\u0679",h:"\u0627\u06cc\u06a9 \u06af\u06be\u0646\u0679\u06c1",hh:"%d \u06af\u06be\u0646\u0679\u06d2",d:"\u0627\u06cc\u06a9 \u062f\u0646",dd:"%d \u062f\u0646",M:"\u0627\u06cc\u06a9 \u0645\u0627\u06c1",MM:"%d \u0645\u0627\u06c1",y:"\u0627\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(U){return U.replace(/\u060c/g,",")},postformat:function(U){return U.replace(/,/g,"\u060c")},week:{dow:1,doy:4}})}(T(15439))},12207:function(qe,xe,T){!function(D){"use strict";D.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(T(15439))},22862:function(qe,xe,T){!function(D){"use strict";D.defineLocale("uz",{months:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u042f\u043a\u0448\u0430\u043d\u0431\u0430_\u0414\u0443\u0448\u0430\u043d\u0431\u0430_\u0421\u0435\u0448\u0430\u043d\u0431\u0430_\u0427\u043e\u0440\u0448\u0430\u043d\u0431\u0430_\u041f\u0430\u0439\u0448\u0430\u043d\u0431\u0430_\u0416\u0443\u043c\u0430_\u0428\u0430\u043d\u0431\u0430".split("_"),weekdaysShort:"\u042f\u043a\u0448_\u0414\u0443\u0448_\u0421\u0435\u0448_\u0427\u043e\u0440_\u041f\u0430\u0439_\u0416\u0443\u043c_\u0428\u0430\u043d".split("_"),weekdaysMin:"\u042f\u043a_\u0414\u0443_\u0421\u0435_\u0427\u043e_\u041f\u0430_\u0416\u0443_\u0428\u0430".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[\u0411\u0443\u0433\u0443\u043d \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",nextDay:"[\u042d\u0440\u0442\u0430\u0433\u0430] LT [\u0434\u0430]",nextWeek:"dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastDay:"[\u041a\u0435\u0447\u0430 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastWeek:"[\u0423\u0442\u0433\u0430\u043d] dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",sameElse:"L"},relativeTime:{future:"\u042f\u043a\u0438\u043d %s \u0438\u0447\u0438\u0434\u0430",past:"\u0411\u0438\u0440 \u043d\u0435\u0447\u0430 %s \u043e\u043b\u0434\u0438\u043d",s:"\u0444\u0443\u0440\u0441\u0430\u0442",ss:"%d \u0444\u0443\u0440\u0441\u0430\u0442",m:"\u0431\u0438\u0440 \u0434\u0430\u043a\u0438\u043a\u0430",mm:"%d \u0434\u0430\u043a\u0438\u043a\u0430",h:"\u0431\u0438\u0440 \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u0431\u0438\u0440 \u043e\u0439",MM:"%d \u043e\u0439",y:"\u0431\u0438\u0440 \u0439\u0438\u043b",yy:"%d \u0439\u0438\u043b"},week:{dow:1,doy:7}})}(T(15439))},48093:function(qe,xe,T){!function(D){"use strict";D.defineLocale("vi",{months:"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(w){return/^ch$/i.test(w)},meridiem:function(w,B,U){return w<12?U?"sa":"SA":U?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [n\u0103m] YYYY",LLL:"D MMMM [n\u0103m] YYYY HH:mm",LLLL:"dddd, D MMMM [n\u0103m] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[H\xf4m nay l\xfac] LT",nextDay:"[Ng\xe0y mai l\xfac] LT",nextWeek:"dddd [tu\u1ea7n t\u1edbi l\xfac] LT",lastDay:"[H\xf4m qua l\xfac] LT",lastWeek:"dddd [tu\u1ea7n tr\u01b0\u1edbc l\xfac] LT",sameElse:"L"},relativeTime:{future:"%s t\u1edbi",past:"%s tr\u01b0\u1edbc",s:"v\xe0i gi\xe2y",ss:"%d gi\xe2y",m:"m\u1ed9t ph\xfat",mm:"%d ph\xfat",h:"m\u1ed9t gi\u1edd",hh:"%d gi\u1edd",d:"m\u1ed9t ng\xe0y",dd:"%d ng\xe0y",w:"m\u1ed9t tu\u1ea7n",ww:"%d tu\u1ea7n",M:"m\u1ed9t th\xe1ng",MM:"%d th\xe1ng",y:"m\u1ed9t n\u0103m",yy:"%d n\u0103m"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(w){return w},week:{dow:1,doy:4}})}(T(15439))},25590:function(qe,xe,T){!function(D){"use strict";D.defineLocale("x-pseudo",{months:"J~\xe1\xf1\xfa\xe1~r\xfd_F~\xe9br\xfa~\xe1r\xfd_~M\xe1rc~h_\xc1p~r\xedl_~M\xe1\xfd_~J\xfa\xf1\xe9~_J\xfal~\xfd_\xc1\xfa~g\xfast~_S\xe9p~t\xe9mb~\xe9r_\xd3~ct\xf3b~\xe9r_\xd1~\xf3v\xe9m~b\xe9r_~D\xe9c\xe9~mb\xe9r".split("_"),monthsShort:"J~\xe1\xf1_~F\xe9b_~M\xe1r_~\xc1pr_~M\xe1\xfd_~J\xfa\xf1_~J\xfal_~\xc1\xfag_~S\xe9p_~\xd3ct_~\xd1\xf3v_~D\xe9c".split("_"),monthsParseExact:!0,weekdays:"S~\xfa\xf1d\xe1~\xfd_M\xf3~\xf1d\xe1\xfd~_T\xfa\xe9~sd\xe1\xfd~_W\xe9d~\xf1\xe9sd~\xe1\xfd_T~h\xfars~d\xe1\xfd_~Fr\xedd~\xe1\xfd_S~\xe1t\xfar~d\xe1\xfd".split("_"),weekdaysShort:"S~\xfa\xf1_~M\xf3\xf1_~T\xfa\xe9_~W\xe9d_~Th\xfa_~Fr\xed_~S\xe1t".split("_"),weekdaysMin:"S~\xfa_M\xf3~_T\xfa_~W\xe9_T~h_Fr~_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~\xf3d\xe1~\xfd \xe1t] LT",nextDay:"[T~\xf3m\xf3~rr\xf3~w \xe1t] LT",nextWeek:"dddd [\xe1t] LT",lastDay:"[\xdd~\xe9st~\xe9rd\xe1~\xfd \xe1t] LT",lastWeek:"[L~\xe1st] dddd [\xe1t] LT",sameElse:"L"},relativeTime:{future:"\xed~\xf1 %s",past:"%s \xe1~g\xf3",s:"\xe1 ~f\xe9w ~s\xe9c\xf3~\xf1ds",ss:"%d s~\xe9c\xf3\xf1~ds",m:"\xe1 ~m\xed\xf1~\xfat\xe9",mm:"%d m~\xed\xf1\xfa~t\xe9s",h:"\xe1~\xf1 h\xf3~\xfar",hh:"%d h~\xf3\xfars",d:"\xe1 ~d\xe1\xfd",dd:"%d d~\xe1\xfds",M:"\xe1 ~m\xf3\xf1~th",MM:"%d m~\xf3\xf1t~hs",y:"\xe1 ~\xfd\xe9\xe1r",yy:"%d \xfd~\xe9\xe1rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(w){var B=w%10;return w+(1==~~(w%100/10)?"th":1===B?"st":2===B?"nd":3===B?"rd":"th")},week:{dow:1,doy:4}})}(T(15439))},9058:function(qe,xe,T){!function(D){"use strict";D.defineLocale("yo",{months:"S\u1eb9\u0301r\u1eb9\u0301_E\u0300re\u0300le\u0300_\u1eb8r\u1eb9\u0300na\u0300_I\u0300gbe\u0301_E\u0300bibi_O\u0300ku\u0300du_Ag\u1eb9mo_O\u0300gu\u0301n_Owewe_\u1ecc\u0300wa\u0300ra\u0300_Be\u0301lu\u0301_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),monthsShort:"S\u1eb9\u0301r_E\u0300rl_\u1eb8rn_I\u0300gb_E\u0300bi_O\u0300ku\u0300_Ag\u1eb9_O\u0300gu\u0301_Owe_\u1ecc\u0300wa\u0300_Be\u0301l_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),weekdays:"A\u0300i\u0300ku\u0301_Aje\u0301_I\u0300s\u1eb9\u0301gun_\u1eccj\u1ecd\u0301ru\u0301_\u1eccj\u1ecd\u0301b\u1ecd_\u1eb8ti\u0300_A\u0300ba\u0301m\u1eb9\u0301ta".split("_"),weekdaysShort:"A\u0300i\u0300k_Aje\u0301_I\u0300s\u1eb9\u0301_\u1eccjr_\u1eccjb_\u1eb8ti\u0300_A\u0300ba\u0301".split("_"),weekdaysMin:"A\u0300i\u0300_Aj_I\u0300s_\u1eccr_\u1eccb_\u1eb8t_A\u0300b".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[O\u0300ni\u0300 ni] LT",nextDay:"[\u1ecc\u0300la ni] LT",nextWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301n'b\u1ecd] [ni] LT",lastDay:"[A\u0300na ni] LT",lastWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301l\u1ecd\u0301] [ni] LT",sameElse:"L"},relativeTime:{future:"ni\u0301 %s",past:"%s k\u1ecdja\u0301",s:"i\u0300s\u1eb9ju\u0301 aaya\u0301 die",ss:"aaya\u0301 %d",m:"i\u0300s\u1eb9ju\u0301 kan",mm:"i\u0300s\u1eb9ju\u0301 %d",h:"wa\u0301kati kan",hh:"wa\u0301kati %d",d:"\u1ecdj\u1ecd\u0301 kan",dd:"\u1ecdj\u1ecd\u0301 %d",M:"osu\u0300 kan",MM:"osu\u0300 %d",y:"\u1ecddu\u0301n kan",yy:"\u1ecddu\u0301n %d"},dayOfMonthOrdinalParse:/\u1ecdj\u1ecd\u0301\s\d{1,2}/,ordinal:"\u1ecdj\u1ecd\u0301 %d",week:{dow:1,doy:4}})}(T(15439))},77908:function(qe,xe,T){!function(D){"use strict";D.defineLocale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u51cc\u6668"===B||"\u65e9\u4e0a"===B||"\u4e0a\u5348"===B?w:"\u4e0b\u5348"===B||"\u665a\u4e0a"===B?w+12:w>=11?w:w+12},meridiem:function(w,B,U){var W=100*w+B;return W<600?"\u51cc\u6668":W<900?"\u65e9\u4e0a":W<1130?"\u4e0a\u5348":W<1230?"\u4e2d\u5348":W<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:function(w){return w.week()!==this.week()?"[\u4e0b]dddLT":"[\u672c]dddLT"},lastDay:"[\u6628\u5929]LT",lastWeek:function(w){return this.week()!==w.week()?"[\u4e0a]dddLT":"[\u672c]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"\u65e5";case"M":return w+"\u6708";case"w":case"W":return w+"\u5468";default:return w}},relativeTime:{future:"%s\u540e",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d \u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",w:"1 \u5468",ww:"%d \u5468",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}})}(T(15439))},8867:function(qe,xe,T){!function(D){"use strict";D.defineLocale("zh-hk",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u51cc\u6668"===B||"\u65e9\u4e0a"===B||"\u4e0a\u5348"===B?w:"\u4e2d\u5348"===B?w>=11?w:w+12:"\u4e0b\u5348"===B||"\u665a\u4e0a"===B?w+12:void 0},meridiem:function(w,B,U){var W=100*w+B;return W<600?"\u51cc\u6668":W<900?"\u65e9\u4e0a":W<1200?"\u4e0a\u5348":1200===W?"\u4e2d\u5348":W<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"\u65e5";case"M":return w+"\u6708";case"w":case"W":return w+"\u9031";default:return w}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}(T(15439))},31133:function(qe,xe,T){!function(D){"use strict";D.defineLocale("zh-mo",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"D/M/YYYY",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u51cc\u6668"===B||"\u65e9\u4e0a"===B||"\u4e0a\u5348"===B?w:"\u4e2d\u5348"===B?w>=11?w:w+12:"\u4e0b\u5348"===B||"\u665a\u4e0a"===B?w+12:void 0},meridiem:function(w,B,U){var W=100*w+B;return W<600?"\u51cc\u6668":W<900?"\u65e9\u4e0a":W<1130?"\u4e0a\u5348":W<1230?"\u4e2d\u5348":W<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929] LT",nextDay:"[\u660e\u5929] LT",nextWeek:"[\u4e0b]dddd LT",lastDay:"[\u6628\u5929] LT",lastWeek:"[\u4e0a]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"\u65e5";case"M":return w+"\u6708";case"w":case"W":return w+"\u9031";default:return w}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}(T(15439))},83291:function(qe,xe,T){!function(D){"use strict";D.defineLocale("zh-tw",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(w,B){return 12===w&&(w=0),"\u51cc\u6668"===B||"\u65e9\u4e0a"===B||"\u4e0a\u5348"===B?w:"\u4e2d\u5348"===B?w>=11?w:w+12:"\u4e0b\u5348"===B||"\u665a\u4e0a"===B?w+12:void 0},meridiem:function(w,B,U){var W=100*w+B;return W<600?"\u51cc\u6668":W<900?"\u65e9\u4e0a":W<1130?"\u4e0a\u5348":W<1230?"\u4e2d\u5348":W<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929] LT",nextDay:"[\u660e\u5929] LT",nextWeek:"[\u4e0b]dddd LT",lastDay:"[\u6628\u5929] LT",lastWeek:"[\u4e0a]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(w,B){switch(B){case"d":case"D":case"DDD":return w+"\u65e5";case"M":return w+"\u6708";case"w":case"W":return w+"\u9031";default:return w}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}(T(15439))},15439:function(qe,xe,T){(qe=T.nmd(qe)).exports=function(){"use strict";var D,X;function x(){return D.apply(null,arguments)}function B(Ye){return Ye instanceof Array||"[object Array]"===Object.prototype.toString.call(Ye)}function U(Ye){return null!=Ye&&"[object Object]"===Object.prototype.toString.call(Ye)}function W(Ye,ut){return Object.prototype.hasOwnProperty.call(Ye,ut)}function Y(Ye){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(Ye).length;var ut;for(ut in Ye)if(W(Ye,ut))return!1;return!0}function H(Ye){return void 0===Ye}function G(Ye){return"number"==typeof Ye||"[object Number]"===Object.prototype.toString.call(Ye)}function $(Ye){return Ye instanceof Date||"[object Date]"===Object.prototype.toString.call(Ye)}function re(Ye,ut){var Vt,Dt=[],cr=Ye.length;for(Vt=0;Vt<cr;++Vt)Dt.push(ut(Ye[Vt],Vt));return Dt}function ue(Ye,ut){for(var Dt in ut)W(ut,Dt)&&(Ye[Dt]=ut[Dt]);return W(ut,"toString")&&(Ye.toString=ut.toString),W(ut,"valueOf")&&(Ye.valueOf=ut.valueOf),Ye}function ae(Ye,ut,Dt,Vt){return Ko(Ye,ut,Dt,Vt,!0).utc()}function ie(Ye){return null==Ye._pf&&(Ye._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),Ye._pf}function Z(Ye){if(null==Ye._isValid){var ut=ie(Ye),Dt=X.call(ut.parsedDateParts,function(cr){return null!=cr}),Vt=!isNaN(Ye._d.getTime())&&ut.overflow<0&&!ut.empty&&!ut.invalidEra&&!ut.invalidMonth&&!ut.invalidWeekday&&!ut.weekdayMismatch&&!ut.nullInput&&!ut.invalidFormat&&!ut.userInvalidated&&(!ut.meridiem||ut.meridiem&&Dt);if(Ye._strict&&(Vt=Vt&&0===ut.charsLeftOver&&0===ut.unusedTokens.length&&void 0===ut.bigHour),null!=Object.isFrozen&&Object.isFrozen(Ye))return Vt;Ye._isValid=Vt}return Ye._isValid}function Q(Ye){var ut=ae(NaN);return null!=Ye?ue(ie(ut),Ye):ie(ut).userInvalidated=!0,ut}X=Array.prototype.some?Array.prototype.some:function(Ye){var Vt,ut=Object(this),Dt=ut.length>>>0;for(Vt=0;Vt<Dt;Vt++)if(Vt in ut&&Ye.call(this,ut[Vt],Vt,ut))return!0;return!1};var J=x.momentProperties=[],se=!1;function ee(Ye,ut){var Dt,Vt,cr,$r=J.length;if(H(ut._isAMomentObject)||(Ye._isAMomentObject=ut._isAMomentObject),H(ut._i)||(Ye._i=ut._i),H(ut._f)||(Ye._f=ut._f),H(ut._l)||(Ye._l=ut._l),H(ut._strict)||(Ye._strict=ut._strict),H(ut._tzm)||(Ye._tzm=ut._tzm),H(ut._isUTC)||(Ye._isUTC=ut._isUTC),H(ut._offset)||(Ye._offset=ut._offset),H(ut._pf)||(Ye._pf=ie(ut)),H(ut._locale)||(Ye._locale=ut._locale),$r>0)for(Dt=0;Dt<$r;Dt++)H(cr=ut[Vt=J[Dt]])||(Ye[Vt]=cr);return Ye}function le(Ye){ee(this,Ye),this._d=new Date(null!=Ye._d?Ye._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===se&&(se=!0,x.updateOffset(this),se=!1)}function ne(Ye){return Ye instanceof le||null!=Ye&&null!=Ye._isAMomentObject}function ce(Ye){!1===x.suppressDeprecationWarnings&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+Ye)}function de(Ye,ut){var Dt=!0;return ue(function(){if(null!=x.deprecationHandler&&x.deprecationHandler(null,Ye),Dt){var cr,$r,Ls,Vt=[],Ki=arguments.length;for($r=0;$r<Ki;$r++){if(cr="","object"==typeof arguments[$r]){for(Ls in cr+="\n["+$r+"] ",arguments[0])W(arguments[0],Ls)&&(cr+=Ls+": "+arguments[0][Ls]+", ");cr=cr.slice(0,-2)}else cr=arguments[$r];Vt.push(cr)}ce(Ye+"\nArguments: "+Array.prototype.slice.call(Vt).join("")+"\n"+(new Error).stack),Dt=!1}return ut.apply(this,arguments)},ut)}var ve,me={};function _e(Ye,ut){null!=x.deprecationHandler&&x.deprecationHandler(Ye,ut),me[Ye]||(ce(ut),me[Ye]=!0)}function he(Ye){return typeof Function<"u"&&Ye instanceof Function||"[object Function]"===Object.prototype.toString.call(Ye)}function fe(Ye,ut){var Vt,Dt=ue({},Ye);for(Vt in ut)W(ut,Vt)&&(U(Ye[Vt])&&U(ut[Vt])?(Dt[Vt]={},ue(Dt[Vt],Ye[Vt]),ue(Dt[Vt],ut[Vt])):null!=ut[Vt]?Dt[Vt]=ut[Vt]:delete Dt[Vt]);for(Vt in Ye)W(Ye,Vt)&&!W(ut,Vt)&&U(Ye[Vt])&&(Dt[Vt]=ue({},Dt[Vt]));return Dt}function De(Ye){null!=Ye&&this.set(Ye)}x.suppressDeprecationWarnings=!1,x.deprecationHandler=null,ve=Object.keys?Object.keys:function(Ye){var ut,Dt=[];for(ut in Ye)W(Ye,ut)&&Dt.push(ut);return Dt};function Te(Ye,ut,Dt){var Vt=""+Math.abs(Ye);return(Ye>=0?Dt?"+":"":"-")+Math.pow(10,Math.max(0,ut-Vt.length)).toString().substr(1)+Vt}var Le=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,je=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ze={},Ee={};function Ae(Ye,ut,Dt,Vt){var cr=Vt;"string"==typeof Vt&&(cr=function(){return this[Vt]()}),Ye&&(Ee[Ye]=cr),ut&&(Ee[ut[0]]=function(){return Te(cr.apply(this,arguments),ut[1],ut[2])}),Dt&&(Ee[Dt]=function(){return this.localeData().ordinal(cr.apply(this,arguments),Ye)})}function we(Ye){return Ye.match(/\[[\s\S]/)?Ye.replace(/^\[|\]$/g,""):Ye.replace(/\\/g,"")}function Pe(Ye,ut){return Ye.isValid()?(ut=Oe(ut,Ye.localeData()),ze[ut]=ze[ut]||function Be(Ye){var Dt,Vt,ut=Ye.match(Le);for(Dt=0,Vt=ut.length;Dt<Vt;Dt++)ut[Dt]=Ee[ut[Dt]]?Ee[ut[Dt]]:we(ut[Dt]);return function(cr){var Ls,$r="";for(Ls=0;Ls<Vt;Ls++)$r+=he(ut[Ls])?ut[Ls].call(cr,Ye):ut[Ls];return $r}}(ut),ze[ut](Ye)):Ye.localeData().invalidDate()}function Oe(Ye,ut){var Dt=5;function Vt(cr){return ut.longDateFormat(cr)||cr}for(je.lastIndex=0;Dt>=0&&je.test(Ye);)Ye=Ye.replace(je,Vt),je.lastIndex=0,Dt-=1;return Ye}var it={};function Xe(Ye,ut){var Dt=Ye.toLowerCase();it[Dt]=it[Dt+"s"]=it[ut]=Ye}function rt(Ye){return"string"==typeof Ye?it[Ye]||it[Ye.toLowerCase()]:void 0}function Ze(Ye){var Dt,Vt,ut={};for(Vt in Ye)W(Ye,Vt)&&(Dt=rt(Vt))&&(ut[Dt]=Ye[Vt]);return ut}var lt={};function st(Ye,ut){lt[Ye]=ut}function Ft(Ye){return Ye%4==0&&Ye%100!=0||Ye%400==0}function kt(Ye){return Ye<0?Math.ceil(Ye)||0:Math.floor(Ye)}function wt(Ye){var ut=+Ye,Dt=0;return 0!==ut&&isFinite(ut)&&(Dt=kt(ut)),Dt}function zt(Ye,ut){return function(Dt){return null!=Dt?(ar(this,Ye,Dt),x.updateOffset(this,ut),this):Zt(this,Ye)}}function Zt(Ye,ut){return Ye.isValid()?Ye._d["get"+(Ye._isUTC?"UTC":"")+ut]():NaN}function ar(Ye,ut,Dt){Ye.isValid()&&!isNaN(Dt)&&("FullYear"===ut&&Ft(Ye.year())&&1===Ye.month()&&29===Ye.date()?(Dt=wt(Dt),Ye._d["set"+(Ye._isUTC?"UTC":"")+ut](Dt,Ye.month(),Ys(Dt,Ye.month()))):Ye._d["set"+(Ye._isUTC?"UTC":"")+ut](Dt))}var zr,ss=/\d/,os=/\d\d/,Hr=/\d{3}/,pt=/\d{4}/,Ut=/[+-]?\d{6}/,$t=/\d\d?/,Xt=/\d\d\d\d?/,_r=/\d\d\d\d\d\d?/,hr=/\d{1,3}/,gr=/\d{1,4}/,vr=/[+-]?\d{1,6}/,Kr=/\d+/,Gr=/[+-]?\d+/,Jr=/Z|[+-]\d\d:?\d\d/gi,ns=/Z|[+-]\d\d(?::?\d\d)?/gi,Tr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Tt(Ye,ut,Dt){zr[Ye]=he(ut)?ut:function(Vt,cr){return Vt&&Dt?Dt:ut}}function sr(Ye,ut){return W(zr,Ye)?zr[Ye](ut._strict,ut._locale):new RegExp(function Rr(Ye){return bt(Ye.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(ut,Dt,Vt,cr,$r){return Dt||Vt||cr||$r}))}(Ye))}function bt(Ye){return Ye.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}zr={};var Qt={};function qt(Ye,ut){var Dt,cr,Vt=ut;for("string"==typeof Ye&&(Ye=[Ye]),G(ut)&&(Vt=function($r,Ls){Ls[ut]=wt($r)}),cr=Ye.length,Dt=0;Dt<cr;Dt++)Qt[Ye[Dt]]=Vt}function yr(Ye,ut){qt(Ye,function(Dt,Vt,cr,$r){cr._w=cr._w||{},ut(Dt,cr._w,cr,$r)})}function jr(Ye,ut,Dt){null!=ut&&W(Qt,Ye)&&Qt[Ye](ut,Dt._a,Dt,Ye)}var As;function Ys(Ye,ut){if(isNaN(Ye)||isNaN(ut))return NaN;var Dt=function zs(Ye,ut){return(Ye%ut+ut)%ut}(ut,12);return Ye+=(ut-Dt)/12,1===Dt?Ft(Ye)?29:28:31-Dt%7%2}As=Array.prototype.indexOf?Array.prototype.indexOf:function(Ye){var ut;for(ut=0;ut<this.length;++ut)if(this[ut]===Ye)return ut;return-1},Ae("M",["MM",2],"Mo",function(){return this.month()+1}),Ae("MMM",0,0,function(Ye){return this.localeData().monthsShort(this,Ye)}),Ae("MMMM",0,0,function(Ye){return this.localeData().months(this,Ye)}),Xe("month","M"),st("month",8),Tt("M",$t),Tt("MM",$t,os),Tt("MMM",function(Ye,ut){return ut.monthsShortRegex(Ye)}),Tt("MMMM",function(Ye,ut){return ut.monthsRegex(Ye)}),qt(["M","MM"],function(Ye,ut){ut[1]=wt(Ye)-1}),qt(["MMM","MMMM"],function(Ye,ut,Dt,Vt){var cr=Dt._locale.monthsParse(Ye,Vt,Dt._strict);null!=cr?ut[1]=cr:ie(Dt).invalidMonth=Ye});var di="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ai=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ds=Tr,Tn=Tr;function Wr(Ye,ut,Dt){var Vt,cr,$r,Ls=Ye.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Vt=0;Vt<12;++Vt)$r=ae([2e3,Vt]),this._shortMonthsParse[Vt]=this.monthsShort($r,"").toLocaleLowerCase(),this._longMonthsParse[Vt]=this.months($r,"").toLocaleLowerCase();return Dt?"MMM"===ut?-1!==(cr=As.call(this._shortMonthsParse,Ls))?cr:null:-1!==(cr=As.call(this._longMonthsParse,Ls))?cr:null:"MMM"===ut?-1!==(cr=As.call(this._shortMonthsParse,Ls))||-1!==(cr=As.call(this._longMonthsParse,Ls))?cr:null:-1!==(cr=As.call(this._longMonthsParse,Ls))||-1!==(cr=As.call(this._shortMonthsParse,Ls))?cr:null}function bs(Ye,ut){var Dt;if(!Ye.isValid())return Ye;if("string"==typeof ut)if(/^\d+$/.test(ut))ut=wt(ut);else if(!G(ut=Ye.localeData().monthsParse(ut)))return Ye;return Dt=Math.min(Ye.date(),Ys(Ye.year(),ut)),Ye._d["set"+(Ye._isUTC?"UTC":"")+"Month"](ut,Dt),Ye}function Ns(Ye){return null!=Ye?(bs(this,Ye),x.updateOffset(this,!0),this):Zt(this,"Month")}function Di(){function Ye(Ls,Ki){return Ki.length-Ls.length}var cr,$r,ut=[],Dt=[],Vt=[];for(cr=0;cr<12;cr++)$r=ae([2e3,cr]),ut.push(this.monthsShort($r,"")),Dt.push(this.months($r,"")),Vt.push(this.months($r,"")),Vt.push(this.monthsShort($r,""));for(ut.sort(Ye),Dt.sort(Ye),Vt.sort(Ye),cr=0;cr<12;cr++)ut[cr]=bt(ut[cr]),Dt[cr]=bt(Dt[cr]);for(cr=0;cr<24;cr++)Vt[cr]=bt(Vt[cr]);this._monthsRegex=new RegExp("^("+Vt.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+Dt.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+ut.join("|")+")","i")}function Oi(Ye){return Ft(Ye)?366:365}Ae("Y",0,0,function(){var Ye=this.year();return Ye<=9999?Te(Ye,4):"+"+Ye}),Ae(0,["YY",2],0,function(){return this.year()%100}),Ae(0,["YYYY",4],0,"year"),Ae(0,["YYYYY",5],0,"year"),Ae(0,["YYYYYY",6,!0],0,"year"),Xe("year","y"),st("year",1),Tt("Y",Gr),Tt("YY",$t,os),Tt("YYYY",gr,pt),Tt("YYYYY",vr,Ut),Tt("YYYYYY",vr,Ut),qt(["YYYYY","YYYYYY"],0),qt("YYYY",function(Ye,ut){ut[0]=2===Ye.length?x.parseTwoDigitYear(Ye):wt(Ye)}),qt("YY",function(Ye,ut){ut[0]=x.parseTwoDigitYear(Ye)}),qt("Y",function(Ye,ut){ut[0]=parseInt(Ye,10)}),x.parseTwoDigitYear=function(Ye){return wt(Ye)+(wt(Ye)>68?1900:2e3)};var zi=zt("FullYear",!0);function ii(Ye,ut,Dt,Vt,cr,$r,Ls){var Ki;return Ye<100&&Ye>=0?(Ki=new Date(Ye+400,ut,Dt,Vt,cr,$r,Ls),isFinite(Ki.getFullYear())&&Ki.setFullYear(Ye)):Ki=new Date(Ye,ut,Dt,Vt,cr,$r,Ls),Ki}function yn(Ye){var ut,Dt;return Ye<100&&Ye>=0?((Dt=Array.prototype.slice.call(arguments))[0]=Ye+400,ut=new Date(Date.UTC.apply(null,Dt)),isFinite(ut.getUTCFullYear())&&ut.setUTCFullYear(Ye)):ut=new Date(Date.UTC.apply(null,arguments)),ut}function dr(Ye,ut,Dt){var Vt=7+ut-Dt;return-(7+yn(Ye,0,Vt).getUTCDay()-ut)%7+Vt-1}function Dr(Ye,ut,Dt,Vt,cr){var vn,yo,Ki=1+7*(ut-1)+(7+Dt-Vt)%7+dr(Ye,Vt,cr);return Ki<=0?yo=Oi(vn=Ye-1)+Ki:Ki>Oi(Ye)?(vn=Ye+1,yo=Ki-Oi(Ye)):(vn=Ye,yo=Ki),{year:vn,dayOfYear:yo}}function er(Ye,ut,Dt){var $r,Ls,Vt=dr(Ye.year(),ut,Dt),cr=Math.floor((Ye.dayOfYear()-Vt-1)/7)+1;return cr<1?$r=cr+Ir(Ls=Ye.year()-1,ut,Dt):cr>Ir(Ye.year(),ut,Dt)?($r=cr-Ir(Ye.year(),ut,Dt),Ls=Ye.year()+1):(Ls=Ye.year(),$r=cr),{week:$r,year:Ls}}function Ir(Ye,ut,Dt){var Vt=dr(Ye,ut,Dt),cr=dr(Ye+1,ut,Dt);return(Oi(Ye)-Vt+cr)/7}Ae("w",["ww",2],"wo","week"),Ae("W",["WW",2],"Wo","isoWeek"),Xe("week","w"),Xe("isoWeek","W"),st("week",5),st("isoWeek",5),Tt("w",$t),Tt("ww",$t,os),Tt("W",$t),Tt("WW",$t,os),yr(["w","ww","W","WW"],function(Ye,ut,Dt,Vt){ut[Vt.substr(0,1)]=wt(Ye)});function sn(Ye,ut){return Ye.slice(ut,7).concat(Ye.slice(0,ut))}Ae("d",0,"do","day"),Ae("dd",0,0,function(Ye){return this.localeData().weekdaysMin(this,Ye)}),Ae("ddd",0,0,function(Ye){return this.localeData().weekdaysShort(this,Ye)}),Ae("dddd",0,0,function(Ye){return this.localeData().weekdays(this,Ye)}),Ae("e",0,0,"weekday"),Ae("E",0,0,"isoWeekday"),Xe("day","d"),Xe("weekday","e"),Xe("isoWeekday","E"),st("day",11),st("weekday",11),st("isoWeekday",11),Tt("d",$t),Tt("e",$t),Tt("E",$t),Tt("dd",function(Ye,ut){return ut.weekdaysMinRegex(Ye)}),Tt("ddd",function(Ye,ut){return ut.weekdaysShortRegex(Ye)}),Tt("dddd",function(Ye,ut){return ut.weekdaysRegex(Ye)}),yr(["dd","ddd","dddd"],function(Ye,ut,Dt,Vt){var cr=Dt._locale.weekdaysParse(Ye,Vt,Dt._strict);null!=cr?ut.d=cr:ie(Dt).invalidWeekday=Ye}),yr(["d","e","E"],function(Ye,ut,Dt,Vt){ut[Vt]=wt(Ye)});var Uo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Vn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),io="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),An=Tr,Gn=Tr,hn=Tr;function ia(Ye,ut,Dt){var Vt,cr,$r,Ls=Ye.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Vt=0;Vt<7;++Vt)$r=ae([2e3,1]).day(Vt),this._minWeekdaysParse[Vt]=this.weekdaysMin($r,"").toLocaleLowerCase(),this._shortWeekdaysParse[Vt]=this.weekdaysShort($r,"").toLocaleLowerCase(),this._weekdaysParse[Vt]=this.weekdays($r,"").toLocaleLowerCase();return Dt?"dddd"===ut?-1!==(cr=As.call(this._weekdaysParse,Ls))?cr:null:"ddd"===ut?-1!==(cr=As.call(this._shortWeekdaysParse,Ls))?cr:null:-1!==(cr=As.call(this._minWeekdaysParse,Ls))?cr:null:"dddd"===ut?-1!==(cr=As.call(this._weekdaysParse,Ls))||-1!==(cr=As.call(this._shortWeekdaysParse,Ls))||-1!==(cr=As.call(this._minWeekdaysParse,Ls))?cr:null:"ddd"===ut?-1!==(cr=As.call(this._shortWeekdaysParse,Ls))||-1!==(cr=As.call(this._weekdaysParse,Ls))||-1!==(cr=As.call(this._minWeekdaysParse,Ls))?cr:null:-1!==(cr=As.call(this._minWeekdaysParse,Ls))||-1!==(cr=As.call(this._weekdaysParse,Ls))||-1!==(cr=As.call(this._shortWeekdaysParse,Ls))?cr:null}function Ts(){function Ye(ca,ad){return ad.length-ca.length}var $r,Ls,Ki,vn,yo,ut=[],Dt=[],Vt=[],cr=[];for($r=0;$r<7;$r++)Ls=ae([2e3,1]).day($r),Ki=bt(this.weekdaysMin(Ls,"")),vn=bt(this.weekdaysShort(Ls,"")),yo=bt(this.weekdays(Ls,"")),ut.push(Ki),Dt.push(vn),Vt.push(yo),cr.push(Ki),cr.push(vn),cr.push(yo);ut.sort(Ye),Dt.sort(Ye),Vt.sort(Ye),cr.sort(Ye),this._weekdaysRegex=new RegExp("^("+cr.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+Vt.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+Dt.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+ut.join("|")+")","i")}function ys(){return this.hours()%12||12}function an(Ye,ut){Ae(Ye,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ut)})}function Ln(Ye,ut){return ut._meridiemParse}Ae("H",["HH",2],0,"hour"),Ae("h",["hh",2],0,ys),Ae("k",["kk",2],0,function Wi(){return this.hours()||24}),Ae("hmm",0,0,function(){return""+ys.apply(this)+Te(this.minutes(),2)}),Ae("hmmss",0,0,function(){return""+ys.apply(this)+Te(this.minutes(),2)+Te(this.seconds(),2)}),Ae("Hmm",0,0,function(){return""+this.hours()+Te(this.minutes(),2)}),Ae("Hmmss",0,0,function(){return""+this.hours()+Te(this.minutes(),2)+Te(this.seconds(),2)}),an("a",!0),an("A",!1),Xe("hour","h"),st("hour",13),Tt("a",Ln),Tt("A",Ln),Tt("H",$t),Tt("h",$t),Tt("k",$t),Tt("HH",$t,os),Tt("hh",$t,os),Tt("kk",$t,os),Tt("hmm",Xt),Tt("hmmss",_r),Tt("Hmm",Xt),Tt("Hmmss",_r),qt(["H","HH"],3),qt(["k","kk"],function(Ye,ut,Dt){var Vt=wt(Ye);ut[3]=24===Vt?0:Vt}),qt(["a","A"],function(Ye,ut,Dt){Dt._isPm=Dt._locale.isPM(Ye),Dt._meridiem=Ye}),qt(["h","hh"],function(Ye,ut,Dt){ut[3]=wt(Ye),ie(Dt).bigHour=!0}),qt("hmm",function(Ye,ut,Dt){var Vt=Ye.length-2;ut[3]=wt(Ye.substr(0,Vt)),ut[4]=wt(Ye.substr(Vt)),ie(Dt).bigHour=!0}),qt("hmmss",function(Ye,ut,Dt){var Vt=Ye.length-4,cr=Ye.length-2;ut[3]=wt(Ye.substr(0,Vt)),ut[4]=wt(Ye.substr(Vt,2)),ut[5]=wt(Ye.substr(cr)),ie(Dt).bigHour=!0}),qt("Hmm",function(Ye,ut,Dt){var Vt=Ye.length-2;ut[3]=wt(Ye.substr(0,Vt)),ut[4]=wt(Ye.substr(Vt))}),qt("Hmmss",function(Ye,ut,Dt){var Vt=Ye.length-4,cr=Ye.length-2;ut[3]=wt(Ye.substr(0,Vt)),ut[4]=wt(Ye.substr(Vt,2)),ut[5]=wt(Ye.substr(cr))});var Bt=zt("Hours",!0);var Fr,rr={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:di,monthsShort:Nr,week:{dow:0,doy:6},weekdays:Uo,weekdaysMin:io,weekdaysShort:Vn,meridiemParse:/[ap]\.?m?\.?/i},Er={},ur={};function ls(Ye,ut){var Dt,Vt=Math.min(Ye.length,ut.length);for(Dt=0;Dt<Vt;Dt+=1)if(Ye[Dt]!==ut[Dt])return Dt;return Vt}function Pt(Ye){return Ye&&Ye.toLowerCase().replace("_","-")}function qr(Ye){var ut=null;if(void 0===Er[Ye]&&qe&&qe.exports&&function mr(Ye){return null!=Ye.match("^[^/\\\\]*$")}(Ye))try{ut=Fr._abbr,T(46700)("./"+Ye),fs(ut)}catch{Er[Ye]=null}return Er[Ye]}function fs(Ye,ut){var Dt;return Ye&&((Dt=H(ut)?fn(Ye):qs(Ye,ut))?Fr=Dt:typeof console<"u"&&console.warn&&console.warn("Locale "+Ye+" not found. Did you forget to load it?")),Fr._abbr}function qs(Ye,ut){if(null!==ut){var Dt,Vt=rr;if(ut.abbr=Ye,null!=Er[Ye])_e("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),Vt=Er[Ye]._config;else if(null!=ut.parentLocale)if(null!=Er[ut.parentLocale])Vt=Er[ut.parentLocale]._config;else{if(null==(Dt=qr(ut.parentLocale)))return ur[ut.parentLocale]||(ur[ut.parentLocale]=[]),ur[ut.parentLocale].push({name:Ye,config:ut}),null;Vt=Dt._config}return Er[Ye]=new De(fe(Vt,ut)),ur[Ye]&&ur[Ye].forEach(function(cr){qs(cr.name,cr.config)}),fs(Ye),Er[Ye]}return delete Er[Ye],null}function fn(Ye){var ut;if(Ye&&Ye._locale&&Ye._locale._abbr&&(Ye=Ye._locale._abbr),!Ye)return Fr;if(!B(Ye)){if(ut=qr(Ye))return ut;Ye=[Ye]}return function St(Ye){for(var Dt,Vt,cr,$r,ut=0;ut<Ye.length;){for(Dt=($r=Pt(Ye[ut]).split("-")).length,Vt=(Vt=Pt(Ye[ut+1]))?Vt.split("-"):null;Dt>0;){if(cr=qr($r.slice(0,Dt).join("-")))return cr;if(Vt&&Vt.length>=Dt&&ls($r,Vt)>=Dt-1)break;Dt--}ut++}return Fr}(Ye)}function un(Ye){var ut,Dt=Ye._a;return Dt&&-2===ie(Ye).overflow&&(ut=Dt[1]<0||Dt[1]>11?1:Dt[2]<1||Dt[2]>Ys(Dt[0],Dt[1])?2:Dt[3]<0||Dt[3]>24||24===Dt[3]&&(0!==Dt[4]||0!==Dt[5]||0!==Dt[6])?3:Dt[4]<0||Dt[4]>59?4:Dt[5]<0||Dt[5]>59?5:Dt[6]<0||Dt[6]>999?6:-1,ie(Ye)._overflowDayOfYear&&(ut<0||ut>2)&&(ut=2),ie(Ye)._overflowWeeks&&-1===ut&&(ut=7),ie(Ye)._overflowWeekday&&-1===ut&&(ut=8),ie(Ye).overflow=ut),Ye}var Xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,uo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bo=/Z|[+-]\d\d(?::?\d\d)?/,eo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],za=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Xc=/^\/?Date\((-?\d+)/i,Kl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Sl={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _l(Ye){var ut,Dt,$r,Ls,Ki,vn,Vt=Ye._i,cr=Xn.exec(Vt)||uo.exec(Vt),yo=eo.length,ca=za.length;if(cr){for(ie(Ye).iso=!0,ut=0,Dt=yo;ut<Dt;ut++)if(eo[ut][1].exec(cr[1])){Ls=eo[ut][0],$r=!1!==eo[ut][2];break}if(null==Ls)return void(Ye._isValid=!1);if(cr[3]){for(ut=0,Dt=ca;ut<Dt;ut++)if(za[ut][1].exec(cr[3])){Ki=(cr[2]||" ")+za[ut][0];break}if(null==Ki)return void(Ye._isValid=!1)}if(!$r&&null!=Ki)return void(Ye._isValid=!1);if(cr[4]){if(!bo.exec(cr[4]))return void(Ye._isValid=!1);vn="Z"}Ye._f=Ls+(Ki||"")+(vn||""),qa(Ye)}else Ye._isValid=!1}function na(Ye){var ut=parseInt(Ye,10);return ut<=49?2e3+ut:ut<=999?1900+ut:ut}function Mu(Ye){var Dt,ut=Kl.exec(function xc(Ye){return Ye.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(Ye._i));if(ut){if(Dt=function Od(Ye,ut,Dt,Vt,cr,$r){var Ls=[na(Ye),Nr.indexOf(ut),parseInt(Dt,10),parseInt(Vt,10),parseInt(cr,10)];return $r&&Ls.push(parseInt($r,10)),Ls}(ut[4],ut[3],ut[2],ut[5],ut[6],ut[7]),!function oa(Ye,ut,Dt){return!Ye||Vn.indexOf(Ye)===new Date(ut[0],ut[1],ut[2]).getDay()||(ie(Dt).weekdayMismatch=!0,Dt._isValid=!1,!1)}(ut[1],Dt,Ye))return;Ye._a=Dt,Ye._tzm=function Sc(Ye,ut,Dt){if(Ye)return Sl[Ye];if(ut)return 0;var Vt=parseInt(Dt,10),cr=Vt%100;return(Vt-cr)/100*60+cr}(ut[8],ut[9],ut[10]),Ye._d=yn.apply(null,Ye._a),Ye._d.setUTCMinutes(Ye._d.getUTCMinutes()-Ye._tzm),ie(Ye).rfc2822=!0}else Ye._isValid=!1}function Oa(Ye,ut,Dt){return Ye??ut??Dt}function Bo(Ye){var ut,Dt,cr,$r,Ls,Vt=[];if(!Ye._d){for(cr=function Qa(Ye){var ut=new Date(x.now());return Ye._useUTC?[ut.getUTCFullYear(),ut.getUTCMonth(),ut.getUTCDate()]:[ut.getFullYear(),ut.getMonth(),ut.getDate()]}(Ye),Ye._w&&null==Ye._a[2]&&null==Ye._a[1]&&function Jd(Ye){var ut,Dt,Vt,cr,$r,Ls,Ki,vn,yo;null!=(ut=Ye._w).GG||null!=ut.W||null!=ut.E?($r=1,Ls=4,Dt=Oa(ut.GG,Ye._a[0],er($n(),1,4).year),Vt=Oa(ut.W,1),((cr=Oa(ut.E,1))<1||cr>7)&&(vn=!0)):($r=Ye._locale._week.dow,Ls=Ye._locale._week.doy,yo=er($n(),$r,Ls),Dt=Oa(ut.gg,Ye._a[0],yo.year),Vt=Oa(ut.w,yo.week),null!=ut.d?((cr=ut.d)<0||cr>6)&&(vn=!0):null!=ut.e?(cr=ut.e+$r,(ut.e<0||ut.e>6)&&(vn=!0)):cr=$r),Vt<1||Vt>Ir(Dt,$r,Ls)?ie(Ye)._overflowWeeks=!0:null!=vn?ie(Ye)._overflowWeekday=!0:(Ki=Dr(Dt,Vt,cr,$r,Ls),Ye._a[0]=Ki.year,Ye._dayOfYear=Ki.dayOfYear)}(Ye),null!=Ye._dayOfYear&&(Ls=Oa(Ye._a[0],cr[0]),(Ye._dayOfYear>Oi(Ls)||0===Ye._dayOfYear)&&(ie(Ye)._overflowDayOfYear=!0),Dt=yn(Ls,0,Ye._dayOfYear),Ye._a[1]=Dt.getUTCMonth(),Ye._a[2]=Dt.getUTCDate()),ut=0;ut<3&&null==Ye._a[ut];++ut)Ye._a[ut]=Vt[ut]=cr[ut];for(;ut<7;ut++)Ye._a[ut]=Vt[ut]=Ye._a[ut]??(2===ut?1:0);24===Ye._a[3]&&0===Ye._a[4]&&0===Ye._a[5]&&0===Ye._a[6]&&(Ye._nextDay=!0,Ye._a[3]=0),Ye._d=(Ye._useUTC?yn:ii).apply(null,Vt),$r=Ye._useUTC?Ye._d.getUTCDay():Ye._d.getDay(),null!=Ye._tzm&&Ye._d.setUTCMinutes(Ye._d.getUTCMinutes()-Ye._tzm),Ye._nextDay&&(Ye._a[3]=24),Ye._w&&typeof Ye._w.d<"u"&&Ye._w.d!==$r&&(ie(Ye).weekdayMismatch=!0)}}function qa(Ye){if(Ye._f!==x.ISO_8601)if(Ye._f!==x.RFC_2822){Ye._a=[],ie(Ye).empty=!0;var Dt,Vt,cr,$r,Ls,yo,ca,ut=""+Ye._i,Ki=ut.length,vn=0;for(ca=(cr=Oe(Ye._f,Ye._locale).match(Le)||[]).length,Dt=0;Dt<ca;Dt++)(Vt=(ut.match(sr($r=cr[Dt],Ye))||[])[0])&&((Ls=ut.substr(0,ut.indexOf(Vt))).length>0&&ie(Ye).unusedInput.push(Ls),ut=ut.slice(ut.indexOf(Vt)+Vt.length),vn+=Vt.length),Ee[$r]?(Vt?ie(Ye).empty=!1:ie(Ye).unusedTokens.push($r),jr($r,Vt,Ye)):Ye._strict&&!Vt&&ie(Ye).unusedTokens.push($r);ie(Ye).charsLeftOver=Ki-vn,ut.length>0&&ie(Ye).unusedInput.push(ut),Ye._a[3]<=12&&!0===ie(Ye).bigHour&&Ye._a[3]>0&&(ie(Ye).bigHour=void 0),ie(Ye).parsedDateParts=Ye._a.slice(0),ie(Ye).meridiem=Ye._meridiem,Ye._a[3]=function Po(Ye,ut,Dt){var Vt;return null==Dt?ut:null!=Ye.meridiemHour?Ye.meridiemHour(ut,Dt):(null!=Ye.isPM&&((Vt=Ye.isPM(Dt))&&ut<12&&(ut+=12),!Vt&&12===ut&&(ut=0)),ut)}(Ye._locale,Ye._a[3],Ye._meridiem),null!==(yo=ie(Ye).era)&&(Ye._a[0]=Ye._locale.erasConvertYear(yo,Ye._a[0])),Bo(Ye),un(Ye)}else Mu(Ye);else _l(Ye)}function Ua(Ye){var ut=Ye._i,Dt=Ye._f;return Ye._locale=Ye._locale||fn(Ye._l),null===ut||void 0===Dt&&""===ut?Q({nullInput:!0}):("string"==typeof ut&&(Ye._i=ut=Ye._locale.preparse(ut)),ne(ut)?new le(un(ut)):($(ut)?Ye._d=ut:B(Dt)?function Yl(Ye){var ut,Dt,Vt,cr,$r,Ls,Ki=!1,vn=Ye._f.length;if(0===vn)return ie(Ye).invalidFormat=!0,void(Ye._d=new Date(NaN));for(cr=0;cr<vn;cr++)$r=0,Ls=!1,ut=ee({},Ye),null!=Ye._useUTC&&(ut._useUTC=Ye._useUTC),ut._f=Ye._f[cr],qa(ut),Z(ut)&&(Ls=!0),$r+=ie(ut).charsLeftOver,$r+=10*ie(ut).unusedTokens.length,ie(ut).score=$r,Ki?$r<Vt&&(Vt=$r,Dt=ut):(null==Vt||$r<Vt||Ls)&&(Vt=$r,Dt=ut,Ls&&(Ki=!0));ue(Ye,Dt||ut)}(Ye):Dt?qa(Ye):function mo(Ye){var ut=Ye._i;H(ut)?Ye._d=new Date(x.now()):$(ut)?Ye._d=new Date(ut.valueOf()):"string"==typeof ut?function Xa(Ye){var ut=Xc.exec(Ye._i);null===ut?(_l(Ye),!1===Ye._isValid&&(delete Ye._isValid,Mu(Ye),!1===Ye._isValid&&(delete Ye._isValid,Ye._strict?Ye._isValid=!1:x.createFromInputFallback(Ye)))):Ye._d=new Date(+ut[1])}(Ye):B(ut)?(Ye._a=re(ut.slice(0),function(Dt){return parseInt(Dt,10)}),Bo(Ye)):U(ut)?function Zl(Ye){if(!Ye._d){var ut=Ze(Ye._i);Ye._a=re([ut.year,ut.month,void 0===ut.day?ut.date:ut.day,ut.hour,ut.minute,ut.second,ut.millisecond],function(Vt){return Vt&&parseInt(Vt,10)}),Bo(Ye)}}(Ye):G(ut)?Ye._d=new Date(ut):x.createFromInputFallback(Ye)}(Ye),Z(Ye)||(Ye._d=null),Ye))}function Ko(Ye,ut,Dt,Vt,cr){var $r={};return(!0===ut||!1===ut)&&(Vt=ut,ut=void 0),(!0===Dt||!1===Dt)&&(Vt=Dt,Dt=void 0),(U(Ye)&&Y(Ye)||B(Ye)&&0===Ye.length)&&(Ye=void 0),$r._isAMomentObject=!0,$r._useUTC=$r._isUTC=cr,$r._l=Dt,$r._i=Ye,$r._f=ut,$r._strict=Vt,function Pa(Ye){var ut=new le(un(Ua(Ye)));return ut._nextDay&&(ut.add(1,"d"),ut._nextDay=void 0),ut}($r)}function $n(Ye,ut,Dt,Vt){return Ko(Ye,ut,Dt,Vt,!1)}x.createFromInputFallback=de("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(Ye){Ye._d=new Date(Ye._i+(Ye._useUTC?" UTC":""))}),x.ISO_8601=function(){},x.RFC_2822=function(){};var no=de("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Ye=$n.apply(null,arguments);return this.isValid()&&Ye.isValid()?Ye<this?this:Ye:Q()}),kl=de("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Ye=$n.apply(null,arguments);return this.isValid()&&Ye.isValid()?Ye>this?this:Ye:Q()});function uc(Ye,ut){var Dt,Vt;if(1===ut.length&&B(ut[0])&&(ut=ut[0]),!ut.length)return $n();for(Dt=ut[0],Vt=1;Vt<ut.length;++Vt)(!ut[Vt].isValid()||ut[Vt][Ye](Dt))&&(Dt=ut[Vt]);return Dt}var bu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Tu(Ye){var ut=Ze(Ye),Dt=ut.year||0,Vt=ut.quarter||0,cr=ut.month||0,$r=ut.week||ut.isoWeek||0,Ls=ut.day||0,Ki=ut.hour||0,vn=ut.minute||0,yo=ut.second||0,ca=ut.millisecond||0;this._isValid=function Qd(Ye){var ut,Vt,Dt=!1,cr=bu.length;for(ut in Ye)if(W(Ye,ut)&&(-1===As.call(bu,ut)||null!=Ye[ut]&&isNaN(Ye[ut])))return!1;for(Vt=0;Vt<cr;++Vt)if(Ye[bu[Vt]]){if(Dt)return!1;parseFloat(Ye[bu[Vt]])!==wt(Ye[bu[Vt]])&&(Dt=!0)}return!0}(ut),this._milliseconds=+ca+1e3*yo+6e4*vn+1e3*Ki*60*60,this._days=+Ls+7*$r,this._months=+cr+3*Vt+12*Dt,this._data={},this._locale=fn(),this._bubble()}function zn(Ye){return Ye instanceof Tu}function Jl(Ye){return Ye<0?-1*Math.round(-1*Ye):Math.round(Ye)}function Xl(Ye,ut){Ae(Ye,0,0,function(){var Dt=this.utcOffset(),Vt="+";return Dt<0&&(Dt=-Dt,Vt="-"),Vt+Te(~~(Dt/60),2)+ut+Te(~~Dt%60,2)})}Xl("Z",":"),Xl("ZZ",""),Tt("Z",ns),Tt("ZZ",ns),qt(["Z","ZZ"],function(Ye,ut,Dt){Dt._useUTC=!0,Dt._tzm=Ou(ns,Ye)});var Yo=/([\+\-]|\d\d)/gi;function Ou(Ye,ut){var cr,$r,Dt=(ut||"").match(Ye);return null===Dt?null:0===($r=60*(cr=((Dt[Dt.length-1]||[])+"").match(Yo)||["-",0,0])[1]+wt(cr[2]))?0:"+"===cr[0]?$r:-$r}function Zo(Ye,ut){var Dt,Vt;return ut._isUTC?(Dt=ut.clone(),Vt=(ne(Ye)||$(Ye)?Ye.valueOf():$n(Ye).valueOf())-Dt.valueOf(),Dt._d.setTime(Dt._d.valueOf()+Vt),x.updateOffset(Dt,!1),Dt):$n(Ye).local()}function Jn(Ye){return-Math.round(Ye._d.getTimezoneOffset())}function qc(){return!!this.isValid()&&this._isUTC&&0===this._offset}x.updateOffset=function(){};var Du=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,eh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jo(Ye,ut){var cr,$r,Ls,Dt=Ye,Vt=null;return zn(Ye)?Dt={ms:Ye._milliseconds,d:Ye._days,M:Ye._months}:G(Ye)||!isNaN(+Ye)?(Dt={},ut?Dt[ut]=+Ye:Dt.milliseconds=+Ye):(Vt=Du.exec(Ye))?(cr="-"===Vt[1]?-1:1,Dt={y:0,d:wt(Vt[2])*cr,h:wt(Vt[3])*cr,m:wt(Vt[4])*cr,s:wt(Vt[5])*cr,ms:wt(Jl(1e3*Vt[6]))*cr}):(Vt=eh.exec(Ye))?Dt={y:el(Vt[2],cr="-"===Vt[1]?-1:1),M:el(Vt[3],cr),w:el(Vt[4],cr),d:el(Vt[5],cr),h:el(Vt[6],cr),m:el(Vt[7],cr),s:el(Vt[8],cr)}:null==Dt?Dt={}:"object"==typeof Dt&&("from"in Dt||"to"in Dt)&&(Ls=function ua(Ye,ut){var Dt;return Ye.isValid()&&ut.isValid()?(ut=Zo(ut,Ye),Ye.isBefore(ut)?Dt=eu(Ye,ut):((Dt=eu(ut,Ye)).milliseconds=-Dt.milliseconds,Dt.months=-Dt.months),Dt):{milliseconds:0,months:0}}($n(Dt.from),$n(Dt.to)),(Dt={}).ms=Ls.milliseconds,Dt.M=Ls.months),$r=new Tu(Dt),zn(Ye)&&W(Ye,"_locale")&&($r._locale=Ye._locale),zn(Ye)&&W(Ye,"_isValid")&&($r._isValid=Ye._isValid),$r}function el(Ye,ut){var Dt=Ye&&parseFloat(Ye.replace(",","."));return(isNaN(Dt)?0:Dt)*ut}function eu(Ye,ut){var Dt={};return Dt.months=ut.month()-Ye.month()+12*(ut.year()-Ye.year()),Ye.clone().add(Dt.months,"M").isAfter(ut)&&--Dt.months,Dt.milliseconds=+ut-+Ye.clone().add(Dt.months,"M"),Dt}function xu(Ye,ut){return function(Dt,Vt){var $r;return null!==Vt&&!isNaN(+Vt)&&(_e(ut,"moment()."+ut+"(period, number) is deprecated. Please use moment()."+ut+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),$r=Dt,Dt=Vt,Vt=$r),Pd(this,jo(Dt,Vt),Ye),this}}function Pd(Ye,ut,Dt,Vt){var cr=ut._milliseconds,$r=Jl(ut._days),Ls=Jl(ut._months);!Ye.isValid()||(Vt=Vt??!0,Ls&&bs(Ye,Zt(Ye,"Month")+Ls*Dt),$r&&ar(Ye,"Date",Zt(Ye,"Date")+$r*Dt),cr&&Ye._d.setTime(Ye._d.valueOf()+cr*Dt),Vt&&x.updateOffset(Ye,$r||Ls))}jo.fn=Tu.prototype,jo.invalid=function Ha(){return jo(NaN)};var qu=xu(1,"add"),oo=xu(-1,"subtract");function tu(Ye){return"string"==typeof Ye||Ye instanceof String}function th(Ye){return ne(Ye)||$(Ye)||tu(Ye)||G(Ye)||function tl(Ye){var ut=B(Ye),Dt=!1;return ut&&(Dt=0===Ye.filter(function(Vt){return!G(Vt)&&tu(Ye)}).length),ut&&Dt}(Ye)||function rh(Ye){var cr,ut=U(Ye)&&!Y(Ye),Dt=!1,Vt=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Ls=Vt.length;for(cr=0;cr<Ls;cr+=1)Dt=Dt||W(Ye,Vt[cr]);return ut&&Dt}(Ye)||null==Ye}function aa(Ye){var cr,ut=U(Ye)&&!Y(Ye),Dt=!1,Vt=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(cr=0;cr<Vt.length;cr+=1)Dt=Dt||W(Ye,Vt[cr]);return ut&&Dt}function wc(Ye,ut){if(Ye.date()<ut.date())return-wc(ut,Ye);var Dt=12*(ut.year()-Ye.year())+(ut.month()-Ye.month()),Vt=Ye.clone().add(Dt,"months");return-(Dt+(ut-Vt<0?(ut-Vt)/(Vt-Ye.clone().add(Dt-1,"months")):(ut-Vt)/(Ye.clone().add(Dt+1,"months")-Vt)))||0}function Su(Ye){var ut;return void 0===Ye?this._locale._abbr:(null!=(ut=fn(Ye))&&(this._locale=ut),this)}x.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",x.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var su=de("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(Ye){return void 0===Ye?this.localeData():this.locale(Ye)});function Ld(){return this._locale}var sl=6e4,il=60*sl,xo=3506328*il;function va(Ye,ut){return(Ye%ut+ut)%ut}function _c(Ye,ut,Dt){return Ye<100&&Ye>=0?new Date(Ye+400,ut,Dt)-xo:new Date(Ye,ut,Dt).valueOf()}function dt(Ye,ut,Dt){return Ye<100&&Ye>=0?Date.UTC(Ye+400,ut,Dt)-xo:Date.UTC(Ye,ut,Dt)}function On(Ye,ut){return ut.erasAbbrRegex(Ye)}function Lu(){var cr,$r,Ye=[],ut=[],Dt=[],Vt=[],Ls=this.eras();for(cr=0,$r=Ls.length;cr<$r;++cr)ut.push(bt(Ls[cr].name)),Ye.push(bt(Ls[cr].abbr)),Dt.push(bt(Ls[cr].narrow)),Vt.push(bt(Ls[cr].name)),Vt.push(bt(Ls[cr].abbr)),Vt.push(bt(Ls[cr].narrow));this._erasRegex=new RegExp("^("+Vt.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+ut.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+Ye.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+Dt.join("|")+")","i")}function rd(Ye,ut){Ae(0,[Ye,Ye.length],0,ut)}function Ih(Ye,ut,Dt,Vt,cr){var $r;return null==Ye?er(this,Vt,cr).year:(ut>($r=Ir(Ye,Vt,cr))&&(ut=$r),xa.call(this,Ye,ut,Dt,Vt,cr))}function xa(Ye,ut,Dt,Vt,cr){var $r=Dr(Ye,ut,Dt,Vt,cr),Ls=yn($r.year,0,$r.dayOfYear);return this.year(Ls.getUTCFullYear()),this.month(Ls.getUTCMonth()),this.date(Ls.getUTCDate()),this}Ae("N",0,0,"eraAbbr"),Ae("NN",0,0,"eraAbbr"),Ae("NNN",0,0,"eraAbbr"),Ae("NNNN",0,0,"eraName"),Ae("NNNNN",0,0,"eraNarrow"),Ae("y",["y",1],"yo","eraYear"),Ae("y",["yy",2],0,"eraYear"),Ae("y",["yyy",3],0,"eraYear"),Ae("y",["yyyy",4],0,"eraYear"),Tt("N",On),Tt("NN",On),Tt("NNN",On),Tt("NNNN",function wh(Ye,ut){return ut.erasNameRegex(Ye)}),Tt("NNNNN",function ja(Ye,ut){return ut.erasNarrowRegex(Ye)}),qt(["N","NN","NNN","NNNN","NNNNN"],function(Ye,ut,Dt,Vt){var cr=Dt._locale.erasParse(Ye,Vt,Dt._strict);cr?ie(Dt).era=cr:ie(Dt).invalidEra=Ye}),Tt("y",Kr),Tt("yy",Kr),Tt("yyy",Kr),Tt("yyyy",Kr),Tt("yo",function Rh(Ye,ut){return ut._eraYearOrdinalRegex||Kr}),qt(["y","yy","yyy","yyyy"],0),qt(["yo"],function(Ye,ut,Dt,Vt){var cr;Dt._locale._eraYearOrdinalRegex&&(cr=Ye.match(Dt._locale._eraYearOrdinalRegex)),ut[0]=Dt._locale.eraYearOrdinalParse?Dt._locale.eraYearOrdinalParse(Ye,cr):parseInt(Ye,10)}),Ae(0,["gg",2],0,function(){return this.weekYear()%100}),Ae(0,["GG",2],0,function(){return this.isoWeekYear()%100}),rd("gggg","weekYear"),rd("ggggg","weekYear"),rd("GGGG","isoWeekYear"),rd("GGGGG","isoWeekYear"),Xe("weekYear","gg"),Xe("isoWeekYear","GG"),st("weekYear",1),st("isoWeekYear",1),Tt("G",Gr),Tt("g",Gr),Tt("GG",$t,os),Tt("gg",$t,os),Tt("GGGG",gr,pt),Tt("gggg",gr,pt),Tt("GGGGG",vr,Ut),Tt("ggggg",vr,Ut),yr(["gggg","ggggg","GGGG","GGGGG"],function(Ye,ut,Dt,Vt){ut[Vt.substr(0,2)]=wt(Ye)}),yr(["gg","GG"],function(Ye,ut,Dt,Vt){ut[Vt]=x.parseTwoDigitYear(Ye)}),Ae("Q",0,"Qo","quarter"),Xe("quarter","Q"),st("quarter",7),Tt("Q",ss),qt("Q",function(Ye,ut){ut[1]=3*(wt(Ye)-1)}),Ae("D",["DD",2],"Do","date"),Xe("date","D"),st("date",9),Tt("D",$t),Tt("DD",$t,os),Tt("Do",function(Ye,ut){return Ye?ut._dayOfMonthOrdinalParse||ut._ordinalParse:ut._dayOfMonthOrdinalParseLenient}),qt(["D","DD"],2),qt("Do",function(Ye,ut){ut[2]=wt(Ye.match($t)[0])});var P_=zt("Date",!0);Ae("DDD",["DDDD",3],"DDDo","dayOfYear"),Xe("dayOfYear","DDD"),st("dayOfYear",4),Tt("DDD",hr),Tt("DDDD",Hr),qt(["DDD","DDDD"],function(Ye,ut,Dt){Dt._dayOfYear=wt(Ye)}),Ae("m",["mm",2],0,"minute"),Xe("minute","m"),st("minute",14),Tt("m",$t),Tt("mm",$t,os),qt(["m","mm"],4);var Hi=zt("Minutes",!1);Ae("s",["ss",2],0,"second"),Xe("second","s"),st("second",15),Tt("s",$t),Tt("ss",$t,os),qt(["s","ss"],5);var tc,Bh,Rd=zt("Seconds",!1);for(Ae("S",0,0,function(){return~~(this.millisecond()/100)}),Ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Ae(0,["SSS",3],0,"millisecond"),Ae(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Ae(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Ae(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Ae(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Ae(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Ae(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Xe("millisecond","ms"),st("millisecond",16),Tt("S",hr,ss),Tt("SS",hr,os),Tt("SSS",hr,Hr),tc="SSSS";tc.length<=9;tc+="S")Tt(tc,Kr);function Id(Ye,ut){ut[6]=wt(1e3*("0."+Ye))}for(tc="S";tc.length<=9;tc+="S")qt(tc,Id);Bh=zt("Milliseconds",!1),Ae("z",0,0,"zoneAbbr"),Ae("zz",0,0,"zoneName");var ni=le.prototype;function jh(Ye){return Ye}ni.add=qu,ni.calendar=function ko(Ye,ut){1===arguments.length&&(arguments[0]?th(arguments[0])?(Ye=arguments[0],ut=void 0):aa(arguments[0])&&(ut=arguments[0],Ye=void 0):(Ye=void 0,ut=void 0));var Dt=Ye||$n(),Vt=Zo(Dt,this).startOf("day"),cr=x.calendarFormat(this,Vt)||"sameElse",$r=ut&&(he(ut[cr])?ut[cr].call(this,Dt):ut[cr]);return this.format($r||this.localeData().calendar(cr,this,$n(Dt)))},ni.clone=function Dd(){return new le(this)},ni.diff=function ql(Ye,ut,Dt){var Vt,cr,$r;if(!this.isValid())return NaN;if(!(Vt=Zo(Ye,this)).isValid())return NaN;switch(cr=6e4*(Vt.utcOffset()-this.utcOffset()),ut=rt(ut)){case"year":$r=wc(this,Vt)/12;break;case"month":$r=wc(this,Vt);break;case"quarter":$r=wc(this,Vt)/3;break;case"second":$r=(this-Vt)/1e3;break;case"minute":$r=(this-Vt)/6e4;break;case"hour":$r=(this-Vt)/36e5;break;case"day":$r=(this-Vt-cr)/864e5;break;case"week":$r=(this-Vt-cr)/6048e5;break;default:$r=this-Vt}return Dt?$r:kt($r)},ni.endOf=function mt(Ye){var ut,Dt;if(void 0===(Ye=rt(Ye))||"millisecond"===Ye||!this.isValid())return this;switch(Dt=this._isUTC?dt:_c,Ye){case"year":ut=Dt(this.year()+1,0,1)-1;break;case"quarter":ut=Dt(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":ut=Dt(this.year(),this.month()+1,1)-1;break;case"week":ut=Dt(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":ut=Dt(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":ut=Dt(this.year(),this.month(),this.date()+1)-1;break;case"hour":ut=this._d.valueOf(),ut+=il-va(ut+(this._isUTC?0:this.utcOffset()*sl),il)-1;break;case"minute":ut=this._d.valueOf(),ut+=sl-va(ut,sl)-1;break;case"second":ut=this._d.valueOf(),ut+=1e3-va(ut,1e3)-1}return this._d.setTime(ut),x.updateOffset(this,!0),this},ni.format=function Lh(Ye){Ye||(Ye=this.isUtc()?x.defaultFormatUtc:x.defaultFormat);var ut=Pe(this,Ye);return this.localeData().postformat(ut)},ni.from=function Rc(Ye,ut){return this.isValid()&&(ne(Ye)&&Ye.isValid()||$n(Ye).isValid())?jo({to:this,from:Ye}).locale(this.locale()).humanize(!ut):this.localeData().invalidDate()},ni.fromNow=function Sd(Ye){return this.from($n(),Ye)},ni.to=function Ad(Ye,ut){return this.isValid()&&(ne(Ye)&&Ye.isValid()||$n(Ye).isValid())?jo({from:this,to:Ye}).locale(this.locale()).humanize(!ut):this.localeData().invalidDate()},ni.toNow=function ec(Ye){return this.to($n(),Ye)},ni.get=function Pr(Ye){return he(this[Ye=rt(Ye)])?this[Ye]():this},ni.invalidAt=function Zs(){return ie(this).overflow},ni.isAfter=function T_(Ye,ut){var Dt=ne(Ye)?Ye:$n(Ye);return!(!this.isValid()||!Dt.isValid())&&("millisecond"===(ut=rt(ut)||"millisecond")?this.valueOf()>Dt.valueOf():Dt.valueOf()<this.clone().startOf(ut).valueOf())},ni.isBefore=function Lc(Ye,ut){var Dt=ne(Ye)?Ye:$n(Ye);return!(!this.isValid()||!Dt.isValid())&&("millisecond"===(ut=rt(ut)||"millisecond")?this.valueOf()<Dt.valueOf():this.clone().endOf(ut).valueOf()<Dt.valueOf())},ni.isBetween=function Ql(Ye,ut,Dt,Vt){var cr=ne(Ye)?Ye:$n(Ye),$r=ne(ut)?ut:$n(ut);return!!(this.isValid()&&cr.isValid()&&$r.isValid())&&("("===(Vt=Vt||"()")[0]?this.isAfter(cr,Dt):!this.isBefore(cr,Dt))&&(")"===Vt[1]?this.isBefore($r,Dt):!this.isAfter($r,Dt))},ni.isSame=function pl(Ye,ut){var Vt,Dt=ne(Ye)?Ye:$n(Ye);return!(!this.isValid()||!Dt.isValid())&&("millisecond"===(ut=rt(ut)||"millisecond")?this.valueOf()===Dt.valueOf():(Vt=Dt.valueOf(),this.clone().startOf(ut).valueOf()<=Vt&&Vt<=this.clone().endOf(ut).valueOf()))},ni.isSameOrAfter=function ed(Ye,ut){return this.isSame(Ye,ut)||this.isAfter(Ye,ut)},ni.isSameOrBefore=function rl(Ye,ut){return this.isSame(Ye,ut)||this.isBefore(Ye,ut)},ni.isValid=function Es(){return Z(this)},ni.lang=su,ni.locale=Su,ni.localeData=Ld,ni.max=kl,ni.min=no,ni.parsingFlags=function ei(){return ue({},ie(this))},ni.set=function kr(Ye,ut){if("object"==typeof Ye){var Vt,Dt=function Mt(Ye){var Dt,ut=[];for(Dt in Ye)W(Ye,Dt)&&ut.push({unit:Dt,priority:lt[Dt]});return ut.sort(function(Vt,cr){return Vt.priority-cr.priority}),ut}(Ye=Ze(Ye)),cr=Dt.length;for(Vt=0;Vt<cr;Vt++)this[Dt[Vt].unit](Ye[Dt[Vt].unit])}else if(he(this[Ye=rt(Ye)]))return this[Ye](ut);return this},ni.startOf=function xt(Ye){var ut,Dt;if(void 0===(Ye=rt(Ye))||"millisecond"===Ye||!this.isValid())return this;switch(Dt=this._isUTC?dt:_c,Ye){case"year":ut=Dt(this.year(),0,1);break;case"quarter":ut=Dt(this.year(),this.month()-this.month()%3,1);break;case"month":ut=Dt(this.year(),this.month(),1);break;case"week":ut=Dt(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":ut=Dt(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":ut=Dt(this.year(),this.month(),this.date());break;case"hour":ut=this._d.valueOf(),ut-=va(ut+(this._isUTC?0:this.utcOffset()*sl),il);break;case"minute":ut=this._d.valueOf(),ut-=va(ut,sl);break;case"second":ut=this._d.valueOf(),ut-=va(ut,1e3)}return this._d.setTime(ut),x.updateOffset(this,!0),this},ni.subtract=oo,ni.toArray=function fr(){var Ye=this;return[Ye.year(),Ye.month(),Ye.date(),Ye.hour(),Ye.minute(),Ye.second(),Ye.millisecond()]},ni.toObject=function Ar(){var Ye=this;return{years:Ye.year(),months:Ye.month(),date:Ye.date(),hours:Ye.hours(),minutes:Ye.minutes(),seconds:Ye.seconds(),milliseconds:Ye.milliseconds()}},ni.toDate=function Kt(){return new Date(this.valueOf())},ni.toISOString=function fl(Ye){if(!this.isValid())return null;var ut=!0!==Ye,Dt=ut?this.clone().utc():this;return Dt.year()<0||Dt.year()>9999?Pe(Dt,ut?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):he(Date.prototype.toISOString)?ut?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Pe(Dt,"Z")):Pe(Dt,ut?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ni.inspect=function xd(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var Dt,Vt,Ye="moment",ut="";return this.isLocal()||(Ye=0===this.utcOffset()?"moment.utc":"moment.parseZone",ut="Z"),Dt="["+Ye+'("]',Vt=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(Dt+Vt+"-MM-DD[T]HH:mm:ss.SSS"+ut+'[")]')},typeof Symbol<"u"&&null!=Symbol.for&&(ni[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ni.toJSON=function Xr(){return this.isValid()?this.toISOString():null},ni.toString=function hc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ni.unix=function Ot(){return Math.floor(this.valueOf()/1e3)},ni.valueOf=function ct(){return this._d.valueOf()-6e4*(this._offset||0)},ni.creationData=function Qs(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ni.eraName=function wn(){var Ye,ut,Dt,Vt=this.localeData().eras();for(Ye=0,ut=Vt.length;Ye<ut;++Ye)if(Dt=this.clone().startOf("day").valueOf(),Vt[Ye].since<=Dt&&Dt<=Vt[Ye].until||Vt[Ye].until<=Dt&&Dt<=Vt[Ye].since)return Vt[Ye].name;return""},ni.eraNarrow=function Qi(){var Ye,ut,Dt,Vt=this.localeData().eras();for(Ye=0,ut=Vt.length;Ye<ut;++Ye)if(Dt=this.clone().startOf("day").valueOf(),Vt[Ye].since<=Dt&&Dt<=Vt[Ye].until||Vt[Ye].until<=Dt&&Dt<=Vt[Ye].since)return Vt[Ye].narrow;return""},ni.eraAbbr=function go(){var Ye,ut,Dt,Vt=this.localeData().eras();for(Ye=0,ut=Vt.length;Ye<ut;++Ye)if(Dt=this.clone().startOf("day").valueOf(),Vt[Ye].since<=Dt&&Dt<=Vt[Ye].until||Vt[Ye].until<=Dt&&Dt<=Vt[Ye].since)return Vt[Ye].abbr;return""},ni.eraYear=function Au(){var Ye,ut,Dt,Vt,cr=this.localeData().eras();for(Ye=0,ut=cr.length;Ye<ut;++Ye)if(Dt=cr[Ye].since<=cr[Ye].until?1:-1,Vt=this.clone().startOf("day").valueOf(),cr[Ye].since<=Vt&&Vt<=cr[Ye].until||cr[Ye].until<=Vt&&Vt<=cr[Ye].since)return(this.year()-x(cr[Ye].since).year())*Dt+cr[Ye].offset;return this.year()},ni.year=zi,ni.isLeapYear=function Zr(){return Ft(this.year())},ni.weekYear=function C_(Ye){return Ih.call(this,Ye,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ni.isoWeekYear=function sd(Ye){return Ih.call(this,Ye,this.isoWeek(),this.isoWeekday(),1,4)},ni.quarter=ni.quarters=function Uh(Ye){return null==Ye?Math.ceil((this.month()+1)/3):this.month(3*(Ye-1)+this.month()%3)},ni.month=Ns,ni.daysInMonth=function _i(){return Ys(this.year(),this.month())},ni.week=ni.weeks=function Mi(Ye){var ut=this.localeData().week(this);return null==Ye?ut:this.add(7*(Ye-ut),"d")},ni.isoWeek=ni.isoWeeks=function Xi(Ye){var ut=er(this,1,4).week;return null==Ye?ut:this.add(7*(Ye-ut),"d")},ni.weeksInYear=function ks(){var Ye=this.localeData()._week;return Ir(this.year(),Ye.dow,Ye.doy)},ni.weeksInWeekYear=function O_(){var Ye=this.localeData()._week;return Ir(this.weekYear(),Ye.dow,Ye.doy)},ni.isoWeeksInYear=function Fp(){return Ir(this.year(),1,4)},ni.isoWeeksInISOWeekYear=function id(){return Ir(this.isoWeekYear(),1,4)},ni.date=P_,ni.day=ni.days=function Co(Ye){if(!this.isValid())return null!=Ye?this:NaN;var ut=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=Ye?(Ye=function Hs(Ye,ut){return"string"!=typeof Ye?Ye:isNaN(Ye)?"number"==typeof(Ye=ut.weekdaysParse(Ye))?Ye:null:parseInt(Ye,10)}(Ye,this.localeData()),this.add(Ye-ut,"d")):ut},ni.weekday=function Ja(Ye){if(!this.isValid())return null!=Ye?this:NaN;var ut=(this.day()+7-this.localeData()._week.dow)%7;return null==Ye?ut:this.add(Ye-ut,"d")},ni.isoWeekday=function Kn(Ye){if(!this.isValid())return null!=Ye?this:NaN;if(null!=Ye){var ut=function ki(Ye,ut){return"string"==typeof Ye?ut.weekdaysParse(Ye)%7||7:isNaN(Ye)?null:Ye}(Ye,this.localeData());return this.day(this.day()%7?ut:ut-7)}return this.day()||7},ni.dayOfYear=function sh(Ye){var ut=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==Ye?ut:this.add(Ye-ut,"d")},ni.hour=ni.hours=Bt,ni.minute=ni.minutes=Hi,ni.second=ni.seconds=Rd,ni.millisecond=ni.milliseconds=Bh,ni.utcOffset=function Ac(Ye,ut,Dt){var cr,Vt=this._offset||0;if(!this.isValid())return null!=Ye?this:NaN;if(null!=Ye){if("string"==typeof Ye){if(null===(Ye=Ou(ns,Ye)))return this}else Math.abs(Ye)<16&&!Dt&&(Ye*=60);return!this._isUTC&&ut&&(cr=Jn(this)),this._offset=Ye,this._isUTC=!0,null!=cr&&this.add(cr,"m"),Vt!==Ye&&(!ut||this._changeInProgress?Pd(this,jo(Ye-Vt,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,x.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?Vt:Jn(this)},ni.utc=function Qc(Ye){return this.utcOffset(0,Ye)},ni.local=function Da(Ye){return this._isUTC&&(this.utcOffset(0,Ye),this._isUTC=!1,Ye&&this.subtract(Jn(this),"m")),this},ni.parseZone=function Qu(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var Ye=Ou(Jr,this._i);null!=Ye?this.utcOffset(Ye):this.utcOffset(0,!0)}return this},ni.hasAlignedHourOffset=function dc(Ye){return!!this.isValid()&&(Ye=Ye?$n(Ye).utcOffset():0,(this.utcOffset()-Ye)%60==0)},ni.isDST=function Ba(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ni.isLocal=function Do(){return!!this.isValid()&&!this._isUTC},ni.isUtcOffset=function Al(){return!!this.isValid()&&this._isUTC},ni.isUtc=qc,ni.isUTC=qc,ni.zoneAbbr=function wu(){return this._isUTC?"UTC":""},ni.zoneName=function fc(){return this._isUTC?"Coordinated Universal Time":""},ni.dates=de("dates accessor is deprecated. Use date instead.",P_),ni.months=de("months accessor is deprecated. Use month instead",Ns),ni.years=de("years accessor is deprecated. Use year instead",zi),ni.zone=de("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function Ah(Ye,ut){return null!=Ye?("string"!=typeof Ye&&(Ye=-Ye),this.utcOffset(Ye,ut),this):-this.utcOffset()}),ni.isDSTShifted=de("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function Pu(){if(!H(this._isDSTShifted))return this._isDSTShifted;var ut,Ye={};return ee(Ye,this),(Ye=Ua(Ye))._a?(ut=Ye._isUTC?ae(Ye._a):$n(Ye._a),this._isDSTShifted=this.isValid()&&function Cu(Ye,ut,Dt){var Ls,Vt=Math.min(Ye.length,ut.length),cr=Math.abs(Ye.length-ut.length),$r=0;for(Ls=0;Ls<Vt;Ls++)(Dt&&Ye[Ls]!==ut[Ls]||!Dt&&wt(Ye[Ls])!==wt(ut[Ls]))&&$r++;return $r+cr}(Ye._a,ut.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Cn=De.prototype;function Fe(Ye,ut,Dt,Vt){var cr=fn(),$r=ae().set(Vt,ut);return cr[Dt]($r,Ye)}function Qe(Ye,ut,Dt){if(G(Ye)&&(ut=Ye,Ye=void 0),Ye=Ye||"",null!=ut)return Fe(Ye,ut,Dt,"month");var Vt,cr=[];for(Vt=0;Vt<12;Vt++)cr[Vt]=Fe(Ye,Vt,Dt,"month");return cr}function _t(Ye,ut,Dt,Vt){"boolean"==typeof Ye?(G(ut)&&(Dt=ut,ut=void 0),ut=ut||""):(Dt=ut=Ye,Ye=!1,G(ut)&&(Dt=ut,ut=void 0),ut=ut||"");var Ls,cr=fn(),$r=Ye?cr._week.dow:0,Ki=[];if(null!=Dt)return Fe(ut,(Dt+$r)%7,Vt,"day");for(Ls=0;Ls<7;Ls++)Ki[Ls]=Fe(ut,(Ls+$r)%7,Vt,"day");return Ki}Cn.calendar=function ge(Ye,ut,Dt){var Vt=this._calendar[Ye]||this._calendar.sameElse;return he(Vt)?Vt.call(ut,Dt):Vt},Cn.longDateFormat=function Ve(Ye){var ut=this._longDateFormat[Ye],Dt=this._longDateFormat[Ye.toUpperCase()];return ut||!Dt?ut:(this._longDateFormat[Ye]=Dt.match(Le).map(function(Vt){return"MMMM"===Vt||"MM"===Vt||"DD"===Vt||"dddd"===Vt?Vt.slice(1):Vt}).join(""),this._longDateFormat[Ye])},Cn.invalidDate=function Ie(){return this._invalidDate},Cn.ordinal=function He(Ye){return this._ordinal.replace("%d",Ye)},Cn.preparse=jh,Cn.postformat=jh,Cn.relativeTime=function et(Ye,ut,Dt,Vt){var cr=this._relativeTime[Dt];return he(cr)?cr(Ye,ut,Dt,Vt):cr.replace(/%d/i,Ye)},Cn.pastFuture=function nt(Ye,ut){var Dt=this._relativeTime[Ye>0?"future":"past"];return he(Dt)?Dt(ut):Dt.replace(/%s/i,ut)},Cn.set=function ye(Ye){var ut,Dt;for(Dt in Ye)W(Ye,Dt)&&(he(ut=Ye[Dt])?this[Dt]=ut:this["_"+Dt]=ut);this._config=Ye,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Cn.eras=function ji(Ye,ut){var Dt,Vt,cr,$r=this._eras||fn("en")._eras;for(Dt=0,Vt=$r.length;Dt<Vt;++Dt)switch("string"==typeof $r[Dt].since&&(cr=x($r[Dt].since).startOf("day"),$r[Dt].since=cr.valueOf()),typeof $r[Dt].until){case"undefined":$r[Dt].until=1/0;break;case"string":cr=x($r[Dt].until).startOf("day").valueOf(),$r[Dt].until=cr.valueOf()}return $r},Cn.erasParse=function ln(Ye,ut,Dt){var Vt,cr,Ls,Ki,vn,$r=this.eras();for(Ye=Ye.toUpperCase(),Vt=0,cr=$r.length;Vt<cr;++Vt)if(Ls=$r[Vt].name.toUpperCase(),Ki=$r[Vt].abbr.toUpperCase(),vn=$r[Vt].narrow.toUpperCase(),Dt)switch(ut){case"N":case"NN":case"NNN":if(Ki===Ye)return $r[Vt];break;case"NNNN":if(Ls===Ye)return $r[Vt];break;case"NNNNN":if(vn===Ye)return $r[Vt]}else if([Ls,Ki,vn].indexOf(Ye)>=0)return $r[Vt]},Cn.erasConvertYear=function Un(Ye,ut){var Dt=Ye.since<=Ye.until?1:-1;return void 0===ut?x(Ye.since).year():x(Ye.since).year()+(ut-Ye.offset)*Dt},Cn.erasAbbrRegex=function wd(Ye){return W(this,"_erasAbbrRegex")||Lu.call(this),Ye?this._erasAbbrRegex:this._erasRegex},Cn.erasNameRegex=function td(Ye){return W(this,"_erasNameRegex")||Lu.call(this),Ye?this._erasNameRegex:this._erasRegex},Cn.erasNarrowRegex=function pc(Ye){return W(this,"_erasNarrowRegex")||Lu.call(this),Ye?this._erasNarrowRegex:this._erasRegex},Cn.months=function Ci(Ye,ut){return Ye?B(this._months)?this._months[Ye.month()]:this._months[(this._months.isFormat||Ai).test(ut)?"format":"standalone"][Ye.month()]:B(this._months)?this._months:this._months.standalone},Cn.monthsShort=function gt(Ye,ut){return Ye?B(this._monthsShort)?this._monthsShort[Ye.month()]:this._monthsShort[Ai.test(ut)?"format":"standalone"][Ye.month()]:B(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Cn.monthsParse=function xr(Ye,ut,Dt){var Vt,cr,$r;if(this._monthsParseExact)return Wr.call(this,Ye,ut,Dt);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Vt=0;Vt<12;Vt++){if(cr=ae([2e3,Vt]),Dt&&!this._longMonthsParse[Vt]&&(this._longMonthsParse[Vt]=new RegExp("^"+this.months(cr,"").replace(".","")+"$","i"),this._shortMonthsParse[Vt]=new RegExp("^"+this.monthsShort(cr,"").replace(".","")+"$","i")),!Dt&&!this._monthsParse[Vt]&&($r="^"+this.months(cr,"")+"|^"+this.monthsShort(cr,""),this._monthsParse[Vt]=new RegExp($r.replace(".",""),"i")),Dt&&"MMMM"===ut&&this._longMonthsParse[Vt].test(Ye))return Vt;if(Dt&&"MMM"===ut&&this._shortMonthsParse[Vt].test(Ye))return Vt;if(!Dt&&this._monthsParse[Vt].test(Ye))return Vt}},Cn.monthsRegex=function hi(Ye){return this._monthsParseExact?(W(this,"_monthsRegex")||Di.call(this),Ye?this._monthsStrictRegex:this._monthsRegex):(W(this,"_monthsRegex")||(this._monthsRegex=Tn),this._monthsStrictRegex&&Ye?this._monthsStrictRegex:this._monthsRegex)},Cn.monthsShortRegex=function gi(Ye){return this._monthsParseExact?(W(this,"_monthsRegex")||Di.call(this),Ye?this._monthsShortStrictRegex:this._monthsShortRegex):(W(this,"_monthsShortRegex")||(this._monthsShortRegex=ds),this._monthsShortStrictRegex&&Ye?this._monthsShortStrictRegex:this._monthsShortRegex)},Cn.week=function Ps(Ye){return er(Ye,this._week.dow,this._week.doy).week},Cn.firstDayOfYear=function Gs(){return this._week.doy},Cn.firstDayOfWeek=function yi(){return this._week.dow},Cn.weekdays=function ya(Ye,ut){var Dt=B(this._weekdays)?this._weekdays:this._weekdays[Ye&&!0!==Ye&&this._weekdays.isFormat.test(ut)?"format":"standalone"];return!0===Ye?sn(Dt,this._week.dow):Ye?Dt[Ye.day()]:Dt},Cn.weekdaysMin=function sa(Ye){return!0===Ye?sn(this._weekdaysMin,this._week.dow):Ye?this._weekdaysMin[Ye.day()]:this._weekdaysMin},Cn.weekdaysShort=function Wo(Ye){return!0===Ye?sn(this._weekdaysShort,this._week.dow):Ye?this._weekdaysShort[Ye.day()]:this._weekdaysShort},Cn.weekdaysParse=function nn(Ye,ut,Dt){var Vt,cr,$r;if(this._weekdaysParseExact)return ia.call(this,Ye,ut,Dt);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Vt=0;Vt<7;Vt++){if(cr=ae([2e3,1]).day(Vt),Dt&&!this._fullWeekdaysParse[Vt]&&(this._fullWeekdaysParse[Vt]=new RegExp("^"+this.weekdays(cr,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Vt]=new RegExp("^"+this.weekdaysShort(cr,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Vt]=new RegExp("^"+this.weekdaysMin(cr,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[Vt]||($r="^"+this.weekdays(cr,"")+"|^"+this.weekdaysShort(cr,"")+"|^"+this.weekdaysMin(cr,""),this._weekdaysParse[Vt]=new RegExp($r.replace(".",""),"i")),Dt&&"dddd"===ut&&this._fullWeekdaysParse[Vt].test(Ye))return Vt;if(Dt&&"ddd"===ut&&this._shortWeekdaysParse[Vt].test(Ye))return Vt;if(Dt&&"dd"===ut&&this._minWeekdaysParse[Vt].test(Ye))return Vt;if(!Dt&&this._weekdaysParse[Vt].test(Ye))return Vt}},Cn.weekdaysRegex=function Yn(Ye){return this._weekdaysParseExact?(W(this,"_weekdaysRegex")||Ts.call(this),Ye?this._weekdaysStrictRegex:this._weekdaysRegex):(W(this,"_weekdaysRegex")||(this._weekdaysRegex=An),this._weekdaysStrictRegex&&Ye?this._weekdaysStrictRegex:this._weekdaysRegex)},Cn.weekdaysShortRegex=function hl(Ye){return this._weekdaysParseExact?(W(this,"_weekdaysRegex")||Ts.call(this),Ye?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(W(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gn),this._weekdaysShortStrictRegex&&Ye?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Cn.weekdaysMinRegex=function Sr(Ye){return this._weekdaysParseExact?(W(this,"_weekdaysRegex")||Ts.call(this),Ye?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(W(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=hn),this._weekdaysMinStrictRegex&&Ye?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Cn.isPM=function ai(Ye){return"p"===(Ye+"").toLowerCase().charAt(0)},Cn.meridiem=function Wt(Ye,ut,Dt){return Ye>11?Dt?"pm":"PM":Dt?"am":"AM"},fs("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(Ye){var ut=Ye%10;return Ye+(1===wt(Ye%100/10)?"th":1===ut?"st":2===ut?"nd":3===ut?"rd":"th")}}),x.lang=de("moment.lang is deprecated. Use moment.locale instead.",fs),x.langData=de("moment.langData is deprecated. Use moment.localeData instead.",fn);var rs=Math.abs;function ri(Ye,ut,Dt,Vt){var cr=jo(ut,Dt);return Ye._milliseconds+=Vt*cr._milliseconds,Ye._days+=Vt*cr._days,Ye._months+=Vt*cr._months,Ye._bubble()}function cn(Ye){return Ye<0?Math.floor(Ye):Math.ceil(Ye)}function Pn(Ye){return 4800*Ye/146097}function Vo(Ye){return 146097*Ye/4800}function Fa(Ye){return function(){return this.as(Ye)}}var Np=Fa("ms"),Fh=Fa("s"),Wp=Fa("m"),ih=Fa("h"),D_=Fa("d"),Vp=Fa("w"),Ay=Fa("M"),Cm=Fa("Q"),zp=Fa("y");function ol(Ye){return function(){return this.isValid()?this._data[Ye]:NaN}}var Ru=ol("milliseconds"),Hp=ol("seconds"),Gp=ol("minutes"),Kp=ol("hours"),Yp=ol("days"),Zp=ol("months"),Sa=ol("years");var la=Math.round,oh={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function nd(Ye,ut,Dt,Vt,cr){return cr.relativeTime(ut||1,!!Dt,Ye,Vt)}var rc=Math.abs;function Ll(Ye){return(Ye>0)-(Ye<0)||+Ye}function Uc(){if(!this.isValid())return this.localeData().invalidDate();var Vt,cr,$r,Ls,vn,yo,ca,ad,Ye=rc(this._milliseconds)/1e3,ut=rc(this._days),Dt=rc(this._months),Ki=this.asSeconds();return Ki?(Vt=kt(Ye/60),cr=kt(Vt/60),Ye%=60,Vt%=60,$r=kt(Dt/12),Dt%=12,Ls=Ye?Ye.toFixed(3).replace(/\.?0+$/,""):"",vn=Ki<0?"-":"",yo=Ll(this._months)!==Ll(Ki)?"-":"",ca=Ll(this._days)!==Ll(Ki)?"-":"",ad=Ll(this._milliseconds)!==Ll(Ki)?"-":"",vn+"P"+($r?yo+$r+"Y":"")+(Dt?yo+Dt+"M":"")+(ut?ca+ut+"D":"")+(cr||Vt||Ye?"T":"")+(cr?ad+cr+"H":"")+(Vt?ad+Vt+"M":"")+(Ye?ad+Ls+"S":"")):"P0D"}var Zn=Tu.prototype;return Zn.isValid=function qd(){return this._isValid},Zn.abs=function Os(){var Ye=this._data;return this._milliseconds=rs(this._milliseconds),this._days=rs(this._days),this._months=rs(this._months),Ye.milliseconds=rs(Ye.milliseconds),Ye.seconds=rs(Ye.seconds),Ye.minutes=rs(Ye.minutes),Ye.hours=rs(Ye.hours),Ye.months=rs(Ye.months),Ye.years=rs(Ye.years),this},Zn.add=function vi(Ye,ut){return ri(this,Ye,ut,1)},Zn.subtract=function _n(Ye,ut){return ri(this,Ye,ut,-1)},Zn.as=function nl(Ye){if(!this.isValid())return NaN;var ut,Dt,Vt=this._milliseconds;if("month"===(Ye=rt(Ye))||"quarter"===Ye||"year"===Ye)switch(ut=this._days+Vt/864e5,Dt=this._months+Pn(ut),Ye){case"month":return Dt;case"quarter":return Dt/3;case"year":return Dt/12}else switch(ut=this._days+Math.round(Vo(this._months)),Ye){case"week":return ut/7+Vt/6048e5;case"day":return ut+Vt/864e5;case"hour":return 24*ut+Vt/36e5;case"minute":return 1440*ut+Vt/6e4;case"second":return 86400*ut+Vt/1e3;case"millisecond":return Math.floor(864e5*ut)+Vt;default:throw new Error("Unknown unit "+Ye)}},Zn.asMilliseconds=Np,Zn.asSeconds=Fh,Zn.asMinutes=Wp,Zn.asHours=ih,Zn.asDays=D_,Zn.asWeeks=Vp,Zn.asMonths=Ay,Zn.asQuarters=Cm,Zn.asYears=zp,Zn.valueOf=function mc(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*wt(this._months/12):NaN},Zn._bubble=function Fo(){var cr,$r,Ls,Ki,vn,Ye=this._milliseconds,ut=this._days,Dt=this._months,Vt=this._data;return Ye>=0&&ut>=0&&Dt>=0||Ye<=0&&ut<=0&&Dt<=0||(Ye+=864e5*cn(Vo(Dt)+ut),ut=0,Dt=0),Vt.milliseconds=Ye%1e3,cr=kt(Ye/1e3),Vt.seconds=cr%60,$r=kt(cr/60),Vt.minutes=$r%60,Ls=kt($r/60),Vt.hours=Ls%24,ut+=kt(Ls/24),Dt+=vn=kt(Pn(ut)),ut-=cn(Vo(vn)),Ki=kt(Dt/12),Dt%=12,Vt.days=ut,Vt.months=Dt,Vt.years=Ki,this},Zn.clone=function Ma(){return jo(this)},Zn.get=function da(Ye){return Ye=rt(Ye),this.isValid()?this[Ye+"s"]():NaN},Zn.milliseconds=Ru,Zn.seconds=Hp,Zn.minutes=Gp,Zn.hours=Kp,Zn.days=Yp,Zn.weeks=function nh(){return kt(this.days()/7)},Zn.months=Zp,Zn.years=Sa,Zn.humanize=function od(Ye,ut){if(!this.isValid())return this.localeData().invalidDate();var cr,$r,Dt=!1,Vt=oh;return"object"==typeof Ye&&(ut=Ye,Ye=!1),"boolean"==typeof Ye&&(Dt=Ye),"object"==typeof ut&&(Vt=Object.assign({},oh,ut),null!=ut.s&&null==ut.ss&&(Vt.ss=ut.s-1)),$r=function Ic(Ye,ut,Dt,Vt){var cr=jo(Ye).abs(),$r=la(cr.as("s")),Ls=la(cr.as("m")),Ki=la(cr.as("h")),vn=la(cr.as("d")),yo=la(cr.as("M")),ca=la(cr.as("w")),ad=la(cr.as("y")),Ud=$r<=Dt.ss&&["s",$r]||$r<Dt.s&&["ss",$r]||Ls<=1&&["m"]||Ls<Dt.m&&["mm",Ls]||Ki<=1&&["h"]||Ki<Dt.h&&["hh",Ki]||vn<=1&&["d"]||vn<Dt.d&&["dd",vn];return null!=Dt.w&&(Ud=Ud||ca<=1&&["w"]||ca<Dt.w&&["ww",ca]),(Ud=Ud||yo<=1&&["M"]||yo<Dt.M&&["MM",yo]||ad<=1&&["y"]||["yy",ad])[2]=ut,Ud[3]=+Ye>0,Ud[4]=Vt,nd.apply(null,Ud)}(this,!Dt,Vt,cr=this.localeData()),Dt&&($r=cr.pastFuture(+this,$r)),cr.postformat($r)},Zn.toISOString=Uc,Zn.toString=Uc,Zn.toJSON=Uc,Zn.locale=Su,Zn.localeData=Ld,Zn.toIsoString=de("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Uc),Zn.lang=su,Ae("X",0,0,"unix"),Ae("x",0,0,"valueOf"),Tt("x",Gr),Tt("X",/[+-]?\d+(\.\d{1,3})?/),qt("X",function(Ye,ut,Dt){Dt._d=new Date(1e3*parseFloat(Ye))}),qt("x",function(Ye,ut,Dt){Dt._d=new Date(wt(Ye))}),x.version="2.29.4",function w(Ye){D=Ye}($n),x.fn=ni,x.min=function Xu(){return uc("isBefore",[].slice.call(arguments,0))},x.max=function $l(){return uc("isAfter",[].slice.call(arguments,0))},x.now=function(){return Date.now?Date.now():+new Date},x.utc=ae,x.unix=function $o(Ye){return $n(1e3*Ye)},x.months=function At(Ye,ut){return Qe(Ye,ut,"months")},x.isDate=$,x.locale=fs,x.invalid=Q,x.duration=jo,x.isMoment=ne,x.weekdays=function nr(Ye,ut,Dt){return _t(Ye,ut,Dt,"weekdays")},x.parseZone=function Ea(){return $n.apply(null,arguments).parseZone()},x.localeData=fn,x.isDuration=zn,x.monthsShort=function Ht(Ye,ut){return Qe(Ye,ut,"monthsShort")},x.weekdaysMin=function Ur(Ye,ut,Dt){return _t(Ye,ut,Dt,"weekdaysMin")},x.defineLocale=qs,x.updateLocale=function wi(Ye,ut){if(null!=ut){var Dt,Vt,cr=rr;null!=Er[Ye]&&null!=Er[Ye].parentLocale?Er[Ye].set(fe(Er[Ye]._config,ut)):(null!=(Vt=qr(Ye))&&(cr=Vt._config),ut=fe(cr,ut),null==Vt&&(ut.abbr=Ye),(Dt=new De(ut)).parentLocale=Er[Ye],Er[Ye]=Dt),fs(Ye)}else null!=Er[Ye]&&(null!=Er[Ye].parentLocale?(Er[Ye]=Er[Ye].parentLocale,Ye===fs()&&fs(Ye)):null!=Er[Ye]&&delete Er[Ye]);return Er[Ye]},x.locales=function Fn(){return ve(Er)},x.weekdaysShort=function Mr(Ye,ut,Dt){return _t(Ye,ut,Dt,"weekdaysShort")},x.normalizeUnits=rt,x.relativeTimeRounding=function Nh(Ye){return void 0===Ye?la:"function"==typeof Ye&&(la=Ye,!0)},x.relativeTimeThreshold=function Qo(Ye,ut){return void 0!==oh[Ye]&&(void 0===ut?oh[Ye]:(oh[Ye]=ut,"s"===Ye&&(oh.ss=ut-1),!0))},x.calendarFormat=function ru(Ye,ut){var Dt=Ye.diff(ut,"days",!0);return Dt<-6?"sameElse":Dt<-1?"lastWeek":Dt<0?"lastDay":Dt<1?"sameDay":Dt<2?"nextDay":Dt<7?"nextWeek":"sameElse"},x.prototype=ni,x.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},x}()},41993:qe=>{function xe(T){return Promise.resolve().then(()=>{var D=new Error("Cannot find module '"+T+"'");throw D.code="MODULE_NOT_FOUND",D})}xe.keys=()=>[],xe.resolve=xe,xe.id=41993,qe.exports=xe},46700:(qe,xe,T)=>{var D={"./af":27088,"./af.js":27088,"./ar":17038,"./ar-dz":52502,"./ar-dz.js":52502,"./ar-kw":30128,"./ar-kw.js":30128,"./ar-ly":84519,"./ar-ly.js":84519,"./ar-ma":65443,"./ar-ma.js":65443,"./ar-sa":17642,"./ar-sa.js":17642,"./ar-tn":68592,"./ar-tn.js":68592,"./ar.js":17038,"./az":51213,"./az.js":51213,"./be":69191,"./be.js":69191,"./bg":90322,"./bg.js":90322,"./bm":28042,"./bm.js":28042,"./bn":59620,"./bn-bd":65903,"./bn-bd.js":65903,"./bn.js":59620,"./bo":69645,"./bo.js":69645,"./br":45020,"./br.js":45020,"./bs":64792,"./bs.js":64792,"./ca":47980,"./ca.js":47980,"./cs":47322,"./cs.js":47322,"./cv":90365,"./cv.js":90365,"./cy":32092,"./cy.js":32092,"./da":77387,"./da.js":77387,"./de":54307,"./de-at":29459,"./de-at.js":29459,"./de-ch":73694,"./de-ch.js":73694,"./de.js":54307,"./dv":39659,"./dv.js":39659,"./el":3460,"./el.js":3460,"./en-au":94369,"./en-au.js":94369,"./en-ca":60530,"./en-ca.js":60530,"./en-gb":9998,"./en-gb.js":9998,"./en-ie":13391,"./en-ie.js":13391,"./en-il":75414,"./en-il.js":75414,"./en-in":19615,"./en-in.js":19615,"./en-nz":21248,"./en-nz.js":21248,"./en-sg":13767,"./en-sg.js":13767,"./eo":84530,"./eo.js":84530,"./es":86866,"./es-do":18944,"./es-do.js":18944,"./es-mx":29116,"./es-mx.js":29116,"./es-us":83609,"./es-us.js":83609,"./es.js":86866,"./et":96725,"./et.js":96725,"./eu":67931,"./eu.js":67931,"./fa":56417,"./fa.js":56417,"./fi":20944,"./fi.js":20944,"./fil":61766,"./fil.js":61766,"./fo":95867,"./fo.js":95867,"./fr":1636,"./fr-ca":16848,"./fr-ca.js":16848,"./fr-ch":77773,"./fr-ch.js":77773,"./fr.js":1636,"./fy":14940,"./fy.js":14940,"./ga":91402,"./ga.js":91402,"./gd":46924,"./gd.js":46924,"./gl":16398,"./gl.js":16398,"./gom-deva":72457,"./gom-deva.js":72457,"./gom-latn":52545,"./gom-latn.js":52545,"./gu":42641,"./gu.js":42641,"./he":7536,"./he.js":7536,"./hi":96335,"./hi.js":96335,"./hr":7458,"./hr.js":7458,"./hu":56540,"./hu.js":56540,"./hy-am":65283,"./hy-am.js":65283,"./id":98780,"./id.js":98780,"./is":14205,"./is.js":14205,"./it":34211,"./it-ch":29985,"./it-ch.js":29985,"./it.js":34211,"./ja":31003,"./ja.js":31003,"./jv":60420,"./jv.js":60420,"./ka":40851,"./ka.js":40851,"./kk":16074,"./kk.js":16074,"./km":53343,"./km.js":53343,"./kn":44799,"./kn.js":44799,"./ko":13549,"./ko.js":13549,"./ku":91037,"./ku.js":91037,"./ky":93125,"./ky.js":93125,"./lb":69586,"./lb.js":69586,"./lo":32349,"./lo.js":32349,"./lt":92400,"./lt.js":92400,"./lv":39991,"./lv.js":39991,"./me":28477,"./me.js":28477,"./mi":55118,"./mi.js":55118,"./mk":15943,"./mk.js":15943,"./ml":13849,"./ml.js":13849,"./mn":31977,"./mn.js":31977,"./mr":66184,"./mr.js":66184,"./ms":70485,"./ms-my":64524,"./ms-my.js":64524,"./ms.js":70485,"./mt":36681,"./mt.js":36681,"./my":52024,"./my.js":52024,"./nb":42688,"./nb.js":42688,"./ne":68914,"./ne.js":68914,"./nl":11758,"./nl-be":52272,"./nl-be.js":52272,"./nl.js":11758,"./nn":41510,"./nn.js":41510,"./oc-lnc":52797,"./oc-lnc.js":52797,"./pa-in":37944,"./pa-in.js":37944,"./pl":1605,"./pl.js":1605,"./pt":54225,"./pt-br":73840,"./pt-br.js":73840,"./pt.js":54225,"./ro":45128,"./ro.js":45128,"./ru":35127,"./ru.js":35127,"./sd":32525,"./sd.js":32525,"./se":59893,"./se.js":59893,"./si":33123,"./si.js":33123,"./sk":59635,"./sk.js":59635,"./sl":78106,"./sl.js":78106,"./sq":88799,"./sq.js":88799,"./sr":97949,"./sr-cyrl":52872,"./sr-cyrl.js":52872,"./sr.js":97949,"./ss":86167,"./ss.js":86167,"./sv":39713,"./sv.js":39713,"./sw":41982,"./sw.js":41982,"./ta":22732,"./ta.js":22732,"./te":43636,"./te.js":43636,"./tet":2115,"./tet.js":2115,"./tg":69801,"./tg.js":69801,"./th":2868,"./th.js":2868,"./tk":31310,"./tk.js":31310,"./tl-ph":22360,"./tl-ph.js":22360,"./tlh":66645,"./tlh.js":66645,"./tr":98374,"./tr.js":98374,"./tzl":256,"./tzl.js":256,"./tzm":61595,"./tzm-latn":61631,"./tzm-latn.js":61631,"./tzm.js":61595,"./ug-cn":6050,"./ug-cn.js":6050,"./uk":65610,"./uk.js":65610,"./ur":86077,"./ur.js":86077,"./uz":22862,"./uz-latn":12207,"./uz-latn.js":12207,"./uz.js":22862,"./vi":48093,"./vi.js":48093,"./x-pseudo":25590,"./x-pseudo.js":25590,"./yo":9058,"./yo.js":9058,"./zh-cn":77908,"./zh-cn.js":77908,"./zh-hk":8867,"./zh-hk.js":8867,"./zh-mo":31133,"./zh-mo.js":31133,"./zh-tw":83291,"./zh-tw.js":83291};function x(B){var U=w(B);return T(U)}function w(B){if(!T.o(D,B)){var U=new Error("Cannot find module '"+B+"'");throw U.code="MODULE_NOT_FOUND",U}return D[B]}x.keys=function(){return Object.keys(D)},x.resolve=w,qe.exports=x,x.id=46700},73386:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>_e});var ne,D=T(15861),x=T(17626),w=T(46160),B=T(89726),U=T(55538),W=T(86810),Y=T(58817),H=T(47996),G=T(47877),$=T(63290),re=T(62208),ue=T(10699),ae=T(21726),oe=T(77712),X=(T(90912),T(76898)),Z=T(99433),Q=T(65234),J=T(84687),se=T(55463),ee=T(33954),le=T(32584);let ce=0;const de=$.Z.getLogger("esri.Basemap");let me=ne=class extends((0,W.eC)(H.Z)){constructor(he){super(he),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+ce++,this.baseLayers=new w.Z,this.referenceLayers=new w.Z;const ye=De=>{De.parent&&De.parent!==this&&"remove"in De.parent&&De.parent.remove(De),De.parent=this,"elevation"===De.type&&de.error(`Layer '${De.title}, id:${De.id}' of type '${De.type}' is not supported as a basemap layer and will therefore be ignored.`)},fe=De=>{De.parent=null};this.baseLayers.on("after-add",De=>ye(De.item)),this.referenceLayers.on("after-add",De=>ye(De.item)),this.baseLayers.on("after-remove",De=>fe(De.item)),this.referenceLayers.on("after-remove",De=>fe(De.item))}initialize(){this.when().catch(he=>{de.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,he)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const he=this.baseLayers.removeAll();for(const fe of he)fe.destroy();const ye=this.referenceLayers.removeAll();for(const fe of ye)fe.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(he){return he&&"resourceInfo"in he&&(this._set("resourceInfo",he.resourceInfo),delete(he={...he}).resourceInfo),he}set baseLayers(he){this._set("baseLayers",(0,B.Z)(he,this._get("baseLayers")))}_writeBaseLayers(he,ye,fe){const De=[];he&&(fe={...fe,layerContainerType:"basemap"},this.baseLayers.forEach(ve=>{const Ce=(0,le.Nw)(ve,fe.webmap?fe.webmap.getLayerJSONFromResourceInfo(ve):null,fe);(0,re.pC)(Ce)&&De.push(Ce)}),this.referenceLayers.forEach(ve=>{const Ce=(0,le.Nw)(ve,fe.webmap?fe.webmap.getLayerJSONFromResourceInfo(ve):null,fe);(0,re.pC)(Ce)&&(Ce.isReference=!0,De.push(Ce))})),ye.baseMapLayers=De}set referenceLayers(he){this._set("referenceLayers",(0,B.Z)(he,this._get("referenceLayers")))}writeTitle(he,ye){ye.title=he||"Basemap"}load(he){return this.addResolvingPromise(this._loadFromSource(he)),Promise.resolve(this)}loadAll(){return(0,G.G)(this,he=>{he(this.baseLayers,this.referenceLayers)})}clone(){const he={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(he.loadStatus="loaded"),new ne({resourceInfo:this.resourceInfo}).set(he)}read(he,ye){this.resourceInfo||this._set("resourceInfo",{data:he,context:ye}),super.read(he,ye)}write(he,ye){return he=he||{},ye&&ye.origin||(ye={origin:"web-map",...ye}),super.write(he,ye),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(he.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(fe=>{const De=(0,Y.d9)(fe);return De.url&&(0,ae.oC)(De.url)&&(De.url=`https:${De.url}`),De.templateUrl&&(0,ae.oC)(De.templateUrl)&&(De.templateUrl=`https:${De.templateUrl}`),De})),he}_loadFromSource(he){var ye=this;return(0,D.Z)(function*(){const{resourceInfo:fe,portalItem:De}=ye;(0,ue.k_)(he);const ve=[];fe?(ve.push(ye._loadLayersFromJSON(fe.data,fe.context?fe.context.url:null,he)),fe.data.id&&!fe.data.title&&ve.push((0,ee.g)(fe.data.id).then(Te=>{Te&&ye.read({title:Te},fe.context)}))):De&&ve.push(ye._loadFromItem(De,he)),yield Promise.all(ve)})()}_loadLayersFromJSON(he,ye,fe){var De=this;return(0,D.Z)(function*(){const ve=De.resourceInfo&&De.resourceInfo.context,Ce=De.portalItem&&De.portalItem.portal||ve&&ve.portal||null,ge=ve&&"web-scene"===ve.origin?"web-scene":"web-map",{populateOperationalLayers:Te}=yield Promise.all([T.e(7534),T.e(1074)]).then(T.bind(T,71074)),Le=[];if((0,ue.k_)(fe),he.baseMapLayers&&Array.isArray(he.baseMapLayers)){const je={context:{origin:ge,url:ye,portal:Ce,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},ze=Te(De.baseLayers,he.baseMapLayers.filter(Ae=>!Ae.isReference),je);Le.push(ze);const Ee=Te(De.referenceLayers,he.baseMapLayers.filter(Ae=>Ae.isReference),je);Le.push(Ee)}yield(0,ue.as)(Le)})()}_loadFromItem(he,ye){var fe=this;return(0,D.Z)(function*(){const De=yield he.load(ye),ve=yield De.fetchData("json",ye),Ce=(0,ae.mN)(he.itemUrl);return fe._set("resourceInfo",{data:ve.baseMap,context:{origin:"web-map",portal:he.portal||J.Z.getDefault(),url:Ce}}),fe.read(fe.resourceInfo.data,fe.resourceInfo.context),fe.read({spatialReference:ve.spatialReference},fe.resourceInfo.context),fe.read({title:he.title,thumbnailUrl:he.thumbnailUrl},{origin:"portal-item",portal:he.portal||J.Z.getDefault(),url:Ce}),fe._loadLayersFromJSON(fe.resourceInfo.data,Ce,ye)})()}static fromId(he){const ye=ee.s[he];if(ye){if(ye.deprecated){let fe=null;"dark-gray"===he?fe="dark-gray-vector":"gray"===he?fe="gray-vector":"streets"===he?fe="streets-vector":"topo"===he&&(fe="topo-vector"),(0,U.x9)(de,`The ${he} basemap has entered mature support and is no longer being updated.`,{replacement:fe,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return ne.fromJSON(ye)}return null}};(0,x._)([(0,oe.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(he,ye,fe,De){this._writeBaseLayers(he,ye,De)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:w.Z}},writer(he,ye,fe,De){this._writeBaseLayers(he,ye,De)}}}}}})],me.prototype,"baseLayers",null),(0,x._)([(0,oe.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],me.prototype,"id",void 0),(0,x._)([(0,oe.Cb)({type:se.default})],me.prototype,"portalItem",void 0),(0,x._)([(0,oe.Cb)()],me.prototype,"referenceLayers",null),(0,x._)([(0,oe.Cb)({readOnly:!0})],me.prototype,"resourceInfo",void 0),(0,x._)([(0,oe.Cb)({type:Q.Z})],me.prototype,"spatialReference",void 0),(0,x._)([(0,oe.Cb)()],me.prototype,"thumbnailUrl",void 0),(0,x._)([(0,oe.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],me.prototype,"title",void 0),(0,x._)([(0,Z.c)("title")],me.prototype,"writeTitle",null),me=ne=(0,x._)([(0,X.j)("esri.Basemap")],me);const _e=me},91558:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>H});var G,$,D=T(20414),x=T(21286),w=T(62208),B=T(90912);function U(G){return(0,x.uZ)((0,B.vU)(G),0,255)}function W(G,$,re){return G=Number(G),isNaN(G)?re:G<$?$:G>re?re:G}class Y{constructor($){this.r=255,this.g=255,this.b=255,this.a=1,$&&this.setColor($)}static blendColors($,re,ue,ae=new Y){return ae.r=Math.round($.r+(re.r-$.r)*ue),ae.g=Math.round($.g+(re.g-$.g)*ue),ae.b=Math.round($.b+(re.b-$.b)*ue),ae.a=$.a+(re.a-$.a)*ue,ae._sanitize()}static fromRgb($,re){const ue=$.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(ue){const ae=ue[2].split(/\s*,\s*/),oe=ue[1];if("rgb"===oe&&3===ae.length||"rgba"===oe&&4===ae.length){const ie=ae[0];if("%"===ie.charAt(ie.length-1)){const X=ae.map(Z=>2.56*parseFloat(Z));return 4===ae.length&&(X[3]=parseFloat(ae[3])),Y.fromArray(X,re)}return Y.fromArray(ae.map(X=>parseFloat(X)),re)}if("hsl"===oe&&3===ae.length||"hsla"===oe&&4===ae.length)return Y.fromArray((0,D.B7)(parseFloat(ae[0]),parseFloat(ae[1])/100,parseFloat(ae[2])/100,parseFloat(ae[3])),re)}return null}static fromHex($,re=new Y){if(4!==$.length&&7!==$.length||"#"!==$[0])return null;const ue=4===$.length?4:8,ae=(1<<ue)-1;let oe=Number("0x"+$.substr(1));return isNaN(oe)?null:(["b","g","r"].forEach(ie=>{const X=oe&ae;oe>>=ue,re[ie]=4===ue?17*X:X}),re.a=1,re)}static fromArray($,re=new Y){return re._set(Number($[0]),Number($[1]),Number($[2]),Number($[3])),isNaN(re.a)&&(re.a=1),re._sanitize()}static fromString($,re){const ue=(0,D.St)($)?(0,D.h$)($):null;return ue&&Y.fromArray(ue,re)||Y.fromRgb($,re)||Y.fromHex($,re)}static fromJSON($){return $&&new Y([$[0],$[1],$[2],$[3]/255])}static toUnitRGB($){return(0,w.pC)($)?[$.r/255,$.g/255,$.b/255]:null}static toUnitRGBA($){return(0,w.pC)($)?[$.r/255,$.g/255,$.b/255,null!=$.a?$.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor($){return"string"==typeof $?Y.fromString($,this):Array.isArray($)?Y.fromArray($,this):(this._set($.r??0,$.g??0,$.b??0,$.a??1),$ instanceof Y||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const $=this.r.toString(16),re=this.g.toString(16),ue=this.b.toString(16);return`#${$.length<2?"0"+$:$}${re.length<2?"0"+re:re}${ue.length<2?"0"+ue:ue}`}toCss($=!1){const re=this.r+", "+this.g+", "+this.b;return $?`rgba(${re}, ${this.a})`:`rgb(${re})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray($=Y.AlphaMode.ALWAYS){const re=U(this.r),ue=U(this.g),ae=U(this.b);return $===Y.AlphaMode.ALWAYS||1!==this.a?[re,ue,ae,U(255*this.a)]:[re,ue,ae]}clone(){return new Y(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals($){return(0,w.pC)($)&&$.r===this.r&&$.g===this.g&&$.b===this.b&&$.a===this.a}_sanitize(){return this.r=Math.round(W(this.r,0,255)),this.g=Math.round(W(this.g,0,255)),this.b=Math.round(W(this.b,0,255)),this.a=W(this.a,0,1),this}_set($,re,ue,ae){this.r=$,this.g=re,this.b=ue,this.a=ae}}Y.prototype.declaredClass="esri.Color",($=(G=Y||(Y={})).AlphaMode||(G.AlphaMode={}))[$.ALWAYS=0]="ALWAYS",$[$.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const H=Y},88879:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Q});var D=T(17626),x=T(29132),w=T(73281),B=T(20383),U=T(79608),W=T(86810),Y=T(62208),H=T(86236),G=T(77712),ae=(T(85931),T(8314),T(90912),T(76898)),oe=T(91179);function X(J){if(!(0,Y.pC)(J))return null;const se={};for(const ee in J){const le=J[ee];le&&(se[ee]=le.toJSON())}return 0!==Object.keys(se).length?se:null}let Z=class extends((0,U.J)(W.wq)){constructor(...J){super(...J),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,H.D)(),configurable:!0})}normalizeCtorArgs(J,se,ee,le){return J&&!J.declaredClass?J:{geometry:J,symbol:se,attributes:ee,popupTemplate:le}}set aggregateGeometries(J){const se=this._get("aggregateGeometries");JSON.stringify(se)!==JSON.stringify(J)&&this._set("aggregateGeometries",J)}set attributes(J){const se=this._get("attributes");se!==J&&(this._set("attributes",J),this._notifyLayer("attributes",se,J))}set geometry(J){const se=this._get("geometry");se!==J&&(this._set("geometry",J),this._notifyLayer("geometry",se,J))}set symbol(J){const se=this._get("symbol");se!==J&&(this._set("symbol",J),this._notifyLayer("symbol",se,J))}set visible(J){const se=this._get("visible");se!==J&&(this._set("visible",J),this._notifyLayer("visible",se,J))}getEffectivePopupTemplate(J=!1){if(this.popupTemplate)return this.popupTemplate;for(const se of[this.sourceLayer,this.layer])if(se){if("popupTemplate"in se&&se.popupTemplate)return se.popupTemplate;if(J&&"defaultPopupTemplate"in se&&(0,Y.pC)(se.defaultPopupTemplate))return se.defaultPopupTemplate}return null}getAttribute(J){return this.attributes&&this.attributes[J]}setAttribute(J,se){if(this.attributes){const ee=this.getAttribute(J);this.attributes[J]=se,this._notifyLayer("attributes",ee,se,J)}else this.attributes={[J]:se},this._notifyLayer("attributes",void 0,se,J)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:X(this.aggregateGeometries),geometry:(0,Y.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,Y.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,Y.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(J,se,ee,le){if(!this.layer||!("graphicChanged"in this.layer))return;const ne={graphic:this,property:J,oldValue:se,newValue:ee};"attributes"===J&&(ne.attributeName=le),this.layer.graphicChanged(ne)}};(0,D._)([(0,G.Cb)({value:null,json:{read:function ie(J){if(!J)return null;const se={};for(const ee in J){const le=(0,oe.im)(J[ee]);le&&(se[ee]=le)}return 0!==Object.keys(se).length?se:null}}})],Z.prototype,"aggregateGeometries",null),(0,D._)([(0,G.Cb)({value:null})],Z.prototype,"attributes",null),(0,D._)([(0,G.Cb)({value:null,types:x.qM,json:{read:oe.im}})],Z.prototype,"geometry",null),(0,D._)([(0,G.Cb)({type:Boolean})],Z.prototype,"isAggregate",void 0),(0,D._)([(0,G.Cb)({clonable:"reference"})],Z.prototype,"layer",void 0),(0,D._)([(0,G.Cb)({type:w.Z})],Z.prototype,"popupTemplate",void 0),(0,D._)([(0,G.Cb)({clonable:"reference"})],Z.prototype,"sourceLayer",void 0),(0,D._)([(0,G.Cb)({value:null,types:B.LB})],Z.prototype,"symbol",null),(0,D._)([(0,G.Cb)({type:Boolean,value:!0})],Z.prototype,"visible",null),Z=(0,D._)([(0,ae.j)("esri.Graphic")],Z),(Z||(Z={})).generateUID=H.D;const Q=Z},73281:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Ve});var D=T(15861),x=T(17626),w=T(46160),B=T(86810),U=T(58817),W=T(63290),Y=T(10699),H=T(77712),G=T(66656),$=T(68653),re=T(76898),ue=T(99433),ae=T(90912),oe=T(36630),ie=T(55664),X=T(55013),Z=T(16615),Q=T(82561),J=T(75484),se=T(64531),ee=T(501);const ne={base:null,key:"type",typeMap:{attachment:ie.Z,media:se.Z,text:ee.Z,expression:Q.Z,field:J.Z}};var he,ce=T(38439),de=T(25621);T(85931),T(8314);let ye=he=class extends B.wq{constructor(Ne){super(Ne),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new he({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,x._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],ye.prototype,"returnTopmostRaster",void 0),(0,x._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],ye.prototype,"showNoDataRecords",void 0),ye=he=(0,x._)([(0,re.j)("esri.popup.LayerOptions")],ye);const fe=ye;var ve,De=T(51686);let Ce=ve=class extends B.wq{constructor(Ne){super(Ne),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new ve({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,U.d9)(this.orderByFields):null})}};(0,x._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],Ce.prototype,"showRelatedRecords",void 0),(0,x._)([(0,H.Cb)({type:[De.Z],json:{write:!0}})],Ce.prototype,"orderByFields",void 0),Ce=ve=(0,x._)([(0,re.j)("esri.popup.RelatedRecordsInfo")],Ce);const ge=Ce;var Ee,Te=T(65560),Le=T(59397),je=T(48753),ze=T(10671);const Ae=w.Z.ofType({key:"type",defaultKeyValue:"button",base:Le.Z,typeMap:{button:je.Z,toggle:ze.Z}}),we={base:X.Z,key:"type",typeMap:{media:se.Z,custom:Z.Z,text:ee.Z,attachments:ie.Z,fields:J.Z,expression:Q.Z}},Be="esri.PopupTemplate",Pe=W.Z.getLogger(Be),Oe=["attachments","fields","media","text","expression"];let Ke=Ee=class extends B.wq{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(Ne){return Array.isArray(Ne)?Ne.map(Ie=>(0,ae.N7)(we,Ie)):"string"==typeof Ne||"function"==typeof Ne||Ne instanceof HTMLElement||(0,Y.y8)(Ne)?Ne:(Pe.error("content error","unsupported content value",{value:Ne}),null)}readContent(Ne,Ie){const{popupElements:We}=Ie;return Array.isArray(We)&&We.length>0?this._readPopupInfoElements(Ie):this._readPopupInfo(Ie)}writeContent(Ne,Ie,We,Se){"string"!=typeof Ne?Array.isArray(Ne)&&(Ie.popupElements=Ne.filter(He=>Oe.includes(He.type)).map(He=>He&&He.toJSON(Se)),Ie.popupElements.forEach(He=>{"attachments"===He.type?this._writeAttachmentContent(Ie):"media"===He.type?this._writeMediaContent(He,Ie):"text"===He.type&&this._writeTextContent(He,Ie)})):Ie.description=Ne}writeFieldInfos(Ne,Ie,We,Se){const{content:He}=this,$e=Array.isArray(He)?He:null;if(Ne){const et=$e?$e.filter(it=>"fields"===it.type):[],nt=et.length&&et.every(it=>it.fieldInfos?.length);Ie.fieldInfos=Ne.filter(Boolean).map(it=>{const Xe=it.toJSON(Se);return nt&&(Xe.visible=!1),Xe})}if($e)for(const et of $e)"fields"===et.type&&this._writeFieldsContent(et,Ie)}writeLayerOptions(Ne,Ie,We,Se){Ie[We]=!Ne||null===Ne.showNoDataRecords&&null===Ne.returnTopmostRaster?null:Ne.toJSON(Se)}writeTitle(Ne,Ie){Ie.title=Ne||""}clone(){const{actions:Ne}=this,Ie=Ne?(0,U.d9)(Ne.toArray()):[];return new Ee({actions:Ie,content:Array.isArray(this.content)?(0,U.d9)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?(0,U.d9)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?(0,U.d9)(this.fieldInfos):null,layerOptions:this.layerOptions?(0,U.d9)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?(0,U.d9)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?(0,U.d9)(this.relatedRecordsInfo):null})}collectRequiredFields(Ne,Ie){var We=this;return(0,D.Z)(function*(){const Se=We.expressionInfos||[];yield We._collectExpressionInfoFields(Ne,Ie,[...Se,...We._getContentExpressionInfos(We.content,Se)]),(0,oe.gd)(Ne,Ie,[...We.outFields||[],...We._getActionsFields(We.actions),...We._getTitleFields(We.title),...We._getContentFields(We.content)])})()}getRequiredFields(Ne){var Ie=this;return(0,D.Z)(function*(){const We=new Set;return yield Ie.collectRequiredFields(We,Ne),[...We].sort()})()}_writeFieldsContent(Ne,Ie){if(!Array.isArray(Ne.fieldInfos)||!Ne.fieldInfos.length)return;const We=(0,U.d9)(Ne.fieldInfos);Array.isArray(Ie.fieldInfos)?We.forEach(Se=>{const He=Ie.fieldInfos.find($e=>$e.fieldName.toLowerCase()===Se.fieldName.toLowerCase());He?He.visible=!0:Ie.fieldInfos.push(Se)}):Ie.fieldInfos=We}_writeAttachmentContent(Ne){Ne.showAttachments||(Ne.showAttachments=!0)}_writeTextContent(Ne,Ie){!Ie.description&&Ne.text&&(Ie.description=Ne.text)}_writeMediaContent(Ne,Ie){if(!Array.isArray(Ne.mediaInfos)||!Ne.mediaInfos.length)return;const We=(0,U.d9)(Ne.mediaInfos);Ie.mediaInfos=Array.isArray(Ie.mediaInfos)?[...Ie.mediaInfos,...We]:We}_readPopupInfoElements({description:Ne,mediaInfos:Ie,popupElements:We}){const Se={description:!1,mediaInfos:!1};return We.map(He=>"media"===He.type?(He.mediaInfos||!Ie||Se.mediaInfos||(He.mediaInfos=Ie,Se.mediaInfos=!0),se.Z.fromJSON(He)):"text"===He.type?(He.text||!Ne||Se.description||(He.text=Ne,Se.description=!0),ee.Z.fromJSON(He)):"attachments"===He.type?ie.Z.fromJSON(He):"fields"===He.type?J.Z.fromJSON(He):"expression"===He.type?Q.Z.fromJSON(He):void 0).filter(Boolean)}_readPopupInfo({description:Ne,mediaInfos:Ie,showAttachments:We}){const Se=[];return Se.push(Ne?new ee.Z({text:Ne}):new J.Z),Array.isArray(Ie)&&Ie.length&&Se.push(se.Z.fromJSON({mediaInfos:Ie})),We&&Se.push(ie.Z.fromJSON({displayType:"auto"})),Se.length?Se:Ne}_getContentElementFields(Ne){const Ie=Ne?.type;if("attachments"===Ie)return[...this._extractFieldNames(Ne.title),...this._extractFieldNames(Ne.description)];if("custom"===Ie)return Ne.outFields||[];if("fields"===Ie)return[...this._extractFieldNames(Ne.title),...this._extractFieldNames(Ne.description),...this._getFieldInfoFields(Ne.fieldInfos||this.fieldInfos)];if("media"===Ie){const We=Ne.mediaInfos||[];return[...this._extractFieldNames(Ne.title),...this._extractFieldNames(Ne.description),...We.reduce((Se,He)=>[...Se,...this._getMediaInfoFields(He)],[])]}return"text"===Ie?this._extractFieldNames(Ne.text):[]}_getMediaInfoFields(Ne){const{caption:Ie,title:We,value:Se}=Ne,He=Se||{},{fields:$e=[],normalizeField:et,tooltipField:nt,sourceURL:it,linkURL:Xe}=He,rt=[...this._extractFieldNames(We),...this._extractFieldNames(Ie),...this._extractFieldNames(it),...this._extractFieldNames(Xe),...$e];return et&&rt.push(et),nt&&rt.push(nt),rt}_getContentExpressionInfos(Ne,Ie){return Array.isArray(Ne)?Ne.reduce((We,Se)=>[...We,..."expression"===Se.type&&Se.expressionInfo?[Se.expressionInfo]:[]],Ie):[]}_getContentFields(Ne){return"string"==typeof Ne?this._extractFieldNames(Ne):Array.isArray(Ne)?Ne.reduce((Ie,We)=>[...Ie,...this._getContentElementFields(We)],[]):[]}_collectExpressionInfoFields(Ne,Ie,We){return(0,D.Z)(function*(){We&&(yield Promise.all(We.map(Se=>(0,oe.io)(Ne,Ie,Se.expression))))})()}_getFieldInfoFields(Ne){return Ne?Ne.filter(Ie=>void 0===Ie.visible||!!Ie.visible).map(Ie=>Ie.fieldName).filter(Ie=>!Ie.includes("relationships/")&&!Ie.includes("expression/")):[]}_getActionsFields(Ne){return Ne?Ne.toArray().reduce((Ie,We)=>[...Ie,...this._getActionFields(We)],[]):[]}_getActionFields(Ne){const{className:Ie,title:We,type:Se}=Ne,He="button"===Se||"toggle"===Se?Ne.image:"";return[...this._extractFieldNames(We),...this._extractFieldNames(Ie),...this._extractFieldNames(He)]}_getTitleFields(Ne){return"string"==typeof Ne?this._extractFieldNames(Ne):[]}_extractFieldNames(Ne){if(!Ne||"string"!=typeof Ne)return[];const We=Ne.match(/{[^}]*}/g);if(!We)return[];const Se=/\{(\w+):.+\}/,He=We.filter($e=>!(0===$e.indexOf("{relationships/")||0===$e.indexOf("{expression/"))).map($e=>$e.replace(Se,"{$1}"));return He?He.map($e=>$e.slice(1,-1)):[]}};(0,x._)([(0,H.Cb)({type:Ae})],Ke.prototype,"actions",void 0),(0,x._)([(0,H.Cb)()],Ke.prototype,"content",void 0),(0,x._)([(0,G.p)("content")],Ke.prototype,"castContent",null),(0,x._)([(0,$.r)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Ke.prototype,"readContent",null),(0,x._)([(0,ue.c)("content",{popupElements:{type:w.Z.ofType(ne)},showAttachments:{type:Boolean},mediaInfos:{type:w.Z.ofType(Te.V)},description:{type:String}})],Ke.prototype,"writeContent",null),(0,x._)([(0,H.Cb)({type:[ce.Z],json:{write:!0}})],Ke.prototype,"expressionInfos",void 0),(0,x._)([(0,H.Cb)({type:[de.Z]})],Ke.prototype,"fieldInfos",void 0),(0,x._)([(0,ue.c)("fieldInfos")],Ke.prototype,"writeFieldInfos",null),(0,x._)([(0,H.Cb)({type:fe})],Ke.prototype,"layerOptions",void 0),(0,x._)([(0,ue.c)("layerOptions")],Ke.prototype,"writeLayerOptions",null),(0,x._)([(0,H.Cb)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ke.prototype,"lastEditInfoEnabled",void 0),(0,x._)([(0,H.Cb)()],Ke.prototype,"outFields",void 0),(0,x._)([(0,H.Cb)()],Ke.prototype,"overwriteActions",void 0),(0,x._)([(0,H.Cb)()],Ke.prototype,"returnGeometry",void 0),(0,x._)([(0,H.Cb)({json:{type:String}})],Ke.prototype,"title",void 0),(0,x._)([(0,ue.c)("title")],Ke.prototype,"writeTitle",null),(0,x._)([(0,H.Cb)({type:ge,json:{write:!0}})],Ke.prototype,"relatedRecordsInfo",void 0),Ke=Ee=(0,x._)([(0,re.j)(Be)],Ke);const Ve=Ke},97478:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ue,D=T(17626),x=T(86810),w=T(62208),B=T(28170),U=T(77712),G=(T(85931),T(8314),T(90912),T(68653)),$=T(76898),re=T(99433);let ae=ue=class extends x.wq{constructor(Z){super(Z),this.end=null,this.start=null}static get allTime(){return oe}static get empty(){return ie}readEnd(Z,Q){return null!=Q.end?new Date(Q.end):null}writeEnd(Z,Q){Q.end=Z?Z.getTime():null}get isAllTime(){return this.equals(ue.allTime)}get isEmpty(){return this.equals(ue.empty)}readStart(Z,Q){return null!=Q.start?new Date(Q.start):null}writeStart(Z,Q){Q.start=Z?Z.getTime():null}clone(){return new ue({end:this.end,start:this.start})}equals(Z){if(!Z)return!1;const Q=(0,w.pC)(this.start)?this.start.getTime():this.start,J=(0,w.pC)(this.end)?this.end.getTime():this.end,se=(0,w.pC)(Z.start)?Z.start.getTime():Z.start,ee=(0,w.pC)(Z.end)?Z.end.getTime():Z.end;return Q===se&&J===ee}expandTo(Z){if(this.isEmpty||this.isAllTime)return this.clone();const Q=(0,w.yw)(this.start,se=>(0,B.JE)(se,Z)),J=(0,w.yw)(this.end,se=>(0,B.Nm)((0,B.JE)(se,Z),1,Z));return new ue({start:Q,end:J})}intersection(Z){if(!Z)return this.clone();if(this.isEmpty||Z.isEmpty)return ue.empty;if(this.isAllTime)return Z.clone();if(Z.isAllTime)return this.clone();const Q=(0,w.R2)(this.start,-1/0,ce=>ce.getTime()),J=(0,w.R2)(this.end,1/0,ce=>ce.getTime()),se=(0,w.R2)(Z.start,-1/0,ce=>ce.getTime()),ee=(0,w.R2)(Z.end,1/0,ce=>ce.getTime());let le,ne;if(se>=Q&&se<=J?le=se:Q>=se&&Q<=ee&&(le=Q),J>=se&&J<=ee?ne=J:ee>=Q&&ee<=J&&(ne=ee),!isNaN(le)&&!isNaN(ne)){const ce=new ue;return ce.start=le===-1/0?null:new Date(le),ce.end=ne===1/0?null:new Date(ne),ce}return ue.empty}offset(Z,Q){if(this.isEmpty||this.isAllTime)return this.clone();const J=new ue,{start:se,end:ee}=this;return(0,w.pC)(se)&&(J.start=(0,B.Nm)(se,Z,Q)),(0,w.pC)(ee)&&(J.end=(0,B.Nm)(ee,Z,Q)),J}union(Z){if(!Z||Z.isEmpty)return this.clone();if(this.isEmpty)return Z.clone();if(this.isAllTime||Z.isAllTime)return oe.clone();const Q=(0,w.pC)(this.start)&&(0,w.pC)(Z.start)?new Date(Math.min(this.start.getTime(),Z.start.getTime())):null,J=(0,w.pC)(this.end)&&(0,w.pC)(Z.end)?new Date(Math.max(this.end.getTime(),Z.end.getTime())):null;return new ue({start:Q,end:J})}};(0,D._)([(0,U.Cb)({type:Date,json:{write:{allowNull:!0}}})],ae.prototype,"end",void 0),(0,D._)([(0,G.r)("end")],ae.prototype,"readEnd",null),(0,D._)([(0,re.c)("end")],ae.prototype,"writeEnd",null),(0,D._)([(0,U.Cb)({readOnly:!0,json:{read:!1}})],ae.prototype,"isAllTime",null),(0,D._)([(0,U.Cb)({readOnly:!0,json:{read:!1}})],ae.prototype,"isEmpty",null),(0,D._)([(0,U.Cb)({type:Date,json:{write:{allowNull:!0}}})],ae.prototype,"start",void 0),(0,D._)([(0,G.r)("start")],ae.prototype,"readStart",null),(0,D._)([(0,re.c)("start")],ae.prototype,"writeStart",null),ae=ue=(0,D._)([(0,$.j)("esri.TimeExtent")],ae);const oe=new ae,ie=new ae({start:void 0,end:void 0}),X=ae},20849:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),x=T(86810),w=T(28170),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(58926);let re=$=class extends x.wq{constructor(ae){super(ae),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,w.rJ)(this.value,this.unit,"milliseconds")}clone(){return new $({value:this.value,unit:this.unit})}};(0,D._)([(0,B.Cb)({type:Number,json:{write:!0},nonNullable:!0})],re.prototype,"value",void 0),(0,D._)([(0,B.Cb)({type:G.v.apiValues,json:{type:G.v.jsonValues,read:G.v.read,write:G.v.write},nonNullable:!0})],re.prototype,"unit",void 0),re=$=(0,D._)([(0,H.j)("esri.TimeInterval")],re);const ue=re},7652:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(w,B){this.definition=null,this.context=null,this.definition=w,this.context=B}}},98362:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(w=[]){this._elements=w}length(){return this._elements.length}get(w){return this._elements[w]}toArray(){const w=[];for(let B=0;B<this.length();B++)w.push(this.get(B));return w}}},5371:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});var D=T(98362),x=T(26685);class w extends D.Z{constructor(U,W,Y,H,G){super(U),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=Y,this._hasM=H,this._spRef=W,this._cacheId=G}get(U){if(void 0===this._lazyPath[U]){const W=this._elements[U];if(void 0===W)return;this._lazyPath[U]=new x.Z(W,this._spRef,this._hasZ,this._hasM,this._cacheId,U)}return this._lazyPath[U]}equalityTest(U){return U===this||null!==U&&U instanceof w&&U.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},26685:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});var D=T(98362),x=T(49672);class w extends D.Z{constructor(U,W,Y,H,G,$){super(U),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=W,this._hasZ=Y,this._hasM=H,this._cacheId=G,this._partId=$}get(U){if(void 0===this._lazyPt[U]){const W=this._elements[U];if(void 0===W)return;const Y=this._hasZ,H=this._hasM;let G=null;G=Y&&!H?new x.Z(W[0],W[1],W[2],void 0,this._spRef):H&&!Y?new x.Z(W[0],W[1],void 0,W[2],this._spRef):Y&&H?new x.Z(W[0],W[1],W[2],W[3],this._spRef):new x.Z(W[0],W[1],this._spRef),G.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+U.toString(),this._lazyPt[U]=G}return this._lazyPt[U]}equalityTest(U){return U===this||null!==U&&U instanceof w&&U.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},77132:(qe,xe,T)=>{"use strict";T.d(xe,{Bj:()=>w,EI:()=>oe,HD:()=>Y,JW:()=>U,Lz:()=>X,Qk:()=>ee,SV:()=>ie,Sh:()=>W,US:()=>de,dj:()=>B,hd:()=>me,hj:()=>G,q2:()=>le,tI:()=>Q,tt:()=>ue,yE:()=>ne});var w,B,_e,D=T(2004),x=T(36255);function U(_e){return x.Z.fromJSON(_e.toJSON())}function W(_e){return _e.toJSON?_e.toJSON():_e}function Y(_e){return"string"==typeof _e||_e instanceof String}function G(_e){return"number"==typeof _e}function re(_e){return _e instanceof Date}function ue(_e,he){return _e===he||!(!re(_e)||!re(he))&&_e.getTime()===he.getTime()}function oe(_e){if(void 0===_e)return null;if("number"==typeof _e)return _e;switch(_e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function ie(_e){if(null===_e)return null;switch(_e.type){case"polygon":case"multipoint":case"polyline":return _e.extent;case"point":return new D.Z({xmin:_e.x,ymin:_e.y,xmax:_e.x,ymax:_e.y,spatialReference:_e.spatialReference});case"extent":return _e}return null}function X(_e){if(void 0===_e)return null;if("number"==typeof _e||"number"==typeof _e)return _e;switch(_e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(_e=w||(w={}))[_e.Standardised=0]="Standardised",_e[_e.StandardisedNoInterval=1]="StandardisedNoInterval",_e[_e.SqlServer=2]="SqlServer",_e[_e.Oracle=3]="Oracle",_e[_e.Postgres=4]="Postgres",_e[_e.PGDB=5]="PGDB",_e[_e.FILEGDB=6]="FILEGDB",_e[_e.NotEvaluated=7]="NotEvaluated",function(_e){_e[_e.InFeatureSet=0]="InFeatureSet",_e[_e.NotInFeatureSet=1]="NotInFeatureSet",_e[_e.Unknown=2]="Unknown"}(B||(B={}));const Q=1e3,ee={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},le={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},ne={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function de(_e){return void 0===_e?"":_e=(_e=(_e=_e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function me(_e,he){he||(he={}),"function"==typeof he&&(he={cmp:he});const ye="boolean"==typeof he.cycles&&he.cycles,fe=he.cmp&&(De=he.cmp,function(Ce){return function(ge,Te){return De({key:ge,value:Ce[ge]},{key:Te,value:Ce[Te]})}});var De;const ve=[];return function Ce(ge){if(ge&&ge.toJSON&&"function"==typeof ge.toJSON&&(ge=ge.toJSON()),void 0===ge)return;if("number"==typeof ge)return isFinite(ge)?""+ge:"null";if("object"!=typeof ge)return JSON.stringify(ge);let Te,Le;if(Array.isArray(ge)){for(Le="[",Te=0;Te<ge.length;Te++)Te&&(Le+=","),Le+=Ce(ge[Te])||"null";return Le+"]"}if(null===ge)return"null";if(ve.includes(ge)){if(ye)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const je=ve.push(ge)-1,ze=Object.keys(ge).sort(fe&&fe(ge));for(Le="",Te=0;Te<ze.length;Te++){const Ee=ze[Te],Ae=Ce(ge[Ee]);Ae&&(Le&&(Le+=","),Le+=JSON.stringify(Ee)+":"+Ae)}return ve.splice(je,1),"{"+Le+"}"}(_e)}},54346:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>H,b:()=>Y});var D=T(59318),x=T(84792),w=T(26584),B=T(63290),U=T(21726);const W=B.Z.getLogger("esri.assets");function Y(G,$){return(0,x.default)(H(G),$)}function H(G){if(!D.Z.assetsPath)throw W.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new w.Z("assets:path-not-set","config.assetsPath is not set");return(0,U.v_)(D.Z.assetsPath,G)}},87204:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>re,a:()=>ue,b:()=>oe,c:()=>ae});var re,ue,ie,D=T(62208),x=T(7699),w=T(89798),B=T(14273),U=T(67668),W=T(97139),Y=T(65787),H=T(17625),G=T(22355),$=T(35387);function ae(ie){const X=new G.kG,Z=ie.output===re.GridOnly,Q=ie.output===re.GridComposite,J=Q||Z,se=ie.output===re.ColorOnly,ee=ie.output===re.ColorComposite,le=ee||se,ne=Q||ee;if(X.include(B.T),le&&X.fragment.uniforms.add(new W.J("backgroundColor",he=>he.backgroundColor)),ie.baseOpacityMode!==ue.One&&X.fragment.uniforms.add(new Y.p("baseOpacity",he=>he.baseOpacity)),J&&(X.extensions.add("GL_OES_standard_derivatives"),X.fragment.include(w.H)),Z||se)return X.fragment.code.add(H.H`
    void main() {
      gl_FragColor = ${se?H.H`vec4(backgroundColor, 1.0)`:H.H`gridColor(uv)`};
    }
  `),X;const ce=ie.blendMode!==x.iM.Normal,de=ie.baseOpacityMode===ue.OnBaseLayer,me=ie.baseOpacityMode===ue.OnBackground||ie.baseOpacityMode===ue.OnBaseLayer,_e=ie.premultipliedSource;return X.fragment.uniforms.add(new $.A("tex",he=>he.texture)),X.fragment.uniforms.add(new Y.p("opacity",he=>he.opacity)),(ce||de||_e)&&(X.fragment.uniforms.add(new $.A("fboColor",he=>he.fboTexture)),X.fragment.uniforms.add(new Y.p("tileSize",he=>(0,D.pC)(he.fboTexture)?he.fboTexture.descriptor.width:1))),X.fragment.include(U.d,ie),X.fragment.code.add(H.H`
    void main() {
      ${ne||de||_e?H.H`
      vec4 bgColor = ${ee?H.H`vec4(backgroundColor, 1.0)`:Q?H.H`gridColor(uv)`:H.H`texture2D(fboColor, gl_FragCoord.xy / tileSize)`};
      ${me?H.H`bgColor *= baseOpacity;`:""}`:""}
      vec4 colorLayer = texture2D(tex, uv);
      ${ce?H.H`
          vec4 fboTex = ${ne?H.H`bgColor;`:H.H`texture2D(fboColor, gl_FragCoord.xy / tileSize) ${de?" * baseOpacity":""};`}
          vec3 Cb = fboTex.a == 0.0 ? fboTex.rgb : vec3(fboTex.rgb * fboTex.a);
          gl_FragColor = applyBlendMode(colorLayer.rgb, colorLayer.a * opacity, Cb, fboTex.a);`:H.H`
          vec4 pmColorLayer = vec4(colorLayer.xyz, 1.0);
          float composeAlpha = colorLayer.a * opacity;
          gl_FragColor = ${_e?H.H`bgColor * (1.0 - composeAlpha) + colorLayer * opacity;`:ne||de?H.H`mix(bgColor, pmColorLayer, composeAlpha);`:H.H`pmColorLayer * composeAlpha;`}`}
    }
  `),X}(ie=re||(re={}))[ie.Composite=0]="Composite",ie[ie.ColorOnly=1]="ColorOnly",ie[ie.GridOnly=2]="GridOnly",ie[ie.ColorComposite=3]="ColorComposite",ie[ie.GridComposite=4]="GridComposite",ie[ie.COUNT=5]="COUNT",function(ie){ie[ie.One=0]="One",ie[ie.OnBackground=1]="OnBackground",ie[ie.OnBaseLayer=2]="OnBaseLayer",ie[ie.COUNT=3]="COUNT"}(ue||(ue={}));const oe=Object.freeze(Object.defineProperty({__proto__:null,get BlendLayersOutput(){return re},get BaseOpacityMode(){return ue},build:ae},Symbol.toStringTag,{value:"Module"}))},56598:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>J,b:()=>Z});var D=T(28347),x=T(43703),w=T(36603),B=T(47923),U=T(96896),W=T(95285),Y=T(65364),H=T(97139),G=T(39704),$=T(66054),re=T(84178),ue=T(17625),ae=T(63123),oe=T(22355),ie=T(66838),X=T(16396);function Z(se){const ee=new oe.kG;ee.attributes.add(X.T.POSITION,"vec2"),ee.include(w.D,{textureCoordinateType:w.N.Default}),ee.varyings.add("worldRay","vec3"),ee.varyings.add("eyeDir","vec3");const{vertex:le,fragment:ne}=ee;return le.uniforms.add([new ae.g("inverseProjectionMatrix",(ce,de)=>de.camera.inverseProjectionMatrix),new ae.g("inverseViewMatrix",(ce,de)=>(0,D.a)(Q,de.camera.viewMatrix))]),le.code.add(ue.H`void main(void) {
vec3 posViewNear = (inverseProjectionMatrix * vec4(position, -1, 1)).xyz;
eyeDir = posViewNear;
worldRay = (inverseViewMatrix * vec4(posViewNear, 0)).xyz;
forwardTextureCoordinates();
gl_Position = vec4(position, 1, 1);
}`),ne.uniforms.add([new H.J("lightingMainDirection",(ce,de)=>de.lighting.lightingMainDirection),new Y.e("radii"),new re.d("scaleHeight"),new G.K("cameraPosition"),new $.y("heightParameters"),new re.d("innerFadeDistance"),new re.d("altitudeFade"),new ie.Q("depthTex"),new G.K("betaRayleigh"),new G.K("betaCombined"),new re.d("betaMie"),new re.d("hazeStrength")]),ee.include(U.D),se.haze&&(ne.include(B.S),ne.uniforms.add(new W.A("nearFar",(ce,de)=>de.camera.nearFar))),ne.code.add(ue.H`vec2 sphereIntersect(vec3 start, vec3 dir, float radius, bool planet) {
float a = dot(dir, dir);
float b = 2.0 * dot(dir, start);
float c = planet ? heightParameters[1] - radius * radius : heightParameters[2];
float d = (b * b) - 4.0 * a * c;
if (d < 0.0) {
return vec2(1e5, -1e5);
}
return vec2((-b - sqrt(d)) / (2.0 * a), (-b + sqrt(d)) / (2.0 * a));
}`),ne.code.add(ue.H`float chapmanApproximation(float X, float h, float cosZenith) {
float c = sqrt(X + h);
float cExpH = c * exp(-h);
if (cosZenith >= 0.0) {
return cExpH / (c * cosZenith + 1.0);
} else {
float x0 = sqrt(1.0 - cosZenith * cosZenith) * (X + h);
float c0 = sqrt(x0);
return 2.0 * c0 * exp(X - x0) - cExpH / (1.0 - c * cosZenith);
}
}`),ne.code.add(ue.H`float getOpticalDepth(vec3 position, vec3 dir, float h) {
return scaleHeight * chapmanApproximation(radii[0] / scaleHeight, h, dot(normalize(position), dir));
}`),ne.code.add(ue.H`
    const int STEPS = 6;

    float getGlow(float dist, float radius, float intensity) {
      return pow(radius / max(dist, 1e-6), intensity);
    }

    vec3 getAtmosphereColour(vec3 cameraPos, vec3 rayDir, vec3 lightDir, float terrainDepth) {
      float reducedPlanetRadius = radii[0] - 20000.0;
      vec2 rayPlanetIntersect = sphereIntersect(cameraPos, rayDir, reducedPlanetRadius, true);
      vec2 rayAtmosphereIntersect = sphereIntersect(cameraPos, rayDir, radii[1], false);
      bool hitsAtmosphere = (rayAtmosphereIntersect.x <= rayAtmosphereIntersect.y) && rayAtmosphereIntersect.x > 0.0;
      bool insideAtmosphere = heightParameters[0] < radii[1];

      if (!(hitsAtmosphere || insideAtmosphere)) {
        return vec3(0);
      }

      bool hitsPlanet = (rayPlanetIntersect.x <= rayPlanetIntersect.y) && rayPlanetIntersect.x > 0.0;

      float start = insideAtmosphere ? 0.0 : rayAtmosphereIntersect.x;

      if (heightParameters[0] < reducedPlanetRadius) {
        // Long light rays from the night side of the planet lead to numerical instability
        // Do not render the atmosphere in such cases
        if (dot(rayDir, normalize(cameraPos)) < -0.025) {
          return vec3(0);
        }
        start = rayPlanetIntersect.y;
      }

      float end = hitsPlanet ? rayPlanetIntersect.x : rayAtmosphereIntersect.y;
      float maxEnd = end;

      ${se.haze?ue.H`if (terrainDepth != -1.0) { end = terrainDepth; }`:""}

      vec3 samplePoint = cameraPos + rayDir * end;
      float multiplier = hitsPlanet ? -1.0 : 1.0;

      vec3 scattering = vec3(0);
      float scaleFract = (length(samplePoint) - radii[0]) / scaleHeight;
      float lastOpticalDepth = getOpticalDepth(samplePoint, rayDir, scaleFract);
      float stepSize = (end - start) / float(STEPS);
      for (int i = 0; i < STEPS; i++) {
        samplePoint -= stepSize * rayDir;
        scaleFract = (length(samplePoint) - radii[0]) / scaleHeight;
        float opticalDepth = multiplier * getOpticalDepth(samplePoint, rayDir * multiplier, scaleFract);

        if (i > 0) {
          scattering *= ${se.haze?ue.H``:" mix(2.5, 1.0, clamp((length(cameraPos) - radii[0]) / 50e3, 0.0, 1.0)) * "} exp(-(mix(betaCombined, betaRayleigh, 0.5) + betaMie) * max(0.0, (opticalDepth - lastOpticalDepth)));
        }

        if (dot(normalize(samplePoint), lightDir) > -0.3) {

          float scale = exp(-scaleFract);
          float lightDepth = getOpticalDepth(samplePoint, lightDir, scaleFract);

          scattering += scale * exp(-(betaCombined + betaMie) * lightDepth);
          ${se.haze?"":ue.H`scattering += scale * exp(-(0.25 * betaCombined ) * lightDepth);`}
        }

        lastOpticalDepth = opticalDepth;

      }

      float mu = dot(rayDir, lightDir);
      float mumu = 1.0 + mu * mu;

      float phaseRayleigh = 0.05968310365 * mumu;

      ${se.haze?ue.H`return 3.0 * scattering * stepSize * phaseRayleigh * betaRayleigh;`:ue.H`
            const float g = 0.8;
            const float gg = g * g;
            float phaseMie = end == maxEnd ? 0.11936620731 * ((1.0 - gg) * mumu) / (pow(1.0 + gg - 2.0 * mu * g, 1.5) * (2.0 + gg)) : 0.0;
            phaseMie += getGlow(1.0 - mu, 5e-5, 3.0) * smoothstep(0.01, 0.1, length(scattering));
            phaseMie = clamp(phaseMie, 0.0, 128.0);
            return 3.0 * scattering * stepSize * (phaseRayleigh * betaRayleigh + 0.025 * phaseMie * betaMie);`}
    }

    vec3 tonemapACES(vec3 x) {
      return clamp((x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14), 0.0, 1.0);
    }

    vec4 applyUndergroundAtmosphere(vec3 rayDir, vec3 lightDirection, vec4 fragColor) {
      vec2 rayPlanetIntersect = sphereIntersect(cameraPosition, rayDir, radii[0], true);
      if (!((rayPlanetIntersect.x <= rayPlanetIntersect.y) && rayPlanetIntersect.y > 0.0)) {
        return fragColor;
      }

      float lightAngle = dot(lightDirection, normalize(cameraPosition + rayDir * max(0.0, rayPlanetIntersect.x)));
      vec4 surfaceColor = vec4(vec3(max(0.0, (smoothstep(-1.0, 0.8, 2.0 * lightAngle)))), 1.0 - altitudeFade);
      float relDist = (rayPlanetIntersect.y - max(0.0, rayPlanetIntersect.x)) / innerFadeDistance;
      if (relDist > 1.0) {
        return surfaceColor;
      }

      return mix(gl_FragColor, surfaceColor, smoothstep(0.0, 1.0, relDist * relDist));
    }

    void main() {
      vec3 rayDir = normalize(worldRay);
      float terrainDepth = -1.0;
      ${se.haze?ue.H`
          vec4 depthSample = texture2D(depthTex, vuv0).rgba;
          if (depthSample != vec4(0)) {
            vec3 cameraSpaceRay = normalize(eyeDir);
            cameraSpaceRay /= cameraSpaceRay.z;
            cameraSpaceRay *= -linearDepthFromTexture(depthTex, vuv0, nearFar);
            terrainDepth = max(0.0, length(cameraSpaceRay));
          }`:ue.H`
          float depthSample = texture2D(depthTex, vuv0).r;
          if (depthSample != 1.0) {
            gl_FragColor = vec4(0);
            return;
          }`}

      ${se.haze?ue.H`
            vec3 col = vec3(0);
            float fadeOut = smoothstep(-10000.0, -15000.0, heightParameters[0] - radii[0]);
            if(depthSample != vec4(0)){
              col = (1.0 - fadeOut) * hazeStrength * getAtmosphereColour(cameraPosition, rayDir, lightingMainDirection, terrainDepth);
            }
            float alpha = 1.0 - fadeOut;`:ue.H`
            vec3 col = getAtmosphereColour(cameraPosition, rayDir, lightingMainDirection, terrainDepth);;
            float alpha = smoothstep(0.0, mix(0.15, 0.01, heightParameters[3]), length(col));`}
      col = tonemapACES(col);
      gl_FragColor = delinearizeGamma(vec4(col, alpha));
      ${se.haze?"":ue.H`
          if (depthSample == 1.0) {
            gl_FragColor = applyUndergroundAtmosphere(rayDir, lightingMainDirection, gl_FragColor);
          }`}
    }
  `),ee}const Q=(0,x.c)(),J=Object.freeze(Object.defineProperty({__proto__:null,build:Z},Symbol.toStringTag,{value:"Module"}))},89803:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>$,a:()=>ue,b:()=>re});var D=T(550),x=T(32849),w=T(85755),B=T(98071),U=T(84178),W=T(17625),Y=T(9546),H=T(22355),G=T(66838);class $ extends W.K{constructor(){super(...arguments),this.viewMatrix=(0,D.c)()}}function re(ae){const oe=new H.kG;return oe.include(B.k,!1),oe.fragment.uniforms.add(new U.d("cloudRadius")),oe.fragment.uniforms.add(new U.d("halfCubeMapSize")),oe.fragment.uniforms.add(new U.d("power")),oe.fragment.uniforms.add(new U.d("sigmaE")),oe.fragment.uniforms.add(new U.d("density")),oe.fragment.uniforms.add(new U.d("cloudSize")),oe.fragment.uniforms.add(new U.d("detailSize")),oe.fragment.uniforms.add(new U.d("smoothness")),oe.fragment.uniforms.add(new U.d("cloudHeight")),oe.fragment.uniforms.add(new U.d("coverage")),oe.fragment.uniforms.add(new Y.j("view",ie=>ie.viewMatrix)),oe.fragment.uniforms.add(new G.Q("cloudShapeTexture")),oe.fragment.code.add(W.H`
    const int STEPS = ${ae.steps===x.p.SIXTEEN?W.H`16`:ae.steps===x.p.HUNDRED?W.H`100`:W.H`200`};
    const int STEPS_LIGHT = 6;
    const float stepL = 300.0 / float(STEPS_LIGHT);
    const float cloudStart = 1500.0;

    vec3 rayDirection(vec2 fragCoord) {
      vec2 xy = fragCoord - halfCubeMapSize;
      return normalize(vec3(-xy, -halfCubeMapSize));
    }

    float remap(float x, float low1, float high1, float low2, float high2) {
      return low2 + (x - low1) * (high2 - low2) / (high1 - low1);
    }

    float saturate(float x) {
      return clamp(x, 0.0, 1.0);
    }`),oe.fragment.code.add(W.H`
    float getCloudShape(vec3 pos, float pOffset) {
      const float textureWidth = ${W.H.float(w.IQ)};
      const float dataWidth = ${W.H.float(w.IQ)};
      const float tileRows = ${W.H.float(w.jy)};
      const vec3 atlasDimensions = vec3(${W.H.float(w.I_)}, ${W.H.float(w.I_)}, tileRows * tileRows);

      //Change from Y being height to Z being height
      vec3 p = float(${W.H.float(w.kR)}) * pos.xzy;

      //Pixel coordinates of point in the 3D data
      vec3 coord = vec3(mod(p - pOffset * atlasDimensions, atlasDimensions));
      float f = fract(coord.z);
      float level = floor(coord.z);
      float tileY = floor(level / tileRows);
      float tileX = level - tileY * tileRows;

      //The data coordinates are offset by the x and y tile, the two boundary cells between each tile pair and the initial boundary cell on the first row/column
      vec2 offset = atlasDimensions.x * vec2(tileX, tileY) + 2.0 * vec2(tileX, tileY) + 1.0;
      vec2 pixel = coord.xy + offset;
      vec2 data = texture2D(cloudShapeTexture, mod(pixel, dataWidth) / textureWidth).xy;

      return 1.0 - mix(data.x, data.y, f);
    }

    float getCloudMap(vec2 p){
      // Non-power-of-two textures can't be tiled using WebGL1
      // Get fractional part of uv to tile
      // Shift the texture center to origin to avoid seam artifacts
      vec2 uv = fract((${W.H.float(w.QZ)} * p) / ${W.H.float(w.IQ)} + 0.5);

      return texture2D(cloudShapeTexture, uv).a;
    }
    `),oe.fragment.code.add(W.H`float clouds(vec3 p) {
float cloud = saturate(0.5 * mix(0.0, 1.0, min(2.0 * coverage, 1.0)));
if (cloud <= 0.0) {
return 0.0;
}
float cloudMap = getCloudMap(cloudSize * p.xy);
cloud = mix(cloud, min(2.0 * (coverage), 1.0) * cloudMap, min(2.0 * (1.0 - coverage), 1.0));
if (cloud <= 0.0) {
return 0.0;
}
float shape = getCloudShape(8.0 * cloudSize * p, 0.0);
cloud = saturate(remap(cloud, smoothness * shape, 1.0, 0.0, 1.0));
if (cloud <= 0.0) {
return 0.0;
}
float heightFraction = saturate((length(p) - cloudRadius - cloudStart) / cloudHeight);
cloud *= saturate(remap(heightFraction, 0.0, 0.25, 0.0, 1.0)) * smoothstep(1.0, 0.25, heightFraction);
if (cloud <= 0.0) {
return 0.0;
}
return density * saturate(remap(cloud, 0.35 * smoothness * getCloudShape(detailSize * p, 0.0), 1.0, 0.0, 1.0));
}`),oe.fragment.code.add(W.H`vec2 sphereIntersections(vec3 start, vec3 dir, float radius) {
float a = dot(dir, dir);
float b = 2.0 * dot(dir, start);
float c = dot(start, start) - (radius * radius);
float d = (b * b) - 4.0 * a * c;
if (d < 0.0) {
return vec2(1e5, -1e5);
}
return vec2((-b - sqrt(d)) / (2.0 * a), (-b + sqrt(d)) / (2.0 * a));
}
float HenyeyGreenstein(float g, float costh) {
return (1.0 / (4.0 * 3.1415))  * ((1.0 - g * g) / pow(1.0 + g * g - 2.0 * g * costh, 1.5));
}`),oe.fragment.code.add("\n    vec3 multipleOctaves(float extinction, float mu, float stepL) {\n      float attenuation = 1.0;\n      float contribution = 1.0;\n      float phaseAttenuation = 1.0;\n      vec3 luminance = vec3(0);\n\n      for (int i = 0; i < 4; i++) {\n        float phase = mix(HenyeyGreenstein(0.0, mu), HenyeyGreenstein(0.3 * phaseAttenuation, mu), 0.7);\n        luminance += contribution * phase * exp(-stepL * extinction * sigmaE * attenuation);\n        attenuation *= 0.2;\n        contribution *= 0.6;\n        phaseAttenuation *= 0.5;\n      }\n\n      return luminance;\n    }"),oe.fragment.code.add(W.H`vec3 lightRay(vec3 org, vec3 p, float phaseFunction, float mu, vec3 sunDirection) {
float lightRayDensity = clouds(p);
lightRayDensity += clouds(p + sunDirection * 1.0 * stepL);
lightRayDensity += clouds(p + sunDirection * 2.0 * stepL);
lightRayDensity += clouds(p + sunDirection * 3.0 * stepL);
lightRayDensity += clouds(p + sunDirection * 4.0 * stepL);
lightRayDensity += clouds(p + sunDirection * 5.0 * stepL);
vec3 beersLaw = multipleOctaves(lightRayDensity, mu, stepL);
return mix(beersLaw * 2.0 * (1.0 - (exp(-stepL * lightRayDensity * 2.0 * sigmaE ))), beersLaw, 0.5 + 0.5 * mu);
}`),oe.fragment.code.add(W.H`vec3 mainRay(vec3 org, vec3 dir, vec3 sunDirection, float distToStart, float totalDistance, out float totalTransmittance) {
if (dir.z < 0.0) {
return vec3(0);
}
totalTransmittance = 1.0;
float stepS = totalDistance / float(STEPS);
float cameraHeight = length(org);
float mu = 0.5 + 0.5 * dot(sunDirection, dir);
float phaseFunction = mix(HenyeyGreenstein(-0.3, mu), HenyeyGreenstein(0.3, mu), 0.7);
vec3 p = org + distToStart  * dir;
float dist = distToStart;
vec3 color = vec3(0.0);
for (int i = 0; i < STEPS; i++) {
float sampleDensity = clouds(p);
float sampleSigmaE = sampleDensity * sigmaE;
if (sampleDensity > 0.0 ) {
float ambient = mix((1.2), (1.6), saturate((length(p) - cloudRadius - cloudStart) / cloudHeight));
vec3 luminance = sampleDensity * (ambient + power * phaseFunction * lightRay(org, p, phaseFunction, mu, sunDirection));
float transmittance = exp(-sampleSigmaE * stepS);
color += totalTransmittance * (luminance - luminance * transmittance) / sampleSigmaE;
totalTransmittance *= transmittance;
if (totalTransmittance <= 0.001) {
totalTransmittance = 0.0;
break;
}
}
dist += stepS;
p = org + dir * dist;
}
return color;
}`),oe.fragment.code.add(W.H`void main() {
vec3 rayDir = rayDirection(gl_FragCoord.xy);
rayDir = normalize(view * rayDir);
vec3 viewPos = vec3(0, 0, cloudRadius + 1.0);
bool hitsPlanet = rayDir.z < 0.0;
if (hitsPlanet) {
gl_FragColor = vec4(vec3(0), 1);
return;
}
vec2 rayStartIntersect = sphereIntersections(viewPos, rayDir, cloudRadius + cloudStart);
vec2 rayEndIntersect = sphereIntersections(viewPos, rayDir, cloudRadius + cloudStart + cloudHeight);
float distToStart = rayStartIntersect.y;
float totalDistance = rayEndIntersect.y - distToStart;
float totalTransmittance = 1.0;
vec3 sunDirection = normalize(vec3(0, 0, 1));
vec3 col = 0.5 * mainRay(viewPos, rayDir, sunDirection, distToStart, totalDistance, totalTransmittance).rgb;
gl_FragColor = vec4(col, totalTransmittance);
}`),oe}const ue=Object.freeze(Object.defineProperty({__proto__:null,CloudsDrawParameters:$,build:re},Symbol.toStringTag,{value:"Module"}))},50722:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>Q,b:()=>X});var D=T(28347),x=T(43703),w=T(44965),B=T(96896),U=T(31166),W=T(92724),Y=T(39337),H=T(69602),G=T(33726),$=T(19278),re=T(97139),ue=T(17625),ae=T(63123),oe=T(22355),ie=T(16396);function X(){const J=new oe.kG;J.attributes.add(ie.T.POSITION,"vec2"),J.varyings.add("worldRay","vec3");const{vertex:se,fragment:ee}=J;return se.uniforms.add([new ae.g("inverseProjectionMatrix",(le,ne)=>ne.camera.inverseProjectionMatrix),new ae.g("inverseViewMatrix",(le,ne)=>(0,D.a)(Z,ne.camera.viewMatrix))]),se.code.add(ue.H`void main(void) {
vec3 posViewNear = (inverseProjectionMatrix * vec4(position, -1.0, 1.0)).xyz;
worldRay = (inverseViewMatrix * vec4(posViewNear, 0.0)).xyz;
gl_Position = vec4(position, 1.0, 1.0);
}`),ee.include(G.Y),ee.include($.n),J.include(w._,{pbrMode:W.f7.Disabled,lightingSphericalHarmonicsOrder:2}),J.include(Y.e),J.include(B.D),J.include(U.k,{isGround:!1}),J.include(H.j,{instancedDoublePrecision:!1,isGround:!1}),ee.uniforms.add([new re.J("cameraPosition",(le,ne)=>ne.camera.eye)]),ee.code.add(ue.H`void main() {
vec4 cloudsColor = renderClouds(normalize(worldRay), cameraPosition);
gl_FragColor = vec4((1.0 - totalFadeInOut) * cloudsColor.rgb, cloudsColor.a);
}`),J}const Z=(0,x.c)(),Q=Object.freeze(Object.defineProperty({__proto__:null,build:X},Symbol.toStringTag,{value:"Module"}))},89652:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>Q,b:()=>Z});var D=T(6945),x=T(78925),w=T(24255),B=T(58173),U=T(54120),W=T(62952),Y=T(10109),H=T(67022),G=T(33726),$=T(2166),re=T(95285),ue=T(69960),ae=T(17625),oe=T(22355),ie=T(42743),X=T(16396);function Z(J){const se=new oe.kG,ee=J.output===D.H.Depth,le=J.hasMultipassTerrain&&(J.output===D.H.Color||J.output===D.H.Alpha);(0,$.S)(se,J),se.include(w.w,{hasModelTransformation:!1,linearDepth:ee}),se.include(B.c,J),se.attributes.add(X.T.POSITION,"vec3"),se.varyings.add("vpos","vec3"),le&&se.varyings.add("depth","float");const{vertex:ne,fragment:ce}=se;return ee&&(se.include(U.F,J),ne.uniforms.add(new re.A("nearFar",(de,me)=>me.camera.nearFar)),se.varyings.add("linearDepth","float")),ne.code.add(ae.H`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      ${le?"depth = (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${ee?ae.H`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:ae.H`transformPosition(proj, view, vpos);`}
    }
  `),se.include(x.f5,J),le&&se.include(Y.l,J),ce.include(G.Y),ce.uniforms.add(new ue.N("eColor",de=>de.color)),J.output===D.H.Highlight&&se.include(W.bA),ce.code.add(ae.H`
  void main() {
    discardBySlice(vpos);
    ${le?"terrainDepthTest(gl_FragCoord, depth);":""}
    vec4 fColor = ${J.hasVertexColors?"vColor * eColor;":"eColor;"}

    if (fColor.a < ${ae.H.float(H.b)}) {
      discard;
    }

    ${J.output===D.H.Alpha?ae.H`gl_FragColor = vec4(fColor.a);`:""}

    ${J.output===D.H.Color?ae.H`gl_FragColor = highlightSlice(fColor, vpos); ${J.transparencyPassType===ie.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}`:""}
    ${J.output===D.H.Highlight?ae.H`outputHighlight();`:""};
    ${J.output===D.H.Depth?ae.H`outputDepth(linearDepth);`:""};
  }
  `),se}const Q=Object.freeze(Object.defineProperty({__proto__:null,build:Z},Symbol.toStringTag,{value:"Module"}))},15261:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>Ae,a:()=>je,b:()=>ze,g:()=>Ee});var D=T(94425),x=T(75224),w=T(75550),B=T(35357),U=T(50574),W=T(52382),Y=T(6945),H=T(78925),G=T(26859),$=T(36603),re=T(58173),ue=T(21799),ae=T(51040),oe=T(54120),ie=T(62952),X=T(47923),Z=T(2122),Q=T(29052),J=T(75819),se=T(13146),ee=T(10109),le=T(92724),ne=T(37926),ce=T(56693),de=T(30249),me=T(67022),_e=T(93609),he=T(22799),ye=T(97139),fe=T(65787),De=T(17625),ve=T(46524),Ce=T(22355),ge=T(35387),Te=T(42743),Le=T(16396);const je=new Map([[Le.T.POSITION,0],[Le.T.NORMAL,1],[Le.T.NORMALCOMPRESSED,1],[Le.T.COLOR,2],[Le.T.UV0,3],[Le.T.UVREGION,4],[Le.T.COMPONENTINDEX,5]]);function ze(we){const Be=new Ce.kG;Be.include(ae.up,we),Be.include(ue.Bb,we),Be.include(re.c,we),Be.include($.D,we),Be.include(W.q,we),Be.include(B.AD,we),Be.include(_e.o,we),Be.include(H.P_,we),Be.include(ne.s,we),Be.include(U.z,we);const{vertex:Pe,fragment:Oe}=Be;Oe.uniforms.add(new ve.B("view")),we.pbrMode!==le.f7.Normal&&we.pbrMode!==le.f7.Schematic||(Be.include(le.jV,we),we.hasNormalTexture&&Be.include(Q.Q,we)),Pe.code.add(we.output===Y.H.Shadow&&we.componentData===B._N.Varying?De.H`#define discardShadows(castShadows) { if(!castShadows) { gl_Position = vec4(1e38, 1e38, 1e38, 1.0); return; } }`:De.H`#define discardShadows(castShadows) {}`);const Ke=we.integratedMeshMode===w.OH.ColorOverlay||we.integratedMeshMode===w.OH.ColorOverlayWithWater,Ve=Ke&&we.output===Y.H.Color&&we.pbrMode===le.f7.WaterOnIntegratedMesh;return Ke&&(Be.include(se.X,we),Be.include(de.WB,we),Pe.code.add(we.spherical?De.H`
      const float invEllipsoidRadius = ${De.H.float(1/(we.ellipsoidMode===he.U.Earth?D.sv.radius:we.ellipsoidMode===he.U.Mars?D.yr.radius:D.Z1.radius))};
      vec2 projectOverlay(vec3 pos) {
        return pos.xy / (1.0 + invEllipsoidRadius * pos.z);
      }
      `:De.H`vec2 projectOverlay(vec3 pos) { return pos.xy; }`)),Ve&&(Be.varyings.add("tbnTangent","vec3"),Be.varyings.add("tbnBiTangent","vec3"),Be.varyings.add("groundNormal","vec3")),Pe.code.add(De.H`
    void main() {
      bool castShadows;
      vec4 externalColor = forwardExternalColor(castShadows);
      discardShadows(castShadows);

      vertexDiscardByOpacity(externalColor.a);

      if (externalColor.a < ${De.H.float(me.b)}) {
        // Discard this vertex
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      }

      forwardPosition(readElevationOffset());
      forwardNormal();
      forwardTextureCoordinates();
      forwardVertexColor();
      forwardLinearDepth();
      ${Ve?we.spherical?De.H`
                groundNormal = normalize(positionWorld());
                tbnTangent = normalize(cross(vec3(0.0, 0.0, 1.0), groundNormal));
                tbnBiTangent = normalize(cross(groundNormal, tbnTangent));`:De.H`
                groundNormal = vec3(0.0, 0.0, 1.0);
                tbnTangent = vec3(1.0, 0.0, 0.0);
                tbnBiTangent = vec3(0.0, 1.0, 0.0);`:""}
      ${Ke?De.H`setOverlayVTC(projectOverlay(position));`:""}
    }
  `),we.output===Y.H.Alpha&&(Oe.include(X.S),Be.include(ee.l,we),Be.include(Z.P,we),Ke&&Oe.uniforms.add(new ge.A("ovColorTex",(Ne,Ie)=>(0,de.Tw)(Ne,Ie))),Oe.code.add(De.H`
      void main() {
        discardBySlice(vPositionWorldCameraRelative);
        ${we.hasMultipassTerrain?De.H`terrainDepthTest(gl_FragCoord, vPosition_view.z);`:""}

        vec4 textureColor = readBaseColorTexture();
        discardOrAdjustAlpha(textureColor);

        vec4 externalColor;
        int externalColorMixMode;
        readExternalColor(externalColor, externalColorMixMode);

        vec4 materialColor = computeMaterialColor(
          textureColor,
          externalColor,
          externalColorMixMode
        );
        ${Ke?De.H`
                vec4 overlayColor = getOverlayColor(ovColorTex, vtcOverlay);
                materialColor = materialColor * (1.0 - overlayColor.a) + overlayColor;`:""}

        gl_FragColor = vec4(materialColor.a);
      }
    `)),we.output===Y.H.Color&&(Oe.include(X.S),Be.include(ee.l,we),Be.include(Z.P,we),Be.include(J.B,we),Be.include(se.X,we),we.receiveShadows?(Be.include(ce.hb,we),Oe.code.add(De.H`float evaluateShadow() {
return readShadowMap(vPositionWorldCameraRelative, linearDepth);
}`)):Oe.code.add(De.H`float evaluateShadow() { return 0.0; }`),Ke&&Oe.uniforms.add(new ge.A("ovColorTex",(Ne,Ie)=>(0,de.Tw)(Ne,Ie))),Oe.code.add(De.H`
      void main() {
        discardBySlice(vPositionWorldCameraRelative);
        ${we.hasMultipassTerrain?De.H`terrainDepthTest(gl_FragCoord, vPosition_view.z);`:""}

        vec4 textureColor = readBaseColorTexture();
        discardOrAdjustAlpha(textureColor);

        vec4 externalColor;
        int externalColorMixMode;
        readExternalColor(externalColor, externalColorMixMode);

        vec4 materialColor = computeMaterialColor(
          textureColor,
          externalColor,
          externalColorMixMode
        );
        ${Ke?De.H`vec4 overlayColor = getOverlayColor(ovColorTex, vtcOverlay);`:""}
    `),we.pbrMode===le.f7.Normal||we.pbrMode===le.f7.Schematic?(Oe.uniforms.add(new ye.J("lightingMainIntensity",(Ne,Ie)=>Ie.lighting.mainLight.intensity)),Oe.code.add(De.H`
        ${we.pbrMode===le.f7.Normal?De.H`
                applyPBRFactors();
                if (int(externalColorMixMode) == 3) {
                  mrr = vec3(0.0, 0.6, 0.2);
                }`:""}
        vec3 normalVertex = shadingNormalWorld();
        float additionalIrradiance = 0.02 * lightingMainIntensity[2];
      `),Oe.code.add(we.hasNormalTexture?De.H`mat3 tangentSpace = computeTangentSpace(normalVertex, vPositionWorldCameraRelative, vuv0);
vec3 shadingNormal = computeTextureNormal(tangentSpace, vuv0);`:De.H`vec3 shadingNormal = normalVertex;`),Oe.code.add(De.H`${we.spherical?De.H`vec3 normalGround = normalize(positionWorld());`:De.H`vec3 normalGround = vec3(0.0, 0.0, 1.0);`}
      `),Oe.code.add(De.H`
        vec3 viewDir = normalize(vPositionWorldCameraRelative);
        float ssao = 1.0 - occlusion * (1.0 - evaluateAmbientOcclusion());

        ${we.snowCover?De.H`
                vec3 surfaceNormal = normalize(shadingNormalWorld());
                float snow = smoothstep(0.5, 0.55, dot(surfaceNormal, normalize(positionWorld())));
                materialColor.rgb = mix(materialColor.rgb, vec3(1), snow);

                shadingNormal = mix(shadingNormal, surfaceNormal, snow);
                ssao = mix(ssao, 0.0, snow);
                mrr = mix(mrr, vec3(0.0, 1.0, 0.04), snow);
                emission = mix(emission, vec3(0.0), snow);`:""}

        ${Ke?De.H` materialColor = materialColor * (1.0 - overlayColor.a) + overlayColor;`:""}

        vec3 additionalLight = evaluateAdditionalLighting(ssao, positionWorld());
        vec4 shadedColor = vec4(evaluateSceneLightingPBR(shadingNormal, materialColor.rgb, evaluateShadow(), ssao, additionalLight, viewDir, normalGround, mrr, emission, additionalIrradiance), materialColor.a);
        `)):(we.receiveShadows?Oe.code.add(De.H`float shadow = evaluateShadow();`):we.spherical?(Oe.uniforms.add(new fe.p("lightingGlobalFactor",(Ne,Ie)=>Ie.lighting.globalFactor)),Oe.code.add(De.H`float additionalAmbientScale = additionalDirectedAmbientLight(positionWorld());
float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);`)):Oe.code.add(De.H`float shadow = 0.0;`),Ve&&Oe.uniforms.add(new ge.A("ovNormalTex",(Ne,Ie)=>Ee(Ie))),we.snowCover&&(Be.extensions.add("GL_OES_standard_derivatives"),Oe.code.add(De.H`vec3 surfaceNormal = normalize(cross(dFdx(vPositionWorldCameraRelative), dFdy(vPositionWorldCameraRelative)));
float snow = smoothstep(0.5, 0.55, dot(surfaceNormal, normalize(positionWorld())));
materialColor.rgb = mix(materialColor.rgb, vec3(1), snow);`)),Oe.code.add(De.H`
        float ambientOcclusion = evaluateAmbientOcclusion();
        vec3 additionalLight = evaluateAdditionalLighting(ambientOcclusion, positionWorld());

        ${Ke?De.H` materialColor = materialColor * (1.0 - overlayColor.a) + overlayColor;`:""}

        vec4 shadedColor = vec4(evaluateSceneLighting(shadingNormalWorld(), materialColor.rgb, shadow, ambientOcclusion, additionalLight), materialColor.a);
      ${Ve?De.H`
              vec4 overlayWaterMask = getOverlayColor(ovNormalTex, vtcOverlay);
              float waterNormalLength = length(overlayWaterMask);
              if (waterNormalLength > 0.95) {
                mat3 tbnMatrix = mat3(tbnTangent, tbnBiTangent, groundNormal);
                vec4 waterColorLinear = getOverlayWaterColor(overlayWaterMask, overlayColor, -normalize(vPositionWorldCameraRelative), shadow, groundNormal, tbnMatrix, vPosition_view, positionWorld());
                vec4 waterColorNonLinear = delinearizeGamma(vec4(waterColorLinear.xyz, 1.0));
                // un-gamma the ground color to mix in linear space
                shadedColor = mix(shadedColor, waterColorNonLinear, waterColorLinear.w);
              }`:""}
      `)),Oe.code.add(De.H`
        gl_FragColor = highlightSlice(shadedColor, vPositionWorldCameraRelative);
        ${we.transparencyPassType===Te.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
      }
    `)),we.output!==Y.H.Depth&&we.output!==Y.H.Shadow||(Be.include(oe.F,we),Oe.code.add(De.H`void main() {
discardBySlice(vPositionWorldCameraRelative);
vec4 textureColor = readBaseColorTexture();
discardOrAdjustAlpha(textureColor);
outputDepth(linearDepth);
}`)),we.output===Y.H.Normal&&(Be.include(J.B,we),Oe.code.add(De.H`
      void main() {
        discardBySlice(vPositionWorldCameraRelative);

        vec4 textureColor = readBaseColorTexture();
        discardOrAdjustAlpha(textureColor);

        // note: the alpha component needs to be 1.0 in order for this material
        // to influence ambient occlusion, see the ssao fragment shader
        float alpha = ${we.normalType===G.h.Ground?"0.0":"1.0"};
        gl_FragColor = vec4(vec3(.5) + .5 * shadingNormal_view(), alpha);
      }
    `)),we.output===Y.H.Highlight&&(Be.include(ie.bA),Oe.code.add(De.H`
      void main() {
        discardBySlice(vPositionWorldCameraRelative);

        vec4 textureColor = readBaseColorTexture();
        discardOrAdjustAlpha(textureColor);

        ${Ke?De.H`
                vec4 overlayColor = getCombinedOverlayColor();
                if (overlayColor.a == 0.0) {
                  gl_FragColor = vec4(0.0);
                  return;
                }`:""}

        outputHighlight();
      }
    `)),Be}function Ee(we){return 0===we.overlays.length?null:we.overlays[x.fu.INNER].getValidTexture(x.NH.Water)}const Ae=Object.freeze(Object.defineProperty({__proto__:null,attributeLocations:je,build:ze,getOverlayNormalTexture:Ee},Symbol.toStringTag,{value:"Module"}))},70264:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>G,a:()=>re,b:()=>$});var D=T(94573),x=T(98071),w=T(65787),B=T(18952),U=T(17625),W=T(22355),Y=T(35387),H=T(54580);class G extends U.K{constructor(){super(...arguments),this.overlayIndex=0,this.opacity=1}}function $(ue){const ae=new W.kG;ae.include(x.k);const oe=ae.fragment;switch(ue.function){case H.v3.Standard:oe.uniforms.add(new Y.A("tex",ie=>ie.texture)),ue.hasOpacityFactor?(oe.uniforms.add(new w.p("opacity",ie=>ie.opacity)),oe.code.add(U.H`void main() {
gl_FragColor = texture2D(tex, uv) * opacity;
}`)):oe.code.add(U.H`void main() {
gl_FragColor = texture2D(tex, uv);
}`);break;case H.v3.OverlayWithTransparency:oe.uniforms.add(new Y.A("tex",ie=>ie.texture)),oe.uniforms.add(new B._("overlayIdx",ie=>ie.overlayIndex)),ue.hasOpacityFactor&&oe.uniforms.add(new w.p("opacity",ie=>ie.opacity)),oe.code.add(U.H`
        void main() {
          vec2 overlayUV = overlayIdx == 0 ? vec2(uv.x * 0.5, uv.y) : vec2(uv.x * 0.5 + 0.5, uv.y);
          gl_FragColor = texture2D(tex, overlayUV) ${ue.hasOpacityFactor?"* opacity":""};
        }`);break;case H.v3.TransparentToHUDVisibility:oe.uniforms.add(new Y.A("tex",ie=>ie.texture)),oe.code.add(U.H`void main() {
gl_FragColor = vec4(1.0 - texture2D(tex, uv).a);
}`);break;case H.v3.Transparency:oe.uniforms.add([new Y.A("colorTexture",ie=>ie.colorTexture),new Y.A("alphaTexture",ie=>ie.alphaTexture),new Y.A("frontFaceTexture",ie=>ie.frontFaceTexture)]),oe.code.add(U.H`void main() {
vec4 srcColor = texture2D(colorTexture, uv);
if(srcColor.a <= 1e-5){
discard;
}
float srcAlpha = texture2D(alphaTexture, uv).r;
vec4 frontFace = texture2D(frontFaceTexture, uv);
gl_FragColor = vec4(mix(srcColor.rgb/srcColor.a, frontFace.rgb, frontFace.a), 1.0 - srcAlpha);
}`);break;case H.v3.COUNT:break;default:(0,D.Bg)(ue.function)}return ae}const re=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:G,build:$},Symbol.toStringTag,{value:"Module"}))},96160:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>Be,b:()=>we});var D=T(62208),x=T(43703),w=T(52382),B=T(73132),U=T(6945),W=T(78925),Y=T(24255),H=T(60355),G=T(26859),$=T(84833),re=T(99579),ue=T(36603),ae=T(58173),oe=T(21799),ie=T(66085),X=T(58208),Z=T(29052),Q=T(54662),J=T(13146),se=T(10109),ee=T(96395),le=T(98898),ne=T(92724),ce=T(56693),de=T(92836),me=T(67022),_e=T(93609),he=T(411),ye=T(28137),fe=T(2166),De=T(97139),ve=T(69960),Ce=T(65787),ge=T(17625),Te=T(63123),Le=T(22355),je=T(35387),ze=T(42743),Ee=T(16396),Ae=T(95279);function we(Pe){const Oe=new Le.kG,Ke=Oe.vertex.code,Ve=Oe.fragment.code;Oe.include(he.a,{name:"Default Material Shader",output:Pe.output});const Ne=(0,fe.S)(Oe,Pe);return Oe.include($.f),Oe.varyings.add("vpos","vec3"),Oe.include(de.k,Pe),Oe.include(H.f,Pe),Oe.include(ie.L,Pe),Pe.output!==U.H.Color&&Pe.output!==U.H.Alpha||((0,fe.h)(Oe.vertex,Pe),Oe.include(G.O,Pe),Oe.include(Y.w,{linearDepth:!1,hasModelTransformation:Pe.hasModelTransformation}),Pe.normalType===G.h.Attribute&&Pe.offsetBackfaces&&Oe.include(B.w),Oe.include(Z.Q,Pe),Oe.include(oe.Bb,Pe),Pe.instancedColor&&Oe.attributes.add(Ee.T.INSTANCECOLOR,"vec4"),Oe.varyings.add("localvpos","vec3"),Oe.include(ue.D,Pe),Oe.include(w.q,Pe),Oe.include(re.R,Pe),Oe.include(ae.c,Pe),Oe.vertex.uniforms.add(new ve.N("externalColor",Ie=>Ie.externalColor)),Oe.varyings.add("vcolorExt","vec4"),Pe.hasMultipassTerrain&&Oe.varyings.add("depth","float"),Pe.hasModelTransformation&&Oe.vertex.uniforms.add(new Te.g("model",Ie=>(0,D.pC)(Ie.modelTransformation)?Ie.modelTransformation:x.I)),Ke.add(ge.H`
      void main(void) {
        forwardNormalizedVertexColor();
        vcolorExt = externalColor;
        ${Pe.instancedColor?"vcolorExt *= instanceColor;":""}
        vcolorExt *= vvColor();
        vcolorExt *= getSymbolColor();
        forwardColorMixMode();

        if (vcolorExt.a < ${ge.H.float(me.b)}) {
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        } else {
          vpos = calculateVPos();
          localvpos = vpos - view[3].xyz;
          vpos = subtractOrigin(vpos);
          ${Pe.normalType===G.h.Attribute?ge.H`vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:""}
          vpos = addVerticalOffset(vpos, localOrigin);
          ${Pe.hasVertexTangents?"vTangent = dpTransformVertexTangent(tangent);":""}
          gl_Position = transformPosition(proj, view, ${Pe.hasModelTransformation?"model,":""} vpos);
          ${Pe.normalType===G.h.Attribute&&Pe.offsetBackfaces?"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);":""}
        }

        ${Pe.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
        forwardLinearDepth();
        forwardTextureCoordinates();
      }
    `)),Pe.output===U.H.Alpha&&(Oe.include(W.f5,Pe),Oe.include(_e.z,Pe),Oe.include(se.l,Pe),Oe.fragment.uniforms.add([new Ce.p("opacity",Ie=>Ie.opacity),new Ce.p("layerOpacity",Ie=>Ie.layerOpacity)]),Pe.hasColorTexture&&Oe.fragment.uniforms.add(new je.A("tex",Ie=>Ie.texture)),Oe.fragment.include(ye.y),Ve.add(ge.H`
      void main() {
        discardBySlice(vpos);
        ${Pe.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
        ${Pe.hasColorTexture?ge.H`
                vec4 texColor = texture2D(tex, vuv0);
                ${Pe.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:ge.H`vec4 texColor = vec4(1.0);`}
        ${Pe.hasVertexColors?ge.H`float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:ge.H`float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        gl_FragColor = vec4(opacity_);
      }
    `)),Pe.output===U.H.Color&&(Oe.include(W.f5,Pe),Oe.include(J.X,Pe),Oe.include(Q.K,Pe),Oe.include(_e.z,Pe),Oe.include(Pe.instancedDoublePrecision?ce.hb:ce.XE,Pe),Oe.include(se.l,Pe),(0,fe.h)(Oe.fragment,Pe),Oe.fragment.uniforms.add([Ne,new De.J("ambient",Ie=>Ie.ambient),new De.J("diffuse",Ie=>Ie.diffuse),new Ce.p("opacity",Ie=>Ie.opacity),new Ce.p("layerOpacity",Ie=>Ie.layerOpacity),new Ce.p("lightingGlobalFactor",(Ie,We)=>We.lighting.globalFactor),new De.J("lightingMainIntensity",(Ie,We)=>We.lighting.mainLight.intensity)]),Oe.fragment.constants.add("ambientBoostFactor","float",Ae.V),Pe.hasColorTexture&&Oe.fragment.uniforms.add(new je.A("tex",Ie=>Ie.texture)),Oe.include(ne.jV,Pe),Oe.include(le.T,Pe),Oe.fragment.include(ye.y),Oe.include(ee.k,Pe),Ve.add(ge.H`
      void main() {
        discardBySlice(vpos);
        ${Pe.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
        ${Pe.hasColorTexture?ge.H`
                vec4 texColor = texture2D(tex, vuv0);
                ${Pe.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:ge.H`vec4 texColor = vec4(1.0);`}
        shadingParams.viewDirection = normalize(vpos - cameraPosition);
        ${Pe.normalType===G.h.ScreenDerivative?ge.H`
                vec3 normal = screenDerivativeNormal(localvpos);`:ge.H`
                shadingParams.normalView = vNormalWorld;
                vec3 normal = shadingNormal(shadingParams);`}
        ${Pe.pbrMode===ne.f7.Normal?"applyPBRFactors();":""}
        float ssao = evaluateAmbientOcclusionInverse();
        ssao *= getBakedOcclusion();

        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
        ${Pe.receiveShadows?"float shadow = readShadowMap(vpos, linearDepth);":Pe.spherical?"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);":"float shadow = 0.0;"}
        vec3 matColor = max(ambient, diffuse);
        ${Pe.hasVertexColors?ge.H`
                vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:ge.H`
                vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        ${Pe.hasNormalTexture?ge.H`
                mat3 tangentSpace = ${Pe.hasVertexTangents?"computeTangentSpace(normal);":"computeTangentSpace(normal, vpos, vuv0);"}
                vec3 shadingNormal = computeTextureNormal(tangentSpace, vuv0);`:ge.H`vec3 shadingNormal = normal;`}
        vec3 normalGround = ${Pe.spherical?ge.H`normalize(vpos + localOrigin);`:ge.H`vec3(0.0, 0.0, 1.0);`}

        ${Pe.snowCover?ge.H`
                float snow = smoothstep(0.5, 0.55, dot(normal, normalGround));
                albedo = mix(albedo, vec3(1), snow);
                shadingNormal = mix(shadingNormal, normal, snow);
                ssao = mix(ssao, 1.0, snow);`:""}

        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;

        ${Pe.pbrMode===ne.f7.Normal||Pe.pbrMode===ne.f7.Schematic?ge.H`
                float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];
                ${Pe.snowCover?ge.H`
                        mrr = mix(mrr, vec3(0.0, 1.0, 0.04), snow);
                        emission = mix(emission, vec3(0.0), snow);`:""}

                vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:ge.H`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);
        ${Pe.transparencyPassType===ze.Am.Color?ge.H`gl_FragColor = premultiplyAlpha(gl_FragColor);`:""}
      }
    `)),Oe.include(X.s,Pe),Oe}const Be=Object.freeze(Object.defineProperty({__proto__:null,build:we},Symbol.toStringTag,{value:"Module"}))},71964:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>le,b:()=>se});var D=T(67831),x=T(99770),w=T(78925),B=T(10109),U=T(95285),W=T(69960),Y=T(65787),H=T(17625),G=T(46524),$=T(22355),re=T(16396),ue=T(57008),ae=T(98828),oe=T(72175),ie=T(98412),X=T(73105),Z=T(10967),Q=T(82716),J=T(69276);function se(ne){const ce=new $.kG,de=ce.vertex,me=ce.fragment;return ne.legacy&&de.uniforms.add(new G.B("model")),ne.antialiasing&&(de.code.add(H.H`#define ANTIALIASING 1`),me.code.add(H.H`#define ANTIALIASING 1`)),ce.include(ue.g,ne),ce.include(X.UR,ne),ce.include(Z.B,ne),ce.include(J.H,ne),ce.include(Q.N,ne),ce.include(w.f5,ne),ce.include(oe.o,ne),ce.include(ae.S,ne),ce.include(ie.l,ne),ce.include(B.l,ne),ce.varyings.add("vColor","vec4"),ce.varyings.add("vRadius","float"),ce.varyings.add("vPosition","vec3"),ce.varyings.add("vWorldPosition","vec3"),ce.varyings.add("vViewPos","vec3"),ce.varyings.add("vLineLengthPixels","float"),ce.varyings.add("vSizeFalloffFactor","float"),de.uniforms.add(new U.A("pixelToNDC",(_e,he)=>(0,D.a)(ee,2/he.camera.fullViewport[2],2/he.camera.fullViewport[3]))),de.uniforms.add(new W.N("viewport",(_e,he)=>he.camera.fullViewport)),de.uniforms.add(new Y.p("pixelRatio",(_e,he)=>he.camera.pixelRatio)),ce.attributes.add(re.T.POSITION0,"vec3"),ce.attributes.add(re.T.POSITION1,"vec3"),ce.attributes.add(re.T.VARIANTOFFSET,"float"),ce.attributes.add(re.T.VARIANTSTROKE,"float"),ce.attributes.add(re.T.VARIANTEXTENSION,"float"),de.code.add(H.H`const float opaqueCutoff = 1.0 / 255.0;
void calculateGeometricOutputs(vec3 viewPosV0, vec3 viewPosV1, vec3 worldPosV0, vec3 worldPosV1, vec3 worldNormal, UnpackedAttributes unpackedAttributes) {
vec2 sideness = unpackedAttributes.sideness;
vec2 sidenessNorm = unpackedAttributes.sidenessNorm;
vWorldPosition = mix(worldPosV0, worldPosV1, sidenessNorm.y).xyz;
vec3 viewPos = mix(viewPosV0, viewPosV1, sidenessNorm.y);
vViewPos = viewPos;
vec4 projPosV0 = projFromViewPosition(viewPosV0);
vec4 projPosV1 = projFromViewPosition(viewPosV1);
vec4 projPos = projFromViewPosition(viewPos);
vec3 screenSpaceLineNDC = (projPosV1.xyz / projPosV1.w - projPosV0.xyz / projPosV0.w);
vec2 ndcToPixel = viewport.zw * 0.5;
vec2 screenSpaceLinePixels = screenSpaceLineNDC.xy * ndcToPixel;
float lineLengthPixels = length(screenSpaceLinePixels);
float dzPerPixel = screenSpaceLineNDC.z / lineLengthPixels;
vec2 screenSpaceDirection = screenSpaceLinePixels / lineLengthPixels;
vec2 perpendicularScreenSpaceDirection = vec2(screenSpaceDirection.y, -screenSpaceDirection.x) * sideness.x;
float falloffFactor = distanceBasedPerspectiveFactor(-viewPos.z) * pixelRatio;
float lineWidthPixels = unpackedAttributes.lineWidthPixels * falloffFactor;
float extensionLengthPixels = calculateExtensionLength(unpackedAttributes.extensionLengthPixels, lineLengthPixels) * falloffFactor;
float lineAmplitudePixels = calculateLineAmplitude(unpackedAttributes) * pixelRatio;
vSizeFalloffFactor = falloffFactor;
float lineWidthAndAmplitudePixels = lineWidthPixels + lineAmplitudePixels + lineAmplitudePixels;
float extendedLineLengthPixels = lineLengthPixels + extensionLengthPixels + extensionLengthPixels;
#ifdef ANTIALIASING
const float aaPaddingPixels = 1.0;
float halfAAPaddedLineWidthAndAmplitudePixels = lineWidthAndAmplitudePixels * 0.5 + aaPaddingPixels;
float aaPaddedRoundedCapSizePixels = lineWidthPixels * 0.5 + aaPaddingPixels;
#else
float halfAAPaddedLineWidthAndAmplitudePixels = max(lineWidthAndAmplitudePixels, 1.0) * 0.5;
float aaPaddedRoundedCapSizePixels = max(lineWidthPixels, 1.0) * 0.5;
#endif
vec2 halfAAPaddedLineWidthAndAmplitudeNDC = halfAAPaddedLineWidthAndAmplitudePixels * pixelToNDC;
vec2 aaPaddedRoundedCapSizeNDC = aaPaddedRoundedCapSizePixels * pixelToNDC;
vec2 extensionLengthNDC = extensionLengthPixels * pixelToNDC;
vec2 ndcOffset = (
screenSpaceDirection * sideness.y * (aaPaddedRoundedCapSizeNDC + extensionLengthNDC)
+ perpendicularScreenSpaceDirection * halfAAPaddedLineWidthAndAmplitudeNDC
);
projPos.xy += ndcOffset * projPos.w;
projPos.z += (dzPerPixel * (aaPaddedRoundedCapSizePixels + extensionLengthPixels)) * sideness.y * projPos.w;
projPos = adjustProjectedPosition(projPos, worldNormal, 1.0 + max((lineWidthAndAmplitudePixels - 1.0) * 0.5, 0.0));
float aaPaddedLineWithCapsLengthPixels = extendedLineLengthPixels + aaPaddedRoundedCapSizePixels + aaPaddedRoundedCapSizePixels;
float pixelPositionAlongLine = aaPaddedLineWithCapsLengthPixels * sidenessNorm.y - aaPaddedRoundedCapSizePixels;
vPosition = vec3(
halfAAPaddedLineWidthAndAmplitudePixels * sideness.x,
pixelPositionAlongLine,
pixelPositionAlongLine / extendedLineLengthPixels
);
vRadius = lineWidthPixels * 0.5;
vLineLengthPixels = extendedLineLengthPixels;
discardShortEdges(unpackedAttributes, lineLengthPixels);
gl_Position = projPos;
}
void main() {
ComponentData component = readComponentData();
UnpackedAttributes unpackedAttributes = unpackAttributes(component);
vec3 worldPosV0, worldPosV1, viewPosV0, viewPosV1;
worldAndViewFromModelPosition(position0, component.verticalOffset, worldPosV0, viewPosV0);
worldAndViewFromModelPosition(position1, component.verticalOffset, worldPosV1, viewPosV1);
vColor = component.color;
if (vColor.a < opaqueCutoff) {
gl_Position = vec4(10.0, 10.0, 10.0, 1.0);
return;
}
if (discardNonSilhouetteEdges(viewPosV0, worldPosV0)) {
return;
}
calculateGeometricOutputs(viewPosV0, viewPosV1, worldPosV0, worldPosV1, worldNormal(), unpackedAttributes);
calculateStyleOutputs(unpackedAttributes);
}`),ce.fragment.code.add(H.H`
    vec2 lineWithCapsDistance(float radius, vec2 position, float lineLength) {
      float lineOffset = calculateLineOffset();
      float positionX = position.x - lineOffset;

      if (radius < 1.0) {
        // Handle this specifically for subpixel sizes:
        // 1. Compute correct coverage (note coverage is computed by
        //    0.5 - dist, so we make sure that that will lead to correct
        //    subpixel coverage
        // 2. Ignore rounded caps
        float coverageX = clamp(min(radius, positionX + 0.5) - max(-radius, positionX - 0.5), 0.0, 1.0);
        float coverageY = clamp(min(lineLength, position.y + 0.5) - max(0.0, position.y - 0.5), 0.0, 1.0);

        float coverage = min(coverageX, coverageY);

        return vec2(0.5 - coverage, 0.0);
      }
      else {
        // Between -radius -> 0 for start cap, 0 for line, 0 -> radius
        float positionOnCap = position.y - clamp(position.y, 0.0, lineLength);

        vec2 lineToPosition = vec2(positionX, positionOnCap);
        return vec2(length(lineToPosition) - radius, positionOnCap / radius);
      }
    }

    void main() {
      ${ne.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, vViewPos.z);":""}
      float radius = vRadius * calculateLinePressure();

      vec2 distance = lineWithCapsDistance(radius, vPosition.xy, vLineLengthPixels);
      float coverage = clamp(0.5 - distance.x, 0.0, 1.0);

      discardByCoverage(radius, coverage);
      discardBySlice(vWorldPosition);

      float alpha = vColor.a * coverage;

      gl_FragColor = vec4(vColor.rgb, alpha);

    }
  `),ce}const ee=(0,x.a)(),le=Object.freeze(Object.defineProperty({__proto__:null,build:se},Symbol.toStringTag,{value:"Module"}))},50570:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>X,b:()=>oe});var D=T(28347),x=T(43703),w=T(36603),B=T(47923),U=T(96896),W=T(95285),Y=T(39704),H=T(84178),G=T(17625),$=T(63123),re=T(22355),ue=T(66838),ae=T(16396);function oe(Z){const Q=new re.kG;Q.attributes.add(ae.T.POSITION,"vec2"),Q.include(w.D,{textureCoordinateType:w.N.Default}),Q.varyings.add("worldRay","vec3"),Q.varyings.add("eyeDir","vec3");const{vertex:J,fragment:se}=Q;return J.uniforms.add([new $.g("inverseProjectionMatrix",(ee,le)=>le.camera.inverseProjectionMatrix),new $.g("inverseViewMatrix",(ee,le)=>(0,D.a)(ie,le.camera.viewMatrix))]),J.code.add(G.H`void main(void) {
vec3 posViewNear = (inverseProjectionMatrix * vec4(position, -1, 1)).xyz;
eyeDir = posViewNear;
worldRay = (inverseViewMatrix * vec4(posViewNear, 0)).xyz;
forwardTextureCoordinates();
gl_Position = vec4(position, 1, 1);
}`),se.uniforms.add(new H.d("atmosphereC")),se.uniforms.add(new Y.K("cameraPosition")),se.uniforms.add(new W.A("nearFar",(ee,le)=>le.camera.nearFar)),se.uniforms.add(new ue.Q("depthTex")),se.uniforms.add(new H.d("fogStrength")),se.uniforms.add(new H.d("fogAmount")),se.uniforms.add(new Y.K("fogColor")),Q.include(U.D),se.include(B.S),se.code.add(G.H`vec2 sphereIntersect(vec3 start, vec3 dir) {
float a = dot(dir, dir);
float b = 2.0 * dot(dir, start);
float d = (b * b) - 4.0 * a * atmosphereC;
if (d < 0.0) {
return vec2(1e5, -1e5);
}
return vec2((-b - sqrt(d)) / (2.0 * a), (-b + sqrt(d)) / (2.0 * a));
}`),se.code.add(G.H`vec4 applyFog(float dist, vec3 rayDir){
if(dist == -1.0){
vec2 rayAtmosphereIntersect = sphereIntersect(cameraPosition, rayDir);
dist = 0.055 * rayAtmosphereIntersect.y;
}
float fogAmount = fogAmount * (1.0 - exp(-dist * fogStrength));
return vec4(fogAmount * fogColor, fogAmount);
}`),se.code.add(G.H`
    vec3 tonemapACES(vec3 x) {
      return clamp((x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14), 0.0, 1.0);
    }

    void main() {
      vec3 rayDir = normalize(worldRay);
      float terrainDepth = -1.0;

      float depthSample = texture2D(depthTex, vuv0).r;
      float zNorm = 2.0 * depthSample - 1.0;
      float linDepth = 2.0 * nearFar[0] * nearFar[1] / (nearFar[1] + nearFar[0] - zNorm * (nearFar[1] - nearFar[0]));
      if(depthSample < 1.0 && depthSample > 0.0){
        vec3 cameraSpaceRay = normalize(eyeDir);
        cameraSpaceRay /= cameraSpaceRay.z;
        cameraSpaceRay *= linDepth;
        terrainDepth = max(0.0, length(cameraSpaceRay));
      }

      ${Z.haze?G.H`
          if(terrainDepth == -1.0){
            gl_FragColor = vec4(0);
            return;
          }`:""}

      vec4 fog = applyFog(terrainDepth, rayDir);

      gl_FragColor = delinearizeGamma(vec4(tonemapACES(fog.rgb), fog.a));
    }
  `),Q}const ie=(0,x.c)(),X=Object.freeze(Object.defineProperty({__proto__:null,build:oe},Symbol.toStringTag,{value:"Module"}))},6467:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>Ce,b:()=>he,c:()=>fe});var D=T(62208),x=T(67831),w=T(99770),B=T(4794),U=T(10596),W=T(6945),Y=T(78925),H=T(35283),G=T(97347),$=T(27776),re=T(62952),ue=T(92836),ae=T(67022),oe=T(33726),ie=T(19278),X=T(71850),Z=T(95285),Q=T(69960),J=T(48565),se=T(65787),ee=T(7090),le=T(17625),ne=T(22355),ce=T(35387),de=T(42743),me=T(16396),_e=T(41857);function he(ge){const Te=new ne.kG,Le=ge.signedDistanceFieldEnabled;if(Te.include(H.H),Te.include(G.R,ge),Te.include(Y.f5,ge),ge.output===W.H.Occlusion)return Te.include($.R,ge),Te;const{vertex:je,fragment:ze}=Te;Te.include(X.cK),ze.include(ie.n),ze.include(oe.Y),Te.include(ue.k,ge),Te.varyings.add("vcolor","vec4"),Te.varyings.add("vtc","vec2"),Te.varyings.add("vsize","vec2"),ge.binaryHighlightOcclusionEnabled&&Te.varyings.add("voccluded","float"),je.uniforms.add([new Q.N("viewport",(Pe,Oe)=>Oe.camera.fullViewport),new Z.A("screenOffset",(Pe,Oe)=>(0,x.a)(ve,2*Pe.screenOffset[0]*Oe.camera.pixelRatio,2*Pe.screenOffset[1]*Oe.camera.pixelRatio)),new Z.A("anchorPosition",Pe=>fe(Pe)),new Q.N("materialColor",Pe=>Pe.color),new se.p("pixelRatio",(Pe,Oe)=>Oe.camera.pixelRatio)]),Le&&(je.uniforms.add(new Q.N("outlineColor",Pe=>Pe.outlineColor)),ze.uniforms.add([new Q.N("outlineColor",Pe=>ye(Pe)?Pe.outlineColor:B.Z),new se.p("outlineSize",Pe=>ye(Pe)?Pe.outlineSize:0)])),ge.hasScreenSizePerspective&&((0,X.ww)(je),(0,X.m8)(je)),(ge.debugDrawLabelBorder||ge.binaryHighlightOcclusionEnabled)&&Te.varyings.add("debugBorderCoords","vec4"),Te.attributes.add(me.T.UV0,"vec2"),Te.attributes.add(me.T.COLOR,"vec4"),Te.attributes.add(me.T.SIZE,"vec2"),Te.attributes.add(me.T.AUXPOS2,"vec4"),je.code.add(le.H`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${ge.hasScreenSizePerspective?le.H`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:le.H`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${ge.vvSize?"inputSize *= vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${ge.occlusionTestEnabled||ge.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":""}

      ${ge.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""}
    `);const Ee=le.H`vec2 uv01 = floor(uv0);
vec2 uv = uv0 - uv01;
quadOffset.xy = ((uv01 - anchorPosition) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;`,Ae=ge.pixelSnappingEnabled?Le?le.H`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:le.H`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:le.H`posProj += quadOffset;`;ge.vvColor&&je.uniforms.add([new J.b("vvColorColors",Pe=>Pe.vvColorColors,_e.x),new ee.O("vvColorValues",Pe=>Pe.vvColorValues,_e.x)]),je.uniforms.add(new Z.A("textureCoordinateScaleFactor",Pe=>(0,D.pC)(Pe.texture)&&(0,D.pC)(Pe.texture.descriptor.textureCoordinateScaleFactor)?Pe.texture.descriptor.textureCoordinateScaleFactor:w.O)),je.code.add(le.H`
    ${ge.occlusionTestEnabled?"if (visible) {":""}
    ${Ee}
    ${ge.vvColor?"vcolor = vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    bool alphaDiscard = vcolor.a < ${le.H.float(ae.b)};
    ${Le?`alphaDiscard = alphaDiscard && outlineColor.a < ${le.H.float(ae.b)};`:""}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${Ae}
      gl_Position = posProj;
    }

    vtc = uv * textureCoordinateScaleFactor;

    ${ge.debugDrawLabelBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":""}
    vsize = inputSize;
    ${ge.occlusionTestEnabled?le.H`} else { vtc = vec2(0.0);
      ${ge.debugDrawLabelBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
  }
  `),ze.uniforms.add(new ce.A("tex",Pe=>Pe.texture));const we=ge.debugDrawLabelBorder?le.H`(isBorder > 0.0 ? 0.0 : ${le.H.float(ae.F)})`:le.H.float(ae.F),Be=le.H`
    ${ge.debugDrawLabelBorder?le.H`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${Le?le.H`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = ${le.H.float(U.Ph)};
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${we} ||
          fillPixelColor.a + outlinePixelColor.a < ${le.H.float(ae.b)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        gl_FragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${we}) {
          discard;
        }

        gl_FragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:le.H`
          vec4 texColor = texture2D(tex, vtc, -0.5);
          if (texColor.a < ${we}) {
            discard;
          }
          gl_FragColor = texColor * premultiplyAlpha(vcolor);
          `}

    // Draw debug border with transparency, so that original texels along border are still partially visible
    ${ge.debugDrawLabelBorder?le.H`gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`:""}
  `;return ge.output===W.H.Alpha&&ze.code.add(le.H`
      void main() {
        ${Be}
        gl_FragColor = vec4(gl_FragColor.a);
      }
      `),ge.output===W.H.Color&&ze.code.add(le.H`
    void main() {
      ${Be}
      ${ge.transparencyPassType===de.Am.FrontFace?"gl_FragColor.rgb /= gl_FragColor.a;":""}
    }
    `),ge.output===W.H.Highlight&&(Te.include(re.bA),ze.code.add(le.H`
    void main() {
      ${Be}
      ${ge.binaryHighlightOcclusionEnabled?le.H`
          if (voccluded == 1.0) {
            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `)),Te}function ye(ge){return ge.outlineColor[3]>0&&ge.outlineSize>0}function fe(ge,Te=ve){return ge.textureIsSignedDistanceField?function De(ge,Te,Le){(0,D.pC)(Te)?(0,x.a)(Le,ge[0]*(Te[2]-Te[0])+Te[0],ge[1]*(Te[3]-Te[1])+Te[1]):(0,x.a)(Le,0,0)}(ge.anchorPosition,ge.distanceFieldBoundingBox,Te):(0,x.c)(Te,ge.anchorPosition),Te}const ve=(0,w.a)(),Ce=Object.freeze(Object.defineProperty({__proto__:null,build:he,calculateAnchorPosForRendering:fe},Symbol.toStringTag,{value:"Module"}))},17923:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>ue,b:()=>$});var D=T(993),x=T(4794),w=T(69960),B=T(17625),U=T(22355),W=T(35387),Y=T(16396);function $(){const ae=new U.kG,{vertex:oe,fragment:ie}=ae,X=oe.code,Z=ie.code;return ae.attributes.add(Y.T.POSITION,"vec2"),ae.varyings.add("uv","vec2"),ae.attributes.add(Y.T.UV0,"vec2"),oe.uniforms.add(new W.A("coverageTex",Q=>Q.coverageTexture)),X.add(B.H`void main() {
vec4 cov = texture2D(coverageTex, uv0);
if (cov.r == 0.0) {
gl_Position = vec4(0.0);
return;
}
gl_Position = vec4(position, 0.0, 1.0);
uv = position.xy * 0.5 + vec2(0.5);
}`),ie.uniforms.add(new W.A("tex",Q=>Q.blurColorTexture)),ie.uniforms.add(new W.A("origin",Q=>Q.highlightColorTexture)),ie.uniforms.add(new w.N("uColor",Q=>Q.color)),ie.uniforms.add(new w.N("haloColor",Q=>Q.haloColor)),ie.uniforms.add(new w.N("opacities",Q=>(0,D.s)(re,Q.haloOpacity,Q.haloOpacityOccluded,Q.fillOpacity,Q.fillOpacityOccluded))),ie.constants.add("outlineSize","float",8.6),ie.constants.add("blurSize","float",.4),Z.add(B.H`void main() {
vec4 blurredHighlightValue = texture2D(tex, uv);
float highlightIntensity = blurredHighlightValue.a;
if (highlightIntensity == 0.0) {
discard;
}
vec4 origin_color = texture2D(origin, uv);
float outlineIntensity;
float fillIntensity;
if (blurredHighlightValue.g > blurredHighlightValue.b) {
outlineIntensity = haloColor.w * opacities[1];
fillIntensity = uColor.w * opacities[3];
}
else {
outlineIntensity = haloColor.w * opacities[0];
fillIntensity = uColor.w * opacities[2];
}
float inner = 1.0 - outlineSize / 9.0;
float outer = 1.0 - (outlineSize + blurSize) / 9.0;
float outlineFactor = smoothstep(outer, inner, highlightIntensity);
float fillFactor = any(notEqual(origin_color, vec4(0.0, 0.0, 0.0, 0.0))) ? 1.0 : 0.0;
float intensity = outlineIntensity * outlineFactor * (1.0 - fillFactor) + fillIntensity * fillFactor;
gl_FragColor = vec4(mix(haloColor.rgb, uColor.rgb, fillFactor), intensity);
}`),ae}const re=(0,x.c)(),ue=Object.freeze(Object.defineProperty({__proto__:null,build:$},Symbol.toStringTag,{value:"Module"}))},47482:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>H,a:()=>$,b:()=>G});var D=T(99770),x=T(32181),w=T(17625),B=T(22355),U=T(5864),W=T(35387),Y=T(16396);class H extends w.K{constructor(){super(...arguments),this.blurSize=(0,D.a)()}}function G(){const re=new B.kG,{vertex:ue,fragment:ae}=re,oe=ue.code,ie=ae.code;return re.attributes.add(Y.T.POSITION,"vec2"),re.attributes.add(Y.T.UV0,"vec2"),re.varyings.add("blurCoordinate","vec3"),ue.uniforms.add(new W.A("coverageTex",X=>X.coverageTexture)),ae.uniforms.add(new x.q("blurSize",X=>X.blurSize)),oe.add(w.H`void main() {
gl_Position = vec4(position, 0.0, 1.0);
vec4 cov = texture2D(coverageTex, uv0);
if (cov.r == 0.0) {
gl_Position = vec4(0.0);
}
blurCoordinate = vec3(gl_Position.xy * 0.5 + vec2(0.5), max(cov.g, cov.b));
}`),ae.uniforms.add(new U.R("tex",X=>X.blurInputTexture)),ie.add(w.H`void main() {
vec2 uv = blurCoordinate.xy;
vec4 center = texture2D(tex, uv);
if (blurCoordinate.z == 1.0) {
gl_FragColor = center;
} else {
vec4 sum = vec4(0.0);
sum += center * 0.204164;
sum += texture2D(tex, uv + blurSize * 1.407333) * 0.304005;
sum += texture2D(tex, uv - blurSize * 1.407333) * 0.304005;
sum += texture2D(tex, uv + blurSize * 3.294215) * 0.093913;
sum += texture2D(tex, uv - blurSize * 3.294215) * 0.093913;
gl_FragColor = sum;
}
}`),re}const $=Object.freeze(Object.defineProperty({__proto__:null,HighlightBlurDrawParameters:H,build:G},Symbol.toStringTag,{value:"Module"}))},36227:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>Y,a:()=>G,b:()=>H});var D=T(99770),x=T(32181),w=T(17625),B=T(22355),U=T(5864),W=T(16396);class Y extends w.K{constructor(){super(...arguments),this.invFramebufferDim=(0,D.a)()}}function H(){const $=new B.kG,{vertex:re,fragment:ue}=$,ae=re.code,oe=ue.code;return $.attributes.add(W.T.POSITION,"vec2"),ae.add(w.H`void main() {
gl_Position = vec4(vec2(1.0) - position * 2.0, 0.0, 1.0);
}`),ue.uniforms.add(new U.R("tex",ie=>ie.inputTexture)),ue.uniforms.add(new x.q("invFramebufferDim",ie=>ie.invFramebufferDim)),oe.add(w.H`void main() {
vec2 coord = gl_FragCoord.xy * invFramebufferDim;
vec4 value = texture2D(tex, coord);
float mx = floor(max(value.g, value.b));
gl_FragColor = vec4(ceil(value.r), mx, mx, 1.0);
}`),$}const G=Object.freeze(Object.defineProperty({__proto__:null,HighlightDownsampleDrawParameters:Y,build:H},Symbol.toStringTag,{value:"Module"}))},76269:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>J,b:()=>X});var D=T(62208),x=T(67831),w=T(99770),B=T(4794),U=T(78925),W=T(35283),Y=T(97347),H=T(82793),G=T(71850),$=T(95285),re=T(69960),ue=T(65787),ae=T(17625),oe=T(22355),ie=T(16396);function X(se){const ee=new oe.kG;ee.include(W.H),ee.include(Y.R,se),ee.include(U.f5,se),ee.attributes.add(ie.T.UV0,"vec2");const{vertex:le,fragment:ne}=ee;return le.uniforms.add([new re.N("viewport",(ce,de)=>de.camera.fullViewport),new ue.p("lineSize",(ce,de)=>Math.ceil(ce.size)*de.camera.pixelRatio),new $.A("pixelToNDC",(ce,de)=>(0,x.a)(Q,2/de.camera.fullViewport[2],2/de.camera.fullViewport[3])),new ue.p("borderSize",(ce,de)=>(0,D.pC)(ce.borderColor)?de.camera.pixelRatio:0),new $.A("screenOffset",(ce,de)=>(0,x.a)(Q,ce.screenOffset[0]*de.camera.pixelRatio,ce.screenOffset[1]*de.camera.pixelRatio))]),ee.varyings.add("coverageSampling","vec4"),ee.varyings.add("lineSizes","vec2"),se.hasMultipassGeometry&&ee.varyings.add("depth","float"),se.hasScreenSizePerspective&&(0,G.m8)(le),le.code.add(ae.H`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 endPoint = projectPositionHUD(projectAux);

      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      }
    ${se.occlusionTestEnabled?ae.H`
      if (!testVisibilityHUD(endPoint)) {
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      }`:""}

    ${se.hasScreenSizePerspective?ae.H`
      vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
      vec2 screenOffsetScaled = applyScreenSizePerspectiveScaleFactorVec2(screenOffset, perspectiveFactor);
        `:ae.H`
      vec2 screenOffsetScaled = screenOffset;
        `}
      // Add view dependent polygon offset to get exact same original starting point. This is mostly
      // used to get the correct depth value
      vec3 posView = (view * vec4(position, 1.0)).xyz;
      ${se.hasMultipassGeometry?"depth = posView.z;":""}

      applyHUDViewDependentPolygonOffset(auxpos1.w, projectAux.absCosAngle, posView);
      vec4 startPoint = proj * vec4(posView, 1.0);
      // Apply screen offset to both start and end point
      vec2 screenOffsetNorm = screenOffsetScaled * 2.0 / viewport.zw;
      startPoint.xy += screenOffsetNorm * startPoint.w;
      endPoint.xy += screenOffsetNorm * endPoint.w;
      // Align start and end to pixel origin
      vec4 startAligned = alignToPixelOrigin(startPoint, viewport.zw);
      vec4 endAligned = alignToPixelOrigin(endPoint, viewport.zw);
    ${se.depthHudEnabled?se.depthHudAlignStartEnabled?ae.H`endAligned = vec4(endAligned.xy / endAligned.w * startAligned.w, startAligned.zw);`:ae.H`startAligned = vec4(startAligned.xy / startAligned.w * endAligned.w, endAligned.zw);`:""}
      vec4 projectedPosition = mix(startAligned, endAligned, uv0.y);
      // The direction of the line in screen space
      vec2 screenSpaceDirection = normalize(endAligned.xy / endAligned.w - startAligned.xy / startAligned.w);
      vec2 perpendicularScreenSpaceDirection = vec2(screenSpaceDirection.y, -screenSpaceDirection.x);
    ${se.hasScreenSizePerspective?ae.H`
      float lineSizeScaled = applyScreenSizePerspectiveScaleFactorFloat(lineSize, perspectiveFactor);
      float borderSizeScaled = applyScreenSizePerspectiveScaleFactorFloat(borderSize, perspectiveFactor);
        `:ae.H`
      float lineSizeScaled = lineSize;
      float borderSizeScaled = borderSize;
        `}
      float halfPixelSize = lineSizeScaled * 0.5;
      // Calculate a pixel offset from the edge of the pixel, s.t. we keep the line aligned
      // to pixels if it has a full pixel size. Since pixel aligned biases to the bottom-left,
      // we bias the size to the right (for odd sizes) to balance out the bias. Grow sub-pixel
      // sizes towards the left or right s.t. there is a smooth transition (e.g. from 2 to 3 px).
      float halfWholePixelSize = floor(lineSizeScaled) * 0.5;
      float halfPixelSizeInt = floor(halfWholePixelSize);

      // Sub-pixel offset if we need to grow sub-pixels to the left
      float subpixelOffset = -fract(lineSizeScaled) * float(halfWholePixelSize > 0.0);

      // Pixel offset aligning to whole pixels and adding subpixel offset if needed
      float pixelOffset = -halfPixelSizeInt + subpixelOffset;

      // Compute full ndc offset, adding 1px padding for doing anti-aliasing and the border size
      float padding = 1.0 + borderSizeScaled;
      vec2 ndcOffset = (pixelOffset - padding + uv0.x * (lineSizeScaled + padding + padding)) * pixelToNDC;

      // Offset x/y from the center of the line in screen space
      projectedPosition.xy += perpendicularScreenSpaceDirection * ndcOffset * projectedPosition.w;

      // Compute a coverage varying which we can use in the fragment shader to determine
      // how much a pixel is actually covered by the line (i.e. to anti alias the line).
      // This works by computing two coordinates that can be linearly interpolated and then
      // subtracted to find out how far away from the line edge we are.
      float edgeDirection = (uv0.x * 2.0 - 1.0);

      float halfBorderSize = 0.5 * borderSizeScaled;
      float halfPixelSizeAndBorder = halfPixelSize + halfBorderSize;
      float outerEdgeCoverageSampler = edgeDirection * (halfPixelSizeAndBorder + halfBorderSize + 1.0);

      float isOneSided = float(lineSizeScaled < 2.0 && borderSize < 2.0);

      coverageSampling = vec4(
        // Edge coordinate
        outerEdgeCoverageSampler,

        // Border edge coordinate
        outerEdgeCoverageSampler - halfPixelSizeAndBorder * isOneSided,

        // Line offset
        halfPixelSize - 0.5,

        // Border offset
        halfBorderSize - 0.5 + halfPixelSizeAndBorder * (1.0 - isOneSided)
      );

      lineSizes = vec2(lineSizeScaled, borderSizeScaled);

      gl_Position = projectedPosition;
    }
  `),ne.uniforms.add([new re.N("uColor",ce=>Z(ce.color)),new re.N("borderColor",ce=>Z(ce.borderColor))]),se.hasMultipassGeometry&&(ne.include(H.S,se),ne.uniforms.add(new $.A("inverseViewport",(ce,de)=>de.inverseViewport))),ne.code.add(ae.H`
    void main() {
      ${se.hasMultipassGeometry?"if( geometryDepthTest(gl_FragCoord.xy * inverseViewport, depth) ){ discard; }":""}

      // Mix between line and border coverage offsets depending on whether we need
      // a border (based on the sidedness).
      vec2 coverage = min(1.0 - clamp(abs(coverageSampling.xy) - coverageSampling.zw, 0.0, 1.0), lineSizes);

      // Mix between border and line color based on the line coverage (conceptually the line
      // blends on top of the border background).
      //
      // Anti-alias by blending final result using the full (including optional border) coverage
      // and the color alpha
      float borderAlpha = uColor.a * borderColor.a * coverage.y;
      float colorAlpha = uColor.a * coverage.x;

      float finalAlpha = mix(borderAlpha, 1.0, colorAlpha);

    ${se.depthHudEnabled?ae.H`
      if (finalAlpha < 0.01) {
        discard;
      }
      `:ae.H`
      vec3 finalRgb = mix(borderColor.rgb * borderAlpha, uColor.rgb, colorAlpha);
      gl_FragColor = vec4(finalRgb, finalAlpha);
      `}
  }
  `),ee}function Z(se){return(0,D.pC)(se)?se:B.Z}const Q=(0,w.a)(),J=Object.freeze(Object.defineProperty({__proto__:null,build:X},Symbol.toStringTag,{value:"Module"}))},71530:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>re});var G,D=T(17626),x=T(91558),w=T(86810),B=T(58817),U=T(77712),Y=(T(90912),T(76898)),H=T(60958);let $=G=class extends w.wq{constructor(){super(...arguments),this.color=new x.Z("white")}clone(){return new G({color:(0,B.d9)(this.color)})}};(0,D._)([(0,U.Cb)(H.a)],$.prototype,"color",void 0),$=G=(0,D._)([(0,Y.j)("esri.symbols.callouts.LineCallout3DBorder")],$);const re=$;Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}))},62718:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>ee,b:()=>se});var D=T(30764),x=T(6945),w=T(78925),B=T(39645),U=T(54120),W=T(10109),Y=T(67022),H=T(33726),G=T(19278),$=T(2166),re=T(95285),ue=T(69960),ae=T(65787),oe=T(17625),ie=T(63123),X=T(22355),Z=T(35387),Q=T(42743),J=T(16396);function se(le){const ne=new X.kG,ce=le.hasMultipassTerrain&&(le.output===x.H.Color||le.output===x.H.Alpha);ne.include(B.U,le),le.output===x.H.Depth&&ne.include(U.F,le);const{vertex:de,fragment:me}=ne;return me.include(G.n),(0,$.S)(ne,le),ne.attributes.add(J.T.POSITION,"vec3"),ne.attributes.add(J.T.UV0,"vec2"),ne.attributes.add(J.T.AUXPOS1,"vec3"),ne.varyings.add("vColor","vec4"),ne.varyings.add("vpos","vec3"),ne.varyings.add("vUV","vec2"),ne.varyings.add("vSize","float"),ne.varyings.add("linearDepth","float"),ce&&ne.varyings.add("depth","float"),de.code.add(oe.H`#define PERPENDICULAR(v) vec2(v.y, -v.x)
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}`),de.uniforms.add([new re.A("nearFar",(_e,he)=>he.camera.nearFar),new ue.N("viewport",(_e,he)=>he.camera.fullViewport)]),de.code.add(oe.H`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),de.code.add(oe.H`void clip(vec4 pos, inout vec4 prev) {
float vnp = nearFar[0] * 0.99;
if (prev.z > -nearFar[0]) {
prev = mix(pos, prev, interp(vnp, pos, prev));
}
}`),le.draped||(de.uniforms.add(new ie.g("inverseProjectionMatrix",(_e,he)=>he.camera.inverseProjectionMatrix)),de.code.add(oe.H`vec3 inverseProject(vec4 posScreen) {
posScreen.xy = (posScreen.xy / viewport.zw) * posScreen.w;
return (inverseProjectionMatrix * posScreen).xyz;
}`),de.code.add(oe.H`bool rayIntersectPlane(vec3 rayDir, vec3 planeOrigin, vec3 planeNormal, out vec3 intersection) {
float cos = dot(rayDir, planeNormal);
float t = dot(planeOrigin, planeNormal) / cos;
intersection = t * rayDir;
return abs(cos) > 0.001 && t > 0.0;
}`),de.uniforms.add(new ae.p("perScreenPixelRatio",(_e,he)=>he.camera.perScreenPixelRatio)),de.code.add(oe.H`
      vec4 toFront(vec4 displacedPosScreen, vec3 posLeft, vec3 posRight, vec3 prev, float lineWidth) {
        // Project displaced position back to camera space
        vec3 displacedPos = inverseProject(displacedPosScreen);

        // Calculate the plane that we want the marker to lie in. Note that this will always be an approximation since ribbon lines are generally
        // not planar and we do not know the actual position of the displaced prev vertices (they are offset in screen space, too).
        vec3 planeNormal = normalize(cross(posLeft - posRight, posLeft - prev));
        vec3 planeOrigin = posLeft;

        ${le.hasCap?"\n                if(prev.z > posLeft.z) {\n                  vec2 diff = posLeft.xy - posRight.xy;\n                  planeOrigin.xy += PERPENDICULAR(diff) / 2.0;\n                }\n              ":""};

        // Move the plane towards the camera by a margin dependent on the line width (approximated in world space). This tolerance corrects for the
        // non-planarity in most cases, but sharp joins can place the prev vertices at arbitrary positions so markers can still clip.
        float offset = lineWidth * perScreenPixelRatio;
        planeOrigin *= (1.0 - offset);

        // Intersect camera ray with the plane and make sure it is within clip space
        vec3 rayDir = normalize(displacedPos);
        vec3 intersection;
        if (rayIntersectPlane(rayDir, planeOrigin, planeNormal, intersection) && intersection.z < -nearFar[0] && intersection.z > -nearFar[1]) {
          return vec4(intersection.xyz, 1.0);
        }

        // Fallback: use depth of pos or prev, whichever is closer to the camera
        float minDepth = planeOrigin.z > prev.z ? length(planeOrigin) : length(prev);
        displacedPos *= minDepth / length(displacedPos);
        return vec4(displacedPos.xyz, 1.0);
      }
  `)),de.uniforms.add(new ae.p("pixelRatio",(_e,he)=>he.camera.pixelRatio)),de.code.add(oe.H`
    void main(void) {
      float coverage = 1.0;

      // Check for special value of uv0.y which is used by the Renderer when graphics
      // are removed before the VBO is recompacted. If this is the case, then we just
      // project outside of clip space.
      if (uv0.y == 0.0) {
        // Project out of clip space
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
      }
      else {
        float lineSize = getSize();
        float lineWidth = max(lineSize, 1.0) * pixelRatio;

        vec4 pos  = view * vec4(position.xyz, 1.0);
        vec4 prev = view * vec4(auxpos1.xyz, 1.0);
        clip(pos, prev);

        vec4 posScreen = projectAndScale(pos);
        vec4 prevScreen = projectAndScale(prev);

        vec2 segment = posScreen.xy - prevScreen.xy;

        // normalize vector along line segment
        float segmentLen = length(segment);
        segment = (segmentLen > 0.001) ? segment / segmentLen : vec2(0.0, 0.0);

        // displace according to position in the texture
        vec2 displacementDirU = PERPENDICULAR(segment);
        vec2 displacementDirV = segment;

        float displacementLen = ${oe.H.float(D.vT/D.CM)} * lineWidth;

        vec4 displacedPosScreen = posScreen;
        displacedPosScreen.xy += uv0.x * displacementDirU * displacementLen + uv0.y * displacementDirV * displacementLen;
  `),le.draped||de.code.add(oe.H`vec3 posRight = inverseProject(posScreen + vec4(displacementDirU.xy, 0.0, 0.0) * lineWidth);
vec3 posLeft = pos.xyz + (pos.xyz - posRight);
pos = toFront(displacedPosScreen, posLeft, posRight, prev.xyz, lineWidth);
displacedPosScreen = projectAndScale(pos);`),de.code.add(oe.H`
        ${ce?"depth = pos.z;":""}
        linearDepth = (-pos.z - nearFar[0]) / (nearFar[1] - nearFar[0]);

        // Convert back into NDC
        displacedPosScreen.xy = (displacedPosScreen.xy / viewport.zw) * displacedPosScreen.w;

        // Convert texture coordinate into [0,1] and cancel out perspective correct interpolation
        vUV = (uv0 + 1.0) / 2.0;
        vUV *= displacedPosScreen.w;

        vSize = displacementLen;

        vColor = getColor();
        vColor.a *= coverage;

        // Use camera space for slicing
        vpos = pos.xyz;

        gl_Position = displacedPosScreen;
      }
    }
  `),ce&&ne.include(W.l,le),ne.include(w.f5,le),me.uniforms.add([new ue.N("intrinsicColor",_e=>_e.color),new Z.A("tex",_e=>_e.texture)]),me.include(H.Y),me.code.add(oe.H`
  void main() {
    discardBySlice(vpos);
    ${ce?"terrainDepthTest(gl_FragCoord, depth);":""}

    vec4 finalColor = intrinsicColor * vColor;

    // Offset texture coordinate s.t. we sample texel centers
    float texelSize = ${oe.H.float(1/D.vT)};
    vec2 samplePos = vUV * gl_FragCoord.w + vec2(0.5, -0.5) * texelSize;

    // Evaluate sdf
    float sdf = rgba2float(texture2D(tex, samplePos)) - 0.5;
    float distance = sdf * vSize;

    // Grow by a halfpixel to make sure the line is fully covered by the cross marker
    // (otherwise there will be a halo if they are different colours)
    distance -= 0.5;

    finalColor.a *= clamp(0.5 - distance, 0.0, 1.0);

    if (finalColor.a < ${oe.H.float(Y.b)}) {
      discard;
    }

    ${le.output===x.H.Alpha?oe.H`gl_FragColor = vec4(finalColor.a);`:""}
    ${le.output===x.H.Color?oe.H`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${le.output===x.H.Color&&le.transparencyPassType===Q.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    ${le.output===x.H.Highlight?oe.H`gl_FragColor = vec4(1.0);`:""}
    ${le.output===x.H.Depth?oe.H`outputDepth(linearDepth);`:""}
  }
  `),ne}const ee=Object.freeze(Object.defineProperty({__proto__:null,build:se},Symbol.toStringTag,{value:"Module"}))},32616:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>ie,b:()=>oe});var D=T(6945),x=T(78925),w=T(24255),B=T(58173),U=T(62952),W=T(92484),Y=T(67022),H=T(2166),G=T(69960),$=T(65787),re=T(17625),ue=T(22355),ae=T(16396);function oe(X){const Z=new ue.kG;Z.include(w.w),Z.include(B.c,X),Z.include(W.q,X),(0,H.S)(Z,X);const{vertex:Q,fragment:J}=Z;return X.stippleEnabled&&(Z.attributes.add(ae.T.UV0,"vec2"),Z.attributes.add(ae.T.AUXPOS1,"vec3"),Q.uniforms.add(new G.N("viewport",(se,ee)=>ee.camera.fullViewport))),Z.attributes.add(ae.T.POSITION,"vec3"),Z.varyings.add("vpos","vec3"),Q.code.add(re.H`void main(void) {
vpos = position;
forwardNormalizedVertexColor();
gl_Position = transformPosition(proj, view, vpos);`),X.stippleEnabled&&(Q.code.add(re.H`vec4 vpos2 = transformPosition(proj, view, auxpos1);
vec2 ndcToPixel = viewport.zw * 0.5;
float lineSegmentPixelSize = length((vpos2.xy / vpos2.w - gl_Position.xy / gl_Position.w) * ndcToPixel);`),X.draped?Q.uniforms.add(new $.p("worldToScreenRatio",(se,ee)=>1/ee.screenToPCSRatio)):Q.code.add(re.H`vec3 segmentCenter = (position + auxpos1) * 0.5;
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),Q.code.add(re.H`float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);`),Q.code.add(X.draped?re.H`float startPseudoScreen = uv0.y * discreteWorldToScreenRatio - mix(0.0, lineSegmentPixelSize, uv0.x);
float segmentLengthPseudoScreen = lineSegmentPixelSize;`:re.H`float segmentLengthRender = length(position - auxpos1);
float startPseudoScreen = mix(uv0.y, uv0.y - segmentLengthRender, uv0.x) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),Q.code.add(re.H`vec2 stippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, lineSegmentPixelSize, stipplePatternPixelSize);
vStippleDistance = mix(stippleDistanceLimits.x, stippleDistanceLimits.y, uv0.x);
vStippleDistance *= gl_Position.w;`)),Q.code.add(re.H`}`),X.output===D.H.Highlight&&Z.include(U.bA),Z.include(x.f5,X),J.uniforms.add(new $.p("alphaCoverage",(se,ee)=>Math.min(1,se.width*ee.camera.pixelRatio))),X.hasVertexColors||J.uniforms.add(new G.N("constantColor",se=>se.color)),J.code.add(re.H`
  void main() {
    discardBySlice(vpos);

    vec4 color = ${X.hasVertexColors?"vColor":"constantColor"};

    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);

    vec4 finalColor = blendStipple(vec4(color.rgb, color.a * alphaCoverage), stippleAlpha);

    if (finalColor.a < ${re.H.float(Y.b)}) {
      discard;
    }

    ${X.output===D.H.Color?re.H`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${X.output===D.H.Highlight?re.H`outputHighlight();`:""}
  }
  `),Z}const ie=Object.freeze(Object.defineProperty({__proto__:null,build:oe},Symbol.toStringTag,{value:"Module"}))},42474:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>H,b:()=>Y});var D=T(64312),x=T(85755),w=T(98071),B=T(65364),U=T(17625),W=T(22355);function Y(G){const $=new W.kG;return $.include(w.k,!1),$.fragment.code.add(U.H`float remap(float x, float low1, float high1, float low2, float high2) {
return low2 + (x - low1) * (high2 - low2) / (high1 - low1);
}`),$.fragment.uniforms.add(new B.e("weatherTile")),G.mode===D.u.Full&&$.fragment.code.add(U.H`
    float saturate(float x) {
      return clamp(x, 0.0, 1.0);
    }

    // Safer modulo for positive and negative values
    vec3 modulo(vec3 m, float n){
      return mod(mod(m, n) + n, n);
    }

    vec3 hash(vec3 p3, float frequency){
      p3 = modulo(p3, frequency);
      p3 = fract(p3 * vec3(0.1031, 0.1030, 0.0973));
      p3 += dot(p3, p3.yxz + 33.33);
      return -1.0 + 2.0 * fract((p3.xxy + p3.yxx) * p3.zyx);
    }

    // 5th order polynomial interpolation
    vec3 fade(vec3 t){
      return (t * t * t) * (t * (t * 6.0 - 15.0) + 10.0);
    }

    float gradientNoise(vec3 p, float frequency){
      // Cell point is in
      vec3 i = floor(p);

      // Position in the cell in [0, 1]
      vec3 f = fract(p);

      // Interpolation value for gradient mixing
      vec3 u = fade(f);

      // Trilinear interpolation of gradients at cube vertices around point
      return mix( mix( mix( dot( hash( i + vec3(0.0,0.0,0.0), frequency), f - vec3(0.0,0.0,0.0) ),
                            dot( hash( i + vec3(1.0,0.0,0.0), frequency), f - vec3(1.0,0.0,0.0) ), u.x),
                       mix( dot( hash( i + vec3(0.0,1.0,0.0), frequency), f - vec3(0.0,1.0,0.0) ),
                            dot( hash( i + vec3(1.0,1.0,0.0), frequency), f - vec3(1.0,1.0,0.0) ), u.x), u.y),
                  mix( mix( dot( hash( i + vec3(0.0,0.0,1.0), frequency), f - vec3(0.0,0.0,1.0) ),
                            dot( hash( i + vec3(1.0,0.0,1.0), frequency), f - vec3(1.0,0.0,1.0) ), u.x),
                       mix( dot( hash( i + vec3(0.0,1.0,1.0), frequency), f - vec3(0.0,1.0,1.0) ),
                            dot( hash( i + vec3(1.0,1.0,1.0), frequency), f - vec3(1.0,1.0,1.0) ), u.x), u.y), u.z );
    }

    float getPerlinNoise(vec3 pos, float frequency) {
      float octaveFrequencyFactor = 2.0;
      float sum = 0.0;
      float weightSum = 0.0;
      float weight = 1.0;

      for (int oct = 0; oct < 3; oct++) {
        vec3 p = pos * frequency;
        float val = 0.5 + 0.5 * gradientNoise(p, frequency);
        sum += val * weight;
        weightSum += weight;
        weight *= 0.5;
        frequency *= octaveFrequencyFactor;
      }

      float noise = (sum / weightSum);
      noise = saturate(noise);
      return noise;
    }

    float worley(vec3 pos, float numCells) {
      vec3 p = pos * numCells;
      float d = 1.0e10;

      for (int x = -1; x <= 1; x++) {
        for (int y = -1; y <= 1; y++) {
          for (int z = -1; z <= 1; z++) {
            vec3 tp = floor(p) + vec3(x, y, z);
            tp = p - tp - (hash(tp, numCells) * 0.5 + 0.5);
            d = min(d, dot(tp, tp));
          }
        }
      }

      return 1.0 - clamp(d, 0.0, 1.0);
    }

    vec3 get3Dfrom2D(vec2 uv) {
      vec2 tile = floor(uv);
      float z = floor(${U.H.float(x.jy)} * tile.y + tile.x);
      return vec3(fract(uv), z);
    }

    float getTextureForPointPerlinWorley(vec3 p) {
      float perlinNoise = getPerlinNoise(p, ${U.H.float(8)});

      float worley0 = worley(p, ${U.H.float(2)} * 2.0);
      float worley1 = worley(p, ${U.H.float(2)} * 8.0);
      float worley2 = worley(p, ${U.H.float(2)} * 14.0);

      float worleyFBM = worley0 * 0.625 + worley1 * 0.25 + worley2 * 0.125;
      return remap(perlinNoise, 0.0, 1.0, worleyFBM, 1.0);
    }

    float getTextureForPointWorley(vec3 p) {
      float worley0 = worley(p, ${U.H.float(2)});
      float worley1 = worley(p, ${U.H.float(2)} * 2.0);
      float worley2 = worley(p, ${U.H.float(2)} * 4.0);
      float worley3 = worley(p, ${U.H.float(2)} * 8.0);

      float FBM0 = worley0 * 0.625 + worley1 * 0.25 + worley2 * 0.125;
      float FBM1 = worley1 * 0.625 + worley2 * 0.25 + worley3 * 0.125;
      float FBM2 = worley2 * 0.75 + worley3 * 0.25;

      return FBM0 * 0.625 + FBM1 * 0.25 + FBM2 * 0.125;
    }
  `),$.fragment.code.add(U.H`
    vec2 modulo(vec2 m, float n){
      return mod(mod(m, n) + n, n);
    }

    vec2 hash(vec2 p){
      // Get position of p in weather tile
      p = modulo(p, ${U.H.float(x.A)});

      // Get global coordinates of p
      p += weatherTile * ${U.H.float(x.A)};

      // Limit position to avoid numerical instability
      p = modulo(p, ${U.H.float(x.iZ)});

      vec3 p3 = fract(vec3(p.xyx) * vec3(0.1031, 0.1030, 0.0973));
      p3 += dot(p3, p3.yzx + 33.33);
      return 2.0 * fract((p3.xx + p3.yz) * p3.zy) - 1.0;
    }

    vec2 fade(vec2 t){
      return (t * t * t) * (t * (t * 6.0 - 15.0) + 10.0);
    }

    float gradientNoise(vec2 p){
      vec2 i = floor( p );
      vec2 f = fract( p );

      vec2 u = fade(f);

      // Bilinear interpolation of gradients at cell vertices around point
      return  mix(
                mix(dot( hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ),
                    dot( hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),
                mix(dot( hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ),
                    dot( hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x),
                u.y);
    }

    float worley(vec2 p){
      float d = 1.0e10;
      for (int x = -1; x <= 1; x++){
        for (int y = -1; y <= 1; y++){
                vec2 tp = floor(p) + vec2(x, y);
                tp = p - tp - (0.5 + 0.5 * hash(tp));
                d = min(d, dot(tp, tp));
            }
        }
      return 1.0 - clamp(d, 0.0, 1.0);
    }
  `),$.fragment.code.add(U.H`void main() {`),G.mode===D.u.Full&&$.fragment.code.add(U.H`
        float padWidth = 1.0;
        float paddedSize = ${U.H.float(x.I_)} + 2.0 * padWidth;
        float tileCount = ${U.H.float(x.jy)} * ${U.H.float(x.jy)};
        vec2 tile = floor((gl_FragCoord.xy - 0.5) / paddedSize);

        bool padCell = false;
        if (mod(gl_FragCoord.x, paddedSize) == 0.5 || mod(gl_FragCoord.x, paddedSize) == paddedSize - 0.5) {
          padCell = true;
        }

        if (mod(gl_FragCoord.y, paddedSize) == 0.5 || mod(gl_FragCoord.y, paddedSize) == paddedSize - 0.5) {
          padCell = true;
        }

        bool startPadX = false;
        bool startPadY = false;
        bool endPadX = false;
        bool endPadY = false;

        if (gl_FragCoord.x == tile.x * paddedSize + 0.5) {
          startPadX = true;
        }

        if (gl_FragCoord.y == tile.y * paddedSize + 0.5) {
          startPadY = true;
        }

        if (gl_FragCoord.x == (tile.x + 1.0) * paddedSize - 0.5) {
          endPadX = true;
        }

        if (gl_FragCoord.y == (tile.y + 1.0) * paddedSize - 0.5) {
          endPadY = true;
        }

        vec2 padding = vec2(2.0 * padWidth) * tile;
        vec2 uv;

        if (padCell) {
          vec2 pixel = gl_FragCoord.xy - padWidth - padding;

          if (startPadX) {
            pixel.x += ${U.H.float(x.I_)};
          }

          if (startPadY) {
            pixel.y += ${U.H.float(x.I_)};
          }

          if (endPadX) {
            pixel.x -= ${U.H.float(x.I_)};
          }

          if (endPadY) {
            pixel.y -= ${U.H.float(x.I_)};
          }

          uv = vec2(pixel.xy / ${U.H.float(x.I_)});
        } else {
          vec2 pixel = gl_FragCoord.xy - padWidth - padding;
          uv = vec2(pixel.xy / ${U.H.float(x.I_)});
        }

        vec3 p_ = get3Dfrom2D(uv);
        vec3 p = p_;
        p.z /= (${U.H.float(x.jy)} * ${U.H.float(x.jy)});

        float worleyPerlinNoise = getTextureForPointPerlinWorley(p);
        float worleyNoise = getTextureForPointWorley(p);

        gl_FragColor.r = saturate(remap(worleyPerlinNoise, worleyNoise, 1.0, 0.0, 1.0));

        p_ = mod(p_ + 1.0, ${U.H.float(x.jy)} * ${U.H.float(x.jy)});
        p = p_;
        p.z /= (${U.H.float(x.jy)} * ${U.H.float(x.jy)});

        worleyPerlinNoise = getTextureForPointPerlinWorley(p);
        worleyNoise = getTextureForPointWorley(p);

        gl_FragColor.g = saturate(remap(worleyPerlinNoise, worleyNoise, 1.0, 0.0, 1.0));
      `),$.fragment.code.add(U.H`
      vec2 mapUV = ${U.H.float(x.A)} * (gl_FragCoord.xy / ${U.H.float(x.IQ)});
      float map = abs(gradientNoise(mapUV));
      map = remap(map, 0.25 * (1.0 - worley(8.0 * mapUV)), 1.0, 0.0, 1.0);

      ${G.mode===D.u.Full?U.H`gl_FragColor.ba = vec2(0.0, map);`:U.H`gl_FragColor = vec4(map);`};
    }
  `),$}const H=Object.freeze(Object.defineProperty({__proto__:null,build:Y},Symbol.toStringTag,{value:"Module"}))},24079:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>me,b:()=>de});var D=T(52382),x=T(6945),w=T(78925),B=T(24255),U=T(68565),W=T(54120),Y=T(62952),H=T(54662),G=T(13146),$=T(10109),re=T(96395),ue=T(7025),ae=T(56693),oe=T(33726),ie=T(2166),X=T(95285),Z=T(97139),Q=T(66054),J=T(65787),se=T(17625),ee=T(63123),le=T(22355),ne=T(42743),ce=T(95279);function de(_e){const he=new le.kG,ye=(0,ie.S)(he,_e),{vertex:fe,fragment:De}=he;return he.varyings.add("vpos","vec3"),he.include(U.W,_e),_e.output!==x.H.Color&&_e.output!==x.H.Alpha||(he.include(B.w),he.include(ae.XE,_e),he.include(D.q,_e),he.varyings.add("vnormal","vec3"),he.varyings.add("vcolor","vec4"),_e.hasMultipassTerrain&&he.varyings.add("depth","float"),fe.code.add(se.H`
      void main() {
        vpos = calculateVPos();
        vnormal = normalize(localNormal());

        ${_e.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
        gl_Position = transformPosition(proj, view, vpos);

        ${_e.output===x.H.Color?"forwardLinearDepth();":""}

        vcolor = getColor();
      }
    `)),he.include($.l,_e),_e.output===x.H.Alpha&&(he.include(w.f5,_e),De.uniforms.add(new J.p("opacity",ve=>ve.opacity)),De.code.add(se.H`
      void main() {
        discardBySlice(vpos);
        ${_e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
        float combinedOpacity = vcolor.a * opacity;
        gl_FragColor = vec4(combinedOpacity);
      }
    `)),_e.output===x.H.Color&&(he.include(w.f5,_e),he.include(G.X,_e),he.include(H.K,_e),he.include(ae.XE,_e),he.include(re.k,_e),(0,ie.h)(De,_e),De.uniforms.add([ye,new Z.J("ambient",ve=>ve.ambient),new Z.J("diffuse",ve=>ve.diffuse),new Z.J("specular",ve=>ve.specular),new J.p("opacity",ve=>ve.opacity),new J.p("lightingGlobalFactor",(ve,Ce)=>Ce.lighting.globalFactor),new Z.J("lightingMainIntensity",(ve,Ce)=>Ce.lighting.mainLight.intensity)]),De.constants.add("ambientBoostFactor","float",ce.V),De.include(oe.Y),De.code.add(se.H`
      void main() {
        discardBySlice(vpos);
        ${_e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

        shadingParams.viewDirection = normalize(vpos - cameraPosition);
        shadingParams.normalView = vnormal;
        vec3 normal = shadingNormal(shadingParams);
        float ssao = evaluateAmbientOcclusionInverse();

        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;
        ${_e.receiveShadows?"float shadow = readShadowMap(vpos, linearDepth);":_e.spherical?"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);":"float shadow = 0.0;"}
        vec3 albedo = vcolor.rgb * max(ambient, diffuse); // combine the old material parameters into a single one
        float combinedOpacity = vcolor.a * opacity;
        albedo += 0.25 * specular; // don't completely ignore specular for now

        vec3 shadedColor = evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight);
        gl_FragColor = vec4(shadedColor, combinedOpacity);
        gl_FragColor = highlightSlice(gl_FragColor, vpos);
        ${_e.transparencyPassType===ne.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
      }
    `)),_e.output!==x.H.Depth&&_e.output!==x.H.Shadow||(he.include(B.w,{hasModelTransformation:!1,linearDepth:!0}),fe.uniforms.add(new X.A("nearFar",(ve,Ce)=>Ce.camera.nearFar)),he.varyings.add("depth","float"),fe.code.add(se.H`void main() {
vpos = calculateVPos();
gl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);
}`),he.include(w.f5,_e),he.include(W.F,_e),De.code.add(se.H`void main() {
discardBySlice(vpos);
outputDepth(depth);
}`)),_e.output===x.H.Normal&&(he.include(B.w),he.include(ue.n,_e),fe.uniforms.add(new ee.g("viewNormal",(ve,Ce)=>Ce.camera.viewInverseTransposeMatrix)),he.varyings.add("vnormal","vec3"),fe.code.add(se.H`void main(void) {
vpos = calculateVPos();
vnormal = normalize((viewNormal * vec4(localNormal(), 1.0)).xyz);
gl_Position = transformPosition(proj, view, vpos);
}`),he.include(w.f5,_e),De.uniforms.add(new Q.y("waterColor")),De.code.add(se.H`void main() {
discardBySlice(vpos);
vec3 normal = normalize(vnormal);
if (gl_FrontFacing == false) normal = -normal;
gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);
}`)),_e.output===x.H.Highlight&&(he.include(B.w),he.include(ue.n,_e),he.varyings.add("vnormal","vec3"),fe.code.add(se.H`void main(void) {
vpos = calculateVPos();
gl_Position = transformPosition(proj, view, vpos);
}`),he.include(w.f5,_e),he.include(Y.bA),De.code.add(se.H`void main() {
discardBySlice(vpos);
outputHighlight();
}`)),he}const me=Object.freeze(Object.defineProperty({__proto__:null,build:de},Symbol.toStringTag,{value:"Module"}))},66401:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>ce,b:()=>le});var D=T(6945),x=T(78925),w=T(24255),B=T(58173),U=T(54120),W=T(62952),Y=T(10109),H=T(67022),G=T(33726),$=T(2166),re=T(95285),ue=T(69960),ae=T(65787),oe=T(17625),ie=T(22355),X=T(42743),Z=T(16396),Q=T(95402);const J=.70710678118,se=J;function le(de){const me=new ie.kG,_e=de.hasMultipassTerrain&&(de.output===D.H.Color||de.output===D.H.Alpha);de.draped||me.extensions.add("GL_OES_standard_derivatives");const he=de.output===D.H.Depth,{vertex:ye,fragment:fe}=me;(0,$.S)(me,de),me.include(w.w,{hasModelTransformation:!1,linearDepth:he}),me.include(B.c,de),he&&(me.include(U.F,de),ye.uniforms.add(new re.A("nearFar",(ve,Ce)=>Ce.camera.nearFar)),me.varyings.add("linearDepth","float")),de.draped?ye.uniforms.add(new ae.p("worldToScreenRatio",(ve,Ce)=>1/Ce.screenToPCSRatio)):me.attributes.add(Z.T.BOUNDINGRECT,"mat3"),me.attributes.add(Z.T.POSITION,"vec3"),me.attributes.add(Z.T.UVMAPSPACE,"vec4"),me.varyings.add("vpos","vec3"),me.varyings.add("vuv","vec2"),_e&&me.varyings.add("depth","float");const De=de.style===Q.b.ForwardDiagonal||de.style===Q.b.BackwardDiagonal||de.style===Q.b.DiagonalCross;return De&&ye.code.add(oe.H`
      const mat2 rotate45 = mat2(${oe.H.float(J)}, ${oe.H.float(-se)},
                                 ${oe.H.float(se)}, ${oe.H.float(J)});
    `),de.draped||((0,$.h)(ye,de),ye.uniforms.add(new ae.p("worldToScreenPerDistanceRatio",(ve,Ce)=>1/Ce.camera.perScreenPixelRatio)),ye.code.add(oe.H`vec3 projectPointToLineSegment(vec3 center, vec3 halfVector, vec3 point) {
float projectedLength = dot(halfVector, point - center) / dot(halfVector, halfVector);
return center + halfVector * clamp(projectedLength, -1.0, 1.0);
}`),ye.code.add(oe.H`vec3 intersectRayPlane(vec3 rayDir, vec3 rayOrigin, vec3 planeNormal, vec3 planePoint) {
float d = dot(planeNormal, planePoint);
float t = (d - dot(planeNormal, rayOrigin)) / dot(planeNormal, rayDir);
return rayOrigin + t * rayDir;
}`),ye.code.add(oe.H`
      float boundingRectDistanceToCamera() {
        vec3 center = vec3(boundingRect[0][0], boundingRect[0][1], boundingRect[0][2]);
        vec3 halfU = vec3(boundingRect[1][0], boundingRect[1][1], boundingRect[1][2]);
        vec3 halfV = vec3(boundingRect[2][0], boundingRect[2][1], boundingRect[2][2]);
        vec3 n = normalize(cross(halfU, halfV));

        vec3 viewDir = - vec3(view[0][2], view[1][2], view[2][2]);

        float viewAngle = dot(viewDir, n);
        float minViewAngle = ${oe.H.float(.08715574274)};

        if (abs(viewAngle) < minViewAngle) {
          // view direction is (almost) parallel to plane -> clamp it to min angle
          float normalComponent = sign(viewAngle) * minViewAngle - viewAngle;
          viewDir = normalize(viewDir + normalComponent * n);
        }

        // intersect view direction with infinite plane that contains bounding rect
        vec3 planeProjected = intersectRayPlane(viewDir, cameraPosition, n, center);

        // clip to bounds by projecting to u and v line segments individually
        vec3 uProjected = projectPointToLineSegment(center, halfU, planeProjected);
        vec3 vProjected = projectPointToLineSegment(center, halfV, planeProjected);

        // use to calculate the closest point to camera on bounding rect
        vec3 closestPoint = uProjected + vProjected - center;

        return length(closestPoint - cameraPosition);
      }
    `)),ye.code.add(oe.H`
    vec2 scaledUV() {
      vec2 uv = uvMapSpace.xy ${De?" * rotate45":""};
      vec2 uvCellOrigin = uvMapSpace.zw ${De?" * rotate45":""};

      ${de.draped?"":oe.H`
            float distanceToCamera = boundingRectDistanceToCamera();
            float worldToScreenRatio = worldToScreenPerDistanceRatio / distanceToCamera;
          `}

      // Logarithmically discretize ratio to avoid jittering
      float step = 0.1;
      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);

      vec2 uvOffset = mod(uvCellOrigin * discreteWorldToScreenRatio, ${oe.H.float(de.patternSpacing)});
      return uvOffset + (uv * discreteWorldToScreenRatio);
    }
  `),ye.code.add(oe.H`
    void main(void) {
      vuv = scaledUV();
      vpos = position;
      ${_e?"depth = (view * vec4(vpos, 1.0)).z;":""}
      forwardNormalizedVertexColor();
      gl_Position = ${he?oe.H`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:oe.H`transformPosition(proj, view, vpos);`}
    }
  `),me.include(x.f5,de),fe.include(G.Y),de.draped&&fe.uniforms.add(new ae.p("texelSize",(ve,Ce)=>1/Ce.camera.pixelRatio)),de.output===D.H.Highlight&&me.include(W.bA),_e&&me.include(Y.l,de),de.output!==D.H.Highlight&&(fe.code.add(oe.H`
      const float lineWidth = ${oe.H.float(de.lineWidth)};
      const float spacing = ${oe.H.float(de.patternSpacing)};
      const float spacingINV = ${oe.H.float(1/de.patternSpacing)};

      float coverage(float p, float txlSize) {
        p = mod(p, spacing);

        float halfTxlSize = txlSize / 2.0;

        float start = p - halfTxlSize;
        float end = p + halfTxlSize;

        float coverage = (ceil(end * spacingINV) - floor(start * spacingINV)) * lineWidth;
        coverage -= min(lineWidth, mod(start, spacing));
        coverage -= max(lineWidth - mod(end, spacing), 0.0);

        return coverage / txlSize;
      }
    `),de.draped||fe.code.add(oe.H`const int maxSamples = 5;
float sample(float p) {
vec2 dxdy = abs(vec2(dFdx(p), dFdy(p)));
float fwidth = dxdy.x + dxdy.y;
ivec2 samples = 1 + ivec2(clamp(dxdy, 0.0, float(maxSamples - 1)));
vec2 invSamples = 1.0 / vec2(samples);
float accumulator = 0.0;
for (int j = 0; j < maxSamples; j++) {
if(j >= samples.y) {
break;
}
for (int i = 0; i < maxSamples; i++) {
if(i >= samples.x) {
break;
}
vec2 step = vec2(i,j) * invSamples - 0.5;
accumulator += coverage(p + step.x * dxdy.x + step.y * dxdy.y, fwidth);
}
}
accumulator /= float(samples.x * samples.y);
return accumulator;
}`)),fe.uniforms.add(new ue.N("uColor",ve=>ve.color)),fe.code.add(oe.H`
    void main() {
      discardBySlice(vpos);
      ${_e?"terrainDepthTest(gl_FragCoord, depth);":""}
      vec4 color = ${de.hasVertexColors?"vColor * uColor;":"uColor;"}
      color = highlightSlice(color, vpos);

      ${de.output!==D.H.Highlight?oe.H`color.a *= ${function ne(de){function me(_e){return de.draped?oe.H`coverage(vuv.${_e}, texelSize)`:oe.H`sample(vuv.${_e})`}switch(de.style){case Q.b.ForwardDiagonal:case Q.b.Horizontal:return me("y");case Q.b.BackwardDiagonal:case Q.b.Vertical:return me("x");case Q.b.DiagonalCross:case Q.b.Cross:return oe.H`
        1.0 - (1.0 - ${me("x")}) * (1.0 - ${me("y")})
      `;default:return"0.0"}}(de)};`:""}

      if (color.a < ${oe.H.float(H.b)}) {
        discard;
      }

      ${de.output===D.H.Alpha?oe.H`gl_FragColor = vec4(color.a);`:""}

      ${de.output===D.H.Color?oe.H`gl_FragColor = color; ${de.transparencyPassType===X.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}`:""}
      ${de.output===D.H.Highlight?oe.H`outputHighlight();`:""}
      ${de.output===D.H.Depth?oe.H`outputDepth(linearDepth);`:""};
    }
  `),me}const ce=Object.freeze(Object.defineProperty({__proto__:null,build:le},Symbol.toStringTag,{value:"Module"}))},5585:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>$,b:()=>G});var D=T(6067),x=T(39704),w=T(84178),B=T(17625),U=T(63123),W=T(46524),Y=T(22355),H=T(16396);function G(re){const ue=new Y.kG;return ue.attributes.add(H.T.POSITION,"vec3"),ue.attributes.add(H.T.INSTANCEFEATUREATTRIBUTE,"float"),ue.vertex.uniforms.add(new x.K("cameraPosition")),ue.vertex.uniforms.add(new x.K("offset")),ue.vertex.uniforms.add(new w.d("width")),ue.vertex.uniforms.add(new U.g("proj",(ae,oe)=>oe.camera.projectionMatrix)),ue.vertex.uniforms.add(new W.B("view")),ue.vertex.uniforms.add(new w.d("time")),ue.varyings.add("vUv","vec2"),ue.vertex.code.add(B.H`
    vec3 hash31(float p){
      vec3 p3 = fract(vec3(p) * vec3(0.1031, 0.1030, 0.0973));
      p3 += dot(p3, p3.yzx + 33.33);
      return fract((p3.xxy + p3.yzz) * p3.zyx);
    }

    float hash11(float p){
      p = fract(p * 0.1031);
      p *= p + 33.33;
      p *= p + p;
      return fract(p);
    }

    //https://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/
    vec3 rotateVectorByQuaternion(vec3 v, vec4 q){
      return 2.0 * cross(q.xyz, v * q.w + cross(q.xyz, v)) + v;
    }

    void main(void) {

      vUv = position.xz;

      vec3 rand = hash31(instanceFeatureAttribute);

      // Set random position for all particles
      // The hash function space is not high resolution so offset particles by an additional random value
      // This creates grids of 1000 particles which are shifted by random hundreths of the tile width
      // overlaying multiple identical but offset grids
      vec3 randomPosition = 2.0 * (rand + (0.01 + 0.01 * rand) * floor(0.001 * instanceFeatureAttribute)) - 1.0;

      // Random orientation of rain drops
      float angle = 3.1415 * hash11(instanceFeatureAttribute);

      vec3 up = vec3(0, 0, 1);

      // Gravity and wind direction
      vec3 direction = normalize(cameraPosition);

      vec3 tangent = normalize(cross(direction, up));

      // Gravity
      vec3 animatedPos = randomPosition + direction * -time;

      // Rain particles fall straight down and are randomly oriented
      // Snow particles have random sinusoid trajectories and are rotated to face the camera
      ${re.type===D.H.Rain?B.H`
            // Random rotation for particle
            vec3 rotationAxis = up;
            vec4 quat = vec4(rotationAxis * sin(angle), cos(angle));
            vec3 transformedPos = rotateVectorByQuaternion(vec3(0.2, 0.2, 4.0) * (position - vec3(0.5, 0.0, 0.5)), quat);

            // Rotate particle to planetary position
            rotationAxis = tangent;
            angle = 0.5 * -acos(dot(direction, up));
            quat = vec4(rotationAxis * sin(angle), cos(angle));
            transformedPos = rotateVectorByQuaternion(transformedPos, quat);

            vec4 pos = mat4(mat3(view)) * vec4(transformedPos + (mod(width * animatedPos - offset, width) - 0.5 * width), 1.0);
            gl_Position = proj * pos;
      `:B.H`
            vec3 rotationAxis = direction;
            vec4 quat = vec4(rotationAxis * sin(angle), cos(angle));

            tangent = rotateVectorByQuaternion(tangent, quat);
            // Random sinusoid from friction
            animatedPos += tangent * 0.25 * sin(dot(animatedPos, direction));
            vec4 pos = mat4(mat3(view)) * vec4((mod(width * animatedPos - offset, width) - 0.5 * width), 1.0);
            gl_Position = proj * (0.5 * vec4(position.xzy, 0.0) + pos);
      `}
    }
  `),ue.fragment.uniforms.add(new w.d("opacity")),ue.fragment.uniforms.add(new x.K("particleColor")),ue.fragment.code.add(B.H`
    void main() {

      // Cut off corners of the triangle
      if(vUv.x < 0.0 || vUv.y < 0.0){
        discard;
      }

      float d = length(vUv - vec2(0.5));

      ${re.type===D.H.Rain?B.H`d = 0.35 * smoothstep(0.5, 0.0, d);`:B.H`d = smoothstep(0.5, 0.1, d);`}
      gl_FragColor = opacity * vec4(particleColor * d, d);
    }
  `),ue}const $=Object.freeze(Object.defineProperty({__proto__:null,build:G},Symbol.toStringTag,{value:"Module"}))},44796:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>le,R:()=>ye,a:()=>ne,b:()=>ce,c:()=>de});var D=T(62208),x=T(28093),w=T(62449),B=T(7699),U=T(3802),W=T(76301),Y=T(89798),H=T(87633),G=T(14273),$=T(87204),re=T(67668),ue=T(33726),ae=T(78038),oe=T(95285),ie=T(97139),X=T(65787),Z=T(7090),Q=T(18952),J=T(17625),se=T(22355),ee=T(35387);class le extends W.J{constructor(De,ve,Ce,ge,Te,Le){super(De,ge,Te),this.colormap=ve,this.symbolizer=Ce,this.u_colormap=Le,this.backgroundColor=x.Z,this.fboTexture=null,this.baseOpacity=1}}class ne extends le{}class ce extends le{}function de(fe){const De=new se.kG;De.include(G.T),De.include(W.G),De.include(U.i),fe.tileBlendInput===H.R.GridComposite&&(De.extensions.add("GL_OES_standard_derivatives"),De.fragment.include(Y.H));const ve=fe.tileBlendInput===H.R.ColorComposite;ve&&De.fragment.uniforms.add(new ie.J("backgroundColor",je=>je.backgroundColor)),fe.baseOpacityMode!==$.a.One&&De.fragment.uniforms.add(new X.p("baseOpacity",je=>je.baseOpacity));const Ce=fe.baseOpacityMode===$.a.OnBaseLayer,ge=fe.baseOpacityMode===$.a.OnBackground||fe.baseOpacityMode===$.a.OnBaseLayer,Te=fe.blendMode!==B.iM.Normal;De.fragment.include(re.d,fe);const Le=fe.tileBlendInput!==H.R.LayerOnly;return(Te&&!Le||Ce)&&(De.fragment.uniforms.add(new ee.A("fboColor",je=>je.fboTexture)),De.fragment.uniforms.add(new X.p("tileSize",je=>(0,D.pC)(je.fboTexture)?je.fboTexture.descriptor.width:1))),De.fragment.code.add(J.H`
    vec4 applyBackgroundBlend(vec4 layerColor) {
      ${Le||Ce?J.H`
          vec4 bgColor = ${Ce?J.H`texture2D(fboColor, gl_FragCoord.xy / tileSize)`:ve?J.H`vec4(backgroundColor, 1.0)`:J.H`gridColor(vuv)`};
          ${ge?J.H`bgColor *= baseOpacity;`:""}`:""}
      ${Te?J.H`
            vec3 pmColorLayer = layerColor.rgb * layerColor.a;
            vec4 fboTex = ${Le?J.H`bgColor;`:J.H`texture2D(fboColor, gl_FragCoord.xy / tileSize) ${Ce?" * baseOpacity":""};`}
            vec3 Cb = fboTex.a == 0.0 ? fboTex.rgb : vec3(fboTex.rgb * fboTex.a);
            return applyBlendMode(pmColorLayer.rgb, layerColor.a * u_opacity, Cb, fboTex.a);`:Le||Ce?J.H`
            float composeAlpha = layerColor.a * u_opacity;
            vec4 pmColorLayer = vec4(layerColor.rgb, 1.0);
            return mix(bgColor, pmColorLayer, composeAlpha);`:J.H`
            return layerColor * layerColor.a * u_opacity;`}
    }
  `),fe.colorizerType===w.U.Stretch?function _e(fe,De){fe.fragment.uniforms.add([new Q._("u_bandCount",Ce=>Ce.symbolizer.u_bandCount),new Z.O("u_minCutOff",Ce=>Ce.symbolizer.u_minCutOff,3),new Z.O("u_maxCutOff",Ce=>Ce.symbolizer.u_maxCutOff,3),new Z.O("u_factor",Ce=>Ce.symbolizer.u_factor,3),new X.p("u_minOutput",Ce=>Ce.symbolizer.u_minOutput),new X.p("u_maxOutput",Ce=>Ce.symbolizer.u_maxOutput),new ae.U("u_useGamma",Ce=>Ce.symbolizer.u_useGamma),new Z.O("u_gamma",Ce=>Ce.symbolizer.u_gamma,3),new Z.O("u_gammaCorrection",Ce=>Ce.symbolizer.u_gammaCorrection,3),new X.p("u_opacity",Ce=>Ce.common.u_opacity)]),fe.fragment.code.add(J.H`float stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool useGamma, float gamma, float gammaCorrection) {
if (val >= maxCutOff) {
return maxOutput;
} else if (val <= minCutOff) {
return minOutput;
}
float stretchedVal;
if (useGamma) {
float tempf = 1.0;
float outRange = maxOutput - minOutput;
float relativeVal = (val - minCutOff) / (maxCutOff - minCutOff);
if (gamma > 1.0) {
tempf -= pow(1.0 / outRange, relativeVal * gammaCorrection);
}
stretchedVal = (tempf * outRange * pow(relativeVal, 1.0 / gamma) + minOutput) / 255.0;
} else {
stretchedVal = minOutput + (val - minCutOff) * factor;
}
return stretchedVal;
}`);const ve=De.applyColormap?J.H`gl_FragColor = applyBackgroundBlend(colormap(vec4(grayVal, grayVal, grayVal, currentPixel.a), !u_useGamma));`:J.H`gl_FragColor = applyBackgroundBlend(vec4(grayVal, grayVal, grayVal, currentPixel.a));`;fe.fragment.code.add(J.H`
      void main() {
        vec2 pixelLocation = getPixelLocation(uv);
        if (isOutside(pixelLocation)) {
          gl_FragColor = applyBackgroundBlend(vec4(0.0, 0.0, 0.0, 0.0));
          return;
        }

        vec4 currentPixel = getPixel(pixelLocation);
        ${De.stretchType===w.H.Noop?J.H`
        gl_FragColor = applyBackgroundBlend(currentPixel);`:J.H`
        if (currentPixel.a == 0.0) {
          gl_FragColor = applyBackgroundBlend(vec4(0.0, 0.0, 0.0, 0.0));
          return;
        }
        if (u_bandCount == 1) {
          float grayVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);
          ${ve}
        } else {
          float redVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);
          float greenVal = stretchOneValue(currentPixel.g, u_minCutOff[1], u_maxCutOff[1], u_minOutput, u_maxOutput, u_factor[1], u_useGamma, u_gamma[1], u_gammaCorrection[1]);
          float blueVal = stretchOneValue(currentPixel.b, u_minCutOff[2], u_maxCutOff[2], u_minOutput, u_maxOutput, u_factor[2], u_useGamma, u_gamma[2], u_gammaCorrection[2]);
          gl_FragColor = applyBackgroundBlend(vec4(redVal, greenVal, blueVal, currentPixel.a));
        }`}
      }`)}(De,fe):fe.colorizerType===w.U.Lut?function me(fe){fe.fragment.code.add(J.H`void main() {
vec2 pixelLocation = getPixelLocation(uv);
if (isOutside(pixelLocation)) {
gl_FragColor = applyBackgroundBlend(vec4(0.0, 0.0, 0.0, 0.0));
return;
}
vec4 currentPixel = getPixel(pixelLocation);
gl_FragColor = applyBackgroundBlend(colormap(currentPixel, true));
}`)}(De):fe.colorizerType===w.U.Hillshade&&function he(fe,De){const ve=fe.fragment;ve.uniforms.add([new ee.A("u_image",ge=>ge.u_image),new Q._("u_hillshadeType",ge=>ge.symbolizer.u_hillshadeType),new Z.O("u_sinZcosAs",ge=>ge.symbolizer.u_sinZcosAs,6),new Z.O("u_sinZsinAs",ge=>ge.symbolizer.u_sinZsinAs,6),new Z.O("u_cosZs",ge=>ge.symbolizer.u_cosZs,6),new Z.O("u_weights",ge=>ge.symbolizer.u_weights,6),new oe.A("u_factor",ge=>ge.symbolizer.u_factor),new X.p("u_minValue",ge=>ge.symbolizer.u_minValue),new X.p("u_maxValue",ge=>ge.symbolizer.u_maxValue),new oe.A("u_srcImageSize",ge=>ge.common.u_srcImageSize)]),ve.include(ue.Y),ve.code.add(J.H`vec4 overlay(float val, float minValue, float maxValue, float hillshade, float alpha) {
val = clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);
vec3 hsv = rgb2hsv(colormap(vec4(val, val, val, 1.0), false).rgb);
hsv.z = hillshade;
return vec4(hsv2rgb(hsv) * alpha, alpha);
}`),ve.code.add(J.H`float getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){
if (a == 0.0 || a == 0.0 || a==0.0 || a == 0.0 || a == 0.0 || a==0.0 || a == 0.0 || a == 0.0 || a==0.0) {
return 0.0;
}  else {
return e;
}
}`);const Ce=De.applyColormap?J.H`gl_FragColor = applyBackgroundBlend(overlay(ve.r, u_minValue, u_maxValue, hillshade, alpha));`:J.H`hillshade *= alpha;
gl_FragColor = applyBackgroundBlend(vec4(hillshade, hillshade, hillshade, alpha));`;ve.code.add(J.H`
    void main() {
      vec2 pixelLocation = getPixelLocation(uv);
      if (isOutside(pixelLocation)) {
        gl_FragColor = applyBackgroundBlend(vec4(0.0, 0.0, 0.0, 0.0));
        return;
      }

      vec4 currentPixel = getPixel(pixelLocation);
      if (currentPixel.a == 0.0) {
        gl_FragColor = applyBackgroundBlend(vec4(0.0, 0.0, 0.0, 0.0));
        return;
      }

      //mirror edge pixels
      vec2 axy = vec2(-1.0, -1.0);
      vec2 bxy = vec2(0.0, -1.0);
      vec2 cxy = vec2(1.0, -1.0);
      vec2 dxy = vec2(-1.0, 0.0);
      vec2 fxy = vec2(1.0, 0.0);
      vec2 gxy = vec2(-1.0, 1.0);
      vec2 hxy = vec2(0.0, 1.0);
      vec2 ixy = vec2(1.0, 1.0);
      vec2 onePixel = 1.0 / u_srcImageSize;
      if (pixelLocation.s < onePixel.s) {
        axy[0] = 1.0;
        dxy[0] = 1.0;
        gxy[0] = 1.0;
      }
      if (pixelLocation.t < onePixel.t) {
        axy[1] = 1.0;
        bxy[1] = 1.0;
        cxy[1] = 1.0;
      }
      if (pixelLocation.s > 1.0 - onePixel.s) {
        cxy[0] = -1.0;
        fxy[0] = -1.0;
        ixy[0] = -1.0;
      }
      if (pixelLocation.t > 1.0 - onePixel.t) {
        gxy[1] = -1.0;
        hxy[1] = -1.0;
        ixy[1] = -1.0;
      }

      // calculate hillshade
      vec4 va = texture2D(u_image, pixelLocation + onePixel * axy);
      vec4 vb = texture2D(u_image, pixelLocation + onePixel * bxy);
      vec4 vc = texture2D(u_image, pixelLocation + onePixel * cxy);
      vec4 vd = texture2D(u_image, pixelLocation + onePixel * dxy);
      vec4 ve = texture2D(u_image, pixelLocation);
      vec4 vf = texture2D(u_image, pixelLocation + onePixel * fxy);
      vec4 vg = texture2D(u_image, pixelLocation + onePixel * gxy);
      vec4 vh = texture2D(u_image, pixelLocation + onePixel * hxy);
      vec4 vi = texture2D(u_image, pixelLocation + onePixel * ixy);

      // calculate the rate of z change along the x, y, and diagonal direction
      float dzx = (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_factor.s;
      float dzy = (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_factor.t;
      float dzd = sqrt(1.0 + dzx * dzx + dzy * dzy);
      float hillshade = 0.0;

      // traditional single light source
      if (u_hillshadeType == 0){
        float cosDelta = u_sinZsinAs[0] * dzy - u_sinZcosAs[0] * dzx;
        float z = (u_cosZs[0] + cosDelta) / dzd;
        if (z < 0.0)  z = 0.0;
        hillshade = z;
      } else {
        // multi-directional with 6 light sources
        for (int k = 0; k < 6; k++) {
        float cosDelta = u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;
        float z = (u_cosZs[k] + cosDelta) / dzd;
        if (z < 0.0) z = 0.0;
        hillshade = hillshade + z * u_weights[k];
        if (k == 5) break;
        }
      }

      // set color
      float alpha = getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);
      alpha *= u_opacity;
      ${Ce}
    }
  `)}(De,fe),De}const ye=Object.freeze(Object.defineProperty({__proto__:null,ColorizerUniforms:le,ColorizerStretchUniforms:ne,ColorizerHillshadeUniforms:ce,build:de},Symbol.toStringTag,{value:"Module"}))},77133:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>Le,b:()=>Te});var D=T(52382),x=T(73132),w=T(6945),B=T(78925),U=T(24255),W=T(60355),Y=T(26859),H=T(84833),G=T(99579),$=T(36603),re=T(58173),ue=T(66085),ae=T(58208),oe=T(54662),ie=T(13146),X=T(10109),Z=T(98898),Q=T(92724),J=T(56693),se=T(92836),ee=T(67022),le=T(93609),ne=T(28137),ce=T(2166),de=T(97139),me=T(69960),_e=T(65787),he=T(17625),ye=T(46524),fe=T(22355),De=T(35387),ve=T(42743),Ce=T(16396),ge=T(95279);function Te(je){const ze=new fe.kG,Ee=ze.vertex.code,Ae=ze.fragment.code,we=(0,ce.S)(ze,je);return ze.include(H.f),ze.varyings.add("vpos","vec3"),ze.include(se.k,je),ze.include(W.f,je),ze.include(ue.L,je),je.output!==w.H.Color&&je.output!==w.H.Alpha||((0,ce.h)(ze.vertex,je),ze.include(Y.O,je),ze.include(U.w),je.offsetBackfaces&&ze.include(x.w),je.instancedColor&&ze.attributes.add(Ce.T.INSTANCECOLOR,"vec4"),ze.varyings.add("vNormalWorld","vec3"),ze.varyings.add("localvpos","vec3"),je.hasMultipassTerrain&&ze.varyings.add("depth","float"),ze.include($.D,je),ze.include(D.q,je),ze.include(G.R,je),ze.include(re.c,je),ze.vertex.uniforms.add(new me.N("externalColor",Be=>Be.externalColor)),ze.varyings.add("vcolorExt","vec4"),Ee.add(he.H`
        void main(void) {
          forwardNormalizedVertexColor();
          vcolorExt = externalColor;
          ${je.instancedColor?"vcolorExt *= instanceColor;":""}
          vcolorExt *= vvColor();
          vcolorExt *= getSymbolColor();
          forwardColorMixMode();

          if (vcolorExt.a < ${he.H.float(ee.b)}) {
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          } else {
            vpos = calculateVPos();
            localvpos = vpos - view[3].xyz;
            vpos = subtractOrigin(vpos);
            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));
            vpos = addVerticalOffset(vpos, localOrigin);
            gl_Position = transformPosition(proj, view, vpos);
            ${je.offsetBackfaces?"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);":""}
          }
          ${je.hasMultipassTerrain?he.H`depth = (view * vec4(vpos, 1.0)).z;`:""}
          forwardLinearDepth();
          forwardTextureCoordinates();
        }
      `)),je.output===w.H.Alpha&&(ze.include(B.f5,je),ze.include(le.z,je),ze.include(X.l,je),ze.fragment.uniforms.add([new _e.p("opacity",Be=>Be.opacity),new _e.p("layerOpacity",Be=>Be.layerOpacity),new ye.B("view")]),je.hasColorTexture&&ze.fragment.uniforms.add(new De.A("tex",Be=>Be.texture)),ze.fragment.include(ne.y),Ae.add(he.H`
      void main() {
        discardBySlice(vpos);
        ${je.hasMultipassTerrain?he.H`terrainDepthTest(gl_FragCoord, depth);`:""}
        ${je.hasColorTexture?he.H`
                vec4 texColor = texture2D(tex, vuv0);
                ${je.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:he.H`vec4 texColor = vec4(1.0);`}
        ${je.hasVertexColors?he.H`float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:he.H`float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}

        gl_FragColor = vec4(opacity_);
      }
    `)),je.output===w.H.Color&&(ze.include(B.f5,je),ze.include(ie.X,je),ze.include(oe.K,je),ze.include(le.z,je),ze.include(je.instancedDoublePrecision?J.hb:J.XE,je),ze.include(X.l,je),(0,ce.h)(ze.fragment,je),ze.fragment.uniforms.add([we,new de.J("ambient",Be=>Be.ambient),new de.J("diffuse",Be=>Be.diffuse),new _e.p("opacity",Be=>Be.opacity),new _e.p("layerOpacity",Be=>Be.layerOpacity),new ye.B("view"),new _e.p("lightingGlobalFactor",(Be,Pe)=>Pe.lighting.globalFactor),new de.J("lightingMainIntensity",(Be,Pe)=>Pe.lighting.mainLight.intensity)]),ze.fragment.constants.add("ambientBoostFactor","float",ge.V),je.hasColorTexture&&ze.fragment.uniforms.add(new De.A("tex",Be=>Be.texture)),ze.include(Q.jV,je),ze.include(Z.T,je),ze.fragment.include(ne.y),ze.extensions.add("GL_OES_standard_derivatives"),Ae.add(he.H`
      void main() {
        discardBySlice(vpos);
        ${je.hasMultipassTerrain?he.H`terrainDepthTest(gl_FragCoord, depth);`:""}
        ${je.hasColorTexture?he.H`
                vec4 texColor = texture2D(tex, vuv0);
                ${je.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:he.H`vec4 texColor = vec4(1.0);`}
        vec3 viewDirection = normalize(vpos - cameraPosition);
        ${je.pbrMode===Q.f7.Normal?"applyPBRFactors();":""}
        float ssao = evaluateAmbientOcclusionInverse();
        ssao *= getBakedOcclusion();

        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;
        ${je.receiveShadows?"float shadow = readShadowMap(vpos, linearDepth);":je.spherical?"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);":"float shadow = 0.0;"}
        vec3 matColor = max(ambient, diffuse);
        ${je.hasVertexColors?he.H`
                vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:he.H`
                vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        ${je.snowCover?he.H`albedo = mix(albedo, vec3(1), 0.9);`:he.H``}
        ${he.H`
            vec3 shadingNormal = normalize(vNormalWorld);
            albedo *= 1.2;
            vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);
            float alignmentLightView = clamp(dot(viewForward, -lightingMainDirection), 0.0, 1.0);
            float transmittance = 1.0 - clamp(dot(viewForward, shadingNormal), 0.0, 1.0);
            float treeRadialFalloff = vColor.r;
            float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);
            additionalLight += backLightFactor * lightingMainIntensity;`}
        ${je.pbrMode===Q.f7.Normal||je.pbrMode===Q.f7.Schematic?je.spherical?he.H`vec3 normalGround = normalize(vpos + localOrigin);`:he.H`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:he.H``}
        ${je.pbrMode===Q.f7.Normal||je.pbrMode===Q.f7.Schematic?he.H`
                float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];
                ${je.snowCover?he.H`
                        mrr = vec3(0.0, 1.0, 0.04);
                        emission = vec3(0.0);`:""}

                vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:he.H`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);
        ${je.transparencyPassType===ve.Am.Color?he.H`gl_FragColor = premultiplyAlpha(gl_FragColor);`:he.H``}
      }
    `)),ze.include(ae.s,je),ze}const Le=Object.freeze(Object.defineProperty({__proto__:null,build:Te},Symbol.toStringTag,{value:"Module"}))},3393:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>ee,R:()=>ne,b:()=>le});var D=T(62208),x=T(6945),w=T(78925),B=T(39645),U=T(54120),W=T(92484),Y=T(10109),H=T(39337),G=T(67022),$=T(33726),re=T(2166),ue=T(95285),ae=T(69960),oe=T(65787),ie=T(17625),X=T(63123),Z=T(22355),Q=T(42743),J=T(16396),se=T(39401);const ee=1;function le(ce){const de=new Z.kG,me=ce.hasMultipassTerrain&&(ce.output===x.H.Color||ce.output===x.H.Alpha);de.include(H.e),de.include(B.U,ce),de.include(W.q,ce),ce.output===x.H.Depth&&de.include(U.F,ce),(0,re.S)(de,ce);const{vertex:_e,fragment:he}=de;_e.uniforms.add([new X.g("inverseProjectionMatrix",(Le,je)=>je.camera.inverseProjectionMatrix),new ue.A("nearFar",(Le,je)=>je.camera.nearFar),new oe.p("miterLimit",Le=>"miter"!==Le.join?0:Le.miterLimit),new ae.N("viewport",(Le,je)=>je.camera.fullViewport)]),_e.constants.add("LARGE_HALF_FLOAT","float",65500),de.attributes.add(J.T.POSITION,"vec3"),de.attributes.add(J.T.SUBDIVISIONFACTOR,"float"),de.attributes.add(J.T.UV0,"vec2"),de.attributes.add(J.T.AUXPOS1,"vec3"),de.attributes.add(J.T.AUXPOS2,"vec3"),de.varyings.add("vColor","vec4"),de.varyings.add("vpos","vec3"),de.varyings.add("linearDepth","float"),me&&de.varyings.add("depth","float");const ye=ce.capType===se.R.ROUND,fe=ce.stippleEnabled&&ce.stippleScaleWithLineWidth||ye;fe&&de.varyings.add("vLineWidth","float");const De=ce.stippleEnabled&&ce.stippleScaleWithLineWidth;De&&de.varyings.add("vLineSizeInv","float");const ve=ce.innerColorEnabled||ye;ve&&de.varyings.add("vLineDistance","float");const Ce=ce.stippleEnabled&&ye,ge=ce.falloffEnabled||Ce;return ge&&de.varyings.add("vLineDistanceNorm","float"),ye&&(de.varyings.add("vSegmentSDF","float"),de.varyings.add("vReverseSegmentSDF","float")),_e.code.add(ie.H`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),_e.code.add(ie.H`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),_e.code.add(ie.H`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${me?"depth = pos.z;":""}
      linearDepth = (-pos.z - nearFar[0]) / (nearFar[1] - nearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `),_e.uniforms.add(new oe.p("pixelRatio",(Le,je)=>je.camera.pixelRatio)),_e.code.add(ie.H`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${fe?ie.H`vLineWidth = lineWidth;`:""}
      ${De?ie.H`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `),(ce.stippleEnabled||ye)&&_e.code.add(ie.H`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${ye?ie.H`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),_e.code.add(ie.H`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),_e.code.add(ce.roundJoins?ie.H`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${ce.stippleEnabled?ie.H`min(1.0, subdivisionFactor * ${ie.H.float((ee+2)/(ee+1))})`:ie.H`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `:ie.H`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`),_e.code.add(ie.H`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${ce.capType!==se.R.BUTT?ie.H`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),_e.code.add(ie.H`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${ge||ve?ie.H`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${ve?ie.H`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${ge?ie.H`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),ye&&_e.code.add(ie.H`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),ce.stippleEnabled&&(ce.draped?_e.uniforms.add(new oe.p("worldToScreenRatio",(Le,je)=>1/je.screenToPCSRatio)):_e.code.add(ie.H`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),_e.code.add(ie.H`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),_e.code.add(ce.draped?ie.H`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`:ie.H`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),_e.code.add(ie.H`
      float patternLength = ${ce.stippleScaleWithLineWidth?"lineSize * ":""} stipplePatternPixelSize;

      // Compute the coordinates at both start and end of the line segment, because we need both to clamp to in the fragment shader
      vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);

      vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);

      // Adjust the coordinate to the displaced position (the pattern is shortened/overextended on the in/outside of joins)
      if (segmentLengthScreenDouble >= 0.001) {
        // Project the actual vertex position onto the line segment. Note that the resulting factor is within [0..1] at the
        // original vertex positions, and slightly outside of that range at the displaced positions
        vec2 stippleDisplacement = pos.xy - segmentOrigin;
        float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);

        // Apply this offset to the actual vertex coordinate (can be screen or pseudo-screen space)
        vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
      }

      // Cancel out perspective correct interpolation because we want this length the really represent the screen distance
      vStippleDistanceLimits *= pos.w;
      vStippleDistance *= pos.w;

      // Disable stipple distance limits on caps
      vStippleDistanceLimits = isJoin ?
                                 vStippleDistanceLimits :
                                 isStartVertex ?
                                  vec2(-1e038, vStippleDistanceLimits.y) :
                                  vec2(vStippleDistanceLimits.x, 1e038);
    `)),_e.code.add(ie.H`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${ce.wireframe&&!ce.draped?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
    }
  }
  `),me&&de.include(Y.l,ce),de.include(w.f5,ce),he.include($.Y),he.code.add(ie.H`
  void main() {
    discardBySlice(vpos);
    ${me?"terrainDepthTest(gl_FragCoord, depth);":""}
  `),ce.wireframe?he.code.add(ie.H`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(ye&&he.code.add(ie.H`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${ie.H.float(G.b)}) {
        discard;
      }
    `),he.code.add(Ce?ie.H`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${ie.H.float(G.b)}, stippleCoverage);
      `:ie.H`float stippleAlpha = getStippleAlpha();`),he.uniforms.add(new ae.N("intrinsicColor",Le=>Le.color)),he.code.add(ie.H`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);
vec4 color = intrinsicColor * vColor;`),ce.innerColorEnabled&&(he.uniforms.add(new ae.N("innerColor",Le=>(0,D.Pt)(Le.innerColor,Le.color))),he.uniforms.add(new oe.p("innerWidth",(Le,je)=>Le.innerWidth*je.camera.pixelRatio)),he.code.add(ie.H`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),he.code.add(ie.H`vec4 finalColor = blendStipple(color, stippleAlpha);`),ce.falloffEnabled&&(he.uniforms.add(new oe.p("falloff",Le=>Le.falloff)),he.code.add(ie.H`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`))),he.code.add(ie.H`
    if (finalColor.a < ${ie.H.float(G.b)}) {
      discard;
    }

    ${ce.output===x.H.Alpha?ie.H`gl_FragColor = vec4(finalColor.a);`:""}
    ${ce.output===x.H.Color?ie.H`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${ce.output===x.H.Color&&ce.transparencyPassType===Q.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    ${ce.output===x.H.Highlight?ie.H`gl_FragColor = vec4(1.0);`:""}
    ${ce.output===x.H.Depth?ie.H`outputDepth(linearDepth);`:""}
  }
  `),de}const ne=Object.freeze(Object.defineProperty({__proto__:null,NUM_ROUND_JOIN_SUBDIVISIONS:ee,build:le},Symbol.toStringTag,{value:"Module"}))},7508:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>G,b:()=>H});var D=T(66054),x=T(17625),w=T(22355),B=T(66838),U=T(53218),W=T(16396);function H($){const re=new w.kG;return $.output===U.f.EdgeDetector&&(re.attributes.add(W.T.POSITION,"vec2"),re.vertex.uniforms.add(new D.y("resolution")),re.varyings.add("fTexCoord","vec2"),re.varyings.add("fOffset[3]","vec4"),re.vertex.code.add(x.H`void SMAAEdgeDetectionVS( vec2 texcoord ) {
fOffset[0] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );
fOffset[1] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );
fOffset[2] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );
}
void main() {
fTexCoord = (position + 1.0 ) * 0.5;
gl_Position = vec4(position, 0, 1);
SMAAEdgeDetectionVS( fTexCoord );
}`),re.fragment.uniforms.add(new B.Q("tColor")),re.fragment.code.add(x.H`
      vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
        vec2 threshold = vec2( ${x.H.float(.05)} );

        // Calculate color deltas:
        vec4 delta;
        vec3 C = texture2D( colorTex, texcoord ).rgb;

        vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
        vec3 t = abs( C - Cleft );
        delta.x = max( max( t.r, t.g ), t.b );

        vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
        t = abs( C - Ctop );
        delta.y = max( max( t.r, t.g ), t.b );

        // We do the usual threshold:
        vec2 edges = step( threshold, delta.xy );

        // Then discard if there is no edge:
        if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
            discard;

        // Calculate right and bottom deltas:
        vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
        t = abs( C - Cright );
        delta.z = max( max( t.r, t.g ), t.b );

        vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
        t = abs( C - Cbottom );
        delta.w = max( max( t.r, t.g ), t.b );

        // Calculate the maximum delta in the direct neighborhood:
        float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

        // Calculate left-left and top-top deltas:
        vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
        t = abs( C - Cleftleft );
        delta.z = max( max( t.r, t.g ), t.b );

        vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
        t = abs( C - Ctoptop );
        delta.w = max( max( t.r, t.g ), t.b );

        // Calculate the final maximum delta:
        maxDelta = max( max( maxDelta, delta.z ), delta.w );

        // Local contrast adaptation in action:
        edges.xy *= step( maxDelta, float(${x.H.float(2)}) * delta.xy );

        return vec4( edges, 0.0, 0.0 );
      }

      void main() {
        gl_FragColor = SMAAColorEdgeDetectionPS( fTexCoord, fOffset, tColor );
      }
    `)),$.output===U.f.BlendWeight&&(re.attributes.add(W.T.POSITION,"vec2"),re.vertex.uniforms.add(new D.y("resolution")),re.varyings.add("fTexCoord","vec2"),re.varyings.add("fOffset[3]","vec4"),re.varyings.add("fPixCoord","vec2"),re.vertex.code.add(x.H`
      void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
        fPixCoord = texcoord * resolution.zw;
        fOffset[0] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );
        fOffset[1] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );
        fOffset[2] = vec4( fOffset[0].xz, fOffset[1].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( ${x.H.int(8)} );
      }

      void main() {
        fTexCoord = (position + 1.0 ) * 0.5;
        gl_Position = vec4(position, 0, 1);
        SMAABlendingWeightCalculationVS( fTexCoord );
      }
    `),re.fragment.uniforms.add(new B.Q("tEdges")),re.fragment.uniforms.add(new B.Q("tArea")),re.fragment.uniforms.add(new B.Q("tSearch")),re.fragment.uniforms.add(new B.Q("tColor")),re.fragment.uniforms.add(new D.y("resolution")),re.fragment.code.add(x.H`
      #define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
      #define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )

      vec4 SMAASampleLevelZeroOffset(sampler2D texture, vec2 coord, vec2 offset) {
        return texture2D(texture, coord + offset.x * resolution.xy, 0.0);
      }

      vec2 round( vec2 x ) {
        return sign( x ) * floor( abs( x ) + 0.5 );
      }

      float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
        e.r = bias + e.r * scale;
        return 255.0 * texture2D( searchTex, e, 0.0 ).r;
      }

      float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
        vec2 e = vec2( 0.0, 1.0 );
        for ( int i = 0; i < ${x.H.int(8)}; i ++ ) {
          e = texture2D( edgesTex, texcoord, 0.0 ).rg;
          texcoord -= vec2( 2.0, 0.0 ) * resolution.xy;
          if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
        }
        texcoord.x += 0.25 * resolution.x;
        texcoord.x += resolution.x;
        texcoord.x += 2.0 * resolution.x;
        texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);
        return texcoord.x;
      }

      float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
        vec2 e = vec2( 0.0, 1.0 );
        for ( int i = 0; i < ${x.H.int(8)}; i ++ ) {
          e = texture2D( edgesTex, texcoord, 0.0 ).rg;
          texcoord += vec2( 2.0, 0.0 ) * resolution.xy;
          if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
        }
        texcoord.x -= 0.25 * resolution.x;
        texcoord.x -= resolution.x;
        texcoord.x -= 2.0 * resolution.x;
        texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );
        return texcoord.x;
      }

      float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
        vec2 e = vec2( 1.0, 0.0 );
        for ( int i = 0; i < ${x.H.int(8)}; i ++ ) {
          e = texture2D( edgesTex, texcoord, 0.0 ).rg;
          texcoord += vec2( 0.0, 2.0 ) * resolution.xy;
          if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
        }
        texcoord.y -= 0.25 * resolution.y;
        texcoord.y -= resolution.y;
        texcoord.y -= 2.0 * resolution.y;
        texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );
        return texcoord.y;
      }

      float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
        vec2 e = vec2( 1.0, 0.0 );
        for ( int i = 0; i < ${x.H.int(8)}; i ++ ) {
          e = texture2D( edgesTex, texcoord, 0.0 ).rg;
          texcoord -= vec2( 0.0, 2.0 ) * resolution.xy;
          if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
        }
        texcoord.y += 0.25 * resolution.y;
        texcoord.y += resolution.y;
        texcoord.y += 2.0 * resolution.y;
        texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );
        return texcoord.y;
      }

      vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
        vec2 texcoord = float( ${x.H.int(16)} ) * round( 4.0 * vec2( e1, e2 ) ) + dist;
        texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );
        texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;
        return texture2D( areaTex, texcoord, 0.0 ).rg;
      }

      vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
        vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );
        vec2 e = texture2D( edgesTex, texcoord ).rg;
        if ( e.g > 0.0 ) {
          vec2 d;
          vec2 coords;
          coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
          coords.y = offset[ 1 ].y;
          d.x = coords.x;
          float e1 = texture2D( edgesTex, coords, 0.0 ).r;
          coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
          d.y = coords.x;
          d = d * resolution.z - pixcoord.x;
          vec2 sqrt_d = sqrt( abs( d ) );
          coords.y -= 1.0 * resolution.y;
          float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, vec2( 1.0, 0.0 ) ).r;
          weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
        }

        if ( e.r > 0.0 ) {
          vec2 d;
          vec2 coords;
          coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
          coords.x = offset[ 0 ].x;
          d.x = coords.y;
          float e1 = texture2D( edgesTex, coords, 0.0 ).g;
          coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
          d.y = coords.y;
          d = d * resolution.w - pixcoord.y;
          vec2 sqrt_d = sqrt( abs( d ) );
          coords.y -= 1.0 * resolution.y;
          float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, vec2( 0.0, 1.0 ) ).g;
          weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );

          // for some reason the following lines are necessary to prevent
          // texture lookup precision issues on some Intel integrated graphics chips
          vec4 dbg = (offset[ 0 ]+offset[ 1 ]+offset[ 2 ] + coords.xyyx);
          weights.r += 0.00000001 * dot(vec4(0,1,0,1),dbg);
        }
        return weights;
      }

      void main() {
        gl_FragColor = SMAABlendingWeightCalculationPS( fTexCoord, fPixCoord, fOffset, tEdges, tArea, tSearch, ivec4( 0.0 ) );
      }
    `)),$.output===U.f.Blur&&(re.attributes.add(W.T.POSITION,"vec2"),re.vertex.uniforms.add(new D.y("resolution")),re.varyings.add("fTexCoord","vec2"),re.varyings.add("fOffset[2]","vec4"),re.vertex.code.add(x.H`void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
fOffset[0] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );
fOffset[1] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );
}
void main() {
fTexCoord = (position + 1.0 ) * 0.5;
gl_Position = vec4(position, 0, 1);
SMAANeighborhoodBlendingVS(fTexCoord);
}`),re.fragment.uniforms.add(new B.Q("tBlendWeights")),re.fragment.uniforms.add(new B.Q("tColor")),re.fragment.uniforms.add(new D.y("resolution")),re.fragment.code.add(x.H`vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
vec4 a;
a.xz = texture2D( blendTex, texcoord ).xz;
a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
a.w = texture2D( blendTex, offset[ 1 ].xy ).a;
if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
return texture2D( colorTex, texcoord, 0.0 );
} else {
vec2 offset;
offset.x = a.a > a.b ? a.a : -a.b;
offset.y = a.g > a.r ? -a.g : a.r;
if ( abs( offset.x ) > abs( offset.y )) {
offset.y = 0.0;
} else {
offset.x = 0.0;
}
vec4 C = texture2D( colorTex, texcoord, 0.0 );
texcoord += sign( offset ) * resolution.xy;
vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );
vec4 mixed = mix(C, Cop, s);
return mixed;
}
}
void main() {
gl_FragColor = SMAANeighborhoodBlendingPS( fTexCoord, fOffset, tColor, tBlendWeights );
}`)),re}const G=Object.freeze(Object.defineProperty({__proto__:null,build:H},Symbol.toStringTag,{value:"Module"}))},52376:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>ae,b:()=>ue});var D=T(98071),x=T(47923),w=T(39832),B=T(95285),U=T(65364),W=T(84178),Y=T(17625),H=T(22355),G=T(66838),$=T(76217);function ue(oe){const ie=new H.kG,X=ie.fragment;if(ie.include(D.k),oe.output===$.Q.Blur){const Z=2.5,Q=1/(2*Z*Z);X.include(x.S),X.uniforms.add([new G.Q("normalMap"),new G.Q("depthMap"),new G.Q("tex"),new U.e("blurSize"),new W.d("projScale"),new B.A("nearFar",(J,se)=>se.camera.nearFar)]),X.code.add(Y.H`
      void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {
        float c = texture2D(tex, uv).r;
        float d = linearDepthFromTexture(depthMap, uv, nearFar);

        float ddiff = d - center_d;

        float w = exp(-r * r * ${Y.H.float(Q)} - ddiff * ddiff * sharpness);
        wTotal += w;
        bTotal += w * c;
      }
    `),X.code.add(Y.H`
      void main(void) {
        float b = 0.0;
        float w_total = 0.0;

        float center_d = linearDepthFromTexture(depthMap, uv, nearFar);

        float sharpness = -0.05 * projScale/center_d;
        for (int r = -${Y.H.int(4)}; r <= ${Y.H.int(4)}; ++r) {
          float rf = float(r);
          vec2 uvOffset = uv + rf * blurSize;
          blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);
        }

        gl_FragColor = vec4(b / w_total);
      }
    `)}return oe.output===$.Q.SSAO&&(X.include(x.S),ie.include(w.G),X.uniforms.add(new G.Q("normalMap")),X.uniforms.add(new G.Q("depthMap")),X.uniforms.add(new G.Q("rnm")),X.uniforms.add(new W.d("intensity")),X.uniforms.add(new W.d("projScale")),X.uniforms.add(new W.d("radius")),X.uniforms.add(new B.A("nearFar",(Z,Q)=>Q.camera.nearFar)),X.uniforms.add(new U.e("screenSize")),X.uniforms.add(new U.e("rnmScale")),X.code.add(Y.H`vec3 sphere[16];
void fillSphere() {
sphere[0] = vec3(0.186937, 0.0, 0.0);
sphere[1] = vec3(0.700542, 0.0, 0.0);
sphere[2] = vec3(-0.864858, -0.481795, -0.111713);
sphere[3] = vec3(-0.624773, 0.102853, -0.730153);
sphere[4] = vec3(-0.387172, 0.260319, 0.007229);
sphere[5] = vec3(-0.222367, -0.642631, -0.707697);
sphere[6] = vec3(-0.01336, -0.014956, 0.169662);
sphere[7] = vec3(0.122575, 0.1544, -0.456944);
sphere[8] = vec3(-0.177141, 0.85997, -0.42346);
sphere[9] = vec3(-0.131631, 0.814545, 0.524355);
sphere[10] = vec3(-0.779469, 0.007991, 0.624833);
sphere[11] = vec3(0.308092, 0.209288,0.35969);
sphere[12] = vec3(0.359331, -0.184533, -0.377458);
sphere[13] = vec3(0.192633, -0.482999, -0.065284);
sphere[14] = vec3(0.233538, 0.293706, -0.055139);
sphere[15] = vec3(0.417709, -0.386701, 0.442449);
}
float fallOffFunction(float vv, float vn, float bias) {
float f = max(radius * radius - vv, 0.0);
return f * f * f * max(vn-bias, 0.0);
}`),X.code.add(Y.H`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {
vec3 v = Q - C;
float vv = dot(v, v);
float vn = dot(normalize(v), n_C);
return fallOffFunction(vv, vn, 0.1);
}`),ie.fragment.uniforms.add(new B.A("zScale",(Z,Q)=>(0,w.R)(Q))),X.code.add(Y.H`
      void main(void) {
        fillSphere();
        vec3 fres = normalize((texture2D(rnm, uv * rnmScale).xyz * 2.0) - vec3(1.0));
        float currentPixelDepth = linearDepthFromTexture(depthMap, uv, nearFar);

        if (-currentPixelDepth>nearFar.y || -currentPixelDepth<nearFar.x) {
          gl_FragColor = vec4(0.0);
          return;
        }

        vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy,currentPixelDepth);

        // get the normal of current fragment
        vec4 norm4 = texture2D(normalMap, uv);
        vec3 norm = vec3(-1.0) + 2.0 * norm4.xyz;
        bool isTerrain = norm4.w<0.5;

        float sum = .0;
        vec3 tapPixelPos;

        // note: the factor 2.0 should not be necessary, but makes ssao much nicer.
        // bug or deviation from CE somewhere else?
        float ps = projScale/(2.0 * currentPixelPos.z * zScale.x + zScale.y);

        for(int i = 0; i < ${Y.H.int(16)}; ++i) {
          vec2 unitOffset = reflect(sphere[i], fres).xy;
          vec2 offset = vec2(-unitOffset * radius * ps);

          //don't use current or very nearby samples
          if ( abs(offset.x)<2.0 || abs(offset.y)<2.0) continue;

          vec2 tc = vec2(gl_FragCoord.xy + offset);
          if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;
          vec2 tcTap = tc / screenSize;
          float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap, nearFar);

          if (isTerrain) {
            bool isTerrainTap = texture2D(normalMap, tcTap).w<0.5;
            if (isTerrainTap) {
              continue;
            }
          }

          tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);

          sum+= aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);
        }

        // output the result
        float A = max(1.0-sum*intensity/float(${Y.H.int(16)}),0.0);

        // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4)/2.2
        A = (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;
        gl_FragColor = vec4(A);
      }
    `)),ie}const ae=Object.freeze(Object.defineProperty({__proto__:null,build:ue},Symbol.toStringTag,{value:"Module"}))},94195:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>ae,a:()=>Q,b:()=>X,s:()=>oe});var D=T(28347),x=T(43703),w=T(98071),B=T(47923),U=T(56693),W=T(39832),Y=T(19278),H=T(95285),G=T(17625),$=T(63123),re=T(22355),ue=T(35387);class ae extends U.ry{}const oe=255,ie=1/oe;function X(){const J=new re.kG,se=J.fragment;return se.include(Y.n),se.include(B.S),J.include(W.G),J.include(w.k),J.include(U.hb,{receiveShadows:!0}),se.uniforms.add([new ue.A("depthMap",ee=>ee.linearDepthTexture),new $.g("inverseViewMatrix",(ee,le)=>(0,D.a)(Z,(0,D.j)(Z,le.camera.viewMatrix,le.camera.center))),new H.A("nearFar",(ee,le)=>le.camera.nearFar)]),se.constants.add("sampleValue","float",ie),se.code.add(G.H`void main(void) {
float depth = rgba2float(texture2D(depthMap, uv));
if (depth == 0.0) {
discard;
}
float currentPixelDepth = linearDepthFromFloat(depth, nearFar);
if (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {
discard;
}
vec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);
vec4 worldSpacePos = inverseViewMatrix * currentPixelPos;
mat4 shadowMatrix;
float linearDepth = -currentPixelDepth;
int i = chooseCascade(linearDepth, shadowMatrix);
if (i >= numCascades) {
discard;
}
vec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);
if (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {
discard;
}
vec2 uvShadow = cascadeCoordinates(i, lvpos);
float depthShadow = readShadowMapDepth(uvShadow, shadowMapTex);
bool shadow = depthShadow < lvpos.z;
if (!shadow) {
discard;
}
gl_FragColor = vec4(sampleValue);
}`),J}const Z=(0,x.c)(),Q=Object.freeze(Object.defineProperty({__proto__:null,ShadowCastAccumulatePassParameters:ae,shadowCastMaxSamples:oe,build:X},Symbol.toStringTag,{value:"Module"}))},82148:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>ae,b:()=>ue});var D=T(98071),x=T(47923),w=T(39832),B=T(19278),U=T(69960),W=T(65787),Y=T(17625),H=T(22355),G=T(35387),$=T(94195),re=T(69828);function ue(oe){const ie=new H.kG,X=ie.fragment;X.include(B.n),X.include(x.S),ie.include(w.G),ie.include(D.k);const{visualization:Z,bandsEnabled:Q}=oe;X.constants.add("inverseSampleValue","float",$.s),X.uniforms.add([new G.A("shadowCastMap",ee=>ee.shadowCastMap),new W.p("sampleScale",ee=>ee.sampleScale),new W.p("opacityFromElevation",ee=>ee.opacityFromElevation),new U.N("uColor",ee=>ee.color)]);const J=Z===re.w.Gradient,se=Z===re.w.Threshold;return J&&Q?X.uniforms.add(new W.p("bandSize",ee=>ee.bandSize)):se&&X.uniforms.add(new W.p("threshold",ee=>ee.threshold)),X.code.add(Y.H`
      void main(void) {
        vec4 record = texture2D(shadowCastMap, uv);
        float pixelSamples = record.r * inverseSampleValue;
        if (pixelSamples < 1.0) {
          discard;
        }

        float strength = pixelSamples * sampleScale;

        ${se?Y.H`
            if (strength <= threshold) {
              discard;
            }`:""}

        ${J&&Q?Y.H`strength = ceil(strength / bandSize) * bandSize;`:""}

        gl_FragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${J?Y.H`* strength`:""});
      }
    `),ie}const ae=Object.freeze(Object.defineProperty({__proto__:null,build:ue},Symbol.toStringTag,{value:"Module"}))},19263:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>he,b:()=>ce});var D=T(62208),x=T(28347),w=T(43703),B=T(67831),U=T(99770),W=T(84161),Y=T(28093),H=T(98071),G=T(62952),$=T(47923),re=T(56693),ue=T(39832),ae=T(19278),oe=T(95285),ie=T(97139),X=T(69960),Z=T(65787),Q=T(17625),J=T(63123),se=T(22355),ee=T(35387),le=T(53319);function ce(){const ye=new se.kG;ye.include(re.XE,{receiveShadows:!0});const fe=ye.fragment;return fe.include(ae.n),fe.include($.S),ye.include(ue.G),ye.include(H.k),fe.uniforms.add([new ee.A("defaultDepthTex",(De,ve)=>ve.shadowMap.getSnapshot(le.i.Default)),new ee.A("highlightDepthTex",(De,ve)=>ve.shadowMap.getSnapshot(le.i.Highlight)),new ee.A("depthMap",(De,ve)=>ve.linearDepthTexture),new ee.A("highlightMap",(De,ve)=>ve.highlightColorTexture),new X.N("uColor",De=>De.shadowColor),new oe.A("nearFar",(De,ve)=>ve.camera.nearFar),new Z.p("opacity",De=>De.shadowOpacity),new Z.p("occludedOpacity",De=>De.occludedShadowOpacity),new Z.p("terminationFactor",De=>De.opacityElevation*De.dayNightTerminator),new ie.J("lightingMainDirectionView",(De,ve)=>(0,W.n)(me,(0,W.m)(me,ve.lighting.lightingMainDirection,ve.camera.viewInverseTransposeMatrix))),new oe.A("texelSize",(De,ve)=>(0,D.pC)(ve.linearDepthTexture)?(0,B.a)(_e,1/ve.linearDepthTexture.descriptor.width,1/ve.linearDepthTexture.descriptor.height):U.Z),new J.g("inverseViewMatrix",(De,ve)=>(0,x.a)(de,(0,x.j)(de,ve.camera.viewMatrix,ve.camera.center)))]),fe.constants.add("unoccludedHighlightFlag","vec4",G.ck).add("highlightedThreshold","float",.99999).add("selfShadowThreshold","float",.025),fe.code.add(Q.H`vec3 normalFromDepth(vec3 pixelPos, vec2 fragCoord, vec2 uv, vec2 texelSize, sampler2D depthMap, vec2 nearFar) {
float leftPixelDepth = linearDepthFromTexture(depthMap, uv + vec2(-1.0, 0.0) * texelSize, nearFar);
float rightPixelDepth = linearDepthFromTexture(depthMap, uv + vec2(1.0, 0.0) * texelSize, nearFar);
float bottomPixelDepth = linearDepthFromTexture(depthMap, uv + vec2(0.0, -1.0) * texelSize, nearFar);
float topPixelDepth = linearDepthFromTexture(depthMap, uv + vec2(0.0, 1.0) * texelSize, nearFar);
bool pickLeft = abs(pixelPos.z - leftPixelDepth) < abs(pixelPos.z - rightPixelDepth);
bool pickBottom = abs(pixelPos.z - bottomPixelDepth) < abs(pixelPos.z - topPixelDepth);
vec3 fragCoordHorizontal = pickLeft
? vec3(fragCoord + vec2(-1.0, 0.0), leftPixelDepth)
: vec3(fragCoord + vec2(1.0, 0.0), rightPixelDepth);
vec3 fragCoordVertical = pickBottom
? vec3(fragCoord + vec2(0.0, -1.0), bottomPixelDepth)
: vec3(fragCoord + vec2(0.0, 1.0), topPixelDepth);
vec3 verticalPixelPos = reconstructPosition(fragCoordHorizontal.xy, fragCoordHorizontal.z);
vec3 horizontalPixelPos = reconstructPosition(fragCoordVertical.xy, fragCoordVertical.z);
vec3 normal = normalize(cross(verticalPixelPos - pixelPos, horizontalPixelPos - pixelPos));
return pickLeft == pickBottom ? normal : -normal;
}`),fe.code.add(Q.H`void main(void) {
vec4 highlightInfo = texture2D(highlightMap, uv);
float visiblyHighlighted = (1.0 - clamp(distance(unoccludedHighlightFlag, highlightInfo), 0.0, 1.0)) * highlightInfo.a;
if (visiblyHighlighted > highlightedThreshold) {
discard;
}
float depth = rgba2float(texture2D(depthMap, uv));
if (depth == 0.0) {
discard;
}
float currentPixelDepth = linearDepthFromFloat(depth, nearFar);
if (-currentPixelDepth>nearFar.y || -currentPixelDepth<nearFar.x) {
discard;
}
vec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);
vec4 worldSpacePos = inverseViewMatrix * currentPixelPos;
mat4 shadowMatrix;
float linearDepth = -currentPixelDepth;
int i = chooseCascade(linearDepth, shadowMatrix);
if (i >= numCascades) {
discard;
}
vec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);
if (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {
discard;
}
vec2 uvShadow = cascadeCoordinates(i, lvpos);
float depthHighlight = readShadowMapDepth(uvShadow, highlightDepthTex);
bool shadowHighlight = depthHighlight < lvpos.z;
if (!shadowHighlight) {
discard;
}
float depthDefault = readShadowMapDepth(uvShadow, defaultDepthTex);
bool shadowDefault = depthDefault < lvpos.z;
vec3 normal = normalFromDepth(currentPixelPos.xyz, gl_FragCoord.xy, uv, texelSize, depthMap, nearFar);
bool shaded = dot(normal, lightingMainDirectionView) < selfShadowThreshold;
float fragOpacity = (shadowDefault || shaded) ? occludedOpacity : opacity;
gl_FragColor = vec4(uColor.rgb, uColor.a * fragOpacity * terminationFactor);
}`),ye}const de=(0,w.c)(),me=(0,Y.c)(),_e=(0,U.a)(),he=Object.freeze(Object.defineProperty({__proto__:null,build:ce},Symbol.toStringTag,{value:"Module"}))},4300:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>ae,a:()=>ie,b:()=>oe});var D=T(49115),x=T(24255),w=T(65364),B=T(97139),U=T(39704),W=T(84178),Y=T(17625),H=T(63123),G=T(46524),$=T(22355),re=T(35387),ue=T(16396);class ae extends Y.K{}function oe(X){const Z=new $.kG,{vertex:Q,fragment:J}=Z;if(X.geometry===D.n.Underground)Z.attributes.add(ue.T.POSITION,"vec2"),Z.varyings.add("color","vec4"),Q.uniforms.add([new B.J("lightingMainDirection",(se,ee)=>ee.lighting.lightingMainDirection),new U.K("cameraPosition"),new W.d("undergroundFadeAlpha")]),Q.code.add(Y.H`void main(void) {
float ndotl = dot(normalize(cameraPosition), lightingMainDirection);
float lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));
color = vec4(vec3(lighting), undergroundFadeAlpha);
gl_Position = vec4(position.xy, 1.0, 1.0);
}`),J.code.add(Y.H`void main() {
gl_FragColor = color;
}`);else{Z.include(x.w),Z.attributes.add(ue.T.POSITION,"vec3"),Z.varyings.add("vtc","vec2"),Z.varyings.add("falloff","float");const se=X.geometry===D.n.Cylinder;Q.uniforms.add([new H.g("proj",(ne,ce)=>ce.camera.projectionMatrix),new G.B("view"),new B.J("lightingMainDirection",(ne,ce)=>ce.lighting.lightingMainDirection)]),se||(Z.varyings.add("innerFactor","float"),Q.uniforms.add(new U.K("silCircleCenter")),Q.uniforms.add(new U.K("silCircleV1")),Q.uniforms.add(new U.K("silCircleV2")),Q.uniforms.add(new w.e("texV")),Q.uniforms.add(new W.d("innerScale")));const ee=6.2831853,le=1/128;Q.code.add(Y.H`
		void main(void) {
      ${se?Y.H`
      vec3 pos = position;
      float ndotl = lightingMainDirection.z;
      vtc = vec2(0.0, position.z + 0.05);`:Y.H`
      innerFactor = clamp(-position.z, 0.0, 1.0);
      float scale = position.y * (1.0 + innerFactor * innerScale);
      float phi = position.x * ${Y.H.float(ee*le)} + 1.0;
      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;
      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), lightingMainDirection);
      vtc.x = position.x  * ${Y.H.float(le)};
      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;
      `}
      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));

		  gl_Position = transformPosition(proj, view, pos);
		  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane
    }
	  `),J.uniforms.add(new re.A("tex",ne=>ne.texture)),se||J.uniforms.add(new W.d("altitudeFade")),J.code.add(Y.H`
		void main() {
			vec4 atmosphereColor = texture2D(tex, vtc) * falloff;
      ${se?Y.H`gl_FragColor = atmosphereColor;`:Y.H`
			vec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);
			gl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));
      `}
    }`)}return Z}const ie=Object.freeze(Object.defineProperty({__proto__:null,SimpleAtmospherePassParameters:ae,build:oe},Symbol.toStringTag,{value:"Module"}))},45695:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>ae,b:()=>$});var D=T(28347),x=T(43703),w=T(35283),B=T(69960),U=T(65787),W=T(17625),Y=T(63123),H=T(22355),G=T(16396);function $(){const oe=new H.kG;return oe.attributes.add(G.T.POSITION,"vec3"),oe.attributes.add(G.T.COLOR,"vec4"),oe.attributes.add(G.T.SIZE,"float"),oe.varyings.add("vcolor","vec4"),oe.varyings.add("vsize","float"),oe.vertex.uniforms.add([new Y.g("transform",(ie,X)=>function re(oe,ie){return(0,D.c)(ue,ie.camera.projectionMatrix),ue[10]=24e-8-1,ue[11]=-1,ue[14]=(24e-8-2)*ie.camera.near,(0,D.m)(ue,ue,ie.camera.viewMatrix),(0,D.m)(ue,ue,oe.modelMatrix)}(ie,X)),new B.N("viewport",(ie,X)=>X.camera.fullViewport),new U.p("pixelRatio",(ie,X)=>X.camera.pixelRatio)]),oe.include(w.H),oe.vertex.code.add(W.H`void main(void) {
vec4 posProj = transform * vec4(position, 0);
gl_Position = alignToPixelCenter(posProj, viewport.zw);
vcolor = color / 1.2;
vsize = size * 5.0 * pixelRatio;
gl_PointSize = vsize;
}`),oe.fragment.code.add(W.H`void main() {
float cap = 0.7;
float scale = 1.0 / cap;
float helper = clamp(length(abs(gl_PointCoord - vec2(0.5))), 0.0, cap);
float alpha = clamp((cap - helper) * scale, 0.0, 1.0);
float intensity = alpha * alpha * alpha;
if (vsize < 3.0) {
intensity *= 0.5;
}
gl_FragColor = vec4(vcolor.xyz, intensity);
}`),oe}const ue=(0,x.c)(),ae=Object.freeze(Object.defineProperty({__proto__:null,build:$},Symbol.toStringTag,{value:"Module"}))},73693:(qe,xe,T)=>{"use strict";T.d(xe,{T:()=>De,a:()=>Te,b:()=>ve});var D=T(28347),x=T(43703),w=T(84161),B=T(28093),U=T(75224),W=T(6945),Y=T(78925),H=T(24255),G=T(43880),$=T(54120),re=T(62952),ue=T(54662),ae=T(13146),oe=T(7025),ie=T(92724),X=T(56693),Z=T(30249),Q=T(91528),J=T(411),se=T(95285),ee=T(77739),le=T(97139),ne=T(65787),ce=T(17625),de=T(47205),me=T(63123),_e=T(22355),he=T(35387),ye=T(16396),fe=T(95279);class De extends Z.uS{}function ve(Le){const je=new _e.kG;je.include(J.a,{name:"Terrain Shader",output:Le.output}),je.attributes.add(ye.T.POSITION,"vec3"),je.attributes.add(ye.T.UV0,"vec2"),je.attributes.add(ye.T.NORMAL,"vec3");const{vertex:ze,fragment:Ee}=je;if(ze.uniforms.add([new me.g("proj",(Ae,we)=>we.camera.projectionMatrix),new de.K("view",(Ae,we)=>(0,D.j)(Ce,we.camera.viewMatrix,Ae.origin)),new ee.B("origin",Ae=>Ae.origin)]),Ee.uniforms.add(new ee.B("origin",Ae=>Ae.origin)),Le.output===W.H.Color){je.include(H.w),je.include(oe.n,Le),je.include(Q.E,Le),je.include(ae.X,Le);const Ae=Le.overlayMode!==Z.gT.Disabled,we=Le.overlayMode===Z.gT.EnabledWithWater;Ae&&je.include(Z.yl,{...Le,pbrMode:ie.f7.Water}),we&&je.include(G.M,Le),je.varyings.add("vnormal","vec3"),je.varyings.add("vpos","vec3"),(Le.atmosphere||Le.screenSizePerspective)&&ze.uniforms.add(new me.g("viewNormal",(Pe,Oe)=>Oe.camera.viewInverseTransposeMatrix));const Be=Le.receiveShadows&&!Le.renderOccluded;Be&&je.varyings.add("linearDepth","float"),Le.tileBorders&&je.varyings.add("vuv","vec2"),Le.atmosphere&&(ze.uniforms.add(new le.J("lightingMainDirection",(Pe,Oe)=>Oe.lighting.lightingMainDirection)),je.varyings.add("wnormal","vec3"),je.varyings.add("wlight","vec3")),Le.screenSizePerspective&&(je.varyings.add("screenSizeDistanceToCamera","float"),je.varyings.add("screenSizeCosAngle","float")),ze.code.add(ce.H`
      void main(void) {
        vpos = position;
        vnormal = ${Le.shading?ce.H`normal`:ce.H`getLocalUp(vpos, origin)`};
        vec2 uv = uv0;
        ${Le.atmosphere?ce.H`
        wnormal = normalize((viewNormal * vec4(normalize(vpos + origin), 1.0)).xyz);
        wlight = normalize((view  * vec4(lightingMainDirection, 1.0)).xyz);`:""}
        ${Le.tileBorders?ce.H`vuv = uv;`:""}
        ${Le.screenSizePerspective?ce.H`
        vec3 viewPos = (view * vec4(vpos, 1.0)).xyz;
        screenSizeDistanceToCamera = length(viewPos);
        vec3 viewSpaceNormal = (viewNormal * vec4(normalize(vpos + origin), 1.0)).xyz;
        screenSizeCosAngle = abs(viewSpaceNormal.z);`:""}
        gl_Position = transformPosition(proj, view, vpos);
        ${Be?ce.H`linearDepth = gl_Position.w;`:""}
        forwardTextureCoordinates(uv);
        ${Ae?ce.H`setOverlayVTC(uv);`:""}
        ${we?ce.H`forwardVertexTangent(vnormal);`:ce.H``}
      }
    `),je.extensions.add("GL_OES_standard_derivatives"),je.extensions.add("GL_EXT_shader_texture_lod"),je.include(Y.f5,Le),je.include(ae.X,Le),je.include(ue.K,Le),je.include(X.XE,Le),Ee.uniforms.add([new ee.B("cameraPosition",(Pe,Oe)=>(0,w.b)(ge,Oe.camera.eye,Pe.origin)),new le.J("viewDirection",(Pe,Oe)=>(0,w.n)(ge,(0,w.s)(ge,Oe.camera.viewMatrix[12],Oe.camera.viewMatrix[13],Oe.camera.viewMatrix[14]))),new ne.p("lightingGlobalFactor",(Pe,Oe)=>Oe.lighting.globalFactor),new le.J("lightingMainDirection",(Pe,Oe)=>Oe.lighting.lightingMainDirection),new le.J("lightingMainIntensity",(Pe,Oe)=>Oe.lighting.mainLight.intensity)]),Ee.constants.add("ambientBoostFactor","float",fe.V),we&&Ee.uniforms.add([new he.A("ovWaterTex",(Pe,Oe)=>0===Oe.overlays.length?null:Oe.overlays[U.fu.INNER].getNormalTexture(Pe.overlaySource)),new de.K("view",(Pe,Oe)=>(0,D.j)(Ce,Oe.camera.viewMatrix,Pe.origin))]),Ee.code.add(ce.H`const float sliceOpacity = 0.2;
float lum(vec3 c) {
return (min(min(c.r, c.g), c.b) + max(max(c.r, c.g), c.b)) * 0.5;
}`),Ee.code.add(ce.H`
      void main() {
        ${Be?ce.H`float shadow = readShadowMap(vpos, linearDepth);`:ce.H`float shadow = 0.0;`}
        vec3 normal = normalize(vnormal);
        float vndl = dot(normal, lightingMainDirection);
        float ssao = evaluateAmbientOcclusionInverse();
        vec4 tileColor = getTileColor();
        ${Ae?ce.H`
            vec4 overlayColorOpaque = getOverlayColor(ovColorTex, vtcOverlay);
            vec4 overlayColor = overlayOpacity * overlayColorOpaque;
            vec4 groundColor = tileColor;
            tileColor = tileColor * (1.0 - overlayColor.a) + overlayColor;`:""}
        if (rejectBySlice(vpos)) {
          tileColor *= sliceOpacity;
        }
        ${Le.atmosphere?ce.H`
            float ndotl = clamp(vndl, 0.0, 1.0);
            vec3 atm = vec3(clamp(1.0 - dot(-viewDirection, wnormal), 0.0, 1.0));
            atm *= clamp(1.0 - lum(tileColor.rgb) * 1.5, 0.0, 1.0); //avoid atmosphere on bright base maps
            atm *= clamp(ndotl * 2.0, 0.0, 1.0); // avoid atmosphere on dark side of the globe
            atm *= tileColor.a; // premultiply with tile alpha`:""}

        vec3 albedo = ${Le.atmosphere?ce.H`atm + tileColor.rgb;`:ce.H`tileColor.rgb;`}

        // heuristic shading function used in the old terrain, now used to add ambient lighting
        float additionalAmbientScale = smoothstep(0.0, 1.0, clamp(vndl${Le.shading?"":ce.H`*2.5`}, 0.0, 1.0));

        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor ${Le.shading?"":ce.H`* lightingGlobalFactor`};

        gl_FragColor = vec4(evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight), tileColor.a);
        ${we?ce.H`
            vec4 overlayWaterMask = getOverlayColor(ovWaterTex, vtcOverlay);
            float waterNormalLength = length(overlayWaterMask);
            if (waterNormalLength > 0.95) {
              mat3 tbnMatrix = mat3(tbnTangent, tbnBiTangent, vnormal);
              vec4 waterOverlayColor = vec4(overlayColor.w > 0.0 ? overlayColorOpaque.xyz/overlayColor.w : vec3(1.0), overlayColor.w);
              vec4 viewPosition = view*vec4(vpos, 1.0);
              vec4 waterColorLinear = getOverlayWaterColor(overlayWaterMask, waterOverlayColor, -normalize(vpos - cameraPosition), shadow, vnormal, tbnMatrix, viewPosition.xyz,  vpos + origin);
              vec4 waterColorNonLinear = delinearizeGamma(vec4(waterColorLinear.xyz, 1.0));
              // un-gamma the ground color to mix in linear space
              gl_FragColor = mix(groundColor, waterColorNonLinear, waterColorLinear.w);
            }`:""}
        ${Le.screenSizePerspective?ce.H`
          float perspectiveScale = screenSizePerspectiveScaleFloat(1.0, screenSizeCosAngle, screenSizeDistanceToCamera, vec4(0.0, 0.0, 0.0, 0.0));
          if (perspectiveScale <= 0.25) {
            gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), perspectiveScale * 4.0);
          }
          else if (perspectiveScale <= 0.5) {
            gl_FragColor = mix(gl_FragColor, vec4(0.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.25) * 4.0);
          }
          else if (perspectiveScale >= 0.99) {
            gl_FragColor = mix(gl_FragColor, vec4(0.0, 1.0, 0.0, 1.0), 0.2);
          }
          else {
            gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), (perspectiveScale - 0.5) * 2.0);
          }`:""}
        ${Le.tileBorders?ce.H`
            vec2 dVuv = fwidth(vuv);
            vec2 edgeFactors = smoothstep(vec2(0.0), 1.5 * dVuv, min(vuv, 1.0 - vuv));
            float edgeFactor = 1.0 - min(edgeFactors.x, edgeFactors.y);
            gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 0.0, 1.0), edgeFactor);`:""}
        gl_FragColor = highlightSlice(gl_FragColor, vpos);
      }
    `)}return Le.output!==W.H.Depth&&Le.output!==W.H.Shadow||(je.include(H.w,{hasModelTransformation:!1,linearDepth:!0}),je.include($.F,{output:Le.output}),je.include(oe.n,Le),je.varyings.add("linearDepth","float"),ze.uniforms.add(new se.A("nearFar",(Ae,we)=>we.camera.nearFar)),ze.code.add(ce.H`void main(void) {
gl_Position = transformPositionWithDepth(proj, view, position, nearFar, linearDepth);
}`),Ee.code.add(ce.H`void main() {
outputDepth(linearDepth);
}`)),Le.output===W.H.Normal&&(je.include(H.w),je.include(oe.n,Le),je.varyings.add("vnormal","vec3"),je.varyings.add("vpos","vec3"),ze.uniforms.add(new me.g("viewNormal",(Ae,we)=>we.camera.viewInverseTransposeMatrix)),ze.code.add(ce.H`
        void main(void) {
          vec3 normal = ${Le.shading?ce.H`normal`:ce.H`getLocalUp(position, origin)`};
          vpos = position;

          gl_Position = transformPosition(proj, view, vpos);
          vnormal = normalize((viewNormal * vec4(normal, 1.0)).xyz);
        }
    `),Ee.code.add(ce.H`void main() {
vec3 normal = normalize(vnormal);
if (gl_FrontFacing == false) {
normal = -normal;
}
gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 0.0);
}`)),Le.output===W.H.Highlight&&(je.include(H.w),je.include(oe.n,Le),je.include(Z.yl,Le),ze.code.add(ce.H`void main() {
setOverlayVTC(uv0);
gl_Position = transformPosition(proj, view, position);
}`),je.include(re.bA),Ee.code.add(ce.H`void main() {
vec4 overlayColor = getCombinedOverlayColor();
if (overlayColor.a == 0.0) {
gl_FragColor = vec4(0.0);
return;
}
outputHighlight();
}`)),je}const Ce=(0,x.c)(),ge=(0,B.c)(),Te=Object.freeze(Object.defineProperty({__proto__:null,TerrainPassParameters:De,build:ve},Symbol.toStringTag,{value:"Module"}))},98361:(qe,xe,T)=>{"use strict";T.d(xe,{T:()=>Y,b:()=>W});var D=T(98071),x=T(66054),w=T(17625),B=T(22355),U=T(66838);function W(){const H=new B.kG;return H.include(D.k),H.fragment.uniforms.add([new U.Q("tex"),new x.y("uColor")]),H.fragment.code.add(w.H`void main() {
vec4 texColor = texture2D(tex, uv);
gl_FragColor = texColor * uColor;
}`),H}const Y=Object.freeze(Object.defineProperty({__proto__:null,build:W},Symbol.toStringTag,{value:"Module"}))},61584:(qe,xe,T)=>{"use strict";T.d(xe,{W:()=>_e,b:()=>me});var D=T(52382),x=T(6945),w=T(78925),B=T(24255),U=T(62952),W=T(44965),Y=T(31166),H=T(10109),G=T(7025),$=T(92724),re=T(56693),ue=T(69117),ae=T(45780),oe=T(67022),ie=T(33726),X=T(2166),Z=T(97139),Q=T(69960),J=T(66054),se=T(65787),ee=T(17625),le=T(46524),ne=T(22355),ce=T(42743),de=T(16396);function me(he){const ye=new ne.kG,{vertex:fe,fragment:De}=ye,ve=(0,X.S)(ye,he);return ye.include(B.w),ye.attributes.add(de.T.POSITION,"vec3"),ye.attributes.add(de.T.UV0,"vec2"),fe.uniforms.add(new Q.N("waterColor",Ce=>Ce.color)),he.output!==x.H.Color&&he.output!==x.H.Alpha||(ye.include(G.n,he),ye.include(D.q,he),ye.varyings.add("vuv","vec2"),ye.varyings.add("vpos","vec3"),ye.varyings.add("vnormal","vec3"),ye.varyings.add("vtbnMatrix","mat3"),De.uniforms.add(ve),he.hasMultipassTerrain&&ye.varyings.add("depth","float"),fe.code.add(ee.H`
      void main(void) {
        if (waterColor.a < ${ee.H.float(oe.b)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vuv = uv0;
        vpos = position;

        vnormal = getLocalUp(vpos, localOrigin);
        vtbnMatrix = getTBNMatrix(vnormal);

        ${he.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}

        gl_Position = transformPosition(proj, view, vpos);
        ${he.output===x.H.Color?"forwardLinearDepth();":""}
      }
    `)),ye.include(H.l,he),he.output===x.H.Alpha&&(ye.include(w.f5,he),De.uniforms.add(new J.y("waterColor")),De.code.add(ee.H`
        void main() {
          discardBySlice(vpos);
          ${he.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

          gl_FragColor = vec4(waterColor.a);
        }
      `)),he.output===x.H.Color&&(ye.include(Y.k,{isGround:!1}),ye.include(W._,{pbrMode:$.f7.Disabled,lightingSphericalHarmonicsOrder:2}),ye.include(ae.M),ye.include(w.f5,he),ye.include(re.XE,he),ye.include(ue.B,he),De.uniforms.add([new J.y("waterColor"),new Z.J("lightingMainDirection",(Ce,ge)=>ge.lighting.lightingMainDirection),new Z.J("lightingMainIntensity",(Ce,ge)=>ge.lighting.mainLight.intensity),new se.p("timeElapsed",Ce=>Ce.timeElapsed),new le.B("view")]),(0,X.h)(De,he),De.include(ie.Y),De.code.add(ee.H`
      void main() {
        discardBySlice(vpos);
        ${he.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
        vec3 localUp = vnormal;
        // the created normal is in tangent space
        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);

        // we rotate the normal according to the tangent-bitangent-normal-Matrix
        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);
        vec3 v = -normalize(vpos - cameraPosition);
        float shadow = ${he.receiveShadows?ee.H`1.0 - readShadowMap(vpos, linearDepth)`:"1.0"};
        vec4 vPosView = view*vec4(vpos, 1.0);
        vec4 final = vec4(getSeaColor(n, v, lightingMainDirection, waterColor.rgb, lightingMainIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz, vpos + localOrigin), waterColor.w);

        // gamma correction
        gl_FragColor = delinearizeGamma(final);
        gl_FragColor = highlightSlice(gl_FragColor, vpos);
        ${he.transparencyPassType===ce.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
      }
    `)),he.output===x.H.Normal&&(ye.include(G.n,he),ye.include(ae.M,he),ye.include(w.f5,he),ye.varyings.add("vpos","vec3"),ye.varyings.add("vuv","vec2"),fe.code.add(ee.H`
        void main(void) {
          if (waterColor.a < ${ee.H.float(oe.b)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vuv = uv0;
          vpos = position;

          gl_Position = transformPosition(proj, view, vpos);
        }
    `),De.uniforms.add(new se.p("timeElapsed",Ce=>Ce.timeElapsed)),De.code.add(ee.H`void main() {
discardBySlice(vpos);
vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);
tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);
gl_FragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);
}`)),he.output===x.H.Draped&&(ye.varyings.add("vpos","vec3"),fe.code.add(ee.H`
        void main(void) {
          if (waterColor.a < ${ee.H.float(oe.b)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vpos = position;
          gl_Position = transformPosition(proj, view, vpos);
        }
    `),De.uniforms.add(new J.y("waterColor")),De.code.add(ee.H`void main() {
gl_FragColor = waterColor;
}`)),he.output===x.H.Highlight&&(ye.include(U.bA),ye.varyings.add("vpos","vec3"),fe.code.add(ee.H`
      void main(void) {
        if (waterColor.a < ${ee.H.float(oe.b)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
      }
    `),ye.include(w.f5,he),De.code.add(ee.H`void main() {
discardBySlice(vpos);
outputHighlight();
}`)),ye}const _e=Object.freeze(Object.defineProperty({__proto__:null,build:me},Symbol.toStringTag,{value:"Module"}))},1719:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>w,c:()=>D,g:()=>x});var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}function w(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},41743:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>X,a:()=>J,b:()=>rt,c:()=>Z,d:()=>Ee,e:()=>Te,f:()=>ee,g:()=>de,h:()=>Ce,i:()=>me,n:()=>Be,r:()=>we,t:()=>Ae,u:()=>le}),T(8314);var x=T(63290),w=T(21286),B=T(97535),U=T(28347),W=T(43703),Y=T(84161),H=T(28093),G=T(78172),$=T(13777),re=T(90014),ue=T(70562),ae=T(34054),oe=T(26242);const ie=x.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class X{constructor(){this.plane=(0,re.Ue)(),this.origin=(0,H.c)(),this.basis1=(0,H.c)(),this.basis2=(0,H.c)()}}function Z(Ze=We){return{plane:(0,re.Ue)(Ze.plane),origin:(0,H.a)(Ze.origin),basis1:(0,H.a)(Ze.basis1),basis2:(0,H.a)(Ze.basis2)}}function J(Ze,lt=Z()){return ee(Ze.origin,Ze.basis1,Ze.basis2,lt)}function ee(Ze,lt,st,Mt=Z()){return(0,Y.c)(Mt.origin,Ze),(0,Y.c)(Mt.basis1,lt),(0,Y.c)(Mt.basis2,st),le(Mt),function Ne(Ze,lt){Math.abs((0,Y.e)(Ze.basis1,Ze.basis2)/((0,Y.l)(Ze.basis1)*(0,Y.l)(Ze.basis2)))>1e-6&&ie.warn(lt,"Provided basis vectors are not perpendicular"),Math.abs((0,Y.e)(Ze.basis1,Be(Ze)))>1e-6&&ie.warn(lt,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,Y.e)(Be(Ze),Ze.origin)-Ze.plane[3])>1e-6&&ie.warn(lt,"Plane offset is not consistent with plane origin")}(Mt,"fromValues()"),Mt}function le(Ze){(0,re.my)(Ze.basis2,Ze.basis1,Ze.origin,Ze.plane)}function ne(Ze,lt,st){Ze!==st&&J(Ze,st);const Mt=(0,Y.g)(oe.WM.get(),Be(Ze),lt);return(0,Y.a)(st.origin,st.origin,Mt),st.plane[3]-=lt,st}function de(Ze,lt=Z()){const st=(Ze[2]-Ze[0])/2,Mt=(Ze[3]-Ze[1])/2;return(0,Y.s)(lt.origin,Ze[0]+st,Ze[1]+Mt,0),(0,Y.s)(lt.basis1,st,0,0),(0,Y.s)(lt.basis2,0,Mt,0),(0,re.al)(0,0,1,0,lt.plane),lt}function me(Ze,lt,st){return!!(0,re.BR)(Ze.plane,lt,st)&&Oe(Ze,st)}function he(Ze,lt,st){const Mt=Se.get();Ie(Ze,lt,Mt,Se.get());let Ft=Number.POSITIVE_INFINITY;for(const kt of nt){const wt=Ve(Ze,kt,He.get()),zt=oe.WM.get();if((0,re.rx)(Mt,wt,zt)){const Zt=(0,Y.r)(oe.WM.get(),lt.origin,zt),ar=Math.abs((0,w.ZF)((0,Y.e)(lt.direction,Zt)));ar<Ft&&(Ft=ar,(0,Y.c)(st,zt))}}return Ft===Number.POSITIVE_INFINITY?ye(Ze,lt,st):st}function ye(Ze,lt,st){if(me(Ze,lt,st))return st;const Mt=Se.get(),Ft=Se.get();Ie(Ze,lt,Mt,Ft);let kt=Number.POSITIVE_INFINITY;for(const wt of nt){const zt=Ve(Ze,wt,He.get()),Zt=oe.WM.get();if((0,re.dZ)(Mt,zt,Zt)){const ar=(0,ue.Jk)(lt,Zt);if(!(0,re.Ac)(Ft,Zt))continue;ar<kt&&(kt=ar,(0,Y.c)(st,Zt))}}return ve(Ze,lt.origin)<kt&&fe(Ze,lt.origin,st),st}function fe(Ze,lt,st){const Mt=(0,re.nF)(Ze.plane,lt,oe.WM.get()),Ft=(0,$.ct)(Ke(Ze,Ze.basis1),Mt,-1,1,oe.WM.get()),kt=(0,$.ct)(Ke(Ze,Ze.basis2),Mt,-1,1,oe.WM.get());return(0,Y.b)(st,(0,Y.a)(oe.WM.get(),Ft,kt),Ze.origin),st}function De(Ze,lt,st){const{origin:Mt,basis1:Ft,basis2:kt}=Ze,wt=(0,Y.b)(oe.WM.get(),lt,Mt),zt=(0,ae.SR)(Ft,wt),Zt=(0,ae.SR)(kt,wt),ar=(0,ae.SR)(Be(Ze),wt);return(0,Y.s)(st,zt,Zt,ar)}function ve(Ze,lt){const st=De(Ze,lt,oe.WM.get()),{basis1:Mt,basis2:Ft}=Ze,kt=(0,Y.l)(Mt),wt=(0,Y.l)(Ft),zt=Math.max(Math.abs(st[0])-kt,0),Zt=Math.max(Math.abs(st[1])-wt,0),ar=st[2];return zt*zt+Zt*Zt+ar*ar}function Ce(Ze,lt){return Math.sqrt(ve(Ze,lt))}function Te(Ze,lt){return(0,re.Ac)(Ze.plane,lt)&&Oe(Ze,lt)}function je(Ze,lt){const st=-Ze.plane[3];return(0,ae.SR)(Be(Ze),lt)-st}function Ee(Ze,lt){return(0,Y.k)(Ze.basis1,lt.basis1)&&(0,Y.k)(Ze.basis2,lt.basis2)&&(0,Y.k)(Ze.origin,lt.origin)}function Ae(Ze,lt,st){return Ze!==st&&J(Ze,st),(0,U.a)(it,lt),(0,U.t)(it,it),(0,Y.m)(st.basis1,Ze.basis1,it),(0,Y.m)(st.basis2,Ze.basis2,it),(0,Y.m)((0,re.mJ)(st.plane),(0,re.mJ)(Ze.plane),it),(0,Y.m)(st.origin,Ze.origin,lt),(0,re.T5)(st.plane,st.plane,st.origin),st}function we(Ze,lt,st,Mt){return Ze!==Mt&&J(Ze,Mt),(0,U.d)(Xe,lt,st),(0,Y.m)(Mt.basis1,Ze.basis1,Xe),(0,Y.m)(Mt.basis2,Ze.basis2,Xe),le(Mt),Mt}function Be(Ze){return(0,re.mJ)(Ze.plane)}function Oe(Ze,lt){const st=(0,Y.b)(oe.WM.get(),lt,Ze.origin),Mt=(0,Y.p)(Ze.basis1),Ft=(0,Y.p)(Ze.basis2),kt=(0,Y.e)(Ze.basis1,st),wt=(0,Y.e)(Ze.basis2,st);return-kt-Mt<0&&kt-Mt<0&&-wt-Ft<0&&wt-Ft<0}function Ke(Ze,lt){const st=He.get();return(0,Y.c)(st.origin,Ze.origin),(0,Y.c)(st.vector,lt),st}function Ve(Ze,lt,st){const{basis1:Mt,basis2:Ft,origin:kt}=Ze,wt=(0,Y.g)(oe.WM.get(),Mt,lt.origin[0]),zt=(0,Y.g)(oe.WM.get(),Ft,lt.origin[1]);(0,Y.a)(st.origin,wt,zt),(0,Y.a)(st.origin,st.origin,kt);const Zt=(0,Y.g)(oe.WM.get(),Mt,lt.direction[0]),ar=(0,Y.g)(oe.WM.get(),Ft,lt.direction[1]);return(0,Y.g)(st.vector,(0,Y.a)(Zt,Zt,ar),2),st}function Ie(Ze,lt,st,Mt){const Ft=Be(Ze);(0,re.my)(Ft,lt.direction,lt.origin,st),(0,re.my)((0,re.mJ)(st),Ft,lt.origin,Mt)}const We={plane:(0,re.Ue)(),origin:(0,H.f)(0,0,0),basis1:(0,H.f)(1,0,0),basis2:(0,H.f)(0,1,0)},Se=new B.x(re.Ue),He=new B.x($.Ue),$e=(0,H.c)(),et=new B.x(()=>({origin:null,basis1:null,basis2:null,plane:null})),nt=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],it=(0,W.c)(),Xe=(0,W.c)(),rt=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:X,create:Z,wrap:function Q(Ze,lt,st){const Mt=et.get();return Mt.origin=Ze,Mt.basis1=lt,Mt.basis2=st,Mt.plane=(0,re.re)(0,0,0,0),le(Mt),Mt},copy:J,copyWithoutVerify:function se(Ze,lt){(0,Y.c)(lt.origin,Ze.origin),(0,Y.c)(lt.basis1,Ze.basis1),(0,Y.c)(lt.basis2,Ze.basis2),(0,re.JG)(lt.plane,Ze.plane)},fromValues:ee,updateUnboundedPlane:le,elevate:ne,setExtent:function ce(Ze,lt,st){return de(lt,st),ne(st,je(Ze,Ze.origin),st),st},fromAABoundingRect:de,intersectRay:me,intersectRayClosestSilhouette:function _e(Ze,lt,st){if(me(Ze,lt,st))return st;const Mt=he(Ze,lt,oe.WM.get());return(0,Y.a)(st,lt.origin,(0,Y.g)(oe.WM.get(),lt.direction,(0,Y.i)(lt.origin,Mt)/(0,Y.l)(lt.direction))),st},closestPointOnSilhouette:he,closestPoint:ye,projectPoint:fe,projectPointLocal:De,distance2:ve,distance:Ce,distanceToSilhouette:function ge(Ze,lt){let st=Number.NEGATIVE_INFINITY;for(const Mt of nt){const Ft=Ve(Ze,Mt,He.get()),kt=(0,$.Jk)(Ft,lt);kt>st&&(st=kt)}return Math.sqrt(st)},extrusionContainsPoint:Te,axisAt:function Le(Ze,lt,st,Mt){return function Pe(Ze,lt,st){switch(lt){case G.R.X:(0,Y.c)(st,Ze.basis1),(0,Y.n)(st,st);break;case G.R.Y:(0,Y.c)(st,Ze.basis2),(0,Y.n)(st,st);break;case G.R.Z:(0,Y.c)(st,Be(Ze))}return st}(Ze,st,Mt)},altitudeAt:je,setAltitudeAt:function ze(Ze,lt,st,Mt){const Ft=je(Ze,lt),kt=(0,Y.g)($e,Be(Ze),st-Ft);return(0,Y.a)(Mt,lt,kt),Mt},equals:Ee,transform:Ae,rotate:we,normal:Be,UP:We},Symbol.toStringTag,{value:"Module"}))},39863:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>D,R:()=>x,t:()=>U});const D=1e-6,x=Math.random,w=Math.PI/180,B=180/Math.PI;function U(G){return G*w}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:D,RANDOM:x,toRadian:U,toDegree:function W(G){return G*B},equals:function Y(G,$){return Math.abs(G-$)<=D*Math.max(1,Math.abs(G),Math.abs($))}},Symbol.toStringTag,{value:"Module"}))},11915:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>U});var D,w,B={exports:{}};D=B,void 0!==(w=function(){function W(Ee,Ae,we){we=we||2;var Be,Pe,Oe,Ke,Ve,Ne,Ie,We=Ae&&Ae.length,Se=We?Ae[0]*we:Ee.length,He=Y(Ee,0,Se,we,!0),$e=[];if(!He||He.next===He.prev)return $e;if(We&&(He=function oe(Ee,Ae,we,Be){var Pe,Oe,Ke,Ve=[];for(Pe=0,Oe=Ae.length;Pe<Oe;Pe++)(Ke=Y(Ee,Ae[Pe]*Be,Pe<Oe-1?Ae[Pe+1]*Be:Ee.length,Be,!1))===Ke.next&&(Ke.steiner=!0),Ve.push(ne(Ke));for(Ve.sort(ie),Pe=0;Pe<Ve.length;Pe++)we=H(we=Z(Ve[Pe],we),we.next);return we}(Ee,Ae,He,we)),Ee.length>80*we){Be=Oe=Ee[0],Pe=Ke=Ee[1];for(var et=we;et<Se;et+=we)(Ve=Ee[et])<Be&&(Be=Ve),(Ne=Ee[et+1])<Pe&&(Pe=Ne),Ve>Oe&&(Oe=Ve),Ne>Ke&&(Ke=Ne);Ie=0!==(Ie=Math.max(Oe-Be,Ke-Pe))?1/Ie:0}return G(He,$e,we,Be,Pe,Ie),$e}function Y(Ee,Ae,we,Be,Pe){var Oe,Ke;if(Pe===ze(Ee,Ae,we,Be)>0)for(Oe=Ae;Oe<we;Oe+=Be)Ke=Te(Oe,Ee[Oe],Ee[Oe+1],Ke);else for(Oe=we-Be;Oe>=Ae;Oe-=Be)Ke=Te(Oe,Ee[Oe],Ee[Oe+1],Ke);if(Ke&&_e(Ke,Ke.next)){var Ve=Ke.next;Le(Ke),Ke=Ve}return Ke}function H(Ee,Ae){if(!Ee)return Ee;Ae||(Ae=Ee);var we,Be=Ee;do{if(we=!1,Be.steiner||!_e(Be,Be.next)&&0!==me(Be.prev,Be,Be.next))Be=Be.next;else{var Pe=Be.prev;if(Le(Be),(Be=Ae=Pe)===Be.next)break;we=!0}}while(we||Be!==Ae);return Ae}function G(Ee,Ae,we,Be,Pe,Oe,Ke){if(Ee){!Ke&&Oe&&function se(Ee,Ae,we,Be){var Pe=Ee;do{null===Pe.z&&(Pe.z=le(Pe.x,Pe.y,Ae,we,Be)),Pe.prevZ=Pe.prev,Pe.nextZ=Pe.next,Pe=Pe.next}while(Pe!==Ee);Pe.prevZ.nextZ=null,Pe.prevZ=null,function ee(Ee){var Ae,we,Be,Pe,Oe,Ke,Ve,Ne,Ie=1;do{for(we=Ee,Ee=null,Oe=null,Ke=0;we;){for(Ke++,Be=we,Ve=0,Ae=0;Ae<Ie&&(Ve++,Be=Be.nextZ);Ae++);for(Ne=Ie;Ve>0||Ne>0&&Be;)0!==Ve&&(0===Ne||!Be||we.z<=Be.z)?(Pe=we,we=we.nextZ,Ve--):(Pe=Be,Be=Be.nextZ,Ne--),Oe?Oe.nextZ=Pe:Ee=Pe,Pe.prevZ=Oe,Oe=Pe;we=Be}Oe.nextZ=null,Ie*=2}while(Ke>1)}(Pe)}(Ee,Be,Pe,Oe);for(var Ve,Ne,Ie=Ee;Ee.prev!==Ee.next;)if(Ve=Ee.prev,Ne=Ee.next,Oe?re(Ee,Be,Pe,Oe):$(Ee))Ae.push(Ve.i/we),Ae.push(Ee.i/we),Ae.push(Ne.i/we),Le(Ee),Ee=Ne.next,Ie=Ne.next;else if((Ee=Ne)===Ie){Ke?1===Ke?G(Ee=ue(H(Ee),Ae,we),Ae,we,Be,Pe,Oe,2):2===Ke&&ae(Ee,Ae,we,Be,Pe,Oe):G(H(Ee),Ae,we,Be,Pe,Oe,1);break}}}function $(Ee){var Ae=Ee.prev,we=Ee,Be=Ee.next;if(me(Ae,we,Be)>=0)return!1;for(var Pe=Ee.next.next;Pe!==Ee.prev;){if(ce(Ae.x,Ae.y,we.x,we.y,Be.x,Be.y,Pe.x,Pe.y)&&me(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.next}return!0}function re(Ee,Ae,we,Be){var Pe=Ee.prev,Oe=Ee,Ke=Ee.next;if(me(Pe,Oe,Ke)>=0)return!1;for(var Ie=Pe.x>Oe.x?Pe.x>Ke.x?Pe.x:Ke.x:Oe.x>Ke.x?Oe.x:Ke.x,We=Pe.y>Oe.y?Pe.y>Ke.y?Pe.y:Ke.y:Oe.y>Ke.y?Oe.y:Ke.y,Se=le(Pe.x<Oe.x?Pe.x<Ke.x?Pe.x:Ke.x:Oe.x<Ke.x?Oe.x:Ke.x,Pe.y<Oe.y?Pe.y<Ke.y?Pe.y:Ke.y:Oe.y<Ke.y?Oe.y:Ke.y,Ae,we,Be),He=le(Ie,We,Ae,we,Be),$e=Ee.prevZ,et=Ee.nextZ;$e&&$e.z>=Se&&et&&et.z<=He;){if($e!==Ee.prev&&$e!==Ee.next&&ce(Pe.x,Pe.y,Oe.x,Oe.y,Ke.x,Ke.y,$e.x,$e.y)&&me($e.prev,$e,$e.next)>=0||($e=$e.prevZ,et!==Ee.prev&&et!==Ee.next&&ce(Pe.x,Pe.y,Oe.x,Oe.y,Ke.x,Ke.y,et.x,et.y)&&me(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;$e&&$e.z>=Se;){if($e!==Ee.prev&&$e!==Ee.next&&ce(Pe.x,Pe.y,Oe.x,Oe.y,Ke.x,Ke.y,$e.x,$e.y)&&me($e.prev,$e,$e.next)>=0)return!1;$e=$e.prevZ}for(;et&&et.z<=He;){if(et!==Ee.prev&&et!==Ee.next&&ce(Pe.x,Pe.y,Oe.x,Oe.y,Ke.x,Ke.y,et.x,et.y)&&me(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function ue(Ee,Ae,we){var Be=Ee;do{var Pe=Be.prev,Oe=Be.next.next;!_e(Pe,Oe)&&he(Pe,Be,Be.next,Oe)&&ve(Pe,Oe)&&ve(Oe,Pe)&&(Ae.push(Pe.i/we),Ae.push(Be.i/we),Ae.push(Oe.i/we),Le(Be),Le(Be.next),Be=Ee=Oe),Be=Be.next}while(Be!==Ee);return H(Be)}function ae(Ee,Ae,we,Be,Pe,Oe){var Ke=Ee;do{for(var Ve=Ke.next.next;Ve!==Ke.prev;){if(Ke.i!==Ve.i&&de(Ke,Ve)){var Ne=ge(Ke,Ve);return Ke=H(Ke,Ke.next),Ne=H(Ne,Ne.next),G(Ke,Ae,we,Be,Pe,Oe),void G(Ne,Ae,we,Be,Pe,Oe)}Ve=Ve.next}Ke=Ke.next}while(Ke!==Ee)}function ie(Ee,Ae){return Ee.x-Ae.x}function X(Ee){if(Ee.next.prev===Ee)return Ee;let Ae=Ee;for(;;){const we=Ae.next;if(we.prev===Ae||we===Ae||we===Ee)break;Ae=we}return Ae}function Z(Ee,Ae){var we=function Q(Ee,Ae){var we,Be=Ae,Pe=Ee.x,Oe=Ee.y,Ke=-1/0;do{if(Oe<=Be.y&&Oe>=Be.next.y&&Be.next.y!==Be.y){var Ve=Be.x+(Oe-Be.y)*(Be.next.x-Be.x)/(Be.next.y-Be.y);if(Ve<=Pe&&Ve>Ke){if(Ke=Ve,Ve===Pe){if(Oe===Be.y)return Be;if(Oe===Be.next.y)return Be.next}we=Be.x<Be.next.x?Be:Be.next}}Be=Be.next}while(Be!==Ae);if(!we)return null;if(Pe===Ke)return we;var Ne,Ie=we,We=we.x,Se=we.y,He=1/0;Be=we;do{Pe>=Be.x&&Be.x>=We&&Pe!==Be.x&&ce(Oe<Se?Pe:Ke,Oe,We,Se,Oe<Se?Ke:Pe,Oe,Be.x,Be.y)&&(Ne=Math.abs(Oe-Be.y)/(Pe-Be.x),ve(Be,Ee)&&(Ne<He||Ne===He&&(Be.x>we.x||Be.x===we.x&&J(we,Be)))&&(we=Be,He=Ne)),Be=Be.next}while(Be!==Ie);return we}(Ee,Ae);if(!we)return Ae;var Be=ge(we,Ee),Pe=H(we,we.next);let Oe=X(Be);return H(Oe,Oe.next),Pe=X(Pe),X(Ae===we?Pe:Ae)}function J(Ee,Ae){return me(Ee.prev,Ee,Ae.prev)<0&&me(Ae.next,Ee,Ee.next)<0}function le(Ee,Ae,we,Be,Pe){return(Ee=1431655765&((Ee=858993459&((Ee=252645135&((Ee=16711935&((Ee=32767*(Ee-we)*Pe)|Ee<<8))|Ee<<4))|Ee<<2))|Ee<<1))|(Ae=1431655765&((Ae=858993459&((Ae=252645135&((Ae=16711935&((Ae=32767*(Ae-Be)*Pe)|Ae<<8))|Ae<<4))|Ae<<2))|Ae<<1))<<1}function ne(Ee){var Ae=Ee,we=Ee;do{(Ae.x<we.x||Ae.x===we.x&&Ae.y<we.y)&&(we=Ae),Ae=Ae.next}while(Ae!==Ee);return we}function ce(Ee,Ae,we,Be,Pe,Oe,Ke,Ve){return(Pe-Ke)*(Ae-Ve)-(Ee-Ke)*(Oe-Ve)>=0&&(Ee-Ke)*(Be-Ve)-(we-Ke)*(Ae-Ve)>=0&&(we-Ke)*(Oe-Ve)-(Pe-Ke)*(Be-Ve)>=0}function de(Ee,Ae){return Ee.next.i!==Ae.i&&Ee.prev.i!==Ae.i&&!function De(Ee,Ae){var we=Ee;do{if(we.i!==Ee.i&&we.next.i!==Ee.i&&we.i!==Ae.i&&we.next.i!==Ae.i&&he(we,we.next,Ee,Ae))return!0;we=we.next}while(we!==Ee);return!1}(Ee,Ae)&&(ve(Ee,Ae)&&ve(Ae,Ee)&&function Ce(Ee,Ae){var we=Ee,Be=!1,Pe=(Ee.x+Ae.x)/2,Oe=(Ee.y+Ae.y)/2;do{we.y>Oe!=we.next.y>Oe&&we.next.y!==we.y&&Pe<(we.next.x-we.x)*(Oe-we.y)/(we.next.y-we.y)+we.x&&(Be=!Be),we=we.next}while(we!==Ee);return Be}(Ee,Ae)&&(me(Ee.prev,Ee,Ae.prev)||me(Ee,Ae.prev,Ae))||_e(Ee,Ae)&&me(Ee.prev,Ee,Ee.next)>0&&me(Ae.prev,Ae,Ae.next)>0)}function me(Ee,Ae,we){return(Ae.y-Ee.y)*(we.x-Ae.x)-(Ae.x-Ee.x)*(we.y-Ae.y)}function _e(Ee,Ae){return Ee.x===Ae.x&&Ee.y===Ae.y}function he(Ee,Ae,we,Be){var Pe=fe(me(Ee,Ae,we)),Oe=fe(me(Ee,Ae,Be)),Ke=fe(me(we,Be,Ee)),Ve=fe(me(we,Be,Ae));return Pe!==Oe&&Ke!==Ve||!(0!==Pe||!ye(Ee,we,Ae))||!(0!==Oe||!ye(Ee,Be,Ae))||!(0!==Ke||!ye(we,Ee,Be))||!(0!==Ve||!ye(we,Ae,Be))}function ye(Ee,Ae,we){return Ae.x<=Math.max(Ee.x,we.x)&&Ae.x>=Math.min(Ee.x,we.x)&&Ae.y<=Math.max(Ee.y,we.y)&&Ae.y>=Math.min(Ee.y,we.y)}function fe(Ee){return Ee>0?1:Ee<0?-1:0}function ve(Ee,Ae){return me(Ee.prev,Ee,Ee.next)<0?me(Ee,Ae,Ee.next)>=0&&me(Ee,Ee.prev,Ae)>=0:me(Ee,Ae,Ee.prev)<0||me(Ee,Ee.next,Ae)<0}function ge(Ee,Ae){var we=new je(Ee.i,Ee.x,Ee.y),Be=new je(Ae.i,Ae.x,Ae.y),Pe=Ee.next,Oe=Ae.prev;return Ee.next=Ae,Ae.prev=Ee,we.next=Pe,Pe.prev=we,Be.next=we,we.prev=Be,Oe.next=Be,Be.prev=Oe,Be}function Te(Ee,Ae,we,Be){var Pe=new je(Ee,Ae,we);return Be?(Pe.next=Be.next,Pe.prev=Be,Be.next.prev=Pe,Be.next=Pe):(Pe.prev=Pe,Pe.next=Pe),Pe}function Le(Ee){Ee.next.prev=Ee.prev,Ee.prev.next=Ee.next,Ee.prevZ&&(Ee.prevZ.nextZ=Ee.nextZ),Ee.nextZ&&(Ee.nextZ.prevZ=Ee.prevZ)}function je(Ee,Ae,we){this.i=Ee,this.x=Ae,this.y=we,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ze(Ee,Ae,we,Be){for(var Pe=0,Oe=Ae,Ke=we-Be;Oe<we;Oe+=Be)Pe+=(Ee[Ke]-Ee[Oe])*(Ee[Oe+1]+Ee[Ke+1]),Ke=Oe;return Pe}return W.deviation=function(Ee,Ae,we,Be){var Pe=Ae&&Ae.length,Ke=Math.abs(ze(Ee,0,Pe?Ae[0]*we:Ee.length,we));if(Pe)for(var Ve=0,Ne=Ae.length;Ve<Ne;Ve++)Ke-=Math.abs(ze(Ee,Ae[Ve]*we,Ve<Ne-1?Ae[Ve+1]*we:Ee.length,we));var Se=0;for(Ve=0;Ve<Be.length;Ve+=3){var He=Be[Ve]*we,$e=Be[Ve+1]*we,et=Be[Ve+2]*we;Se+=Math.abs((Ee[He]-Ee[et])*(Ee[$e+1]-Ee[He+1])-(Ee[He]-Ee[$e])*(Ee[et+1]-Ee[He+1]))}return 0===Ke&&0===Se?0:Math.abs((Se-Ke)/Ke)},W.flatten=function(Ee){for(var Ae=Ee[0][0].length,we={vertices:[],holes:[],dimensions:Ae},Be=0,Pe=0;Pe<Ee.length;Pe++){for(var Oe=0;Oe<Ee[Pe].length;Oe++)for(var Ke=0;Ke<Ae;Ke++)we.vertices.push(Ee[Pe][Oe][Ke]);Pe>0&&we.holes.push(Be+=Ee[Pe-1].length)}return we},W}())&&(D.exports=w);const U=B.exports},47562:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>wt,A:()=>Mt,B:()=>Le,C:()=>ve,D:()=>Ie,E:()=>Ze,F:()=>Oe,G:()=>Ft,H:()=>Pr,I:()=>ne,J:()=>os,K:()=>ss,L:()=>Hr,M:()=>ye,N:()=>le,O:()=>Ke,P:()=>Tr,Q:()=>Jr,R:()=>ce,S:()=>de,T:()=>Gr,U:()=>ns,V:()=>lr,W:()=>et,X:()=>$t,Y:()=>pt,Z:()=>zt,_:()=>kt,a:()=>Te,b:()=>Ce,c:()=>_r,d:()=>vr,e:()=>De,f:()=>Xe,g:()=>st,h:()=>$e,i:()=>ge,j:()=>Be,k:()=>rt,l:()=>je,m:()=>He,n:()=>we,o:()=>fe,p:()=>Pe,q:()=>Se,r:()=>Xt,s:()=>ze,t:()=>nt,u:()=>zr,v:()=>me,w:()=>_e,x:()=>he,y:()=>Ee,z:()=>Ae});var D=T(15861),x=T(7652),w=T(98362),B=T(5371),U=T(26685),W=T(2004),Y=T(21674),H=T(72854),G=T(49672),$=T(37118),re=T(55214),ue=T(27122),ae=T(62208),oe=T(75327),ie=T(25748),X=T(56683),Z=T(77132);class Q{constructor(sr){this.value=sr}}class J{constructor(sr){this.value=sr}}class se{constructor(sr){this.fn=sr}}class ee{constructor(sr,Rr){this.paramCount=Rr,this.fn=sr}}const le=se,ne=J,ce=Q,de=ee,me={type:"VOID"},_e={type:"BREAK"},he={type:"CONTINUE"};function ye(Tt,sr,Rr){return""===sr||null==sr||sr===Rr||sr===Rr?Tt:Tt=Tt.split(sr).join(Rr)}function fe(Tt){return Tt instanceof se||Tt instanceof x.Z||Tt instanceof ee}function De(Tt){return!!(Ce(Tt)||Te(Tt)||Be(Tt)||ge(Tt)||null===Tt||Tt===me||"number"==typeof Tt)}function ve(Tt,sr){return void 0===Tt?sr:Tt}function Ce(Tt){return"string"==typeof Tt||Tt instanceof String}function ge(Tt){return"boolean"==typeof Tt}function Te(Tt){return"number"==typeof Tt}function Le(Tt){return"number"==typeof Tt&&isFinite(Tt)&&Math.floor(Tt)===Tt}function je(Tt){return Tt instanceof Array}function ze(Tt){return"esri.arcade.Feature"===Tt?.arcadeDeclaredClass}function Ee(Tt){return!0===(Tt&&Tt.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===Tt.declaredRootClass)}function Ae(Tt){return!0===(Tt&&Tt.declaredRootClass&&"esri.arcade.featureSetCollection"===Tt.declaredRootClass)}function we(Tt){return Tt instanceof w.Z}function Be(Tt){return Tt instanceof Date}function Pe(Tt,sr,Rr){if(Tt.length<sr||Tt.length>Rr)throw new Error("Function called with wrong number of Parameters")}function Oe(Tt){return Tt<0?-Math.round(-Tt):Math.round(Tt)}function Ke(){let Tt=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(sr){const Rr=(Tt+16*Math.random())%16|0;return Tt=Math.floor(Tt/16),("x"===sr?Rr:3&Rr|8).toString(16)})}function Ve(Tt,sr){return!1===isNaN(Tt)?null==sr||""===sr?Tt.toString():(sr=ye(sr,"\u2030",""),sr=ye(sr,"\xa4",""),(0,oe.WU)(Tt,{pattern:sr})):Tt.toString()}function Ne(Tt,sr){const Rr=ue.ou.fromJSDate(Tt);return null==sr||""===sr?Rr.toISO({suppressMilliseconds:!0}):Rr.toFormat(Ie(sr),{locale:(0,X.Kd)(),numberingSystem:"latn"})}function Ie(Tt){Tt=Tt.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let sr="";const Rr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const bt of Tt.match(Rr))switch(bt){case"D":sr+="d";break;case"DD":sr+="dd";break;case"DDD":sr+="o";break;case"d":sr+="c";break;case"ddd":sr+="ccc";break;case"dddd":sr+="cccc";break;case"M":sr+="L";break;case"MM":sr+="LL";break;case"MMM":sr+="LLL";break;case"MMMM":sr+="LLLL";break;case"YY":sr+="yy";break;case"Y":case"YYYY":sr+="yyyy";break;case"Q":sr+="q";break;case"Z":sr+="ZZ";break;case"ZZ":sr+="ZZZ";break;case"S":sr+="'S'";break;case"SS":sr+="'SS'";break;case"SSS":sr+="u";break;case"A":case"a":sr+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":sr+=bt;break;default:bt.length>=2&&"["===bt.slice(0,1)&&"]"===bt.slice(-1)?sr+=`'${bt.slice(1,-1)}'`:sr+=`'${bt}'`}return sr}function We(Tt,sr,Rr){switch(Rr){case">":return Tt>sr;case"<":return Tt<sr;case">=":return Tt>=sr;case"<=":return Tt<=sr}return!1}function Se(Tt,sr,Rr){if(null===Tt){if(null===sr||sr===me)return We(null,null,Rr);if(Te(sr))return We(0,sr,Rr);if(Ce(sr)||ge(sr))return We(0,Xe(sr),Rr);if(Be(sr))return We(0,sr.getTime(),Rr)}if(Tt===me){if(null===sr||sr===me)return We(null,null,Rr);if(Te(sr))return We(0,sr,Rr);if(Ce(sr)||ge(sr))return We(0,Xe(sr),Rr);if(Be(sr))return We(0,sr.getTime(),Rr)}else if(Te(Tt)){if(Te(sr))return We(Tt,sr,Rr);if(ge(sr))return We(Tt,Xe(sr),Rr);if(null===sr||sr===me)return We(Tt,0,Rr);if(Ce(sr))return We(Tt,Xe(sr),Rr);if(Be(sr))return We(Tt,sr.getTime(),Rr)}else if(Ce(Tt)){if(Ce(sr))return We($e(Tt),$e(sr),Rr);if(Be(sr))return We(Xe(Tt),sr.getTime(),Rr);if(Te(sr))return We(Xe(Tt),sr,Rr);if(null===sr||sr===me)return We(Xe(Tt),0,Rr);if(ge(sr))return We(Xe(Tt),Xe(sr),Rr)}else if(Be(Tt)){if(Be(sr))return We(Tt,sr,Rr);if(null===sr||sr===me)return We(Tt.getTime(),0,Rr);if(Te(sr))return We(Tt.getTime(),sr,Rr);if(ge(sr)||Ce(sr))return We(Tt.getTime(),Xe(sr),Rr)}else if(ge(Tt)){if(ge(sr))return We(Tt,sr,Rr);if(Te(sr))return We(Xe(Tt),Xe(sr),Rr);if(Be(sr))return We(Xe(Tt),sr.getTime(),Rr);if(null===sr||sr===me)return We(Xe(Tt),0,Rr);if(Ce(sr))return We(Xe(Tt),Xe(sr),Rr)}return!!He(Tt,sr)&&("<="===Rr||">="===Rr)}function He(Tt,sr){if(Tt===sr||null===Tt&&sr===me||null===sr&&Tt===me)return!0;if(Be(Tt)&&Be(sr))return Tt.getTime()===sr.getTime();if(Tt instanceof B.Z||Tt instanceof U.Z)return Tt.equalityTest(sr);if(Tt instanceof G.Z&&sr instanceof G.Z){const Rr=Tt.cache._arcadeCacheId,bt=sr.cache._arcadeCacheId;if(null!=Rr)return Rr===bt}return void 0!==Tt&&void 0!==sr&&null!==Tt&&null!==sr&&"object"==typeof Tt&&"object"==typeof sr&&(Tt._arcadeCacheId===sr._arcadeCacheId&&null!=Tt._arcadeCacheId||Tt._underlyingGraphic===sr._underlyingGraphic&&null!=Tt._underlyingGraphic)}function $e(Tt,sr){if(Ce(Tt))return Tt;if(null===Tt)return"";if(Te(Tt))return Ve(Tt,sr);if(ge(Tt))return Tt.toString();if(Be(Tt))return Ne(Tt,sr);if(Tt instanceof Y.Z)return JSON.stringify(Tt.toJSON());if(je(Tt)){const Rr=[];for(let bt=0;bt<Tt.length;bt++)Rr[bt]=it(Tt[bt]);return"["+Rr.join(",")+"]"}if(Tt instanceof w.Z){const Rr=[];for(let bt=0;bt<Tt.length();bt++)Rr[bt]=it(Tt.get(bt));return"["+Rr.join(",")+"]"}return null!==Tt&&"object"==typeof Tt&&void 0!==Tt.castToText?Tt.castToText():fe(Tt)?"object, Function":""}function et(Tt){const sr=[];if(!1===je(Tt))return null;if(Tt instanceof w.Z){for(let Rr=0;Rr<Tt.length();Rr++)sr[Rr]=Xe(Tt.get(Rr));return sr}for(let Rr=0;Rr<Tt.length;Rr++)sr[Rr]=Xe(Tt[Rr]);return sr}function nt(Tt,sr){if(Ce(Tt))return Tt;if(null===Tt)return"";if(Te(Tt))return Ve(Tt,sr);if(ge(Tt))return Tt.toString();if(Be(Tt))return Ne(Tt,sr);if(Tt instanceof Y.Z)return Tt instanceof W.Z?'{"xmin":'+Tt.xmin.toString()+',"ymin":'+Tt.ymin.toString()+","+(Tt.hasZ?'"zmin":'+Tt.zmin.toString()+",":"")+(Tt.hasM?'"mmin":'+Tt.mmin.toString()+",":"")+'"xmax":'+Tt.xmax.toString()+',"ymax":'+Tt.ymax.toString()+","+(Tt.hasZ?'"zmax":'+Tt.zmax.toString()+",":"")+(Tt.hasM?'"mmax":'+Tt.mmax.toString()+",":"")+'"spatialReference":'+ar(Tt.spatialReference)+"}":ar(Tt.toJSON(),(Rr,bt)=>Rr.key===bt.key?0:"spatialReference"===Rr.key?1:"spatialReference"===bt.key||Rr.key<bt.key?-1:Rr.key>bt.key?1:0);if(je(Tt)){const Rr=[];for(let bt=0;bt<Tt.length;bt++)Rr[bt]=it(Tt[bt]);return"["+Rr.join(",")+"]"}if(Tt instanceof w.Z){const Rr=[];for(let bt=0;bt<Tt.length();bt++)Rr[bt]=it(Tt.get(bt));return"["+Rr.join(",")+"]"}return null!==Tt&&"object"==typeof Tt&&void 0!==Tt.castToText?Tt.castToText():fe(Tt)?"object, Function":""}function it(Tt){if(null===Tt)return"null";if(ge(Tt)||Te(Tt)||Ce(Tt))return JSON.stringify(Tt);if(Tt instanceof Y.Z||Tt instanceof w.Z||Tt instanceof Array)return nt(Tt);if(Tt instanceof Date)return JSON.stringify(Ne(Tt,""));if(null!==Tt&&"object"==typeof Tt){if(void 0!==Tt.castToText)return Tt.castToText()}else if(Tt===me)return"null";return"null"}function Xe(Tt,sr){return Te(Tt)?Tt:null===Tt||""===Tt?0:Be(Tt)?NaN:ge(Tt)?Tt?1:0:je(Tt)||""===Tt||void 0===Tt?NaN:void 0!==sr&&Ce(Tt)?(sr=ye(sr,"\u2030",""),sr=ye(sr,"\xa4",""),(0,oe.Qc)(Tt,{pattern:sr})):Tt===me?0:Number(Tt)}function rt(Tt){if(Be(Tt))return Tt;if(Ce(Tt)){const sr=lt(Tt);if(sr)return sr.toJSDate()}return null}function Ze(Tt){return Be(Tt)?ue.ou.fromJSDate(Tt):Ce(Tt)?lt(Tt):null}function lt(Tt){const sr=/ (\d\d)/;let Rr=ue.ou.fromISO(Tt);return Rr.isValid||sr.test(Tt)&&(Tt=Tt.replace(sr,"T$1"),Rr=ue.ou.fromISO(Tt),Rr.isValid)?Rr:null}function st(Tt){return ge(Tt)?Tt:Ce(Tt)?"true"===(Tt=Tt.toLowerCase()):!!Te(Tt)&&0!==Tt&&!isNaN(Tt)}function Mt(Tt,sr){return(0,ae.Wi)(Tt)?null:(null!=Tt.spatialReference||(Tt.spatialReference=sr),Tt)}function Ft(Tt){if(null===Tt)return null;if(Tt instanceof G.Z)return"NaN"===Tt.x||null===Tt.x||isNaN(Tt.x)?null:Tt;if(Tt instanceof $.Z){if(0===Tt.rings.length)return null;for(const sr of Tt.rings)if(sr.length>0)return Tt;return null}if(Tt instanceof re.Z){if(0===Tt.paths.length)return null;for(const sr of Tt.paths)if(sr.length>0)return Tt;return null}return Tt instanceof H.Z?0===Tt.points.length?null:Tt:Tt instanceof W.Z?"NaN"===Tt.xmin||null===Tt.xmin||isNaN(Tt.xmin)?null:Tt:null}function kt(Tt,sr){if(!Tt||!Tt.domain)return sr;let Rr=null;if("string"===Tt.field.type||"esriFieldTypeString"===Tt.field.type)sr=$e(sr);else{if(null==sr)return null;if(""===sr)return sr;sr=Xe(sr)}for(let bt=0;bt<Tt.domain.codedValues.length;bt++){const Qt=Tt.domain.codedValues[bt];Qt.code===sr&&(Rr=Qt)}return null===Rr?sr:Rr.name}function wt(Tt,sr){if(!Tt||!Tt.domain)return sr;let Rr=null;sr=$e(sr);for(let bt=0;bt<Tt.domain.codedValues.length;bt++){const Qt=Tt.domain.codedValues[bt];Qt.name===sr&&(Rr=Qt)}return null===Rr?sr:Rr.code}function zt(Tt,sr,Rr=null,bt=null){if(!sr||!sr.fields)return null;let Qt,qt,yr=null;for(let jr=0;jr<sr.fields.length;jr++){const es=sr.fields[jr];es.name.toLowerCase()===Tt.toString().toLowerCase()&&(yr=es)}if(null===yr)throw new Error("Field not found");return null===bt&&Rr&&sr.typeIdField&&(bt=Rr.hasField(sr.typeIdField)?Rr.field(sr.typeIdField):null),null!=bt&&sr.types.some(function(jr){return jr.id===bt&&(Qt=jr.domains&&jr.domains[yr.name],Qt&&"inherited"===Qt.type&&(Qt=Zt(yr.name,sr),qt=!0),!0)}),qt||Qt||(Qt=Zt(Tt,sr)),{field:yr,domain:Qt}}function Zt(Tt,sr){let Rr;return sr.fields.some(function(bt){return bt.name.toLowerCase()===Tt.toLowerCase()&&(Rr=bt.domain),!!Rr}),Rr}function ar(Tt,sr){sr||(sr={}),"function"==typeof sr&&(sr={cmp:sr});const Rr="boolean"==typeof sr.cycles&&sr.cycles,bt=sr.cmp&&(Qt=sr.cmp,function(yr){return function(jr,es){return Qt({key:jr,value:yr[jr]},{key:es,value:yr[es]})}});var Qt;const qt=[];return function yr(jr){if(jr&&jr.toJSON&&"function"==typeof jr.toJSON&&(jr=jr.toJSON()),void 0===jr)return;if("number"==typeof jr)return isFinite(jr)?""+jr:"null";if("object"!=typeof jr)return JSON.stringify(jr);let es,hs;if(Array.isArray(jr)){for(hs="[",es=0;es<jr.length;es++)es&&(hs+=","),hs+=yr(jr[es])||"null";return hs+"]"}if(null===jr)return"null";if(qt.includes(jr)){if(Rr)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Is=qt.push(jr)-1,Yr=Object.keys(jr).sort(bt&&bt(jr));for(hs="",es=0;es<Yr.length;es++){const Rs=Yr[es],Zi=yr(jr[Rs]);Zi&&(hs&&(hs+=","),hs+=JSON.stringify(Rs)+":"+Zi)}return qt.splice(Is,1),"{"+hs+"}"}(Tt)}function Pr(Tt){if(null===Tt)return null;const sr=[];for(const Rr of Tt)sr.push(Rr&&Rr.arcadeDeclaredClass&&"esri.arcade.Feature"===Rr.arcadeDeclaredClass?Rr.geometry():Rr);return sr}function kr(Tt,sr){if(!(sr instanceof G.Z))throw new Error("Invalid Argument");Tt.push(sr.hasZ?sr.hasM?[sr.x,sr.y,sr.z,sr.m]:[sr.x,sr.y,sr.z]:[sr.x,sr.y])}function ss(Tt,sr){if(je(Tt)||we(Tt)){let Rr=!1,bt=!1,Qt=[],qt=sr;if(je(Tt)){for(const yr of Tt)kr(Qt,yr);Qt.length>0&&(qt=Tt[0].spatialReference,Rr=Tt[0].hasZ,bt=Tt[0].hasM)}else if(Tt instanceof U.Z)Qt=Tt._elements,Qt.length>0&&(Rr=Tt._hasZ,bt=Tt._hasM,qt=Tt.get(0).spatialReference);else{if(!we(Tt))throw new Error("Invalid Argument");for(const yr of Tt.toArray())kr(Qt,yr);Qt.length>0&&(qt=Tt.get(0).spatialReference,Rr=!0===Tt.get(0).hasZ,bt=!0===Tt.get(0).hasM)}return 0===Qt.length?null:(!1===(0,ie.bu)(Qt,bt,Rr)&&(Qt=Qt.slice(0).reverse()),new $.Z({rings:[Qt],spatialReference:qt,hasZ:Rr,hasM:bt}))}return Tt}function os(Tt,sr){if(je(Tt)||we(Tt)){let Rr=!1,bt=!1,Qt=[],qt=sr;if(je(Tt)){for(const yr of Tt)kr(Qt,yr);Qt.length>0&&(qt=Tt[0].spatialReference,Rr=!0===Tt[0].hasZ,bt=!0===Tt[0].hasM)}else if(Tt instanceof U.Z)Qt=Tt._elements,Qt.length>0&&(Rr=Tt._hasZ,bt=Tt._hasM,qt=Tt.get(0).spatialReference);else if(we(Tt)){for(const yr of Tt.toArray())kr(Qt,yr);Qt.length>0&&(qt=Tt.get(0).spatialReference,Rr=!0===Tt.get(0).hasZ,bt=!0===Tt.get(0).hasM)}return 0===Qt.length?null:new re.Z({paths:[Qt],spatialReference:qt,hasZ:Rr,hasM:bt})}return Tt}function Hr(Tt,sr){if(je(Tt)||we(Tt)){let Rr=!1,bt=!1,Qt=[],qt=sr;if(je(Tt)){for(const yr of Tt)kr(Qt,yr);Qt.length>0&&(qt=Tt[0].spatialReference,Rr=!0===Tt[0].hasZ,bt=!0===Tt[0].hasM)}else if(Tt instanceof U.Z)Qt=Tt._elements,Qt.length>0&&(Rr=Tt._hasZ,bt=Tt._hasM,qt=Tt.get(0).spatialReference);else if(we(Tt)){for(const yr of Tt.toArray())kr(Qt,yr);Qt.length>0&&(qt=Tt.get(0).spatialReference,Rr=!0===Tt.get(0).hasZ,bt=!0===Tt.get(0).hasM)}return 0===Qt.length?null:new H.Z({points:Qt,spatialReference:qt,hasZ:Rr,hasM:bt})}return Tt}function pt(Tt,sr=!1){const Rr=[];if(null===Tt)return Rr;if(!0===je(Tt)){for(let bt=0;bt<Tt.length;bt++){const Qt=$e(Tt[bt]);""===Qt&&!0!==sr||Rr.push(Qt)}return Rr}if(Tt instanceof w.Z){for(let bt=0;bt<Tt.length();bt++){const Qt=$e(Tt.get(bt));""===Qt&&!0!==sr||Rr.push(Qt)}return Rr}if(De(Tt)){const bt=$e(Tt);return""===bt&&!0!==sr||Rr.push(bt),Rr}return[]}let Ut=0;function $t(Tt){return Ut++,Ut%100==0?(Ut=0,new Promise(sr=>{setTimeout(()=>{sr(Tt)},0)})):Tt}function Xt(Tt,sr,Rr){switch(Rr){case"&":return Tt&sr;case"|":return Tt|sr;case"^":return Tt^sr;case"<<":return Tt<<sr;case">>":return Tt>>sr;case">>>":return Tt>>>sr}}function _r(Tt,sr=null){return null==Tt?null:ge(Tt)||Te(Tt)||Ce(Tt)?Tt:Tt instanceof Y.Z?!0===sr?.keepGeometryType?Tt:Tt.toJSON():Tt instanceof w.Z?Tt.toArray().map(Rr=>_r(Rr,sr)):Tt instanceof Array?Tt.map(Rr=>_r(Rr,sr)):Tt instanceof Date?Tt:null!==Tt&&"object"==typeof Tt&&void 0!==Tt.castAsJson?Tt.castAsJson(sr):null}function hr(Tt,sr,Rr,bt,Qt){return gr.apply(this,arguments)}function gr(){return(gr=(0,D.Z)(function*(Tt,sr,Rr,bt,Qt){const qt=yield vr(Tt,sr,Rr);Qt[bt]=qt})).apply(this,arguments)}function vr(Tt){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,D.Z)(function*(Tt,sr=null,Rr=null){if(Tt instanceof w.Z&&(Tt=Tt.toArray()),null==Tt)return null;if(De(Tt)||Tt instanceof Y.Z||Tt instanceof Date)return _r(Tt,Rr);if(Tt instanceof Array){const bt=[],Qt=[];for(const qt of Tt)null===qt||De(qt)||qt instanceof Y.Z||qt instanceof Date?Qt.push(_r(qt,Rr)):(Qt.push(null),bt.push(hr(qt,sr,Rr,Qt.length-1,Qt)));return bt.length>0&&(yield Promise.all(bt)),Qt}return null!==Tt&&"object"==typeof Tt&&void 0!==Tt.castAsJsonAsync?Tt.castAsJsonAsync(sr,Rr):null})).apply(this,arguments)}function Gr(Tt,sr,Rr){const bt=Tt.fullSchema();return null!==bt&&bt.fields?zt(sr,bt,Tt,Rr):null}function Jr(Tt){const sr=Tt.fullSchema();return null===sr?null:sr.fields&&sr.typeIdField?{subtypeField:sr.typeIdField,subtypes:sr.types?sr.types.map(Rr=>({name:Rr.name,code:Rr.id})):[]}:null}function ns(Tt,sr,Rr,bt){const Qt=Tt.fullSchema();if(null===Qt||!Qt.fields)return null;const qt=zt(sr,Qt,Tt,bt);if(void 0===Rr)try{Rr=Tt.field(sr)}catch{return null}return kt(qt,Rr)}function lr(Tt,sr,Rr,bt){const Qt=Tt.fullSchema();if(null===Qt||!Qt.fields)return null;if(void 0===Rr){try{Rr=Tt.field(sr)}catch{return null}return Rr}return wt(zt(sr,Qt,Tt,bt),Rr)}function Tr(Tt){const sr=Tt.fullSchema();if(null===sr||!sr.fields)return null;const Rr=[];for(const bt of sr.fields)Rr.push((0,Z.Sh)(bt));return{objectIdField:sr.objectIdField,globalIdField:sr.globalIdField,geometryType:void 0===Z.q2[sr.geometryType]?"":Z.q2[sr.geometryType],fields:Rr}}const zr=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Q,ImplicitResultE:J,NativeFunctionE:se,SizzleFunctionE:ee,NativeFunction:le,ImplicitResult:ne,ReturnResult:ce,SizzleFunction:de,voidOperation:me,breakResult:_e,continueResult:he,multiReplace:ye,isFunctionParameter:fe,isSimpleType:De,defaultUndefined:ve,isString:Ce,isBoolean:ge,isNumber:Te,isInteger:Le,isArray:je,isFeature:ze,isFeatureSet:Ee,isFeatureSetCollection:Ae,isImmutableArray:we,isDate:Be,pcCheck:Pe,absRound:Oe,generateUUID:Ke,formatNumber:Ve,formatDate:Ne,standardiseDateFormat:Ie,greaterThanLessThan:Se,equalityTest:He,toString:$e,toNumberArray:et,toStringExplicit:nt,toNumber:Xe,toDate:rt,toDateTime:Ze,toBoolean:st,fixSpatialReference:Mt,fixNullGeometry:Ft,getDomainValue:kt,getDomainCode:wt,getDomain:zt,stableStringify:ar,autoCastFeatureToGeometry:Pr,autoCastArrayOfPointsToPolygon:ss,autoCastArrayOfPointsToPolyline:os,autoCastArrayOfPointsToMultiPoint:Hr,toStringArray:pt,tick:$t,binaryOperator:Xt,castAsJson:_r,castAsJsonAsync:vr,featureFullDomain:Gr,featureSubtypes:Jr,featureDomainValueLookup:ns,featureDomainCodeLookup:lr,featureSchema:Tr},Symbol.toStringTag,{value:"Module"}))},31478:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>ae,b:()=>U,c:()=>re,f:()=>ue,i:()=>w,m:()=>Y,r:()=>H,s:()=>G,t:()=>$});var D=T(39863);function w(de){return de[0]=1,de[1]=0,de[2]=0,de[3]=1,de[4]=0,de[5]=0,de}function U(de,me){const _e=me[0],he=me[1],ye=me[2],fe=me[3],De=me[4],ve=me[5];let Ce=_e*fe-he*ye;return Ce?(Ce=1/Ce,de[0]=fe*Ce,de[1]=-he*Ce,de[2]=-ye*Ce,de[3]=_e*Ce,de[4]=(ye*ve-fe*De)*Ce,de[5]=(he*De-_e*ve)*Ce,de):null}function Y(de,me,_e){const he=me[0],ye=me[1],fe=me[2],De=me[3],ve=me[4],Ce=me[5],ge=_e[0],Te=_e[1],Le=_e[2],je=_e[3],ze=_e[4],Ee=_e[5];return de[0]=he*ge+fe*Te,de[1]=ye*ge+De*Te,de[2]=he*Le+fe*je,de[3]=ye*Le+De*je,de[4]=he*ze+fe*Ee+ve,de[5]=ye*ze+De*Ee+Ce,de}function H(de,me,_e){const he=me[0],ye=me[1],fe=me[2],De=me[3],ve=me[4],Ce=me[5],ge=Math.sin(_e),Te=Math.cos(_e);return de[0]=he*Te+fe*ge,de[1]=ye*Te+De*ge,de[2]=he*-ge+fe*Te,de[3]=ye*-ge+De*Te,de[4]=ve,de[5]=Ce,de}function G(de,me,_e){const ye=me[1],fe=me[2],De=me[3],ve=me[4],Ce=me[5],ge=_e[0],Te=_e[1];return de[0]=me[0]*ge,de[1]=ye*ge,de[2]=fe*Te,de[3]=De*Te,de[4]=ve,de[5]=Ce,de}function $(de,me,_e){const he=me[0],ye=me[1],fe=me[2],De=me[3],ve=me[4],Ce=me[5],ge=_e[0],Te=_e[1];return de[0]=he,de[1]=ye,de[2]=fe,de[3]=De,de[4]=he*ge+fe*Te+ve,de[5]=ye*ge+De*Te+Ce,de}function re(de,me){const _e=Math.sin(me),he=Math.cos(me);return de[0]=he,de[1]=_e,de[2]=-_e,de[3]=he,de[4]=0,de[5]=0,de}function ue(de,me){return de[0]=me[0],de[1]=0,de[2]=0,de[3]=me[1],de[4]=0,de[5]=0,de}function ae(de,me){return de[0]=1,de[1]=0,de[2]=0,de[3]=1,de[4]=me[0],de[5]=me[1],de}function Z(de,me,_e){return de[0]=me[0]-_e[0],de[1]=me[1]-_e[1],de[2]=me[2]-_e[2],de[3]=me[3]-_e[3],de[4]=me[4]-_e[4],de[5]=me[5]-_e[5],de}Object.freeze(Object.defineProperty({__proto__:null,copy:function x(de,me){return de[0]=me[0],de[1]=me[1],de[2]=me[2],de[3]=me[3],de[4]=me[4],de[5]=me[5],de},identity:w,set:function B(de,me,_e,he,ye,fe,De){return de[0]=me,de[1]=_e,de[2]=he,de[3]=ye,de[4]=fe,de[5]=De,de},invert:U,determinant:function W(de){return de[0]*de[3]-de[1]*de[2]},multiply:Y,rotate:H,scale:G,translate:$,fromRotation:re,fromScaling:ue,fromTranslation:ae,str:function oe(de){return"mat2d("+de[0]+", "+de[1]+", "+de[2]+", "+de[3]+", "+de[4]+", "+de[5]+")"},frob:function ie(de){return Math.sqrt(de[0]**2+de[1]**2+de[2]**2+de[3]**2+de[4]**2+de[5]**2+1)},add:function X(de,me,_e){return de[0]=me[0]+_e[0],de[1]=me[1]+_e[1],de[2]=me[2]+_e[2],de[3]=me[3]+_e[3],de[4]=me[4]+_e[4],de[5]=me[5]+_e[5],de},subtract:Z,multiplyScalar:function Q(de,me,_e){return de[0]=me[0]*_e,de[1]=me[1]*_e,de[2]=me[2]*_e,de[3]=me[3]*_e,de[4]=me[4]*_e,de[5]=me[5]*_e,de},multiplyScalarAndAdd:function J(de,me,_e,he){return de[0]=me[0]+_e[0]*he,de[1]=me[1]+_e[1]*he,de[2]=me[2]+_e[2]*he,de[3]=me[3]+_e[3]*he,de[4]=me[4]+_e[4]*he,de[5]=me[5]+_e[5]*he,de},exactEquals:function se(de,me){return de[0]===me[0]&&de[1]===me[1]&&de[2]===me[2]&&de[3]===me[3]&&de[4]===me[4]&&de[5]===me[5]},equals:function ee(de,me){const _e=de[0],he=de[1],ye=de[2],fe=de[3],De=de[4],ve=de[5],Ce=me[0],ge=me[1],Te=me[2],Le=me[3],je=me[4],ze=me[5];return Math.abs(_e-Ce)<=D.E*Math.max(1,Math.abs(_e),Math.abs(Ce))&&Math.abs(he-ge)<=D.E*Math.max(1,Math.abs(he),Math.abs(ge))&&Math.abs(ye-Te)<=D.E*Math.max(1,Math.abs(ye),Math.abs(Te))&&Math.abs(fe-Le)<=D.E*Math.max(1,Math.abs(fe),Math.abs(Le))&&Math.abs(De-je)<=D.E*Math.max(1,Math.abs(De),Math.abs(je))&&Math.abs(ve-ze)<=D.E*Math.max(1,Math.abs(ve),Math.abs(ze))},mul:Y,sub:Z},Symbol.toStringTag,{value:"Module"}))},12225:(qe,xe,T)=>{"use strict";function D(){const H=new Float32Array(6);return H[0]=1,H[3]=1,H}function U(H,G,$,re){const ue=G[re],ae=G[re+1];H[re]=$[0]*ue+$[2]*ae+$[4],H[re+1]=$[1]*ue+$[3]*ae+$[5]}function W(H,G,$,re=0,ue=0,ae=2){const oe=ue||G.length/ae;for(let ie=re;ie<oe;ie++)U(H,G,$,ie*ae)}T.d(xe,{c:()=>D,t:()=>W}),Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:function x(H){const G=new Float32Array(6);return G[0]=H[0],G[1]=H[1],G[2]=H[2],G[3]=H[3],G[4]=H[4],G[5]=H[5],G},fromValues:function w(H,G,$,re,ue,ae){const oe=new Float32Array(6);return oe[0]=H,oe[1]=G,oe[2]=$,oe[3]=re,oe[4]=ue,oe[5]=ae,oe},createView:function B(H,G){return new Float32Array(H,G,6)},transform:U,transformMany:W},Symbol.toStringTag,{value:"Module"}))},30217:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>ee,b:()=>U,c:()=>re,d:()=>ae,e:()=>Y,f:()=>x,g:()=>J,i:()=>De,m:()=>$,n:()=>se,r:()=>ue,s:()=>B,t:()=>W});var D=T(39863);function x(Te,Le){return Te[0]=Le[0],Te[1]=Le[1],Te[2]=Le[2],Te[3]=Le[4],Te[4]=Le[5],Te[5]=Le[6],Te[6]=Le[8],Te[7]=Le[9],Te[8]=Le[10],Te}function B(Te,Le,je,ze,Ee,Ae,we,Be,Pe,Oe){return Te[0]=Le,Te[1]=je,Te[2]=ze,Te[3]=Ee,Te[4]=Ae,Te[5]=we,Te[6]=Be,Te[7]=Pe,Te[8]=Oe,Te}function U(Te){return Te[0]=1,Te[1]=0,Te[2]=0,Te[3]=0,Te[4]=1,Te[5]=0,Te[6]=0,Te[7]=0,Te[8]=1,Te}function W(Te,Le){if(Te===Le){const je=Le[1],ze=Le[2],Ee=Le[5];Te[1]=Le[3],Te[2]=Le[6],Te[3]=je,Te[5]=Le[7],Te[6]=ze,Te[7]=Ee}else Te[0]=Le[0],Te[1]=Le[3],Te[2]=Le[6],Te[3]=Le[1],Te[4]=Le[4],Te[5]=Le[7],Te[6]=Le[2],Te[7]=Le[5],Te[8]=Le[8];return Te}function Y(Te,Le){const je=Le[0],ze=Le[1],Ee=Le[2],Ae=Le[3],we=Le[4],Be=Le[5],Pe=Le[6],Oe=Le[7],Ke=Le[8],Ve=Ke*we-Be*Oe,Ne=-Ke*Ae+Be*Pe,Ie=Oe*Ae-we*Pe;let We=je*Ve+ze*Ne+Ee*Ie;return We?(We=1/We,Te[0]=Ve*We,Te[1]=(-Ke*ze+Ee*Oe)*We,Te[2]=(Be*ze-Ee*we)*We,Te[3]=Ne*We,Te[4]=(Ke*je-Ee*Pe)*We,Te[5]=(-Be*je+Ee*Ae)*We,Te[6]=Ie*We,Te[7]=(-Oe*je+ze*Pe)*We,Te[8]=(we*je-ze*Ae)*We,Te):null}function $(Te,Le,je){const ze=Le[0],Ee=Le[1],Ae=Le[2],we=Le[3],Be=Le[4],Pe=Le[5],Oe=Le[6],Ke=Le[7],Ve=Le[8],Ne=je[0],Ie=je[1],We=je[2],Se=je[3],He=je[4],$e=je[5],et=je[6],nt=je[7],it=je[8];return Te[0]=Ne*ze+Ie*we+We*Oe,Te[1]=Ne*Ee+Ie*Be+We*Ke,Te[2]=Ne*Ae+Ie*Pe+We*Ve,Te[3]=Se*ze+He*we+$e*Oe,Te[4]=Se*Ee+He*Be+$e*Ke,Te[5]=Se*Ae+He*Pe+$e*Ve,Te[6]=et*ze+nt*we+it*Oe,Te[7]=et*Ee+nt*Be+it*Ke,Te[8]=et*Ae+nt*Pe+it*Ve,Te}function re(Te,Le,je){const ze=Le[0],Ee=Le[1],Ae=Le[2],we=Le[3],Be=Le[4],Pe=Le[5],Oe=Le[6],Ke=Le[7],Ve=Le[8],Ne=je[0],Ie=je[1];return Te[0]=ze,Te[1]=Ee,Te[2]=Ae,Te[3]=we,Te[4]=Be,Te[5]=Pe,Te[6]=Ne*ze+Ie*we+Oe,Te[7]=Ne*Ee+Ie*Be+Ke,Te[8]=Ne*Ae+Ie*Pe+Ve,Te}function ue(Te,Le,je){const ze=Le[0],Ee=Le[1],Ae=Le[2],we=Le[3],Be=Le[4],Pe=Le[5],Oe=Le[6],Ke=Le[7],Ve=Le[8],Ne=Math.sin(je),Ie=Math.cos(je);return Te[0]=Ie*ze+Ne*we,Te[1]=Ie*Ee+Ne*Be,Te[2]=Ie*Ae+Ne*Pe,Te[3]=Ie*we-Ne*ze,Te[4]=Ie*Be-Ne*Ee,Te[5]=Ie*Pe-Ne*Ae,Te[6]=Oe,Te[7]=Ke,Te[8]=Ve,Te}function ae(Te,Le,je){const ze=je[0],Ee=je[1],Ae=je[2];return Te[0]=ze*Le[0],Te[1]=ze*Le[1],Te[2]=ze*Le[2],Te[3]=Ee*Le[3],Te[4]=Ee*Le[4],Te[5]=Ee*Le[5],Te[6]=Ae*Le[6],Te[7]=Ae*Le[7],Te[8]=Ae*Le[8],Te}function J(Te,Le){const je=Le[0],ze=Le[1],Ee=Le[2],Ae=Le[3],we=je+je,Be=ze+ze,Pe=Ee+Ee,Oe=je*we,Ke=ze*we,Ve=ze*Be,Ne=Ee*we,Ie=Ee*Be,We=Ee*Pe,Se=Ae*we,He=Ae*Be,$e=Ae*Pe;return Te[0]=1-Ve-We,Te[3]=Ke-$e,Te[6]=Ne+He,Te[1]=Ke+$e,Te[4]=1-Oe-We,Te[7]=Ie-Se,Te[2]=Ne-He,Te[5]=Ie+Se,Te[8]=1-Oe-Ve,Te}function se(Te,Le){const je=Le[0],ze=Le[1],Ee=Le[2],Ae=Le[4],we=Le[5],Be=Le[6],Pe=Le[8],Oe=Le[9],Ke=Le[10],Ve=Ke*we-Be*Oe,Ne=-Ke*Ae+Be*Pe,Ie=Oe*Ae-we*Pe,We=je*Ve+ze*Ne+Ee*Ie;if(!We)return null;const Se=1/We;return Te[0]=Ve*Se,Te[1]=(-Ke*ze+Ee*Oe)*Se,Te[2]=(Be*ze-Ee*we)*Se,Te[3]=Ne*Se,Te[4]=(Ke*je-Ee*Pe)*Se,Te[5]=(-Be*je+Ee*Ae)*Se,Te[6]=Ie*Se,Te[7]=(-Oe*je+ze*Pe)*Se,Te[8]=(we*je-ze*Ae)*Se,Te}function ee(Te,Le){const je=Le[0],ze=Le[1],Ee=Le[2],Ae=Le[3],we=Le[4],Be=Le[5],Pe=Le[6],Oe=Le[7],Ke=Le[8],Ve=Le[9],Ne=Le[10],Ie=Le[11],We=Le[12],Se=Le[13],He=Le[14],$e=Le[15],et=je*Be-ze*we,nt=je*Pe-Ee*we,it=je*Oe-Ae*we,Xe=ze*Pe-Ee*Be,rt=ze*Oe-Ae*Be,Ze=Ee*Oe-Ae*Pe,lt=Ke*Se-Ve*We,st=Ke*He-Ne*We,Mt=Ke*$e-Ie*We,Ft=Ve*He-Ne*Se,kt=Ve*$e-Ie*Se,wt=Ne*$e-Ie*He;let zt=et*wt-nt*kt+it*Ft+Xe*Mt-rt*st+Ze*lt;return zt?(zt=1/zt,Te[0]=(Be*wt-Pe*kt+Oe*Ft)*zt,Te[1]=(Pe*Mt-we*wt-Oe*st)*zt,Te[2]=(we*kt-Be*Mt+Oe*lt)*zt,Te[3]=(Ee*kt-ze*wt-Ae*Ft)*zt,Te[4]=(je*wt-Ee*Mt+Ae*st)*zt,Te[5]=(ze*Mt-je*kt-Ae*lt)*zt,Te[6]=(Se*Ze-He*rt+$e*Xe)*zt,Te[7]=(He*it-We*Ze-$e*nt)*zt,Te[8]=(We*rt-Se*it+$e*et)*zt,Te):null}function me(Te,Le,je){return Te[0]=Le[0]-je[0],Te[1]=Le[1]-je[1],Te[2]=Le[2]-je[2],Te[3]=Le[3]-je[3],Te[4]=Le[4]-je[4],Te[5]=Le[5]-je[5],Te[6]=Le[6]-je[6],Te[7]=Le[7]-je[7],Te[8]=Le[8]-je[8],Te}function De(Te){const Le=D.E,je=Te[0],ze=Te[1],Ee=Te[2],Ae=Te[3],we=Te[4],Be=Te[5],Pe=Te[6],Oe=Te[7],Ke=Te[8];return Math.abs(1-(je*je+Ae*Ae+Pe*Pe))<=Le&&Math.abs(1-(ze*ze+we*we+Oe*Oe))<=Le&&Math.abs(1-(Ee*Ee+Be*Be+Ke*Ke))<=Le}Object.freeze(Object.defineProperty({__proto__:null,fromMat4:x,copy:function w(Te,Le){return Te[0]=Le[0],Te[1]=Le[1],Te[2]=Le[2],Te[3]=Le[3],Te[4]=Le[4],Te[5]=Le[5],Te[6]=Le[6],Te[7]=Le[7],Te[8]=Le[8],Te},set:B,identity:U,transpose:W,invert:Y,adjoint:function H(Te,Le){const je=Le[0],ze=Le[1],Ee=Le[2],Ae=Le[3],we=Le[4],Be=Le[5],Pe=Le[6],Oe=Le[7],Ke=Le[8];return Te[0]=we*Ke-Be*Oe,Te[1]=Ee*Oe-ze*Ke,Te[2]=ze*Be-Ee*we,Te[3]=Be*Pe-Ae*Ke,Te[4]=je*Ke-Ee*Pe,Te[5]=Ee*Ae-je*Be,Te[6]=Ae*Oe-we*Pe,Te[7]=ze*Pe-je*Oe,Te[8]=je*we-ze*Ae,Te},determinant:function G(Te){const Ee=Te[3],Ae=Te[4],we=Te[5],Be=Te[6],Pe=Te[7],Oe=Te[8];return Te[0]*(Oe*Ae-we*Pe)+Te[1]*(-Oe*Ee+we*Be)+Te[2]*(Pe*Ee-Ae*Be)},multiply:$,translate:re,rotate:ue,scale:ae,scaleByVec2:function oe(Te,Le,je){const ze=je[0],Ee=je[1];return Te[0]=ze*Le[0],Te[1]=ze*Le[1],Te[2]=ze*Le[2],Te[3]=Ee*Le[3],Te[4]=Ee*Le[4],Te[5]=Ee*Le[5],Te},fromTranslation:function ie(Te,Le){return Te[0]=1,Te[1]=0,Te[2]=0,Te[3]=0,Te[4]=1,Te[5]=0,Te[6]=Le[0],Te[7]=Le[1],Te[8]=1,Te},fromRotation:function X(Te,Le){const je=Math.sin(Le),ze=Math.cos(Le);return Te[0]=ze,Te[1]=je,Te[2]=0,Te[3]=-je,Te[4]=ze,Te[5]=0,Te[6]=0,Te[7]=0,Te[8]=1,Te},fromScaling:function Z(Te,Le){return Te[0]=Le[0],Te[1]=0,Te[2]=0,Te[3]=0,Te[4]=Le[1],Te[5]=0,Te[6]=0,Te[7]=0,Te[8]=1,Te},fromMat2d:function Q(Te,Le){return Te[0]=Le[0],Te[1]=Le[1],Te[2]=0,Te[3]=Le[2],Te[4]=Le[3],Te[5]=0,Te[6]=Le[4],Te[7]=Le[5],Te[8]=1,Te},fromQuat:J,normalFromMat4Legacy:se,normalFromMat4:ee,projection:function le(Te,Le,je){return Te[0]=2/Le,Te[1]=0,Te[2]=0,Te[3]=0,Te[4]=-2/je,Te[5]=0,Te[6]=-1,Te[7]=1,Te[8]=1,Te},str:function ne(Te){return"mat3("+Te[0]+", "+Te[1]+", "+Te[2]+", "+Te[3]+", "+Te[4]+", "+Te[5]+", "+Te[6]+", "+Te[7]+", "+Te[8]+")"},frob:function ce(Te){return Math.sqrt(Te[0]**2+Te[1]**2+Te[2]**2+Te[3]**2+Te[4]**2+Te[5]**2+Te[6]**2+Te[7]**2+Te[8]**2)},add:function de(Te,Le,je){return Te[0]=Le[0]+je[0],Te[1]=Le[1]+je[1],Te[2]=Le[2]+je[2],Te[3]=Le[3]+je[3],Te[4]=Le[4]+je[4],Te[5]=Le[5]+je[5],Te[6]=Le[6]+je[6],Te[7]=Le[7]+je[7],Te[8]=Le[8]+je[8],Te},subtract:me,multiplyScalar:function _e(Te,Le,je){return Te[0]=Le[0]*je,Te[1]=Le[1]*je,Te[2]=Le[2]*je,Te[3]=Le[3]*je,Te[4]=Le[4]*je,Te[5]=Le[5]*je,Te[6]=Le[6]*je,Te[7]=Le[7]*je,Te[8]=Le[8]*je,Te},multiplyScalarAndAdd:function he(Te,Le,je,ze){return Te[0]=Le[0]+je[0]*ze,Te[1]=Le[1]+je[1]*ze,Te[2]=Le[2]+je[2]*ze,Te[3]=Le[3]+je[3]*ze,Te[4]=Le[4]+je[4]*ze,Te[5]=Le[5]+je[5]*ze,Te[6]=Le[6]+je[6]*ze,Te[7]=Le[7]+je[7]*ze,Te[8]=Le[8]+je[8]*ze,Te},exactEquals:function ye(Te,Le){return Te[0]===Le[0]&&Te[1]===Le[1]&&Te[2]===Le[2]&&Te[3]===Le[3]&&Te[4]===Le[4]&&Te[5]===Le[5]&&Te[6]===Le[6]&&Te[7]===Le[7]&&Te[8]===Le[8]},equals:function fe(Te,Le){const je=Te[0],ze=Te[1],Ee=Te[2],Ae=Te[3],we=Te[4],Be=Te[5],Pe=Te[6],Oe=Te[7],Ke=Te[8],Ve=Le[0],Ne=Le[1],Ie=Le[2],We=Le[3],Se=Le[4],He=Le[5],$e=Le[6],et=Le[7],nt=Le[8];return Math.abs(je-Ve)<=D.E*Math.max(1,Math.abs(je),Math.abs(Ve))&&Math.abs(ze-Ne)<=D.E*Math.max(1,Math.abs(ze),Math.abs(Ne))&&Math.abs(Ee-Ie)<=D.E*Math.max(1,Math.abs(Ee),Math.abs(Ie))&&Math.abs(Ae-We)<=D.E*Math.max(1,Math.abs(Ae),Math.abs(We))&&Math.abs(we-Se)<=D.E*Math.max(1,Math.abs(we),Math.abs(Se))&&Math.abs(Be-He)<=D.E*Math.max(1,Math.abs(Be),Math.abs(He))&&Math.abs(Pe-$e)<=D.E*Math.max(1,Math.abs(Pe),Math.abs($e))&&Math.abs(Oe-et)<=D.E*Math.max(1,Math.abs(Oe),Math.abs(et))&&Math.abs(Ke-nt)<=D.E*Math.max(1,Math.abs(Ke),Math.abs(nt))},isOrthoNormal:De,mul:$,sub:me},Symbol.toStringTag,{value:"Module"}))},49966:(qe,xe,T)=>{"use strict";function D(){const W=new Float32Array(9);return W[0]=1,W[4]=1,W[8]=1,W}function x(W){const Y=new Float32Array(9);return Y[0]=W[0],Y[1]=W[1],Y[2]=W[2],Y[3]=W[3],Y[4]=W[4],Y[5]=W[5],Y[6]=W[6],Y[7]=W[7],Y[8]=W[8],Y}function w(W,Y,H,G,$,re,ue,ae,oe){const ie=new Float32Array(9);return ie[0]=W,ie[1]=Y,ie[2]=H,ie[3]=G,ie[4]=$,ie[5]=re,ie[6]=ue,ie[7]=ae,ie[8]=oe,ie}T.d(xe,{a:()=>x,c:()=>D,f:()=>w}),Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,createView:function B(W,Y){return new Float32Array(W,Y,9)}},Symbol.toStringTag,{value:"Module"}))},550:(qe,xe,T)=>{"use strict";function D(){return[1,0,0,0,1,0,0,0,1]}function B(W,Y){return new Float64Array(W,Y,9)}T.d(xe,{a:()=>B,c:()=>D}),Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:function x(W){return[W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8]]},fromValues:function w(W,Y,H,G,$,re,ue,ae,oe){return[W,Y,H,G,$,re,ue,ae,oe]},createView:B},Symbol.toStringTag,{value:"Module"}))},28347:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>me,a:()=>Y,b:()=>le,c:()=>w,d:()=>J,e:()=>ae,f:()=>Z,g:()=>X,h:()=>ue,i:()=>U,j:()=>re,k:()=>De,l:()=>ve,m:()=>$,n:()=>Le,o:()=>ie,p:()=>Ve,q:()=>Te,r:()=>oe,s:()=>B,t:()=>W,u:()=>Q,v:()=>Ke,w:()=>Oe,x:()=>_e,y:()=>je,z:()=>se});var D=T(28093),x=T(39863);function w(Se,He){return Se[0]=He[0],Se[1]=He[1],Se[2]=He[2],Se[3]=He[3],Se[4]=He[4],Se[5]=He[5],Se[6]=He[6],Se[7]=He[7],Se[8]=He[8],Se[9]=He[9],Se[10]=He[10],Se[11]=He[11],Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15],Se}function B(Se,He,$e,et,nt,it,Xe,rt,Ze,lt,st,Mt,Ft,kt,wt,zt,Zt){return Se[0]=He,Se[1]=$e,Se[2]=et,Se[3]=nt,Se[4]=it,Se[5]=Xe,Se[6]=rt,Se[7]=Ze,Se[8]=lt,Se[9]=st,Se[10]=Mt,Se[11]=Ft,Se[12]=kt,Se[13]=wt,Se[14]=zt,Se[15]=Zt,Se}function U(Se){return Se[0]=1,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=1,Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[10]=1,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se}function W(Se,He){if(Se===He){const $e=He[1],et=He[2],nt=He[3],it=He[6],Xe=He[7],rt=He[11];Se[1]=He[4],Se[2]=He[8],Se[3]=He[12],Se[4]=$e,Se[6]=He[9],Se[7]=He[13],Se[8]=et,Se[9]=it,Se[11]=He[14],Se[12]=nt,Se[13]=Xe,Se[14]=rt}else Se[0]=He[0],Se[1]=He[4],Se[2]=He[8],Se[3]=He[12],Se[4]=He[1],Se[5]=He[5],Se[6]=He[9],Se[7]=He[13],Se[8]=He[2],Se[9]=He[6],Se[10]=He[10],Se[11]=He[14],Se[12]=He[3],Se[13]=He[7],Se[14]=He[11],Se[15]=He[15];return Se}function Y(Se,He){const $e=He[0],et=He[1],nt=He[2],it=He[3],Xe=He[4],rt=He[5],Ze=He[6],lt=He[7],st=He[8],Mt=He[9],Ft=He[10],kt=He[11],wt=He[12],zt=He[13],Zt=He[14],ar=He[15],Pr=$e*rt-et*Xe,kr=$e*Ze-nt*Xe,ss=$e*lt-it*Xe,os=et*Ze-nt*rt,Hr=et*lt-it*rt,pt=nt*lt-it*Ze,Ut=st*zt-Mt*wt,$t=st*Zt-Ft*wt,Xt=st*ar-kt*wt,_r=Mt*Zt-Ft*zt,hr=Mt*ar-kt*zt,gr=Ft*ar-kt*Zt;let vr=Pr*gr-kr*hr+ss*_r+os*Xt-Hr*$t+pt*Ut;return vr?(vr=1/vr,Se[0]=(rt*gr-Ze*hr+lt*_r)*vr,Se[1]=(nt*hr-et*gr-it*_r)*vr,Se[2]=(zt*pt-Zt*Hr+ar*os)*vr,Se[3]=(Ft*Hr-Mt*pt-kt*os)*vr,Se[4]=(Ze*Xt-Xe*gr-lt*$t)*vr,Se[5]=($e*gr-nt*Xt+it*$t)*vr,Se[6]=(Zt*ss-wt*pt-ar*kr)*vr,Se[7]=(st*pt-Ft*ss+kt*kr)*vr,Se[8]=(Xe*hr-rt*Xt+lt*Ut)*vr,Se[9]=(et*Xt-$e*hr-it*Ut)*vr,Se[10]=(wt*Hr-zt*ss+ar*Pr)*vr,Se[11]=(Mt*ss-st*Hr-kt*Pr)*vr,Se[12]=(rt*$t-Xe*_r-Ze*Ut)*vr,Se[13]=($e*_r-et*$t+nt*Ut)*vr,Se[14]=(zt*kr-wt*os-Zt*Pr)*vr,Se[15]=(st*os-Mt*kr+Ft*Pr)*vr,Se):null}function $(Se,He,$e){const et=He[0],nt=He[1],it=He[2],Xe=He[3],rt=He[4],Ze=He[5],lt=He[6],st=He[7],Mt=He[8],Ft=He[9],kt=He[10],wt=He[11],zt=He[12],Zt=He[13],ar=He[14],Pr=He[15];let kr=$e[0],ss=$e[1],os=$e[2],Hr=$e[3];return Se[0]=kr*et+ss*rt+os*Mt+Hr*zt,Se[1]=kr*nt+ss*Ze+os*Ft+Hr*Zt,Se[2]=kr*it+ss*lt+os*kt+Hr*ar,Se[3]=kr*Xe+ss*st+os*wt+Hr*Pr,kr=$e[4],ss=$e[5],os=$e[6],Hr=$e[7],Se[4]=kr*et+ss*rt+os*Mt+Hr*zt,Se[5]=kr*nt+ss*Ze+os*Ft+Hr*Zt,Se[6]=kr*it+ss*lt+os*kt+Hr*ar,Se[7]=kr*Xe+ss*st+os*wt+Hr*Pr,kr=$e[8],ss=$e[9],os=$e[10],Hr=$e[11],Se[8]=kr*et+ss*rt+os*Mt+Hr*zt,Se[9]=kr*nt+ss*Ze+os*Ft+Hr*Zt,Se[10]=kr*it+ss*lt+os*kt+Hr*ar,Se[11]=kr*Xe+ss*st+os*wt+Hr*Pr,kr=$e[12],ss=$e[13],os=$e[14],Hr=$e[15],Se[12]=kr*et+ss*rt+os*Mt+Hr*zt,Se[13]=kr*nt+ss*Ze+os*Ft+Hr*Zt,Se[14]=kr*it+ss*lt+os*kt+Hr*ar,Se[15]=kr*Xe+ss*st+os*wt+Hr*Pr,Se}function re(Se,He,$e){const et=$e[0],nt=$e[1],it=$e[2];if(He===Se)Se[12]=He[0]*et+He[4]*nt+He[8]*it+He[12],Se[13]=He[1]*et+He[5]*nt+He[9]*it+He[13],Se[14]=He[2]*et+He[6]*nt+He[10]*it+He[14],Se[15]=He[3]*et+He[7]*nt+He[11]*it+He[15];else{const Xe=He[0],rt=He[1],Ze=He[2],lt=He[3],st=He[4],Mt=He[5],Ft=He[6],kt=He[7],wt=He[8],zt=He[9],Zt=He[10],ar=He[11];Se[0]=Xe,Se[1]=rt,Se[2]=Ze,Se[3]=lt,Se[4]=st,Se[5]=Mt,Se[6]=Ft,Se[7]=kt,Se[8]=wt,Se[9]=zt,Se[10]=Zt,Se[11]=ar,Se[12]=Xe*et+st*nt+wt*it+He[12],Se[13]=rt*et+Mt*nt+zt*it+He[13],Se[14]=Ze*et+Ft*nt+Zt*it+He[14],Se[15]=lt*et+kt*nt+ar*it+He[15]}return Se}function ue(Se,He,$e){const et=$e[0],nt=$e[1],it=$e[2];return Se[0]=He[0]*et,Se[1]=He[1]*et,Se[2]=He[2]*et,Se[3]=He[3]*et,Se[4]=He[4]*nt,Se[5]=He[5]*nt,Se[6]=He[6]*nt,Se[7]=He[7]*nt,Se[8]=He[8]*it,Se[9]=He[9]*it,Se[10]=He[10]*it,Se[11]=He[11]*it,Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15],Se}function ae(Se,He,$e,et){let nt,it,Xe,rt,Ze,lt,st,Mt,Ft,kt,wt,zt,Zt,ar,Pr,kr,ss,os,Hr,pt,Ut,$t,Xt,_r,hr=et[0],gr=et[1],vr=et[2],Kr=Math.sqrt(hr*hr+gr*gr+vr*vr);return Kr<x.E?null:(Kr=1/Kr,hr*=Kr,gr*=Kr,vr*=Kr,nt=Math.sin($e),it=Math.cos($e),Xe=1-it,rt=He[0],Ze=He[1],lt=He[2],st=He[3],Mt=He[4],Ft=He[5],kt=He[6],wt=He[7],zt=He[8],Zt=He[9],ar=He[10],Pr=He[11],kr=hr*hr*Xe+it,ss=gr*hr*Xe+vr*nt,os=vr*hr*Xe-gr*nt,Hr=hr*gr*Xe-vr*nt,pt=gr*gr*Xe+it,Ut=vr*gr*Xe+hr*nt,$t=hr*vr*Xe+gr*nt,Xt=gr*vr*Xe-hr*nt,_r=vr*vr*Xe+it,Se[0]=rt*kr+Mt*ss+zt*os,Se[1]=Ze*kr+Ft*ss+Zt*os,Se[2]=lt*kr+kt*ss+ar*os,Se[3]=st*kr+wt*ss+Pr*os,Se[4]=rt*Hr+Mt*pt+zt*Ut,Se[5]=Ze*Hr+Ft*pt+Zt*Ut,Se[6]=lt*Hr+kt*pt+ar*Ut,Se[7]=st*Hr+wt*pt+Pr*Ut,Se[8]=rt*$t+Mt*Xt+zt*_r,Se[9]=Ze*$t+Ft*Xt+Zt*_r,Se[10]=lt*$t+kt*Xt+ar*_r,Se[11]=st*$t+wt*Xt+Pr*_r,He!==Se&&(Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15]),Se)}function oe(Se,He,$e){const et=Math.sin($e),nt=Math.cos($e),it=He[4],Xe=He[5],rt=He[6],Ze=He[7],lt=He[8],st=He[9],Mt=He[10],Ft=He[11];return He!==Se&&(Se[0]=He[0],Se[1]=He[1],Se[2]=He[2],Se[3]=He[3],Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15]),Se[4]=it*nt+lt*et,Se[5]=Xe*nt+st*et,Se[6]=rt*nt+Mt*et,Se[7]=Ze*nt+Ft*et,Se[8]=lt*nt-it*et,Se[9]=st*nt-Xe*et,Se[10]=Mt*nt-rt*et,Se[11]=Ft*nt-Ze*et,Se}function ie(Se,He,$e){const et=Math.sin($e),nt=Math.cos($e),it=He[0],Xe=He[1],rt=He[2],Ze=He[3],lt=He[8],st=He[9],Mt=He[10],Ft=He[11];return He!==Se&&(Se[4]=He[4],Se[5]=He[5],Se[6]=He[6],Se[7]=He[7],Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15]),Se[0]=it*nt-lt*et,Se[1]=Xe*nt-st*et,Se[2]=rt*nt-Mt*et,Se[3]=Ze*nt-Ft*et,Se[8]=it*et+lt*nt,Se[9]=Xe*et+st*nt,Se[10]=rt*et+Mt*nt,Se[11]=Ze*et+Ft*nt,Se}function X(Se,He,$e){const et=Math.sin($e),nt=Math.cos($e),it=He[0],Xe=He[1],rt=He[2],Ze=He[3],lt=He[4],st=He[5],Mt=He[6],Ft=He[7];return He!==Se&&(Se[8]=He[8],Se[9]=He[9],Se[10]=He[10],Se[11]=He[11],Se[12]=He[12],Se[13]=He[13],Se[14]=He[14],Se[15]=He[15]),Se[0]=it*nt+lt*et,Se[1]=Xe*nt+st*et,Se[2]=rt*nt+Mt*et,Se[3]=Ze*nt+Ft*et,Se[4]=lt*nt-it*et,Se[5]=st*nt-Xe*et,Se[6]=Mt*nt-rt*et,Se[7]=Ft*nt-Ze*et,Se}function Z(Se,He){return Se[0]=1,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=1,Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[10]=1,Se[11]=0,Se[12]=He[0],Se[13]=He[1],Se[14]=He[2],Se[15]=1,Se}function Q(Se,He){return Se[0]=He[0],Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=He[1],Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[10]=He[2],Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se}function J(Se,He,$e){let et,nt,it,Xe=$e[0],rt=$e[1],Ze=$e[2],lt=Math.sqrt(Xe*Xe+rt*rt+Ze*Ze);return lt<x.E?null:(lt=1/lt,Xe*=lt,rt*=lt,Ze*=lt,et=Math.sin(He),nt=Math.cos(He),it=1-nt,Se[0]=Xe*Xe*it+nt,Se[1]=rt*Xe*it+Ze*et,Se[2]=Ze*Xe*it-rt*et,Se[3]=0,Se[4]=Xe*rt*it-Ze*et,Se[5]=rt*rt*it+nt,Se[6]=Ze*rt*it+Xe*et,Se[7]=0,Se[8]=Xe*Ze*it+rt*et,Se[9]=rt*Ze*it-Xe*et,Se[10]=Ze*Ze*it+nt,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se)}function se(Se,He){const $e=Math.sin(He),et=Math.cos(He);return Se[0]=1,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=et,Se[6]=$e,Se[7]=0,Se[8]=0,Se[9]=-$e,Se[10]=et,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se}function le(Se,He){const $e=Math.sin(He),et=Math.cos(He);return Se[0]=et,Se[1]=$e,Se[2]=0,Se[3]=0,Se[4]=-$e,Se[5]=et,Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[10]=1,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se}function ne(Se,He,$e){const et=He[0],nt=He[1],it=He[2],Xe=He[3],rt=et+et,Ze=nt+nt,lt=it+it,st=et*rt,Mt=et*Ze,Ft=et*lt,kt=nt*Ze,wt=nt*lt,zt=it*lt,Zt=Xe*rt,ar=Xe*Ze,Pr=Xe*lt;return Se[0]=1-(kt+zt),Se[1]=Mt+Pr,Se[2]=Ft-ar,Se[3]=0,Se[4]=Mt-Pr,Se[5]=1-(st+zt),Se[6]=wt+Zt,Se[7]=0,Se[8]=Ft+ar,Se[9]=wt-Zt,Se[10]=1-(st+kt),Se[11]=0,Se[12]=$e[0],Se[13]=$e[1],Se[14]=$e[2],Se[15]=1,Se}const de=(0,D.c)();function me(Se,He){return Se[0]=He[12],Se[1]=He[13],Se[2]=He[14],Se}function _e(Se,He){const $e=He[0],et=He[1],nt=He[2],it=He[4],Xe=He[5],rt=He[6],Ze=He[8],lt=He[9],st=He[10];return Se[0]=Math.sqrt($e*$e+et*et+nt*nt),Se[1]=Math.sqrt(it*it+Xe*Xe+rt*rt),Se[2]=Math.sqrt(Ze*Ze+lt*lt+st*st),Se}function De(Se,He){const $e=He[0],et=He[1],nt=He[2],it=He[3],Xe=$e+$e,rt=et+et,Ze=nt+nt,lt=$e*Xe,st=et*Xe,Mt=et*rt,Ft=nt*Xe,kt=nt*rt,wt=nt*Ze,zt=it*Xe,Zt=it*rt,ar=it*Ze;return Se[0]=1-Mt-wt,Se[1]=st+ar,Se[2]=Ft-Zt,Se[3]=0,Se[4]=st-ar,Se[5]=1-lt-wt,Se[6]=kt+zt,Se[7]=0,Se[8]=Ft+Zt,Se[9]=kt-zt,Se[10]=1-lt-Mt,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se}function ve(Se,He,$e,et,nt,it,Xe){const rt=1/($e-He),Ze=1/(nt-et),lt=1/(it-Xe);return Se[0]=2*it*rt,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=2*it*Ze,Se[6]=0,Se[7]=0,Se[8]=($e+He)*rt,Se[9]=(nt+et)*Ze,Se[10]=(Xe+it)*lt,Se[11]=-1,Se[12]=0,Se[13]=0,Se[14]=Xe*it*2*lt,Se[15]=0,Se}function Te(Se,He,$e,et,nt,it,Xe){const rt=1/(He-$e),Ze=1/(et-nt),lt=1/(it-Xe);return Se[0]=-2*rt,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=-2*Ze,Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[10]=2*lt,Se[11]=0,Se[12]=(He+$e)*rt,Se[13]=(nt+et)*Ze,Se[14]=(Xe+it)*lt,Se[15]=1,Se}function Le(Se,He,$e,et){let nt,it,Xe,rt,Ze,lt,st,Mt,Ft,kt;const wt=He[0],zt=He[1],Zt=He[2],ar=et[0],Pr=et[1],kr=et[2],ss=$e[0],os=$e[1],Hr=$e[2];return Math.abs(wt-ss)<x.E&&Math.abs(zt-os)<x.E&&Math.abs(Zt-Hr)<x.E?U(Se):(st=wt-ss,Mt=zt-os,Ft=Zt-Hr,kt=1/Math.sqrt(st*st+Mt*Mt+Ft*Ft),st*=kt,Mt*=kt,Ft*=kt,nt=Pr*Ft-kr*Mt,it=kr*st-ar*Ft,Xe=ar*Mt-Pr*st,kt=Math.sqrt(nt*nt+it*it+Xe*Xe),kt?(kt=1/kt,nt*=kt,it*=kt,Xe*=kt):(nt=0,it=0,Xe=0),rt=Mt*Xe-Ft*it,Ze=Ft*nt-st*Xe,lt=st*it-Mt*nt,kt=Math.sqrt(rt*rt+Ze*Ze+lt*lt),kt?(kt=1/kt,rt*=kt,Ze*=kt,lt*=kt):(rt=0,Ze=0,lt=0),Se[0]=nt,Se[1]=rt,Se[2]=st,Se[3]=0,Se[4]=it,Se[5]=Ze,Se[6]=Mt,Se[7]=0,Se[8]=Xe,Se[9]=lt,Se[10]=Ft,Se[11]=0,Se[12]=-(nt*wt+it*zt+Xe*Zt),Se[13]=-(rt*wt+Ze*zt+lt*Zt),Se[14]=-(st*wt+Mt*zt+Ft*Zt),Se[15]=1,Se)}function je(Se,He,$e,et){const nt=He[0],it=He[1],Xe=He[2],rt=et[0],Ze=et[1],lt=et[2];let st=nt-$e[0],Mt=it-$e[1],Ft=Xe-$e[2],kt=st*st+Mt*Mt+Ft*Ft;kt>0&&(kt=1/Math.sqrt(kt),st*=kt,Mt*=kt,Ft*=kt);let wt=Ze*Ft-lt*Mt,zt=lt*st-rt*Ft,Zt=rt*Mt-Ze*st;return kt=wt*wt+zt*zt+Zt*Zt,kt>0&&(kt=1/Math.sqrt(kt),wt*=kt,zt*=kt,Zt*=kt),Se[0]=wt,Se[1]=zt,Se[2]=Zt,Se[3]=0,Se[4]=Mt*Zt-Ft*zt,Se[5]=Ft*wt-st*Zt,Se[6]=st*zt-Mt*wt,Se[7]=0,Se[8]=st,Se[9]=Mt,Se[10]=Ft,Se[11]=0,Se[12]=nt,Se[13]=it,Se[14]=Xe,Se[15]=1,Se}function we(Se,He,$e){return Se[0]=He[0]-$e[0],Se[1]=He[1]-$e[1],Se[2]=He[2]-$e[2],Se[3]=He[3]-$e[3],Se[4]=He[4]-$e[4],Se[5]=He[5]-$e[5],Se[6]=He[6]-$e[6],Se[7]=He[7]-$e[7],Se[8]=He[8]-$e[8],Se[9]=He[9]-$e[9],Se[10]=He[10]-$e[10],Se[11]=He[11]-$e[11],Se[12]=He[12]-$e[12],Se[13]=He[13]-$e[13],Se[14]=He[14]-$e[14],Se[15]=He[15]-$e[15],Se}function Oe(Se,He){return Se[0]===He[0]&&Se[1]===He[1]&&Se[2]===He[2]&&Se[3]===He[3]&&Se[4]===He[4]&&Se[5]===He[5]&&Se[6]===He[6]&&Se[7]===He[7]&&Se[8]===He[8]&&Se[9]===He[9]&&Se[10]===He[10]&&Se[11]===He[11]&&Se[12]===He[12]&&Se[13]===He[13]&&Se[14]===He[14]&&Se[15]===He[15]}function Ke(Se,He){if(Se===He)return!0;const $e=Se[0],et=Se[1],nt=Se[2],it=Se[3],Xe=Se[4],rt=Se[5],Ze=Se[6],lt=Se[7],st=Se[8],Mt=Se[9],Ft=Se[10],kt=Se[11],wt=Se[12],zt=Se[13],Zt=Se[14],ar=Se[15],Pr=He[0],kr=He[1],ss=He[2],os=He[3],Hr=He[4],pt=He[5],Ut=He[6],$t=He[7],Xt=He[8],_r=He[9],hr=He[10],gr=He[11],vr=He[12],Kr=He[13],Gr=He[14],Jr=He[15];return Math.abs($e-Pr)<=x.E*Math.max(1,Math.abs($e),Math.abs(Pr))&&Math.abs(et-kr)<=x.E*Math.max(1,Math.abs(et),Math.abs(kr))&&Math.abs(nt-ss)<=x.E*Math.max(1,Math.abs(nt),Math.abs(ss))&&Math.abs(it-os)<=x.E*Math.max(1,Math.abs(it),Math.abs(os))&&Math.abs(Xe-Hr)<=x.E*Math.max(1,Math.abs(Xe),Math.abs(Hr))&&Math.abs(rt-pt)<=x.E*Math.max(1,Math.abs(rt),Math.abs(pt))&&Math.abs(Ze-Ut)<=x.E*Math.max(1,Math.abs(Ze),Math.abs(Ut))&&Math.abs(lt-$t)<=x.E*Math.max(1,Math.abs(lt),Math.abs($t))&&Math.abs(st-Xt)<=x.E*Math.max(1,Math.abs(st),Math.abs(Xt))&&Math.abs(Mt-_r)<=x.E*Math.max(1,Math.abs(Mt),Math.abs(_r))&&Math.abs(Ft-hr)<=x.E*Math.max(1,Math.abs(Ft),Math.abs(hr))&&Math.abs(kt-gr)<=x.E*Math.max(1,Math.abs(kt),Math.abs(gr))&&Math.abs(wt-vr)<=x.E*Math.max(1,Math.abs(wt),Math.abs(vr))&&Math.abs(zt-Kr)<=x.E*Math.max(1,Math.abs(zt),Math.abs(Kr))&&Math.abs(Zt-Gr)<=x.E*Math.max(1,Math.abs(Zt),Math.abs(Gr))&&Math.abs(ar-Jr)<=x.E*Math.max(1,Math.abs(ar),Math.abs(Jr))}function Ve(Se){const He=x.E,$e=Se[0],et=Se[1],nt=Se[2],it=Se[4],Xe=Se[5],rt=Se[6],Ze=Se[8],lt=Se[9],st=Se[10];return Math.abs(1-($e*$e+it*it+Ze*Ze))<=He&&Math.abs(1-(et*et+Xe*Xe+lt*lt))<=He&&Math.abs(1-(nt*nt+rt*rt+st*st))<=He}Object.freeze(Object.defineProperty({__proto__:null,copy:w,set:B,identity:U,transpose:W,invert:Y,adjoint:function H(Se,He){const $e=He[0],et=He[1],nt=He[2],it=He[3],Xe=He[4],rt=He[5],Ze=He[6],lt=He[7],st=He[8],Mt=He[9],Ft=He[10],kt=He[11],wt=He[12],zt=He[13],Zt=He[14],ar=He[15];return Se[0]=rt*(Ft*ar-kt*Zt)-Mt*(Ze*ar-lt*Zt)+zt*(Ze*kt-lt*Ft),Se[1]=-(et*(Ft*ar-kt*Zt)-Mt*(nt*ar-it*Zt)+zt*(nt*kt-it*Ft)),Se[2]=et*(Ze*ar-lt*Zt)-rt*(nt*ar-it*Zt)+zt*(nt*lt-it*Ze),Se[3]=-(et*(Ze*kt-lt*Ft)-rt*(nt*kt-it*Ft)+Mt*(nt*lt-it*Ze)),Se[4]=-(Xe*(Ft*ar-kt*Zt)-st*(Ze*ar-lt*Zt)+wt*(Ze*kt-lt*Ft)),Se[5]=$e*(Ft*ar-kt*Zt)-st*(nt*ar-it*Zt)+wt*(nt*kt-it*Ft),Se[6]=-($e*(Ze*ar-lt*Zt)-Xe*(nt*ar-it*Zt)+wt*(nt*lt-it*Ze)),Se[7]=$e*(Ze*kt-lt*Ft)-Xe*(nt*kt-it*Ft)+st*(nt*lt-it*Ze),Se[8]=Xe*(Mt*ar-kt*zt)-st*(rt*ar-lt*zt)+wt*(rt*kt-lt*Mt),Se[9]=-($e*(Mt*ar-kt*zt)-st*(et*ar-it*zt)+wt*(et*kt-it*Mt)),Se[10]=$e*(rt*ar-lt*zt)-Xe*(et*ar-it*zt)+wt*(et*lt-it*rt),Se[11]=-($e*(rt*kt-lt*Mt)-Xe*(et*kt-it*Mt)+st*(et*lt-it*rt)),Se[12]=-(Xe*(Mt*Zt-Ft*zt)-st*(rt*Zt-Ze*zt)+wt*(rt*Ft-Ze*Mt)),Se[13]=$e*(Mt*Zt-Ft*zt)-st*(et*Zt-nt*zt)+wt*(et*Ft-nt*Mt),Se[14]=-($e*(rt*Zt-Ze*zt)-Xe*(et*Zt-nt*zt)+wt*(et*Ze-nt*rt)),Se[15]=$e*(rt*Ft-Ze*Mt)-Xe*(et*Ft-nt*Mt)+st*(et*Ze-nt*rt),Se},determinant:function G(Se){const He=Se[0],$e=Se[1],et=Se[2],nt=Se[3],it=Se[4],Xe=Se[5],rt=Se[6],Ze=Se[7],lt=Se[8],st=Se[9],Mt=Se[10],Ft=Se[11],kt=Se[12],wt=Se[13],zt=Se[14],Zt=Se[15];return(He*Xe-$e*it)*(Mt*Zt-Ft*zt)-(He*rt-et*it)*(st*Zt-Ft*wt)+(He*Ze-nt*it)*(st*zt-Mt*wt)+($e*rt-et*Xe)*(lt*Zt-Ft*kt)-($e*Ze-nt*Xe)*(lt*zt-Mt*kt)+(et*Ze-nt*rt)*(lt*wt-st*kt)},multiply:$,translate:re,scale:ue,rotate:ae,rotateX:oe,rotateY:ie,rotateZ:X,fromTranslation:Z,fromScaling:Q,fromRotation:J,fromXRotation:se,fromYRotation:function ee(Se,He){const $e=Math.sin(He),et=Math.cos(He);return Se[0]=et,Se[1]=0,Se[2]=-$e,Se[3]=0,Se[4]=0,Se[5]=1,Se[6]=0,Se[7]=0,Se[8]=$e,Se[9]=0,Se[10]=et,Se[11]=0,Se[12]=0,Se[13]=0,Se[14]=0,Se[15]=1,Se},fromZRotation:le,fromRotationTranslation:ne,fromQuat2:function ce(Se,He){const $e=de,et=-He[0],nt=-He[1],it=-He[2],Xe=He[3],rt=He[4],Ze=He[5],lt=He[6],st=He[7],Mt=et*et+nt*nt+it*it+Xe*Xe;return Mt>0?($e[0]=2*(rt*Xe+st*et+Ze*it-lt*nt)/Mt,$e[1]=2*(Ze*Xe+st*nt+lt*et-rt*it)/Mt,$e[2]=2*(lt*Xe+st*it+rt*nt-Ze*et)/Mt):($e[0]=2*(rt*Xe+st*et+Ze*it-lt*nt),$e[1]=2*(Ze*Xe+st*nt+lt*et-rt*it),$e[2]=2*(lt*Xe+st*it+rt*nt-Ze*et)),ne(Se,He,$e),Se},getTranslation:me,getScaling:_e,getRotation:function he(Se,He){const $e=He[0]+He[5]+He[10];let et=0;return $e>0?(et=2*Math.sqrt($e+1),Se[3]=.25*et,Se[0]=(He[6]-He[9])/et,Se[1]=(He[8]-He[2])/et,Se[2]=(He[1]-He[4])/et):He[0]>He[5]&&He[0]>He[10]?(et=2*Math.sqrt(1+He[0]-He[5]-He[10]),Se[3]=(He[6]-He[9])/et,Se[0]=.25*et,Se[1]=(He[1]+He[4])/et,Se[2]=(He[8]+He[2])/et):He[5]>He[10]?(et=2*Math.sqrt(1+He[5]-He[0]-He[10]),Se[3]=(He[8]-He[2])/et,Se[0]=(He[1]+He[4])/et,Se[1]=.25*et,Se[2]=(He[6]+He[9])/et):(et=2*Math.sqrt(1+He[10]-He[0]-He[5]),Se[3]=(He[1]-He[4])/et,Se[0]=(He[8]+He[2])/et,Se[1]=(He[6]+He[9])/et,Se[2]=.25*et),Se},fromRotationTranslationScale:function ye(Se,He,$e,et){const nt=He[0],it=He[1],Xe=He[2],rt=He[3],Ze=nt+nt,lt=it+it,st=Xe+Xe,Mt=nt*Ze,Ft=nt*lt,kt=nt*st,wt=it*lt,zt=it*st,Zt=Xe*st,ar=rt*Ze,Pr=rt*lt,kr=rt*st,ss=et[0],os=et[1],Hr=et[2];return Se[0]=(1-(wt+Zt))*ss,Se[1]=(Ft+kr)*ss,Se[2]=(kt-Pr)*ss,Se[3]=0,Se[4]=(Ft-kr)*os,Se[5]=(1-(Mt+Zt))*os,Se[6]=(zt+ar)*os,Se[7]=0,Se[8]=(kt+Pr)*Hr,Se[9]=(zt-ar)*Hr,Se[10]=(1-(Mt+wt))*Hr,Se[11]=0,Se[12]=$e[0],Se[13]=$e[1],Se[14]=$e[2],Se[15]=1,Se},fromRotationTranslationScaleOrigin:function fe(Se,He,$e,et,nt){const it=He[0],Xe=He[1],rt=He[2],Ze=He[3],lt=it+it,st=Xe+Xe,Mt=rt+rt,Ft=it*lt,kt=it*st,wt=it*Mt,zt=Xe*st,Zt=Xe*Mt,ar=rt*Mt,Pr=Ze*lt,kr=Ze*st,ss=Ze*Mt,os=et[0],Hr=et[1],pt=et[2],Ut=nt[0],$t=nt[1],Xt=nt[2],_r=(1-(zt+ar))*os,hr=(kt+ss)*os,gr=(wt-kr)*os,vr=(kt-ss)*Hr,Kr=(1-(Ft+ar))*Hr,Gr=(Zt+Pr)*Hr,Jr=(wt+kr)*pt,ns=(Zt-Pr)*pt,lr=(1-(Ft+zt))*pt;return Se[0]=_r,Se[1]=hr,Se[2]=gr,Se[3]=0,Se[4]=vr,Se[5]=Kr,Se[6]=Gr,Se[7]=0,Se[8]=Jr,Se[9]=ns,Se[10]=lr,Se[11]=0,Se[12]=$e[0]+Ut-(_r*Ut+vr*$t+Jr*Xt),Se[13]=$e[1]+$t-(hr*Ut+Kr*$t+ns*Xt),Se[14]=$e[2]+Xt-(gr*Ut+Gr*$t+lr*Xt),Se[15]=1,Se},fromQuat:De,frustum:ve,perspective:function Ce(Se,He,$e,et,nt){const it=1/Math.tan(He/2);let Xe;return Se[0]=it/$e,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=it,Se[6]=0,Se[7]=0,Se[8]=0,Se[9]=0,Se[11]=-1,Se[12]=0,Se[13]=0,Se[15]=0,null!=nt&&nt!==1/0?(Xe=1/(et-nt),Se[10]=(nt+et)*Xe,Se[14]=2*nt*et*Xe):(Se[10]=-1,Se[14]=-2*et),Se},perspectiveFromFieldOfView:function ge(Se,He,$e,et){const nt=Math.tan(He.upDegrees*Math.PI/180),it=Math.tan(He.downDegrees*Math.PI/180),Xe=Math.tan(He.leftDegrees*Math.PI/180),rt=Math.tan(He.rightDegrees*Math.PI/180),Ze=2/(Xe+rt),lt=2/(nt+it);return Se[0]=Ze,Se[1]=0,Se[2]=0,Se[3]=0,Se[4]=0,Se[5]=lt,Se[6]=0,Se[7]=0,Se[8]=-(Xe-rt)*Ze*.5,Se[9]=(nt-it)*lt*.5,Se[10]=et/($e-et),Se[11]=-1,Se[12]=0,Se[13]=0,Se[14]=et*$e/($e-et),Se[15]=0,Se},ortho:Te,lookAt:Le,targetTo:je,str:function ze(Se){return"mat4("+Se[0]+", "+Se[1]+", "+Se[2]+", "+Se[3]+", "+Se[4]+", "+Se[5]+", "+Se[6]+", "+Se[7]+", "+Se[8]+", "+Se[9]+", "+Se[10]+", "+Se[11]+", "+Se[12]+", "+Se[13]+", "+Se[14]+", "+Se[15]+")"},frob:function Ee(Se){return Math.sqrt(Se[0]**2+Se[1]**2+Se[2]**2+Se[3]**2+Se[4]**2+Se[5]**2+Se[6]**2+Se[7]**2+Se[8]**2+Se[9]**2+Se[10]**2+Se[11]**2+Se[12]**2+Se[13]**2+Se[14]**2+Se[15]**2)},add:function Ae(Se,He,$e){return Se[0]=He[0]+$e[0],Se[1]=He[1]+$e[1],Se[2]=He[2]+$e[2],Se[3]=He[3]+$e[3],Se[4]=He[4]+$e[4],Se[5]=He[5]+$e[5],Se[6]=He[6]+$e[6],Se[7]=He[7]+$e[7],Se[8]=He[8]+$e[8],Se[9]=He[9]+$e[9],Se[10]=He[10]+$e[10],Se[11]=He[11]+$e[11],Se[12]=He[12]+$e[12],Se[13]=He[13]+$e[13],Se[14]=He[14]+$e[14],Se[15]=He[15]+$e[15],Se},subtract:we,multiplyScalar:function Be(Se,He,$e){return Se[0]=He[0]*$e,Se[1]=He[1]*$e,Se[2]=He[2]*$e,Se[3]=He[3]*$e,Se[4]=He[4]*$e,Se[5]=He[5]*$e,Se[6]=He[6]*$e,Se[7]=He[7]*$e,Se[8]=He[8]*$e,Se[9]=He[9]*$e,Se[10]=He[10]*$e,Se[11]=He[11]*$e,Se[12]=He[12]*$e,Se[13]=He[13]*$e,Se[14]=He[14]*$e,Se[15]=He[15]*$e,Se},multiplyScalarAndAdd:function Pe(Se,He,$e,et){return Se[0]=He[0]+$e[0]*et,Se[1]=He[1]+$e[1]*et,Se[2]=He[2]+$e[2]*et,Se[3]=He[3]+$e[3]*et,Se[4]=He[4]+$e[4]*et,Se[5]=He[5]+$e[5]*et,Se[6]=He[6]+$e[6]*et,Se[7]=He[7]+$e[7]*et,Se[8]=He[8]+$e[8]*et,Se[9]=He[9]+$e[9]*et,Se[10]=He[10]+$e[10]*et,Se[11]=He[11]+$e[11]*et,Se[12]=He[12]+$e[12]*et,Se[13]=He[13]+$e[13]*et,Se[14]=He[14]+$e[14]*et,Se[15]=He[15]+$e[15]*et,Se},exactEquals:Oe,equals:Ke,isOrthoNormal:Ve,mul:$,sub:we},Symbol.toStringTag,{value:"Module"}))},55494:(qe,xe,T)=>{"use strict";function D(){const Y=new Float32Array(16);return Y[0]=1,Y[5]=1,Y[10]=1,Y[15]=1,Y}T.d(xe,{c:()=>D});const U=D();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:function x(Y){const H=new Float32Array(16);return H[0]=Y[0],H[1]=Y[1],H[2]=Y[2],H[3]=Y[3],H[4]=Y[4],H[5]=Y[5],H[6]=Y[6],H[7]=Y[7],H[8]=Y[8],H[9]=Y[9],H[10]=Y[10],H[11]=Y[11],H[12]=Y[12],H[13]=Y[13],H[14]=Y[14],H[15]=Y[15],H},fromValues:function w(Y,H,G,$,re,ue,ae,oe,ie,X,Z,Q,J,se,ee,le){const ne=new Float32Array(16);return ne[0]=Y,ne[1]=H,ne[2]=G,ne[3]=$,ne[4]=re,ne[5]=ue,ne[6]=ae,ne[7]=oe,ne[8]=ie,ne[9]=X,ne[10]=Z,ne[11]=Q,ne[12]=J,ne[13]=se,ne[14]=ee,ne[15]=le,ne},createView:function B(Y,H){return new Float32Array(Y,H,16)},IDENTITY:U},Symbol.toStringTag,{value:"Module"}))},43703:(qe,xe,T)=>{"use strict";function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function x(Y){return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8],Y[9],Y[10],Y[11],Y[12],Y[13],Y[14],Y[15]]}function w(Y,H,G,$,re,ue,ae,oe,ie,X,Z,Q,J,se,ee,le){return[Y,H,G,$,re,ue,ae,oe,ie,X,Z,Q,J,se,ee,le]}function B(Y,H){return new Float64Array(Y,H,16)}T.d(xe,{I:()=>U,a:()=>B,b:()=>x,c:()=>D,f:()=>w});const U=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,createView:B,IDENTITY:U},Symbol.toStringTag,{value:"Module"}))},44956:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>$,f:()=>G,g:()=>H,h:()=>oe,i:()=>U,j:()=>J,l:()=>Y,p:()=>me});var D=T(54346),x=T(8314);let w,B=null;function U(){return!!B}function Y(){return w||(w=T.e(3714).then(T.bind(T,73714)).then(_e=>_e.p).then(({default:_e})=>_e({locateFile:he=>(0,D.V)(`esri/geometry/support/${he}`)})).then(_e=>{ee(_e)}),w)}var H,G,$,_e;(function(_e){function he(ve,Ce,ge){B.ensureCache.prepare();const Te=ce(ge),Le=ge===Te,je=B.ensureFloat64(Te),ze=B._pe_geog_to_proj(B.getPointer(ve),Ce,je);return ze&&de(ge,Ce,je,Le),ze}function fe(ve,Ce,ge){return De(ve,Ce,ge,0)}function De(ve,Ce,ge,Te){B.ensureCache.prepare();const Le=ce(ge),je=ge===Le,ze=B.ensureFloat64(Le),Ee=B._pe_proj_to_geog_center(B.getPointer(ve),Ce,ze,Te);return Ee&&de(ge,Ce,ze,je),Ee}_e.geogToProj=he,_e.projGeog=function ye(ve,Ce,ge,Te){switch(Te){case G.PE_TRANSFORM_P_TO_G:return fe(ve,Ce,ge);case G.PE_TRANSFORM_G_TO_P:return he(ve,Ce,ge)}return 0},_e.projToGeog=fe,_e.projToGeogCenter=De})(H||(H={})),(_e=G||(G={})).init=function he(){_e.PE_BUFFER_MAX=B.PeDefs.prototype.PE_BUFFER_MAX,_e.PE_NAME_MAX=B.PeDefs.prototype.PE_NAME_MAX,_e.PE_MGRS_MAX=B.PeDefs.prototype.PE_MGRS_MAX,_e.PE_USNG_MAX=B.PeDefs.prototype.PE_USNG_MAX,_e.PE_DD_MAX=B.PeDefs.prototype.PE_DD_MAX,_e.PE_DDM_MAX=B.PeDefs.prototype.PE_DDM_MAX,_e.PE_DMS_MAX=B.PeDefs.prototype.PE_DMS_MAX,_e.PE_UTM_MAX=B.PeDefs.prototype.PE_UTM_MAX,_e.PE_PARM_MAX=B.PeDefs.prototype.PE_PARM_MAX,_e.PE_TYPE_NONE=B.PeDefs.prototype.PE_TYPE_NONE,_e.PE_TYPE_GEOGCS=B.PeDefs.prototype.PE_TYPE_GEOGCS,_e.PE_TYPE_PROJCS=B.PeDefs.prototype.PE_TYPE_PROJCS,_e.PE_TYPE_GEOGTRAN=B.PeDefs.prototype.PE_TYPE_GEOGTRAN,_e.PE_TYPE_COORDSYS=B.PeDefs.prototype.PE_TYPE_COORDSYS,_e.PE_TYPE_UNIT=B.PeDefs.prototype.PE_TYPE_UNIT,_e.PE_TYPE_LINUNIT=B.PeDefs.prototype.PE_TYPE_LINUNIT,_e.PE_STR_OPTS_NONE=B.PeDefs.prototype.PE_STR_OPTS_NONE,_e.PE_STR_AUTH_NONE=B.PeDefs.prototype.PE_STR_AUTH_NONE,_e.PE_STR_AUTH_TOP=B.PeDefs.prototype.PE_STR_AUTH_TOP,_e.PE_STR_NAME_CANON=B.PeDefs.prototype.PE_STR_NAME_CANON,_e.PE_PARM_X0=B.PeDefs.prototype.PE_PARM_X0,_e.PE_PARM_ND=B.PeDefs.prototype.PE_PARM_ND,_e.PE_TRANSFORM_1_TO_2=B.PeDefs.prototype.PE_TRANSFORM_1_TO_2,_e.PE_TRANSFORM_2_TO_1=B.PeDefs.prototype.PE_TRANSFORM_2_TO_1,_e.PE_TRANSFORM_P_TO_G=B.PeDefs.prototype.PE_TRANSFORM_P_TO_G,_e.PE_TRANSFORM_G_TO_P=B.PeDefs.prototype.PE_TRANSFORM_G_TO_P,_e.PE_HORIZON_RECT=B.PeDefs.prototype.PE_HORIZON_RECT,_e.PE_HORIZON_POLY=B.PeDefs.prototype.PE_HORIZON_POLY,_e.PE_HORIZON_LINE=B.PeDefs.prototype.PE_HORIZON_LINE,_e.PE_HORIZON_DELTA=B.PeDefs.prototype.PE_HORIZON_DELTA},function(_e){const he={},ye={},fe=Ae=>{if(Ae){const we=Ae.getType();switch(we){case G.PE_TYPE_GEOGCS:Ae=B.castObject(Ae,B.PeGeogcs);break;case G.PE_TYPE_PROJCS:Ae=B.castObject(Ae,B.PeProjcs);break;case G.PE_TYPE_GEOGTRAN:Ae=B.castObject(Ae,B.PeGeogtran);break;default:we&G.PE_TYPE_UNIT&&(Ae=B.castObject(Ae,B.PeUnit))}}return Ae};function Ce(Ae,we){let Be=null,Pe=he[Ae];if(Pe||(Pe={},he[Ae]=Pe),Pe.hasOwnProperty(String(we)))Be=Pe[we];else{const Oe=B.PeFactory.prototype.factoryByType(Ae,we);B.compare(Oe,B.NULL)||(Be=Oe,Pe[we]=Be)}return Be=fe(Be),Be}_e.initialize=function De(){B.PeFactory.prototype.initialize(null)},_e.coordsys=function ve(Ae){return Ce(G.PE_TYPE_COORDSYS,Ae)},_e.factoryByType=Ce,_e.fromString=function ge(Ae,we){let Be=null,Pe=ye[Ae];if(Pe||(Pe={},ye[Ae]=Pe),Pe.hasOwnProperty(we))Be=Pe[we];else{const Oe=B.PeFactory.prototype.fromString(Ae,we);B.compare(Oe,B.NULL)||(Be=Oe,Pe[we]=Be)}return Be=fe(Be),Be},_e.geogcs=function Te(Ae){return Ce(G.PE_TYPE_GEOGCS,Ae)},_e.geogtran=function Le(Ae){return Ce(G.PE_TYPE_GEOGTRAN,Ae)},_e.getCode=function je(Ae){return B.PeFactory.prototype.getCode(Ae)},_e.projcs=function ze(Ae){return Ce(G.PE_TYPE_PROJCS,Ae)},_e.unit=function Ee(Ae){return Ce(G.PE_TYPE_UNIT,Ae)}}($||($={}));let re=null;var ue,ae,oe,ie,X,Z,Q,J,se;function ee(_e){function he(ve,Ce,ge){ve[Ce]=ge(ve[Ce])}B=_e,G.init(),ue.init(),X.init(),Q.init(),J.init(),re=class extends B.PeGCSExtent{destroy(){B.destroy(this)}};const ye=[B.PeDatum,B.PeGeogcs,B.PeGeogtran,B.PeObject,B.PeParameter,B.PePrimem,B.PeProjcs,B.PeSpheroid,B.PeUnit];for(const ve of ye)he(ve.prototype,"getName",Ce=>function(){return Ce.call(this,new Array(G.PE_NAME_MAX))});for(const ve of[B.PeGeogtran,B.PeProjcs])he(ve.prototype,"getParameters",Ce=>function(){const ge=new Array(G.PE_PARM_MAX);let Te=Ce.call(this);for(let Le=0;Le<ge.length;Le++){const je=B.getValue(Te,"*");ge[Le]=je?B.wrapPointer(je,B.PeParameter):null,Te+=Int32Array.BYTES_PER_ELEMENT}return ge});he(B.PeHorizon.prototype,"getCoord",ve=>function(){const Ce=this.getSize();if(!Ce)return null;const ge=[];return de(ge,Ce,ve.call(this)),ge}),he(B.PeGTlistExtendedEntry.prototype,"getEntries",ve=>{const Ce=B._pe_getPeGTlistExtendedGTsSize();return function(){let ge=null;const Te=ve.call(this);if(!B.compare(Te,B.NULL)){ge=[Te];const Le=this.getSteps();if(Le>1){const je=B.getPointer(Te);for(let ze=1;ze<Le;ze++)ge.push(B.wrapPointer(je+Ce*ze,B.PeGTlistExtendedGTs))}}return ge}});const fe=B._pe_getPeHorizonSize(),De=ve=>function(){let Ce=this._cache;if(Ce||(Ce=new Map,this._cache=Ce),Ce.has(ve))return Ce.get(ve);let ge=null;const Te=ve.call(this);if(!B.compare(Te,B.NULL)){ge=[Te];const Le=Te.getNump();if(Le>1){const je=B.getPointer(Te);for(let ze=1;ze<Le;ze++)ge.push(B.wrapPointer(je+fe*ze,B.PeHorizon))}}return Ce.set(ve,ge),ge};he(B.PeProjcs.prototype,"horizonGcsGenerate",De),he(B.PeProjcs.prototype,"horizonPcsGenerate",De),B.PeObject.prototype.toString=function(ve=G.PE_STR_OPTS_NONE){B.ensureCache.prepare();const Ce=B.getPointer(this),ge=B.ensureInt8(new Array(G.PE_BUFFER_MAX));return B.UTF8ToString(B._pe_object_to_string_ext(Ce,ve,ge))}}function le(_e){if(!_e)return;const he=B.getClass(_e);if(!he)return;const ye=B.getCache(he);if(!ye)return;const fe=B.getPointer(_e);fe&&delete ye[fe]}function ne(_e,he){const ye=[],fe=new Array(he);for(let De=0;De<_e;De++)ye.push(B.ensureInt8(fe));return ye}function ce(_e){let he;return Array.isArray(_e[0])?(he=[],_e.forEach(ye=>{he.push(ye[0],ye[1])})):he=_e,he}function de(_e,he,ye,fe=!1){if(fe)for(let De=0;De<2*he;De++)_e[De]=B.getValue(ye+De*Float64Array.BYTES_PER_ELEMENT,"double");else{const De=0===_e.length;for(let ve=0;ve<he;ve++)De&&(_e[ve]=new Array(2)),_e[ve][0]=B.getValue(ye,"double"),_e[ve][1]=B.getValue(ye+Float64Array.BYTES_PER_ELEMENT,"double"),ye+=2*Float64Array.BYTES_PER_ELEMENT}}(function(_e){let he;_e.init=function ye(){_e.PE_GTLIST_OPTS_COMMON=B.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,he=B._pe_getPeGTlistExtendedEntrySize()},_e.getGTlist=function fe(De,ve,Ce,ge,Te,Le){let je=null;const ze=new B.PeInteger(Le);try{const Ee=B.PeGTlistExtended.prototype.getGTlist(De,ve,Ce,ge,Te,ze);if((Le=ze.val)&&(je=[Ee],Le>1)){const Ae=B.getPointer(Ee);for(let we=1;we<Le;we++)je.push(B.wrapPointer(Ae+he*we,B.PeGTlistExtendedEntry))}}finally{B.destroy(ze)}return je}})(ue||(ue={})),function(_e){_e.destroy=function he(ye){if(ye&&ye.length){for(const fe of ye)le(fe),fe.getEntries().forEach(De=>{le(De);const ve=De.getGeogtran();le(ve),ve.getParameters().forEach(le),[ve.getGeogcs1(),ve.getGeogcs2()].forEach(Ce=>{le(Ce);const ge=Ce.getDatum();le(ge),le(ge.getSpheroid()),le(Ce.getPrimem()),le(Ce.getUnit())})});B.PeGTlistExtendedEntry.prototype.Delete(ye[0])}}}(ae||(ae={})),function(_e){_e.geogToGeog=function he(ye,fe,De,ve,Ce){B.ensureCache.prepare();const ge=ce(De),Te=De===ge,Le=B.ensureFloat64(ge);let je=0;ve&&(je=B.ensureFloat64(ve));const ze=B._pe_geog_to_geog(B.getPointer(ye),fe,Le,je,Ce);return ze&&de(De,fe,Le,Te),ze}}(oe||(oe={})),function(_e){const he=(Le,je,ze,Ee,Ae,we)=>{let Be,Pe;switch(B.ensureCache.prepare(),Le){case"dd":Be=B._pe_geog_to_dd,Pe=G.PE_DD_MAX;break;case"ddm":Be=B._pe_geog_to_ddm,Pe=G.PE_DDM_MAX;break;case"dms":Be=B._pe_geog_to_dms,Pe=G.PE_DMS_MAX}let Oe=0;je&&(Oe=B.getPointer(je));const Ke=ce(Ee),Ve=B.ensureFloat64(Ke),Ne=ne(ze,Pe),Ie=Be(Oe,ze,Ve,Ae,B.ensureInt32(Ne));if(Ie)for(let We=0;We<ze;We++)we[We]=B.UTF8ToString(Ne[We]);return Ie},ye=(Le,je,ze,Ee,Ae)=>{let we;switch(B.ensureCache.prepare(),Le){case"dd":we=B._pe_dd_to_geog;break;case"ddm":we=B._pe_ddm_to_geog;break;case"dms":we=B._pe_dms_to_geog}let Be=0;je&&(Be=B.getPointer(je));const Pe=Ee.map(Ne=>B.ensureString(Ne)),Oe=B.ensureInt32(Pe),Ke=B.ensureFloat64(new Array(2*ze)),Ve=we(Be,ze,Oe,Ke);return Ve&&de(Ae,ze,Ke),Ve};_e.geogToDms=function fe(Le,je,ze,Ee,Ae){return he("dms",Le,je,ze,Ee,Ae)},_e.dmsToGeog=function De(Le,je,ze,Ee){return ye("dms",Le,je,ze,Ee)},_e.geogToDdm=function ve(Le,je,ze,Ee,Ae){return he("ddm",Le,je,ze,Ee,Ae)},_e.ddmToGeog=function Ce(Le,je,ze,Ee){return ye("ddm",Le,je,ze,Ee)},_e.geogToDd=function ge(Le,je,ze,Ee,Ae){return he("dd",Le,je,ze,Ee,Ae)},_e.ddToGeog=function Te(Le,je,ze,Ee){return ye("dd",Le,je,ze,Ee)}}(ie||(ie={})),function(_e){_e.init=function he(){_e.PE_MGRS_STYLE_NEW=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,_e.PE_MGRS_STYLE_OLD=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,_e.PE_MGRS_STYLE_AUTO=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,_e.PE_MGRS_180_ZONE_1_PLUS=B.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,_e.PE_MGRS_ADD_SPACES=B.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},_e.geogToMgrsExtended=function ye(De,ve,Ce,ge,Te,Le,je){B.ensureCache.prepare();let ze=0;De&&(ze=B.getPointer(De));const Ee=ce(Ce),Ae=B.ensureFloat64(Ee),we=ne(ve,G.PE_MGRS_MAX),Be=B.ensureInt32(we),Pe=B._pe_geog_to_mgrs_extended(ze,ve,Ae,ge,Te,Le,Be);if(Pe)for(let Oe=0;Oe<ve;Oe++)je[Oe]=B.UTF8ToString(we[Oe]);return Pe},_e.mgrsToGeogExtended=function fe(De,ve,Ce,ge,Te){B.ensureCache.prepare();let Le=0;De&&(Le=B.getPointer(De));const je=Ce.map(we=>B.ensureString(we)),ze=B.ensureInt32(je),Ee=B.ensureFloat64(new Array(2*ve)),Ae=B._pe_mgrs_to_geog_extended(Le,ve,ze,ge,Ee);return Ae&&de(Te,ve,Ee),Ae}}(X||(X={})),function(_e){_e.geogToUsng=function he(fe,De,ve,Ce,ge,Te,Le){B.ensureCache.prepare();let je=0;fe&&(je=B.getPointer(fe));const ze=ce(ve),Ee=B.ensureFloat64(ze),Ae=ne(De,G.PE_MGRS_MAX),we=B.ensureInt32(Ae),Be=B._pe_geog_to_usng(je,De,Ee,Ce,ge,Te,we);if(Be)for(let Pe=0;Pe<De;Pe++)Le[Pe]=B.UTF8ToString(Ae[Pe]);return Be},_e.usngToGeog=function ye(fe,De,ve,Ce){B.ensureCache.prepare();let ge=0;fe&&(ge=B.getPointer(fe));const Te=ve.map(Ee=>B.ensureString(Ee)),Le=B.ensureInt32(Te),je=B.ensureFloat64(new Array(2*De)),ze=B._pe_usng_to_geog(ge,De,Le,je);return ze&&de(Ce,De,je),ze}}(Z||(Z={})),function(_e){_e.init=function he(){_e.PE_UTM_OPTS_NONE=B.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,_e.PE_UTM_OPTS_ADD_SPACES=B.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,_e.PE_UTM_OPTS_NS=B.PeNotationUtm.prototype.PE_UTM_OPTS_NS},_e.geogToUtm=function ye(De,ve,Ce,ge,Te){B.ensureCache.prepare();let Le=0;De&&(Le=B.getPointer(De));const je=ce(Ce),ze=B.ensureFloat64(je),Ee=ne(ve,G.PE_UTM_MAX),Ae=B.ensureInt32(Ee),we=B._pe_geog_to_utm(Le,ve,ze,ge,Ae);if(we)for(let Be=0;Be<ve;Be++)Te[Be]=B.UTF8ToString(Ee[Be]);return we},_e.utmToGeog=function fe(De,ve,Ce,ge,Te){B.ensureCache.prepare();let Le=0;De&&(Le=B.getPointer(De));const je=Ce.map(we=>B.ensureString(we)),ze=B.ensureInt32(je),Ee=B.ensureFloat64(new Array(2*ve)),Ae=B._pe_utm_to_geog(Le,ve,ze,ge,Ee);return Ae&&de(Te,ve,Ee),Ae}}(Q||(Q={})),function(_e){const he=new Map;_e.init=function ye(){_e.PE_PCSINFO_OPTION_NONE=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,_e.PE_PCSINFO_OPTION_DOMAIN=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,_e.PE_POLE_OUTSIDE_BOUNDARY=B.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,_e.PE_POLE_POINT=B.PePCSInfo.prototype.PE_POLE_POINT},_e.generate=function fe(De,ve=_e.PE_PCSINFO_OPTION_DOMAIN){let Ce,ge;return he.has(De)&&(ge=he.get(De),ge[ve]&&(Ce=ge[ve])),Ce||(Ce=B.PePCSInfo.prototype.generate(De,ve),ge||(ge=[],he.set(De,ge)),ge[ve]=Ce),Ce}}(J||(J={})),function(_e){_e.versionString=function he(){return B.PeVersion.prototype.version_string()}}(se||(se={}));const me=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return B},isLoaded:U,isSupported:function W(){return!!(0,x.Z)("esri-wasm")},load:Y,get PeCSTransformations(){return H},get PeDefs(){return G},get PeFactory(){return $},get PeGCSExtent(){return re},get PeGTlistExtended(){return ue},get PeGTlistExtendedEntry(){return ae},get PeGTTransformations(){return oe},get PeNotationDms(){return ie},get PeNotationMgrs(){return X},get PeNotationUsng(){return Z},get PeNotationUtm(){return Q},get PePCSInfo(){return J},get PeVersion(){return se},_init:ee},Symbol.toStringTag,{value:"Module"}))},29840:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>ue,e:()=>$,f:()=>w,i:()=>G,p:()=>ae,r:()=>U,t:()=>B,w:()=>W});var D=T(62208),x=T(21726);function w(oe,ie){const X=ie&&ie.url&&ie.url.path;if(oe&&X&&(oe=(0,x.hF)(oe,X,{preserveProtocolRelative:!0}),ie.portalItem&&ie.readResourcePaths)){const Z=(0,x.PF)(oe,ie.portalItem.itemUrl);H.test(Z)&&ie.readResourcePaths.push(ie.portalItem.resourceFromPath(Z).path)}return re(oe,ie&&ie.portal)}function B(oe,ie,X=ue.YES){if(!oe)return oe;!(0,x.YP)(oe)&&ie&&ie.blockedRelativeUrls&&ie.blockedRelativeUrls.push(oe);let Z=(0,x.hF)(oe);if(ie){const Q=ie.verifyItemRelativeUrls&&ie.verifyItemRelativeUrls.rootPath||ie.url&&ie.url.path;if(Q){const J=re(Q,ie.portal);Z=(0,x.PF)(re(Z,ie.portal),J,J),Z!==oe&&ie.verifyItemRelativeUrls&&ie.verifyItemRelativeUrls.writtenUrls.push(Z)}}return Z=$(Z,ie&&ie.portal),(0,x.YP)(Z)&&(Z=(0,x.Fv)(Z)),ie?.resources&&ie?.portalItem&&!(0,x.YP)(Z)&&!(0,x.HK)(Z)&&X===ue.YES&&ie.resources.toKeep.push({resource:ie.portalItem.resourceFromPath(Z)}),Z}function U(oe,ie,X){return w(oe,X)}function W(oe,ie,X,Z){const Q=B(oe,Z);void 0!==Q&&(ie[X]=Q)}const Y=/\/items\/([^\/]+)\/resources\//,H=/^\.\/resources\//;function G(oe){const ie=(0,D.pC)(oe)?oe.match(Y):null;return(0,D.pC)(ie)?ie[1]:null}function $(oe,ie){return ie&&!ie.isPortal&&ie.urlKey&&ie.customBaseUrl?(0,x.Ie)(oe,`${ie.urlKey}.${ie.customBaseUrl}`,ie.portalHostname):oe}function re(oe,ie){if(!ie||ie.isPortal||!ie.urlKey||!ie.customBaseUrl)return oe;const X=`${ie.urlKey}.${ie.customBaseUrl}`,Z=(0,x.TI)();return(0,x.D6)(Z,`${Z.scheme}://${X}`)?(0,x.Ie)(oe,ie.portalHostname,X):(0,x.Ie)(oe,X,ie.portalHostname)}var ue,oe;(oe=ue||(ue={}))[oe.YES=0]="YES",oe[oe.NO=1]="NO";const ae=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:w,toJSON:B,read:U,write:W,itemIdFromResourceUrl:G,ensureMainOnlineDomain:$,get MarkKeep(){return ue}},Symbol.toStringTag,{value:"Module"}))},48977:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>le,c:()=>Q,g:()=>G,j:()=>ge,k:()=>se,m:()=>$,r:()=>Le,s:()=>H});var D=T(550),x=T(78451),w=T(28093),B=T(39863),U=T(84161),W=T(993);function H(Ve,Ne,Ie){Ie*=.5;const We=Math.sin(Ie);return Ve[0]=We*Ne[0],Ve[1]=We*Ne[1],Ve[2]=We*Ne[2],Ve[3]=Math.cos(Ie),Ve}function G(Ve,Ne){const Ie=2*Math.acos(Ne[3]),We=Math.sin(Ie/2);return We>B.E?(Ve[0]=Ne[0]/We,Ve[1]=Ne[1]/We,Ve[2]=Ne[2]/We):(Ve[0]=1,Ve[1]=0,Ve[2]=0),Ie}function $(Ve,Ne,Ie){const We=Ne[0],Se=Ne[1],He=Ne[2],$e=Ne[3],et=Ie[0],nt=Ie[1],it=Ie[2],Xe=Ie[3];return Ve[0]=We*Xe+$e*et+Se*it-He*nt,Ve[1]=Se*Xe+$e*nt+He*et-We*it,Ve[2]=He*Xe+$e*it+We*nt-Se*et,Ve[3]=$e*Xe-We*et-Se*nt-He*it,Ve}function ie(Ve,Ne,Ie,We){const Se=Ne[0],He=Ne[1],$e=Ne[2],et=Ne[3];let nt,it,Xe,rt,Ze,lt=Ie[0],st=Ie[1],Mt=Ie[2],Ft=Ie[3];return it=Se*lt+He*st+$e*Mt+et*Ft,it<0&&(it=-it,lt=-lt,st=-st,Mt=-Mt,Ft=-Ft),1-it>B.E?(nt=Math.acos(it),Xe=Math.sin(nt),rt=Math.sin((1-We)*nt)/Xe,Ze=Math.sin(We*nt)/Xe):(rt=1-We,Ze=We),Ve[0]=rt*Se+Ze*lt,Ve[1]=rt*He+Ze*st,Ve[2]=rt*$e+Ze*Mt,Ve[3]=rt*et+Ze*Ft,Ve}function Q(Ve,Ne){return Ve[0]=-Ne[0],Ve[1]=-Ne[1],Ve[2]=-Ne[2],Ve[3]=Ne[3],Ve}function J(Ve,Ne){const Ie=Ne[0]+Ne[4]+Ne[8];let We;if(Ie>0)We=Math.sqrt(Ie+1),Ve[3]=.5*We,We=.5/We,Ve[0]=(Ne[5]-Ne[7])*We,Ve[1]=(Ne[6]-Ne[2])*We,Ve[2]=(Ne[1]-Ne[3])*We;else{let Se=0;Ne[4]>Ne[0]&&(Se=1),Ne[8]>Ne[3*Se+Se]&&(Se=2);const He=(Se+1)%3,$e=(Se+2)%3;We=Math.sqrt(Ne[3*Se+Se]-Ne[3*He+He]-Ne[3*$e+$e]+1),Ve[Se]=.5*We,We=.5/We,Ve[3]=(Ne[3*He+$e]-Ne[3*$e+He])*We,Ve[He]=(Ne[3*He+Se]+Ne[3*Se+He])*We,Ve[$e]=(Ne[3*$e+Se]+Ne[3*Se+$e])*We}return Ve}function se(Ve,Ne,Ie,We){const Se=.5*Math.PI/180;Ne*=Se,Ie*=Se,We*=Se;const He=Math.sin(Ne),$e=Math.cos(Ne),et=Math.sin(Ie),nt=Math.cos(Ie),it=Math.sin(We),Xe=Math.cos(We);return Ve[0]=He*nt*Xe-$e*et*it,Ve[1]=$e*et*Xe+He*nt*it,Ve[2]=$e*nt*it-He*et*Xe,Ve[3]=$e*nt*Xe+He*et*it,Ve}const le=W.c,ne=W.s,ce=W.a,de=$,me=W.b,_e=W.d,he=W.l,ye=W.e,fe=ye,De=W.f,ve=De,Ce=W.n,ge=W.g,Te=W.h;function Le(Ve,Ne,Ie){const We=(0,U.e)(Ne,Ie);return We<-.999999?((0,U.f)(je,ze,Ne),(0,U.u)(je)<1e-6&&(0,U.f)(je,Ee,Ne),(0,U.n)(je,je),H(Ve,je,Math.PI),Ve):We>.999999?(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=1,Ve):((0,U.f)(je,Ne,Ie),Ve[0]=je[0],Ve[1]=je[1],Ve[2]=je[2],Ve[3]=1+We,Ce(Ve,Ve))}const je=(0,w.c)(),ze=(0,w.f)(1,0,0),Ee=(0,w.f)(0,1,0),we=(0,x.a)(),Be=(0,x.a)(),Oe=(0,D.c)();Object.freeze(Object.defineProperty({__proto__:null,identity:function Y(Ve){return Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=1,Ve},setAxisAngle:H,getAxisAngle:G,multiply:$,rotateX:function re(Ve,Ne,Ie){Ie*=.5;const We=Ne[0],Se=Ne[1],He=Ne[2],$e=Ne[3],et=Math.sin(Ie),nt=Math.cos(Ie);return Ve[0]=We*nt+$e*et,Ve[1]=Se*nt+He*et,Ve[2]=He*nt-Se*et,Ve[3]=$e*nt-We*et,Ve},rotateY:function ue(Ve,Ne,Ie){Ie*=.5;const We=Ne[0],Se=Ne[1],He=Ne[2],$e=Ne[3],et=Math.sin(Ie),nt=Math.cos(Ie);return Ve[0]=We*nt-He*et,Ve[1]=Se*nt+$e*et,Ve[2]=He*nt+We*et,Ve[3]=$e*nt-Se*et,Ve},rotateZ:function ae(Ve,Ne,Ie){Ie*=.5;const We=Ne[0],Se=Ne[1],He=Ne[2],$e=Ne[3],et=Math.sin(Ie),nt=Math.cos(Ie);return Ve[0]=We*nt+Se*et,Ve[1]=Se*nt-We*et,Ve[2]=He*nt+$e*et,Ve[3]=$e*nt-He*et,Ve},calculateW:function oe(Ve,Ne){const Ie=Ne[0],We=Ne[1],Se=Ne[2];return Ve[0]=Ie,Ve[1]=We,Ve[2]=Se,Ve[3]=Math.sqrt(Math.abs(1-Ie*Ie-We*We-Se*Se)),Ve},slerp:ie,random:function X(Ve){const Ne=(0,B.R)(),Ie=(0,B.R)(),We=(0,B.R)(),Se=Math.sqrt(1-Ne),He=Math.sqrt(Ne);return Ve[0]=Se*Math.sin(2*Math.PI*Ie),Ve[1]=Se*Math.cos(2*Math.PI*Ie),Ve[2]=He*Math.sin(2*Math.PI*We),Ve[3]=He*Math.cos(2*Math.PI*We),Ve},invert:function Z(Ve,Ne){const Ie=Ne[0],We=Ne[1],Se=Ne[2],He=Ne[3],$e=Ie*Ie+We*We+Se*Se+He*He,et=$e?1/$e:0;return Ve[0]=-Ie*et,Ve[1]=-We*et,Ve[2]=-Se*et,Ve[3]=He*et,Ve},conjugate:Q,fromMat3:J,fromEuler:se,str:function ee(Ve){return"quat("+Ve[0]+", "+Ve[1]+", "+Ve[2]+", "+Ve[3]+")"},copy:le,set:ne,add:ce,mul:de,scale:me,dot:_e,lerp:he,length:ye,len:fe,squaredLength:De,sqrLen:ve,normalize:Ce,exactEquals:ge,equals:Te,rotationTo:Le,sqlerp:function Ae(Ve,Ne,Ie,We,Se,He){return ie(we,Ne,Se,He),ie(Be,Ie,We,He),ie(Ve,we,Be,2*He*(1-He)),Ve},setAxes:function Pe(Ve,Ne,Ie,We){const Se=Oe;return Se[0]=Ie[0],Se[3]=Ie[1],Se[6]=Ie[2],Se[1]=We[0],Se[4]=We[1],Se[7]=We[2],Se[2]=-Ne[0],Se[5]=-Ne[1],Se[8]=-Ne[2],Ce(Ve,J(Ve,Se))}},Symbol.toStringTag,{value:"Module"}))},56729:(qe,xe,T)=>{"use strict";function D(){const W=new Float32Array(4);return W[3]=1,W}function x(W){const Y=new Float32Array(4);return Y[0]=W[0],Y[1]=W[1],Y[2]=W[2],Y[3]=W[3],Y}function B(W,Y){return new Float32Array(W,Y,4)}T.d(xe,{a:()=>x,b:()=>B,c:()=>D}),Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:function w(W,Y,H,G){const $=new Float32Array(4);return $[0]=W,$[1]=Y,$[2]=H,$[3]=G,$},createView:B},Symbol.toStringTag,{value:"Module"}))},78451:(qe,xe,T)=>{"use strict";function D(){return[0,0,0,1]}function x(Y){return[Y[0],Y[1],Y[2],Y[3]]}function B(Y,H){return new Float64Array(Y,H,4)}T.d(xe,{I:()=>U,a:()=>D,b:()=>x,c:()=>B});const U=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:function w(Y,H,G,$){return[Y,H,G,$]},createView:B,IDENTITY:U},Symbol.toStringTag,{value:"Module"}))},98148:(qe,xe,T)=>{"use strict";function x(B,U){const W=B.count;U||(U=new B.TypedArrayConstructor(W));for(let Y=0;Y<W;Y++)U[Y]=B.get(Y);return U}T.d(xe,{m:()=>x}),Object.freeze(Object.defineProperty({__proto__:null,copy:function D(B,U,W){const Y=B.typedBuffer,H=B.typedBufferStride,G=U.typedBuffer,$=U.typedBufferStride,re=W?W.count:U.count;let ue=(W&&W.dstIndex?W.dstIndex:0)*H,ae=(W&&W.srcIndex?W.srcIndex:0)*$;for(let oe=0;oe<re;++oe)Y[ue]=G[ae],ue+=H,ae+=$},makeDense:x},Symbol.toStringTag,{value:"Module"}))},97126:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>J,b:()=>X,c:()=>ie,d:()=>ee,e:()=>Ce,f:()=>ne,g:()=>le,h:()=>me,i:()=>he,j:()=>fe,k:()=>se,l:()=>Z,m:()=>Ee,s:()=>Be,t:()=>we,w:()=>Q}),T(8314);var x=T(63290),w=T(21286),B=T(62208),U=T(28347),W=T(84161),Y=T(28093),H=T(993),G=T(4794),$=T(78172),re=T(70562),ue=T(34054),ae=T(26242);const oe=x.Z.getLogger("esri.geometry.support.sphere");function ie(){return(0,G.c)()}function X(Pe,Oe=ie()){return(0,H.c)(Oe,Pe)}function Z(Pe,Oe){return(0,G.f)(Pe[0],Pe[1],Pe[2],Oe)}function Q(Pe){return Pe}function J(Pe){Pe[0]=Pe[1]=Pe[2]=Pe[3]=0}function se(Pe,Oe){return Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=Oe,Pe}function ee(Pe){return Pe[3]}function le(Pe){return Pe}function ne(Pe,Oe,Ke,Ve){return(0,G.f)(Pe,Oe,Ke,Ve)}function me(Pe,Oe,Ke){if((0,B.Wi)(Oe))return!1;const{origin:Ve,direction:Ne}=Oe,Ie=_e;Ie[0]=Ve[0]-Pe[0],Ie[1]=Ve[1]-Pe[1],Ie[2]=Ve[2]-Pe[2];const We=Ne[0]*Ne[0]+Ne[1]*Ne[1]+Ne[2]*Ne[2],Se=2*(Ne[0]*Ie[0]+Ne[1]*Ie[1]+Ne[2]*Ie[2]),He=Se*Se-4*We*(Ie[0]*Ie[0]+Ie[1]*Ie[1]+Ie[2]*Ie[2]-Pe[3]*Pe[3]);if(He<0)return!1;const $e=Math.sqrt(He);let et=(-Se-$e)/(2*We);const nt=(-Se+$e)/(2*We);return(et<0||nt<et&&nt>0)&&(et=nt),!(et<0||(Ke&&(Ke[0]=Ve[0]+Ne[0]*et,Ke[1]=Ve[1]+Ne[1]*et,Ke[2]=Ve[2]+Ne[2]*et),0))}const _e=(0,Y.c)();function he(Pe,Oe){return me(Pe,Oe,null)}function fe(Pe,Oe,Ke){const Ve=ae.WM.get(),Ne=ae.MP.get();(0,W.f)(Ve,Oe.origin,Oe.direction);const Ie=ee(Pe);(0,W.f)(Ke,Ve,Oe.origin),(0,W.g)(Ke,Ke,1/(0,W.l)(Ke)*Ie);const We=ge(Pe,Oe.origin),Se=(0,ue.EU)(Oe.origin,Ke);return(0,U.d)(Ne,Se+We,Ve),(0,W.m)(Ke,Ke,Ne),Ke}function ve(Pe,Oe,Ke){const Ve=(0,W.b)(ae.WM.get(),Oe,Pe),Ne=(0,W.g)(ae.WM.get(),Ve,Pe[3]/(0,W.l)(Ve));return(0,W.a)(Ke,Ne,Pe)}function Ce(Pe,Oe){const Ke=(0,W.b)(ae.WM.get(),Oe,Pe),Ve=(0,W.p)(Ke);return Math.sqrt(Math.abs(Ve-Pe[3]*Pe[3]))}function ge(Pe,Oe){const Ke=(0,W.b)(ae.WM.get(),Oe,Pe),Ve=(0,W.l)(Ke),Ne=ee(Pe),Ie=Ne+Math.abs(Ne-Ve);return(0,w.ZF)(Ne/Ie)}const Te=(0,Y.c)();function Le(Pe,Oe,Ke,Ve){const Ne=(0,W.b)(Te,Oe,Pe);switch(Ke){case $.R.X:{const Ie=(0,w.jE)(Ne,Te)[2];return(0,W.s)(Ve,-Math.sin(Ie),Math.cos(Ie),0)}case $.R.Y:{const Ie=(0,w.jE)(Ne,Te),We=Ie[1],Se=Ie[2],He=Math.sin(We);return(0,W.s)(Ve,-He*Math.cos(Se),-He*Math.sin(Se),Math.cos(We))}case $.R.Z:return(0,W.n)(Ve,Ne);default:return}}function je(Pe,Oe){const Ke=(0,W.b)(Ae,Oe,Pe);return(0,W.l)(Ke)-Pe[3]}function Ee(Pe,Oe){const Ke=(0,W.d)(Pe,Oe),Ve=ee(Pe);return Ke<=Ve*Ve}const Ae=(0,Y.c)(),we=ie(),Be=Object.freeze(Object.defineProperty({__proto__:null,create:ie,copy:X,fromCenterAndRadius:Z,wrap:Q,clear:J,fromRadius:se,getRadius:ee,getCenter:le,fromValues:ne,elevate:function ce(Pe,Oe,Ke){return Pe!==Ke&&(0,W.c)(Ke,Pe),Ke[3]=Pe[3]+Oe,Ke},setExtent:function de(Pe,Oe,Ke){return oe.error("sphere.setExtent is not yet supported"),Pe===Ke?Ke:X(Pe,Ke)},intersectRay:me,intersectsRay:he,intersectRayClosestSilhouette:function ye(Pe,Oe,Ke){if(me(Pe,Oe,Ke))return Ke;const Ve=fe(Pe,Oe,ae.WM.get());return(0,W.a)(Ke,Oe.origin,(0,W.g)(ae.WM.get(),Oe.direction,(0,W.i)(Oe.origin,Ve)/(0,W.l)(Oe.direction))),Ke},closestPointOnSilhouette:fe,closestPoint:function De(Pe,Oe,Ke){return me(Pe,Oe,Ke)?Ke:((0,re.JI)(Oe,Pe,Ke),ve(Pe,Ke,Ke))},projectPoint:ve,distanceToSilhouette:Ce,angleToSilhouette:ge,axisAt:Le,altitudeAt:je,setAltitudeAt:function ze(Pe,Oe,Ke,Ve){const Ne=je(Pe,Oe),Ie=Le(Pe,Oe,$.R.Z,Ae),We=(0,W.g)(Ae,Ie,Ke-Ne);return(0,W.a)(Ve,Oe,We)},containsPoint:Ee,tmpSphere:we},Symbol.toStringTag,{value:"Module"}))},17626:(qe,xe,T)=>{"use strict";function D(x,w,B,U){var W,Y=arguments.length,H=Y<3?w:null===U?U=Object.getOwnPropertyDescriptor(w,B):U;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)H=Reflect.decorate(x,w,B,U);else for(var G=x.length-1;G>=0;G--)(W=x[G])&&(H=(Y<3?W(H):Y>3?W(w,B,H):W(w,B))||H);return Y>3&&H&&Object.defineProperty(w,B,H),H}T.d(xe,{_:()=>D})},67831:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>w,b:()=>B,c:()=>x,d:()=>Ae,e:()=>Ce,f:()=>ae,g:()=>U,h:()=>le,i:()=>ee,j:()=>ie,k:()=>je,l:()=>ce,m:()=>ne,n:()=>J,o:()=>Z,p:()=>me,q:()=>Te,r:()=>fe,s:()=>X,t:()=>_e,u:()=>Q,v:()=>oe});var D=T(39863);function x(Oe,Ke){return Oe[0]=Ke[0],Oe[1]=Ke[1],Oe}function w(Oe,Ke,Ve){return Oe[0]=Ke,Oe[1]=Ve,Oe}function B(Oe,Ke,Ve){return Oe[0]=Ke[0]+Ve[0],Oe[1]=Ke[1]+Ve[1],Oe}function U(Oe,Ke,Ve){return Oe[0]=Ke[0]-Ve[0],Oe[1]=Ke[1]-Ve[1],Oe}function W(Oe,Ke,Ve){return Oe[0]=Ke[0]*Ve[0],Oe[1]=Ke[1]*Ve[1],Oe}function Y(Oe,Ke,Ve){return Oe[0]=Ke[0]/Ve[0],Oe[1]=Ke[1]/Ve[1],Oe}function ae(Oe,Ke,Ve){return Oe[0]=Ke[0]*Ve,Oe[1]=Ke[1]*Ve,Oe}function oe(Oe,Ke,Ve,Ne){return Oe[0]=Ke[0]+Ve[0]*Ne,Oe[1]=Ke[1]+Ve[1]*Ne,Oe}function ie(Oe,Ke){const Ve=Ke[0]-Oe[0],Ne=Ke[1]-Oe[1];return Math.sqrt(Ve*Ve+Ne*Ne)}function X(Oe,Ke){const Ve=Ke[0]-Oe[0],Ne=Ke[1]-Oe[1];return Ve*Ve+Ne*Ne}function Z(Oe){const Ke=Oe[0],Ve=Oe[1];return Math.sqrt(Ke*Ke+Ve*Ve)}function Q(Oe){const Ke=Oe[0],Ve=Oe[1];return Ke*Ke+Ve*Ve}function J(Oe,Ke){return Oe[0]=-Ke[0],Oe[1]=-Ke[1],Oe}function ee(Oe,Ke){const Ve=Ke[0],Ne=Ke[1];let Ie=Ve*Ve+Ne*Ne;return Ie>0&&(Ie=1/Math.sqrt(Ie),Oe[0]=Ke[0]*Ie,Oe[1]=Ke[1]*Ie),Oe}function le(Oe,Ke){return Oe[0]*Ke[0]+Oe[1]*Ke[1]}function ne(Oe,Ke,Ve){const Ne=Ke[0]*Ve[1]-Ke[1]*Ve[0];return Oe[0]=Oe[1]=0,Oe[2]=Ne,Oe}function ce(Oe,Ke,Ve,Ne){const Ie=Ke[0],We=Ke[1];return Oe[0]=Ie+Ne*(Ve[0]-Ie),Oe[1]=We+Ne*(Ve[1]-We),Oe}function me(Oe,Ke,Ve){const Ne=Ke[0],Ie=Ke[1];return Oe[0]=Ve[0]*Ne+Ve[2]*Ie,Oe[1]=Ve[1]*Ne+Ve[3]*Ie,Oe}function _e(Oe,Ke,Ve){const Ne=Ke[0],Ie=Ke[1];return Oe[0]=Ve[0]*Ne+Ve[2]*Ie+Ve[4],Oe[1]=Ve[1]*Ne+Ve[3]*Ie+Ve[5],Oe}function fe(Oe,Ke,Ve,Ne){const Ie=Ke[0]-Ve[0],We=Ke[1]-Ve[1],Se=Math.sin(Ne),He=Math.cos(Ne);return Oe[0]=Ie*He-We*Se+Ve[0],Oe[1]=Ie*Se+We*He+Ve[1],Oe}function Ce(Oe,Ke){return Oe[0]===Ke[0]&&Oe[1]===Ke[1]}function Te(Oe,Ke,Ve,Ne,Ie){let We=Ke[0]-Ve[0],Se=Ke[1]-Ve[1];const He=(Ne[0]*We+Ne[1]*Se)*(Ie-1);return We=Ne[0]*He,Se=Ne[1]*He,Oe[0]=Ke[0]+We,Oe[1]=Ke[1]+Se,Oe}const je=U,Ae=ie;Object.freeze(Object.defineProperty({__proto__:null,copy:x,set:w,add:B,subtract:U,multiply:W,divide:Y,ceil:function H(Oe,Ke){return Oe[0]=Math.ceil(Ke[0]),Oe[1]=Math.ceil(Ke[1]),Oe},floor:function G(Oe,Ke){return Oe[0]=Math.floor(Ke[0]),Oe[1]=Math.floor(Ke[1]),Oe},min:function $(Oe,Ke,Ve){return Oe[0]=Math.min(Ke[0],Ve[0]),Oe[1]=Math.min(Ke[1],Ve[1]),Oe},max:function re(Oe,Ke,Ve){return Oe[0]=Math.max(Ke[0],Ve[0]),Oe[1]=Math.max(Ke[1],Ve[1]),Oe},round:function ue(Oe,Ke){return Oe[0]=Math.round(Ke[0]),Oe[1]=Math.round(Ke[1]),Oe},scale:ae,scaleAndAdd:oe,distance:ie,squaredDistance:X,length:Z,squaredLength:Q,negate:J,inverse:function se(Oe,Ke){return Oe[0]=1/Ke[0],Oe[1]=1/Ke[1],Oe},normalize:ee,dot:le,cross:ne,lerp:ce,random:function de(Oe,Ke){Ke=Ke||1;const Ve=2*(0,D.R)()*Math.PI;return Oe[0]=Math.cos(Ve)*Ke,Oe[1]=Math.sin(Ve)*Ke,Oe},transformMat2:me,transformMat2d:_e,transformMat3:function he(Oe,Ke,Ve){const Ne=Ke[0],Ie=Ke[1];return Oe[0]=Ve[0]*Ne+Ve[3]*Ie+Ve[6],Oe[1]=Ve[1]*Ne+Ve[4]*Ie+Ve[7],Oe},transformMat4:function ye(Oe,Ke,Ve){const Ne=Ke[0],Ie=Ke[1];return Oe[0]=Ve[0]*Ne+Ve[4]*Ie+Ve[12],Oe[1]=Ve[1]*Ne+Ve[5]*Ie+Ve[13],Oe},rotate:fe,angle:function De(Oe,Ke){const Ve=Oe[0],Ne=Oe[1],Ie=Ke[0],We=Ke[1];let Se=Ve*Ve+Ne*Ne;Se>0&&(Se=1/Math.sqrt(Se));let He=Ie*Ie+We*We;He>0&&(He=1/Math.sqrt(He));const $e=(Ve*Ie+Ne*We)*Se*He;return $e>1?0:$e<-1?Math.PI:Math.acos($e)},str:function ve(Oe){return"vec2("+Oe[0]+", "+Oe[1]+")"},exactEquals:Ce,equals:function ge(Oe,Ke){const Ve=Oe[0],Ne=Oe[1],Ie=Ke[0],We=Ke[1];return Math.abs(Ve-Ie)<=D.E*Math.max(1,Math.abs(Ve),Math.abs(Ie))&&Math.abs(Ne-We)<=D.E*Math.max(1,Math.abs(Ne),Math.abs(We))},projectAndScale:Te,len:Z,sub:je,mul:W,div:Y,dist:Ae,sqrDist:X,sqrLen:Q},Symbol.toStringTag,{value:"Module"}))},35995:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>B,n:()=>w});var D=T(81096);function x(W,Y,H){const G=W.typedBuffer,$=W.typedBufferStride,re=Y.typedBuffer,ue=Y.typedBufferStride,ae=H?H.count:Y.count;let oe=(H&&H.dstIndex?H.dstIndex:0)*$,ie=(H&&H.srcIndex?H.srcIndex:0)*ue;for(let X=0;X<ae;++X)G[oe]=re[ie],G[oe+1]=re[ie+1],oe+=$,ie+=ue}function w(W,Y,H){const G=W.typedBuffer,$=W.typedBufferStride,re=Y.typedBuffer,ue=Y.typedBufferStride,ae=H?H.count:Y.count;let oe=(H&&H.dstIndex?H.dstIndex:0)*$,ie=(H&&H.srcIndex?H.srcIndex:0)*ue;if((0,D.U)(Y.elementType)){const X=(0,D.Op)(Y.elementType);if((0,D.B3)(Y.elementType))for(let Z=0;Z<ae;++Z)G[oe]=Math.max(re[ie]/X,-1),G[oe+1]=Math.max(re[ie+1]/X,-1),oe+=$,ie+=ue;else for(let Z=0;Z<ae;++Z)G[oe]=re[ie]/X,G[oe+1]=re[ie+1]/X,oe+=$,ie+=ue}else x(W,Y,H);return W}function B(W,Y,H,G){const $=W.typedBuffer,re=W.typedBufferStride,ue=G?.count??W.count;let ae=(G?.dstIndex??0)*re;for(let oe=0;oe<ue;++oe)$[ae]=Y,$[ae+1]=H,ae+=re}Object.freeze(Object.defineProperty({__proto__:null,copy:x,normalizeIntegerBuffer:w,fill:B},Symbol.toStringTag,{value:"Module"}))},9545:(qe,xe,T)=>{"use strict";function D(){return new Float32Array(2)}function w(oe,ie){const X=new Float32Array(2);return X[0]=oe,X[1]=ie,X}function U(){return D()}function W(){return w(1,1)}function Y(){return w(1,0)}function H(){return w(0,1)}T.d(xe,{c:()=>D,f:()=>w});const G=U(),$=W(),re=Y(),ue=H();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:function x(oe){const ie=new Float32Array(2);return ie[0]=oe[0],ie[1]=oe[1],ie},fromValues:w,createView:function B(oe,ie){return new Float32Array(oe,ie,2)},zeros:U,ones:W,unitX:Y,unitY:H,ZEROS:G,ONES:$,UNIT_X:re,UNIT_Y:ue},Symbol.toStringTag,{value:"Module"}))},99770:(qe,xe,T)=>{"use strict";function D(){return[0,0]}function x(ie){return[ie[0],ie[1]]}function w(ie,X){return[ie,X]}function B(ie){const X=[0,0],Z=Math.min(2,ie.length);for(let Q=0;Q<Z;++Q)X[Q]=ie[Q];return X}function U(ie,X){return new Float64Array(ie,X,2)}function Y(){return w(1,1)}function H(){return w(1,0)}function G(){return w(0,1)}T.d(xe,{O:()=>re,Z:()=>$,a:()=>D,b:()=>B,c:()=>U,d:()=>x,f:()=>w});const $=[0,0],re=Y(),ue=H(),ae=G();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,fromArray:B,createView:U,zeros:function W(){return[0,0]},ones:Y,unitX:H,unitY:G,ZEROS:$,ONES:re,UNIT_X:ue,UNIT_Y:ae},Symbol.toStringTag,{value:"Module"}))},84161:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>ue,B:()=>oe,C:()=>Q,D:()=>ae,E:()=>H,F:()=>He,G:()=>G,a:()=>W,b:()=>Y,c:()=>B,d:()=>se,e:()=>de,f:()=>me,g:()=>Z,h:()=>_e,i:()=>J,j:()=>Ne,k:()=>we,l:()=>w,m:()=>De,n:()=>ce,o:()=>le,p:()=>ee,q:()=>Ce,r:()=>Pe,s:()=>U,t:()=>ve,u:()=>We,v:()=>Oe,w:()=>Se,x:()=>Ie,z:()=>Be});var D=T(28093),x=T(39863);function w($e){const et=$e[0],nt=$e[1],it=$e[2];return Math.sqrt(et*et+nt*nt+it*it)}function B($e,et){return $e[0]=et[0],$e[1]=et[1],$e[2]=et[2],$e}function U($e,et,nt,it){return $e[0]=et,$e[1]=nt,$e[2]=it,$e}function W($e,et,nt){return $e[0]=et[0]+nt[0],$e[1]=et[1]+nt[1],$e[2]=et[2]+nt[2],$e}function Y($e,et,nt){return $e[0]=et[0]-nt[0],$e[1]=et[1]-nt[1],$e[2]=et[2]-nt[2],$e}function H($e,et,nt){return $e[0]=et[0]*nt[0],$e[1]=et[1]*nt[1],$e[2]=et[2]*nt[2],$e}function G($e,et,nt){return $e[0]=et[0]/nt[0],$e[1]=et[1]/nt[1],$e[2]=et[2]/nt[2],$e}function ue($e,et){return $e[0]=Math.abs(et[0]),$e[1]=Math.abs(et[1]),$e[2]=Math.abs(et[2]),$e}function ae($e,et){return $e[0]=Math.sign(et[0]),$e[1]=Math.sign(et[1]),$e[2]=Math.sign(et[2]),$e}function oe($e,et,nt){return $e[0]=Math.min(et[0],nt[0]),$e[1]=Math.min(et[1],nt[1]),$e[2]=Math.min(et[2],nt[2]),$e}function Z($e,et,nt){return $e[0]=et[0]*nt,$e[1]=et[1]*nt,$e[2]=et[2]*nt,$e}function Q($e,et,nt,it){return $e[0]=et[0]+nt[0]*it,$e[1]=et[1]+nt[1]*it,$e[2]=et[2]+nt[2]*it,$e}function J($e,et){const nt=et[0]-$e[0],it=et[1]-$e[1],Xe=et[2]-$e[2];return Math.sqrt(nt*nt+it*it+Xe*Xe)}function se($e,et){const nt=et[0]-$e[0],it=et[1]-$e[1],Xe=et[2]-$e[2];return nt*nt+it*it+Xe*Xe}function ee($e){const et=$e[0],nt=$e[1],it=$e[2];return et*et+nt*nt+it*it}function le($e,et){return $e[0]=-et[0],$e[1]=-et[1],$e[2]=-et[2],$e}function ce($e,et){const nt=et[0],it=et[1],Xe=et[2];let rt=nt*nt+it*it+Xe*Xe;return rt>0&&(rt=1/Math.sqrt(rt),$e[0]=et[0]*rt,$e[1]=et[1]*rt,$e[2]=et[2]*rt),$e}function de($e,et){return $e[0]*et[0]+$e[1]*et[1]+$e[2]*et[2]}function me($e,et,nt){const it=et[0],Xe=et[1],rt=et[2],Ze=nt[0],lt=nt[1],st=nt[2];return $e[0]=Xe*st-rt*lt,$e[1]=rt*Ze-it*st,$e[2]=it*lt-Xe*Ze,$e}function _e($e,et,nt,it){const Xe=et[0],rt=et[1],Ze=et[2];return $e[0]=Xe+it*(nt[0]-Xe),$e[1]=rt+it*(nt[1]-rt),$e[2]=Ze+it*(nt[2]-Ze),$e}function De($e,et,nt){const it=et[0],Xe=et[1],rt=et[2];return $e[0]=nt[0]*it+nt[4]*Xe+nt[8]*rt+nt[12],$e[1]=nt[1]*it+nt[5]*Xe+nt[9]*rt+nt[13],$e[2]=nt[2]*it+nt[6]*Xe+nt[10]*rt+nt[14],$e}function ve($e,et,nt){const it=et[0],Xe=et[1],rt=et[2];return $e[0]=it*nt[0]+Xe*nt[3]+rt*nt[6],$e[1]=it*nt[1]+Xe*nt[4]+rt*nt[7],$e[2]=it*nt[2]+Xe*nt[5]+rt*nt[8],$e}function Ce($e,et,nt){const it=nt[0],Xe=nt[1],rt=nt[2],lt=et[0],st=et[1],Mt=et[2];let Ft=Xe*Mt-rt*st,kt=rt*lt-it*Mt,wt=it*st-Xe*lt,zt=Xe*wt-rt*kt,Zt=rt*Ft-it*wt,ar=it*kt-Xe*Ft;const Pr=2*nt[3];return Ft*=Pr,kt*=Pr,wt*=Pr,zt*=2,Zt*=2,ar*=2,$e[0]=lt+Ft+zt,$e[1]=st+kt+Zt,$e[2]=Mt+wt+ar,$e}const ze=(0,D.c)(),Ee=(0,D.c)();function we($e,et){return $e[0]===et[0]&&$e[1]===et[1]&&$e[2]===et[2]}function Be($e,et){if($e===et)return!0;const nt=$e[0],it=$e[1],Xe=$e[2],rt=et[0],Ze=et[1],lt=et[2];return Math.abs(nt-rt)<=x.E*Math.max(1,Math.abs(nt),Math.abs(rt))&&Math.abs(it-Ze)<=x.E*Math.max(1,Math.abs(it),Math.abs(Ze))&&Math.abs(Xe-lt)<=x.E*Math.max(1,Math.abs(Xe),Math.abs(lt))}function Pe($e,et,nt){const it=nt[0]-et[0],Xe=nt[1]-et[1],rt=nt[2]-et[2];let Ze=it*it+Xe*Xe+rt*rt;return Ze>0?(Ze=1/Math.sqrt(Ze),$e[0]=it*Ze,$e[1]=Xe*Ze,$e[2]=rt*Ze,$e):($e[0]=0,$e[1]=0,$e[2]=0,$e)}const Oe=Y,Ne=J,Ie=se,We=w,Se=ee,He=Object.freeze(Object.defineProperty({__proto__:null,length:w,copy:B,set:U,add:W,subtract:Y,multiply:H,divide:G,ceil:function $($e,et){return $e[0]=Math.ceil(et[0]),$e[1]=Math.ceil(et[1]),$e[2]=Math.ceil(et[2]),$e},floor:function re($e,et){return $e[0]=Math.floor(et[0]),$e[1]=Math.floor(et[1]),$e[2]=Math.floor(et[2]),$e},abs:ue,sign:ae,min:oe,max:function ie($e,et,nt){return $e[0]=Math.max(et[0],nt[0]),$e[1]=Math.max(et[1],nt[1]),$e[2]=Math.max(et[2],nt[2]),$e},round:function X($e,et){return $e[0]=Math.round(et[0]),$e[1]=Math.round(et[1]),$e[2]=Math.round(et[2]),$e},scale:Z,scaleAndAdd:Q,distance:J,squaredDistance:se,squaredLength:ee,negate:le,inverse:function ne($e,et){return $e[0]=1/et[0],$e[1]=1/et[1],$e[2]=1/et[2],$e},normalize:ce,dot:de,cross:me,lerp:_e,hermite:function he($e,et,nt,it,Xe,rt){const Ze=rt*rt,lt=Ze*(2*rt-3)+1,st=Ze*(rt-2)+rt,Mt=Ze*(rt-1),Ft=Ze*(3-2*rt);return $e[0]=et[0]*lt+nt[0]*st+it[0]*Mt+Xe[0]*Ft,$e[1]=et[1]*lt+nt[1]*st+it[1]*Mt+Xe[1]*Ft,$e[2]=et[2]*lt+nt[2]*st+it[2]*Mt+Xe[2]*Ft,$e},bezier:function ye($e,et,nt,it,Xe,rt){const Ze=1-rt,lt=Ze*Ze,st=rt*rt,Mt=lt*Ze,Ft=3*rt*lt,kt=3*st*Ze,wt=st*rt;return $e[0]=et[0]*Mt+nt[0]*Ft+it[0]*kt+Xe[0]*wt,$e[1]=et[1]*Mt+nt[1]*Ft+it[1]*kt+Xe[1]*wt,$e[2]=et[2]*Mt+nt[2]*Ft+it[2]*kt+Xe[2]*wt,$e},random:function fe($e,et){et=et||1;const nt=2*(0,x.R)()*Math.PI,it=2*(0,x.R)()-1,Xe=Math.sqrt(1-it*it)*et;return $e[0]=Math.cos(nt)*Xe,$e[1]=Math.sin(nt)*Xe,$e[2]=it*et,$e},transformMat4:De,transformMat3:ve,transformQuat:Ce,rotateX:function ge($e,et,nt,it){const Xe=[],rt=[];return Xe[0]=et[0]-nt[0],Xe[1]=et[1]-nt[1],Xe[2]=et[2]-nt[2],rt[0]=Xe[0],rt[1]=Xe[1]*Math.cos(it)-Xe[2]*Math.sin(it),rt[2]=Xe[1]*Math.sin(it)+Xe[2]*Math.cos(it),$e[0]=rt[0]+nt[0],$e[1]=rt[1]+nt[1],$e[2]=rt[2]+nt[2],$e},rotateY:function Te($e,et,nt,it){const Xe=[],rt=[];return Xe[0]=et[0]-nt[0],Xe[1]=et[1]-nt[1],Xe[2]=et[2]-nt[2],rt[0]=Xe[2]*Math.sin(it)+Xe[0]*Math.cos(it),rt[1]=Xe[1],rt[2]=Xe[2]*Math.cos(it)-Xe[0]*Math.sin(it),$e[0]=rt[0]+nt[0],$e[1]=rt[1]+nt[1],$e[2]=rt[2]+nt[2],$e},rotateZ:function Le($e,et,nt,it){const Xe=[],rt=[];return Xe[0]=et[0]-nt[0],Xe[1]=et[1]-nt[1],Xe[2]=et[2]-nt[2],rt[0]=Xe[0]*Math.cos(it)-Xe[1]*Math.sin(it),rt[1]=Xe[0]*Math.sin(it)+Xe[1]*Math.cos(it),rt[2]=Xe[2],$e[0]=rt[0]+nt[0],$e[1]=rt[1]+nt[1],$e[2]=rt[2]+nt[2],$e},angle:function je($e,et){B(ze,$e),B(Ee,et),ce(ze,ze),ce(Ee,Ee);const nt=de(ze,Ee);return nt>1?0:nt<-1?Math.PI:Math.acos(nt)},str:function Ae($e){return"vec3("+$e[0]+", "+$e[1]+", "+$e[2]+")"},exactEquals:we,equals:Be,direction:Pe,sub:Oe,mul:H,div:G,dist:Ne,sqrDist:Ie,len:We,sqrLen:Se},Symbol.toStringTag,{value:"Module"}))},79800:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>w,b:()=>W,n:()=>U,s:()=>B,t:()=>x});var D=T(96286);function x(H,G,$){if(H.count!==G.count)return void D.c.error("source and destination buffers need to have the same number of elements");const re=H.count,ue=$[0],ae=$[1],oe=$[2],ie=$[4],X=$[5],Z=$[6],Q=$[8],J=$[9],se=$[10],ee=$[12],le=$[13],ne=$[14],ce=H.typedBuffer,de=H.typedBufferStride,me=G.typedBuffer,_e=G.typedBufferStride;for(let he=0;he<re;he++){const ye=he*de,fe=he*_e,De=me[fe],ve=me[fe+1],Ce=me[fe+2];ce[ye]=ue*De+ie*ve+Q*Ce+ee,ce[ye+1]=ae*De+X*ve+J*Ce+le,ce[ye+2]=oe*De+Z*ve+se*Ce+ne}}function w(H,G,$){if(H.count!==G.count)return void D.c.error("source and destination buffers need to have the same number of elements");const re=H.count,ue=$[0],ae=$[1],oe=$[2],ie=$[3],X=$[4],Z=$[5],Q=$[6],J=$[7],se=$[8],ee=H.typedBuffer,le=H.typedBufferStride,ne=G.typedBuffer,ce=G.typedBufferStride;for(let de=0;de<re;de++){const me=de*le,_e=de*ce,he=ne[_e],ye=ne[_e+1],fe=ne[_e+2];ee[me]=ue*he+ie*ye+Q*fe,ee[me+1]=ae*he+X*ye+J*fe,ee[me+2]=oe*he+Z*ye+se*fe}}function B(H,G,$){const re=Math.min(H.count,G.count),ue=H.typedBuffer,ae=H.typedBufferStride,oe=G.typedBuffer,ie=G.typedBufferStride;for(let X=0;X<re;X++){const Z=X*ae,Q=X*ie;ue[Z]=$*oe[Q],ue[Z+1]=$*oe[Q+1],ue[Z+2]=$*oe[Q+2]}}function U(H,G){const $=Math.min(H.count,G.count),re=H.typedBuffer,ue=H.typedBufferStride,ae=G.typedBuffer,oe=G.typedBufferStride;for(let ie=0;ie<$;ie++){const X=ie*ue,Z=ie*oe,Q=ae[Z],J=ae[Z+1],se=ae[Z+2],ee=Q*Q+J*J+se*se;if(ee>0){const le=1/Math.sqrt(ee);re[X]=le*Q,re[X+1]=le*J,re[X+2]=le*se}}}function W(H,G,$){const re=Math.min(H.count,G.count),ue=H.typedBuffer,ae=H.typedBufferStride,oe=G.typedBuffer,ie=G.typedBufferStride;for(let X=0;X<re;X++){const Z=X*ae,Q=X*ie;ue[Z]=oe[Q]>>$,ue[Z+1]=oe[Q+1]>>$,ue[Z+2]=oe[Q+2]>>$}}Object.freeze(Object.defineProperty({__proto__:null,transformMat4:x,transformMat3:w,scale:B,normalize:U,shiftRight:W},Symbol.toStringTag,{value:"Module"}))},9554:(qe,xe,T)=>{"use strict";function D(B,U,W){const Y=B.typedBuffer,H=B.typedBufferStride,G=U.typedBuffer,$=U.typedBufferStride,re=W?W.count:U.count;let ue=(W&&W.dstIndex?W.dstIndex:0)*H,ae=(W&&W.srcIndex?W.srcIndex:0)*$;for(let oe=0;oe<re;++oe)Y[ue]=G[ae],Y[ue+1]=G[ae+1],Y[ue+2]=G[ae+2],ue+=H,ae+=$}function x(B,U,W,Y,H){const G=B.typedBuffer,$=B.typedBufferStride,re=H?.count??B.count;let ue=(H?.dstIndex??0)*$;for(let ae=0;ae<re;++ae)G[ue]=U,G[ue+1]=W,G[ue+2]=Y,ue+=$}T.d(xe,{c:()=>D,f:()=>x}),Object.freeze(Object.defineProperty({__proto__:null,copy:D,fill:x},Symbol.toStringTag,{value:"Module"}))},14658:(qe,xe,T)=>{"use strict";function D(){return new Float32Array(3)}function x(X){const Z=new Float32Array(3);return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z}function w(X,Z,Q){const J=new Float32Array(3);return J[0]=X,J[1]=Z,J[2]=Q,J}function B(X,Z){return new Float32Array(X,Z,3)}function U(){return D()}function W(){return w(1,1,1)}function Y(){return w(1,0,0)}function H(){return w(0,1,0)}function G(){return w(0,0,1)}T.d(xe,{a:()=>x,b:()=>B,c:()=>D,f:()=>w,z:()=>U});const $=U(),re=W(),ue=Y(),ae=H(),oe=G();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,createView:B,zeros:U,ones:W,unitX:Y,unitY:H,unitZ:G,ZEROS:$,ONES:re,UNIT_X:ue,UNIT_Y:ae,UNIT_Z:oe},Symbol.toStringTag,{value:"Module"}))},28093:(qe,xe,T)=>{"use strict";function D(){return[0,0,0]}function x(Z){return[Z[0],Z[1],Z[2]]}function w(Z,Q,J){return[Z,Q,J]}function B(Z){const Q=[0,0,0],J=Math.min(3,Z.length);for(let se=0;se<J;++se)Q[se]=Z[se];return Q}function U(Z,Q){return new Float64Array(Z,Q,3)}function Y(){return w(1,1,1)}function H(){return w(1,0,0)}function G(){return w(0,1,0)}function $(){return w(0,0,1)}T.d(xe,{O:()=>ue,U:()=>ie,Z:()=>re,a:()=>x,b:()=>U,c:()=>D,d:()=>B,f:()=>w,u:()=>$});const re=[0,0,0],ue=Y(),ae=H(),oe=G(),ie=$();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,fromArray:B,createView:U,zeros:function W(){return[0,0,0]},ones:Y,unitX:H,unitY:G,unitZ:$,ZEROS:re,ONES:ue,UNIT_X:ae,UNIT_Y:oe,UNIT_Z:ie},Symbol.toStringTag,{value:"Module"}))},993:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>B,b:()=>ae,c:()=>x,d:()=>le,e:()=>Z,f:()=>Q,g:()=>he,h:()=>ye,i:()=>X,l:()=>ne,n:()=>ee,s:()=>w,t:()=>de,v:()=>je});var D=T(39863);function x(ze,Ee){return ze[0]=Ee[0],ze[1]=Ee[1],ze[2]=Ee[2],ze[3]=Ee[3],ze}function w(ze,Ee,Ae,we,Be){return ze[0]=Ee,ze[1]=Ae,ze[2]=we,ze[3]=Be,ze}function B(ze,Ee,Ae){return ze[0]=Ee[0]+Ae[0],ze[1]=Ee[1]+Ae[1],ze[2]=Ee[2]+Ae[2],ze[3]=Ee[3]+Ae[3],ze}function U(ze,Ee,Ae){return ze[0]=Ee[0]-Ae[0],ze[1]=Ee[1]-Ae[1],ze[2]=Ee[2]-Ae[2],ze[3]=Ee[3]-Ae[3],ze}function W(ze,Ee,Ae){return ze[0]=Ee[0]*Ae[0],ze[1]=Ee[1]*Ae[1],ze[2]=Ee[2]*Ae[2],ze[3]=Ee[3]*Ae[3],ze}function Y(ze,Ee,Ae){return ze[0]=Ee[0]/Ae[0],ze[1]=Ee[1]/Ae[1],ze[2]=Ee[2]/Ae[2],ze[3]=Ee[3]/Ae[3],ze}function ae(ze,Ee,Ae){return ze[0]=Ee[0]*Ae,ze[1]=Ee[1]*Ae,ze[2]=Ee[2]*Ae,ze[3]=Ee[3]*Ae,ze}function ie(ze,Ee){const Ae=Ee[0]-ze[0],we=Ee[1]-ze[1],Be=Ee[2]-ze[2],Pe=Ee[3]-ze[3];return Math.sqrt(Ae*Ae+we*we+Be*Be+Pe*Pe)}function X(ze,Ee){const Ae=Ee[0]-ze[0],we=Ee[1]-ze[1],Be=Ee[2]-ze[2],Pe=Ee[3]-ze[3];return Ae*Ae+we*we+Be*Be+Pe*Pe}function Z(ze){const Ee=ze[0],Ae=ze[1],we=ze[2],Be=ze[3];return Math.sqrt(Ee*Ee+Ae*Ae+we*we+Be*Be)}function Q(ze){const Ee=ze[0],Ae=ze[1],we=ze[2],Be=ze[3];return Ee*Ee+Ae*Ae+we*we+Be*Be}function ee(ze,Ee){const Ae=Ee[0],we=Ee[1],Be=Ee[2],Pe=Ee[3];let Oe=Ae*Ae+we*we+Be*Be+Pe*Pe;return Oe>0&&(Oe=1/Math.sqrt(Oe),ze[0]=Ae*Oe,ze[1]=we*Oe,ze[2]=Be*Oe,ze[3]=Pe*Oe),ze}function le(ze,Ee){return ze[0]*Ee[0]+ze[1]*Ee[1]+ze[2]*Ee[2]+ze[3]*Ee[3]}function ne(ze,Ee,Ae,we){const Be=Ee[0],Pe=Ee[1],Oe=Ee[2],Ke=Ee[3];return ze[0]=Be+we*(Ae[0]-Be),ze[1]=Pe+we*(Ae[1]-Pe),ze[2]=Oe+we*(Ae[2]-Oe),ze[3]=Ke+we*(Ae[3]-Ke),ze}function de(ze,Ee,Ae){const we=Ee[0],Be=Ee[1],Pe=Ee[2],Oe=Ee[3];return ze[0]=Ae[0]*we+Ae[4]*Be+Ae[8]*Pe+Ae[12]*Oe,ze[1]=Ae[1]*we+Ae[5]*Be+Ae[9]*Pe+Ae[13]*Oe,ze[2]=Ae[2]*we+Ae[6]*Be+Ae[10]*Pe+Ae[14]*Oe,ze[3]=Ae[3]*we+Ae[7]*Be+Ae[11]*Pe+Ae[15]*Oe,ze}function he(ze,Ee){return ze[0]===Ee[0]&&ze[1]===Ee[1]&&ze[2]===Ee[2]&&ze[3]===Ee[3]}function ye(ze,Ee){const Ae=ze[0],we=ze[1],Be=ze[2],Pe=ze[3],Oe=Ee[0],Ke=Ee[1],Ve=Ee[2],Ne=Ee[3];return Math.abs(Ae-Oe)<=D.E*Math.max(1,Math.abs(Ae),Math.abs(Oe))&&Math.abs(we-Ke)<=D.E*Math.max(1,Math.abs(we),Math.abs(Ke))&&Math.abs(Be-Ve)<=D.E*Math.max(1,Math.abs(Be),Math.abs(Ve))&&Math.abs(Pe-Ne)<=D.E*Math.max(1,Math.abs(Pe),Math.abs(Ne))}const je=Object.freeze(Object.defineProperty({__proto__:null,copy:x,set:w,add:B,subtract:U,multiply:W,divide:Y,ceil:function H(ze,Ee){return ze[0]=Math.ceil(Ee[0]),ze[1]=Math.ceil(Ee[1]),ze[2]=Math.ceil(Ee[2]),ze[3]=Math.ceil(Ee[3]),ze},floor:function G(ze,Ee){return ze[0]=Math.floor(Ee[0]),ze[1]=Math.floor(Ee[1]),ze[2]=Math.floor(Ee[2]),ze[3]=Math.floor(Ee[3]),ze},min:function $(ze,Ee,Ae){return ze[0]=Math.min(Ee[0],Ae[0]),ze[1]=Math.min(Ee[1],Ae[1]),ze[2]=Math.min(Ee[2],Ae[2]),ze[3]=Math.min(Ee[3],Ae[3]),ze},max:function re(ze,Ee,Ae){return ze[0]=Math.max(Ee[0],Ae[0]),ze[1]=Math.max(Ee[1],Ae[1]),ze[2]=Math.max(Ee[2],Ae[2]),ze[3]=Math.max(Ee[3],Ae[3]),ze},round:function ue(ze,Ee){return ze[0]=Math.round(Ee[0]),ze[1]=Math.round(Ee[1]),ze[2]=Math.round(Ee[2]),ze[3]=Math.round(Ee[3]),ze},scale:ae,scaleAndAdd:function oe(ze,Ee,Ae,we){return ze[0]=Ee[0]+Ae[0]*we,ze[1]=Ee[1]+Ae[1]*we,ze[2]=Ee[2]+Ae[2]*we,ze[3]=Ee[3]+Ae[3]*we,ze},distance:ie,squaredDistance:X,length:Z,squaredLength:Q,negate:function J(ze,Ee){return ze[0]=-Ee[0],ze[1]=-Ee[1],ze[2]=-Ee[2],ze[3]=-Ee[3],ze},inverse:function se(ze,Ee){return ze[0]=1/Ee[0],ze[1]=1/Ee[1],ze[2]=1/Ee[2],ze[3]=1/Ee[3],ze},normalize:ee,dot:le,lerp:ne,random:function ce(ze,Ee){let Ae,we,Be,Pe,Oe,Ke;Ee=Ee||1;do{Ae=2*(0,D.R)()-1,we=2*(0,D.R)()-1,Oe=Ae*Ae+we*we}while(Oe>=1);do{Be=2*(0,D.R)()-1,Pe=2*(0,D.R)()-1,Ke=Be*Be+Pe*Pe}while(Ke>=1);const Ve=Math.sqrt((1-Oe)/Ke);return ze[0]=Ee*Ae,ze[1]=Ee*we,ze[2]=Ee*Be*Ve,ze[3]=Ee*Pe*Ve,ze},transformMat4:de,transformQuat:function me(ze,Ee,Ae){const we=Ee[0],Be=Ee[1],Pe=Ee[2],Oe=Ae[0],Ke=Ae[1],Ve=Ae[2],Ne=Ae[3],Ie=Ne*we+Ke*Pe-Ve*Be,We=Ne*Be+Ve*we-Oe*Pe,Se=Ne*Pe+Oe*Be-Ke*we,He=-Oe*we-Ke*Be-Ve*Pe;return ze[0]=Ie*Ne+He*-Oe+We*-Ve-Se*-Ke,ze[1]=We*Ne+He*-Ke+Se*-Oe-Ie*-Ve,ze[2]=Se*Ne+He*-Ve+Ie*-Ke-We*-Oe,ze[3]=Ee[3],ze},str:function _e(ze){return"vec4("+ze[0]+", "+ze[1]+", "+ze[2]+", "+ze[3]+")"},exactEquals:he,equals:ye,sub:U,mul:W,div:Y,dist:ie,sqrDist:X,len:Z,sqrLen:Q},Symbol.toStringTag,{value:"Module"}))},63657:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>W,n:()=>B,s:()=>U,t:()=>w});var D=T(96286);function w(H,G,$){if(H.count!==G.count)return void D.c.error("source and destination buffers need to have the same number of elements");const re=H.count,ue=$[0],ae=$[1],oe=$[2],ie=$[3],X=$[4],Z=$[5],Q=$[6],J=$[7],se=$[8],ee=H.typedBuffer,le=H.typedBufferStride,ne=G.typedBuffer,ce=G.typedBufferStride;for(let de=0;de<re;de++){const me=de*le,_e=de*ce,he=ne[_e],ye=ne[_e+1],fe=ne[_e+2],De=ne[_e+3];ee[me]=ue*he+ie*ye+Q*fe,ee[me+1]=ae*he+X*ye+J*fe,ee[me+2]=oe*he+Z*ye+se*fe,ee[me+3]=De}}function B(H,G){const $=Math.min(H.count,G.count),re=H.typedBuffer,ue=H.typedBufferStride,ae=G.typedBuffer,oe=G.typedBufferStride;for(let ie=0;ie<$;ie++){const X=ie*ue,Z=ie*oe,Q=ae[Z],J=ae[Z+1],se=ae[Z+2],ee=Q*Q+J*J+se*se;if(ee>0){const le=1/Math.sqrt(ee);re[X]=le*Q,re[X+1]=le*J,re[X+2]=le*se}}}function U(H,G,$){const re=Math.min(H.count,G.count),ue=H.typedBuffer,ae=H.typedBufferStride,oe=G.typedBuffer,ie=G.typedBufferStride;for(let X=0;X<re;X++){const Z=X*ae,Q=X*ie;ue[Z]=$*oe[Q],ue[Z+1]=$*oe[Q+1],ue[Z+2]=$*oe[Q+2],ue[Z+3]=$*oe[Q+3]}}function W(H,G,$){const re=Math.min(H.count,G.count),ue=H.typedBuffer,ae=H.typedBufferStride,oe=G.typedBuffer,ie=G.typedBufferStride;for(let X=0;X<re;X++){const Z=X*ae,Q=X*ie;ue[Z]=oe[Q]>>$,ue[Z+1]=oe[Q+1]>>$,ue[Z+2]=oe[Q+2]>>$,ue[Z+3]=oe[Q+3]>>$}}Object.freeze(Object.defineProperty({__proto__:null,transformMat4:function x(H,G,$){if(H.count!==G.count)return void D.c.error("source and destination buffers need to have the same number of elements");const re=H.count,ue=$[0],ae=$[1],oe=$[2],ie=$[3],X=$[4],Z=$[5],Q=$[6],J=$[7],se=$[8],ee=$[9],le=$[10],ne=$[11],ce=$[12],de=$[13],me=$[14],_e=$[15],he=H.typedBuffer,ye=H.typedBufferStride,fe=G.typedBuffer,De=G.typedBufferStride;for(let ve=0;ve<re;ve++){const Ce=ve*ye,ge=ve*De,Te=fe[ge],Le=fe[ge+1],je=fe[ge+2],ze=fe[ge+3];he[Ce]=ue*Te+X*Le+se*je+ce*ze,he[Ce+1]=ae*Te+Z*Le+ee*je+de*ze,he[Ce+2]=oe*Te+Q*Le+le*je+me*ze,he[Ce+3]=ie*Te+J*Le+ne*je+_e*ze}},transformMat3:w,normalize:B,scale:U,shiftRight:W},Symbol.toStringTag,{value:"Module"}))},63470:(qe,xe,T)=>{"use strict";function D(B,U,W){const Y=B.typedBuffer,H=B.typedBufferStride,G=U.typedBuffer,$=U.typedBufferStride,re=W?W.count:U.count;let ue=(W&&W.dstIndex?W.dstIndex:0)*H,ae=(W&&W.srcIndex?W.srcIndex:0)*$;for(let oe=0;oe<re;++oe)Y[ue]=G[ae],Y[ue+1]=G[ae+1],Y[ue+2]=G[ae+2],Y[ue+3]=G[ae+3],ue+=H,ae+=$}function x(B,U,W,Y,H,G){const $=B.typedBuffer,re=B.typedBufferStride,ue=G?.count??B.count;let ae=(G?.dstIndex??0)*re;for(let oe=0;oe<ue;++oe)$[ae]=U,$[ae+1]=W,$[ae+2]=Y,$[ae+3]=H,ae+=re}T.d(xe,{c:()=>D,f:()=>x}),Object.freeze(Object.defineProperty({__proto__:null,copy:D,fill:x},Symbol.toStringTag,{value:"Module"}))},67709:(qe,xe,T)=>{"use strict";function D(){return new Float32Array(4)}function x(Q){const J=new Float32Array(4);return J[0]=Q[0],J[1]=Q[1],J[2]=Q[2],J[3]=Q[3],J}function w(Q,J,se,ee){const le=new Float32Array(4);return le[0]=Q,le[1]=J,le[2]=se,le[3]=ee,le}function U(){return D()}function W(){return w(1,1,1,1)}function Y(){return w(1,0,0,0)}function H(){return w(0,1,0,0)}function G(){return w(0,0,1,0)}function $(){return w(0,0,0,1)}T.d(xe,{a:()=>x,c:()=>D,f:()=>w});const re=U(),ue=W(),ae=Y(),oe=H(),ie=G(),X=$();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,createView:function B(Q,J){return new Float32Array(Q,J,4)},zeros:U,ones:W,unitX:Y,unitY:H,unitZ:G,unitW:$,ZEROS:re,ONES:ue,UNIT_X:ae,UNIT_Y:oe,UNIT_Z:ie,UNIT_W:X},Symbol.toStringTag,{value:"Module"}))},4794:(qe,xe,T)=>{"use strict";function D(){return[0,0,0,0]}function x(J){return[J[0],J[1],J[2],J[3]]}function w(J,se,ee,le){return[J,se,ee,le]}function B(J){const se=[0,0,0,0],ee=Math.min(4,J.length);for(let le=0;le<ee;++le)se[le]=J[le];return se}function U(J,se){return new Float64Array(J,se,4)}function Y(){return w(1,1,1,1)}function H(){return w(1,0,0,0)}function G(){return w(0,1,0,0)}function $(){return w(0,0,1,0)}function re(){return w(0,0,0,1)}T.d(xe,{O:()=>ae,Z:()=>ue,a:()=>U,b:()=>B,c:()=>D,d:()=>x,f:()=>w});const ue=[0,0,0,0],ae=Y(),oe=H(),ie=G(),X=$(),Z=re();Object.freeze(Object.defineProperty({__proto__:null,create:D,clone:x,fromValues:w,fromArray:B,createView:U,zeros:function W(){return[0,0,0,0]},ones:Y,unitX:H,unitY:G,unitZ:$,unitW:re,ZEROS:ue,ONES:ae,UNIT_X:oe,UNIT_Y:ie,UNIT_Z:X,UNIT_W:Z},Symbol.toStringTag,{value:"Module"}))},20414:(qe,xe,T)=>{"use strict";T.d(xe,{B7:()=>W,St:()=>x,VL:()=>B,h$:()=>w,rW:()=>Y});const D={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function x(H){return D[H]||D[H.toLowerCase()]}function w(H){return D[H]??D[H.toLowerCase()]}function B(H){return[...w(H)]}function U(H,G,$){$<0&&++$,$>1&&--$;const re=6*$;return re<1?H+(G-H)*re:2*$<1?G:3*$<2?H+(G-H)*(2/3-$)*6:H}function W(H,G,$,re=1){const ue=(H%360+360)%360/360,ae=$<=.5?$*(G+1):$+G-$*G,oe=2*$-ae;return[Math.round(255*U(oe,ae,ue+1/3)),Math.round(255*U(oe,ae,ue)),Math.round(255*U(oe,ae,ue-1/3)),re]}function Y(H){const G=H.length>5,$=G?8:4,re=(1<<$)-1,ue=G?1:17,ae=G?9===H.length:5===H.length;let oe=Number("0x"+H.substr(1));if(isNaN(oe))return null;const ie=[0,0,0,1];let X;return ae&&(X=oe&re,oe>>=$,ie[3]=ue*X/255),X=oe&re,oe>>=$,ie[2]=ue*X,X=oe&re,oe>>=$,ie[1]=ue*X,X=oe&re,oe>>=$,ie[0]=ue*X,ie}},59318:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w}),T(8314);var x=T(94113);const w={apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&((0,x.RH)(w,globalThis.esriConfig,!0),delete w.has),w.assetsPath||(w.assetsPath=`https://js.arcgis.com/${"4.24.7".slice(0,-2)}/@arcgis/core/assets`),w.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(w,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),w.request.corsEnabledServers=[],w.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0}},14517:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>fe});var D=T(56354),x=T(62208),w=T(34595),B=T(44648),U=T(34117),Y=(T(8314),T(58817)),H=T(63290),G=T(27899),$=T(31283),re=T(36082),ue=T(2345),ae=T(12196);class oe{constructor(ve,Ce,ge){this.properties=ve,this.propertyName=Ce,this.metadata=ge,this._observers=null,this._accessed=null,this._handles=null,this.flags=ue.v.Dirty|(ge.nonNullable?ue.v.NonNullable:0)|(ge.hasOwnProperty("value")?ue.v.HasDefaultValue:0)|(void 0===ge.get?ue.v.DepTrackingInitialized:0)|(void 0===ge.dependsOn?ue.v.AutoTracked:0)}destroy(){if(this.flags&ue.v.Dirty&&this._observers){const ve=this._observers.slice();for(const Ce of ve)Ce.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){(0,re.it)(this);const ve=this.properties.store,Ce=this.propertyName,ge=this.flags,Te=ve.get(Ce);if(ge&ue.v.Computing||~ge&ue.v.Dirty&&ve.has(Ce))return Te;this.flags|=ue.v.Computing;const Le=this.properties.host;let je;ge&ue.v.AutoTracked?je=(0,re.LJ)(this,this.metadata.get,Le):((0,re.GF)(Le,this),je=this.metadata.get.call(Le)),ve.set(Ce,je,$.s3.COMPUTED);const ze=ve.get(Ce);return ze===Te?this.flags&=~ue.v.Dirty:(0,re.gb)(this.commit,this),this.flags&=~ue.v.Computing,ze}onObservableAccessed(ve){ve!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(ve)||this._accessed.push(ve))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=ue.v.DepTrackingInitialized;const ve=this._accessed;if(null===ve)return;let Ce=this._handles;null===Ce&&(Ce=this._handles=[]);for(let ge=0;ge<ve.length;++ge)Ce.push(ve[ge].observe(this));ve.length=0}observe(ve){return null===this._observers&&(this._observers=[]),this._observers.includes(ve)||this._observers.push(ve),new ae.X(this._observers,ve)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&ue.v.Overriden&&(this.flags|=ue.v.Dirty);const ve=this._observers;if(null!==ve)for(let Ce=0;Ce<ve.length;++Ce)ve[Ce].onInvalidated()}commit(){this.flags&=~ue.v.Dirty,this.onCommitted()}onCommitted(){if(null===this._observers)return;const ve=this._observers.slice();for(let Ce=0;Ce<ve.length;++Ce)ve[Ce].onCommitted()}_clearObservationHandles(){const ve=this._handles;if(null!==ve){for(let Ce=0;Ce<ve.length;++Ce)ve[Ce].remove();ve.length=0}}}class ie{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(ve){const Ce=new ie;return this._values.forEach((ge,Te)=>{ve&&ve.has(Te)||Ce.set(Te,(0,Y.d9)(ge))}),Ce}get(ve){return this._values.get(ve)}originOf(){return $.s3.USER}keys(){return[...this._values.keys()]}set(ve,Ce){this._values.set(ve,Ce)}delete(ve){this._values.delete(ve)}has(ve){return this._values.has(ve)}forEach(ve){this._values.forEach(ve)}}var X=T(52323);function Z(De,ve,Ce){return void 0!==De}function Q(De,ve,Ce,ge){return!(void 0===De||null==Ce&&De.flags&ue.v.NonNullable)}H.Z.getLogger("esri.core.accessorSupport.Properties");class se{constructor(ve){this.host=ve,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=B.F.INITIALIZING,this.store=new ie,this._origin=$.s3.USER;const Ce=this.host.constructor.__accessorMetadata__,ge=Ce.properties;for(const Te in ge){const Le=new oe(this,Te,ge[Te]);this.properties.set(Te,Le)}this.metadatas=ge,this._autoDestroy=Ce.autoDestroy}initialize(){this.lifecycle=B.F.CONSTRUCTING}constructed(){this.lifecycle=B.F.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[ve,Ce]of this.properties){const ge=this.internalGet(ve);ge&&(De=ge)&&"function"==typeof De.destroy&&(ge.destroy(),~Ce.flags&ue.v.NonNullable&&this._internalSet(Ce,null)),Ce.destroy()}else for(const[ve,Ce]of this.properties)Ce.destroy();var De}get initialized(){return this.lifecycle!==B.F.INITIALIZING}get(ve){const Ce=this.properties.get(ve);if(Ce.metadata.get)return Ce.getComputed();(0,re.it)(Ce);const ge=this.store;return ge.has(ve)?ge.get(ve):Ce.metadata.value}originOf(ve){const Ce=this.store.originOf(ve);if(void 0===Ce){const ge=this.properties.get(ve);if(void 0!==ge&&ge.flags&ue.v.HasDefaultValue)return"defaults"}return(0,$.x3)(Ce)}has(ve){return!!this.properties.has(ve)&&this.store.has(ve)}keys(){return[...this.properties.keys()]}internalGet(ve){const Ce=this.properties.get(ve);if(Z(Ce))return this.store.has(ve)?this.store.get(ve):Ce.metadata.value}internalSet(ve,Ce){const ge=this.properties.get(ve);Z(ge)&&this._internalSet(ge,Ce)}getDependsInfo(ve,Ce,ge){const Te=this.properties.get(Ce);if(!Z(Te))return"";const Le=new Set,je=(0,re.LJ)({onObservableAccessed:Ee=>Le.add(Ee),onTrackingEnd:()=>{}},()=>Te.metadata.get?.call(ve));let ze=`${ge}${ve.declaredClass.split(".").pop()}.${Ce}: ${je}\n`;if(0===Le.size)return ze;ge+="  ";for(const Ee of Le){if(!(Ee instanceof oe))continue;const Ae=Ee.properties.host,we=Ee.propertyName,Be=(0,X.vw)(Ae);ze+=Be?Be.getDependsInfo(Ae,we,ge):`${ge}${we}: undefined\n`}return ze}setAtOrigin(ve,Ce,ge){const Te=this.properties.get(ve);if(Z(Te))return this._setAtOrigin(Te,Ce,ge)}isOverridden(ve){const Ce=this.properties.get(ve);return void 0!==Ce&&!!(Ce.flags&ue.v.Overriden)}clearOverride(ve){const Ce=this.properties.get(ve);void 0!==Ce&&Ce.flags&ue.v.Overriden&&(Ce.flags&=~ue.v.Overriden,Ce.notifyChange())}override(ve,Ce){const ge=this.properties.get(ve);if(!Q(ge,0,Ce))return;const Te=ge.metadata.cast;if(Te){const Le=this._cast(Te,Ce),{valid:je,value:ze}=Le;if(le.release(Le),!je)return;Ce=ze}ge.flags|=ue.v.Overriden,this._internalSet(ge,Ce)}set(ve,Ce){const ge=this.properties.get(ve);if(!Q(ge,0,Ce))return;const Te=ge.metadata.cast;if(Te){const je=this._cast(Te,Ce),{valid:ze,value:Ee}=je;if(le.release(je),!ze)return;Ce=Ee}const Le=ge.metadata.set;Le?Le.call(this.host,Ce):this._internalSet(ge,Ce)}setDefaultOrigin(ve){this._origin=(0,$.M9)(ve)}getDefaultOrigin(){return(0,$.x3)(this._origin)}notifyChange(ve){const Ce=this.properties.get(ve);void 0!==Ce&&Ce.notifyChange()}invalidate(ve){const Ce=this.properties.get(ve);void 0!==Ce&&Ce.invalidate()}commit(ve){const Ce=this.properties.get(ve);void 0!==Ce&&Ce.commit()}_internalSet(ve,Ce){this._setAtOrigin(ve,Ce,this.lifecycle!==B.F.INITIALIZING?this._origin:$.s3.DEFAULTS)}_setAtOrigin(ve,Ce,ge){const Te=this.store,Le=ve.propertyName;Te.has(Le,ge)&&(0,Y.fS)(Ce,Te.get(Le))&&~ve.flags&ue.v.Overriden&&ge===Te.originOf(Le)||(ve.invalidate(),Te.set(Le,Ce,ge),ve.commit(),(0,re.mS)(this.host,ve))}_cast(ve,Ce){const ge=le.acquire();return ge.valid=!0,ge.value=Ce,ve&&(ge.value=ve.call(this.host,Ce,ge)),ge}}const le=new G.Z(class ee{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var _e,ne=T(82255),ce=T(30755),de=T(77712),me=T(76898);function he(De){if(null==De)return{value:De};if(Array.isArray(De))return{type:[De[0]],value:null};switch(typeof De){case"object":return De.constructor?.__accessorMetadata__||De instanceof Date?{type:De.constructor,value:De}:De;case"boolean":return{type:Boolean,value:De};case"string":return{type:String,value:De};case"number":return{type:Number,value:De};case"function":return{type:De,value:null};default:return}}const ye=Symbol("Accessor-Handles");class fe{constructor(...ve){if(this[_e]=null,this.constructor===fe)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new se(this)}),ve.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,ve))}static createSubclass(ve={}){if(Array.isArray(ve))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:Ce,declaredClass:ge,constructor:Te}=ve;delete ve.declaredClass,delete ve.properties,delete ve.constructor;const Le=this;class je extends Le{constructor(...Ee){super(...Ee),this.inherited=null,Te&&Te.apply(this,Ee)}}(0,U.JT)(je.prototype);for(const ze in ve){const Ee=ve[ze];je.prototype[ze]="function"==typeof Ee?function(...Ae){const we=this.inherited;let Be;this.inherited=function(...Pe){if(Le.prototype[ze])return Le.prototype[ze].apply(this,Pe)};try{Be=Ee.apply(this,Ae)}catch(Pe){throw this.inherited=we,Pe}return this.inherited=we,Be}:ve[ze]}for(const ze in Ce){const Ee=he(Ce[ze]);(0,de.Cb)(Ee)(je.prototype,ze)}return(0,me.j)(ge)(je)}postscript(ve){const Ce=this.__accessor__,ge=Ce.ctorArgs||ve;Ce.initialize(),ge&&(this.set(ge),Ce.ctorArgs=null),Ce.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||((0,x.yw)(this[ye],ve=>{ve.forEach(Ce=>Ce.remove())}),this[ye]=null,(0,ce.BT)(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===B.F.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(ve){this.get(ve)}get(ve){return(0,w.U2)(this,ve)}hasOwnProperty(ve){return this.__accessor__?this.__accessor__.has(ve):Object.prototype.hasOwnProperty.call(this,ve)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(ve,Ce){return(0,ne.t)(this,ve,Ce),this}watch(ve,Ce,ge){return(0,ce.YP)(this,ve,Ce,ge)}own(ve){let Ce=this[ye];if((0,x.Wi)(Ce)&&(Ce=this[ye]=new Set),(0,D.TW)(ve))for(const ge of ve)Ce.add(ge);else Ce.add(ve)}_clearOverride(ve){return this.__accessor__.clearOverride(ve)}_override(ve,Ce){return this.__accessor__.override(ve,Ce)}_isOverridden(ve){return this.__accessor__.isOverridden(ve)}notifyChange(ve){this.__accessor__.notifyChange(ve)}_get(ve){return this.__accessor__.internalGet(ve)}_set(ve,Ce){return this.__accessor__.internalSet(ve,Ce),this}}_e=ye},35575:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});var D=T(27899);function x(U){U.length=0}class w{constructor(W=50,Y=50){this._pool=new D.Z(Array,void 0,x,Y,W)}acquire(){return this._pool.acquire()}release(W){this._pool.release(W)}prune(){this._pool.prune(0)}static acquire(){return B.acquire()}static release(W){return B.release(W)}static prune(){B.prune()}}const B=new w(100)},79608:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>$,j:()=>re});var D=T(17626),x=T(14517),B=(T(8314),T(58817)),U=T(63290),W=T(62208),Y=T(31283),H=T(52323),G=T(76898);U.Z.getLogger("esri.core.Clonable");const $=ue=>{let ae=class extends ue{clone(){const oe=(0,W.s3)((0,H.vw)(this),"unable to clone instance of non-accessor class"),ie=oe.metadatas,X=oe.store,Z={},Q=new Map;for(const se in ie){const ee=ie[se],le=X?.originOf(se),ne=ee.clonable;if(ee.readOnly||!1===ne||le!==Y.s3.USER&&le!==Y.s3.DEFAULTS&&le!==Y.s3.WEB_MAP&&le!==Y.s3.WEB_SCENE)continue;const ce=this[se];let de=null;de="function"==typeof ne?ne(ce):"reference"===ne?ce:(0,B.Vo)(ce),null!=ce&&null==de||(le===Y.s3.DEFAULTS?Q.set(se,de):Z[se]=de)}const J=new(Object.getPrototypeOf(this).constructor)(Z);if(Q.size){const se=(0,H.vw)(J)?.store;if(se)for(const[ee,le]of Q)se.set(ee,le,Y.s3.DEFAULTS)}return J}};return ae=(0,D._)([(0,G.j)("esri.core.Clonable")],ae),ae};let re=class extends($(x.Z)){};re=(0,D._)([(0,G.j)("esri.core.Clonable")],re)},46160:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ye});var ie,D=T(17626),x=T(35575),w=T(61885),B=T(58817),U=T(62208),W=T(27899),Y=T(73234),H=T(50618),G=T(77712),$=T(90912),re=T(61039),ue=T(76898),ae=T(36082),oe=T(48902);const Z=new W.Z(class X{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(De){this.defaultPrevented=!1,this.item=De}},void 0,fe=>{fe.item=null,fe.target=null,fe.defaultPrevented=!1,fe.cancellable=!1}),Q=()=>{};function J(fe){return fe?fe instanceof he?fe.toArray():fe.length?Array.prototype.slice.apply(fe):[]:[]}function se(fe){if(fe&&fe.length)return fe[0]}function ee(fe,De,ve,Ce){const ge=Math.min(fe.length-ve,De.length-Ce);let Te=0;for(;Te<ge&&fe[ve+Te]===De[Ce+Te];)Te++;return Te}function le(fe,De,ve,Ce){De&&De.forEach((ge,Te,Le)=>{fe.push(ge),le(fe,ve.call(Ce,ge,Te,Le),ve,Ce)})}const ne=new Set,ce=new Set,de=new Set,me=new Map;let _e=0,he=ie=class extends w.Z.EventedAccessor{constructor(fe){super(fe),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new oe.s,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:_e++})}static isCollection(fe){return null!=fe&&fe instanceof ie}normalizeCtorArgs(fe){return fe?Array.isArray(fe)||fe instanceof ie?{items:fe}:fe:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,ae.it)(this._observable),this._items}set items(fe){this._emitBeforeChanges(Y.y.ADD)||(this._splice(0,this.length,J(fe)),this._emitAfterChanges(Y.y.ADD))}hasEventListener(fe){return"change"===fe?this._chgListeners.length>0:this._emitter.hasEventListener(fe)}on(fe,De){if("change"===fe){const ve=this._chgListeners,Ce={removed:!1,callback:De};return ve.push(Ce),this._notifications&&this._notifications.push({listeners:ve.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Q,Ce.removed=!0,ve.splice(ve.indexOf(Ce),1)}}}return this._emitter.on(fe,De)}once(fe,De){const ve=this.on(fe,De);return{remove(){ve.remove()}}}add(fe,De){if((0,ae.it)(this._observable),this._emitBeforeChanges(Y.y.ADD))return this;const ve=this.getNextIndex(De??null);return this._splice(ve,0,[fe]),this._emitAfterChanges(Y.y.ADD),this}addMany(fe,De=this._items.length){if((0,ae.it)(this._observable),!fe||!fe.length)return this;if(this._emitBeforeChanges(Y.y.ADD))return this;const ve=this.getNextIndex(De);return this._splice(ve,0,J(fe)),this._emitAfterChanges(Y.y.ADD),this}at(fe){if((0,ae.it)(this._observable),(fe=Math.trunc(fe)||0)<0&&(fe+=this.length),!(fe<0||fe>=this.length))return this._items[fe]}removeAll(){if((0,ae.it)(this._observable),!this.length||this._emitBeforeChanges(Y.y.REMOVE))return[];const fe=this._splice(0,this.length)||[];return this._emitAfterChanges(Y.y.REMOVE),fe}clone(){return(0,ae.it)(this._observable),this._createNewInstance({items:this._items.map(B.d9)})}concat(...fe){(0,ae.it)(this._observable);const De=fe.map(J);return this._createNewInstance({items:this._items.concat(...De)})}drain(fe,De){if((0,ae.it)(this._observable),!this.length||this._emitBeforeChanges(Y.y.REMOVE))return;const ve=(0,U.j0)(this._splice(0,this.length)),Ce=ve.length;for(let ge=0;ge<Ce;ge++)fe.call(De,ve[ge],ge,ve);this._emitAfterChanges(Y.y.REMOVE)}every(fe,De){return(0,ae.it)(this._observable),this._items.every(fe,De)}filter(fe,De){let ve;return(0,ae.it)(this._observable),ve=2===arguments.length?this._items.filter(fe,De):this._items.filter(fe),this._createNewInstance({items:ve})}find(fe,De){return(0,ae.it)(this._observable),this._items.find(fe,De)}findIndex(fe,De){return(0,ae.it)(this._observable),this._items.findIndex(fe,De)}flatten(fe,De){(0,ae.it)(this._observable);const ve=[];return le(ve,this,fe,De),new ie(ve)}forEach(fe,De){return(0,ae.it)(this._observable),this._items.forEach(fe,De)}getItemAt(fe){return(0,ae.it)(this._observable),this._items[fe]}getNextIndex(fe){(0,ae.it)(this._observable);const De=this.length;return(fe=fe??De)<0?fe=0:fe>De&&(fe=De),fe}includes(fe,De=0){return(0,ae.it)(this._observable),this._items.includes(fe,De)}indexOf(fe,De=0){return(0,ae.it)(this._observable),this._items.indexOf(fe,De)}join(fe=","){return(0,ae.it)(this._observable),this._items.join(fe)}lastIndexOf(fe,De=this.length-1){return(0,ae.it)(this._observable),this._items.lastIndexOf(fe,De)}map(fe,De){(0,ae.it)(this._observable);const ve=this._items.map(fe,De);return new ie({items:ve})}reorder(fe,De=this.length-1){(0,ae.it)(this._observable);const ve=this.indexOf(fe);if(-1!==ve){if(De<0?De=0:De>=this.length&&(De=this.length-1),ve!==De){if(this._emitBeforeChanges(Y.y.MOVE))return fe;this._splice(ve,1),this._splice(De,0,[fe]),this._emitAfterChanges(Y.y.MOVE)}return fe}}pop(){if((0,ae.it)(this._observable),!this.length||this._emitBeforeChanges(Y.y.REMOVE))return;const fe=se(this._splice(this.length-1,1));return this._emitAfterChanges(Y.y.REMOVE),fe}push(...fe){return(0,ae.it)(this._observable),this._emitBeforeChanges(Y.y.ADD)||(this._splice(this.length,0,fe),this._emitAfterChanges(Y.y.ADD)),this.length}reduce(fe,De){(0,ae.it)(this._observable);const ve=this._items;return 2===arguments.length?ve.reduce(fe,De):ve.reduce(fe)}reduceRight(fe,De){(0,ae.it)(this._observable);const ve=this._items;return 2===arguments.length?ve.reduceRight(fe,De):ve.reduceRight(fe)}remove(fe){return(0,ae.it)(this._observable),this.removeAt(this.indexOf(fe))}removeAt(fe){if((0,ae.it)(this._observable),fe<0||fe>=this.length||this._emitBeforeChanges(Y.y.REMOVE))return;const De=se(this._splice(fe,1));return this._emitAfterChanges(Y.y.REMOVE),De}removeMany(fe){if((0,ae.it)(this._observable),!fe||!fe.length||this._emitBeforeChanges(Y.y.REMOVE))return[];const De=fe instanceof ie?fe.toArray():fe,ve=this._items,Ce=[],ge=De.length;for(let Te=0;Te<ge;Te++){const je=ve.indexOf(De[Te]);if(je>-1){const ze=1+ee(De,ve,Te+1,je+1),Ee=this._splice(je,ze);Ee&&Ee.length>0&&Ce.push.apply(Ce,Ee),Te+=ze-1}}return this._emitAfterChanges(Y.y.REMOVE),Ce}reverse(){if((0,ae.it)(this._observable),this._emitBeforeChanges(Y.y.MOVE))return this;const fe=this._splice(0,this.length);return fe&&(fe.reverse(),this._splice(0,0,fe)),this._emitAfterChanges(Y.y.MOVE),this}shift(){if((0,ae.it)(this._observable),!this.length||this._emitBeforeChanges(Y.y.REMOVE))return;const fe=se(this._splice(0,1));return this._emitAfterChanges(Y.y.REMOVE),fe}slice(fe=0,De=this.length){return(0,ae.it)(this._observable),this._createNewInstance({items:this._items.slice(fe,De)})}some(fe,De){return(0,ae.it)(this._observable),this._items.some(fe,De)}sort(fe){if((0,ae.it)(this._observable),!this.length||this._emitBeforeChanges(Y.y.MOVE))return this;const De=(0,U.j0)(this._splice(0,this.length));return arguments.length?De.sort(fe):De.sort(),this._splice(0,0,De),this._emitAfterChanges(Y.y.MOVE),this}splice(fe,De,...ve){(0,ae.it)(this._observable);const Ce=(De?Y.y.REMOVE:0)|(ve.length?Y.y.ADD:0);if(this._emitBeforeChanges(Ce))return[];const ge=this._splice(fe,De,ve)||[];return this._emitAfterChanges(Ce),ge}toArray(){return(0,ae.it)(this._observable),this._items.slice()}toJSON(){return(0,ae.it)(this._observable),this.toArray()}toLocaleString(){return(0,ae.it)(this._observable),this._items.toLocaleString()}toString(){return(0,ae.it)(this._observable),this._items.toString()}unshift(...fe){return(0,ae.it)(this._observable),!fe.length||this._emitBeforeChanges(Y.y.ADD)||(this._splice(0,0,fe),this._emitAfterChanges(Y.y.ADD)),this.length}_createNewInstance(fe){return new this.constructor(fe)}_splice(fe,De,ve){const Ce=this._items,ge=this.itemType;let Te,Le;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,H.Os)(()=>this._dispatchChange())),De){if(Le=Ce.splice(fe,De),this.hasEventListener("before-remove")){const je=Z.acquire();je.target=this,je.cancellable=!0;for(let ze=0,Ee=Le.length;ze<Ee;ze++)Te=Le[ze],je.reset(Te),this.emit("before-remove",je),je.defaultPrevented&&(Le.splice(ze,1),Ce.splice(fe,0,Te),fe+=1,ze-=1,Ee-=1);Z.release(je)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const je=Z.acquire();je.target=this,je.cancellable=!1;const ze=Le.length;for(let Ee=0;Ee<ze;Ee++)je.reset(Le[Ee]),this.emit("after-remove",je);Z.release(je)}}if(ve&&ve.length){if(ge){const Ae=[];for(const we of ve){const Be=ge.ensureType(we);null==Be&&null!=we||Ae.push(Be)}ve=Ae}const je=this.hasEventListener("before-add"),ze=this.hasEventListener("after-add"),Ee=fe===this.length;if(je||ze){const Ae=Z.acquire();Ae.target=this,Ae.cancellable=!0;const we=Z.acquire();we.target=this,we.cancellable=!1;for(const Be of ve)je?(Ae.reset(Be),this.emit("before-add",Ae),Ae.defaultPrevented||(Ee?Ce.push(Be):Ce.splice(fe++,0,Be),this._set("length",Ce.length),ze&&(we.reset(Be),this.emit("after-add",we)))):(Ee?Ce.push(Be):Ce.splice(fe++,0,Be),this._set("length",Ce.length),we.reset(Be),this.emit("after-add",we));Z.release(we),Z.release(Ae)}else{if(Ee)for(const Ae of ve)Ce.push(Ae);else Ce.splice(fe,0,...ve);this._set("length",Ce.length)}}return(ve&&ve.length||Le&&Le.length)&&this._notifyChangeEvent(ve,Le),Le}_emitBeforeChanges(fe){let De=!1;if(this.hasEventListener("before-changes")){const ve=Z.acquire();ve.target=this,ve.cancellable=!0,ve.type=fe,this.emit("before-changes",ve),De=ve.defaultPrevented,Z.release(ve)}return De}_emitAfterChanges(fe){if(this.hasEventListener("after-changes")){const De=Z.acquire();De.target=this,De.cancellable=!1,De.type=fe,this.emit("after-changes",De),Z.release(De)}this._observable.notify()}_notifyChangeEvent(fe,De){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:fe,removed:De})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const fe=this._notifications;this._notifications=null;for(const De of fe){const ve=De.changes;ne.clear(),ce.clear(),de.clear();for(const{added:ze,removed:Ee}of ve){if(ze)if(0===de.size&&0===ce.size)for(const Ae of ze)ne.add(Ae);else for(const Ae of ze)ce.has(Ae)?(de.add(Ae),ce.delete(Ae)):de.has(Ae)||ne.add(Ae);if(Ee)if(0===de.size&&0===ne.size)for(const Ae of Ee)ce.add(Ae);else for(const Ae of Ee)ne.has(Ae)?ne.delete(Ae):(de.delete(Ae),ce.add(Ae))}const Ce=x.Z.acquire();ne.forEach(ze=>{Ce.push(ze)});const ge=x.Z.acquire();ce.forEach(ze=>{ge.push(ze)});const Te=this._items,Le=De.items,je=x.Z.acquire();if(de.forEach(ze=>{Le.indexOf(ze)!==Te.indexOf(ze)&&je.push(ze)}),De.listeners&&(Ce.length||ge.length||je.length)){const ze={target:this,added:Ce,removed:ge,moved:je},Ee=De.listeners.length;for(let Ae=0;Ae<Ee;Ae++){const we=De.listeners[Ae];we.removed||we.callback.call(this,ze)}}x.Z.release(Ce),x.Z.release(ge),x.Z.release(je)}ne.clear(),ce.clear(),de.clear()}};he.ofType=fe=>{if(!fe)return ie;if(me.has(fe))return me.get(fe);let De=null;if("function"==typeof fe)De=fe.prototype.declaredClass;else if(fe.base)De=fe.base.prototype.declaredClass;else for(const Ce in fe.typeMap){const ge=fe.typeMap[Ce].prototype.declaredClass;De?De+=` | ${ge}`:De=ge}let ve=class extends ie{};return(0,D._)([(0,re.c)({Type:fe,ensureType:"function"==typeof fe?(0,$.se)(fe):(0,$.N7)(fe)})],ve.prototype,"itemType",void 0),ve=(0,D._)([(0,ue.j)(`esri.core.Collection<${De}>`)],ve),me.set(fe,ve),ve},(0,D._)([(0,G.Cb)()],he.prototype,"length",void 0),(0,D._)([(0,G.Cb)()],he.prototype,"items",null),he=ie=(0,D._)([(0,ue.j)("esri.core.Collection")],he);const ye=he},46882:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var D=T(17626),x=T(46160),w=T(80542),B=T(62208),G=(T(8314),T(26584),T(63290),T(30755),T(21352)),$=T(77712),ae=(T(85931),T(90912),T(76898));let oe=class extends((0,w.p)(x.Z)){constructor(X){super(X),this.getCollections=null}initialize(){this.handles.add((0,G.EH)(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const X=(0,B.pC)(this.getCollections)?this.getCollections():null;if((0,B.Wi)(X))return void this.removeAll();let Z=0;for(const Q of X)(0,B.pC)(Q)&&(Z=this._processCollection(Z,Q));this.splice(Z,this.length)}_createNewInstance(X){return new x.Z(X)}_processCollection(X,Z){if(!Z)return X;const Q=this.itemFilterFunction?this.itemFilterFunction:J=>!!J;for(const J of Z)if(J){if(Q(J)){const se=this.indexOf(J,X);se>=0?se!==X&&this.reorder(J,X):this.add(J,X),++X}if(this.getChildrenFunction){const se=this.getChildrenFunction(J);if(Array.isArray(se))for(const ee of se)X=this._processCollection(X,ee);else X=this._processCollection(X,se)}}return X}};(0,D._)([(0,$.Cb)()],oe.prototype,"getCollections",void 0),(0,D._)([(0,$.Cb)()],oe.prototype,"getChildrenFunction",void 0),(0,D._)([(0,$.Cb)()],oe.prototype,"itemFilterFunction",void 0),oe=(0,D._)([(0,ae.j)("esri.core.CollectionFlattener")],oe);const ie=oe},23719:(qe,xe,T)=>{"use strict";T.d(xe,{BV:()=>W,Q4:()=>U,c5:()=>B,pE:()=>x});var D=T(21286);class x{constructor(H,G){this.min=H,this.max=G,this.range=G-H}ndiff(H,G=0){return Math.ceil((H-G)/this.range)*this.range+G}_normalize(H,G,$,re=0,ue=!1){return($-=re)<H?$+=this.ndiff(H-$):$>G&&($-=this.ndiff($-G)),ue&&$===G&&($=H),$+re}normalize(H,G=0,$=!1){return this._normalize(this.min,this.max,H,G,$)}clamp(H,G=0){return(0,D.uZ)(H-G,this.min,this.max)+G}monotonic(H,G,$){return H<G?G:G+this.ndiff(H-G,$)}minimalMonotonic(H,G,$){return this._normalize(H,H+this.range,G,$)}center(H,G,$){return G=this.monotonic(H,G,$),this.normalize((H+G)/2,$)}diff(H,G,$){return this.monotonic(H,G,$)-H}shortestSignedDiff(H,G){H=this.normalize(H);const $=(G=this.normalize(G))-H,re=G<H?this.minimalMonotonic(H,G)-H:G-this.minimalMonotonic(G,H);return Math.abs($)<Math.abs(re)?$:re}contains(H,G,$){return G=this.minimalMonotonic(H,G),($=this.minimalMonotonic(H,$))>H&&$<G}}function w(Y){for(const H in Y){const G=Y[H];G instanceof Function&&(Y[H]=G.bind(Y))}return Y}const B=w(new x(0,2*Math.PI)),U=w(new x(-Math.PI,Math.PI)),W=w(new x(0,360))},26584:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>B});var D=T(58817),x=T(63290),w=T(90888);class B extends w.Z{constructor(W,Y,H){if(super(W,Y,H),!(this instanceof B))return new B(W,Y,H)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(W,Y)=>{if(Y&&"object"==typeof Y&&"function"==typeof Y.toJSON)return Y;try{return(0,D.d9)(Y)}catch{return"[object]"}}))}}catch(W){throw x.Z.getLogger("esri.core.Error").error(W),W}return{name:this.name,message:this.message,details:this.details}}static fromJSON(W){return new B(W.name,W.message,W.details)}}B.prototype.type="error"},61885:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>W});var D=T(17626),x=T(14517),w=T(54024),B=T(76898);class U{constructor(){this._emitter=new U.EventEmitter(this)}emit(H,G){return this._emitter.emit(H,G)}on(H,G){return this._emitter.on(H,G)}once(H,G){return this._emitter.once(H,G)}hasEventListener(H){return this._emitter.hasEventListener(H)}}!function(Y){class H{constructor(re=null){this.target=re,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(re,ue){const ae=this._listenersMap&&this._listenersMap.get(re);if(!ae)return!1;const oe=this.target||this;return[...ae].forEach(ie=>{ie.call(oe,ue)}),ae.length>0}on(re,ue){if(Array.isArray(re)){const oe=re.map(ie=>this.on(ie,ue));return(0,w.AL)(oe)}if(re.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const ae=this._listenersMap.get(re)||[];return ae.push(ue),this._listenersMap.set(re,ae),{remove:()=>{const oe=this._listenersMap&&this._listenersMap.get(re)||[],ie=oe.indexOf(ue);ie>=0&&oe.splice(ie,1)}}}once(re,ue){const ae=this.on(re,oe=>{ae.remove(),ue.call(null,oe)});return ae}hasEventListener(re){const ue=this._listenersMap&&this._listenersMap.get(re);return null!=ue&&ue.length>0}}Y.EventEmitter=H,Y.EventedMixin=$=>{let re=class extends ${constructor(){super(...arguments),this._emitter=new H}destroy(){this._emitter.clear()}emit(ue,ae){return this._emitter.emit(ue,ae)}on(ue,ae){return this._emitter.on(ue,ae)}once(ue,ae){return this._emitter.once(ue,ae)}hasEventListener(ue){return this._emitter.hasEventListener(ue)}};return re=(0,D._)([(0,B.j)("esri.core.Evented")],re),re};let G=class extends x.Z{constructor(){super(...arguments),this._emitter=new U.EventEmitter(this)}destroy(){this._emitter.clear()}emit($,re){return this._emitter.emit($,re)}on($,re){return this._emitter.on($,re)}once($,re){return this._emitter.once($,re)}hasEventListener($){return this._emitter.hasEventListener($)}};G=(0,D._)([(0,B.j)("esri.core.Evented")],G),Y.EventedAccessor=G}(U||(U={}));const W=U},80542:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>Y,r:()=>H});var D=T(17626),x=T(14517),w=T(72392),B=T(77712),U=T(76898),W=T(17760);const Y=G=>{let $=class extends G{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new w.Z}get updatingHandles(){return this._get("updatingHandles")||new W.t}};return(0,D._)([(0,B.Cb)({readOnly:!0})],$.prototype,"handles",null),(0,D._)([(0,B.Cb)({readOnly:!0})],$.prototype,"updatingHandles",null),$=(0,D._)([(0,U.j)("esri.core.HandleOwner")],$),$};let H=class extends(Y(x.Z)){};H=(0,D._)([(0,U.j)("esri.core.HandleOwner")],H)},72392:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>H});var D=T(17626),x=T(14517),w=T(46160),B=T(62208),U=T(77712),W=T(76898);let Y=class extends x.Z{constructor(G){super(G),this._groups=new Map}destroy(){this.removeAll()}get size(){let G=0;return this._groups.forEach($=>{G+=$.length}),G}add(G,$){if(!this._isHandle(G)&&!Array.isArray(G)&&!w.Z.isCollection(G))return this;const re=this._getOrCreateGroup($);return Array.isArray(G)||w.Z.isCollection(G)?G.forEach(ue=>this._isHandle(ue)&&re.push(ue)):re.push(G),this.notifyChange("size"),this}forEach(G,$){if("function"==typeof G)this._groups.forEach(re=>re.forEach(G));else{const re=this._getGroup(G);re&&$&&re.forEach($)}}has(G){return this._groups.has(this._ensureGroupKey(G))}remove(G){if(Array.isArray(G)||w.Z.isCollection(G))return G.forEach(this.remove,this),this;if(!this.has(G))return this;const $=this._getGroup(G);for(let re=0;re<$.length;re++)$[re].remove();return this._deleteGroup(G),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(G=>{for(let $=0;$<G.length;$++)G[$].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(G){return G&&!!G.remove}_getOrCreateGroup(G){if(this.has(G))return this._getGroup(G);const $=[];return this._groups.set(this._ensureGroupKey(G),$),$}_getGroup(G){return(0,B.j0)(this._groups.get(this._ensureGroupKey(G)))}_deleteGroup(G){return this._groups.delete(this._ensureGroupKey(G))}_ensureGroupKey(G){return G||"_default_"}};(0,D._)([(0,U.Cb)({readOnly:!0})],Y.prototype,"size",null),Y=(0,D._)([(0,W.j)("esri.core.Handles")],Y);const H=Y},61996:(qe,xe,T)=>{"use strict";T.d(xe,{Ej:()=>W,IG:()=>B});var D=T(17626),x=T(76898);let w=0;const B=Y=>{let H=class extends Y{constructor(...G){super(...G),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+w++})}};return H=(0,D._)([(0,x.j)("esri.core.Identifiable")],H),H};let W=class extends(B(class{})){};W=(0,D._)([(0,x.j)("esri.core.Identifiable")],W)},78498:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(1036);class x{constructor(B,U){this._storage=new D.WJ,this._storage.maxSize=B,U&&this._storage.registerRemoveFunc("",U)}put(B,U){this._storage.put(B,U,1,1)}pop(B){return this._storage.pop(B)}get(B){return this._storage.get(B)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},86810:(qe,xe,T)=>{"use strict";T.d(xe,{wq:()=>X,eC:()=>ae});var D=T(17626),x=T(14517),w=T(62208),B=T(58817),U=T(31283);class W{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(Q){const J=new W;return this._values.forEach((se,ee)=>{Q&&Q.has(ee)||J.set(ee,(0,B.d9)(se.value),se.origin)}),J}get(Q,J){J=this._normalizeOrigin(J);const se=this._values.get(Q);return null==J||se?.origin===J?se?.value:void 0}originOf(Q){return this._values.get(Q)?.origin??U.s3.USER}keys(Q){Q=this._normalizeOrigin(Q);const J=[...this._values.keys()];return null==Q?J:J.filter(se=>this._values.get(se)?.origin===Q)}set(Q,J,se){if((se=this._normalizeOrigin(se))===U.s3.DEFAULTS){const ee=this._values.get(Q);if(ee&&null!=ee.origin&&ee.origin>se)return}this._values.set(Q,new Y(J,se))}delete(Q,J){null!=(J=this._normalizeOrigin(J))&&this._values.get(Q)?.origin!==J||this._values.delete(Q)}has(Q,J){return null!=(J=this._normalizeOrigin(J))?this._values.get(Q)?.origin===J:this._values.has(Q)}forEach(Q){this._values.forEach(({value:J},se)=>Q(J,se))}_normalizeOrigin(Q){if(null!=Q)return Q===U.s3.DEFAULTS?Q:U.s3.USER}}class Y{constructor(Q,J){this.value=Q,this.origin=J}}var H=T(12590),G=T(29338),$=T(52323),re=T(36054),ue=T(76898);const ae=Z=>{let Q=class extends Z{constructor(...J){super(...J);const se=(0,w.j0)((0,$.vw)(this)),ee=se.store,le=new W;se.store=le,(0,H.M)(se,ee,le)}read(J,se){(0,G.i)(this,J,se)}write(J={},se){return(0,re.c)(this,J,se)}toJSON(J){return this.write({},J)}static fromJSON(J,se){return oe.call(this,J,se)}};return Q=(0,D._)([(0,ue.j)("esri.core.JSONSupport")],Q),Q.prototype.toJSON.isDefaultToJSON=!0,Q};function oe(Z,Q){if(!Z)return null;if(Z.declaredClass)throw new Error("JSON object is already hydrated");const J=new this;return J.read(Z,Q),J}let X=class extends(ae(x.Z)){};X=(0,D._)([(0,ue.j)("esri.core.JSONSupport")],X)},93961:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(1036);class x{constructor(B,U){this._storage=new D.WJ,this._storage.maxSize=B,U&&this._storage.registerRemoveFunc("",U)}put(B,U,W){this._storage.put(B,U,W,1)}pop(B){return this._storage.pop(B)}get(B){return this._storage.get(B)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(B){this._storage.maxSize=B}}},47996:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var D=T(17626),x=T(26584),w=T(60330),B=T(10699),U=T(14889),W=T(77712),Y=T(76898);const ue=ie=>{let X=class extends ie{constructor(...Z){super(...Z),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(Q=>{const J=this.load.bind(this);this.load=se=>{const ee=new Promise((le,ne)=>{const ce=(0,B.$F)(se,ne);this.destroyed&&ne(new x.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(le,ne).finally(()=>{ce&&ce.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const le=this._loadController=new AbortController;J({signal:le.signal}),(0,B.fu)(le.signal,()=>{this._promiseProps.abort()})}return Q(),ee}})),this.when(()=>{this._set("loadStatus","loaded"),this._loadController=null},Q=>{this._set("loadStatus","failed"),this._set("loadError",Q),this._loadController=null})}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new x.Z("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return(0,D._)([(0,W.Cb)({readOnly:!0})],X.prototype,"loaded",null),(0,D._)([(0,W.Cb)({readOnly:!0})],X.prototype,"loadError",void 0),(0,D._)([(0,W.Cb)({clonable:!1})],X.prototype,"loadStatus",void 0),(0,D._)([(0,W.Cb)({type:[U.Z],readOnly:!0})],X.prototype,"loadWarnings",null),X=(0,D._)([(0,Y.j)("esri.core.Loadable")],X),X};let ae=class extends(ue(w.D)){};var ie;ae=(0,D._)([(0,Y.j)("esri.core.Loadable")],ae),(ie=ae||(ae={})).LoadableMixin=ue,ie.isLoadable=function X(Z){return!(!Z||!Z.load)};const oe=ae},63290:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>W});var D=T(59318),w=(T(8314),T(62208)),B=T(77275);const U={info:0,warn:1,error:2,none:3};class W{constructor(H){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=H.level&&(this.level=H.level),null!=H.writer&&(this.writer=H.writer),this._module=H.module,W._loggers[this.module]=this;const G=this.module.lastIndexOf(".");-1!==G&&(this._parent=W.getLogger(this.module.slice(0,G)))}get module(){return this._module}get parent(){return this._parent}error(...H){this._log("error","always",...H)}warn(...H){this._log("warn","always",...H)}info(...H){this._log("info","always",...H)}errorOnce(...H){this._log("error","once",...H)}warnOnce(...H){this._log("warn","once",...H)}infoOnce(...H){this._log("info","once",...H)}errorOncePerTick(...H){this._log("error","oncePerTick",...H)}warnOncePerTick(...H){this._log("warn","oncePerTick",...H)}infoOncePerTick(...H){this._log("info","oncePerTick",...H)}get test(){const H=this;return{loggedMessages:H._loggedMessages,clearLoggedWarnings:()=>H._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(H={}){const G=W._loggers;return W._loggers=H,G},set throttlingDisabled(H){W._throttlingDisabled=H}}}static getLogger(H){let G=W._loggers[H];return G||(G=new W({module:H})),G}_log(H,G,...$){if(this._matchLevel(H)){if("always"!==G&&!W._throttlingDisabled){const re=this._argsToKey($),ue=this._loggedMessages[H].get(re);if("once"===G&&null!=ue||"oncePerTick"===G&&ue&&ue>=W._tickCounter)return;this._loggedMessages[H].set(re,W._tickCounter),W._scheduleTickCounterIncrement()}for(const re of D.Z.log.interceptors)if(re(H,this.module,...$))return;this._inheritedWriter()(H,this.module,...$)}}_parentWithMember(H,G){let $=this;for(;(0,w.pC)($);){const re=$[H];if((0,w.pC)(re))return re;$=$.parent}return G}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(H,G,...$){console[H](`[${G}]`,...$)}_matchLevel(H){return U[this._parentWithMember("level",D.Z.log.level?D.Z.log.level:"warn")]<=U[H]}_argsToKey(...H){return(0,B.hP)(JSON.stringify(H,($,re)=>"object"!=typeof re||Array.isArray(re)?re:"[Object]"))}static _scheduleTickCounterIncrement(){W._tickCounterScheduled||(W._tickCounterScheduled=!0,Promise.resolve().then(()=>{W._tickCounter++,W._tickCounterScheduled=!1}))}}W._loggers={},W._tickCounter=0,W._tickCounterScheduled=!1,W._throttlingDisabled=!1},88159:(qe,xe,T)=>{"use strict";function D(U,W){for(const[Y,H]of U)if(W(H,Y))return!0;return!1}function x(U,W){for(const[Y,H]of U)if(W(H,Y))return H;return null}function w(U,W,Y){const H=U.get(W);if(void 0!==H)return H;const G=Y();return U.set(W,G),G}T.d(xe,{fQ:()=>x,oE:()=>D,s1:()=>w})},1036:(qe,xe,T)=>{"use strict";T.d(xe,{WJ:()=>W,Xq:()=>U,an:()=>w,lN:()=>B});var D=T(62208),x=T(77029);const w=-3;var B,Y;(Y=B||(B={}))[Y.ALL=0]="ALL",Y[Y.SOME=1]="SOME";class U{constructor(H,G,$){this._namespace=H,this._storage=G,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",$&&(this._storage.registerRemoveFunc(this._namespace,$),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(H,G,$,re=0){this._storage.put(this._namespace+H,G,$,re)}get(H){const G=this._storage.get(this._namespace+H);return void 0===G?++this._miss:++this._hit,G}pop(H){const G=this._storage.pop(this._namespace+H);return void 0===G?++this._miss:++this._hit,G}updateSize(H,G,$){this._storage.updateSize(this._namespace+H,G,$)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class W{constructor(H=10485760){this._maxSize=H,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new x.Z,this._users=new x.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(H){this._users.push(H)}deregister(H){this._users.removeUnordered(H)}registerRemoveFunc(H,G){this._removeFuncs.push([H,G])}deregisterRemoveFunc(H){this._removeFuncs.filterInPlace(G=>G[0]!==H)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(H){this._maxSize=Math.max(H,0),this._checkSizeLimit()}put(H,G,$,re){const ue=this._db.get(H);if(ue&&(this._size-=ue.size,this._db.delete(H),ue.entry!==G&&this._notifyRemove(H,ue.entry,B.ALL)),$>this._maxSize)return void this._notifyRemove(H,G,B.ALL);if(void 0===G)return void console.warn("Refusing to cache undefined entry ");if(!$||$<0)return void console.warn("Refusing to cache entry with invalid size "+$);const ae=1+Math.max(re,w)-w;this._db.set(H,{entry:G,size:$,lifetime:ae,lives:ae}),this._size+=$,this._checkSizeLimit()}updateSize(H,G,$){const re=this._db.get(H);if(re&&re.entry===G){for(this._size-=re.size;$>this._maxSize;){const ue=this._notifyRemove(H,G,B.SOME);if(!((0,D.pC)(ue)&&ue>0))return void this._db.delete(H);$=ue}re.size=$,this._size+=$,this._checkSizeLimit()}}pop(H){const G=this._db.get(H);if(G)return this._size-=G.size,this._db.delete(H),++this._hit,G.entry;++this._miss}get(H){const G=this._db.get(H);if(void 0!==G)return this._db.delete(H),G.lives=G.lifetime,this._db.set(H,G),++this._hit,G.entry;++this._miss}getStats(){const H={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},G={},$=new Array;this._db.forEach((ae,oe)=>{const ie=ae.lifetime;$[ie]=($[ie]||0)+ae.size,this._users.forAll(X=>{const Z=X.namespace;oe.startsWith(Z)&&(G[Z]=(G[Z]||0)+ae.size)})});const re={};this._users.forAll(ae=>{const oe=ae.namespace;!isNaN(ae.hitRate)&&ae.hitRate>0?(G[oe]=G[oe]||0,re[oe]=Math.round(100*ae.hitRate)+"%"):re[oe]="0%"});const ue=Object.keys(G);ue.sort((ae,oe)=>G[oe]-G[ae]),ue.forEach(ae=>H[ae]=Math.round(G[ae]/2**20)+"MB / "+re[ae]);for(let ae=$.length-1;ae>=0;--ae){const oe=$[ae];oe&&(H["Priority "+(ae+w-1)]=Math.round(oe/this.size*100)+"%")}return H}resetStats(){this._hit=this._miss=0,this._users.forAll(H=>H.resetHitRate())}clear(H){this._db.forEach((G,$)=>{$.startsWith(H)&&(this._size-=G.size,this._db.delete($),this._notifyRemove($,G.entry,B.ALL))})}clearAll(){this._db.forEach((H,G)=>this._notifyRemove(G,H.entry,B.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(H,G,$){let re;return this._removeFuncs.some(ue=>{if(H.startsWith(ue[0])){const ae=ue[1](G,$);return"number"==typeof ae&&(re=ae),!0}return!1}),re}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[H,G]of this._db){if(this._db.delete(H),G.lives<=1){this._size-=G.size;const $=this._notifyRemove(H,G.entry,B.SOME);(0,D.pC)($)&&$>0&&(this._size+=$,G.lives=G.lifetime,G.size=$,this._db.set(H,G))}else--G.lives,this._db.set(H,G);if(this._size<=.9*this.maxSize)return}}}},90888:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});var D=T(94113);class w{constructor(U,W,Y){this.name=U,this.details=Y,this.message=void 0,this instanceof w&&(this.message=W&&function x(B,U){return B.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(W,Y)=>{if(""===Y)return"$";const G=(0,D.hS)(Y,U)??"";if(void 0===G)throw new Error(`could not find key "${Y}" in template`);return G.toString()})}(W,Y)||"")}toString(){return"["+this.name+"]: "+this.message}}},99959:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>Z,w:()=>Q});var D=T(17626),x=T(14517),w=T(62208),B=T(12590),U=T(58817),W=T(31283);class Y{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(W.kk),this._values=new Map,this.multipleOriginsSupported=!0}clone(se){const ee=new Y,le=this._originStores[W.s3.DEFAULTS];le&&le.forEach((ne,ce)=>{ee.set(ce,(0,U.d9)(ne),W.s3.DEFAULTS)});for(let ne=W.s3.SERVICE;ne<W.kk;ne++){const ce=this._originStores[ne];ce&&ce.forEach((de,me)=>{se&&se.has(me)||ee.set(me,(0,U.d9)(de),ne)})}return ee}get(se,ee){const le=void 0===ee?this._values:this._originStores[ee];return le?le.get(se):void 0}keys(se){const ee=null==se?this._values:this._originStores[se];return ee?[...ee.keys()]:[]}set(se,ee,le=W.s3.USER){let ne=this._originStores[le];if(ne||(ne=new Map,this._originStores[le]=ne),ne.set(se,ee),!this._values.has(se)||(0,w.j0)(this._propertyOriginMap.get(se))<=le){const ce=this._values.get(se);return this._values.set(se,ee),this._propertyOriginMap.set(se,le),ce!==ee}return!1}delete(se,ee=W.s3.USER){const le=this._originStores[ee];if(!le)return;const ne=le.get(se);if(le.delete(se),this._values.has(se)&&this._propertyOriginMap.get(se)===ee){this._values.delete(se);for(let ce=ee-1;ce>=0;ce--){const de=this._originStores[ce];if(de&&de.has(se)){this._values.set(se,de.get(se)),this._propertyOriginMap.set(se,ce);break}}}return ne}has(se,ee){const le=void 0===ee?this._values:this._originStores[ee];return!!le&&le.has(se)}revert(se,ee){for(;ee>0&&!this.has(se,ee);)--ee;const le=this._originStores[ee],ne=le&&le.get(se),ce=this._values.get(se);return this._values.set(se,ne),this._propertyOriginMap.set(se,ee),ce!==ne}originOf(se){return this._propertyOriginMap.get(se)||W.s3.DEFAULTS}forEach(se){this._values.forEach(se)}}var H=T(29338),G=T(52323),$=T(76898);const re=J=>{let se=class extends J{constructor(...ee){super(...ee);const le=(0,w.j0)((0,G.vw)(this)),ne=le.store,ce=new Y;le.store=ce,(0,B.M)(le,ne,ce)}read(ee,le){(0,H.i)(this,ee,le)}getAtOrigin(ee,le){const ne=ue(this),ce=(0,W.M9)(le);if("string"==typeof ee)return ne.get(ee,ce);const de={};return ee.forEach(me=>{de[me]=ne.get(me,ce)}),de}originOf(ee){return(0,W.x3)(this.originIdOf(ee))}originIdOf(ee){return ue(this).originOf(ee)}revert(ee,le){const ne=ue(this),ce=(0,W.M9)(le),de=(0,G.vw)(this);let me;me="string"==typeof ee?"*"===ee?ne.keys(ce):[ee]:ee,me.forEach(_e=>{de.invalidate(_e),ne.revert(_e,ce),de.commit(_e)})}};return se=(0,D._)([(0,$.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],se),se};function ue(J){return(0,G.vw)(J).store}let ae=class extends(re(x.Z)){};ae=(0,D._)([(0,$.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],ae);var oe=T(36054);const ie=J=>{let se=class extends J{constructor(...ee){super(...ee)}clear(ee,le="user"){return X(this).delete(ee,(0,W.M9)(le))}write(ee={},le){return(0,oe.c)(this,ee=ee||{},le),ee}setAtOrigin(ee,le,ne){(0,G.vw)(this).setAtOrigin(ee,le,(0,W.M9)(ne))}removeOrigin(ee){const le=X(this),ne=(0,W.M9)(ee),ce=le.keys(ne);for(const de of ce)le.originOf(de)===ne&&le.set(de,le.get(de,ne),W.s3.USER)}updateOrigin(ee,le){const ne=X(this),ce=(0,W.M9)(le),de=this.get(ee);for(let me=ce+1;me<W.kk;++me)ne.delete(ee,me);ne.set(ee,de,ce)}toJSON(ee){return this.write({},ee)}};return se=(0,D._)([(0,$.j)("esri.core.WriteableMultiOriginJSONSupport")],se),se.prototype.toJSON.isDefaultToJSON=!0,se};function X(J){return(0,G.vw)(J).store}const Z=J=>{let se=class extends(ie(re(J))){constructor(...ee){super(...ee)}};return se=(0,D._)([(0,$.j)("esri.core.MultiOriginJSONSupport")],se),se};let Q=class extends(Z(x.Z)){};Q=(0,D._)([(0,$.j)("esri.core.MultiOriginJSONSupport")],Q)},1101:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>D});class D{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(w,B){return this._outer.get(w)?.get(B)}set(w,B,U){const W=this._outer.get(w);W?W.set(B,U):this._outer.set(w,new Map([[B,U]]))}delete(w,B){const U=this._outer.get(w);U&&(U.delete(B),0===U.size&&this._outer.delete(w))}forEach(w){this._outer.forEach((B,U)=>w(B,U))}}},27899:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});let w=(()=>{class B{constructor(W,Y,H,G=1,$=0){if(this.ctor=W,this.acquireFunction=Y,this.releaseFunction=H,this.allocationSize=G,this._pool=new Array($),this._initialSize=$,this.ctor)for(let re=0;re<$;re++)this._pool[re]=new this.ctor;this.allocationSize=Math.max(G,1)}destroy(){this.prune(0)}acquire(...W){let Y;if(B.test.disabled)Y=new this.ctor;else{if(0===this._pool.length){const H=this.allocationSize;for(let G=0;G<H;G++)this._pool[G]=new this.ctor}Y=this._pool.pop()}return this.acquireFunction?this.acquireFunction(Y,...W):function x(B){return B&&B.acquire&&"function"==typeof B.acquire}(Y)&&Y.acquire(...W),Y}release(W){W&&!B.test.disabled&&(this.releaseFunction?this.releaseFunction(W):function D(B){return B&&B.release&&"function"==typeof B.release}(W)&&W.release(),this._pool.push(W))}prune(W=this._initialSize){if(!(W>=this._pool.length)){for(let Y=W;Y<this._pool.length;++Y)this._dispose(this._pool[Y]);this._pool.length=W}}_dispose(W){W.dispose&&"function"==typeof W.dispose&&W.dispose()}}return B.test={disabled:!1},B})()},97535:(qe,xe,T)=>{"use strict";T.d(xe,{x:()=>x});var D=T(79682);class x{constructor(U){this.allocator=U,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,D.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const U=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*w);this._items.length=Math.min(U,this._items.length),this._itemsPtr=0}_grow(){for(let U=0;U<Math.max(8,Math.min(this._items.length,w));U++)this._items.push(this.allocator())}}const w=1024},73234:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{y:()=>D}),(x=D||(D={}))[x.ADD=1]="ADD",x[x.REMOVE=2]="REMOVE",x[x.MOVE=4]="MOVE"},73362:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});class x{constructor(B,U=29){this.name=B,this._counter=0,this._items=new Array(U)}record(B){this._items[++this._counter%this._items.length]=B}get median(){return this._items.slice().sort((B,U)=>B-U)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((B,U)=>B+U,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},77029:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>W});var x,D=T(85931);!function(H){const G=(ae,oe,ie,X)=>{let Z=oe,Q=oe;const J=ie>>>1,se=ae[Z-1];for(;Q<=J;){Q=Z<<1,Q<ie&&X(ae[Q-1],ae[Q])<0&&++Q;const ee=ae[Q-1];if(X(ee,se)<=0)break;ae[Z-1]=ee,Z=Q}ae[Z-1]=se},$=(ae,oe)=>ae<oe?-1:ae>oe?1:0;H.sort=function re(ae,oe,ie,X){void 0===oe&&(oe=0),void 0===ie&&(ie=ae.length),void 0===X&&(X=$);for(let Q=ie>>>1;Q>oe;Q--)G(ae,Q,ie,X);const Z=oe+1;for(let Q=ie-1;Q>oe;Q--){const J=ae[oe];ae[oe]=ae[Q],ae[Q]=J,G(ae,Z,Q,X)}},H.iterableSort=function*ue(ae,oe,ie,X){void 0===oe&&(oe=0),void 0===ie&&(ie=ae.length),void 0===X&&(X=$);for(let Q=ie>>>1;Q>oe;Q--)G(ae,Q,ie,X),yield;const Z=oe+1;for(let Q=ie-1;Q>oe;Q--){const J=ae[oe];ae[oe]=ae[Q],ae[Q]=J,G(ae,Z,Q,X),yield}}}(x||(x={}));const w=x;class W{constructor(G){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new D.SO,G&&(G.initialSize&&(this.data=new Array(G.initialSize)),G.allocator&&(this._allocator=G.allocator),void 0!==G.deallocator&&(this._deallocator=G.deallocator),G.shrink&&(this._shrink=()=>Y(this)))}toArray(){return this.data.slice(0,this.length)}filter(G){const $=new Array;for(let re=0;re<this._length;re++){const ue=this.data[re];G(ue)&&$.push(ue)}return $}getItemAt(G){if(!(G<0||G>=this._length))return this.data[G]}includes(G,$){const re=this.data.indexOf(G,$);return-1!==re&&re<this.length}get length(){return this._length}set length(G){if(G>this._length){if(this._allocator){for(;this._length<G;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=G}else{if(this._deallocator)for(let $=G;$<this._length;++$)this.data[$]=this._deallocator(this.data[$]);this._length=G,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(G){this.data[this._length++]=G}pushArray(G,$=G.length){for(let re=0;re<$;re++)this.data[this._length++]=G[re]}fill(G,$){for(let re=0;re<$;re++)this.data[this._length++]=G}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const G=this.data[this._length];return++this._length,G}unshift(G){this.data.unshift(G),this._length++,Y(this)}pop(){if(0===this.length)return;const G=this.data[this.length-1];return this.length=this.length-1,this._shrink(),G}remove(G){const $=(0,D.cq)(this.data,G,this.length,this._hint);if(-1!==$)return this.data.splice($,1),this.length=this.length-1,G}removeUnordered(G){const $=(0,D.e$)(this.data,G,this.length,this._hint);return void 0!==$&&(this.length=this.length-1),this._shrink(),$}removeUnorderedIndex(G){if(!(G>=this.length||G<0))return this.swapElements(G,this.length-1),this.pop()}removeUnorderedMany(G,$=G.length,re){this.length=(0,D.FY)(this.data,G,this.length,$,this._hint,re),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(G,$){G>=this.length||$>=this.length||G===$||([this.data[G],this.data[$]]=[this.data[$],this.data[G]])}sort(G){w.sort(this.data,0,this.length,G)}iterableSort(G){return w.iterableSort(this.data,0,this.length,G)}some(G,$){for(let re=0;re<this.length;++re)if(G.call($,this.data[re],re,this.data))return!0;return!1}filterInPlace(G,$){let re=0;for(let ue=0;ue<this._length;++ue){const ae=this.data[ue];G.call($,ae,ue,this.data)&&(this.data[ue]=this.data[re],this.data[re]=ae,re++)}if(this._deallocator)for(let ue=re;ue<this._length;ue++)this.data[ue]=this._deallocator(this.data[ue]);return this._length=re,this._shrink(),this}forAll(G,$){const re=this.length,ue=this.data;for(let ae=0;ae<re;++ae)G.call($,ue[ae],ae,ue)}forEach(G,$){for(let re=0;re<this.length;++re)G.call($,this.data[re],re,this.data)}map(G,$){const re=new Array(this.length);for(let ue=0;ue<this.length;++ue)re[ue]=G.call($,this.data[ue],ue,this.data);return re}reduce(G,$){let re=$;for(let ue=0;ue<this.length;++ue)re=G(re,this.data[ue],ue,this.data);return re}has(G){const $=this.length,re=this.data;for(let ue=0;ue<$;++ue)if(re[ue]===G)return!0;return!1}}function Y(H){H.data.length>1.5*H.length&&(H.data.length=Math.floor(1.1*H.length))}},60330:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>G,v:()=>H});var W,$,D=T(17626),x=T(14517),w=T(62208),B=T(10699),U=T(76898);($=W||(W={}))[$.PENDING=0]="PENDING",$[$.RESOLVED=1]="RESOLVED",$[$.REJECTED=2]="REJECTED";class Y{constructor(re){this.instance=re,this._resolver=(0,B.dD)(),this._status=W.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=W.RESOLVED,this._cleanUp()},()=>{this._status=W.REJECTED,this._cleanUp()})}addResolvingPromise(re){this._resolvingPromises.push(re),this._tryResolve()}isResolved(){return this._status===W.RESOLVED}isRejected(){return this._status===W.REJECTED}isFulfilled(){return this._status!==W.PENDING}abort(){this._resolver.reject((0,B.zE)())}when(re,ue){return this._resolver.promise.then(re,ue)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const re=(0,B.dD)(),ue=[...this._resolvingPromises,(0,w.j0)(re.promise)],ae=this._allPromise=Promise.all(ue);ae.then(()=>{this.isFulfilled()||this._allPromise!==ae||this._resolver.resolve(this.instance)},oe=>{this.isFulfilled()||this._allPromise!==ae||(0,B.D_)(oe)||this._resolver.reject(oe)}),re.resolve()}}const H=$=>{let re=class extends ${constructor(...ue){super(...ue),this._promiseProps=new Y(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(ue,ae){return new Promise((oe,ie)=>{this._promiseProps.when(oe,ie)}).then(ue,ae)}catch(ue){return this.when(null,ue)}addResolvingPromise(ue){ue&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in ue?ue.when():ue)}};return re=(0,D._)([(0,U.j)("esri.core.Promise")],re),re};let G=class extends(H(x.Z)){};G=(0,D._)([(0,U.j)("esri.core.Promise")],G)},35133:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(62208);class x{constructor(B=(U=>U.values().next().value)){this._peeker=B,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let B;for(B of this._items);return B}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(B){this.contains(B)||this._items.add(B)}contains(B){return this._items.has(B)}pop(){if(0===this.length)return;const B=this.peek();return this._items.delete((0,D.j0)(B)),B}popLast(){if(0===this.length)return;const B=this.last();return this._items.delete((0,D.j0)(B)),B}remove(B){this._items.delete(B)}filter(B){return this._items.forEach(U=>{B(U)||this._items.delete(U)}),this}}},4619:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(w=1){this._seed=w}set seed(w){this._seed=w??Math.random()*D._m}getInt(){return this._seed=(D._a*this._seed+D._c)%D._m,this._seed}getFloat(){return this.getInt()/(D._m-1)}getIntRange(w,B){return Math.round(this.getFloatRange(w,B))}getFloatRange(w,B){const U=B-w;return w+this.getInt()/D._m*U}}D._m=2147483647,D._a=48271,D._c=0},94530:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>w});var D=T(62208),x=T(27899);class w extends x.Z{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,D.Bd)(this._set)}acquire(...U){const W=super.acquire(...U);return this._set.delete(W),W}release(U){U&&!this._set.has(U)&&(super.release(U),this._set.add(U))}_dispose(U){this._set.delete(U),super._dispose(U)}}},28862:(qe,xe,T)=>{"use strict";function D(w,B){for(const U of w.entries())if(B(U[0]))return!0;return!1}T.d(xe,{f:()=>D})},10349:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>x});var D=T(26584);class x{constructor(B,U,W=""){this.major=B,this.minor=U,this._context=W}lessThan(B,U){return this.major<B||B===this.major&&this.minor<U}since(B,U){return!this.lessThan(B,U)}validate(B){if(this.major!==B.major)throw new D.Z((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:B})}clone(){return new x(this.major,this.minor,this._context)}static parse(B,U=""){const[W,Y]=B.split("."),H=/^\s*\d+\s*$/;if(!W||!W.match||!W.match(H))throw new D.Z((U&&U+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:B});if(!Y||!Y.match||!Y.match(H))throw new D.Z((U&&U+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:B});const G=parseInt(W,10),$=parseInt(Y,10);return new x(G,$,U)}}},14889:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(90888);class x extends D.Z{constructor(B,U,W){if(super(B,U,W),!(this instanceof x))return new x(B,U,W)}}x.prototype.type="warning"},31283:(qe,xe,T)=>{"use strict";T.d(xe,{M9:()=>B,Wm:()=>Y,kk:()=>w,s3:()=>x,x3:()=>U});var x,$,D=T(62208);($=x||(x={}))[$.DEFAULTS=0]="DEFAULTS",$[$.COMPUTED=1]="COMPUTED",$[$.SERVICE=2]="SERVICE",$[$.PORTAL_ITEM=3]="PORTAL_ITEM",$[$.WEB_SCENE=4]="WEB_SCENE",$[$.WEB_MAP=5]="WEB_MAP",$[$.USER=6]="USER";const w=x.USER+1;function B($){switch($){case"defaults":return x.DEFAULTS;case"service":return x.SERVICE;case"portal-item":return x.PORTAL_ITEM;case"web-scene":return x.WEB_SCENE;case"web-map":return x.WEB_MAP;case"user":return x.USER}}function U($){switch($){case x.DEFAULTS:return"defaults";case x.SERVICE:return"service";case x.PORTAL_ITEM:return"portal-item";case x.WEB_SCENE:return"web-scene";case x.WEB_MAP:return"web-map";case x.USER:return"user"}return(0,D.j0)(void 0)}function Y($){return U($)}},83960:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>x});var D=T(77712);function x(w,B){const U=B?{...B,source:w}:w;return(0,D.Cb)({aliasOf:U})}},66656:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>Y});var D=T(90912),x=T(34117);const w=Object.prototype.toString;function B(H){const G="__accessorMetadata__"in H?(0,D.se)(H):H;return function(...$){if($.push(G),"number"==typeof $[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return U.apply(this,$)}}function U(H,G,$,re){(0,x.VZ)(H,G).cast=re}function Y(...H){if(3!==H.length||"string"!=typeof H[1])return 1===H.length&&"[object Function]"===w.call(H[0])?B(H[0]):1===H.length&&"string"==typeof H[0]?function W(H){return(G,$)=>{(0,x.VZ)(G,H).cast=G[$]}}(H[0]):void 0}},55342:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>w});var D=T(2076),x=T(77712);function w(B,U={}){const W=B instanceof D.X?B:new D.X(B,U),Y={type:U?.ignoreUnknown??1?W.apiValues:String,json:{type:W.jsonValues,read:!U?.readOnly&&{reader:W.read},write:{writer:W.write}}};return void 0!==U?.readOnly&&(Y.readOnly=!!U.readOnly),void 0!==U?.default&&(Y.json.default=U.default),void 0!==U?.name&&(Y.json.name=U.name),(0,x.Cb)(Y)}},77712:(qe,xe,T)=>{"use strict";T.d(xe,{CJ:()=>Y,Cb:()=>W,Eg:()=>G});var D=T(63290),x=T(90912),w=T(34595),B=T(34117),U=T(82255);function W($={}){return(re,ue)=>{if(re===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${re.name}.${ue}. Accessor does not support static properties.`);const ae=Object.getOwnPropertyDescriptor(re,ue),oe=(0,B.VZ)(re,ue);ae&&(ae.get||ae.set?(oe.get=ae.get||oe.get,oe.set=ae.set||oe.set):"value"in ae&&("value"in $&&D.Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${ue}" on "${re.constructor.name}" already defined in the metadata`,$),oe.value=$.value=ae.value)),null!=$.readOnly&&(oe.readOnly=$.readOnly);const ie=$.aliasOf;if(ie){const Q="string"==typeof ie?ie:ie.source,J="string"==typeof ie?null:!0===ie.overridable;let se;oe.dependsOn=[Q],oe.get=function(){let ee=(0,w.U2)(this,Q);if("function"==typeof ee){se||(se=Q.split(".").slice(0,-1).join("."));const le=(0,w.U2)(this,se);le&&(ee=ee.bind(le))}return ee},oe.readOnly||(oe.set=J?function(ee){void 0!==ee?this._override(ue,ee):this._clearOverride(ue)}:function(ee){(0,U.t)(this,Q,ee)})}const X=$.type,Z=$.types;oe.cast||(X?oe.cast=function H($){let re=0,ue=$;if((0,x.AY)($))return(0,x.sY)($);for(;Array.isArray(ue)&&1===ue.length&&"string"!=typeof ue[0]&&"number"!=typeof ue[0];)ue=ue[0],re++;const ae=ue;if((0,x.gB)(ae))return 0===re?(0,x.i$)(ae):(0,x.Iu)((0,x.i$)(ae),re);if(1===re)return(0,x.rY)(ae);if(re>1)return(0,x.di)(ae,re);return $.from?$.from:(0,x.se)($)}(X):Z&&(oe.cast=Array.isArray(Z)?(0,x.Ls)((0,x.N7)(Z[0])):(0,x.N7)(Z))),$.range&&(oe.cast=G(oe.cast,$.range)),(0,B.tz)(oe,$)}}function Y($,re,ue){const ae=(0,B.VZ)($,ue);ae.json||(ae.json={});let oe=ae.json;return void 0!==re&&(oe.origins||(oe.origins={}),oe.origins[re]||(oe.origins[re]={}),oe=oe.origins[re]),oe}function G($,re){return ue=>{let ae=+$(ue);return null!=re.step&&(ae=Math.round(ae/re.step)*re.step),null!=re.min&&(ae=Math.max(re.min,ae)),null!=re.max&&(ae=Math.min(re.max,ae)),ae}}},68653:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>x});var D=T(77712);function x(w,B,U){let W,Y;return void 0===B||Array.isArray(B)?(Y=w,U=B,W=[void 0]):(Y=B,W=Array.isArray(w)?w:[w]),(H,G)=>{const $=H.constructor.prototype;W.forEach(re=>{const ue=(0,D.CJ)(H,re,Y);ue.read&&"object"==typeof ue.read||(ue.read={}),ue.read.reader=$[G],U&&(ue.read.source=(ue.read.source||[]).concat(U))})}}},61039:(qe,xe,T)=>{"use strict";function D(x){return(w,B)=>{w[B]=x}}T.d(xe,{c:()=>D})},76898:(qe,xe,T)=>{"use strict";T.d(xe,{j:()=>H}),T(8314);var x=T(44648),w=T(34117),B=T(36082),U=T(33794);const W=new Set,Y=new Set;function H(re){return ue=>{ue.prototype.declaredClass=re,function $(re){const ae=(0,w.JT)(re.prototype).properties,oe={};for(const ie of Object.getOwnPropertyNames(ae)){const X=ae[ie];(0,U.OM)(X),oe[ie]={enumerable:!0,configurable:!0,get:G(ie,X),set(Z){const Q=this.__accessor__;if(void 0!==Q){if(!Object.isFrozen(this)){if(Q.initialized&&X.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${ie}' of ${this.declaredClass}`);if(Q.lifecycle===x.F.CONSTRUCTED&&X.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${ie}' of ${this.declaredClass}`);Q.set(ie,Z)}}else Object.defineProperty(this,ie,{enumerable:!0,configurable:!0,writable:!0,value:Z})}}}Object.defineProperties(re.prototype,oe)}(ue);const ae=[],oe=[];let ie=ue.prototype;for(;ie;)ie.hasOwnProperty("initialize")&&!W.has(ie.initialize)&&(W.add(ie.initialize),ae.push(ie.initialize)),ie.hasOwnProperty("destroy")&&!Y.has(ie.destroy)&&(Y.add(ie.destroy),oe.push(ie.destroy)),ie=Object.getPrototypeOf(ie);W.clear(),Y.clear();class X extends ue{constructor(...Q){if(super(...Q),this.constructor===X&&"function"==typeof this.postscript){if(ae.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let J=ae.length-1;J>=0;J--)ae[J].call(this)}}),oe.length){let J=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!J){J=!0;for(let se=0;se<oe.length;se++)oe[se].call(this)}}})}this.postscript(...Q)}}}return X.__accessorMetadata__=(0,w.JT)(ue.prototype),X.prototype.declaredClass=re,X}}function G(re,ue){return null==ue.get?function(){const ae=this.__accessor__.properties.get(re);if(void 0===ae)return;(0,B.it)(ae);const oe=this.__accessor__.store;return oe.has(re)?oe.get(re):ae.metadata.value}:function(){const ae=this.__accessor__.properties.get(re);if(void 0!==ae)return ae.getComputed()}}},99433:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>x});var D=T(77712);function x(w,B,U){let W,Y;return void 0===B?(Y=w,W=[void 0]):"string"!=typeof B?(Y=w,W=[void 0],U=B):(Y=B,W=Array.isArray(w)?w:[w]),(H,G)=>{const $=H.constructor.prototype;for(const re of W){const ue=(0,D.CJ)(H,re,Y);ue.write&&"object"==typeof ue.write||(ue.write={}),U&&(ue.write.target=U),ue.write.writer=$[G]}}}},12590:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>x});var D=T(31283);function x(w,B,U){B.keys().forEach(Y=>{U.set(Y,B.get(Y),D.s3.DEFAULTS)}),Object.keys(w.metadatas).forEach(Y=>{w.internalGet(Y)&&U.set(Y,w.internalGet(Y),D.s3.DEFAULTS)})}},84682:(qe,xe,T)=>{"use strict";T.d(xe,{Hg:()=>oe,V7:()=>ae,uD:()=>ue,xb:()=>ie});var D=T(14517),x=T(46160),w=T(62208),B=T(52323);const U=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function W(X){return X instanceof D.Z}function Y(X){return X instanceof x.Z?Object.keys(X.items):W(X)?(0,B.vw)(X).keys():X?Object.keys(X):[]}function H(X,Z){return X instanceof x.Z?X.items[Z]:X[Z]}function $(X){return X?X.declaredClass:null}function re(X,Z){const Q=X.diff;if(Q&&"function"==typeof Q)return Q(X,Z);const J=Y(X),se=Y(Z);if(0===J.length&&0===se.length)return;if(!J.length||!se.length||function G(X,Z){return!(!Array.isArray(X)||!Array.isArray(Z))&&X.length!==Z.length}(X,Z))return{type:"complete",oldValue:X,newValue:Z};const ee=se.filter(_e=>!J.includes(_e)),le=J.filter(_e=>!se.includes(_e)),ne=J.filter(_e=>se.includes(_e)&&H(X,_e)!==H(Z,_e)).concat(ee,le).sort(),ce=$(X);if(ce&&U.includes(ce)&&ne.length)return{type:"complete",oldValue:X,newValue:Z};let de;const me=W(X)&&W(Z);for(const _e of ne){const he=H(X,_e),ye=H(Z,_e);let fe;if((me||"function"!=typeof he&&"function"!=typeof ye)&&he!==ye&&(null!=he||null!=ye)){if(Q&&Q[_e]&&"function"==typeof Q[_e])fe=Q[_e](he,ye);else if(he instanceof Date&&ye instanceof Date){if(he.getTime()===ye.getTime())continue;fe={type:"complete",oldValue:he,newValue:ye}}else fe="object"==typeof he&&"object"==typeof ye&&$(he)===$(ye)?re(he,ye):{type:"complete",oldValue:he,newValue:ye};(0,w.pC)(fe)&&((0,w.pC)(de)?de.diff[_e]=fe:de={type:"partial",diff:{[_e]:fe}})}}return de}function ue(X,Z){if((0,w.Wi)(X))return!1;const Q=Z.split(".");let J=X;for(const se of Q){if("complete"===J.type)return!0;if("partial"!==J.type)return!1;{const ee=J.diff[se];if(!ee)return!1;J=ee}}return!0}function ae(X,Z){for(const Q of Z)if(ue(X,Q))return!0;return!1}function oe(X,Z){if(!("function"==typeof X||"function"==typeof Z||(0,w.Wi)(X)&&(0,w.Wi)(Z)))return(0,w.Wi)(X)||(0,w.Wi)(Z)||"object"==typeof X&&"object"==typeof Z&&$(X)!==$(Z)?{type:"complete",oldValue:X,newValue:Z}:re(X,Z)}function ie(X){if((0,w.Wi)(X))return!0;switch(X.type){case"complete":return!1;case"collection":{const Z=X;for(const Q of Z.added)if(!ie(Q))return!1;for(const Q of Z.removed)if(!ie(Q))return!1;for(const Q of Z.changed)if(!ie(Q))return!1;return!0}case"partial":for(const Z in X.diff)if(!ie(X.diff[Z]))return!1;return!0}}},90912:(qe,xe,T)=>{"use strict";T.d(xe,{AY:()=>De,Iu:()=>ce,Ls:()=>ee,N7:()=>he,TJ:()=>X,V5:()=>fe,Zs:()=>Y,di:()=>de,gB:()=>me,i$:()=>_e,q9:()=>H,rY:()=>le,sY:()=>ve,se:()=>se,vU:()=>G,z8:()=>ye}),T(8314);var x=T(63290),w=T(88159);const B=x.Z.getLogger("esri.core.Accessor");function U(Le){return null==Le?Le:new Date(Le)}function W(Le){return null==Le?Le:!!Le}function Y(Le){return null==Le?Le:Le.toString()}function H(Le){return null==Le?Le:(Le=parseFloat(Le),isNaN(Le)?0:Le)}function G(Le){return null==Le?Le:Math.round(parseFloat(Le))}function $(Le){return Le&&Le.constructor&&void 0!==Le.constructor.__accessorMetadata__}function re(Le,je){return null!=je&&Le&&!(je instanceof Le)}function ue(Le){return Le&&"isCollection"in Le}function ae(Le){return Le&&Le.Type?"function"==typeof Le.Type?Le.Type:Le.Type.base:null}function ie(Le,je){return!!$(je)&&(B.error("Accessor#set","Assigning an instance of '"+(je.declaredClass||"unknown")+"' which is not a subclass of '"+Z(Le)+"'"),!0)}function X(Le,je){return null==je?je:ue(Le)?function oe(Le,je){if(!je||!je.constructor||!ue(je.constructor))return ie(Le,je)?je:new Le(je);const ze=ae(Le.prototype.itemType),Ee=ae(je.constructor.prototype.itemType);return ze?Ee?ze===Ee?je:ze.prototype.isPrototypeOf(Ee.prototype)?new Le(je):(ie(Le,je),je):new Le(je):je}(Le,je):re(Le,je)?ie(Le,je)?je:new Le(je):je}function Z(Le){return Le&&Le.prototype&&Le.prototype.declaredClass||"unknown"}const Q=new WeakMap;function J(Le){switch(Le){case Number:return H;case ye:return G;case Boolean:return W;case String:return Y;case Date:return U;default:return(0,w.s1)(Q,Le,()=>X.bind(null,Le))}}function se(Le,je){const ze=J(Le);return 1===arguments.length?ze:ze(je)}function ee(Le,je,ze){return 1===arguments.length?ee.bind(null,Le):je&&(Array.isArray(je)?je.map(Ee=>Le(Ee,ze)):[Le(je,ze)])}function le(Le,je){return 1===arguments.length?ee(se.bind(null,Le)):ee(se.bind(null,Le),je)}function ne(Le,je,ze){return 0!==je&&Array.isArray(ze)?ze.map(Ee=>ne(Le,je-1,Ee)):Le(ze)}function ce(Le,je,ze){if(2===arguments.length)return ce.bind(null,Le,je);if(!ze)return ze;let Ee=je,Ae=ze=ne(Le,je,ze);for(;Ee>0&&Array.isArray(Ae);)Ee--,Ae=Ae[0];if(void 0!==Ae)for(let we=0;we<Ee;we++)ze=[ze];return ze}function de(Le,je,ze){return 2===arguments.length?ce(se.bind(null,Le),je):ce(se.bind(null,Le),je,ze)}function me(Le){return!!Array.isArray(Le)&&!Le.some(je=>{const ze=typeof je;return!("string"===ze||"number"===ze||"function"===ze&&Le.length>1)})}function _e(Le,je){if(2===arguments.length)return _e(Le).call(null,je);const ze=new Set,Ee=Le.filter(Pe=>"function"!=typeof Pe),Ae=Le.filter(Pe=>"function"==typeof Pe);for(const Pe of Le)"string"!=typeof Pe&&"number"!=typeof Pe||ze.add(Pe);let we=null,Be=null;return(Pe,Oe)=>{if(null==Pe)return Pe;const Ke=typeof Pe,Ve="string"===Ke||"number"===Ke;return Ve&&(ze.has(Pe)||Ae.some(Ne=>"string"===Ke&&Ne===String||"number"===Ke&&Ne===Number))||"object"===Ke&&Ae.some(Ne=>!re(Pe,Ne))?Pe:(Ve&&Ee.length?(we||(we=Ee.map(Ne=>"string"==typeof Ne?`'${Ne}'`:`${Ne}`).join(", ")),B.error("Accessor#set",`'${Pe}' is not a valid value for this property, only the following values are valid: ${we}`)):"object"==typeof Pe&&Ae.length?(Be||(Be=Ae.map(Ne=>Z(Ne)).join(", ")),B.error("Accessor#set",`'${Pe}' is not a valid value for this property, value must be one of ${Be}`)):B.error("Accessor#set",`'${Pe}' is not a valid value for this property`),Oe&&(Oe.valid=!1),null)}}function he(Le,je){if(2===arguments.length)return he(Le).call(null,je);const ze={},Ee=[],Ae=[];for(const Oe in Le.typeMap){const Ke=Le.typeMap[Oe];ze[Oe]=se(Ke),Ee.push(Z(Ke)),Ae.push(Oe)}const we=()=>`'${Ee.join("', '")}'`,Be=()=>`'${Ae.join("', '")}'`,Pe="string"==typeof Le.key?Oe=>Oe[Le.key]:Le.key;return Oe=>{if(Le.base&&!re(Le.base,Oe)||null==Oe)return Oe;const Ke=Pe(Oe)||Le.defaultKeyValue,Ve=ze[Ke];if(!Ve)return B.error("Accessor#set",`Invalid property value, value needs to be one of ${we()}, or a plain object that can autocast (having .type = ${Be()})`),null;if(!re(Le.typeMap[Ke],Oe))return Oe;if("string"==typeof Le.key&&!$(Oe)){const Ne={};for(const Ie in Oe)Ie!==Le.key&&(Ne[Ie]=Oe[Ie]);return Ve(Ne)}return Ve(Oe)}}class ye{}const fe={native:Le=>({type:"native",value:Le}),array:Le=>({type:"array",value:Le}),oneOf:Le=>({type:"one-of",values:Le})};function De(Le){if(!Le||!("type"in Le))return!1;switch(Le.type){case"native":case"array":case"one-of":return!0}return!1}function ve(Le){switch(Le.type){case"native":return se(Le.value);case"array":return ee(ve(Le.value));case"one-of":return function Ce(Le){let je=null;return(ze,Ee)=>Te(ze,Le)?ze:(null==je&&(je=ge(Le)),B.error("Accessor#set",`Invalid property value, value needs to be of type ${je}`),Ee&&(Ee.valid=!1),null)}(Le);default:return null}}function ge(Le){switch(Le.type){case"native":switch(Le.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ye:return"integer";case Date:return"date";default:return Z(Le.value)}case"array":return`array of ${ge(Le.value)}`;case"one-of":{const je=Le.values.map(ze=>ge(ze));return`one of ${je.slice(0,je.length-1)} or ${je[je.length-1]}`}}return"unknown"}function Te(Le,je){if(null==Le)return!0;switch(je.type){case"native":switch(je.value){case Number:case ye:return"number"==typeof Le;case Boolean:return"boolean"==typeof Le;case String:return"string"==typeof Le}return Le instanceof je.value;case"array":return!!Array.isArray(Le)&&!Le.some(ze=>!Te(ze,je.value));case"one-of":return je.values.some(ze=>Te(Le,ze))}}},33794:(qe,xe,T)=>{"use strict";T.d(xe,{hk:()=>re,HS:()=>G,Ah:()=>$,OM:()=>Z});var D=T(90912),w=T(383);function U(Q){Q.name&&(Q.read&&"object"==typeof Q.read?void 0===Q.read.source&&(Q.read.source=Q.name):Q.read={source:Q.name},Q.write&&"object"==typeof Q.write?void 0===Q.write.target&&(Q.write.target=Q.name):Q.write={target:Q.name})}function W(Q){"boolean"==typeof Q.read?Q.read={enabled:Q.read}:"function"==typeof Q.read?Q.read={enabled:!0,reader:Q.read}:Q.read&&"object"==typeof Q.read&&void 0===Q.read.enabled&&(Q.read.enabled=!0)}function Y(Q){"boolean"==typeof Q.write?Q.write={enabled:Q.write}:"function"==typeof Q.write?Q.write={enabled:!0,writer:Q.write}:Q.write&&"object"==typeof Q.write&&void 0===Q.write.enabled&&(Q.write.enabled=!0)}var H=T(23025);function G(Q,J){return re(Q,"read",J)}function $(Q,J){return re(Q,"write",J)}function re(Q,J,se){let ee=Q&&Q.json;if(Q&&Q.json&&Q.json.origins&&se){const le=Q.json.origins[se.origin];le&&("any"===J||J in le)&&(ee=le)}return ee}function oe(Q){return Q.type?ie(Q):X(Q)}function ie(Q){if(!Q.type)return;let J=0,se=Q.type;for(;Array.isArray(se)&&!(0,D.gB)(se);)se=se[0],J++;return{type:se,ndimArray:J}}function X(Q){if(!Q.types)return;let J=0,se=Q.types;for(;Array.isArray(se);)se=se[0],J++;return{types:se,ndimArray:J}}function Z(Q){(function B(Q){if(Q.json||(Q.json={}),W(Q.json),Y(Q.json),U(Q.json),Q.json.origins)for(const J in Q.json.origins)W(Q.json.origins[J]),Y(Q.json.origins[J]),U(Q.json.origins[J]);return!0})(Q)&&(function x(Q){if(Q.json&&Q.json.origins){const J=Q.json.origins,se={"web-document":["web-scene","web-map"]};for(const ee in se)if(J[ee]){const le=J[ee];se[ee].forEach(ne=>{J[ne]=le}),delete J[ee]}}}(Q),function ue(Q){const J=function ae(Q){return Q.json.types?X(Q.json):Q.type?ie(Q):X(Q)}(Q);if(Q.json.origins)for(const se in Q.json.origins){const ee=Q.json.origins[se],le=ee.types?oe(ee):J;(0,w.U)(le,ee,!1),ee.types&&!ee.write&&Q.json.write&&Q.json.write.enabled&&(ee.write={...Q.json.write}),(0,H.U)(le,ee)}(0,w.U)(J,Q.json,!0),(0,H.U)(J,Q.json)}(Q))}},383:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>Y,d:()=>H});var D=T(63290),x=T(94113),w=T(14889),B=T(34117),U=T(94056);const W=D.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Y(se,ee,le){se&&(!le&&!ee.read||ee.read?.reader||!1===ee.read?.enabled||function ie(se){return"types"in se?Z(se.types):X(se.type)}(se)&&(0,x.RB)("read.reader",H(se),ee))}function H(se){const ee=se.ndimArray??0;if(ee>1)return function ue(se){const ee=G(se),le=re.bind(null,ee),ne=se.ndimArray??0;return(ce,de,me)=>{if(null==ce)return ce;ce=le(ce,me,ne);let _e=ne,he=ce;for(;_e>0&&Array.isArray(he);)_e--,he=he[0];if(void 0!==he)for(let ye=0;ye<_e;ye++)ce=[ce];return ce}}(se);if(1===ee)return ae(se);if("type"in se&&oe(se.type)){const le=se.type.prototype?.itemType?.Type,ne=ae("function"==typeof le?{type:le}:{types:le});return(ce,de,me)=>{const _e=ne(ce,de,me);return _e&&new se.type(_e)}}return G(se)}function G(se){return"type"in se?function $(se){return se.prototype.read?(ee,le,ne)=>{if(null==ee)return ee;const ce=typeof ee;if("object"!==ce)return void W.error(`Expected JSON value of type 'object' to deserialize type '${se.prototype.declaredClass}', but got '${ce}'`);const de=new se;return de.read(ee,ne),de}:se.fromJSON}(se.type):function Q(se){let ee=null;const le=se.errorContext??"type";return(ne,ce,de)=>{if(null==ne)return ne;const me=typeof ne;if("object"!==me)return void W.error(`Expected JSON value of type 'object' to deserialize, but got '${me}'`);ee||(ee=function J(se){const ee={};for(const le in se.typeMap){const ne=se.typeMap[le],ce=(0,B.JT)(ne.prototype);if("function"==typeof se.key)continue;const de=ce.properties[se.key];if(!de)continue;de.json?.type&&Array.isArray(de.json.type)&&1===de.json.type.length&&"string"==typeof de.json.type[0]&&(ee[de.json.type[0]]=ne);const me=de.json?.write;if(!me||!me.writer){ee[le]=ne;continue}const _e=me.target,he="string"==typeof _e?_e:se.key,ye={};me.writer(le,ye,he),ye[he]&&(ee[ye[he]]=ne)}return ee}(se));const _e=se.key;if("string"!=typeof _e)return;const he=ne[_e],ye=he?ee[he]:se.defaultKeyValue?se.typeMap[se.defaultKeyValue]:void 0;if(!ye){const De=`Type '${he||"unknown"}' is not supported`;return de&&de.messages&&ne&&de.messages.push(new w.Z(`${le}:unsupported`,De,{definition:ne,context:de})),void W.error(De)}const fe=new ye;return fe.read(ne,de),fe}}(se.types)}function re(se,ee,le,ne){return 0!==ne&&Array.isArray(ee)?ee.map(ce=>re(se,ce,le,ne-1)):se(ee,void 0,le)}function ae(se){const ee=G(se);return(le,ne,ce)=>{if(null==le)return le;if(Array.isArray(le)){const me=[];for(const _e of le){const he=ee(_e,void 0,ce);void 0!==he&&me.push(he)}return me}const de=ee(le,void 0,ce);return void 0!==de?[de]:void 0}}function oe(se){if(!(0,U.u)(se))return!1;const ee=se.prototype.itemType;return!(!ee||!ee.Type)&&("function"==typeof ee.Type?X(ee.Type):Z(ee.Type))}function X(se){return!Array.isArray(se)&&!!se&&se.prototype&&("read"in se.prototype||"fromJSON"in se||oe(se))}function Z(se){for(const ee in se.typeMap)if(!X(se.typeMap[ee]))return!1;return!0}},94056:(qe,xe,T)=>{"use strict";function D(x){return!!x&&x.prototype&&x.prototype.declaredClass&&0===x.prototype.declaredClass.indexOf("esri.core.Collection")}T.d(xe,{u:()=>D})},23025:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>W,k:()=>ue});var D=T(26584),x=T(63290),w=T(94113),B=T(94056);const U=x.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function W(X,Z){if(!Z.write||Z.write.writer||!1===Z.write.enabled&&!Z.write.overridePolicy)return;const Q=X?.ndimArray??0;Z.write.writer=X&&(1===Q||"type"in X&&(0,B.u)(X.type))?ae:Q>1?function ie(X){return(Z,Q,J,se)=>{let ee;if(null===Z)ee=null;else{ee=oe(Z,se,X);let le=X,ne=ee;for(;le>0&&Array.isArray(ne);)le--,ne=ne[0];if(void 0!==ne)for(let ce=0;ce<le;ce++)ee=[ee]}(0,w.RB)(J,ee,Q)}}(Q):Z.types?Array.isArray(Z.types)?function G(X){return(Z,Q,J,se)=>Z&&Array.isArray(Z)?$(Z.filter(ee=>H(ee,X,se)),Q,J,se):$(Z,Q,J,se)}(Z.types[0]):function Y(X){return(Z,Q,J,se)=>Z?H(Z,X,se)?$(Z,Q,J,se):void 0:$(Z,Q,J,se)}(Z.types):$}function H(X,Z,Q){for(const J in Z.typeMap)if(X instanceof Z.typeMap[J])return!0;if(Q?.messages){const J=Z.errorContext??"type",se=`Values of type '${("function"!=typeof Z.key?X[Z.key]:X.declaredClass)??"Unknown"}' cannot be written`;Q&&Q.messages&&X&&Q.messages.push(new D.Z(`${J}:unsupported`,se,{definition:X,context:Q})),U.error(se)}return!1}function $(X,Z,Q,J){(0,w.RB)(Q,re(X,J),Z)}function re(X,Z){return X&&"function"==typeof X.write?X.write({},Z):X&&"function"==typeof X.toJSON?X.toJSON():"number"==typeof X?ue(X):X}function ue(X){return X===-1/0?-Number.MAX_VALUE:X===1/0?Number.MAX_VALUE:isNaN(X)?null:X}function ae(X,Z,Q,J){let se;null===X?se=null:X&&"function"==typeof X.map?(se=X.map(ee=>re(ee,J)),"function"==typeof se.toArray&&(se=se.toArray())):se=[re(X,J)],(0,w.RB)(Q,se,Z)}function oe(X,Z,Q){return 0!==Q&&Array.isArray(X)?X.map(J=>oe(J,Z,Q-1)):re(X,Z)}},34595:(qe,xe,T)=>{"use strict";T.d(xe,{$z:()=>B,Gg:()=>W,U2:()=>U});var D=T(52323);function x(Y,H){const G="?"===Y[Y.length-1]?Y.slice(0,-1):Y;if(null!=H.getItemAt||Array.isArray(H)){const re=parseInt(G,10);if(!isNaN(re))return Array.isArray(H)?H[re]:H.getItemAt(re)}const $=(0,D.vw)(H);return(0,D.b6)($,G)?$.get(G):H[G]}function w(Y,H,G){if(null==Y)return Y;const $=x(H[G],Y);return!$&&G<H.length-1?void 0:G===H.length-1?$:w($,H,G+1)}function B(Y,H,G=0){return"string"!=typeof H||H.includes(".")?w(Y,(0,D.NI)(H),G):x(H,Y)}function U(Y,H){return B(Y,H)}function W(Y,H){return void 0!==B(H,Y)}},44648:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{F:()=>D}),(x=D||(D={}))[x.INITIALIZING=0]="INITIALIZING",x[x.CONSTRUCTING=1]="CONSTRUCTING",x[x.CONSTRUCTED=2]="CONSTRUCTED"},34117:(qe,xe,T)=>{"use strict";T.d(xe,{JT:()=>U,VZ:()=>Y,tz:()=>$});var D=T(58817),x=T(62208),w=T(52323);class B{constructor(X){this.autoDestroy=!1,this.properties=X}}function U(ie){let X=ie.constructor.__accessorMetadata__;const Z=Object.prototype.hasOwnProperty.call(ie.constructor,"__accessorMetadata__");if(X){if(!Z){const Q=Object.create(X.properties),J=X.autoDestroy;for(const se in Q)Q[se]=(0,D.d9)(Q[se]);X=new B(Q),X.autoDestroy=J,Object.defineProperty(ie.constructor,"__accessorMetadata__",{value:X,enumerable:!1,configurable:!0,writable:!0})}}else X=new B({}),Object.defineProperty(ie.constructor,"__accessorMetadata__",{value:X,enumerable:!1,configurable:!0,writable:!0});return(0,x.j0)(ie.constructor.__accessorMetadata__)}function Y(ie,X){const Z=function W(ie){return U(ie).properties}(ie);let Q=Z[X];return Q||(Q=Z[X]={}),Q}function $(ie,X){return(0,w.TS)(ie,X,ue)}const re=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function ue(ie){return re.test(ie)?"replace":"merge"}},29338:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>$,i:()=>G});var D=T(34595),x=T(52323),w=T(33794);function B(re,ue,ae){if(!re||!re.read||!1===re.read.enabled||!re.read.source)return!1;const oe=re.read.source;if("string"==typeof oe){if(oe===ue||oe.includes(".")&&0===oe.indexOf(ue)&&(0,D.Gg)(oe,ae))return!0}else for(const ie of oe)if(ie===ue||ie.includes(".")&&0===ie.indexOf(ue)&&(0,D.Gg)(ie,ae))return!0;return!1}function W(re,ue,ae,oe,ie){let X=(0,w.HS)(ue[ae],ie);(function U(re){return re&&(!re.read||!1!==re.read.enabled&&!re.read.source)})(X)&&(re[ae]=!0);for(const Z of Object.getOwnPropertyNames(ue))X=(0,w.HS)(ue[Z],ie),B(X,ae,oe)&&(re[Z]=!0)}function Y(re,ue,ae,oe){const X=(0,w.hk)(ae.metadatas[ue],"any",oe),Z=X&&X.default;if(void 0===Z)return;const Q="function"==typeof Z?Z.call(re,ue,oe):Z;void 0!==Q&&ae.set(ue,Q)}const H={origin:"service"};function G(re,ue,ae=H){if(!ue||"object"!=typeof ue)return;const oe=(0,x.vw)(re),ie=oe.metadatas,X={};for(const Z of Object.getOwnPropertyNames(ue))W(X,ie,Z,ue,ae);oe.setDefaultOrigin(ae.origin);for(const Z of Object.getOwnPropertyNames(X)){const Q=(0,w.HS)(ie[Z],ae).read,J=Q&&Q.source;let se;se=J&&"string"==typeof J?(0,D.$z)(ue,J):ue[Z],Q&&Q.reader&&(se=Q.reader.call(re,se,ue,ae)),void 0!==se&&oe.set(Z,se)}if(!ae||!ae.ignoreDefaults){oe.setDefaultOrigin("defaults");for(const Z of Object.getOwnPropertyNames(ie))X[Z]||Y(re,Z,oe,ae)}oe.setDefaultOrigin("user")}function $(re,ue,ae,oe=H){const ie={...oe,messages:[]};ae(ie),ie.messages?.forEach(X=>{"warning"!==X.type||re.loaded?oe&&oe.messages&&oe.messages.push(X):re.loadWarnings.push(X)})}},82255:(qe,xe,T)=>{"use strict";T.d(xe,{t:()=>U});var D=T(26584),x=T(8314),w=T(63290),B=T(34595);function U(G,$,re){if(G&&$)if("object"==typeof $)for(const ue of Object.getOwnPropertyNames($))U(G,ue,$[ue]);else{if($.includes(".")){const ae=$.split("."),oe=ae.splice(ae.length-1,1)[0];return void U((0,B.U2)(G,ae),oe,re)}const ue=G.__accessor__;null!=ue&&function W(G,$){if((0,x.Z)("esri-unknown-property-errors")&&!function Y(G,$){return null!=$.metadatas[G]}(G,$))throw new D.Z("set:unknown-property",function H(G,$){return"setting unknown property '"+G+"' on instance of "+$.host.declaredClass}(G,$))}($,ue),G[$]=re}}w.Z.getLogger("esri.core.accessorSupport.set")},36082:(qe,xe,T)=>{"use strict";T.d(xe,{GF:()=>J,LJ:()=>ue,gb:()=>ae,it:()=>G,mS:()=>Z}),T(8314);var x=T(63290),w=T(52323),B=T(2345);let U,W=[];const Y=x.Z.getLogger("esri.core.Accessor");function G(ee){void 0!==U&&U.onObservableAccessed(ee)}let $=!1,re=!1;function ue(ee,le,ne){if($)return oe(ee,le,ne);ie(ee);const ce=le.call(ne);return X(),ce}function ae(ee,le){return ue(void 0,ee,le)}function oe(ee,le,ne){const ce=$;$=!0,ie(ee);let de=null;try{de=le.call(ne)}catch(me){re&&Y.error(me)}return X(),$=ce,de}function ie(ee){U=ee,W.push(ee)}function X(){const ee=W.pop();U=W.length>0?W[W.length-1]:void 0,void 0!==ee&&ee.onTrackingEnd()}function Z(ee,le){if(le.flags&B.v.DepTrackingInitialized)return;const ne=re;re=!1,le.flags&B.v.AutoTracked?oe(le,le.metadata.get,ee):J(ee,le),re=ne}const Q=[];function J(ee,le){le.flags&B.v.ExplicitlyTracking||(le.flags|=B.v.ExplicitlyTracking,oe(le,()=>{const ne=le.metadata.dependsOn||Q;for(const ce of ne)if("string"!=typeof ce||ce.includes(".")){const de=(0,w.NI)(ce);for(let me=0,_e=ee;me<de.length&&null!=_e&&"object"==typeof _e;++me)_e=se(_e,de[me],me!==de.length-1)}else se(ee,ce,!1)}),le.flags&=~B.v.ExplicitlyTracking)}function se(ee,le,ne){const ce="?"===le[le.length-1]?le.slice(0,-1):le;if(null!=ee.getItemAt||Array.isArray(ee)){const me=parseInt(ce,10);if(!isNaN(me))return Array.isArray(ee)?ee[me]:ee.getItemAt(me)}const de=(0,w.vw)(ee)?.properties.get(ce);return de&&(G(de),Z(ee,de)),ne?ee[ce]:void 0}},21352:(qe,xe,T)=>{"use strict";T.d(xe,{EH:()=>Y,U5:()=>U,Xz:()=>W});var D=T(36082),x=T(819);let w=!1;const B=[];function U($,re){let ue=new x.M(function ie(){if(!ue||oe)return;if(w)return void H(ie);const Z=ae;ue.clear(),w=!0,oe=!0,ae=(0,D.LJ)(ue,$),oe=!1,w=!1,re(ae,Z),G()}),ae=null,oe=!1;return oe=!0,ae=(0,D.LJ)(ue,$),oe=!1,{remove:function X(){ue&&(ue.destroy(),ue=null,ae=null)}}}function W($,re){let ue=new x.M(function oe(){re(ae,X)}),ae=null;function X(){return ue?(ue.clear(),ae=(0,D.LJ)(ue,$),ae):null}return X(),{remove:function ie(){ue&&(ue.destroy(),ue=null),ae=null}}}function Y($){let re=new x.M(function ae(){re&&!ue&&(w?H(ae):(re.clear(),w=!0,ue=!0,(0,D.LJ)(re,$),ue=!1,w=!1,G()))}),ue=!1;return ue=!0,(0,D.LJ)(re,$),ue=!1,{remove:function oe(){re&&(re.destroy(),re=null)}}}function H($){B.includes($)||B.unshift($)}function G(){for(;B.length;)B.pop()()}},2345:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{v:()=>D}),(x=D||(D={}))[x.Dirty=1]="Dirty",x[x.Overriden=2]="Overriden",x[x.Computing=4]="Computing",x[x.NonNullable=8]="NonNullable",x[x.HasDefaultValue=16]="HasDefaultValue",x[x.DepTrackingInitialized=32]="DepTrackingInitialized",x[x.AutoTracked=64]="AutoTracked",x[x.ExplicitlyTracking=128]="ExplicitlyTracking"},12196:(qe,xe,T)=>{"use strict";T.d(xe,{X:()=>x});var D=T(85931);class x{constructor(B,U){this._observers=B,this._observer=U}remove(){(0,D.Od)(this._observers,this._observer)}}},48902:(qe,xe,T)=>{"use strict";T.d(xe,{s:()=>x});var D=T(12196);class x{constructor(){this._observers=[]}observe(B){return this._observers.includes(B)||this._observers.push(B),new D.X(this._observers,B)}notify(){const B=this._observers.slice();for(let U=0;U<B.length;++U){const W=B[U];W.onInvalidated(),W.onCommitted()}}}},819:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>D});class D{constructor(w){this._notify=w,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const w=this._invalidCount;if(1===w)return this._invalidCount=0,void this._notify();this._invalidCount=w>0?w-1:0}onObservableAccessed(w){this._accessed.includes(w)||this._accessed.push(w)}onTrackingEnd(){const w=this._handles,B=this._accessed;for(let U=0;U<B.length;++U)w.push(B[U].observe(this));B.length=0}clear(){const w=this._handles;for(let B=0;B<w.length;++B)w[B].remove();w.length=0}}},52323:(qe,xe,T)=>{"use strict";T.d(xe,{IH:()=>ie,NI:()=>$,Qc:()=>oe,TS:()=>Y,b6:()=>U,vw:()=>B});var D=T(54024),x=T(58817),w=T(62208);function B(X){return X?X.__accessor__?X.__accessor__:X.propertyInvalidated?X:null:null}function U(X,Z){return null!=X&&X.metadatas&&null!=X.metadatas[Z]}function Y(X,Z,Q){return H(X,Z,Q?{policy:Q,path:""}:null)}function H(X,Z,Q){return Z?Object.keys(Z).reduce((J,se)=>{let ee=null,le="merge";if(Q&&(ee=Q.path?`${Q.path}.${se}`:se,le=Q.policy(ee)),"replace"===le)return J[se]=Z[se],J;if(void 0===J[se])return J[se]=(0,x.d9)(Z[se]),J;let ne=J[se],ce=Z[se];if(ne===ce)return J;if(Array.isArray(ce)||Array.isArray(J))ne=J[se]=ne?Array.isArray(ne)?ne.concat():[ne]:[],ce&&(Array.isArray(ce)||(ce=[ce]),ce.forEach(de=>{ne.includes(de)||ne.push(de)}));else if(ce&&"object"==typeof ce)if(Q){const de=Q.path;Q.path=(0,w.j0)(ee),J[se]=H(ne,ce,Q),Q.path=de}else J[se]=H(ne,ce,null);else J.hasOwnProperty(se)&&!Z.hasOwnProperty(se)||(J[se]=ce);return J},X||{}):X}function $(X){return Array.isArray(X)?X:X.split(".")}function re(X){return X.includes(",")?X.split(",").map(Z=>Z.trim()):[X.trim()]}function oe(X,Z,Q,J){const se=function ue(X){if(Array.isArray(X)){const Z=[];for(const Q of X)Z.push(...re(Q));return Z}return re(X)}(Z);if(1!==se.length){const ee=se.map(le=>J(X,le,Q));return(0,D.AL)(ee)}return J(X,se[0],Q)}function ie(X){let Z=!1;return()=>{Z||(Z=!0,X())}}},30755:(qe,xe,T)=>{"use strict";T.d(xe,{BT:()=>Q,Fs:()=>le,NC:()=>ye,YP:()=>de,aQ:()=>he});var $,fe,D=T(35575),x=T(58817),w=T(94530),B=T(50618),U=T(28862),W=T(86236),Y=T(34595),H=T(21352),G=T(52323);(fe=$||($={}))[fe.Untracked=0]="Untracked",fe[fe.Tracked=1]="Tracked";class re{constructor(){this.uid=(0,W.D)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(De,ve,Ce,ge,Te){return this.pool.acquire($.Untracked,De,ve,Ce,ge,Te,x.fS)}static acquireTracked(De,ve,Ce,ge){return this.pool.acquire($.Tracked,De,ve,Ce,null,null,ge)}notify(De,ve){this.type===$.Untracked?this.callback.call(this.target,De,ve,this.path,this.target):this.callback.call(null,De,ve)}acquire(De,ve,Ce,ge,Te,Le,je){this.uid=(0,W.D)(),this.removed=!1,this.type=De,this.oldValue=ve,this.callback=Ce,this.getValue=ge,this.target=Te,this.path=Le,this.equals=je}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,W.D)(),this.removed=!0}}re.pool=new w.e(re);const ue=new D.Z,ae=new Set;let oe;function ie(fe){ae.delete(fe),ae.add(fe),oe||(oe=(0,B.Os)(J))}function X(fe){if(fe.removed)return;const De=fe.oldValue,ve=fe.getValue();fe.equals(De,ve)||(fe.oldValue=ve,fe.notify(ve,De))}function Q(fe){for(const De of ae.values())De.target===fe&&(De.removed=!0)}function J(){let fe=10;for(;oe&&fe--;){oe=null;const De=se(),ve=ue.acquire();for(const Ce of De){const ge=Ce.uid;X(Ce),ge===Ce.uid&&Ce.removed&&ve.push(Ce)}for(const Ce of ae)Ce.removed&&(ve.push(Ce),ae.delete(Ce));for(const Ce of ve)re.pool.release(Ce);ue.release(ve),ue.release(De),ee.forEach(Ce=>Ce())}}function se(){const fe=ue.acquire();fe.length=ae.size;let De=0;for(const ve of ae)fe[De]=ve,++De;return ae.clear(),fe}const ee=new Set;function le(fe){return ee.add(fe),{remove(){ee.delete(fe)}}}function de(fe,De,ve,Ce=!1){return!fe.__accessor__||fe.__accessor__.destroyed?{remove(){}}:Ce?function ce(fe,De,ve){const Ce=(0,G.Qc)(fe,De,ve,(ge,Te,Le)=>{let je=!1;return(0,H.U5)(()=>(0,Y.$z)(ge,Te),(ze,Ee)=>{ge.__accessor__.destroyed?Ce.remove():je||(je=!0,(0,x.fS)(Ee,ze)||Le.call(ge,ze,Ee,Te,ge),je=!1)})});return Ce}(fe,De,ve):function ne(fe,De,ve){let Ce=(0,G.Qc)(fe,De,ve,(ge,Te,Le)=>{let je,ze,Ee=(0,H.Xz)(()=>(0,Y.$z)(ge,Te),(Ae,we)=>{ge.__accessor__.destroyed||je&&je.uid!==ze?Ce.remove():(je||(je=re.acquireUntracked(Ae,Le,we,ge,Te),ze=je.uid),ie(je))});return{remove:(0,G.IH)(()=>{Ee.remove(),je&&(je.uid!==ze||je.removed||(je.removed=!0,ie(je)),je=null),Ce=Ee=null})}});return Ce}(fe,De,ve)}function he(fe,De,ve=!1,Ce=x.y7){return ve?function _e(fe,De,ve){let Ce=!1;return(0,H.U5)(fe,(ge,Te)=>{Ce||(Ce=!0,ve(Te,ge)||De(ge,Te),Ce=!1)})}(fe,De,Ce):function me(fe,De,ve){let Ce,ge,Te=(0,H.Xz)(fe,(Le,je)=>{Ce&&Ce.uid!==ge?Te.remove():(Ce||(Ce=re.acquireTracked(Le,De,je,ve),ge=Ce.uid),ie(Ce))});return{remove:(0,G.IH)(()=>{Te.remove(),Ce&&(Ce.uid!==ge||Ce.removed||(Ce.removed=!0,ie(Ce)),Ce=null),Te=null})}}(fe,De,Ce)}function ye(fe){return(0,U.f)(ae,De=>De.oldValue===fe)}},36054:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>ue,d:()=>re});var D=T(85931),x=T(26584),w=T(63290),B=T(31283),U=T(52323),W=T(33794);const Y=w.Z.getLogger("esri.core.accessorSupport.write");function H(ae,oe,ie,X,Z){const Q={};return oe.write?.writer?.call(ae,X,Q,ie,Z),Q}function G(ae,oe,ie,X,Z,Q){if(!X||!X.write)return!1;const J=ae.get(ie);if(!Z&&X.write.overridePolicy){const se=X.write.overridePolicy.call(ae,J,ie,Q);void 0!==se&&(Z=se)}if(Z||(Z=X.write),!Z||!1===Z.enabled)return!1;if((null===J&&!Z.allowNull&&!Z.writerEnsuresNonNull||void 0===J)&&Z.isRequired){const se=new x.Z("web-document-write:property-required",`Missing value for required property '${ie}' on '${ae.declaredClass}'`,{propertyName:ie,target:ae});return se&&Q&&Q.messages?Q.messages.push(se):se&&!Q&&Y.error(se.name,se.message),!1}return!(void 0===J||null===J&&!Z.allowNull&&!Z.writerEnsuresNonNull||(!oe.store.multipleOriginsSupported||oe.store.originOf(ie)===B.s3.DEFAULTS)&&function $(ae,oe,ie,X,Z){const Q=X.default;if(void 0===Q)return!1;if(null!=X.defaultEquals)return X.defaultEquals(Z);if("function"==typeof Q){if(Array.isArray(Z)){const J=Q.call(ae,oe,ie);return(0,D.fS)(J,Z)}return!1}return Q===Z}(ae,ie,Q,X,J)||!Z.ignoreOrigin&&Q&&Q.origin&&oe.store.multipleOriginsSupported&&oe.store.originOf(ie)<(0,B.M9)(Q.origin))}function re(ae,oe,ie,X){const Z=(0,U.vw)(ae),J=(0,W.Ah)(Z.metadatas[oe],X);return!!J&&G(ae,Z,oe,J,ie,X)}function ue(ae,oe,ie){if(ae&&"function"==typeof ae.toJSON&&(!ae.toJSON.isDefaultToJSON||!ae.write))return(0,U.TS)(oe,ae.toJSON(ie));const X=(0,U.vw)(ae),Z=X.metadatas;for(const Q in Z){const J=(0,W.Ah)(Z[Q],ie);if(!G(ae,X,Q,J,void 0,ie))continue;const se=ae.get(Q),ee=H(ae,J,J.write&&"string"==typeof J.write.target?J.write.target:Q,se,ie);Object.keys(ee).length>0&&(oe=(0,U.TS)(oe,ee),ie?.resources?.pendingOperations?.length&&Promise.all(ie.resources.pendingOperations).then(()=>(0,U.TS)(oe,ee)),ie&&ie.writtenProperties&&ie.writtenProperties.push({target:ae,propName:Q,oldOrigin:(0,B.Wm)(X.store.originOf(Q)),newOrigin:ie.origin}))}return oe}},85931:(qe,xe,T)=>{"use strict";T.d(xe,{$A:()=>Q,FY:()=>me,Od:()=>De,SO:()=>ee,TV:()=>ye,Tw:()=>H,Vx:()=>$,a9:()=>X,cq:()=>ne,e$:()=>ce,e5:()=>re,fS:()=>G,vr:()=>oe,w6:()=>Z,xH:()=>se,zG:()=>ae});var D=T(62208),x=T(4619);function H(ve,Ce){return ve.filter(Ce?(ge,Te,Le)=>Le.findIndex(Ce.bind(null,ge))===Te:(ge,Te,Le)=>Le.indexOf(ge)===Te)}function G(ve,Ce,ge){if((0,D.Wi)(ve)&&(0,D.Wi)(Ce))return!0;if((0,D.Wi)(ve)||(0,D.Wi)(Ce)||ve.length!==Ce.length)return!1;if(ge){for(let Te=0;Te<ve.length;Te++)if(!ge(ve[Te],Ce[Te]))return!1}else for(let Te=0;Te<ve.length;Te++)if(ve[Te]!==Ce[Te])return!1;return!0}function $(ve,Ce){let ge=ve.length!==Ce.length;ve.length=Ce.length;for(let Te=0;Te<Ce.length;++Te)ve[Te]!==Ce[Te]&&(ve[Te]=Ce[Te],ge=!0);return ge}function re(ve,Ce,ge){let Te,Le;return ge?(Te=Ce.filter(je=>!ve.some(ze=>ge(ze,je))),Le=ve.filter(je=>!Ce.some(ze=>ge(ze,je)))):(Te=Ce.filter(je=>!ve.includes(je)),Le=ve.filter(je=>!Ce.includes(je))),{added:Te,removed:Le}}function ae(ve){return ve&&"number"==typeof ve.length}function oe(ve,Ce){const ge=ve.length;if(0===ge)return[];const Te=[];for(let Le=0;Le<ge;Le+=Ce)Te.push(ve.slice(Le,Le+Ce));return Te}const ie=!!Array.prototype.fill;function X(ve,Ce){if(ie)return new Array(ve).fill(Ce);const ge=new Array(ve);for(let Te=0;Te<ve;Te++)ge[Te]=Ce;return ge}function Z(ve,Ce){void 0===Ce&&(Ce=ve,ve=0);const ge=new Array(Ce-ve);for(let Te=ve;Te<Ce;Te++)ge[Te-ve]=Te;return ge}function Q(ve,Ce,ge){const Te=ve.length;let Le=0,je=Te-1;for(;Le<je;){const Ee=Le+Math.floor((je-Le)/2);Ce>ve[Ee]?Le=Ee+1:je=Ee}const ze=ve[Le];return ge?Ce>=ve[Te-1]?-1:ze===Ce?Le:Le-1:ze===Ce?Le:-1}function se(ve){return ve.reduce((Ce,ge)=>Ce.concat(ge||[]),[])}class ee{constructor(){this.last=0}}const le=new ee;function ne(ve,Ce,ge,Te){Te=Te||le;const Le=Math.max(0,Te.last-10);for(let ze=Le;ze<ge;++ze)if(ve[ze]===Ce)return Te.last=ze,ze;const je=Math.min(Le,ge);for(let ze=0;ze<je;++ze)if(ve[ze]===Ce)return Te.last=ze,ze;return-1}function ce(ve,Ce,ge,Te){const Le=ge??ve.length,je=ne(ve,Ce,Le,Te);if(-1!==je)return ve[je]=ve[Le-1],null==ge&&ve.pop(),Ce}const de=new Set;function me(ve,Ce,ge=ve.length,Te=Ce.length,Le,je){if(0===Te||0===ge)return ge;de.clear();for(let Ee=0;Ee<Te;++Ee)de.add(Ce[Ee]);Le=Le||le;const ze=Math.max(0,Le.last-10);for(let Ee=ze;Ee<ge;++Ee)if(de.has(ve[Ee])&&(je&&je.push(ve[Ee]),de.delete(ve[Ee]),ve[Ee]=ve[ge-1],--ge,--Ee,0===de.size||0===ge))return de.clear(),ge;for(let Ee=0;Ee<ze;++Ee)if(de.has(ve[Ee])&&(je&&je.push(ve[Ee]),de.delete(ve[Ee]),ve[Ee]=ve[ge-1],--ge,--Ee,0===de.size||0===ge))return de.clear(),ge;return de.clear(),ge}function ye(ve,Ce){const ge=function he(ve){return ve?(fe.seed=ve,()=>fe.getFloat()):Math.random}(Ce);for(let Te=ve.length-1;Te>0;Te--){const Le=Math.floor(ge()*(Te+1)),je=ve[Te];ve[Te]=ve[Le],ve[Le]=je}return ve}const fe=new x.Z;function De(ve,Ce){const ge=ve.indexOf(Ce);return-1!==ge?(ve.splice(ge,1),Ce):null}},59213:(qe,xe,T)=>{"use strict";T.d(xe,{Ed:()=>B,UI:()=>U,mt:()=>G,q6:()=>Y,w6:()=>re});var D=T(15861),x=T(62208),w=T(10699);function B(ue,ae,oe){return(0,w.as)(ue.map((ie,X)=>ae.apply(oe,[ie,X])))}function U(ue,ae,oe){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(ue,ae,oe){return(yield(0,w.as)(ue.map((ie,X)=>ae.apply(oe,[ie,X])))).map(ie=>ie.value)})).apply(this,arguments)}function Y(ue){return H.apply(this,arguments)}function H(){return(H=(0,D.Z)(function*(ue){if((0,x.Wi)(ue))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:yield ue}}catch(ae){return{ok:!1,error:ae}}})).apply(this,arguments)}function G(ue){return $.apply(this,arguments)}function $(){return($=(0,D.Z)(function*(ue){try{return{ok:!0,value:yield ue}}catch(ae){return(0,w.r9)(ae),{ok:!1,error:ae}}})).apply(this,arguments)}function re(ue){if(!0===ue.ok)return ue.value;throw ue.error}},27306:(qe,xe,T)=>{"use strict";function D(W){return 32+W.length}function x(){return 16}function w(W){if(!W)return 0;let Y=32;for(const H in W)if(W.hasOwnProperty(H)){const G=W[H];switch(typeof G){case"string":Y+=D(G);break;case"number":Y+=16;break;case"boolean":Y+=4}}return Y}function B(W,Y){return 32+W.length*Y}var U,W;T.d(xe,{G3:()=>x,Y8:()=>U,do:()=>B,f2:()=>w,hH:()=>D}),(W=U||(U={}))[W.KILOBYTES=1024]="KILOBYTES",W[W.MEGABYTES=1048576]="MEGABYTES",W[W.GIGABYTES=1073741824]="GIGABYTES"},84244:(qe,xe,T)=>{"use strict";T.d(xe,{m:()=>x});const x=function D(w){return{setTimeout:(B,U)=>{const W=w.setTimeout(B,U);return{remove:()=>w.clearTimeout(W)}}}}(globalThis)},89726:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>w,Z:()=>x});var D=T(46160);function x(U,W,Y=D.Z){return W||(W=new Y),W===U||(W.removeAll(),function B(U){return U&&(Array.isArray(U)||"items"in U&&Array.isArray(U.items))}(U)?W.addMany(U):U&&W.add(U)),W}function w(U){return U}},78260:(qe,xe,T)=>{"use strict";function x(_e){return"h"in _e&&"s"in _e&&"v"in _e}function w(_e){return"l"in _e&&"a"in _e&&"b"in _e}function B(_e){return"l"in _e&&"c"in _e&&"h"in _e}T.d(xe,{Y3:()=>ne,_Y:()=>le,sJ:()=>ce,xr:()=>ee});const W=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Y=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function H(_e,he){const ye=[];let fe,De;if(_e[0].length!==he.length)throw"dimensions do not match";const ve=_e.length,Ce=_e[0].length;let ge=0;for(fe=0;fe<ve;fe++){for(ge=0,De=0;De<Ce;De++)ge+=_e[fe][De]*he[De];ye.push(ge)}return ye}function G(_e){const he=[_e.r/255,_e.g/255,_e.b/255].map(fe=>fe<=.04045?fe/12.92:((fe+.055)/1.055)**2.4),ye=H(W,he);return{x:100*ye[0],y:100*ye[1],z:100*ye[2]}}function $(_e){const he=H(Y,[_e.x/100,_e.y/100,_e.z/100]).map(ye=>Math.min(1,Math.max(ye<=.0031308?12.92*ye:1.055*ye**.4166666666666667-.055,0)));return{r:Math.round(255*he[0]),g:Math.round(255*he[1]),b:Math.round(255*he[2])}}function re(_e){const he=[_e.x/95.047,_e.y/100,_e.z/108.883].map(ye=>ye>.008856451679035631?ye**.3333333333333333:7.787037037037035*ye+.13793103448275862);return{l:116*he[1]-16,a:500*(he[0]-he[1]),b:200*(he[1]-he[2])}}function ue(_e){const he=_e.l,ye=[(he+16)/116+_e.a/500,(he+16)/116,(he+16)/116-_e.b/200].map(fe=>fe>6/29?fe**3:3*(6/29)**2*(fe-4/29));return{x:95.047*ye[0],y:100*ye[1],z:108.883*ye[2]}}function ee(_e){return function D(_e){return"r"in _e&&"g"in _e&&"b"in _e}(_e)?_e:B(_e)?function Q(_e){return $(ue(function oe(_e){const ye=_e.c,fe=_e.h;return{l:_e.l,a:ye*Math.cos(fe),b:ye*Math.sin(fe)}}(_e)))}(_e):w(_e)?function X(_e){return $(ue(_e))}(_e):function U(_e){return"x"in _e&&"y"in _e&&"z"in _e}(_e)?$(_e):x(_e)?function se(_e){const he=(_e.h+360)%360/60,fe=_e.v/100*255,De=fe*(_e.s/100),ve=De*(1-Math.abs(he%2-1));let Ce;switch(Math.floor(he)){case 0:Ce={r:De,g:ve,b:0};break;case 1:Ce={r:ve,g:De,b:0};break;case 2:Ce={r:0,g:De,b:ve};break;case 3:Ce={r:0,g:ve,b:De};break;case 4:Ce={r:ve,g:0,b:De};break;case 5:case 6:Ce={r:De,g:0,b:ve};break;default:Ce={r:0,g:0,b:0}}return Ce.r=Math.round(Ce.r+fe-De),Ce.g=Math.round(Ce.g+fe-De),Ce.b=Math.round(Ce.b+fe-De),Ce}(_e):_e}function le(_e){return x(_e)?_e:function J(_e){const he=_e.r,ye=_e.g,fe=_e.b,De=Math.max(he,ye,fe),ve=De-Math.min(he,ye,fe);let Ce=De,ge=0===ve?0:De===he?(ye-fe)/ve%6:De===ye?(fe-he)/ve+2:(he-ye)/ve+4,Te=0===ve?0:ve/Ce;return ge<0&&(ge+=6),ge*=60,Te*=100,Ce*=100/255,{h:ge,s:Te,v:Ce}}(ee(_e))}function ne(_e){return w(_e)?_e:function ie(_e){return re(G(_e))}(ee(_e))}function ce(_e){return B(_e)?_e:function Z(_e){return function ae(_e){const he=_e.l,ye=_e.a,fe=_e.b,De=Math.sqrt(ye*ye+fe*fe);let ve=Math.atan2(fe,ye);return ve=ve>0?ve:ve+2*Math.PI,{l:he,c:De,h:ve}}(re(G(_e)))}(ee(_e))}},94573:(qe,xe,T)=>{"use strict";function x(W){}function B(W){return()=>W}T.d(xe,{Bg:()=>x,sM:()=>B}),T(8314)},55538:(qe,xe,T)=>{"use strict";T.d(xe,{Mr:()=>W,x9:()=>Y});var D=T(8314);const x=new Set;function W(H,G,$={}){if((0,D.Z)("esri-deprecation-warnings")){const{moduleName:re}=$;Y(H,"Property: "+(re?re+"::":"")+G,$)}}function Y(H,G,$={}){if((0,D.Z)("esri-deprecation-warnings")){const{replacement:re,version:ue,see:ae,warnOnce:oe}=$;let ie=G;re&&(ie+=`\n\t\u{1f6e0}\ufe0f Replacement: ${re}`),ue&&(ie+=`\n\t\u2699\ufe0f Version: ${ue}`),ae&&(ie+=`\n\t\u{1f517} See ${ae} for more details.`),function w(H,G,$=!1){$&&x.has(G)||($&&x.add(G),H.warn(`\u{1f6d1} DEPRECATED - ${G}`))}(H,ie,oe)}}},83100:(qe,xe,T)=>{"use strict";function D(G){return G=G||globalThis.location.hostname,H.some($=>null!=G?.match($))}function x(G,$){return G&&($=$||globalThis.location.hostname)?null!=$.match(B)||null!=$.match(W)?G.replace("static.arcgis.com","staticdev.arcgis.com"):null!=$.match(U)||null!=$.match(Y)?G.replace("static.arcgis.com","staticqa.arcgis.com"):G:G}T.d(xe,{XO:()=>D,pJ:()=>x});const B=/^devext.arcgis.com$/,U=/^qaext.arcgis.com$/,W=/^[\w-]*\.mapsdevext.arcgis.com$/,Y=/^[\w-]*\.mapsqa.arcgis.com$/,H=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,B,U,/^jsapps.esri.com$/,W,Y]},40764:(qe,xe,T)=>{"use strict";function D(H){return"string"==typeof H?document.getElementById(H):H}function x(H){for(;H.hasChildNodes();)H.removeChild(H.firstChild)}function B(H,G){const $=G.parentNode;$&&$.insertBefore(H,G)}function U(H,G){for(;;){const $=H.firstChild;if(!$)break;G.appendChild($)}}T.d(xe,{L7:()=>D,Vt:()=>B,YD:()=>U,cS:()=>x}),(()=>{if("function"==typeof Element.prototype.closest)return(G,$)=>G.closest($);Element.prototype.matches||Element})()},17770:(qe,xe,T)=>{"use strict";function D(Y){return Y&&("function"==typeof Y.on||"function"==typeof Y.addEventListener)}function x(Y,H,G){if(!D(Y))throw new TypeError("target is not a Evented or EventTarget object");if("on"in Y)return Y.on(H,G);if(Array.isArray(H)){const $=H.slice();for(const re of $)Y.addEventListener(re,G);return{remove(){for(const re of $)Y.removeEventListener(re,G)}}}return Y.addEventListener(H,G),{remove(){Y.removeEventListener(H,G)}}}function w(Y,H,G){if(!D(Y))throw new TypeError("target is not a Evented or EventTarget object");if("once"in Y)return Y.once(H,G);const $=x(Y,H,re=>{$.remove(),G.call(Y,re)});return{remove(){$.remove()}}}T.d(xe,{IH:()=>w,kK:()=>W,on:()=>x,vT:()=>D});const U={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function W({key:Y}){return U[Y]||Y}},36161:(qe,xe,T)=>{"use strict";T.d(xe,{I:()=>x,v:()=>w});var D=T(21286);function x(H,G,$=0){const re=(0,D.uZ)(H,0,W);for(let ue=0;ue<4;ue++)G[$+ue]=Math.floor(256*Y(re*B[ue]))}function w(H,G=0){let $=0;for(let re=0;re<4;re++)$+=H[G+re]*U[re];return $}const B=[1,256,65536,16777216],U=[1/256,1/65536,1/16777216,1/4294967296],W=w(new Uint8ClampedArray([255,255,255,255]));function Y(H){return H-Math.floor(H)}},54024:(qe,xe,T)=>{"use strict";T.d(xe,{AL:()=>x,HO:()=>W,ed:()=>U,kB:()=>w});var D=T(62208);function x(H){return w(()=>H.forEach(G=>(0,D.pC)(G)&&G.remove()))}function w(H){return{remove:()=>{H&&(H(),H=void 0)}}}function U(H){return w((0,D.pC)(H)?()=>H.destroy():void 0)}function W(H,G){const $=setTimeout(H,G);return w(()=>clearTimeout($))}},8314:(qe,xe,T)=>{"use strict";let D;function x(w){return"function"==typeof D[w]?D[w]=D[w](globalThis):D[w]}T.d(xe,{Z:()=>x}),D=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},x.add=(w,B,U,W)=>((W||void 0===D[w])&&(D[w]=B),U&&x(w)),x.cache=D,x.add("esri-deprecation-warnings",!0),(()=>{x.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const w=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(x.add("host-browser",w),x.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),x.add("dom",w),x("host-browser")){const B=navigator,U=B.userAgent,W=B.appVersion,Y=parseFloat(W);if(x.add("wp",parseFloat(U.split("Windows Phone")[1])||void 0),x.add("msapp",parseFloat(U.split("MSAppHost/")[1])||void 0),x.add("khtml",W.includes("Konqueror")?Y:void 0),x.add("edge",parseFloat(U.split("Edge/")[1])||void 0),x.add("opr",parseFloat(U.split("OPR/")[1])||void 0),x.add("webkit",!x("wp")&&!x("edge")&&parseFloat(U.split("WebKit/")[1])||void 0),x.add("chrome",!x("edge")&&!x("opr")&&parseFloat(U.split("Chrome/")[1])||void 0),x.add("android",!x("wp")&&parseFloat(U.split("Android ")[1])||void 0),x.add("safari",!W.includes("Safari")||x("wp")||x("chrome")||x("android")||x("edge")||x("opr")?void 0:parseFloat(W.split("Version/")[1])),x.add("mac",W.includes("Macintosh")),!x("wp")&&U.match(/(iPhone|iPod|iPad)/)){const H=RegExp.$1.replace(/P/,"p"),G=U.match(/OS ([\d_]+)/)?RegExp.$1:"1",$=parseFloat(G.replace(/_/,".").replace(/_/g,""));x.add(H,$),x.add("ios",$)}x.add("trident",parseFloat(W.split("Trident/")[1])||void 0),x("webkit")||(!U.includes("Gecko")||x("wp")||x("khtml")||x("trident")||x("edge")||x.add("mozilla",Y),x("mozilla")&&x.add("ff",parseFloat(U.split("Firefox/")[1]||U.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const w=navigator.userAgent,B=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(w),U=/iPhone/i.test(w);B&&x.add("esri-mobile",B),U&&x.add("esri-iPhone",U),x.add("esri-geolocation",!!navigator.geolocation)}x.add("esri-canvas-svg-support",!x("trident")),x.add("esri-wasm","WebAssembly"in globalThis),x.add("esri-shared-array-buffer",()=>{const w="SharedArrayBuffer"in globalThis,B=!1===globalThis.crossOriginIsolated;return w&&!B}),x.add("wasm-simd",()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),x.add("esri-atomics","Atomics"in globalThis),x.add("esri-workers","Worker"in globalThis),x.add("web-feat:cache","caches"in globalThis),x.add("esri-workers-arraybuffer-transfer",!x("safari")||Number(x("safari"))>=12),x.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),x.add("featurelayer-simplify-payload-size-factors",[1,1,4]),x.add("featurelayer-snapshot-enabled",!0),x.add("featurelayer-snapshot-point-min-threshold",8e4),x.add("featurelayer-snapshot-point-max-threshold",4e5),x.add("featurelayer-snapshot-point-coverage",.1),x.add("featurelayer-advanced-symbols",!1),x.add("featurelayer-pbf",!0),x.add("featurelayer-pbf-statistics",!1),x.add("feature-layers-workers",!0),x.add("feature-polyline-generalization-factor",1),x.add("mapview-transitions-duration",200),x.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),x.add("mapserver-pbf-enabled",!1),x.add("mapimagelayer-popup-identify-max-tolerance",20),x.add("heatmap-allow-raster-fallback",!0),x.add("heatmap-force-raster",!1),x("host-webworker")||x("host-browser")&&(x.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),x.add("esri-image-decode",()=>{if("decode"in new Image){const w=new Image;return w.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void w.decode().then(()=>{x.add("esri-image-decode",!0,!0,!0)}).catch(()=>{x.add("esri-image-decode",!1,!0,!0)})}return!1}),x.add("esri-url-encodes-apostrophe",()=>{const w=window.document.createElement("a");return w.href="?'",w.href.includes("?%27")}))})()},56354:(qe,xe,T)=>{"use strict";function D(B){const U=[];return function*(){yield*U;for(const W of B)U.push(W),yield W}}function x(B,U){for(const W of B)if(null!=W&&U(W))return W}function w(B){return null!=B&&"function"==typeof B[Symbol.iterator]}T.d(xe,{Fs:()=>D,TW:()=>w,sE:()=>x})},2076:(qe,xe,T)=>{"use strict";T.d(xe,{X:()=>x,w:()=>w});var D=T(94113);class x{constructor(U,W={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=U,this.options=W,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(U),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=Y=>this.fromJSON(Y),this.write=(Y,H,G)=>{const $=this.toJSON(Y);void 0!==$&&(0,D.RB)(G,$,H)},this.write.isJSONMapWriter=!0}toJSON(U){if(this.apiToJSON.hasOwnProperty(U)){const W=this.apiToJSON[U];return this.options.useNumericKeys?+W:W}return this.options.ignoreUnknown?void 0:U}fromJSON(U){return this.jsonToAPI.hasOwnProperty(U)?this.jsonToAPI[U]:this.options.ignoreUnknown?void 0:U}_invertMap(U){const W={};for(const Y in U)W[U[Y]]=Y;return W}_getKeysSorted(U){const W=[];for(const Y in U)W.push(Y);return W.sort(),W}}function w(){return function(B,U){return new x(B,{ignoreUnknown:!0,...U})}}},58817:(qe,xe,T)=>{"use strict";T.d(xe,{Vo:()=>Y,d9:()=>W,fS:()=>ae,y7:()=>oe,yd:()=>U});var D=T(85931),w=(T(8314),T(62208)),B=T(55713);function U(J,se){let ee;if(se)for(ee in J)J.hasOwnProperty(ee)&&(void 0===J[ee]?delete J[ee]:J[ee]instanceof Object&&U(J[ee],!0));else for(ee in J)J.hasOwnProperty(ee)&&void 0===J[ee]&&delete J[ee];return J}function W(J){if(!J||"object"!=typeof J||"function"==typeof J)return J;const se=ue(J);if((0,w.pC)(se))return se;if(H(J))return J.clone();if(G(J))return J.map(W);if($(J))return J.clone();const ee={};for(const le of Object.getOwnPropertyNames(J))ee[le]=W(J[le]);return ee}function Y(J){if(!J||"object"!=typeof J||"function"==typeof J)return J;const se=ue(J);if((0,w.pC)(se))return se;if(G(J)){let ee=!0;const le=J.map(ne=>{const ce=Y(ne);return null!=ne&&null==ce&&(ee=!1),ce});return ee?le:null}if(H(J))return J.clone();if(!$(J)){const ee=new(Object.getPrototypeOf(J).constructor);for(const le of Object.getOwnPropertyNames(J)){const ne=J[le],ce=Y(ne);if(null!=ne&&null==ce)return null;ee[le]=ce}return ee}return null}function H(J){return"function"==typeof J.clone}function G(J){return"function"==typeof J.map&&"function"==typeof J.forEach}function $(J){return"function"==typeof J.notifyChange&&"function"==typeof J.watch}function re(J){if("[object Object]"!==Object.prototype.toString.call(J))return!1;const se=Object.getPrototypeOf(J);return null===se||se===Object.prototype}function ue(J){if((0,B.W0)(J)||(0,B.lq)(J)||(0,B.KZ)(J)||(0,B.z3)(J)||(0,B.Uc)(J)||(0,B.Hx)(J)||(0,B.ZY)(J)||(0,B.xZ)(J)||(0,B.fS)(J))return(0,B.tP)(J);if(J instanceof Date)return new Date(J.getTime());if(J instanceof ArrayBuffer)return J.slice(0,J.byteLength);if(J instanceof Map){const se=new Map;return J.forEach((ee,le)=>{se.set(le,W(ee))}),se}if(J instanceof Set){const se=new Set;return J.forEach(ee=>{se.add(W(ee))}),se}return null}function ae(J,se){return J===se||"number"==typeof J&&isNaN(J)&&"number"==typeof se&&isNaN(se)||"function"==typeof(J||{}).getTime&&"function"==typeof(se||{}).getTime&&J.getTime()===se.getTime()||!1}function oe(J,se){return J===se||(null==J||"string"==typeof J?J===se:"number"==typeof J?J===se||"number"==typeof se&&isNaN(J)&&isNaN(se):J instanceof Date?se instanceof Date&&J.getTime()===se.getTime():Array.isArray(J)?Array.isArray(se)&&(0,D.fS)(J,se):J instanceof Set?se instanceof Set&&function X(J,se){if(J.size!==se.size)return!1;for(const ee of J)if(!se.has(ee))return!1;return!0}(J,se):J instanceof Map?se instanceof Map&&function Z(J,se){if(J.size!==se.size)return!1;for(const[ee,le]of J){const ne=se.get(ee);if(ne!==le||void 0===ne&&!se.has(ee))return!1}return!0}(J,se):!!re(J)&&re(se)&&function ie(J,se){if(null===J||null===se)return!1;const ee=Object.keys(J);if(null===se||Object.keys(se).length!==ee.length)return!1;for(const le of ee)if(J[le]!==se[le]||!Object.prototype.hasOwnProperty.call(se,le))return!1;return!0}(J,se))}},75957:(qe,xe,T)=>{"use strict";function w(B){return function D(B){return B instanceof Float32Array&&B.length>=2}(B)||function x(B){return Array.isArray(B)&&B.length>=2}(B)}T.d(xe,{lM:()=>w})},47877:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>W,w:()=>H});var D=T(15861),x=T(59213),w=T(46160),B=T(47996),U=T(62208);function W(re,ue){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.Z)(function*(re,ue){return yield re.load(),H(re,ue)})).apply(this,arguments)}function H(re,ue){return G.apply(this,arguments)}function G(){return G=(0,D.Z)(function*(re,ue){const ae=[],oe=(...X)=>{for(const Z of X)(0,U.Wi)(Z)||(Array.isArray(Z)?oe(...Z):w.Z.isCollection(Z)?Z.forEach(Q=>oe(Q)):B.Z.isLoadable(Z)&&ae.push(Z))};ue(oe);let ie=null;if(yield(0,x.UI)(ae,function(){var X=(0,D.Z)(function*(Z){!1!==(yield(0,x.q6)($(Z)?Z.loadAll():Z.load())).ok||ie||(ie=Z)});return function(Z){return X.apply(this,arguments)}}()),ie)throw ie.loadError;return re}),G.apply(this,arguments)}function $(re){return"loadAll"in re&&"function"==typeof re.loadAll}},21286:(qe,xe,T)=>{"use strict";T.d(xe,{BV:()=>ae,CW:()=>le,H:()=>de,Kt:()=>X,Sf:()=>B,Vl:()=>ue,W8:()=>Q,Y8:()=>Z,ZF:()=>ie,_3:()=>_e,b_:()=>oe,fp:()=>H,jE:()=>ne,oK:()=>J,oc:()=>me,sk:()=>G,t7:()=>$,uZ:()=>U,wt:()=>Y});var D=T(84161),x=T(993);const w=new Float32Array(1);function B(he){--he;for(let ye=1;ye<32;ye<<=1)he|=he>>ye;return he+1}function U(he,ye,fe){return Math.min(Math.max(he,ye),fe)}function Y(he){return 0==(he&he-1)}function H(he){return he--,he|=he>>1,he|=he>>2,he|=he>>4,he|=he>>8,he|=he>>16,++he}function G(he){return 10**Math.ceil(Math.LOG10E*Math.log(he))}function $(he,ye,fe){return he+(ye-he)*fe}function ue(he){return he*Math.PI/180}function ae(he){return 180*he/Math.PI}function oe(he,ye=1e-6){return(he<0?-1:1)/Math.max(Math.abs(he),ye)}function ie(he){return Math.acos(U(he,-1,1))}function X(he){return Math.asin(U(he,-1,1))}function Z(he,ye,fe=1e-6){if(isNaN(he)||isNaN(ye))return!1;if(he===ye)return!0;const De=Math.abs(he-ye),ve=Math.abs(he),Ce=Math.abs(ye);if(0===he||0===ye||ve<1e-12&&Ce<1e-12){if(De>.01*fe)return!1}else if(De/(ve+Ce)>fe)return!1;return!0}function Q(he,ye,fe=1e-6){return!isNaN(he)&&!isNaN(ye)&&(he>ye?he-ye:ye-he)<=fe}function J(he){return se(Math.max(-_e,Math.min(he,_e)))}function se(he){return w[0]=he,w[0]}function le(he,ye,fe){const De=U((fe-he)/(ye-he),0,1);return De*De*(3-2*De)}function ne(he,ye){const fe=(0,D.l)(he),De=X(he[2]/fe),ve=Math.atan2(he[1]/fe,he[0]/fe);return(0,D.s)(ye,fe,De,ve),ye}function de(he,ye,fe){return(0,x.s)(he,ye[0],ye[1],ye[2],ye[3]*fe)}function me(he){const fe=he[3]*he[3]+he[4]*he[4]+he[5]*he[5],De=he[6]*he[6]+he[7]*he[7]+he[8]*he[8];return!(Q(he[0]*he[0]+he[1]*he[1]+he[2]*he[2],1)&&Q(fe,1)&&Q(De,1))}const _e=se(34028234663852886e22)},62208:(qe,xe,T)=>{"use strict";T.d(xe,{Bd:()=>X,Fd:()=>Q,IM:()=>ae,JR:()=>J,O3:()=>re,Pt:()=>H,R2:()=>se,RY:()=>oe,SC:()=>$,U2:()=>ne,Wg:()=>W,Wi:()=>w,YP:()=>D,_W:()=>ie,e8:()=>Z,hw:()=>ue,j0:()=>ce,lV:()=>le,pC:()=>x,s3:()=>Y,yl:()=>G,yw:()=>U});const D=null;function x(de){return null!=de}function w(de){return null==de}function U(de,me){return x(de)?me(de):D}function W(de){return de}function Y(de,me){if(w(de))throw new Error(me);return de}function H(de,me){return x(de)?de:"function"==typeof me?me():me}function G(de,me){return x(de)?de:me}function $(de){return x(de)&&de.destroy(),null}function re(de){return x(de)&&de.dispose(),null}function ue(de){return x(de)&&de.remove(),null}function ae(de){return x(de)&&de.abort(),null}function oe(de){return x(de)&&de.release(),null}function ie(de,me,_e){return x(de)&&x(me)?x(_e)?_e(de,me):de.equals(me):de===me}function X(de){return null}function Z(de,me){const _e=new Array;return de.forEach(he=>{const ye=me(he);x(ye)&&_e.push(ye)}),_e}function Q(de,me){const _e=new Array;for(const he of de)_e.push(se(he,null,me));return _e}function J(de,me){for(const _e of de)U(_e,me)}function se(de,me,_e){return x(de)?_e(de):me}function le(de){return de.filter(me=>x(me))}function ne(de,...me){let _e=de;for(let he=0;he<me.length&&_e;++he)_e=_e[me[he]];return _e}function ce(de){return de}},79682:(qe,xe,T)=>{"use strict";T.d(xe,{Y:()=>x});const D=[];function x(w){D.push(w),1===D.length&&queueMicrotask(()=>{const B=D.slice();D.length=0;for(const U of B)U()})}},75327:(qe,xe,T)=>{"use strict";T.d(xe,{Qc:()=>re,WU:()=>U,lt:()=>$});var D=T(77275),x=T(56683);const w={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function B(X){X||(X=(0,x.Kd)());let Z=X in w;if(!Z){const ee=X.split("-");ee.length>1&&ee[0]in w&&(X=ee[0],Z=!0),Z||(X="en")}const[Q,J,se="#,##0.###"]=w[X];return{decimal:Q,group:J,pattern:se}}function U(X,Z){const Q=B((Z={...Z}).locale);Z.customs=Q;const J=Z.pattern||Q.pattern;return isNaN(X)||Math.abs(X)===1/0?null:function Y(X,Z,Q){const J=(Q=Q||{}).customs.group,se=Q.customs.decimal,ee=Z.split(";"),le=ee[0];if((Z=ee[X<0?1:0]||"-"+le).includes("%"))X*=100;else if(Z.includes("\u2030"))X*=1e3;else{if(Z.includes("\xa4"))throw new Error("currency notation not supported");if(Z.includes("E"))throw new Error("exponential notation not supported")}const ne=W,ce=le.match(ne);if(!ce)throw new Error("unable to find a number expression in pattern: "+Z);return!1===Q.fractional&&(Q.places=0),Z.replace(ne,function H(X,Z,Q){!0===(Q=Q||{}).places&&(Q.places=0),Q.places===1/0&&(Q.places=6);const J=Z.split("."),se="string"==typeof Q.places&&Q.places.indexOf(",");let ee=Q.places;se?ee=Q.places.substring(se+1):ee>=0||(ee=(J[1]||[]).length),Q.round<0||(X=Number(X.toFixed(Number(ee))));const le=String(Math.abs(X)).split("."),ne=le[1]||"";if(J[1]||Q.places){se&&(Q.places=Q.places.substring(0,se));const fe=void 0!==Q.places?Q.places:J[1]&&J[1].lastIndexOf("0")+1;fe>ne.length&&(le[1]=ne.padEnd(Number(fe),"0")),ee<ne.length&&(le[1]=ne.substr(0,Number(ee)))}else le[1]&&le.pop();const ce=J[0].replace(",","");let de=ce.indexOf("0");-1!==de&&(de=ce.length-de,de>le[0].length&&(le[0]=le[0].padStart(de,"0")),ce.includes("#")||(le[0]=le[0].substr(le[0].length-de)));let me,_e,he=J[0].lastIndexOf(",");if(-1!==he){me=J[0].length-he-1;const fe=J[0].substr(0,he);he=fe.lastIndexOf(","),-1!==he&&(_e=fe.length-he-1)}const ye=[];for(let fe=le[0];fe;){const De=fe.length-me;ye.push(De>0?fe.substr(De):fe),fe=De>0?fe.slice(0,De):"",_e&&(me=_e,_e=void 0)}return le[0]=ye.reverse().join(Q.group||","),le.join(Q.decimal||".")}(X,ce[0],{decimal:se,group:J,places:Q.places,round:Q.round}))}(X,J,Z)}const W=/[#0,]*[#0](?:\.0*#*)?/;function $(X){const Z=B((X=X||{}).locale),Q=X.pattern||Z.pattern,J=Z.group,se=Z.decimal;let ee=1;if(Q.includes("%"))ee/=100;else if(Q.includes("\u2030"))ee/=1e3;else if(Q.includes("\xa4"))throw new Error("currency notation not supported");const le=Q.split(";");return 1===le.length&&le.push("-"+le[0]),{regexp:oe(le,ce=>(ce="(?:"+(0,D.Qs)(ce,".")+")").replace(W,de=>{const me={signed:!1,separator:X.strict?J:[J,""],fractional:X.fractional,decimal:se,exponent:!1},_e=de.split(".");let he=X.places;1===_e.length&&1!==ee&&(_e[1]="###"),1===_e.length||0===he?me.fractional=!1:(void 0===he&&(he=X.pattern?_e[1].lastIndexOf("0")+1:1/0),he&&null==X.fractional&&(me.fractional=!0),!X.places&&he<_e[1].length&&(he+=","+_e[1].length),me.places=he);const ye=_e[0].split(",");return ye.length>1&&(me.groupSize=ye.pop().length,ye.length>1&&(me.groupSize2=ye.pop().length)),"("+function ue(X){"places"in(X=X||{})||(X.places=1/0),"string"!=typeof X.decimal&&(X.decimal="."),"fractional"in X&&!/^0/.test(String(X.places))||(X.fractional=[!0,!1]),"exponent"in X||(X.exponent=[!0,!1]),"eSigned"in X||(X.eSigned=[!0,!1]);const Z=ae(X),Q=oe(X.fractional,se=>{let ee="";return se&&0!==X.places&&(ee="\\"+X.decimal,X.places===1/0?ee="(?:"+ee+"\\d+)?":ee+="\\d{"+X.places+"}"),ee},!0);let J=Z+Q;return Q&&(J="(?:(?:"+J+")|(?:"+Q+"))"),J+oe(X.exponent,se=>se?"([eE]"+ae({signed:X.eSigned})+")":"")}(me)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:J,decimal:se,factor:ee}}function re(X,Z){const Q=$(Z),J=new RegExp("^"+Q.regexp+"$").exec(X);if(!J)return NaN;let se=J[1];if(!J[1]){if(!J[2])return NaN;se=J[2],Q.factor*=-1}return se=se.replace(new RegExp("["+Q.group+"\\s\\xa0]","g"),"").replace(Q.decimal,"."),Number(se)*Q.factor}function ae(X){return"signed"in(X=X||{})||(X.signed=[!0,!1]),"separator"in X?"groupSize"in X||(X.groupSize=3):X.separator="",oe(X.signed,Z=>Z?"[-+]":"",!0)+oe(X.separator,Z=>{if(!Z)return"(?:\\d+)";" "===(Z=(0,D.Qs)(Z))?Z="\\s":"\xa0"===Z&&(Z="\\s\\xa0");const Q=X.groupSize,J=X.groupSize2;if(J){const se="(?:0|[1-9]\\d{0,"+(J-1)+"}(?:["+Z+"]\\d{"+J+"})*["+Z+"]\\d{"+Q+"})";return Q-J>0?"(?:"+se+"|(?:0|[1-9]\\d{0,"+(Q-1)+"}))":se}return"(?:0|[1-9]\\d{0,"+(Q-1)+"}(?:["+Z+"]\\d{"+Q+"})*)"},!0)}const oe=(X,Z,Q)=>{if(!(X instanceof Array))return Z(X);const J=[];for(let se=0;se<X.length;se++)J.push(Z(X[se]));return ie(J.join("|"),Q)},ie=(X,Z)=>"("+(Z?"?:":"")+X+")"},94113:(qe,xe,T)=>{"use strict";T.d(xe,{RB:()=>B,RH:()=>x,hS:()=>w});var D=T(58817);function x(Y,H,G=!1){return W(Y,H,G)}function w(Y,H){if(null!=H)return H[Y]||U(Y.split("."),!1,H)}function B(Y,H,G){const $=Y.split("."),re=$.pop(),ue=U($,!0,G);ue&&re&&(ue[re]=H)}function U(Y,H,G){let $=G;for(const re of Y){if(null==$)return;if(!(re in $)){if(!H)return;$[re]={}}$=$[re]}return $}function W(Y,H,G){return H?Object.keys(H).reduce(($,re)=>{let ue=$[re],ae=H[re];return ue===ae?$:void 0===ue?($[re]=(0,D.d9)(ae),$):(Array.isArray(ae)||Array.isArray($)?(ue=$[re]=ue?Array.isArray(ue)?ue.concat():[ue]:[],ae&&(Array.isArray(ae)||(ae=[ae]),G?ae.forEach(oe=>{ue.includes(oe)||ue.push(oe)}):$[re]=ae.concat())):ae&&"object"==typeof ae?$[re]=W(ue,ae,G):$.hasOwnProperty(re)&&!H.hasOwnProperty(re)||($[re]=ae),$)},Y||{}):Y}},24192:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Y});var w,H,D=T(8314),x=T(27899);(H=w||(w={}))[H.varint=0]="varint",H[H.fixed64=1]="fixed64",H[H.delimited=2]="delimited",H[H.fixed32=5]="fixed32",H[H.unknown=99]="unknown";const B=4294967296,U=new TextDecoder("utf-8"),W=(0,D.Z)("safari")||(0,D.Z)("ios")?6:(0,D.Z)("ff")?12:32;class Y{constructor(G,$,re=0,ue=(G?G.byteLength:0)){this._tag=0,this._dataType=w.unknown,this._init(G,$,re,ue)}_init(G,$,re,ue){this._data=G,this._dataView=$,this._pos=re,this._end=ue}clone(){return new Y(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(G){this._pos=G}nextTag(G){for(;;){if(this._pos===this._end)return!1;const $=this._decodeVarint();if(this._tag=$>>3,this._dataType=7&$,!G||G===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const G=this._decodeVarint();return this._tag=G>>3,this._dataType=7&G,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let G=4294967295;return G=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?G:(G=(G|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?G:(G=(G|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?G:(G=(G|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?G:(G=(G|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?G:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const G=this.getUInt32();return G>>>1^-(1&G)|0}getSInt64(){return this._decodeSVarint()}getBool(){const G=0!==this._data[this._pos];return this._skip(1),G}getEnum(){return this._decodeVarint()}getFixed64(){const G=this._dataView,$=this._pos,re=G.getUint32($,!0)+G.getUint32($+4,!0)*B;return this._skip(8),re}getSFixed64(){const G=this._dataView,$=this._pos,re=G.getUint32($,!0)+G.getInt32($+4,!0)*B;return this._skip(8),re}getDouble(){const G=this._dataView.getFloat64(this._pos,!0);return this._skip(8),G}getFixed32(){const G=this._dataView.getUint32(this._pos,!0);return this._skip(4),G}getSFixed32(){const G=this._dataView.getInt32(this._pos,!0);return this._skip(4),G}getFloat(){const G=this._dataView.getFloat32(this._pos,!0);return this._skip(4),G}getString(){const G=this._getLength(),$=this._pos,re=this._toString(this._data,$,$+G);return this._skip(G),re}getBytes(){const G=this._getLength(),$=this._pos,re=this._toBytes(this._data,$,$+G);return this._skip(G),re}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(G,$,re,ue){const ae=this.getMessage(),oe=G(ae,$,re,ue);return ae.release(),oe}processMessage(G){const $=this.getMessage(),re=G($);return $.release(),re}getMessage(){const G=this._getLength(),$=Y.pool.acquire();return $._init(this._data,this._dataView,this._pos,this._pos+G),this._skip(G),$}release(){Y.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case w.varint:this._decodeVarint();break;case w.fixed64:this._skip(8);break;case w.delimited:this._skip(this._getLength());break;case w.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(G){this._skip(G)}_skip(G){if(this._pos+G>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=G}_decodeVarint(){const G=this._data;let $,re=this._pos,ue=0;if(this._end-re>=10)do{if($=G[re++],ue|=127&$,0==(128&$)||($=G[re++],ue|=(127&$)<<7,0==(128&$))||($=G[re++],ue|=(127&$)<<14,0==(128&$))||($=G[re++],ue|=(127&$)<<21,0==(128&$))||($=G[re++],ue+=268435456*(127&$),0==(128&$))||($=G[re++],ue+=34359738368*(127&$),0==(128&$))||($=G[re++],ue+=4398046511104*(127&$),0==(128&$))||($=G[re++],ue+=562949953421312*(127&$),0==(128&$))||($=G[re++],ue+=72057594037927940*(127&$),0==(128&$))||($=G[re++],ue+=0x8000000000000000*(127&$),0==(128&$)))break;throw new Error("Varint too long!")}while(0);else{let ae=1;for(;re!==this._end&&($=G[re],0!=(128&$));)++re,ue+=(127&$)*ae,ae*=128;if(re===this._end)throw new Error("Varint overrun!");++re,ue+=$*ae}return this._pos=re,ue}_decodeSVarint(){const G=this._decodeVarint();return G%2?-(G+1)/2:G/2}_getLength(){if(this._dataType!==w.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(G,$,re){if((re=Math.min(this._end,re))-$>W){const oe=G.subarray($,re);return U.decode(oe)}let ue="",ae="";for(let oe=$;oe<re;++oe){const ie=G[oe];128&ie?ae+="%"+ie.toString(16):(ue+=decodeURIComponent(ae)+String.fromCharCode(ie),ae="")}return ae.length&&(ue+=decodeURIComponent(ae)),ue}_toBytes(G,$,re){return re=Math.min(this._end,re),new Uint8Array(G.buffer,$,re-$)}}Y.pool=new x.Z(Y,null,H=>{H._data=null,H._dataView=null})},10699:(qe,xe,T)=>{"use strict";T.d(xe,{$F:()=>Q,Bx:()=>je,D_:()=>ee,Ds:()=>Te,H9:()=>X,Hc:()=>oe,Hl:()=>J,R8:()=>le,U3:()=>ce,WW:()=>ye,Yn:()=>Ee,as:()=>_e,dD:()=>me,e4:()=>De,fu:()=>Z,gx:()=>ge,hh:()=>Le,k_:()=>ue,r9:()=>ie,vr:()=>ze,y8:()=>Ce,zE:()=>re});var D=T(15861),x=T(84244),B=(T(55538),T(26584)),U=T(17770),W=T(63290),Y=T(62208);function re(we="Aborted"){return new B.Z("AbortError",we)}function ue(we,Be="Aborted"){if(oe(we))throw re(Be)}function ae(we){return(0,Y.pC)(we)?"aborted"in we?we:we.signal:we}function oe(we){const Be=ae(we);return(0,Y.pC)(Be)&&Be.aborted}function ie(we){if(ee(we))throw we}function X(we){if(!ee(we))throw we}function Z(we,Be){const Pe=ae(we);if(!(0,Y.Wi)(Pe)){if(!Pe.aborted)return(0,U.IH)(Pe,"abort",()=>Be());Be()}}function Q(we,Be){const Pe=ae(we);if(!(0,Y.Wi)(Pe))return ue(Pe),(0,U.IH)(Pe,"abort",()=>Be(re()))}function J(we,Be){const Pe=ae(Be);return(0,Y.Wi)(Pe)?we:new Promise((Oe,Ke)=>{let Ve=Z(Be,()=>Ke(re()));const Ne=()=>Ve=(0,Y.hw)(Ve);we.then(Ne,Ne),we.then(Oe,Ke)})}function ee(we){return we&&"AbortError"===we.name}function le(we){return ne.apply(this,arguments)}function ne(){return(ne=(0,D.Z)(function*(we){try{return yield we}catch(Be){if(!ee(Be))throw Be}})).apply(this,arguments)}function ce(we){return de.apply(this,arguments)}function de(){return(de=(0,D.Z)(function*(we,Be=W.Z.getLogger("esri")){try{return yield we}catch(Pe){ee(Pe)||Be.error(Pe)}})).apply(this,arguments)}function me(){let we=null;const Be=new Promise((Pe,Oe)=>{we={promise:void 0,resolve:Pe,reject:Oe}});return we.promise=Be,we}function _e(we){return he.apply(this,arguments)}function he(){return(he=(0,D.Z)(function*(we){if(!we)return;if("function"!=typeof we.forEach){const Pe=Object.keys(we),Oe=Pe.map(Ne=>we[Ne]),Ke=yield _e(Oe),Ve={};return Pe.map((Ne,Ie)=>Ve[Ne]=Ke[Ie]),Ve}const Be=we;return new Promise(Pe=>{const Oe=[];let Ke=Be.length;0===Ke&&Pe(Oe),Be.forEach(Ve=>{const Ne={promise:Ve||Promise.resolve(Ve)};Oe.push(Ne),Ne.promise.then(Ie=>{Ne.value=Ie}).catch(Ie=>{Ne.error=Ie}).then(()=>{--Ke,0===Ke&&Pe(Oe)})})})})).apply(this,arguments)}function ye(we){return fe.apply(this,arguments)}function fe(){return(fe=(0,D.Z)(function*(we){return(yield _e(we)).filter(Be=>!!Be.value).map(Be=>Be.value)})).apply(this,arguments)}function De(we,Be,Pe){const Oe=new AbortController;return Z(Pe,()=>Oe.abort()),new Promise((Ke,Ve)=>{let Ne=setTimeout(()=>{Ne=0,Ke(Be)},we);Z(Oe,()=>{Ne&&(clearTimeout(Ne),Ve(re()))})})}function Ce(we){return we&&"function"==typeof we.then}function ge(we){return Ce(we)?we:Promise.resolve(we)}function Te(we,Be=-1){let Pe,Oe,Ke,Ve,Ne=null;const Ie=(...We)=>{if(Pe){Oe=We,Ve&&Ve.reject(re()),Ve=me();const et=(0,Y.j0)(Ve.promise);if(Ne){const nt=Ne;Ne=null,nt.abort()}return et}if(Ke=Ve||me(),Ve=null,Be>0){const et=new AbortController;Pe=ge(we(...We,et.signal));const nt=Pe;De(Be).then(()=>{Pe===nt&&(Ve?et.abort():Ne=et)})}else Pe=1,Pe=ge(we(...We));const Se=()=>{const et=Oe;Oe=Ke=Pe=Ne=null,null!=et&&Ie(...et)},He=Pe,$e=Ke;return He.then(Se,Se),He.then($e.resolve,$e.reject),(0,Y.j0)($e.promise)};return Ie}function Le(){let we,Be;const Pe=new Promise((Ke,Ve)=>{we=Ke,Be=Ve}),Oe=Ke=>{we(Ke)};return Oe.resolve=Ke=>we(Ke),Oe.reject=Ke=>Be(Ke),Oe.timeout=(Ke,Ve)=>x.m.setTimeout(()=>Oe.reject(Ve),Ke),Oe.promise=Pe,Oe}function je(we,Be){return we.then(Be,Be)}function ze(we,Be){let Pe,Oe=new AbortController;const Ke=we(Oe.signal);let Ve={promise:Ke,finished:!1,abort:()=>{Oe&&(Oe.abort(),Oe=null)}};const Ne=()=>{Ve&&(Ve.finished=!0,Ve=null),(0,Y.pC)(Pe)&&(Pe.remove(),Pe=null),Oe=null};return Ke.then(Ne,Ne),Pe=Z(Be,()=>{(0,Y.pC)(Ve)&&Ve.abort()}),Ve}function Ee(we){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,D.Z)(function*(we){yield Promise.resolve(),ue(we)})).apply(this,arguments)}},32917:(qe,xe,T)=>{"use strict";T.d(xe,{N1:()=>ue,YP:()=>Y,Z_:()=>Z,gx:()=>H,nn:()=>Q,on:()=>$,tX:()=>J});var D=T(17770),x=T(54024),w=T(62208),B=T(10699),U=T(30755);function Y(se,ee,le={}){return G(se,ee,le,oe)}function H(se,ee,le={}){return G(se,ee,le,ie)}function G(se,ee,le={},ne){let ce=null;const de=le.once?(me,_e)=>{ne(me)&&((0,w.hw)(ce),ee(me,_e))}:(me,_e)=>{ne(me)&&ee(me,_e)};if(ce=(0,U.aQ)(se,de,le.sync,le.equals),le.initial){const me=se();de(me,me)}return ce}function $(se,ee,le,ne={}){let ce=null,de=null,me=null;function _e(){ce&&de&&(de.remove(),ne.onListenerRemove?.(ce),ce=null,de=null)}function he(fe){ne.once&&ne.once&&(0,w.hw)(me),le(fe)}const ye=Y(se,(fe,De)=>{_e(),(0,D.vT)(fe)&&(ce=fe,de=(0,D.on)(fe,ee,he),ne.onListenerAdd?.(fe))},{sync:ne.sync,initial:!0});return me=(0,x.kB)(()=>{ye.remove(),_e()}),me}function ue(se,ee){return function ae(se,ee,le){if((0,B.Hc)(le))return Promise.reject((0,B.zE)());const ne=se();if(ee?.(ne))return Promise.resolve(ne);let ce=null;function de(){ce=(0,w.hw)(ce)}return new Promise((me,_e)=>{ce=(0,x.AL)([(0,B.fu)(le,()=>{de(),_e((0,B.zE)())}),G(se,he=>{de(),me(he)},{sync:!1,once:!0},ee??oe)])})}(se,ie,ee)}function oe(se){return!0}function ie(se){return!!se}T(21352);const Z={sync:!0},Q={initial:!0},J={sync:!0,initial:!0}},50618:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>Q,MU:()=>_e,Os:()=>Z,bP:()=>ee});var D=T(62208),x=T(79682),w=T(73362),B=T(77029),U=T(10699),W=T(27422);class Y{constructor(ve){this.phases=ve,this.paused=!1,this.ticks=-1,this.removed=!1}}class H{constructor(ve){this.callback=ve,this.isActive=!0}remove(){this.isActive=!1}}let G=0,$=0;const re={time:(0,W.HA)(0),deltaTime:(0,W.HA)(0),elapsedFrameTime:(0,W.HA)(0),frameDuration:(0,W.HA)(0)},ue=["prepare","preRender","render","postRender","update","finish"],ae=[],oe=new B.Z;class ie{constructor(ve){this._task=ve}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const X={frameTasks:oe,willDispatch:!1,clearFrameTasks:function se(De=!1){oe.forAll(ve=>{ve.removed=!0}),De&&de()},dispatch:me,executeFrameTasks:function ne(De){const ve=(0,W.HA)(De-G);G=De;const Ce=$>0?$:1e3/60,ge=Math.max(0,ve-Ce);for(let Te=0;Te<ue.length;Te++){const Le=performance.now(),je=ue[Te];oe.forAll(ze=>{ze.paused||ze.removed||(0===Te&&ze.ticks++,ze.phases[je]&&(re.time=De,re.deltaTime=0===ze.ticks?(0,W.HA)(0):ve,re.elapsedFrameTime=(0,W.HA)(performance.now()-De),re.frameDuration=(0,W.HA)(Ce-ge),ze.phases[je]?.call(ze,re)))}),ye[Te].record(performance.now()-Le)}de(),fe.record(performance.now()-De)}};function Z(De){const ve=new H(De);return ae.push(ve),X.willDispatch||(X.willDispatch=!0,(0,x.Y)(me)),ve}function Q(De){const ve=new Y(De);return oe.push(ve),null==J&&(G=performance.now(),J=requestAnimationFrame(le)),new ie(ve)}let J=null;function ee(De){$=Math.max(0,De)}function le(){const De=performance.now();J=null,J=oe.length>0?requestAnimationFrame(le):null,X.executeFrameTasks(De)}const ce=new B.Z;function de(){oe.forAll(De=>{De.removed&&ce.push(De)}),oe.removeUnorderedMany(ce.data,ce.length),ce.clear()}function me(){for(;ae.length;){const De=(0,D.j0)(ae.shift());De.isActive&&De.callback()}X.willDispatch=!1}function _e(De=1,ve){const Ce=(0,U.hh)(),ge=()=>{(0,U.Hc)(ve)?Ce.reject((0,U.zE)()):0===De?Ce():(--De,(0,x.Y)(()=>ge()))};return ge(),Ce.promise}const ye=ue.map(De=>new w.Z(De)),fe=new w.Z("total")},23841:(qe,xe,T)=>{"use strict";T.d(xe,{F2:()=>B,J$:()=>re,So:()=>ue,Wv:()=>ae,Wz:()=>U,c$:()=>oe,gX:()=>$,md:()=>X,s1:()=>H,t_:()=>W,vW:()=>Y});const D=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function B(Z){return Z?Z/72*96:0}function U(Z){return Z?72*Z/96:0}function W(Z){if("string"==typeof Z){const Q=Z.match(D);if(Q){const J=Number(Q[1]),se=Q[3]&&Q[3].toLowerCase(),ee="-"===Z.charAt(0),le="px"===se?U(J):J;return ee?-le:le}return console.warn("screenUtils.toPt: input not recognized!"),null}return Z}function Y(Z=0,Q=0){return{x:Z,y:Q}}function H(Z=0,Q=0){return[Z,Q]}function $(Z=0,Q=0){return[Z,Q]}function re(Z=0,Q=0,J=0){return[Z,Q,J]}function ue(Z){return Z}function ae(Z){return Z}function oe(Z){return Z}function X(Z,Q){return Q?(Q[0]=Z.x,Q[1]=Z.y,Q.length>2&&(Q[2]=0),Q):[Z.x,Z.y]}},95737:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>w,_:()=>U});var D=T(15861),x=T(62208);function w(W,Y){return B.apply(this,arguments)}function B(){return(B=(0,D.Z)(function*(W,Y){const{WhereClause:H}=yield T.e(410).then(T.bind(T,10410));return H.create(W,Y)})).apply(this,arguments)}function U(W,Y){return(0,x.pC)(W)?(0,x.pC)(Y)?`(${W}) AND (${Y})`:W:Y}},77275:(qe,xe,T)=>{"use strict";T.d(xe,{Cb:()=>Y,Qs:()=>U,gx:()=>B,hP:()=>W});var D=T(94113);const x=/\{([^\}]+)\}/g;function w(H){return H??""}function B(H,G){return H.replace(x,"object"==typeof G?($,re)=>w((0,D.hS)(re,G)):($,re)=>w(G(re)))}function U(H,G){return H.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,$=>G&&G.includes($)?$:`\\${$}`)}function W(H){let G=0;for(let $=0;$<H.length;$++)G=(G<<5)-G+H.charCodeAt($),G|=0;return G}function Y(H){return(new DOMParser).parseFromString(H||"","text/html").body.innerText||""}},28705:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>ue,z:()=>ae});var D=T(17626),x=T(46160),w=T(89726),B=T(80542),W=(T(8314),T(63290)),Y=T(62208),H=T(77712),re=(T(85931),T(90912),T(76898));W.Z.getLogger("esri.core.support.OwningCollection");let ue=class extends((0,B.p)(x.Z)){constructor(oe){super(oe),this.handles.add([this.on("before-add",ie=>{(0,Y.Wi)(ie.item)&&ie.preventDefault()}),this.on("after-add",ie=>this._own(ie.item)),this.on("after-remove",ie=>this._release(ie.item))])}get owner(){return this._get("owner")}set owner(oe){oe!==this._get("owner")&&(this._releaseAll(),this._set("owner",oe),this._ownAll())}_ownAll(){for(const oe of this.items)this._own(oe)}_releaseAll(){for(const oe of this.items)this._release(oe)}_createNewInstance(oe){return this.itemType?new(x.Z.ofType(this.itemType.Type))(oe):new x.Z(oe)}};function ae(oe,ie){return{type:oe,cast:w.R,set(X){const Z=(0,w.Z)(X,this._get(ie),oe);Z.owner=this,this._set(ie,Z)}}}(0,D._)([(0,H.Cb)()],ue.prototype,"owner",null),ue=(0,D._)([(0,re.j)("esri.core.support.OwningCollection")],ue)},17760:(qe,xe,T)=>{"use strict";T.d(xe,{t:()=>G});var D=T(17626),x=T(14517),w=T(72392),B=T(62208),U=T(32917),W=T(50618),Y=T(77712),H=T(76898);let G=class extends x.Z{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new w.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(ue,ae,oe={}){return this._installWatch(ue,ae,oe,U.YP)}addWhen(ue,ae,oe={}){return this._installWatch(ue,ae,oe,U.gx)}addOnCollectionChange(ue,ae,{initial:oe=!1,final:ie=!1}={}){const X=++this.handleId;return this.handles.add([(0,U.on)(ue,"after-changes",this._createSyncUpdatingCallback(),U.Z_),(0,U.on)(ue,"change",ae,{onListenerAdd:oe?Z=>ae({added:Z.toArray(),removed:[]}):void 0,onListenerRemove:ie?Z=>ae({added:[],removed:Z.toArray()}):void 0})],X),{remove:()=>this.handles.remove(X)}}addPromise(ue){if((0,B.Wi)(ue))return ue;const ae=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(ue)&&(0!==this.pendingPromises.size||this.handles.has($)||this._set("updating",!1))}},ae),this.pendingPromises.add(ue),this._set("updating",!0);const oe=()=>this.handles.remove(ae);return ue.then(oe,oe),ue}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(ue,ae,oe={},ie){const X=++this.handleId;oe.sync||this._installSyncUpdatingWatch(ue,X);const Z=ie(ue,ae,oe);return this.handles.add(Z,X),{remove:()=>this.handles.remove(X)}}_installSyncUpdatingWatch(ue,ae){const oe=this._createSyncUpdatingCallback(),ie=(0,U.YP)(ue,oe,{sync:!0,equals:()=>!1});return this.handles.add(ie,ae),ie}_createSyncUpdatingCallback(){return()=>{this.handles.remove($),++this.scheduleHandleId;const ue=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,W.Os)(()=>{ue===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove($))}),$)}}};(0,D._)([(0,Y.Cb)({readOnly:!0})],G.prototype,"updating",void 0),G=(0,D._)([(0,H.j)("esri.core.support.WatchUpdatingTracking")],G);const $=-42;var re,ue;(ue=re||(re={}))[ue.NONE=0]="NONE",ue[ue.SYNC=1]="SYNC",ue[ue.INIT=2]="INIT"},27422:(qe,xe,T)=>{"use strict";function D(U){return U}function x(U){return 1e3*U}function w(U){return U}function B(U){return.001*U}T.d(xe,{D9:()=>B,HA:()=>D,_H:()=>w,up:()=>x})},28170:(qe,xe,T)=>{"use strict";T.d(xe,{JE:()=>Y,Nm:()=>U,rJ:()=>ue}),T(8314);const x={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},w={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function U(ae,oe,ie){const X=new Date(ae.getTime());if(oe&&ie){const Z=w[ie],{getter:Q,setter:J,multiplier:se}=Z;if("months"===ie){const ee=function B(ae,oe){const ie=new Date(ae,oe+1,1);return ie.setDate(0),ie.getDate()}(X.getFullYear(),X.getMonth()+oe);X.getDate()>ee&&X.setDate(ee)}X[J](X[Q]()+oe*se)}return X}function Y(ae,oe){switch(oe){case"milliseconds":return new Date(ae.getTime());case"seconds":return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),ae.getHours(),ae.getMinutes(),ae.getSeconds());case"minutes":return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),ae.getHours(),ae.getMinutes());case"hours":return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate(),ae.getHours());case"days":return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate());case"weeks":return new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()-ae.getDay());case"months":return new Date(ae.getFullYear(),ae.getMonth(),1);case"years":return new Date(ae.getFullYear(),0,1);case"decades":return new Date(ae.getFullYear()-ae.getFullYear()%10,0,1);case"centuries":return new Date(ae.getFullYear()-ae.getFullYear()%100,0,1);default:return new Date}}function ue(ae,oe,ie){return 0===ae?0:ae*x[oe]/x[ie]}},55713:(qe,xe,T)=>{"use strict";T.d(xe,{Ed:()=>x,Hx:()=>$,KZ:()=>Y,Uc:()=>G,W0:()=>U,Xw:()=>ie,ZY:()=>re,eP:()=>B,fS:()=>ae,lq:()=>W,qo:()=>oe,tP:()=>w,xZ:()=>ue,z3:()=>H});var D=T(62208);function x(X,Z){if(X.forEach)X.forEach(Z);else for(let Q=0;Q<X.length;Q++)Z(X[Q],Q,X)}function w(X,Z,Q){if(X.slice)return X.slice(Z,Q);void 0===Z?Z=0:(Z<0&&(Z+=X.length),Z=Math.min(X.length,Math.max(0,Z))),void 0===Q?Q=X.length:(Q<0&&(Q+=X.length),Q=Math.min(X.length,Math.max(0,Q)));const J=Math.max(0,Q-Z),se=new X.constructor(J);for(let ee=0;ee<J;ee++)se[ee]=X[Z+ee];return se}function B(X){return X instanceof ArrayBuffer||X&&X.constructor&&"ArrayBuffer"===X.constructor.name}function U(X){return X instanceof Int8Array||X&&X.constructor&&"Int8Array"===X.constructor.name}function W(X){return X instanceof Uint8Array||X&&X.constructor&&"Uint8Array"===X.constructor.name}function Y(X){return X instanceof Uint8ClampedArray||X&&X.constructor&&"Uint8ClampedArray"===X.constructor.name}function H(X){return X instanceof Int16Array||X&&X.constructor&&"Int16Array"===X.constructor.name}function G(X){return X instanceof Uint16Array||X&&X.constructor&&"Uint16Array"===X.constructor.name}function $(X){return X instanceof Int32Array||X&&X.constructor&&"Int32Array"===X.constructor.name}function re(X){return X instanceof Uint32Array||X&&X.constructor&&"Uint32Array"===X.constructor.name}function ue(X){return X instanceof Float32Array||X&&X.constructor&&"Float32Array"===X.constructor.name}function ae(X){return X instanceof Float64Array||X&&X.constructor&&"Float64Array"===X.constructor.name}function oe(X){const Z=new Array(X.length);for(let Q=0;Q<X.length;Q++)Z[Q]=X[Q];return Z}function ie(X){return(0,D.Wi)(X)?0:128+X.buffer.byteLength+64}},86236:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>w,u:()=>x});let D=0;const x=0;function w(){return++D}},90466:(qe,xe,T)=>{"use strict";T.d(xe,{Rd:()=>$,Ud:()=>oe,VG:()=>H,Wv:()=>ue,Zv:()=>X,sS:()=>_e});var D=T(27306),w=(T(23719),T(21286)),B=T(77275),U=T(16730),W=T(15348);function H(he,ye,fe,De=2,ve="abbr"){return`${(0,W.uf)(ye,{minimumFractionDigits:De,maximumFractionDigits:De})} ${function Y(he,ye,fe){return he.units[ye][fe]}(he,fe,ve)}`}function $(he,ye,fe,De=2,ve="abbr"){const Ce=(0,U.KU)(ye,fe);return H(he,(0,U.En)(ye,fe,Ce),Ce,De,ve)}function ue(he,ye,fe,De=2,ve="abbr"){const Ce=(0,U.OG)(ye,fe);return H(he,(0,U.En)(ye,fe,Ce),Ce,De,ve)}function oe(he,ye,fe,De=2,ve="abbr"){const Ce=(0,U.FN)(ye,fe);return H(he,(0,U.En)(ye,fe,Ce),Ce,De,ve)}function X(he,ye,fe,De=2,ve="abbr"){const Ce=(0,U.qv)(ye,fe);return H(he,(0,U.En)(ye,fe,Ce),Ce,De,ve)}const me=["B","kB","MB","GB","TB"];function _e(he,ye){let fe=0===ye?0:Math.floor(Math.log(ye)/Math.log(D.Y8.KILOBYTES));fe=(0,w.uZ)(fe,0,me.length-1);const De=(0,W.uf)(ye/D.Y8.KILOBYTES**fe,{maximumFractionDigits:2});return(0,B.gx)(he.units.bytes[me[fe]],{fileSize:De})}},16730:(qe,xe,T)=>{"use strict";T.d(xe,{$C:()=>we,En:()=>fe,FN:()=>Le,Jo:()=>Ft,KU:()=>ge,OG:()=>Te,RG:()=>Ze,UF:()=>me,Yl:()=>Ee,_R:()=>Pe,c9:()=>Ke,cM:()=>Oe,gV:()=>Mt,hd:()=>G,j5:()=>Se,qE:()=>We,qv:()=>je,tQ:()=>ze,ty:()=>Ae}),T(8314);var x=T(2076),w=T(62208),B=T(12080),U=T(65234),W=T(94425),Y=T(37053),H=T(84029);const G=39.37,$=W.sv.radius*Math.PI/200,re=/UNIT\[([^\]]+)\]\]$/i,ue=H.Z,ae=/UNIT\[([^\]]+)\]/i,oe=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ie=(0,x.w)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),X=wt=>wt*wt,Z=wt=>wt*wt*wt,Q={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:X(.001)},"square-centimeters":{inBaseUnits:X(.01)},"square-decimeters":{inBaseUnits:X(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:X(1e3)},"square-inches":{inBaseUnits:X(.0254)},"square-feet":{inBaseUnits:X(.3048)},"square-yards":{inBaseUnits:X(.9144)},"square-miles":{inBaseUnits:X(1609.344)},"square-us-feet":{inBaseUnits:X(1200/3937)},acres:{inBaseUnits:.0015625*X(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Z(.001)},"cubic-centimeters":{inBaseUnits:1e3*Z(.01)},"cubic-decimeters":{inBaseUnits:1e3*Z(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Z(1e3)},"cubic-inches":{inBaseUnits:1e3*Z(.0254)},"cubic-feet":{inBaseUnits:1e3*Z(.3048)},"cubic-yards":{inBaseUnits:1e3*Z(.9144)},"cubic-miles":{inBaseUnits:1e3*Z(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},J=(()=>{const wt={};for(const zt in Q)for(const Zt in Q[zt].units)wt[Zt]=zt;return wt})(),ne=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function me(wt){const zt=J[wt];if(!zt)throw new Error("unknown type");return zt}function ye(wt,zt=null){return zt=zt||me(wt),Q[zt].baseUnit===wt}function fe(wt,zt,Zt){if(zt===Zt)return wt;const ar=me(zt);if(ar!==me(Zt))throw new Error("incompatible units");const Pr=ye(zt,ar)?wt:function se(wt,zt,Zt){return wt*Q[Zt].units[zt].inBaseUnits}(wt,zt,ar);return ye(Zt,ar)?Pr:function ee(wt,zt,Zt){return wt/Q[Zt].units[zt].inBaseUnits}(Pr,Zt,ar)}function ge(wt,zt){const Zt=fe(wt,zt,"meters");return Math.abs(Zt)<3e3?"meters":"kilometers"}function Te(wt,zt){const Zt=fe(wt,zt,"meters");return Math.abs(Zt)<1e5?"meters":"kilometers"}function Le(wt,zt){const Zt=fe(wt,zt,"feet");return Math.abs(Zt)<1e3?"feet":"miles"}function je(wt,zt){const Zt=fe(wt,zt,"feet");return Math.abs(Zt)<1e5?"feet":"miles"}function ze(wt,zt){const Zt=fe(wt,zt,"square-meters");return Math.abs(Zt)<3e6?"square-meters":"square-kilometers"}function Ee(wt,zt){const Zt=fe(wt,zt,"square-feet");return Math.abs(Zt)<1e6?"square-feet":"square-miles"}function Ae(wt,zt,Zt){return fe(wt,zt,"meters")/(Zt*Math.PI/180)}function we(wt){return ie.fromJSON(wt.toLowerCase())||null}function Pe(wt){if(wt&&"object"==typeof wt&&!(0,Y.N$)(wt))return 1;const zt=Ke(wt);return zt>1e5?1:zt}function Oe(wt){return Ke(wt)>=(wt instanceof U.Z?(0,B.Iu)(wt).metersPerDegree:1e5)?"meters":We(wt)}function Ke(wt,zt=W.sv.metersPerDegree){return(0,w.Pt)(function Ve(wt,zt=!1){let Zt,ar,Pr=null;if(null!=wt&&("object"==typeof wt?(Zt=wt.wkid,ar=wt.wkt):"number"==typeof wt?Zt=wt:"string"==typeof wt&&(ar=wt)),Zt){if((0,Y.o$)(Zt))return W.yr.metersPerDegree;if((0,Y.ME)(Zt))return W.Z1.metersPerDegree;Pr=ue.values[ue[Zt]],!Pr&&zt&&oe.has(Zt)&&(Pr=$)}else ar&&(nt(ar)?Pr=Ne(re.exec(ar),Pr):et(ar)&&(Pr=Ne(ae.exec(ar),Pr)));return Pr}(wt,!0),zt)}function Ne(wt,zt){return wt&&wt[1]?Ie(wt[1]):zt}function Ie(wt){return parseFloat(wt.split(",")[1])}function We(wt){let zt,Zt,ar=null;if(null!=wt&&("object"==typeof wt?(zt=wt.wkid,Zt=wt.wkt):"number"==typeof wt?zt=wt:"string"==typeof wt&&(Zt=wt)),zt)ar=ue.units[ue[zt]];else if(Zt){const Pr=nt(Zt)?re:et(Zt)?ae:null;if(Pr){const kr=Pr.exec(Zt);kr&&kr[1]&&(ar=function Xe(wt){const zt=/[\\"\\']{1}([^\\"\\']+)/.exec(wt);let Zt=zt&&zt[1];if(!Zt||!ue.units.includes(Zt)){const ar=Ie(wt);Zt=null;const Pr=ue.values;for(let kr=0;kr<Pr.length;++kr)if(Math.abs(ar-Pr[kr])<1e-7){Zt=ue.units[kr];break}}return Zt}(kr[1]))}}return(0,w.pC)(ar)?we(ar):null}function Se(wt){const zt=We(wt);return(0,w.Wi)(zt)||!ne.includes(zt)?null:zt}function et(wt){return/^GEOCCS/i.test(wt)}function nt(wt){return/^PROJCS/i.test(wt)}function Ze(wt){const zt="metric";if((0,w.Wi)(wt))return zt;const Zt=wt.map,ar=Zt&&"portalItem"in Zt?Zt.portalItem?.portal:null;if(ar)switch(ar?.user?.units??ar.units){case zt:return zt;case"english":return"imperial"}return(0,w.Pt)(function rt(wt){const zt=We(wt);if((0,w.Wi)(zt))return null;switch(zt){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}(wt.spatialReference),zt)}const lt={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},st={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Mt=(0,x.w)()(lt),Ft=(0,x.w)()(st);(0,x.w)()({...lt,...st})},21726:(qe,xe,T)=>{"use strict";T.d(xe,{$U:()=>zt,AH:()=>He,B7:()=>ye,D6:()=>Ae,Fv:()=>Ke,HK:()=>Se,Hu:()=>ns,Ie:()=>Kr,L:()=>ne,Ml:()=>Tt,P$:()=>Ne,PF:()=>Oe,Qj:()=>_r,R9:()=>X,TI:()=>le,YP:()=>Ie,Yd:()=>Ut,ZN:()=>lr,_l:()=>it,b7:()=>fe,ed:()=>Le,fl:()=>Tr,hF:()=>Pe,hO:()=>kr,io:()=>Ze,jc:()=>We,kl:()=>we,mN:()=>me,oC:()=>kt,oh:()=>Ee,qg:()=>De,rS:()=>$e,sJ:()=>nt,tD:()=>Te,tm:()=>je,u0:()=>_e,v_:()=>Ve,vt:()=>$t,zd:()=>Jr});var D=T(59318),x=T(26584),w=T(63290),B=T(62208);const U=w.Z.getLogger("esri.core.urlUtils"),W=D.Z.request,Y="esri/config: esriConfig.request.proxyUrl is not set.",H=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,G=/^\s*http:/i,$=/^\s*https:/i,re=/^\s*file:/i,ue=/:\d+$/,ae=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,oe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ie=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class X{constructor(Qt=""){this.uri=Qt,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let qt=(0,B.j0)(this.uri.match(oe));this.scheme=qt[2]||(qt[1]?"":null),this.authority=qt[4]||(qt[3]?"":null),this.path=qt[5],this.query=qt[7]||(qt[6]?"":null),this.fragment=qt[9]||(qt[8]?"":null),null!=this.authority&&(qt=(0,B.j0)(this.authority.match(ie)),this.user=qt[3]||null,this.password=qt[4]||null,this.host=qt[6]||qt[7],this.port=qt[9]||null)}toString(){return this.uri}}const Z={};let J=new X(D.Z.applicationUrl);let ee=function ce(){const bt=(0,B.j0)(J.path),Qt=bt.substring(0,bt.lastIndexOf(bt.split("/")[bt.split("/").length-1]));return`${J.scheme}://${J.host}${null!=J.port?`:${J.port}`:""}${Qt}`}();const le=()=>J,ne=()=>ee;function me(bt){const Qt={path:null,query:null},qt=new X(bt),yr=bt.indexOf("?");return null===qt.query?Qt.path=bt:(Qt.path=bt.substring(0,yr),Qt.query=_e(qt.query)),qt.fragment&&(Qt.hash=qt.fragment,null===qt.query&&(Qt.path=Qt.path.substring(0,Qt.path.length-(qt.fragment.length+1)))),Qt}function _e(bt){const Qt=bt.split("&"),qt={};for(const yr of Qt){if(!yr)continue;const jr=yr.indexOf("=");let es,hs;jr<0?(es=decodeURIComponent(yr),hs=""):(es=decodeURIComponent(yr.slice(0,jr)),hs=decodeURIComponent(yr.slice(jr+1)));let Is=qt[es];"string"==typeof Is&&(Is=qt[es]=[Is]),Array.isArray(Is)?Is.push(hs):qt[es]=hs}return qt}function he(bt){return bt&&"object"==typeof bt&&"toJSON"in bt&&"function"==typeof bt.toJSON}function ye(bt,Qt){return bt?Qt&&"function"==typeof Qt?Object.keys(bt).map(qt=>encodeURIComponent(qt)+"="+encodeURIComponent(Qt(qt,bt[qt]))).join("&"):Object.keys(bt).map(qt=>{const yr=bt[qt];if(null==yr)return"";const jr=encodeURIComponent(qt)+"=",es=Qt&&Qt[qt];return es?jr+encodeURIComponent(es(yr)):Array.isArray(yr)?yr.map(hs=>he(hs)?jr+encodeURIComponent(JSON.stringify(hs)):jr+encodeURIComponent(hs)).join("&"):he(yr)?jr+encodeURIComponent(JSON.stringify(yr)):jr+encodeURIComponent(yr)}).filter(qt=>qt).join("&"):""}function fe(bt=!1){let Qt,qt=W.proxyUrl;if("string"==typeof bt){Qt=zt(bt);const yr=Le(bt);yr&&(qt=yr.proxyUrl)}else Qt=!!bt;if(!qt)throw U.warn(Y),new x.Z("urlutils:proxy-not-set",Y);return Qt&&os()&&(qt=kr(qt)),me(qt)}function De(bt){const Qt=Le(bt);let qt,yr;if(Qt){const jr=Ce(Qt.proxyUrl);qt=jr.path,yr=jr.query?_e(jr.query):null}if(qt){const jr=me(bt);bt=qt+"?"+jr.path;const es=ye({...yr,...jr.query});es&&(bt=`${bt}?${es}`)}return bt}const ve={path:"",query:""};function Ce(bt){const Qt=bt.indexOf("?");return-1!==Qt?(ve.path=bt.slice(0,Qt),ve.query=bt.slice(Qt+1)):(ve.path=bt,ve.query=null),ve}function ge(bt){return(bt=Hr(bt=function Xt(bt){return bt&&"/"===bt[bt.length-1]?bt:`${bt}/`}(bt=Ce(bt).path),!0)).toLowerCase()}function Te(bt){const Qt={proxyUrl:bt.proxyUrl,urlPrefix:ge(bt.urlPrefix)},qt=W.proxyRules,yr=Qt.urlPrefix;let jr=qt.length;for(let es=0;es<qt.length;es++){const hs=qt[es].urlPrefix;if(0===yr.indexOf(hs)){if(yr.length===hs.length)return-1;jr=es;break}0===hs.indexOf(yr)&&(jr=es+1)}return qt.splice(jr,0,Qt),jr}function Le(bt){const Qt=W.proxyRules,qt=ge(bt);for(let yr=0;yr<Qt.length;yr++)if(0===qt.indexOf(Qt[yr].urlPrefix))return Qt[yr]}function je(bt,Qt){return bt=ze(bt),Qt=ze(Qt),Hr(bt)===Hr(Qt)}function ze(bt){const Qt=(bt=Ke(bt)).indexOf("/sharing");return Qt>0?bt.substring(0,Qt):bt.replace(/\/+$/,"")}function Ee(bt){const Qt=yr=>null==yr||yr instanceof RegExp&&yr.test(bt)||"string"==typeof yr&&bt.startsWith(yr),qt=W.interceptors;if(qt)for(const yr of qt)if(Array.isArray(yr.urls)){if(yr.urls.some(Qt))return yr}else if(Qt(yr.urls))return yr;return null}function Ae(bt,Qt,qt=!1){const yr=Gr(bt),jr=Gr(Qt);return!(!qt&&yr.scheme!==jr.scheme)&&null!=yr.host&&null!=jr.host&&yr.host.toLowerCase()===jr.host.toLowerCase()&&yr.port===jr.port}function we(bt){if("string"==typeof bt){if(!Ie(bt))return!0;bt=Gr(bt)}if(Ae(bt,J))return!0;const Qt=W.trustedServers||[];for(let qt=0;qt<Qt.length;qt++){const yr=Be(Qt[qt]);for(let jr=0;jr<yr.length;jr++)if(Ae(bt,yr[jr]))return!0}return!1}function Be(bt){return Z[bt]||(Z[bt]=wt(bt)||kt(bt)?[new X(Pe(bt))]:[new X(`http://${bt}`),new X(`https://${bt}`)]),Z[bt]}function Pe(bt,Qt=ee,qt){return kt(bt)?qt&&qt.preserveProtocolRelative?bt:"http"===J.scheme&&J.authority===Ne(bt).slice(2)?`http:${bt}`:`https:${bt}`:wt(bt)?bt:(0,B.j0)(Ve("/"===bt[0]?function pt(bt){const Qt=bt.indexOf("//"),qt=bt.indexOf("/",Qt+2);return-1===qt?bt:bt.slice(0,qt)}(Qt):Qt,bt))}function Oe(bt,Qt=ee,qt){if(!Ie(bt))return bt;const yr=Ke(bt),jr=yr.toLowerCase(),es=Ke(Qt).toLowerCase().replace(/\/+$/,""),hs=qt?Ke(qt).toLowerCase().replace(/\/+$/,""):null;if(hs&&0!==es.indexOf(hs))return bt;const Is=(Cr,as,ps)=>-1===(ps=Cr.indexOf(as,ps))?Cr.length:ps;let Yr=Is(jr,"/",jr.indexOf("//")+2),Rs=-1;for(;jr.slice(0,Yr+1)===es.slice(0,Yr)+"/"&&(Rs=Yr+1,Yr!==jr.length);)Yr=Is(jr,"/",Yr+1);if(-1===Rs||hs&&Rs<hs.length)return bt;bt=yr.slice(Rs);const Zi=es.slice(Rs-1).replace(/[^/]+/g,"").length;if(Zi>0)for(let Cr=0;Cr<Zi;Cr++)bt=`../${bt}`;else bt=`./${bt}`;return bt}function Ke(bt){return function vr(bt){const Qt=W.httpsDomains;if(!function Zt(bt){return G.test(bt)||"http"===J.scheme&&kt(bt)}(bt))return bt;const qt=bt.indexOf("/",7);let yr;if(yr=-1===qt?bt:bt.slice(0,qt),yr=yr.toLowerCase().slice(7),ue.test(yr)){if(!yr.endsWith(":80"))return bt;yr=yr.slice(0,-3),bt=bt.replace(":80","")}return function ss(){return"http"===J.scheme}()&&yr===J.authority&&!ae.test(bt)||(os()&&yr===J.authority||Qt&&Qt.some(jr=>yr===jr||yr.endsWith(`.${jr}`))||os()&&!Le(bt))&&(bt=kr(bt)),bt}(bt=function gr(bt){return bt.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(bt=function hr(bt){if(/^https?:\/\//i.test(bt)){const Qt=Ce(bt);bt=(bt=Qt.path.replace(/\/{2,}/g,"/")).replace("/","//"),Qt.query&&(bt+=`?${Qt.query}`)}return bt}(bt=Pe(bt=bt.trim()))))}function Ve(...bt){const Qt=bt.filter(B.pC);if(!Qt||!Qt.length)return;const qt=[];if(Ie(Qt[0])){const jr=Qt[0],es=jr.indexOf("//");-1!==es&&(qt.push(jr.slice(0,es+1)),function ar(bt){return re.test(bt)}(Qt[0])&&(qt[0]+="/"),Qt[0]=jr.slice(es+2))}else"/"===Qt[0][0]&&qt.push("");const yr=Qt.reduce((jr,es)=>es?jr.concat(es.split("/")):jr,[]);for(let jr=0;jr<yr.length;jr++){const es=yr[jr];".."===es&&qt.length>0&&".."!==qt[qt.length-1]?qt.pop():(!es&&jr===yr.length-1||es&&("."!==es||0===qt.length))&&qt.push(es)}return qt.join("/")}function Ne(bt,Qt=!1){if(We(bt)||Se(bt))return null;let qt=bt.indexOf("://");if(-1===qt&&kt(bt))qt=2;else{if(-1===qt)return null;qt+=3}const yr=bt.indexOf("/",qt);return-1!==yr&&(bt=bt.slice(0,yr)),Qt&&(bt=Hr(bt,!0)),bt}function Ie(bt){return kt(bt)||wt(bt)}function We(bt){return null!=bt&&"blob:"===bt.slice(0,5)}function Se(bt){return"data:"===bt.slice(0,5)}function He(bt){const Qt=nt(bt);if(!Qt||!Qt.isBase64)return null;const qt=atob(Qt.data),yr=new Uint8Array(qt.length);for(let jr=0;jr<qt.length;jr++)yr[jr]=qt.charCodeAt(jr);return yr.buffer}function $e(bt){return btoa(String.fromCharCode.apply(null,bt)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const et=/^data:(.*?)(;base64)?,(.*)$/;function nt(bt){const Qt=bt.match(et);if(!Qt)return null;const[,qt,yr,jr]=Qt;return{mediaType:qt,isBase64:!!yr,data:jr}}function it(bt){return bt.isBase64?`data:${bt.mediaType};base64,${bt.data}`:`data:${bt.mediaType},${bt.data}`}function Ze(bt,Qt){(function st(bt,Qt){if(!bt)return!1;const qt=document.createElement("a");if(!("download"in qt))return!1;const yr=URL.createObjectURL(bt);return qt.download=Qt,qt.href=yr,qt.style.display="none",document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(yr),!0})(bt,Qt)||function Ft(bt,Qt){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(bt,Qt)}(bt,Qt)}function kt(bt){return null!=bt&&void 0!==bt&&"/"===bt[0]&&"/"===bt[1]}function wt(bt){return H.test(bt)}function zt(bt){return $.test(bt)||"https"===J.scheme&&kt(bt)}function kr(bt){return kt(bt)?`https:${bt}`:bt.replace(G,"https:")}function os(){return"https"===J.scheme}function Hr(bt,Qt=!1){return kt(bt)?bt.slice(2):(bt=bt.replace(H,""),Qt&&bt.length>1&&"/"===bt[0]&&"/"===bt[1]&&(bt=bt.slice(2)),bt)}function Ut(bt){let Qt=0;if(Ie(bt)){const yr=bt.indexOf("//");-1!==yr&&(Qt=yr+2)}const qt=bt.lastIndexOf("/");return qt<Qt?bt:bt.slice(0,qt+1)}function $t(bt,Qt){if(!bt)return"";const qt=me(bt).path.replace(/\/+$/,""),yr=qt.substring(qt.lastIndexOf("/")+1);if(!Qt?.length)return yr;const jr=new RegExp(`.(${Qt.join("|")})$`,"ig");return yr.replace(jr,"")}function _r(bt){return bt.replace(/\/+$/,"")}function Kr(bt,Qt,qt){if(!(Qt&&qt&&bt&&Ie(bt)))return bt;const yr=bt.indexOf("//"),jr=bt.indexOf("/",yr+2),es=bt.indexOf(":",yr+2),hs=Math.min(jr<0?bt.length:jr,es<0?bt.length:es);return bt.slice(yr+2,hs).toLowerCase()!==Qt.toLowerCase()?bt:`${bt.slice(0,yr+2)}${qt}${bt.slice(hs)}`}function Gr(bt){return"string"==typeof bt?new X(Pe(bt)):(bt.scheme||(bt.scheme=J.scheme),bt)}function Jr(bt){return Rr.test(bt)}function ns(bt,Qt){const qt=me(bt),yr=Object.keys(qt.query||{});return yr.length>0&&Qt&&Qt.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${yr.join(", ")}.`),qt.path}function lr(bt,Qt,qt){const yr=me(bt),jr=yr.query||{};return jr[Qt]=String(qt),`${yr.path}?${ye(jr)}`}function Tr(bt,Qt){const qt=me(bt),yr=qt.query||{};for(const es in Qt)yr[es]=Qt[es];const jr=ye(yr);return jr?`${qt.path}?${jr}`:qt.path}function Tt(bt){if((0,B.Wi)(bt))return null;const Qt=bt.match(sr);return Qt?Qt[1]:null}const sr=/.*?\.([^\/]*)$/,Rr=/(^data:image\/svg|\.svg$)/i},35948:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>x});const D="randomUUID"in crypto;function x(){if(D)return crypto.randomUUID();const w=crypto.getRandomValues(new Uint16Array(8));w[3]=4095&w[3]|16384,w[4]=16383&w[4]|32768;const B=U=>w[U].toString(16);return B(0)+B(1)+"-"+B(2)+"-"+B(3)+"-"+B(4)+"-"+B(5)+B(6)+B(7)}},93662:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Y});var D=T(54024),x=T(63290),w=T(10699),B=T(35133),U=T(89951);const W=x.Z.getLogger("esri.core.workers.Connection");class Y{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new B.Z}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(G,$){return new Promise((re,ue)=>{let ae=!0;const oe=ie=>{(0,w.k_)($.signal),ae&&(ae=!1,ie())};this._clients.length=G.length,this._clientPromises.length=G.length,this._inUseClients.length=G.length;for(let ie=0;ie<G.length;++ie){const X=G[ie];(0,w.y8)(X)?this._clientPromises[ie]=X.then(Z=>(this._clients[ie]=new U.Z(Z,$,()=>this._ongoingJobsQueue.pop()),oe(re),this._clients[ie]),()=>(oe(ue),null)):(this._clients[ie]=new U.Z(X,$,()=>this._ongoingJobsQueue.pop()),this._clientPromises[ie]=Promise.resolve(this._clients[ie]),oe(re))}})}broadcast(G,$,re){const ue=new Array(this._clientPromises.length);for(let ae=0;ae<this._clientPromises.length;++ae)ue[ae]=this._clientPromises[ae].then(ie=>ie.invoke(G,$,re));return ue}close(){let G;for(;G=this._ongoingJobsQueue.pop();)G.deferred.reject((0,w.zE)(`Worker closing, aborting job calling '${G.methodName}'`));for(const $ of this._clientPromises)$.then(re=>re.close());this._clients.length=0,this._clientPromises.length=0}invoke(G,$,re){let ue=null;Array.isArray(re)?(W.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),ue={transferList:re}):ue=re;const ae=(0,w.dD)();this._ongoingJobsQueue.push({methodName:G,data:$,invokeOptions:ue,deferred:ae});for(let oe=0;oe<this._clientPromises.length;oe++){const ie=this._clients[oe];ie?ie.jobAdded():this._clientPromises[oe].then(X=>X.jobAdded())}return ae.promise}on(G,$){return Promise.all(this._clientPromises).then(()=>(0,D.AL)(this._clients.map(re=>re.on(G,$))))}openPorts(){return new Promise(G=>{const $=new Array(this._clientPromises.length);let re=$.length;for(let ue=0;ue<this._clientPromises.length;++ue)this._clientPromises[ue].then(ae=>{$[ue]=ae.openPort(),0==--re&&G($)})})}get test(){return{numClients:this._clients.length}}}},89951:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Z});var D=T(24263),x=T(26584),w=T(17770),B=T(62208),U=T(10699),W=T(13126),Y=T(38365);const H={statsWorker:()=>Promise.all([T.e(3930),T.e(4135)]).then(T.bind(T,44135)),geometryEngineWorker:()=>Promise.all([T.e(4918),T.e(8592),T.e(1843)]).then(T.bind(T,77692)),CSVSourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(4896)]).then(T.bind(T,54896)),EdgeProcessingWorker:()=>Promise.resolve().then(T.bind(T,51445)),ElevationSamplerWorker:()=>Promise.all([T.e(8592),T.e(8149)]).then(T.bind(T,28149)),FeatureServiceSnappingSourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(6354)]).then(T.bind(T,86354)),GeoJSONSourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(8592),T.e(4079)]).then(T.bind(T,84079)),LercWorker:()=>T.e(7300).then(T.bind(T,57300)),MemorySourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(8592),T.e(7728)]).then(T.bind(T,7728)),PBFDecoderWorker:()=>T.e(4287).then(T.bind(T,84287)),Pipeline:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(5895),T.e(9628),T.e(8592),T.e(3251)]).then(T.bind(T,11288)),PointCloudWorker:()=>Promise.all([T.e(4471),T.e(4056)]).then(T.bind(T,44056)),RasterWorker:()=>Promise.all([T.e(7692),T.e(4307),T.e(8594),T.e(8592),T.e(5976)]).then(T.bind(T,15976)),SceneLayerSnappingSourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(4109)]).then(T.bind(T,54109)),SceneLayerWorker:()=>T.e(375).then(T.bind(T,30375)),WFSSourceWorker:()=>Promise.all([T.e(410),T.e(3930),T.e(3308),T.e(3464),T.e(3774),T.e(8592),T.e(2305)]).then(T.bind(T,62305)),WorkerTileHandler:()=>Promise.all([T.e(3751),T.e(8364),T.e(4522),T.e(195)]).then(T.bind(T,90195))},{CLOSE:G,ABORT:$,INVOKE:re,RESPONSE:ue,OPEN_PORT:ae,ON:oe}=W.Cs;class X{constructor(J){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=J,this._timer=null,this._process=this._process.bind(this)}push(J){J.type===W.Cs.ABORT?this._cancelledJobIds.add(J.jobId):(this._invokeMessages.push(J),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const J of this._invokeMessages)this._cancelledJobIds.has(J.jobId)||this._invoke(J);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Z{constructor(J,se,ee){this._port=J,this._getNextJob=ee,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new X(le=>this._onInvokeMessage(le)),this._client=se.client,this._onMessage=this._onMessage.bind(this),this._channel=se.channel,this._schedule=se.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(J){const se=new MessageChannel;let ee;ee="function"==typeof J?new J:"default"in J&&"function"==typeof J.default?new J.default:J;const le=new Z(se.port1,{channel:se,client:ee},()=>null);return"object"==typeof ee&&"remoteClient"in ee&&(ee.remoteClient=le),Z.clients.set(le,ee),se.port2}static loadWorker(J){const se=H[J];return se?se():Promise.resolve(null)}close(){this._post({type:G}),this._close()}isBusy(){return this._outJobs.size>0}invoke(J,se,ee){const le=ee&&ee.signal,ne=ee&&ee.transferList;if(!this._port)return Promise.reject(new x.Z("worker:port-closed",`Cannot call invoke('${J}'), port is closed`,{methodName:J,data:se}));const ce=(0,W.jt)();return new Promise((de,me)=>{if((0,U.Hc)(le))return this._processWork(),void me((0,U.zE)());const _e=(0,U.fu)(le,()=>{const ye=this._outJobs.get(ce);ye&&(this._outJobs.delete(ce),this._processWork(),(0,B.hw)(ye.abortHandle),this._post({type:$,jobId:ce}),me((0,U.zE)()))});this._outJobs.set(ce,{resolve:de,reject:me,abortHandle:_e,debugInfo:J}),this._post({type:re,jobId:ce,methodName:J,abortable:null!=le},se,ne)})}on(J,se){const ee=new MessageChannel;function le(ne){se(ne.data)}return this._port.postMessage({type:W.Cs.ON,eventType:J,port:ee.port2},[ee.port2]),ee.port1.addEventListener("message",le),ee.port1.start(),{remove(){ee.port1.postMessage({type:W.Cs.CLOSE}),ee.port1.close(),ee.port1.removeEventListener("message",le)}}}jobAdded(){this._processWork()}openPort(){const J=new MessageChannel;return this._post({type:ae,port:J.port2}),J.port1}_processWork(){if(this._outJobs.size>=2)return;const J=this._getNextJob();if(!J)return;const{methodName:se,data:ee,invokeOptions:le,deferred:ne}=J;this.invoke(se,ee,le).then(ce=>ne.resolve(ce)).catch(ce=>ne.reject(ce))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(J=>{(0,B.hw)(J.abortHandle),J.reject((0,U.zE)(`Worker closing, aborting job calling '${J.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(J){(0,B.pC)(this._schedule)?this._schedule(()=>this._processMessage(J)):this._processMessage(J)}_processMessage(J){const se=(0,W.QM)(J);if(se)switch(se.type){case ue:this._onResponseMessage(se);break;case re:this._invokeQueue.push(se);break;case $:this._onAbortMessage(se);break;case G:this._onCloseMessage();break;case ae:this._onOpenPortMessage(se);break;case oe:this._onOnMessage(se)}}_onAbortMessage(J){const se=this._inJobs,ee=J.jobId,le=se.get(ee);this._invokeQueue.push(J),le&&(le.controller&&le.controller.abort(),se.delete(ee))}_onCloseMessage(){const J=this._client;this._close(),J&&"destroy"in J&&Z.clients.get(this)===J&&J.destroy(),Z.clients.delete(this),J&&J.remoteClient&&(J.remoteClient=null)}_onInvokeMessage(J){const{methodName:se,jobId:ee,data:le,abortable:ne}=J,ce=ne?new AbortController:null,de=this._inJobs;let me,_e=this._client,he=_e[se];try{if(!he&&se&&se.includes(".")){const ye=se.split(".");for(let fe=0;fe<ye.length-1;fe++)_e=_e[ye[fe]],he=_e[ye[fe+1]]}if("function"!=typeof he)throw new TypeError(`${se} is not a function`);me=he.call(_e,le,{client:this,signal:ce?ce.signal:null})}catch(ye){return void this._post({type:ue,jobId:ee,error:(0,W.AB)(ye)})}(0,U.y8)(me)?(de.set(ee,{controller:ce,promise:me}),me.then(ye=>{de.has(ee)&&(de.delete(ee),this._post({type:ue,jobId:ee},ye))},ye=>{de.has(ee)&&(de.delete(ee),(0,U.D_)(ye)||this._post({type:ue,jobId:ee,error:(0,W.AB)(ye||{message:`Error encountered at method ${se}`})}))})):this._post({type:ue,jobId:ee},me)}_onOpenPortMessage(J){new Z(J.port,{client:this._client},()=>null)}_onOnMessage(J){const{port:se}=J,ee=this._client.on(J.eventType,ne=>{se.postMessage(ne)}),le=(0,w.on)(J.port,"message",ne=>{(0,W.QM)(ne).type===W.Cs.CLOSE&&(le.remove(),ee.remove(),se.close())})}_onResponseMessage(J){const{jobId:se,error:ee,data:le}=J,ne=this._outJobs;if(!ne.has(se))return;const ce=ne.get(se);this._processWork(),ne.delete(se),(0,B.hw)(ce.abortHandle),ee?ce.reject(x.Z.fromJSON(JSON.parse(ee))):ce.resolve(le)}_post(J,se,ee){return(0,W.oi)(this._port,J,se,ee)}}Z.kernelInfo={revision:Y.$,version:D.i8,buildDate:Y.r},Z.clients=new Map},42930:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>H});var D=T(85931),x=T(54024),w=T(63290),B=T(62208),U=T(10699),W=T(59289);const Y=w.Z.getLogger("esri.core.workers.WorkerHandle");class H{constructor($,re,ue,ae,oe={}){this._mainMethod=re,this._transferLists=ue,this._listeners=[],this._promise=(0,W.bA)($,{...oe,schedule:ae}).then(ie=>{if(void 0===this._thread){this._thread=ie,this._promise=null,oe.hasInitialize&&this.broadcast({},"initialize");for(const X of this._listeners)this._connectListener(X)}else ie.close()}),this._promise.catch(ie=>Y.error(`Failed to initialize ${$} worker: ${ie}`))}on($,re){const ue={removed:!1,eventName:$,callback:re,threadHandle:null};return this._listeners.push(ue),this._connectListener(ue),(0,x.kB)(()=>{ue.removed=!0,(0,D.Od)(this._listeners,ue),this._thread&&(0,B.pC)(ue.threadHandle)&&ue.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke($,re){return this.invokeMethod(this._mainMethod,$,re)}invokeMethod($,re,ue){if(this._thread){const ae=this._transferLists[$],oe=ae?ae(re):[];return this._thread.invoke($,re,{transferList:oe,signal:ue})}return this._promise?this._promise.then(()=>((0,U.k_)(ue),this.invokeMethod($,re,ue))):Promise.reject(null)}broadcast($,re){return this._thread?Promise.all(this._thread.broadcast(re,$)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast($,re)):Promise.reject()}get promise(){return this._promise}_connectListener($){this._thread&&this._thread.on($.eventName,$.callback).then(re=>{$.removed||($.threadHandle=re)})}}},13126:(qe,xe,T)=>{"use strict";T.d(xe,{AB:()=>W,Cs:()=>x,QM:()=>H,jt:()=>B,oi:()=>Y});var x,re,D=T(8314);(re=x||(x={}))[re.HANDSHAKE=0]="HANDSHAKE",re[re.OPEN=1]="OPEN",re[re.OPENED=2]="OPENED",re[re.RESPONSE=3]="RESPONSE",re[re.INVOKE=4]="INVOKE",re[re.ABORT=5]="ABORT",re[re.CLOSE=6]="CLOSE",re[re.OPEN_PORT=7]="OPEN_PORT",re[re.ON=8]="ON";let w=0;function B(){return w++}function W(re){return re?"string"==typeof re?JSON.stringify({name:"message",message:re}):re.toJSON?JSON.stringify(re):JSON.stringify({name:re.name,message:re.message,details:re.details||{stack:re.stack}}):null}function Y(re,ue,ae,oe){if(ue.type===x.OPEN_PORT)return void re.postMessage(ue,[ue.port]);if(ue.type!==x.INVOKE&&ue.type!==x.RESPONSE)return void re.postMessage(ue);let ie;!function U(re){return re&&"object"==typeof re&&("result"in re||"transferList"in re)}(ae)?(ie=G(oe),ue.data=ae):(ie=G(ae.transferList),ue.data=ae.result),ie?re.postMessage(ue,ie):re.postMessage(ue)}function H(re){if(!re)return null;const ue=re.data;return ue?"string"==typeof ue?JSON.parse(ue):ue:null}function G(re){if(!re||!re.length)return null;if((0,D.Z)("esri-workers-arraybuffer-transfer"))return re;const ue=re.filter(ae=>!function $(re){return re instanceof ArrayBuffer||re&&re.constructor&&"ArrayBuffer"===re.constructor.name}(ae));return ue.length?ue:null}},59289:(qe,xe,T)=>{"use strict";T.d(xe,{j2:()=>Ve,bA:()=>Se});var D=T(15861),x=T(26584),w=T(8314),B=T(10699),U=T(93662),W=T(89951),Y=T(24263),H=T(63290),G=T(62208),$=T(13126),re=T(54346),ue=T(59318),oe=(T(52515),T(21726));const X={};var J=T(79682);class se{constructor(){const Ze=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(lt=>{this[lt]=(...st)=>Ze[lt](...st)})}}class ee{constructor(){this._dispatcher=new se,this._workerPostMessage({type:$.Cs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(Ze){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=Ze,Ze&&this.addEventListener("message",Ze)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(Ze){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=Ze,Ze&&this.addEventListener("messageerror",Ze)}get onerror(){return this._onerrorHandler}set onerror(Ze){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=Ze,Ze&&this.addEventListener("error",Ze)}postMessage(Ze){(0,J.Y)(()=>{this._workerMessageHandler(new MessageEvent("message",{data:Ze}))})}dispatchEvent(Ze){return this._dispatcher.dispatchEvent(Ze)}addEventListener(Ze,lt,st){this._dispatcher.addEventListener(Ze,lt,st)}removeEventListener(Ze,lt,st){this._dispatcher.removeEventListener(Ze,lt,st)}_workerPostMessage(Ze){(0,J.Y)(()=>{this.dispatchEvent(new MessageEvent("message",{data:Ze}))})}_workerMessageHandler(Ze){var lt=this;return(0,D.Z)(function*(){const st=(0,$.QM)(Ze);if(st&&st.type===$.Cs.OPEN){const{modulePath:Mt,jobId:Ft}=st;let kt=yield W.Z.loadWorker(Mt);kt||(kt=yield import(Mt));const wt=W.Z.connect(kt);lt._workerPostMessage({type:$.Cs.OPENED,jobId:Ft,data:wt})}})()}}var le=T(56683),ne=T(38365);const ce=H.Z.getLogger("esri.core.workers"),{HANDSHAKE:de}=$.Cs,me='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let _e,he;const ye="Failed to create Worker. Fallback to execute module in main thread";function De(){return(De=(0,D.Z)(function*(){if(!(0,w.Z)("esri-workers")||((0,w.Z)("mozilla"),0))return ve(new ee);if(!_e&&!he)try{const Ze=me.replace('"{CONFIGURATION}"',`'${ge()}'`);_e=URL.createObjectURL(new Blob([Ze],{type:"text/javascript"}))}catch(Ze){he=Ze||{}}let rt;if(_e)try{rt=new Worker(_e,{name:"esri-worker-"+Te++})}catch{ce.warn(ye,he),rt=new ee}else ce.warn(ye,he),rt=new ee;return ve(rt)})).apply(this,arguments)}function ve(rt){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,D.Z)(function*(rt){return new Promise(Ze=>{function lt(Mt){const Ft=(0,$.QM)(Mt);Ft&&Ft.type===de&&(rt.removeEventListener("message",lt),rt.removeEventListener("error",st),Ze(rt))}function st(Mt){Mt.preventDefault(),rt.removeEventListener("message",lt),rt.removeEventListener("error",st),ce.warn("Failed to create Worker. Fallback to execute module in main thread",Mt),(rt=new ee).addEventListener("message",lt),rt.addEventListener("error",st)}rt.addEventListener("message",lt),rt.addEventListener("error",st)})})).apply(this,arguments)}function ge(){let rt;if(null!=ue.Z.default){const Mt={...ue.Z};delete Mt.default,rt=JSON.parse(JSON.stringify(Mt))}else rt=JSON.parse(JSON.stringify(ue.Z));rt.assetsPath=(0,oe.hF)(rt.assetsPath),rt.request.interceptors=[],rt.log.interceptors=[],rt.locale=(0,le.Kd)(),rt.has={"esri-csp-restrictions":(0,w.Z)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,w.Z)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":(0,w.Z)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":(0,w.Z)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,w.Z)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,w.Z)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,w.Z)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,w.Z)("esri-atomics"),"esri-shared-array-buffer":(0,w.Z)("esri-shared-array-buffer"),"esri-tiles-debug":(0,w.Z)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,w.Z)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,w.Z)("feature-polyline-generalization-factor"),"host-webworker":1},rt.workers.loaderUrl&&(rt.workers.loaderUrl=(0,oe.hF)(rt.workers.loaderUrl)),rt.workers.workerPath=(0,oe.hF)(rt.workers.workerPath?rt.workers.workerPath:(0,re.V)("esri/core/workers/RemoteClient.js")),rt.workers.useDynamicImport=!1;const Ze=ue.Z.workers.loaderConfig,lt=function Q(rt){const Ze={async:rt.async,isDebug:rt.isDebug,locale:rt.locale,baseUrl:rt.baseUrl,has:{...rt.has},map:{...rt.map},packages:rt.packages&&rt.packages.concat()||[],paths:{...rt.paths}};return rt.hasOwnProperty("async")||(Ze.async=!0),rt.hasOwnProperty("isDebug")||(Ze.isDebug=!1),rt.baseUrl||(Ze.baseUrl=X.baseUrl),X.packages?.forEach(lt=>{!function Z(rt,Ze){for(const lt of rt)if(lt.name===Ze.name)return;rt.push(Ze)}(Ze.packages,lt)}),Ze}({baseUrl:Ze?.baseUrl,locale:(0,le.Kd)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...Ze?.has},map:{...Ze?.map},paths:{...Ze?.paths},packages:Ze?.packages||[]});return JSON.stringify({esriConfig:rt,loaderConfig:lt,kernelInfo:{version:Y.i8,buildDate:ne.r,revision:ne.$}})}let Te=0;const Le=H.Z.getLogger("esri.core.workers"),{ABORT:je,INVOKE:ze,OPEN:Ee,OPENED:Ae,RESPONSE:we}=$.Cs;class Be{constructor(Ze,lt){this._outJobs=new Map,this._inJobs=new Map,this.worker=Ze,this.id=lt,Ze.addEventListener("message",this._onMessage.bind(this)),Ze.addEventListener("error",st=>{st.preventDefault(),Le.error(st)})}static create(Ze){return(0,D.Z)(function*(){const lt=yield function fe(){return De.apply(this,arguments)}();return new Be(lt,Ze)})()}terminate(){this.worker.terminate()}open(Ze,lt={}){var st=this;return(0,D.Z)(function*(){const{signal:Mt}=lt,Ft=(0,$.jt)();return new Promise((kt,wt)=>{const zt={resolve:kt,reject:wt,abortHandle:(0,B.$F)(Mt,()=>{st._outJobs.delete(Ft),st._post({type:je,jobId:Ft})})};st._outJobs.set(Ft,zt),st._post({type:Ee,jobId:Ft,modulePath:Ze})})})()}_onMessage(Ze){const lt=(0,$.QM)(Ze);if(lt)switch(lt.type){case Ae:this._onOpenedMessage(lt);break;case we:this._onResponseMessage(lt);break;case je:this._onAbortMessage(lt);break;case ze:this._onInvokeMessage(lt)}}_onAbortMessage(Ze){const lt=this._inJobs,st=Ze.jobId,Mt=lt.get(st);Mt&&(Mt.controller&&Mt.controller.abort(),lt.delete(st))}_onInvokeMessage(Ze){const{methodName:lt,jobId:st,data:Mt,abortable:Ft}=Ze,kt=Ft?new AbortController:null,wt=this._inJobs,zt=Y.Nv[lt];let Zt;try{if("function"!=typeof zt)throw new TypeError(`${lt} is not a function`);Zt=zt.call(null,Mt,{signal:kt?kt.signal:null})}catch(ar){return void this._post({type:we,jobId:st,error:(0,$.AB)(ar)})}(0,B.y8)(Zt)?(wt.set(st,{controller:kt,promise:Zt}),Zt.then(ar=>{wt.has(st)&&(wt.delete(st),this._post({type:we,jobId:st},ar))},ar=>{wt.has(st)&&(wt.delete(st),ar||(ar={message:"Error encountered at method"+lt}),(0,B.D_)(ar)||this._post({type:we,jobId:st,error:(0,$.AB)(ar||{message:`Error encountered at method ${lt}`})}))})):this._post({type:we,jobId:st},Zt)}_onOpenedMessage(Ze){const{jobId:lt,data:st}=Ze,Mt=this._outJobs.get(lt);Mt&&(this._outJobs.delete(lt),(0,G.hw)(Mt.abortHandle),Mt.resolve(st))}_onResponseMessage(Ze){const{jobId:lt,error:st,data:Mt}=Ze,Ft=this._outJobs.get(lt);Ft&&(this._outJobs.delete(lt),(0,G.hw)(Ft.abortHandle),st?Ft.reject(x.Z.fromJSON(JSON.parse(st))):Ft.resolve(Mt))}_post(Ze,lt,st){return(0,$.oi)(this.worker,Ze,lt,st)}}let Pe=(0,w.Z)("esri-workers-debug")?1:(0,w.Z)("host-browser")?navigator.hardwareConcurrency-1:0;Pe||(Pe=(0,w.Z)("safari")&&(0,w.Z)("mac")||(0,w.Z)("trident")?7:2);let Oe=0;const Ke=[];function Ve(){it()}function Ie(rt,Ze){return We.apply(this,arguments)}function We(){return(We=(0,D.Z)(function*(rt,Ze){const lt=new U.Z;return yield lt.open(rt,Ze),lt})).apply(this,arguments)}function Se(rt){return He.apply(this,arguments)}function He(){return(He=(0,D.Z)(function*(rt,Ze={}){if("string"!=typeof rt)throw new x.Z("workers:undefined-module","modulePath is missing");let lt=Ze.strategy||"distributed";if((0,w.Z)("host-webworker")&&!(0,w.Z)("esri-workers")&&(lt="local"),"local"===lt){let st=yield W.Z.loadWorker(rt);st||(st=yield import(rt)),(0,B.k_)(Ze.signal);const Mt=Ze.client||st;return Ie([W.Z.connect(st)],{...Ze,client:Mt})}if(yield it(),(0,B.k_)(Ze.signal),"dedicated"===lt){const st=Oe++%Pe;return Ie([yield Ke[st].open(rt,Ze)],Ze)}if(Ze.maxNumWorkers&&Ze.maxNumWorkers>0){const st=Math.min(Ze.maxNumWorkers,Pe);if(st<Pe){const Mt=new Array(st);for(let Ft=0;Ft<st;++Ft){const kt=Oe++%Pe;Mt[Ft]=Ke[kt].open(rt,Ze)}return Ie(Mt,Ze)}}return Ie(Ke.map(st=>st.open(rt,Ze)),Ze)})).apply(this,arguments)}let et,nt=null;function it(){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,D.Z)(function*(){if(nt)return nt;et=new AbortController;const rt=[];for(let Ze=0;Ze<Pe;Ze++){const lt=Be.create(Ze).then(st=>(Ke[Ze]=st,st));rt.push(lt)}return nt=Promise.all(rt),nt})).apply(this,arguments)}},29132:(qe,xe,T)=>{"use strict";T.d(xe,{qM:()=>ue});var D=T(90912),x=T(2004),w=T(21674),B=T(72854),U=T(49672),W=T(37118),Y=T(55214);T(65234),T(71774),T(91179);const ue={base:w.Z,key:"type",typeMap:{extent:x.Z,multipoint:B.Z,point:U.Z,polyline:Y.Z,polygon:W.Z}};(0,D.N7)(ue)},2004:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>se});var X,D=T(17626),x=T(62208),w=T(77275),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(21674),$=T(49672),re=T(65234),ue=T(33190),ae=T(11519),oe=T(37053),ie=T(46367);function Q(ee,le,ne){return null==le?ne:null==ne?le:ee(le,ne)}let J=X=class extends G.Z{constructor(...ee){super(...ee),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(ee,le,ne,ce,de){return function Z(ee){return ee&&("esri.geometry.SpatialReference"===ee.declaredClass||null!=ee.wkid)}(ee)?{spatialReference:ee,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof ee?(ee.spatialReference=ee.spatialReference??re.Z.WGS84,ee):{xmin:ee,ymin:le,xmax:ne,ymax:ce,spatialReference:de??re.Z.WGS84}}static fromBounds(ee,le){return new X({xmin:ee[0],ymin:ee[1],xmax:ee[2],ymax:ee[3],spatialReference:le})}static fromPoint(ee){return new X({xmin:ee.x,ymin:ee.y,zmin:ee.z,xmax:ee.x,ymax:ee.y,zmax:ee.z,spatialReference:ee.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const ee=new $.Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(ee.z=.5*(this.zmin+this.zmax)),this.hasM&&(ee.m=.5*(this.mmin+this.mmax)),ee}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(ee){const le=this.center;return null!=ee.z&&this.hasZ?this.offset(ee.x-le.x,ee.y-le.y,ee.z-le.z):this.offset(ee.x-le.x,ee.y-le.y)}clone(){const ee=new X;return ee.xmin=this.xmin,ee.ymin=this.ymin,ee.xmax=this.xmax,ee.ymax=this.ymax,ee.spatialReference=this.spatialReference,null!=this.zmin&&(ee.zmin=this.zmin,ee.zmax=this.zmax),null!=this.mmin&&(ee.mmin=this.mmin,ee.mmax=this.mmax),ee}contains(ee){if(!ee)return!1;const le=this.spatialReference,ne=ee.spatialReference;return le&&ne&&!le.equals(ne)&&(0,ie.Q8)(le,ne)&&(ee=le.isWebMercator?(0,ie.$)(ee):(0,ie.Sx)(ee,!0)),"point"===ee.type?(0,ue.aV)(this,ee):"extent"===ee.type&&(0,ue.uP)(this,ee)}equals(ee){if(this===ee)return!0;if((0,x.Wi)(ee))return!1;const le=this.spatialReference,ne=ee.spatialReference;return le&&ne&&!le.equals(ne)&&(0,ie.Q8)(le,ne)&&(ee=le.isWebMercator?(0,ie.$)(ee):(0,ie.Sx)(ee,!0)),this.xmin===ee.xmin&&this.ymin===ee.ymin&&this.zmin===ee.zmin&&this.mmin===ee.mmin&&this.xmax===ee.xmax&&this.ymax===ee.ymax&&this.zmax===ee.zmax&&this.mmax===ee.mmax}expand(ee){const le=.5*(1-ee),ne=this.width*le,ce=this.height*le;if(this.xmin+=ne,this.ymin+=ce,this.xmax-=ne,this.ymax-=ce,this.hasZ){const de=(this.zmax-this.zmin)*le;this.zmin+=de,this.zmax-=de}if(this.hasM){const de=(this.mmax-this.mmin)*le;this.mmin+=de,this.mmax-=de}return this}intersects(ee){if((0,x.Wi)(ee))return!1;"mesh"===ee.type&&(ee=ee.extent);const le=this.spatialReference,ne=ee.spatialReference;return le&&ne&&!le.equals(ne)&&(0,ie.Q8)(le,ne)&&(ee=le.isWebMercator?(0,ie.$)(ee):(0,ie.Sx)(ee,!0)),(0,ae.IY)(ee.type)(this,ee)}normalize(){const ee=this._normalize(!1,!0);return Array.isArray(ee)?ee:[ee]}offset(ee,le,ne){return this.xmin+=ee,this.ymin+=le,this.xmax+=ee,this.ymax+=le,null!=ne&&(this.zmin+=ne,this.zmax+=ne),this}shiftCentralMeridian(){return this._normalize(!0)}union(ee){return this===ee||(this.xmin=Math.min(this.xmin,ee.xmin),this.ymin=Math.min(this.ymin,ee.ymin),this.xmax=Math.max(this.xmax,ee.xmax),this.ymax=Math.max(this.ymax,ee.ymax),(this.hasZ||ee.hasZ)&&(this.zmin=Q(Math.min,this.zmin,ee.zmin),this.zmax=Q(Math.max,this.zmax,ee.zmax)),(this.hasM||ee.hasM)&&(this.mmin=Q(Math.min,this.mmin,ee.mmin),this.mmax=Q(Math.max,this.mmax,ee.mmax))),this}intersection(ee){return this===ee?this:(0,x.Wi)(ee)||!this.intersects(ee)?null:(this.xmin=Math.max(this.xmin,ee.xmin),this.ymin=Math.max(this.ymin,ee.ymin),this.xmax=Math.min(this.xmax,ee.xmax),this.ymax=Math.min(this.ymax,ee.ymax),(this.hasZ||ee.hasZ)&&(this.zmin=Q(Math.max,this.zmin,ee.zmin),this.zmax=Q(Math.min,this.zmax,ee.zmax)),(this.hasM||ee.hasM)&&(this.mmin=Q(Math.max,this.mmin,ee.mmin),this.mmax=Q(Math.min,this.mmax,ee.mmax)),this)}toJSON(ee){return this.write({},ee)}_shiftCM(ee=(0,oe.C5)(this.spatialReference)){if(!ee||!this.spatialReference)return this;const le=this.spatialReference,ne=this._getCM(ee);if(ne){const ce=le.isWebMercator?(0,ie.Sx)(ne):ne;this.xmin-=ne.x,this.xmax-=ne.x,le.isWebMercator||(ce.x=this._normalizeX(ce.x,ee).x),this.spatialReference=new re.Z((0,w.gx)(le.isWGS84?ee.altTemplate:ee.wkTemplate,{Central_Meridian:ce.x}))}return this}_getCM(ee){let le=null;const[ne,ce]=ee.valid,de=this.xmin,me=this.xmax;return de>=ne&&de<=ce&&me>=ne&&me<=ce||(le=this.center),le}_normalize(ee,le,ne){const ce=this.spatialReference;if(!ce)return this;if(!(ne=ne||(0,oe.C5)(ce)))return this;const de=this._getParts(ne).map(he=>he.extent);if(de.length<2)return de[0]||this;if(de.length>2)return ee?this._shiftCM(ne):this.set({xmin:ne.valid[0],xmax:ne.valid[1]});if(ee)return this._shiftCM(ne);if(le)return de;let me=!0,_e=!0;return de.forEach(he=>{he.hasZ||(me=!1),he.hasM||(_e=!1)}),{rings:de.map(he=>{const ye=[[he.xmin,he.ymin],[he.xmin,he.ymax],[he.xmax,he.ymax],[he.xmax,he.ymin],[he.xmin,he.ymin]];if(me){const fe=(he.zmax-he.zmin)/2;for(let De=0;De<ye.length;De++)ye[De].push(fe)}if(_e){const fe=(he.mmax-he.mmin)/2;for(let De=0;De<ye.length;De++)ye[De].push(fe)}return ye}),hasZ:me,hasM:_e,spatialReference:ce}}_getParts(ee){let le=this.cache._parts;if(!le){le=[];const{ymin:de,ymax:me,spatialReference:_e}=this,he=this.width,ye=this.xmin,fe=this.xmax;let De;ee=ee||(0,oe.C5)(_e);const[ve,Ce]=ee.valid;De=this._normalizeX(this.xmin,ee);const ge=De.x,Te=De.frameId;De=this._normalizeX(this.xmax,ee);const Le=De.x,je=De.frameId,ze=ge===Le&&he>0;if(he>2*Ce){const Ee=new X(ye<fe?ge:Le,de,Ce,me,_e),Ae=new X(ve,de,ye<fe?Le:ge,me,_e),we=new X(0,de,Ce,me,_e),Be=new X(ve,de,0,me,_e),Pe=[],Oe=[];Ee.contains(we)&&Pe.push(Te),Ee.contains(Be)&&Oe.push(Te),Ae.contains(we)&&Pe.push(je),Ae.contains(Be)&&Oe.push(je);for(let Ke=Te+1;Ke<je;Ke++)Pe.push(Ke),Oe.push(Ke);le.push({extent:Ee,frameIds:[Te]},{extent:Ae,frameIds:[je]},{extent:we,frameIds:Pe},{extent:Be,frameIds:Oe})}else ge>Le||ze?le.push({extent:new X(ge,de,Ce,me,_e),frameIds:[Te]},{extent:new X(ve,de,Le,me,_e),frameIds:[je]}):le.push({extent:new X(ge,de,Le,me,_e),frameIds:[Te]});this.cache._parts=le}const ne=this.hasZ,ce=this.hasM;if(ne||ce){const de={};ne&&(de.zmin=this.zmin,de.zmax=this.zmax),ce&&(de.mmin=this.mmin,de.mmax=this.mmax);for(let me=0;me<le.length;me++)le[me].extent.set(de)}return le}_normalizeX(ee,le){const[ne,ce]=le.valid,de=2*ce;let me,_e=0;return ee>ce?(me=Math.ceil(Math.abs(ee-ce)/de),ee-=me*de,_e=me):ee<ne&&(me=Math.ceil(Math.abs(ee-ne)/de),ee+=me*de,_e=-me),{x:ee,frameId:_e}}};(0,D._)([(0,B.Cb)({readOnly:!0})],J.prototype,"cache",null),(0,D._)([(0,B.Cb)({readOnly:!0})],J.prototype,"center",null),(0,D._)([(0,B.Cb)({readOnly:!0})],J.prototype,"extent",null),(0,D._)([(0,B.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],J.prototype,"hasM",null),(0,D._)([(0,B.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],J.prototype,"hasZ",null),(0,D._)([(0,B.Cb)({readOnly:!0})],J.prototype,"height",null),(0,D._)([(0,B.Cb)({readOnly:!0})],J.prototype,"width",null),(0,D._)([(0,B.Cb)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],J.prototype,"xmin",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0}})],J.prototype,"ymin",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],J.prototype,"mmin",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],J.prototype,"zmin",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0}})],J.prototype,"xmax",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0}})],J.prototype,"ymax",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],J.prototype,"mmax",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],J.prototype,"zmax",void 0),J=X=(0,D._)([(0,H.j)("esri.geometry.Extent")],J),J.prototype.toJSON.isDefaultToJSON=!0;const se=J},21674:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(68653)),H=T(76898),G=T(65234);let $=class extends x.wq{constructor(...ue){super(...ue),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=G.Z.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(ue,ae){if(ue instanceof G.Z)return ue;if(null!=ue){const oe=new G.Z;return oe.read(ue,ae),oe}return ue}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(ue){return this.cache[ue]}setCacheValue(ue,ae){this.cache[ue]=ae}};(0,D._)([(0,w.Cb)()],$.prototype,"type",void 0),(0,D._)([(0,w.Cb)({readOnly:!0})],$.prototype,"cache",null),(0,D._)([(0,w.Cb)({readOnly:!0})],$.prototype,"extent",null),(0,D._)([(0,w.Cb)({type:Boolean,json:{write:{overridePolicy:ue=>({enabled:ue})}}})],$.prototype,"hasM",void 0),(0,D._)([(0,w.Cb)({type:Boolean,json:{write:{overridePolicy:ue=>({enabled:ue})}}})],$.prototype,"hasZ",void 0),(0,D._)([(0,w.Cb)({type:G.Z,json:{write:!0}})],$.prototype,"spatialReference",void 0),(0,D._)([(0,Y.r)("spatialReference")],$.prototype,"readSpatialReference",null),$=(0,D._)([(0,H.j)("esri.geometry.Geometry")],$);const re=$},79334:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>se});var ae,D=T(17626),x=T(85931),w=T(2076),B=T(86810),U=T(16730),W=T(14889),Y=T(77712),$=(T(8314),T(90912),T(68653)),re=T(76898),ue=T(99433);const oe=(0,w.w)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),ie=oe.jsonValues.slice();(0,x.e$)(ie,"orthometric");const X=(0,w.w)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Z=ae=class extends B.wq{constructor(ee){super(ee),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(ee,le,ne){return oe.write(ee,le,ne)}readHeightModel(ee,le,ne){return oe.read(ee)||(ne&&ne.messages&&ne.messages.push(function J(ee,le){return new W.Z("height-model:unsupported",`Height model of value '${ee}' is not supported`,le)}(ee,{context:ne})),null)}readHeightUnit(ee,le,ne){return X.read(ee)||(ne&&ne.messages&&ne.messages.push(Q(ee,{context:ne})),null)}readHeightUnitService(ee,le,ne){return(0,U.$C)(ee)||X.read(ee)||(ne&&ne.messages&&ne.messages.push(Q(ee,{context:ne})),null)}readVertCRS(ee,le){return le.vertCRS||le.ellipsoid||le.geoid}clone(){return new ae({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(ee){return!!ee&&(this===ee||this.heightModel===ee.heightModel&&this.heightUnit===ee.heightUnit&&this.vertCRS===ee.vertCRS)}static deriveUnitFromSR(ee,le){const ne=(0,U.cM)(le);return new ae({heightModel:ee.heightModel,heightUnit:ne,vertCRS:ee.vertCRS})}write(ee,le){return le={origin:"web-scene",...le},super.write(ee,le)}static fromJSON(ee){if(!ee)return null;const le=new ae;return le.read(ee,{origin:"web-scene"}),le}};function Q(ee,le){return new W.Z("height-unit:unsupported",`Height unit of value '${ee}' is not supported`,le)}(0,D._)([(0,Y.Cb)({type:oe.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:ie,default:"ellipsoidal"}}}})],Z.prototype,"heightModel",void 0),(0,D._)([(0,ue.c)("web-scene","heightModel")],Z.prototype,"writeHeightModel",null),(0,D._)([(0,$.r)(["web-scene","service"],"heightModel")],Z.prototype,"readHeightModel",null),(0,D._)([(0,Y.Cb)({type:X.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:X.jsonValues,write:X.write}}}})],Z.prototype,"heightUnit",void 0),(0,D._)([(0,$.r)("web-scene","heightUnit")],Z.prototype,"readHeightUnit",null),(0,D._)([(0,$.r)("service","heightUnit")],Z.prototype,"readHeightUnitService",null),(0,D._)([(0,Y.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Z.prototype,"vertCRS",void 0),(0,D._)([(0,$.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Z.prototype,"readVertCRS",null),Z=ae=(0,D._)([(0,re.j)("esri.geometry.HeightModelInfo")],Z);const se=Z},72854:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var re,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(76898)),W=T(99433),Y=T(2004),H=T(21674),G=T(49672),$=T(18945);function ue(X){return(Z,Q)=>null==Z?Q:null==Q?Z:X(Z,Q)}let oe=re=class extends H.Z{constructor(...X){super(...X),this.points=[],this.type="multipoint"}normalizeCtorArgs(X,Z){if(!X&&!Z)return null;const Q={};Array.isArray(X)?(Q.points=X,Q.spatialReference=Z):function ae(X){return X&&("esri.geometry.SpatialReference"===X.declaredClass||null!=X.wkid)}(X)?Q.spatialReference=X:(X.points&&(Q.points=X.points),X.spatialReference&&(Q.spatialReference=X.spatialReference),X.hasZ&&(Q.hasZ=X.hasZ),X.hasM&&(Q.hasM=X.hasM));const J=Q.points&&Q.points[0];return J&&(void 0===Q.hasZ&&void 0===Q.hasM?(Q.hasZ=J.length>2,Q.hasM=!1):void 0===Q.hasZ?Q.hasZ=J.length>3:void 0===Q.hasM&&(Q.hasM=J.length>3)),Q}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const X=this.points;if(!X.length)return null;const Z=new Y.Z,Q=this.hasZ,J=this.hasM,se=Q?3:2,ee=X[0],le=ue(Math.min),ne=ue(Math.max);let ce,de,me,_e,[he,ye]=ee,[fe,De]=ee;for(let ve=0,Ce=X.length;ve<Ce;ve++){const ge=X[ve],[Te,Le]=ge;if(he=le(he,Te),ye=le(ye,Le),fe=ne(fe,Te),De=ne(De,Le),Q&&ge.length>2){const je=ge[2];ce=le(ce,je),me=ne(me,je)}if(J&&ge.length>se){const je=ge[se];de=le(de,je),_e=ne(_e,je)}}return Z.xmin=he,Z.ymin=ye,Z.xmax=fe,Z.ymax=De,Z.spatialReference=this.spatialReference,Q?(Z.zmin=ce,Z.zmax=me):(Z.zmin=null,Z.zmax=null),J?(Z.mmin=de,Z.mmax=_e):(Z.mmin=null,Z.mmax=null),Z}writePoints(X,Z){Z.points=(0,x.d9)(this.points)}addPoint(X){return(0,$.l)(this,X),Array.isArray(X)?this.points.push(X):this.points.push(X.toArray()),this.notifyChange("points"),this}clone(){const X={points:(0,x.d9)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(X.hasZ=!0),this.hasM&&(X.hasM=!0),new re(X)}getPoint(X){if(!this._validateInputs(X))return null;const Z=this.points[X],Q={x:Z[0],y:Z[1],spatialReference:this.spatialReference};let J=2;return this.hasZ&&(Q.z=Z[2],J=3),this.hasM&&(Q.m=Z[J]),new G.Z(Q)}removePoint(X){if(!this._validateInputs(X))return null;const Z=new G.Z(this.points.splice(X,1)[0],this.spatialReference);return this.notifyChange("points"),Z}setPoint(X,Z){return this._validateInputs(X)?((0,$.l)(this,Z),Array.isArray(Z)||(Z=Z.toArray()),this.points[X]=Z,this.notifyChange("points"),this):this}toJSON(X){return this.write({},X)}_validateInputs(X){return null!=X&&X>=0&&X<this.points.length}};(0,D._)([(0,w.Cb)({readOnly:!0})],oe.prototype,"cache",null),(0,D._)([(0,w.Cb)()],oe.prototype,"extent",null),(0,D._)([(0,w.Cb)({type:[[Number]],json:{write:{isRequired:!0}}})],oe.prototype,"points",void 0),(0,D._)([(0,W.c)("points")],oe.prototype,"writePoints",null),oe=re=(0,D._)([(0,U.j)("esri.geometry.Multipoint")],oe),oe.prototype.toJSON.isDefaultToJSON=!0;const ie=oe},49672:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>de});var se,D=T(17626),x=T(63290),w=T(62208),B=T(77712),Y=(T(85931),T(8314),T(66656)),H=T(68653),G=T(76898),$=T(99433),re=T(90912),ue=T(21674),ae=T(65234),Q=T(37053),J=T(46367);const ee=[0,0];function le(me){return me&&("esri.geometry.SpatialReference"===me.declaredClass||null!=me.wkid)}const ne=x.Z.getLogger("esri.geometry.Point");let ce=se=class extends ue.Z{constructor(...me){super(...me),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(me,_e){_e._set("x",me._get("x")),_e._set("y",me._get("y")),_e._set("z",me._get("z")),_e._set("m",me._get("m"));const he=me._get("spatialReference");_e._set("spatialReference",Object.isFrozen(he)?he:he.clone())}normalizeCtorArgs(me,_e,he,ye,fe){let De;if(Array.isArray(me))De=me,fe=_e,me=De[0],_e=De[1],he=De[2],ye=De[3];else if(me&&"object"==typeof me){if(De=me,me=null!=De.x?De.x:De.longitude,_e=null!=De.y?De.y:De.latitude,he=De.z,ye=De.m,(fe=De.spatialReference)&&"esri.geometry.SpatialReference"!==fe.declaredClass&&(fe=new ae.Z(fe)),null!=De.longitude||null!=De.latitude)if(null==De.longitude)ne.warn(".longitude=","Latitude was defined without longitude");else if(null==De.latitude)ne.warn(".latitude=","Longitude was defined without latitude");else if(!De.declaredClass&&fe&&fe.isWebMercator){const Ce=(0,J.hG)(De.longitude,De.latitude,ee);me=Ce[0],_e=Ce[1]}}else le(he)?(fe=he,he=null):le(ye)&&(fe=ye,ye=null);const ve={x:me,y:_e};return null==ve.x&&null!=ve.y?ne.warn(".y=","Y coordinate was defined without an X coordinate"):null==ve.y&&null!=ve.x&&ne.warn(".x=","X coordinate was defined without a Y coordinate"),null!=fe&&(ve.spatialReference=fe),null!=he&&(ve.z=he),null!=ye&&(ve.m=ye),ve}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(me){me!==(void 0!==this._get("m"))&&(this._set("m",me?0:void 0),this._set("hasM",me))}get hasZ(){return void 0!==this.z}set hasZ(me){me!==(void 0!==this._get("z"))&&(this._set("z",me?0:void 0),this._set("hasZ",me))}get latitude(){const{spatialReference:me,x:_e,y:he}=this;if(me){if(me.isWebMercator)return(0,J.R6)(_e,he,ee)[1];if(me.isGeographic)return he}return null}set latitude(me){const{spatialReference:_e,x:he}=this;_e&&(_e.isWebMercator?this._set("y",(0,J.hG)(he,me,ee)[1]):_e.isGeographic&&this._set("y",me),this._set("latitude",me))}get longitude(){const{x:me,y:_e,spatialReference:he}=this;if(he){if(he.isWebMercator)return(0,J.R6)(me,_e,ee)[0];if(he.isGeographic)return me}return null}set longitude(me){const{y:_e,spatialReference:he}=this;he&&(he.isWebMercator?this._set("x",(0,J.hG)(me,_e,ee)[0]):he.isGeographic&&this._set("x",me),this._set("longitude",me))}writeX(me,_e,he){_e[he]=isNaN(me)?"NaN":me}readX(me){return"string"==typeof me?NaN:me}clone(){const me=new se;return me.x=this.x,me.y=this.y,me.z=this.z,me.m=this.m,me.spatialReference=this.spatialReference,me}copy(me){return se.copy(me,this),this}equals(me){if((0,w.Wi)(me))return!1;const{x:_e,y:he,z:ye,m:fe,spatialReference:De}=this,{z:ve,m:Ce}=me;let{x:ge,y:Te,spatialReference:Le}=me;if(!De.equals(Le))if(De.isWebMercator&&Le.isWGS84)[ge,Te]=(0,J.hG)(ge,Te),Le=De;else{if(!De.isWGS84||!Le.isWebMercator)return!1;[ge,Te]=(0,J.R6)(ge,Te),Le=De}return _e===ge&&he===Te&&ye===ve&&fe===Ce&&De.wkid===Le.wkid}offset(me,_e,he){return function oe(me,_e,he,ye){return me.x=me.x+_e,me.y=me.y+he,null!=ye&&(me.z=(me.z??0)+ye),me}(this,me,_e,he)}normalize(){if(!this.spatialReference)return this;const me=(0,Q.C5)(this.spatialReference);if(!me)return this;let _e=this.x;const[he,ye]=me.valid,fe=2*ye;let De;return _e>ye?(De=Math.ceil(Math.abs(_e-ye)/fe),_e-=De*fe):_e<he&&(De=Math.ceil(Math.abs(_e-he)/fe),_e+=De*fe),this._set("x",_e),this}distance(me){return function X(me,_e){const he=me.x-_e.x,ye=me.y-_e.y,fe=me.hasZ&&_e.hasZ?me.z-_e.z:0;return Math.sqrt(he*he+ye*ye+fe*fe)}(this,me)}toArray(){const me=this.hasZ,_e=this.hasM;return me&&_e?[this.x,this.y,this.z,this.m]:me?[this.x,this.y,this.z]:_e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(me){return this.write({},me)}};(0,D._)([(0,B.Cb)({readOnly:!0})],ce.prototype,"cache",null),(0,D._)([(0,B.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ce.prototype,"hasM",null),(0,D._)([(0,B.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ce.prototype,"hasZ",null),(0,D._)([(0,B.Cb)({type:Number})],ce.prototype,"latitude",null),(0,D._)([(0,B.Cb)({type:Number})],ce.prototype,"longitude",null),(0,D._)([(0,B.Cb)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,Y.p)(me=>isNaN(me)?me:(0,re.q9)(me))],ce.prototype,"x",void 0),(0,D._)([(0,$.c)("x")],ce.prototype,"writeX",null),(0,D._)([(0,H.r)("x")],ce.prototype,"readX",null),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0}})],ce.prototype,"y",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ce.prototype,"z",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ce.prototype,"m",void 0),ce=se=(0,D._)([(0,G.j)("esri.geometry.Point")],ce),ce.prototype.toJSON.isDefaultToJSON=!0;const de=ce},37118:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ne});var se,D=T(17626),x=T(85931),w=T(58817),B=T(62208),U=T(77712),Y=(T(90912),T(76898)),H=T(99433),G=T(2004),$=T(21674),re=T(49672),ue=T(65234),ae=T(27105),oe=T(33190),ie=T(25748),X=T(15176),Z=T(11519),Q=T(46367),J=T(18945);function ee(ce){return!Array.isArray(ce[0])}let le=se=class extends $.Z{constructor(...ce){super(...ce),this.rings=[],this.type="polygon"}static fromExtent(ce){const de=ce.clone().normalize(),me=ce.spatialReference;let _e=!1,he=!1;for(const fe of de)fe.hasZ&&(_e=!0),fe.hasM&&(he=!0);const ye={rings:de.map(fe=>{const De=[[fe.xmin,fe.ymin],[fe.xmin,fe.ymax],[fe.xmax,fe.ymax],[fe.xmax,fe.ymin],[fe.xmin,fe.ymin]];if(_e&&fe.hasZ){const ve=fe.zmin+.5*(fe.zmax-fe.zmin);for(let Ce=0;Ce<De.length;Ce++)De[Ce].push(ve)}if(he&&fe.hasM){const ve=fe.mmin+.5*(fe.mmax-fe.mmin);for(let Ce=0;Ce<De.length;Ce++)De[Ce].push(ve)}return De}),spatialReference:me};return _e&&(ye.hasZ=!0),he&&(ye.hasM=!0),new se(ye)}normalizeCtorArgs(ce,de){let me,_e,he=null,ye=null;return ce&&!Array.isArray(ce)?(he=ce.rings?ce.rings:null,de||(ce.spatialReference?de=ce.spatialReference:ce.rings||(de=ce)),me=ce.hasZ,_e=ce.hasM):he=ce,he=he||[],he.length&&he[0]&&null!=he[0][0]&&"number"==typeof he[0][0]&&(he=[he]),ye=he[0]&&he[0][0],ye&&(void 0===me&&void 0===_e?(me=ye.length>2,_e=ye.length>3):void 0===me?me=_e?ye.length>3:ye.length>2:void 0===_e&&(_e=me?ye.length>3:ye.length>2)),{rings:he,spatialReference:de=de||ue.Z.WGS84,hasZ:me,hasM:_e}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const ce=(0,ae.tO)(this);if(!ce||isNaN(ce[0])||isNaN(ce[1])||this.hasZ&&isNaN(ce[2]))return null;const de=new re.Z;return de.x=ce[0],de.y=ce[1],de.spatialReference=this.spatialReference,this.hasZ&&(de.z=ce[2]),de}get extent(){const{spatialReference:ce}=this,de=(0,X._w)(this);if(!de)return null;const me=new G.Z(de);return me.spatialReference=ce,me}get isSelfIntersecting(){return(0,Z.Ff)(this.rings)}writeRings(ce,de){de.rings=(0,w.d9)(this.rings)}addRing(ce){if(!ce)return;const de=this.rings,me=de.length;if(ee(ce)){const _e=[];for(let he=0,ye=ce.length;he<ye;he++)_e[he]=ce[he].toArray();de[me]=_e}else de[me]=ce.concat();return this.notifyChange("rings"),this}clone(){const ce=new se;return ce.spatialReference=this.spatialReference,ce.rings=(0,w.d9)(this.rings),ce.hasZ=this.hasZ,ce.hasM=this.hasM,ce}equals(ce){if(this===ce)return!0;if((0,B.Wi)(ce))return!1;const de=this.spatialReference,me=ce.spatialReference;if((0,B.pC)(de)!==(0,B.pC)(me)||(0,B.pC)(de)&&(0,B.pC)(me)&&!de.equals(me)||this.rings.length!==ce.rings.length)return!1;const _e=([he,ye,fe,De],[ve,Ce,ge,Te])=>he===ve&&ye===Ce&&(null==fe&&null==ge||fe===ge)&&(null==De&&null==Te||De===Te);for(let he=0;he<this.rings.length;he++)if(!(0,x.fS)(this.rings[he],ce.rings[he],_e))return!1;return!0}contains(ce){if(!ce)return!1;const de=(0,Q.iV)(ce,this.spatialReference);return(0,oe.CI)(this,(0,B.pC)(de)?de:ce)}isClockwise(ce){let de;return de=ee(ce)?ce.map(me=>this.hasZ?this.hasM?[me.x,me.y,me.z,me.m]:[me.x,me.y,me.z]:[me.x,me.y]):ce,(0,ie.bu)(de,this.hasM,this.hasZ)}getPoint(ce,de){if(!this._validateInputs(ce,de))return null;const me=this.rings[ce][de],_e=this.hasZ,he=this.hasM;return _e&&!he?new re.Z(me[0],me[1],me[2],void 0,this.spatialReference):he&&!_e?new re.Z(me[0],me[1],void 0,me[2],this.spatialReference):_e&&he?new re.Z(me[0],me[1],me[2],me[3],this.spatialReference):new re.Z(me[0],me[1],this.spatialReference)}insertPoint(ce,de,me){return this._validateInputs(ce,de,!0)?((0,J.l)(this,me),Array.isArray(me)||(me=me.toArray()),this.rings[ce].splice(de,0,me),this.notifyChange("rings"),this):this}removePoint(ce,de){if(!this._validateInputs(ce,de))return null;const me=new re.Z(this.rings[ce].splice(de,1)[0],this.spatialReference);return this.notifyChange("rings"),me}removeRing(ce){if(!this._validateInputs(ce,null))return null;const de=this.rings.splice(ce,1)[0],me=this.spatialReference,_e=de.map(he=>new re.Z(he,me));return this.notifyChange("rings"),_e}setPoint(ce,de,me){return this._validateInputs(ce,de)?((0,J.l)(this,me),Array.isArray(me)||(me=me.toArray()),this.rings[ce][de]=me,this.notifyChange("rings"),this):this}_validateInputs(ce,de,me=!1){if(null==ce||ce<0||ce>=this.rings.length)return!1;if(null!=de){const _e=this.rings[ce];if(me&&(de<0||de>_e.length)||!me&&(de<0||de>=_e.length))return!1}return!0}toJSON(ce){return this.write({},ce)}};(0,D._)([(0,U.Cb)({readOnly:!0})],le.prototype,"cache",null),(0,D._)([(0,U.Cb)({readOnly:!0})],le.prototype,"centroid",null),(0,D._)([(0,U.Cb)({readOnly:!0})],le.prototype,"extent",null),(0,D._)([(0,U.Cb)({readOnly:!0})],le.prototype,"isSelfIntersecting",null),(0,D._)([(0,U.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],le.prototype,"rings",void 0),(0,D._)([(0,H.c)("rings")],le.prototype,"writeRings",null),le=se=(0,D._)([(0,Y.j)("esri.geometry.Polygon")],le),le.prototype.toJSON.isDefaultToJSON=!0;const ne=le},55214:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ae,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(76898)),W=T(99433),Y=T(2004),H=T(21674),G=T(49672),$=T(65234),re=T(15176),ue=T(18945);let ie=ae=class extends H.Z{constructor(...Z){super(...Z),this.paths=[],this.type="polyline"}normalizeCtorArgs(Z,Q){let J,se,ee=null,le=null;return Z&&!Array.isArray(Z)?(ee=Z.paths?Z.paths:null,Q||(Z.spatialReference?Q=Z.spatialReference:Z.paths||(Q=Z)),J=Z.hasZ,se=Z.hasM):ee=Z,ee=ee||[],ee.length&&ee[0]&&null!=ee[0][0]&&"number"==typeof ee[0][0]&&(ee=[ee]),le=ee[0]&&ee[0][0],le&&(void 0===J&&void 0===se?(J=le.length>2,se=!1):void 0===J?J=!se&&le.length>3:void 0===se&&(se=!J&&le.length>3)),{paths:ee,spatialReference:Q=Q||$.Z.WGS84,hasZ:J,hasM:se}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:Z}=this,Q=(0,re.Wn)(this);if(!Q)return null;const J=new Y.Z(Q);return J.spatialReference=Z,J}writePaths(Z,Q){Q.paths=(0,x.d9)(this.paths)}addPath(Z){if(!Z)return;const Q=this.paths,J=Q.length;if(function oe(Z){return!Array.isArray(Z[0])}(Z)){const se=[];for(let ee=0,le=Z.length;ee<le;ee++)se[ee]=Z[ee].toArray();Q[J]=se}else Q[J]=Z.concat();return this.notifyChange("paths"),this}clone(){const Z=new ae;return Z.spatialReference=this.spatialReference,Z.paths=(0,x.d9)(this.paths),Z.hasZ=this.hasZ,Z.hasM=this.hasM,Z}getPoint(Z,Q){if(!this._validateInputs(Z,Q))return null;const J=this.paths[Z][Q],se=this.hasZ,ee=this.hasM;return se&&!ee?new G.Z(J[0],J[1],J[2],void 0,this.spatialReference):ee&&!se?new G.Z(J[0],J[1],void 0,J[2],this.spatialReference):se&&ee?new G.Z(J[0],J[1],J[2],J[3],this.spatialReference):new G.Z(J[0],J[1],this.spatialReference)}insertPoint(Z,Q,J){return this._validateInputs(Z,Q,!0)?((0,ue.l)(this,J),Array.isArray(J)||(J=J.toArray()),this.paths[Z].splice(Q,0,J),this.notifyChange("paths"),this):this}removePath(Z){if(!this._validateInputs(Z,null))return null;const Q=this.paths.splice(Z,1)[0],J=this.spatialReference,se=Q.map(ee=>new G.Z(ee,J));return this.notifyChange("paths"),se}removePoint(Z,Q){if(!this._validateInputs(Z,Q))return null;const J=new G.Z(this.paths[Z].splice(Q,1)[0],this.spatialReference);return this.notifyChange("paths"),J}setPoint(Z,Q,J){return this._validateInputs(Z,Q)?((0,ue.l)(this,J),Array.isArray(J)||(J=J.toArray()),this.paths[Z][Q]=J,this.notifyChange("paths"),this):this}_validateInputs(Z,Q,J=!1){if(null==Z||Z<0||Z>=this.paths.length)return!1;if(null!=Q){const se=this.paths[Z];if(J&&(Q<0||Q>se.length)||!J&&(Q<0||Q>=se.length))return!1}return!0}toJSON(Z){return this.write({},Z)}};(0,D._)([(0,w.Cb)({readOnly:!0})],ie.prototype,"cache",null),(0,D._)([(0,w.Cb)({readOnly:!0})],ie.prototype,"extent",null),(0,D._)([(0,w.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],ie.prototype,"paths",void 0),(0,D._)([(0,W.c)("paths")],ie.prototype,"writePaths",null),ie=ae=(0,D._)([(0,U.j)("esri.geometry.Polyline")],ie),ie.prototype.toJSON.isDefaultToJSON=!0;const X=ie},65234:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(86810),w=T(58817),B=T(90912),U=T(77712),W=T(76898),Y=T(99433),H=T(37053);let $=G=class extends x.wq{constructor(ue){super(ue),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(ue){if(!ue)return null;if(ue.wkid){if(102100===ue.wkid)return G.WebMercator;if(4326===ue.wkid)return G.WGS84}const ae=new G;return ae.read(ue),ae}normalizeCtorArgs(ue){return ue&&"object"==typeof ue?ue:{["string"==typeof ue?"wkt":"wkid"]:ue}}get isWGS84(){return(0,H.oR)(this)}get isWebMercator(){return(0,H.sS)(this)}get isGeographic(){return(0,H.sT)(this)}get isWrappable(){return(0,H.MP)(this)}writeWkt(ue,ae){this.wkid||(ae.wkt=ue)}clone(){if(this===G.WGS84)return G.WGS84;if(this===G.WebMercator)return G.WebMercator;const ue=new G;return null!=this.wkid?(ue.wkid=this.wkid,null!=this.latestWkid&&(ue.latestWkid=this.latestWkid),null!=this.vcsWkid&&(ue.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(ue.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(ue.wkt=this.wkt),this.imageCoordinateSystem&&(ue.imageCoordinateSystem=(0,w.d9)(this.imageCoordinateSystem)),ue}equals(ue){if(null==ue)return!1;if(this.imageCoordinateSystem||ue.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==ue.imageCoordinateSystem)return!1;const{id:ae,referenceServiceName:oe}=ue.imageCoordinateSystem,{geodataXform:ie}=ue.imageCoordinateSystem,X=this.imageCoordinateSystem;return null==ae||ie?JSON.stringify(X)===JSON.stringify(ue.imageCoordinateSystem):oe?X.id===ae&&X.referenceServiceName===oe:X.id===ae}return(0,H.fS)(this,ue)}toJSON(ue){return this.write(void 0,ue)}};$.GCS_NAD_1927=null,$.WGS84=null,$.WebMercator=null,$.PlateCarree=null,(0,D._)([(0,U.Cb)({readOnly:!0})],$.prototype,"isWGS84",null),(0,D._)([(0,U.Cb)({readOnly:!0})],$.prototype,"isWebMercator",null),(0,D._)([(0,U.Cb)({readOnly:!0})],$.prototype,"isGeographic",null),(0,D._)([(0,U.Cb)({readOnly:!0})],$.prototype,"isWrappable",null),(0,D._)([(0,U.Cb)({type:B.z8,json:{write:!0}})],$.prototype,"latestWkid",void 0),(0,D._)([(0,U.Cb)({type:B.z8,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],$.prototype,"wkid",void 0),(0,D._)([(0,U.Cb)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],$.prototype,"wkt",void 0),(0,D._)([(0,Y.c)("wkt"),(0,Y.c)("web-scene","wkt")],$.prototype,"writeWkt",null),(0,D._)([(0,U.Cb)({type:B.z8,json:{write:!0}})],$.prototype,"vcsWkid",void 0),(0,D._)([(0,U.Cb)({type:B.z8,json:{write:!0}})],$.prototype,"latestVcsWkid",void 0),(0,D._)([(0,U.Cb)()],$.prototype,"imageCoordinateSystem",void 0),$=G=(0,D._)([(0,W.j)("esri.geometry.SpatialReference")],$),$.prototype.toJSON.isDefaultToJSON=!0,$.GCS_NAD_1927=new $({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),$.WGS84=new $(H.Zn),$.WebMercator=new $(H.R_),$.PlateCarree=new $(H.WR),Object.freeze&&(Object.freeze($.GCS_NAD_1927),Object.freeze($.WGS84),Object.freeze($.WebMercator));const re=$},55915:(qe,xe,T)=>{"use strict";T.d(xe,{Bm:()=>$t,CM:()=>Pr,KC:()=>Ft,MT:()=>Mt,PR:()=>Cr,Qr:()=>kr,Rg:()=>kt,SH:()=>wt,UY:()=>zt,Up:()=>Pe,Wt:()=>Xe,X4:()=>Ut,YD:()=>Ve,dH:()=>pt,dz:()=>Te,fA:()=>st,fM:()=>Be,fi:()=>Ne,gH:()=>ns,iQ:()=>Oe,iV:()=>Ce,jF:()=>es,kR:()=>De,ke:()=>Zt,nF:()=>Ie,oj:()=>ge,rS:()=>Le,st:()=>os,yH:()=>_r,zD:()=>ve,zP:()=>hs});var D=T(15861),x=T(26584),w=T(21286),B=T(62208),U=T(10699),W=T(16730),Y=T(36082),H=T(48902),G=T(28347),$=T(84161),re=T(28093),ue=T(2004),ae=T(72854),oe=T(44956),ie=T(49672),X=T(37118),Z=T(55214),Q=T(12080),J=T(65401),se=T(94425),ee=T(37299),le=T(98346),ne=T(37053),ce=T(6178),de=T(33696);let me=null,_e=null,he=null,ye={};const fe=new H.s;function De(){return!!me&&(0,oe.i)()}function ve(dr){return(0,B.Wi)(he)&&(he=Promise.all([(0,oe.l)(),T.e(4918).then(T.bind(T,4918)).then(Dr=>Dr.g),T.e(7777).then(T.bind(T,77777))])),he.then(([,Dr,{hydratedAdapter:er}])=>{(0,U.k_)(dr),_e=er,me=Dr.default,me._enableProjection(oe.p),fe.notify()})}function Ce(dr,Dr,er=null,Ir=null){return Array.isArray(dr)?0===dr.length?[]:ge(_e,dr,dr[0].spatialReference,Dr,er,Ir):ge(_e,[dr],dr.spatialReference,Dr,er,Ir)[0]}function ge(dr,Dr,er,Ir,Ps=null,Ws=null){if((0,B.Wi)(er)||(0,B.Wi)(Ir))return Dr;if(Pe(er,Ir,Ps))return Dr.map(yi=>(0,B.Wg)(Ne(yi,er,Ir)));if((0,B.Wi)(Ps)){const yi=le.Z.cacheKey(er,Ir);void 0!==ye[yi]?Ps=ye[yi]:(Ps=Le(er,Ir,null),(0,B.Wi)(Ps)&&(Ps=new le.Z),ye[yi]=Ps)}if((0,B.Wi)(me))throw new ze;return(0,B.pC)(Ws)?me._project(dr,Dr,er,Ir,Ps,Ws):me._project(dr,Dr,er,Ir,Ps)}function Te(dr,Dr){return(0,B.Wi)(dr)?{pending:null,geometry:null}:(0,ne.fS)(dr.spatialReference,Dr)?{pending:null,geometry:dr}:(0,ne.JY)(dr.spatialReference)&&(0,ne.JY)(Dr)?Pe(dr.spatialReference,Dr)||De()?{pending:null,geometry:Be(dr,Dr)}:((0,Y.it)(fe),{pending:ve(),geometry:null}):{pending:null,geometry:null}}function Le(dr,Dr,er=null){if((0,B.Wi)(me))throw new ze;if((0,B.Wi)(dr)||(0,B.Wi)(Dr))return null;const Ir=me._getTransformation(_e,dr,Dr,er,er?.spatialReference);return null!==Ir?le.Z.fromGE(Ir):null}class ze extends x.Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Ee,dr;function Be(dr,Dr){try{const er=Ce(dr,Dr);if(null==er)return null;"xmin"in dr&&"xmin"in er&&(er.zmin=dr.zmin,er.zmax=dr.zmax);const Ir=(0,de.k)(er.type,dr.spatialReference,Dr);return(0,B.pC)(Ir)&&Ir(er),er}catch(er){if(!(er instanceof ze))throw er;return null}}function Pe(dr,Dr,er){return!er&&(!!(0,ne.fS)(dr,Dr)||(0,ne.JY)(dr)&&(0,ne.JY)(Dr)&&!!gt(dr,Dr,_i))}function Oe(dr,Dr,er,Ir){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,D.Z)(function*(dr,Dr,er,Ir){if(De())return(0,U.Yn)(Ir);if(Array.isArray(dr)){for(const{source:Ps,dest:Ws,geographicTransformation:yi}of dr)if(!Pe(Ps,Ws,yi))return ve(Ir)}else if(!Pe(dr,Dr,er))return ve(Ir);return(0,U.Yn)(Ir)}),Ke.apply(this,arguments)}function Ve(dr,Dr){switch(gt(dr,Dr,_i)){case vr:return"copy3";case Zi:return"wgs84ToSphericalECEF";case lr:return"wgs84ToWebMercator";case Tt:return"wgs84ToPlateCarree";case Nr:return"wgs84ToWGS84ECEF";case Kr:return"webMercatorToWGS84";case Gr:return"webMercatorToSphericalECEF";case Jr:return"webMercatorToWGS84ECEF";case Rr:return"webMercatorToPlateCarree";case Ai:return"wgs84ECEFToWGS84";case ds:return"wgs84ECEFToSphericalECEF";case Tn:return"wgs84ECEFToWebMercator";case zs:return"sphericalECEFToWGS84";case As:return"sphericalECEFToWebMercator";case ps:return"sphericalMarsPCPFToMars2000";case as:return"sphericalMoonPCPFToMoon2000";case Ys:return"sphericalECEFToWGS84ECEF";case Rs:return"mars2000ToSphericalPCPF";case Yr:return"moon2000ToSphericalPCPF";default:return null}}function Ne(dr,Dr,er){return dr?"x"in dr?We(dr,Dr,new ie.Z,er,0):"xmin"in dr?function lt(dr,Dr,er,Ir,Ps){const{xmin:Ws,ymin:yi,xmax:Gs,ymax:Mi,hasZ:Xi,hasM:Hs}=dr;return kt(Ws,yi,Xi?dr.zmin:Ps,Dr,ii,Ir)?(er.xmin=ii[0],er.ymin=ii[1],Xi&&(er.zmin=ii[2]),kt(Gs,Mi,Xi?dr.zmax:Ps,Dr,ii,Ir)?(er.xmax=ii[0],er.ymax=ii[1],Xi&&(er.zmax=ii[2]),Hs&&(er.mmin=dr.mmin,er.mmax=dr.mmax),er.spatialReference=Ir,er):null):null}(dr,Dr,new ue.Z,er,0):"rings"in dr?rt(dr,Dr,new X.Z,er,0):"paths"in dr?function et(dr,Dr,er,Ir,Ps){const{paths:Ws,hasZ:yi,hasM:Gs}=dr,Mi=[];return ss(Ws,yi,Gs,Dr,Mi,Ir,Ps)?(er.paths=Mi,er.spatialReference=Ir,er.hasZ=yi,er.hasM=Gs,er):null}(dr,Dr,new Z.Z,er,0):"points"in dr?function He(dr,Dr,er,Ir,Ps){const{points:Ws,hasZ:yi,hasM:Gs}=dr,Mi=[],Xi=Ws.length,Hs=[];for(const ki of Ws)Hs.push(ki[0],ki[1],yi?ki[2]:Ps);if(!Pr(Hs,Dr,0,Hs,Ir,0,Xi))return null;for(let ki=0;ki<Xi;++ki){const sn=3*ki,Uo=Hs[sn],Vn=Hs[sn+1];Mi.push(yi&&Gs?[Uo,Vn,Hs[sn+2],Ws[ki][3]]:yi?[Uo,Vn,Hs[sn+2]]:Gs?[Uo,Vn,Ws[ki][2]]:[Uo,Vn])}return er.points=Mi,er.spatialReference=Ir,er.hasZ=yi,er.hasM=Gs,er}(dr,Dr,new ae.Z,er,0):null:null}function Ie(dr,Dr,er=Dr.spatialReference,Ir=0){return!(0,B.Wi)(er)&&(0,B.pC)(We(dr,dr.spatialReference,Dr,er,Ir))}function We(dr,Dr,er,Ir,Ps){ii[0]=dr.x,ii[1]=dr.y;const Ws=dr.z;return ii[2]=void 0!==Ws?Ws:Ps,Pr(ii,Dr,0,ii,Ir,0,1)?(er.x=ii[0],er.y=ii[1],er.spatialReference=Ir,void 0===Ws?(er.z=void 0,er.hasZ=!1):(er.z=ii[2],er.hasZ=!0),void 0===dr.m?(er.m=void 0,er.hasM=!1):(er.m=dr.m,er.hasM=!0),er):null}function Xe(dr,Dr,er=Dr.spatialReference,Ir=0){return(0,B.pC)(er)&&(0,B.pC)(rt(dr,dr.spatialReference,Dr,er,Ir))}function rt(dr,Dr,er,Ir,Ps){const{rings:Ws,hasZ:yi,hasM:Gs}=dr,Mi=[];return ss(Ws,yi,Gs,Dr,Mi,Ir,Ps)?(er.rings=Mi,er.spatialReference=Ir,er.hasZ=yi,er.hasM=Gs,er):null}function st(dr,Dr,er){if((0,B.Wi)(Dr)||(0,B.Wi)(er))return null;const Ir=new ie.Z({spatialReference:er});return Pr(dr,Dr,0,ii,er,0,1)?(Ir.x=ii[0],Ir.y=ii[1],Ir.z=ii[2],Ir):null}function Mt(dr,Dr,er){return Pr(dr,Dr,0,ii,er.spatialReference,0,1)?(er.x=ii[0],er.y=ii[1],er.z=ii[2],er):null}function Ft(dr,Dr,er,Ir=0){ii[0]=dr.x,ii[1]=dr.y;const Ps=dr.z;return ii[2]=void 0!==Ps?Ps:Ir,Pr(ii,dr.spatialReference,0,Dr,er,0,1)}function kt(dr,Dr,er,Ir,Ps,Ws){return Oi[0]=dr,Oi[1]=Dr,Oi[2]=er,Pr(Oi,Ir,0,Ps,Ws,0,1)}function wt(dr,Dr,er,Ir){return!((0,B.Wi)(Dr)||(0,B.Wi)(Ir)||dr.length<2)&&(2===dr.length&&(Oi[0]=dr[0],Oi[1]=dr[1],Oi[2]=0,dr=Oi),Pr(dr,Dr,0,er,Ir,0,1))}function zt(dr,Dr){ii[0]=dr.x,ii[1]=dr.y;const er=dr.z;return ii[2]=void 0!==er?er:0,Zt(ii,dr.spatialReference,Dr)}function Zt(dr,Dr,er){return function ar(dr,Dr,er){if((0,B.Wi)(Dr))return!1;const Ir=gr(Dr,bs),Ps=Ci[Ir][Ee.WGS84_COMPARABLE_LON_LAT];return!(0,B.Wi)(Ps)&&(Ps(dr,0,Oi,0),er!==Oi&&(er[0]=Oi[0],er[1]=Oi[1],er.length>2&&(er[2]=Oi[2])),!0)}(dr,Dr,er)}function Pr(dr,Dr,er,Ir,Ps,Ws,yi=1){const Gs=gt(Dr,Ps,_i);if((0,B.Wi)(Gs))return!1;if(Gs===vr){if(dr===Ir&&er===Ws)return!0;const Xi=er+3*yi;for(let Hs=er,ki=Ws;Hs<Xi;Hs++,ki++)Ir[ki]=dr[Hs];return!0}const Mi=er+3*yi;for(let Xi=er,Hs=Ws;Xi<Mi;Xi+=3,Hs+=3)Gs(dr,Xi,Ir,Hs);return!0}function kr(dr,Dr,er,Ir,Ps){(0,$.c)(ii,dr),(0,$.a)(yn,dr,Dr),wt(ii,er,ii,Ps),wt(yn,er,yn,Ps),(0,$.b)(Ir,yn,ii),(0,$.n)(Ir,Ir)}function ss(dr,Dr,er,Ir,Ps,Ws,yi=0){const Gs=new Array;for(const Xi of dr)for(const Hs of Xi)Gs.push(Hs[0],Hs[1],Dr?Hs[2]:yi);if(!Pr(Gs,Ir,0,Gs,Ws,0,Gs.length/3))return!1;let Mi=0;Ps.length=0;for(const Xi of dr){const Hs=new Array;for(const ki of Xi)Dr&&er?Hs.push([Gs[Mi++],Gs[Mi++],Gs[Mi++],ki[3]]):Dr?Hs.push([Gs[Mi++],Gs[Mi++],Gs[Mi++]]):er?(Hs.push([Gs[Mi++],Gs[Mi++],ki[2]]),Mi++):(Hs.push([Gs[Mi++],Gs[Mi++]]),Mi++);Ps.push(Hs)}return!0}function os(dr,Dr,er,Ir){if((0,B.Wi)(Dr)||(0,B.Wi)(Ir))return!1;const Ps=Wr(Dr,Ir,gi);if(Ps.projector===vr)return er[0]=dr[0],er[1]=dr[1],er[2]=dr[2],er[3]=dr[3],!0;if((0,B.Wi)(Ps.projector))return!1;const{source:Ws,dest:yi}=Ps;if(yi.spatialReferenceId===Ee.WEB_MERCATOR){const Gs=Ci[Ws.spatialReferenceId][Ee.WGS84];return!(0,B.Wi)(Gs)&&(Gs(dr,0,zi,0),lr(zi,0,er,0),er[3]=Hr(zi[1],dr[2],dr[3],se.sv.radius),!0)}if(Ws.spatialReferenceId!==Ee.WGS84&&Ws.spatialReferenceId!==Ee.CGCS2000||yi.spatialReferenceId!==Ee.PLATE_CARREE)Ps.projector(dr,0,er,0),er[3]=dr[3]*Ws.metersPerUnit/yi.metersPerUnit;else{const Mi=Ci[Ee.SPHERICAL_ECEF][Ee.PLATE_CARREE];let Xi=dr[3];(0,B.pC)(Ci[Ws.spatialReferenceId][Ee.SPHERICAL_ECEF])&&(0,B.pC)(Mi)&&(Xi=Hr(dr[1],dr[2],dr[3],se.sv.radius)),Ps.projector(dr,0,er,0),er[3]=Xi}return!0}function Hr(dr,Dr,er,Ir){const Ps=Ir+Dr;if(Ps<Ir/2||er>Ps)return Number.MAX_VALUE;const Ws=Math.abs(hi*dr)+Math.asin(er/Ps);return Ws>=Math.PI/2?Number.MAX_VALUE:er/Math.cos(Ws)}function pt(dr,Dr,er,Ir){return!(null==dr||((0,ne.fS)(Dr,Ir)?((0,J.JG)(er,dr),0):(Oi[0]=dr[0],Oi[1]=dr[1],Oi[2]=0,!Pr(Oi,Dr,0,Oi,Ir,0,1)||(er[0]=Oi[0],er[1]=Oi[1],Oi[0]=dr[2],Oi[1]=dr[3],Oi[2]=0,!Pr(Oi,Dr,0,Oi,Ir,0,1)||(er[2]=Oi[0],er[3]=Oi[1],0)))))}function Ut(dr,Dr,er,Ir){if((0,B.Wi)(Dr)||(0,B.Wi)(Ir))return!1;const Ps=gr(Dr,bs),Ws=gr(Ir,Ns);if(Ps===Ws&&Ps!==Ee.UNKNOWN||(0,ne.fS)(Dr,Ir))return er[0]=1,er[1]=1,er[2]=1,!0;if(Ps===Ee.SPHERICAL_ECEF){const yi=(0,$.l)(dr),Gs=yi/Math.sqrt(dr[0]*dr[0]+dr[1]*dr[1]),Mi=yi/se.sv.radius;if(Ws===Ee.WEB_MERCATOR)return er[0]=Gs*Mi,er[1]=Gs*Mi,er[2]=1,!0;if(Ws===Ee.WGS84||Ws===Ee.CGCS2000){const Xi=zr;return er[0]=Xi*Gs*Mi,er[1]=Xi*Mi,er[2]=1,!0}}else if(Ps===Ee.PLATE_CARREE){if(Ws===Ee.WGS84||Ws===Ee.CGCS2000)return er[0]=zr,er[1]=zr,er[2]=1,!0;if(Ws===Ee.WEB_MERCATOR){const yi=dr[1]/se.sv.radius;return er[0]=1,er[1]=1/Math.cos(yi),er[2]=1,!0}}return!1}function $t(dr,Dr,er,Ir){if((0,B.Wi)(dr)||(0,B.Wi)(Ir))return!1;const Ps=gr(dr,bs),Ws=gr(Ir,Ns);if(Ps===Ws&&!Xt(Ws)&&(Ps!==Ee.UNKNOWN||(0,ne.fS)(dr,Ir)))return(0,G.f)(er,Dr),!0;if(Xt(Ws)){const yi=Ci[Ps][Ee.LON_LAT],Gs=Ci[Ee.LON_LAT][Ws];return!(0,B.Wi)(yi)&&!(0,B.Wi)(Gs)&&(yi(Dr,0,zi,0),Gs(zi,0,Zr,0),_r(hi*zi[0],hi*zi[1],er),er[12]=Zr[0],er[13]=Zr[1],er[14]=Zr[2],!0)}if((Ws===Ee.WEB_MERCATOR||Ws===Ee.PLATE_CARREE)&&(Ps===Ee.WGS84||Ps===Ee.CGCS2000&&Ws===Ee.PLATE_CARREE||Ps===Ee.SPHERICAL_ECEF||Ps===Ee.WEB_MERCATOR)){const yi=Ci[Ps][Ee.LON_LAT],Gs=Ci[Ee.LON_LAT][Ws];return!(0,B.Wi)(yi)&&!(0,B.Wi)(Gs)&&(yi(Dr,0,zi,0),Gs(zi,0,Zr,0),Ps===Ee.SPHERICAL_ECEF?function hr(dr,Dr,er){_r(dr,Dr,er),(0,G.t)(er,er)}(hi*zi[0],hi*zi[1],er):(0,G.i)(er),er[12]=Zr[0],er[13]=Zr[1],er[14]=Zr[2],!0)}return!1}function Xt(dr){return dr===Ee.SPHERICAL_ECEF||dr===Ee.SPHERICAL_MARS_PCPF||dr===Ee.SPHERICAL_MOON_PCPF}function _r(dr,Dr,er){const Ir=Math.sin(dr),Ps=Math.cos(dr),Ws=Math.sin(Dr),yi=Math.cos(Dr),Gs=er;return Gs[0]=-Ir,Gs[4]=-Ws*Ps,Gs[8]=yi*Ps,Gs[12]=0,Gs[1]=Ps,Gs[5]=-Ws*Ir,Gs[9]=yi*Ir,Gs[13]=0,Gs[2]=0,Gs[6]=yi,Gs[10]=Ws,Gs[14]=0,Gs[3]=0,Gs[7]=0,Gs[11]=0,Gs[15]=1,Gs}function gr(dr,Dr){return Dr.spatialReference===dr?Dr.spatialReferenceId:(Dr.spatialReference=dr,"metersPerUnit"in Dr&&(Dr.metersPerUnit=(0,W.c9)(dr,1)),Dr.spatialReferenceId=dr.wkt===Q.GG.wkt?Ee.SPHERICAL_ECEF:(0,ne.oR)(dr)?Ee.WGS84:(0,ne.sS)(dr)?Ee.WEB_MERCATOR:(0,ne.QM)(dr)?Ee.PLATE_CARREE:dr.wkt===Q.wY.wkt?Ee.WGS84_ECEF:dr.wkid===ce.W.CGCS2000?Ee.CGCS2000:dr.wkt===Q.HQ.wkt?Ee.SPHERICAL_MARS_PCPF:dr.wkt===Q.VY.wkt?Ee.SPHERICAL_MOON_PCPF:(0,ne.BZ)(dr)?Ee.GCSMARS2000:(0,ne.V2)(dr)?Ee.GCSMOON2000:Ee.UNKNOWN)}function vr(dr,Dr,er,Ir){dr!==er&&(er[Ir++]=dr[Dr++],er[Ir++]=dr[Dr++],er[Ir]=dr[Dr])}function Kr(dr,Dr,er,Ir){er[Ir++]=Di*(dr[Dr++]/se.sv.radius),er[Ir++]=Di*(Math.PI/2-2*Math.atan(Math.exp(-dr[Dr++]/se.sv.radius))),er[Ir]=dr[Dr]}function Gr(dr,Dr,er,Ir){Kr(dr,Dr,er,Ir),Zi(er,Ir,er,Ir)}function Jr(dr,Dr,er,Ir){Kr(dr,Dr,er,Ir),Nr(er,Ir,er,Ir)}function ns(dr,Dr,er,Ir,Ps){const Ws=.4999999*Math.PI,yi=(0,w.uZ)(hi*dr[Dr+1],-Ws,Ws),Gs=Math.sin(yi);er[Ir++]=hi*dr[Dr]*Ps.radius,er[Ir++]=Ps.halfSemiMajorAxis*Math.log((1+Gs)/(1-Gs)),er[Ir]=dr[Dr+2]}function lr(dr,Dr,er,Ir){ns(dr,Dr,er,Ir,se.sv)}(dr=Ee||(Ee={}))[dr.UNKNOWN=0]="UNKNOWN",dr[dr.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",dr[dr.WGS84=2]="WGS84",dr[dr.WEB_MERCATOR=3]="WEB_MERCATOR",dr[dr.WGS84_ECEF=4]="WGS84_ECEF",dr[dr.CGCS2000=5]="CGCS2000",dr[dr.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",dr[dr.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",dr[dr.GCSMARS2000=8]="GCSMARS2000",dr[dr.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",dr[dr.GCSMOON2000=10]="GCSMOON2000",dr[dr.LON_LAT=11]="LON_LAT",dr[dr.PLATE_CARREE=12]="PLATE_CARREE";const Tr=se.sv.radius*Math.PI/180,zr=180/(se.sv.radius*Math.PI);function Tt(dr,Dr,er,Ir){er[Ir]=dr[Dr]*Tr,er[Ir+1]=dr[Dr+1]*Tr,er[Ir+2]=dr[Dr+2]}function sr(dr,Dr,er,Ir){er[Ir]=dr[Dr]*zr,er[Ir+1]=dr[Dr+1]*zr,er[Ir+2]=dr[Dr+2]}function Rr(dr,Dr,er,Ir){Kr(dr,Dr,er,Ir),Tt(er,Ir,er,Ir)}function es(dr){if((0,B.Wi)(dr))return!1;const Dr=gr(dr,bs);return!!Ci[Dr][Ee.WGS84_COMPARABLE_LON_LAT]}function hs(dr,Dr,er,Ir){const Ps=Math.cos(er);dr[0]=Math.cos(Dr)*Ps*Ir,dr[1]=Math.sin(Dr)*Ps*Ir,dr[2]=Math.sin(er)*Ir}function Is(dr,Dr,er,Ir,Ps){const Ws=Ps+dr[Dr+2],yi=hi*dr[Dr+1],Gs=hi*dr[Dr],Mi=Math.cos(yi);er[Ir++]=Math.cos(Gs)*Mi*Ws,er[Ir++]=Math.sin(Gs)*Mi*Ws,er[Ir]=Math.sin(yi)*Ws}function Yr(dr,Dr,er,Ir){Is(dr,Dr,er,Ir,se.Z1.radius)}function Rs(dr,Dr,er,Ir){Is(dr,Dr,er,Ir,se.yr.radius)}function Zi(dr,Dr,er,Ir){Is(dr,Dr,er,Ir,se.sv.radius)}function Cr(dr,Dr,er,Ir,Ps){const Ws=dr[Dr],yi=dr[Dr+1],Gs=dr[Dr+2],Mi=Math.sqrt(Ws*Ws+yi*yi+Gs*Gs),Xi=(0,w.Kt)(Gs/(0===Mi?1:Mi)),Hs=Math.atan2(yi,Ws);er[Ir++]=Di*Hs,er[Ir++]=Di*Xi,er[Ir]=Mi-Ps}function as(dr,Dr,er,Ir){Cr(dr,Dr,er,Ir,se.Z1.radius)}function ps(dr,Dr,er,Ir){Cr(dr,Dr,er,Ir,se.yr.radius)}function zs(dr,Dr,er,Ir){Cr(dr,Dr,er,Ir,se.sv.radius)}function As(dr,Dr,er,Ir){zs(dr,Dr,er,Ir),lr(er,Ir,er,Ir)}function Ys(dr,Dr,er,Ir){zs(dr,Dr,er,Ir),Nr(er,Ir,er,Ir)}function Nr(dr,Dr,er,Ir){!function di(dr,Dr,er,Ir,Ps){const Ws=hi*dr[Dr],yi=hi*dr[Dr+1],Gs=dr[Dr+2],Mi=Math.sin(yi),Xi=Math.cos(yi),Hs=Ps.radius/Math.sqrt(1-Ps.eccentricitySquared*Mi*Mi);er[Ir++]=(Hs+Gs)*Xi*Math.cos(Ws),er[Ir++]=(Hs+Gs)*Xi*Math.sin(Ws),er[Ir++]=(Hs*(1-Ps.eccentricitySquared)+Gs)*Mi}(dr,Dr,er,Ir,se.sv)}function Ai(dr,Dr,er,Ir){const Ps=ee.cD,Ws=dr[Dr],yi=dr[Dr+1],Gs=dr[Dr+2];let Mi,Xi,Hs,ki,sn,Uo,Vn,io,An,Gn,hn,ya,Wo,sa,ia,nn,Co,Ja,Kn,Yn,hl;Mi=Math.abs(Gs),Xi=Ws*Ws+yi*yi,Hs=Math.sqrt(Xi),ki=Xi+Gs*Gs,sn=Math.sqrt(ki),Yn=Math.atan2(yi,Ws),Uo=Gs*Gs/ki,Vn=Xi/ki,sa=Ps.a2/sn,ia=Ps.a3-Ps.a4/sn,Vn>.3?(io=Mi/sn*(1+Vn*(Ps.a1+sa+Uo*ia)/sn),Kn=Math.asin(io),Gn=io*io,An=Math.sqrt(1-Gn)):(An=Hs/sn*(1-Uo*(Ps.a5-sa-Vn*ia)/sn),Kn=Math.acos(An),Gn=1-An*An,io=Math.sqrt(Gn)),hn=1-se.sv.eccentricitySquared*Gn,ya=se.sv.radius/Math.sqrt(hn),Wo=Ps.a6*ya,sa=Hs-ya*An,ia=Mi-Wo*io,Co=An*sa+io*ia,nn=An*ia-io*sa,Ja=nn/(Wo/hn+Co),Kn+=Ja,hl=Co+nn*Ja/2,Gs<0&&(Kn=-Kn),er[Ir++]=Di*Yn,er[Ir++]=Di*Kn,er[Ir]=hl}function ds(dr,Dr,er,Ir){Ai(dr,Dr,er,Ir),Zi(er,Ir,er,Ir)}function Tn(dr,Dr,er,Ir){Ai(dr,Dr,er,Ir),lr(er,Ir,er,Ir)}const Ci={[Ee.WGS84]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:vr,[Ee.SPHERICAL_ECEF]:Zi,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:lr,[Ee.PLATE_CARREE]:Tt,[Ee.WGS84]:vr,[Ee.WGS84_ECEF]:Nr},[Ee.CGCS2000]:{[Ee.CGCS2000]:vr,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:vr,[Ee.SPHERICAL_ECEF]:Zi,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:Tt,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:Nr},[Ee.GCSMARS2000]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:vr,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:null,[Ee.SPHERICAL_ECEF]:null,[Ee.SPHERICAL_MARS_PCPF]:Rs,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:null,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:null},[Ee.GCSMOON2000]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:vr,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:null,[Ee.SPHERICAL_ECEF]:null,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:Yr,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:null,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:null},[Ee.WEB_MERCATOR]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:Kr,[Ee.WGS84_COMPARABLE_LON_LAT]:Kr,[Ee.SPHERICAL_ECEF]:Gr,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:vr,[Ee.PLATE_CARREE]:Rr,[Ee.WGS84]:Kr,[Ee.WGS84_ECEF]:Jr},[Ee.WGS84_ECEF]:{[Ee.CGCS2000]:Ai,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:Ai,[Ee.WGS84_COMPARABLE_LON_LAT]:Ai,[Ee.SPHERICAL_ECEF]:ds,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:Tn,[Ee.PLATE_CARREE]:function bt(dr,Dr,er,Ir){Ai(dr,Dr,er,Ir),Tt(er,Ir,er,Ir)},[Ee.WGS84]:Ai,[Ee.WGS84_ECEF]:vr},[Ee.SPHERICAL_ECEF]:{[Ee.CGCS2000]:zs,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:zs,[Ee.WGS84_COMPARABLE_LON_LAT]:zs,[Ee.SPHERICAL_ECEF]:vr,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:As,[Ee.PLATE_CARREE]:function Qt(dr,Dr,er,Ir){zs(dr,Dr,er,Ir),Tt(er,Ir,er,Ir)},[Ee.WGS84]:zs,[Ee.WGS84_ECEF]:Ys},[Ee.SPHERICAL_MARS_PCPF]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:ps,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:ps,[Ee.WGS84_COMPARABLE_LON_LAT]:null,[Ee.SPHERICAL_ECEF]:null,[Ee.SPHERICAL_MARS_PCPF]:vr,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:null,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:null},[Ee.SPHERICAL_MOON_PCPF]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:as,[Ee.LON_LAT]:as,[Ee.WGS84_COMPARABLE_LON_LAT]:null,[Ee.SPHERICAL_ECEF]:null,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:vr,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:null,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:null},[Ee.UNKNOWN]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:null,[Ee.WGS84_COMPARABLE_LON_LAT]:null,[Ee.SPHERICAL_ECEF]:null,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:vr,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:null,[Ee.WGS84]:null,[Ee.WGS84_ECEF]:null},[Ee.LON_LAT]:{[Ee.CGCS2000]:vr,[Ee.GCSMARS2000]:vr,[Ee.GCSMOON2000]:vr,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:vr,[Ee.SPHERICAL_ECEF]:Zi,[Ee.SPHERICAL_MARS_PCPF]:Rs,[Ee.SPHERICAL_MOON_PCPF]:Yr,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:lr,[Ee.PLATE_CARREE]:Tt,[Ee.WGS84]:vr,[Ee.WGS84_ECEF]:Nr},[Ee.WGS84_COMPARABLE_LON_LAT]:{[Ee.CGCS2000]:null,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:vr,[Ee.WGS84_COMPARABLE_LON_LAT]:vr,[Ee.SPHERICAL_ECEF]:Zi,[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:null,[Ee.PLATE_CARREE]:Tt,[Ee.WGS84]:vr,[Ee.WGS84_ECEF]:Nr},[Ee.PLATE_CARREE]:{[Ee.CGCS2000]:sr,[Ee.GCSMARS2000]:null,[Ee.GCSMOON2000]:null,[Ee.LON_LAT]:sr,[Ee.WGS84_COMPARABLE_LON_LAT]:sr,[Ee.SPHERICAL_ECEF]:function qt(dr,Dr,er,Ir){sr(dr,Dr,er,Ir),Zi(er,Ir,er,Ir)},[Ee.SPHERICAL_MARS_PCPF]:null,[Ee.SPHERICAL_MOON_PCPF]:null,[Ee.UNKNOWN]:null,[Ee.WEB_MERCATOR]:function yr(dr,Dr,er,Ir){sr(dr,Dr,er,Ir),lr(er,Ir,er,Ir)},[Ee.PLATE_CARREE]:vr,[Ee.WGS84]:sr,[Ee.WGS84_ECEF]:function jr(dr,Dr,er,Ir){sr(dr,Dr,er,Ir),Nr(er,Ir,er,Ir)}}};function gt(dr,Dr,er=xr()){return(0,B.Wi)(dr)||(0,B.Wi)(Dr)?null:Wr(dr,Dr,er).projector}function Wr(dr,Dr,er){if((0,B.Wi)(dr)||(0,B.Wi)(Dr)||er.source.spatialReference===dr&&er.dest.spatialReference===Dr)return er;const Ir=gr(dr,er.source),Ps=gr(Dr,er.dest);return er.projector=Ir===Ee.UNKNOWN&&Ps===Ee.UNKNOWN?(0,ne.fS)(dr,Dr)?vr:null:Ci[Ir][Ps],er}function xr(){return{source:{spatialReference:null,spatialReferenceId:Ee.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Ee.UNKNOWN,metersPerUnit:1},projector:vr}}const bs={spatialReference:null,spatialReferenceId:Ee.UNKNOWN},Ns={spatialReference:null,spatialReferenceId:Ee.UNKNOWN},_i=xr(),gi=xr(),hi=(0,w.Vl)(1),Di=(0,w.BV)(1),Oi=(0,re.c)(),zi=(0,re.c)(),Zr=(0,re.c)(),ii=(0,re.c)(),yn=(0,re.c)()},12080:(qe,xe,T)=>{"use strict";T.d(xe,{GG:()=>U,HQ:()=>W,Iu:()=>re,VY:()=>Y,e8:()=>ue,rS:()=>$,wY:()=>H});var D=T(65234),x=T(94425),w=T(37053);function B(ae){return new D.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${ae.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const U=B(x.sv),W=B(x.yr),Y=B(x.Z1),H=new D.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${x.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function $(ae){return ae&&((0,w.BZ)(ae)||ae===W)?W:ae&&((0,w.V2)(ae)||ae===Y)?Y:U}function re(ae){return ae&&((0,w.BZ)(ae)||ae===W)?x.yr:ae&&((0,w.V2)(ae)||ae===Y)?x.Z1:x.sv}function ue(ae){return(0,w.o$)(ae)?x.yr:(0,w.ME)(ae)?x.Z1:x.sv}},78172:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{R:()=>D}),(x=D||(D={}))[x.X=0]="X",x[x.Y=1]="Y",x[x.Z=2]="Z"},94425:(qe,xe,T)=>{"use strict";T.d(xe,{Z1:()=>B,sv:()=>x,yr:()=>w});class D{constructor(W,Y,H,G){this.semiMajorAxis=W,this.flattening=Y,this.outerAtmosphereRimWidth=H,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=G||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const x=new D(6378137,1/298.257223563,3e5,.006694379990137799),w=new D(3396190,1/169.8944472236118,23e4),B=new D(1737400,0,0)},98346:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>w});let D=0;class x{constructor(U=null){this.uid=D++,U?(this._wkt=void 0!==U.wkt?U.wkt:null,this._wkid=void 0!==U.wkid?U.wkid:-1,this._isInverse=void 0!==U.isInverse&&!0===U.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(U){const W=new x;return W._wkt=U.wkt,W._wkid=U.wkid,W._isInverse=U.isInverse,W}get wkt(){return this._wkt}set wkt(U){this._wkt=U,this.uid=D++}get wkid(){return this._wkid}set wkid(U){this._wkid=U,this.uid=D++}get isInverse(){return this._isInverse}set isInverse(U){this._isInverse=U,this.uid=D++}getInverse(){const U=new x;return U._wkt=this.wkt,U._wkid=this._wkid,U._isInverse=!this.isInverse,U}}class w{constructor(U){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,U&&U.steps)for(const W of U.steps)this.steps.push(W instanceof x?W:new x({wkid:W.wkid,wkt:W.wkt,isInverse:W.isInverse}))}static cacheKey(U,W){return[null!=U.wkid?U.wkid.toString():"-1",null!=U.wkt?U.wkt.toString():"",null!=W.wkid?W.wkid.toString():"-1",null!=W.wkt?W.wkt.toString():""].join(",")}static fromGE(U){const W=new w;let Y="";for(const H of U.steps){const G=x.fromGE(H);W.steps.push(G),Y+=G.uid.toString()+","}return W._cached_projection={},W._gtlistentry=null,W._chain=Y,W}getInverse(){const U=new w;U.steps=[];for(let W=this.steps.length-1;W>=0;W--)U.steps.push(this.steps[W].getInverse());return U}getGTListEntry(){let U="";for(const W of this.steps)U+=W.uid.toString()+",";return U!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=U),this._gtlistentry}assignCachedGe(U,W,Y){this._cached_projection[w.cacheKey(U,W)]=Y}getCachedGeTransformation(U,W){let Y="";for(const G of this.steps)Y+=G.uid.toString()+",";Y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Y);const H=this._cached_projection[w.cacheKey(U,W)];return void 0===H?null:H}}},61751:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ue,D=T(17626),x=T(86810),w=T(58817),B=T(63290),U=T(77712),W=T(66656),Y=T(76898),H=T(90912),G=T(45348),$=T(27530),re=T(92529);const ae=B.Z.getLogger("esri.geometry.support.MeshComponent");let oe=ue=class extends x.wq{constructor(X){super(X),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(X){return(0,H.TJ)(ue,X)}castFaces(X){return(0,re.X)(X,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},ae)}castMaterial(X){return(0,H.TJ)(X&&"object"==typeof X&&("metallic"in X||"roughness"in X||"metallicRoughnessTexture"in X)?$.Z:G.Z,X)}clone(){return new ue({faces:(0,w.d9)(this.faces),shading:this.shading,material:(0,w.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(X,Z){const Q={faces:(0,w.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(X,Z):null,trustSourceNormals:this.trustSourceNormals};return new ue(Q)}};(0,D._)([(0,U.Cb)({json:{write:!0}})],oe.prototype,"faces",void 0),(0,D._)([(0,W.p)("faces")],oe.prototype,"castFaces",null),(0,D._)([(0,U.Cb)({type:G.Z,json:{write:!0}})],oe.prototype,"material",void 0),(0,D._)([(0,W.p)("material")],oe.prototype,"castMaterial",null),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"shading",void 0),(0,D._)([(0,U.Cb)({type:Boolean})],oe.prototype,"trustSourceNormals",void 0),oe=ue=(0,D._)([(0,Y.j)("esri.geometry.support.MeshComponent")],oe);const ie=oe},45348:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var re,D=T(17626),x=T(91558),w=T(86810),B=T(62208),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898)),$=T(1607);let ue=re=class extends w.wq{constructor(oe){super(oe),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(oe,ie){const X=(0,B.pC)(oe)?oe.get(this):null;if(X)return X;const Z=new re(this.clonePropertiesWithDeduplication(ie));return(0,B.pC)(oe)&&oe.set(this,Z),Z}clonePropertiesWithDeduplication(oe){return{color:(0,B.pC)(this.color)?this.color.clone():null,colorTexture:(0,B.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(oe):null,normalTexture:(0,B.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(oe):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,D._)([(0,U.Cb)({type:x.Z,json:{write:!0}})],ue.prototype,"color",void 0),(0,D._)([(0,U.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"colorTexture",void 0),(0,D._)([(0,U.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"normalTexture",void 0),(0,D._)([(0,U.Cb)({nonNullable:!0,json:{write:!0}})],ue.prototype,"alphaMode",void 0),(0,D._)([(0,U.Cb)({nonNullable:!0,json:{write:!0}})],ue.prototype,"alphaCutoff",void 0),(0,D._)([(0,U.Cb)({nonNullable:!0,json:{write:!0}})],ue.prototype,"doubleSided",void 0),ue=re=(0,D._)([(0,G.j)("esri.geometry.support.MeshMaterial")],ue);const ae=ue},27530:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var re,D=T(17626),x=T(91558),w=T(62208),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(45348),$=T(1607);let ue=re=class extends G.Z{constructor(oe){super(oe),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(oe,ie){const X=(0,w.pC)(oe)?oe.get(this):null;if(X)return X;const Z=new re(this.clonePropertiesWithDeduplication(ie));return(0,w.pC)(oe)&&oe.set(this,Z),Z}clonePropertiesWithDeduplication(oe){return{...super.clonePropertiesWithDeduplication(oe),emissiveColor:(0,w.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,w.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(oe):null,occlusionTexture:(0,w.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(oe):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,w.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(oe):null}}};(0,D._)([(0,B.Cb)({type:x.Z,json:{write:!0}})],ue.prototype,"emissiveColor",void 0),(0,D._)([(0,B.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"emissiveTexture",void 0),(0,D._)([(0,B.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"occlusionTexture",void 0),(0,D._)([(0,B.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],ue.prototype,"metallic",void 0),(0,D._)([(0,B.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],ue.prototype,"roughness",void 0),(0,D._)([(0,B.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"metallicRoughnessTexture",void 0),ue=re=(0,D._)([(0,H.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],ue);const ae=ue},1607:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ue,D=T(17626),w=(T(8314),T(86810)),B=T(77712),W=(T(85931),T(90912)),Y=T(68653),H=T(76898),G=T(99433),$=T(29840),re=T(18605);const ae=new WeakMap;let oe=0,ie=ue=class extends w.wq{constructor(Z){super(Z),this.wrap="repeat"}get url(){return this._get("url")||null}set url(Z){this._set("url",Z),Z&&this._set("data",null)}get data(){return this._get("data")||null}set data(Z){this._set("data",Z),Z&&this._set("url",null)}writeData(Z,Q,J,se){if(Z instanceof HTMLImageElement){const ee={type:"image-element",src:(0,$.t)(Z.src,se),crossOrigin:Z.crossOrigin};Q[J]=ee}else if(Z instanceof HTMLCanvasElement){const ee=Z.getContext("2d").getImageData(0,0,Z.width,Z.height),le={type:"canvas-element",imageData:this._encodeImageData(ee)};Q[J]=le}else if(Z instanceof HTMLVideoElement){const ee={type:"video-element",src:(0,$.t)(Z.src,se),autoplay:Z.autoplay,loop:Z.loop,muted:Z.muted,crossOrigin:Z.crossOrigin,preload:Z.preload};Q[J]=ee}else{const ee={type:"image-data",imageData:this._encodeImageData(Z)};Q[J]=ee}}readData(Z){switch(Z.type){case"image-element":{const Q=new Image;return Q.src=Z.src,Q.crossOrigin=Z.crossOrigin,Q}case"canvas-element":{const Q=this._decodeImageData(Z.imageData),J=document.createElement("canvas");return J.width=Q.width,J.height=Q.height,J.getContext("2d").putImageData(Q,0,0),J}case"image-data":return this._decodeImageData(Z.imageData);case"video-element":{const Q=document.createElement("video");return Q.src=Z.src,Q.crossOrigin=Z.crossOrigin,Q.autoplay=Z.autoplay,Q.loop=Z.loop,Q.muted=Z.muted,Q.preload=Z.preload,Q}default:return}}get transparent(){const Z=this.data,Q=this.url;if(Z instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(Z.getContext("2d").getImageData(0,0,Z.width,Z.height));if(Z instanceof ImageData)return this._imageDataContainsTransparent(Z);if(Q){const J=Q.substr(Q.length-4,4).toLowerCase(),se=Q.substr(0,15).toLocaleLowerCase();if(".png"===J||"data:image/png;"===se)return!0}return!1}set transparent(Z){null!=Z?this._override("transparent",Z):this._clearOverride("transparent")}get contentHash(){const Z="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",Q=(J="")=>`d:${J},t:${this.transparent},w:${Z}`;return null!=this.url?Q(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?Q(this.data.src):(ae.has(this.data)||ae.set(this.data,++oe),Q(ae.get(this.data))):Q()}clone(){const Z={url:this.url,data:this.data,wrap:this._cloneWrap()};return new ue(Z)}cloneWithDeduplication(Z){const Q=Z.get(this);if(Q)return Q;const J=this.clone();return Z.set(this,J),J}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(Z){let Q="";for(let J=0;J<Z.data.length;J++)Q+=String.fromCharCode(Z.data[J]);return{data:btoa(Q),width:Z.width,height:Z.height}}_decodeImageData(Z){const Q=atob(Z.data),J=new Uint8ClampedArray(Q.length);for(let se=0;se<Q.length;se++)J[se]=Q.charCodeAt(se);return(0,re.Jl)(J,Z.width,Z.height)}_imageDataContainsTransparent(Z){for(let Q=3;Q<Z.data.length;Q+=4)if(255!==Z.data[Q])return!0;return!1}static from(Z){return"string"==typeof Z?new ue({url:Z}):Z instanceof HTMLImageElement||Z instanceof HTMLCanvasElement||Z instanceof ImageData||Z instanceof HTMLVideoElement?new ue({data:Z}):(0,W.TJ)(ue,Z)}};(0,D._)([(0,B.Cb)({type:String,json:{write:$.w}})],ie.prototype,"url",null),(0,D._)([(0,B.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,B.Cb)()],ie.prototype,"data",null),(0,D._)([(0,G.c)("data")],ie.prototype,"writeData",null),(0,D._)([(0,Y.r)("data")],ie.prototype,"readData",null),(0,D._)([(0,B.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],ie.prototype,"transparent",null),(0,D._)([(0,B.Cb)({json:{write:!0}})],ie.prototype,"wrap",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],ie.prototype,"contentHash",null),ie=ue=(0,D._)([(0,H.j)("esri.geometry.support.MeshTexture")],ie);const X=ie},92529:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>$,X:()=>ue});var H,D=T(17626),x=T(86810),w=T(58817),B=T(63290),U=T(77712),W=T(66656),Y=T(76898);const G=B.Z.getLogger("esri.geometry.support.MeshVertexAttributes");let $=H=class extends x.wq{constructor(ie){super(ie),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(ie){return ue(ie,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},G)}castPosition(ie){return ie&&ie instanceof Float32Array&&G.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),ue(ie,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},G)}castUv(ie){return ue(ie,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},G)}castNormal(ie){return ue(ie,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},G)}castTangent(ie){return ue(ie,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},G)}clone(){const ie={position:(0,w.d9)(this.position),uv:(0,w.d9)(this.uv),normal:(0,w.d9)(this.normal),tangent:(0,w.d9)(this.tangent),color:(0,w.d9)(this.color)};return new H(ie)}clonePositional(){const ie={position:(0,w.d9)(this.position),normal:(0,w.d9)(this.normal),tangent:(0,w.d9)(this.tangent),uv:this.uv,color:this.color};return new H(ie)}};function re(ie,X,Z,Q){const{loggerTag:J,stride:se}=X;return ie.length%se!=0?(Q.error(J,`Invalid array length, expected a multiple of ${se}`),new Z([])):ie}function ue(ie,X,Z,Q,J){if(!ie)return ie;if(ie instanceof X)return re(ie,Q,X,J);for(const se of Z)if(ie instanceof se)return re(new X(ie),Q,X,J);if(Array.isArray(ie))return re(new X(ie),Q,X,J);{const se=Z.map(ee=>`'${ee.name}'`);return J.error(`Failed to set property, expected one of ${se}, but got ${ie.constructor.name}`),new X([])}}function ae(ie,X,Z){X[Z]=function oe(ie){const X=new Array(ie.length);for(let Z=0;Z<ie.length;Z++)X[Z]=ie[Z];return X}(ie)}(0,D._)([(0,U.Cb)({json:{write:ae}})],$.prototype,"color",void 0),(0,D._)([(0,W.p)("color")],$.prototype,"castColor",null),(0,D._)([(0,U.Cb)({nonNullable:!0,json:{write:ae}})],$.prototype,"position",void 0),(0,D._)([(0,W.p)("position")],$.prototype,"castPosition",null),(0,D._)([(0,U.Cb)({json:{write:ae}})],$.prototype,"uv",void 0),(0,D._)([(0,W.p)("uv")],$.prototype,"castUv",null),(0,D._)([(0,U.Cb)({json:{write:ae}})],$.prototype,"normal",void 0),(0,D._)([(0,W.p)("normal")],$.prototype,"castNormal",null),(0,D._)([(0,U.Cb)({json:{write:ae}})],$.prototype,"tangent",void 0),(0,D._)([(0,W.p)("tangent")],$.prototype,"castTangent",null),$=H=(0,D._)([(0,Y.j)("esri.geometry.support.MeshVertexAttributes")],$)},6178:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{W:()=>D}),(x=D||(D={}))[x.CGCS2000=4490]="CGCS2000",x[x.GCSMARS2000=104971]="GCSMARS2000",x[x.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",x[x.GCSMOON2000=104903]="GCSMOON2000"},84029:(qe,xe,T)=>{"use strict";let D;T.d(xe,{Z:()=>x});const x={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(D=2e3;D<=2045;D++)x[D]=0;for(D=2056;D<=2065;D++)x[D]=0;for(D=2067;D<=2135;D++)x[D]=0;for(D=2137;D<=2154;D++)x[D]=0;for(D=2161;D<=2170;D++)x[D]=0;for(D=2172;D<=2193;D++)x[D]=0;for(D=2195;D<=2198;D++)x[D]=0;for(D=2200;D<=2203;D++)x[D]=0;for(D=2205;D<=2217;D++)x[D]=0;for(D=2222;D<=2224;D++)x[D]=1;for(D=2225;D<=2250;D++)x[D]=2;for(D=2251;D<=2253;D++)x[D]=1;for(D=2257;D<=2264;D++)x[D]=2;for(D=2274;D<=2279;D++)x[D]=2;for(D=2280;D<=2282;D++)x[D]=1;for(D=2283;D<=2289;D++)x[D]=2;for(D=2290;D<=2292;D++)x[D]=0;for(D=2308;D<=2313;D++)x[D]=0;for(D=2315;D<=2491;D++)x[D]=0;for(D=2494;D<=2866;D++)x[D]=0;for(D=2867;D<=2869;D++)x[D]=1;for(D=2870;D<=2888;D++)x[D]=2;for(D=2891;D<=2895;D++)x[D]=2;for(D=2896;D<=2898;D++)x[D]=1;for(D=2902;D<=2908;D++)x[D]=2;for(D=2915;D<=2920;D++)x[D]=2;for(D=2921;D<=2923;D++)x[D]=1;for(D=2924;D<=2930;D++)x[D]=2;for(D=2931;D<=2962;D++)x[D]=0;for(D=2964;D<=2968;D++)x[D]=2;for(D=2969;D<=2973;D++)x[D]=0;for(D=2975;D<=2991;D++)x[D]=0;for(D=2995;D<=3051;D++)x[D]=0;for(D=3054;D<=3079;D++)x[D]=0;for(D=3081;D<=3088;D++)x[D]=0;for(D=3092;D<=3101;D++)x[D]=0;for(D=3106;D<=3138;D++)x[D]=0;for(D=3146;D<=3151;D++)x[D]=0;for(D=3153;D<=3166;D++)x[D]=0;for(D=3168;D<=3172;D++)x[D]=0;for(D=3174;D<=3203;D++)x[D]=0;for(D=3294;D<=3358;D++)x[D]=0;for(D=3367;D<=3403;D++)x[D]=0;for(D=3408;D<=3416;D++)x[D]=0;for(D=3417;D<=3438;D++)x[D]=2;for(D=3441;D<=3446;D++)x[D]=2;for(D=3447;D<=3450;D++)x[D]=0;for(D=3451;D<=3459;D++)x[D]=2;for(D=3460;D<=3478;D++)x[D]=0;for(D=3554;D<=3559;D++)x[D]=0;for(D=3560;D<=3570;D++)x[D]=2;for(D=3571;D<=3581;D++)x[D]=0;for(D=3594;D<=3597;D++)x[D]=0;for(D=3601;D<=3604;D++)x[D]=0;for(D=3637;D<=3639;D++)x[D]=0;for(D=3665;D<=3667;D++)x[D]=0;for(D=3693;D<=3695;D++)x[D]=0;for(D=3701;D<=3727;D++)x[D]=0;for(D=3728;D<=3739;D++)x[D]=2;for(D=3740;D<=3751;D++)x[D]=0;for(D=3753;D<=3760;D++)x[D]=2;for(D=3761;D<=3773;D++)x[D]=0;for(D=3775;D<=3777;D++)x[D]=0;for(D=3779;D<=3781;D++)x[D]=0;for(D=3783;D<=3785;D++)x[D]=0;for(D=3788;D<=3791;D++)x[D]=0;for(D=3797;D<=3802;D++)x[D]=0;for(D=3814;D<=3816;D++)x[D]=0;for(D=3825;D<=3829;D++)x[D]=0;for(D=3832;D<=3841;D++)x[D]=0;for(D=3844;D<=3852;D++)x[D]=0;for(D=3873;D<=3885;D++)x[D]=0;for(D=3890;D<=3893;D++)x[D]=0;for(D=3907;D<=3912;D++)x[D]=0;for(D=3942;D<=3950;D++)x[D]=0;for(D=3968;D<=3970;D++)x[D]=0;for(D=3973;D<=3976;D++)x[D]=0;for(D=3986;D<=3989;D++)x[D]=0;for(D=3994;D<=3997;D++)x[D]=0;for(D=4048;D<=4051;D++)x[D]=0;for(D=4056;D<=4063;D++)x[D]=0;for(D=4093;D<=4096;D++)x[D]=0;for(D=4390;D<=4398;D++)x[D]=0;for(D=4399;D<=4413;D++)x[D]=2;for(D=4418;D<=4433;D++)x[D]=2;for(D=4455;D<=4457;D++)x[D]=2;for(D=4484;D<=4489;D++)x[D]=0;for(D=4491;D<=4554;D++)x[D]=0;for(D=4568;D<=4589;D++)x[D]=0;for(D=4652;D<=4656;D++)x[D]=0;for(D=4766;D<=4800;D++)x[D]=0;for(D=5014;D<=5016;D++)x[D]=0;for(D=5069;D<=5072;D++)x[D]=0;for(D=5105;D<=5130;D++)x[D]=0;for(D=5173;D<=5188;D++)x[D]=0;for(D=5253;D<=5259;D++)x[D]=0;for(D=5269;D<=5275;D++)x[D]=0;for(D=5292;D<=5311;D++)x[D]=0;for(D=5329;D<=5331;D++)x[D]=0;for(D=5343;D<=5349;D++)x[D]=0;for(D=5355;D<=5357;D++)x[D]=0;for(D=5387;D<=5389;D++)x[D]=0;for(D=5459;D<=5463;D++)x[D]=0;for(D=5479;D<=5482;D++)x[D]=0;for(D=5518;D<=5520;D++)x[D]=0;for(D=5530;D<=5539;D++)x[D]=0;for(D=5550;D<=5552;D++)x[D]=0;for(D=5562;D<=5583;D++)x[D]=0;for(D=5623;D<=5625;D++)x[D]=2;for(D=5631;D<=5639;D++)x[D]=0;for(D=5649;D<=5653;D++)x[D]=0;for(D=5663;D<=5680;D++)x[D]=0;for(D=5682;D<=5685;D++)x[D]=0;for(D=5875;D<=5877;D++)x[D]=0;for(D=5896;D<=5899;D++)x[D]=0;for(D=5921;D<=5940;D++)x[D]=0;for(D=6050;D<=6125;D++)x[D]=0;for(D=6244;D<=6275;D++)x[D]=0;for(D=6328;D<=6348;D++)x[D]=0;for(D=6350;D<=6356;D++)x[D]=0;for(D=6366;D<=6372;D++)x[D]=0;for(D=6381;D<=6387;D++)x[D]=0;for(D=6393;D<=6404;D++)x[D]=0;for(D=6480;D<=6483;D++)x[D]=0;for(D=6511;D<=6514;D++)x[D]=0;for(D=6579;D<=6581;D++)x[D]=0;for(D=6619;D<=6624;D++)x[D]=0;for(D=6625;D<=6627;D++)x[D]=2;for(D=6628;D<=6632;D++)x[D]=0;for(D=6634;D<=6637;D++)x[D]=0;for(D=6669;D<=6692;D++)x[D]=0;for(D=6707;D<=6709;D++)x[D]=0;for(D=6720;D<=6723;D++)x[D]=0;for(D=6732;D<=6738;D++)x[D]=0;for(D=6931;D<=6933;D++)x[D]=0;for(D=6956;D<=6959;D++)x[D]=0;for(D=7005;D<=7007;D++)x[D]=0;for(D=7057;D<=7070;D++)x[D]=2;for(D=7074;D<=7082;D++)x[D]=0;for(D=7109;D<=7118;D++)x[D]=0;for(D=7119;D<=7127;D++)x[D]=1;for(D=7374;D<=7376;D++)x[D]=0;for(D=7528;D<=7586;D++)x[D]=0;for(D=7587;D<=7645;D++)x[D]=2;for(D=7692;D<=7696;D++)x[D]=0;for(D=7755;D<=7787;D++)x[D]=0;for(D=7791;D<=7795;D++)x[D]=0;for(D=7799;D<=7801;D++)x[D]=0;for(D=7803;D<=7805;D++)x[D]=0;for(D=7825;D<=7831;D++)x[D]=0;for(D=7845;D<=7859;D++)x[D]=0;for(D=8013;D<=8032;D++)x[D]=0;for(D=8065;D<=8068;D++)x[D]=1;for(D=8518;D<=8529;D++)x[D]=2;for(D=8533;D<=8536;D++)x[D]=2;for(D=8538;D<=8540;D++)x[D]=2;for(D=8677;D<=8679;D++)x[D]=0;for(D=8836;D<=8840;D++)x[D]=0;for(D=8857;D<=8859;D++)x[D]=0;for(D=8908;D<=8910;D++)x[D]=0;for(D=9154;D<=9159;D++)x[D]=0;for(D=9205;D<=9218;D++)x[D]=0;for(D=9271;D<=9273;D++)x[D]=0;for(D=9295;D<=9297;D++)x[D]=0;for(D=9356;D<=9360;D++)x[D]=0;for(D=9404;D<=9407;D++)x[D]=0;for(D=9476;D<=9482;D++)x[D]=0;for(D=9487;D<=9494;D++)x[D]=0;for(D=9697;D<=9699;D++)x[D]=0;for(D=20002;D<=20032;D++)x[D]=0;for(D=20062;D<=20092;D++)x[D]=0;for(D=20135;D<=20138;D++)x[D]=0;for(D=20248;D<=20258;D++)x[D]=0;for(D=20348;D<=20358;D++)x[D]=0;for(D=20436;D<=20440;D++)x[D]=0;for(D=20822;D<=20824;D++)x[D]=0;for(D=20904;D<=20932;D++)x[D]=0;for(D=20934;D<=20936;D++)x[D]=0;for(D=21004;D<=21032;D++)x[D]=0;for(D=21035;D<=21037;D++)x[D]=0;for(D=21095;D<=21097;D++)x[D]=0;for(D=21148;D<=21150;D++)x[D]=0;for(D=21207;D<=21264;D++)x[D]=0;for(D=21307;D<=21364;D++)x[D]=0;for(D=21413;D<=21423;D++)x[D]=0;for(D=21453;D<=21463;D++)x[D]=0;for(D=21473;D<=21483;D++)x[D]=0;for(D=21780;D<=21782;D++)x[D]=0;for(D=21891;D<=21894;D++)x[D]=0;for(D=21896;D<=21899;D++)x[D]=0;for(D=22171;D<=22177;D++)x[D]=0;for(D=22181;D<=22187;D++)x[D]=0;for(D=22191;D<=22197;D++)x[D]=0;for(D=22234;D<=22236;D++)x[D]=0;for(D=22521;D<=22525;D++)x[D]=0;for(D=22991;D<=22994;D++)x[D]=0;for(D=23028;D<=23038;D++)x[D]=0;for(D=23830;D<=23853;D++)x[D]=0;for(D=23866;D<=23872;D++)x[D]=0;for(D=23877;D<=23884;D++)x[D]=0;for(D=23886;D<=23894;D++)x[D]=0;for(D=23946;D<=23948;D++)x[D]=0;for(D=24311;D<=24313;D++)x[D]=0;for(D=24342;D<=24347;D++)x[D]=0;for(D=24370;D<=24374;D++)x[D]=10;for(D=24375;D<=24381;D++)x[D]=0;for(D=24718;D<=24721;D++)x[D]=0;for(D=24817;D<=24821;D++)x[D]=0;for(D=24877;D<=24882;D++)x[D]=0;for(D=24891;D<=24893;D++)x[D]=0;for(D=25391;D<=25395;D++)x[D]=0;for(D=25828;D<=25838;D++)x[D]=0;for(D=26191;D<=26195;D++)x[D]=0;for(D=26391;D<=26393;D++)x[D]=0;for(D=26701;D<=26722;D++)x[D]=0;for(D=26729;D<=26799;D++)x[D]=2;for(D=26801;D<=26803;D++)x[D]=2;for(D=26811;D<=26813;D++)x[D]=2;for(D=26847;D<=26870;D++)x[D]=2;for(D=26891;D<=26899;D++)x[D]=0;for(D=26901;D<=26923;D++)x[D]=0;for(D=26929;D<=26946;D++)x[D]=0;for(D=26948;D<=26998;D++)x[D]=0;for(D=27037;D<=27040;D++)x[D]=0;for(D=27205;D<=27232;D++)x[D]=0;for(D=27258;D<=27260;D++)x[D]=0;for(D=27391;D<=27398;D++)x[D]=0;for(D=27561;D<=27564;D++)x[D]=0;for(D=27571;D<=27574;D++)x[D]=0;for(D=27581;D<=27584;D++)x[D]=0;for(D=27591;D<=27594;D++)x[D]=0;for(D=28191;D<=28193;D++)x[D]=0;for(D=28348;D<=28358;D++)x[D]=0;for(D=28402;D<=28432;D++)x[D]=0;for(D=28462;D<=28492;D++)x[D]=0;for(D=29118;D<=29122;D++)x[D]=0;for(D=29168;D<=29172;D++)x[D]=0;for(D=29177;D<=29185;D++)x[D]=0;for(D=29187;D<=29195;D++)x[D]=0;for(D=29900;D<=29903;D++)x[D]=0;for(D=30161;D<=30179;D++)x[D]=0;for(D=30491;D<=30494;D++)x[D]=0;for(D=30729;D<=30732;D++)x[D]=0;for(D=31251;D<=31259;D++)x[D]=0;for(D=31265;D<=31268;D++)x[D]=0;for(D=31275;D<=31279;D++)x[D]=0;for(D=31281;D<=31297;D++)x[D]=0;for(D=31461;D<=31469;D++)x[D]=0;for(D=31491;D<=31495;D++)x[D]=0;for(D=31917;D<=31922;D++)x[D]=0;for(D=31965;D<=32e3;D++)x[D]=0;for(D=32001;D<=32003;D++)x[D]=2;for(D=32005;D<=32031;D++)x[D]=2;for(D=32033;D<=32060;D++)x[D]=2;for(D=32064;D<=32067;D++)x[D]=2;for(D=32074;D<=32077;D++)x[D]=2;for(D=32081;D<=32086;D++)x[D]=0;for(D=32107;D<=32130;D++)x[D]=0;for(D=32133;D<=32158;D++)x[D]=0;for(D=32164;D<=32167;D++)x[D]=2;for(D=32180;D<=32199;D++)x[D]=0;for(D=32201;D<=32260;D++)x[D]=0;for(D=32301;D<=32360;D++)x[D]=0;for(D=32601;D<=32662;D++)x[D]=0;for(D=32664;D<=32667;D++)x[D]=2;for(D=32701;D<=32761;D++)x[D]=0;for(D=53001;D<=53004;D++)x[D]=0;for(D=53008;D<=53019;D++)x[D]=0;for(D=53021;D<=53032;D++)x[D]=0;for(D=53034;D<=53037;D++)x[D]=0;for(D=53042;D<=53046;D++)x[D]=0;for(D=53074;D<=53080;D++)x[D]=0;for(D=54001;D<=54004;D++)x[D]=0;for(D=54008;D<=54019;D++)x[D]=0;for(D=54021;D<=54032;D++)x[D]=0;for(D=54034;D<=54037;D++)x[D]=0;for(D=54042;D<=54046;D++)x[D]=0;for(D=54048;D<=54053;D++)x[D]=0;for(D=54074;D<=54080;D++)x[D]=0;for(D=54098;D<=54101;D++)x[D]=0;for(D=102001;D<=102040;D++)x[D]=0;for(D=102042;D<=102063;D++)x[D]=0;for(D=102065;D<=102067;D++)x[D]=0;for(D=102070;D<=102117;D++)x[D]=0;for(D=102122;D<=102216;D++)x[D]=0;for(D=102221;D<=102377;D++)x[D]=0;for(D=102382;D<=102388;D++)x[D]=0;for(D=102389;D<=102398;D++)x[D]=2;for(D=102399;D<=102444;D++)x[D]=0;for(D=102445;D<=102447;D++)x[D]=2;for(D=102448;D<=102458;D++)x[D]=0;for(D=102459;D<=102468;D++)x[D]=2;for(D=102469;D<=102499;D++)x[D]=0;for(D=102500;D<=102519;D++)x[D]=1;for(D=102520;D<=102524;D++)x[D]=0;for(D=102525;D<=102529;D++)x[D]=2;for(D=102530;D<=102588;D++)x[D]=0;for(D=102590;D<=102598;D++)x[D]=0;for(D=102601;D<=102603;D++)x[D]=0;for(D=102605;D<=102628;D++)x[D]=0;for(D=102629;D<=102646;D++)x[D]=2;for(D=102648;D<=102700;D++)x[D]=2;for(D=102701;D<=102703;D++)x[D]=0;for(D=102707;D<=102730;D++)x[D]=2;for(D=102733;D<=102758;D++)x[D]=2;for(D=102767;D<=102900;D++)x[D]=0;for(D=102901;D<=102933;D++)x[D]=2;for(D=102934;D<=102950;D++)x[D]=13;for(D=102951;D<=102955;D++)x[D]=0;for(D=102961;D<=102963;D++)x[D]=0;for(D=102965;D<=102969;D++)x[D]=0;for(D=102971;D<=102973;D++)x[D]=0;for(D=102975;D<=102989;D++)x[D]=0;for(D=102990;D<=102992;D++)x[D]=1;for(D=102997;D<=103002;D++)x[D]=0;for(D=103003;D<=103008;D++)x[D]=2;for(D=103009;D<=103011;D++)x[D]=0;for(D=103012;D<=103014;D++)x[D]=2;for(D=103019;D<=103021;D++)x[D]=0;for(D=103022;D<=103024;D++)x[D]=2;for(D=103029;D<=103031;D++)x[D]=0;for(D=103032;D<=103034;D++)x[D]=2;for(D=103065;D<=103068;D++)x[D]=0;for(D=103074;D<=103076;D++)x[D]=0;for(D=103077;D<=103079;D++)x[D]=1;for(D=103080;D<=103082;D++)x[D]=0;for(D=103083;D<=103085;D++)x[D]=2;for(D=103090;D<=103093;D++)x[D]=0;for(D=103097;D<=103099;D++)x[D]=0;for(D=103100;D<=103102;D++)x[D]=2;for(D=103107;D<=103109;D++)x[D]=0;for(D=103110;D<=103112;D++)x[D]=2;for(D=103113;D<=103116;D++)x[D]=0;for(D=103117;D<=103120;D++)x[D]=2;for(D=103153;D<=103157;D++)x[D]=0;for(D=103158;D<=103162;D++)x[D]=2;for(D=103163;D<=103165;D++)x[D]=0;for(D=103166;D<=103168;D++)x[D]=1;for(D=103169;D<=103171;D++)x[D]=2;for(D=103186;D<=103188;D++)x[D]=0;for(D=103189;D<=103191;D++)x[D]=2;for(D=103192;D<=103195;D++)x[D]=0;for(D=103196;D<=103199;D++)x[D]=2;for(D=103200;D<=103224;D++)x[D]=0;for(D=103225;D<=103227;D++)x[D]=1;for(D=103232;D<=103237;D++)x[D]=0;for(D=103238;D<=103243;D++)x[D]=2;for(D=103244;D<=103246;D++)x[D]=0;for(D=103247;D<=103249;D++)x[D]=2;for(D=103254;D<=103256;D++)x[D]=0;for(D=103257;D<=103259;D++)x[D]=2;for(D=103264;D<=103266;D++)x[D]=0;for(D=103267;D<=103269;D++)x[D]=2;for(D=103300;D<=103375;D++)x[D]=0;for(D=103381;D<=103383;D++)x[D]=0;for(D=103384;D<=103386;D++)x[D]=1;for(D=103387;D<=103389;D++)x[D]=0;for(D=103390;D<=103392;D++)x[D]=2;for(D=103397;D<=103399;D++)x[D]=0;for(D=103400;D<=103471;D++)x[D]=2;for(D=103476;D<=103478;D++)x[D]=0;for(D=103479;D<=103481;D++)x[D]=2;for(D=103486;D<=103488;D++)x[D]=0;for(D=103489;D<=103491;D++)x[D]=2;for(D=103492;D<=103495;D++)x[D]=0;for(D=103496;D<=103499;D++)x[D]=2;for(D=103528;D<=103543;D++)x[D]=0;for(D=103544;D<=103548;D++)x[D]=2;for(D=103549;D<=103551;D++)x[D]=0;for(D=103552;D<=103554;D++)x[D]=1;for(D=103555;D<=103557;D++)x[D]=2;for(D=103558;D<=103560;D++)x[D]=0;for(D=103571;D<=103573;D++)x[D]=0;for(D=103574;D<=103576;D++)x[D]=2;for(D=103577;D<=103580;D++)x[D]=0;for(D=103581;D<=103583;D++)x[D]=2;for(D=103595;D<=103694;D++)x[D]=0;for(D=103696;D<=103699;D++)x[D]=0;for(D=103700;D<=103793;D++)x[D]=2;for(D=103794;D<=103887;D++)x[D]=0;for(D=103900;D<=103971;D++)x[D]=2},5548:(qe,xe,T)=>{"use strict";T.d(xe,{BD:()=>ce,Cb:()=>J,G1:()=>ae,Gv:()=>Oe,HH:()=>H,JR:()=>ze,TC:()=>$,Tn:()=>ge,Ue:()=>U,VK:()=>re,Wi:()=>ie,Ye:()=>Q,Zp:()=>he,aO:()=>ne,al:()=>W,bA:()=>fe,bd:()=>Pe,be:()=>ee,bf:()=>Z,cS:()=>Le,cv:()=>ye,dp:()=>le,fS:()=>we,kK:()=>_e,op:()=>Ce,pp:()=>ue,r3:()=>me,re:()=>Be,sU:()=>X,t8:()=>Te,wp:()=>Ae,wz:()=>se,xE:()=>Ke,y8:()=>je});var D=T(62208),x=T(2004),w=T(65401);function U(Ne=Ke){return[Ne[0],Ne[1],Ne[2],Ne[3],Ne[4],Ne[5]]}function W(Ne,Ie,We,Se,He,$e,et=U()){return et[0]=Ne,et[1]=Ie,et[2]=We,et[3]=Se,et[4]=He,et[5]=$e,et}function H(Ne,Ie){const We=isFinite(Ne[2])||isFinite(Ne[5]);return new x.Z(We?{xmin:Ne[0],xmax:Ne[3],ymin:Ne[1],ymax:Ne[4],zmin:Ne[2],zmax:Ne[5],spatialReference:Ie}:{xmin:Ne[0],xmax:Ne[3],ymin:Ne[1],ymax:Ne[4],spatialReference:Ie})}function $(Ne,Ie){Ne[0]=Math.min(Ne[0],Ie[0]),Ne[1]=Math.min(Ne[1],Ie[1]),Ne[2]=Math.min(Ne[2],Ie[2]),Ne[3]=Math.max(Ne[3],Ie[3]),Ne[4]=Math.max(Ne[4],Ie[4]),Ne[5]=Math.max(Ne[5],Ie[5])}function re(Ne,Ie){Ne[0]=Math.min(Ne[0],Ie[0]),Ne[1]=Math.min(Ne[1],Ie[1]),Ne[3]=Math.max(Ne[3],Ie[2]),Ne[4]=Math.max(Ne[4],Ie[3])}function ue(Ne,Ie){Ne[0]=Math.min(Ne[0],Ie[0]),Ne[1]=Math.min(Ne[1],Ie[1]),Ne[2]=Math.min(Ne[2],Ie[2]),Ne[3]=Math.max(Ne[3],Ie[0]),Ne[4]=Math.max(Ne[4],Ie[1]),Ne[5]=Math.max(Ne[5],Ie[2])}function ae(Ne,Ie,We=0,Se=Ie.length/3){let He=Ne[0],$e=Ne[1],et=Ne[2],nt=Ne[3],it=Ne[4],Xe=Ne[5];for(let rt=0;rt<Se;rt++)He=Math.min(He,Ie[We+3*rt]),$e=Math.min($e,Ie[We+3*rt+1]),et=Math.min(et,Ie[We+3*rt+2]),nt=Math.max(nt,Ie[We+3*rt]),it=Math.max(it,Ie[We+3*rt+1]),Xe=Math.max(Xe,Ie[We+3*rt+2]);Ne[0]=He,Ne[1]=$e,Ne[2]=et,Ne[3]=nt,Ne[4]=it,Ne[5]=Xe}function ie(Ne,Ie,We){const Se=Ie.length;let He=Ne[0],$e=Ne[1],et=Ne[2],nt=Ne[3],it=Ne[4],Xe=Ne[5];if(We)for(let rt=0;rt<Se;rt++){const Ze=Ie[rt];He=Math.min(He,Ze[0]),$e=Math.min($e,Ze[1]),et=Math.min(et,Ze[2]),nt=Math.max(nt,Ze[0]),it=Math.max(it,Ze[1]),Xe=Math.max(Xe,Ze[2])}else for(let rt=0;rt<Se;rt++){const Ze=Ie[rt];He=Math.min(He,Ze[0]),$e=Math.min($e,Ze[1]),nt=Math.max(nt,Ze[0]),it=Math.max(it,Ze[1])}Ne[0]=He,Ne[1]=$e,Ne[2]=et,Ne[3]=nt,Ne[4]=it,Ne[5]=Xe}function X(Ne){for(let Ie=0;Ie<6;Ie++)if(!isFinite(Ne[Ie]))return!1;return!0}function Z(Ne){return Ne[0]>=Ne[3]?0:Ne[3]-Ne[0]}function Q(Ne){return Ne[1]>=Ne[4]?0:Ne[4]-Ne[1]}function J(Ne){return Ne[2]>=Ne[5]?0:Ne[5]-Ne[2]}function se(Ne){const Ie=Z(Ne),We=J(Ne),Se=Q(Ne);return Math.sqrt(Ie*Ie+We*We+Se*Se)}function ee(Ne,Ie=[0,0,0]){return Ie[0]=Ne[0]+Z(Ne)/2,Ie[1]=Ne[1]+Q(Ne)/2,Ie[2]=Ne[2]+J(Ne)/2,Ie}function le(Ne,Ie=[0,0,0]){return Ie[0]=Z(Ne),Ie[1]=Q(Ne),Ie[2]=J(Ne),Ie}function ne(Ne){return Math.max(Z(Ne),J(Ne),Q(Ne))}function ce(Ne,Ie){return Ie[0]>=Ne[0]&&Ie[1]>=Ne[1]&&Ie[2]>=Ne[2]&&Ie[0]<=Ne[3]&&Ie[1]<=Ne[4]&&Ie[2]<=Ne[5]}function me(Ne,Ie){return Ie[0]>=Ne[0]&&Ie[1]>=Ne[1]&&Ie[2]>=Ne[2]&&Ie[3]<=Ne[3]&&Ie[4]<=Ne[4]&&Ie[5]<=Ne[5]}function _e(Ne,Ie){return Math.max(Ie[0],Ne[0])<=Math.min(Ie[3],Ne[3])&&Math.max(Ie[1],Ne[1])<=Math.min(Ie[4],Ne[4])&&Math.max(Ie[2],Ne[2])<=Math.min(Ie[5],Ne[5])}function he(Ne,Ie){return!!(0,D.Wi)(Ie)||_e(Ne,Ie)}function ye(Ne,Ie,We,Se,He=Ne){return He[0]=Ne[0]+Ie,He[1]=Ne[1]+We,He[2]=Ne[2]+Se,He[3]=Ne[3]+Ie,He[4]=Ne[4]+We,He[5]=Ne[5]+Se,He}function fe(Ne,Ie,We=Ne){const Se=Ne[0]+Z(Ne)/2,He=Ne[1]+Q(Ne)/2,$e=Ne[2]+J(Ne)/2;return We[0]=Se+(Ne[0]-Se)*Ie,We[1]=He+(Ne[1]-He)*Ie,We[2]=$e+(Ne[2]-$e)*Ie,We[3]=Se+(Ne[3]-Se)*Ie,We[4]=He+(Ne[4]-He)*Ie,We[5]=$e+(Ne[5]-$e)*Ie,We}function Ce(Ne,Ie,We=Ne){return We[0]=Ie[0],We[1]=Ie[1],We[2]=Ie[2],We!==Ne&&(We[3]=Ne[3],We[4]=Ne[4],We[5]=Ne[5]),We}function ge(Ne,Ie,We=Ne){return We[3]=Ie[0],We[4]=Ie[1],We[5]=Ie[2],We!==Ne&&(We[0]=Ne[0],We[1]=Ne[1],We[2]=Ne[2]),Ne}function Te(Ne,Ie){return Ne[0]=Ie[0],Ne[1]=Ie[1],Ne[2]=Ie[2],Ne[3]=Ie[3],Ne[4]=Ie[4],Ne[5]=Ie[5],Ne}function Le(Ne){return Ne?Te(Ne,Oe):U(Oe)}function je(Ne,Ie){return Ie||(Ie=(0,w.Ue)()),Ie[0]=Ne[0],Ie[1]=Ne[1],Ie[2]=Ne[3],Ie[3]=Ne[4],Ie}function ze(Ne,Ie){return Ne[0]=Ie[0],Ne[1]=Ie[1],Ne[2]=Number.NEGATIVE_INFINITY,Ne[3]=Ie[2],Ne[4]=Ie[3],Ne[5]=Number.POSITIVE_INFINITY,Ne}function Ee(Ne){return 6===Ne.length}function Ae(Ne){return 0===Z(Ne)&&0===Q(Ne)&&0===J(Ne)}function we(Ne,Ie,We){if((0,D.Wi)(Ne)||(0,D.Wi)(Ie))return Ne===Ie;if(!Ee(Ne)||!Ee(Ie))return!1;if(We){for(let Se=0;Se<Ne.length;Se++)if(!We(Ne[Se],Ie[Se]))return!1}else for(let Se=0;Se<Ne.length;Se++)if(Ne[Se]!==Ie[Se])return!1;return!0}function Be(Ne,Ie,We,Se,He,$e){return W(Ne,Ie,We,Se,He,$e,Ve)}const Pe=[-1/0,-1/0,-1/0,1/0,1/0,1/0],Oe=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Ke=[0,0,0,0,0,0],Ve=U()},65401:(qe,xe,T)=>{"use strict";T.d(xe,{BD:()=>se,Cb:()=>Z,Gv:()=>we,HH:()=>re,Ho:()=>ue,I7:()=>le,JG:()=>H,OC:()=>de,Qn:()=>ne,SO:()=>Q,TE:()=>fe,Ue:()=>W,Wi:()=>oe,Zm:()=>me,al:()=>G,bd:()=>Ae,be:()=>J,bf:()=>X,cS:()=>Le,cv:()=>ve,d9:()=>Y,fS:()=>Ee,hr:()=>ee,jE:()=>ce,jV:()=>ye,jn:()=>ae,kK:()=>_e,oJ:()=>$,r3:()=>he,sU:()=>ie,wp:()=>ze}),T(8314);var x=T(21286),w=T(62208),B=T(2004);function W(Oe=Be){return[Oe[0],Oe[1],Oe[2],Oe[3]]}function Y(Oe){return[Oe[0],Oe[1],Oe[2],Oe[3]]}function H(Oe,Ke){return Oe!==Ke&&(Oe[0]=Ke[0],Oe[1]=Ke[1],Oe[2]=Ke[2],Oe[3]=Ke[3]),Oe}function G(Oe,Ke,Ve,Ne,Ie=W()){return Ie[0]=Oe,Ie[1]=Ke,Ie[2]=Ve,Ie[3]=Ne,Ie}function $(Oe,Ke=W()){return Ke[0]=Oe.xmin,Ke[1]=Oe.ymin,Ke[2]=Oe.xmax,Ke[3]=Oe.ymax,Ke}function re(Oe,Ke){return new B.Z({xmin:Oe[0],ymin:Oe[1],xmax:Oe[2],ymax:Oe[3],spatialReference:Ke})}function ue(Oe,Ke){Ke[0]<Oe[0]&&(Oe[0]=Ke[0]),Ke[0]>Oe[2]&&(Oe[2]=Ke[0]),Ke[1]<Oe[1]&&(Oe[1]=Ke[1]),Ke[1]>Oe[3]&&(Oe[3]=Ke[1])}function ae(Oe,Ke,Ve){if((0,w.Wi)(Ke))H(Ve,Oe);else if("length"in Ke)je(Ke)?(Ve[0]=Math.min(Oe[0],Ke[0]),Ve[1]=Math.min(Oe[1],Ke[1]),Ve[2]=Math.max(Oe[2],Ke[2]),Ve[3]=Math.max(Oe[3],Ke[3])):2!==Ke.length&&3!==Ke.length||(Ve[0]=Math.min(Oe[0],Ke[0]),Ve[1]=Math.min(Oe[1],Ke[1]),Ve[2]=Math.max(Oe[2],Ke[0]),Ve[3]=Math.max(Oe[3],Ke[1]));else switch(Ke.type){case"extent":Ve[0]=Math.min(Oe[0],Ke.xmin),Ve[1]=Math.min(Oe[1],Ke.ymin),Ve[2]=Math.max(Oe[2],Ke.xmax),Ve[3]=Math.max(Oe[3],Ke.ymax);break;case"point":Ve[0]=Math.min(Oe[0],Ke.x),Ve[1]=Math.min(Oe[1],Ke.y),Ve[2]=Math.max(Oe[2],Ke.x),Ve[3]=Math.max(Oe[3],Ke.y)}}function oe(Oe,Ke,Ve=Oe){const Ne=Ke.length;let Ie=Oe[0],We=Oe[1],Se=Oe[2],He=Oe[3];for(let $e=0;$e<Ne;$e++){const et=Ke[$e];Ie=Math.min(Ie,et[0]),We=Math.min(We,et[1]),Se=Math.max(Se,et[0]),He=Math.max(He,et[1])}return Ve[0]=Ie,Ve[1]=We,Ve[2]=Se,Ve[3]=He,Ve}function ie(Oe){for(let Ke=0;Ke<4;Ke++)if(!isFinite(Oe[Ke]))return!1;return!0}function X(Oe){return(0,w.Wi)(Oe)||Oe[0]>=Oe[2]?0:Oe[2]-Oe[0]}function Z(Oe){return Oe[1]>=Oe[3]?0:Oe[3]-Oe[1]}function Q(Oe){return X(Oe)*Z(Oe)}function J(Oe,Ke=[0,0]){return Ke[0]=(Oe[0]+Oe[2])/2,Ke[1]=(Oe[1]+Oe[3])/2,Ke}function se(Oe,Ke){return ce(Oe,Ke[0],Ke[1])}function ee(Oe,Ke){const Ve=Ke[3],Ie=Math.abs(Ke[0]-.5*(Oe[0]+Oe[2])),We=.5*(Oe[2]-Oe[0]);if(Ie>Ve+We)return!1;const He=.5*(Oe[3]-Oe[1]),$e=Math.abs(Ke[1]-.5*(Oe[1]+Oe[3]));if($e>Ve+He)return!1;if(Ie<We||$e<He)return!0;const et=Ie-We,nt=$e-He;return et*et+nt*nt<=Ve*Ve}function le(Oe,Ke,Ve){const Ne=Oe[0],Ie=Oe[1],We=Oe[2],Se=Oe[3],{x:He,y:$e}=Ke,{x:et,y:nt}=Ve,it=(st,Mt)=>(nt-$e)*st+(He-et)*Mt+(et*$e-He*nt)<0,Xe=it(Ne,Se),rt=it(We,Se),Ze=it(We,Ie),lt=it(Ne,Ie);return!(Xe===rt&&rt===Ze&&Ze===lt&&lt===Xe||He<Ne&&et<Ne||He>We&&et>We||$e>Se&&nt>Se||$e<Ie&&nt<Ie)}function ne(Oe,Ke){return ce(Oe,Ke.x,Ke.y)}function ce(Oe,Ke,Ve){return Ke>=Oe[0]&&Ve>=Oe[1]&&Ke<=Oe[2]&&Ve<=Oe[3]}function de(Oe,Ke,Ve,Ne){return Ke>=Oe[0]-Ne&&Ve>=Oe[1]-Ne&&Ke<=Oe[2]+Ne&&Ve<=Oe[3]+Ne}function me(Oe,Ke,Ve){return Ke[0]>=Oe[0]-Ve&&Ke[1]>=Oe[1]-Ve&&Ke[0]<=Oe[2]+Ve&&Ke[1]<=Oe[3]+Ve}function _e(Oe,Ke){return Math.max(Ke[0],Oe[0])<=Math.min(Ke[2],Oe[2])&&Math.max(Ke[1],Oe[1])<=Math.min(Ke[3],Oe[3])}function he(Oe,Ke){return Ke[0]>=Oe[0]&&Ke[2]<=Oe[2]&&Ke[1]>=Oe[1]&&Ke[3]<=Oe[3]}function ye(Oe,Ke,Ve){if((0,w.Wi)(Ke))return H(Ve,Oe);const Ne=Ke[0],Ie=Ke[1],We=Ke[2],Se=Ke[3];return Ve[0]=(0,x.uZ)(Oe[0],Ne,We),Ve[1]=(0,x.uZ)(Oe[1],Ie,Se),Ve[2]=(0,x.uZ)(Oe[2],Ne,We),Ve[3]=(0,x.uZ)(Oe[3],Ie,Se),Ve}function fe(Oe,Ke){const Ne=(Oe[1]+Oe[3])/2,Ie=Math.max(Math.abs(Ke[0]-(Oe[0]+Oe[2])/2)-X(Oe)/2,0),We=Math.max(Math.abs(Ke[1]-Ne)-Z(Oe)/2,0);return Math.sqrt(Ie*Ie+We*We)}function ve(Oe,Ke,Ve,Ne=Oe){return Ne[0]=Oe[0]+Ke,Ne[1]=Oe[1]+Ve,Ne[2]=Oe[2]+Ke,Ne[3]=Oe[3]+Ve,Ne}function Le(Oe){return Oe?H(Oe,we):W(we)}function je(Oe){return null!=Oe&&4===Oe.length}function ze(Oe){return!(0!==X(Oe)&&isFinite(Oe[0])||0!==Z(Oe)&&isFinite(Oe[1]))}function Ee(Oe,Ke){return je(Oe)&&je(Ke)?Oe[0]===Ke[0]&&Oe[1]===Ke[1]&&Oe[2]===Ke[2]&&Oe[3]===Ke[3]:Oe===Ke}const Ae=[-1/0,-1/0,1/0,1/0],we=[1/0,1/0,-1/0,-1/0],Be=[0,0,0,0]},32442:(qe,xe,T)=>{"use strict";function D(X){return void 0!==X.xmin&&void 0!==X.ymin&&void 0!==X.xmax&&void 0!==X.ymax}function x(X){return void 0!==X.points}function w(X){return void 0!==X.x&&void 0!==X.y}function B(X){return void 0!==X.paths}function U(X){return void 0!==X.rings}function W(X){return(Z,Q)=>null==Z?Q:null==Q?Z:X(Z,Q)}T.d(xe,{$P:()=>G,C6:()=>re,Yg:()=>$,lC:()=>ae});const Y=W(Math.min),H=W(Math.max);function G(X,Z){return B(Z)?re(X,Z.paths,!1,!1):U(Z)?re(X,Z.rings,!1,!1):x(Z)?ae(X,Z.points,!1,!1,!1,!1):D(Z)?ue(X,Z):(w(Z)&&(X[0]=Z.x,X[1]=Z.y,X[2]=Z.x,X[3]=Z.y),X)}function $(X,Z){return B(Z)?re(X,Z.paths,!0,!1):U(Z)?re(X,Z.rings,!0,!1):x(Z)?ae(X,Z.points,!0,!1,!0,!1):D(Z)?ue(X,Z,0,0,!0,!1):(w(Z)&&(X[0]=Z.x,X[1]=Z.y,X[2]=Z.z,X[3]=Z.x,X[4]=Z.y,X[5]=Z.z),X)}function re(X,Z,Q,J){const se=Q?3:2;if(!Z.length||!Z[0].length)return null;let ee,le,ne,ce,[de,me]=Z[0][0],[_e,he]=Z[0][0];for(let ye=0;ye<Z.length;ye++){const fe=Z[ye];for(let De=0;De<fe.length;De++){const ve=fe[De],[Ce,ge]=ve;if(de=Y(de,Ce),me=Y(me,ge),_e=H(_e,Ce),he=H(he,ge),Q&&ve.length>2){const Te=ve[2];ee=Y(ee,Te),le=H(le,Te)}if(J&&ve.length>se){const Te=ve[se];ne=Y(ee,Te),ce=H(le,Te)}}}return Q?J?(X[0]=de,X[1]=me,X[2]=ee,X[3]=ne,X[4]=_e,X[5]=he,X[6]=le,X[7]=ce,X.length=8,X):(X[0]=de,X[1]=me,X[2]=ee,X[3]=_e,X[4]=he,X[5]=le,X.length=6,X):J?(X[0]=de,X[1]=me,X[2]=ne,X[3]=_e,X[4]=he,X[5]=ce,X.length=6,X):(X[0]=de,X[1]=me,X[2]=_e,X[3]=he,X.length=4,X)}function ue(X,Z,Q,J,se,ee){const le=Z.xmin,ne=Z.xmax,ce=Z.ymin,de=Z.ymax;let me=Z.zmin,_e=Z.zmax,he=Z.mmin,ye=Z.mmax;return se?(me=me||0,_e=_e||0,ee?(he=he||0,ye=ye||0,X[0]=le,X[1]=ce,X[2]=me,X[3]=he,X[4]=ne,X[5]=de,X[6]=_e,X[7]=ye,X):(X[0]=le,X[1]=ce,X[2]=me,X[3]=ne,X[4]=de,X[5]=_e,X)):ee?(he=he||0,ye=ye||0,X[0]=le,X[1]=ce,X[2]=he,X[3]=ne,X[4]=de,X[5]=ye,X):(X[0]=le,X[1]=ce,X[2]=ne,X[3]=de,X)}function ae(X,Z,Q,J,se,ee){const le=Q?3:2,ne=J&&ee,ce=Q&&se;if(!Z.length||!Z[0].length)return null;let de,me,_e,he,[ye,fe]=Z[0],[De,ve]=Z[0];for(let Ce=0;Ce<Z.length;Ce++){const ge=Z[Ce],[Te,Le]=ge;if(ye=Y(ye,Te),fe=Y(fe,Le),De=H(De,Te),ve=H(ve,Le),ce&&ge.length>2){const je=ge[2];de=Y(de,je),me=H(me,je)}if(ne&&ge.length>le){const je=ge[le];_e=Y(de,je),he=H(me,je)}}return se?(de=de||0,me=me||0,ee?(_e=_e||0,he=he||0,X[0]=ye,X[1]=fe,X[2]=de,X[3]=_e,X[4]=De,X[5]=ve,X[6]=me,X[7]=he,X):(X[0]=ye,X[1]=fe,X[2]=de,X[3]=De,X[4]=ve,X[5]=me,X)):ee?(_e=_e||0,he=he||0,X[0]=ye,X[1]=fe,X[2]=_e,X[3]=De,X[4]=ve,X[5]=he,X):(X[0]=ye,X[1]=fe,X[2]=De,X[3]=ve,X)}},60479:(qe,xe,T)=>{"use strict";T.d(xe,{ly:()=>$,oS:()=>Q,o7:()=>ze,Jj:()=>Be,Hz:()=>ge,gK:()=>oe,ey:()=>ie,bj:()=>X,O1:()=>Z,av:()=>me,Nu:()=>fe,D_:()=>le,Eu:()=>re,q6:()=>J,or:()=>Ee,wA:()=>Pe,Vs:()=>Te,TS:()=>_e,qt:()=>De,xA:()=>ne,ct:()=>ue,fP:()=>se,n1:()=>Ae,PP:()=>Oe,P_:()=>Le,mw:()=>he,G5:()=>ve,ne:()=>ce,ek:()=>ae,Cd:()=>ee,zO:()=>we,TN:()=>Ke,ir:()=>je,v6:()=>ye,hu:()=>Ce,mc:()=>de});let D=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=9;const et=this.TypedArrayConstructor;void 0===He&&(He=9*et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}getMat(Ie,We){let Se=Ie*this.typedBufferStride;for(let He=0;He<9;He++)We[He]=this.typedBuffer[Se++];return We}setMat(Ie,We){let Se=Ie*this.typedBufferStride;for(let He=0;He<9;He++)this.typedBuffer[Se++]=We[He]}get(Ie,We){return this.typedBuffer[Ie*this.typedBufferStride+We]}set(Ie,We,Se){this.typedBuffer[Ie*this.typedBufferStride+We]=Se}copyFrom(Ie,We,Se){const He=this.typedBuffer,$e=We.typedBuffer;let et=Ie*this.typedBufferStride,nt=Se*We.typedBufferStride;for(let it=0;it<9;++it)He[et++]=$e[nt++]}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=9,Ve})(),x=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=16;const et=this.TypedArrayConstructor;void 0===He&&(He=16*et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}getMat(Ie,We){let Se=Ie*this.typedBufferStride;for(let He=0;He<16;He++)We[He]=this.typedBuffer[Se++];return We}setMat(Ie,We){let Se=Ie*this.typedBufferStride;for(let He=0;He<16;He++)this.typedBuffer[Se++]=We[He]}get(Ie,We){return this.typedBuffer[Ie*this.typedBufferStride+We]}set(Ie,We,Se){this.typedBuffer[Ie*this.typedBufferStride+We]=Se}copyFrom(Ie,We,Se){const He=this.typedBuffer,$e=We.typedBuffer;let et=Ie*this.typedBufferStride,nt=Se*We.typedBufferStride;for(let it=0;it<16;++it)He[et++]=$e[nt++]}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=16,Ve})(),w=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=1;const et=this.TypedArrayConstructor;void 0===He&&(He=et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}get(Ie){return this.typedBuffer[Ie*this.typedBufferStride]}set(Ie,We){this.typedBuffer[Ie*this.typedBufferStride]=We}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=1,Ve})();var B=T(67831);let U=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=2;const et=this.TypedArrayConstructor;void 0===He&&(He=2*et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}getVec(Ie,We){return(0,B.a)(We,this.typedBuffer[Ie*=this.typedBufferStride],this.typedBuffer[Ie+1])}setVec(Ie,We){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We[0],this.typedBuffer[Ie]=We[1]}get(Ie,We){return this.typedBuffer[Ie*this.typedBufferStride+We]}set(Ie,We,Se){this.typedBuffer[Ie*this.typedBufferStride+We]=Se}setValues(Ie,We,Se){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We,this.typedBuffer[Ie]=Se}copyFrom(Ie,We,Se){const He=this.typedBuffer,$e=We.typedBuffer;let et=Ie*this.typedBufferStride,nt=Se*We.typedBufferStride;He[et++]=$e[nt++],He[et]=$e[nt]}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=2,Ve})();var W=T(84161);let Y=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=3;const et=this.TypedArrayConstructor;void 0===He&&(He=3*et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}getVec(Ie,We){return(0,W.s)(We,this.typedBuffer[Ie*=this.typedBufferStride],this.typedBuffer[Ie+1],this.typedBuffer[Ie+2])}setVec(Ie,We){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We[0],this.typedBuffer[Ie++]=We[1],this.typedBuffer[Ie]=We[2]}get(Ie,We){return this.typedBuffer[Ie*this.typedBufferStride+We]}set(Ie,We,Se){this.typedBuffer[Ie*this.typedBufferStride+We]=Se}setValues(Ie,We,Se,He){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We,this.typedBuffer[Ie++]=Se,this.typedBuffer[Ie]=He}copyFrom(Ie,We,Se){const He=this.typedBuffer,$e=We.typedBuffer;let et=Ie*this.typedBufferStride,nt=Se*We.typedBufferStride;He[et++]=$e[nt++],He[et++]=$e[nt++],He[et]=$e[nt]}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=3,Ve})();var H=T(993);let G=(()=>{class Ve{constructor(Ie,We,Se=0,He,$e){this.TypedArrayConstructor=Ie,this.elementCount=4;const et=this.TypedArrayConstructor;void 0===He&&(He=4*et.BYTES_PER_ELEMENT);const nt=0===We.byteLength?0:Se;this.typedBuffer=null==$e?new et(We,nt):new et(We,nt,($e-Se)/et.BYTES_PER_ELEMENT),this.typedBufferStride=He/et.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(Ie,We,Se=this.count-We){const He=this.typedBuffer.byteOffset+We*this.stride;return new Ie(this.buffer,He,this.stride,He+Se*this.stride)}getVec(Ie,We){return Ie*=this.typedBufferStride,(0,H.s)(We,this.typedBuffer[Ie++],this.typedBuffer[Ie++],this.typedBuffer[Ie++],this.typedBuffer[Ie])}setVec(Ie,We){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We[0],this.typedBuffer[Ie++]=We[1],this.typedBuffer[Ie++]=We[2],this.typedBuffer[Ie]=We[3]}get(Ie,We){return this.typedBuffer[Ie*this.typedBufferStride+We]}set(Ie,We,Se){this.typedBuffer[Ie*this.typedBufferStride+We]=Se}setValues(Ie,We,Se,He,$e){Ie*=this.typedBufferStride,this.typedBuffer[Ie++]=We,this.typedBuffer[Ie++]=Se,this.typedBuffer[Ie++]=He,this.typedBuffer[Ie]=$e}copyFrom(Ie,We,Se){const He=this.typedBuffer,$e=We.typedBuffer;let et=Ie*this.typedBufferStride,nt=Se*We.typedBufferStride;He[et++]=$e[nt++],He[et++]=$e[nt++],He[et++]=$e[nt++],He[et]=$e[nt]}get buffer(){return this.typedBuffer.buffer}}return Ve.ElementCount=4,Ve})(),$=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),re=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),ue=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),ae=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),oe=(()=>{class Ve extends D{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),ie=(()=>{class Ve extends D{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),X=(()=>{class Ve extends x{constructor(Ie,We=0,Se,He){super(Float32Array,Ie,We,Se,He),this.elementType="f32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f32",Ve})(),Z=(()=>{class Ve extends x{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),Q=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),J=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),se=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),ee=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Float64Array,Ie,We,Se,He),this.elementType="f64"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="f64",Ve})(),le=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Uint8Array,Ie,We,Se,He),this.elementType="u8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u8",Ve})(),ne=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Uint8Array,Ie,We,Se,He),this.elementType="u8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u8",Ve})(),ce=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Uint8Array,Ie,We,Se,He),this.elementType="u8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u8",Ve})(),de=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Uint8Array,Ie,We,Se,He),this.elementType="u8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u8",Ve})(),me=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Uint16Array,Ie,We,Se,He),this.elementType="u16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u16",Ve})(),_e=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Uint16Array,Ie,We,Se,He),this.elementType="u16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u16",Ve})(),he=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Uint16Array,Ie,We,Se,He),this.elementType="u16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u16",Ve})(),ye=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Uint16Array,Ie,We,Se,He),this.elementType="u16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u16",Ve})(),fe=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Uint32Array,Ie,We,Se,He),this.elementType="u32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u32",Ve})(),De=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Uint32Array,Ie,We,Se,He),this.elementType="u32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u32",Ve})(),ve=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Uint32Array,Ie,We,Se,He),this.elementType="u32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u32",Ve})(),Ce=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Uint32Array,Ie,We,Se,He),this.elementType="u32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="u32",Ve})(),ge=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Int8Array,Ie,We,Se,He),this.elementType="i8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i8",Ve})(),Te=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Int8Array,Ie,We,Se,He),this.elementType="i8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i8",Ve})(),Le=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Int8Array,Ie,We,Se,He),this.elementType="i8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i8",Ve})(),je=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Int8Array,Ie,We,Se,He),this.elementType="i8"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i8",Ve})(),ze=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Int16Array,Ie,We,Se,He),this.elementType="i16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i16",Ve})(),Ee=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Int16Array,Ie,We,Se,He),this.elementType="i16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i16",Ve})(),Ae=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Int16Array,Ie,We,Se,He),this.elementType="i16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i16",Ve})(),we=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Int16Array,Ie,We,Se,He),this.elementType="i16"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i16",Ve})(),Be=(()=>{class Ve extends w{constructor(Ie,We=0,Se,He){super(Int32Array,Ie,We,Se,He),this.elementType="i32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i32",Ve})(),Pe=(()=>{class Ve extends U{constructor(Ie,We=0,Se,He){super(Int32Array,Ie,We,Se,He),this.elementType="i32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i32",Ve})(),Oe=(()=>{class Ve extends Y{constructor(Ie,We=0,Se,He){super(Int32Array,Ie,We,Se,He),this.elementType="i32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i32",Ve})(),Ke=(()=>{class Ve extends G{constructor(Ie,We=0,Se,He){super(Int32Array,Ie,We,Se,He),this.elementType="i32"}slice(Ie,We){return this.sliceBuffer(Ve,Ie,We)}static fromTypedArray(Ie,We){return new Ve(Ie.buffer,Ie.byteOffset,We,Ie.byteOffset+Ie.byteLength)}}return Ve.ElementType="i32",Ve})()},96286:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>x});const x=T(63290).Z.getLogger("esri.views.3d.support.buffer.math")},81096:(qe,xe,T)=>{"use strict";function x(W){switch(W){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function w(W){switch(W){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function B(W){switch(W){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function U(W){switch(W){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}T.d(xe,{B3:()=>w,Op:()=>U,U:()=>B,n1:()=>x}),T(8314)},60490:(qe,xe,T)=>{"use strict";T.d(xe,{gS:()=>$});var D=T(81096);function $(re,ue){return new re(new ArrayBuffer(ue*re.ElementCount*(0,D.n1)(re.ElementType)))}Object.freeze(Object.defineProperty({__proto__:null,copy:function x(re,ue,ae){const oe=re.typedBuffer,ie=re.typedBufferStride,X=ue.typedBuffer,Z=ue.typedBufferStride,Q=ae?ae.count:ue.count;let J=(ae&&ae.dstIndex?ae.dstIndex:0)*ie,se=(ae&&ae.srcIndex?ae.srcIndex:0)*Z;for(let ee=0;ee<Q;++ee){for(let le=0;le<9;++le)oe[J+le]=X[se+le];J+=ie,se+=Z}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function B(re,ue,ae){const oe=re.typedBuffer,ie=re.typedBufferStride,X=ue.typedBuffer,Z=ue.typedBufferStride,Q=ae?ae.count:ue.count;let J=(ae&&ae.dstIndex?ae.dstIndex:0)*ie,se=(ae&&ae.srcIndex?ae.srcIndex:0)*Z;for(let ee=0;ee<Q;++ee){for(let le=0;le<16;++le)oe[J+le]=X[se+le];J+=ie,se+=Z}}},Symbol.toStringTag,{value:"Module"})),T(98148),T(35995),T(9554),T(63470)},27105:(qe,xe,T)=>{"use strict";T.d(xe,{$G:()=>x,a:()=>B,tO:()=>w});var D=T(25748);function x(Y){return Y?Y.hasZ?[Y.xmax-Y.xmin/2,Y.ymax-Y.ymin/2,Y.zmax-Y.zmin/2]:[Y.xmax-Y.xmin/2,Y.ymax-Y.ymin/2]:null}function w(Y){return Y?B(Y.rings,Y.hasZ):null}function B(Y,H){if(!Y||!Y.length)return null;const G=[],$=[],re=H?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let ue=0,ae=Y.length;ue<ae;ue++){const oe=U(Y[ue],H,re);oe&&$.push(oe)}if($.sort((ue,ae)=>{let oe=ue[2]-ae[2];return 0===oe&&H&&(oe=ue[4]-ae[4]),oe}),$.length&&(G[0]=$[0][0],G[1]=$[0][1],H&&(G[2]=$[0][3]),(G[0]<re[0]||G[0]>re[1]||G[1]<re[2]||G[1]>re[3]||H&&(G[2]<re[4]||G[2]>re[5]))&&(G.length=0)),!G.length){const ue=Y[0]&&Y[0].length?function W(Y,H){const G=H?[0,0,0]:[0,0],$=H?[0,0,0]:[0,0];let re=0,ue=0,ae=0,oe=0;for(let ie=0,X=Y.length;ie<X-1;ie++){const Z=Y[ie],Q=Y[ie+1];if(Z&&Q){G[0]=Z[0],G[1]=Z[1],$[0]=Q[0],$[1]=Q[1],H&&Z.length>2&&Q.length>2&&(G[2]=Z[2],$[2]=Q[2]);const J=(0,D.xA)(G,$);if(J){re+=J;const se=(0,D.Gi)(Z,Q);ue+=J*se[0],ae+=J*se[1],H&&se.length>2&&(oe+=J*se[2])}}}return re>0?H?[ue/re,ae/re,oe/re]:[ue/re,ae/re]:Y.length?Y[0]:null}(Y[0],H):null;if(!ue)return null;G[0]=ue[0],G[1]=ue[1],H&&ue.length>2&&(G[2]=ue[2])}return G}function U(Y,H,G){let $=0,re=0,ue=0,ae=0,oe=0;const ie=Y.length?Y[0][0]:0,X=Y.length?Y[0][1]:0,Z=Y.length&&H?Y[0][2]:0;for(let J=0;J<Y.length;J++){const se=Y[J],ee=Y[(J+1)%Y.length],[le,ne,ce]=se,de=le-ie,me=ne-X,_e=H?ce-Z:void 0,[he,ye,fe]=ee,De=he-ie,ve=ye-X,Ce=H?fe-Z:void 0,ge=de*ve-De*me;if(ae+=ge,$+=(de+De)*ge,re+=(me+ve)*ge,H&&se.length>2&&ee.length>2){const Te=de*Ce-De*_e;ue+=(_e+Ce)*Te,oe+=Te}le<G[0]&&(G[0]=le),le>G[1]&&(G[1]=le),ne<G[2]&&(G[2]=ne),ne>G[3]&&(G[3]=ne),H&&(ce<G[4]&&(G[4]=ce),ce>G[5]&&(G[5]=ce))}if(ae>0&&(ae*=-1),oe>0&&(oe*=-1),!ae)return null;ae*=.5,oe*=.5;const Q=[$/(6*ae)+ie,re/(6*ae)+X,ae];return H&&(G[4]===G[5]||0===oe?(Q[3]=(G[4]+G[5])/2,Q[4]=0):(Q[3]=ue/(6*oe)+Z,Q[4]=oe)),Q}},85072:(qe,xe,T)=>{"use strict";T.d(xe,{S$:()=>ae,Ue:()=>U,Ws:()=>ue,_k:()=>re,iL:()=>G});var D=T(97535),x=T(84161),w=T(70562);function U(X){return X?{ray:(0,w.Ue)(X.ray),c0:X.c0,c1:X.c1}:{ray:(0,w.Ue)(),c0:0,c1:Number.MAX_VALUE}}function G(X,Z=U()){return(0,w.JG)(X,Z.ray),Z.c0=0,Z.c1=Number.MAX_VALUE,Z}function re(X,Z,Q=U()){const J=(0,x.l)(X.vector);return(0,w.al)(X.origin,Z,Q.ray),Q.c0=0,Q.c1=J,Q}function ue(X,Z){return oe(X,X.c0,Z)}function ae(X,Z){return oe(X,X.c1,Z)}function oe(X,Z,Q){return(0,x.a)(Q,X.ray.origin,(0,x.g)(Q,X.ray.direction,Z))}T(26242),new D.x(()=>({c0:0,c1:0,ray:null}))},33190:(qe,xe,T)=>{"use strict";T.d(xe,{CI:()=>G,Kv:()=>H,OQ:()=>W,Qg:()=>Y,aV:()=>w,lQ:()=>B,uP:()=>U,wP:()=>re});var D=T(62208);const x=[0,0];function w(oe,ie){return!!(0,D.pC)(ie)&&H(oe,ie.x,ie.y,ie.z)}function B(oe,ie){if(!ie.points||ie.points.length)return!1;for(const X of ie.points)if(!W(oe,X))return!1;return!0}function U(oe,ie){const{xmin:X,ymin:Z,zmin:Q,xmax:J,ymax:se,zmax:ee}=ie;return oe.hasZ&&ie.hasZ?H(oe,X,Z,Q)&&H(oe,X,se,Q)&&H(oe,J,se,Q)&&H(oe,J,Z,Q)&&H(oe,X,Z,ee)&&H(oe,X,se,ee)&&H(oe,J,se,ee)&&H(oe,J,Z,ee):H(oe,X,Z)&&H(oe,X,se)&&H(oe,J,se)&&H(oe,J,Z)}function W(oe,ie){return H(oe,ie[0],ie[1])}function Y(oe,ie){return H(oe,ie[0],ie[1],ie[2])}function H(oe,ie,X,Z){return ie>=oe.xmin&&ie<=oe.xmax&&X>=oe.ymin&&X<=oe.ymax&&(null==Z||!oe.hasZ||Z>=oe.zmin&&Z<=oe.zmax)}function G(oe,ie){return x[1]=ie.y,x[0]=ie.x,function $(oe,ie){return re(oe.rings,ie)}(oe,x)}function re(oe,ie){if(!oe)return!1;if(function ue(oe){return!Array.isArray(oe[0][0])}(oe))return ae(!1,oe,ie);let X=!1;for(let Z=0,Q=oe.length;Z<Q;Z++)X=ae(X,oe[Z],ie);return X}function ae(oe,ie,X){const[Z,Q]=X;let J=oe,se=0;for(let ee=0,le=ie.length;ee<le;ee++){se++,se===le&&(se=0);const[ne,ce]=ie[ee],[de,me]=ie[se];(ce<Q&&me>=Q||me<Q&&ce>=Q)&&ne+(Q-ce)/(me-ce)*(de-ne)<Z&&(J=!J)}return J}},93088:(qe,xe,T)=>{"use strict";T.d(xe,{BR:()=>J,E2:()=>Ce,Is:()=>me,Kf:()=>Q,NE:()=>he,P0:()=>Z,Tz:()=>ve,Ue:()=>G,ej:()=>le,id:()=>de,pb:()=>ie,pt:()=>ae,qf:()=>$,rF:()=>_e,yS:()=>De});var D=T(28347),x=T(84161),w=T(28093),B=T(12080),U=T(65234),W=T(78172),Y=T(41743),H=T(97126);function G(Te){const{value:Le,operations:je}=Te;return{operations:je,value:je.create(Le)}}function $(Te,Le,je){return Te.operations.setExtent(Te.value,Le,je.value),je}function ue(Te,Le,je=function re(Te){return{operations:Te,value:Te.create()}}(Te)){return je.operations=Te,Te.copy(Le,je.value),je}function ae(Te){return ue(H.s,(0,H.f)(0,0,0,(0,B.Iu)(Te).radius))}const oe=2**50;function ie(){return ue(Y.b,(0,Y.f)([0,0,0],[oe,0,0],[0,oe,0]))}function Z(Te,Le,je){return Te.operations.axisAt(Te.value,Le,W.R.Z,je)}function Q(Te,Le,je,ze){return Te.operations.axisAt(Te.value,Le,je,ze)}function J(Te,Le,je){return Te.operations.intersectRay(Te.value,Le,je)}function le(Te,Le,je){return Te.operations.intersectRayClosestSilhouette(Te.value,Le,je)}function de(Te,Le){return Te.operations.altitudeAt(Te.value,Le)}function me(Te,Le,je,ze){return Te.operations.setAltitudeAt(Te.value,Le,je,ze)}function _e(Te,Le,je,ze){return Le!==ze&&(0,D.c)(ze,Le),(0,x.s)(ye,ze[12],ze[13],ze[14]),me(Te,ye,je,ye),ze[12]=ye[0],ze[13]=ye[1],ze[14]=ye[2],ze}function he(Te,Le,je){return Te.operations.elevate(Te.value,Le,je.value)}const ye=(0,w.c)();function De(Te,Le,je,ze,Ee){return Ee[0]=(0,x.e)(Te,Le),Ee[1]=(0,x.e)(Te,je),Ee[2]=(0,x.e)(Te,ze),Ee}function ve(Te,Le,je,ze,Ee){(0,x.c)(je,Te),(0,x.c)(ge,Le),(0,x.n)(ge,ge),(0,x.f)(ze,ge,je),(0,x.f)(Ee,ze,je)}function Ce(Te,Le){return Te?(0,B.rS)(Le):Le.isGeographic?U.Z.PlateCarree:Le}const ge=(0,w.c)()},25748:(qe,xe,T)=>{"use strict";function w(X,Z){const Q=Z[0]-X[0],J=Z[1]-X[1];if(X.length>2&&Z.length>2){const se=X[2]-Z[2];return Math.sqrt(Q*Q+J*J+se*se)}return Math.sqrt(Q*Q+J*J)}function B(X,Z,Q){const J=X[0]+Q*(Z[0]-X[0]),se=X[1]+Q*(Z[1]-X[1]);return X.length>2&&Z.length>2?[J,se,X[2]+Q*(Z[2]-X[2])]:[J,se]}function W(X,Z){return B(X,Z,.5)}function Y(X){const Z=X.length;let Q=0;for(let J=0;J<Z-1;++J)Q+=w(X[J],X[J+1]);return Q}function H(X,Z){if(Z<=0)return X[0];const Q=X.length;let J=0;for(let se=0;se<Q-1;++se){const ee=w(X[se],X[se+1]);if(Z-J<ee)return B(X[se],X[se+1],(Z-J)/ee);J+=ee}return X[Q-1]}function G(X,Z,Q){const J=X.length;let se=0,ee=0,le=0;for(let ne=0;ne<J;ne++){const ce=X[ne],de=X[(ne+1)%J];let me=2;se+=ce[0]*de[1]-de[0]*ce[1],ce.length>2&&de.length>2&&Q&&(ee+=ce[0]*de[2]-de[0]*ce[2],me=3),ce.length>me&&de.length>me&&Z&&(le+=ce[0]*de[me]-de[0]*ce[me])}return se<=0&&ee<=0&&le<=0}function re(X){if("rings"in X)for(const Z of X.rings)Z.length<3||Z[0][0]===Z[Z.length-1][0]&&Z[0][1]===Z[Z.length-1][1]||Z.push([Z[0][0],Z[0][1]])}T.d(xe,{Gi:()=>W,Zy:()=>re,bu:()=>G,n8:()=>H,ok:()=>Y,xA:()=>w}),T(37053)},15176:(qe,xe,T)=>{"use strict";T.d(xe,{Wn:()=>Z,_w:()=>X,aO:()=>ae});var D=T(32442);const Y=[];function H(Q,J,se,ee){return{xmin:Q,ymin:J,xmax:se,ymax:ee}}function G(Q,J,se,ee,le,ne){return{xmin:Q,ymin:J,zmin:se,xmax:ee,ymax:le,zmax:ne}}function $(Q,J,se,ee,le,ne){return{xmin:Q,ymin:J,mmin:se,xmax:ee,ymax:le,mmax:ne}}function re(Q,J,se,ee,le,ne,ce,de){return{xmin:Q,ymin:J,zmin:se,mmin:ee,xmax:le,ymax:ne,zmax:ce,mmax:de}}function ue(Q,J=!1,se=!1){return J?se?re(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7]):G(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]):se?$(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]):H(Q[0],Q[1],Q[2],Q[3])}function ae(Q){return Q?function x(Q){return void 0!==Q.xmin&&void 0!==Q.ymin&&void 0!==Q.xmax&&void 0!==Q.ymax}(Q)?Q:function B(Q){return void 0!==Q.x&&void 0!==Q.y}(Q)?function ie(Q){const{x:J,y:se,z:ee,m:le}=Q,ne=null!=le;return null!=ee?ne?re(J,se,ee,le,J,se,ee,le):G(J,se,ee,J,se,ee):ne?$(J,se,le,J,se,le):H(J,se,J,se)}(Q):function W(Q){return void 0!==Q.rings}(Q)?X(Q):function U(Q){return void 0!==Q.paths}(Q)?Z(Q):function w(Q){return void 0!==Q.points}(Q)?function oe(Q){const{hasZ:J,hasM:se,points:ee}=Q;return ue((0,D.lC)(Y,ee,J,se),J,se)}(Q):null:null}function X(Q){const{hasZ:J,hasM:se,rings:ee}=Q,le=(0,D.C6)(Y,ee,J,se);return le?ue(le,J,se):null}function Z(Q){const{hasZ:J,hasM:se,paths:ee}=Q,le=(0,D.C6)(Y,ee,J,se);return le?ue(le,J,se):null}},8834:(qe,xe,T)=>{"use strict";T.d(xe,{Hf:()=>re,JG:()=>ue,Jp:()=>oe,NQ:()=>ne,Nu:()=>le,Ue:()=>$,Zr:()=>X,fz:()=>se,g8:()=>J,hr:()=>ie,q_:()=>ae,rN:()=>Q,tc:()=>de,xu:()=>ce,zq:()=>Z});var le,ne,fe,D=T(97535),x=T(28347),w=T(84161),B=T(28093),U=T(993),W=T(4794),Y=T(85072),H=T(90014),G=T(26242);function $(fe){return fe?[(0,H.Ue)(fe[0]),(0,H.Ue)(fe[1]),(0,H.Ue)(fe[2]),(0,H.Ue)(fe[3]),(0,H.Ue)(fe[4]),(0,H.Ue)(fe[5])]:[(0,H.Ue)(),(0,H.Ue)(),(0,H.Ue)(),(0,H.Ue)(),(0,H.Ue)(),(0,H.Ue)()]}function re(){return[(0,B.c)(),(0,B.c)(),(0,B.c)(),(0,B.c)(),(0,B.c)(),(0,B.c)(),(0,B.c)(),(0,B.c)()]}function ue(fe,De){for(let ve=0;ve<de.NUM;ve++)(0,H.JG)(fe[ve],De[ve])}function ae(fe,De,ve,Ce=ye){const ge=(0,x.m)(G.MP.get(),De,fe);(0,x.a)(ge,ge);for(let Te=0;Te<me.NUM;++Te){const Le=(0,U.t)(G.o6.get(),_e[Te],ge);(0,w.s)(Ce[Te],Le[0]/Le[3],Le[1]/Le[3],Le[2]/Le[3])}oe(ve,Ce)}function oe(fe,De){(0,H.zk)(De[ne.FAR_BOTTOM_LEFT],De[ne.NEAR_BOTTOM_LEFT],De[ne.NEAR_TOP_LEFT],fe[le.LEFT]),(0,H.zk)(De[ne.NEAR_BOTTOM_RIGHT],De[ne.FAR_BOTTOM_RIGHT],De[ne.FAR_TOP_RIGHT],fe[le.RIGHT]),(0,H.zk)(De[ne.FAR_BOTTOM_LEFT],De[ne.FAR_BOTTOM_RIGHT],De[ne.NEAR_BOTTOM_RIGHT],fe[le.BOTTOM]),(0,H.zk)(De[ne.NEAR_TOP_LEFT],De[ne.NEAR_TOP_RIGHT],De[ne.FAR_TOP_RIGHT],fe[le.TOP]),(0,H.zk)(De[ne.NEAR_BOTTOM_LEFT],De[ne.NEAR_BOTTOM_RIGHT],De[ne.NEAR_TOP_RIGHT],fe[le.NEAR]),(0,H.zk)(De[ne.FAR_BOTTOM_RIGHT],De[ne.FAR_BOTTOM_LEFT],De[ne.FAR_TOP_LEFT],fe[le.FAR])}function ie(fe,De){for(let ve=0;ve<de.NUM;ve++){const Ce=fe[ve];if(Ce[0]*De[0]+Ce[1]*De[1]+Ce[2]*De[2]+Ce[3]>=De[3])return!1}return!0}function X(fe,De){return ee(fe,(0,Y.iL)(De,he.get()))}function Z(fe,De){for(let ve=0;ve<de.NUM;ve++)if(!(0,H.Er)(fe[ve],De))return!1;return!0}function Q(fe,De,ve){return ee(fe,(0,Y._k)(De,ve,he.get()))}function J(fe,De){for(let ve=0;ve<de.NUM;ve++)if((0,H.jH)(fe[ve],De)>0)return!1;return!0}function se(fe,De){for(let ve=0;ve<de.NUM;ve++)if((0,H.U4)(fe[ve],De))return!1;return!0}function ee(fe,De){for(let ve=0;ve<de.NUM;ve++)if(!(0,H.oq)(fe[ve],De))return!1;return!0}(fe=le||(le={}))[fe.LEFT=0]="LEFT",fe[fe.RIGHT=1]="RIGHT",fe[fe.BOTTOM=2]="BOTTOM",fe[fe.TOP=3]="TOP",fe[fe.NEAR=4]="NEAR",fe[fe.FAR=5]="FAR",function(fe){fe[fe.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",fe[fe.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",fe[fe.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",fe[fe.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",fe[fe.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",fe[fe.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",fe[fe.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",fe[fe.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(ne||(ne={}));const ce={bottom:[ne.FAR_BOTTOM_RIGHT,ne.NEAR_BOTTOM_RIGHT,ne.NEAR_BOTTOM_LEFT,ne.FAR_BOTTOM_LEFT],near:[ne.NEAR_BOTTOM_LEFT,ne.NEAR_BOTTOM_RIGHT,ne.NEAR_TOP_RIGHT,ne.NEAR_TOP_LEFT],far:[ne.FAR_BOTTOM_RIGHT,ne.FAR_BOTTOM_LEFT,ne.FAR_TOP_LEFT,ne.FAR_TOP_RIGHT],right:[ne.NEAR_BOTTOM_RIGHT,ne.FAR_BOTTOM_RIGHT,ne.FAR_TOP_RIGHT,ne.NEAR_TOP_RIGHT],left:[ne.FAR_BOTTOM_LEFT,ne.NEAR_BOTTOM_LEFT,ne.NEAR_TOP_LEFT,ne.FAR_TOP_LEFT],top:[ne.FAR_TOP_LEFT,ne.NEAR_TOP_LEFT,ne.NEAR_TOP_RIGHT,ne.FAR_TOP_RIGHT]};var de,me;(function(fe){fe[fe.NUM=6]="NUM"})(de||(de={})),function(fe){fe[fe.NUM=8]="NUM"}(me||(me={}));const _e=[(0,W.f)(-1,-1,-1,1),(0,W.f)(1,-1,-1,1),(0,W.f)(1,1,-1,1),(0,W.f)(-1,1,-1,1),(0,W.f)(-1,-1,1,1),(0,W.f)(1,-1,1,1),(0,W.f)(1,1,1,1),(0,W.f)(-1,1,1,1)],he=new D.x(Y.Ue),ye=re()},37299:(qe,xe,T)=>{"use strict";T.d(xe,{Dg:()=>Y,Yr:()=>x,cD:()=>W,yB:()=>w});var D=T(94425);const x=Math.PI/180,w=/SPHEROID\[([^\]]+)]/i,B=D.sv.radius,U=D.sv.eccentricitySquared,W={a1:B*U,a2:B*U*B*U,a3:B*U*U/2,a4:B*U*B*U*2.5,a5:B*U+B*U*U/2,a6:1-U},Y={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:D.sv.radius,f:D.sv.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:D.Z1.radius,f:D.Z1.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:D.yr.radius,f:D.yr.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:D.yr.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},36947:(qe,xe,T)=>{"use strict";T.d(xe,{Ku:()=>ue,Wt:()=>Y,qC:()=>X}),T(8314);var G,J,x=T(26584),w=T(62208),B=T(79334),U=T(38305);function Y(J,se,ee){const le=ue(J),ne=se,ce=function H(J,se,ee){if(!$(J)||!$(se))return G.Unsupported;if(null==J||null==se)return G.Ok;if(!ee&&J.heightUnit!==se.heightUnit)return G.Units;if(J.heightModel!==se.heightModel)return G.HeightModel;switch(J.heightModel){case"gravity-related-height":return G.Ok;case"ellipsoidal":return J.vertCRS===se.vertCRS?G.Ok:G.CRS;default:return G.Unsupported}}(le,ne,ee);if(le){const de=B.Z.deriveUnitFromSR(le,J.spatialReference).heightUnit;if(!ee&&de!==le.heightUnit){const me=new x.Z("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${de})`,{horizontalUnit:de});return new x.Z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:le,error:me})}}if(!function re(J){return"heightModelInfo"in J&&null!=J.heightModelInfo||null!=J.spatialReference||!ie(J)}(J)||ce===G.Unsupported)return new x.Z("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:le});switch(ce){case G.Units:{const de=le.heightUnit||"unknown",me=ne.heightUnit||"unknown",_e=new x.Z("layerview:incompatible-height-unit",`The vertical units of the layer (${de}) must match the vertical units of the scene (${me})`,{layerUnit:de,sceneUnit:me});return new x.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:le,sceneHeightModelInfo:ne,error:_e})}case G.HeightModel:{const de=le.heightModel||"unknown",me=ne.heightModel||"unknown",_e=new x.Z("layerview:incompatible-height-model",`The height model of the layer (${de}) must match the height model of the scene (${me})`,{layerHeightModel:de,sceneHeightModel:me});return new x.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:le,sceneHeightModelInfo:ne,error:_e})}case G.CRS:{const de=le.vertCRS||"unknown",me=ne.vertCRS||"unknown",_e=new x.Z("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${de}) must match the vertical datum of the scene (${me})`,{layerDatum:de,sceneDatum:me});return new x.Z("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:le,sceneHeightModelInfo:ne,error:_e})}}return null}function $(J){return null==J||null!=J.heightModel&&null!=J.heightUnit}function ue(J){const se=J.url&&(0,U.Qc)(J.url);return null==(J.spatialReference&&J.spatialReference.vcsWkid)&&(0,w.pC)(se)&&"ImageServer"===se.serverType||!ae(J)||!J.heightModelInfo?ie(J)?B.Z.deriveUnitFromSR(Q,J.spatialReference):null:J.heightModelInfo}function ae(J){return"heightModelInfo"in J}function oe(J){if("unknown"===J.type||!("capabilities"in J))return!1;switch(J.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function ie(J){return oe(J)?!!(J.capabilities&&J.capabilities.data&&J.capabilities.data.supportsZ):Z(J)}function X(J){return null!=J.layers||Z(J)||oe(J)||ae(J)}function Z(J){switch(J.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(J=G||(G={}))[J.Ok=0]="Ok",J[J.Units=1]="Units",J[J.HeightModel=2]="HeightModel",J[J.CRS=3]="CRS",J[J.Unsupported=4]="Unsupported";const Q=new B.Z({heightModel:"gravity-related-height"})},11519:(qe,xe,T)=>{"use strict";T.d(xe,{Ff:()=>ie,IY:()=>Q,UT:()=>Z,h_:()=>w});var D=T(33190);function x(J,se){return(0,D.aV)(J,se)}function w(J,se){let le,ne,ce;if(J.xmin<=se.xmin){if(le=se.xmin,J.xmax<le)return!1}else if(le=J.xmin,se.xmax<le)return!1;if(J.ymin<=se.ymin){if(ne=se.ymin,J.ymax<ne)return!1}else if(ne=J.ymin,se.ymax<ne)return!1;if(J.hasZ&&se.hasZ&&se.hasZ)if(J.zmin<=se.zmin){if(ce=se.zmin,J.zmax<ce)return!1}else if(ce=J.zmin,se.zmax<ce)return!1;return!0}function B(J,se){const{points:ee,hasZ:le}=se,ne=le?D.Qg:D.OQ;for(const ce of ee)if(ne(J,ce))return!0;return!1}const U=[0,0],W=[0,0],Y=[0,0],H=[0,0],G=[U,W,Y,H],$=[[Y,U],[U,W],[W,H],[H,Y]];function re(J,se){return function ue(J,se){U[0]=J.xmin,U[1]=J.ymax,W[0]=J.xmax,W[1]=J.ymax,Y[0]=J.xmin,Y[1]=J.ymin,H[0]=J.xmax,H[1]=J.ymin;for(const ee of G)if((0,D.wP)(se,ee))return!0;for(const ee of se){if(!ee.length)continue;let le=ee[0];if((0,D.OQ)(J,le))return!0;for(let ne=1;ne<ee.length;ne++){const ce=ee[ne];if((0,D.OQ)(J,ce)||X(le,ce,$))return!0;le=ce}}return!1}(J,se.rings)}function ae(J,se){U[0]=J.xmin,U[1]=J.ymax,W[0]=J.xmax,W[1]=J.ymax,Y[0]=J.xmin,Y[1]=J.ymin,H[0]=J.xmax,H[1]=J.ymin;const ee=se.paths;for(const le of ee){if(!ee.length)continue;let ne=le[0];if((0,D.OQ)(J,ne))return!0;for(let ce=1;ce<le.length;ce++){const de=le[ce];if((0,D.OQ)(J,de)||X(ne,de,$))return!0;ne=de}}return!1}const oe=[0,0];function ie(J){for(let se=0;se<J.length;se++){const ee=J[se];for(let ne=0;ne<ee.length-1;ne++){const ce=ee[ne],de=ee[ne+1];for(let me=se+1;me<J.length;me++)for(let _e=0;_e<J[me].length-1;_e++){const he=J[me][_e],ye=J[me][_e+1];if(Z(ce,de,he,ye,oe)&&!(oe[0]===ce[0]&&oe[1]===ce[1]||oe[0]===he[0]&&oe[1]===he[1]||oe[0]===de[0]&&oe[1]===de[1]||oe[0]===ye[0]&&oe[1]===ye[1]))return!0}}const le=ee.length;if(!(le<=4))for(let ne=0;ne<le-3;ne++){let ce=le-1;0===ne&&(ce=le-2);const de=ee[ne],me=ee[ne+1];for(let _e=ne+2;_e<ce;_e++){const he=ee[_e],ye=ee[_e+1];if(Z(de,me,he,ye,oe)&&!(oe[0]===de[0]&&oe[1]===de[1]||oe[0]===he[0]&&oe[1]===he[1]||oe[0]===me[0]&&oe[1]===me[1]||oe[0]===ye[0]&&oe[1]===ye[1]))return!0}}}return!1}function X(J,se,ee){for(let le=0;le<ee.length;le++)if(Z(J,se,ee[le][0],ee[le][1]))return!0;return!1}function Z(J,se,ee,le,ne){const[ce,de]=J,[me,_e]=se,[he,ye]=ee,[fe,De]=le,ve=fe-he,Ce=ce-he,ge=me-ce,Te=De-ye,Le=de-ye,je=_e-de,ze=Te*ge-ve*je;if(0===ze)return!1;const Ee=(ve*Le-Te*Ce)/ze,Ae=(ge*Le-je*Ce)/ze;return Ee>=0&&Ee<=1&&Ae>=0&&Ae<=1&&(ne&&(ne[0]=ce+Ee*(me-ce),ne[1]=de+Ee*(_e-de)),!0)}function Q(J){switch(J){case"esriGeometryEnvelope":case"extent":return w;case"esriGeometryMultipoint":case"multipoint":return B;case"esriGeometryPoint":case"point":return x;case"esriGeometryPolygon":case"polygon":return re;case"esriGeometryPolyline":case"polyline":return ae}}},91179:(qe,xe,T)=>{"use strict";T.d(xe,{Ji:()=>X,YX:()=>G,aW:()=>$,im:()=>ie,l9:()=>ue,oU:()=>ae,q9:()=>Q,wp:()=>re});var D=T(62208),x=T(2004),w=T(21674),B=T(72854),U=T(49672),W=T(37118),Y=T(55214);function G(J){return void 0!==J.xmin&&void 0!==J.ymin&&void 0!==J.xmax&&void 0!==J.ymax}function $(J){return void 0!==J.points}function re(J){return void 0!==J.x&&void 0!==J.y}function ue(J){return void 0!==J.paths}function ae(J){return void 0!==J.rings}function ie(J){return(0,D.Wi)(J)?null:J instanceof w.Z?J:re(J)?U.Z.fromJSON(J):ue(J)?Y.Z.fromJSON(J):ae(J)?W.Z.fromJSON(J):$(J)?B.Z.fromJSON(J):G(J)?x.Z.fromJSON(J):null}function X(J){return J?re(J)?"esriGeometryPoint":ue(J)?"esriGeometryPolyline":ae(J)?"esriGeometryPolygon":G(J)?"esriGeometryEnvelope":$(J)?"esriGeometryMultipoint":null:null}const Z={esriGeometryPoint:U.Z,esriGeometryPolyline:Y.Z,esriGeometryPolygon:W.Z,esriGeometryEnvelope:x.Z,esriGeometryMultipoint:B.Z};function Q(J){return J&&Z[J]||null}},13777:(qe,xe,T)=>{"use strict";T.d(xe,{AR:()=>Z,Gr:()=>X,JG:()=>H,Jk:()=>re,KU:()=>oe,Ue:()=>W,al:()=>G,ct:()=>ie,nF:()=>ae,zk:()=>$});var D=T(21286),x=T(97535),w=T(84161),B=T(28093),U=T(26242);function W(le){return le?{origin:(0,B.a)(le.origin),vector:(0,B.a)(le.vector)}:{origin:(0,B.c)(),vector:(0,B.c)()}}function H(le,ne=W()){return G(le.origin,le.vector,ne)}function G(le,ne,ce=W()){return(0,w.c)(ce.origin,le),(0,w.c)(ce.vector,ne),ce}function $(le,ne,ce=W()){return(0,w.c)(ce.origin,le),(0,w.b)(ce.vector,ne,le),ce}function re(le,ne){const ce=(0,w.b)(U.WM.get(),ne,le.origin),de=(0,w.e)(le.vector,ce),me=(0,w.e)(le.vector,le.vector),_e=(0,D.uZ)(de/me,0,1),he=(0,w.b)(U.WM.get(),(0,w.g)(U.WM.get(),le.vector,_e),ce);return(0,w.e)(he,he)}function ae(le,ne,ce){return ie(le,ne,0,1,ce)}function oe(le,ne,ce){return(0,w.a)(ce,le.origin,(0,w.g)(ce,le.vector,ne))}function ie(le,ne,ce,de,me){const{vector:_e,origin:he}=le,ye=(0,w.b)(U.WM.get(),ne,he),fe=(0,w.e)(_e,ye)/(0,w.p)(_e);return(0,w.g)(me,_e,(0,D.uZ)(fe,ce,de)),(0,w.a)(me,me,le.origin)}function X(le,ne){if(J(le,function Y(le,ne){const ce=ee.get();return ce.origin=le,ce.vector=ne,ce}(ne.origin,ne.direction),!1,se)){const{tA:ce,pB:de,distance2:me}=se;if(ce>=0&&ce<=1)return me;if(ce<0)return(0,w.d)(le.origin,de);if(ce>1)return(0,w.d)((0,w.a)(U.WM.get(),le.origin,le.vector),de)}return null}function Z(le,ne,ce){return!!J(le,ne,!0,se)&&((0,w.c)(ce,se.pA),!0)}function J(le,ne,ce,de){const _e=le.origin,he=(0,w.a)(U.WM.get(),_e,le.vector),ye=ne.origin,fe=(0,w.a)(U.WM.get(),ye,ne.vector),De=U.WM.get(),ve=U.WM.get();if(De[0]=_e[0]-ye[0],De[1]=_e[1]-ye[1],De[2]=_e[2]-ye[2],ve[0]=fe[0]-ye[0],ve[1]=fe[1]-ye[1],ve[2]=fe[2]-ye[2],Math.abs(ve[0])<1e-6&&Math.abs(ve[1])<1e-6&&Math.abs(ve[2])<1e-6)return!1;const Ce=U.WM.get();if(Ce[0]=he[0]-_e[0],Ce[1]=he[1]-_e[1],Ce[2]=he[2]-_e[2],Math.abs(Ce[0])<1e-6&&Math.abs(Ce[1])<1e-6&&Math.abs(Ce[2])<1e-6)return!1;const ge=De[0]*ve[0]+De[1]*ve[1]+De[2]*ve[2],Te=ve[0]*Ce[0]+ve[1]*Ce[1]+ve[2]*Ce[2],Le=De[0]*Ce[0]+De[1]*Ce[1]+De[2]*Ce[2],je=ve[0]*ve[0]+ve[1]*ve[1]+ve[2]*ve[2],ze=(Ce[0]*Ce[0]+Ce[1]*Ce[1]+Ce[2]*Ce[2])*je-Te*Te;if(Math.abs(ze)<1e-6)return!1;let Ee=(ge*Te-Le*je)/ze,Ae=(ge+Te*Ee)/je;ce&&(Ee=(0,D.uZ)(Ee,0,1),Ae=(0,D.uZ)(Ae,0,1));const we=U.WM.get(),Be=U.WM.get();return we[0]=_e[0]+Ee*Ce[0],we[1]=_e[1]+Ee*Ce[1],we[2]=_e[2]+Ee*Ce[2],Be[0]=ye[0]+Ae*ve[0],Be[1]=ye[1]+Ae*ve[1],Be[2]=ye[2]+Ae*ve[2],de.tA=Ee,de.tB=Ae,de.pA=we,de.pB=Be,de.distance2=(0,w.d)(we,Be),!0}const se={tA:0,tB:0,pA:(0,B.c)(),pB:(0,B.c)(),distance2:0},ee=new x.x(()=>({origin:null,vector:null}))},13757:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>x});var D=T(21286);function x(Y,H,G){const $=Y.byteLength/(4*H),re=new Uint32Array(Y,0,$*H);let ue=new Uint32Array($);const ae=G?.minReduction??0,oe=G?.originalIndices||null,ie=oe?oe.length:0,X=G?.componentOffsets||null;let Z=0;if(X)for(let he=0;he<X.length-1;he++){const ye=X[he+1]-X[he];ye>Z&&(Z=ye)}else Z=$;const Q=Math.floor(1.1*Z)+1;(null==W||W.length<2*Q)&&(W=new Uint32Array((0,D.Sf)(2*Q)));for(let he=0;he<2*Q;he++)W[he]=0;let J=0;const se=!!X&&!!oe,ee=se?ie:$,le=se?new Uint32Array(ie):null;let ce=0!==ae?Math.ceil(7.84*1.96/(ae*ae)*ae*(1-ae)):ee,de=1,me=X?X[1]:ee;for(let he=0;he<ee;he++){if(he===ce){const ge=1-J/he;if(ge+1.96*Math.sqrt(ge*(1-ge)/he)<ae)return null;ce*=2}if(he===me){for(let ge=0;ge<2*Q;ge++)W[ge]=0;if(oe)for(let ge=X[de-1];ge<X[de];ge++)le[ge]=ue[oe[ge]];me=X[++de]}const ye=se?oe[he]:he,fe=ye*H,De=U(re,fe,H);let ve=De%Q,Ce=J;for(;0!==W[2*ve+1];){if(W[2*ve]===De){const ge=W[2*ve+1]-1;if(w(re,fe,ge*H,H)){Ce=ue[ge];break}}ve++,ve>=Q&&(ve-=Q)}Ce===J&&(W[2*ve]=De,W[2*ve+1]=ye+1,J++),ue[ye]=Ce}if(0!==ae&&1-J/$<ae)return null;if(se){for(let he=X[de-1];he<le.length;he++)le[he]=ue[oe[he]];ue=le}const _e=new Uint32Array(H*J);J=0;for(let he=0;he<ee;he++)ue[he]===J&&(B(re,(se?oe[he]:he)*H,_e,J*H,H),J++);if(oe&&!se){const he=new Uint32Array(ie);for(let ye=0;ye<he.length;ye++)he[ye]=ue[oe[ye]];ue=he}return{buffer:_e.buffer,indices:ue,uniqueCount:J}}function w(Y,H,G,$){for(let re=0;re<$;re++)if(Y[H+re]!==Y[G+re])return!1;return!0}function B(Y,H,G,$,re){for(let ue=0;ue<re;ue++)G[$+ue]=Y[H+ue]}function U(Y,H,G){let $=0;for(let re=0;re<G;re++)$=Y[H+re]+$|0,$=$+($<<11)+($>>>2)|0;return $>>>0}let W=null},65231:(qe,xe,T)=>{"use strict";T.d(xe,{Iz:()=>ie,M2:()=>ne,To:()=>Q,VS:()=>ee,XO:()=>Z,Yk:()=>X,w9:()=>se,wi:()=>le,zZ:()=>J});var D=T(63290),x=T(62208),w=T(30217),B=T(550),U=T(43703),W=T(84161),Y=T(28093),H=T(55915),G=T(12080),$=T(37053),re=T(46367),ue=T(60479),ae=T(79800);const oe=D.Z.getLogger("esri.geometry.support.meshUtils.normalProjection");function ie(Ce,ge,Te,Le,je){return de(Le)?(ce(he.TO_PCPF,ue.ct.fromTypedArray(Ce),ue.fP.fromTypedArray(ge),ue.fP.fromTypedArray(Te),Le,ue.ct.fromTypedArray(je)),je):(oe.error("Cannot convert spatial reference to PCPF"),je)}function X(Ce,ge,Te,Le,je){return de(Le)?(ce(he.FROM_PCPF,ue.ct.fromTypedArray(Ce),ue.fP.fromTypedArray(ge),ue.fP.fromTypedArray(Te),Le,ue.ct.fromTypedArray(je)),je):(oe.error("Cannot convert to spatial reference from PCPF"),je)}function Z(Ce,ge,Te){return(0,H.CM)(Ce,ge,0,Te,(0,G.rS)(ge),0,Ce.length/3),Te}function Q(Ce,ge,Te){return(0,H.CM)(Ce,(0,G.rS)(Te),0,ge,Te,0,Ce.length/3),ge}function J(Ce,ge,Te){if((0,x.Wi)(Ce))return ge;const Le=ue.fP.fromTypedArray(Ce),je=ue.fP.fromTypedArray(ge);return(0,ae.t)(je,Le,Te),ge}function se(Ce,ge,Te){if((0,x.Wi)(Ce))return ge;(0,w.a)(ve,Te);const Le=ue.ct.fromTypedArray(Ce),je=ue.ct.fromTypedArray(ge);return(0,ae.a)(je,Le,ve),(0,w.i)(ve)||(0,ae.n)(je,je),ge}function ee(Ce,ge,Te){if((0,x.Wi)(Ce))return ge;(0,w.a)(ve,Te);const Le=ue.ct.fromTypedArray(Ce,4*Float32Array.BYTES_PER_ELEMENT),je=ue.ct.fromTypedArray(ge,4*Float32Array.BYTES_PER_ELEMENT);if((0,ae.a)(je,Le,ve),(0,w.i)(ve)||(0,ae.n)(je,je),Ce!==ge)for(let ze=3;ze<Ce.length;ze+=4)ge[ze]=Ce[ze];return ge}function le(Ce,ge,Te,Le,je){if(!de(Le))return oe.error("Cannot convert spatial reference to PCPF"),je;ce(he.TO_PCPF,ue.ct.fromTypedArray(Ce,4*Float32Array.BYTES_PER_ELEMENT),ue.fP.fromTypedArray(ge),ue.fP.fromTypedArray(Te),Le,ue.ct.fromTypedArray(je,4*Float32Array.BYTES_PER_ELEMENT));for(let ze=3;ze<Ce.length;ze+=4)je[ze]=Ce[ze];return je}function ne(Ce,ge,Te,Le,je){if(!de(Le))return oe.error("Cannot convert to spatial reference from PCPF"),je;ce(he.FROM_PCPF,ue.ct.fromTypedArray(Ce,16),ue.fP.fromTypedArray(ge),ue.fP.fromTypedArray(Te),Le,ue.ct.fromTypedArray(je,16));for(let ze=3;ze<Ce.length;ze+=4)je[ze]=Ce[ze];return je}function ce(Ce,ge,Te,Le,je,ze){if(!ge)return;const Ee=Te.count,Ae=(0,G.rS)(je);if(me(je))for(let we=0;we<Ee;we++)Le.getVec(we,ye),ge.getVec(we,fe),(0,H.Bm)(Ae,ye,De,Ae),(0,w.f)(ve,De),Ce===he.FROM_PCPF&&(0,w.t)(ve,ve),(0,W.t)(fe,fe,ve),ze.setVec(we,fe);else for(let we=0;we<Ee;we++){Le.getVec(we,ye),ge.getVec(we,fe),(0,H.Bm)(Ae,ye,De,Ae),(0,w.f)(ve,De);const Be=(0,re.mZ)(Te.get(we,1));let Pe=Math.cos(Be);Ce===he.TO_PCPF&&(Pe=1/Pe),ve[0]*=Pe,ve[1]*=Pe,ve[2]*=Pe,ve[3]*=Pe,ve[4]*=Pe,ve[5]*=Pe,Ce===he.FROM_PCPF&&(0,w.t)(ve,ve),(0,W.t)(fe,fe,ve),(0,W.n)(fe,fe),ze.setVec(we,fe)}return ze}function de(Ce){return me(Ce)||function _e(Ce){return Ce.isWebMercator}(Ce)}function me(Ce){return Ce.isWGS84||(0,$.yW)(Ce)||(0,$.BZ)(Ce)||(0,$.V2)(Ce)}var he,Ce;(Ce=he||(he={}))[Ce.TO_PCPF=0]="TO_PCPF",Ce[Ce.FROM_PCPF=1]="FROM_PCPF";const ye=(0,Y.c)(),fe=(0,Y.c)(),De=(0,U.c)(),ve=(0,B.c)()},13924:(qe,xe,T)=>{"use strict";T.d(xe,{aX:()=>fe});var D=T(15861),x=T(59318),w=T(26584),B=T(63290),U=T(62208),W=T(37118),Y=T(55214),H=T(74618),G=T(37053),$=T(46367),ue=(T(29132),T(84792)),ae=T(21726),oe=T(91179);function ie(ge,Te,Le,je){return X.apply(this,arguments)}function X(){return(X=(0,D.Z)(function*(ge,Te,Le,je){const ze="string"==typeof ge?(0,ae.mN)(ge):ge,Ee=Te[0].spatialReference,Ae={...je,query:{...ze.query,f:"json",sr:JSON.stringify(Ee),target:JSON.stringify({geometryType:(0,oe.Ji)(Te[0]),geometries:Te}),cutter:JSON.stringify(Le)}},we=yield(0,ue.default)(ze.path+"/cut",Ae),{cutIndexes:Be,geometries:Pe=[]}=we.data;return{cutIndexes:Be,geometries:Pe.map(Oe=>{const Ke=(0,oe.im)(Oe);return Ke.spatialReference=Ee,Ke})}})).apply(this,arguments)}function Z(ge,Te,Le){return Q.apply(this,arguments)}function Q(){return(Q=(0,D.Z)(function*(ge,Te,Le){const je="string"==typeof ge?(0,ae.mN)(ge):ge,ze=Te[0].spatialReference,Ee=(0,oe.Ji)(Te[0]),Ae={...Le,query:{...je.query,f:"json",sr:ze.wkid?ze.wkid:JSON.stringify(ze),geometries:JSON.stringify(J(Te))}};return se((yield(0,ue.default)(je.path+"/simplify",Ae)).data,Ee,ze)})).apply(this,arguments)}function J(ge){return{geometryType:(0,oe.Ji)(ge[0]),geometries:ge.map(Te=>Te.toJSON())}}function se(ge,Te,Le){const je=(0,oe.q9)(Te);return ge.map(ze=>{const Ee=je.fromJSON(ze);return Ee.spatialReference=Le,Ee})}const ee=B.Z.getLogger("esri.geometry.support.normalizeUtils");function ne(ge){return"polygon"===ge[0].type}function ce(ge){return"polyline"===ge[0].type}function _e(ge,Te,Le){if(Te){const je=function me(ge,Te){if(!(ge instanceof Y.Z||ge instanceof W.Z)){const ze="straightLineDensify: the input geometry is neither polyline nor polygon";throw ee.error(ze),new w.Z(ze)}const Le=(0,H.x3)(ge),je=[];for(const ze of Le){const Ee=[];je.push(Ee),Ee.push([ze[0][0],ze[0][1]]);for(let Ae=0;Ae<ze.length-1;Ae++){const we=ze[Ae][0],Be=ze[Ae][1],Pe=ze[Ae+1][0],Oe=ze[Ae+1][1],Ke=Math.sqrt((Pe-we)*(Pe-we)+(Oe-Be)*(Oe-Be)),Ve=(Oe-Be)/Ke,Ne=(Pe-we)/Ke,Ie=Ke/Te;if(Ie>1){for(let $e=1;$e<=Ie-1;$e++){const et=$e*Te;Ee.push([Ne*et+we,Ve*et+Be])}const We=(Ke+Math.floor(Ie-1)*Te)/2;Ee.push([Ne*We+we,Ve*We+Be])}Ee.push([Pe,Oe])}}return function le(ge){return"polygon"===ge.type}(ge)?new W.Z({rings:je,spatialReference:ge.spatialReference}):new Y.Z({paths:je,spatialReference:ge.spatialReference})}(ge,1e6);ge=(0,$.Sx)(je,!0)}return Le&&(ge=(0,H.Sy)(ge,Le)),ge}function he(ge,Te,Le){if(Array.isArray(ge)){const je=ge[0];if(je>Te){const ze=(0,H.XZ)(je,Te);ge[0]=je+ze*(-2*Te)}else if(je<Le){const ze=(0,H.XZ)(je,Le);ge[0]=je+ze*(-2*Le)}}else{const je=ge.x;if(je>Te){const ze=(0,H.XZ)(je,Te);ge=ge.clone().offset(ze*(-2*Te),0)}else if(je<Le){const ze=(0,H.XZ)(je,Le);ge=ge.clone().offset(ze*(-2*Le),0)}}return ge}function ye(ge,Te){let Le=-1;for(let je=0;je<Te.cutIndexes.length;je++){const ze=Te.cutIndexes[je],Ee=Te.geometries[je],Ae=(0,H.x3)(Ee);for(let we=0;we<Ae.length;we++){const Be=Ae[we];Be.some(Pe=>{if(Pe[0]<180)return!0;{let Oe=0;for(let Ve=0;Ve<Be.length;Ve++){const Ne=Be[Ve][0];Oe=Ne>Oe?Ne:Oe}Oe=Number(Oe.toFixed(9));const Ke=-360*(0,H.XZ)(Oe,180);for(let Ve=0;Ve<Be.length;Ve++){const Ne=Ee.getPoint(we,Ve);Ee.setPoint(we,Ve,Ne.clone().offset(Ke,0))}return!0}})}if(ze===Le){if(ne(ge))for(const we of(0,H.x3)(Ee))ge[ze]=ge[ze].addRing(we);else if(ce(ge))for(const we of(0,H.x3)(Ee))ge[ze]=ge[ze].addPath(we)}else Le=ze,ge[ze]=Ee}return ge}function fe(ge,Te,Le){return De.apply(this,arguments)}function De(){return(De=(0,D.Z)(function*(ge,Te,Le){if(!Array.isArray(ge))return fe([ge],Te);Te&&"string"!=typeof Te&&ee.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const je="string"==typeof Te?Te:Te?.url??x.Z.geometryServiceUrl;let ze,Ee,Ae,we,Be,Pe,Oe,Ke,Ve=0;const Ne=[],Ie=[];for(const nt of ge)if((0,U.Wi)(nt))Ie.push(nt);else if(ze||(ze=nt.spatialReference,Ee=(0,G.C5)(ze),Ae=ze.isWebMercator,Pe=Ae?102100:4326,we=H.UZ[Pe].maxX,Be=H.UZ[Pe].minX,Oe=H.UZ[Pe].plus180Line,Ke=H.UZ[Pe].minus180Line),Ee)if("mesh"===nt.type)Ie.push(nt);else if("point"===nt.type)Ie.push(he(nt.clone(),we,Be));else if("multipoint"===nt.type){const it=nt.clone();it.points=it.points.map(Xe=>he(Xe,we,Be)),Ie.push(it)}else if("extent"===nt.type){const it=nt.clone()._normalize(!1,!1,Ee);Ie.push(it.rings?new W.Z(it):it)}else if(nt.extent){const it=nt.extent,Xe=(0,H.XZ)(it.xmin,Be)*(2*we);let rt=0===Xe?nt.clone():(0,H.Sy)(nt.clone(),Xe);it.offset(Xe,0),it.intersects(Oe)&&it.xmax!==we?(Ve=it.xmax>Ve?it.xmax:Ve,rt=_e(rt,Ae),Ne.push(rt),Ie.push("cut")):it.intersects(Ke)&&it.xmin!==Be?(Ve=it.xmax*(2*we)>Ve?it.xmax*(2*we):Ve,rt=_e(rt,Ae,360),Ne.push(rt),Ie.push("cut")):Ie.push(rt)}else Ie.push(nt.clone());else Ie.push(nt);let We=(0,H.XZ)(Ve,we),Se=-90;const He=We,$e=new Y.Z;for(;We>0;){const nt=360*We-180;$e.addPath([[nt,Se],[nt,-1*Se]]),Se*=-1,We--}if(Ne.length>0&&He>0){const nt=ye(Ne,yield ie(je,Ne,$e,Le)),it=[],Xe=[];for(let lt=0;lt<Ie.length;lt++){const st=Ie[lt];if("cut"!==st)Xe.push(st);else{const Mt=nt.shift(),Ft=ge[lt];(0,U.pC)(Ft)&&"polygon"===Ft.type&&Ft.rings&&Ft.rings.length>1&&Mt.rings.length>=Ft.rings.length?(it.push(Mt),Xe.push("simplify")):Xe.push(Ae?(0,$.$)(Mt):Mt)}}if(!it.length)return Xe;const rt=yield Z(je,it,Le),Ze=[];for(let lt=0;lt<Xe.length;lt++){const st=Xe[lt];Ze.push("simplify"!==st?st:Ae?(0,$.$)(rt.shift()):rt.shift())}return Ze}const et=[];for(let nt=0;nt<Ie.length;nt++){const it=Ie[nt];if("cut"!==it)et.push(it);else{const Xe=Ne.shift();et.push(!0===Ae?(0,$.$)(Xe):Xe)}}return et})).apply(this,arguments)}},74618:(qe,xe,T)=>{"use strict";T.d(xe,{Sy:()=>W,UZ:()=>B,XZ:()=>U,x3:()=>Y});var D=T(55214),x=T(65234),w=T(91179);const B={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new D.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:x.Z.WebMercator}),minus180Line:new D.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:x.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new D.Z({paths:[[[180,-180],[180,180]]],spatialReference:x.Z.WGS84}),minus180Line:new D.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:x.Z.WGS84})}};function U(H,G){return Math.ceil((H-G)/(2*G))}function W(H,G){const $=Y(H);for(const re of $)for(const ue of re)ue[0]+=G;return H}function Y(H){return(0,w.oU)(H)?H.rings:H.paths}},90014:(qe,xe,T)=>{"use strict";T.d(xe,{$I:()=>Z,Ac:()=>Ce,BR:()=>he,Er:()=>je,JG:()=>re,Oy:()=>ae,T5:()=>ce,U4:()=>Te,Ue:()=>G,Yq:()=>oe,_l:()=>Ae,al:()=>ue,dZ:()=>fe,fn:()=>_e,jH:()=>Be,mJ:()=>Oe,my:()=>me,nF:()=>ze,oq:()=>Le,re:()=>$,rx:()=>ye,tk:()=>de,zk:()=>ie});var D=T(21286),x=T(62208),w=T(84161),B=T(28093),Y=(T(97126),T(34054),T(26242));function G(We=Ke){return[We[0],We[1],We[2],We[3]]}function $(We=Ke[0],Se=Ke[1],He=Ke[2],$e=Ke[3]){return ue(We,Se,He,$e,Y.o6.get())}function re(We,Se){return ue(Se[0],Se[1],Se[2],Se[3],We)}function ue(We,Se,He,$e,et=G()){return et[0]=We,et[1]=Se,et[2]=He,et[3]=$e,et}function ae(We,Se,He){return(0,w.c)(He,We),He[3]=Se,He}function oe(We,Se,He){const $e=Se[0]*Se[0]+Se[1]*Se[1]+Se[2]*Se[2],et=Math.abs($e-1)>1e-5&&$e>1e-12?1/Math.sqrt($e):1;return He[0]=Se[0]*et,He[1]=Se[1]*et,He[2]=Se[2]*et,He[3]=-(He[0]*We[0]+He[1]*We[1]+He[2]*We[2]),He}function ie(We,Se,He,$e=G()){const et=He[0]-Se[0],nt=He[1]-Se[1],it=He[2]-Se[2],Xe=We[0]-Se[0],rt=We[1]-Se[1],Ze=We[2]-Se[2],lt=nt*Ze-it*rt,st=it*Xe-et*Ze,Mt=et*rt-nt*Xe,Ft=lt*lt+st*st+Mt*Mt,kt=Math.abs(Ft-1)>1e-5&&Ft>1e-12?1/Math.sqrt(Ft):1;return $e[0]=lt*kt,$e[1]=st*kt,$e[2]=Mt*kt,$e[3]=-($e[0]*We[0]+$e[1]*We[1]+$e[2]*We[2]),$e}function Z(We,Se,He,$e,et){if(We.count<3)return!1;We.getVec(He,J);let nt=$e,it=!1;for(;nt<We.count-1&&!it;)We.getVec(nt,se),nt++,it=!(0,w.k)(J,se);if(!it)return!1;for(nt=Math.max(nt,et),it=!1;nt<We.count&&!it;)We.getVec(nt,ee),nt++,(0,w.b)(le,J,se),(0,w.n)(le,le),(0,w.b)(ne,se,ee),(0,w.n)(ne,ne),it=!(0,w.k)(J,ee)&&!(0,w.k)(se,ee)&&Math.abs((0,w.e)(le,ne))<Q;return it?(ie(J,se,ee,Se),!0):(0!==He||1!==$e||2!==et)&&Z(We,Se,0,1,2)}T(98943);const Q=.99619469809,J=(0,B.c)(),se=(0,B.c)(),ee=(0,B.c)(),le=(0,B.c)(),ne=(0,B.c)();function ce(We,Se,He){return Se!==We&&re(We,Se),We[3]=-(0,w.e)(We,He),We}function de(We,Se){return Se[0]=-We[0],Se[1]=-We[1],Se[2]=-We[2],Se[3]=-We[3],Se}function me(We,Se,He,$e){return(0,w.f)(ee,Se,We),oe(He,ee,$e)}function _e(We,Se,He,$e){return Pe(We,Se,(0,w.b)(Y.WM.get(),He,Se),Ne,$e)}function he(We,Se,He){return!!(0,x.pC)(Se)&&Pe(We,Se.origin,Se.direction,Ie,He)}function ye(We,Se,He){return Pe(We,Se.origin,Se.vector,Ve.NONE,He)}function fe(We,Se,He){return Pe(We,Se.origin,Se.vector,Ve.CLAMP,He)}function Ce(We,Se){return Be(We,Se)>=0}function Te(We,Se){return We[0]*(We[0]>0?Se[0]:Se[3])+We[1]*(We[1]>0?Se[1]:Se[4])+We[2]*(We[2]>0?Se[2]:Se[5])+We[3]>=0}function Le(We,Se){const He=(0,w.e)(We,Se.ray.direction),$e=-Be(We,Se.ray.origin);if($e<0&&He>=0)return!1;if(He>-1e-6&&He<1e-6)return $e>0;if(($e<0||He<0)&&!($e<0&&He<0))return!0;const et=$e/He;return He>0?et<Se.c1&&(Se.c1=et):et>Se.c0&&(Se.c0=et),Se.c0<=Se.c1}function je(We,Se){const He=(0,w.e)(We,Se.ray.direction),$e=-Be(We,Se.ray.origin);if(He>-1e-6&&He<1e-6)return $e>0;const et=$e/He;return He>0?et<Se.c1&&(Se.c1=et):et>Se.c0&&(Se.c0=et),Se.c0<=Se.c1}function ze(We,Se,He){const $e=(0,w.g)(Y.WM.get(),We,-We[3]),et=Ae(We,(0,w.b)(Y.WM.get(),Se,$e),Y.WM.get());return(0,w.a)(He,et,$e),He}function Ae(We,Se,He){const $e=(0,w.g)(Y.WM.get(),We,(0,w.e)(We,Se));return(0,w.b)(He,Se,$e),He}function Be(We,Se){return(0,w.e)(We,Se)+We[3]}function Pe(We,Se,He,$e,et){const nt=(0,w.e)(We,He);if(0===nt)return!1;let it=-((0,w.e)(We,Se)+We[3])/nt;return $e&Ve.CLAMP&&(it=(0,D.uZ)(it,0,1)),!(!($e&Ve.INFINITE_MIN)&&it<0||!($e&Ve.INFINITE_MAX)&&it>1||((0,w.a)(et,Se,(0,w.g)(et,He,it)),0))}function Oe(We){return We}const Ke=[0,0,1,0];var Ve,We;(We=Ve||(Ve={}))[We.NONE=0]="NONE",We[We.CLAMP=1]="CLAMP",We[We.INFINITE_MIN=4]="INFINITE_MIN",We[We.INFINITE_MAX=8]="INFINITE_MAX";const Ne=Ve.INFINITE_MIN|Ve.INFINITE_MAX,Ie=Ve.INFINITE_MAX},7848:(qe,xe,T)=>{"use strict";T.d(xe,{G6:()=>Ee,Ie:()=>ze,J9:()=>Le,RF:()=>De,U1:()=>je,vY:()=>Y});var D=T(62208);T(91179);const B=(Ae,we,Be)=>[we,Be],U=(Ae,we,Be)=>[we,Be,Ae[2]],W=(Ae,we,Be)=>[we,Be,Ae[2],Ae[3]];function Y(Ae){return Ae?{originPosition:"upper-left"===Ae.originPosition?"upperLeft":"lower-left"===Ae.originPosition?"lowerLeft":Ae.originPosition,scale:Ae.tolerance?[Ae.tolerance,Ae.tolerance]:[1,1],translate:(0,D.pC)(Ae.extent)?[Ae.extent.xmin,Ae.extent.ymax]:[0,0]}:null}function X({scale:Ae,translate:we},Be){return Be*Ae[0]+we[0]}function Z({scale:Ae,translate:we},Be){return we[1]-Be*Ae[1]}function Q(Ae,we,Be){const Pe=new Array(Be.length);if(!Be.length)return Pe;const[Oe,Ke]=Ae.scale;let Ve=X(Ae,Be[0][0]),Ne=Z(Ae,Be[0][1]);Pe[0]=we(Be[0],Ve,Ne);for(let Ie=1;Ie<Be.length;Ie++){const We=Be[Ie];Ve+=We[0]*Oe,Ne-=We[1]*Ke,Pe[Ie]=we(We,Ve,Ne)}return Pe}function J(Ae,we,Be){const Pe=new Array(Be.length);for(let Oe=0;Oe<Be.length;Oe++)Pe[Oe]=Q(Ae,we,Be[Oe]);return Pe}function De(Ae,we,Be,Pe,Oe){return we.x=function G({scale:Ae,translate:we},Be){return Math.round((Be-we[0])/Ae[0])}(Ae,Be.x),we.y=function $({scale:Ae,translate:we},Be){return Math.round((we[1]-Be)/Ae[1])}(Ae,Be.y),we!==Be&&(Pe&&(we.z=Be.z),Oe&&(we.m=Be.m)),we}function Le(Ae,we,Be,Pe,Oe){return(0,D.pC)(Be)&&(we.points=function ee(Ae,we,Be,Pe){return Q(Ae,Be?Pe?W:U:Pe?U:B,we)}(Ae,Be.points,Pe,Oe)),we}function je(Ae,we,Be,Pe,Oe){return(0,D.Wi)(Be)||(we.x=X(Ae,Be.x),we.y=Z(Ae,Be.y),we!==Be&&(Pe&&(we.z=Be.z),Oe&&(we.m=Be.m))),we}function ze(Ae,we,Be,Pe,Oe){return(0,D.pC)(Be)&&(we.rings=function ne(Ae,we,Be,Pe){return J(Ae,Be?Pe?W:U:Pe?U:B,we)}(Ae,Be.rings,Pe,Oe)),we}function Ee(Ae,we,Be,Pe,Oe){return(0,D.pC)(Be)&&(we.paths=function le(Ae,we,Be,Pe){return J(Ae,Be?Pe?W:U:Pe?U:B,we)}(Ae,Be.paths,Pe,Oe)),we}},70562:(qe,xe,T)=>{"use strict";T.d(xe,{JG:()=>G,JI:()=>oe,Jk:()=>ue,Ue:()=>W,al:()=>re,fS:()=>Y,re:()=>H,zk:()=>$});var D=T(85931),x=T(97535),w=T(84161),B=T(28093),U=T(26242);function W(Z){return Z?{origin:(0,B.a)(Z.origin),direction:(0,B.a)(Z.direction)}:{origin:(0,B.c)(),direction:(0,B.c)()}}function Y(Z,Q){return(0,D.fS)(Z.origin,Q.origin)&&(0,D.fS)(Z.direction,Q.direction)}function H(Z,Q){const J=X.get();return J.origin=Z,J.direction=Q,J}function G(Z,Q=W()){return re(Z.origin,Z.direction,Q)}function $(Z,Q,J=W()){return(0,w.c)(J.origin,Z),(0,w.b)(J.direction,Q,Z),J}function re(Z,Q,J=W()){return(0,w.c)(J.origin,Z),(0,w.c)(J.direction,Q),J}function ue(Z,Q){const J=(0,w.f)(U.WM.get(),(0,w.n)(U.WM.get(),Z.direction),(0,w.b)(U.WM.get(),Q,Z.origin));return(0,w.e)(J,J)}function oe(Z,Q,J){const se=(0,w.e)(Z.direction,(0,w.b)(J,Q,Z.origin));return(0,w.a)(J,Z.origin,(0,w.g)(J,Z.direction,se)),J}const X=new x.x(function ie(){return{origin:null,direction:null}})},83137:(qe,xe,T)=>{"use strict";T.d(xe,{dp:()=>B,yZ:()=>w});var D=T(16730);function w(Y,H){const G=H||Y.extent,$=Y.width,re=(0,D.c9)(G&&G.spatialReference);return G&&$?G.width/$*re*D.hd*96:0}function B(Y,H){return Y/((0,D.c9)(H)*D.hd*96)}},37053:(qe,xe,T)=>{"use strict";T.d(xe,{BZ:()=>se,C5:()=>ue,JY:()=>ce,ME:()=>ee,MP:()=>ne,N$:()=>oe,QM:()=>Q,R_:()=>me,V2:()=>le,WR:()=>_e,Zn:()=>de,fS:()=>re,o$:()=>J,oR:()=>ie,sS:()=>Z,sT:()=>ae,yW:()=>X});var D=T(62208),x=T(77275),w=T(6178),B=T(84029);const U={102113:!0,102100:!0,3857:!0,3785:!0},W={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},Y='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',H=[-20037508.342788905,20037508.342788905],G=[-20037508.342787,20037508.342787],$={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:H,origin:G,dx:1e-5},102100:{wkTemplate:Y,valid:H,origin:G,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:H,origin:G,dx:1e-5},3857:{wkTemplate:Y,valid:H,origin:G,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function re(he,ye){return!(0,D.Wi)(he)&&!(0,D.Wi)(ye)&&(he===ye||(null!=he.wkid||null!=ye.wkid?he.wkid===ye.wkid||Z(he)&&Z(ye)||null!=ye.latestWkid&&he.wkid===ye.latestWkid||null!=he.latestWkid&&ye.wkid===he.latestWkid:!(!he.wkt||!ye.wkt)&&he.wkt.toUpperCase()===ye.wkt.toUpperCase()))}function ue(he){return ce(he)&&he.wkid&&$[he.wkid]||null}function ae(he){return!!ce(he)&&(he.wkid?null==B.Z[he.wkid]:!!he.wkt&&!!/^\s*GEOGCS/i.test(he.wkt))}function oe(he){return!(se(he)||le(he))}function ie(he){return ce(he)&&4326===he.wkid}function X(he){return ce(he)&&he.wkid===w.W.CGCS2000}function Z(he){return ce(he)&&null!=he.wkid&&!0===U[he.wkid]}function Q(he){return ce(he)&&32662===he.wkid}function J(he){return he===w.W.GCSMARS2000||he===w.W.GCSMARS2000_SPHERE}function se(he){return ce(he)&&null!=he.wkid&&J(he.wkid)}function ee(he){return he===w.W.GCSMOON2000}function le(he){return ce(he)&&null!=he.wkid&&ee(he.wkid)}function ne(he){return ce(he)&&null!=he.wkid&&!0===W[he.wkid]}function ce(he){return(0,D.pC)(he)&&(null!=he.wkid&&he.wkid>=2e3||null!=he.wkt)}const de={wkid:4326,wkt:(0,x.gx)($[4326].wkTemplate,{Central_Meridian:"0.0"})},me={wkid:102100,latestWkid:3857},_e={wkid:32662}},11544:(qe,xe,T)=>{"use strict";T.d(xe,{bE:()=>oe,wu:()=>ue});var D=T(97535),x=T(84161),w=T(28093),B=T(13777);function ue(J,se,ee){return.5*Math.abs((se[0]-J[0])*(ee[1]-J[1])-(se[1]-J[1])*(ee[0]-J[0]))}function oe(J,se,ee){return(0,x.b)(Z,se,J),(0,x.b)(Q,ee,J),(0,x.l)((0,x.f)(Z,Z,Q))/2}T(26242),new D.x(B.Ue),new D.x(()=>({p0:null,p1:null,p2:null}));const Z=(0,w.c)(),Q=(0,w.c)()},85334:(qe,xe,T)=>{"use strict";T.d(xe,{Mk:()=>W,ZI:()=>G,bT:()=>B});var G,$,D=T(11915),x=T(25748),w=T(13757);function B($){const re=W($.rings,$.hasZ,G.CCW_IS_HOLE),ue=[];let ae=0,oe=0;for(const Z of re.polygons){const J=Z.index,se=new Float64Array(re.position.buffer,3*J*re.position.BYTES_PER_ELEMENT,3*Z.count),ee=Z.holeIndices.map(ne=>ne-J),le=new Uint32Array((0,D.e)(se,ee,3));ue.push({position:se,faces:le}),ae+=se.length,oe+=le.length}const ie=function U($,re,ue){if(1===$.length)return $[0];const ae=new Float64Array(re),oe=new Uint32Array(ue);let ie=0,X=0,Z=0;for(const Q of $){for(let J=0;J<Q.position.length;J++)ae[ie++]=Q.position[J];for(let J=0;J<Q.faces.length;J++)oe[X++]=Q.faces[J]+Z;Z=ie/3}return{position:ae,faces:oe}}(ue,ae,oe),X=(0,w.d)(ie.position.buffer,6,{originalIndices:ie.faces});return ie.position=new Float64Array(X.buffer),ie.faces=X.indices,ie}function W($,re,ue){const ae=$.length,oe=new Array(ae),ie=new Array(ae),X=new Array(ae);let Z=0,Q=0,J=0,se=0;for(let ne=0;ne<ae;++ne)se+=$[ne].length;const ee=new Float64Array(3*se);let le=0;for(let ne=ae-1;ne>=0;ne--){const ce=$[ne],de=ue===G.CCW_IS_HOLE&&H(ce);if(de&&1!==ae)oe[Z++]=ce;else{let me=ce.length;for(let he=0;he<Z;++he)me+=oe[he].length;const _e={index:le,pathLengths:new Array(Z+1),count:me,holeIndices:new Array(Z)};_e.pathLengths[0]=ce.length,ce.length>0&&(X[J++]={index:le,count:ce.length}),le=de?Y(ce,ce.length-1,-1,ee,le,ce.length,re):Y(ce,0,1,ee,le,ce.length,re);for(let he=0;he<Z;++he){const ye=oe[he];_e.holeIndices[he]=le,_e.pathLengths[he+1]=ye.length,ye.length>0&&(X[J++]={index:le,count:ye.length}),le=Y(ye,0,1,ee,le,ye.length,re)}Z=0,_e.count>0&&(ie[Q++]=_e)}}for(let ne=0;ne<Z;++ne){const ce=oe[ne];ce.length>0&&(X[J++]={index:le,count:ce.length}),le=Y(ce,0,1,ee,le,ce.length,re)}return Q<ae&&(ie.length=Q),J<ae&&(X.length=J),{position:ee,polygons:ie,outlines:X}}function Y($,re,ue,ae,oe,ie,X){oe*=3;for(let Z=0;Z<ie;++Z){const Q=$[re];ae[oe++]=Q[0],ae[oe++]=Q[1],ae[oe++]=X?Q[2]:0,re+=ue}return oe/3}function H($){return!(0,x.bu)($,!1,!1)}($=G||(G={}))[$.NONE=0]="NONE",$[$.CCW_IS_HOLE=1]="CCW_IS_HOLE"},71774:(qe,xe,T)=>{"use strict";T.d(xe,{Mk:()=>w,P$:()=>B});var D=T(2076);const w=(0,D.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),B=(0,D.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},34054:(qe,xe,T)=>{"use strict";T.d(xe,{EU:()=>W,SR:()=>U,cp:()=>Y});var D=T(21286),x=T(84161),w=T(28093);function U($,re){return(0,x.e)($,re)/(0,x.l)($)}function W($,re){const ue=(0,x.e)($,re)/((0,x.l)($)*(0,x.l)(re));return-(0,D.ZF)(ue)}function Y($,re,ue){(0,x.n)(H,$),(0,x.n)(G,re);const ae=(0,x.e)(H,G),oe=(0,D.ZF)(ae),ie=(0,x.f)(H,H,G);return(0,x.e)(ie,ue)<0?2*Math.PI-oe:oe}const H=(0,w.c)(),G=(0,w.c)()},26242:(qe,xe,T)=>{"use strict";T.d(xe,{MP:()=>ie,vD:()=>X,qW:()=>re,WM:()=>ue,o6:()=>ae});var D=T(27306),x=T(79682),w=T(550),B=T(43703),U=T(78451),W=T(99770),Y=T(28093),H=T(4794);class G{constructor(Q,J,se){this.itemByteSize=Q,this.itemCreate=J,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(se/this.itemByteSize)}get(){0===this._itemsPtr&&(0,x.Y)(()=>this._reset());const Q=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=Q;){const J=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let se=0;se<this._itemsPerBuffer;++se)this._items.push(this.itemCreate(J,se*this.itemByteSize));this._buffers.push(J)}return this._items[this._itemsPtr++]}_reset(){const Q=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>Q;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(Q=$){return new G(16,W.c,Q)}static createVec3f64(Q=$){return new G(24,Y.b,Q)}static createVec4f64(Q=$){return new G(32,H.a,Q)}static createMat3f64(Q=$){return new G(72,w.a,Q)}static createMat4f64(Q=$){return new G(128,B.a,Q)}static createQuatf64(Q=$){return new G(32,U.c,Q)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const $=4*D.Y8.KILOBYTES,re=G.createVec2f64(),ue=G.createVec3f64(),ae=G.createVec4f64(),ie=(G.createMat3f64(),G.createMat4f64()),X=G.createQuatf64()},46367:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>J,Q8:()=>ie,R6:()=>Q,Sx:()=>se,hG:()=>Z,iV:()=>X,mZ:()=>re,tp:()=>$});var D=T(58817),x=T(62208),w=T(65234),B=T(94425),U=T(37053);function H(ee){return 57.29577951308232*ee}function G(ee){return.017453292519943*ee}function $(ee){return ee/B.sv.radius}function re(ee){return Math.PI/2-2*Math.atan(Math.exp(-ee/B.sv.radius))}function ue(ee){return null!=ee.wkid||null!=ee.wkt}const ae=[0,0];function oe(ee,le,ne,ce,de){const me=ee,_e=de;if(_e.spatialReference=ne,"x"in me&&"x"in _e)[_e.x,_e.y]=le(me.x,me.y,ae,ce);else if("xmin"in me&&"xmin"in _e)[_e.xmin,_e.ymin]=le(me.xmin,me.ymin,ae,ce),[_e.xmax,_e.ymax]=le(me.xmax,me.ymax,ae,ce);else if("paths"in me&&"paths"in _e||"rings"in me&&"rings"in _e){const he="paths"in me?me.paths:me.rings,ye=[];let fe;for(let De=0;De<he.length;De++){const ve=he[De];fe=[],ye.push(fe);for(let Ce=0;Ce<ve.length;Ce++)fe.push(le(ve[Ce][0],ve[Ce][1],[0,0],ce)),ve[Ce].length>2&&fe[Ce].push(ve[Ce][2]),ve[Ce].length>3&&fe[Ce].push(ve[Ce][3])}"paths"in _e?_e.paths=ye:_e.rings=ye}else if("points"in me&&"points"in _e){const he=me.points,ye=[];for(let fe=0;fe<he.length;fe++)ye[fe]=le(he[fe][0],he[fe][1],[0,0],ce),he[fe].length>2&&ye[fe].push(he[fe][2]),he[fe].length>3&&ye[fe].push(he[fe][3]);_e.points=ye}return de}function ie(ee,le){const ne=ee&&(ue(ee)?ee:ee.spatialReference),ce=le&&(ue(le)?le:le.spatialReference);return!(ee&&"type"in ee&&"mesh"===ee.type||le&&"type"in le&&"mesh"===le.type||!ne||!ce)&&(!!(0,U.fS)(ce,ne)||(0,U.sS)(ce)&&(0,U.oR)(ne)||(0,U.sS)(ne)&&(0,U.oR)(ce))}function X(ee,le){if((0,x.Wi)(ee))return null;const ne=ee.spatialReference,ce=le&&(ue(le)?le:le.spatialReference);return ie(ne,ce)?(0,U.fS)(ne,ce)?(0,D.d9)(ee):(0,U.sS)(ce)?oe(ee,Z,w.Z.WebMercator,!1,(0,D.d9)(ee)):(0,U.oR)(ce)?oe(ee,Q,w.Z.WGS84,!1,(0,D.d9)(ee)):null:null}function Z(ee,le,ne=[0,0]){le>89.99999?le=89.99999:le<-89.99999&&(le=-89.99999);const ce=G(le);return ne[0]=G(ee)*B.sv.radius,ne[1]=B.sv.halfSemiMajorAxis*Math.log((1+Math.sin(ce))/(1-Math.sin(ce))),ne}function Q(ee,le,ne=[0,0],ce=!1){const de=H(ee/B.sv.radius);return ne[0]=ce?de:de-360*Math.floor((de+180)/360),ne[1]=H(Math.PI/2-2*Math.atan(Math.exp(-le/B.sv.radius))),ne}function J(ee,le=!1,ne=(0,D.d9)(ee)){return oe(ee,Z,w.Z.WebMercator,le,ne)}function se(ee,le=!1,ne=(0,D.d9)(ee)){return oe(ee,Q,w.Z.WGS84,le,ne)}},18945:(qe,xe,T)=>{"use strict";function D(x,w,B=!1){let{hasM:U,hasZ:W}=x;Array.isArray(w)?4!==w.length||U||W?3===w.length&&B&&!U?(W=!0,U=!1):3===w.length&&U&&W&&(U=!1,W=!1):(U=!0,W=!0):(W=!W&&w.hasZ&&(!U||w.hasM),U=!U&&w.hasM&&(!W||w.hasZ)),x.hasZ=W,x.hasM=U}T.d(xe,{l:()=>D})},33696:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>B});var D=T(62208),x=T(16730),w=T(37053);function B($,re,ue){if((0,D.Wi)(re)||(0,D.Wi)(ue)||ue.vcsWkid||(0,w.fS)(re,ue))return null;const ae=(0,x._R)(re)/(0,x._R)(ue);if(1===ae)return null;switch($){case"point":case"esriGeometryPoint":return oe=>function U($,re){$&&null!=$.z&&($.z*=re)}(oe,ae);case"polyline":case"esriGeometryPolyline":return oe=>function Y($,re){if($)for(const ue of $.paths)for(const ae of ue)ae.length>2&&(ae[2]*=re)}(oe,ae);case"polygon":case"esriGeometryPolygon":return oe=>function W($,re){if($)for(const ue of $.rings)for(const ae of ue)ae.length>2&&(ae[2]*=re)}(oe,ae);case"multipoint":case"esriGeometryMultipoint":return oe=>function H($,re){if($)for(const ue of $.points)ue.length>2&&(ue[2]*=re)}(oe,ae);case"extent":case"esriGeometryExtent":return oe=>function G($,re){$&&null!=$.zmin&&null!=$.zmax&&($.zmin*=re,$.zmax*=re)}(oe,ae);default:return null}}},52515:(qe,xe,T)=>{"use strict";T(88411),T(15348),T(97059),T(56683);var U=T(41840),W=T(15861),Y=T(84792),H=T(26584),G=T(62208);function re(){return(re=(0,W.Z)(function*(Q,J,se,ee){const le=J.exec(se);if(!le)throw new H.Z("esri-intl:invalid-bundle",`Bundle id "${se}" is not compatible with the pattern "${J}"`);const ne=le[1]?`${le[1]}/`:"",ce=le[2],de=(0,U.Su)(ee),me=`${ne}${ce}.json`,_e=de?`${ne}${ce}_${de}.json`:me;let he;try{he=yield ue(Q(_e))}catch(ye){if(_e===me)throw new H.Z("intl:unknown-bundle",`Bundle "${se}" cannot be loaded`,{error:ye});try{he=yield ue(Q(me))}catch(fe){throw new H.Z("intl:unknown-bundle",`Bundle "${se}" cannot be loaded`,{error:fe})}}return he})).apply(this,arguments)}function ue(Q){return ae.apply(this,arguments)}function ae(){return(ae=(0,W.Z)(function*(Q){if((0,G.pC)(X.fetchBundleAsset))return X.fetchBundleAsset(Q);const J=yield(0,Y.default)(Q,{responseType:"text"});return JSON.parse(J.data)})).apply(this,arguments)}class oe{constructor({base:J="",pattern:se,location:ee=new URL(window.location.href)}){let le;le="string"==typeof ee?ne=>new URL(ne,new URL(ee,window.location.href)).href:ee instanceof URL?ne=>new URL(ne,ee).href:ee,this.pattern="string"==typeof se?new RegExp(`^${se}`):se,this.getAssetUrl=le,J=J?J.endsWith("/")?J:J+"/":"",this.matcher=new RegExp(`^${J}(?:(.*)/)?(.*)$`)}fetchMessageBundle(J,se){return function $(Q,J,se,ee){return re.apply(this,arguments)}(this.getAssetUrl,this.matcher,J,se)}}const X={};var Z=T(54346);(0,U.tz)(function ie(Q){return new oe(Q)}({pattern:"esri/",location:Z.V}))},88411:(qe,xe,T)=>{"use strict";T.d(xe,{Ze:()=>Q,p6:()=>J});var D=T(2076),x=T(56683);const w={year:"numeric",month:"numeric",day:"numeric"},B={year:"numeric",month:"long",day:"numeric"},U={year:"numeric",month:"short",day:"numeric"},W={year:"numeric",month:"long",weekday:"long",day:"numeric"},Y={hour:"numeric",minute:"numeric"},H={...Y,second:"numeric"},G={"short-date":w,"short-date-short-time":{...w,...Y},"short-date-short-time-24":{...w,...Y,hour12:!1},"short-date-long-time":{...w,...H},"short-date-long-time-24":{...w,...H,hour12:!1},"short-date-le":w,"short-date-le-short-time":{...w,...Y},"short-date-le-short-time-24":{...w,...Y,hour12:!1},"short-date-le-long-time":{...w,...H},"short-date-le-long-time-24":{...w,...H,hour12:!1},"long-month-day-year":B,"long-month-day-year-short-time":{...B,...Y},"long-month-day-year-short-time-24":{...B,...Y,hour12:!1},"long-month-day-year-long-time":{...B,...H},"long-month-day-year-long-time-24":{...B,...H,hour12:!1},"day-short-month-year":U,"day-short-month-year-short-time":{...U,...Y},"day-short-month-year-short-time-24":{...U,...Y,hour12:!1},"day-short-month-year-long-time":{...U,...H},"day-short-month-year-long-time-24":{...U,...H,hour12:!1},"long-date":W,"long-date-short-time":{...W,...Y},"long-date-short-time-24":{...W,...Y,hour12:!1},"long-date-long-time":{...W,...H},"long-date-long-time-24":{...W,...H,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Y,"long-time":H},$=(0,D.w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),oe=($.toJSON.bind($),$.fromJSON.bind($),{ar:"ar-u-nu-latn-ca-gregory"});let ie=new WeakMap,X=G["short-date-short-time"];function Q(se){return G[se]||null}function J(se,ee){return function Z(se){const ee=se||X;if(!ie.has(ee)){const le=(0,x.Kd)(),ne=oe[(0,x.Kd)()]||le;ie.set(ee,new Intl.DateTimeFormat(ne,ee))}return ie.get(ee)}(ee).format(se)}(0,x.Ze)(()=>{ie=new WeakMap,X=G["short-date-short-time"]})},56683:(qe,xe,T)=>{"use strict";let x;T.d(xe,{Kd:()=>U,Ze:()=>ae,qe:()=>re});const w=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function B(){return w??globalThis.navigator?.language??"en"}function U(){return void 0===x&&(x=B()),x}const $=[];function re(ie){return $.push(ie),{remove(){$.splice($.indexOf(ie),1)}}}const ue=[];function ae(ie){return ue.push(ie),{remove(){$.splice(ue.indexOf(ie),1)}}}globalThis.addEventListener?.("languagechange",function oe(){const ie=B();x!==ie&&(x=ie,[...ue].forEach(X=>{X.call(null,ie)}),[...$].forEach(X=>{X.call(null,ie)}))})},41840:(qe,xe,T)=>{"use strict";T.d(xe,{ME:()=>ue,Su:()=>oe,tz:()=>re});var D=T(15861),x=T(26584),w=T(10699),B=T(56683);const U=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,W={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Y(se){return W[se]??!1}const H=[],G=new Map;function $(se){for(const ee of G.keys())Z(se.pattern,ee)&&G.delete(ee)}function re(se){return H.includes(se)||($(se),H.unshift(se)),{remove(){const ee=H.indexOf(se);ee>-1&&(H.splice(ee,1),$(se))}}}function ue(se){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(se){const ee=(0,B.Kd)();G.has(se)||G.set(se,ie(se,ee));const le=G.get(se);return yield Q.add(le),le})).apply(this,arguments)}function oe(se){if(!U.test(se))return null;const[,ee,le]=U.exec(se),ne=ee+(le?"-"+le.toUpperCase():"");return Y(ne)?ne:Y(ee)?ee:null}function ie(se,ee){return X.apply(this,arguments)}function X(){return(X=(0,D.Z)(function*(se,ee){const le=[];for(const ne of H)if(Z(ne.pattern,se))try{return yield ne.fetchMessageBundle(se,ee)}catch(ce){le.push(ce)}throw le.length?new x.Z("intl:message-bundle-error",`Errors occurred while loading "${se}"`,{errors:le}):new x.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${se}"`)})).apply(this,arguments)}function Z(se,ee){return"string"==typeof se?ee.startsWith(se):se.test(ee)}(0,B.Ze)(()=>{G.clear()});const Q=new class{constructor(){this._numLoading=0}waitForAll(){var se=this;return(0,D.Z)(function*(){se._dfd&&(yield se._dfd.promise)})()}add(se){return this._increase(),se.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,w.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},15348:(qe,xe,T)=>{"use strict";T.d(xe,{sh:()=>Y,uf:()=>H});var D=T(62208),x=T(56683);const w={ar:"ar-u-nu-latn"};let B=new WeakMap,U={};function Y(G={}){const $={};return null!=G.digitSeparator&&($.useGrouping=G.digitSeparator),null!=G.places&&($.minimumFractionDigits=$.maximumFractionDigits=G.places),$}function H(G,$){return-0===G&&(G=0),function W(G){const $=G||U;if(!B.has($)){const re=(0,x.Kd)(),ue=w[(0,x.Kd)()]||re;B.set($,new Intl.NumberFormat(ue,G))}return(0,D.j0)(B.get($))}($).format(G)}(0,x.Ze)(()=>{B=new WeakMap,U={}})},97059:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>Y});var D=T(63290),x=T(94113),w=T(77275),B=T(88411),U=T(15348);const W=D.Z.getLogger("esri.intl");function Y(ue,ae,oe={}){const{format:ie={}}=oe;return(0,w.gx)(ue,X=>function H(ue,ae,oe){let ie,X;const Z=ue.indexOf(":");if(-1===Z?ie=ue.trim():(ie=ue.slice(0,Z).trim(),X=ue.slice(Z+1).trim()),!ie)return"";const Q=(0,x.hS)(ie,ae);if(null==Q)return"";const J=oe[X]||oe[ie];return J?function G(ue,ae){switch(ae.type){case"date":return(0,B.p6)(ue,ae.intlOptions);case"number":return(0,U.uf)(ue,ae.intlOptions);default:return W.warn("missing format descriptor for key {key}"),re(ue)}}(Q,J):X?function $(ue,ae){switch(ae.toLowerCase()){case"dateformat":return(0,B.p6)(ue);case"numberformat":return(0,U.uf)(ue);default:return W.warn(`inline format is unsupported since 4.12: ${ae}`),/^(dateformat|datestring)/i.test(ae)?(0,B.p6)(ue):/^numberformat/i.test(ae)?(0,U.uf)(ue):re(ue)}}(Q,X):re(Q)}(X,ae,ie))}function re(ue){switch(typeof ue){case"string":return ue;case"number":return(0,U.uf)(ue);case"boolean":return""+ue;default:return ue instanceof Date?(0,B.p6)(ue):""}}},24263:(qe,xe,T)=>{"use strict";T.d(xe,{Dp:()=>H,Nv:()=>U,i8:()=>B,id:()=>W,qh:()=>Y});var D=T(15861),x=T(8314),w=T(21726);const B="4.24",U={request:(G,$)=>(0,D.Z)(function*(){const{default:re}=yield Promise.resolve().then(T.bind(T,84792)),ue=G.options,ae=ue.responseType;ue.signal=$?.signal,ue.responseType="native"===ae||"native-request-init"===ae?"native-request-init":["blob","json","text"].includes(ae)&&(0,w.oh)(G.url)?.after?ae:"array-buffer";const oe=yield re(G.url,ue),ie={data:oe.data,ssl:oe.ssl};switch(oe.requestOptions.responseType){case"native-request-init":return delete ie.data.signal,ie;case"blob":ie.data=yield ie.data.arrayBuffer();break;case"json":ie.data=(new TextEncoder).encode(JSON.stringify(ie.data)).buffer;break;case"text":ie.data=(new TextEncoder).encode(ie.data).buffer}return{result:ie,transferList:[ie.data]}})()};let W;function Y(G){W=G}function H(G){const $=W&&W.findCredential(G);return $&&$.token?(0,w.ZN)(G,"token",$.token):G}(0,x.Z)("host-webworker")||((0,x.Z)("edge")||(0,x.Z)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},32258:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>ls});var Ee,D=T(15861),x=T(17626),w=T(73281),$=(T(4832),T(49067),T(96794),T(69747),T(40425),T(69357),T(40342)),re=T(14726),ue=T(33474),ae=T(32088),oe=T(84792),ie=T(20383),X=T(79608),Z=T(46160),Q=T(26584),J=T(72392),se=T(8314),ee=T(2076),le=T(58817),ne=T(63290),ce=T(62208),de=T(99959),me=T(94113),_e=T(10699),he=T(95737),ye=T(21726),fe=T(77712),De=T(66656),ve=T(68653),Ce=T(76898),ge=T(99433),Te=T(383),Le=T(86810),ze=(T(85931),T(90912));let Ae=Ee=class extends Le.wq{constructor(Pt){super(Pt),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Ee({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Ae.prototype,"expression",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Ae.prototype,"name",void 0),(0,x._)([(0,fe.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],Ae.prototype,"returnType",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Ae.prototype,"title",void 0),Ae=Ee=(0,x._)([(0,Ce.j)("esri.form.ExpressionInfo")],Ae);const we=Ae;let Be=class extends Le.wq{constructor(Pt){super(Pt),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Be.prototype,"description",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Be.prototype,"label",void 0),(0,x._)([(0,fe.Cb)()],Be.prototype,"type",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Be.prototype,"visibilityExpression",void 0),Be=(0,x._)([(0,Ce.j)("esri.form.elements.Element")],Be);const Pe=Be;var Oe;let Ke=Oe=class extends Le.wq{constructor(Pt){super(Pt),this.type=null}clone(){return new Oe({type:this.type})}};(0,x._)([(0,fe.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Ke.prototype,"type",void 0),Ke=Oe=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.AttachmentInput")],Ke);const Ve=Ke;var Ne;let Ie=Ne=class extends Pe{constructor(Pt){super(Pt),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new Ne({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Ie.prototype,"attachmentKeyword",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],Ie.prototype,"editable",void 0),(0,x._)([(0,fe.Cb)({type:Ve,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ie.prototype,"input",void 0),(0,x._)([(0,fe.Cb)({type:["attachment"],json:{read:!1,write:!0}})],Ie.prototype,"type",void 0),Ie=Ne=(0,x._)([(0,Ce.j)("esri.form.elements.AttachmentElement")],Ie);const We=Ie;let Se=class extends Le.wq{constructor(Pt){super(Pt),this.type=null}};(0,x._)([(0,fe.Cb)()],Se.prototype,"type",void 0),Se=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.Input")],Se);const He=Se;let $e=class extends He{constructor(Pt){super(Pt),this.maxLength=null,this.minLength=0}};(0,x._)([(0,fe.Cb)({type:Number,json:{write:!0}})],$e.prototype,"maxLength",void 0),(0,x._)([(0,fe.Cb)({type:Number,json:{write:!0}})],$e.prototype,"minLength",void 0),$e=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.TextInput")],$e);const et=$e;var nt;let it=nt=class extends et{constructor(Pt){super(Pt),this.type="barcode-scanner"}clone(){return new nt({maxLength:this.maxLength,minLength:this.minLength})}};(0,x._)([(0,fe.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],it.prototype,"type",void 0),it=nt=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.BarcodeScannerInput")],it);const Xe=it;var rt;let Ze=rt=class extends He{constructor(Pt){super(Pt),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new rt({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Ze.prototype,"noValueOptionLabel",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],Ze.prototype,"showNoValueOption",void 0),(0,x._)([(0,fe.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],Ze.prototype,"type",void 0),Ze=rt=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.ComboBoxInput")],Ze);const lt=Ze;var st;function Mt(Pt){return null!=Pt?new Date(Pt):null}function Ft(Pt){return Pt?Pt.getTime():null}let kt=st=class extends He{constructor(Pt){super(Pt),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(Pt,St){return Mt(St.max)}writeMax(Pt,St){St.max=Ft(Pt)}readMin(Pt,St){return Mt(St.min)}writeMin(Pt,St){St.min=Ft(Pt)}clone(){return new st({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],kt.prototype,"includeTime",void 0),(0,x._)([(0,fe.Cb)({type:Date,json:{type:Number,write:!0}})],kt.prototype,"max",void 0),(0,x._)([(0,ve.r)("max")],kt.prototype,"readMax",null),(0,x._)([(0,ge.c)("max")],kt.prototype,"writeMax",null),(0,x._)([(0,fe.Cb)({type:Date,json:{type:Number,write:!0}})],kt.prototype,"min",void 0),(0,x._)([(0,ve.r)("min")],kt.prototype,"readMin",null),(0,x._)([(0,ge.c)("min")],kt.prototype,"writeMin",null),(0,x._)([(0,fe.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],kt.prototype,"type",void 0),kt=st=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.DateTimePickerInput")],kt);const wt=kt;var zt;let Zt=zt=class extends He{constructor(Pt){super(Pt),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new zt({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],Zt.prototype,"noValueOptionLabel",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],Zt.prototype,"showNoValueOption",void 0),(0,x._)([(0,fe.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],Zt.prototype,"type",void 0),Zt=zt=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.RadioButtonsInput")],Zt);const ar=Zt;var Pr;let kr=Pr=class extends He{constructor(Pt){super(Pt),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Pr({offValue:this.offValue,onValue:this.onValue})}};(0,x._)([(0,fe.Cb)({type:[String,Number],json:{write:!0}})],kr.prototype,"offValue",void 0),(0,x._)([(0,fe.Cb)({type:[String,Number],json:{write:!0}})],kr.prototype,"onValue",void 0),(0,x._)([(0,fe.Cb)({type:["switch"],json:{read:!1,write:!0}})],kr.prototype,"type",void 0),kr=Pr=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.SwitchInput")],kr);const ss=kr;var os;let Hr=os=class extends et{constructor(Pt){super(Pt),this.type="text-area"}clone(){return new os({maxLength:this.maxLength,minLength:this.minLength})}};(0,x._)([(0,fe.Cb)({type:["text-area"],json:{read:!1,write:!0}})],Hr.prototype,"type",void 0),Hr=os=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.TextAreaInput")],Hr);const pt=Hr;var Ut;let $t=Ut=class extends et{constructor(Pt){super(Pt),this.type="text-box"}clone(){return new Ut({maxLength:this.maxLength,minLength:this.minLength})}};(0,x._)([(0,fe.Cb)({type:["text-box"],json:{read:!1,write:!0}})],$t.prototype,"type",void 0),$t=Ut=(0,x._)([(0,Ce.j)("esri.form.elements.inputs.TextBoxInput")],$t);const _r={base:He,key:"type",typeMap:{"barcode-scanner":Xe,"combo-box":lt,"datetime-picker":wt,"radio-buttons":ar,switch:ss,"text-area":pt,"text-box":$t}};var gr,hr=T(67945);let vr=gr=class extends Pe{constructor(Pt){super(Pt),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new gr({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,x._)([(0,fe.Cb)({types:hr.V5,json:{read:{reader:hr.im},write:!0}})],vr.prototype,"domain",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],vr.prototype,"editable",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],vr.prototype,"editableExpression",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],vr.prototype,"fieldName",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],vr.prototype,"hint",void 0),(0,x._)([(0,fe.Cb)({types:_r,json:{read:{source:"inputType"},write:{target:"inputType"}}})],vr.prototype,"input",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],vr.prototype,"requiredExpression",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:!1,write:!0}})],vr.prototype,"type",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],vr.prototype,"valueExpression",void 0),vr=gr=(0,x._)([(0,Ce.j)("esri.form.elements.FieldElement")],vr);const Kr=vr;var Jr,Gr=T(51686);let ns=Jr=class extends Pe{constructor(Pt){super(Pt),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Jr({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,le.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,x._)([(0,fe.Cb)({type:Number,json:{write:!0}})],ns.prototype,"displayCount",void 0),(0,x._)([(0,fe.Cb)({type:["list"],json:{write:!0}})],ns.prototype,"displayType",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{write:!0}})],ns.prototype,"editable",void 0),(0,x._)([(0,fe.Cb)({type:[Gr.Z],json:{write:!0}})],ns.prototype,"orderByFields",void 0),(0,x._)([(0,fe.Cb)({type:Number,json:{write:!0}})],ns.prototype,"relationshipId",void 0),(0,x._)([(0,fe.Cb)({type:["relationship"],json:{read:!1,write:!0}})],ns.prototype,"type",void 0),ns=Jr=(0,x._)([(0,Ce.j)("esri.form.elements.RelationshipElement")],ns);const lr=ns;function Tr(Pt){return{typesWithGroup:{base:Pe,key:"type",typeMap:{attachment:We,field:Kr,group:Pt,relationship:lr}},typesWithoutGroup:{base:Pe,key:"type",typeMap:{attachment:We,field:Kr,relationship:lr}}}}function zr(Pt,St,mr=!0){if(!Pt)return null;const qr=mr?St.typesWithGroup.typeMap:St.typesWithoutGroup.typeMap;return Pt.filter(fs=>qr[fs.type]).map(fs=>qr[fs.type].fromJSON(fs))}function Tt(Pt,St,mr=!0){if(!Pt)return null;const qr=mr?St.typesWithGroup.typeMap:St.typesWithoutGroup.typeMap;return Pt.filter(fs=>qr[fs.type]).map(fs=>fs.toJSON())}function sr(Pt,St,mr=!0){return Pt?Pt.map(qr=>(0,ze.N7)(mr?St.typesWithGroup:St.typesWithoutGroup,qr)):null}var Rr;let bt=Rr=class extends Pe{constructor(Pt){super(Pt),this.elements=null,this.initialState="expanded",this.type="group"}castElements(Pt){return sr(Pt,Qt,!1)}readElements(Pt,St){return zr(St.formElements,Qt,!1)}writeElements(Pt,St){St.formElements=Tt(Pt,Qt,!1)}clone(){return new Rr({description:this.description,elements:(0,le.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,x._)([(0,fe.Cb)({json:{write:!0}})],bt.prototype,"elements",void 0),(0,x._)([(0,De.p)("elements")],bt.prototype,"castElements",null),(0,x._)([(0,ve.r)("elements",["formElements"])],bt.prototype,"readElements",null),(0,x._)([(0,ge.c)("elements")],bt.prototype,"writeElements",null),(0,x._)([(0,fe.Cb)({type:["collapsed","expanded"],json:{write:!0}})],bt.prototype,"initialState",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:!1,write:!0}})],bt.prototype,"type",void 0),bt=Rr=(0,x._)([(0,Ce.j)("esri.form.elements.GroupElement")],bt);const Qt=Tr(bt);var yr;const jr=Tr(bt);let es=yr=class extends Le.wq{constructor(Pt){super(Pt),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(Pt){return sr(Pt,jr)}readElements(Pt,St){return zr(St.formElements,jr)}writeElements(Pt,St){St.formElements=Tt(Pt,jr)}clone(){return new yr({description:this.description,expressionInfos:(0,le.d9)(this.expressionInfos),elements:(0,le.d9)(this.elements),title:this.title})}};(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],es.prototype,"description",void 0),(0,x._)([(0,fe.Cb)({json:{write:!0}})],es.prototype,"elements",void 0),(0,x._)([(0,De.p)("elements")],es.prototype,"castElements",null),(0,x._)([(0,ve.r)("elements",["formElements"])],es.prototype,"readElements",null),(0,x._)([(0,ge.c)("elements")],es.prototype,"writeElements",null),(0,x._)([(0,fe.Cb)({type:[we],json:{write:!0}})],es.prototype,"expressionInfos",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{write:!0}})],es.prototype,"title",void 0),es=yr=(0,x._)([(0,Ce.j)("esri.form.FormTemplate")],es);const hs=es;var Is=T(2004),Yr=T(79334),Rs=T(65234),Zi=T(44917),as=(T(29132),T(88879)),ps=T(80542),zs=T(47996),As=T(60330),Ys=T(59289),di=T(61039),Nr=T(20514),Ai=T(61515),ds=T(17253),Tn=T(37118),Ci=T(71774);let gt=0;const Wr=ne.Z.getLogger("esri.layers.graphics.sources.MemorySource");let xr=class extends(zs.Z.LoadableMixin((0,As.v)((0,ps.p)(Z.Z)))){constructor(Pt){super(Pt),this._idToClientGraphic=null,this.type="memory"}load(Pt){const St=(0,ce.pC)(Pt)?Pt.signal:null;return this.addResolvingPromise(this._startWorker(St)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get workerGeometryType(){const Pt=this.layer?.geometryType;return Pt?this._geometryTypeRequiresClientGraphicMapping(Pt)?"polygon":Pt:null}applyEdits(Pt){return this.load().then(()=>this._applyEdits(Pt))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(Pt,St={}){var mr=this;return(0,D.Z)(function*(){yield mr.load(St);const qr=yield mr._connection.invoke("queryFeatures",Pt?Pt.toJSON():null,St);(0,Ai.p)(Pt,mr.layer.spatialReference,qr);const fs=ds.default.fromJSON(qr);if(!mr._requiresClientGraphicMapping())return fs;const qs=mr.layer.objectIdField;for(const wi of fs.features){const Fn=mr._idToClientGraphic.get(wi.attributes[qs]);Fn&&(wi.geometry=Fn.geometry)}return fs.geometryType=mr.layer.geometryType,fs})()}queryFeaturesJSON(Pt,St={}){var mr=this;return(0,D.Z)(function*(){if(mr._requiresClientGraphicMapping())throw new Q.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield mr.load(St);const qr=yield mr._connection.invoke("queryFeatures",Pt?Pt.toJSON():null,St);return(0,Ai.p)(Pt,mr.layer.spatialReference,qr),qr})()}queryFeatureCount(Pt,St={}){return this.load(St).then(()=>this._connection.invoke("queryFeatureCount",Pt?Pt.toJSON():null,St))}queryObjectIds(Pt,St={}){return this.load(St).then(()=>this._connection.invoke("queryObjectIds",Pt?Pt.toJSON():null,St))}queryExtent(Pt,St={}){return this.load(St).then(()=>this._connection.invoke("queryExtent",Pt?Pt.toJSON():null,St)).then(mr=>({count:mr.count,extent:Is.Z.fromJSON(mr.extent)}))}querySnapping(Pt,St={}){return this.load(St).then(()=>this._connection.invoke("querySnapping",Pt,St))}_applyEdits(Pt){var St=this;return(0,D.Z)(function*(){if(!St._connection)throw new Q.Z("feature-layer-source:edit-failure","Memory source not loaded");const mr=St.layer.objectIdField;let qr=null;const fs=[],qs=[];yield Promise.all([St._prepareClientMapping(Pt.addFeatures,null),St._prepareClientMapping(Pt.updateFeatures,null)]);const wi=Xn=>"objectId"in Xn&&null!=Xn.objectId?Xn.objectId:"attributes"in Xn&&null!=Xn.attributes[mr]?Xn.attributes[mr]:null;if(Pt.addFeatures&&(qr=St._prepareAddFeatures(Pt.addFeatures)),Pt.deleteFeatures)for(const Xn of Pt.deleteFeatures){const uo=wi(Xn);null!=uo&&fs.push(uo)}const fn=Pt.updateFeatures&&St._idToClientGraphic?new Map:null;if(Pt.updateFeatures)for(const Xn of Pt.updateFeatures)if(qs.push(St._serializeFeature(Xn)),fn){const uo=wi(Xn);null!=uo&&fn.set(uo,Xn)}(0,Nr.P)(qr?qr.features:null,qs,St.layer.spatialReference);const{fullExtent:Fn,featureEditResults:un}=yield St._connection.invoke("applyEdits",{adds:qr?qr.features:[],updates:qs,deletes:fs});return St.fullExtent=Fn,qr&&qr.finish(un.uidToObjectId),St._updateClientGraphicIds(fn,un),St._createEditsResult(un)})()}_prepareClientMapping(Pt,St){var mr=this;return(0,D.Z)(function*(){if("mesh"!==mr.layerOrSourceGeometryType||(0,ce.Wi)(Pt))return;const qr=[];for(const{geometry:fs}of Pt)!(0,ce.pC)(fs)||"mesh"!==fs.type||fs.hasExtent||fs.loaded||qr.push(fs.load({signal:St}));qr.length&&(yield Promise.all(qr))})()}_updateClientGraphicIds(Pt,St){if(this._idToClientGraphic){if(Pt)for(const mr of St.updateResults){if(!mr.success)continue;const qr=Pt.get(mr.objectId);null!=qr&&this._addIdToClientGraphic(qr)}for(const mr of St.deleteResults)mr.success&&this._idToClientGraphic.delete(mr.objectId)}}_createEditsResult(Pt){return{addFeatureResults:Pt.addResults?Pt.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:Pt.updateResults?Pt.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:Pt.deleteResults?Pt.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(Pt){const St=!0===Pt.success?null:Pt.error||{code:void 0,description:void 0};return{objectId:Pt.objectId,globalId:Pt.globalId,error:St?new Q.Z("feature-layer-source:edit-failure",St.description,{code:St.code}):null}}_prepareAddFeatures(Pt){const St=new Map,mr=new Array(Pt.length);let qr=null;for(let qs=0;qs<Pt.length;qs++){const wi=Pt[qs],fn=this._serializeFeature(wi);!qr&&(0,ce.pC)(wi.geometry)&&(qr=wi.geometry.type),mr[qs]=fn,St.set(`${fn.uid}`,wi)}const fs=this;return{features:mr,inferredGeometryType:qr,finish(qs){const wi=fs.sourceJSON.objectIdField;for(const fn in qs){const Fn=qs[fn],un=St.get(fn);un&&(un.attributes||(un.attributes={}),-1===Fn?delete un.attributes[wi]:un.attributes[wi]=Fn,fs._addIdToClientGraphic(un))}}}}_addIdToClientGraphic(Pt){if(!this._idToClientGraphic)return;const mr=Pt.attributes&&Pt.attributes[this.sourceJSON.objectIdField];null!=mr&&this._idToClientGraphic.set(mr,Pt)}get layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(Pt){return this._geometryTypeRequiresClientGraphicMapping(Pt.type)}_geometryTypeRequiresClientGraphicMapping(Pt){return"mesh"===Pt||"multipatch"===Pt||"extent"===Pt}_serializeFeature(Pt){const{attributes:St}=Pt,mr=this._geometryForSerialization(Pt),qr=(gt++).toString();return mr?{uid:qr,geometry:mr.toJSON(),attributes:St}:{uid:qr,attributes:St}}_geometryForSerialization(Pt){const{geometry:St}=Pt;return(0,ce.Wi)(St)?null:this._geometryRequiresClientGraphicMapping(St)?St.extent?Tn.Z.fromExtent(St.extent):null:St}_startWorker(Pt){var St=this;return(0,D.Z)(function*(){St._connection=yield(0,Ys.bA)("MemorySourceWorker",{strategy:(0,se.Z)("feature-layers-workers")?"dedicated":"local",signal:Pt});const{fields:mr,spatialReference:qr,objectIdField:fs,hasM:qs,hasZ:wi,timeInfo:fn}=St.layer,Fn="defaults"===St.layer.originOf("spatialReference");yield St._prepareClientMapping(St.items,Pt);const un=St._prepareAddFeatures(St.items);St.handles.add(St.on("before-changes",eo=>{Wr.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),eo.preventDefault()}));const Xn={features:un.features,fields:mr&&mr.map(eo=>eo.toJSON()),geometryType:Ci.P$.toJSON(St.workerGeometryType),hasM:"mesh"!==St.layerOrSourceGeometryType&&qs,hasZ:"mesh"===St.layerOrSourceGeometryType||wi,objectIdField:fs,spatialReference:Fn?null:qr&&qr.toJSON(),timeInfo:fn?fn.toJSON():null},uo=yield St._connection.invoke("load",Xn,{signal:Pt});for(const eo of uo.warnings)Wr.warn(eo.message,{layer:St.layer,warning:eo});uo.featureErrors.length&&Wr.warn(`Encountered ${uo.featureErrors.length} validation errors while loading features`,uo.featureErrors);const bo=uo.layerDefinition;St._geometryTypeRequiresClientGraphicMapping(un.inferredGeometryType)&&(bo.geometryType=Ci.P$.toJSON(un.inferredGeometryType)),St.sourceJSON=bo,St._requiresClientGraphicMapping()&&(St._idToClientGraphic=new Map),un.finish(uo.assignedObjectIds)})()}};(0,x._)([(0,di.c)({Type:as.Z,ensureType:(0,ze.se)(as.Z)})],xr.prototype,"itemType",void 0),(0,x._)([(0,fe.Cb)()],xr.prototype,"type",void 0),(0,x._)([(0,fe.Cb)({constructOnly:!0})],xr.prototype,"layer",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0})],xr.prototype,"workerGeometryType",null),(0,x._)([(0,fe.Cb)()],xr.prototype,"sourceJSON",void 0),xr=(0,x._)([(0,Ce.j)("esri.layers.graphics.sources.MemorySource")],xr);var er,bs=T(50085),Ns=T(65088),_i=T(552),gi=T(50107),hi=T(35126),Di=T(49286),Oi=T(32629),zi=T(6647),Zr=T(30346),ii=T(99555),yn=T(97941),dr=T(38305),Dr=T(13812);let Ir=er=class extends Le.wq{constructor(Pt){super(Pt)}clone(){const{name:Pt,fields:St,isAscending:mr,isUnique:qr,description:fs}=this;return new er({name:Pt,fields:St,isAscending:mr,isUnique:qr,description:fs})}};(0,x._)([(0,fe.Cb)({constructOnly:!0})],Ir.prototype,"name",void 0),(0,x._)([(0,fe.Cb)({constructOnly:!0})],Ir.prototype,"fields",void 0),(0,x._)([(0,fe.Cb)({constructOnly:!0})],Ir.prototype,"isAscending",void 0),(0,x._)([(0,fe.Cb)({constructOnly:!0})],Ir.prototype,"isUnique",void 0),(0,x._)([(0,fe.Cb)({constructOnly:!0})],Ir.prototype,"description",void 0),Ir=er=(0,x._)([(0,Ce.j)("esri.layers.support.FeatureIndex")],Ir);var Ps=T(47717),Ws=T(32777),yi=T(41638),Gs=T(55911),Mi=T(36630),Xi=T(16730);let Hs=class extends((0,X.J)(Le.wq)){constructor(Pt){super(Pt),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,x._)([(0,fe.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Hs.prototype,"shapeAreaField",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Hs.prototype,"shapeLengthField",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:Pt=>Xi.gV.read(Pt)||Xi.Jo.read(Pt)}})],Hs.prototype,"units",void 0),Hs=(0,x._)([(0,Ce.j)("esri.layers.support.GeometryFieldsInfo")],Hs);const ki=Hs;var sn=T(170),Uo=T(62667),Vn=T(2430);const io=new ee.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),An=new ee.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Gn=class extends((0,X.J)(Le.wq)){constructor(Pt){super(Pt),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,x._)([(0,fe.Cb)({json:{read:io.read,write:io.write}})],Gn.prototype,"cardinality",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"composite",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"id",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"keyField",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"keyFieldInRelationshipTable",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"name",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"relatedTableId",void 0),(0,x._)([(0,fe.Cb)({json:{read:!0,write:!0}})],Gn.prototype,"relationshipTableId",void 0),(0,x._)([(0,fe.Cb)({json:{read:An.read,write:An.write}})],Gn.prototype,"role",void 0),Gn=(0,x._)([(0,Ce.j)("esri.layers.support.Relationship")],Gn);const hn=Gn;var ya=T(62708),Wo=T(5676),sa=T(15283),ia=T(39683),nn=T(67736),Co=T(84952),Ja=T(67010),Kn=T(6871),Yn=T(49430),hl=T(92236);const Sr=new ee.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ts={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ys="FeatureLayer",Wi=ne.Z.getLogger("esri.layers.FeatureLayer");function an(Pt,St){return new Q.Z("layer:unsupported",`Layer (${Pt.title}, ${Pt.id}) of type '${Pt.declaredClass}' ${St}`,{layer:Pt})}function Ln(Pt){return Pt&&Pt instanceof Z.Z}function ai(Pt,St,mr){return!!(Pt&&Pt.hasOwnProperty(St)?Pt[St]:mr)}function Oo(Pt,St,mr){return Pt&&Pt.hasOwnProperty(St)?Pt[St]:mr}function Bt(Pt){const St=Pt?.supportedSpatialAggregationStatistics?.map(mr=>mr.toLowerCase());return{envelope:!!St?.includes("envelopeaggregate"),centroid:!!St?.includes("centroidaggregate"),convexHull:!!St?.includes("convexhullaggregate")}}function Wt(Pt,St){return!!Pt?.supportedOperationsWithCacheHint?.map(qr=>qr.toLowerCase())?.includes(St.toLowerCase())}const rr=(0,Gs.v)();function Er(Pt,St,mr){const qr=!!mr?.writeLayerSchema;return{enabled:qr,ignoreOrigin:qr}}let ur=class extends((0,hi.b)((0,_i.h)((0,Oi.c)((0,yn.n)((0,ii.M)((0,Zr.Q)((0,Ns.Y)((0,Di.q)((0,zi.I)((0,de.R)((0,gi.N)((0,bs.V)((0,X.J)(Zi.Z)))))))))))))){constructor(...Pt){super(...Pt),this._handles=new J.Z,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Rs.Z.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Z.Z.ofType(Ir)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){this.source?.destroy(),this._handles=(0,ce.SC)(this._handles)}normalizeCtorArgs(Pt,St){return"string"==typeof Pt?{url:Pt,...St}:Pt}load(Pt){var St=this;const mr=(0,ce.pC)(Pt)?Pt.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(mr).then(fs=>this._initLayerProperties(fs)));const qr=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},Pt).catch(_e.r9).then((0,D.Z)(function*(){if(St.url&&null==St.layerId&&/FeatureServer|MapServer\/*$/i.test(St.url)){const fs=yield St._fetchFirstLayerId(mr);null!=fs&&(St.layerId=fs)}if(!St.url&&!St._hasMemorySource())throw new Q.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return St._initLayerProperties(yield St.createGraphicsSource(mr))})).then(()=>this.finishLoadEditablePortalLayer(Pt));return this.addResolvingPromise(qr),Promise.resolve(this)}readCapabilities(Pt,St){return{analytics:this._readAnalyticsCapabilities(St=St.layerDefinition||St),attachment:this._readAttachmentCapabilities(St),data:this._readDataCapabilities(St),metadata:this._readMetadataCapabilities(St),operations:this._readOperationsCapabilities(St.capabilities||Pt,St),query:this._readQueryCapabilities(St),queryRelated:this._readQueryRelatedCapabilities(St),queryTopFeatures:this._readQueryTopFeaturesCapabilities(St),editing:this._readEditingCapabilities(St)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(Pt){null!=Pt?this._override("editingEnabled",Pt):this._clearOverride("editingEnabled")}readEditingEnabled(Pt,St){return this._readEditingEnabled(St,!1)}readEditingEnabledFromWebMap(Pt,St,mr){return this._readEditingEnabled(St,!0,mr)}writeEditingEnabled(Pt,St){this._writeEditingEnabled(Pt,St,!1)}writeEditingEnabledToWebMap(Pt,St,mr,qr){this._writeEditingEnabled(Pt,St,!0,qr)}readEditingInfo(Pt,St){const{editingInfo:mr}=St;return mr?{lastEditDate:null!=mr.lastEditDate?new Date(mr.lastEditDate):null}:null}readIsTable(Pt,St){return"Table"===(St=St&&St.layerDefinition||St).type||!St.geometryType}writeIsTable(Pt,St,mr,qr){qr?.writeLayerSchema&&(0,me.RB)(mr,Pt?"Table":"Feature Layer",St)}readMinScale(Pt,St){return St.effectiveMinScale||Pt||0}readMaxScale(Pt,St){return St.effectiveMaxScale||Pt||0}readGlobalIdFieldFromService(Pt,St){if((St=St.layerDefinition||St).globalIdField)return St.globalIdField;if(St.fields)for(const mr of St.fields)if("esriFieldTypeGlobalID"===mr.type)return mr.name}readObjectIdFieldFromService(Pt,St){if((St=St.layerDefinition||St).objectIdField)return St.objectIdField;if(St.fields)for(const mr of St.fields)if("esriFieldTypeOID"===mr.type)return mr.name}get parsedUrl(){const Pt=this.url?(0,ye.mN)(this.url):null;return null!=Pt&&(null!=this.dynamicDataSource?Pt.path=(0,ye.v_)(Pt.path,"dynamicLayer"):null!=this.layerId&&(Pt.path=(0,ye.v_)(Pt.path,this.layerId.toString()))),Pt}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(Pt){(0,Mi.YN)(Pt,this.fieldsIndex),this._set("renderer",Pt)}readRenderer(Pt,St,mr){const qr=(St=St.layerDefinition||St).drawingInfo&&St.drawingInfo.renderer||void 0;if(qr){const fs=(0,ue.a)(qr,St,mr)||void 0;return fs||Wi.error("Failed to create renderer",{rendererDefinition:St.drawingInfo.renderer,layer:this,context:mr}),fs}if(St.defaultSymbol)return St.types&&St.types.length?new re.Z({defaultSymbol:Fr(St.defaultSymbol,St,mr),field:St.typeIdField,uniqueValueInfos:St.types.map(fs=>({id:fs.id,symbol:Fr(fs.symbol,fs,mr)}))}):new $.Z({symbol:Fr(St.defaultSymbol,St,mr)})}set source(Pt){const St=this._get("source");St!==Pt&&(Ln(St)&&this._resetMemorySource(St),Ln(Pt)&&this._initMemorySource(Pt),this._set("source",Pt))}castSource(Pt){return Pt?Array.isArray(Pt)||Pt instanceof Z.Z?new xr({layer:this,items:Pt}):Pt:null}readSource(Pt,St){const mr=ds.default.fromJSON(St.featureSet);return new xr({layer:this,items:mr&&mr.features||[]})}readServiceDefinitionExpression(Pt,St){return St.definitionQuery||St.definitionExpression}readTemplates(Pt,St){const mr=St.editFieldsInfo,qr=mr&&mr.creatorField,fs=mr&&mr.editorField;return Pt=Pt&&Pt.map(qs=>Ws.Z.fromJSON(qs)),this._fixTemplates(Pt,qr),this._fixTemplates(Pt,fs),Pt}readTitle(Pt,St){const mr=St.layerDefinition&&St.layerDefinition.name||St.name,qr=St.title||St.layerDefinition&&St.layerDefinition.title;if(mr){const fs=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,dr.a7)(this.url,mr):mr;let qs=mr;if(!qs&&this.url){const wi=(0,dr.Qc)(this.url);(0,ce.pC)(wi)&&(qs=wi.title)}return qs?("item-title-and-service-name"===this.sublayerTitleMode&&fs&&fs!==qs&&(qs=fs+" - "+qs),(0,dr.ld)(qs)):void 0}if("item-title"===this.sublayerTitleMode&&qr)return qr}readTitleFromWebMap(Pt,St){return St.title||St.layerDefinition&&St.layerDefinition.name}readTypeIdField(Pt,St){let mr=(St=St.layerDefinition||St).typeIdField;if(mr&&St.fields){mr=mr.toLowerCase();const qr=St.fields.find(fs=>fs.name.toLowerCase()===mr);qr&&(mr=qr.name)}return mr}readTypes(Pt,St){Pt=(St=St.layerDefinition||St).types;const mr=St.editFieldsInfo,qr=mr&&mr.creatorField,fs=mr&&mr.editorField;return Pt&&Pt.map(qs=>(qs=yi.Z.fromJSON(qs),this._fixTemplates(qs.templates,qr),this._fixTemplates(qs.templates,fs),qs))}set url(Pt){const St=(0,dr.XG)({layer:this,url:Pt,nonStandardUrlAllowed:!0,logger:Wi});this._set("url",St.url),null!=St.layerId&&this._set("layerId",St.layerId)}writeUrl(Pt,St,mr,qr){(0,dr.wH)(this,Pt,null,St,qr)}readVersion(Pt,St){return St.currentVersion?St.currentVersion:St.hasOwnProperty("capabilities")||St.hasOwnProperty("drawingInfo")||St.hasOwnProperty("hasAttachments")||St.hasOwnProperty("htmlPopupType")||St.hasOwnProperty("relationships")||St.hasOwnProperty("timeInfo")||St.hasOwnProperty("typeIdField")||St.hasOwnProperty("types")?10:9.3}readVisible(Pt,St){return St.layerDefinition&&null!=St.layerDefinition.defaultVisibility?!!St.layerDefinition.defaultVisibility:null!=St.visibility?!!St.visibility:void 0}addAttachment(Pt,St){return this.load().then(()=>this._checkAttachmentSupport(Pt)).then(()=>{if(!("addAttachment"in this.source))throw new Q.Z(ys,"Layer source does not support addAttachment capability");return this.source.addAttachment(Pt,St)})}updateAttachment(Pt,St,mr){return this.load().then(()=>this._checkAttachmentSupport(Pt)).then(()=>{if(!("updateAttachment"in this.source))throw new Q.Z(ys,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(Pt,St,mr)})}applyEdits(Pt,St){var mr=this;return(0,D.Z)(function*(){const qr=yield T.e(1913).then(T.bind(T,81913));return yield mr.load(),qr.applyEdits(mr,mr.source,Pt,St)})()}on(Pt,St){return super.on(Pt,St)}createPopupTemplate(Pt){return(0,Yn.eZ)(this,Pt)}createGraphicsSource(Pt){var St=this;return(0,D.Z)(function*(){if(St._hasMemorySource())return St.source.load({signal:Pt});const{default:mr}=yield(0,_e.Hl)(T.e(114).then(T.bind(T,30114)),Pt);return new mr({layer:St}).load({signal:Pt})})()}createQuery(){const Pt=new Co.Z,St=this.get("capabilities.data"),mr=this.get("capabilities.query");Pt.dynamicDataSource=this.dynamicDataSource,Pt.historicMoment=this.historicMoment,Pt.gdbVersion=this.gdbVersion,Pt.returnGeometry=!0,mr&&(Pt.compactGeometryEnabled=mr.supportsCompactGeometry,Pt.defaultSpatialReferenceEnabled=mr.supportsDefaultSpatialReference),St&&(St.supportsZ&&null!=this.returnZ&&(Pt.returnZ=this.returnZ),St.supportsM&&null!=this.returnM&&(Pt.returnM=this.returnM)),Pt.outFields=["*"];const qr=(0,ce.pC)(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,fs=(0,he._)(this.definitionExpression,qr);Pt.where=fs||"1=1";const{timeOffset:qs,timeExtent:wi}=this;return Pt.timeExtent=null!=qs&&null!=wi?wi.offset(-qs.value,qs.unit):wi||null,Pt.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,Pt}deleteAttachments(Pt,St){return this.load().then(()=>this._checkAttachmentSupport(Pt)).then(()=>{if(!("deleteAttachments"in this.source))throw new Q.Z(ys,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(Pt,St)})}fetchRecomputedExtents(Pt){return this.load({signal:Pt?.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(Pt);throw new Q.Z(ys,"Layer source does not support fetchUpdates capability")})}getFeatureType(Pt){const{typeIdField:St,types:mr}=this;if(!St||!Pt)return null;const qr=Pt.attributes?Pt.attributes[St]:void 0;if(null==qr)return null;let fs=null;return mr.some(qs=>{const{id:wi}=qs;return null!=wi&&(wi.toString()===qr.toString()&&(fs=qs),!!fs)}),fs}getFieldDomain(Pt,St){const qr=this.getFeatureType(St&&St.feature);if(qr){const fs=qr.domains&&qr.domains[Pt];if(fs&&"inherited"!==fs.type)return fs}return this._getLayerDomain(Pt)}getField(Pt){return this.fieldsIndex.get(Pt)}queryAttachments(Pt,St){return Pt=nn.Z.from(Pt),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new Q.Z(ys,"this layer doesn't support attachments");const{attachmentTypes:mr,objectIds:qr,globalIds:fs,num:qs,size:wi,start:fn,where:Fn}=Pt;if(!this.get("capabilities.operations.supportsQueryAttachments")){const Xn=mr&&mr.length,uo=fs&&fs.length,bo=wi&&wi.length;if(qr&&qr.length>1||Xn||uo||bo||qs||fn||Fn)throw new Q.Z(ys,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",Pt)}if(!(qr&&qr.length||Fn))throw new Q.Z(ys,"'objectIds' or 'where' are required to perform attachment query",Pt);if(!("queryAttachments"in this.source))throw new Q.Z(ys,"Layer source does not support queryAttachments capability",Pt);return this.source.queryAttachments(Pt)})}queryFeatures(Pt,St){return this.load().then(()=>this.source.queryFeatures(Co.Z.from(Pt)||this.createQuery(),St)).then(mr=>{if(mr?.features)for(const qr of mr.features)qr.layer=qr.sourceLayer=this;return mr})}queryObjectIds(Pt,St){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Co.Z.from(Pt)||this.createQuery(),St);throw new Q.Z(ys,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(Pt,St){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Co.Z.from(Pt)||this.createQuery(),St);throw new Q.Z(ys,"Layer source does not support queryFeatureCount capability")})}queryExtent(Pt,St){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Co.Z.from(Pt)||this.createQuery(),St);throw new Q.Z(ys,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(Pt,St){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(Ja.Z.from(Pt),St);throw new Q.Z(ys,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(Pt,St){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(Ja.Z.from(Pt),St);throw new Q.Z(ys,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(Pt,St){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Kn.Z.from(Pt),St).then(mr=>{if(mr?.features)for(const qr of mr.features)qr.layer=qr.sourceLayer=this;return mr});throw new Q.Z(ys,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(Pt,St){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Kn.Z.from(Pt),St);throw new Q.Z(ys,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(Pt,St){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Kn.Z.from(Pt),St);throw new Q.Z(ys,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(Pt,St){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Kn.Z.from(Pt),St);throw new Q.Z(ys,"Layer source does not support queryFeatureCount capability")})}read(Pt,St){const mr=Pt.featureCollection;if(mr){const qr=mr.layers;qr&&1===qr.length&&(super.read(qr[0],St),null!=mr.showLegend&&super.read({showLegend:mr.showLegend},St))}super.read(Pt,St),St&&"service"===St.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(Pt,St){St={...St,writeLayerSchema:St?.writeLayerSchema??this._hasMemorySource()};const{origin:mr,layerContainerType:qr,messages:fs}=St;if(this.dynamicDataSource)return fs?.push(an(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if("web-scene"===mr||"web-map"===mr&&"tables"!==qr)return fs?.push(an(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return fs?.push(an(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===mr&&"tables"===qr)return fs?.push(an(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(Pt,St)}clone(){if(this._hasMemorySource())throw new Q.Z(ys,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(Pt){return!!this.loaded&&("memory"===this.source.type||(0,Wo.D)(this,Pt))}save(Pt){var St=this;return(0,D.Z)(function*(){return(yield Promise.all([T.e(8592),T.e(6533)]).then(T.bind(T,36912))).save(St,Pt)})()}saveAs(Pt,St){var mr=this;return(0,D.Z)(function*(){return(yield Promise.all([T.e(8592),T.e(6533)]).then(T.bind(T,36912))).saveAs(mr,Pt,St)})()}_readEditingEnabled(Pt,St,mr){let qr=Pt.layerDefinition?.capabilities;return qr?this._hasEditingCapability(qr):(qr=Pt.capabilities,St&&"web-map"===mr?.origin&&!this._hasMemorySource()&&qr?this._hasEditingCapability(qr):void 0)}_hasEditingCapability(Pt){return Pt.toLowerCase().split(",").map(St=>St.trim()).includes("editing")}_writeEditingEnabled(Pt,St,mr,qr){if(!Pt){const fs=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";(0,me.RB)("layerDefinition.capabilities",fs,St),mr&&!qr?.writeLayerSchema&&(St.capabilities=fs)}}_checkAttachmentSupport(Pt){const{attributes:St}=Pt,{objectIdField:mr}=this;return this.get("capabilities.data.supportsAttachment")?Pt?St?St[mr]?void 0:Promise.reject(new Q.Z(ys,`feature is missing the identifying attribute ${mr}`)):Promise.reject(new Q.Z(ys,"'attributes' are required on a feature to query attachments")):Promise.reject(new Q.Z(ys,"A feature is required to add/delete/update attachments")):Promise.reject(new Q.Z(ys,"this layer doesn't support attachments"))}_getLayerDomain(Pt){const St=this.fieldsIndex.get(Pt);return St?St.domain:null}_fetchFirstLayerId(Pt){return(0,oe.default)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:Pt}).then(St=>{const mr=St.data;if(mr)return Array.isArray(mr.layers)&&mr.layers.length>0?mr.layers[0].id:Array.isArray(mr.tables)&&mr.tables.length>0?mr.tables[0].id:void 0})}_initLayerProperties(Pt){var St=this;return(0,D.Z)(function*(){return St._set("source",Pt),Pt.sourceJSON&&(St.sourceJSON=Pt.sourceJSON,St.read(Pt.sourceJSON,{origin:"service",url:St.parsedUrl})),St._verifySource(),St._verifyFields(),(0,Mi.YN)(St.renderer,St.fieldsIndex),(0,Mi.UF)(St.timeInfo,St.fieldsIndex),(0,ia.y)(St,{origin:"service"})})()}hasDataChanged(){var Pt=this;return(0,D.Z)(function*(){if(Pt.source?.refresh)try{const{dataChanged:St,updates:mr}=yield Pt.source?.refresh();if((0,ce.pC)(mr)&&(Pt.sourceJSON={...Pt.sourceJSON,...mr},Pt.read(mr,{origin:"service",url:Pt.parsedUrl})),St)return!0}catch{}if(Pt.definitionExpression)try{return(yield(0,he.E)(Pt.definitionExpression,Pt.fieldsIndex)).hasDateFunctions}catch{}return!1})()}_verifyFields(){const Pt=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+Pt+")"),this.isTable||this._hasMemorySource()||-1!==Pt.search(/\/FeatureServer\//i)||this.fields?.some(St=>"geometry"===St.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+Pt+")")}_fixTemplates(Pt,St){Pt&&Pt.forEach(mr=>{const qr=mr.prototype&&mr.prototype.attributes;qr&&St&&delete qr[St]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Q.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Q.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(Pt){Pt.forEach(St=>{St.layer=this,St.sourceLayer=this}),this._handles.add([Pt.on("after-add",St=>{St.item.layer=this,St.item.sourceLayer=this}),Pt.on("after-remove",St=>{St.item.layer=null,St.item.sourceLayer=null})],"fl-source")}_resetMemorySource(Pt){Pt.forEach(St=>{St.layer=null,St.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(Pt){return{supportsCacheHint:Wt(Pt.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(Pt){const St=Pt.attachmentProperties,mr={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Wt(Pt.advancedQueryCapabilities,"queryAttachments"),supportsResize:ai(Pt,"supportsAttachmentsResizing",!1)};return St&&Array.isArray(St)&&St.forEach(qr=>{const fs=Ts[qr.name];fs&&(mr[fs]=!!qr.isEnabled)}),mr}_readDataCapabilities(Pt){return{isVersioned:ai(Pt,"isDataVersioned",!1),supportsAttachment:ai(Pt,"hasAttachments",!1),supportsM:ai(Pt,"hasM",!1),supportsZ:ai(Pt,"hasZ",!1)}}_readMetadataCapabilities(Pt){return{supportsAdvancedFieldProperties:ai(Pt,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(Pt,St){const mr=Pt?Pt.toLowerCase().split(",").map(uo=>uo.trim()):[],qr=this.url?(0,dr.Qc)(this.url):null,fs=mr.includes((0,ce.pC)(qr)&&"MapServer"===qr.serverType?"data":"query"),qs=mr.includes("editing")&&!St.datesInUnknownTimezone;let wi=qs&&mr.includes("create"),fn=qs&&mr.includes("delete"),Fn=qs&&mr.includes("update");const un=mr.includes("changetracking"),Xn=St.advancedQueryCapabilities;return qs&&!(wi||fn||Fn)&&(wi=fn=Fn=!0),{supportsCalculate:ai(St,"supportsCalculate",!1),supportsTruncate:ai(St,"supportsTruncate",!1),supportsValidateSql:ai(St,"supportsValidateSql",!1),supportsAdd:wi,supportsDelete:fn,supportsEditing:qs,supportsChangeTracking:un,supportsQuery:fs,supportsQueryAnalytics:ai(Xn,"supportsQueryAnalytic",!1),supportsQueryAttachments:ai(Xn,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ai(Xn,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ai(St,"supportsAttachmentsResizing",!1),supportsSync:mr.includes("sync"),supportsUpdate:Fn,supportsExceedsLimitStatistics:ai(St,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(Pt){const St=Pt.advancedQueryCapabilities,mr=Pt.ownershipBasedAccessControlForFeatures,qr=Pt.archivingInfo,fs=this.url?.includes("MapServer"),qs=!(0,se.Z)("mapserver-pbf-enabled")&&fs&&this.version<10.81,wi=(0,dr.M8)(this.url),fn=(Pt.supportedQueryFormats||"").split(",").reduce((Fn,un)=>{const Xn=un.toLowerCase().trim();return Xn&&Fn.add(Xn),Fn},new Set);return{supportsStatistics:ai(St,"supportsStatistics",Pt.supportsStatistics),supportsPercentileStatistics:ai(St,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ai(St,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Bt(St),supportsCentroid:ai(St,"supportsReturningGeometryCentroid",!1),supportsDistance:ai(St,"supportsQueryWithDistance",!1),supportsDistinct:ai(St,"supportsDistinct",Pt.supportsAdvancedQueries),supportsExtent:ai(St,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ai(St,"supportsReturningGeometryProperties",!1),supportsHavingClause:ai(St,"supportsHavingClause",!1),supportsOrderBy:ai(St,"supportsOrderBy",Pt.supportsAdvancedQueries),supportsPagination:ai(St,"supportsPagination",!1),supportsQuantization:ai(Pt,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ai(Pt,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ai(Pt,"supportsReturningQueryGeometry",!1),supportsResultType:ai(St,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ai(St,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ai(St,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ai(Pt,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ai(St,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ai(mr,"allowOthersToQuery",!0),supportsHistoricMoment:ai(qr,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!qs&&fn.has("pbf"),supportsDisjointSpatialRelationship:ai(St,"supportsDisjointSpatialRel",!1),supportsCacheHint:ai(St,"supportsQueryWithCacheHint",!1)||Wt(St,"query"),supportsDefaultSpatialReference:ai(St,"supportsDefaultSR",!1),supportsCompactGeometry:wi,maxRecordCountFactor:Oo(Pt,"maxRecordCountFactor",void 0),maxRecordCount:Oo(Pt,"maxRecordCount",void 0),standardMaxRecordCount:Oo(Pt,"standardMaxRecordCount",void 0),tileMaxRecordCount:Oo(Pt,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(Pt){const St=Pt.advancedQueryCapabilities,mr=ai(St,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ai(St,"supportsQueryRelatedPagination",!1),supportsCount:mr,supportsOrderBy:mr,supportsCacheHint:Wt(St,"queryRelated")}}_readQueryTopFeaturesCapabilities(Pt){return{supportsCacheHint:Wt(Pt.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(Pt){const St=Pt.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ai(Pt,"allowGeometryUpdates",!0),supportsGlobalId:ai(Pt,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ai(Pt,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ai(Pt,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ai(Pt,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ai(Pt,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ai(St,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ai(St,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ai(St,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ai(St,"allowOthersToUpdate",!0)}}};(0,x._)([(0,fe.Cb)({readOnly:!0,json:{read:!1}})],ur.prototype,"capabilities",void 0),(0,x._)([(0,ve.r)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],ur.prototype,"readCapabilities",null),(0,x._)([(0,fe.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ur.prototype,"charts",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"createQueryVersion",null),(0,x._)([(0,fe.Cb)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],ur.prototype,"copyright",void 0),(0,x._)([(0,fe.Cb)({type:Boolean})],ur.prototype,"datesInUnknownTimezone",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],ur.prototype,"displayField",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ur.prototype,"definitionExpression",void 0),(0,x._)([(0,fe.Cb)({types:ie.LB,readOnly:!0})],ur.prototype,"defaultSymbol",void 0),(0,x._)([(0,fe.Cb)({type:sa.n})],ur.prototype,"dynamicDataSource",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"editFieldsInfo",void 0),(0,x._)([(0,fe.Cb)({type:Boolean})],ur.prototype,"editingEnabled",null),(0,x._)([(0,ve.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],ur.prototype,"readEditingEnabled",null),(0,x._)([(0,ve.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],ur.prototype,"readEditingEnabledFromWebMap",null),(0,x._)([(0,ge.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],ur.prototype,"writeEditingEnabled",null),(0,x._)([(0,ge.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],ur.prototype,"writeEditingEnabledToWebMap",null),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"editingInfo",void 0),(0,x._)([(0,ve.r)("editingInfo")],ur.prototype,"readEditingInfo",null),(0,x._)([(0,fe.Cb)((()=>{const Pt=(0,le.d9)(Dr.PV),St=Pt.json.origins;return St["web-map"]={read:!1,write:!1},St["portal-item"]={read:!1,write:!1},Pt})())],ur.prototype,"elevationInfo",void 0),(0,x._)([(0,fe.Cb)(Ps.d)],ur.prototype,"featureReduction",void 0),(0,x._)([(0,fe.Cb)({...rr.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Er}}}}})],ur.prototype,"fields",void 0),(0,x._)([(0,fe.Cb)(rr.fieldsIndex)],ur.prototype,"fieldsIndex",void 0),(0,x._)([(0,fe.Cb)({type:Vn.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],ur.prototype,"floorInfo",void 0),(0,x._)([(0,fe.Cb)({type:hs,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ur.prototype,"formTemplate",void 0),(0,x._)([(0,fe.Cb)({type:Is.Z,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],ur.prototype,"fullExtent",void 0),(0,x._)([(0,fe.Cb)()],ur.prototype,"gdbVersion",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0,type:ki,json:{read:{source:"geometryProperties"}}})],ur.prototype,"geometryFieldsInfo",void 0),(0,x._)([(0,fe.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Sr.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Er,writer(Pt,St,mr){const qr=Pt?Sr.toJSON(Pt):null;qr&&(0,me.RB)(mr,qr,St)}}}},read:{source:"layerDefinition.geometryType",reader:Sr.read}}})],ur.prototype,"geometryType",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],ur.prototype,"hasM",void 0),(0,x._)([(0,fe.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],ur.prototype,"hasZ",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0,type:Yr.Z})],ur.prototype,"heightModelInfo",void 0),(0,x._)([(0,fe.Cb)({type:Date})],ur.prototype,"historicMoment",void 0),(0,x._)([(0,fe.Cb)(Dr.id)],ur.prototype,"id",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],ur.prototype,"infoFor3D",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],ur.prototype,"isTable",void 0),(0,x._)([(0,ve.r)("service","isTable",["type","geometryType"]),(0,ve.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],ur.prototype,"readIsTable",null),(0,x._)([(0,ge.c)("web-map","isTable")],ur.prototype,"writeIsTable",null),(0,x._)([(0,fe.Cb)(Dr.iR)],ur.prototype,"labelsVisible",void 0),(0,x._)([(0,fe.Cb)({type:[sn.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Uo.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Uo.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],ur.prototype,"labelingInfo",void 0),(0,x._)([(0,fe.Cb)((()=>{const Pt=(0,le.d9)(Dr.bT);return Pt.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(St,mr,qr){(0,me.RB)(qr,(0,hl.a)(St),mr)}}},Pt})())],ur.prototype,"opacity",void 0),(0,x._)([(0,fe.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],ur.prototype,"layerId",void 0),(0,x._)([(0,fe.Cb)(Dr.rn)],ur.prototype,"legendEnabled",void 0),(0,x._)([(0,fe.Cb)({type:["show","hide"],json:(()=>{const Pt=(0,le.d9)(Dr.rT.json);return Pt.origins["portal-item"]={read:!1,write:!1},Pt})()})],ur.prototype,"listMode",void 0),(0,x._)([(0,fe.Cb)(Dr.rO)],ur.prototype,"minScale",void 0),(0,x._)([(0,ve.r)("service","minScale",["minScale","effectiveMinScale"])],ur.prototype,"readMinScale",null),(0,x._)([(0,fe.Cb)(Dr.u1)],ur.prototype,"maxScale",void 0),(0,x._)([(0,ve.r)("service","maxScale",["maxScale","effectiveMaxScale"])],ur.prototype,"readMaxScale",null),(0,x._)([(0,fe.Cb)({type:String})],ur.prototype,"globalIdField",void 0),(0,x._)([(0,ve.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),(0,ve.r)("service","globalIdField",["globalIdField","fields"])],ur.prototype,"readGlobalIdFieldFromService",null),(0,x._)([(0,fe.Cb)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Er}}}}})],ur.prototype,"objectIdField",void 0),(0,x._)([(0,ve.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),(0,ve.r)("service","objectIdField",["objectIdField","fields"])],ur.prototype,"readObjectIdFieldFromService",null),(0,x._)([(0,fe.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],ur.prototype,"operationalLayerType",void 0),(0,x._)([(0,fe.Cb)(rr.outFields)],ur.prototype,"outFields",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"parsedUrl",null),(0,x._)([(0,fe.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ur.prototype,"path",void 0),(0,x._)([(0,fe.Cb)(Dr.C_)],ur.prototype,"popupEnabled",void 0),(0,x._)([(0,fe.Cb)({type:w.Z,json:{name:"popupInfo",write:!0}})],ur.prototype,"popupTemplate",void 0),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"defaultPopupTemplate",null),(0,x._)([(0,fe.Cb)({type:[hn],readOnly:!0})],ur.prototype,"relationships",void 0),(0,x._)([(0,fe.Cb)({types:ae.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:ae.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(Pt,St,mr)=>({ignoreOrigin:mr?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(Pt,St,mr)=>({ignoreOrigin:mr?.writeLayerSchema})}}})],ur.prototype,"renderer",null),(0,x._)([(0,ve.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,ve.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ur.prototype,"readRenderer",null),(0,x._)([(0,fe.Cb)()],ur.prototype,"sourceJSON",void 0),(0,x._)([(0,fe.Cb)({type:Boolean})],ur.prototype,"returnM",void 0),(0,x._)([(0,fe.Cb)({type:Boolean})],ur.prototype,"returnZ",void 0),(0,x._)([(0,fe.Cb)((()=>{const Pt=(0,le.d9)(Dr.YI);return Pt.json.origins["portal-item"]={read:!1,write:!1},Pt})())],ur.prototype,"screenSizePerspectiveEnabled",void 0),(0,x._)([(0,fe.Cb)({clonable:!1})],ur.prototype,"source",null),(0,x._)([(0,De.p)("source")],ur.prototype,"castSource",null),(0,x._)([(0,ve.r)("portal-item","source",["featureSet"]),(0,ve.r)("web-map","source",["featureSet"])],ur.prototype,"readSource",null),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"serviceDefinitionExpression",void 0),(0,x._)([(0,ve.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],ur.prototype,"readServiceDefinitionExpression",null),(0,x._)([(0,fe.Cb)({type:Rs.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],ur.prototype,"spatialReference",void 0),(0,x._)([(0,fe.Cb)({type:Number})],ur.prototype,"subtypeCode",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{origins:{service:{read:!0}}}})],ur.prototype,"subtypeField",void 0),(0,x._)([(0,fe.Cb)({type:[Ws.Z]})],ur.prototype,"templates",void 0),(0,x._)([(0,ve.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],ur.prototype,"readTemplates",null),(0,x._)([(0,fe.Cb)({type:ya.Z})],ur.prototype,"timeInfo",void 0),(0,x._)([(0,fe.Cb)()],ur.prototype,"title",void 0),(0,x._)([(0,ve.r)("service","title",["name"]),(0,ve.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],ur.prototype,"readTitle",null),(0,x._)([(0,ve.r)("web-map","title",["layerDefinition.name","title"])],ur.prototype,"readTitleFromWebMap",null),(0,x._)([(0,fe.Cb)({type:String})],ur.prototype,"sublayerTitleMode",void 0),(0,x._)([(0,fe.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],ur.prototype,"trackIdField",void 0),(0,x._)([(0,fe.Cb)({json:{read:!1}})],ur.prototype,"type",void 0),(0,x._)([(0,fe.Cb)({type:String})],ur.prototype,"typeIdField",void 0),(0,x._)([(0,ve.r)("service","typeIdField"),(0,ve.r)("typeIdField",["layerDefinition.typeIdField"])],ur.prototype,"readTypeIdField",null),(0,x._)([(0,fe.Cb)({type:[yi.Z]})],ur.prototype,"types",void 0),(0,x._)([(0,ve.r)("service","types",["types"]),(0,ve.r)("types",["layerDefinition.types"])],ur.prototype,"readTypes",null),(0,x._)([(0,fe.Cb)({readOnly:!0,json:{write:!1}})],ur.prototype,"serverGens",void 0),(0,x._)([(0,fe.Cb)({type:Z.Z.ofType(Ir),readOnly:!0})],ur.prototype,"indexes",void 0),(0,x._)([(0,fe.Cb)(Dr.HQ)],ur.prototype,"url",null),(0,x._)([(0,ge.c)("url")],ur.prototype,"writeUrl",null),(0,x._)([(0,fe.Cb)({readOnly:!0})],ur.prototype,"userIsAdmin",void 0),(0,x._)([(0,fe.Cb)({json:{origins:{service:{read:!0}},read:!1}})],ur.prototype,"version",void 0),(0,x._)([(0,ve.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],ur.prototype,"readVersion",null),(0,x._)([(0,fe.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],ur.prototype,"visible",void 0),(0,x._)([(0,ve.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],ur.prototype,"readVisible",null),ur=(0,x._)([(0,Ce.j)("esri.layers.FeatureLayer")],ur);const Fr=(0,Te.d)({types:ie.QT}),ls=ur},44917:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>de});var D=T(15861),x=T(17626),B=(T(29132),T(84792)),U=T(26584),W=T(61885),Y=T(61996),H=T(47996),G=T(63290),$=T(10699),re=T(21726),ue=T(77712),X=(T(85931),T(8314),T(90912),T(76898)),Z=T(59318);const Q=G.Z.getLogger("esri.layers.support.fromPortalItem");function se(){return(se=(0,D.Z)(function*(me){const _e="portalItem"in me?me:{portalItem:me},he=yield T.e(7534).then(T.bind(T,7534));try{return yield he.fromItem(_e)}catch(ye){const fe=_e&&_e.portalItem;throw Q.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(fe&&fe.portal&&fe.portal.url||Z.Z.portalUrl)+"', id: '"+(fe&&fe.id||"unset")+"')",ye),ye}})).apply(this,arguments)}var ee=T(2004),le=T(65234);let ne=0,ce=class extends(W.Z.EventedMixin((0,Y.IG)(H.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ee.Z(-180,-90,180,90,le.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+ne++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=le.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static fromArcGISServerUrl(me){return(0,D.Z)(function*(){const _e="string"==typeof me?{url:me}:me;return(yield Promise.all([T.e(8592),T.e(164)]).then(T.bind(T,24578))).fromUrl(_e)})()}static fromPortalItem(me){return function J(me){return se.apply(this,arguments)}(me)}initialize(){this.when().catch(me=>{(0,$.D_)(me)||G.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:me})})}destroy(){if(this.parent){const me=this,_e=this.parent;"layers"in _e&&_e.layers.includes(me)?_e.layers.remove(me):"tables"in _e&&_e.tables.includes(me)?_e.tables.remove(me):"baseLayers"in _e&&_e.baseLayers.includes(me)?_e.baseLayers.remove(me):"baseLayers"in _e&&_e.referenceLayers.includes(me)&&_e.referenceLayers.remove(me)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const me=this.url;return me?(0,re.mN)(me):null}fetchAttributionData(){var me=this;return(0,D.Z)(function*(){const _e=me.attributionDataUrl;if(me.hasAttributionData&&_e)return(yield(0,B.default)(_e,{query:{f:"json"},responseType:"json"})).data;throw new U.Z("layer:no-attribution-data","Layer does not have attribution data")})()}};(0,x._)([(0,ue.Cb)({type:String})],ce.prototype,"attributionDataUrl",void 0),(0,x._)([(0,ue.Cb)({type:ee.Z})],ce.prototype,"fullExtent",void 0),(0,x._)([(0,ue.Cb)({readOnly:!0})],ce.prototype,"hasAttributionData",null),(0,x._)([(0,ue.Cb)({type:String,clonable:!1})],ce.prototype,"id",void 0),(0,x._)([(0,ue.Cb)({type:Boolean,nonNullable:!0})],ce.prototype,"legendEnabled",void 0),(0,x._)([(0,ue.Cb)({type:["show","hide","hide-children"]})],ce.prototype,"listMode",void 0),(0,x._)([(0,ue.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],ce.prototype,"opacity",void 0),(0,x._)([(0,ue.Cb)({clonable:!1})],ce.prototype,"parent",void 0),(0,x._)([(0,ue.Cb)({readOnly:!0})],ce.prototype,"parsedUrl",null),(0,x._)([(0,ue.Cb)({type:Boolean})],ce.prototype,"popupEnabled",void 0),(0,x._)([(0,ue.Cb)({type:Boolean})],ce.prototype,"attributionVisible",void 0),(0,x._)([(0,ue.Cb)({type:le.Z})],ce.prototype,"spatialReference",void 0),(0,x._)([(0,ue.Cb)({type:String})],ce.prototype,"title",void 0),(0,x._)([(0,ue.Cb)({readOnly:!0,json:{read:!1}})],ce.prototype,"type",void 0),(0,x._)([(0,ue.Cb)()],ce.prototype,"url",void 0),(0,x._)([(0,ue.Cb)({type:Boolean,nonNullable:!0})],ce.prototype,"visible",void 0),ce=(0,x._)([(0,X.j)("esri.layers.Layer")],ce);const de=ce},58141:(qe,xe,T)=>{"use strict";T.d(xe,{rk:()=>ae,Tj:()=>oe,GI:()=>ie,CE:()=>X,Tq:()=>Z,Zx:()=>Q,Ee:()=>ee});var D=T(20414),x=T(23841),w=T(55494),B=T(28347);class ae{constructor(ne,ce,de){this.strength=ne,this.radius=ce,this.threshold=de,this.type="bloom"}interpolate(ne,ce,de){this.strength=J(ne.strength,ce.strength,de),this.radius=J(ne.radius,ce.radius,de),this.threshold=J(ne.threshold,ce.threshold,de)}clone(){return new ae(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:se(this.radius),strength:this.strength,threshold:this.threshold}}}class oe{constructor(ne){this.radius=ne,this.type="blur"}interpolate(ne,ce,de){this.radius=Math.round(J(ne.radius,ce.radius,de))}clone(){return new oe(this.radius)}toJSON(){return{type:"blur",radius:se(this.radius)}}}class ie{constructor(ne,ce){this.type=ne,this.amount=ce,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(ne,ce,de){this.amount=J(ne.amount,ce.amount,de),this._updateMatrix()}clone(){return new ie(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const ne=this._colorMatrix||(0,w.c)();switch(this.type){case"brightness":this._colorMatrix=((le,ne)=>{const ce=(0,B.s)(le,ne,0,0,0,0,ne,0,0,0,0,ne,0,0,0,0,1);return(0,B.t)(ce,ce)})(ne,this.amount);break;case"contrast":this._colorMatrix=((le,ne)=>{const ce=(0,B.s)(le,ne,0,0,.5-.5*ne,0,ne,0,.5-.5*ne,0,0,ne,.5-.5*ne,0,0,0,1);return(0,B.t)(ce,ce)})(ne,this.amount);break;case"grayscale":this._colorMatrix=((le,ne)=>{const ce=1-this.amount,de=(0,B.s)(le,.2126+.7874*ce,.7152-.7152*ce,.0722-.0722*ce,0,.2126-.2126*ce,.7152+.2848*ce,.0722-.0722*ce,0,.2126-.2126*ce,.7152-.7152*ce,.0722+.9278*ce,0,0,0,0,1);return(0,B.t)(de,de)})(ne);break;case"invert":this._colorMatrix=((le,ne)=>{const ce=1-2*ne,de=(0,B.s)(le,ce,0,0,ne,0,ce,0,ne,0,0,ce,ne,0,0,0,1);return(0,B.t)(de,de)})(ne,this.amount);break;case"saturate":this._colorMatrix=((le,ne)=>{const ce=(0,B.s)(le,.213+.787*ne,.715-.715*ne,.072-.072*ne,0,.213-.213*ne,.715+.285*ne,.072-.072*ne,0,.213-.213*ne,.715-.715*ne,.072+.928*ne,0,0,0,0,1);return(0,B.t)(ce,ce)})(ne,this.amount);break;case"sepia":this._colorMatrix=((le,ne)=>{const ce=1-this.amount,de=(0,B.s)(le,.393+.607*ce,.769-.769*ce,.189-.189*ce,0,.349-.349*ce,.686+.314*ce,.168-.168*ce,0,.272-.272*ce,.534-.534*ce,.131+.869*ce,0,0,0,0,1);return(0,B.t)(de,de)})(ne)}}}class X{constructor(ne,ce,de,me){this.offsetX=ne,this.offsetY=ce,this.blurRadius=de,this.color=me,this.type="drop-shadow"}interpolate(ne,ce,de){this.offsetX=J(ne.offsetX,ce.offsetX,de),this.offsetY=J(ne.offsetY,ce.offsetY,de),this.blurRadius=J(ne.blurRadius,ce.blurRadius,de),this.color[0]=Math.round(J(ne.color[0],ce.color[0],de)),this.color[1]=Math.round(J(ne.color[1],ce.color[1],de)),this.color[2]=Math.round(J(ne.color[2],ce.color[2],de)),this.color[3]=J(ne.color[3],ce.color[3],de)}clone(){return new X(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const ne=[...this.color];return ne[3]*=255,{type:"drop-shadow",xoffset:se(this.offsetX),yoffset:se(this.offsetY),blurRadius:se(this.blurRadius),color:ne}}}class Z{constructor(ne){this.angle=ne,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(ne,ce,de){this.angle=J(ne.angle,ce.angle,de),this._updateMatrix()}clone(){return new Z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const ne=this._colorMatrix||(0,w.c)();this._colorMatrix=((le,ne)=>{const ce=Math.sin(ne*Math.PI/180),de=Math.cos(ne*Math.PI/180),me=(0,B.s)(le,.213+.787*de-.213*ce,.715-.715*de-.715*ce,.072-.072*de+.928*ce,0,.213-.213*de+.143*ce,.715+.285*de+.14*ce,.072-.072*de-.283*ce,0,.213-.213*de-.787*ce,.715-.715*de+.715*ce,.072+.928*de+.072*ce,0,0,0,0,1);return(0,B.t)(me,me)})(ne,this.angle)}}class Q{constructor(ne){this.amount=ne,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(ne,ce,de){this.amount=J(ne.amount,ce.amount,de)}clone(){return new Q(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function J(le,ne,ce){return le+(ne-le)*ce}function se(le){return Math.round(1e3*(0,x.Wz)(le))/1e3}function ee(le){switch(le.type){case"grayscale":case"sepia":case"invert":return new ie(le.type,0);case"saturate":case"brightness":case"contrast":return new ie(le.type,1);case"opacity":return new Q(1);case"hue-rotate":return new Z(0);case"blur":return new oe(0);case"drop-shadow":return new X(0,0,0,[...(0,D.h$)("transparent")]);case"bloom":return new ae(0,0,1)}}},71149:(qe,xe,T)=>{"use strict";T.d(xe,{cW:()=>W,ij:()=>U,rM:()=>$});var D=T(26584),x=T(94113),w=T(29538),B=T(53390);function U(ae,oe,ie){try{return function H(ae){if(!ae||0===ae.length)return null;if(function G(ae){const oe=ae[0];return!!oe&&"scale"in oe}(ae)){const oe=[];for(const ie of ae)oe.push({scale:ie.scale,value:$(ie.value)});return oe}return $(ae)}(ae)}catch(X){ie?.messages?.push(X)}return null}function W(ae,oe,ie,X){try{const Z=function Y(ae){const oe=(0,w.Q)(ae);return oe?(0,B.Cb)(oe)?oe.map(ie=>ie.toJSON()):oe.map(({scale:ie,effects:X})=>({scale:ie,value:X.map(Z=>Z.toJSON())})):null}(ae);(0,x.RB)(ie,Z,oe)}catch(Z){X.messages&&X.messages.push(Z)}}function $(ae){if(!ae||!ae.length)return"";const oe=[];for(const ie of ae){let X=[];switch(ie.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":X=[re(ie,"amount")];break;case"blur":X=[re(ie,"radius","pt")];break;case"hue-rotate":X=[re(ie,"angle","deg")];break;case"drop-shadow":X=[re(ie,"xoffset","pt"),re(ie,"yoffset","pt"),re(ie,"blurRadius","pt"),ue(ie,"color")];break;case"bloom":X=[re(ie,"strength"),re(ie,"radius","pt"),re(ie,"threshold")]}const Z=`${ie.type}(${X.filter(Boolean).join(" ")})`;(0,w.Q)(Z),oe.push(Z)}return oe.join(" ")}function re(ae,oe,ie){if(null==ae[oe])throw new D.Z("effect:missing-parameter",`Missing parameter '${oe}' in ${ae.type} effect`,{effect:ae});return ie?ae[oe]+ie:""+ae[oe]}function ue(ae,oe){if(null==ae[oe])throw new D.Z("effect:missing-parameter",`Missing parameter '${oe}' in ${ae.type} effect`,{effect:ae});const ie=ae[oe];return`rgba(${ie[0]||0}, ${ie[1]||0}, ${ie[2]||0}, ${ie[3]/255||0})`}},29538:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>G});var W,D=T(20414),x=T(26584),w=T(58141),U=(T(1719),T(53390)),H={exports:{}};function G(Le){if(!Le||0===Le.length)return null;if("string"==typeof Le){const ze=$(Le);return ze&&0!==ze.length?ze:null}const je=Le.map(ze=>{if(!Number.isFinite(ze.scale)||ze.scale<=0)throw new x.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:ze});return{scale:ze.scale,effects:$(ze.value)}});je.sort((ze,Ee)=>Ee.effects.length-ze.effects.length);for(let ze=0;ze<je.length-1;ze++){if(!(0,U.AS)(je[ze].effects,je[ze+1].effects))throw new x.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:je[ze].effects,b:je[ze+1].effects});(0,U.uF)(je[ze].effects,je[ze+1].effects)}return je.sort((ze,Ee)=>Ee.scale-ze.scale),je}function $(Le){let je;if(!Le)return[];try{je=H.exports.parse(Le)}catch(ze){throw new x.Z("effect:invalid-syntax","Invalid effect syntax",{value:Le,error:ze})}return je.map(ze=>function re(Le){try{switch(Le.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function ue(Le){let je=1;return Q(Le.parameters,1),1===Le.parameters.length&&(je=_e(Le.parameters[0])),new w.GI(Le.name,je)}(Le);case"opacity":return function ae(Le){let je=1;return Q(Le.parameters,1),1===Le.parameters.length&&(je=_e(Le.parameters[0])),new w.Zx(je)}(Le);case"hue-rotate":return function oe(Le){let je=0;return Q(Le.parameters,1),1===Le.parameters.length&&(je=function ye(Le){return function ce(Le){if("quantity"!==Le.type||!(0===Le.value&&null===Le.unit||Le.unit&&null!=ne[Le.unit]))throw new x.Z("effect:type-error",`Expected <angle>, Actual: ${J(Le)}`,{term:Le})}(Le),Le.value*ne[Le.unit]||0}(Le.parameters[0])),new w.Tq(je)}(Le);case"blur":return function ie(Le){let je=0;return Q(Le.parameters,1),1===Le.parameters.length&&(je=fe(Le.parameters[0]),se(je,Le.parameters[0])),new w.Tj(je)}(Le);case"drop-shadow":return function X(Le){const je=[];let ze=null;for(const Ee of Le.parameters)if("color"===Ee.type){if(je.length&&Object.freeze(je),ze)throw new x.Z("effect:type-error","Accepts only one color",{});ze=De(Ee)}else{const Ae=fe(Ee);if(Object.isFrozen(je))throw new x.Z("effect:type-error","<length> parameters not consecutive",{lengths:je});je.push(Ae),3===je.length&&se(Ae,Ee)}if(je.length<2||je.length>3)throw new x.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${je.length}}`,{lengths:je});return new w.CE(je[0],je[1],je[2]||0,ze||ve("black"))}(Le);case"bloom":return function Z(Le){let je=1,ze=0,Ee=0;return Q(Le.parameters,3),Le.parameters[0]&&(je=_e(Le.parameters[0])),Le.parameters[1]&&(ze=fe(Le.parameters[1]),se(ze,Le.parameters[1])),Le.parameters[2]&&(Ee=_e(Le.parameters[2])),new w.rk(je,ze,Ee)}(Le)}}catch(je){throw je.details.filter=Le,je}throw new x.Z("effect:unknown-effect",`Effect '${Le.name}' is not supported`,{effect:Le})}(ze))}function Q(Le,je){if(Le.length>je)throw new x.Z("effect:type-error",`Function supports up to ${je} parameters, Actual: ${Le.length}`,{parameters:Le})}function J(Le){if("color"===Le.type)return"<color>";if(Le.unit){if(de[Le.unit])return"<length>";if(ne[Le.unit])return"<angle>";if("%"===Le.unit)return"<percentage>"}return"<double>"}function se(Le,je){if(Le<0)throw new x.Z("effect:type-error",`Negative values are not allowed, Actual: ${Le}`,{term:je})}(W=H).exports&&(W.exports=function(){function je(Ae,we,Be,Pe){var Oe=Error.call(this,Ae);return Object.setPrototypeOf&&Object.setPrototypeOf(Oe,je.prototype),Oe.expected=we,Oe.found=Be,Oe.location=Pe,Oe.name="SyntaxError",Oe}function ze(Ae,we,Be){return Be=Be||" ",Ae.length>we?Ae:Ae+(Be+=Be.repeat(we-=Ae.length)).slice(0,we)}return function Le(Ae,we){function Be(){this.constructor=Ae}Be.prototype=we.prototype,Ae.prototype=new Be}(je,Error),je.prototype.format=function(Ae){var we="Error: "+this.message;if(this.location){var Be,Pe=null;for(Be=0;Be<Ae.length;Be++)if(Ae[Be].source===this.location.source){Pe=Ae[Be].text.split(/\r\n|\n|\r/g);break}var Oe=this.location.start,Ke=this.location.source+":"+Oe.line+":"+Oe.column;if(Pe){var Ve=this.location.end,Ne=ze("",Oe.line.toString().length),Ie=Pe[Oe.line-1],We=Oe.line===Ve.line?Ve.column:Ie.length+1;we+="\n --\x3e "+Ke+"\n"+Ne+" |\n"+Oe.line+" | "+Ie+"\n"+Ne+" | "+ze("",Oe.column-1)+ze("",We-Oe.column,"^")}else we+="\n at "+Ke}return we},je.buildMessage=function(Ae,we){var Be={literal:function(We){return'"'+Oe(We.text)+'"'},class:function(We){var Se=We.parts.map(function(He){return Array.isArray(He)?Ke(He[0])+"-"+Ke(He[1]):Ke(He)});return"["+(We.inverted?"^":"")+Se+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(We){return We.description}};function Pe(We){return We.charCodeAt(0).toString(16).toUpperCase()}function Oe(We){return We.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Se){return"\\x0"+Pe(Se)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Se){return"\\x"+Pe(Se)})}function Ke(We){return We.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Se){return"\\x0"+Pe(Se)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Se){return"\\x"+Pe(Se)})}function Ve(We){return Be[We.type](We)}return"Expected "+function Ne(We){var Se,He,$e=We.map(Ve);if($e.sort(),$e.length>0){for(Se=1,He=1;Se<$e.length;Se++)$e[Se-1]!==$e[Se]&&($e[He]=$e[Se],He++);$e.length=He}switch($e.length){case 1:return $e[0];case 2:return $e[0]+" or "+$e[1];default:return $e.slice(0,-1).join(", ")+", or "+$e[$e.length-1]}}(Ae)+" but "+function Ie(We){return We?'"'+Oe(We)+'"':"end of input"}(we)+" found."},{SyntaxError:je,parse:function Ee(Ae,we){var Be,Pe={},Oe=(we=void 0!==we?we:{}).grammarSource,Ke={start:sn},Ve=sn,zt=/^[ \t\n\r]/,Zt=/^[a-z\-]/,ar=/^[0-9a-fA-F]/,Pr=/^[+\-]/,kr=/^[0-9]/,ss=Gs("none"),os=Ps("none",!1),Hr=Ps(")",!1),pt=Ps(",",!1),Ut=Gs("whitespace"),$t=Ws([" ","\t","\n","\r"],!1,!1),Xt=Gs("function"),_r=Ps("(",!1),hr=Gs("identifier"),gr=Ws([["a","z"],"-"],!1,!1),vr=Gs("percentage"),Kr=Ps("%",!1),Gr=Gs("length"),Jr=Ps("px",!1),ns=Ps("cm",!1),lr=Ps("mm",!1),Tr=Ps("in",!1),zr=Ps("pt",!1),Tt=Ps("pc",!1),sr=Gs("angle"),Rr=Ps("deg",!1),bt=Ps("rad",!1),Qt=Ps("grad",!1),qt=Ps("turn",!1),yr=Gs("number"),jr=Gs("color"),es=Ps("#",!1),hs=Ws([["0","9"],["a","f"],["A","F"]],!1,!1),Is=Ws(["+","-"],!1,!1),Yr=Ws([["0","9"]],!1,!1),Rs=Ps(".",!1),Zi=Ps("e",!1),Zr=0,ii=0,yn=[{line:1,column:1}],dr=0,Dr=[],er=0;if("startRule"in we){if(!(we.startRule in Ke))throw new Error("Can't start parsing from rule \""+we.startRule+'".');Ve=Ke[we.startRule]}function Ir(){return Ae.substring(ii,Zr)}function Ps(Sr,Ts){return{type:"literal",text:Sr,ignoreCase:Ts}}function Ws(Sr,Ts,ys){return{type:"class",parts:Sr,inverted:Ts,ignoreCase:ys}}function Gs(Sr){return{type:"other",description:Sr}}function Mi(Sr){var Ts,ys=yn[Sr];if(ys)return ys;for(Ts=Sr-1;!yn[Ts];)Ts--;for(ys={line:(ys=yn[Ts]).line,column:ys.column};Ts<Sr;)10===Ae.charCodeAt(Ts)?(ys.line++,ys.column=1):ys.column++,Ts++;return yn[Sr]=ys,ys}function Hs(Sr){Zr<dr||(Zr>dr&&(dr=Zr,Dr=[]),Dr.push(Sr))}function sn(){var Sr;return(Sr=function Uo(){var Sr,Ts;return er++,Sr=Zr,hn(),"none"===Ae.substr(Zr,4)?(Ts="none",Zr+=4):(Ts=Pe,0===er&&Hs(os)),Ts!==Pe?(hn(),ii=Sr,Sr=[]):(Zr=Sr,Sr=Pe),er--,Sr===Pe&&0===er&&Hs(ss),Sr}())===Pe&&(Sr=function Vn(){var Sr,Ts;if(Sr=[],(Ts=io())!==Pe)for(;Ts!==Pe;)Sr.push(Ts),Ts=io();else Sr=Pe;return Sr}()),Sr}function io(){var Sr,Ts,ys,Wi;return Sr=Zr,hn(),(Ts=function ya(){var Sr,Ts,ys;return er++,Sr=Zr,(Ts=Wo())!==Pe?(40===Ae.charCodeAt(Zr)?(ys="(",Zr++):(ys=Pe,0===er&&Hs(_r)),ys!==Pe?(ii=Sr,Sr=Ts):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),er--,Sr===Pe&&(Ts=Pe,0===er&&Hs(Xt)),Sr}())!==Pe?(hn(),(ys=function An(){var Sr,Ts,ys,Wi,an,Ln,ai,Oo;if(Sr=Zr,(Ts=Gn())!==Pe){for(ys=[],Wi=Zr,an=hn(),44===Ae.charCodeAt(Zr)?(Ln=",",Zr++):(Ln=Pe,0===er&&Hs(pt)),Ln===Pe&&(Ln=null),ai=hn(),(Oo=Gn())!==Pe?Wi=an=[an,Ln,ai,Oo]:(Zr=Wi,Wi=Pe);Wi!==Pe;)ys.push(Wi),Wi=Zr,an=hn(),44===Ae.charCodeAt(Zr)?(Ln=",",Zr++):(Ln=Pe,0===er&&Hs(pt)),Ln===Pe&&(Ln=null),ai=hn(),(Oo=Gn())!==Pe?Wi=an=[an,Ln,ai,Oo]:(Zr=Wi,Wi=Pe);ii=Sr,Sr=function(Sr,Ts){return Ts.length>0?function hl(Sr,Ts,ys){return[Sr].concat(function Yn(Sr,Ts){return Sr.map(function(ys){return ys[Ts]})}(Ts,ys))}(Sr,Ts,3):[Sr]}(Ts,ys)}else Zr=Sr,Sr=Pe;return Sr}())===Pe&&(ys=null),hn(),41===Ae.charCodeAt(Zr)?(Wi=")",Zr++):(Wi=Pe,0===er&&Hs(Hr)),Wi!==Pe?(hn(),ii=Sr,Sr=function(Sr,Ts){return{type:"function",name:Sr,parameters:Ts||[]}}(Ts,ys)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr}function Gn(){var Sr,Ts;return Sr=Zr,(Ts=function sa(){var Sr,Ts,ys;return er++,Sr=Zr,hn(),(Ts=Kn())!==Pe?(37===Ae.charCodeAt(Zr)?(ys="%",Zr++):(ys=Pe,0===er&&Hs(Kr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"%"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),er--,Sr===Pe&&0===er&&Hs(vr),Sr}())===Pe&&(Ts=function ia(){var Sr,Ts,ys;return er++,Sr=Zr,hn(),(Ts=Kn())!==Pe?("px"===Ae.substr(Zr,2)?(ys="px",Zr+=2):(ys=Pe,0===er&&Hs(Jr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"px"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,hn(),(Ts=Kn())!==Pe?("cm"===Ae.substr(Zr,2)?(ys="cm",Zr+=2):(ys=Pe,0===er&&Hs(ns)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"cm"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,hn(),(Ts=Kn())!==Pe?("mm"===Ae.substr(Zr,2)?(ys="mm",Zr+=2):(ys=Pe,0===er&&Hs(lr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"mm"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,hn(),(Ts=Kn())!==Pe?("in"===Ae.substr(Zr,2)?(ys="in",Zr+=2):(ys=Pe,0===er&&Hs(Tr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"in"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,hn(),(Ts=Kn())!==Pe?("pt"===Ae.substr(Zr,2)?(ys="pt",Zr+=2):(ys=Pe,0===er&&Hs(zr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"pt"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,hn(),(Ts=Kn())!==Pe?("pc"===Ae.substr(Zr,2)?(ys="pc",Zr+=2):(ys=Pe,0===er&&Hs(Tt)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"pc"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe)))))),er--,Sr===Pe&&0===er&&Hs(Gr),Sr}())===Pe&&(Ts=function nn(){var Sr,Ts,ys;return er++,Sr=Zr,(Ts=Kn())!==Pe?("deg"===Ae.substr(Zr,3)?(ys="deg",Zr+=3):(ys=Pe,0===er&&Hs(Rr)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"deg"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,(Ts=Kn())!==Pe?("rad"===Ae.substr(Zr,3)?(ys="rad",Zr+=3):(ys=Pe,0===er&&Hs(bt)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"rad"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,(Ts=Kn())!==Pe?("grad"===Ae.substr(Zr,4)?(ys="grad",Zr+=4):(ys=Pe,0===er&&Hs(Qt)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"grad"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe),Sr===Pe&&(Sr=Zr,(Ts=Kn())!==Pe?("turn"===Ae.substr(Zr,4)?(ys="turn",Zr+=4):(ys=Pe,0===er&&Hs(qt)),ys!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:"turn"}}(Ts)):(Zr=Sr,Sr=Pe)):(Zr=Sr,Sr=Pe)))),er--,Sr===Pe&&(Ts=Pe,0===er&&Hs(sr)),Sr}())===Pe&&(Ts=function Co(){var Sr,Ts;return er++,Sr=Zr,hn(),(Ts=Kn())!==Pe?(ii=Sr,Sr=function(Sr){return{value:Sr,unit:null}}(Ts)):(Zr=Sr,Sr=Pe),er--,Sr===Pe&&0===er&&Hs(yr),Sr}()),Ts!==Pe&&(ii=Sr,Ts=function(Sr){return{type:"quantity",value:Sr.value,unit:Sr.unit}}(Ts)),(Sr=Ts)===Pe&&(Sr=Zr,(Ts=function Ja(){var Sr,Ts,ys,Wi;if(er++,Sr=Zr,35===Ae.charCodeAt(Zr)?(Ts="#",Zr++):(Ts=Pe,0===er&&Hs(es)),Ts!==Pe){if(ys=[],ar.test(Ae.charAt(Zr))?(Wi=Ae.charAt(Zr),Zr++):(Wi=Pe,0===er&&Hs(hs)),Wi!==Pe)for(;Wi!==Pe;)ys.push(Wi),ar.test(Ae.charAt(Zr))?(Wi=Ae.charAt(Zr),Zr++):(Wi=Pe,0===er&&Hs(hs));else ys=Pe;ys!==Pe?(ii=Sr,Sr={type:"hex",value:Ir()}):(Zr=Sr,Sr=Pe)}else Zr=Sr,Sr=Pe;return Sr===Pe&&(Sr=Zr,(Ts=io())!==Pe&&(ii=Sr,Ts=function(Sr){return{type:"function",value:Sr}}(Ts)),(Sr=Ts)===Pe&&(Sr=Zr,(Ts=Wo())!==Pe&&(ii=Sr,Ts={type:"named",value:Ir()}),Sr=Ts)),er--,Sr===Pe&&(Ts=Pe,0===er&&Hs(jr)),Sr}())!==Pe&&(ii=Sr,Ts=function(Sr){return{type:"color",colorType:Sr.type,value:Sr.value}}(Ts)),Sr=Ts),Sr}function hn(){var Sr,Ts;for(er++,Sr=[],zt.test(Ae.charAt(Zr))?(Ts=Ae.charAt(Zr),Zr++):(Ts=Pe,0===er&&Hs($t));Ts!==Pe;)Sr.push(Ts),zt.test(Ae.charAt(Zr))?(Ts=Ae.charAt(Zr),Zr++):(Ts=Pe,0===er&&Hs($t));return er--,Ts=Pe,0===er&&Hs(Ut),Sr}function Wo(){var Sr,Ts,ys;if(er++,Sr=Zr,Ts=[],Zt.test(Ae.charAt(Zr))?(ys=Ae.charAt(Zr),Zr++):(ys=Pe,0===er&&Hs(gr)),ys!==Pe)for(;ys!==Pe;)Ts.push(ys),Zt.test(Ae.charAt(Zr))?(ys=Ae.charAt(Zr),Zr++):(ys=Pe,0===er&&Hs(gr));else Ts=Pe;return Ts!==Pe&&(ii=Sr,Ts=Ir()),er--,(Sr=Ts)===Pe&&(Ts=Pe,0===er&&Hs(hr)),Sr}function Kn(){var Sr,Ts,ys,Wi,an,Ln,ai;for(Sr=Zr,Pr.test(Ae.charAt(Zr))?(Ae.charAt(Zr),Zr++):0===er&&Hs(Is),Ts=Zr,ys=[],kr.test(Ae.charAt(Zr))?(Wi=Ae.charAt(Zr),Zr++):(Wi=Pe,0===er&&Hs(Yr));Wi!==Pe;)ys.push(Wi),kr.test(Ae.charAt(Zr))?(Wi=Ae.charAt(Zr),Zr++):(Wi=Pe,0===er&&Hs(Yr));if(46===Ae.charCodeAt(Zr)?(Wi=".",Zr++):(Wi=Pe,0===er&&Hs(Rs)),Wi!==Pe){if(an=[],kr.test(Ae.charAt(Zr))?(Ln=Ae.charAt(Zr),Zr++):(Ln=Pe,0===er&&Hs(Yr)),Ln!==Pe)for(;Ln!==Pe;)an.push(Ln),kr.test(Ae.charAt(Zr))?(Ln=Ae.charAt(Zr),Zr++):(Ln=Pe,0===er&&Hs(Yr));else an=Pe;an!==Pe?Ts=ys=[ys,Wi,an]:(Zr=Ts,Ts=Pe)}else Zr=Ts,Ts=Pe;if(Ts===Pe)if(Ts=[],kr.test(Ae.charAt(Zr))?(ys=Ae.charAt(Zr),Zr++):(ys=Pe,0===er&&Hs(Yr)),ys!==Pe)for(;ys!==Pe;)Ts.push(ys),kr.test(Ae.charAt(Zr))?(ys=Ae.charAt(Zr),Zr++):(ys=Pe,0===er&&Hs(Yr));else Ts=Pe;if(Ts!==Pe){if(ys=Zr,101===Ae.charCodeAt(Zr)?(Wi="e",Zr++):(Wi=Pe,0===er&&Hs(Zi)),Wi!==Pe){if(Pr.test(Ae.charAt(Zr))?(an=Ae.charAt(Zr),Zr++):(an=Pe,0===er&&Hs(Is)),an===Pe&&(an=null),Ln=[],kr.test(Ae.charAt(Zr))?(ai=Ae.charAt(Zr),Zr++):(ai=Pe,0===er&&Hs(Yr)),ai!==Pe)for(;ai!==Pe;)Ln.push(ai),kr.test(Ae.charAt(Zr))?(ai=Ae.charAt(Zr),Zr++):(ai=Pe,0===er&&Hs(Yr));else Ln=Pe;Ln!==Pe?ys=Wi=[Wi,an,Ln]:(Zr=ys,ys=Pe)}else Zr=ys,ys=Pe;ys===Pe&&(ys=null),ii=Sr,Sr=parseFloat(Ir())}else Zr=Sr,Sr=Pe;return Sr}if((Be=Ve())!==Pe&&Zr===Ae.length)return Be;throw Be!==Pe&&Zr<Ae.length&&Hs({type:"end"}),function ki(Sr,Ts,ys){return new je(je.buildMessage(Sr,Ts),Sr,Ts,ys)}(Dr,dr<Ae.length?Ae.charAt(dr):null,function Xi(Sr,Ts){var ys=Mi(Sr),Wi=Mi(Ts);return{source:Oe,start:{offset:Sr,line:ys.line,column:ys.column},end:{offset:Ts,line:Wi.line,column:Wi.column}}}(dr,dr<Ae.length?dr+1:dr))}}}());const ne={deg:1,grad:.9,rad:180/Math.PI,turn:360},de={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function _e(Le){!function le(Le){if("quantity"!==Le.type||null!==Le.unit&&"%"!==Le.unit)throw new x.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${J(Le)}`,{term:Le})}(Le);const je=Le.value;return se(je,Le),"%"===Le.unit?.01*je:je}function fe(Le){return function me(Le){if("quantity"!==Le.type||!(0===Le.value&&null===Le.unit||Le.unit&&null!=de[Le.unit]))throw new x.Z("effect:type-error",`Expected <length>, Actual: ${J(Le)}`,{term:Le})}(Le),Le.value*de[Le.unit]||0}function De(Le){switch(Le.colorType){case"hex":return(0,D.rW)(Le.value);case"named":return ve(Le.value);case"function":return function Te(Le){if(Q(Le.parameters,4),Ce.test(Le.name))return[_e(Le.parameters[0]),_e(Le.parameters[1]),_e(Le.parameters[2]),Le.parameters[3]?_e(Le.parameters[3]):1];if(ge.test(Le.name))return(0,D.B7)(function he(Le){return function ee(Le){if("quantity"!==Le.type||null!==Le.unit)throw new x.Z("effect:type-error",`Expected <double>, Actual: ${J(Le)}`,{term:Le})}(Le),se(Le.value,Le),Le.value}(Le.parameters[0]),_e(Le.parameters[1]),_e(Le.parameters[2]),Le.parameters[3]?_e(Le.parameters[3]):1);throw new x.Z("effect:syntax-error",`Invalid color function '${Le.name}'`,{colorFunction:Le})}(Le.value)}}function ve(Le){if(!(0,D.St)(Le))throw new x.Z("effect:unknown-color",`color '${Le}' isn't valid`,{namedColor:Le});return(0,D.VL)(Le)}const Ce=/^rgba?/i,ge=/^hsla?/i},53390:(qe,xe,T)=>{"use strict";T.d(xe,{AS:()=>x,Cb:()=>B,uF:()=>w});var D=T(58141);function x(U,W){const Y=U.length>W.length?U:W;return(U.length>W.length?W:U).every((H,G)=>H.type===Y[G].type)}function w(U,W){const Y=U.length>W.length?U:W,H=U.length>W.length?W:U;for(let G=H.length;G<Y.length;G++)H.push((0,D.Ee)(Y[G]))}function B(U){const W=U[0];return!!W&&"type"in W}},66385:(qe,xe,T)=>{"use strict";T.d(xe,{S6:()=>w,nd:()=>B,u_:()=>x});var D=T(62208);class x{constructor(W=null,Y={},H,G){this.geometry=W,this.attributes=Y,this.centroid=H,this.objectId=G,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const W=new x(this.geometry,this.attributes,this.centroid,this.objectId);return W.displayId=this.displayId,W.geohashX=this.geohashX,W.geohashY=this.geohashY,W}}function w(U){return!((0,D.Wi)(U.geometry)||!U.geometry.coords||!U.geometry.coords.length)}class B extends x{}},95786:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const w=new D;return w.objectIdFieldName=this.objectIdFieldName,w.globalIdFieldName=this.globalIdFieldName,w.geohashFieldName=this.geohashFieldName,w.geometryProperties=this.geometryProperties,w.geometryType=this.geometryType,w.spatialReference=this.spatialReference,w.hasZ=this.hasZ,w.hasM=this.hasM,w.features=this.features,w.fields=this.fields,w.transform=this.transform,w.exceededTransferLimit=this.exceededTransferLimit,w.uniqueIdField=this.uniqueIdField,w.queryGeometry=this.queryGeometry,w.queryGeometryType=this.queryGeometryType,w}}},88071:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(w=[],B=[],U=!1){this.lengths=w??[],this.coords=B??[],this.hasIndeterminateRingOrder=U}static fromRect(w){const[B,U,W,Y]=w,H=W-B,G=Y-U;return new D([5],[B,U,H,0,0,G,-H,0,0,-G])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((w,B)=>w+B)}forEachVertex(w){let B=0;this.lengths.length||w(this.coords[0],this.coords[1]);for(let U=0;U<this.lengths.length;U++){const W=this.lengths[U];for(let Y=0;Y<W;Y++)w(this.coords[2*(Y+B)],this.coords[2*(Y+B)+1]);B+=W}}clone(w){return w?(w.set(this.coords),new D(this.lengths.slice(),w,this.hasIndeterminateRingOrder)):new D(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},53639:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>ae,k:()=>U}),T(8314);var x=T(62208);function w(oe,ie){if(oe===ie)return!0;if(null==oe||null==ie||oe.length!==ie.length)return!1;for(let X=0;X<oe.length;X++){const Z=oe[X],Q=ie[X];if(Z.length!==Q.length)return!1;for(let J=0;J<Z.length;J++)if(Z[J]!==Q[J])return!1}return!0}function B(oe,ie){if(oe===ie)return!0;if(null==oe||null==ie||oe.length!==ie.length)return!1;for(let X=0;X<oe.length;X++)if(!w(oe[X],ie[X]))return!1;return!0}function U(oe,ie){return!!$(oe.spatialReference,ie.spatialReference)&&oe.x===ie.x&&oe.y===ie.y&&oe.z===ie.z&&oe.m===ie.m}function $(oe,ie){return oe===ie||oe&&ie&&oe.equals(ie)}function ae(oe,ie){return oe===ie||null!=oe&&null!=ie&&oe.objectId===ie.objectId&&!!function re(oe,ie){if(oe===ie)return!0;if((0,x.Wi)(oe)||(0,x.Wi)(ie)||oe.type!==ie.type)return!1;switch(oe.type){case"point":return U(oe,ie);case"extent":return function G(oe,ie){return oe.hasZ===ie.hasZ&&oe.hasM===ie.hasM&&!!$(oe.spatialReference,ie.spatialReference)&&oe.xmin===ie.xmin&&oe.ymin===ie.ymin&&oe.zmin===ie.zmin&&oe.xmax===ie.xmax&&oe.ymax===ie.ymax&&oe.zmax===ie.zmax}(oe,ie);case"polyline":return function W(oe,ie){return oe.hasZ===ie.hasZ&&oe.hasM===ie.hasM&&!!$(oe.spatialReference,ie.spatialReference)&&B(oe.paths,ie.paths)}(oe,ie);case"polygon":return function Y(oe,ie){return oe.hasZ===ie.hasZ&&oe.hasM===ie.hasM&&!!$(oe.spatialReference,ie.spatialReference)&&B(oe.rings,ie.rings)}(oe,ie);case"multipoint":return function H(oe,ie){return oe.hasZ===ie.hasZ&&oe.hasM===ie.hasM&&!!$(oe.spatialReference,ie.spatialReference)&&w(oe.points,ie.points)}(oe,ie);case"mesh":return!1;default:return}}(oe.geometry,ie.geometry)&&!!function ue(oe,ie){if(oe===ie)return!0;if(!oe||!ie)return!1;const X=Object.keys(oe),Z=Object.keys(ie);if(X.length!==Z.length)return!1;for(const Q of X)if(oe[Q]!==ie[Q])return!1;return!0}(oe.attributes,ie.attributes)}},88530:(qe,xe,T)=>{"use strict";function D(x){return"point"===x.type}T.d(xe,{f:()=>D})},38114:(qe,xe,T)=>{"use strict";T.d(xe,{FS:()=>de,MS:()=>ye,PA:()=>Z,Pj:()=>X,R3:()=>ne,S6:()=>oe,TF:()=>_e,Tx:()=>se,Wh:()=>ae,Xw:()=>le,dF:()=>ce});var D=T(27306),w=(T(8314),T(62208)),B=T(55713),U=T(86236),W=T(65234),Y=T(5548),H=T(65401),G=T(7848),$=T(71774),re=T(36255);T(53639);class ae{constructor(Ce,ge,Te){this.uid=Ce,this.geometry=ge,this.attributes=Te,this.visible=!0,this.objectId=null,this.centroid=null}}function oe(ve){return(0,w.pC)(ve.geometry)}class X{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function Z(ve){const Ce=$.Mk.fromJSON(ve.geometryType),ge=W.Z.fromJSON(ve.spatialReference),Te=ve.transform,Le=ve.features.map(je=>{const ze=function Q(ve,Ce,ge,Te){return{uid:(0,U.D)(),objectId:Te&&ve.attributes?ve.attributes[Te]:null,attributes:ve.attributes,geometry:J(ve.geometry,Ce,ge),visible:!0}}(je,Ce,ge,ve.objectIdFieldName),Ee=ze.geometry;if((0,w.pC)(Ee)&&Te)switch(Ee.type){case"point":ze.geometry=(0,G.U1)(Te,Ee,Ee,Ee.hasZ,Ee.hasM);break;case"multipoint":ze.geometry=(0,G.J9)(Te,Ee,Ee,Ee.hasZ,Ee.hasM);break;case"polygon":ze.geometry=(0,G.Ie)(Te,Ee,Ee,Ee.hasZ,Ee.hasM);break;case"polyline":ze.geometry=(0,G.G6)(Te,Ee,Ee,Ee.hasZ,Ee.hasM);break;case"extent":case"mesh":ze.geometry=Ee}return ze});return{geometryType:Ce,features:Le,spatialReference:ge,fields:ve.fields?ve.fields.map(je=>re.Z.fromJSON(je)):null,objectIdFieldName:ve.objectIdFieldName,globalIdFieldName:ve.globalIdFieldName,geohashFieldName:ve.geohashFieldName,geometryProperties:ve.geometryProperties,hasZ:ve.hasZ,hasM:ve.hasM,exceededTransferLimit:ve.exceededTransferLimit,transform:null}}function J(ve,Ce,ge){if((0,w.Wi)(ve))return null;switch(Ce){case"point":return{x:ve.x,y:ve.y,z:ve.z,m:ve.m,hasZ:null!=ve.z,hasM:null!=ve.m,type:"point",spatialReference:ge};case"polyline":return{paths:ve.paths,hasZ:!!ve.hasZ,hasM:!!ve.hasM,type:"polyline",spatialReference:ge};case"polygon":return{rings:ve.rings,hasZ:!!ve.hasZ,hasM:!!ve.hasM,type:"polygon",spatialReference:ge};case"multipoint":return{points:ve.points,hasZ:!!ve.hasZ,hasM:!!ve.hasM,type:"multipoint",spatialReference:ge}}}function se(ve,Ce,ge,Te){return{x:ve,y:Ce,z:ge,hasZ:null!=ge,hasM:!1,spatialReference:Te,type:"point"}}function le(ve){let Ce=32;return Ce+=(0,D.f2)(ve.attributes),Ce+=3,Ce+=8+function ee(ve){if((0,w.Wi)(ve))return 0;let Ce=32;switch(ve.type){case"point":Ce+=42;break;case"polyline":case"polygon":{let ge=0;const Te=2+(ve.hasZ?1:0)+(ve.hasM?1:0),Le="polyline"===ve.type?ve.paths:ve.rings;for(const je of Le)ge+=je.length;Ce+=8*ge*Te+64,Ce+=128*ge,Ce+=34,Ce+=32*(Le.length+1);break}case"multipoint":{const Te=ve.points.length;Ce+=8*Te*(2+(ve.hasZ?1:0)+(ve.hasM?1:0))+64,Ce+=128*Te,Ce+=34,Ce+=32;break}case"extent":Ce+=98,ve.hasM&&(Ce+=32),ve.hasZ&&(Ce+=32);break;case"mesh":Ce+=(0,B.Xw)(ve.vertexAttributes.position),Ce+=(0,B.Xw)(ve.vertexAttributes.normal),Ce+=(0,B.Xw)(ve.vertexAttributes.uv),Ce+=(0,B.Xw)(ve.vertexAttributes.tangent)}return Ce}(ve.geometry),Ce}function ne(ve){if((0,w.Wi)(ve))return 0;switch(ve.type){case"point":return 1;case"polyline":{let Ce=0;for(const ge of ve.paths)Ce+=ge.length;return Ce}case"polygon":{let Ce=0;for(const ge of ve.rings)Ce+=ge.length;return Ce}case"multipoint":return ve.points.length;case"extent":return 2;case"mesh":{const Ce=ve.vertexAttributes&&ve.vertexAttributes.position;return Ce?Ce.length/3:0}default:return}}function ce(ve){if((0,w.Wi)(ve))return!1;switch(ve.type){case"extent":case"point":return!0;case"polyline":for(const Ce of ve.paths)if(Ce.length>0)return!0;return!1;case"polygon":for(const Ce of ve.rings)if(Ce.length>0)return!0;return!1;case"multipoint":return ve.points.length>0;case"mesh":return!ve.loaded||ve.vertexAttributes.position.length>0}}function de(ve,Ce){switch((0,Y.cS)(Ce),"mesh"===ve.type&&(ve=ve.extent),ve.type){case"point":Ce[0]=Ce[3]=ve.x,Ce[1]=Ce[4]=ve.y,ve.hasZ&&(Ce[2]=Ce[5]=ve.z);break;case"polyline":for(let ge=0;ge<ve.paths.length;ge++)(0,Y.Wi)(Ce,ve.paths[ge],ve.hasZ);break;case"polygon":for(let ge=0;ge<ve.rings.length;ge++)(0,Y.Wi)(Ce,ve.rings[ge],ve.hasZ);break;case"multipoint":(0,Y.Wi)(Ce,ve.points,ve.hasZ);break;case"extent":Ce[0]=ve.xmin,Ce[1]=ve.ymin,Ce[3]=ve.xmax,Ce[4]=ve.ymax,null!=ve.zmin&&(Ce[2]=ve.zmin),null!=ve.zmax&&(Ce[5]=ve.zmax)}}function _e(ve,Ce){switch((0,H.cS)(Ce),"mesh"===ve.type&&(ve=ve.extent),ve.type){case"point":Ce[0]=Ce[2]=ve.x,Ce[1]=Ce[3]=ve.y;break;case"polyline":for(let ge=0;ge<ve.paths.length;ge++)(0,H.Wi)(Ce,ve.paths[ge]);break;case"polygon":for(let ge=0;ge<ve.rings.length;ge++)(0,H.Wi)(Ce,ve.rings[ge]);break;case"multipoint":(0,H.Wi)(Ce,ve.points);break;case"extent":Ce[0]=ve.xmin,Ce[1]=ve.ymin,Ce[2]=ve.xmax,Ce[3]=ve.ymax}}function ye(ve,Ce){return null!=ve.objectId?ve.objectId:ve.attributes&&Ce?ve.attributes[Ce]:null}(0,Y.Ue)(),(0,H.Ue)()},82054:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>wt,$g:()=>Zt,EI:()=>He,GH:()=>$e,IN:()=>Z,Iv:()=>ge,J6:()=>ze,Jd:()=>X,Nh:()=>st,RZ:()=>lt,Uy:()=>Oe,XA:()=>Ie,Yn:()=>We,cn:()=>Xe,dd:()=>ve,di:()=>et,eG:()=>Be,fQ:()=>se,hY:()=>ar,h_:()=>rt,lM:()=>Ze,lz:()=>ss,oB:()=>Hr,zj:()=>Mt});var D=T(26584),x=T(63290),w=T(62208),B=T(91179),U=T(66385),W=T(95786),Y=T(88071);function H(pt,Ut){return pt?Ut?4:3:Ut?3:2}const G=x.Z.getLogger("esri.layers.graphics.featureConversionUtils"),$={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},re=(pt,Ut,$t,Xt,_r,hr)=>{pt[$t]=_r,pt[$t+1]=hr},ue=(pt,Ut,$t,Xt,_r,hr)=>{pt[$t]=_r,pt[$t+1]=hr,pt[$t+2]=Ut[Xt+2]},ae=(pt,Ut,$t,Xt,_r,hr)=>{pt[$t]=_r,pt[$t+1]=hr,pt[$t+2]=Ut[Xt+3]},oe=(pt,Ut,$t,Xt,_r,hr)=>{pt[$t]=_r,pt[$t+1]=hr,pt[$t+2]=Ut[Xt+2],pt[$t+3]=Ut[Xt+3]};function ie(pt,Ut,$t,Xt){if(pt){if($t)return Ut&&Xt?oe:ue;if(Ut&&Xt)return ae}else if(Ut&&Xt)return ue;return re}function X({scale:pt,translate:Ut},$t){return Math.round(($t-Ut[0])/pt[0])}function Z({scale:pt,translate:Ut},$t){return Math.round((Ut[1]-$t)/pt[1])}function Q({scale:pt,translate:Ut},$t){return $t*pt[0]+Ut[0]}function J({scale:pt,translate:Ut},$t){return Ut[1]-$t*pt[1]}function se(pt,Ut,$t){return pt?Ut?$t?_e(pt):ne(pt):$t?de(pt):ee(pt):null}function ee(pt){const Ut=pt.coords;return{x:Ut[0],y:Ut[1]}}function le(pt,Ut){return pt.coords[0]=Ut.x,pt.coords[1]=Ut.y,pt}function ne(pt){const Ut=pt.coords;return{x:Ut[0],y:Ut[1],z:Ut[2]}}function ce(pt,Ut){return pt.coords[0]=Ut.x,pt.coords[1]=Ut.y,pt.coords[2]=Ut.z,pt}function de(pt){const Ut=pt.coords;return{x:Ut[0],y:Ut[1],m:Ut[2]}}function me(pt,Ut){return pt.coords[0]=Ut.x,pt.coords[1]=Ut.y,pt.coords[2]=Ut.m,pt}function _e(pt){const Ut=pt.coords;return{x:Ut[0],y:Ut[1],z:Ut[2],m:Ut[3]}}function he(pt,Ut){return pt.coords[0]=Ut.x,pt.coords[1]=Ut.y,pt.coords[2]=Ut.z,pt.coords[3]=Ut.m,pt}function fe(pt,Ut){return pt&&Ut?he:pt?ce:Ut?me:le}function ve(pt,Ut,$t=fe(null!=Ut.z,null!=Ut.m)){return $t(pt,Ut)}function ge(pt,Ut,$t){if((0,w.Wi)(pt))return null;const Xt=H(Ut,$t),_r=[];for(let hr=0;hr<pt.coords.length;hr+=Xt){const gr=[];for(let vr=0;vr<Xt;vr++)gr.push(pt.coords[hr+vr]);_r.push(gr)}return Ut?$t?{points:_r,hasZ:Ut,hasM:$t}:{points:_r,hasZ:Ut}:$t?{points:_r,hasM:$t}:{points:_r}}function Le(pt,Ut,$t=H(Ut.hasZ,Ut.hasM)){pt.lengths[0]=Ut.points.length;const Xt=pt.coords;let _r=0;for(const hr of Ut.points)for(let gr=0;gr<$t;gr++)Xt[_r++]=hr[gr];return pt}function ze(pt,Ut,$t){if(!pt)return null;const Xt=H(Ut,$t),{coords:_r,lengths:hr}=pt,gr=[];let vr=0;for(const Kr of hr){const Gr=[];for(let Jr=0;Jr<Kr;Jr++){const ns=[];for(let lr=0;lr<Xt;lr++)ns.push(_r[vr++]);Gr.push(ns)}gr.push(Gr)}return Ut?$t?{paths:gr,hasZ:Ut,hasM:$t}:{paths:gr,hasZ:Ut}:$t?{paths:gr,hasM:$t}:{paths:gr}}function Ae(pt,Ut,$t=H(Ut.hasZ,Ut.hasM)){const{lengths:Xt,coords:_r}=pt;let hr=0;for(const gr of Ut.paths){for(const vr of gr)for(let Kr=0;Kr<$t;Kr++)_r[hr++]=vr[Kr];Xt.push(gr.length)}return pt}function Be(pt,Ut,$t){if(!pt)return null;const Xt=H(Ut,$t),{coords:_r,lengths:hr}=pt,gr=[];let vr=0;for(const Kr of hr){const Gr=[];for(let Jr=0;Jr<Kr;Jr++){const ns=[];for(let lr=0;lr<Xt;lr++)ns.push(_r[vr++]);Gr.push(ns)}gr.push(Gr)}return Ut?$t?{rings:gr,hasZ:Ut,hasM:$t}:{rings:gr,hasZ:Ut}:$t?{rings:gr,hasM:$t}:{rings:gr}}function Oe(pt,Ut,$t=Ut.hasZ,Xt=Ut.hasM){return function Ke(pt,Ut,$t,Xt){const _r=H($t,Xt),{lengths:hr,coords:gr}=pt;let vr=0;hr.length=gr.length=0;for(const Kr of Ut){for(const Gr of Kr)for(let Jr=0;Jr<_r;Jr++)gr[vr++]=Gr[Jr];hr.push(Kr.length)}}(pt,Ut.rings,$t,Xt),pt}const Ve=[],Ne=[];function Ie(pt,Ut,$t,Xt,_r){Ve[0]=pt;const[hr]=We(Ne,Ve,Ut,$t,Xt,_r);return Ve.length=Ne.length=0,hr}function We(pt,Ut,$t,Xt,_r,hr){if(pt.length=0,!$t){for(const gr of Ut)pt.push(new U.u_(null,gr.attributes,null,gr.attributes[hr]));return pt}switch($t){case"esriGeometryPoint":return function De(pt,Ut,$t,Xt,_r){const hr=fe($t,Xt);for(const gr of Ut){const{geometry:vr,attributes:Kr}=gr;let Gr;vr&&(Gr=hr(new Y.Z,vr)),pt.push(new U.u_(Gr,Kr,null,Kr[_r]))}return pt}(pt,Ut,Xt,_r,hr);case"esriGeometryMultipoint":return function Te(pt,Ut,$t,Xt,_r){const hr=H($t,Xt);for(const gr of Ut){const vr=gr.geometry,Kr=gr.attributes;let Gr;vr&&(Gr=Le(new Y.Z,vr,hr)),pt.push(new U.u_(Gr,Kr,null,Kr[_r]))}return pt}(pt,Ut,Xt,_r,hr);case"esriGeometryPolyline":return function Ee(pt,Ut,$t,Xt,_r){const hr=H($t,Xt);for(const gr of Ut){const vr=gr.geometry,Kr=gr.attributes;let Gr;vr&&(Gr=Ae(new Y.Z,vr,hr)),pt.push(new U.u_(Gr,Kr,null,Kr[_r]))}return pt}(pt,Ut,Xt,_r,hr);case"esriGeometryPolygon":return function Pe(pt,Ut,$t,Xt,_r){for(const hr of Ut){const gr=hr.geometry,vr=hr.centroid,Kr=hr.attributes;let Gr;gr&&(Gr=Oe(new Y.Z,gr,$t,Xt)),(0,w.pC)(vr)?pt.push(new U.u_(Gr,Kr,le(new Y.Z,vr),Kr[_r])):pt.push(new U.u_(Gr,Kr,null,Kr[_r]))}return pt}(pt,Ut,Xt,_r,hr);default:G.error("convertToFeatureSet:unknown-geometry",new D.Z(`Unable to parse unknown geometry type '${$t}'`)),pt.length=0}return pt}function He(pt,Ut,$t,Xt){Ne[0]=pt,it(Ve,Ne,Ut,$t,Xt);const _r=Ve[0];return Ve.length=Ne.length=0,_r}function $e(pt,Ut,$t){if((0,w.Wi)(pt))return null;const Xt=new Y.Z;return"hasZ"in pt&&null==Ut&&(Ut=pt.hasZ),"hasM"in pt&&null==$t&&($t=pt.hasM),(0,B.wp)(pt)?fe(Ut??null!=pt.z,$t??null!=pt.m)(Xt,pt):(0,B.oU)(pt)?Oe(Xt,pt,Ut,$t):(0,B.l9)(pt)?Ae(Xt,pt,H(Ut,$t)):(0,B.aW)(pt)?Le(Xt,pt,H(Ut,$t)):void G.error("convertFromGeometry:unknown-geometry",new D.Z(`Unable to parse unknown geometry type '${pt}'`))}function et(pt,Ut,$t,Xt){const _r=pt&&("coords"in pt?pt:pt.geometry);if((0,w.Wi)(_r))return null;switch(Ut){case"esriGeometryPoint":{let hr=ee;return $t&&Xt?hr=_e:$t?hr=ne:Xt&&(hr=de),hr(_r)}case"esriGeometryMultipoint":return ge(_r,$t,Xt);case"esriGeometryPolyline":return ze(_r,$t,Xt);case"esriGeometryPolygon":return Be(_r,$t,Xt);default:return void G.error("convertToGeometry:unknown-geometry",new D.Z(`Unable to parse unknown geometry type '${Ut}'`))}}function it(pt,Ut,$t,Xt,_r){if(pt.length=0,(0,w.Wi)($t))return function nt(pt,Ut){for(const $t of Ut)pt.push({attributes:$t.attributes});return pt}(pt,Ut);switch($t){case"esriGeometryPoint":return function ye(pt,Ut,$t,Xt){let _r=ee;$t&&Xt?_r=_e:$t?_r=ne:Xt&&(_r=de);for(const hr of Ut){const{geometry:gr,attributes:vr}=hr,Kr=(0,w.pC)(gr)?_r(gr):null;pt.push({attributes:vr,geometry:Kr})}return pt}(pt,Ut,Xt,_r);case"esriGeometryMultipoint":return function Ce(pt,Ut,$t,Xt){for(const _r of Ut){const{geometry:hr,attributes:gr}=_r;let vr;hr&&(vr=ge(hr,$t,Xt)),pt.push({attributes:gr,geometry:vr})}return pt}(pt,Ut,Xt,_r);case"esriGeometryPolyline":return function je(pt,Ut,$t,Xt){for(const _r of Ut){const{geometry:hr,attributes:gr}=_r;let vr;(0,w.pC)(hr)&&(vr=ze(hr,$t,Xt)),pt.push({attributes:gr,geometry:vr})}return pt}(pt,Ut,Xt,_r);case"esriGeometryPolygon":return function we(pt,Ut,$t,Xt){for(const _r of Ut){const{geometry:hr,attributes:gr,centroid:vr}=_r;let Kr;if((0,w.pC)(hr)&&(Kr=Be(hr,$t,Xt)),(0,w.pC)(vr)){const Gr=ee(vr);pt.push({attributes:gr,centroid:Gr,geometry:Kr})}else pt.push({attributes:gr,geometry:Kr})}return pt}(pt,Ut,Xt,_r);default:G.error("convertToFeatureSet:unknown-geometry",new D.Z(`Unable to parse unknown geometry type '${$t}'`))}return pt}function Xe(pt){const{objectIdFieldName:Ut,spatialReference:$t,transform:Xt,fields:_r,hasM:hr,hasZ:gr,features:vr,geometryType:Kr,exceededTransferLimit:Gr,uniqueIdField:Jr,queryGeometry:ns,queryGeometryType:lr}=pt,Tr={features:it([],vr,Kr,gr,hr),fields:_r,geometryType:Kr,objectIdFieldName:Ut,spatialReference:$t,uniqueIdField:Jr,queryGeometry:et(ns,lr,!1,!1)};return Xt&&(Tr.transform=Xt),Gr&&(Tr.exceededTransferLimit=Gr),hr&&(Tr.hasM=hr),gr&&(Tr.hasZ=gr),Tr}function rt(pt,Ut){const $t=new W.Z,{hasM:Xt,hasZ:_r,features:hr,objectIdFieldName:gr,spatialReference:vr,geometryType:Kr,exceededTransferLimit:Gr,transform:Jr,fields:ns}=pt;return ns&&($t.fields=ns),$t.geometryType=Kr,$t.objectIdFieldName=gr||Ut,$t.spatialReference=vr,$t.objectIdFieldName?(hr&&We($t.features,hr,Kr,_r,Xt,$t.objectIdFieldName),Gr&&($t.exceededTransferLimit=Gr),Xt&&($t.hasM=Xt),_r&&($t.hasZ=_r),Jr&&($t.transform=Jr),$t):(G.error(new D.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),$t)}function Ze(pt){const{transform:Ut,features:$t,hasM:Xt,hasZ:_r}=pt;if(!Ut)return pt;for(const hr of $t)(0,w.pC)(hr.geometry)&&Zt(hr.geometry,hr.geometry,Xt,_r,Ut),(0,w.pC)(hr.centroid)&&Zt(hr.centroid,hr.centroid,Xt,_r,Ut);return pt.transform=null,pt}function lt(pt,Ut){const{geometryType:$t,features:Xt,hasM:_r,hasZ:hr}=Ut;if(!pt)return Ut;for(let gr=0;gr<Xt.length;gr++){const vr=Xt[gr],Kr=vr.weakClone();Kr.geometry=new Y.Z,st(Kr.geometry,vr.geometry,_r,hr,$t,pt),vr.centroid&&(Kr.centroid=new Y.Z,st(Kr.centroid,vr.centroid,_r,hr,"esriGeometryPoint",pt)),Xt[gr]=Kr}return Ut.transform=pt,Ut}function st(pt,Ut,$t,Xt,_r,hr,gr=$t,vr=Xt){if(pt.lengths.length&&(pt.lengths.length=0),pt.coords.length&&(pt.coords.length=0),(0,w.Wi)(Ut)||!Ut.coords.length)return null;const Kr=$[_r],{coords:Gr,lengths:Jr}=Ut,ns=H($t,Xt),lr=H($t&&gr,Xt&&vr),Tr=ie($t,Xt,gr,vr);if(!Jr.length)return Tr(pt.coords,Gr,0,0,X(hr,Gr[0]),Z(hr,Gr[1])),pt.lengths.length&&(pt.lengths.length=0),pt.coords.length=ns,pt;let zr,Tt,sr,Rr,bt=0,Qt=0,qt=Qt;for(const yr of Jr){if(yr<Kr)continue;let jr=0;Qt=qt,sr=zr=X(hr,Gr[bt]),Rr=Tt=Z(hr,Gr[bt+1]),Tr(pt.coords,Gr,Qt,bt,sr,Rr),jr++,bt+=ns,Qt+=lr;for(let es=1;es<yr;es++,bt+=ns)sr=X(hr,Gr[bt]),Rr=Z(hr,Gr[bt+1]),sr===zr&&Rr===Tt||(Tr(pt.coords,Gr,Qt,bt,sr-zr,Rr-Tt),Qt+=lr,jr++,zr=sr,Tt=Rr);jr>=Kr&&(pt.lengths.push(jr),qt=Qt)}return pt.coords.length=qt,pt.coords.length?pt:null}function Mt(pt,Ut,$t,Xt,_r,hr,gr=$t,vr=Xt){if(pt.lengths.length&&(pt.lengths.length=0),pt.coords.length&&(pt.coords.length=0),!Ut||!Ut.coords.length)return null;const Kr=$[_r],{coords:Gr,lengths:Jr}=Ut,ns=H($t,Xt),lr=H($t&&gr,Xt&&vr),Tr=ie($t,Xt,gr,vr);if(!Jr.length)return Tr(pt.coords,Gr,0,0,Gr[0],Gr[1]),pt.lengths.length&&(pt.lengths.length=0),pt.coords.length=ns,pt;let zr=0;const Tt=hr*hr;for(const sr of Jr){if(sr<Kr){zr+=sr*ns;continue}const Rr=pt.coords.length/lr,bt=zr,Qt=zr+(sr-1)*ns;Tr(pt.coords,Gr,pt.coords.length,bt,Gr[bt],Gr[bt+1]),kt(pt.coords,Gr,ns,Tt,Tr,bt,Qt),Tr(pt.coords,Gr,pt.coords.length,Qt,Gr[Qt],Gr[Qt+1]);const qt=pt.coords.length/lr-Rr;qt>=Kr?pt.lengths.push(qt):pt.coords.length=Rr*lr,zr+=sr*ns}return pt.coords.length?pt:null}function Ft(pt,Ut,$t,Xt){const _r=pt[Ut],hr=pt[Ut+1],Kr=pt[Xt],Gr=pt[Xt+1];let Jr=pt[$t],ns=pt[$t+1],lr=Kr-Jr,Tr=Gr-ns;if(0!==lr||0!==Tr){const zr=((_r-Jr)*lr+(hr-ns)*Tr)/(lr*lr+Tr*Tr);zr>1?(Jr=Kr,ns=Gr):zr>0&&(Jr+=lr*zr,ns+=Tr*zr)}return lr=_r-Jr,Tr=hr-ns,lr*lr+Tr*Tr}function kt(pt,Ut,$t,Xt,_r,hr,gr){let vr,Kr=Xt,Gr=0;for(let Jr=hr+$t;Jr<gr;Jr+=$t)vr=Ft(Ut,Jr,hr,gr),vr>Kr&&(Gr=Jr,Kr=vr);Kr>Xt&&(Gr-hr>$t&&kt(pt,Ut,$t,Xt,_r,hr,Gr),_r(pt,Ut,pt.length,Gr,Ut[Gr],Ut[Gr+1]),gr-Gr>$t&&kt(pt,Ut,$t,Xt,_r,Gr,gr))}function wt(pt,Ut,$t,Xt){if((0,w.Wi)(Ut)||!Ut.coords||!Ut.coords.length)return null;const _r=H($t,Xt);let hr=Number.POSITIVE_INFINITY,gr=Number.POSITIVE_INFINITY,vr=Number.NEGATIVE_INFINITY,Kr=Number.NEGATIVE_INFINITY;if(Ut&&Ut.coords){const Gr=Ut.coords;for(let Jr=0;Jr<Gr.length;Jr+=_r){const ns=Gr[Jr],lr=Gr[Jr+1];hr=Math.min(hr,ns),vr=Math.max(vr,ns),gr=Math.min(gr,lr),Kr=Math.max(Kr,lr)}}return pt[0]=hr,pt[1]=gr,pt[2]=vr,pt[3]=Kr,pt}function Zt(pt,Ut,$t,Xt,_r){const{coords:hr,lengths:gr}=Ut,vr=$t?Xt?oe:ue:Xt?ue:re,Kr=H($t,Xt);if(!hr.length)return pt!==Ut&&(pt.lengths.length=0,pt.coords.length=0),pt;if(!gr.length)return vr(pt.coords,hr,0,0,Q(_r,hr[0]),J(_r,hr[1])),pt!==Ut&&(pt.lengths.length=0,pt.coords.length=Kr),pt;const[Gr,Jr]=_r.scale;let ns=0;for(let lr=0;lr<gr.length;lr++){const Tr=gr[lr];pt.lengths[lr]=Tr;let zr=Q(_r,hr[ns]),Tt=J(_r,hr[ns+1]);vr(pt.coords,hr,ns,ns,zr,Tt),ns+=Kr;for(let sr=1;sr<Tr;sr++,ns+=Kr)zr+=hr[ns]*Gr,Tt-=hr[ns+1]*Jr,vr(pt.coords,hr,ns,ns,zr,Tt)}return pt!==Ut&&(pt.lengths.length=gr.length,pt.coords.length=hr.length),pt}function ar(pt,Ut,$t,Xt,_r,hr){const gr=H($t,Xt),vr=ie($t,Xt,_r,hr),Kr=Ut.coords;pt.coords.length=0,pt.lengths.length=0,pt.lengths.push(...Ut.lengths);for(let Gr=0;Gr<Kr.length;Gr+=gr)vr(pt.coords,Kr,pt.coords.length,Gr,Kr[Gr],Kr[Gr+1]);return pt}function kr(pt,Ut,$t,Xt){let _r=0,hr=pt[Xt*Ut],gr=pt[Xt*(Ut+1)];for(let vr=1;vr<$t;vr++){const Kr=hr+pt[Xt*(Ut+vr)],Gr=gr+pt[Xt*(Ut+vr)+1],Jr=(Kr-hr)*(Gr+gr);hr=Kr,gr=Gr,_r+=Jr}return.5*_r}function ss(pt,Ut){const{coords:$t,lengths:Xt}=pt;let _r=0,hr=0;for(let gr=0;gr<Xt.length;gr++)hr+=kr($t,_r,Xt[gr],Ut),_r+=gr;return Math.abs(hr)}function Hr(pt,Ut){if((0,w.Wi)(pt))return null;const $t=pt.clone(),Xt=pt.coords,_r=pt.lengths;let hr=0;for(let gr=0;gr<_r.length;gr++){const vr=_r[gr];let Kr=Xt[Ut*hr],Gr=Xt[Ut*hr+1];for(let Jr=1;Jr<vr;Jr++){const ns=Kr+Xt[Ut*(hr+Jr)],lr=Gr+Xt[Ut*(hr+Jr)+1];$t.coords[Ut*(hr+Jr)]=ns,$t.coords[Ut*(hr+Jr)+1]=lr,Kr=ns,Gr=lr}hr+=vr}return $t}},84786:(qe,xe,T)=>{"use strict";T.d(xe,{Ou:()=>H,WG:()=>Q,kB:()=>ue,mW:()=>re});var D=T(88879),w=(T(8314),T(58817)),B=T(62208),U=T(55713),W=T(91179),Y=T(38114);function H(J){return"declaredClass"in J}function G(J){return"declaredClass"in J}function re(J,se){if(!J)return null;if(function $(J){return"declaredClass"in J}(J))return J;const ee=new D.Z({layer:se,sourceLayer:se});return ee.visible=J.visible,ee.symbol=(0,w.d9)(J.symbol),ee.attributes=(0,w.d9)(J.attributes),ee.geometry=ue(J.geometry),ee}function ue(J){return(0,B.Wi)(J)?null:H(J)?J:(0,W.im)(function ae(J){const se=J.spatialReference.toJSON();switch(J.type){case"point":{const{x:ee,y:le,z:ne,m:ce}=J;return{x:ee,y:le,z:ne,m:ce,spatialReference:se}}case"polygon":{const{rings:ee,hasZ:le,hasM:ne}=J;return{rings:oe(ee),hasZ:le,hasM:ne,spatialReference:se}}case"polyline":{const{paths:ee,hasZ:le,hasM:ne}=J;return{paths:oe(ee),hasZ:le,hasM:ne,spatialReference:se}}case"extent":{const{xmin:ee,xmax:le,ymin:ne,ymax:ce,zmin:de,zmax:me,mmin:_e,mmax:he,hasZ:ye,hasM:fe}=J;return{xmin:ee,xmax:le,ymin:ne,ymax:ce,zmin:de,zmax:me,mmin:_e,mmax:he,hasZ:ye,hasM:fe,spatialReference:se}}case"multipoint":{const{points:ee,hasZ:le,hasM:ne}=J;return{points:Z(ee)?ie(ee):ee,hasZ:le,hasM:ne,spatialReference:se}}default:return}}(J))}function oe(J){return function X(J){for(const se of J)if(0!==se.length)return Z(se);return!1}(J)?J.map(se=>ie(se)):J}function ie(J){return J.map(se=>(0,U.qo)(se))}function Z(J){return J.length&&((0,U.xZ)(J[0])||(0,U.fS)(J[0]))}function Q(J,se){if(!J)return null;let ee;if(G(J)){if(null==se)return J.clone();if(G(se))return se.copy(J)}return null!=se?(ee=se,ee.x=J.x,ee.y=J.y,ee.spatialReference=J.spatialReference,J.hasZ?(ee.z=J.z,ee.hasZ=J.hasZ):(ee.z=null,ee.hasZ=!1),J.hasM?(ee.m=J.m,ee.hasM=!0):(ee.m=null,ee.hasM=!1)):(ee=(0,Y.Tx)(J.x,J.y,J.z,J.spatialReference),J.hasM&&(ee.m=J.m,ee.hasM=!0)),ee}},50085:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>H});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898));const H=G=>{let $=class extends G{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function Y(G){return"portalItem"in G}(this)?this.portalItem?.apiKey:null}set apiKey(re){null!=re?this._override("apiKey",re):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,D._)([(0,x.Cb)({type:String})],$.prototype,"apiKey",null),$=(0,D._)([(0,W.j)("esri.layers.mixins.APIKeyMixin")],$),$}},65088:(qe,xe,T)=>{"use strict";T.d(xe,{Y:()=>$});var D=T(17626),x=T(63290),w=T(62208),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(38305);const $=re=>{let ue=class extends re{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const ae=(0,G.Qc)(this.url);if((0,w.pC)(ae)&&ae.title)return ae.title}return this._get("title")||""}set title(ae){this._set("title",ae)}set url(ae){this._set("url",(0,G.Nm)(ae,x.Z.getLogger(this.declaredClass)))}};return(0,D._)([(0,B.Cb)()],ue.prototype,"title",null),(0,D._)([(0,B.Cb)({type:String})],ue.prototype,"url",null),ue=(0,D._)([(0,H.j)("esri.layers.mixins.ArcGISService")],ue),ue}},552:(qe,xe,T)=>{"use strict";T.d(xe,{h:()=>G});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(71149);const H={read:{reader:Y.ij},write:{allowNull:!0,writer:Y.cW}},G=$=>{let re=class extends ${constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,D._)([(0,x.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],re.prototype,"blendMode",void 0),(0,D._)([(0,x.Cb)({json:{read:!1,write:!1,origins:{"web-map":H,"portal-item":H}}})],re.prototype,"effect",void 0),re=(0,D._)([(0,W.j)("esri.layers.mixins.BlendLayer")],re),re}},50107:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>Y});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898));const Y=H=>{let G=class extends H{constructor(){super(...arguments),this.customParameters=null}};return(0,D._)([(0,x.Cb)({type:Object,json:{write:{overridePolicy:$=>({enabled:!!($&&Object.keys($).length>0)})}}})],G.prototype,"customParameters",void 0),G=(0,D._)([(0,W.j)("esri.layers.mixins.CustomParametersMixin")],G),G}},35126:(qe,xe,T)=>{"use strict";T.d(xe,{b:()=>G});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(2319);const H={write:{allowNull:!0}},G=$=>{let re=class extends ${constructor(){super(...arguments),this.featureEffect=null}};return(0,D._)([(0,x.Cb)({type:Y.Z,json:{origins:{"web-map":H,"portal-item":H}}})],re.prototype,"featureEffect",void 0),re=(0,D._)([(0,W.j)("esri.layers.mixins.FeatureEffectLayer")],re),re}},49286:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>oe});var D=T(17626),x=T(26584),w=T(21726),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(99433),$=T(29338),re=T(36054);const ue={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var ae=T(13812);const oe=X=>{let Z=class extends X{constructor(){super(...arguments),this.title=null}writeListMode(Q,J,se,ee){(ee&&"ground"===ee.layerContainerType||Q&&(0,re.d)(this,se,{},ee))&&(J[se]=Q)}writeOperationalLayerType(Q,J,se,ee){!Q||ee&&"tables"===ee.layerContainerType||(J.layerType=Q)}writeTitle(Q,J){J.title=Q||"Layer"}read(Q,J){J&&(J.layer=this),(0,$.$)(this,Q,se=>super.read(Q,se),J)}write(Q,J){if(J?.origin){const le=`${J.origin}/${J.layerContainerType||"operational-layers"}`,ne=ue[le];let ce=ne&&ne[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===le&&(ce=!1),!ce)return J.messages?.push(new x.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${le}'`,{layer:this})),null}const se=super.write(Q,{...J,layer:this}),ee=!!J&&!!J.messages&&!!J.messages.filter(le=>le instanceof x.Z&&"web-document-write:property-required"===le.name).length;return(0,w.jc)(se?.url)?(J?.messages?.push(new x.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&ee?null:se}beforeSave(){}};return(0,D._)([(0,B.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],Z.prototype,"id",void 0),(0,D._)([(0,B.Cb)(ae.rT)],Z.prototype,"listMode",void 0),(0,D._)([(0,G.c)("listMode")],Z.prototype,"writeListMode",null),(0,D._)([(0,B.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],Z.prototype,"operationalLayerType",void 0),(0,D._)([(0,G.c)("operationalLayerType")],Z.prototype,"writeOperationalLayerType",null),(0,D._)([(0,B.Cb)(ae.Oh)],Z.prototype,"opacity",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],Z.prototype,"title",void 0),(0,D._)([(0,G.c)([void 0,"web-scene"],"title")],Z.prototype,"writeTitle",null),(0,D._)([(0,B.Cb)({type:Boolean,json:{name:"visibility"}})],Z.prototype,"visible",void 0),Z=(0,D._)([(0,H.j)("esri.layers.mixins.OperationalLayer")],Z),Z}},32629:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>Z});var $,D=T(17626),x=T(94113),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(2076),G=T(86810);const re=new H.X({asc:"ascending",desc:"descending"});let ue=$=class extends G.wq{constructor(Q){super(Q),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new $({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],ue.prototype,"field",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],ue.prototype,"valueExpression",void 0),(0,D._)([(0,w.Cb)({type:re.apiValues,json:{read:re.read,write:re.write}})],ue.prototype,"order",void 0),ue=$=(0,D._)([(0,Y.j)("esri.layers.support.OrderByInfo")],ue);const ae=ue;function ie(Q,J,se){if(!Q)return null;const ee=Q.find(ne=>!!ne.field);if(!ee)return null;const le=new ae;return le.read(ee,se),[le]}function X(Q,J,se,ee){const le=Q.find(ne=>!!ne.field);le&&(0,x.RB)(se,[le.toJSON()],J)}const Z=Q=>{let J=class extends Q{constructor(){super(...arguments),this.orderBy=null}};return(0,D._)([(0,w.Cb)({type:[ae],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:ie},write:{target:"layerDefinition.orderBy",writer:X}}})],J.prototype,"orderBy",void 0),J=(0,D._)([(0,Y.j)("esri.layers.mixins.OrderedLayer")],J),J}},6647:(qe,xe,T)=>{"use strict";T.d(xe,{I:()=>le});var D=T(15861),x=T(17626),w=T(24263),B=T(84792),U=T(59213),W=T(26584),Y=T(63290),H=T(62208),G=T(10699),$=T(21726),re=T(77712),ie=(T(85931),T(8314),T(90912),T(68653)),X=T(76898),Z=T(99433),Q=T(84687),J=T(55463),se=T(94508);const ee=Y.Z.getLogger("esri.layers.mixins.PortalLayer"),le=ce=>{let de=class extends ce{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem?.destroy(),this.portalItem=null}set portalItem(me){me!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",me))}readPortalItem(me,_e,he){if(_e.itemId)return new J.default({id:_e.itemId,portal:he&&he.portal})}writePortalItem(me,_e){me&&me.id&&(_e.itemId=me.id)}loadFromPortal(me,_e){var he=this;return(0,D.Z)(function*(){if(he.portalItem&&he.portalItem.id)try{const ye=yield T.e(3705).then(T.bind(T,83705));return(0,G.k_)(_e),yield ye.load({instance:he,supportedTypes:me.supportedTypes,validateItem:me.validateItem,supportsData:me.supportsData},_e)}catch(ye){throw(0,G.D_)(ye)||ee.warn(`Failed to load layer (${he.title}, ${he.id}) portal item (${he.portalItem.id})\n  ${ye}`),ye}})()}finishLoadEditablePortalLayer(me){var _e=this;return(0,D.Z)(function*(){_e._set("userHasEditingPrivileges",yield _e._fetchUserHasEditingPrivileges(me).catch(he=>((0,G.r9)(he),!0)))})()}_fetchUserHasEditingPrivileges(me){var _e=this;return(0,D.Z)(function*(){const he=_e.url?w.id?.findCredential(_e.url):null;if(!he)return!0;const ye=ne.credential===he?ne.user:yield _e._fetchEditingUser(me);return ne.credential=he,ne.user=ye,(0,H.Wi)(ye)||null==ye.privileges||ye.privileges.includes("features:user:edit")})()}_fetchEditingUser(me){var _e=this;return(0,D.Z)(function*(){const he=_e.portalItem?.portal?.user;if(he)return he;const ye=w.id.findServerInfo(_e.url);if(!ye?.owningSystemUrl)return null;const fe=`${ye.owningSystemUrl}/sharing/rest`,De=Q.Z.getDefault();if(De&&De.loaded&&(0,$.Fv)(De.restUrl)===(0,$.Fv)(fe))return De.user;const ve=`${fe}/community/self`,Ce=(0,H.pC)(me)?me.signal:null,ge=yield(0,U.q6)((0,B.default)(ve,{authMode:"no-prompt",query:{f:"json"},signal:Ce}));return ge.ok?se.default.fromJSON(ge.value.data):null})()}read(me,_e){_e&&(_e.layer=this),super.read(me,_e)}write(me,_e){const he=_e&&_e.portal,ye=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Q.Z.getDefault());return he&&ye&&!(0,$.tm)(ye.restUrl,he.restUrl)?(_e.messages&&_e.messages.push(new W.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(me,{..._e,layer:this})}};return(0,x._)([(0,re.Cb)({type:J.default})],de.prototype,"portalItem",null),(0,x._)([(0,ie.r)("web-document","portalItem",["itemId"])],de.prototype,"readPortalItem",null),(0,x._)([(0,Z.c)("web-document","portalItem",{itemId:{type:String}})],de.prototype,"writePortalItem",null),(0,x._)([(0,re.Cb)({clonable:!1})],de.prototype,"resourceReferences",void 0),(0,x._)([(0,re.Cb)({readOnly:!0})],de.prototype,"userHasEditingPrivileges",void 0),de=(0,x._)([(0,X.j)("esri.layers.mixins.PortalLayer")],de),de},ne={credential:null,user:null}},30346:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>de,d:()=>ce});var D=T(15861),x=T(17626),w=T(63290),B=T(10699),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898)),$=T(46160),ae=(T(26584),T(30755),T(21352));const oe=new $.Z,ie=new WeakMap;function Q(me){return me&&"object"==typeof me&&"refreshInterval"in me&&"refresh"in me}function J(me,_e){return Number.isFinite(me)&&Number.isFinite(_e)?_e<=0?me:J(_e,me%_e):0}let se=0,ee=0;function le(){const me=Date.now();for(const _e of oe)_e.refreshInterval&&me-(ie.get(_e)??0)+5>=6e4*_e.refreshInterval&&(ie.set(_e,me),_e.refresh(me))}function ce(me){return me&&"object"==typeof me&&"refreshTimestamp"in me&&"refresh"in me}(0,ae.EH)(()=>{const me=Date.now();let _e=0;for(const he of oe)_e=J(Math.round(6e4*he.refreshInterval),_e),he.refreshInterval?ie.get(he)||ie.set(he,me):ie.delete(he);if(_e!==ee){if(ee=_e,clearInterval(se),0===ee)return void(se=0);se=setInterval(le,ee)}});const de=me=>{let _e=class extends me{constructor(...he){super(...he),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,B.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{!function X(me){Q(me)&&oe.push(me)}(this)},()=>{})}destroy(){!function Z(me){Q(me)&&oe.includes(me)&&oe.remove(me)}(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(he=Date.now()){(0,B.R8)(this._debounceHasDataChanged()).then(ye=>{ye&&this._set("refreshTimestamp",he),this.emit("refresh",{dataChanged:ye})},ye=>{w.Z.getLogger(this.declaredClass).error(ye),this.emit("refresh",{dataChanged:!1,error:ye})})}hasDataChanged(){return(0,D.Z)(function*(){return!0})()}};return(0,x._)([(0,U.Cb)({type:Number,cast:he=>he>=.1?he:he<=0?0:.1,json:{write:!0}})],_e.prototype,"refreshInterval",void 0),(0,x._)([(0,U.Cb)({readOnly:!0})],_e.prototype,"refreshTimestamp",void 0),(0,x._)([(0,U.Cb)()],_e.prototype,"refreshParameters",null),_e=(0,x._)([(0,G.j)("esri.layers.mixins.RefreshableLayer")],_e),_e}},99555:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>Y});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898));const Y=G=>{let $=class extends G{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const re={minScale:this.minScale,maxScale:this.maxScale},ue=this.parent;ue&&"effectiveScaleRange"in ue&&function H(G,$){G.minScale=G.minScale>0?$.minScale>0?Math.min(G.minScale,$.minScale):G.minScale:$.minScale,G.maxScale=G.maxScale>0?$.maxScale>0?Math.max(G.maxScale,$.maxScale):G.maxScale:$.maxScale}(re,ue.effectiveScaleRange);const ae=this._get("effectiveScaleRange");return ae&&ae.minScale===re.minScale&&ae.maxScale===re.maxScale?ae:re}};return(0,D._)([(0,x.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],$.prototype,"minScale",void 0),(0,D._)([(0,x.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],$.prototype,"maxScale",void 0),(0,D._)([(0,x.Cb)({readOnly:!0})],$.prototype,"effectiveScaleRange",null),$=(0,D._)([(0,W.j)("esri.layers.mixins.ScaleRangeLayer")],$),$}},97941:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>oe});var D=T(17626),x=T(97478),w=T(20849),B=T(77712),H=(T(85931),T(8314),T(90912),T(68653)),G=T(76898),$=T(36630),re=T(62708),ue=T(58926);const oe=ie=>{let X=class extends ie{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(Z,Q){const J=Q.timeInfo.exportOptions;if(!J)return null;const se=J.timeOffset,ee=ue.v.fromJSON(J.timeOffsetUnits);return se&&ee?new w.Z({value:se,unit:ee}):null}set timeInfo(Z){(0,$.UF)(Z,this.fieldsIndex),this._set("timeInfo",Z)}};return(0,D._)([(0,B.Cb)({type:x.Z,json:{write:!1}})],X.prototype,"timeExtent",void 0),(0,D._)([(0,B.Cb)({type:w.Z})],X.prototype,"timeOffset",void 0),(0,D._)([(0,H.r)("service","timeOffset",["timeInfo.exportOptions"])],X.prototype,"readOffset",null),(0,D._)([(0,B.Cb)({value:null,type:re.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],X.prototype,"timeInfo",null),(0,D._)([(0,B.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],X.prototype,"useViewTime",void 0),X=(0,D._)([(0,G.j)("esri.layers.mixins.TemporalLayer")],X),X}},86219:(qe,xe,T)=>{"use strict";T.d(xe,{u:()=>G});var H,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.wq{constructor($){super($),this.name=null,this.code=null}clone(){return new H({name:this.name,code:this.code})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"name",void 0),(0,D._)([(0,w.Cb)({type:[String,Number],json:{write:!0}})],G.prototype,"code",void 0),G=H=(0,D._)([(0,Y.j)("esri.layers.support.CodedValue")],G)},26036:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(55342)),W=T(76898),Y=T(86219),H=T(50028);let $=G=class extends H.Z{constructor(ue){super(ue),this.codedValues=null,this.type="coded-value"}getName(ue){let ae=null;if(this.codedValues){const oe=String(ue);this.codedValues.some(ie=>(String(ie.code)===oe&&(ae=ie.name),!!ae))}return ae}clone(){return new G({codedValues:(0,x.d9)(this.codedValues),name:this.name})}};(0,D._)([(0,w.Cb)({type:[Y.u],json:{write:!0}})],$.prototype,"codedValues",void 0),(0,D._)([(0,U.J)({codedValue:"coded-value"})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.layers.support.CodedValueDomain")],$);const re=$},50028:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var D=T(17626),x=T(2076),w=T(86810),B=T(77712),H=(T(85931),T(8314),T(90912),T(55342)),G=T(76898);const $=new x.X({inherited:"inherited",codedValue:"coded-value",range:"range"});let re=class extends w.wq{constructor(ae){super(ae),this.name=null,this.type=null}};(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],re.prototype,"name",void 0),(0,D._)([(0,H.J)($)],re.prototype,"type",void 0),re=(0,D._)([(0,G.j)("esri.layers.support.Domain")],re);const ue=re},13762:(qe,xe,T)=>{"use strict";T.d(xe,{G$:()=>ae,Tl:()=>ue}),T(29132),T(8314);var w=T(63290),B=T(62208),U=T(16730),W=T(65401),Y=T(46367),H=T(49672);const G=w.Z.getLogger("esri.layers.support.ElevationSampler");class ${queryElevation(ee){return ae(ee.clone(),this)}on(){return J}projectIfRequired(ee,le){return oe(ee,le)}}class re extends ${constructor(ee,le,ne){super(),this.tile=ee,this.noDataValue=ne,this.extent=(0,W.HH)(ee.tile.extent,le.spatialReference),this.extent.zmin=ee.zmin,this.extent.zmax=ee.zmax,this.aaExtent=ee.tile.extent;const ce=(0,U.c9)(le.spatialReference),de=le.lodAt(ee.tile.level).resolution*ce;this.demResolution={min:de,max:de}}get spatialReference(){return this.extent.spatialReference}contains(ee){const le=this.projectIfRequired(ee,this.spatialReference);return!(0,B.Wi)(le)&&this.containsAt(le.x,le.y)}containsAt(ee,le){return(0,W.jE)(this.aaExtent,ee,le)}elevationAt(ee,le){if(!this.containsAt(ee,le)){const ne=this.extent;return G.warn("#elevationAt()",`Point used to sample elevation (${ee}, ${le}) is outside of the sampler extent (${ne.xmin}, ${ne.ymin}, ${ne.xmax}, ${ne.ymax})`),this.noDataValue}return(0,B.Pt)(this.tile.sample(ee,le),this.noDataValue)}}class ue extends ${constructor(ee,le,ne){let ce;super(),"number"==typeof le?(this.noDataValue=le,ce=null):(ce=le,this.noDataValue=ne),this.samplers=ce?ee.map(me=>new re(me,ce,this.noDataValue)):ee;const de=this.samplers[0];if(de){this.extent=de.extent.clone();const{min:me,max:_e}=de.demResolution;this.demResolution={min:me,max:_e};for(let he=1;he<this.samplers.length;he++){const ye=this.samplers[he];this.extent.union(ye.extent),this.demResolution.min=Math.min(this.demResolution.min,ye.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,ye.demResolution.max)}}else this.extent=(0,W.HH)((0,W.Ue)(),ce.spatialReference),this.demResolution={min:0,max:0}}get spatialReference(){return this.extent.spatialReference}elevationAt(ee,le){for(const ne of this.samplers)if(ne.containsAt(ee,le))return ne.elevationAt(ee,le);return G.warn("#elevationAt()",`Point used to sample elevation (${ee}, ${le}) is outside of the sampler`),this.noDataValue}}function ae(se,ee){const le=oe(se,ee.spatialReference);if(!le)return null;switch(se.type){case"point":!function ie(se,ee,le){se.z=le.elevationAt(ee.x,ee.y)}(se,le,ee);break;case"polyline":!function X(se,ee,le){Q.spatialReference=ee.spatialReference;const ne=se.hasM&&!se.hasZ;for(let ce=0;ce<se.paths.length;ce++){const de=se.paths[ce],me=ee.paths[ce];for(let _e=0;_e<de.length;_e++){const he=de[_e],ye=me[_e];Q.x=ye[0],Q.y=ye[1],ne&&(he[3]=he[2]),he[2]=le.elevationAt(Q.x,Q.y)}}se.hasZ=!0}(se,le,ee);break;case"multipoint":!function Z(se,ee,le){Q.spatialReference=ee.spatialReference;const ne=se.hasM&&!se.hasZ;for(let ce=0;ce<se.points.length;ce++){const de=se.points[ce],me=ee.points[ce];Q.x=me[0],Q.y=me[1],ne&&(de[3]=de[2]),de[2]=le.elevationAt(Q.x,Q.y)}se.hasZ=!0}(se,le,ee)}return se}function oe(se,ee){if((0,B.Wi)(se))return null;const le=se.spatialReference;if(le.equals(ee))return se;const ne=(0,Y.iV)(se,ee);return ne||G.error(`Cannot project geometry spatial reference (wkid:${le.wkid}) to elevation sampler spatial reference (wkid:${ee.wkid})`),ne}const Q=new H.Z,J={remove(){}}},14772:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>ie});var D=T(17626),x=T(14517),w=T(80542),B=T(62208),U=T(95737),W=T(77712),$=(T(85931),T(8314),T(90912),T(76898)),re=T(13812),ue=T(59990),ae=T(13410);const oe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let ie=class extends((0,w.p)(x.Z)){constructor(X){super(X),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const X=this.visibleSublayers.map(Z=>{const Q=(0,ue.f)(this.floors,Z);return Z.toExportImageJSON(Q)});return X.length?JSON.stringify(X):null}get hasDynamicLayers(){return this.layer&&(0,ae.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(X){this._get("layer")!==X&&(this._set("layer",X),this.handles.remove("layer"),X&&this.handles.add([X.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),X.on("sublayer-update",Z=>this.notifyChange(oe[Z.propertyName]))],"layer"))}get layers(){const X=this.visibleSublayers;return X?X.length?"show:"+X.map(Z=>Z.id).join(","):"show:-1":null}get layerDefs(){const X=!!this.floors?.length,Z=this.visibleSublayers.filter(Q=>null!=Q.definitionExpression||X&&null!=Q.floorInfo);return Z.length?JSON.stringify(Z.reduce((Q,J)=>{const se=(0,ue.f)(this.floors,J),ee=(0,U._)(se,J.definitionExpression);return(0,B.pC)(ee)&&(Q[J.id]=ee),Q},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const X=this.layer;return X&&(X.commitProperty("dpi"),X.commitProperty("imageFormat"),X.commitProperty("imageTransparency"),X.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const X=[];if(!this.layer)return X;const Z=this.layer.sublayers,Q=se=>{const ee=this.scale;se.visible&&(0===ee||(0===se.minScale||ee<=se.minScale)&&(0===se.maxScale||ee>=se.maxScale))&&(se.sublayers?se.sublayers.forEach(Q):X.unshift(se))};Z&&Z.forEach(Q);const J=this._get("visibleSublayers");return!J||J.length!==X.length||J.some((se,ee)=>X[ee]!==se)?X:J}toJSON(){const X=this.layer;let Z={dpi:X.dpi,format:X.imageFormat,transparent:X.imageTransparency,gdbVersion:X.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?Z.dynamicLayers=this.dynamicLayers:Z={...Z,layers:this.layers,layerDefs:this.layerDefs},Z}};(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"dynamicLayers",null),(0,D._)([(0,W.Cb)()],ie.prototype,"floors",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"hasDynamicLayers",null),(0,D._)([(0,W.Cb)()],ie.prototype,"layer",null),(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"layers",null),(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"layerDefs",null),(0,D._)([(0,W.Cb)({type:Number})],ie.prototype,"scale",void 0),(0,D._)([(0,W.Cb)(re.qG)],ie.prototype,"timeExtent",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"version",null),(0,D._)([(0,W.Cb)({readOnly:!0})],ie.prototype,"visibleSublayers",null),ie=(0,D._)([(0,$.j)("esri.layers.mixins.ExportImageParameters")],ie)},2319:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Q});var ae,D=T(17626),x=T(26584),w=T(86810),B=T(62208),U=T(94113),W=T(77712),$=(T(85931),T(8314),T(90912),T(76898)),re=T(71149),ue=T(98624);const oe={read:{reader:re.ij},write:{writer:re.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},ie={read:{reader:re.ij},write:{writer:re.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},X={name:"showExcludedLabels",default:!0};let Z=ae=class extends w.wq{constructor(J){super(J),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(J,se){const ee=super.write(J,se);if(se?.origin){if(ee.filter){const le=Object.keys(ee.filter);if(le.length>1||"where"!==le[0])return se.messages?.push(new x.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:se.layer,effect:this})),null}if("showExcludedLabels"in ee)return se.messages?.push(new x.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:se.layer,effect:this})),null}return ee}clone(){return new ae({filter:(0,B.pC)(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,D._)([(0,W.Cb)({type:ue.Z,json:{write:{allowNull:!0,writer(J,se,ee,le){const ne=J?.write({},le);ne&&0!==Object.keys(ne).length?(0,U.RB)(ee,ne,se):(0,U.RB)(ee,null,se)}}}})],Z.prototype,"filter",void 0),(0,D._)([(0,W.Cb)({json:{write:!0,origins:{"web-map":oe,"portal-item":oe}}})],Z.prototype,"includedEffect",void 0),(0,D._)([(0,W.Cb)({json:{write:!0,origins:{"web-map":ie,"portal-item":ie}}})],Z.prototype,"excludedEffect",void 0),(0,D._)([(0,W.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":X,"portal-item":X}}})],Z.prototype,"excludedLabelsVisible",void 0),Z=ae=(0,D._)([(0,$.j)("esri.layers.support.FeatureEffect")],Z);const Q=Z},98624:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ue,D=T(17626),x=T(29132),w=T(97478),B=T(2076),U=T(86810),W=T(58817),Y=T(62208),H=T(77712),$=(T(90912),T(76898)),re=T(84952);const ae=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),oe=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ie=ue=class extends U.wq{constructor(Z){super(Z),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(Z={}){const{where:Q,geometry:J,spatialRelationship:se,timeExtent:ee,objectIds:le,units:ne,distance:ce}=this;return new re.Z({geometry:(0,W.d9)(J),objectIds:(0,W.d9)(le),spatialRelationship:se,timeExtent:(0,W.d9)(ee),where:Q,units:ne,distance:ce,...Z})}clone(){const{where:Z,geometry:Q,spatialRelationship:J,timeExtent:se,objectIds:ee,units:le,distance:ne}=this;return new ue({geometry:(0,W.d9)(Q),objectIds:(0,W.d9)(ee),spatialRelationship:J,timeExtent:(0,W.d9)(se),where:Z,units:le,distance:ne})}};(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ie.prototype,"where",void 0),(0,D._)([(0,H.Cb)({types:x.qM,json:{write:!0}})],ie.prototype,"geometry",void 0),(0,D._)([(0,H.Cb)({type:ae.apiValues,json:{name:"spatialRel",read:{reader:ae.read},write:{allowNull:!1,writer:ae.write,overridePolicy(){return{enabled:(0,Y.pC)(this.geometry)}}}}})],ie.prototype,"spatialRelationship",void 0),(0,D._)([(0,H.Cb)({type:Number,json:{write:{overridePolicy(Z){return{enabled:null!=Z&&null!=this.geometry}}}}})],ie.prototype,"distance",void 0),(0,D._)([(0,H.Cb)({type:[Number],json:{write:!0}})],ie.prototype,"objectIds",void 0),(0,D._)([(0,H.Cb)({type:oe.apiValues,json:{read:oe.read,write:{writer:oe.write,overridePolicy(Z){return{enabled:null!=Z&&null!=this.geometry}}}}})],ie.prototype,"units",void 0),(0,D._)([(0,H.Cb)({type:w.Z,json:{write:!0}})],ie.prototype,"timeExtent",void 0),ie=ue=(0,D._)([(0,$.j)("esri.layers.support.FeatureFilter")],ie);const X=ie},83989:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>H});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor(){super(...arguments),this.type=null}};(0,D._)([(0,w.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.layers.support.FeatureReduction")],H)},47058:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(83989);let G=H=class extends Y.B{constructor(re){super(re),this.type="selection"}clone(){return new H}};(0,D._)([(0,x.Cb)({type:["selection"]})],G.prototype,"type",void 0),G=H=(0,D._)([(0,W.j)("esri.layers.support.FeatureReductionSelection")],G);const $=G},32777:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var D=T(17626),x=T(79608),w=T(2076),B=T(86810),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898));const $=new w.X({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let re=class extends((0,x.J)(B.wq)){constructor(ae){super(ae),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,D._)([(0,U.Cb)({json:{write:!0}})],re.prototype,"name",void 0),(0,D._)([(0,U.Cb)({json:{write:!0}})],re.prototype,"description",void 0),(0,D._)([(0,U.Cb)({json:{read:$.read,write:$.write}})],re.prototype,"drawingTool",void 0),(0,D._)([(0,U.Cb)({json:{write:!0}})],re.prototype,"prototype",void 0),(0,D._)([(0,U.Cb)({json:{write:!0}})],re.prototype,"thumbnail",void 0),re=(0,D._)([(0,G.j)("esri.layers.support.FeatureTemplate")],re);const ue=re},41638:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var D=T(17626),x=T(79608),w=T(86810),B=T(77712),H=(T(85931),T(8314),T(90912),T(68653)),G=T(76898),$=T(99433),re=T(67945),ue=T(32777);let ae=class extends((0,x.J)(w.wq)){constructor(ie){super(ie),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(ie){const X={};for(const Z of Object.keys(ie))X[Z]=(0,re.im)(ie[Z]);return X}writeDomains(ie,X){const Z={};for(const Q of Object.keys(ie))ie[Q]&&(Z[Q]=ie[Q]?.toJSON());X.domains=Z}};(0,D._)([(0,B.Cb)({json:{write:!0}})],ae.prototype,"id",void 0),(0,D._)([(0,B.Cb)({json:{write:!0}})],ae.prototype,"name",void 0),(0,D._)([(0,B.Cb)({json:{write:!0}})],ae.prototype,"domains",void 0),(0,D._)([(0,H.r)("domains")],ae.prototype,"readDomains",null),(0,D._)([(0,$.c)("domains")],ae.prototype,"writeDomains",null),(0,D._)([(0,B.Cb)({type:[ue.Z],json:{write:!0}})],ae.prototype,"templates",void 0),ae=(0,D._)([(0,G.j)("esri.layers.support.FeatureType")],ae);const oe=ae},36255:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ae,D=T(17626),x=T(2076),w=T(86810),B=T(77712),Y=(T(85931),T(8314),T(90912)),H=T(55342),G=T(68653),$=T(76898),re=T(67945),ue=T(85);const oe=new x.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let ie=ae=class extends w.wq{constructor(Z){super(Z),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(Z,{description:Q}){let J;try{J=JSON.parse(Q)}catch{}return J?J.value:null}readValueType(Z,{description:Q}){let J;try{J=JSON.parse(Q)}catch{}return J?oe.fromJSON(J.fieldValueType):null}clone(){return new ae({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ie.prototype,"alias",void 0),(0,D._)([(0,B.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],ie.prototype,"defaultValue",void 0),(0,D._)([(0,B.Cb)()],ie.prototype,"description",void 0),(0,D._)([(0,G.r)("description")],ie.prototype,"readDescription",null),(0,D._)([(0,B.Cb)({types:re.V5,json:{read:{reader:re.im},write:!0}})],ie.prototype,"domain",void 0),(0,D._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],ie.prototype,"editable",void 0),(0,D._)([(0,B.Cb)({type:Y.z8,json:{write:!0}})],ie.prototype,"length",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ie.prototype,"name",void 0),(0,D._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],ie.prototype,"nullable",void 0),(0,D._)([(0,H.J)(ue.v)],ie.prototype,"type",void 0),(0,D._)([(0,B.Cb)()],ie.prototype,"valueType",void 0),(0,D._)([(0,G.r)("valueType",["description"])],ie.prototype,"readValueType",null),ie=ae=(0,D._)([(0,$.j)("esri.layers.support.Field")],ie);const X=ie},60466:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>U});var D=T(36630);function w(Y){return"oid"===Y.type||"esriFieldTypeOID"===Y.type}function B(Y){return"global-id"===Y.type||"esriFieldTypeGlobalID"===Y.type}class U{constructor(H){if(this.fields=H,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!H)return;const G=[];for(const $ of H){const re=$&&$.name;if(re){const ue=W(re);this._fieldsMap.set(re,$),this._fieldsMap.set(ue,$),G.push(ue),"date"===(Y=$).type||"esriFieldTypeDate"===Y.type?(this.dateFields.push($),this._dateFieldsSet.add($)):(0,D.H7)($)&&(this._numericFieldsSet.add($),this.numericFields.push($)),w($)||B($)||($.editable=null==$.editable||!!$.editable,$.nullable=null==$.nullable||!!$.nullable)}}var Y;G.sort(),this.uid=G.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const H of this.fields)w(H)||B(H)||H.nullable||void 0!==(0,D.os)(H)||this._requiredFields.push(H)}return this._requiredFields}has(H){return null!=this.get(H)}get(H){return null!=H?this._fieldsMap.get(H)||this._fieldsMap.get(W(H)):void 0}isDateField(H){return this._dateFieldsSet.has(this.get(H))}isNumericField(H){return this._numericFieldsSet.has(this.get(H))}normalizeFieldName(H){const G=this.get(H);if(G)return G.name}}function W(Y){return Y.toLowerCase().trim()}},90336:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),Y=(T(63290),T(90912),T(85931),T(8314),T(82255),T(55342)),H=T(76898),G=T(50028);let re=$=class extends G.Z{constructor(ae){super(ae),this.type="inherited"}clone(){return new $}};(0,D._)([(0,Y.J)({inherited:"inherited"})],re.prototype,"type",void 0),re=$=(0,D._)([(0,H.j)("esri.layers.support.InheritedDomain")],re);const ue=re},72258:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(86810),w=T(77712),W=(T(85931),T(8314),T(90912)),Y=T(76898);let G=H=class extends x.wq{constructor(re){super(re),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new H({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,D._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],G.prototype,"cols",void 0),(0,D._)([(0,w.Cb)({type:W.z8,json:{write:!0}})],G.prototype,"level",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"levelValue",void 0),(0,D._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],G.prototype,"origin",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],G.prototype,"resolution",void 0),(0,D._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],G.prototype,"rows",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],G.prototype,"scale",void 0),G=H=(0,D._)([(0,Y.j)("esri.layers.support.LOD")],G);const $=G},170:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>_e});var ie,D=T(17626),x=T(20383),w=T(2076),B=T(86810),U=T(58817),W=T(23841),Y=T(77712),G=(T(90912),T(68653)),$=T(76898),re=T(99433),oe=(T(85931),T(8314),T(86793));let X=ie=class extends B.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(he,ye){return ye.value?(0,oe.dI)(ye.value):he}writeExpression(he,ye,fe){null!=this.value&&(he=(0,oe.dI)(this.value)),null!=he&&(ye[fe]=he)}clone(){return new ie({expression:this.expression,title:this.title,value:this.value})}};(0,D._)([(0,Y.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],X.prototype,"expression",void 0),(0,D._)([(0,G.r)("expression",["expression","value"])],X.prototype,"readExpression",null),(0,D._)([(0,re.c)("expression")],X.prototype,"writeExpression",null),(0,D._)([(0,Y.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],X.prototype,"title",void 0),(0,D._)([(0,Y.Cb)({json:{read:!1,write:!1}})],X.prototype,"value",void 0),X=ie=(0,D._)([(0,$.j)("esri.layers.support.LabelExpressionInfo")],X);const Z=X;var se,Q=T(8080),J=T(9461);const ee=new w.X({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function le(he){return!he||"service"!==he.origin&&"map-image"!==he.layer?.type}function ce(he){return!!function ne(he){return"map-image"===he?.type}(he)&&!!he.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}let me=se=class extends B.wq{constructor(he){super(he),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Q.Rz,this.useCodedValues=void 0,this.where=null}static evaluateWhere(he,ye){const fe=(De,ve,Ce)=>{switch(ve){case"=":return De==Ce;case"<>":return De!=Ce;case">":return De>Ce;case">=":return De>=Ce;case"<":return De<Ce;case"<=":return De<=Ce}return!1};try{if(null==he)return!0;const De=he.split(" ");if(3===De.length)return fe(ye[De[0]],De[1],De[2]);if(7===De.length){const ve=fe(ye[De[0]],De[1],De[2]),Ce=De[3],ge=fe(ye[De[4]],De[5],De[6]);switch(Ce){case"AND":return ve&&ge;case"OR":return ve||ge}}return!1}catch{console.log("Error.: can't parse = "+he)}}readLabelExpression(he,ye){const fe=ye.labelExpressionInfo;if(!fe||!fe.value&&!fe.expression)return he}writeLabelExpression(he,ye,fe){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)he=(0,oe.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const De=(0,oe.el)(this.labelExpressionInfo.expression);De&&(he="["+De+"]")}null!=he&&(ye[fe]=he)}writeLabelExpressionInfo(he,ye,fe,De){if(null==he&&null!=this.labelExpression&&le(De))he=new Z({expression:this.getLabelExpressionArcade()});else if(!he)return;const ve=he.toJSON(De);ve.expression&&(ye[fe]=ve)}writeMaxScale(he,ye){(he||this.minScale)&&(ye.maxScale=he)}writeMinScale(he,ye){(he||this.maxScale)&&(ye.minScale=he)}getLabelExpression(){return(0,oe.hV)(this)}getLabelExpressionArcade(){return(0,oe.YI)(this)}getLabelExpressionSingleField(){return(0,oe.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new se({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,U.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,U.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,D._)([(0,Y.Cb)({type:String,json:{write:!0}})],me.prototype,"name",void 0),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],me.prototype,"allowOverrun",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],me.prototype,"deconflictionStrategy",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:{overridePolicy(he,ye,fe){return this.labelExpressionInfo&&"service"===fe?.origin&&ce(fe.layer)?{enabled:!1}:{allowNull:!0}}}}})],me.prototype,"labelExpression",void 0),(0,D._)([(0,G.r)("labelExpression")],me.prototype,"readLabelExpression",null),(0,D._)([(0,re.c)("labelExpression")],me.prototype,"writeLabelExpression",null),(0,D._)([(0,Y.Cb)({type:Z,json:{write:{overridePolicy:(he,ye,fe)=>function de(he){return le(he)||ce(he.layer)}(fe)?{allowNull:!0}:{enabled:!1}}}})],me.prototype,"labelExpressionInfo",void 0),(0,D._)([(0,re.c)("labelExpressionInfo")],me.prototype,"writeLabelExpressionInfo",null),(0,D._)([(0,Y.Cb)({type:ee.apiValues,json:{type:ee.jsonValues,read:ee.read,write:ee.write}})],me.prototype,"labelPlacement",void 0),(0,D._)([(0,Y.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],me.prototype,"labelPosition",void 0),(0,D._)([(0,Y.Cb)({type:Number})],me.prototype,"maxScale",void 0),(0,D._)([(0,re.c)("maxScale")],me.prototype,"writeMaxScale",null),(0,D._)([(0,Y.Cb)({type:Number})],me.prototype,"minScale",void 0),(0,D._)([(0,re.c)("minScale")],me.prototype,"writeMinScale",null),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],me.prototype,"repeatLabel",void 0),(0,D._)([(0,Y.Cb)({type:Number,cast:W.t_,json:{write:!0,origins:{"web-scene":{write:!1}}}})],me.prototype,"repeatLabelDistance",void 0),(0,D._)([(0,Y.Cb)({types:x.yK,json:{origins:{"web-scene":{types:x.S6,write:J.vX,default:null}},write:J.vX,default:null}})],me.prototype,"symbol",void 0),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],me.prototype,"useCodedValues",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:!0}})],me.prototype,"where",void 0),me=se=(0,D._)([(0,$.j)("esri.layers.support.LabelClass")],me);const _e=me},2430:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(46160),w=T(86810),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898));let $=G=class extends w.wq{constructor(ue){super(ue),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new x.Z}clone(){return new G({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],$.prototype,"floorField",void 0),(0,D._)([(0,B.Cb)({json:{read:!1,write:!1}})],$.prototype,"viewAllMode",void 0),(0,D._)([(0,B.Cb)({json:{read:!1,write:!1}})],$.prototype,"viewAllLevelIds",void 0),$=G=(0,D._)([(0,H.j)("esri.layers.support.LayerFloorInfo")],$);const re=$},36596:(qe,xe,T)=>{"use strict";T.d(xe,{w:()=>U});var D=T(62208),x=T(42930);class w extends x.q{constructor(Y=null){super("LercWorker","_decode",{_decode:H=>[H.buffer]},Y,{strategy:"dedicated"}),this.schedule=Y,this.ref=0}decode(Y,H,G){return Y&&0!==Y.byteLength?this.invoke({buffer:Y,options:H},G):Promise.resolve(null)}release(){--this.ref<=0&&(B.forEach((Y,H)=>{Y===this&&B.delete(H)}),this.destroy())}}const B=new Map;function U(W=null){let Y=B.get((0,D.Wg)(W));return Y||((0,D.pC)(W)?(Y=new w(H=>W.schedule(H)),B.set(W,Y)):(Y=new w,B.set(null,Y))),++Y.ref,Y}},41291:(qe,xe,T)=>{"use strict";T.d(xe,{b:()=>G});var D=T(17626),x=T(14517),w=T(10699),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898));let G=class extends x.Z{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(re){for(;!re.done&&this._process(re);)re.madeProgress()}push(re,ue,ae){return this.running=!0,new Promise((oe,ie)=>this._tasks.push(new $(oe,ie,re,ue,ae)))}unshift(re,ue,ae){return this.running=!0,new Promise((oe,ie)=>this._tasks.unshift(new $(oe,ie,re,ue,ae)))}_process(re){if(0===this._tasks.length)return!1;const ue=this._tasks.shift();try{const ae=(0,w.Hc)(ue.signal);if(ae&&!ue.abortCallback)ue.reject((0,w.zE)());else{const oe=ae?ue.abortCallback((0,w.zE)()):ue.callback(re);(0,w.y8)(oe)?oe.then(ue.resolve,ue.reject):ue.resolve(oe)}}catch(ae){ue.reject(ae)}return this.running=this._tasks.length>0,!0}cancelAll(){const re=(0,w.zE)();for(const ue of this._tasks)if(ue.abortCallback){const ae=ue.abortCallback(re);ue.resolve(ae)}else ue.reject(re);this._tasks.length=0,this.running=!1}};(0,D._)([(0,B.Cb)()],G.prototype,"running",void 0),G=(0,D._)([(0,H.j)("esri.layers.support.PromiseQueue")],G);class ${constructor(ue,ae,oe,ie,X){this.resolve=ue,this.reject=ae,this.callback=oe,this.signal=ie,this.abortCallback=X}}},68155:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(55342)),Y=T(76898),H=T(50028);let $=G=class extends H.Z{constructor(ue){super(ue),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new G({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,D._)([(0,x.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ue,ae)=>ae.range&&ae.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(ue,ae,oe){ae[oe]=[this.minValue||0,ue]}}}})],$.prototype,"maxValue",void 0),(0,D._)([(0,x.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ue,ae)=>ae.range&&ae.range[0]},write:{target:"range",writer(ue,ae,oe){ae[oe]=[ue,this.maxValue||0]}}}})],$.prototype,"minValue",void 0),(0,D._)([(0,W.J)({range:"range"})],$.prototype,"type",void 0),$=G=(0,D._)([(0,Y.j)("esri.layers.support.RangeDomain")],$);const re=$},2584:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>le});var J,D=T(17626),x=T(2076),w=T(86810),B=T(62208),U=T(16730),W=T(77712),G=(T(85931),T(8314),T(90912)),$=T(68653),re=T(76898),ue=T(99433),ae=T(49672),oe=T(65234),ie=T(65401),X=T(37053),Z=T(46367),Q=T(72258);const se=new x.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let ee=J=class extends w.wq{constructor(ne){super(ne),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(ne={}){const{resolutionFactor:ce=1,scales:de,size:me=256,spatialReference:_e=oe.Z.WebMercator,numLODs:he=24}=ne;if(!(0,X.JY)(_e)){const ge=[];if(de)for(let Te=0;Te<de.length;Te++){const Le=de[Te];ge.push({level:Te,scale:Le,resolution:Le})}else{let Te=5e-4;for(let Le=he-1;Le>=0;Le--)ge.unshift({level:Le,scale:Te,resolution:Te}),Te*=2}return new J({dpi:96,lods:ge,origin:new ae.Z(0,0,_e),size:[me,me],spatialReference:_e})}const ye=(0,X.C5)(_e),fe=new ae.Z(ne.origin?{x:ne.origin.x,y:ne.origin.y,spatialReference:_e}:ye?{x:ye.origin[0],y:ye.origin[1],spatialReference:_e}:{x:0,y:0,spatialReference:_e}),ve=1/(39.37*(0,U.c9)(_e)*96),Ce=[];if(de)for(let ge=0;ge<de.length;ge++){const Te=de[ge];Ce.push({level:ge,scale:Te,resolution:Te*ve})}else{let ge=(0,X.sT)(_e)?512/me*591657527.5917094:256/me*591657527.591555;const Te=Math.ceil(he/ce);Ce.push({level:0,scale:ge,resolution:ge*ve});for(let Le=1;Le<Te;Le++){const je=ge/2**ce;Ce.push({level:Le,scale:je,resolution:je*ve}),ge=je}}return new J({dpi:96,lods:Ce,origin:fe,size:[me,me],spatialReference:_e})}get isWrappable(){const{spatialReference:ne,origin:ce}=this;if(ne&&ce){const de=(0,X.C5)(ne);return ne.isWrappable&&Math.abs(de.origin[0]-ce.x)<=de.dx}return!1}readOrigin(ne,ce){return ae.Z.fromJSON({spatialReference:ce.spatialReference,...ne})}set lods(ne){let ce=0,de=0;const me=[];this._levelToLOD={},ne&&(ce=-1/0,de=1/0,ne.forEach(_e=>{me.push(_e.scale),ce=_e.scale>ce?_e.scale:ce,de=_e.scale<de?_e.scale:de,this._levelToLOD[_e.level]=_e})),this._set("scales",me),this._set("minScale",ce),this._set("maxScale",de),this._set("lods",ne),this._initializeUpsampleLevels()}readSize(ne,ce){return[ce.cols,ce.rows]}writeSize(ne,ce){ce.cols=ne[0],ce.rows=ne[1]}zoomToScale(ne){const ce=this.scales;if(ne<=0)return ce[0];if(ne>=ce.length-1)return ce[ce.length-1];{const de=Math.floor(ne);return ce[de]/(ce[de]/ce[de+1])**(ne-de)}}scaleToZoom(ne){const ce=this.scales,de=ce.length-1;let me=0;for(;me<de;me++){const _e=ce[me],he=ce[me+1];if(_e<=ne)return me;if(he===ne)return me+1;if(_e>ne&&he<ne)return me+Math.log(_e/ne)/Math.log(_e/he)}return me}snapScale(ne,ce=.95){const de=this.scaleToZoom(ne);return de%Math.floor(de)>=ce?this.zoomToScale(Math.ceil(de)):this.zoomToScale(Math.floor(de))}tileAt(ne,ce,de,me){const _e=this.lodAt(ne);if(!_e)return null;let he,ye;if("number"==typeof ce)he=ce,ye=de;else if((0,X.fS)(ce.spatialReference,this.spatialReference))he=ce.x,ye=ce.y,me=de;else{const ve=(0,Z.iV)(ce,this.spatialReference);if((0,B.Wi)(ve))return null;he=ve.x,ye=ve.y,me=de}const fe=_e.resolution*this.size[0],De=_e.resolution*this.size[1];return me||(me={id:null,level:0,row:0,col:0,extent:(0,ie.Ue)()}),me.level=ne,me.row=Math.floor((this.origin.y-ye)/De+.001),me.col=Math.floor((he-this.origin.x)/fe+.001),this.updateTileInfo(me),me}updateTileInfo(ne,ce=J.ExtrapolateOptions.NONE){let de=this.lodAt(ne.level);if(!de&&ce===J.ExtrapolateOptions.POWER_OF_TWO){const ye=this.lods[this.lods.length-1];ye.level<ne.level&&(de=ye)}if(!de)return;const me=ne.level-de.level,_e=de.resolution*this.size[0]/2**me,he=de.resolution*this.size[1]/2**me;ne.id=`${ne.level}/${ne.row}/${ne.col}`,ne.extent||(ne.extent=(0,ie.Ue)()),ne.extent[0]=this.origin.x+ne.col*_e,ne.extent[1]=this.origin.y-(ne.row+1)*he,ne.extent[2]=ne.extent[0]+_e,ne.extent[3]=ne.extent[1]+he}upsampleTile(ne){const ce=this._upsampleLevels[ne.level];return!(!ce||-1===ce.parentLevel||(ne.level=ce.parentLevel,ne.row=Math.floor(ne.row/ce.factor+.001),ne.col=Math.floor(ne.col/ce.factor+.001),this.updateTileInfo(ne),0))}getTileBounds(ne,ce){const{resolution:de}=this.lodAt(ce.level),me=de*this.size[0],_e=de*this.size[1];return ne[0]=this.origin.x+ce.col*me,ne[1]=this.origin.y-(ce.row+1)*_e,ne[2]=ne[0]+me,ne[3]=ne[1]+_e,ne}lodAt(ne){return this._levelToLOD&&this._levelToLOD[ne]||null}clone(){return J.fromJSON(this.write({}))}getOrCreateCompatible(ne,ce){if(256===this.size[0]&&256===this.size[1])return 256===ne?this:null;const de=[],me=this.lods.length;for(let _e=0;_e<me;_e++){const he=this.lods[_e];de.push(new Q.Z({level:he.level,scale:he.scale,resolution:he.resolution*ce}))}return new J({size:[ne,ne],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:de})}_initializeUpsampleLevels(){const ne=this.lods;this._upsampleLevels=[];let ce=null;for(let de=0;de<ne.length;de++){const me=ne[de];this._upsampleLevels[me.level]={parentLevel:ce?ce.level:-1,factor:ce?ce.resolution/me.resolution:0},ce=me}}};var ne,ce;(0,D._)([(0,W.Cb)({type:Number,json:{write:!0}})],ee.prototype,"compressionQuality",void 0),(0,D._)([(0,W.Cb)({type:Number,json:{write:!0}})],ee.prototype,"dpi",void 0),(0,D._)([(0,W.Cb)({type:String,json:{read:se.read,write:se.write,origins:{"web-scene":{read:!1,write:!1}}}})],ee.prototype,"format",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],ee.prototype,"isWrappable",null),(0,D._)([(0,W.Cb)({type:ae.Z,json:{write:!0}})],ee.prototype,"origin",void 0),(0,D._)([(0,$.r)("origin")],ee.prototype,"readOrigin",null),(0,D._)([(0,W.Cb)({type:[Q.Z],value:null,json:{write:!0}})],ee.prototype,"lods",null),(0,D._)([(0,W.Cb)({readOnly:!0})],ee.prototype,"minScale",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],ee.prototype,"maxScale",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],ee.prototype,"scales",void 0),(0,D._)([(0,W.Cb)({cast:ne=>Array.isArray(ne)?ne:"number"==typeof ne?[ne,ne]:[256,256]})],ee.prototype,"size",void 0),(0,D._)([(0,$.r)("size",["rows","cols"])],ee.prototype,"readSize",null),(0,D._)([(0,ue.c)("size",{cols:{type:G.z8},rows:{type:G.z8}})],ee.prototype,"writeSize",null),(0,D._)([(0,W.Cb)({type:oe.Z,json:{write:!0}})],ee.prototype,"spatialReference",void 0),ee=J=(0,D._)([(0,re.j)("esri.layers.support.TileInfo")],ee),(ce=(ne=ee||(ee={})).ExtrapolateOptions||(ne.ExtrapolateOptions={}))[ce.NONE=0]="NONE",ce[ce.POWER_OF_TWO=1]="POWER_OF_TWO";const le=ee},62708:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>se});var oe,D=T(17626),x=T(97478),w=T(20849),B=T(86810),U=T(58817),W=T(62208),Y=T(77712),G=(T(90912),T(68653)),$=T(76898),re=T(99433);T(85931),T(8314);let ie=oe=class extends B.wq{constructor(ee){super(ee),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(ee,le){return void 0!==le.respectsDaylightSaving?le.respectsDaylightSaving:void 0!==le.respectDaylightSaving&&le.respectDaylightSaving}clone(){const{respectsDaylightSaving:ee,timezone:le}=this;return new oe({respectsDaylightSaving:ee,timezone:le})}};(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],ie.prototype,"respectsDaylightSaving",void 0),(0,D._)([(0,G.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],ie.prototype,"readRespectsDaylightSaving",null),(0,D._)([(0,Y.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],ie.prototype,"timezone",void 0),ie=oe=(0,D._)([(0,$.j)("esri.layers.support.TimeReference")],ie);const X=ie;var Q,Z=T(58926);let J=Q=class extends B.wq{constructor(ee){super(ee),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(ee,le){if(!le.timeExtent||!Array.isArray(le.timeExtent)||2!==le.timeExtent.length)return null;const ne=new Date(le.timeExtent[0]),ce=new Date(le.timeExtent[1]);return new x.Z({start:ne,end:ce})}writeFullTimeExtent(ee,le){le.timeExtent=ee&&(0,W.pC)(ee.start)&&(0,W.pC)(ee.end)?[ee.start.getTime(),ee.end.getTime()]:null}readInterval(ee,le){return le.timeInterval&&le.timeIntervalUnits?new w.Z({value:le.timeInterval,unit:Z.v.fromJSON(le.timeIntervalUnits)}):le.defaultTimeInterval&&le.defaultTimeIntervalUnits?new w.Z({value:le.defaultTimeInterval,unit:Z.v.fromJSON(le.defaultTimeIntervalUnits)}):null}writeInterval(ee,le){if(ee){const ne=ee.toJSON();le.timeInterval=ne.value,le.timeIntervalUnits=ne.unit}else le.timeInterval=null,le.timeIntervalUnits=null}clone(){const{cumulative:ee,endField:le,hasLiveData:ne,interval:ce,startField:de,timeReference:me,fullTimeExtent:_e,trackIdField:he,useTime:ye}=this;return new Q({cumulative:ee,endField:le,hasLiveData:ne,interval:ce,startField:de,timeReference:(0,U.d9)(me),fullTimeExtent:(0,U.d9)(_e),trackIdField:he,useTime:ye})}};(0,D._)([(0,Y.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],J.prototype,"cumulative",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],J.prototype,"endField",void 0),(0,D._)([(0,Y.Cb)({type:x.Z,json:{write:{enabled:!0,allowNull:!0}}})],J.prototype,"fullTimeExtent",void 0),(0,D._)([(0,G.r)("fullTimeExtent",["timeExtent"])],J.prototype,"readFullTimeExtent",null),(0,D._)([(0,re.c)("fullTimeExtent")],J.prototype,"writeFullTimeExtent",null),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],J.prototype,"hasLiveData",void 0),(0,D._)([(0,Y.Cb)({type:w.Z,json:{write:{enabled:!0,allowNull:!0}}})],J.prototype,"interval",void 0),(0,D._)([(0,G.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],J.prototype,"readInterval",null),(0,D._)([(0,re.c)("interval")],J.prototype,"writeInterval",null),(0,D._)([(0,Y.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],J.prototype,"startField",void 0),(0,D._)([(0,Y.Cb)({type:X,json:{write:{enabled:!0,allowNull:!0}}})],J.prototype,"timeReference",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],J.prototype,"trackIdField",void 0),(0,D._)([(0,Y.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],J.prototype,"useTime",void 0),J=Q=(0,D._)([(0,$.j)("esri.layers.support.TimeInfo")],J);const se=J},38305:(qe,xe,T)=>{"use strict";T.d(xe,{B5:()=>G,DR:()=>re,G:()=>J,M8:()=>oe,Nm:()=>X,Qc:()=>$,XG:()=>Z,a7:()=>ae,ld:()=>ue,wH:()=>Q});var D=T(62208),x=T(21726),w=T(29840);const B={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},U=Object.values(B),W=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${U.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Y=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${U.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),H=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function G(le){return!!W.test(le)}function $(le){if((0,D.Wi)(le))return null;const ne=(0,x.mN)(le),ce=ne.path.match(W)||ne.path.match(Y);if(!ce)return null;const[,de,me,_e,he]=ce,ye=me.indexOf("/");return{title:ue(-1!==ye?me.slice(ye+1):me),serverType:B[_e.toLowerCase()],sublayer:null!=he&&""!==he?parseInt(he,10):null,url:{path:de}}}function re(le){const ne=(0,x.mN)(le).path.match(H);return ne?{serviceUrl:ne[1],sublayerId:Number(ne[2])}:null}function ue(le){return(le=le.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+le.slice(1)}function ae(le,ne){const ce=[];if(le){const de=$(le);(0,D.pC)(de)&&de.title&&ce.push(de.title)}if(ne){const de=ue(ne);ce.push(de)}if(2===ce.length){if(ce[0].toLowerCase().includes(ce[1].toLowerCase()))return ce[0];if(ce[1].toLowerCase().includes(ce[0].toLowerCase()))return ce[1]}return ce.join(" - ")}function oe(le){if(!le)return!1;const _e=(le=le.toLowerCase()).includes(".arcgis.com/"),he=le.includes("//services")||le.includes("//tiles")||le.includes("//features");return _e&&he}function X(le,ne){return le&&(0,x.Qj)((0,x.Hu)(le,ne))}function Z(le){let{url:ne}=le;if(!ne)return{url:ne};ne=(0,x.Hu)(ne,le.logger);const ce=(0,x.mN)(ne),de=$(ce.path);let me;if((0,D.pC)(de))null!=de.sublayer&&null==le.layer.layerId&&(me=de.sublayer),ne=de.url.path;else if(le.nonStandardUrlAllowed){const _e=re(ce.path);(0,D.pC)(_e)&&(ne=_e.serviceUrl,me=_e.sublayerId)}return{url:(0,x.Qj)(ne),layerId:me}}function Q(le,ne,ce,de,me){(0,w.w)(ne,de,"url",me),de.url&&null!=le.layerId&&(de.url=(0,x.v_)(de.url,ce,le.layerId.toString()))}function J(le){if(!le)return!1;const ne=le.toLowerCase(),ce=ne.includes("/services/"),de=ne.includes("/mapserver/wmsserver"),me=ne.includes("/imageserver/wmsserver"),_e=ne.includes("/wmsserver");return ce&&(de||me||_e)}},13812:(qe,xe,T)=>{"use strict";T.d(xe,{qG:()=>ce,PV:()=>se,id:()=>me,iR:()=>Z,rn:()=>J,rT:()=>ye,u1:()=>he,rO:()=>_e,Oh:()=>le,bT:()=>ne,C_:()=>X,Lx:()=>ee,vg:()=>de,YI:()=>ie,HQ:()=>Q});var D=T(97478),x=T(2004),w=T(65234),B=T(29840),U=T(62208),Y=(T(10699),T(28170)),ae=T(82706),oe=T(92236);const ie={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},X={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(fe,De)=>!De.disablePopup},write:{enabled:!0,writer(fe,De,ve){De[ve]=!fe}}}},Z={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},Q={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:B.w}}},J={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},se={value:null,type:ae.ZP,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function ee(fe){return{type:fe,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const le={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},ne={...le,json:{...le.json,origins:{"web-document":{...le.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(fe,De,ve)=>ve&&"service"!==ve.origin||!De.drawingInfo||void 0===De.drawingInfo.transparency?De.layerDefinition&&De.layerDefinition.drawingInfo&&void 0!==De.layerDefinition.drawingInfo.transparency?(0,oe.b)(De.layerDefinition.drawingInfo.transparency):void 0:(0,oe.b)(De.drawingInfo.transparency)}}},ce={type:D.Z,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:fe,timeOffset:De,useViewTime:ve}=this.layer,Ce=this.view?.timeExtent;let ge=this.layer.timeExtent;fe&&(ge=function ue(fe){if(!fe)return fe;const{start:De,end:ve}=fe;return new D.Z({start:(0,U.pC)(De)?(0,Y.Nm)(De,De.getTimezoneOffset(),"minutes"):De,end:(0,U.pC)(ve)?(0,Y.Nm)(ve,ve.getTimezoneOffset(),"minutes"):ve})}(ge));let Te=ve?Ce&&ge?Ce.intersection(ge):Ce||ge:ge;if(!Te||Te.isEmpty||Te.isAllTime)return Te;De&&(Te=Te.offset(-De.value,De.unit)),fe&&(Te=function re(fe){if(!fe)return fe;const{start:De,end:ve}=fe;return new D.Z({start:(0,U.pC)(De)?(0,Y.Nm)(De,-De.getTimezoneOffset(),"minutes"):De,end:(0,U.pC)(ve)?(0,Y.Nm)(ve,-ve.getTimezoneOffset(),"minutes"):ve})}(Te));const Le=this._get("timeExtent");return Te.equals(Le)?Le:Te}},de={type:x.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(fe,De)=>{const ve=x.Z.fromJSON(fe);return null!=De.spatialReference&&"object"==typeof De.spatialReference&&(ve.spatialReference=w.Z.fromJSON(De.spatialReference)),ve}}}},read:!1}},me={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},_e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},he={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},ye={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}}},67945:(qe,xe,T)=>{"use strict";T.d(xe,{V5:()=>W,im:()=>Y}),T(8314);var x=T(26036),w=T(50028),B=T(90336),U=T(68155);const W={key:"type",base:w.Z,typeMap:{range:U.Z,"coded-value":x.Z,inherited:B.Z}};function Y(H){if(!H||!H.type)return null;switch(H.type){case"range":return U.Z.fromJSON(H);case"codedValue":return x.Z.fromJSON(H);case"inherited":return B.Z.fromJSON(H)}return null}},47717:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>Ae});var le,D=T(83989),x=T(17626),w=T(73281),ae=(T(4832),T(49067),T(96794),T(69747),T(40425),T(69357),T(40342),T(14726),T(33474),T(32088)),oe=T(58817),ie=T(77712),Z=(T(90912),T(55342)),Q=T(76898),J=T(86810);T(85931),T(8314);let ne=le=class extends J.wq{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new le({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ne.prototype,"statisticType",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ne.prototype,"onStatisticField",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ne.prototype,"onStatisticValueExpression",void 0),ne=le=(0,x._)([(0,Q.j)("esri.layers.support.OutStatistic")],ne);const ce=ne;var de;let me=de=class extends J.wq{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new de({name:this.name,outStatistic:this.outStatistic.clone()})}};(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],me.prototype,"name",void 0),(0,x._)([(0,ie.Cb)({type:ce,json:{write:!0}})],me.prototype,"outStatistic",void 0),me=de=(0,x._)([(0,Q.j)("esri.layers.support.AggregateField")],me);const _e=me;var fe,he=T(13812),ye=T(170);let De=fe=class extends D.B{constructor(we){super(we),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new fe({fields:(0,oe.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,oe.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:(0,oe.d9)(this.popupTemplate),renderer:(0,oe.d9)(this.renderer)})}};(0,x._)([(0,Z.J)({binning:"binning"})],De.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],De.prototype,"fixedBinLevel",void 0),(0,x._)([(0,ie.Cb)({type:[ye.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],De.prototype,"labelingInfo",void 0),(0,x._)([(0,ie.Cb)(he.iR)],De.prototype,"labelsVisible",void 0),(0,x._)([(0,ie.Cb)(he.C_)],De.prototype,"popupEnabled",void 0),(0,x._)([(0,ie.Cb)({type:w.Z,json:{name:"popupInfo",write:!0}})],De.prototype,"popupTemplate",void 0),(0,x._)([(0,ie.Cb)({type:[_e],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],De.prototype,"fields",void 0),(0,x._)([(0,ie.Cb)({types:ae.A,json:{write:!0}})],De.prototype,"renderer",void 0),De=fe=(0,x._)([(0,Q.j)("esri.layers.support.FeatureReductionBinning")],De);const ve=De;var Te,Ce=T(20383),ge=T(23841);let Le=Te=class extends J.wq{constructor(we){super(we),this.type="cluster",this.clusterRadius=(0,ge.t_)("80px"),this.clusterMinSize=(0,ge.t_)("12px"),this.clusterMaxSize=(0,ge.t_)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new Te({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,oe.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,oe.d9)(this.fields),renderer:(0,oe.d9)(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:(0,oe.d9)(this.popupTemplate)})}};(0,x._)([(0,ie.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],Le.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:Number,cast:we=>"auto"===we?we:(0,ge.t_)(we),json:{write:!0}})],Le.prototype,"clusterRadius",void 0),(0,x._)([(0,ie.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],Le.prototype,"clusterMinSize",void 0),(0,x._)([(0,ie.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],Le.prototype,"clusterMaxSize",void 0),(0,x._)([(0,ie.Cb)(he.C_)],Le.prototype,"popupEnabled",void 0),(0,x._)([(0,ie.Cb)({type:w.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Le.prototype,"popupTemplate",void 0),(0,x._)([(0,ie.Cb)({types:ae.A,json:{write:!0}})],Le.prototype,"renderer",void 0),(0,x._)([(0,ie.Cb)({types:Ce.AH})],Le.prototype,"symbol",void 0),(0,x._)([(0,ie.Cb)({type:[ye.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Le.prototype,"labelingInfo",void 0),(0,x._)([(0,ie.Cb)(he.iR)],Le.prototype,"labelsVisible",void 0),(0,x._)([(0,ie.Cb)({type:[_e],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Le.prototype,"fields",void 0),Le=Te=(0,x._)([(0,Q.j)("esri.layers.support.FeatureReductionCluster")],Le);const je=Le;var ze=T(47058);const Ee={key:"type",base:D.B,typeMap:{selection:je}},Ae={types:{key:"type",base:D.B,typeMap:{selection:ze.Z,cluster:je,binning:ve}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Ee},"portal-item":{types:Ee},"web-scene":{types:{key:"type",base:D.B,typeMap:{selection:ze.Z}}}}}}},55911:(qe,xe,T)=>{"use strict";T.d(xe,{v:()=>W});var D=T(63290),x=T(36255),w=T(60466),B=T(36630);const U=D.Z.getLogger("esri.layers.support.fieldProperties");function W(){return{fields:{type:[x.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new w.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(Y){this._userOutFields=Y,this.notifyChange("outFields")},get:function(){const Y=this._userOutFields;if(!Y||!Y.length)return null;if(Y.includes("*"))return["*"];if(!this.fields)return Y;for(const H of Y)this.fieldsIndex.has(H)||U.error("field-attributes-layer:invalid-field",`Invalid field ${H} found in outFields`,{layer:this,outFields:Y});return(0,B.Q0)(this.fieldsIndex,Y)}}}}},85:(qe,xe,T)=>{"use strict";T.d(xe,{v:()=>x});const x=new(T(2076).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},36630:(qe,xe,T)=>{"use strict";T.d(xe,{io:()=>ee,vl:()=>fe,ZV:()=>ge,AB:()=>Q,gd:()=>Z,Ll:()=>Le,Mu:()=>Ie,Qj:()=>ze,R9:()=>vr,Q0:()=>X,YN:()=>ue,UF:()=>oe,O5:()=>de,CH:()=>Oe,os:()=>$e,y2:()=>zt,H7:()=>kt,Ec:()=>ns,qN:()=>wt,Gm:()=>Kr,Pz:()=>kr,Lk:()=>J,Qc:()=>ss,vP:()=>gr});var U,lr,D=T(15861),x=T(26584),w=T(62208),B=T(94113);(lr=U||(U={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",lr.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var G=T(46679);const $=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],re=["field","normalizationField"];function ue(lr,Tr){if(null!=lr&&null!=Tr)for(const zr of Array.isArray(lr)?lr:[lr])if(ae($,zr,Tr),"visualVariables"in zr&&zr.visualVariables)for(const Tt of zr.visualVariables)ae(re,Tt,Tr)}function ae(lr,Tr,zr){if(lr)for(const Tt of lr){const sr=(0,B.hS)(Tt,Tr),Rr=sr&&"function"!=typeof sr&&zr.get(sr);Rr&&(0,B.RB)(Tt,Rr.name,Tr)}}function oe(lr,Tr){if(null!=lr&&Tr?.fields.length)if("startField"in lr){const zr=Tr.get(lr.startField),Tt=Tr.get(lr.endField);lr.startField=zr&&zr.name||null,lr.endField=Tt&&Tt.name||null}else{const zr=Tr.get(lr.startTimeField),Tt=Tr.get(lr.endTimeField);lr.startTimeField=zr&&zr.name||null,lr.endTimeField=Tt&&Tt.name||null}}const ie=new Set;function X(lr,Tr){return lr&&Tr?(ie.clear(),Z(ie,lr,Tr),Array.from(ie).sort()):[]}function Z(lr,Tr,zr){if(zr)if(Tr?.fields?.length)if(zr.includes("*"))for(const{name:Tt}of Tr.fields)lr.add(Tt);else for(const Tt of zr)Q(lr,Tr,Tt);else{if(zr.includes("*"))return lr.clear(),void lr.add("*");for(const Tt of zr)lr.add(Tt)}}function Q(lr,Tr,zr){if("string"==typeof zr)if(Tr){const Tt=Tr.get(zr);Tt&&lr.add(Tt.name)}else lr.add(zr)}function J(lr,Tr){return(0,w.Wi)(Tr)||(0,w.Wi)(lr)?[]:Tr.includes("*")?lr.fields.map(zr=>zr.name):Tr}function ee(lr,Tr,zr){return le.apply(this,arguments)}function le(){return le=(0,D.Z)(function*(lr,Tr,zr){if(!zr)return;const{arcadeUtils:Tt}=yield(0,G.LC)(),sr=Tt.extractFieldNames(zr,Tr?.fields?.map(Rr=>Rr.name));for(const Rr of sr)Q(lr,Tr,Rr)}),le.apply(this,arguments)}function ne(lr,Tr,zr){return ce.apply(this,arguments)}function ce(){return ce=(0,D.Z)(function*(lr,Tr,zr){if(zr&&"1=1"!==zr){const Tt=(yield T.e(410).then(T.bind(T,10410))).WhereClause.create(zr,Tr);if(!Tt.isStandardized)throw new x.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:zr});Z(lr,Tr,Tt.fieldNames)}}),ce.apply(this,arguments)}function de({displayField:lr,fields:Tr}){return lr||(Tr&&Tr.length?_e(Tr,"name-or-title")||_e(Tr,"unique-identifier")||_e(Tr,"type-or-category")||function me(lr){for(const Tr of lr){if(!Tr||!Tr.name)continue;const zr=Tr.name.toLowerCase();if(zr.includes("name")||zr.includes("title"))return Tr.name}return null}(Tr):null)}function _e(lr,Tr){for(const zr of lr)if(zr&&zr.valueType&&zr.valueType===Tr)return zr.name;return null}function fe(lr,Tr){return De.apply(this,arguments)}function De(){return De=(0,D.Z)(function*(lr,Tr){if(!Tr)return;const zr=(0,B.hS)("elevationInfo.featureExpressionInfo",Tr);return zr?zr.collectRequiredFields(lr,Tr.fieldsIndex):void 0}),De.apply(this,arguments)}function ve(lr,Tr,zr){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,D.Z)(function*(lr,Tr,zr){zr.outStatistic.onStatisticValueExpression?ee(lr,Tr,zr.outStatistic.onStatisticValueExpression):lr.add(zr.outStatistic.onStatisticField)}),Ce.apply(this,arguments)}function ge(lr,Tr,zr){return Te.apply(this,arguments)}function Te(){return Te=(0,D.Z)(function*(lr,Tr,zr){if(!Tr||!zr||!("fields"in zr))return;const Tt=[];if(zr.popupTemplate?.expressionInfos&&Tt.push(...zr.popupTemplate.expressionInfos.map(sr=>ee(lr,Tr.fieldsIndex,sr.expression))),Array.isArray(zr.popupTemplate?.content)){const sr=zr.popupTemplate.content;for(const Rr of sr)"expression"===Rr.type&&Rr.expressionInfo&&Tt.push(ee(lr,Tr.fieldsIndex,Rr.expressionInfo.expression))}zr.fields&&Tt.push(...zr.fields.map(sr=>ve(lr,Tr.fieldsIndex,sr))),yield Promise.all(Tt)}),Te.apply(this,arguments)}function Le(lr,Tr,zr){return je.apply(this,arguments)}function je(){return je=(0,D.Z)(function*(lr,Tr,zr){Tr&&(Tr.timeInfo&&(0,w.pC)(zr)&&zr.timeExtent&&Z(lr,Tr.fieldsIndex,[Tr.timeInfo.startField,Tr.timeInfo.endField]),Tr.floorInfo&&Z(lr,Tr.fieldsIndex,[Tr.floorInfo.floorField]),(0,w.pC)(zr)&&(0,w.pC)(zr.where)&&(yield ne(lr,Tr.fieldsIndex,zr.where)))}),je.apply(this,arguments)}function ze(lr,Tr,zr){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,D.Z)(function*(lr,Tr,zr){Tr&&zr&&(yield Promise.all(zr.map(Tt=>Ae(lr,Tr,Tt))))}),Ee.apply(this,arguments)}function Ae(lr,Tr,zr){return we.apply(this,arguments)}function we(){return we=(0,D.Z)(function*(lr,Tr,zr){Tr&&zr&&(zr.valueExpression?yield ee(lr,Tr.fieldsIndex,zr.valueExpression):zr.field&&Q(lr,Tr.fieldsIndex,zr.field))}),we.apply(this,arguments)}function Oe(lr){if(!lr)return[];const Tr="editFieldsInfo"in lr&&lr.editFieldsInfo;return Tr?X(lr.fieldsIndex,[Tr&&Tr.creatorField,Tr&&Tr.creationDateField,Tr&&Tr.editorField,Tr&&Tr.editDateField]):[]}function Ie(lr,Tr){return We.apply(this,arguments)}function We(){return We=(0,D.Z)(function*(lr,Tr){const{labelingInfo:zr,fieldsIndex:Tt}=Tr;zr&&zr.length&&(yield Promise.all(zr.map(sr=>Se(lr,Tt,sr))))}),We.apply(this,arguments)}function Se(lr,Tr,zr){return He.apply(this,arguments)}function He(){return He=(0,D.Z)(function*(lr,Tr,zr){if(!zr)return;const Tt=zr.getLabelExpression(),sr=zr.where;if("arcade"===Tt.type)yield ee(lr,Tr,Tt.expression);else{const Rr=Tt.expression.match(/{[^}]*}/g);Rr&&Rr.forEach(bt=>{Q(lr,Tr,bt.slice(1,-1))})}yield ne(lr,Tr,sr)}),He.apply(this,arguments)}function $e(lr){const Tr=lr.defaultValue;return void 0!==Tr&&st(lr,Tr)?Tr:lr.nullable?null:void 0}function et(lr){return"number"==typeof lr&&!isNaN(lr)&&isFinite(lr)}function nt(lr){return null===lr||et(lr)}const it="isInteger"in Number?Number.isInteger:lr=>"number"==typeof lr&&isFinite(lr)&&Math.floor(lr)===lr;function Xe(lr){return null===lr||it(lr)}function rt(lr){return null!=lr&&"string"==typeof lr}function Ze(lr){return null===lr||rt(lr)}function lt(){return!0}function st(lr,Tr){let zr;switch(lr.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":zr=lr.nullable?Xe:it;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":zr=lr.nullable?nt:et;break;case"string":case"esriFieldTypeString":zr=lr.nullable?Ze:rt;break;default:zr=lt}return 1===arguments.length?zr:zr(Tr)}const Ft=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function kt(lr){return null!=lr&&Ft.has(lr.type)}function wt(lr){return null!=lr&&("string"===lr.type||"esriFieldTypeString"===lr.type)}function zt(lr){return null!=lr&&("date"===lr.type||"esriFieldTypeDate"===lr.type)}var ar,Pr;function kr(lr){return null==lr||"number"==typeof lr&&isNaN(lr)?null:lr}function ss(lr,Tr){return lr.nullable&&null===Tr?null:kt(lr)&&!function os(lr,Tr){const zr="string"==typeof lr?pt(lr):lr;return!!zr&&(zr.isInteger?it(Tr)&&Tr>=zr.min&&Tr<=zr.max:Tr>=zr.min&&Tr<=zr.max)}(lr.type,Number(Tr))?ar.OUT_OF_RANGE:st(lr,Tr)?lr.domain?function Y(lr,Tr){switch(lr.type){case"range":{const Tt="range"in lr?lr.range[1]:lr.maxValue;if(+Tr<("range"in lr?lr.range[0]:lr.minValue)||+Tr>Tt)return U.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==lr.codedValues||lr.codedValues.every(zr=>null==zr||zr.code!==Tr))return U.INVALID_CODED_VALUE}return null}(lr.domain,Tr):null:Pr.INVALID_TYPE}function pt(lr){switch(lr){case"esriFieldTypeSmallInteger":case"small-integer":return $t;case"esriFieldTypeInteger":case"integer":return Xt;case"esriFieldTypeSingle":case"single":return _r;case"esriFieldTypeDouble":case"double":return hr}}(function(lr){lr.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(ar||(ar={})),function(lr){lr.INVALID_TYPE="type-validation-error::invalid-type"}(Pr||(Pr={}));const $t={min:-32768,max:32767,isInteger:!0},Xt={min:-2147483648,max:2147483647,isInteger:!0},_r={min:-34e37,max:12e37,isInteger:!1},hr={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function gr(lr,Tr,zr){switch(lr){case U.INVALID_CODED_VALUE:return`Value ${zr} is not in the coded domain - field: ${Tr.name}, domain: ${JSON.stringify(Tr.domain)}`;case U.VALUE_OUT_OF_RANGE:return`Value ${zr} is out of the range of valid values - field: ${Tr.name}, domain: ${JSON.stringify(Tr.domain)}`;case Pr.INVALID_TYPE:return`Value ${zr} is not a valid value for the field type - field: ${Tr.name}, type: ${Tr.type}, nullable: ${Tr.nullable}`;case ar.OUT_OF_RANGE:{const{min:Tt,max:sr}=pt(Tr.type);return`Value ${zr} is out of range for the number type - field: ${Tr.name}, type: ${Tr.type}, value range is ${Tt} to ${sr}`}}}function vr(lr,Tr){return!Kr(lr,Tr,null)}function Kr(lr,Tr,zr){if(!Tr||!Tr.attributes||!lr){if((0,w.pC)(zr))for(const Rr of lr)zr.add(Rr);return!0}const Tt=Tr.attributes;let sr=!1;for(const Rr of lr)if(!(Rr in Tt)){if(sr=!0,!(0,w.pC)(zr))break;zr.add(Rr)}return sr}function ns(lr){return["raster.itempixelvalue","raster.servicepixelvalue"].some(Tr=>lr.toLowerCase().startsWith(Tr))}},59990:(qe,xe,T)=>{"use strict";function D(B){const U=B.layer;return"floorInfo"in U&&U.floorInfo?.floorField&&"floors"in B.view?w(B.view.floors,U.floorInfo.floorField):null}function x(B,U){return"floorInfo"in U&&U.floorInfo?.floorField?w(B,U.floorInfo.floorField):null}function w(B,U){if(!B?.length)return null;const W=B.filter(Y=>""!==Y).map(Y=>`'${Y}'`);return W.push("''"),`${U} IN (${W.join(",")}) OR ${U} IS NULL`}T.d(xe,{c:()=>D,f:()=>x})},22445:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{createLabelFunction:()=>ue,formatField:()=>oe});var D=T(15861),x=T(26584),w=T(63290),B=T(88411),U=T(15348),W=T(36630),Y=T(86793),H=T(46679);const G=w.Z.getLogger("esri.layers.support.labelFormatUtils"),$={type:"simple",evaluate:()=>null},re={getAttribute:(ie,X)=>ie.field(X)};function ue(ie,X,Z){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(ie,X,Z){if(!ie||!ie.symbol)return $;const Q=ie.where,J=(0,Y.hV)(ie),se=Q?yield T.e(410).then(T.bind(T,10410)):null;let ee;if("arcade"===J.type){const le=yield(0,H.WW)(J.expression,Z,X);ee={type:"arcade",evaluate(ne){try{const ce=le.evaluate({$feature:"attributes"in ne?le.repurposeFeature(ne):ne});if(null!=ce)return ce.toString()}catch{G.error(new x.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:ne,expression:J}))}return null},needsHydrationToEvaluate:()=>null==(0,Y.el)(J.expression)}}else ee={type:"simple",evaluate:le=>J.expression.replace(/{[^}]*}/g,ne=>{const ce=ne.slice(1,-1),de=X.get(ce);if(!de)return ne;let me=null;return"attributes"in le?le&&le.attributes&&(me=le.attributes[de.name]):me=le.field(de.name),null==me?"":oe(me,de)})};if(Q){let le;try{le=se.WhereClause.create(Q,X)}catch(ce){return G.error(new x.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:Q,error:ce})),$}const ne=ee.evaluate;ee.evaluate=ce=>{const de="attributes"in ce?void 0:re;try{if(le.testFeature(ce,de))return ne(ce)}catch(me){G.error(new x.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:Q,feature:ce,error:me}))}return null}}return ee})).apply(this,arguments)}function oe(ie,X){if(null==ie)return"";const Z=X.domain;if(Z)if("codedValue"===Z.type||"coded-value"===Z.type){const J=ie;for(const se of Z.codedValues)if(se.code===J)return se.name}else if("range"===Z.type){const J=+ie,ee="range"in Z?Z.range[1]:Z.maxValue;if(("range"in Z?Z.range[0]:Z.minValue)<=J&&J<=ee)return Z.name}let Q=ie;return"date"===X.type||"esriFieldTypeDate"===X.type?Q=(0,B.p6)(Q,(0,B.Ze)("short-date")):(0,W.H7)(X)&&(Q=(0,U.uf)(+Q)),Q||""}},86793:(qe,xe,T)=>{"use strict";T.d(xe,{UO:()=>ie,YI:()=>oe,dI:()=>X,el:()=>le,hV:()=>ae,z7:()=>ue});var D=T(77275);const x="__begin__",w="__end__",B=new RegExp(x,"ig"),U=new RegExp(w,"ig"),W=new RegExp("^"+x,"i"),Y=new RegExp(w+"$","i");function ue(ne){return ne.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function ae(ne){const ce={expression:"",type:"none"};return ne.labelExpressionInfo?ne.labelExpressionInfo.value?(ce.expression=ne.labelExpressionInfo.value,ce.type="conventional"):ne.labelExpressionInfo.expression&&(ce.expression=ne.labelExpressionInfo.expression,ce.type="arcade"):null!=ne.labelExpression&&(ce.expression=function re(ne){return ne.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(ne.labelExpression),ce.type="conventional"),ce}function oe(ne){const ce=ae(ne);if(!ce)return null;switch(ce.type){case"conventional":return X(ce.expression);case"arcade":return ce.expression}return null}function ie(ne){const ce=ae(ne);if(!ce)return null;switch(ce.type){case"conventional":return function Q(ne){const ce=ne.match(Z);return ce&&ce[1].trim()||null}(ce.expression);case"arcade":return le(ce.expression)}return null}function X(ne){let ce;return ne?(ce=(0,D.gx)(ne,de=>x+'$feature["'+de+'"]'+w),ce=W.test(ce)?ce.replace(W,""):'"'+ce,ce=Y.test(ce)?ce.replace(Y,""):ce+'"',ce=ce.replace(B,'" + ').replace(U,' + "')):ce='""',ce}const Z=/^\s*\{([^}]+)\}\s*$/i,J=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,se=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ee=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function le(ne){if(!ne)return null;let ce=J.exec(ne)||se.exec(ne);return ce?ce[1]||ce[3]:(ce=ee.exec(ne),ce?ce[2]:null)}},62667:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>w});var D=T(170);const x=/\[([^\[\]]+)\]/gi;function w(U,W,Y){return U?U.map(H=>{const G=new D.Z;if(G.read(H,Y),G.labelExpression){const $=W.fields||W.layerDefinition&&W.layerDefinition.fields||this.fields;G.labelExpression=G.labelExpression.replace(x,(re,ue)=>`[${function B(U,W){if(!W)return U;const Y=U.toLowerCase();for(let H=0;H<W.length;H++){const G=W[H].name;if(G.toLowerCase()===Y)return G}return U}(ue,$)}]`)}return G}):null}},72469:(qe,xe,T)=>{"use strict";function x(ae){const oe=ae?.type;return"base-tile"===oe||"tile"===oe||"elevation"===oe||"imagery-tile"===oe||"base-elevation"===oe||"open-street-map"===oe||"wcs"===oe||"web-tile"===oe||"wmts"===oe||"vector-tile"===oe}function w(ae){return"voxel"===ae?.type}function B(ae){return"imagery-tile"===ae?.type}function U(ae){return"esri.Basemap"===ae.parent?.declaredClass&&ae.parent.baseLayers.includes(ae)}function W(ae){return"feature"===ae?.type&&!ae.url&&"memory"===ae.source?.type}function Y(ae){return"feature"===ae?.type&&"feature-layer"===ae.source?.type}function re(ae){return!0===ae.labelsVisible&&null!=ae.labelingInfo&&ae.labelingInfo.length>0}function ue(ae){if(ae.activeLayer){const oe=ae.activeLayer.tileMatrixSet;if(oe)return oe;const ie=ae.activeLayer.tileMatrixSets;if(ie)return ie}return null}T.d(xe,{Am:()=>B,C6:()=>re,Tv:()=>w,iC:()=>x,mt:()=>ue,rQ:()=>W,sy:()=>U,y2:()=>Y})},15283:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>Ce});var Q,D=T(17626),x=T(2076),w=T(86810),B=T(77712),Y=(T(85931),T(8314),T(66656)),H=T(55342),G=T(68653),$=T(76898),re=T(90912),ue=T(383),ae=T(36255),oe=T(48370),X=(T(29132),T(65234)),Z=T(71774);let J=Q=class extends w.wq{constructor(ge){super(ge),this.type="query-table"}clone(){const{workspaceId:ge,query:Te,oidFields:Le,spatialReference:je,geometryType:ze}=this,Ee={workspaceId:ge,query:Te,oidFields:Le,spatialReference:je?.clone()??void 0,geometryType:ze};return new Q(Ee)}};var se;(0,D._)([(0,H.J)({queryTable:"query-table"})],J.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],J.prototype,"workspaceId",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],J.prototype,"query",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],J.prototype,"oidFields",void 0),(0,D._)([(0,B.Cb)({type:X.Z,json:{write:!0}})],J.prototype,"spatialReference",void 0),(0,D._)([(0,H.J)(Z.Mk)],J.prototype,"geometryType",void 0),J=Q=(0,D._)([(0,$.j)("esri.layers.support.source.QueryTableDataSource")],J);let ee=se=class extends w.wq{constructor(ge){super(ge),this.type="raster"}clone(){const{workspaceId:ge,dataSourceName:Te}=this;return new se({workspaceId:ge,dataSourceName:Te})}};var le;(0,D._)([(0,H.J)({raster:"raster"})],ee.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ee.prototype,"dataSourceName",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ee.prototype,"workspaceId",void 0),ee=se=(0,D._)([(0,$.j)("esri.layers.support.source.RasterDataSource")],ee);let ne=le=class extends w.wq{constructor(ge){super(ge),this.type="table"}clone(){const{workspaceId:ge,gdbVersion:Te,dataSourceName:Le}=this;return new le({workspaceId:ge,gdbVersion:Te,dataSourceName:Le})}};var ce,de;(0,D._)([(0,H.J)({table:"table"})],ne.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ne.prototype,"workspaceId",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ne.prototype,"gdbVersion",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ne.prototype,"dataSourceName",void 0),ne=le=(0,D._)([(0,$.j)("esri.layers.support.source.TableDataSource")],ne);const me=(0,x.w)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let _e=ce=class extends w.wq{constructor(ge){super(ge),this.type="join-table"}readLeftTableSource(ge,Te,Le){return ye()(ge,Te,Le)}castLeftTableSource(ge){return(0,re.N7)(De(),ge)}readRightTableSource(ge,Te,Le){return ye()(ge,Te,Le)}castRightTableSource(ge){return(0,re.N7)(De(),ge)}clone(){const{leftTableKey:ge,rightTableKey:Te,leftTableSource:Le,rightTableSource:je,joinType:ze}=this,Ee={leftTableKey:ge,rightTableKey:Te,leftTableSource:Le?.clone()??void 0,rightTableSource:je?.clone()??void 0,joinType:ze};return new ce(Ee)}};(0,D._)([(0,H.J)({joinTable:"join-table"})],_e.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],_e.prototype,"leftTableKey",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],_e.prototype,"rightTableKey",void 0),(0,D._)([(0,B.Cb)({json:{write:!0}})],_e.prototype,"leftTableSource",void 0),(0,D._)([(0,G.r)("leftTableSource")],_e.prototype,"readLeftTableSource",null),(0,D._)([(0,Y.p)("leftTableSource")],_e.prototype,"castLeftTableSource",null),(0,D._)([(0,B.Cb)({json:{write:!0}})],_e.prototype,"rightTableSource",void 0),(0,D._)([(0,G.r)("rightTableSource")],_e.prototype,"readRightTableSource",null),(0,D._)([(0,Y.p)("rightTableSource")],_e.prototype,"castRightTableSource",null),(0,D._)([(0,H.J)(me)],_e.prototype,"joinType",void 0),_e=ce=(0,D._)([(0,$.j)("esri.layers.support.source.JoinTableDataSource")],_e);let he=null;function ye(){return he||(he=(0,ue.d)({types:De()})),he}let fe=null;function De(){return fe||(fe={key:"type",base:null,typeMap:{"data-layer":Ce,"map-layer":oe.R}}),fe}const ve={key:"type",base:null,typeMap:{"join-table":_e,"query-table":J,raster:ee,table:ne}};let Ce=de=class extends w.wq{constructor(ge){super(ge),this.type="data-layer"}clone(){const{fields:ge,dataSource:Te}=this;return new de({fields:ge,dataSource:Te})}};(0,D._)([(0,H.J)({dataLayer:"data-layer"})],Ce.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:[ae.Z],json:{write:!0}})],Ce.prototype,"fields",void 0),(0,D._)([(0,B.Cb)({types:ve,json:{write:!0}})],Ce.prototype,"dataSource",void 0),Ce=de=(0,D._)([(0,$.j)("esri.layers.support.source.DataLayerSource")],Ce),Ce.from=(0,re.se)(Ce)},48370:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>$});var G,D=T(17626),x=T(86810),w=T(77712),W=(T(85931),T(8314),T(90912)),Y=T(55342),H=T(76898);let $=G=class extends x.wq{constructor(re){super(re),this.type="map-layer"}clone(){const{mapLayerId:re,gdbVersion:ue}=this;return new G({mapLayerId:re,gdbVersion:ue})}};(0,D._)([(0,Y.J)({mapLayer:"map-layer"})],$.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:W.z8,json:{write:!0}})],$.prototype,"mapLayerId",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"gdbVersion",void 0),$=G=(0,D._)([(0,H.j)("esri.layers.support.source.MapLayerSource")],$)},13410:(qe,xe,T)=>{"use strict";T.d(xe,{FN:()=>B,QV:()=>w,ac:()=>W});var D=T(62208),x=T(31283);function w(Y,H,G){return H.flatten(({sublayers:re})=>re).length!==Y.length||!!Y.some(re=>re.originIdOf("minScale")>G||re.originIdOf("maxScale")>G||re.originIdOf("renderer")>G||re.originIdOf("labelingInfo")>G||re.originIdOf("opacity")>G||re.originIdOf("labelsVisible")>G||re.originIdOf("source")>G)||!U(Y,H)}function B(Y,H,G){return!!Y.some($=>{const re=$.source;return!(!re||"map-layer"===re.type&&re.mapLayerId===$.id&&((0,D.Wi)(re.gdbVersion)||re.gdbVersion===G))||$.originIdOf("renderer")>x.s3.SERVICE||$.originIdOf("labelingInfo")>x.s3.SERVICE||$.originIdOf("opacity")>x.s3.SERVICE||$.originIdOf("labelsVisible")>x.s3.SERVICE})||!U(Y,H)}function U(Y,H){if(!Y||!Y.length||(0,D.Wi)(H))return!0;const G=H.slice().reverse().flatten(({sublayers:ue})=>ue&&ue.toArray().reverse()).map(ue=>ue.id).toArray();if(Y.length>G.length)return!1;let $=0;const re=G.length;for(const{id:ue}of Y){for(;$<re&&G[$]!==ue;)$++;if($>=re)return!1}return!0}function W(Y){return!!Y&&Y.some(H=>null!=H.minScale||H.layerDefinition&&null!=H.layerDefinition.minScale)}},5676:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>w});var D=T(38305);const x=[];function w(B,U){if((0,D.M8)(B.url))return!0;const{wkid:W}=U;for(const Y of x){if(B.version>=Y[0])return!0;if("function"==typeof Y[1]&&(Y[1]=Y[1]()),Y[1].has(W))return!1}return!0}x.push([10.91,()=>{const B=new Set([9709,9716,9741,9761,9766]);for(let U=9712;U<=9713;U++)B.add(U);for(let U=9748;U<=9749;U++)B.add(U);for(let U=20904;U<=20932;U++)B.add(U);for(let U=21004;U<=21032;U++)B.add(U);for(let U=21207;U<=21264;U++)B.add(U);for(let U=21307;U<=21364;U++)B.add(U);for(let U=102759;U<=102760;U++)B.add(U);for(let U=102901;U<=102955;U++)B.add(U);return B}]),x.push([10.9,()=>{const B=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let U=9356;U<=9360;U++)B.add(U);for(let U=9404;U<=9407;U++)B.add(U);for(let U=9476;U<=9482;U++)B.add(U);for(let U=9487;U<=9494;U++)B.add(U);for(let U=9697;U<=9699;U++)B.add(U);return B}]),x.push([10.81,()=>{const B=new Set([9265,9333,103598,103699]);for(let U=9248;U<=9254;U++)B.add(U);for(let U=9271;U<=9273;U++)B.add(U);for(let U=9284;U<=9285;U++)B.add(U);for(let U=21453;U<=21463;U++)B.add(U);return B}]),x.push([10.8,()=>{const B=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let U=8035;U<=8036;U++)B.add(U);for(let U=8455;U<=8456;U++)B.add(U);for(let U=8518;U<=8529;U++)B.add(U);for(let U=8533;U<=8536;U++)B.add(U);for(let U=8538;U<=8540;U++)B.add(U);for(let U=8677;U<=8679;U++)B.add(U);for(let U=8902;U<=8903;U++)B.add(U);for(let U=8907;U<=8910;U++)B.add(U);for(let U=8949;U<=8951;U++)B.add(U);for(let U=8972;U<=8987;U++)B.add(U);for(let U=9039;U<=9040;U++)B.add(U);for(let U=9068;U<=9069;U++)B.add(U);for(let U=9140;U<=9141;U++)B.add(U);for(let U=9148;U<=9150;U++)B.add(U);for(let U=9153;U<=9159;U++)B.add(U);for(let U=9205;U<=9218;U++)B.add(U);for(let U=9221;U<=9222;U++)B.add(U);for(let U=54098;U<=54101;U++)B.add(U);return B}]),x.push([10.71,()=>{const B=new Set([6316]);for(let U=8351;U<=8353;U++)B.add(U);for(let U=9294;U<=9297;U++)B.add(U);for(let U=103586;U<=103594;U++)B.add(U);for(let U=103696;U<=103698;U++)B.add(U);return B}]),x.push([10.7,()=>{const B=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let U=8065;U<=8068;U++)B.add(U);for(let U=8082;U<=8083;U++)B.add(U);for(let U=8379;U<=8385;U++)B.add(U);for(let U=8836;U<=8840;U++)B.add(U);for(let U=8857;U<=8860;U++)B.add(U);for(let U=53035;U<=53037;U++)B.add(U);for(let U=54090;U<=54091;U++)B.add(U);for(let U=102498;U<=102499;U++)B.add(U);return B}]),x.push([10.61,()=>new Set([102497])]),x.push([10.6,()=>{const B=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let U=7755;U<=7787;U++)B.add(U);for(let U=7791;U<=7795;U++)B.add(U);for(let U=7799;U<=7801;U++)B.add(U);for(let U=7825;U<=7831;U++)B.add(U);for(let U=7877;U<=7878;U++)B.add(U);for(let U=7882;U<=7883;U++)B.add(U);for(let U=7991;U<=7992;U++)B.add(U);for(let U=8042;U<=8043;U++)B.add(U);for(let U=8058;U<=8059;U++)B.add(U);for(let U=8311;U<=8348;U++)B.add(U);for(let U=9060;U<=9067;U++)B.add(U);for(let U=102562;U<=102568;U++)B.add(U);for(let U=102799;U<=102900;U++)B.add(U);return B}]),x.push([10.51,()=>{const B=new Set([7683,7881,7886,7899,8888,9e3]);for(let U=8013;U<=8032;U++)B.add(U);for(let U=9053;U<=9057;U++)B.add(U);for(let U=104017;U<=104018;U++)B.add(U);for(let U=104971;U<=104974;U++)B.add(U);return B}]),x.push([10.5,()=>{const B=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let U=4087;U<=4088;U++)B.add(U);for(let U=5896;U<=5899;U++)B.add(U);for(let U=7005;U<=7007;U++)B.add(U);for(let U=7057;U<=7070;U++)B.add(U);for(let U=7073;U<=7082;U++)B.add(U);for(let U=7109;U<=7128;U++)B.add(U);for(let U=7844;U<=7859;U++)B.add(U);return B}])},39605:(qe,xe,T)=>{"use strict";T.d(xe,{W:()=>w,v:()=>B});var D=T(50645);const x={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(U,W,Y)=>{"-"===W.charAt(0)?U.style.setProperty(W,Y):U.style[W]=Y}};let w=U=>(0,D.l7)(x,U),B={create:(U,W)=>(W=w(W),(0,D.WV)(U,document.createElement("div"),void 0,W),(0,D.UQ)(U,W)),append:(U,W,Y)=>(Y=w(Y),(0,D.WV)(W,U,void 0,Y),(0,D.UQ)(W,Y)),insertBefore:(U,W,Y)=>(Y=w(Y),(0,D.WV)(W,U.parentNode,U,Y),(0,D.UQ)(W,Y)),merge:(U,W,Y)=>(Y=w(Y),W.domNode=U,(0,D.Yj)(U,W,Y),(0,D.UQ)(W,Y)),replace:(U,W,Y)=>(Y=w(Y),(0,D.WV)(W,U.parentNode,U,Y),U.parentNode.removeChild(U),(0,D.UQ)(W,Y))}},50645:(qe,xe,T)=>{"use strict";T.d(xe,{UQ:()=>me,WV:()=>le,Yj:()=>ee,l7:()=>Y});var D=T(38570);const x="http://www.w3.org/",w=`${x}2000/svg`,B=`${x}1999/xlink`;let U,W=[],Y=(_e,he)=>{let ye={};return Object.keys(_e).forEach(fe=>{ye[fe]=_e[fe]}),he&&Object.keys(he).forEach(fe=>{ye[fe]=he[fe]}),ye},H=(_e,he)=>_e.vnodeSelector===he.vnodeSelector&&(_e.properties&&he.properties?_e.properties.key===he.properties.key&&_e.properties.bind===he.properties.bind:!_e.properties&&!he.properties),G=_e=>{if("string"!=typeof _e)throw new Error("Style values must be strings")},$=(_e,he,ye)=>{if(""!==he.vnodeSelector)for(let fe=ye;fe<_e.length;fe++)if(H(_e[fe],he))return fe;return-1},re=(_e,he,ye,fe)=>{let De=_e[he];if(""===De.vnodeSelector)return;let ve=De.properties;if(!ve||!(void 0===ve.key?ve.bind:ve.key))for(let Ce=0;Ce<_e.length;Ce++)if(Ce!==he&&H(_e[Ce],De))throw new Error(`${ye.vnodeSelector} had a ${De.vnodeSelector} child ${"added"===fe?fe:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)},ue=_e=>{if(_e.properties){let he=_e.properties.enterAnimation;he&&he(_e.domNode,_e.properties)}},ae=[],oe=!1,ie=_e=>{(_e.children||[]).forEach(ie),_e.properties&&_e.properties.afterRemoved&&_e.properties.afterRemoved.apply(_e.properties.bind||_e.properties,[_e.domNode])},X=()=>{oe=!1,ae.forEach(ie),ae.length=0},Z=_e=>{ae.push(_e),oe||(oe=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(X,{timeout:16}):setTimeout(X,16))},Q=_e=>{let he=_e.domNode;if(_e.properties){let ye=_e.properties.exitAnimation;if(ye)return he.style.pointerEvents="none",void ye(he,()=>{he.parentNode&&(he.parentNode.removeChild(he),Z(_e))},_e.properties)}he.parentNode&&(he.parentNode.removeChild(he),Z(_e))},J=(_e,he,ye)=>{if(!he)return;let fe=ye.eventHandlerInterceptor,De=Object.keys(he),ve=De.length;for(let Ce=0;Ce<ve;Ce++){let ge=De[Ce],Te=he[ge];if("className"===ge)throw new Error('Property "className" is not supported, use "class".');if("class"===ge)ne(_e,Te,!0);else if("classes"===ge){let Le=Object.keys(Te),je=Le.length;for(let ze=0;ze<je;ze++){let Ee=Le[ze];Te[Ee]&&_e.classList.add(Ee)}}else if("styles"===ge){let Le=Object.keys(Te),je=Le.length;for(let ze=0;ze<je;ze++){let Ee=Le[ze],Ae=Te[Ee];Ae&&(G(Ae),ye.styleApplyer(_e,Ee,Ae))}}else if("key"!==ge&&null!=Te){let Le=typeof Te;"function"===Le?(0===ge.lastIndexOf("on",0)&&(fe&&(Te=fe(ge,Te,_e,he)),"oninput"===ge&&function(){let je=Te;Te=function(ze){je.apply(this,[ze]),ze.target["oninput-value"]=ze.target.value}}()),_e[ge]=Te):ye.namespace===w?"href"===ge?_e.setAttributeNS(B,ge,Te):_e.setAttribute(ge,Te):"string"===Le&&"value"!==ge?"innerHTML"===ge?_e[ge]=D.w3.sanitize(Te):_e.setAttribute(ge,Te):_e[ge]=Te}}},ee=(_e,he,ye)=>{((_e,he,ye)=>{if(he)for(let fe of he)le(fe,_e,void 0,ye)})(_e,he.children,ye),he.text&&(_e.textContent=he.text),J(_e,he.properties,ye),he.properties&&he.properties.afterCreate&&he.properties.afterCreate.apply(he.properties.bind||he.properties,[_e,ye,he.vnodeSelector,he.properties,he.children])},le=(_e,he,ye,fe)=>{let De,ve=0,Ce=_e.vnodeSelector,ge=he.ownerDocument;if(""===Ce)De=_e.domNode=ge.createTextNode(_e.text),void 0!==ye?he.insertBefore(De,ye):he.appendChild(De);else{for(let Te=0;Te<=Ce.length;++Te){let Le=Ce.charAt(Te);if(Te===Ce.length||"."===Le||"#"===Le){let je=Ce.charAt(ve-1),ze=Ce.slice(ve,Te);"."===je?De.classList.add(ze):"#"===je?De.id=ze:("svg"===ze&&(fe=Y(fe,{namespace:w})),void 0!==fe.namespace?De=_e.domNode=ge.createElementNS(fe.namespace,ze):(De=_e.domNode=_e.domNode||ge.createElement(ze),"input"===ze&&_e.properties&&void 0!==_e.properties.type&&De.setAttribute("type",_e.properties.type)),void 0!==ye?he.insertBefore(De,ye):De.parentNode!==he&&he.appendChild(De)),ve=Te+1}}ee(De,_e,fe)}},ne=(_e,he,ye)=>{he&&he.split(" ").forEach(fe=>{fe&&_e.classList.toggle(fe,ye)})};U=(_e,he,ye)=>{let fe=_e.domNode,De=!1;if(_e===he)return!1;let ve=!1;if(""===he.vnodeSelector){if(he.text!==_e.text){let Ce=fe.ownerDocument.createTextNode(he.text);return fe.parentNode.replaceChild(Ce,fe),he.domNode=Ce,De=!0,De}he.domNode=fe}else 0===he.vnodeSelector.lastIndexOf("svg",0)&&(ye=Y(ye,{namespace:w})),_e.text!==he.text&&(ve=!0,void 0===he.text?fe.removeChild(fe.firstChild):fe.textContent=he.text),he.domNode=fe,ve=((_e,he,ye,fe,De)=>{if(ye===fe)return!1;let ve,Ce=(ye=ye||W).length,ge=(fe=fe||W).length,Te=0,Le=0,je=!1;for(;Le<ge;){let ze=Te<Ce?ye[Te]:void 0,Ee=fe[Le];if(void 0!==ze&&H(ze,Ee))je=U(ze,Ee,De)||je,Te++;else{let Ae=$(ye,Ee,Te+1);if(Ae>=0){for(ve=Te;ve<Ae;ve++)Q(ye[ve]),re(ye,ve,_e,"removed");je=U(ye[Ae],Ee,De)||je,Te=Ae+1}else le(Ee,he,Te<Ce?ye[Te].domNode:void 0,De),ue(Ee),re(fe,Le,_e,"added")}Le++}if(Ce>Te)for(ve=Te;ve<Ce;ve++)Q(ye[ve]),re(ye,ve,_e,"removed");return je})(he,fe,_e.children,he.children,ye)||ve,ve=((_e,he,ye,fe)=>{if(!ye)return;let De=!1,ve=Object.keys(ye),Ce=ve.length;for(let ge=0;ge<Ce;ge++){let Te=ve[ge],Le=ye[Te],je=he[Te];if("class"===Te)je!==Le&&(ne(_e,je,!1),ne(_e,Le,!0));else if("classes"===Te){let ze=_e.classList,Ee=Object.keys(Le),Ae=Ee.length;for(let we=0;we<Ae;we++){let Be=Ee[we],Pe=!!Le[Be];Pe!==!!je[Be]&&(De=!0,Pe?ze.add(Be):ze.remove(Be))}}else if("styles"===Te){let ze=Object.keys(Le),Ee=ze.length;for(let Ae=0;Ae<Ee;Ae++){let we=ze[Ae],Be=Le[we];Be!==je[we]&&(De=!0,Be?(G(Be),fe.styleApplyer(_e,we,Be)):fe.styleApplyer(_e,we,""))}}else if(Le||"string"!=typeof je||(Le=""),"value"===Te){let ze=_e[Te];ze!==Le&&(_e["oninput-value"]?ze===_e["oninput-value"]:Le!==je)&&(_e[Te]=Le,_e["oninput-value"]=void 0),Le!==je&&(De=!0)}else if(Le!==je){let ze=typeof Le;"function"===ze&&fe.eventHandlerInterceptor||(fe.namespace===w?"href"===Te?_e.setAttributeNS(B,Te,Le):_e.setAttribute(Te,Le):"string"===ze?"innerHTML"===Te?_e[Te]=D.w3.sanitize(Le):"role"===Te&&""===Le?_e.removeAttribute(Te):_e.setAttribute(Te,Le):_e[Te]!==Le&&(_e[Te]=Le),De=!0)}}return De})(fe,_e.properties,he.properties,ye)||ve,he.properties&&he.properties.afterUpdate&&he.properties.afterUpdate.apply(he.properties.bind||he.properties,[fe,ye,he.vnodeSelector,he.properties,he.children]);return ve&&he.properties&&he.properties.updateAnimation&&he.properties.updateAnimation(fe,he.properties,_e.properties),De};let me=(_e,he)=>({getLastRender:()=>_e,update:ye=>{if(_e.vnodeSelector!==ye.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let fe=_e;_e=ye,U(fe,ye,he)},domNode:_e.domNode})},62996:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>W});var D=T(39605);let x,w=(Y,H)=>{let G=[];for(;Y&&Y!==H;)G.push(Y),Y=Y.parentNode;return G};x=Array.prototype.find?(Y,H)=>Y.find(H):(Y,H)=>Y.filter(H)[0];let B=(Y,H)=>{let G=Y;return H.forEach($=>{G=G&&G.children?x(G.children,re=>re.domNode===$):void 0}),G},U=(Y,H,G)=>{let $=function(re){G("domEvent",re);let ue=H(),ae=w(re.currentTarget,ue.domNode);ae.reverse();let oe,ie=B(ue.getLastRender(),ae);return Y.scheduleRender(),ie&&(oe=ie.properties[`on${re.type}`].apply(ie.properties.bind||this,arguments)),G("domEventProcessed",re),oe};return(re,ue,ae,oe)=>$},W=Y=>{let H,G,$=(0,D.W)(Y),re=$.performanceLogger,ue=!0,ae=!1,oe=[],ie=[],X=(Q,J,se)=>{let ee;$.eventHandlerInterceptor=U(H,()=>ee,re),ee=Q(J,se(),$),oe.push(ee),ie.push(se)},Z=()=>{if(G=void 0,ue){ue=!1,re("renderStart",void 0);for(let Q=0;Q<oe.length;Q++){let J=ie[Q]();re("rendered",void 0),oe[Q].update(J),re("patched",void 0)}re("renderDone",void 0),ue=!0}};return H={renderNow:Z,scheduleRender:()=>{G||ae||(G=requestAnimationFrame(Z))},stop:()=>{G&&(cancelAnimationFrame(G),G=void 0),ae=!0},resume:()=>{ae=!1,ue=!0,H.scheduleRender()},append:(Q,J)=>{X(D.v.append,Q,J)},insertBefore:(Q,J)=>{X(D.v.insertBefore,Q,J)},merge:(Q,J)=>{X(D.v.merge,Q,J)},replace:(Q,J)=>{X(D.v.replace,Q,J)},detach:Q=>{for(let J=0;J<ie.length;J++)if(ie[J]===Q)return ie.splice(J,1),oe.splice(J,1)[0];throw new Error("renderFunction was not found")}},H}},38159:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.wq{constructor(re){super(re),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new H({title:this.title,expression:this.expression})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"title",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),(0,D._)([(0,w.Cb)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],G.prototype,"returnType",void 0),G=H=(0,D._)([(0,Y.j)("esri.popup.ElementExpressionInfo")],G);const $=G},38439:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.wq{constructor(re){super(re),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new H({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"name",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"title",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),(0,D._)([(0,w.Cb)({type:["string","number"],json:{write:!0}})],G.prototype,"returnType",void 0),G=H=(0,D._)([(0,Y.j)("esri.popup.ExpressionInfo")],G);const $=G},25621:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),x=T(2076),w=T(86810),B=T(58817),U=T(77712),Y=(T(90912),T(55342)),H=T(76898),G=T(66845);let re=$=class extends w.wq{constructor(ae){super(ae),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new $({fieldName:this.fieldName,format:this.format?(0,B.d9)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],re.prototype,"fieldName",void 0),(0,D._)([(0,U.Cb)({type:G.Z,json:{write:!0}})],re.prototype,"format",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0,default:!1}})],re.prototype,"isEditable",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],re.prototype,"label",void 0),(0,D._)([(0,Y.J)(new x.X({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],re.prototype,"stringFieldOption",void 0),(0,D._)([(0,U.Cb)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],re.prototype,"statisticType",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],re.prototype,"tooltip",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0}})],re.prototype,"visible",void 0),re=$=(0,D._)([(0,H.j)("esri.popup.FieldInfo")],re);const ue=re},55664:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(55013);let G=H=class extends Y.Z{constructor(re){super(re),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new H({description:this.description,displayType:this.displayType,title:this.title})}};(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"description",void 0),(0,D._)([(0,x.Cb)({type:["auto","preview","list"],json:{write:!0}})],G.prototype,"displayType",void 0),(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"title",void 0),(0,D._)([(0,x.Cb)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],G.prototype,"type",void 0),G=H=(0,D._)([(0,W.j)("esri.popup.content.AttachmentsContent")],G);const $=G},89594:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(85812),H=T(82657);let $=G=class extends Y.Z{constructor(ue){super(ue),this.type="bar-chart"}clone(){return new G({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,D._)([(0,x.Cb)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:H.l.write}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.BarChartMediaInfo")],$);const re=$},81590:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(85812),H=T(82657);let $=G=class extends Y.Z{constructor(ue){super(ue),this.type="column-chart"}clone(){return new G({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,D._)([(0,x.Cb)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:H.l.write}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.ColumnChartMediaInfo")],$);const re=$},55013:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($),this.type=null}};(0,D._)([(0,w.Cb)({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.popup.content.Content")],H);const G=H},16615:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var Y,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(76898)),W=T(55013);let H=Y=class extends W.Z{constructor($){super($),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Y({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,x.d9)(this.outFields):null})}};(0,D._)([(0,w.Cb)()],H.prototype,"creator",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"destroyer",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"outFields",void 0),(0,D._)([(0,w.Cb)({type:["custom"],readOnly:!0})],H.prototype,"type",void 0),H=Y=(0,D._)([(0,U.j)("esri.popup.content.CustomContent")],H);const G=H},82561:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(38159),H=T(55013);let $=G=class extends H.Z{constructor(ue){super(ue),this.expressionInfo=null,this.type="expression"}clone(){return new G({expressionInfo:this.expressionInfo?.clone()})}};(0,D._)([(0,x.Cb)({type:Y.Z,json:{write:!0}})],$.prototype,"expressionInfo",void 0),(0,D._)([(0,x.Cb)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.ExpressionContent")],$);const re=$},75484:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(76898)),W=T(99433),Y=T(25621),H=T(55013);let $=G=class extends H.Z{constructor(ue){super(ue),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(ue,ae){ae.fieldInfos=ue&&ue.map(oe=>oe.toJSON())}clone(){return new G((0,x.d9)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,D._)([(0,w.Cb)({type:Object,json:{write:!0}})],$.prototype,"attributes",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"description",void 0),(0,D._)([(0,w.Cb)({type:[Y.Z]})],$.prototype,"fieldInfos",void 0),(0,D._)([(0,W.c)("fieldInfos")],$.prototype,"writeFieldInfos",null),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"title",void 0),(0,D._)([(0,w.Cb)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,U.j)("esri.popup.content.FieldsContent")],$);const re=$},49455:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(78297),H=T(86810);let $=G=class extends H.wq{constructor(ie){super(ie),this.linkURL=null,this.sourceURL=null}clone(){return new G({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],$.prototype,"linkURL",void 0),(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],$.prototype,"sourceURL",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.support.ImageMediaInfoValue")],$);const re=$;var ue;let ae=ue=class extends Y.Z{constructor(ie){super(ie),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new ue({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,D._)([(0,x.Cb)({type:Number,json:{write:!0}})],ae.prototype,"refreshInterval",void 0),(0,D._)([(0,x.Cb)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ae.prototype,"type",void 0),(0,D._)([(0,x.Cb)({type:re,json:{write:!0}})],ae.prototype,"value",void 0),ae=ue=(0,D._)([(0,W.j)("esri.popup.content.ImageMediaInfo")],ae);const oe=ae},71981:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(85812),H=T(82657);let $=G=class extends Y.Z{constructor(ue){super(ue),this.type="line-chart"}clone(){return new G({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,D._)([(0,x.Cb)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:H.l.write}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.LineChartMediaInfo")],$);const re=$},64531:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Z});var ie,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(68653)),W=T(76898),Y=T(99433),H=T(89594),G=T(81590),$=T(55013),re=T(49455),ue=T(71981),ae=T(52023),oe=T(65560);let X=ie=class extends $.Z{constructor(Q){super(Q),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(Q){return Q&&Q.map(J=>"image"===J.type?re.Z.fromJSON(J):"barchart"===J.type?H.Z.fromJSON(J):"columnchart"===J.type?G.Z.fromJSON(J):"linechart"===J.type?ue.Z.fromJSON(J):"piechart"===J.type?ae.Z.fromJSON(J):void 0).filter(Boolean)}writeMediaInfos(Q,J){J.mediaInfos=Q&&Q.map(se=>se.toJSON())}clone(){return new ie((0,x.d9)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,D._)([(0,w.Cb)()],X.prototype,"activeMediaInfoIndex",void 0),(0,D._)([(0,w.Cb)({type:Object,json:{write:!0}})],X.prototype,"attributes",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],X.prototype,"description",void 0),(0,D._)([(0,w.Cb)({types:[oe.V]})],X.prototype,"mediaInfos",void 0),(0,D._)([(0,U.r)("mediaInfos")],X.prototype,"readMediaInfos",null),(0,D._)([(0,Y.c)("mediaInfos")],X.prototype,"writeMediaInfos",null),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],X.prototype,"title",void 0),(0,D._)([(0,w.Cb)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],X.prototype,"type",void 0),X=ie=(0,D._)([(0,W.j)("esri.popup.content.MediaContent")],X);const Z=X},52023:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(85812),H=T(82657);let $=G=class extends Y.Z{constructor(ue){super(ue),this.type="pie-chart"}clone(){return new G({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,D._)([(0,x.Cb)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:H.l.write}})],$.prototype,"type",void 0),$=G=(0,D._)([(0,W.j)("esri.popup.content.PieChartMediaInfo")],$);const re=$},501:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(55013);let G=H=class extends Y.Z{constructor(re){super(re),this.text=null,this.type="text"}clone(){return new H({text:this.text})}};(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"text",void 0),(0,D._)([(0,x.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],G.prototype,"type",void 0),G=H=(0,D._)([(0,W.j)("esri.popup.content.TextContent")],G);const $=G},85812:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var re,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(78297),H=T(86810),G=T(58817),$=T(77891);let ue=re=class extends H.wq{constructor(X){super(X),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new re({fields:(0,G.d9)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,D._)([(0,x.Cb)({type:[String],json:{write:!0}})],ue.prototype,"fields",void 0),(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],ue.prototype,"normalizeField",void 0),(0,D._)([(0,x.Cb)({type:[$.Z],json:{read:!1}})],ue.prototype,"series",void 0),(0,D._)([(0,x.Cb)({type:String,json:{write:!0}})],ue.prototype,"tooltipField",void 0),ue=re=(0,D._)([(0,W.j)("esri.popup.content.support.ChartMediaInfoValue")],ue);const ae=ue;let oe=class extends Y.Z{constructor(X){super(X),this.type=null,this.value=null}};(0,D._)([(0,x.Cb)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],oe.prototype,"type",void 0),(0,D._)([(0,x.Cb)({type:ae,json:{write:!0}})],oe.prototype,"value",void 0),oe=(0,D._)([(0,W.j)("esri.popup.content.mixins.ChartMediaInfo")],oe);const ie=oe},78297:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($),this.altText=null,this.caption="",this.title="",this.type=null}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],H.prototype,"altText",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],H.prototype,"caption",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],H.prototype,"title",void 0),(0,D._)([(0,w.Cb)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.popup.content.mixins.MediaInfo")],H);const G=H},77891:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.Z{constructor(re){super(re),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new H({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};(0,D._)([(0,w.Cb)()],G.prototype,"fieldName",void 0),(0,D._)([(0,w.Cb)()],G.prototype,"tooltip",void 0),(0,D._)([(0,w.Cb)()],G.prototype,"value",void 0),G=H=(0,D._)([(0,Y.j)("esri.popup.content.support.ChartMediaInfoValueSeries")],G);const $=G},82657:(qe,xe,T)=>{"use strict";T.d(xe,{l:()=>x});const x=(0,T(2076).w)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},65560:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>Y});var D=T(89594),x=T(81590),w=T(49455),B=T(71981),U=T(52023);const Y={base:T(78297).Z,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":D.Z,"column-chart":x.Z,"line-chart":B.Z,"pie-chart":U.Z,image:w.Z}}},66845:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>J});var D=T(17626);const B=(0,T(2076).w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});B.toJSON.bind(B),B.fromJSON.bind(B);var Z,H=T(86810),G=T(77712),ue=(T(85931),T(8314),T(90912)),ae=T(55342),oe=T(76898),ie=T(88411),X=T(15348);let Q=Z=class extends H.wq{constructor(se){super(se),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new Z({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(se){return this.dateFormat?(0,ie.p6)(se,{...(0,ie.Ze)(this.dateFormat),...this.dateTimeFormatOptions}):(0,X.uf)(se,(0,X.sh)(this))}formatRasterPixelValue(se){let ee,le;return se.trim().includes(",")?(ee=",",le=ee+" ",this._formatDelimitedString(se,ee,le,this)):se.trim().includes(";")?(ee=";",le=ee+" ",this._formatDelimitedString(se,ee,le,this)):se.trim().includes(" ")?(ee=le=" ",this._formatDelimitedString(se,ee,le,this)):this.format(Number(se))}_formatDelimitedString(se,ee,le,ne){return se&&ee&&le&&ne?se.trim().split(ee).map(ce=>this.format(Number(ce))).join(le):se}};(0,D._)([(0,ae.J)(B)],Q.prototype,"dateFormat",void 0),(0,D._)([(0,G.Cb)({type:Object,json:{read:!1}})],Q.prototype,"dateTimeFormatOptions",void 0),(0,D._)([(0,G.Cb)({type:Boolean,json:{write:!0}})],Q.prototype,"digitSeparator",void 0),(0,D._)([(0,G.Cb)({type:ue.z8,json:{write:!0}})],Q.prototype,"places",void 0),Q=Z=(0,D._)([(0,oe.j)("esri.popup.support.FieldInfoFormat")],Q);const J=Q},51686:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.wq{constructor(re){super(re),this.field=null,this.order=null}clone(){return new H({field:this.field,order:this.order})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"field",void 0),(0,D._)([(0,w.Cb)({type:["asc","desc"],json:{write:!0}})],G.prototype,"order",void 0),G=H=(0,D._)([(0,Y.j)("esri.popup.support.RelatedRecordsInfoFieldOrder")],G);const $=G},84687:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ye});var D=T(15861),x=T(17626),w=T(59318),B=T(24263),U=T(84792),W=T(26584),Y=T(86810),H=T(47996),G=T(62208),$=T(10699),re=T(77712),oe=(T(85931),T(8314),T(90912)),ie=T(68653),X=T(76898),Z=T(2004),Q=T(56683),J=T(6278),se=T(14517);let ee=class extends se.Z{constructor(fe){super(fe),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,x._)([(0,re.Cb)()],ee.prototype,"nextQueryParams",void 0),(0,x._)([(0,re.Cb)()],ee.prototype,"queryParams",void 0),(0,x._)([(0,re.Cb)()],ee.prototype,"results",void 0),(0,x._)([(0,re.Cb)()],ee.prototype,"total",void 0),ee=(0,x._)([(0,X.j)("esri.portal.PortalQueryResult")],ee);const le=ee;var de,ne=T(94508),ce=T(12680);let me;const _e={PortalGroup:()=>Promise.resolve().then(T.bind(T,96245)),PortalItem:()=>Promise.resolve().then(T.bind(T,55463)),PortalUser:()=>Promise.resolve().then(T.bind(T,94508))};let he=de=class extends((0,Y.eC)(H.Z)){constructor(fe){super(fe),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=w.Z.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(fe){return"string"==typeof fe?{url:fe}:fe}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(fe){if(fe)for(const De of fe)w.Z.request.trustedServers.includes(De)||w.Z.request.trustedServers.push(De);return fe}readDefaultBasemap(fe){return this._readBasemap(fe)}readDefaultDevBasemap(fe){return this._readBasemap(fe)}readDefaultVectorBasemap(fe){return this._readBasemap(fe)}get extraQuery(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let fe=this.url;if(fe){const De=fe.indexOf("/sharing");fe=De>0?fe.substring(0,De):this.url.replace(/\/+$/,""),fe+="/sharing/rest"}return fe}get thumbnailUrl(){const fe=this.restUrl,De=this.thumbnail;return fe&&De?this._normalizeSSL(fe+"/portals/self/resources/"+De):null}readUrlKey(fe){return fe&&fe.toLowerCase()}readUser(fe){let De=null;return fe&&(De=ne.default.fromJSON(fe),De.portal=this),De}load(fe){const De=Promise.resolve().then(T.bind(T,73386)).then(({default:ve})=>{(0,$.k_)(fe),me=ve}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,fe)).then(ve=>{if(B.id){const Ce=B.id;this.credential=Ce.findCredential(this.restUrl),this.credential||this.authMode!==de.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=Ce.on("credential-create",()=>{Ce.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=ve,this.read(ve)});return this.addResolvingPromise(De),Promise.resolve(this)}createElevationLayers(){var fe=this;return(0,D.Z)(function*(){yield fe.load();const De=fe._getHelperService("defaultElevationLayers"),ve=(yield Promise.all([T.e(8592),T.e(5810)]).then(T.bind(T,75810))).default;return De?De.map(Ce=>new ve({id:Ce.id,url:Ce.url})):[]})()}fetchBasemaps(fe,De){const ve=new J.Z;return ve.query=fe||(w.Z.apiKey&&(0,ce.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),ve.disableExtraQuery=!0,this.queryGroups(ve,De).then(Ce=>{if(ve.num=100,ve.query='type:"Web Map" -type:"Web Application"',Ce.total){const ge=Ce.results[0];return ve.sortField=ge.sortField||"name",ve.sortOrder=ge.sortOrder||"desc",ge.queryItems(ve,De)}return null}).then(Ce=>{let ge;return ge=Ce&&Ce.total?Ce.results.filter(Te=>"Web Map"===Te.type).map(Te=>new me({portalItem:Te})):[],ge})}fetchCategorySchema(fe){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",fe).then(De=>De.categorySchema):(0,$.Hc)(fe)?Promise.reject((0,$.zE)()):Promise.resolve([])}fetchFeaturedGroups(fe){const De=this.featuredGroups,ve=new J.Z;if(ve.num=100,ve.sortField="title",De&&De.length){const Ce=[];for(const ge of De)Ce.push(`(title:"${ge.title}" AND owner:${ge.owner})`);return ve.query=Ce.join(" OR "),this.queryGroups(ve,fe).then(ge=>ge.results)}return(0,$.Hc)(fe)?Promise.reject((0,$.zE)()):Promise.resolve([])}fetchRegions(fe){const De=this.user?.culture||this.culture||(0,Q.Kd)();return this._request(this.restUrl+"/portals/regions",{...fe,query:{culture:De}})}fetchSettings(fe){const De=this.user?.culture||this.culture||(0,Q.Kd)();return this._request(this.restUrl+"/portals/self/settings",{...fe,query:{culture:De}})}static getDefault(){return de._default&&!de._default.destroyed||(de._default=new de),de._default}queryGroups(fe,De){return this._queryPortal("/community/groups",fe,"PortalGroup",De)}queryItems(fe,De){return this._queryPortal("/search",fe,"PortalItem",De)}queryUsers(fe,De){return fe.sortField||(fe.sortField="username"),this._queryPortal("/community/users",fe,"PortalUser",De)}toJSON(){throw new W.Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(fe){if(!fe)return null;if(fe.declaredClass)throw new Error("JSON object is already hydrated");return new de({sourceJSON:fe})}_getHelperService(fe){const De=this.helperServices&&this.helperServices[fe];if(!De)throw new W.Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${fe}"`);return De}_getHelperServiceUrl(fe){const De=this._getHelperService(fe);if(!De.url)throw new W.Z("portal:service-url-not-found",`The \`helperServices\` entry "${fe}" does not include a \`url\` value`);return De.url}_fetchSelf(fe=this.authMode,De=!1,ve){const Ce=this.restUrl+"/portals/self",ge={authMode:fe,query:{culture:(0,Q.Kd)().toLowerCase()},...ve};return"auto"===ge.authMode&&(ge.authMode="no-prompt"),De&&(ge.query.default=!0),this._request(Ce,ge)}_queryPortal(fe,De,ve,Ce){const ge=(0,oe.se)(J.Z,De),Te=Le=>this._request(this.restUrl+fe,{...ge.toRequestOptions(this),...Ce}).then(je=>{const ze=ge.clone();return ze.start=je.nextStart,new le({nextQueryParams:ze,queryParams:ge,total:je.total,results:de._resultsToTypedArray(Le,{portal:this},je,Ce)})}).then(je=>Promise.all(je.results.map(ze=>"function"==typeof ze.when?ze.when():je)).then(()=>je,ze=>((0,$.r9)(ze),je)));return ve&&_e[ve]?_e[ve]().then(({default:Le})=>((0,$.k_)(Ce),Te(Le))):Te()}_signIn(){if(this.authMode===de.AUTH_MODE_ANONYMOUS)return Promise.reject(new W.Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const fe=De=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(De||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=De,this._fetchSelf("immediate"))):this.user&&this.credential===De?null:(this.credential=De,this._fetchSelf("immediate"))).then(ve=>{ve&&(this.sourceJSON=ve,this.read(ve))});return B.id?B.id.getCredential(this.restUrl).then(De=>fe(De)):fe(this.credential)}_normalizeSSL(fe){return fe.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(fe){const De=this.credential&&this.credential.token;return this._normalizeSSL(De?fe+(fe.includes("?")?"&":"?")+"token="+De:fe)}_requestToTypedArray(fe,De,ve){return this._request(fe,De).then(Ce=>{const ge=de._resultsToTypedArray(ve,{portal:this},Ce);return Promise.all(ge.map(Te=>"function"==typeof Te.when?Te.when():Ce)).then(()=>ge,()=>ge)})}_readBasemap(fe){if(fe){const De=me.fromJSON(fe);return De.portalItem={portal:this},De}return null}_request(fe,De={}){const ve={f:"json",...De.query},{authMode:Ce=(this.authMode===de.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:ge=null,cacheBust:Te=!1,method:Le="auto",responseType:je="json",signal:ze}=De,Ee={authMode:Ce,body:ge,cacheBust:Te,method:Le,query:ve,responseType:je,timeout:0,signal:ze};return(0,U.default)(this._normalizeSSL(fe),Ee).then(Ae=>Ae.data)}static _resultsToTypedArray(fe,De,ve,Ce){let ge;if(ve){const Te=(0,G.pC)(Ce)?Ce.signal:null;ge=ve.listings||ve.notifications||ve.userInvitations||ve.tags||ve.items||ve.groups||ve.comments||ve.provisions||ve.results||ve.relatedItems||ve,(fe||De)&&(ge=ge.map(Le=>{const je=Object.assign(fe?fe.fromJSON(Le):Le,De);return"function"==typeof je.load&&je.load(Te),je}))}else ge=[];return ge}};he.AUTH_MODE_ANONYMOUS="anonymous",he.AUTH_MODE_AUTO="auto",he.AUTH_MODE_IMMEDIATE="immediate",(0,x._)([(0,re.Cb)()],he.prototype,"access",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"allSSL",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"authMode",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"authorizedCrossOriginDomains",void 0),(0,x._)([(0,ie.r)("authorizedCrossOriginDomains")],he.prototype,"readAuthorizedCrossOriginDomains",null),(0,x._)([(0,re.Cb)()],he.prototype,"basemapGalleryGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"bingKey",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canListApps",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canListData",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canListPreProvisionedItems",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canProvisionDirectPurchase",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canSearchPublic",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canShareBingPublic",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canSharePublic",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canSignInArcGIS",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"canSignInIDP",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"colorSetsGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"commentsEnabled",void 0),(0,x._)([(0,re.Cb)({type:Date})],he.prototype,"created",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"credential",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"culture",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"currentVersion",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"customBaseUrl",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"defaultBasemap",void 0),(0,x._)([(0,ie.r)("defaultBasemap")],he.prototype,"readDefaultBasemap",null),(0,x._)([(0,re.Cb)()],he.prototype,"defaultDevBasemap",void 0),(0,x._)([(0,ie.r)("defaultDevBasemap")],he.prototype,"readDefaultDevBasemap",null),(0,x._)([(0,re.Cb)({type:Z.Z})],he.prototype,"defaultExtent",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"defaultVectorBasemap",void 0),(0,x._)([(0,ie.r)("defaultVectorBasemap")],he.prototype,"readDefaultVectorBasemap",null),(0,x._)([(0,re.Cb)()],he.prototype,"description",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"devBasemapGalleryGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"eueiEnabled",void 0),(0,x._)([(0,re.Cb)({readOnly:!0})],he.prototype,"extraQuery",null),(0,x._)([(0,re.Cb)()],he.prototype,"featuredGroups",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"featuredItemsGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"galleryTemplatesGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"livingAtlasGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"hasCategorySchema",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"helpBase",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"helperServices",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"helpMap",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"homePageFeaturedContent",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"homePageFeaturedContentCount",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"httpPort",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"httpsPort",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"id",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"ipCntryCode",void 0),(0,x._)([(0,re.Cb)({readOnly:!0})],he.prototype,"isOrganization",null),(0,x._)([(0,re.Cb)()],he.prototype,"isPortal",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"isReadOnly",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"layerTemplatesGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"maxTokenExpirationMinutes",void 0),(0,x._)([(0,re.Cb)({type:Date})],he.prototype,"modified",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"name",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"portalHostname",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"portalMode",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"portalProperties",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"region",void 0),(0,x._)([(0,re.Cb)({readOnly:!0})],he.prototype,"restUrl",null),(0,x._)([(0,re.Cb)()],he.prototype,"rotatorPanels",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"showHomePageDescription",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"sourceJSON",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"staticImagesUrl",void 0),(0,x._)([(0,re.Cb)({json:{name:"2DStylesGroupQuery"}})],he.prototype,"stylesGroupQuery2d",void 0),(0,x._)([(0,re.Cb)({json:{name:"stylesGroupQuery"}})],he.prototype,"stylesGroupQuery3d",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"supportsHostedServices",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"symbolSetsGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"templatesGroupQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"thumbnail",void 0),(0,x._)([(0,re.Cb)({readOnly:!0})],he.prototype,"thumbnailUrl",null),(0,x._)([(0,re.Cb)()],he.prototype,"units",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"url",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"urlKey",void 0),(0,x._)([(0,ie.r)("urlKey")],he.prototype,"readUrlKey",null),(0,x._)([(0,re.Cb)()],he.prototype,"user",void 0),(0,x._)([(0,ie.r)("user")],he.prototype,"readUser",null),(0,x._)([(0,re.Cb)()],he.prototype,"useStandardizedQuery",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"useVectorBasemaps",void 0),(0,x._)([(0,re.Cb)()],he.prototype,"vectorBasemapGalleryGroupQuery",void 0),he=de=(0,x._)([(0,X.j)("esri.portal.Portal")],he);const ye=he},96245:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>re});var D=T(17626),x=T(26584),w=T(86810),B=T(77712),Y=(T(85931),T(8314),T(90912)),H=T(76898),G=T(6278);let $=class extends w.wq{constructor(ue){super(ue),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const ue=this.url,ae=this.thumbnail;return ue&&ae?this.portal._normalizeUrl(`${ue}/info/${ae}?f=json`):null}get url(){const ue=this.get("portal.restUrl");return ue?ue+"/community/groups/"+this.id:null}fetchCategorySchema(ue){return this.portal._request(this.url+"/categorySchema",ue).then(ae=>{const oe=ae.categorySchema||[];return oe.some(ie=>"contentCategorySetsGroupQuery.LivingAtlas"===ie.source)?this._fetchCategorySchemaSet("LivingAtlas",ue):oe})}fetchMembers(ue){return this.portal._request(this.url+"/users",ue)}getThumbnailUrl(ue){let ae=this.thumbnailUrl;return ae&&ue&&(ae+=`&w=${ue}`),ae}toJSON(){throw new x.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(ue,ae){let oe=(0,Y.se)(G.Z,ue);return parseFloat(this.portal.currentVersion)>5?(oe=oe||new G.Z,this.portal._queryPortal(`/content/groups/${this.id}/search`,oe,"PortalItem",ae)):(oe=oe?oe.clone():new G.Z,oe.query="group:"+this.id+(oe.query?" "+oe.query:""),this.portal.queryItems(oe,ae))}_fetchCategorySchemaSet(ue,ae){return this.portal._fetchSelf(this.portal.authMode,!0,ae).then(oe=>{const ie=oe.contentCategorySetsGroupQuery;if(ie){const X=new G.Z;return X.disableExtraQuery=!0,X.num=1,X.query=ie,this.portal.queryGroups(X,ae)}throw new x.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(oe=>{if(oe.total){const ie=oe.results[0],X=new G.Z;return X.num=1,X.query=`typekeywords:"${ue}"`,ie.queryItems(X,ae)}throw new x.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(oe=>oe.total?oe.results[0].fetchData("json",ae).then(ie=>{const X=ie&&ie.categorySchema;return X&&X.length?X:[]}):[])}};(0,D._)([(0,B.Cb)()],$.prototype,"access",void 0),(0,D._)([(0,B.Cb)({type:Date})],$.prototype,"created",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"description",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"id",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"isInvitationOnly",void 0),(0,D._)([(0,B.Cb)({type:Date})],$.prototype,"modified",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"owner",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"portal",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"snippet",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"sortField",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"sortOrder",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"tags",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"thumbnail",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],$.prototype,"thumbnailUrl",null),(0,D._)([(0,B.Cb)()],$.prototype,"title",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],$.prototype,"url",null),$=(0,D._)([(0,H.j)("esri.portal.PortalGroup")],$);const re=$},55463:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>he});var D=T(15861),x=T(17626),w=T(54346),B=T(26584),U=T(86810),W=T(58817),Y=T(47996),H=T(62208),G=T(21726),$=T(77712),re=T(90912),ue=T(68653),ae=T(76898),oe=T(2004),ie=T(84687),X=T(14517),Z=T(63290),se=(T(85931),T(8314),T(66656));const ee=Z.Z.getLogger("esri.portal.PortalItemResource");let le=class extends X.Z{constructor(ye){super(ye),this.portalItem=null}normalizeCtorArgs(ye){return ye&&ye.portalItem&&ye.path?{...ye,path:this._normalizePath(ye.path,ye.portalItem)}:ye}set path(ye){(0,H.pC)(ye)&&(0,G.YP)(ye)?ee.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",ye)}_castPath(ye){return this._normalizePath(ye,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(ye="json",fe){const De=this.url;if((0,H.Wi)(De))throw new B.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(De,{responseType:ye,query:{token:this.portalItem.apiKey},signal:(0,H.U2)(fe,"signal")})}update(ye,fe){var De=this;return(0,D.Z)(function*(){return(yield T.e(587).then(T.bind(T,10587))).addOrUpdateResource(De,"update",ye,fe)})()}hasPath(){return(0,H.pC)(this.path)}_normalizePath(ye,fe){return(0,H.Wi)(ye)?ye:(ye=ye.replace(/^\/+/,""),(0,H.pC)(fe)&&(0,G.YP)(ye)&&(ye=(0,G.PF)(ye,fe.itemUrl)),ye.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,x._)([(0,$.Cb)()],le.prototype,"portalItem",void 0),(0,x._)([(0,$.Cb)({type:String,value:null})],le.prototype,"path",null),(0,x._)([(0,se.p)("path")],le.prototype,"_castPath",null),(0,x._)([(0,$.Cb)({type:String,readOnly:!0})],le.prototype,"url",null),(0,x._)([(0,$.Cb)({type:String,readOnly:!0})],le.prototype,"itemRelativeUrl",null),le=(0,x._)([(0,ae.j)("esri.portal.PortalItemResource")],le);const ne=le;let ce=class extends X.Z{constructor(ye){super(ye),this.created=null,this.rating=null}};(0,x._)([(0,$.Cb)()],ce.prototype,"created",void 0),(0,x._)([(0,$.Cb)()],ce.prototype,"rating",void 0),ce=(0,x._)([(0,ae.j)("esri.portal.PortalRating")],ce);const de=ce;var me;let _e=me=class extends((0,U.eC)(Y.Z)){constructor(ye){super(ye),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(ye){return(0,re.TJ)(me,ye)}destroy(){this.portal=null}get displayName(){const ye=this.type,fe=this.typeKeywords||[];let De=ye;return"Feature Service"===ye||"Feature Collection"===ye?De=fe.includes("Table")?"Table":fe.includes("Route Layer")?"Route Layer":fe.includes("Markup")?"Markup":"Feature Layer":"Image Service"===ye?De=fe.includes("Elevation 3D Layer")?"Elevation Layer":fe.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===ye?De="Scene Layer":"Video Service"===ye?De="Video Layer":"Scene Package"===ye?De="Scene Layer Package":"Stream Service"===ye?De="Feature Layer":"Geoprocessing Service"===ye&&this.portal&&this.portal.isPortal?De=fe.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===ye?De="Locator":"Geoenrichment Service"===ye?De="GeoEnrichment Service":"Microsoft Powerpoint"===ye?De="Microsoft PowerPoint":"GeoJson"===ye?De="GeoJSON":"Globe Service"===ye?De="Globe Layer":"Vector Tile Service"===ye?De="Tile Layer":"netCDF"===ye?De="NetCDF":"Map Service"===ye?De=fe.includes("Spatiotemporal")||!fe.includes("Hosted Service")&&!fe.includes("Tiled")||fe.includes("Relational")?"Map Image Layer":"Tile Layer":ye&&ye.toLowerCase().includes("add in")?De=ye.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===ye?De="Big Data File Share":"Compact Tile Package"===ye?De="Tile Package (tpkx)":"OGCFeatureServer"===ye?De="OGC Feature Layer":"web mapping application"===ye&&fe.includes("configurableApp")&&(De="Instant App"),De}readExtent(ye){return ye&&ye.length?new oe.Z(ye[0][0],ye[0][1],ye[1][0],ye[1][1]):null}get iconUrl(){const ye=this.type&&this.type.toLowerCase()||"",fe=this.typeKeywords||[];let Ce,ge=!1,Te=!1,Le=!1,je=!1,ze=!1,Ee=!1;return ye.indexOf("service")>0||"feature collection"===ye||"kml"===ye||"wms"===ye||"wmts"===ye||"wfs"===ye?(ge=fe.includes("Hosted Service"),"feature service"===ye||"feature collection"===ye||"kml"===ye||"wfs"===ye?(Te=fe.includes("Table"),Le=fe.includes("Route Layer"),je=fe.includes("Markup"),ze=fe.includes("Spatiotemporal"),Ee=fe.includes("UtilityNetwork"),Ce=ze&&Te?"spatiotemporaltable":Te?"table":Le?"routelayer":je?"markup":ze?"spatiotemporal":ge?"featureshosted":Ee?"utilitynetwork":"features"):Ce="map service"===ye||"wms"===ye||"wmts"===ye?ge||fe.includes("Tiled")||"wmts"===ye?"maptiles":"mapimages":"scene service"===ye?fe.includes("Line")?"sceneweblayerline":fe.includes("3DObject")?"sceneweblayermultipatch":fe.includes("Point")?"sceneweblayerpoint":fe.includes("IntegratedMesh")?"sceneweblayermesh":fe.includes("PointCloud")?"sceneweblayerpointcloud":fe.includes("Polygon")?"sceneweblayerpolygon":fe.includes("Building")?"sceneweblayerbuilding":fe.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===ye?fe.includes("Elevation 3D Layer")?"elevationlayer":fe.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===ye?"streamlayer":"video service"===ye?"mediaservice":"vector tile service"===ye?"vectortile":"datastore catalog service"===ye?"datastorecollection":"geocoding service"===ye?"geocodeservice":"geoprocessing service"===ye?fe.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"geodata service"===ye?"geodataservice":"layers"):Ce="web map"===ye||"cityengine web scene"===ye?"maps":"web scene"===ye?fe.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===ye&&fe.includes("configurableApp")?"instantapps":"web mapping application"===ye||"mobile application"===ye||"application"===ye||"operation view"===ye||"desktop application"===ye?"apps":"map document"===ye||"map package"===ye||"published map"===ye||"scene document"===ye||"globe document"===ye||"basemap package"===ye||"mobile basemap package"===ye||"mobile map package"===ye||"project package"===ye||"project template"===ye||"pro map"===ye||"layout"===ye||"layer"===ye&&fe.includes("ArcGIS Pro")||"explorer map"===ye&&fe.indexOf("Explorer Document")?"mapsgray":"service definition"===ye||"csv"===ye||"shapefile"===ye||"cad drawing"===ye||"geojson"===ye||"360 vr experience"===ye||"netcdf"===ye||"administrative report"===ye?"datafiles":"explorer add in"===ye||"desktop add in"===ye||"windows viewer add in"===ye||"windows viewer configuration"===ye?"appsgray":"arcgis pro add in"===ye||"arcgis pro configuration"===ye?"addindesktop":"rule package"===ye||"file geodatabase"===ye||"sqlite geodatabase"===ye||"csv collection"===ye||"kml collection"===ye||"windows mobile package"===ye||"map template"===ye||"desktop application template"===ye||"gml"===ye||"arcpad package"===ye||"code sample"===ye||"form"===ye||"document link"===ye||"earth configuration"===ye||"operations dashboard add in"===ye||"rules package"===ye||"image"===ye||"workflow manager package"===ye||"explorer map"===ye&&fe.includes("Explorer Mapping Application")||fe.includes("Document")?"datafilesgray":"network analysis service"===ye||"geoprocessing service"===ye||"geodata service"===ye||"geometry service"===ye||"geoprocessing package"===ye||"locator package"===ye||"geoprocessing sample"===ye||"workflow manager service"===ye?"toolsgray":"layer"===ye||"layer package"===ye||"explorer layer"===ye?"layersgray":"scene package"===ye?"scenepackage":"mobile scene package"===ye?"mobilescenepackage":"tile package"===ye||"compact tile package"===ye?"tilepackage":"task file"===ye?"taskfile":"report template"===ye?"report-template":"statistical data collection"===ye?"statisticaldatacollection":"insights workbook"===ye?"workbook":"insights model"===ye?"insightsmodel":"insights page"===ye?"insightspage":"insights theme"===ye?"insightstheme":"hub initiative"===ye?"hubinitiative":"hubpage"===ye?"hubpage":"hub event"===ye?"hubevent":"hub site application"===ye?"hubsite":"hub project"===ye?"hubproject":"relational database connection"===ye?"relationaldatabaseconnection":"big data file share"===ye?"datastorecollection":"image collection"===ye?"imagecollection":"style"===ye?"style":"desktop style"===ye?"desktopstyle":"dashboard"===ye?"dashboard":"raster function template"===ye?"rasterprocessingtemplate":"vector tile package"===ye?"vectortilepackage":"ortho mapping project"===ye?"orthomappingproject":"ortho mapping template"===ye?"orthomappingtemplate":"solution"===ye?"solutions":"geopackage"===ye?"geopackage":"deep learning package"===ye?"deeplearningpackage":"real time analytic"===ye?"realtimeanalytics":"big data analytic"===ye?"bigdataanalytics":"feed"===ye?"feed":"excalibur imagery project"===ye?"excaliburimageryproject":"notebook"===ye?"notebook":"storymap"===ye?"storymap":"survey123 add in"===ye?"survey123addin":"mission"===ye?"mission":"mission report"===ye?"missionreport":"quickcapture project"===ye?"quickcaptureproject":"pro report"===ye?"proreport":"urban model"===ye?"urbanmodel":"web experience"===ye?"experiencebuilder":"web experience template"===ye?"webexperiencetemplate":"experience builder widget"===ye?"experiencebuilderwidget":"experience builder widget package"===ye?"experiencebuilderwidgetpackage":"workflow"===ye?"workflow":"insights script"===ye?"insightsscript":"kernel gateway connection"===ye?"kernelgatewayconnection":"hub initiative template"===ye?"hubinitiativetemplate":"storymap theme"===ye?"storymaptheme":"knowledge graph"===ye?"knowledgegraph":"native application"===ye?"nativeapp":"native application installer"===ye?"nativeappinstaller":"link chart"===ye?"linkchart":"investigation"===ye?"investigation":"ogcfeatureserver"===ye?"features":"pro project"===ye?"proproject":"insights workbook package"===ye?"insightsworkbookpackage":"apache parquet"===ye?"apacheparquet":"notebook code snippets"===ye?"notebookcodesnippets":"suitability model"===ye?"suitabilitymodel":"esri classifier definition"===ye?"classifierdefinition":"esri classification schema"===ye?"classificationschema":"insights data engineering workbook"===ye?"dataengineeringworkbook":"insights data engineering model"===ye?"dataengineeringmodel":"deep learning studio project"===ye?"deeplearningproject":"maps",Ce?(0,w.V)("esri/images/portal/"+Ce+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const ye=this.get("portal.restUrl");return ye&&this.id?`${ye}/content/items/${this.id}`:null}get thumbnailUrl(){const ye=this.itemUrl,fe=this.thumbnail;return ye&&fe?this.portal._normalizeUrl(`${ye}/info/${fe}?f=json`):null}get userItemUrl(){const ye=this.get("portal.restUrl");if(!ye)return null;const fe=this.owner||this.get("portal.user.username");return fe?`${ye}/content/users/${this.ownerFolder?`${fe}/${this.ownerFolder}`:fe}/items/${this.id}`:null}load(ye){this.portal||(this.portal=ie.Z.getDefault());const fe=this.portal.load(ye).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:(0,H.pC)(ye)?ye.signal:null,query:{token:this.apiKey}}):{}).then(De=>{this.sourceJSON=De,this.read(De)});return this.addResolvingPromise(fe),Promise.resolve(this)}addRating(ye){const fe={method:"post",query:{}};return ye instanceof de&&(ye=ye.rating),isNaN(ye)||"number"!=typeof ye||(fe.query.rating=ye),this.portal._request(this.itemUrl+"/addRating",fe).then(()=>new de({rating:ye,created:new Date}))}clone(){const ye={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,W.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,W.d9)(this.categories),created:(0,W.d9)(this.created),culture:this.culture,description:this.description,extent:(0,W.d9)(this.extent),groupCategories:(0,W.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,W.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,W.d9)(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:(0,W.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,W.d9)(this.typeKeywords),url:this.url};return this.loaded&&(ye.loadStatus="loaded"),new me({sourceJSON:this.sourceJSON}).set(ye)}createPostQuery(){const ye=this.toJSON();for(const De of["tags","typeKeywords","categories"])ye[De]&&(ye[De]=ye[De].join(", "));const{extent:fe}=ye;return fe&&(ye.extent=JSON.stringify(fe)),ye}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(ye="json",fe){return this.portal._request(this.itemUrl+"/data",{responseType:ye,...fe,query:{token:this.apiKey}})}fetchRating(ye){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...ye}).then(fe=>null!=fe.rating?(fe.created=new Date(fe.created),new de(fe)):null)}fetchRelatedItems(ye,fe){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...ye,token:this.apiKey},...fe},me)}getThumbnailUrl(ye){let fe=this.thumbnailUrl;return fe&&ye&&(fe+=`&w=${ye}`),fe}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(ye=>(this.sourceJSON=ye,this.read(ye),this))}update(ye){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const fe=ye&&ye.data,De={method:"post"};De.query=this.createPostQuery();for(const ve in De.query)null===De.query[ve]&&(De.query[ve]="");return De.query.clearEmptyFields=!0,null!=fe&&("string"==typeof fe?De.query.text=fe:"object"==typeof fe&&(De.query.text=JSON.stringify(fe))),this.portal._request(`${this.userItemUrl}/update`,De).then(()=>this.reload())}):Promise.reject(new B.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(ye){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const fe=ye.thumbnail,De=ye.filename,ve={method:"post"};if("string"==typeof fe)ve.query=(0,G.HK)(fe)?{data:fe}:{url:(0,G.hF)(fe)},(0,H.pC)(De)&&(ve.query.filename=De);else{const Ce=new FormData;(0,H.pC)(De)?Ce.append("file",fe,De):Ce.append("file",fe),ve.body=Ce}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,ve).then(()=>this.reload())}):Promise.reject(new B.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}fetchResources(ye={},fe){var De=this;return(0,D.Z)(function*(){return(yield T.e(587).then(T.bind(T,10587))).fetchResources(De,ye,fe)})()}addResource(ye,fe,De){var ve=this;return(0,D.Z)(function*(){const Ce=yield T.e(587).then(T.bind(T,10587));return ye.portalItem=ve,Ce.addOrUpdateResource(ye,"add",fe,De)})()}removeResource(ye,fe){var De=this;return(0,D.Z)(function*(){const ve=yield T.e(587).then(T.bind(T,10587));if(ye.portalItem&&ye.portalItem.itemUrl!==De.itemUrl)throw new B.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return ve.removeResource(De,ye,fe)})()}removeAllResources(ye){var fe=this;return(0,D.Z)(function*(){return(yield T.e(587).then(T.bind(T,10587))).removeAllResources(fe,ye)})()}resourceFromPath(ye){return new ne({portalItem:this,path:ye})}toJSON(){const ye=this.extent,fe={accessInformation:this.accessInformation,categories:(0,W.d9)(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:ye&&[[ye.xmin,ye.ymin],[ye.xmax,ye.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:(0,W.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,W.d9)(this.typeKeywords),url:this.url};return(0,W.yd)(fe)}static fromJSON(ye){if(!ye)return null;if(ye.declaredClass)throw new Error("JSON object is already hydrated");return new me({sourceJSON:ye})}_getPostQuery(){const ye=this.toJSON();for(const fe in ye)"tags"===fe&&null!==ye[fe]&&(ye[fe]=ye[fe].join(", ")),"typeKeywords"===fe&&null!==ye[fe]&&(ye[fe]=ye[fe].join(", ")),"extent"===fe&&ye[fe]&&(ye[fe]=JSON.stringify(ye[fe]));return ye}};(0,x._)([(0,$.Cb)({type:["private","shared","org","public"]})],_e.prototype,"access",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"accessInformation",void 0),(0,x._)([(0,$.Cb)({type:String})],_e.prototype,"apiKey",void 0),(0,x._)([(0,$.Cb)({json:{read:{source:"appProxies"}}})],_e.prototype,"applicationProxies",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"avgRating",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"categories",void 0),(0,x._)([(0,$.Cb)({type:Date})],_e.prototype,"created",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"culture",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"description",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"displayName",null),(0,x._)([(0,$.Cb)({type:oe.Z})],_e.prototype,"extent",void 0),(0,x._)([(0,ue.r)("extent")],_e.prototype,"readExtent",null),(0,x._)([(0,$.Cb)()],_e.prototype,"groupCategories",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"iconUrl",null),(0,x._)([(0,$.Cb)()],_e.prototype,"id",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"isLayer",null),(0,x._)([(0,$.Cb)()],_e.prototype,"itemControl",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"itemUrl",null),(0,x._)([(0,$.Cb)()],_e.prototype,"licenseInfo",void 0),(0,x._)([(0,$.Cb)({type:Date})],_e.prototype,"modified",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"name",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"numComments",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"numRatings",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"numViews",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"owner",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"ownerFolder",void 0),(0,x._)([(0,$.Cb)({type:ie.Z})],_e.prototype,"portal",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"screenshots",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"size",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"snippet",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"sourceJSON",void 0),(0,x._)([(0,$.Cb)({type:String})],_e.prototype,"spatialReference",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"tags",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"thumbnail",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"thumbnailUrl",null),(0,x._)([(0,$.Cb)()],_e.prototype,"title",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"type",void 0),(0,x._)([(0,$.Cb)()],_e.prototype,"typeKeywords",void 0),(0,x._)([(0,$.Cb)({type:String,json:{read(ye,fe){if("KML"!==fe.type)return ye;const De=this.portal?.restUrl;return ye||(ye=De&&this.id?`${De}/content/items/${this.id}/data`:null),ye}}})],_e.prototype,"url",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],_e.prototype,"userItemUrl",null),_e=me=(0,x._)([(0,ae.j)("esri.portal.PortalItem")],_e);const he=_e},6278:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ue,D=T(17626),x=T(14517),w=T(2076),B=T(58817),U=T(62208),W=T(77712),H=(T(90912),T(76898)),G=T(2004),$=T(65234),re=T(46367);const ae=new w.X({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let oe=ue=class extends x.Z{constructor(X){super(X),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(X){"asc"!==X&&"desc"!==X||this._set("sortOrder",X)}clone(){return new ue({categories:this.categories?(0,B.d9)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(X,Z){let Q,J;if(this.categories&&(Q=this.categories.map(le=>Array.isArray(le)?JSON.stringify(le):le)),this.extent){const le=(0,re.iV)(this.extent,$.Z.WGS84);(0,U.pC)(le)&&(J=`${le.xmin},${le.ymin},${le.xmax},${le.ymax}`)}let se=this.query;!this.disableExtraQuery&&X.extraQuery&&(se="("+se+")"+X.extraQuery);const ee={categories:Q,bbox:J,q:se,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(ee.sortField=this.sortField.split(",").map(le=>ae.toJSON(le.trim())).join(","),ee.sortOrder=this.sortOrder),{query:{...Z,...ee}}}};(0,D._)([(0,W.Cb)()],oe.prototype,"categories",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"disableExtraQuery",void 0),(0,D._)([(0,W.Cb)({type:G.Z})],oe.prototype,"extent",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"filter",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"num",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"query",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"sortField",void 0),(0,D._)([(0,W.Cb)()],oe.prototype,"sortOrder",null),(0,D._)([(0,W.Cb)()],oe.prototype,"start",void 0),oe=ue=(0,D._)([(0,H.j)("esri.portal.PortalQueryParams")],oe);const ie=oe},94508:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>oe});var D=T(17626),x=T(26584),w=T(86810),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898));let G=class extends w.wq{constructor(ie){super(ie),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const ie=this.get("portal.restUrl");return ie?`${ie}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new x.Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,D._)([(0,B.Cb)({type:Date})],G.prototype,"created",void 0),(0,D._)([(0,B.Cb)()],G.prototype,"id",void 0),(0,D._)([(0,B.Cb)()],G.prototype,"portal",void 0),(0,D._)([(0,B.Cb)()],G.prototype,"title",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],G.prototype,"url",null),(0,D._)([(0,B.Cb)()],G.prototype,"username",void 0),G=(0,D._)([(0,H.j)("esri.portal.PortalFolder")],G);const $=G;var ue,re=T(96245);let ae=ue=class extends w.wq{constructor(...ie){super(...ie),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const ie=this.url,X=this.thumbnail;return ie&&X?this.portal._normalizeUrl(`${ie}/info/${X}?f=json`):null}get userContentUrl(){const ie=this.get("portal.restUrl");return ie?`${ie}/content/users/${this.username}`:null}get url(){const ie=this.get("portal.restUrl");return ie?`${ie}/community/users/${this.username}`:null}addItem(ie){const X=ie&&ie.item,Z=ie&&ie.data,Q=ie&&ie.folder,J={method:"post"};X&&(J.query=X.createPostQuery(),null!=Z&&("string"==typeof Z?J.query.text=Z:"object"==typeof Z&&(J.query.text=JSON.stringify(Z))));let se=this.userContentUrl;return Q&&(se+="/"+("string"==typeof Q?Q:Q.id)),this.portal._request(se+"/addItem",J).then(ee=>(X.id=ee.id,X.portal=this.portal,X.loaded?X.reload():X.load()))}deleteItem(ie){let X=this.userContentUrl;return ie.ownerFolder&&(X+="/"+ie.ownerFolder),this.portal._request(X+`/items/${ie.id}/delete`,{method:"post"}).then(()=>{ie.id=null,ie.portal=null})}deleteItems(ie){const X=this.userContentUrl+"/deleteItems",Z=ie.map(Q=>Q.id);if(Z.length){const Q={method:"post",query:{items:Z.join(",")}};return this.portal._request(X,Q).then(()=>{ie.forEach(J=>{J.id=null,J.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(X=>{let Z;return Z=X&&X.folders?X.folders.map(Q=>{const J=$.fromJSON(Q);return J.portal=this.portal,J}):[],Z})}fetchGroups(){return this.portal._request(this.url).then(ie=>{let X;return X=ie&&ie.groups?ie.groups.map(Z=>{const Q=re.default.fromJSON(Z);return Q.portal=this.portal,Q}):[],X})}fetchItems(ie){ie||(ie={});let X,Z=this.userContentUrl;return ie.folder&&(Z+="/"+ie.folder.id),Promise.resolve().then(T.bind(T,55463)).then(({default:Q})=>(X=Q,this.portal._request(Z,{query:{folders:!1,num:ie.num||10,start:ie.start||1,sortField:ie.sortField||"created",sortOrder:ie.sortOrder||"asc"}}))).then(Q=>{let J;return Q&&Q.items?(J=Q.items.map(se=>{const ee=X.fromJSON(se);return ee.portal=this.portal,ee}),Promise.all(J.map(se=>se.load())).catch(se=>se).then(()=>({items:J,nextStart:Q.nextStart,total:Q.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(ie=>ie.tags)}getThumbnailUrl(ie){let X=this.thumbnailUrl;return X&&ie&&(X+=`&w=${ie}`),X}queryFavorites(ie){return this.favGroupId?(this._favGroup||(this._favGroup=new re.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(ie)):Promise.reject(new x.Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new x.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(ie){if(!ie)return null;if(ie.declaredClass)throw new Error("JSON object is already hydrated");const X=new ue;return X.sourceJSON=ie,X.read(ie),X}};(0,D._)([(0,B.Cb)()],ae.prototype,"access",void 0),(0,D._)([(0,B.Cb)({type:Date})],ae.prototype,"created",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"culture",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"description",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"email",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"favGroupId",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"fullName",void 0),(0,D._)([(0,B.Cb)({type:Date})],ae.prototype,"modified",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"orgId",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"portal",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"preferredView",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"privileges",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"region",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"role",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"roleId",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"sourceJSON",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"thumbnail",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],ae.prototype,"thumbnailUrl",null),(0,D._)([(0,B.Cb)()],ae.prototype,"units",void 0),(0,D._)([(0,B.Cb)({readOnly:!0})],ae.prototype,"userContentUrl",null),(0,D._)([(0,B.Cb)({readOnly:!0})],ae.prototype,"url",null),(0,D._)([(0,B.Cb)()],ae.prototype,"username",void 0),(0,D._)([(0,B.Cb)()],ae.prototype,"userType",void 0),ae=ue=(0,D._)([(0,H.j)("esri.portal.PortalUser")],ae);const oe=ae},35082:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{getGeometryServiceURL:()=>Y,projectGeometry:()=>G});var D=T(15861),x=T(59318),w=T(26584),B=T(84687),U=T(68886),W=T(77294);function Y(){return H.apply(this,arguments)}function H(){return(H=(0,D.Z)(function*(re=null,ue){if(x.Z.geometryServiceUrl)return x.Z.geometryServiceUrl;if(!re)throw new w.Z("internal:geometry-service-url-not-configured");let ae;ae="portal"in re?re.portal||B.Z.getDefault():re,yield ae.load({signal:ue});const oe=ae.helperServices?.geometry?.url;if(!oe)throw new w.Z("internal:geometry-service-url-not-configured");return oe})).apply(this,arguments)}function G(re,ue){return $.apply(this,arguments)}function $(){return($=(0,D.Z)(function*(re,ue,ae=null,oe){const ie=yield Y(ae,oe),X=new W.Z;X.geometries=[re],X.outSpatialReference=ue;const Z=yield(0,U.i)(ie,X,{signal:oe});if(Z&&Array.isArray(Z)&&1===Z.length)return Z[0];throw new w.Z("internal:geometry-service-projection-failed")})).apply(this,arguments)}},58926:(qe,xe,T)=>{"use strict";T.d(xe,{v:()=>x});const x=(0,T(2076).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},4832:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>fe});var le,D=T(15861),x=T(17626),w=T(20383),B=T(2076),U=T(58817),W=T(63290),Y=T(62208),H=T(77712),G=T(66656),$=T(55342),re=T(68653),ue=T(76898),ae=T(99433),oe=T(90912),ie=T(36630),X=T(69357),Z=T(2432),Q=T(74400),J=T(76457),se=T(10914),ee=T(46679);const ne=W.Z.getLogger("esri.renderers.ClassBreaksRenderer"),de="percent-of-total",me="field",_e=new B.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:de,esriNormalizeByField:me}),he=(0,oe.se)(Q.Z);let ye=le=class extends((0,Z.W)(X.Z)){constructor(De){super(De),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(De,ve,Ce){if(!Array.isArray(De))return;let ge=ve.minValue;return De.map(Te=>{const Le=new Q.Z;return Le.read(Te,Ce),null==Le.minValue&&(Le.minValue=ge),null==Le.maxValue&&(Le.maxValue=Le.minValue),ge=Le.maxValue,Le})}writeClassBreakInfos(De,ve,Ce,ge){const Te=De.map(Le=>Le.write({},ge));this._areClassBreaksConsecutive()&&Te.forEach(Le=>delete Le.classMinValue),ve[Ce]=Te}castField(De){return null==De?De:"function"==typeof De?(ne.error(".field: field must be a string value"),null):(0,oe.Zs)(De)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let De=this._get("normalizationType");const ve=!!this.normalizationField,Ce=null!=this.normalizationTotal;return ve||Ce?(De=(ve?me:Ce&&de)||null,ve&&Ce&&ne.warn("warning: both normalizationField and normalizationTotal are set!")):De!==me&&De!==de||(De=null),De}set normalizationType(De){this._set("normalizationType",De)}addClassBreakInfo(De,ve,Ce){let ge=null;ge="number"==typeof De?new Q.Z({minValue:De,maxValue:ve,symbol:(0,w.se)(Ce)}):he((0,U.d9)(De)),this.classBreakInfos.push(ge),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(De,ve){const Ce=this.classBreakInfos.length;for(let ge=0;ge<Ce;ge++){const Te=[this.classBreakInfos[ge].minValue,this.classBreakInfos[ge].maxValue];if(Te[0]===De&&Te[1]===ve){this.classBreakInfos.splice(ge,1);break}}}getBreakIndex(De,ve){return this.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))&&ne.warn(""),this.valueExpression?this._getBreakIndexForExpression(De,ve):this._getBreakIndexForField(De)}getClassBreakInfo(De,ve){var Ce=this;return(0,D.Z)(function*(){let ge=ve;Ce.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))&&(ge={...ge,arcade:yield(0,ee.LC)()});const Te=Ce.getBreakIndex(De,ge);return-1!==Te?Ce.classBreakInfos[Te]:null})()}getSymbol(De,ve){if(this.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade)))return void ne.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const Ce=this.getBreakIndex(De,ve);return Ce>-1?this.classBreakInfos[Ce].symbol:this.defaultSymbol}getSymbolAsync(De,ve){var Ce=this;return(0,D.Z)(function*(){let ge=ve;if(Ce.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))){const Le=yield(0,ee.LC)(),{arcadeUtils:je}=Le;je.hasGeometryOperations(Ce.valueExpression)&&(yield je.enableGeometryOperations()),ge={...ge,arcade:Le}}const Te=Ce.getBreakIndex(De,ge);return Te>-1?Ce.classBreakInfos[Te].symbol:Ce.defaultSymbol})()}getSymbols(){const De=[];return this.classBreakInfos.forEach(ve=>{ve.symbol&&De.push(ve.symbol)}),this.defaultSymbol&&De.push(this.defaultSymbol),De}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((De,ve)=>De+ve.getAttributeHash(),"")}getMeshHash(){const De=JSON.stringify(this.backgroundFillSymbol),ve=JSON.stringify(this.defaultSymbol),Ce=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${De}.${ve}.${this.classBreakInfos.reduce((ge,Te)=>ge+Te.getMeshHash(),"")}.${Ce}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new le({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,U.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,U.d9)(this.visualVariables),legendOptions:(0,U.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}collectRequiredFields(De,ve){var Ce=this;return(0,D.Z)(function*(){const ge=[Ce.collectVVRequiredFields(De,ve),Ce.collectSymbolFields(De,ve)];yield Promise.all(ge)})()}collectSymbolFields(De,ve){var Ce=this;return(0,D.Z)(function*(){const ge=[...Ce.getSymbols().map(Te=>Te.collectRequiredFields(De,ve)),(0,ie.io)(De,ve,Ce.valueExpression)];(0,ie.AB)(De,ve,Ce.field),(0,ie.AB)(De,ve,Ce.normalizationField),yield Promise.all(ge)})()}_getBreakIndexForExpression(De,ve){const{viewingMode:Ce,scale:ge,spatialReference:Te,arcade:Le}=(0,Y.Pt)(ve,{});let je=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const ze=(0,Y.Wg)(Le).arcadeUtils;if(!je){const Ae=ze.createSyntaxTree(this.valueExpression);je=ze.createFunction(Ae),this._compiledValueExpression.compiledFunction=je}this._compiledValueExpression.valueExpression=this.valueExpression;const Ee=ze.executeFunction(je,ze.createExecContext(De,ze.getViewInfo({viewingMode:Ce,scale:ge,spatialReference:Te})));return this._getBreakIndexfromInfos(Ee)}_getBreakIndexForField(De){const Ce=De.attributes,ge=this.normalizationType;let Te=parseFloat(Ce[this.field]);if(ge){const Le=this.normalizationTotal,je=parseFloat(Ce[this.normalizationField]);if("log"===ge)Te=Math.log(Te)*Math.LOG10E;else if(ge!==de||isNaN(Le)){if(ge===me&&!isNaN(je)){if(isNaN(Te)||isNaN(je))return-1;Te/=je}}else Te=Te/Le*100}return this._getBreakIndexfromInfos(Te)}_getBreakIndexfromInfos(De){const ve=this.isMaxInclusive;if(null!=De&&"number"==typeof De&&!isNaN(De))for(let Ce=0;Ce<this.classBreakInfos.length;Ce++){const ge=[this.classBreakInfos[Ce].minValue,this.classBreakInfos[Ce].maxValue];if(ge[0]<=De&&(ve?De<=ge[1]:De<ge[1]))return Ce}return-1}_areClassBreaksConsecutive(){const De=this.classBreakInfos,ve=De.length;for(let Ce=1;Ce<ve;Ce++)if(De[Ce-1].maxValue!==De[Ce].minValue)return!1;return!0}};(0,x._)([(0,H.Cb)(J.K)],ye.prototype,"backgroundFillSymbol",void 0),(0,x._)([(0,H.Cb)({type:[Q.Z]})],ye.prototype,"classBreakInfos",void 0),(0,x._)([(0,re.r)("classBreakInfos")],ye.prototype,"readClassBreakInfos",null),(0,x._)([(0,ae.c)("classBreakInfos")],ye.prototype,"writeClassBreakInfos",null),(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],ye.prototype,"defaultLabel",void 0),(0,x._)([(0,H.Cb)(J.G)],ye.prototype,"defaultSymbol",void 0),(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],ye.prototype,"field",void 0),(0,x._)([(0,G.p)("field")],ye.prototype,"castField",null),(0,x._)([(0,H.Cb)({type:Boolean})],ye.prototype,"isMaxInclusive",void 0),(0,x._)([(0,H.Cb)({type:se.I,json:{write:!0}})],ye.prototype,"legendOptions",void 0),(0,x._)([(0,H.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ye.prototype,"minValue",null),(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],ye.prototype,"normalizationField",void 0),(0,x._)([(0,H.Cb)({type:Number,cast:De=>(0,oe.q9)(De),json:{write:!0}})],ye.prototype,"normalizationTotal",void 0),(0,x._)([(0,H.Cb)({type:_e.apiValues,value:null,json:{type:_e.jsonValues,read:_e.read,write:_e.write}})],ye.prototype,"normalizationType",null),(0,x._)([(0,$.J)({classBreaks:"class-breaks"})],ye.prototype,"type",void 0),(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],ye.prototype,"valueExpression",void 0),(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],ye.prototype,"valueExpressionTitle",void 0),ye=le=(0,x._)([(0,ue.j)("esri.renderers.ClassBreaksRenderer")],ye);const fe=ye},49067:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var ue,D=T(15861),x=T(17626),w=T(58817),B=T(77712),W=(T(90912),T(76898)),Y=T(99433),H=T(36630),G=T(69357),$=T(2432),re=T(29996);let ae=ue=class extends((0,$.W)(G.Z)){constructor(ie){super(ie),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new re.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(ie,X){ie&&(X.scalingExpressionInfo={expression:ie,returnType:"number"})}writeVisualVariables(ie,X,Z,Q){Q?.origin||super.writeVisualVariables(ie,X,Z,Q)}clone(){return new ue({config:(0,w.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,w.d9)(this.fieldMap),url:(0,w.d9)(this.url),visualVariables:(0,w.d9)(this.visualVariables)})}getSymbolAsync(ie,X){var Z=this;return(0,D.Z)(function*(){return Z._loader.getSymbolAsync(ie,X)})()}collectRequiredFields(ie,X){var Z=this;return(0,D.Z)(function*(){yield Z.collectVVRequiredFields(ie,X),Z.scaleExpression&&(yield(0,H.io)(ie,X,Z.scaleExpression));for(const Q in Z.fieldMap){const J=Z.fieldMap[Q];X.has(J)&&ie.add(J)}})()}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ie,X)=>ie+X.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,x._)([(0,B.Cb)({type:re.DictionaryLoader})],ae.prototype,"_loader",null),(0,x._)([(0,B.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ae.prototype,"config",void 0),(0,x._)([(0,B.Cb)({type:Object,json:{write:!0}})],ae.prototype,"fieldMap",void 0),(0,x._)([(0,B.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ae.prototype,"scaleExpression",void 0),(0,x._)([(0,Y.c)("scaleExpression")],ae.prototype,"writeData",null),(0,x._)([(0,B.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(ie){return{enabled:!!ie&&!!this.scaleExpression}}}}})],ae.prototype,"scaleExpressionTitle",void 0),(0,x._)([(0,B.Cb)({type:String,json:{write:!0}})],ae.prototype,"url",void 0),(0,x._)([(0,Y.c)("visualVariables")],ae.prototype,"writeVisualVariables",null),ae=ue=(0,x._)([(0,W.j)("esri.renderers.DictionaryRenderer")],ae);const oe=ae},96794:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ce});var Z,D=T(15861),x=T(17626),w=T(91558),B=T(58817),U=T(83960),Y=(T(90912),T(55342)),H=T(77712),G=T(76898),$=T(36630),re=T(69357),ue=T(2432),ae=T(41832),oe=T(86810);T(85931),T(8314);let Q=Z=class extends oe.wq{constructor(){super(...arguments),this.unit=null}clone(){return new Z({unit:this.unit})}};(0,x._)([(0,H.Cb)({type:String,json:{write:!0}})],Q.prototype,"unit",void 0),Q=Z=(0,x._)([(0,G.j)("esri.renderers.support.DotDensityLegendOptions")],Q);const J=Q;var le,se=T(88493),ee=T(52068);let ne=le=class extends((0,ue.W)(re.Z)){constructor(de){super(de),this.attributes=null,this.backgroundColor=new w.Z([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ee.Z,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(de){if(null==this.referenceScale)return this.dotValue;const me=de/this.referenceScale*this.dotValue;return me<1?1:me}getSymbol(){return new se.Z({outline:this.outline})}getSymbolAsync(){var de=this;return(0,D.Z)(function*(){return de.getSymbol()})()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((de,me)=>de+me.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new le({attributes:(0,B.d9)(this.attributes),backgroundColor:(0,B.d9)(this.backgroundColor),dotBlendingEnabled:(0,B.d9)(this.dotBlendingEnabled),dotShape:(0,B.d9)(this.dotShape),dotSize:(0,B.d9)(this.dotSize),dotValue:(0,B.d9)(this.dotValue),legendOptions:(0,B.d9)(this.legendOptions),outline:(0,B.d9)(this.outline),referenceScale:(0,B.d9)(this.referenceScale),visualVariables:(0,B.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(de=>de.field||de.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}collectRequiredFields(de,me){var _e=this;return(0,D.Z)(function*(){yield _e.collectVVRequiredFields(de,me);for(const he of _e.attributes)he.valueExpression&&(yield(0,$.io)(de,me,he.valueExpression)),he.field&&de.add(he.field)})()}};(0,x._)([(0,H.Cb)({type:[ae.Z],json:{write:!0}})],ne.prototype,"attributes",void 0),(0,x._)([(0,H.Cb)({type:w.Z,json:{write:!0}})],ne.prototype,"backgroundColor",void 0),(0,x._)([(0,H.Cb)({type:Boolean}),(0,U.B)("dotBlendingEnabled")],ne.prototype,"blendDots",void 0),(0,x._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],ne.prototype,"dotBlendingEnabled",void 0),(0,x._)([(0,H.Cb)({type:String,json:{write:!1}})],ne.prototype,"dotShape",void 0),(0,x._)([(0,H.Cb)({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],ne.prototype,"dotSize",void 0),(0,x._)([(0,H.Cb)({type:J,json:{write:!0}})],ne.prototype,"legendOptions",void 0),(0,x._)([(0,H.Cb)({type:ee.Z,json:{default:null,write:!0}})],ne.prototype,"outline",void 0),(0,x._)([(0,H.Cb)({type:Number,json:{write:!0}})],ne.prototype,"dotValue",void 0),(0,x._)([(0,H.Cb)({type:Number}),(0,U.B)("dotValue")],ne.prototype,"referenceDotValue",void 0),(0,x._)([(0,H.Cb)({type:Number,json:{write:!0}})],ne.prototype,"referenceScale",void 0),(0,x._)([(0,H.Cb)({type:Number,json:{write:!0}})],ne.prototype,"seed",void 0),(0,x._)([(0,Y.J)({dotDensity:"dot-density"})],ne.prototype,"type",void 0),ne=le=(0,x._)([(0,G.j)("esri.renderers.DotDensityRenderer")],ne);const ce=ne},69747:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>fe});var D=T(15861),x=T(17626),w=T(91558),U=(T(20383),T(55538)),W=T(58817),Y=T(63290),H=T(50618),G=T(23841),$=T(77712),re=T(52323),ae=(T(90912),T(55342)),oe=T(76898),ie=T(36630),X=T(69357),Z=T(15312),Q=T(52372),J=T(79608),se=T(86810);T(85931),T(8314);let ne=class extends((0,J.J)(se.wq)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,x._)([(0,$.Cb)({type:String,json:{write:!0}})],ne.prototype,"minLabel",void 0),(0,x._)([(0,$.Cb)({type:String,json:{write:!0}})],ne.prototype,"maxLabel",void 0),(0,x._)([(0,$.Cb)({type:String,json:{write:!0}})],ne.prototype,"title",void 0),ne=(0,x._)([(0,oe.j)("esri.renderers.support.HeatmapLegendOptions")],ne);var me,ce=T(36859),de=T(57213);const _e=Y.Z.getLogger("esri.renderers.HeatmapRenderer");function he(De){if(null!=De){const{maxDensity:ve,minDensity:Ce,radius:ge}=De;if(null!=ve||null!=Ce||null!=ge){const{blurRadius:Te,maxPixelIntensity:Le,minPixelIntensity:je,...ze}=De;return ze}}return De}let ye=me=class extends X.Z{constructor(De){super(De),this.authoringInfo=null,this.colorStops=[new Q.Z({ratio:0,color:new w.Z("rgba(255, 140, 0, 0)")}),new Q.Z({ratio:.75,color:new w.Z("rgba(255, 140, 0, 1)")}),new Q.Z({ratio:.9,color:new w.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(De){return he(De)}get blurRadius(){return(0,ce.AJ)(this.radius)}set blurRadius(De){const ve=this.maxPixelIntensity,Ce=this.minPixelIntensity;this._set("radius",(0,ce.k0)(De)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",ve*this._pixelIntensityToDensity),this._set("minDensity",Ce*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(De){this._set("maxDensity",De*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(De){this._set("minDensity",De*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(ce.nu**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(De,ve){this._warnedProps[De]||"user"===(0,re.vw)(this).getDefaultOrigin()&&(this._warnedProps[De]=!0,(0,H.Os)(()=>{(0,U.Mr)(_e,De,{replacement:`${String(ve)} (suggested value: ${this._get(ve)})`,version:"4.24"})}))}read(De,ve){De=he(De),super.read(De,ve)}getSymbol(){const ve=Math.min(this.radius*(0!==this.referenceScale?5:1),(0,G.Wz)(256));return new de.Z({size:ve})}getSymbolAsync(){var De=this;return(0,D.Z)(function*(){return De.getSymbol()})()}getSymbols(){return[this.getSymbol()]}collectRequiredFields(De,ve){var Ce=this;return(0,D.Z)(function*(){const ge=Ce.field,Te=Ce.valueExpression;ge&&"string"==typeof ge&&(yield(0,ie.AB)(De,ve,ge)),Te&&"string"==typeof Te&&(yield(0,ie.io)(De,ve,Te))})()}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new me({colorStops:(0,W.d9)(this.colorStops),field:this.field,legendOptions:(0,W.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,x._)([(0,$.Cb)({type:Z.Z,json:{write:!1}})],ye.prototype,"authoringInfo",void 0),(0,x._)([(0,$.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ye.prototype,"blurRadius",null),(0,x._)([(0,$.Cb)({type:[Q.Z],json:{write:!0}})],ye.prototype,"colorStops",void 0),(0,x._)([(0,$.Cb)({type:String,json:{write:!0}})],ye.prototype,"field",void 0),(0,x._)([(0,$.Cb)({type:Number,json:{write:{overridePolicy:(De,ve,Ce)=>({enabled:null==Ce})},origins:{"web-scene":{write:!1}}}})],ye.prototype,"fieldOffset",void 0),(0,x._)([(0,$.Cb)({type:ne,json:{write:!0}})],ye.prototype,"legendOptions",void 0),(0,x._)([(0,$.Cb)({type:Number,json:{write:!0}})],ye.prototype,"maxDensity",void 0),(0,x._)([(0,$.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ye.prototype,"maxPixelIntensity",null),(0,x._)([(0,$.Cb)({type:Number,json:{write:!0}})],ye.prototype,"minDensity",void 0),(0,x._)([(0,$.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ye.prototype,"minPixelIntensity",null),(0,x._)([(0,$.Cb)({type:Number,cast:G.t_,json:{write:!0}})],ye.prototype,"radius",void 0),(0,x._)([(0,$.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],ye.prototype,"referenceScale",void 0),(0,x._)([(0,ae.J)({heatmap:"heatmap"})],ye.prototype,"type",void 0),(0,x._)([(0,$.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ye.prototype,"valueExpression",void 0),(0,x._)([(0,$.Cb)({type:String})],ye.prototype,"valueExpressionTitle",void 0),(0,x._)([(0,$.Cb)({readOnly:!0})],ye.prototype,"_pixelIntensityToDensity",null),ye=me=(0,x._)([(0,oe.j)("esri.renderers.HeatmapRenderer")],ye);const fe=ye},40425:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ce});var D=T(15861),x=T(17626),w=T(91558),U=(T(20383),T(79608)),W=T(23841),Y=T(77712),re=(T(85931),T(8314),T(90912),T(55342)),ue=T(76898),ae=T(36630),oe=T(69357),ie=T(2432),X=T(41832),Z=T(86810);let Q=class extends((0,U.J)(Z.wq)){constructor(){super(...arguments),this.color=new w.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,x._)([(0,Y.Cb)({type:w.Z,json:{write:!0}})],Q.prototype,"color",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],Q.prototype,"label",void 0),(0,x._)([(0,Y.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],Q.prototype,"threshold",void 0),Q=(0,x._)([(0,ue.j)("esri.renderers.support.OthersCategory")],Q);let J=class extends((0,U.J)(Z.wq)){constructor(){super(...arguments),this.title=null}};(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],J.prototype,"title",void 0),J=(0,x._)([(0,ue.j)("esri.renderers.support.PieChartLegendOptions")],J);var se=T(57213),ee=T(88493),le=T(52068);let ne=class extends((0,ie.W)((0,U.J)(oe.Z))){constructor(de){super(de),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new w.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Q,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new se.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}getSymbolAsync(){var de=this;return(0,D.Z)(function*(){return de.getSymbol()})()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((de,me)=>de+me.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((de,me)=>de+JSON.stringify(me),"")}collectRequiredFields(de,me){var _e=this;return(0,D.Z)(function*(){yield _e.collectVVRequiredFields(de,me);for(const he of _e.attributes)he.valueExpression&&(yield(0,ae.io)(de,me,he.valueExpression)),he.field&&de.add(he.field)})()}};(0,x._)([(0,Y.Cb)({type:[X.Z],json:{write:!0}})],ne.prototype,"attributes",void 0),(0,x._)([(0,Y.Cb)({type:ee.Z,json:{default:null,write:!0}})],ne.prototype,"backgroundFillSymbol",void 0),(0,x._)([(0,Y.Cb)({type:w.Z,json:{write:!0}})],ne.prototype,"defaultColor",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],ne.prototype,"defaultLabel",void 0),(0,x._)([(0,Y.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],ne.prototype,"holePercentage",void 0),(0,x._)([(0,Y.Cb)({type:Q,json:{write:!0}})],ne.prototype,"othersCategory",void 0),(0,x._)([(0,Y.Cb)({type:J,json:{write:!0}})],ne.prototype,"legendOptions",void 0),(0,x._)([(0,Y.Cb)({type:le.Z,json:{default:null,write:!0}})],ne.prototype,"outline",void 0),(0,x._)([(0,Y.Cb)({type:Number,cast:W.t_,json:{write:!0}})],ne.prototype,"size",void 0),(0,x._)([(0,re.J)({pieChart:"pie-chart"})],ne.prototype,"type",void 0),ne=(0,x._)([(0,ue.j)("esri.renderers.PieChartRenderer")],ne);const ce=ne},69357:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var D=T(15861),x=T(17626),w=T(2076),B=T(86810),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898)),$=T(15312);const re=new w.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ue=class extends B.wq{constructor(oe){super(oe),this.authoringInfo=null,this.type=null}getRequiredFields(oe){var ie=this;return(0,D.Z)(function*(){if(!ie.collectRequiredFields)return[];const X=new Set;return yield ie.collectRequiredFields(X,oe),Array.from(X).sort()})()}getSymbol(oe,ie){}getSymbolAsync(oe,ie){return(0,D.Z)(function*(){})()}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,x._)([(0,U.Cb)({type:$.Z,json:{write:!0}})],ue.prototype,"authoringInfo",void 0),(0,x._)([(0,U.Cb)({type:re.apiValues,readOnly:!0,json:{type:re.jsonValues,read:!1,write:{writer:re.write,ignoreOrigin:!0}}})],ue.prototype,"type",void 0),ue=(0,x._)([(0,G.j)("esri.renderers.Renderer")],ue);const ae=ue},40342:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var re,D=T(15861),x=T(17626),w=T(58817),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(69357),G=T(2432),$=T(76457);let ue=re=class extends((0,G.W)(H.Z)){constructor(oe){super(oe),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(oe,ie){var X=this;return(0,D.Z)(function*(){yield Promise.all([X.collectSymbolFields(oe,ie),X.collectVVRequiredFields(oe,ie)])})()}collectSymbolFields(oe,ie){var X=this;return(0,D.Z)(function*(){yield Promise.all(X.getSymbols().map(Z=>Z.collectRequiredFields(oe,ie)))})()}getSymbol(oe,ie){return this.symbol}getSymbolAsync(oe,ie){var X=this;return(0,D.Z)(function*(){return X.symbol})()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((oe,ie)=>oe+ie.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((oe,ie)=>oe+JSON.stringify(ie),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new re({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,w.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,x._)([(0,B.Cb)({type:String,json:{write:!0}})],ue.prototype,"description",void 0),(0,x._)([(0,B.Cb)({type:String,json:{write:!0}})],ue.prototype,"label",void 0),(0,x._)([(0,B.Cb)($.G)],ue.prototype,"symbol",void 0),(0,x._)([(0,W.J)({simple:"simple"})],ue.prototype,"type",void 0),ue=re=(0,x._)([(0,Y.j)("esri.renderers.SimpleRenderer")],ue);const ae=ue},14726:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ve});var he,D=T(15861),x=T(17626),w=T(20383),B=T(26584),U=T(58817),W=T(63290),Y=T(62208),H=T(94113),G=T(77712),$=T(66656),re=T(55342),ue=T(68653),ae=T(76898),oe=T(99433),ie=T(84682),X=T(90912),Z=T(36630),Q=T(84687),J=T(69357),se=T(2432),ee=T(76457),le=T(10914),ne=T(87266),ce=T(46679),de=T(29840),me=T(71937),_e=T(12874);const ye=W.Z.getLogger("esri.renderers.UniqueValueRenderer"),fe=(0,X.se)(ne.Z);let De=he=class extends((0,se.W)(J.Z)){constructor(Ce){super(Ce),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(ge,Te){if(!ge&&!Te)return;if(!ge||!Te)return{type:"complete",oldValue:ge,newValue:Te};let Le=!1;const je={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let ze=0;ze<Te.length;ze++){const Ee=ge.find(Ae=>Ae.value===Te[ze].value);Ee?(0,ie.Hg)(Ee,Te[ze])?(je.changed.push({type:"complete",oldValue:Ee,newValue:Te[ze]}),Le=!0):je.unchanged.push({oldValue:Ee,newValue:Te[ze]}):(je.added.push(Te[ze]),Le=!0)}for(let ze=0;ze<ge.length;ze++)Te.find(Ee=>Ee.value===ge[ze].value)||(je.removed.push(ge[ze]),Le=!0);return Le?je:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(Ce){return null==Ce||"function"==typeof Ce?Ce:(0,X.Zs)(Ce)}writeField(Ce,ge,Te,Le){"string"==typeof Ce?ge[Te]=Ce:Le&&Le.messages?Le.messages.push(new B.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):ye.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(Ce){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",Ce)}readPortal(Ce,ge,Te){return Te.portal||Q.Z.getDefault()}readStyleOrigin(Ce,ge,Te){if(ge.styleName)return Object.freeze({styleName:ge.styleName});if(ge.styleUrl){const Le=(0,de.f)(ge.styleUrl,Te);return Object.freeze({styleUrl:Le})}}writeStyleOrigin(Ce,ge,Te,Le){Ce.styleName?ge.styleName=Ce.styleName:Ce.styleUrl&&(ge.styleUrl=(0,de.t)(Ce.styleUrl,Le))}set uniqueValueInfos(Ce){this.styleOrigin?ye.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",Ce),this._updateValueInfoMap())}addUniqueValueInfo(Ce,ge){if(this.styleOrigin)return void ye.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let Te;Te="object"==typeof Ce?fe(Ce):new ne.Z({value:Ce,symbol:(0,w.se)(ge)}),this.uniqueValueInfos.push(Te),this._valueInfoMap[Te.value]=Te}removeUniqueValueInfo(Ce){if(this.styleOrigin)ye.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let ge=0;ge<this.uniqueValueInfos.length;ge++)if(this.uniqueValueInfos[ge].value===Ce+""){delete this._valueInfoMap[Ce],this.uniqueValueInfos.splice(ge,1);break}}getUniqueValueInfo(Ce,ge){var Te=this;return(0,D.Z)(function*(){let Le=ge;return Te.valueExpression&&((0,Y.Wi)(ge)||(0,Y.Wi)(ge.arcade))&&(Le={...Le,arcade:yield(0,ce.LC)()}),Te._getUniqueValueInfo(Ce,Le)})()}getSymbol(Ce,ge){if(this.valueExpression&&((0,Y.Wi)(ge)||(0,Y.Wi)(ge.arcade)))return void ye.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const Te=this._getUniqueValueInfo(Ce,ge);return Te&&Te.symbol||this.defaultSymbol}getSymbolAsync(Ce,ge){var Te=this;return(0,D.Z)(function*(){let Le=ge;if(Te.valueExpression&&((0,Y.Wi)(Le)||(0,Y.Wi)(Le.arcade))){const ze=yield(0,ce.LC)(),{arcadeUtils:Ee}=ze;Ee.hasGeometryOperations(Te.valueExpression)&&(yield Ee.enableGeometryOperations()),Le={...Le,arcade:ze}}const je=Te._getUniqueValueInfo(Ce,Le);return je&&je.symbol||Te.defaultSymbol})()}getSymbols(){const Ce=[];for(const ge of this.uniqueValueInfos)ge.symbol&&Ce.push(ge.symbol);return this.defaultSymbol&&Ce.push(this.defaultSymbol),Ce}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((Ce,ge)=>Ce+ge.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((Ce,ge)=>Ce+ge.getMeshHash(),"")}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const Ce=new he({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,U.d9)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,U.d9)(this.visualVariables),legendOptions:(0,U.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,U.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(Ce._isDefaultSymbolDerived=!0),Ce._set("portal",this.portal);const ge=(0,U.d9)(this.uniqueValueInfos);return this.styleOrigin&&(Ce._set("styleOrigin",Object.freeze((0,U.d9)(this.styleOrigin))),Object.freeze(ge)),Ce._set("uniqueValueInfos",ge),Ce._updateValueInfoMap(),Ce}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}collectRequiredFields(Ce,ge){var Te=this;return(0,D.Z)(function*(){const Le=[Te.collectVVRequiredFields(Ce,ge),Te.collectSymbolFields(Ce,ge)];yield Promise.all(Le)})()}collectSymbolFields(Ce,ge){var Te=this;return(0,D.Z)(function*(){const Le=[...Te.getSymbols().map(je=>je.collectRequiredFields(Ce,ge)),(0,Z.io)(Ce,ge,Te.valueExpression)];(0,Z.AB)(Ce,ge,Te.field),(0,Z.AB)(Ce,ge,Te.field2),(0,Z.AB)(Ce,ge,Te.field3),yield Promise.all(Le)})()}populateFromStyle(){return(0,me.n2)(this.styleOrigin,{portal:this.portal}).then(Ce=>{const ge=[];return this._valueInfoMap={},Ce&&Ce.data&&Array.isArray(Ce.data.items)&&Ce.data.items.forEach(Te=>{const Le=new _e.Z({styleUrl:Ce.styleUrl,styleName:Ce.styleName,portal:this.portal,name:Te.name});this.defaultSymbol||Te.name!==Ce.data.defaultItem||(this.defaultSymbol=Le,this._isDefaultSymbolDerived=!0);const je=new ne.Z({value:Te.name,symbol:Le});ge.push(je),this._valueInfoMap[Te.name]=je}),this._set("uniqueValueInfos",Object.freeze(ge)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(Ce=>this._valueInfoMap[Ce.value+""]=Ce)}_getUniqueValueInfo(Ce,ge){return this.valueExpression?this._getUnqiueValueInfoForExpression(Ce,ge):this._getUnqiueValueInfoForFields(Ce)}_getUnqiueValueInfoForExpression(Ce,ge){const{viewingMode:Te,scale:Le,spatialReference:je,arcade:ze}=(0,Y.Pt)(ge,{});let Ee=this._cache.compiledFunc;const Ae=(0,Y.Wg)(ze).arcadeUtils;if(!Ee){const Be=Ae.createSyntaxTree(this.valueExpression);Ee=Ae.createFunction(Be),this._cache.compiledFunc=Ee}const we=Ae.executeFunction(Ee,Ae.createExecContext(Ce,Ae.getViewInfo({viewingMode:Te,scale:Le,spatialReference:je})));return this._valueInfoMap[we+""]}_getUnqiueValueInfoForFields(Ce){const ge=this.field,Te=Ce.attributes;let Le;if("function"!=typeof ge&&this.field2){const je=this.field2,ze=this.field3,Ee=[];ge&&Ee.push(Te[ge]),je&&Ee.push(Te[je]),ze&&Ee.push(Te[ze]),Le=Ee.join(this.fieldDelimiter||"")}else"function"==typeof ge?Le=ge(Ce):ge&&(Le=Te[ge]);return this._valueInfoMap[Le+""]}static fromPortalStyle(Ce,ge){const Te=new he(ge&&ge.properties);Te._set("styleOrigin",Object.freeze({styleName:Ce})),Te._set("portal",ge&&ge.portal||Q.Z.getDefault());const Le=Te.populateFromStyle();return Le.catch(je=>{ye.error(`#fromPortalStyle('${Ce}'[, ...])`,"Failed to create unique value renderer from style name",je)}),Le}static fromStyleUrl(Ce,ge){const Te=new he(ge&&ge.properties);Te._set("styleOrigin",Object.freeze({styleUrl:Ce}));const Le=Te.populateFromStyle();return Le.catch(je=>{ye.error(`#fromStyleUrl('${Ce}'[, ...])`,"Failed to create unique value renderer from style URL",je)}),Le}};(0,x._)([(0,G.Cb)({readOnly:!0})],De.prototype,"_cache",null),(0,x._)([(0,re.J)({uniqueValue:"unique-value"})],De.prototype,"type",void 0),(0,x._)([(0,G.Cb)(ee.K)],De.prototype,"backgroundFillSymbol",void 0),(0,x._)([(0,G.Cb)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],De.prototype,"field",void 0),(0,x._)([(0,$.p)("field")],De.prototype,"castField",null),(0,x._)([(0,oe.c)("field")],De.prototype,"writeField",null),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"field2",void 0),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"field3",void 0),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"valueExpression",void 0),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"valueExpressionTitle",void 0),(0,x._)([(0,G.Cb)({type:le.I,json:{write:!0}})],De.prototype,"legendOptions",void 0),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"defaultLabel",void 0),(0,x._)([(0,G.Cb)((0,H.RH)({...ee.G},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],De.prototype,"defaultSymbol",null),(0,x._)([(0,G.Cb)({type:String,json:{write:!0}})],De.prototype,"fieldDelimiter",void 0),(0,x._)([(0,G.Cb)({type:Q.Z,readOnly:!0})],De.prototype,"portal",void 0),(0,x._)([(0,ue.r)("portal",["styleName"])],De.prototype,"readPortal",null),(0,x._)([(0,G.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],De.prototype,"styleOrigin",void 0),(0,x._)([(0,ue.r)("styleOrigin",["styleName","styleUrl"])],De.prototype,"readStyleOrigin",null),(0,x._)([(0,oe.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],De.prototype,"writeStyleOrigin",null),(0,x._)([(0,G.Cb)({type:[ne.Z],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],De.prototype,"uniqueValueInfos",null),De=he=(0,x._)([(0,ae.j)("esri.renderers.UniqueValueRenderer")],De);const ve=De},2432:(qe,xe,T)=>{"use strict";T.d(xe,{W:()=>je});var ae,D=T(15861),x=T(17626),w=T(77712),W=(T(85931),T(8314),T(90912)),Y=T(68653),H=T(76898),G=T(99433),$=T(36630),re=T(17977),ue=T(8029);let oe=ae=class extends re.Z{constructor(ze){super(ze),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(ze){ze&&Array.isArray(ze)&&(ze=ze.filter(Ee=>!!Ee)).sort((Ee,Ae)=>Ee.value-Ae.value),this._set("stops",ze)}clone(){return new ae({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(ze=>ze.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ze=>ze.value||0)}};(0,x._)([(0,w.Cb)({readOnly:!0})],oe.prototype,"cache",null),(0,x._)([(0,w.Cb)({type:["color"],json:{type:["colorInfo"]}})],oe.prototype,"type",void 0),(0,x._)([(0,w.Cb)({type:String,json:{write:!0}})],oe.prototype,"normalizationField",void 0),(0,x._)([(0,w.Cb)({type:[ue.Z],json:{write:!0}})],oe.prototype,"stops",null),oe=ae=(0,x._)([(0,H.j)("esri.renderers.visualVariables.ColorVariable")],oe);const ie=oe;var Q,X=T(86810),Z=T(92236);let J=Q=class extends X.wq{constructor(ze){super(ze),this.label=null,this.opacity=null,this.value=null}readOpacity(ze,Ee){return(0,Z.b)(Ee.transparency)}writeOpacity(ze,Ee,Ae){Ee[Ae]=(0,Z.a)(ze)}clone(){return new Q({label:this.label,opacity:this.opacity,value:this.value})}};(0,x._)([(0,w.Cb)({type:String,json:{write:!0}})],J.prototype,"label",void 0),(0,x._)([(0,w.Cb)({type:Number,json:{type:W.z8,write:{target:"transparency"}}})],J.prototype,"opacity",void 0),(0,x._)([(0,Y.r)("opacity",["transparency"])],J.prototype,"readOpacity",null),(0,x._)([(0,G.c)("opacity")],J.prototype,"writeOpacity",null),(0,x._)([(0,w.Cb)({type:Number,json:{write:!0}})],J.prototype,"value",void 0),J=Q=(0,x._)([(0,H.j)("esri.renderers.visualVariables.support.OpacityStop")],J);const se=J;var ee;let le=ee=class extends re.Z{constructor(ze){super(ze),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(ze){ze&&Array.isArray(ze)&&(ze=ze.filter(Ee=>!!Ee)).sort((Ee,Ae)=>Ee.value-Ae.value),this._set("stops",ze)}clone(){return new ee({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(ze=>ze.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ze=>ze.value||0)}};(0,x._)([(0,w.Cb)({readOnly:!0})],le.prototype,"cache",null),(0,x._)([(0,w.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],le.prototype,"type",void 0),(0,x._)([(0,w.Cb)({type:String,json:{write:!0}})],le.prototype,"normalizationField",void 0),(0,x._)([(0,w.Cb)({type:[se],json:{write:!0}})],le.prototype,"stops",null),le=ee=(0,x._)([(0,H.j)("esri.renderers.visualVariables.OpacityVariable")],le);const ne=le;var ce=T(13398),de=T(80239),me=T(14517),_e=T(2076),he=T(63290),ye=T(14889);const fe=he.Z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),De={color:ie,size:de.Z,opacity:ne,rotation:ce.Z},ve=new _e.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ce=/^\[([^\]]+)\]$/i;let ge=class extends me.Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(ze){if(this._resetVariables(),(ze=ze&&ze.filter(Ee=>!!Ee))&&ze.length){for(const Ee of ze)switch(Ee.type){case"color":this.colorVariables.push(Ee);break;case"opacity":this.opacityVariables.push(Ee);break;case"rotation":this.rotationVariables.push(Ee);break;case"size":this.sizeVariables.push(Ee)}this.sizeVariables.length&&this.sizeVariables.some(Ee=>!!Ee.target)&&ze.sort((Ee,Ae)=>{let we=null;return we=Ee.target===Ae.target?0:Ee.target?1:-1,we});for(let Ee=0;Ee<ze.length;Ee++)ze[Ee].index=Ee;this._set("visualVariables",ze)}else this._set("visualVariables",ze)}readVariables(ze,Ee,Ae){const{rotationExpression:we,rotationType:Be}=Ee,Pe=we&&we.match(Ce),Oe=Pe&&Pe[1];if(Oe&&(ze||(ze=[]),ze.push({type:"rotationInfo",rotationType:Be,field:Oe})),ze)return ze.map(Ke=>{const Ve=ve.read(Ke.type),Ne=De[Ve];Ne||(fe.warn(`Unknown variable type: ${Ve}`),Ae&&Ae.messages&&Ae.messages.push(new ye.Z("visual-variable:unsupported",`visualVariable of type '${Ve}' is not supported`,{definition:Ke,context:Ae})));const Ie=new Ne;return Ie.read(Ke,Ae),Ie})}writeVariables(ze,Ee){const Ae=[];for(const we of ze){const Be=we.toJSON(Ee);Be&&Ae.push(Be)}return Ae}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,x._)([(0,w.Cb)()],ge.prototype,"visualVariables",null),ge=(0,x._)([(0,H.j)("esri.renderers.visualVariables.VisualVariableFactory")],ge);const Te=ge,Le={base:re.Z,key:"type",typeMap:{opacity:ne,color:ie,rotation:ce.Z,size:de.Z}},je=ze=>{let Ee=class extends ze{constructor(){super(...arguments),this._vvFactory=new Te}set visualVariables(Ae){this._vvFactory.visualVariables=Ae,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(Ae,we,Be){return this._vvFactory.readVariables(Ae,we,Be)}writeVisualVariables(Ae,we,Be,Pe){we[Be]=this._vvFactory.writeVariables(Ae,Pe)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const Ae of this.visualVariables)if(Ae.arcadeRequired)return!0;return!1}hasVisualVariables(Ae,we){return Ae?this.getVisualVariablesForType(Ae,we).length>0:this.getVisualVariablesForType("size",we).length>0||this.getVisualVariablesForType("color",we).length>0||this.getVisualVariablesForType("opacity",we).length>0||this.getVisualVariablesForType("rotation",we).length>0}getVisualVariablesForType(Ae,we){const Be=this.visualVariables;return Be?Be.filter(Pe=>Pe.type===Ae&&("string"==typeof we?Pe.target===we:!1!==we||!Pe.target)):[]}collectVVRequiredFields(Ae,we){var Be=this;return(0,D.Z)(function*(){let Pe=[];Be.visualVariables&&(Pe=Pe.concat(Be.visualVariables));for(const Oe of Pe)Oe&&(Oe.field&&(0,$.AB)(Ae,we,Oe.field),Oe.normalizationField&&(0,$.AB)(Ae,we,Oe.normalizationField),Oe.valueExpression&&(yield(0,$.io)(Ae,we,Oe.valueExpression)))})()}};return(0,x._)([(0,w.Cb)({types:[Le],value:null,json:{write:!0}})],Ee.prototype,"visualVariables",null),(0,x._)([(0,Y.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],Ee.prototype,"readVisualVariables",null),(0,x._)([(0,G.c)("visualVariables")],Ee.prototype,"writeVisualVariables",null),Ee=(0,x._)([(0,H.j)("esri.renderers.mixins.VisualVariablesMixin")],Ee),Ee}},41832:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var re,D=T(17626),x=T(91558),w=T(86810),B=T(63290),U=T(77712),H=(T(85931),T(8314),T(66656)),G=T(76898),$=T(90912);const ue=B.Z.getLogger("esri.renderers.support.AttributeColorInfo");let ae=re=class extends w.wq{constructor(ie){super(ie),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(ie){return null==ie?ie:"function"==typeof ie?(ue.error(".field: field must be a string value"),null):(0,$.Zs)(ie)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new re({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,D._)([(0,U.Cb)({type:x.Z,json:{type:[Number],write:!0}})],ae.prototype,"color",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ae.prototype,"field",void 0),(0,D._)([(0,H.p)("field")],ae.prototype,"castField",null),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ae.prototype,"label",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ae.prototype,"valueExpression",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ae.prototype,"valueExpressionTitle",void 0),ae=re=(0,D._)([(0,G.j)("esri.renderers.support.AttributeColorInfo")],ae);const oe=ae},15312:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Te});var re,D=T(17626),x=T(2076),w=T(86810),B=T(58817),U=T(77712),W=T(90912),Y=T(68653),H=T(76898);T(85931),T(8314);let ue=re=class extends w.wq{constructor(Le){super(Le),this.minValue=0,this.maxValue=0}clone(){return new re({minValue:this.minValue,maxValue:this.maxValue})}};var ae;(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ue.prototype,"minValue",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ue.prototype,"maxValue",void 0),ue=re=(0,D._)([(0,H.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],ue);let oe=ae=class extends w.wq{constructor(Le){super(Le),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new ae({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,B.d9)(this.classBreakInfos)})}};(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"field",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"normalizationField",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"label",void 0),(0,D._)([(0,U.Cb)({type:[ue],json:{write:!0}})],oe.prototype,"classBreakInfos",void 0),oe=ae=(0,D._)([(0,H.j)("esri.renderers.support.AuthoringInfoFieldInfo")],oe);var X,ie=T(66656);const Z=new x.X({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Q=new x.X({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),J={key:Le=>"number"==typeof Le?"number":"string",typeMap:{number:Number,string:String},base:null},se=["high-to-low","above-and-below","centered-on","extremes"],ee=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],le=["seconds","minutes","hours","days","months","years"];let ne=X=class extends w.wq{constructor(Le){super(Le),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(Le){return"string"==typeof Le||"number"==typeof Le?Le:null}castStartTime(Le){return"string"==typeof Le||"number"==typeof Le?Le:null}get style(){return"color"===this.type?this._get("style"):null}set style(Le){this._set("style",Le)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(Le){this._set("theme",Le)}clone(){return new X({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,D._)([(0,U.Cb)({types:J,json:{write:!0}})],ne.prototype,"endTime",void 0),(0,D._)([(0,ie.p)("endTime")],ne.prototype,"castEndTime",null),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ne.prototype,"field",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ne.prototype,"maxSliderValue",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ne.prototype,"minSliderValue",void 0),(0,D._)([(0,U.Cb)({types:J,json:{write:!0}})],ne.prototype,"startTime",void 0),(0,D._)([(0,ie.p)("startTime")],ne.prototype,"castStartTime",null),(0,D._)([(0,U.Cb)({type:Z.apiValues,value:null,json:{type:Z.jsonValues,read:Z.read,write:Z.write}})],ne.prototype,"style",null),(0,D._)([(0,U.Cb)({type:ee,value:null,json:{type:ee,origins:{"web-scene":{type:se,write:{writer:(Le,je)=>{se.includes(Le)&&(je.theme=Le)}}}},write:!0}})],ne.prototype,"theme",null),(0,D._)([(0,U.Cb)({type:Q.apiValues,json:{type:Q.jsonValues,read:Q.read,write:Q.write}})],ne.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:le,json:{type:le,write:!0}})],ne.prototype,"units",void 0),ne=X=(0,D._)([(0,H.j)("esri.renderers.support.AuthoringInfoVisualVariable")],ne);const ce=ne;var me,de=T(79023);const _e=new x.X({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),he=new x.X({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),ye=new x.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),fe=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let ge=me=class extends w.wq{constructor(Le){super(Le),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const Le=this._get("classificationMethod"),je=this.type;return je&&"relationship"!==je?"class-breaks-size"===je||"class-breaks-color"===je?Le||"manual":null:Le}set classificationMethod(Le){this._set("classificationMethod",Le)}readColorRamp(Le){if(Le)return(0,de.i)(Le)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(Le){this._set("fields",Le)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(Le){this._set("field1",Le)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(Le){this._set("field2",Le)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(Le){this._set("flowTheme",Le)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(Le){this._set("focus",Le)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(Le){this._set("numClasses",Le)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(Le){this._set("statistics",Le)}get standardDeviationInterval(){const Le=this.type;return Le&&"relationship"!==Le&&"class-breaks-size"!==Le&&"class-breaks-color"!==Le||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(Le){this._set("standardDeviationInterval",Le)}get type(){return this._get("type")}set type(Le){let je=Le;"classed-size"===Le?je="class-breaks-size":"classed-color"===Le&&(je="class-breaks-color"),this._set("type",je)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(Le){this._set("univariateSymbolStyle",Le)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(Le){this._set("univariateTheme",Le)}clone(){return new me({classificationMethod:this.classificationMethod,colorRamp:(0,B.d9)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:(0,B.d9)(this.field1),field2:(0,B.d9)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(Le=>Le.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,D._)([(0,U.Cb)({type:_e.apiValues,value:null,json:{type:_e.jsonValues,read:_e.read,write:_e.write,origins:{"web-document":{default:"manual",type:_e.jsonValues,read:_e.read,write:_e.write}}}})],ge.prototype,"classificationMethod",null),(0,D._)([(0,U.Cb)({types:de.V,json:{write:!0}})],ge.prototype,"colorRamp",void 0),(0,D._)([(0,Y.r)("colorRamp")],ge.prototype,"readColorRamp",null),(0,D._)([(0,U.Cb)({type:[String],value:null,json:{write:!0}})],ge.prototype,"fields",null),(0,D._)([(0,U.Cb)({type:oe,value:null,json:{write:!0}})],ge.prototype,"field1",null),(0,D._)([(0,U.Cb)({type:oe,value:null,json:{write:!0}})],ge.prototype,"field2",null),(0,D._)([(0,U.Cb)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ge.prototype,"flowTheme",null),(0,D._)([(0,U.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ge.prototype,"focus",null),(0,D._)([(0,U.Cb)({type:Number,value:null,json:{type:W.z8,write:!0}})],ge.prototype,"numClasses",null),(0,D._)([(0,U.Cb)({type:fe,json:{type:fe,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ge.prototype,"lengthUnit",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ge.prototype,"maxSliderValue",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ge.prototype,"minSliderValue",void 0),(0,D._)([(0,U.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ge.prototype,"statistics",null),(0,D._)([(0,U.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ge.prototype,"standardDeviationInterval",null),(0,D._)([(0,U.Cb)({type:he.apiValues,value:null,json:{type:he.jsonValues,read:he.read,write:he.write,origins:{"web-scene":{type:ye.jsonValues,write:{writer:ye.write,overridePolicy:Le=>({enabled:"flow"!==Le})}}}}})],ge.prototype,"type",null),(0,D._)([(0,U.Cb)({type:[ce],json:{write:!0}})],ge.prototype,"visualVariables",void 0),(0,D._)([(0,U.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ge.prototype,"univariateSymbolStyle",null),(0,D._)([(0,U.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ge.prototype,"univariateTheme",null),ge=me=(0,D._)([(0,H.j)("esri.renderers.support.AuthoringInfo")],ge);const Te=ge},74400:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(76457);let $=G=class extends x.wq{constructor(ue){super(ue),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new G({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const ue=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${ue}`}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"description",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],$.prototype,"minValue",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],$.prototype,"maxValue",void 0),(0,D._)([(0,w.Cb)(H.G)],$.prototype,"symbol",void 0),$=G=(0,D._)([(0,Y.j)("esri.renderers.support.ClassBreakInfo")],$);const re=$},29996:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{DictionaryLoader:()=>oe});var D=T(15861),x=T(91558),w=T(84792),B=T(26584),U=T(63290),W=T(93961),Y=T(62208),H=T(10699),G=T(77275),$=T(46679),re=T(94398);const ue=U.Z.getLogger("esri.renderers.support.DictionaryLoader"),ae={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class oe{constructor(Q,J,se){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new W.Z(100),this.url=Q,this.config=J,this.fieldMap=se}getSymbolFields(){return this._symbolFields}getSymbolAsync(Q,J){var se=this;return(0,D.Z)(function*(){let ee;se._dictionaryPromise||(se._dictionaryPromise=se.fetchResources(J));try{ee=yield se._dictionaryPromise}catch(De){if((0,H.D_)(De))return se._dictionaryPromise=null,null}const le={};if(se.fieldMap)for(const De of se._symbolFields){const ve=se.fieldMap[De];le[De]=ve&&null!=Q.attributes[ve]?""+Q.attributes[ve]:""}const ne=ee(le,J);if(!ne||"string"!=typeof ne)return null;const ce=(0,G.hP)(ne).toString(),de=se._symbolCache.get(ce);if(de)return de.catch(()=>{se._symbolCache.pop(ce)}),de;const me=ne.split(";"),_e=[],he=[];for(const De of me)if(De)if(De.includes("po:")){const ve=De.substr(3).split("|");if(3===ve.length){const Ce=ve[0],ge=ve[1];let Te=ve[2];if("DashTemplate"===ge)Te=Te.split(" ").map(Le=>Number(Le));else if("Color"===ge){const Le=new x.Z(Te).toRgba();Te=[Le[0],Le[1],Le[2],255*Le[3]]}else Te=Number(Te);he.push({primitiveName:Ce,propertyName:ge,value:Te})}}else if(De.includes("|")){for(const ve of De.split("|"))if(se._itemNames.has(ve)){_e.push(ve);break}}else se._itemNames.has(De)&&_e.push(De);const ye=!(0,Y.pC)(Q.geometry)||!Q.geometry.hasZ&&"point"===Q.geometry.type,fe=se._cimPartsToCIMSymbol(_e,he,ye,J);return se._symbolCache.put(ce,fe,1),fe})()}fetchResources(Q){var J=this;return(0,D.Z)(function*(){if(J._dictionaryPromise)return J._dictionaryPromise;if(!J.url)return void ue.error("no valid URL!");const se=(0,w.default)(J.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,Y.pC)(Q)?Q.signal:null}),[{data:ee}]=yield Promise.all([se,(0,$.LC)()]);if(!ee)throw J._dictionaryPromise=null,new B.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const le=ee.expression,ne=ee.authoringInfo;J._refSymbolUrlTemplate=J.url+"/"+ee.cimRefTemplateUrl,J._itemNames=new Set(ee.itemsNames),J._symbolFields=ne.symbol;const ce={};if(J.config){const me=J.config;for(const _e in me)ce[_e]=me[_e]}if(ne.configuration)for(const me of ne.configuration)ce.hasOwnProperty(me.name)||(ce[me.name]=me.value);const de=[];if((0,Y.pC)(Q)&&Q.fields&&J.fieldMap)for(const me of J._symbolFields){const _e=J.fieldMap[me],he=Q.fields.filter(ye=>ye.name===_e);he.length>0&&de.push({...he[0],name:me})}return J._dictionaryPromise=(0,$.pp)(le,(0,Y.pC)(Q)?Q.spatialReference:null,de,ce).then(me=>{const _e={scale:0};return(he,ye)=>{const fe=me.repurposeFeature({geometry:null,attributes:he});return _e.scale=(0,Y.pC)(ye)?ye.scale:void 0,me.evaluate({$feature:fe,$view:_e})}}).catch(me=>(ue.error("Creating dictinoary expression failed:",me),null)),J._dictionaryPromise})()}_cimPartsToCIMSymbol(Q,J,se,ee){var le=this;return(0,D.Z)(function*(){const ne=new Array(Q.length);for(let me=0;me<Q.length;me++)ne[me]=le._getSymbolPart(Q[me],ee);const ce=yield Promise.all(ne),de=le.fieldMap;for(const me of ce)ie(me,de);return new re.Z({data:le._combineSymbolParts(ce,J,se)})})()}_getSymbolPart(Q,J){var se=this;return(0,D.Z)(function*(){if(se._ongoingRequests.has(Q))return se._ongoingRequests.get(Q).then(ne=>ne.data);const ee=se._refSymbolUrlTemplate.replace(/\{itemName\}/gi,Q),le=(0,w.default)(ee,{responseType:"json",query:{f:"json"},...J});se._ongoingRequests.set(Q,le);try{return(yield le).data}catch(ne){throw se._ongoingRequests.delete(Q),ne}})()}_combineSymbolParts(Q,J,se){if(!Q||0===Q.length)return null;const ee={...Q[0]};if(Q.length>1){ee.symbolLayers=[];for(const le of Q)ee.symbolLayers.unshift(...le.symbolLayers)}return se&&(ee.callout=ae),{type:"CIMSymbolReference",symbol:ee,primitiveOverrides:J}}}function ie(Z,Q){if(!Z)return;const J=Z.symbolLayers;if(!J)return;let se=J.length;for(;se--;){const ee=J[se];ee&&!1!==ee.enable&&"CIMVectorMarker"===ee.type&&X(ee,Q)}}function X(Z,Q){const J=Z.markerGraphics;if(J)for(const se of J){if(!se)continue;const ee=se.symbol;if(ee)switch(ee.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":ie(ee,Q);break;case"CIMTextSymbol":ee.fieldMap=Q}}}},52372:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(91558),w=T(86810),B=T(77712),Y=(T(85931),T(8314),T(90912)),H=T(76898);let $=G=class extends w.wq{constructor(ue){super(ue),this.color=null,this.ratio=null}clone(){return new G({color:this.color,ratio:this.ratio})}};(0,D._)([(0,B.Cb)({type:x.Z,json:{type:[Y.z8],default:null,write:!0}})],$.prototype,"color",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0}})],$.prototype,"ratio",void 0),$=G=(0,D._)([(0,H.j)("esri.renderers.support.HeatmapColorStop")],$);const re=$},10914:(qe,xe,T)=>{"use strict";T.d(xe,{I:()=>G});var H,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.wq{constructor(){super(...arguments),this.title=null}clone(){return new H({title:this.title})}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],G.prototype,"title",void 0),G=H=(0,D._)([(0,Y.j)("esri.renderers.support.LegendOptions")],G)},87266:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(86810),w=T(77712),W=(T(85931),T(8314),T(66656)),Y=T(76898),H=T(76457);let $=G=class extends x.wq{constructor(ue){super(ue),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(ue){return null==ue||"string"==typeof ue||"number"==typeof ue?ue:`${ue}`}clone(){return new G({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const ue=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${ue}`}};(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"description",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,D._)([(0,w.Cb)(H.G)],$.prototype,"symbol",void 0),(0,D._)([(0,w.Cb)({json:{type:String,write:{writer:(ue,ae)=>{ae.value=ue?.toString()}}}})],$.prototype,"value",void 0),(0,D._)([(0,W.p)("value")],$.prototype,"castValue",null),$=G=(0,D._)([(0,Y.j)("esri.renderers.support.UniqueValueInfo")],$);const re=$},76457:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>W,K:()=>Y});var D=T(20383),x=T(383),w=T(9461),B=T(10012),U=T(89673);const W={types:D.QT,json:{write:{writer:w.cW},origins:{"web-scene":{types:D.f_,write:{writer:w.cW},read:{reader:(0,x.d)({types:D.f_})}}}}},Y={types:{base:B.Z,key:"type",typeMap:{"simple-fill":D.LB.typeMap["simple-fill"],"picture-fill":D.LB.typeMap["picture-fill"],"polygon-3d":D.LB.typeMap["polygon-3d"]}},json:{write:{writer:w.cW},origins:{"web-scene":{type:U.Z,write:{writer:w.cW}}}}}},36859:(qe,xe,T)=>{"use strict";T.d(xe,{AJ:()=>Y,If:()=>oe,QM:()=>re,k0:()=>W,nu:()=>U,uI:()=>G,wx:()=>ie});var D=T(21286),x=T(23841),w=T(993),B=T(4794);const U=2.4;function W(Z){return(0,x.Wz)(Z*U)}function Y(Z){return(0,x.F2)(Z)/U}function H(Z,Q,J,se){let{color:ee,ratio:le}=Q,{color:ne,ratio:ce}=J;ce===le&&(1===ce?le-=1e-6:ce+=1e-6);const de=(0,D.uZ)((se-le)/(ce-le),0,1);(0,w.l)(Z,ee.toArray(),ne.toArray(),de)}function G(Z){const J=new Uint8ClampedArray(2048);if((Z=Z.filter(({ratio:ce})=>ce>=0&&ce<=1).sort((ce,de)=>ce.ratio-de.ratio).map(({color:ce,ratio:de})=>({color:ce,ratio:Math.max(de,.001)}))).length<1)return J;let se=Z[0],ee=Z[0],le=1;const ne=(0,B.c)();for(let ce=0;ce<512;ce++){const de=(ce+.5)/512;for(;de>ee.ratio&&le<Z.length;)se=ee,ee=Z[le++];H(ne,se,ee,de),J.set(ne,4*ce)}return J}function re(Z,Q,J,se){const{radius:ee,fieldOffset:le,field:ne}=Q,ce=Math.round((0,x.F2)(ee)),de=new Float64Array(J*se);let me,_e=Number.NEGATIVE_INFINITY;const he=function X(Z,Q){return null!=Z?"string"==typeof Q?J=>-1*+J.readAttribute(Z):J=>+J.readAttribute(Z)+Q:J=>1}(ne,le),ye=new Set;for(const fe of Z){const De=fe.getCursor();for(;De.next();){const ve=De.getObjectId();if(ye.has(ve))continue;ye.add(ve);const Ce=De.readLegacyPointGeometry(),ge=128;if(Ce.x<-ge||Ce.x>=J+ge||Ce.y<-ge||Ce.y>se+ge)continue;const Te=+he(De),Le=Math.max(0,Math.round(Ce.x)-ce),je=Math.max(0,Math.round(Ce.y)-ce),ze=Math.min(se,Math.round(Ce.y)+ce),Ee=Math.min(J,Math.round(Ce.x)+ce);for(let Ae=je;Ae<ze;Ae++)for(let we=Le;we<Ee;we++){const Be=Ae*J+we,Pe=oe(Ce.x-we,Ce.y-Ae,ce);me=de[Be]+=Pe*Te,me>_e&&(_e=me)}}}return{matrix:de.buffer,max:_e}}function oe(Z,Q,J){const se=Math.sqrt(Z**2+Q**2)/J;return se>1?0:3/(Math.PI*J**2)*(1-se**2)**2}function ie(Z,Q){return"function"==typeof Z?Z:Z?"string"==typeof Q?J=>-1*+J[Z]:J=>+J[Z]+Q:()=>1}},33474:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>W,i:()=>B});var D=T(14889),x=T(383),w=T(32088);function B(Y,H){return W(Y,null,H)}const U=(0,x.d)({types:w.A});function W(Y,H,G){return Y?Y&&(Y.styleName||Y.styleUrl)&&"uniqueValue"!==Y.type?(G&&G.messages&&G.messages.push(new D.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+Y.type+"'",{definition:Y,context:G})),null):U(Y,H,G):null}},21254:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>w});var D=T(16730),x=T(94425);const w={inches:(0,D.En)(1,"meters","inches"),feet:(0,D.En)(1,"meters","feet"),"us-feet":(0,D.En)(1,"meters","us-feet"),yards:(0,D.En)(1,"meters","yards"),miles:(0,D.En)(1,"meters","miles"),"nautical-miles":(0,D.En)(1,"meters","nautical-miles"),millimeters:(0,D.En)(1,"meters","millimeters"),centimeters:(0,D.En)(1,"meters","centimeters"),decimeters:(0,D.En)(1,"meters","decimeters"),meters:(0,D.En)(1,"meters","meters"),kilometers:(0,D.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,D.ty)(1,"meters",x.sv.radius)}},98494:(qe,xe,T)=>{"use strict";T.d(xe,{D2:()=>Y,NM:()=>G,WU:()=>re,f1:()=>H}),T(52515);var x=T(15348);const w=/^-?(\d+)(\.(\d+))?$/i;function B(ue,ae){return ue-ae}function U(ue,ae){let oe,ie;return oe=Number(ue.toFixed(ae)),oe<ue?ie=oe+1/10**ae:(ie=oe,oe-=1/10**ae),oe=Number(oe.toFixed(ae)),ie=Number(ie.toFixed(ae)),[oe,ie]}function W(ue,ae,oe,ie,X){const Z=H(ue,ae,oe,ie);return(null==Z.previous||Z.previous<=X)&&(null==Z.next||Z.next<=X)||Z.previous+Z.next<=2*X}function Y(ue){const ae=String(ue),oe=ae.match(w);if(oe&&oe[1])return{integer:oe[1].split("").length,fractional:oe[3]?oe[3].split("").length:0};if(ae.toLowerCase().includes("e")){const ie=ae.split("e"),X=ie[0],Z=ie[1];if(X&&Z){const Q=Number(X);let J=Number(Z);const se=J>0;se||(J=Math.abs(J));const ee=Y(Q);return se?(ee.integer+=J,J>ee.fractional?ee.fractional=0:ee.fractional-=J):(ee.fractional+=J,J>ee.integer?ee.integer=1:ee.integer-=J),ee}}return{integer:0,fractional:0}}function H(ue,ae,oe,ie){const X={previous:null,next:null};if(null!=oe){const Z=ue-oe;X.previous=Math.floor(Math.abs(100*(ae-oe-Z)/Z))}if(null!=ie){const Z=ie-ue;X.next=Math.floor(Math.abs(100*(ie-ae-Z)/Z))}return X}function G(ue,ae={}){const oe=ue.slice(0),{tolerance:ie=2,strictBounds:X=!1,indexes:Z=oe.map((Q,J)=>J)}=ae;Z.sort(B);for(let Q=0;Q<Z.length;Q++){const J=Z[Q],se=oe[J],ee=0===J?null:oe[J-1],le=J===oe.length-1?null:oe[J+1],ne=Y(se).fractional;if(ne){let ce,de=0,me=!1;for(;de<=ne&&!me;){const _e=U(se,de);ce=X&&0===Q?_e[1]:_e[0],me=W(se,ce,ee,le,ie),de++}me&&(oe[J]=ce)}}return oe}const $={maximumFractionDigits:20};function re(ue){return(0,x.uf)(ue,$)}},50134:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>U,s:()=>W}),T(8314);var x=T(26584),w=T(62208),B=T(70137);function U(re){return(0,w.Wi)(re)||"simple"===re.type||"unique-value"===re.type||"class-breaks"===re.type||"dictionary"===re.type||"heatmap"===re.type}function W(re){if((0,w.Wi)(re))return null;if(!U(re))return new x.Z("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${re.type||re.declaredClass}'`,{renderer:re});switch(re.type){case"simple":return function H(re){return Y(re,(0,B.q)(re.symbol).error)}(re);case"unique-value":return function G(re){const ue=re.uniqueValueInfos.map(oe=>(0,B.q)(oe.symbol).error).filter(oe=>!!oe),ae=(0,B.q)(re.defaultSymbol);return ae.error&&ue.unshift(ae.error),Y(re,ue)}(re);case"class-breaks":return function $(re){const ue=re.classBreakInfos.map(oe=>(0,B.q)(oe.symbol).error).filter(oe=>!!oe),ae=(0,B.q)(re.defaultSymbol);return ae.error&&ue.unshift(ae.error),Y(re,ue)}(re);case"dictionary":case"heatmap":return null}return null}function Y(re,ue){if(!ue)return null;let ae;if(ae=Array.isArray(ue)?ue:[ue],ae.length>0){const oe=ae.map(X=>X.details.symbol.type||X.details.symbol.declaredClass).filter(X=>!!X);oe.sort();const ie=[];return oe.forEach((X,Z)=>{0!==Z&&X===oe[Z-1]||ie.push(X)}),new x.Z("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${ie.join(", ")}) which are not supported in 3D`,{renderer:re,symbolErrors:ae})}return null}},39256:(qe,xe,T)=>{"use strict";T.d(xe,{Kb:()=>Y,o2:()=>ae,sV:()=>ue,xn:()=>$});var D=T(15861),x=T(91558),w=T(62208),B=T(81808);function U(oe,ie){if(!oe||oe.symbol)return null;const X=ie&&ie.renderer;return oe&&(0,w.pC)(X)&&X.getObservationRenderer?X.getObservationRenderer(oe):X}function Y(oe,ie){const X=U(oe,ie),Z=function W(oe,ie){if((0,w.pC)(oe.symbol))return oe.symbol;const X=U(oe,ie);return(0,w.pC)(X)&&"dot-density"!==X.type?X.getSymbol(oe,ie):null}(oe,ie);if((0,w.Wi)(Z))return null;const Q={renderer:X,symbol:Z};if((0,w.Wi)(X)||!("visualVariables"in X)||!X.visualVariables)return Q;const J=(0,B.getVisualVariableValues)(X,oe,ie),se=["proportional","proportional","proportional"];for(const{variable:ee,value:le}of J)switch(ee.type){case"color":Q.color=le.toRgba();break;case"size":if("outline"===ee.target)Q.outlineSize=le;else{const ce=ee.useSymbolValue?"symbol-value":le;switch(ee.axis){case"width":se[0]=ce;break;case"depth":se[1]=ce;break;case"height":se[2]=ce;break;case"width-and-depth":se[0]=se[1]=ce;break;default:se[0]=se[1]=se[2]=ce}}break;case"opacity":Q.opacity=le;break;case"rotation":switch(ee.axis){case"tilt":Q.tilt=le;break;case"roll":Q.roll=le;break;default:Q.heading=le}}return"proportional"===se[0]&&"proportional"===se[1]&&"proportional"===se[2]||(Q.size=se),Q}function H(oe,ie){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*(oe,ie){if((0,w.pC)(oe.symbol))return oe.symbol;const X=U(oe,ie);return(0,w.pC)(X)&&X.getSymbolAsync(oe,ie)})).apply(this,arguments)}function $(oe,ie){return re.apply(this,arguments)}function re(){return(re=(0,D.Z)(function*(oe,ie){const X=U(oe,ie),Z=yield H(oe,ie);if(!Z)return null;const Q={renderer:X,symbol:Z};if(!X||!("visualVariables"in X)||!X.visualVariables)return Q;const J=(0,B.getVisualVariableValues)(X,oe,ie),se=["proportional","proportional","proportional"];for(const{variable:ee,value:le}of J)if("color"===ee.type)Q.color=x.Z.toUnitRGBA(le);else if("size"===ee.type)if("outline"===ee.target)Q.outlineSize=le;else{const ne=ee.axis,ce=ee.useSymbolValue?"symbol-value":le;"width"===ne?se[0]=ce:"depth"===ne?se[1]=ce:"height"===ne?se[2]=ce:se[0]=se[1]="width-and-depth"===ne?ce:se[2]=ce}else"opacity"===ee.type?Q.opacity=le:"rotation"===ee.type&&"tilt"===ee.axis?Q.tilt=le:"rotation"===ee.type&&"roll"===ee.axis?Q.roll=le:"rotation"===ee.type&&(Q.heading=le);return(isFinite(se[0])||isFinite(se[1])||isFinite(se[2]))&&(Q.size=se),Q})).apply(this,arguments)}function ue(oe,ie=0){const X=oe[ie];return"number"==typeof X&&isFinite(X)?X:null}function ae(oe){for(let ie=0;ie<3;ie++){const X=oe[ie];if("number"==typeof X)return isFinite(X)?X:0}return 0}},39683:(qe,xe,T)=>{"use strict";T.d(xe,{y:()=>U});var D=T(15861),x=T(59213),w=T(10699),B=T(14889);function U(Y,H,G){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(Y,H,G){const $=Y&&Y.getAtOrigin&&Y.getAtOrigin("renderer",H.origin);if($&&"unique-value"===$.type&&$.styleOrigin){const re=yield(0,x.q6)($.populateFromStyle());if((0,w.k_)(G),!1===re.ok){const ue=re.error;H&&H.messages&&H.messages.push(new B.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${ue.message}`,{error:ue,context:H})),Y.clear("renderer",H.origin)}}})).apply(this,arguments)}},32088:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>G,o:()=>$});var D=T(4832),x=T(49067),w=T(96794),B=T(69747),U=T(40425),W=T(69357),Y=T(40342),H=T(14726);const G={key:"type",base:W.Z,typeMap:{heatmap:B.Z,simple:Y.Z,"unique-value":H.Z,"class-breaks":D.Z,"dot-density":w.Z,dictionary:x.Z,"pie-chart":U.Z},errorContext:"renderer"},$={key:"type",base:W.Z,typeMap:{simple:Y.Z,"unique-value":H.Z,"class-breaks":D.Z,heatmap:B.Z},errorContext:"renderer"}},64831:(qe,xe,T)=>{"use strict";T.d(xe,{zB:()=>Z});var D=T(15861),x=T(85931),w=T(63290),B=T(88159),U=T(88411),H=(T(98494),T(8029),T(86606)),G=T(88380),$=T(26831);function X(ve,Ce,ge){(0,B.s1)(ve,Ce,()=>[]).push(...ge)}function Z(ve){return Q.apply(this,arguments)}function Q(){return(Q=(0,D.Z)(function*(ve){const Ce=new Map;if("visualVariables"in ve&&ve.visualVariables){const ge=ve.visualVariables.filter(Te=>"color"===Te.type);for(const Te of ge){const Le=Te.field||Te.valueExpression,je=(yield(0,G.pO)(Te)).map(ze=>ze.color);X(Ce,Le,je)}}if("heatmap"===ve.type){const ge=(0,$.h)(ve).map(Te=>Te.color);X(Ce,ve.field,ge)}else if("pie-chart"===ve.type){for(const ge of ve.attributes)X(Ce,ge.field,[ge.color]);X(Ce,null,[ve?.othersCategory?.color,(0,H._h)(ve.backgroundFillSymbol,null)])}else if("dot-density"===ve.type){for(const ge of ve.attributes)X(Ce,ge.field,[ge.color]);X(Ce,null,[ve.backgroundColor])}else if("unique-value"===ve.type)if("predominance"===ve.authoringInfo?.type)for(const ge of ve.uniqueValueInfos)X(Ce,ge.value.toString(),[(0,H._h)(ge.symbol,null)]);else{const ge=ve.uniqueValueInfos.map(Ee=>(0,H._h)(Ee.symbol,null)),{field:Te,field2:Le,field3:je,valueExpression:ze}=ve;(Te||ze)&&X(Ce,Te||ze,ge),Le&&X(Ce,Le,ge),je&&X(Ce,je,ge)}else if("class-breaks"===ve.type){const ge=ve.classBreakInfos.map(Te=>(0,H._h)(Te.symbol,null));X(Ce,ve.field||ve.valueExpression,ge)}else"simple"===ve.type&&X(Ce,null,[(0,H._h)(ve.symbol,null)]);return"defaultSymbol"in ve&&ve.defaultSymbol&&X(Ce,null,[(0,H._h)(ve.defaultSymbol,null)]),Ce.forEach((ge,Te)=>{const Le=(0,x.Tw)(ge.filter(Boolean),(je,ze)=>JSON.stringify(je)===JSON.stringify(ze));Ce.set(Te,Le)}),Ce})).apply(this,arguments)}w.Z.getLogger("esri.renderers.support.utils"),(0,U.Ze)("short-date")},13398:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),x=T(26584),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(99433),G=T(17977);let re=$=class extends G.Z{constructor(ae){super(ae),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(ae,oe,ie,X){X&&X.messages&&X.messages.push(new x.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}].valueExpressionTitle`,context:X}))}clone(){return new $({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,D._)([(0,w.Cb)({readOnly:!0})],re.prototype,"cache",null),(0,D._)([(0,w.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],re.prototype,"axis",void 0),(0,D._)([(0,w.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],re.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],re.prototype,"rotationType",void 0),(0,D._)([(0,w.Cb)({type:String,json:{write:!0}})],re.prototype,"valueExpressionTitle",void 0),(0,D._)([(0,H.c)("web-scene","valueExpressionTitle")],re.prototype,"writeValueExpressionTitleWebScene",null),re=$=(0,D._)([(0,Y.j)("esri.renderers.visualVariables.RotationVariable")],re);const ue=re},80239:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ye});var X,D=T(17626),x=T(26584),w=T(2076),B=T(63290),U=T(23841),W=T(77712),G=(T(85931),T(8314),T(66656)),$=T(68653),re=T(76898),ue=T(99433),ae=T(17977),oe=T(86810);T(90912);let Z=X=class extends oe.wq{constructor(fe){super(fe),this.label=null,this.size=null,this.value=null}clone(){return new X({label:this.label,size:this.size,value:this.value})}};(0,D._)([(0,W.Cb)({type:String,json:{write:!0}})],Z.prototype,"label",void 0),(0,D._)([(0,W.Cb)({type:Number,cast:U.t_,json:{write:!0}})],Z.prototype,"size",void 0),(0,D._)([(0,W.Cb)({type:Number,json:{write:!0}})],Z.prototype,"value",void 0),Z=X=(0,D._)([(0,re.j)("esri.renderers.visualVariables.support.SizeStop")],Z);const Q=Z;var le,J=T(24729),se=T(86971),ee=T(81808);const ne=B.Z.getLogger("esri.renderers.visualVariables.SizeVariable"),ce=new w.X({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),de=new w.X({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function me(fe){if(null!=fe)return"string"==typeof fe||"number"==typeof fe?(0,U.t_)(fe):"size"===fe.type?(0,se.iY)(fe)?fe:(delete(fe={...fe}).type,new he(fe)):void 0}function _e(fe,De,ve){if("object"!=typeof fe)return fe;const Ce=new he;return Ce.read(fe,ve),Ce}let he=le=class extends ae.Z{constructor(fe){super(fe),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:ee.viewScaleRE.test(this.valueExpression)}}set expression(fe){ne.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===fe?(this.valueExpression="$view.scale",this._set("expression",fe)):this._set("expression",null)}set index(fe){(0,se.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${fe}].maxSize`),(0,se.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${fe}].minSize`),this._set("index",fe)}get inputValueType(){return(0,se.PS)(this)}set maxDataValue(fe){fe&&this.stops&&(ne.warn("cannot set maxDataValue when stops is not null."),fe=null),this._set("maxDataValue",fe)}set maxSize(fe){fe&&this.stops&&(ne.warn("cannot set maxSize when stops is not null."),fe=null),this._set("maxSize",fe)}castMaxSize(fe){return me(fe)}readMaxSize(fe,De,ve){return _e(fe,0,ve)}set minDataValue(fe){fe&&this.stops&&(ne.warn("cannot set minDataValue when stops is not null."),fe=null),this._set("minDataValue",fe)}set minSize(fe){fe&&this.stops&&(ne.warn("cannot set minSize when stops is not null."),fe=null),this._set("minSize",fe)}castMinSize(fe){return me(fe)}readMinSize(fe,De,ve){return _e(fe,0,ve)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(fe){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?fe&&Array.isArray(fe)&&(fe=fe.filter(De=>!!De)).sort((De,ve)=>De.value-ve.value):fe&&(ne.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),fe=null),this._set("stops",fe)}get transformationType(){return(0,se.QW)(this,this.inputValueType)}readValueExpression(fe,De){return fe||De.expression&&"$view.scale"}writeValueExpressionWebScene(fe,De,ve,Ce){if("$view.scale"===fe){if(Ce&&Ce.messages){const ge=this.index;Ce.messages.push(new x.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof ge?ge:`visualVariables[${ge}]`)+".valueExpression",context:Ce}))}}else De[ve]=fe}readValueUnit(fe){return fe?de.read(fe):null}clone(){return new le({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,se.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,se.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(fe=>fe.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===se.hL.ClampedLinear){const{minSize:fe,maxSize:De}=this;return this.minSize=De,this.maxSize=fe,this}if(this.transformationType===se.hL.Stops){const fe=this.stops,De=fe.map(Ce=>Ce.size).reverse(),ve=fe.length;for(let Ce=0;Ce<ve;Ce++)fe[Ce].size=De[Ce];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(fe=>fe.value||0)}};(0,D._)([(0,W.Cb)({readOnly:!0})],he.prototype,"cache",null),(0,D._)([(0,W.Cb)({type:ce.apiValues,json:{type:ce.jsonValues,origins:{"web-map":{read:!1}},read:ce.read,write:ce.write}})],he.prototype,"axis",void 0),(0,D._)([(0,W.Cb)({type:String,value:null,json:{read:!1}})],he.prototype,"expression",null),(0,D._)([(0,W.Cb)()],he.prototype,"index",null),(0,D._)([(0,W.Cb)({type:String,readOnly:!0})],he.prototype,"inputValueType",null),(0,D._)([(0,W.Cb)({type:J.Z,json:{write:!0}})],he.prototype,"legendOptions",void 0),(0,D._)([(0,W.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"maxDataValue",null),(0,D._)([(0,W.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"maxSize",null),(0,D._)([(0,G.p)("maxSize")],he.prototype,"castMaxSize",null),(0,D._)([(0,$.r)("maxSize")],he.prototype,"readMaxSize",null),(0,D._)([(0,W.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"minDataValue",null),(0,D._)([(0,W.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"minSize",null),(0,D._)([(0,G.p)("minSize")],he.prototype,"castMinSize",null),(0,D._)([(0,$.r)("minSize")],he.prototype,"readMinSize",null),(0,D._)([(0,W.Cb)({type:String,json:{write:!0}})],he.prototype,"normalizationField",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],he.prototype,"arcadeRequired",null),(0,D._)([(0,W.Cb)({type:String})],he.prototype,"scaleBy",void 0),(0,D._)([(0,W.Cb)({type:[Q],value:null,json:{write:!0}})],he.prototype,"stops",null),(0,D._)([(0,W.Cb)({type:["outline"],json:{write:!0}})],he.prototype,"target",void 0),(0,D._)([(0,W.Cb)({type:String,readOnly:!0})],he.prototype,"transformationType",null),(0,D._)([(0,W.Cb)({type:["size"],json:{type:["sizeInfo"]}})],he.prototype,"type",void 0),(0,D._)([(0,W.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],he.prototype,"useSymbolValue",void 0),(0,D._)([(0,W.Cb)({type:String,json:{write:!0}})],he.prototype,"valueExpression",void 0),(0,D._)([(0,$.r)("valueExpression",["valueExpression","expression"])],he.prototype,"readValueExpression",null),(0,D._)([(0,ue.c)("web-scene","valueExpression")],he.prototype,"writeValueExpressionWebScene",null),(0,D._)([(0,W.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],he.prototype,"valueRepresentation",void 0),(0,D._)([(0,W.Cb)({type:de.apiValues,json:{write:de.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],he.prototype,"valueUnit",void 0),(0,D._)([(0,$.r)("valueUnit")],he.prototype,"readValueUnit",null),he=le=(0,D._)([(0,re.j)("esri.renderers.visualVariables.SizeVariable")],he);const ye=he},17977:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var D=T(17626),x=T(2076),w=T(86810),B=T(63290),U=T(77712),H=(T(85931),T(8314),T(66656)),G=T(76898),$=T(90912),re=T(11333);const ue=B.Z.getLogger("esri.renderers.visualVariables.VisualVariable"),ae=new x.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let oe=class extends w.wq{constructor(X){super(X),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(X){return null==X?X:"function"==typeof X?(ue.error(".field: field must be a string value"),null):(0,$.Zs)(X)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,D._)([(0,U.Cb)()],oe.prototype,"index",void 0),(0,D._)([(0,U.Cb)({type:ae.apiValues,readOnly:!0,json:{read:ae.read,write:ae.write}})],oe.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"field",void 0),(0,D._)([(0,H.p)("field")],oe.prototype,"castField",null),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"valueExpression",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"valueExpressionTitle",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],oe.prototype,"arcadeRequired",null),(0,D._)([(0,U.Cb)({type:re.Z,json:{write:!0}})],oe.prototype,"legendOptions",void 0),oe=(0,D._)([(0,G.j)("esri.renderers.visualVariables.VisualVariable")],oe);const ie=oe},8029:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),x=T(91558),w=T(86810),B=T(77712),Y=(T(85931),T(8314),T(90912)),H=T(76898),G=T(99433);let re=$=class extends w.wq{constructor(ae){super(ae),this.color=null,this.label=null,this.value=null}writeValue(ae,oe,ie){oe[ie]=ae??0}clone(){return new $({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,D._)([(0,B.Cb)({type:x.Z,json:{type:[Y.z8],write:!0}})],re.prototype,"color",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],re.prototype,"label",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],re.prototype,"value",void 0),(0,D._)([(0,G.c)("value")],re.prototype,"writeValue",null),re=$=(0,D._)([(0,H.j)("esri.renderers.visualVariables.support.ColorStop")],re);const ue=re},24729:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(11333);let G=H=class extends Y.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new H({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,D._)([(0,x.Cb)({type:[Number],json:{write:!0}})],G.prototype,"customValues",void 0),G=H=(0,D._)([(0,W.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],G);const $=G},11333:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(10914);let G=H=class extends Y.I{constructor(){super(...arguments),this.showLegend=null}clone(){return new H({title:this.title,showLegend:this.showLegend})}};(0,D._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"showLegend",void 0),G=H=(0,D._)([(0,W.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],G);const $=G},86971:(qe,xe,T)=>{"use strict";var D,x,Y;function w(Y){return Y&&"esri.renderers.visualVariables.SizeVariable"===Y.declaredClass}function B(Y){return null!=Y&&!isNaN(Y)&&isFinite(Y)}function U(Y){return Y.valueExpression?D.Expression:Y.field&&"string"==typeof Y.field?D.Field:D.Unknown}function W(Y,H){return(H||U(Y))===D.Unknown?x.Constant:Y.stops?x.Stops:null!=Y.minSize&&null!=Y.maxSize&&null!=Y.minDataValue&&null!=Y.maxDataValue?x.ClampedLinear:"unknown"===(Y.valueUnit||"unknown")?null!=Y.minSize&&null!=Y.minDataValue?Y.minSize&&Y.minDataValue?x.Proportional:x.Additive:x.Identity:x.RealWorldSize}T.d(xe,{PS:()=>U,QW:()=>W,RY:()=>D,hL:()=>x,iY:()=>w,qh:()=>B}),(Y=D||(D={})).Unknown="unknown",Y.Expression="expression",Y.Field="field",function(Y){Y.Unknown="unknown",Y.Stops="stops",Y.ClampedLinear="clamped-linear",Y.Proportional="proportional",Y.Additive="additive",Y.Constant="constant",Y.Identity="identity",Y.RealWorldSize="real-world-size"}(x||(x={}))},81808:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{getAllSizes:()=>De,getColor:()=>ue,getOpacity:()=>ae,getRotationAngle:()=>oe,getSize:()=>Z,getSizeForValue:()=>_e,getSizeFromNumberOrVariable:()=>Q,getSizeRangeAtScale:()=>he,getVisualVariableValues:()=>ye,viewScaleRE:()=>re});var D=T(91558),x=T(88879),w=T(94573),B=T(63290),U=T(62208),W=T(21254),Y=T(86971);const H=B.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),G=new x.Z,$=Math.PI,re=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function ue(ve,Ce,ge){const Te="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.find(Ve=>"color"===Ve.type):ve;if(!Te)return;if("esri.renderers.visualVariables.ColorVariable"!==Te.declaredClass)return void H.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const Le="number"==typeof Ce,je=Le?null:Ce,ze=je&&je.attributes;let Ee=Le?Ce:null;const Ae=Te.field,{ipData:we,hasExpression:Be}=Te.cache;let Pe=Te.cache.compiledFunc;if(!Ae&&!Be){const Ve=Te.stops;return Ve&&Ve[0]&&Ve[0].color}if("number"!=typeof Ee)if(Be){if((0,U.Wi)(ge)||(0,U.Wi)(ge.arcade))return void H.error("Use of arcade expressions requires an arcade context");const Ne=ge.arcade.arcadeUtils,Ie=Ne.getViewInfo({viewingMode:ge.viewingMode,scale:ge.scale,spatialReference:ge.spatialReference}),We=Ne.createExecContext(je,Ie);if(!Pe){const Se=Ne.createSyntaxTree(Te.valueExpression);Pe=Ne.createFunction(Se),Te.cache.compiledFunc=Pe}Ee=Ne.executeFunction(Pe,We)}else ze&&(Ee=ze[Ae]);const Oe=Te.normalizationField,Ke=ze?parseFloat(ze[Oe]):void 0;if(null!=Ee&&(!Oe||Le||!isNaN(Ke)&&0!==Ke)){isNaN(Ke)||Le||(Ee/=Ke);const Ve=fe(Ee,we);if(Ve){const Ne=Ve[0],Ie=Ve[1],We=Ne===Ie?Te.stops[Ne].color:D.Z.blendColors(Te.stops[Ne].color,Te.stops[Ie].color,Ve[2],(0,U.pC)(ge)?ge.color:void 0);return new D.Z(We)}}}function ae(ve,Ce,ge){const Te="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.find(Ve=>"opacity"===Ve.type):ve;if(!Te)return;if("esri.renderers.visualVariables.OpacityVariable"!==Te.declaredClass)return void H.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const Le="number"==typeof Ce,je=Le?null:Ce,ze=je&&je.attributes;let Ee=Le?Ce:null;const Ae=Te.field,{ipData:we,hasExpression:Be}=Te.cache;let Pe=Te.cache.compiledFunc;if(!Ae&&!Be){const Ve=Te.stops;return Ve&&Ve[0]&&Ve[0].opacity}if("number"!=typeof Ee)if(Be){if((0,U.Wi)(ge)||(0,U.Wi)(ge.arcade))return void H.error("Use of arcade expressions requires an arcade context");const Ne=ge.arcade.arcadeUtils,Ie=Ne.getViewInfo({viewingMode:ge.viewingMode,scale:ge.scale,spatialReference:ge.spatialReference}),We=Ne.createExecContext(je,Ie);if(!Pe){const Se=Ne.createSyntaxTree(Te.valueExpression);Pe=Ne.createFunction(Se),Te.cache.compiledFunc=Pe}Ee=Ne.executeFunction(Pe,We)}else ze&&(Ee=ze[Ae]);const Oe=Te.normalizationField,Ke=ze?parseFloat(ze[Oe]):void 0;if(null!=Ee&&(!Oe||Le||!isNaN(Ke)&&0!==Ke)){isNaN(Ke)||Le||(Ee/=Ke);const Ve=fe(Ee,we);if(Ve){const Ne=Ve[0],Ie=Ve[1];if(Ne===Ie)return Te.stops[Ne].opacity;{const We=Te.stops[Ne].opacity;return We+(Te.stops[Ie].opacity-We)*Ve[2]}}}}function oe(ve,Ce,ge){const Te="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.find(Ke=>"rotation"===Ke.type):ve;if(!Te)return;if("esri.renderers.visualVariables.RotationVariable"!==Te.declaredClass)return void H.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const Le=Te.axis||"heading",je="heading"===Le&&"arithmetic"===Te.rotationType?90:0,ze="heading"===Le&&"arithmetic"===Te.rotationType?-1:1,Ee="number"==typeof Ce?null:Ce,Ae=Ee&&Ee.attributes,we=Te.field,{hasExpression:Be}=Te.cache;let Pe=Te.cache.compiledFunc,Oe=0;if(!we&&!Be)return Oe;if(Be){if((0,U.Wi)(ge)||(0,U.Wi)(ge.arcade))return void H.error("Use of arcade expressions requires an arcade context");const Ve=ge.arcade.arcadeUtils,Ne=Ve.getViewInfo({viewingMode:ge.viewingMode,scale:ge.scale,spatialReference:ge.spatialReference}),Ie=Ve.createExecContext(Ee,Ne);if(!Pe){const We=Ve.createSyntaxTree(Te.valueExpression);Pe=Ve.createFunction(We),Te.cache.compiledFunc=Pe}Oe=Ve.executeFunction(Pe,Ie)}else Ae&&(Oe=Ae[we]||0);return Oe="number"!=typeof Oe||isNaN(Oe)?null:je+ze*Oe,Oe}function Z(ve,Ce,ge){const Te="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.find(je=>"size"===je.type):ve;if(!Te)return;if("esri.renderers.visualVariables.SizeVariable"!==Te.declaredClass)return void H.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const Le=_e(function ie(ve,Ce,ge){const Te="number"==typeof Ce,Le=Te?null:Ce,je=Le&&Le.attributes;let ze=Te?Ce:null;const{isScaleDriven:Ee}=ve.cache;let Ae=ve.cache.compiledFunc;if(Ee){const Be=(0,U.pC)(ge)?ge.scale:void 0,Pe=(0,U.pC)(ge)?ge.view:void 0;ze=null==Be||"3d"===Pe?function X(ve){let Ce=null,ge=null;const Te=ve.stops;return Te?(Ce=Te[0].value,ge=Te[Te.length-1].value):(Ce=ve.minDataValue||0,ge=ve.maxDataValue||0),(Ce+ge)/2}(ve):Be}else if(!Te)switch(ve.inputValueType){case Y.RY.Expression:{if((0,U.Wi)(ge)||(0,U.Wi)(ge.arcade))return void H.error("Use of arcade expressions requires an arcade context");const Pe=ge.arcade.arcadeUtils,Oe=Pe.getViewInfo({viewingMode:ge.viewingMode,scale:ge.scale,spatialReference:ge.spatialReference}),Ke=Pe.createExecContext(Le,Oe);if(!Ae){const Ve=Pe.createSyntaxTree(ve.valueExpression);Ae=Pe.createFunction(Ve),ve.cache.compiledFunc=Ae}ze=Pe.executeFunction(Ae,Ke);break}case Y.RY.Field:je&&(ze=je[ve.field]);break;case Y.RY.Unknown:ze=null}if(!(0,Y.qh)(ze))return null;if(Te||!ve.normalizationField)return ze;const we=je?parseFloat(je[ve.normalizationField]):null;return(0,Y.qh)(we)&&0!==we?ze/we:null}(Te,Ce,ge),Te,Ce,ge,Te.cache.ipData);return null==Le||isNaN(Le)?0:Le}function Q(ve,Ce,ge){return null==ve?null:(0,Y.iY)(ve)?Z(ve,Ce,ge):(0,Y.qh)(ve)?ve:null}function J(ve,Ce,ge){return(0,Y.qh)(ge)&&ve>ge?ge:(0,Y.qh)(Ce)&&ve<Ce?Ce:ve}function _e(ve,Ce,ge,Te,Le){switch(Ce.transformationType){case Y.hL.Additive:return function se(ve,Ce,ge,Te){return ve+(Q(Ce.minSize,ge,Te)||Ce.minDataValue)}(ve,Ce,ge,Te);case Y.hL.Constant:return function ee(ve,Ce,ge){const Te=ve.stops;let Le=Te&&Te.length&&Te[0].size;return null==Le&&(Le=ve.minSize),Q(Le,Ce,ge)}(Ce,ge,Te);case Y.hL.ClampedLinear:return function le(ve,Ce,ge,Te){const Le=(ve-Ce.minDataValue)/(Ce.maxDataValue-Ce.minDataValue),je=Q(Ce.minSize,ge,Te),ze=Q(Ce.maxSize,ge,Te),Ee=(0,U.pC)(Te)?Te.shape:void 0;if(ve<=Ce.minDataValue)return je;if(ve>=Ce.maxDataValue)return ze;if("area"===Ce.scaleBy&&Ee){const Ae="circle"===Ee,we=Ae?$*(je/2)**2:je*je,Be=we+Le*((Ae?$*(ze/2)**2:ze*ze)-we);return Ae?2*Math.sqrt(Be/$):Math.sqrt(Be)}return je+Le*(ze-je)}(ve,Ce,ge,Te);case Y.hL.Proportional:return function ne(ve,Ce,ge,Te){const Le=(0,U.pC)(Te)?Te.shape:void 0,je=ve/Ce.minDataValue,ze=Q(Ce.minSize,ge,Te),Ee=Q(Ce.maxSize,ge,Te);let Ae=null;return Ae="circle"===Le?2*Math.sqrt(je*(ze/2)**2):"square"===Le||"diamond"===Le||"image"===Le?Math.sqrt(je*ze**2):je*ze,J(Ae,ze,Ee)}(ve,Ce,ge,Te);case Y.hL.Stops:return function ce(ve,Ce,ge,Te,Le){const[je,ze,Ee]=fe(ve,Le);if(je===ze)return Q(Ce.stops[je].size,ge,Te);{const Ae=Q(Ce.stops[je].size,ge,Te);return Ae+(Q(Ce.stops[ze].size,ge,Te)-Ae)*Ee}}(ve,Ce,ge,Te,Le);case Y.hL.RealWorldSize:return function de(ve,Ce,ge,Te){const Le=((0,U.pC)(Te)&&Te.resolution?Te.resolution:1)*W.a[Ce.valueUnit],je=Q(Ce.minSize,ge,Te),ze=Q(Ce.maxSize,ge,Te),{valueRepresentation:Ee}=Ce;let Ae=null;return Ae="area"===Ee?2*Math.sqrt(ve/$)/Le:"radius"===Ee||"distance"===Ee?2*ve/Le:ve/Le,J(Ae,je,ze)}(ve,Ce,ge,Te);case Y.hL.Identity:return ve;case Y.hL.Unknown:return null}}function he(ve,Ce,ge){const{isScaleDriven:Te}=ve.cache;if(!(Te&&"3d"===ge||Ce))return null;const Le={scale:Ce,view:ge};let je=Q(ve.minSize,G,Le),ze=Q(ve.maxSize,G,Le);if(null!=je||null!=ze){if(je>ze){const Ee=ze;ze=je,je=Ee}return{minSize:je,maxSize:ze}}}function ye(ve,Ce,ge){if(!ve.visualVariables)return;const Te=[],Le=[],je=[],ze=[],Ee=[];for(const Ae of ve.visualVariables)switch(Ae.type){case"color":Le.push(Ae);break;case"opacity":je.push(Ae);break;case"rotation":Ee.push(Ae);break;case"size":ze.push(Ae)}return Le.forEach(Ae=>{const we=ue(Ae,Ce,ge);Te.push({variable:Ae,value:we})}),je.forEach(Ae=>{const we=ae(Ae,Ce,ge);Te.push({variable:Ae,value:we})}),Ee.forEach(Ae=>{const we=oe(Ae,Ce,ge);Te.push({variable:Ae,value:we})}),ze.forEach(Ae=>{const we=Z(Ae,Ce,ge);Te.push({variable:Ae,value:we})}),Te.filter(Ae=>null!=Ae.value)}function fe(ve,Ce){if(!Ce)return;let ge=0,Te=Ce.length-1;return Ce.some((Le,je)=>ve<Le?(Te=je,!0):(ge=je,!1)),[ge,Te,(ve-Ce[ge])/(Ce[Te]-Ce[ge])]}function De(ve,Ce,ge){const Te=["proportional","proportional","proportional"];for(const Le of ve){const je=Le.useSymbolValue?"symbol-value":Z(Le,Ce,ge);switch(Le.axis){case"width":Te[0]=je;break;case"depth":Te[1]=je;break;case"height":Te[2]=je;break;case"width-and-depth":Te[0]=je,Te[1]=je;break;case"all":case void 0:case null:Te[0]=je,Te[1]=je,Te[2]=je;break;default:(0,w.Bg)(Le.axis)}}return Te}},84792:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>ue});var D=T(15861),x=T(59318),w=T(24263),B=T(26584),U=T(8314),W=T(58817),Y=T(62208),H=T(10699),G=T(21726),$=T(12680),re=T(33899);function ue(Pe,Oe){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(Pe,Oe){const Ke=(0,G.HK)(Pe),Ve=(0,G.jc)(Pe);Ve||Ke||(Pe=(0,G.Fv)(Pe));const Ne={url:Pe,requestOptions:{...(0,Y.Wg)(Oe)}};let Ie=(0,G.oh)(Pe);if(Ie){const $e=yield ge(Ie,Ne);if(null!=$e)return{data:$e,getHeader:se,requestOptions:Ne.requestOptions,url:Ne.url};Ie.after||Ie.error||(Ie=null)}if(Pe=Ne.url,"image"===(Oe=Ne.requestOptions).responseType){if((0,U.Z)("host-webworker")||(0,U.Z)("host-node"))throw ce("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),Ne)}else if(Ke)throw ce("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+Oe.responseType),Ne);if("head"===Oe.method){if(Oe.body)throw ce("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),Ne);if(Ke||Ve)throw ce("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),Ne)}if(yield de(),oe)return oe.execute(Pe,Oe);const We=new AbortController;(0,H.fu)(Oe,()=>We.abort());const Se={controller:We,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Ie,params:Ne,redoRequest:!1,useIdentity:ie.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},He=yield ze(Se);return Ie?.after?.(He),He})).apply(this,arguments)}let oe;const ie=x.Z.request,X="FormData"in globalThis,Z=[499,498,403,401],Q=["COM_0056","COM_0057","SB_0008"],J=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],se=()=>null,ee=Symbol();function le(Pe){const Oe=(0,G.P$)(Pe);Oe&&!ue._corsServers.includes(Oe)&&ue._corsServers.push(Oe)}function ne(Pe){const Oe=(0,G.P$)(Pe);return!Oe||Oe.endsWith(".arcgis.com")||ue._corsServers.includes(Oe)||(0,G.kl)(Oe)}function ce(Pe,Oe,Ke,Ve){let Ne="Error";const Ie={url:Ke.url,requestOptions:Ke.requestOptions,getHeader:se,ssl:!1};if(Oe instanceof B.Z)return Oe.details?(Oe.details=(0,W.d9)(Oe.details),Oe.details.url=Ke.url,Oe.details.requestOptions=Ke.requestOptions):Oe.details=Ie,Oe;if(Oe){const We=Ve&&($e=>Ve.headers.get($e)),Se=Ve&&Ve.status,He=Oe.message;He&&(Ne=He),We&&(Ie.getHeader=We),Ie.httpStatus=(null!=Oe.httpCode?Oe.httpCode:Oe.code)||Se||0,Ie.subCode=Oe.subcode,Ie.messageCode=Oe.messageCode,Ie.messages="string"==typeof Oe.details?[Oe.details]:Oe.details,Ie.raw=ee in Oe?Oe[ee]:Oe}return(0,H.D_)(Oe)?(0,H.zE)():new B.Z(Pe,Ne,Ie)}function de(){return me.apply(this,arguments)}function me(){return(me=(0,D.Z)(function*(){(0,U.Z)("host-webworker")?oe||(oe=yield T.e(3358).then(T.bind(T,23358))):ue._abortableFetch||(ue._abortableFetch=globalThis.fetch.bind(globalThis))})).apply(this,arguments)}function _e(){return he.apply(this,arguments)}function he(){return(he=(0,D.Z)(function*(){w.id||(yield T.e(9058).then(T.bind(T,59058)))})).apply(this,arguments)}function ye(Pe){return fe.apply(this,arguments)}function fe(){return(fe=(0,D.Z)(function*(Pe){const Oe=Pe.params.url,Ke=Pe.params.requestOptions,Ve=Pe.controller.signal,Ne=Ke.body;let Ie=null,We=null;if(X&&"HTMLFormElement"in globalThis&&(Ne instanceof FormData?Ie=Ne:Ne instanceof HTMLFormElement&&(Ie=new FormData(Ne))),"string"==typeof Ne&&(We=Ne),Pe.fetchOptions={cache:Ke.cacheBust&&!ue._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:Ke.headers||{},method:"head"===Ke.method?"HEAD":"GET",mode:"cors",priority:ie.priority,redirect:"follow",signal:Ve},(Ie||We)&&(Pe.fetchOptions.body=Ie||We),"anonymous"===Ke.authMode&&(Pe.useIdentity=!1),Pe.hasToken=!!(/token=/i.test(Oe)||Ke.query?.token||Ie?.get("token")),!Pe.hasToken&&x.Z.apiKey&&(0,$.r)(Oe)&&(Ke.query||(Ke.query={}),Ke.query.token=x.Z.apiKey,Pe.hasToken=!0),Pe.useIdentity&&!Pe.hasToken&&!Pe.credentialToken&&!De(Oe)&&!(0,H.Hc)(Ve)){let Se;"immediate"===Ke.authMode?(yield _e(),Se=yield w.id.getCredential(Oe,{signal:Ve}),Pe.credential=Se):"no-prompt"===Ke.authMode?(yield _e(),Se=yield w.id.getCredential(Oe,{prompt:!1,signal:Ve}).catch(()=>{}),Pe.credential=Se):w.id&&(Se=w.id.findCredential(Oe)),Se&&(Pe.credentialToken=Se.token,Pe.useSSL=!!Se.ssl)}})).apply(this,arguments)}function De(Pe){return J.some(Oe=>Oe.test(Pe))}function ve(Pe){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,D.Z)(function*(Pe){let Oe=Pe.params.url;const Ke=Pe.params.requestOptions,Ve=Pe.fetchOptions,Ne=(0,G.jc)(Oe)||(0,G.HK)(Oe),Ie=Ke.responseType||"json",We=Ne?0:null!=Ke.timeout?Ke.timeout:ie.timeout;let Se=!1;if(!Ne){Pe.useSSL&&(Oe=(0,G.hO)(Oe)),Ke.cacheBust&&"default"===Ve.cache&&(Oe=(0,G.ZN)(Oe,"request.preventCache",Date.now()));let it={...Ke.query};Pe.credentialToken&&(it.token=Pe.credentialToken);let Xe=(0,G.B7)(it);(0,U.Z)("esri-url-encodes-apostrophe")&&(Xe=Xe.replace(/'/g,"%27"));const rt=Oe.length+1+Xe.length;let Ze;Se="delete"===Ke.method||"post"===Ke.method||"put"===Ke.method||!!Ke.body||rt>ie.maxUrlLength;const lt=Ke.useProxy||!!(0,G.ed)(Oe);if(lt){const st=(0,G.b7)(Oe);Ze=st.path,!Se&&Ze.length+1+rt>ie.maxUrlLength&&(Se=!0),st.query&&(it={...st.query,...it})}if("HEAD"===Ve.method&&(Se||lt)){if(Se)throw ce("request:invalid-parameters",rt>ie.maxUrlLength?new Error("URL exceeds maximum length"):new Error("cannot use POST request when method is 'head'"),Pe.params);if(lt)throw ce("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),Pe.params)}if(Se?(Ve.method="delete"===Ke.method?"DELETE":"put"===Ke.method?"PUT":"POST",Ke.body?Oe=(0,G.fl)(Oe,it):(Ve.body=(0,G.B7)(it),Ve.headers["Content-Type"]="application/x-www-form-urlencoded")):Oe=(0,G.fl)(Oe,it),lt&&(Pe.useProxy=!0,Oe=`${Ze}?${Oe}`),it.token&&X&&Ve.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(Oe)&&Ve.body.set("token",it.token),Ke.hasOwnProperty("withCredentials"))Pe.withCredentials=Ke.withCredentials;else if(!(0,G.D6)(Oe,(0,G.TI)()))if((0,G.kl)(Oe))Pe.withCredentials=!0;else if(w.id){const st=w.id.findServerInfo(Oe);st&&st.webTierAuth&&(Pe.withCredentials=!0)}Pe.withCredentials&&(Ve.credentials="include",(0,re.jH)(Oe)&&(yield(0,re.jz)(Se?(0,G.fl)(Oe,it):Oe)))}let He,$e,et=0,nt=!1;We>0&&(et=setTimeout(()=>{nt=!0,Pe.controller.abort()},We));try{if("native-request-init"===Ke.responseType)$e=Ve,$e.url=Oe;else if("image"!==Ke.responseType||"default"!==Ve.cache||"GET"!==Ve.method||Se||Le(Ke.headers)||!Ne&&!Pe.useProxy&&ie.proxyUrl&&!ne(Oe)){if(He=yield ue._abortableFetch(Oe,Ve),Pe.useProxy||le(Oe),"native"===Ke.responseType)$e=He;else if("HEAD"!==Ve.method)if(He.ok){switch(Ie){case"array-buffer":$e=yield He.arrayBuffer();break;case"blob":case"image":$e=yield He.blob();break;default:$e=yield He.text()}if(et&&(clearTimeout(et),et=0),"json"===Ie||"xml"===Ie||"document"===Ie)if($e)switch(Ie){case"json":$e=JSON.parse($e);break;case"xml":$e=je($e,"application/xml");break;case"document":$e=je($e,"text/html")}else $e=null;if($e){if("array-buffer"===Ie||"blob"===Ie){const it=He.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(it)&&$e["blob"===Ie?"size":"byteLength"]<=750)try{const Xe=yield new Response($e).json();Xe.error&&($e=Xe)}catch{}}"image"===Ie&&$e instanceof Blob&&($e=yield Be(URL.createObjectURL($e),Pe,!0))}}else $e=yield He.text()}else $e=yield Be(Oe,Pe)}catch(it){if("AbortError"===it.name)throw nt?new Error("Timeout exceeded"):(0,H.zE)("Request canceled");if(!(!He&&it instanceof TypeError&&ie.proxyUrl)||Ke.body||"delete"===Ke.method||"head"===Ke.method||"post"===Ke.method||"put"===Ke.method||Pe.useProxy||ne(Oe))throw it;Pe.redoRequest=!0,(0,G.tD)({proxyUrl:ie.proxyUrl,urlPrefix:(0,G.P$)(Oe)})}finally{et&&clearTimeout(et)}return[He,$e]})).apply(this,arguments)}function ge(Pe,Oe){return Te.apply(this,arguments)}function Te(){return(Te=(0,D.Z)(function*(Pe,Oe){if(null!=Pe.responseData)return Pe.responseData;if(Pe.headers&&(Oe.requestOptions.headers={...Oe.requestOptions.headers,...Pe.headers}),Pe.query&&(Oe.requestOptions.query={...Oe.requestOptions.query,...Pe.query}),Pe.before){let Ke,Ve;try{Ve=yield Pe.before(Oe)}catch(Ne){Ke=ce("request:interceptor",Ne,Oe)}if((Ve instanceof Error||Ve instanceof B.Z)&&(Ke=ce("request:interceptor",Ve,Oe)),Ke)throw Pe.error&&Pe.error(Ke),Ke;return Ve}})).apply(this,arguments)}function Le(Pe){if(Pe)for(const Oe of Object.getOwnPropertyNames(Pe))if(Pe[Oe])return!0;return!1}function je(Pe,Oe){let Ke;try{Ke=(new DOMParser).parseFromString(Pe,Oe)}catch{}if(!Ke||Ke.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return Ke}function ze(Pe){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,D.Z)(function*(Pe){let Oe,Ke;yield ye(Pe);try{do{[Oe,Ke]=yield ve(Pe)}while(!(yield Ae(Pe,Oe,Ke)))}catch(Ie){const We=ce("request:server",Ie,Pe.params,Oe);throw We.details.ssl=Pe.useSSL,Pe.interceptor&&Pe.interceptor.error&&Pe.interceptor.error(We),We}const Ve=Pe.params.url;if(Ke&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(Ve)){if(!Pe.hasToken&&!Pe.credentialToken&&Ke.user?.username&&!(0,G.kl)(Ve)){const Ie=(0,G.P$)(Ve,!0);Ie&&ie.trustedServers.push(Ie)}Array.isArray(Ke.authorizedCrossOriginNoCorsDomains)&&(0,re.Hu)(Ke.authorizedCrossOriginNoCorsDomains)}const Ne=Pe.credential;if(Ne&&w.id){const Ie=w.id.findServerInfo(Ne.server);let We=Ie&&Ie.owningSystemUrl;if(We){We=We.replace(/\/?$/,"/sharing");const Se=w.id.findCredential(We,Ne.userId);Se&&-1===w.id._getIdenticalSvcIdx(We,Se)&&Se.resources.unshift(We)}}return{data:Ke,getHeader:Oe?Ie=>Oe.headers.get(Ie):se,requestOptions:Pe.params.requestOptions,ssl:Pe.useSSL,url:Pe.params.url}})).apply(this,arguments)}function Ae(Pe,Oe,Ke){return we.apply(this,arguments)}function we(){return(we=(0,D.Z)(function*(Pe,Oe,Ke){if(Pe.redoRequest)return Pe.redoRequest=!1,!1;const Ve=Pe.params.requestOptions;if(!Oe||"native"===Ve.responseType||"native-request-init"===Ve.responseType)return!0;let Ne,Ie,We,Se;if(!Oe.ok)throw Ne=new Error(`Unable to load ${Oe.url} status: ${Oe.status}`),Ne[ee]=Ke,Ne;Ke?.error&&(Ne=Ke.error),Ne&&(Ie=Number(Ne.code),We=Ne.hasOwnProperty("subcode")?Number(Ne.subcode):null,Se=Ne.messageCode,Se=Se&&Se.toUpperCase());const He=Ve.authMode;if(403===Ie&&(4===We||Ne.message&&Ne.message.toLowerCase().includes("ssl")&&!Ne.message.toLowerCase().includes("permission"))){if(!Pe.useSSL)return Pe.useSSL=!0,!1}else if(!Pe.hasToken&&Pe.useIdentity&&("no-prompt"!==He||498===Ie)&&Z.includes(Ie)&&!De(Pe.params.url)&&(403!==Ie||!Q.includes(Se)&&(null==We||2===We&&Pe.credentialToken))){yield _e();try{const $e=yield w.id.getCredential(Pe.params.url,{error:ce("request:server",Ne,Pe.params),prompt:"no-prompt"!==He,signal:Pe.controller.signal,token:Pe.credentialToken});return Pe.credential=$e,Pe.credentialToken=$e.token,Pe.useSSL=Pe.useSSL||$e.ssl,!1}catch($e){if("no-prompt"===He)return Pe.credential=null,Pe.credentialToken=null,!1;Ne=$e}}if(Ne)throw Ne;return!0})).apply(this,arguments)}function Be(Pe,Oe,Ke=!1){const Ve=Oe.controller.signal,Ne=new Image;return Ne.crossOrigin=Oe.withCredentials?"use-credentials":"anonymous",Ne.alt="",Ne.fetchPriority=ie.priority,Ne.src=Pe,(0,re.fY)(Ne,Pe,Ke,Ve)}ue._abortableFetch=null,ue._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},68886:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>$});var D=T(15861),x=T(84792),w=T(90912),B=T(91179),U=T(2618);function Y(ue,ae,oe){const ie=(0,B.q9)(ae);return ue.map(X=>{const Z=ie.fromJSON(X);return Z.spatialReference=oe,Z})}var H=T(77294);const G=(0,w.se)(H.Z);function $(ue,ae,oe){return re.apply(this,arguments)}function re(){return(re=(0,D.Z)(function*(ue,ae,oe){ae=G(ae);const ie=(0,U.en)(ue),X={...ie.query,f:"json",...ae.toJSON()},Z=ae.outSpatialReference,Q=(0,B.Ji)(ae.geometries[0]),J=(0,U.lA)(X,oe);return(0,x.default)(ie.path+"/project",J).then(({data:{geometries:se}})=>Y(se,Q,Z))})).apply(this,arguments)}},76391:(qe,xe,T)=>{"use strict";function D(x){const w={};for(const B in x){if("declaredClass"===B)continue;const U=x[B];if(null!=U&&"function"!=typeof U)if(Array.isArray(U)){w[B]=[];for(let W=0;W<U.length;W++)w[B][W]=D(U[W])}else"object"==typeof U?U.toJSON&&(w[B]=JSON.stringify(U)):w[B]=U}return w}T.d(xe,{A:()=>D})},2865:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>H,e:()=>W});var D=T(15861),x=T(2618),w=T(20477),B=T(17253),U=T(84952);function W($,re,ue){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.Z)(function*($,re,ue){const ae=yield H($,re,ue);return B.default.fromJSON(ae)})).apply(this,arguments)}function H($,re,ue){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*($,re,ue){const ae=(0,x.en)($),oe={...ue},ie=U.Z.from(re),{data:X}=yield(0,w.executeQuery)(ae,ie,ie.sourceSpatialReference,oe);return X})).apply(this,arguments)}},20514:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>U});var D=T(62208),x=T(16730),w=T(37053);function B(H,G,$){if(null==H.hasM||H.hasZ)for(const re of G)for(const ue of re)ue.length>2&&(ue[2]*=$)}function U(H,G,$){if(!H&&!G||!$)return;const re=(0,x._R)($);W(H,$,re),W(G,$,re)}function W(H,G,$){if(H)for(const re of H)Y(re.geometry,G,$)}function Y(H,G,$){if((0,D.Wi)(H)||!H.spatialReference||(0,w.fS)(H.spatialReference,G))return;const re=(0,x._R)(H.spatialReference)/$;if(1!==re)if("x"in H)null!=H.z&&(H.z*=re);else if("rings"in H)B(H,H.rings,re);else if("paths"in H)B(H,H.paths,re);else if("points"in H&&(null==H.hasM||H.hasZ))for(const ue of H.points)ue.length>2&&(ue[2]*=re)}},71260:(qe,xe,T)=>{"use strict";T.d(xe,{G$:()=>le,K9:()=>_e,O7:()=>G});var D=T(26584),x=T(62208),w=T(24192),B=T(88071),U=T(98558);const W=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],Y=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],H=["upperLeft","lowerLeft"];function G(he){return he>=W.length?null:W[he]}function $(he){return he>=Y.length?null:Y[he]}function re(he){return he>=H.length?null:H[he]}function ue(he,ye){return ye>=he.geometryTypes.length?null:he.geometryTypes[ye]}function ae(he,ye,fe){const ve=ye.createPointGeometry(fe);for(;he.next();)switch(he.tag()){case 3:{const Ce=he.getUInt32(),ge=he.pos()+Ce;let Te=0;for(;he.pos()<ge;)ye.addCoordinatePoint(ve,he.getSInt64(),Te++);break}default:he.skip()}return ve}function oe(he,ye,fe){const Ce=ye.createGeometry(fe),ge=2+(fe.hasZ?1:0)+(fe.hasM?1:0);for(;he.next();)switch(he.tag()){case 2:{const Te=he.getUInt32(),Le=he.pos()+Te;let je=0;for(;he.pos()<Le;)ye.addLength(Ce,he.getUInt32(),je++);break}case 3:{const Te=he.getUInt32(),Le=he.pos()+Te;let je=0;for(ye.allocateCoordinates(Ce);he.pos()<Le;)ye.addCoordinate(Ce,he.getSInt64(),je),je++,je===ge&&(je=0);break}default:he.skip()}return Ce}function ie(he){const ve=new B.Z;let Ce="esriGeometryPoint";for(;he.next();)switch(he.tag()){case 2:{const ge=he.getUInt32(),Te=he.pos()+ge;for(;he.pos()<Te;)ve.lengths.push(he.getUInt32());break}case 3:{const ge=he.getUInt32(),Te=he.pos()+ge;for(;he.pos()<Te;)ve.coords.push(he.getSInt64());break}case 1:Ce=U.A[he.getEnum()];break;default:he.skip()}return{queryGeometry:ve,queryGeometryType:Ce}}function X(he){for(;he.next();)switch(he.tag()){case 1:return he.getString();case 2:return he.getFloat();case 3:return he.getDouble();case 4:return he.getSInt32();case 5:return he.getUInt32();case 6:return he.getInt64();case 7:return he.getUInt64();case 8:return he.getSInt64();case 9:return he.getBool();default:return he.skip(),null}return null}function Z(he){const Te={type:G(0)};for(;he.next();)switch(he.tag()){case 1:Te.name=he.getString();break;case 2:Te.type=G(he.getEnum());break;case 3:Te.alias=he.getString();break;case 4:Te.sqlType=$(he.getEnum());break;case 5:default:he.skip();break;case 6:Te.defaultValue=he.getString()}return Te}function Q(he){const De={};for(;he.next();)switch(he.tag()){case 1:De.name=he.getString();break;case 2:De.isSystemMaintained=he.getBool();break;default:he.skip()}return De}function J(he,ye,fe,De){const Te=ye.createFeature(fe);let Le=0;for(;he.next();)switch(he.tag()){case 1:{const je=De[Le++].name;Te.attributes[je]=he.processMessage(X);break}case 2:Te.geometry=he.processMessageWithArgs(oe,ye,fe);break;case 4:Te.centroid=he.processMessageWithArgs(ae,ye,fe);break;default:he.skip()}return Te}function se(he){const Ce=[1,1,1,1];for(;he.next();)switch(he.tag()){case 1:Ce[0]=he.getDouble();break;case 2:Ce[1]=he.getDouble();break;case 4:Ce[2]=he.getDouble();break;case 3:Ce[3]=he.getDouble();break;default:he.skip()}return Ce}function ee(he){const Ce=[0,0,0,0];for(;he.next();)switch(he.tag()){case 1:Ce[0]=he.getDouble();break;case 2:Ce[1]=he.getDouble();break;case 4:Ce[2]=he.getDouble();break;case 3:Ce[3]=he.getDouble();break;default:he.skip()}return Ce}function le(he){const ve={originPosition:re(0)};for(;he.next();)switch(he.tag()){case 1:ve.originPosition=re(he.getEnum());break;case 2:ve.scale=he.processMessage(se);break;case 3:ve.translate=he.processMessage(ee);break;default:he.skip()}return ve}function ne(he){const ve={};for(;he.next();)switch(he.tag()){case 1:ve.shapeAreaFieldName=he.getString();break;case 2:ve.shapeLengthFieldName=he.getString();break;case 3:ve.units=he.getString();break;default:he.skip()}return ve}function ce(he,ye){const Te=ye.createSpatialReference();for(;he.next();)switch(he.tag()){case 1:Te.wkid=he.getUInt32();break;case 5:Te.wkt=he.getString();break;case 2:Te.latestWkid=he.getUInt32();break;case 3:Te.vcsWkid=he.getUInt32();break;case 4:Te.latestVcsWkid=he.getUInt32();break;default:he.skip()}return Te}function de(he,ye){const Pe=ye.createFeatureResult();Pe.geometryType=ue(ye,0);let Oe=!1;for(;he.next();)switch(he.tag()){case 1:Pe.objectIdFieldName=he.getString();break;case 3:Pe.globalIdFieldName=he.getString();break;case 4:Pe.geohashFieldName=he.getString();break;case 5:Pe.geometryProperties=he.processMessage(ne);break;case 7:Pe.geometryType=ue(ye,he.getEnum());break;case 8:Pe.spatialReference=he.processMessageWithArgs(ce,ye);break;case 10:Pe.hasZ=he.getBool();break;case 11:Pe.hasM=he.getBool();break;case 12:Pe.transform=he.processMessage(le);break;case 9:{const Ke=he.getBool();Pe.exceededTransferLimit=Ke;break}case 13:ye.addField(Pe,he.processMessage(Z));break;case 15:Oe||(ye.prepareFeatures(Pe),Oe=!0),ye.addFeature(Pe,he.processMessageWithArgs(J,ye,Pe,Pe.fields));break;case 2:Pe.uniqueIdField=he.processMessage(Q);break;default:he.skip()}return ye.finishFeatureResult(Pe),Pe}function me(he,ye){const ve={};let Ce=null;for(;he.next();)switch(he.tag()){case 4:Ce=he.processMessageWithArgs(ie);break;case 1:ve.featureResult=he.processMessageWithArgs(de,ye);break;default:he.skip()}return(0,x.pC)(Ce)&&ve.featureResult&&ye.addQueryGeometry(ve,Ce),ve}function _e(he,ye){try{const De=new w.Z(new Uint8Array(he),new DataView(he)),ve={};for(;De.next();)2===De.tag()?ve.queryResult=De.processMessageWithArgs(me,ye):De.skip();return ve}catch(fe){throw new D.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:fe})}}},98558:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>W,J:()=>Y});var D=T(16730),x=T(37053),w=T(66385),B=T(95786),U=T(88071);const W=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Y{constructor(G){this.options=G,this.geometryTypes=W,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new B.Z}prepareFeatures(G){this._vertexDimension=2,G.hasZ&&this._vertexDimension++,G.hasM&&this._vertexDimension++}finishFeatureResult(G){if(!G||!G.features||!G.hasZ||!this.options.sourceSpatialReference||!G.spatialReference||(0,x.fS)(G.spatialReference,this.options.sourceSpatialReference)||G.spatialReference.vcsWkid)return;const $=(0,D._R)(this.options.sourceSpatialReference)/(0,D._R)(G.spatialReference);if(1!==$)for(const re of G.features){if(!(0,w.S6)(re))continue;const ue=re.geometry.coords;for(let ae=2;ae<ue.length;ae+=3)ue[ae]*=$}}addFeature(G,$){G.features.push($)}createFeature(){return new w.u_}createSpatialReference(){return{wkid:0}}createGeometry(){return new U.Z}addField(G,$){G.fields.push($)}allocateCoordinates(G){G.coords.length=G.lengths.reduce(($,re)=>$+re,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(G,$){G.coords[this._coordinatePtr++]=$}addCoordinatePoint(G,$){G.coords.push($)}addLength(G,$){G.lengths.push($)}addQueryGeometry(G,$){G.queryGeometry=$.queryGeometry,G.queryGeometryType=$.queryGeometryType}createPointGeometry(){return new U.Z}}},85262:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>x});var D=T(71260);function x(w,B){const U=(0,D.K9)(w,B),W=U.queryResult.featureResult,Y=U.queryResult.queryGeometry,H=U.queryResult.queryGeometryType;if(W&&W.features&&W.features.length&&W.objectIdFieldName){const G=W.objectIdFieldName;for(const $ of W.features)$.attributes&&($.objectId=$.attributes[G])}return W&&(W.queryGeometry=Y,W.queryGeometryType=H),W}},20477:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{encodeGeometry:()=>re,executeQuery:()=>ae,executeQueryForCount:()=>J,executeQueryForExtent:()=>se,executeQueryForIds:()=>Q,executeQueryPBF:()=>ie,executeQueryPBFBuffer:()=>Z,queryToQueryStringParameters:()=>ue,runQuery:()=>ee});var D=T(15861),x=T(84792),w=T(62208),B=T(21726),U=T(91179),W=T(13924),Y=T(76391),H=T(85262),G=T(61515);const $="Layer does not support extent calculation.";function re(le,ne){if(ne&&"extent"===le.type)return`${le.xmin},${le.ymin},${le.xmax},${le.ymax}`;if(ne&&"point"===le.type)return`${le.x},${le.y}`;const ce=le.toJSON();return delete ce.spatialReference,JSON.stringify(ce)}function ue(le,ne){const ce=le.geometry,de=le.toJSON();delete de.compactGeometryEnabled,delete de.defaultSpatialReferenceEnabled;const me=de;let _e,he,ye;if((0,w.pC)(ce)&&(he=ce.spatialReference,ye=ce.spatialReference.wkid||JSON.stringify(ce.spatialReference),me.geometryType=(0,U.Ji)(ce),me.geometry=re(ce,le.compactGeometryEnabled),me.inSR=ye),de.groupByFieldsForStatistics&&(me.groupByFieldsForStatistics=de.groupByFieldsForStatistics.join(",")),de.objectIds&&(me.objectIds=de.objectIds.join(",")),de.orderByFields&&(me.orderByFields=de.orderByFields.join(",")),!de.outFields||!de.returnDistinctValues&&(ne?.returnCountOnly||ne?.returnExtentOnly||ne?.returnIdsOnly)?delete me.outFields:me.outFields=de.outFields.includes("*")?"*":de.outFields.join(","),de.outSR?(me.outSR=de.outSR.wkid||JSON.stringify(de.outSR),_e=le.outSpatialReference):ce&&(de.returnGeometry||de.returnCentroid)&&(me.outSR=me.inSR,_e=he),de.returnGeometry&&delete de.returnGeometry,de.outStatistics&&(me.outStatistics=JSON.stringify(de.outStatistics)),de.pixelSize&&(me.pixelSize=JSON.stringify(de.pixelSize)),de.quantizationParameters&&(le.defaultSpatialReferenceEnabled&&(0,w.pC)(he)&&(0,w.pC)(le.quantizationParameters)&&(0,w.pC)(le.quantizationParameters.extent)&&he.equals(le.quantizationParameters.extent.spatialReference)&&delete de.quantizationParameters.extent.spatialReference,me.quantizationParameters=JSON.stringify(de.quantizationParameters)),de.parameterValues&&(me.parameterValues=JSON.stringify(de.parameterValues)),de.rangeValues&&(me.rangeValues=JSON.stringify(de.rangeValues)),de.dynamicDataSource&&(me.layer=JSON.stringify({source:de.dynamicDataSource}),delete de.dynamicDataSource),de.timeExtent){const fe=de.timeExtent,{start:De,end:ve}=fe;null==De&&null==ve||(me.time=De===ve?De:`${De??"null"},${ve??"null"}`),delete de.timeExtent}return le.defaultSpatialReferenceEnabled&&(0,w.pC)(he)&&(0,w.pC)(_e)&&he.equals(_e)&&(me.defaultSR=me.inSR,delete me.inSR,delete me.outSR),me}function ae(le,ne,ce,de){return oe.apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(le,ne,ce,de){const me=(0,w.pC)(ne.timeExtent)&&ne.timeExtent.isEmpty?{data:{features:[]}}:yield ee(le,ne,"json",de);return(0,G.p)(ne,ce,me.data),me})).apply(this,arguments)}function ie(le,ne,ce,de){return X.apply(this,arguments)}function X(){return(X=(0,D.Z)(function*(le,ne,ce,de){if((0,w.pC)(ne.timeExtent)&&ne.timeExtent.isEmpty)return{data:ce.createFeatureResult()};const me=yield Z(le,ne,de),_e=me;return _e.data=(0,H.C)(me.data,ce),_e})).apply(this,arguments)}function Z(le,ne,ce){return ee(le,ne,"pbf",ce)}function Q(le,ne,ce){return(0,w.pC)(ne.timeExtent)&&ne.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):ee(le,ne,"json",ce,{returnIdsOnly:!0})}function J(le,ne,ce){return(0,w.pC)(ne.timeExtent)&&ne.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):ee(le,ne,"json",ce,{returnIdsOnly:!0,returnCountOnly:!0})}function se(le,ne,ce){return(0,w.pC)(ne.timeExtent)&&ne.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):ee(le,ne,"json",ce,{returnExtentOnly:!0,returnCountOnly:!0}).then(de=>{const me=de.data;if(me.hasOwnProperty("extent"))return de;if(me.features)throw new Error($);if(me.hasOwnProperty("count"))throw new Error($);return de})}function ee(le,ne,ce,de={},me={}){const _e="string"==typeof le?(0,B.mN)(le):le,he=ne.geometry?[ne.geometry]:[];return de.responseType="pbf"===ce?"array-buffer":"json",(0,W.aX)(he,null,de).then(ye=>{const fe=ye&&ye[0];(0,w.pC)(fe)&&((ne=ne.clone()).geometry=fe);const De=(0,Y.A)({..._e.query,f:ce,...me,...ue(ne,me)});return(0,x.default)((0,B.v_)(_e.path,"query"),{...de,query:{...De,...de.query}})})}},61515:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>w});var D=T(62208),x=T(33696);function w(B,U,W){if(!W||!W.features||!W.hasZ)return;const Y=(0,x.k)(W.geometryType,U,B.outSpatialReference);if(!(0,D.Wi)(Y))for(const H of W.features)Y(H.geometry)}},87183:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var $,D=T(17626),x=T(86810),w=T(77712),W=(T(85931),T(8314),T(90912)),Y=T(76898);const re={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ue=$=class extends x.wq{constructor(oe){super(oe),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:oe}=this,ie=function H(oe){const{exifInfo:ie,exifName:X,tagName:Z}=oe;if(!ie||!X||!Z)return null;const Q=ie.find(J=>J.name===X);return Q?function G(oe){const{tagName:ie,tags:X}=oe;if(!X||!ie)return null;const Z=X.find(Q=>Q.name===ie);return Z&&Z.value||null}({tagName:Z,tags:Q.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:oe});return re[ie]||null}clone(){return new $({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,D._)([(0,w.Cb)({type:String})],ue.prototype,"contentType",void 0),(0,D._)([(0,w.Cb)()],ue.prototype,"exifInfo",void 0),(0,D._)([(0,w.Cb)({readOnly:!0})],ue.prototype,"orientationInfo",null),(0,D._)([(0,w.Cb)({type:W.z8})],ue.prototype,"id",void 0),(0,D._)([(0,w.Cb)({type:String})],ue.prototype,"globalId",void 0),(0,D._)([(0,w.Cb)({type:String})],ue.prototype,"keywords",void 0),(0,D._)([(0,w.Cb)({type:String})],ue.prototype,"name",void 0),(0,D._)([(0,w.Cb)({json:{read:!1}})],ue.prototype,"parentGlobalId",void 0),(0,D._)([(0,w.Cb)({json:{read:!1}})],ue.prototype,"parentObjectId",void 0),(0,D._)([(0,w.Cb)({type:W.z8})],ue.prototype,"size",void 0),(0,D._)([(0,w.Cb)({json:{read:!1}})],ue.prototype,"url",void 0),ue=$=(0,D._)([(0,Y.j)("esri.layers.support.AttachmentInfo")],ue);const ae=ue},40251:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(91558),w=T(58817),B=T(77712),U=T(90912),W=T(55342),Y=T(76898),H=T(40669);let $=G=class extends H.Z{constructor(ue){super(ue),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new G({fromColor:(0,w.d9)(this.fromColor),toColor:(0,w.d9)(this.toColor),algorithm:this.algorithm})}};(0,D._)([(0,W.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],$.prototype,"algorithm",void 0),(0,D._)([(0,B.Cb)({type:x.Z,json:{type:[U.z8],write:!0}})],$.prototype,"fromColor",void 0),(0,D._)([(0,B.Cb)({type:x.Z,json:{type:[U.z8],write:!0}})],$.prototype,"toColor",void 0),(0,D._)([(0,B.Cb)({type:["algorithmic"]})],$.prototype,"type",void 0),$=G=(0,D._)([(0,Y.j)("esri.rest.support.AlgorithmicColorRamp")],$);const re=$},67736:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(86810),w=T(58817),B=T(77712),U=T(90912),W=T(76898),Y=T(99433);let G=H=class extends x.wq{constructor(re){super(re),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(re,ue){ue.resultOffset=this.start,ue.resultRecordCount=this.num||10}clone(){return new H((0,w.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,D._)([(0,B.Cb)({type:[String],json:{write:!0}})],G.prototype,"attachmentTypes",void 0),(0,D._)([(0,B.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],G.prototype,"attachmentsWhere",void 0),(0,D._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"cacheHint",void 0),(0,D._)([(0,B.Cb)({type:[String],json:{write:!0}})],G.prototype,"keywords",void 0),(0,D._)([(0,B.Cb)({type:[Number],json:{write:!0}})],G.prototype,"globalIds",void 0),(0,D._)([(0,B.Cb)({json:{write:!0}})],G.prototype,"name",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],G.prototype,"num",void 0),(0,D._)([(0,B.Cb)({type:[Number],json:{write:!0}})],G.prototype,"objectIds",void 0),(0,D._)([(0,B.Cb)({type:Boolean,json:{default:!1,write:!0}})],G.prototype,"returnMetadata",void 0),(0,D._)([(0,B.Cb)({type:[Number],json:{write:!0}})],G.prototype,"size",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],G.prototype,"start",void 0),(0,D._)([(0,Y.c)("start"),(0,Y.c)("num")],G.prototype,"writeStart",null),(0,D._)([(0,B.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],G.prototype,"where",void 0),G=H=(0,D._)([(0,W.j)("esri.rest.support.AttachmentQuery")],G),G.from=(0,U.se)(G);const $=G},40669:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($),this.type=null}};(0,D._)([(0,w.Cb)({readOnly:!0,json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.rest.support.ColorRamp")],H);const G=H},17253:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{default:()=>J});var X,D=T(17626),x=T(29132),w=T(88879),B=T(2076),U=T(86810),W=T(58817),Y=T(62208),H=T(77712),$=(T(90912),T(68653)),re=T(76898),ue=T(99433),ae=T(65234),oe=T(91179),ie=T(36255);const Z=new B.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Q=X=class extends U.wq{constructor(se){super(se),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(se,ee){const le=ae.Z.fromJSON(ee.spatialReference),ne=[];for(let ce=0;ce<se.length;ce++){const de=se[ce],me=w.Z.fromJSON(de),_e=de.geometry&&de.geometry.spatialReference;(0,Y.pC)(me.geometry)&&!_e&&(me.geometry.spatialReference=le);const he=de.aggregateGeometries,ye=me.aggregateGeometries;if(he&&(0,Y.pC)(ye))for(const fe in ye){const De=ye[fe],ve=he[fe]?.spatialReference;(0,Y.pC)(De)&&!ve&&(De.spatialReference=le)}ne.push(me)}return ne}writeGeometryType(se,ee,le,ne){if(se)return void Z.write(se,ee,le,ne);const{features:ce}=this;if(ce)for(const de of ce)if(de&&(0,Y.pC)(de.geometry))return void Z.write(de.geometry.type,ee,le,ne)}readQueryGeometry(se,ee){if(!se)return null;const le=!!se.spatialReference,ne=(0,oe.im)(se);return!le&&ee.spatialReference&&(ne.spatialReference=ae.Z.fromJSON(ee.spatialReference)),ne}writeSpatialReference(se,ee){if(se)return void(ee.spatialReference=se.toJSON());const{features:le}=this;if(le)for(const ne of le)if(ne&&(0,Y.pC)(ne.geometry)&&ne.geometry.spatialReference)return void(ee.spatialReference=ne.geometry.spatialReference.toJSON())}clone(){return new X(this.cloneProperties())}cloneProperties(){return(0,W.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(se){const ee=this.write();if(ee.features&&Array.isArray(se)&&se.length>0)for(let le=0;le<ee.features.length;le++){const ne=ee.features[le];if(ne.geometry){const ce=se&&se[le];ne.geometry=ce&&ce.toJSON()||ne.geometry}}return ee}quantize(se){const{scale:[ee,le],translate:[ne,ce]}=se,_e=this.features,he=this._getQuantizationFunction(this.geometryType,ye=>Math.round((ye-ne)/ee),ye=>Math.round((ce-ye)/le));for(let ye=0,fe=_e.length;ye<fe;ye++)he((0,Y.Wg)(_e[ye].geometry))||(_e.splice(ye,1),ye--,fe--);return this.transform=se,this}unquantize(){const{geometryType:se,features:ee,transform:le}=this;if(!le)return this;const{translate:[ne,ce],scale:[de,me]}=le,ye=this._getHydrationFunction(se,fe=>fe*de+ne,fe=>ce-fe*me);for(const{geometry:fe}of ee)(0,Y.pC)(fe)&&ye(fe);return this.transform=null,this}_quantizePoints(se,ee,le){let ne,ce;const de=[];for(let me=0,_e=se.length;me<_e;me++){const he=se[me];if(me>0){const ye=ee(he[0]),fe=le(he[1]);ye===ne&&fe===ce||(de.push([ye-ne,fe-ce]),ne=ye,ce=fe)}else ne=ee(he[0]),ce=le(he[1]),de.push([ne,ce])}return de.length>0?de:null}_getQuantizationFunction(se,ee,le){return"point"===se?ne=>(ne.x=ee(ne.x),ne.y=le(ne.y),ne):"polyline"===se||"polygon"===se?ne=>{const ce=(0,oe.oU)(ne)?ne.rings:ne.paths,de=[];for(let me=0,_e=ce.length;me<_e;me++){const ye=this._quantizePoints(ce[me],ee,le);ye&&de.push(ye)}return de.length>0?((0,oe.oU)(ne)?ne.rings=de:ne.paths=de,ne):null}:"multipoint"===se?ne=>{const ce=this._quantizePoints(ne.points,ee,le);return ce.length>0?(ne.points=ce,ne):null}:"extent"===se?ne=>ne:null}_getHydrationFunction(se,ee,le){return"point"===se?ne=>{ne.x=ee(ne.x),ne.y=le(ne.y)}:"polyline"===se||"polygon"===se?ne=>{const ce=(0,oe.oU)(ne)?ne.rings:ne.paths;let de,me;for(let _e=0,he=ce.length;_e<he;_e++){const ye=ce[_e];for(let fe=0,De=ye.length;fe<De;fe++){const ve=ye[fe];fe>0?(de+=ve[0],me+=ve[1]):(de=ve[0],me=ve[1]),ve[0]=ee(de),ve[1]=le(me)}}}:"extent"===se?ne=>{ne.xmin=ee(ne.xmin),ne.ymin=le(ne.ymin),ne.xmax=ee(ne.xmax),ne.ymax=le(ne.ymax)}:"multipoint"===se?ne=>{const ce=ne.points;let de,me;for(let _e=0,he=ce.length;_e<he;_e++){const ye=ce[_e];_e>0?(de+=ye[0],me+=ye[1]):(de=ye[0],me=ye[1]),ye[0]=ee(de),ye[1]=le(me)}}:void 0}};(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],Q.prototype,"displayFieldName",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:{overridePolicy:se=>({enabled:se})}}})],Q.prototype,"exceededTransferLimit",void 0),(0,D._)([(0,H.Cb)({type:[w.Z],json:{write:!0}})],Q.prototype,"features",void 0),(0,D._)([(0,$.r)("features")],Q.prototype,"readFeatures",null),(0,D._)([(0,H.Cb)({type:[ie.Z],json:{write:!0}})],Q.prototype,"fields",void 0),(0,D._)([(0,H.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Z.read}}})],Q.prototype,"geometryType",void 0),(0,D._)([(0,ue.c)("geometryType")],Q.prototype,"writeGeometryType",null),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:{overridePolicy:se=>({enabled:se})}}})],Q.prototype,"hasM",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:{overridePolicy:se=>({enabled:se})}}})],Q.prototype,"hasZ",void 0),(0,D._)([(0,H.Cb)({types:x.qM,json:{write:!0}})],Q.prototype,"queryGeometry",void 0),(0,D._)([(0,$.r)("queryGeometry")],Q.prototype,"readQueryGeometry",null),(0,D._)([(0,H.Cb)({type:ae.Z,json:{write:!0}})],Q.prototype,"spatialReference",void 0),(0,D._)([(0,ue.c)("spatialReference")],Q.prototype,"writeSpatialReference",null),(0,D._)([(0,H.Cb)({json:{write:!0}})],Q.prototype,"transform",void 0),Q=X=(0,D._)([(0,re.j)("esri.rest.support.FeatureSet")],Q),Q.prototype.toJSON.isDefaultToJSON=!0;const J=Q},49739:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(58817),w=T(77712),U=(T(90912),T(76898)),W=T(40251),Y=T(40669);let G=H=class extends Y.Z{constructor(re){super(re),this.colorRamps=null,this.type="multipart"}clone(){return new H({colorRamps:(0,x.d9)(this.colorRamps)})}};(0,D._)([(0,w.Cb)({type:[W.Z],json:{write:!0}})],G.prototype,"colorRamps",void 0),(0,D._)([(0,w.Cb)({type:["multipart"]})],G.prototype,"type",void 0),G=H=(0,D._)([(0,U.j)("esri.rest.support.MultipartColorRamp")],G);const $=G},77294:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(91179);let G=class extends x.wq{constructor(re){super(re),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const re=this.geometries.map(oe=>oe.toJSON()),ue=this.geometries[0],ae={};return ae.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),ae.inSR=ue.spatialReference.wkid||JSON.stringify(ue.spatialReference.toJSON()),ae.geometries=JSON.stringify({geometryType:(0,H.Ji)(ue),geometries:re}),this.transformation&&(ae.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(ae.transformForward=this.transformForward),ae}};(0,D._)([(0,w.Cb)()],G.prototype,"geometries",void 0),(0,D._)([(0,w.Cb)({json:{read:{source:"outSR"}}})],G.prototype,"outSpatialReference",void 0),(0,D._)([(0,w.Cb)()],G.prototype,"transformation",void 0),(0,D._)([(0,w.Cb)()],G.prototype,"transformForward",void 0),G=(0,D._)([(0,Y.j)("esri.rest.support.ProjectParameters")],G);const $=G},89621:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var $,D=T(17626),w=(T(29132),T(2076)),B=T(86810),U=T(58817),W=T(77712),H=(T(90912),T(76898)),G=T(2004);const re=new w.X({upperLeft:"upper-left",lowerLeft:"lower-left"});let ue=$=class extends B.wq{constructor(oe){super(oe),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new $((0,U.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,D._)([(0,W.Cb)({type:G.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],ue.prototype,"extent",void 0),(0,D._)([(0,W.Cb)({type:["view","edit"],json:{write:!0}})],ue.prototype,"mode",void 0),(0,D._)([(0,W.Cb)({type:String,json:{read:re.read,write:re.write}})],ue.prototype,"originPosition",void 0),(0,D._)([(0,W.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],ue.prototype,"tolerance",void 0),ue=$=(0,D._)([(0,H.j)("esri.rest.support.QuantizationParameters")],ue);const ae=ue},84952:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ce});var se,D=T(17626),x=T(29132),w=T(97478),B=T(2076),U=T(86810),W=T(58817),Y=T(62208),H=T(77712),G=T(66656),$=T(55342),re=T(76898),ue=T(99433),ae=T(90912),oe=T(91179),ie=T(15283),X=T(89621),Z=T(60776),Q=T(65234),J=T(49672);const ee=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),le=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ne=se=class extends U.wq{constructor(de){super(de),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(de){return(0,ae.TJ)(se,de)}castDatumTransformation(de){return"number"==typeof de||"object"==typeof de?de:null}writeHistoricMoment(de,me){me.historicMoment=de&&de.getTime()}writeParameterValues(de,me){if(de){const _e={};for(const he in de){const ye=de[he];_e[he]=Array.isArray(ye)?ye.map(fe=>fe instanceof Date?fe.getTime():fe):ye instanceof Date?ye.getTime():ye}me.parameterValues=_e}}writeStart(de,me){me.resultOffset=this.start,me.resultRecordCount=this.num||10,me.where="1=1"}writeWhere(de,me){me.where=de||"1=1"}clone(){return new se((0,W.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,Y.pC)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ne.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,D._)([(0,H.Cb)({json:{write:!0}})],ne.prototype,"aggregateIds",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],ne.prototype,"cacheHint",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"compactGeometryEnabled",void 0),(0,D._)([(0,H.Cb)({json:{write:!0}})],ne.prototype,"datumTransformation",void 0),(0,D._)([(0,G.p)("datumTransformation")],ne.prototype,"castDatumTransformation",null),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"defaultSpatialReferenceEnabled",void 0),(0,D._)([(0,H.Cb)({type:Number,json:{write:{overridePolicy:de=>({enabled:de>0})}}})],ne.prototype,"distance",void 0),(0,D._)([(0,H.Cb)({type:ie.n,json:{write:!0}})],ne.prototype,"dynamicDataSource",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"formatOf3DObjects",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"gdbVersion",void 0),(0,D._)([(0,H.Cb)({types:x.qM,json:{read:oe.im,write:!0}})],ne.prototype,"geometry",void 0),(0,D._)([(0,H.Cb)({type:Number,json:{write:!0}})],ne.prototype,"geometryPrecision",void 0),(0,D._)([(0,H.Cb)({type:[String],json:{write:!0}})],ne.prototype,"groupByFieldsForStatistics",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"having",void 0),(0,D._)([(0,H.Cb)({type:Date})],ne.prototype,"historicMoment",void 0),(0,D._)([(0,ue.c)("historicMoment")],ne.prototype,"writeHistoricMoment",null),(0,D._)([(0,H.Cb)({type:Number,json:{write:!0}})],ne.prototype,"maxAllowableOffset",void 0),(0,D._)([(0,H.Cb)({type:Number,cast:de=>de<1?1:de>se.MAX_MAX_RECORD_COUNT_FACTOR?se.MAX_MAX_RECORD_COUNT_FACTOR:de,json:{write:{overridePolicy:de=>({enabled:de>1})}}})],ne.prototype,"maxRecordCountFactor",void 0),(0,D._)([(0,H.Cb)({type:["xyFootprint"],json:{write:!0}})],ne.prototype,"multipatchOption",void 0),(0,D._)([(0,H.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],ne.prototype,"num",void 0),(0,D._)([(0,H.Cb)({json:{write:!0}})],ne.prototype,"objectIds",void 0),(0,D._)([(0,H.Cb)({type:[String],json:{write:!0}})],ne.prototype,"orderByFields",void 0),(0,D._)([(0,H.Cb)({type:[String],json:{write:!0}})],ne.prototype,"outFields",void 0),(0,D._)([(0,H.Cb)({type:Q.Z,json:{name:"outSR",write:!0}})],ne.prototype,"outSpatialReference",void 0),(0,D._)([(0,H.Cb)({type:[Z.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,Y.pC)(this.outStatistics)&&this.outStatistics.length>0}}}}})],ne.prototype,"outStatistics",void 0),(0,D._)([(0,H.Cb)({json:{write:!0}})],ne.prototype,"parameterValues",void 0),(0,D._)([(0,ue.c)("parameterValues")],ne.prototype,"writeParameterValues",null),(0,D._)([(0,H.Cb)({type:J.Z,json:{write:!0}})],ne.prototype,"pixelSize",void 0),(0,D._)([(0,H.Cb)({type:X.Z,json:{write:!0}})],ne.prototype,"quantizationParameters",void 0),(0,D._)([(0,H.Cb)({type:[Object],json:{write:!0}})],ne.prototype,"rangeValues",void 0),(0,D._)([(0,H.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],ne.prototype,"relationParameter",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"resultType",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"returnCentroid",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"returnDistinctValues",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!0,write:!0}})],ne.prototype,"returnExceededLimitFeatures",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:!0}})],ne.prototype,"returnGeometry",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"returnQueryGeometry",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"returnM",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{write:{overridePolicy:de=>({enabled:de})}}})],ne.prototype,"returnZ",void 0),(0,D._)([(0,H.Cb)({type:Q.Z,json:{write:!0}})],ne.prototype,"sourceSpatialReference",void 0),(0,D._)([(0,$.J)(ee,{ignoreUnknown:!1,name:"spatialRel"})],ne.prototype,"spatialRelationship",void 0),(0,D._)([(0,H.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],ne.prototype,"start",void 0),(0,D._)([(0,ue.c)("start"),(0,ue.c)("num")],ne.prototype,"writeStart",null),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"sqlFormat",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:!0}})],ne.prototype,"text",void 0),(0,D._)([(0,H.Cb)({type:w.Z,json:{write:!0}})],ne.prototype,"timeExtent",void 0),(0,D._)([(0,H.Cb)({type:Boolean,json:{default:!1,write:!0}})],ne.prototype,"timeReferenceUnknownClient",void 0),(0,D._)([(0,$.J)(le,{ignoreUnknown:!1}),(0,H.Cb)({json:{write:{overridePolicy(de){return{enabled:de&&this.distance>0}}}}})],ne.prototype,"units",void 0),(0,D._)([(0,H.Cb)({type:String,json:{write:{overridePolicy(de){return{enabled:null!=de||this.start>0}}}}})],ne.prototype,"where",void 0),(0,D._)([(0,ue.c)("where")],ne.prototype,"writeWhere",null),ne=se=(0,D._)([(0,re.j)("esri.rest.support.Query")],ne);const ce=ne},67010:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var re,D=T(17626),w=(T(29132),T(86810)),B=T(58817),U=T(77712),W=T(90912),Y=T(76898),H=T(99433),G=T(15283),$=T(65234);let ue=re=class extends w.wq{constructor(oe){super(oe),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(oe,ie){ie.historicMoment=oe&&oe.getTime()}writeStart(oe,ie){ie.resultOffset=this.start,ie.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(ie.definitionExpression="1=1")}clone(){return new re((0,B.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0}})],ue.prototype,"cacheHint",void 0),(0,D._)([(0,U.Cb)({type:G.n,json:{write:!0}})],ue.prototype,"dynamicDataSource",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ue.prototype,"gdbVersion",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ue.prototype,"geometryPrecision",void 0),(0,D._)([(0,U.Cb)({type:Date})],ue.prototype,"historicMoment",void 0),(0,D._)([(0,H.c)("historicMoment")],ue.prototype,"_writeHistoricMoment",null),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ue.prototype,"maxAllowableOffset",void 0),(0,D._)([(0,U.Cb)({type:[Number],json:{write:!0}})],ue.prototype,"objectIds",void 0),(0,D._)([(0,U.Cb)({type:[String],json:{write:!0}})],ue.prototype,"orderByFields",void 0),(0,D._)([(0,U.Cb)({type:[String],json:{write:!0}})],ue.prototype,"outFields",void 0),(0,D._)([(0,U.Cb)({type:$.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ue.prototype,"outSpatialReference",void 0),(0,D._)([(0,U.Cb)({json:{write:!0}})],ue.prototype,"relationshipId",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],ue.prototype,"start",void 0),(0,D._)([(0,H.c)("start"),(0,H.c)("num")],ue.prototype,"writeStart",null),(0,D._)([(0,U.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],ue.prototype,"num",void 0),(0,D._)([(0,U.Cb)({json:{write:!0}})],ue.prototype,"returnGeometry",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:{overridePolicy:oe=>({enabled:oe})}}})],ue.prototype,"returnM",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:{overridePolicy:oe=>({enabled:oe})}}})],ue.prototype,"returnZ",void 0),(0,D._)([(0,U.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ue.prototype,"where",void 0),ue=re=(0,D._)([(0,Y.j)("esri.rest.support.RelationshipQuery")],ue),ue.from=(0,W.se)(ue);const ae=ue},60776:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var G,D=T(17626),x=T(2076),w=T(86810),B=T(58817),U=T(77712),Y=(T(90912),T(76898)),H=T(99433);const $=new x.X({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let re=G=class extends w.wq{constructor(ae){super(ae),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(ae,oe){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(oe.statisticParameters=(0,B.d9)(ae))}clone(){return new G({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,B.d9)(this.statisticParameters)})}};(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],re.prototype,"maxPointCount",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],re.prototype,"maxRecordCount",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],re.prototype,"maxVertexCount",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],re.prototype,"onStatisticField",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],re.prototype,"outStatisticFieldName",void 0),(0,D._)([(0,U.Cb)({type:String,json:{read:{source:"statisticType",reader:$.read},write:{target:"statisticType",writer:$.write}}})],re.prototype,"statisticType",void 0),(0,D._)([(0,U.Cb)({type:Object})],re.prototype,"statisticParameters",void 0),(0,D._)([(0,H.c)("statisticParameters")],re.prototype,"writeStatisticParameters",null),re=G=(0,D._)([(0,Y.j)("esri.rest.support.StatisticDefinition")],re);const ue=re},6871:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>le});var oe,D=T(17626),x=T(29132),w=T(97478),B=T(2076),U=T(86810),W=T(58817),Y=T(77712),H=T(90912),G=T(76898),$=T(99433),re=T(91179);T(85931),T(8314);let ie=oe=class extends U.wq{constructor(ne){super(ne),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new oe({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,D._)([(0,Y.Cb)({type:[String],json:{write:!0}})],ie.prototype,"groupByFields",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{write:!0}})],ie.prototype,"topCount",void 0),(0,D._)([(0,Y.Cb)({type:[String],json:{write:!0}})],ie.prototype,"orderByFields",void 0),ie=oe=(0,D._)([(0,G.j)("esri.rest.support.TopFilter")],ie);const X=ie;var Q,Z=T(65234);const J=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),se=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ee=Q=class extends U.wq{constructor(ne){super(ne),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(ne,ce){ce.resultOffset=this.start,ce.resultRecordCount=this.num||10}clone(){return new Q((0,W.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],ee.prototype,"cacheHint",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{write:{overridePolicy:ne=>({enabled:ne>0})}}})],ee.prototype,"distance",void 0),(0,D._)([(0,Y.Cb)({types:x.qM,json:{read:re.im,write:!0}})],ee.prototype,"geometry",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{write:!0}})],ee.prototype,"geometryPrecision",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{write:!0}})],ee.prototype,"maxAllowableOffset",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],ee.prototype,"num",void 0),(0,D._)([(0,Y.Cb)({json:{write:!0}})],ee.prototype,"objectIds",void 0),(0,D._)([(0,Y.Cb)({type:[String],json:{write:!0}})],ee.prototype,"orderByFields",void 0),(0,D._)([(0,Y.Cb)({type:[String],json:{write:!0}})],ee.prototype,"outFields",void 0),(0,D._)([(0,Y.Cb)({type:Z.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ee.prototype,"outSpatialReference",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:!0}})],ee.prototype,"resultType",void 0),(0,D._)([(0,Y.Cb)({json:{write:!0}})],ee.prototype,"returnGeometry",void 0),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:ne=>({enabled:ne})}}})],ee.prototype,"returnM",void 0),(0,D._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:ne=>({enabled:ne})}}})],ee.prototype,"returnZ",void 0),(0,D._)([(0,Y.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],ee.prototype,"start",void 0),(0,D._)([(0,$.c)("start"),(0,$.c)("num")],ee.prototype,"writeStart",null),(0,D._)([(0,Y.Cb)({type:String,json:{read:{source:"spatialRel",reader:J.read},write:{target:"spatialRel",writer:J.write}}})],ee.prototype,"spatialRelationship",void 0),(0,D._)([(0,Y.Cb)({type:w.Z,json:{write:!0}})],ee.prototype,"timeExtent",void 0),(0,D._)([(0,Y.Cb)({type:X,json:{write:!0}})],ee.prototype,"topFilter",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{read:se.read,write:{writer:se.write,overridePolicy(ne){return{enabled:ne&&this.distance>0}}}}})],ee.prototype,"units",void 0),(0,D._)([(0,Y.Cb)({type:String,json:{write:!0}})],ee.prototype,"where",void 0),ee=Q=(0,D._)([(0,G.j)("esri.rest.support.TopFeaturesQuery")],ee),ee.from=(0,H.se)(ee);const le=ee},79023:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>B,i:()=>U});var D=T(40251),x=T(40669),w=T(49739);const B={key:"type",base:x.Z,typeMap:{algorithmic:D.Z,multipart:w.Z}};function U(W){return W&&W.type?"algorithmic"===W.type?D.Z.fromJSON(W):"multipart"===W.type?w.Z.fromJSON(W):null:null}},2618:(qe,xe,T)=>{"use strict";T.d(xe,{cv:()=>U,en:()=>B,lA:()=>w});var D=T(58817),x=T(21726);function w(W,Y){return Y?{...Y,query:{...W,...Y.query}}:{query:W}}function B(W){return"string"==typeof W?(0,x.mN)(W):(0,D.d9)(W)}function U(W,Y,H){const G={};for(const $ in W){if("declaredClass"===$)continue;const re=W[$];if(null!=re&&"function"!=typeof re)if(Array.isArray(re)){G[$]=[];for(let ue=0;ue<re.length;ue++)G[$][ue]=U(re[ue])}else if("object"==typeof re)if(re.toJSON){const ue=re.toJSON(H&&H[$]);G[$]=Y?ue:JSON.stringify(ue)}else G[$]=Y?re:JSON.stringify(re);else G[$]=re}return G}},51815:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>re});var D=T(17626),x=T(88879),B=(T(63290),T(90912)),H=(T(85931),T(8314),T(82255),T(61039)),G=T(76898),$=T(28705);let re=class extends $.a{_own(ue){ue.layer&&"remove"in ue.layer&&ue.layer!==this.owner&&ue.layer.remove(ue),ue.layer=this.owner}_release(ue){ue.layer===this.owner&&(ue.layer=null)}};(0,D._)([(0,H.c)({Type:x.Z,ensureType:(0,B.se)(x.Z)})],re.prototype,"itemType",void 0),re=(0,D._)([(0,G.j)("esri.support.GraphicsCollection")],re)},6432:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>oe});var D=T(17626),x=T(46160),w=T(89726),B=T(63290),U=T(10699),W=T(77712),$=(T(85931),T(8314),T(90912),T(76898)),re=T(44917);function ue(ie,X,Z){let Q,J;if(ie)for(let se=0,ee=ie.length;se<ee;se++){if(Q=ie.getItemAt(se),Q[X]===Z)return Q;if("group"===Q?.type&&(J=ue(Q.layers,X,Z),J))return J}}const ae=B.Z.getLogger("esri.support.LayersMixin"),oe=ie=>{let X=class extends ie{constructor(...Z){super(...Z),this.layers=new x.Z;const J=ee=>{ee.parent=this,this.layerAdded(ee),"elevation"!==ee.type&&"base-elevation"!==ee.type||ae.error(`Layer 'title:${ee.title}, id:${ee.id}' of type '${ee.type}' is not supported as an operational layer and will therefore be ignored.`)},se=ee=>{ee.parent=null,this.layerRemoved(ee)};this.layers.on("before-add",ee=>(ee=>{ee.parent&&"remove"in ee.parent&&ee.parent.remove(ee)})(ee.item)),this.layers.on("after-add",ee=>J(ee.item)),this.layers.on("after-remove",ee=>se(ee.item))}destroy(){const Z=this.layers.removeAll();for(const Q of Z)this.layerRemoved(Q),Q.destroy();this.layers.destroy()}set layers(Z){this._set("layers",(0,w.Z)(Z,this._get("layers")))}add(Z,Q){const J=this.layers;if(Q=J.getNextIndex(Q),Z instanceof re.Z){const se=Z;se.parent===this?this.reorder(se,Q):J.add(se,Q)}else(0,U.y8)(Z)?Z.then(se=>{this.destroyed||this.add(se,Q)}):ae.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(Z,Q){const J=this.layers;Q=J.getNextIndex(Q),Z.slice().forEach(se=>{se.parent!==this?(J.add(se,Q),Q+=1):this.reorder(se,Q)})}findLayerById(Z){return ue(this.layers,"id",Z)}findLayerByUid(Z){return ue(this.layers,"uid",Z)}remove(Z){return this.layers.remove(Z)}removeMany(Z){return this.layers.removeMany(Z)}removeAll(){return this.layers.removeAll()}reorder(Z,Q){return this.layers.reorder(Z,Q)}layerAdded(Z){}layerRemoved(Z){}};return(0,D._)([(0,W.Cb)()],X.prototype,"layers",null),X=(0,D._)([(0,$.j)("esri.support.LayersMixin")],X),X}},6119:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>ae});var D=T(17626),x=T(46160),w=T(89726),B=T(63290),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898));const $="esri.support.TablesMixin",re=B.Z.getLogger($);function ue(oe,ie,X){if(oe)for(let Z=0,Q=oe.length;Z<Q;Z++){const J=oe.getItemAt(Z);if(J[ie]===X)return J;if("group"===J?.type){const se=ue(J.tables,ie,X);if(se)return se}}}const ae=oe=>{let ie=class extends oe{constructor(...X){super(...X),this.tables=new x.Z,this.tables.on("after-add",Z=>{const Q=Z.item;Q.parent&&Q.parent!==this&&"tables"in Q.parent&&Q.parent.tables.remove(Q),Q.parent=this,"feature"!==Q.type&&re.error(`Layer 'title:${Q.title}, id:${Q.id}' of type '${Q.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",Z=>{Z.item.parent=null})}destroy(){const X=this.tables.removeAll();for(const Z of X)Z.destroy();this.tables.destroy()}set tables(X){this._set("tables",(0,w.Z)(X,this._get("tables")))}findTableById(X){return ue(this.tables,"id",X)}findTableByUid(X){return ue(this.tables,"uid",X)}};return(0,D._)([(0,U.Cb)()],ie.prototype,"tables",null),ie=(0,D._)([(0,G.j)($)],ie),ie}},59397:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(14517),w=T(61996),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898));let $=G=class extends((0,w.IG)(x.Z)){constructor(ue){super(ue),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new G({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,D._)([(0,B.Cb)()],$.prototype,"active",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"className",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"disabled",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"id",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"indicator",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"title",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"type",void 0),(0,D._)([(0,B.Cb)()],$.prototype,"visible",void 0),$=G=(0,D._)([(0,H.j)("esri.support.actions.ActionBase")],$);const re=$},48753:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(59397);let G=H=class extends Y.Z{constructor(re){super(re),this.image=null,this.type="button"}clone(){return new H({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,D._)([(0,x.Cb)()],G.prototype,"image",void 0),G=H=(0,D._)([(0,W.j)("esri.support.Action.ActionButton")],G);const $=G},10671:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var H,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(59397);let G=H=class extends Y.Z{constructor(re){super(re),this.image=null,this.type="toggle",this.value=!1}clone(){return new H({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,D._)([(0,x.Cb)()],G.prototype,"image",void 0),(0,D._)([(0,x.Cb)()],G.prototype,"value",void 0),G=H=(0,D._)([(0,W.j)("esri.support.Action.ActionToggle")],G);const $=G},12680:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>B});var D=T(21726);const x=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function B(U){const W=(0,D.P$)(U,!0);return W&&W.endsWith(".arcgis.com")&&!x.includes(W)&&!U.endsWith("/sharing/rest/generateToken")}},46679:(qe,xe,T)=>{"use strict";T.d(xe,{LC:()=>W,WW:()=>Y,Yi:()=>H,mz:()=>re,pp:()=>$});var D=T(15861),w=(T(29132),T(62208)),B=T(65234);let U;function W(){return U||(U=(0,D.Z)(function*(){const ue=yield T.e(5068).then(T.bind(T,75068));return{arcade:ue.arcade,arcadeUtils:ue,Dictionary:ue.Dictionary,Feature:ue.arcadeFeature}})()),U}const Y=(ue,ae,oe)=>re.create(ue,ae,oe,null,["$feature"]),H=(ue,ae,oe)=>re.create(ue,ae,oe,null,["$feature","$view"]),$=(ue,ae,oe,ie)=>re.create(ue,ae,oe,ie,["$feature","$view"]);class re{constructor(ae,oe,ie,X,Z,Q,J,se){this.script=ae,this.evaluate=Z;const ee=Array.isArray(J)?J:J.fields;this.fields=ee,this._syntaxTree=X,this._arcade=oe,this._arcadeDictionary=ie,this._arcadeFeature=Q,this._spatialReference=se,this._referencesGeometry=oe.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(ae,oe,ie,X,Z,Q){return(0,D.Z)(function*(){const{arcade:J,Feature:se,Dictionary:ee}=yield W(),le=B.Z.fromJSON(oe),ne=J.parseScript(ae,Q),ce=Z.reduce((Ce,ge)=>({...Ce,[ge]:null}),{});let de=null;(0,w.pC)(X)&&(de=new ee(X),de.immutable=!0,ce.$config=null);const me=J.scriptUsesGeometryEngine(ne)&&J.enableGeometrySupport(),_e=J.scriptUsesFeatureSet(ne)&&J.enableFeatureSetSupport(),he=J.scriptIsAsync(ne)&&J.enableAsyncSupport(),ye={vars:ce,spatialReference:le,useAsync:!!he},fe=new ee;fe.immutable=!1,fe.setField("scale",0);const De=J.compileScript(ne,ye);return yield Promise.all([me,_e,he]),new re(ae,J,ee,ne,Ce=>("$view"in Ce&&Ce.$view&&(fe.setField("scale",Ce.$view.scale),Ce.$view=fe),de&&(Ce.$config=de),De({vars:Ce,spatialReference:le})),new se,ie,le)})()}repurposeFeature(ae){return ae.geometry&&!ae.geometry.spatialReference&&(ae.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(ae.geometry,ae.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(ae){return this._arcade.referencesMember(this._syntaxTree,ae)}referencesFunction(ae){return this._arcade.referencesFunction(this._syntaxTree,ae)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},33954:(qe,xe,T)=>{"use strict";T.d(xe,{g:()=>B,s:()=>W});var D=T(15861),x=T(54346),w=T(41840);function B(Y){return U.apply(this,arguments)}function U(){return(U=(0,D.Z)(function*(Y){if(!Y)return;const H=Y.includes("-vector")?Y.slice(0,Y.indexOf("-vector")):Y,G=yield(0,w.ME)("esri/t9n/basemaps");return G[Y]||G[H]})).apply(this,arguments)}const W={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,x.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},38953:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>x});var D=T(46882);function x(w){return new D.Z({getCollections:()=>[w.tables,w.layers],getChildrenFunction:B=>{const U=[];return"tables"in B&&U.push(B.tables),"layers"in B&&U.push(B.layers),U},itemFilterFunction:B=>{const U=B.parent;return U&&"tables"in U&&U.tables.includes(B)}})}},35560:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>x,h:()=>w});var D=T(8314);const x=()=>!!(0,D.Z)("enable-feature:force-wosr"),w=()=>!!(0,D.Z)("enable-feature:direct-3d-object-feature-layer-display")},49430:(qe,xe,T)=>{"use strict";T.d(xe,{eZ:()=>oe});var D=T(73281),x=T(36630),w=T(55664),Y=(T(55013),T(16615),T(82561),T(75484)),$=(T(64531),T(501),T(25621)),re=T(66845);const ue=["oid","global-id"],ae=["oid","global-id","guid"];function oe({displayField:he,editFieldsInfo:ye,fields:fe,objectIdField:De,title:ve},Ce){if(!fe)return null;const ge=function le({editFieldsInfo:he,fields:ye,objectIdField:fe},De){return function Z(he,ye){const fe=he;return ye&&(he=he.filter(De=>!ye.includes(De.type))),he===fe&&(he=he.slice()),he.sort(Q),he}(ye,De?.ignoreFieldTypes||_e).map(ve=>new $.Z({fieldName:ve.name,isEditable:se(ve,he),label:ve.alias,format:ne(ve),visible:X(ve,{editFieldsInfo:he,objectIdField:fe,visibleFieldNames:De?.visibleFieldNames})}))}({editFieldsInfo:ye,fields:fe,objectIdField:De},Ce);if(!ge.length)return null;const Te=function de(he){const ye=(0,x.O5)(he),{titleBase:fe}=he;return ye?`${fe}: {${ye.trim()}}`:fe}({titleBase:ve,fields:fe,displayField:he}),Le=function ce(){return[new Y.Z,new w.Z]}();return new D.Z({title:Te,content:Le,fieldInfos:ge})}const ie=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],X=(he,{editFieldsInfo:ye,objectIdField:fe,visibleFieldNames:De})=>De?De.has(he.name):!(J(he.name,ye)||fe&&he.name===fe||ue.includes(he.type)||ie.some(ve=>ve.test(he.name)));function Q(he,ye){return"oid"===he.type?-1:"oid"===ye.type?1:me(he)?-1:me(ye)?1:(he.alias||he.name).toLocaleLowerCase().localeCompare((ye.alias||ye.name).toLocaleLowerCase())}function J(he,ye){if(!he||!ye)return!1;const{creationDateField:fe,creatorField:De,editDateField:ve,editorField:Ce}=ye;return[fe&&fe.toLowerCase(),De&&De.toLowerCase(),ve&&ve.toLowerCase(),Ce&&Ce.toLowerCase()].includes(he.toLowerCase())}function se(he,ye){return he.editable&&!ae.includes(he.type)&&!J(he.name,ye)}function ne(he){switch(he.type){case"small-integer":case"integer":case"single":return new re.Z({digitSeparator:!0,places:0});case"double":return new re.Z({digitSeparator:!0,places:2});case"date":return new re.Z({dateFormat:"long-month-day-year"});default:return"string"===he.type&&(0,x.Ec)(he.name)?new re.Z({digitSeparator:!0,places:0}):null}}function me(he){return"name"===(he.name&&he.name.toLowerCase())||"name"===(he.alias&&he.alias.toLowerCase())||void 0}const _e=["geometry","blob","raster","guid","xml"]},70026:(qe,xe,T)=>{"use strict";T.d(xe,{t:()=>w});var D=T(15861),x=T(84792);function w(U,W){return B.apply(this,arguments)}function B(){return(B=(0,D.Z)(function*(U,W){const{data:Y}=yield(0,x.default)(U,{responseType:"image",...W});return Y})).apply(this,arguments)}},33899:(qe,xe,T)=>{"use strict";T.d(xe,{Hu:()=>G,fY:()=>Y,jH:()=>$,jz:()=>re});var D=T(15861),x=T(59318),w=T(8314),B=T(62208),U=T(10699),W=T(21726);function Y(ae,oe,ie=!1,X){return new Promise((Z,Q)=>{if((0,U.Hc)(X))return void Q(H());let J=()=>{le(),Q(new Error(`Unable to load ${oe}`))},se=()=>{const ne=ae;le(),Z(ne)},ee=()=>{if(!ae)return;const ne=ae;le(),ne.src="",Q(H())};const le=()=>{(0,w.Z)("esri-image-decode")||(ae.removeEventListener("error",J),ae.removeEventListener("load",se)),J=null,se=null,ae=null,(0,B.pC)(X)&&X.removeEventListener("abort",ee),ee=null,ie&&URL.revokeObjectURL(oe)};(0,B.pC)(X)&&X.addEventListener("abort",ee),(0,w.Z)("esri-image-decode")?ae.decode().then(se,J):(ae.addEventListener("error",J),ae.addEventListener("load",se))})}function H(){try{return new DOMException("Aborted","AbortError")}catch{const ae=new Error;return ae.name="AbortError",ae}}function G(ae){x.Z.request.crossOriginNoCorsDomains||(x.Z.request.crossOriginNoCorsDomains={});const oe=x.Z.request.crossOriginNoCorsDomains;for(let ie of ae)ie=ie.toLowerCase(),/^https?:\/\//.test(ie)?oe[(0,W.P$)(ie)]=0:(oe[(0,W.P$)("http://"+ie)]=0,oe[(0,W.P$)("https://"+ie)]=0)}function $(ae){const oe=x.Z.request.crossOriginNoCorsDomains;if(oe){let ie=(0,W.P$)(ae);if(ie)return ie=ie.toLowerCase(),!(0,W.D6)(ie,(0,W.TI)())&&oe[ie]<Date.now()-36e5}return!1}function re(ae){return ue.apply(this,arguments)}function ue(){return(ue=(0,D.Z)(function*(ae){const oe=x.Z.request.crossOriginNoCorsDomains;oe&&(oe[(0,W.P$)(ae).toLowerCase()]=Date.now());const ie=(0,W.mN)(ae);ae=ie.path,"json"===ie.query?.f&&(ae+="?f=json");try{yield fetch(ae,{mode:"no-cors",credentials:"include"})}catch{}})).apply(this,arguments)}},38365:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>x,r:()=>D});const D="20220708",x="7fd01dbc0e83d753fcf101c8ff2a8d215430252d"},64183:(qe,xe,T)=>{"use strict";T.d(xe,{$o:()=>w,V$:()=>U});const D="calcite-theme-";function w(){return function x(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}().startsWith("dark")}function U(Y){(function W(Y){Array.from(Y.classList).forEach(H=>{H.startsWith(D)&&Y.classList.remove(H)})})(Y),Y.classList.add(function B(){return`${D}${w()?"dark":"light"}`}())}},20383:(qe,xe,T)=>{"use strict";T.d(xe,{se:()=>$e,cT:()=>Be,dU:()=>Pe,S9:()=>Ve,LB:()=>Oe,AH:()=>Ke,yK:()=>Ie,S6:()=>He,QT:()=>Ne,f_:()=>Se});var ne,D=T(90912),x=T(383),w=T(94398),U=(T(65499),T(48575)),G=(T(9260),T(11472),T(26531),T(22490)),$=T(9436),ae=(T(21068),T(46735),T(36687)),X=(T(2066),T(69147),T(17626)),Z=T(58817),Q=T(23841),J=T(77712),se=T(55342),ee=T(76898),le=T(69738);let ce=ne=class extends U.Z{constructor(...et){super(...et),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(et,nt,it,Xe){if(et&&"string"!=typeof et&&null==et.imageData)return et;const rt={};return et&&(rt.url=et),nt&&(rt.outline=nt),null!=it&&(rt.width=(0,Q.t_)(it)),null!=Xe&&(rt.height=(0,Q.t_)(Xe)),rt}clone(){const et=new ne({color:(0,Z.d9)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return et._set("source",(0,Z.d9)(this.source)),et}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,X._)([(0,se.J)({esriPFS:"picture-fill"},{readOnly:!0})],ce.prototype,"type",void 0),(0,X._)([(0,J.Cb)(le.KA)],ce.prototype,"url",void 0),(0,X._)([(0,J.Cb)({type:Number,json:{write:!0}})],ce.prototype,"xscale",void 0),(0,X._)([(0,J.Cb)({type:Number,json:{write:!0}})],ce.prototype,"yscale",void 0),(0,X._)([(0,J.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],ce.prototype,"width",void 0),(0,X._)([(0,J.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],ce.prototype,"height",void 0),(0,X._)([(0,J.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],ce.prototype,"xoffset",void 0),(0,X._)([(0,J.Cb)({type:Number,cast:Q.t_,json:{write:!0}})],ce.prototype,"yoffset",void 0),(0,X._)([(0,J.Cb)(le.Ds)],ce.prototype,"source",void 0),ce=ne=(0,X._)([(0,ee.j)("esri.symbols.PictureFillSymbol")],ce);const de=ce;var me=T(13546),_e=T(69852),he=T(89673),ye=T(88493),fe=T(52068),De=T(57213),ve=T(10012),Te=(T(39368),T(97665),T(35540)),ze=(T(21716),T(72622),T(12874));function Be(et){if(!et)return!1;switch(et.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Pe(et){if(!et)return!1;switch(et.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}T(17497),T(71530);const Oe={base:ve.Z,key:"type",typeMap:{"simple-fill":ye.Z,"picture-fill":de,"picture-marker":me.Z,"simple-line":fe.Z,"simple-marker":De.Z,text:Te.Z,"label-3d":G.Z,"line-3d":$.Z,"mesh-3d":ae.Z,"point-3d":_e.Z,"polygon-3d":he.Z,"web-style":ze.Z,cim:w.Z},errorContext:"symbol"},Ke={base:ve.Z,key:"type",typeMap:{"picture-marker":me.Z,"simple-marker":De.Z,text:Te.Z,"web-style":ze.Z,cim:w.Z},errorContext:"symbol"},Ve=(0,x.d)({types:Oe}),Ne={base:ve.Z,key:"type",typeMap:{"simple-fill":ye.Z,"picture-fill":de,"picture-marker":me.Z,"simple-line":fe.Z,"simple-marker":De.Z,text:Te.Z,"line-3d":$.Z,"mesh-3d":ae.Z,"point-3d":_e.Z,"polygon-3d":he.Z,"web-style":ze.Z,cim:w.Z},errorContext:"symbol"},Ie={base:ve.Z,key:"type",typeMap:{text:Te.Z,"label-3d":G.Z},errorContext:"symbol"},Se={base:ve.Z,key:"type",typeMap:{"line-3d":$.Z,"mesh-3d":ae.Z,"point-3d":_e.Z,"polygon-3d":he.Z,"web-style":ze.Z,cim:w.Z},errorContext:"symbol"},He={base:ve.Z,key:"type",typeMap:{"label-3d":G.Z},errorContext:"symbol"},$e=(0,D.N7)(Oe)},94398:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ae,D=T(15861),x=T(17626),w=T(58817),B=T(77275),U=T(77712),Y=(T(90912),T(55342)),H=T(68653),G=T(76898),$=T(99433),re=T(36630),ue=T(10012);let oe=ae=class extends ue.Z{constructor(X){super(X),this.data=null,this.type="cim"}readData(X,Z){return Z}writeData(X,Z){if(X)for(const Q in X)Z[Q]=X[Q]}collectRequiredFields(X,Z){var Q=this;return(0,D.Z)(function*(){if("CIMSymbolReference"===Q.data.type){const J=Q.data.primitiveOverrides;if(J){const se=J.map(ee=>(0,re.io)(X,Z,ee.valueExpressionInfo.expression));yield Promise.all(se)}}})()}clone(){return new ae({data:(0,w.d9)(this.data)})}hash(){return(0,B.hP)(JSON.stringify(this.data)).toString()}};(0,x._)([(0,U.Cb)({json:{write:!1}})],oe.prototype,"color",void 0),(0,x._)([(0,U.Cb)({json:{write:!0}})],oe.prototype,"data",void 0),(0,x._)([(0,H.r)("data",["symbol"])],oe.prototype,"readData",null),(0,x._)([(0,$.c)("data",{})],oe.prototype,"writeData",null),(0,x._)([(0,Y.J)({CIMSymbolReference:"cim"},{readOnly:!0})],oe.prototype,"type",void 0),oe=ae=(0,x._)([(0,G.j)("esri.symbols.CIMSymbol")],oe);const ie=oe},65499:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var ue,D=T(17626),x=T(62208),w=T(77712),Y=(T(85931),T(8314),T(90912),T(55342)),H=T(76898),G=T(97665),$=T(61261),re=T(64830);let ae=ue=class extends G.Z{constructor(ie){super(ie),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new ue({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,x.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,D._)([(0,Y.J)({Extrude:"extrude"},{readOnly:!0})],ae.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ae.prototype,"size",void 0),(0,D._)([(0,w.Cb)({type:re.b,json:{write:!0}})],ae.prototype,"material",void 0),(0,D._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ae.prototype,"castShadows",void 0),(0,D._)([(0,w.Cb)($.Z)],ae.prototype,"edges",void 0),ae=ue=(0,D._)([(0,H.j)("esri.symbols.ExtrudeSymbol3DLayer")],ae);const oe=ae},48575:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(52068),H=T(10012);let G=class extends H.Z{constructor(re){super(re),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,D._)([(0,x.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Y.Z}},json:{default:null,write:!0}})],G.prototype,"outline",void 0),(0,D._)([(0,x.Cb)({type:["simple-fill","picture-fill"],readOnly:!0})],G.prototype,"type",void 0),G=(0,D._)([(0,W.j)("esri.symbols.FillSymbol")],G);const $=G},9260:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ye});var Q,D=T(17626),x=T(62208),w=T(77712),Y=(T(85931),T(8314),T(90912),T(55342)),H=T(76898),G=T(97665),$=T(61261),re=T(63743),ue=T(153),ae=T(99255),oe=T(12948),Z=(T(63290),T(82255),T(64830));let J=Q=class extends Z.b{constructor(fe){super(fe),this.colorMixMode=null}clone(){const fe={color:(0,x.pC)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new Q(fe)}};(0,D._)([(0,Y.J)({multiply:"multiply",replace:"replace",tint:"tint"})],J.prototype,"colorMixMode",void 0),J=Q=(0,D._)([(0,H.j)("esri.symbols.support.Symbol3DFillMaterial")],J);var de,se=T(91558),ee=T(86810),le=T(23841),ne=T(60958),ce=T(43652);let me=de=class extends ee.wq{constructor(fe){super(fe),this.color=new se.Z([0,0,0,1]),this.size=(0,le.Wz)(1),this.pattern=null,this.patternCap="butt"}clone(){const fe={color:(0,x.pC)(this.color)?this.color.clone():null,size:this.size,pattern:(0,x.pC)(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new de(fe)}};var _e;(0,D._)([(0,w.Cb)(ne.a)],me.prototype,"color",void 0),(0,D._)([(0,w.Cb)(ne.y)],me.prototype,"size",void 0),(0,D._)([(0,w.Cb)(ae.D)],me.prototype,"pattern",void 0),(0,D._)([(0,w.Cb)({type:ce.Hc,json:{default:"butt",write:{overridePolicy(){return{enabled:(0,x.pC)(this.pattern)}}}}})],me.prototype,"patternCap",void 0),me=de=(0,D._)([(0,H.j)("esri.symbols.support.Symbol3DOutline")],me);let he=_e=class extends G.Z{constructor(fe){super(fe),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const fe={edges:(0,x.pC)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,x.pC)(this.material)?this.material.clone():null,pattern:(0,x.pC)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,x.pC)(this.outline)?this.outline.clone():null};return new _e(fe)}static fromSimpleFillSymbol(fe){const De=fe.outline&&fe.outline.style&&"inside-frame"!==fe.outline.style&&"solid"!==fe.outline.style?new re.Z({style:fe.outline.style}):null,ve={size:fe.outline?.width??0,color:(fe.outline?.color??oe.ix).clone(),pattern:De};return De&&fe.outline?.cap&&(ve.patternCap=fe.outline.cap),new _e({material:new J({color:(fe.color??oe.l9).clone()}),pattern:fe.style&&"solid"!==fe.style?new ue.Z({style:fe.style}):null,outline:ve})}};(0,D._)([(0,Y.J)({Fill:"fill"},{readOnly:!0})],he.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:J,json:{write:!0}})],he.prototype,"material",void 0),(0,D._)([(0,w.Cb)(ae.q)],he.prototype,"pattern",void 0),(0,D._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],he.prototype,"castShadows",void 0),(0,D._)([(0,w.Cb)({type:me,json:{write:!0}})],he.prototype,"outline",void 0),(0,D._)([(0,w.Cb)($.Z)],he.prototype,"edges",void 0),he=_e=(0,D._)([(0,H.j)("esri.symbols.FillSymbol3DLayer")],he);const ye=he},11472:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),x=T(86810),w=T(23841),B=T(77712),Y=(T(85931),T(8314),T(66656)),H=T(76898),G=T(50369);let re=$=class extends x.wq{constructor(ae){super(ae),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(ae){return(0,w.t_)(ae)}clone(){return new $({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,D._)([(0,B.Cb)({type:G.JT,json:{default:"none",write:!0}})],re.prototype,"decoration",void 0),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],re.prototype,"family",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy:(ae,oe,ie)=>({enabled:!ie||!ie.textSymbol3D})}}})],re.prototype,"size",void 0),(0,D._)([(0,Y.p)("size")],re.prototype,"castSize",null),(0,D._)([(0,B.Cb)({type:G.g6,json:{default:"normal",write:!0}})],re.prototype,"style",void 0),(0,D._)([(0,B.Cb)({type:G.vC,json:{default:"normal",write:!0}})],re.prototype,"weight",void 0),re=$=(0,D._)([(0,H.j)("esri.symbols.Font")],re);const ue=re},26531:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ye});var J,D=T(17626),x=T(63290),w=T(62208),B=T(21726),U=T(77712),G=(T(85931),T(8314),T(90912),T(55342)),$=T(76898),re=T(97665),ue=T(12948),ae=T(33215),oe=T(60958),ie=T(37519),X=T(91558),Z=T(86810),Q=T(23841);let se=J=class extends Z.wq{constructor(fe){super(fe),this.color=new X.Z([0,0,0,1]),this.size=(0,Q.Wz)(1)}clone(){const fe={color:(0,w.pC)(this.color)?this.color.clone():null,size:this.size};return new J(fe)}};(0,D._)([(0,U.Cb)(oe.a)],se.prototype,"color",void 0),(0,D._)([(0,U.Cb)(oe.y)],se.prototype,"size",void 0),se=J=(0,D._)([(0,$.j)("esri.symbols.support.Symbol3DIconOutline")],se);var le,ee=T(64830);const ne=x.Z.getLogger("esri.symbols.IconSymbol3DLayer");let ce=le=class extends re.Z{constructor(fe){super(fe),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new le({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,w.pC)(this.material)?this.material.clone():null,outline:(0,w.pC)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(fe){const De=fe.color||ue.ix,ve=de(fe),Ce=fe.outline&&fe.outline.width>0?{size:fe.outline.width,color:(fe.outline.color||ue.ix).clone()}:null;return new le({size:fe.size,resource:{primitive:he(fe.style)},material:{color:De},outline:Ce,anchor:ve?"relative":void 0,anchorPosition:ve})}static fromPictureMarkerSymbol(fe){const De=!fe.color||(0,ue.rx)(fe.color)?ue.ix:fe.color,ve=de(fe);return new le({size:fe.width<=fe.height?fe.height:fe.width,resource:{href:fe.url},material:{color:De.clone()},anchor:ve?"relative":void 0,anchorPosition:ve})}static fromCIMSymbol(fe){return new le({resource:{href:(0,B._l)({mediaType:"application/json",data:JSON.stringify(fe.data)})}})}};function de(fe){const De="width"in fe?fe.width:fe.size,ve="height"in fe?fe.height:fe.size,Ce=me(fe.xoffset),ge=me(fe.yoffset);return(Ce||ge)&&De&&ve?{x:-Ce/De,y:ge/ve}:null}function me(fe){return isFinite(fe)?fe:0}(0,D._)([(0,U.Cb)({type:ee.b,json:{write:!0}})],ce.prototype,"material",void 0),(0,D._)([(0,U.Cb)({type:ae.b,json:{write:!0}})],ce.prototype,"resource",void 0),(0,D._)([(0,G.J)({Icon:"icon"},{readOnly:!0})],ce.prototype,"type",void 0),(0,D._)([(0,U.Cb)(oe.y)],ce.prototype,"size",void 0),(0,D._)([(0,G.J)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,U.Cb)({json:{default:"center"}})],ce.prototype,"anchor",void 0),(0,D._)([(0,U.Cb)({type:ie.e,json:{type:[Number],read:{reader:fe=>new ie.e({x:fe[0],y:fe[1]})},write:{writer:(fe,De)=>{De.anchorPosition=[fe.x,fe.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],ce.prototype,"anchorPosition",void 0),(0,D._)([(0,U.Cb)({type:se,json:{write:!0}})],ce.prototype,"outline",void 0),ce=le=(0,D._)([(0,$.j)("esri.symbols.IconSymbol3DLayer")],ce);const _e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function he(fe){return _e[fe]||(ne.warn(`${fe} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const ye=ce},22490:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ue,D=T(17626),x=T(46160),w=T(58817),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(39368),G=T(21716),$=T(9824),re=T(97595);const ae=x.Z.ofType({base:null,key:"type",typeMap:{text:G.Z}});let oe=ue=class extends H.Z{constructor(X){super(X),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new ae,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,$.gv)(this)}hasVisibleVerticalOffset(){return(0,$.Uy)(this)}clone(){return new ue({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail),callout:(0,w.d9)(this.callout),verticalOffset:(0,w.d9)(this.verticalOffset)})}static fromTextSymbol(X){return new ue({symbolLayers:[G.Z.fromTextSymbol(X)]})}};(0,D._)([(0,B.Cb)({type:re._,json:{write:!0}})],oe.prototype,"verticalOffset",void 0),(0,D._)([(0,B.Cb)($.Y2)],oe.prototype,"callout",void 0),(0,D._)([(0,B.Cb)({json:{read:!1,write:!1}})],oe.prototype,"styleOrigin",void 0),(0,D._)([(0,B.Cb)({type:ae})],oe.prototype,"symbolLayers",void 0),(0,D._)([(0,W.J)({LabelSymbol3D:"label-3d"},{readOnly:!0})],oe.prototype,"type",void 0),oe=ue=(0,D._)([(0,Y.j)("esri.symbols.LabelSymbol3D")],oe);const ie=oe},9436:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var re,D=T(17626),x=T(46160),w=T(58817),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(21068),G=T(69147),$=T(39368);const ue=x.Z.ofType({base:null,key:"type",typeMap:{line:H.Z,path:G.Z}}),ae=x.Z.ofType({base:null,key:"type",typeMap:{line:H.Z,path:G.Z}});let oe=re=class extends $.Z{constructor(X){super(X),this.symbolLayers=new ue,this.type="line-3d"}clone(){return new re({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromSimpleLineSymbol(X){return new re({symbolLayers:[H.Z.fromSimpleLineSymbol(X)]})}};(0,D._)([(0,B.Cb)({type:ue,json:{type:ae}})],oe.prototype,"symbolLayers",void 0),(0,D._)([(0,W.J)({LineSymbol3D:"line-3d"},{readOnly:!0})],oe.prototype,"type",void 0),oe=re=(0,D._)([(0,Y.j)("esri.symbols.LineSymbol3D")],oe);const ie=oe},21068:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>de});var D=T(17626),x=T(62208),w=T(23841),B=T(77712),Y=(T(85931),T(8314),T(90912)),H=T(55342),G=T(76898),$=T(91558),re=T(79608),ue=T(86810),ae=T(67866);let oe=class extends((0,re.J)(ue.wq)){constructor(me){super(me),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(me){return(0,x.pC)(me)&&me.placement===this.placement&&me.style===this.style&&((0,x.Wi)(this.color)&&(0,x.Wi)(me.color)||(0,x.pC)(this.color)&&(0,x.pC)(me.color)&&this.color.toJSON()===me.color.toJSON())}};(0,D._)([(0,B.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],oe.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:ae.J,json:{default:"begin-end",write:!0}})],oe.prototype,"placement",void 0),(0,D._)([(0,B.Cb)({type:ae.k,json:{default:"arrow",write:!0}})],oe.prototype,"style",void 0),(0,D._)([(0,B.Cb)({type:$.Z,json:{type:[Y.z8],default:null,write:!0}})],oe.prototype,"color",void 0),oe=(0,D._)([(0,G.j)("esri.symbols.LineStyleMarker3D")],oe);const ie=oe;var ne,X=T(97665),Z=T(63743),Q=T(99255),J=T(12948),se=T(60958),ee=T(64830),le=T(43652);let ce=ne=class extends X.Z{constructor(me){super(me),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,w.Wz)(1),this.pattern=null,this.marker=null}clone(){const me={enabled:this.enabled,material:(0,x.pC)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:(0,x.pC)(this.pattern)?this.pattern.clone():null,marker:(0,x.pC)(this.marker)?this.marker.clone():null};return new ne(me)}static fromSimpleLineSymbol(me){const _e={enabled:!0,size:me.width??(0,w.Wz)(1),cap:me.cap||"butt",join:me.join||"miter",pattern:me.style&&"inside-frame"!==me.style?new Z.Z({style:me.style}):null,material:new ee.b({color:(me.color||J.ix).clone()}),marker:me.marker?new ie({placement:me.marker.placement,style:me.marker.style,color:me.marker.color?.clone()??null}):null};return new ne(_e)}};(0,D._)([(0,B.Cb)({type:ee.b,json:{write:!0}})],ce.prototype,"material",void 0),(0,D._)([(0,H.J)({Line:"line"},{readOnly:!0})],ce.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:le.w2,json:{write:!0,default:"miter"}})],ce.prototype,"join",void 0),(0,D._)([(0,B.Cb)({type:le.Hc,json:{write:!0,default:"butt"}})],ce.prototype,"cap",void 0),(0,D._)([(0,B.Cb)(se.y)],ce.prototype,"size",void 0),(0,D._)([(0,B.Cb)(Q.D)],ce.prototype,"pattern",void 0),(0,D._)([(0,B.Cb)({types:{key:"type",base:ie,typeMap:{style:ie}},json:{write:!0}})],ce.prototype,"marker",void 0),ce=ne=(0,D._)([(0,G.j)("esri.symbols.LineSymbol3DLayer")],ce);const de=ce},46735:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var D=T(17626),x=T(23841),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(10012);let G=class extends H.Z{constructor(re){super(re),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,D._)([(0,w.Cb)({type:Number,json:{read:re=>re&&-1*re,write:(re,ue)=>ue.angle=re&&-1*re}})],G.prototype,"angle",void 0),(0,D._)([(0,w.Cb)({type:["simple-marker","picture-marker"],readOnly:!0})],G.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:Number,cast:x.t_,json:{write:!0}})],G.prototype,"xoffset",void 0),(0,D._)([(0,w.Cb)({type:Number,cast:x.t_,json:{write:!0}})],G.prototype,"yoffset",void 0),(0,D._)([(0,w.Cb)({type:Number,cast:re=>"auto"===re?re:(0,x.t_)(re),json:{write:!0}})],G.prototype,"size",void 0),G=(0,D._)([(0,Y.j)("esri.symbols.MarkerSymbol")],G);const $=G},36687:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var $,D=T(17626),x=T(46160),w=T(58817),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(9260),G=T(39368);const re=x.Z.ofType({base:null,key:"type",typeMap:{fill:H.Z}});let ue=$=class extends G.Z{constructor(oe){super(oe),this.symbolLayers=new re,this.type="mesh-3d"}clone(){return new $({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}};(0,D._)([(0,B.Cb)({type:re})],ue.prototype,"symbolLayers",void 0),(0,D._)([(0,W.J)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],ue.prototype,"type",void 0),ue=$=(0,D._)([(0,Y.j)("esri.symbols.MeshSymbol3D")],ue);const ae=ue},2066:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Z});var ue,D=T(17626),x=T(62208),w=T(77712),Y=(T(85931),T(8314),T(90912),T(55342)),H=T(76898),G=T(97665),$=T(48521),re=T(14517);let ae=ue=class extends re.Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new ue({x:this.x,y:this.y,z:this.z})}};(0,D._)([(0,w.Cb)({type:Number})],ae.prototype,"x",void 0),(0,D._)([(0,w.Cb)({type:Number})],ae.prototype,"y",void 0),(0,D._)([(0,w.Cb)({type:Number})],ae.prototype,"z",void 0),ae=ue=(0,D._)([(0,H.j)("esri.symbols.support.Symbol3DAnchorPosition3D")],ae);var ie,oe=T(64830);let X=ie=class extends G.Z{constructor(Q){super(Q),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new ie({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,x.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,D._)([(0,w.Cb)({type:oe.b,json:{write:!0}})],X.prototype,"material",void 0),(0,D._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],X.prototype,"castShadows",void 0),(0,D._)([(0,w.Cb)({type:$.k,json:{write:!0}})],X.prototype,"resource",void 0),(0,D._)([(0,Y.J)({Object:"object"},{readOnly:!0})],X.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"width",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"height",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"depth",void 0),(0,D._)([(0,Y.J)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,w.Cb)({json:{default:"origin"}})],X.prototype,"anchor",void 0),(0,D._)([(0,w.Cb)({type:ae,json:{type:[Number],read:{reader:Q=>new ae({x:Q[0],y:Q[1],z:Q[2]})},write:{writer:(Q,J)=>{J.anchorPosition=[Q.x,Q.y,Q.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],X.prototype,"anchorPosition",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"heading",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"tilt",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],X.prototype,"roll",void 0),(0,D._)([(0,w.Cb)({readOnly:!0})],X.prototype,"isPrimitive",null),X=ie=(0,D._)([(0,H.j)("esri.symbols.ObjectSymbol3DLayer")],X);const Z=X},69147:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ae,D=T(17626),x=T(62208),w=T(77712),Y=(T(85931),T(8314),T(90912),T(55342)),H=T(68653),G=T(76898),$=T(97665),re=T(64830),ue=T(43652);let oe=ae=class extends $.Z{constructor(X){super(X),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(X,Z){return X??(null==Z.height&&null!=Z.size?Z.size:void 0)}readHeight(X,Z){return X??(null==Z.width&&null!=Z.size?Z.size:void 0)}clone(){return new ae({enabled:this.enabled,material:(0,x.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,D._)([(0,w.Cb)({type:re.b,json:{write:!0}})],oe.prototype,"material",void 0),(0,D._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],oe.prototype,"castShadows",void 0),(0,D._)([(0,Y.J)({Path:"path"},{readOnly:!0})],oe.prototype,"type",void 0),(0,D._)([(0,w.Cb)({type:["circle","quad"],json:{write:!0,default:"circle"}})],oe.prototype,"profile",void 0),(0,D._)([(0,w.Cb)({type:ue.w2,json:{write:!0,default:"miter"}})],oe.prototype,"join",void 0),(0,D._)([(0,w.Cb)({type:ue.KW,json:{write:!0,default:"butt"}})],oe.prototype,"cap",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],oe.prototype,"width",void 0),(0,D._)([(0,H.r)("width",["width","size","height"])],oe.prototype,"readWidth",null),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],oe.prototype,"height",void 0),(0,D._)([(0,H.r)("height",["height","size","width"])],oe.prototype,"readHeight",null),(0,D._)([(0,w.Cb)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],oe.prototype,"anchor",void 0),(0,D._)([(0,w.Cb)({type:["heading","all"],json:{write:!0,default:"all"}})],oe.prototype,"profileRotation",void 0),oe=ae=(0,D._)([(0,G.j)("esri.symbols.PathSymbol3DLayer")],oe);const ie=oe},13546:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ae});var re,D=T(17626),x=T(58817),w=T(23841),B=T(77712),W=(T(90912),T(55342)),Y=T(68653),H=T(76898),G=T(46735),$=T(69738);let ue=re=class extends G.Z{constructor(...oe){super(...oe),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(oe,ie,X){if(oe&&"string"!=typeof oe&&null==oe.imageData)return oe;const Z={};return oe&&(Z.url=oe),null!=ie&&(Z.width=(0,w.t_)(ie)),null!=X&&(Z.height=(0,w.t_)(X)),Z}readHeight(oe,ie){return ie.size||oe}readWidth(oe,ie){return ie.size||oe}clone(){const oe=new re({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return oe._set("source",(0,x.d9)(this.source)),oe}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,D._)([(0,B.Cb)({json:{write:!1}})],ue.prototype,"color",void 0),(0,D._)([(0,W.J)({esriPMS:"picture-marker"},{readOnly:!0})],ue.prototype,"type",void 0),(0,D._)([(0,B.Cb)($.KA)],ue.prototype,"url",void 0),(0,D._)([(0,B.Cb)($.Ds)],ue.prototype,"source",void 0),(0,D._)([(0,B.Cb)({type:Number,cast:w.t_,json:{write:!0}})],ue.prototype,"height",void 0),(0,D._)([(0,Y.r)("height",["height","size"])],ue.prototype,"readHeight",null),(0,D._)([(0,B.Cb)({type:Number,cast:w.t_,json:{write:!0}})],ue.prototype,"width",void 0),(0,D._)([(0,B.Cb)({json:{write:!1}})],ue.prototype,"size",void 0),ue=re=(0,D._)([(0,H.j)("esri.symbols.PictureMarkerSymbol")],ue);const ae=ue},69852:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Z});var oe,D=T(17626),x=T(46160),w=T(58817),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(26531),G=T(2066),$=T(39368),re=T(21716),ue=T(9824),ae=T(97595);const ie=x.Z.ofType({base:null,key:"type",typeMap:{icon:H.Z,object:G.Z,text:re.Z}});let X=oe=class extends $.Z{constructor(Q){super(Q),this.verticalOffset=null,this.callout=null,this.symbolLayers=new ie,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const Q of this.symbolLayers.items)switch(Q.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,ue.gv)(this)}hasVisibleVerticalOffset(){return(0,ue.Uy)(this)}clone(){return new oe({verticalOffset:(0,w.d9)(this.verticalOffset),callout:(0,w.d9)(this.callout),styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromSimpleMarkerSymbol(Q){return new oe({symbolLayers:[H.Z.fromSimpleMarkerSymbol(Q)]})}static fromPictureMarkerSymbol(Q){return new oe({symbolLayers:[H.Z.fromPictureMarkerSymbol(Q)]})}static fromCIMSymbol(Q){return"CIMPointSymbol"!==Q.data?.symbol?.type?null:new oe(Q.data.symbol.callout?{symbolLayers:[H.Z.fromCIMSymbol(Q)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[H.Z.fromCIMSymbol(Q)]})}static fromTextSymbol(Q){return new oe({symbolLayers:[re.Z.fromTextSymbol(Q)]})}};(0,D._)([(0,B.Cb)({type:ae._,json:{write:!0}})],X.prototype,"verticalOffset",void 0),(0,D._)([(0,B.Cb)(ue.Y2)],X.prototype,"callout",void 0),(0,D._)([(0,B.Cb)({type:ie,json:{origins:{"web-scene":{write:!0}}}})],X.prototype,"symbolLayers",void 0),(0,D._)([(0,W.J)({PointSymbol3D:"point-3d"},{readOnly:!0})],X.prototype,"type",void 0),X=oe=(0,D._)([(0,Y.j)("esri.symbols.PointSymbol3D")],X);const Z=X},89673:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>se});var Z,D=T(17626),x=T(46160),w=T(58817),B=T(62208),U=T(77712),Y=(T(90912),T(55342)),H=T(76898),G=T(65499),$=T(9260),re=T(26531),ue=T(21068),ae=T(2066),oe=T(39368),ie=T(21716),X=T(72622);const Q=x.Z.ofType({base:null,key:"type",typeMap:{extrude:G.Z,fill:$.Z,icon:re.Z,line:ue.Z,object:ae.Z,text:ie.Z,water:X.Z}});let J=Z=class extends oe.Z{constructor(ee){super(ee),this.symbolLayers=new Q,this.type="polygon-3d"}clone(){return new Z({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromJSON(ee){const le=new Z;if(le.read(ee),2===le.symbolLayers.length&&"fill"===le.symbolLayers.getItemAt(0).type&&"line"===le.symbolLayers.getItemAt(1).type){const ne=le.symbolLayers.getItemAt(0),ce=le.symbolLayers.getItemAt(1);!ce.enabled||ee.symbolLayers&&ee.symbolLayers[1]&&!1===ee.symbolLayers[1].enable||(ne.outline={size:ce.size,color:(0,B.pC)(ce.material)?ce.material.color:null}),le.symbolLayers.removeAt(1)}return le}static fromSimpleFillSymbol(ee){return new Z({symbolLayers:[$.Z.fromSimpleFillSymbol(ee)]})}};(0,D._)([(0,U.Cb)({type:Q,json:{write:!0}})],J.prototype,"symbolLayers",void 0),(0,D._)([(0,Y.J)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],J.prototype,"type",void 0),J=Z=(0,D._)([(0,H.j)("esri.symbols.PolygonSymbol3D")],J);const se=J},88493:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var re,D=T(17626),x=T(91558),w=T(2076),B=T(58817),U=T(77712),Y=(T(90912),T(55342)),H=T(76898),G=T(48575),$=T(52068);const ue=new w.X({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ae=re=class extends G.Z{constructor(...ie){super(...ie),this.color=new x.Z([0,0,0,.25]),this.outline=new $.Z,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(ie,X,Z){if(ie&&"string"!=typeof ie)return ie;const Q={};return ie&&(Q.style=ie),X&&(Q.outline=X),Z&&(Q.color=Z),Q}clone(){return new re({color:(0,B.d9)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,D._)([(0,U.Cb)()],ae.prototype,"color",void 0),(0,D._)([(0,U.Cb)()],ae.prototype,"outline",void 0),(0,D._)([(0,Y.J)({esriSFS:"simple-fill"},{readOnly:!0})],ae.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:ue.apiValues,json:{read:ue.read,write:ue.write}})],ae.prototype,"style",void 0),ae=re=(0,D._)([(0,H.j)("esri.symbols.SimpleFillSymbol")],ae);const oe=ae},52068:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>de});var D=T(17626),x=T(2076),w=T(58817),B=T(23841),U=T(77712),Y=(T(90912),T(55342)),H=T(76898),re=(T(85931),T(8314),T(10012));let ue=class extends re.Z{constructor(me){super(me),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,D._)([(0,Y.J)({esriSLS:"simple-line"},{readOnly:!0})],ue.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:Number,cast:B.t_,json:{write:!0}})],ue.prototype,"width",void 0),ue=(0,D._)([(0,H.j)("esri.symbols.LineSymbol")],ue);const ae=ue;var J,oe=T(91558),ie=T(86810),X=T(68653),Z=T(99433),Q=T(67866);let se=J=class extends ie.wq{constructor(me){super(me),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(me,_e,he,ye){_e[he]="web-map"===ye?.origin?"arrow":me}set color(me){this._set("color",me)}readColor(me){return me&&null!=me[0]?[me[0],me[1],me[2],me[3]/255]:me}writeColor(me,_e,he,ye){"web-map"===ye?.origin||(_e[he]=me)}clone(){return new J({color:(0,w.d9)(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};(0,D._)([(0,U.Cb)({type:["begin","end","begin-end"],json:{write:!0}})],se.prototype,"placement",void 0),(0,D._)([(0,Y.J)({"line-marker":"line-marker"},{readOnly:!0}),(0,U.Cb)({json:{origins:{"web-map":{write:!1}}}})],se.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:Q.k})],se.prototype,"style",void 0),(0,D._)([(0,Z.c)("style")],se.prototype,"writeStyle",null),(0,D._)([(0,U.Cb)({type:oe.Z,value:null,json:{write:{allowNull:!0}}})],se.prototype,"color",null),(0,D._)([(0,X.r)("color")],se.prototype,"readColor",null),(0,D._)([(0,Z.c)("color")],se.prototype,"writeColor",null),se=J=(0,D._)([(0,H.j)("esri.symbols.LineSymbolMarker")],se);const ee=se;var le;const ne=new x.X({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ce=le=class extends ae{constructor(...me){super(...me),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(me,_e,he,ye,fe,De){if(me&&"string"!=typeof me)return me;const ve={};return null!=me&&(ve.style=me),null!=_e&&(ve.color=_e),null!=he&&(ve.width=(0,B.t_)(he)),null!=ye&&(ve.cap=ye),null!=fe&&(ve.join=fe),null!=De&&(ve.miterLimit=(0,B.t_)(De)),ve}clone(){return new le({color:(0,w.d9)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};(0,D._)([(0,Y.J)({esriSLS:"simple-line"},{readOnly:!0})],ce.prototype,"type",void 0),(0,D._)([(0,U.Cb)({type:ne.apiValues,json:{read:ne.read,write:ne.write}})],ce.prototype,"style",void 0),(0,D._)([(0,U.Cb)({type:["butt","round","square"],json:{write:{overridePolicy:(me,_e,he)=>({enabled:"round"!==me&&(null==he||null==he.origin)})}}})],ce.prototype,"cap",void 0),(0,D._)([(0,U.Cb)({type:["miter","round","bevel"],json:{write:{overridePolicy:(me,_e,he)=>({enabled:"round"!==me&&(null==he||null==he.origin)})}}})],ce.prototype,"join",void 0),(0,D._)([(0,U.Cb)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":ee}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ce.prototype,"marker",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{read:!1,write:!1}})],ce.prototype,"miterLimit",void 0),ce=le=(0,D._)([(0,H.j)("esri.symbols.SimpleLineSymbol")],ce);const de=ce},57213:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>X});var ae,D=T(17626),x=T(91558),w=T(2076),B=T(58817),U=T(23841),W=T(77712),H=(T(90912),T(55342)),G=T(76898),$=T(99433),re=T(46735),ue=T(52068);const oe=new w.X({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ie=ae=class extends re.Z{constructor(...Z){super(...Z),this.color=new x.Z([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ue.Z}normalizeCtorArgs(Z,Q,J,se){if(Z&&"string"!=typeof Z)return Z;const ee={};return Z&&(ee.style=Z),null!=Q&&(ee.size=(0,U.t_)(Q)),J&&(ee.outline=J),se&&(ee.color=se),ee}writeColor(Z,Q){Z&&"x"!==this.style&&"cross"!==this.style&&(Q.color=Z.toJSON()),null===Z&&(Q.color=null)}set path(Z){this.style="path",this._set("path",Z)}clone(){return new ae({angle:this.angle,color:(0,B.d9)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};(0,D._)([(0,W.Cb)()],ie.prototype,"color",void 0),(0,D._)([(0,$.c)("color")],ie.prototype,"writeColor",null),(0,D._)([(0,H.J)({esriSMS:"simple-marker"},{readOnly:!0})],ie.prototype,"type",void 0),(0,D._)([(0,W.Cb)()],ie.prototype,"size",void 0),(0,D._)([(0,W.Cb)({type:oe.apiValues,json:{read:oe.read,write:oe.write}})],ie.prototype,"style",void 0),(0,D._)([(0,W.Cb)({type:String,json:{write:!0}})],ie.prototype,"path",null),(0,D._)([(0,W.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ue.Z}},json:{default:null,write:!0}})],ie.prototype,"outline",void 0),ie=ae=(0,D._)([(0,G.j)("esri.symbols.SimpleMarkerSymbol")],ie);const X=ie},10012:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var D=T(15861),x=T(17626),w=T(91558),B=T(2076),U=T(86810),W=T(77712),$=(T(85931),T(8314),T(90912),T(68653)),re=T(76898);const ue=new B.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let ae=0,oe=class extends U.wq{constructor(X){super(X),this.id="sym"+ae++,this.type=null,this.color=new w.Z([0,0,0,1])}readColor(X){return X&&null!=X[0]?[X[0],X[1],X[2],X[3]/255]:X}collectRequiredFields(X,Z){return(0,D.Z)(function*(){})()}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,x._)([(0,W.Cb)({type:ue.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ue.write}}})],oe.prototype,"type",void 0),(0,x._)([(0,W.Cb)({type:w.Z,json:{write:{allowNull:!0}}})],oe.prototype,"color",void 0),(0,x._)([(0,$.r)("color")],oe.prototype,"readColor",null),oe=(0,x._)([(0,re.j)("esri.symbols.Symbol")],oe);const ie=oe},39368:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ve});var D=T(17626),x=T(46160),w=T(89726),B=T(63290),U=T(21726),W=T(14889),Y=T(77712),$=(T(85931),T(8314),T(66656)),re=T(68653),ue=T(76898),ae=T(99433),oe=T(84687),ie=T(29840),X=T(65499),Z=T(9260),Q=T(26531),J=T(21068),se=T(2066),ee=T(69147),le=T(10012),ne=T(97665),ce=T(21716),de=T(72622),me=T(77345),_e=T(96296);const he={icon:Q.Z,object:se.Z,line:J.Z,path:ee.Z,fill:Z.Z,extrude:X.Z,text:ce.Z,water:de.Z},ye=x.Z.ofType({base:ne.Z,key:"type",typeMap:he,errorContext:"symbol-layer"}),fe=B.Z.getLogger("esri.symbols.Symbol3D");let De=class extends le.Z{constructor(Ce){super(Ce),this.styleOrigin=null,this.thumbnail=null,this.type=null;const ge=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers;this._set("symbolLayers",new(ge&&ge.type||x.Z))}get color(){return null}set color(Ce){this.initialized&&fe.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(Ce){(0,w.Z)(Ce,this._get("symbolLayers"))}readStyleOrigin(Ce,ge,Te){if(Ce.styleUrl&&Ce.name){const Le=(0,ie.f)(Ce.styleUrl,Te);return new me.Z({styleUrl:Le,name:Ce.name})}if(Ce.styleName&&Ce.name)return new me.Z({portal:Te&&Te.portal||oe.Z.getDefault(),styleName:Ce.styleName,name:Ce.name});Te&&Te.messages&&Te.messages.push(new W.Z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:Te,definition:Ce}))}writeStyleOrigin(Ce,ge,Te,Le){if(Ce.styleUrl&&Ce.name){let je=(0,ie.t)(Ce.styleUrl,Le);(0,U.YP)(je)&&(je=(0,U.Fv)(je)),ge.styleOrigin={styleUrl:je,name:Ce.name}}else Ce.styleName&&Ce.name&&(Ce.portal&&Le&&Le.portal&&!(0,U.tm)(Ce.portal.restUrl,Le.portal.restUrl)?Le&&Le.messages&&Le.messages.push(new W.Z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):ge.styleOrigin={styleName:Ce.styleName,name:Ce.name})}normalizeCtorArgs(Ce){return Ce instanceof ne.Z||Ce&&he[Ce.type]?{symbolLayers:[Ce]}:Array.isArray(Ce)?{symbolLayers:Ce}:Ce}};(0,D._)([(0,Y.Cb)({json:{read:!1,write:!1}})],De.prototype,"color",null),(0,D._)([(0,Y.Cb)({type:ye,nonNullable:!0,json:{write:!0}}),(0,$.p)(w.R)],De.prototype,"symbolLayers",null),(0,D._)([(0,Y.Cb)({type:me.Z})],De.prototype,"styleOrigin",void 0),(0,D._)([(0,re.r)("styleOrigin")],De.prototype,"readStyleOrigin",null),(0,D._)([(0,ae.c)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],De.prototype,"writeStyleOrigin",null),(0,D._)([(0,Y.Cb)({type:_e.p,json:{read:!1}})],De.prototype,"thumbnail",void 0),(0,D._)([(0,Y.Cb)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],De.prototype,"type",void 0),De=(0,D._)([(0,ue.j)("esri.symbols.Symbol3D")],De);const ve=De},97665:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>$});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(99433);let G=class extends x.wq{constructor(re){super(re),this.enabled=!0,this.type=null}writeEnabled(re,ue,ae){re||(ue[ae]=re)}};(0,D._)([(0,w.Cb)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],G.prototype,"enabled",void 0),(0,D._)([(0,H.c)("enabled")],G.prototype,"writeEnabled",null),(0,D._)([(0,w.Cb)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],G.prototype,"type",void 0),G=(0,D._)([(0,Y.j)("esri.symbols.Symbol3DLayer")],G);const $=G},35540:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ae,D=T(17626),x=T(91558),w=T(58817),B=T(23841),U=T(77712),W=T(66656),Y=T(55342),H=T(76898),G=T(99433),$=T(11472),re=T(10012),ue=T(50369);let oe=ae=class extends re.Z{constructor(...X){super(...X),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new $.Z,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(X,Z,Q){if(X&&"string"!=typeof X)return X;const J={};return X&&(J.text=X),Z&&(J.font=Z),Q&&(J.color=Q),J}writeLineWidth(X,Z,Q,J){J&&"string"!=typeof J||(Z[Q]=X)}castLineWidth(X){return(0,B.t_)(X)}writeLineHeight(X,Z,Q,J){J&&"string"!=typeof J||(Z[Q]=X)}clone(){return new ae({angle:this.angle,backgroundColor:(0,w.d9)(this.backgroundColor),borderLineColor:(0,w.d9)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,w.d9)(this.color),font:this.font&&this.font.clone(),haloColor:(0,w.d9)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,D._)([(0,U.Cb)({type:x.Z,json:{write:!0}})],oe.prototype,"backgroundColor",void 0),(0,D._)([(0,U.Cb)({type:x.Z,json:{write:!0}})],oe.prototype,"borderLineColor",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],oe.prototype,"borderLineSize",void 0),(0,D._)([(0,U.Cb)({type:$.Z,json:{write:!0}})],oe.prototype,"font",void 0),(0,D._)([(0,U.Cb)({...ue.x0,json:{write:!0}})],oe.prototype,"horizontalAlignment",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0}})],oe.prototype,"kerning",void 0),(0,D._)([(0,U.Cb)({type:x.Z,json:{write:!0}})],oe.prototype,"haloColor",void 0),(0,D._)([(0,U.Cb)({type:Number,cast:B.t_,json:{write:!0}})],oe.prototype,"haloSize",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0}})],oe.prototype,"rightToLeft",void 0),(0,D._)([(0,U.Cb)({type:Boolean,json:{write:!0}})],oe.prototype,"rotated",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],oe.prototype,"text",void 0),(0,D._)([(0,Y.J)({esriTS:"text"},{readOnly:!0})],oe.prototype,"type",void 0),(0,D._)([(0,U.Cb)({...ue.Nj,json:{write:!0}})],oe.prototype,"verticalAlignment",void 0),(0,D._)([(0,U.Cb)({type:Number,cast:B.t_,json:{write:!0}})],oe.prototype,"xoffset",void 0),(0,D._)([(0,U.Cb)({type:Number,cast:B.t_,json:{write:!0}})],oe.prototype,"yoffset",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{read:X=>X&&-1*X,write:(X,Z)=>Z.angle=X&&-1*X}})],oe.prototype,"angle",void 0),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],oe.prototype,"width",void 0),(0,D._)([(0,U.Cb)({type:Number})],oe.prototype,"lineWidth",void 0),(0,D._)([(0,G.c)("lineWidth")],oe.prototype,"writeLineWidth",null),(0,D._)([(0,W.p)("lineWidth")],oe.prototype,"castLineWidth",null),(0,D._)([(0,U.Cb)(ue.Ck)],oe.prototype,"lineHeight",void 0),(0,D._)([(0,G.c)("lineHeight")],oe.prototype,"writeLineHeight",null),oe=ae=(0,D._)([(0,H.j)("esri.symbols.TextSymbol")],oe);const ie=oe},21716:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>de});var oe,D=T(17626),x=T(58817),w=T(62208),B=T(77712),W=(T(90912),T(55342)),Y=T(76898),H=T(99433),G=T(11472),$=T(97665),re=T(60958),ue=T(91558),ae=T(86810);let ie=oe=class extends ae.wq{constructor(){super(...arguments),this.color=new ue.Z([0,0,0,1]),this.size=0}clone(){const me={color:(0,x.d9)(this.color),size:this.size};return new oe(me)}};(0,D._)([(0,B.Cb)(re.a)],ie.prototype,"color",void 0),(0,D._)([(0,B.Cb)(re.y)],ie.prototype,"size",void 0),ie=oe=(0,D._)([(0,Y.j)("esri.symbols.support.Symbol3DHalo")],ie);var X=T(64830),Z=T(79608);T(85931),T(8314);let se=class extends((0,Z.J)(ae.wq)){constructor(me){super(me),this.color=null}};(0,D._)([(0,B.Cb)(re.a)],se.prototype,"color",void 0),se=(0,D._)([(0,Y.j)("esri.symbols.support.Symbol3DTextBackground")],se);var le,ee=T(50369);let ne=le=class extends $.Z{constructor(me){super(me),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(me){(0,w.pC)(me)&&(0,w.pC)(this._userSize)&&(me.size=this._userSize),this._set("font",me)}writeFont(me,_e,he,ye){const fe={...ye,textSymbol3D:!0};_e.font=me.write({},fe),delete _e.font.size}get size(){return(0,w.pC)(this._userSize)?this._userSize:(0,w.pC)(this.font)&&null!=this.font.size?this.font.size:9}set size(me){this._userSize=me,(0,w.pC)(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const me=new le({enabled:this.enabled,font:this.font&&(0,x.d9)(this.font),halo:this.halo&&(0,x.d9)(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:(0,w.pC)(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:(0,x.d9)(this.background)});return me._userSize=this._userSize,me}static fromTextSymbol(me){return new le({font:(0,w.pC)(me.font)?me.font.clone():new G.Z,halo:ce(me.haloColor,me.haloSize),horizontalAlignment:me.horizontalAlignment,lineHeight:me.lineHeight,material:me.color?new X.b({color:me.color.clone()}):null,text:me.text,verticalAlignment:me.verticalAlignment,background:me.backgroundColor?new se({color:me.backgroundColor.clone()}):null})}};function ce(me,_e){return me&&_e>0?new ie({color:(0,x.d9)(me),size:_e}):null}(0,D._)([(0,B.Cb)({type:G.Z,json:{write:!0}})],ne.prototype,"font",null),(0,D._)([(0,H.c)("font")],ne.prototype,"writeFont",null),(0,D._)([(0,B.Cb)({type:ie,json:{write:!0}})],ne.prototype,"halo",void 0),(0,D._)([(0,B.Cb)({...ee.x0,json:{default:"center",write:!0}})],ne.prototype,"horizontalAlignment",void 0),(0,D._)([(0,B.Cb)({...ee.Ck,json:{default:1,write:!0}})],ne.prototype,"lineHeight",void 0),(0,D._)([(0,B.Cb)({type:X.b,json:{write:!0}})],ne.prototype,"material",void 0),(0,D._)([(0,B.Cb)({type:se,json:{write:!0}})],ne.prototype,"background",void 0),(0,D._)([(0,B.Cb)(re.y)],ne.prototype,"size",null),(0,D._)([(0,B.Cb)({type:String,json:{write:!0}})],ne.prototype,"text",void 0),(0,D._)([(0,W.J)({Text:"text"},{readOnly:!0})],ne.prototype,"type",void 0),(0,D._)([(0,B.Cb)({...ee.Nj,json:{default:"baseline",write:!0}})],ne.prototype,"verticalAlignment",void 0),ne=le=(0,D._)([(0,Y.j)("esri.symbols.TextSymbol3DLayer")],ne);const de=ne},72622:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var G,D=T(17626),x=T(91558),w=T(58817),B=T(77712),U=T(90912),W=T(55342),Y=T(76898),H=T(97665);let $=G=class extends H.Z{constructor(ae){super(ae),this.color=re.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new G({color:(0,w.d9)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,D._)([(0,B.Cb)({type:x.Z,nonNullable:!0,json:{type:[U.z8],write:(ae,oe,ie)=>oe[ie]=ae.toArray(x.Z.AlphaMode.UNLESS_OPAQUE),default:()=>re.clone(),defaultEquals:ae=>ae.toCss(!0)===re.toCss(!0)}})],$.prototype,"color",void 0),(0,D._)([(0,W.J)({Water:"water"},{readOnly:!0})],$.prototype,"type",void 0),(0,D._)([(0,B.Cb)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],$.prototype,"waterbodySize",void 0),(0,D._)([(0,B.Cb)({type:Number,json:{write:!0,default:null}})],$.prototype,"waveDirection",void 0),(0,D._)([(0,B.Cb)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],$.prototype,"waveStrength",void 0),$=G=(0,D._)([(0,Y.j)("esri.symbols.WaterSymbol3DLayer")],$);const re=new x.Z([0,119,190]),ue=$},12874:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>se});var X,D=T(15861),x=T(17626),w=T(63290),B=T(62208),U=T(10699),W=T(77712),$=(T(85931),T(8314),T(90912),T(55342)),re=T(76898),ue=T(84687),ae=T(29840),oe=T(10012),ie=T(96296);const Z=w.Z.getLogger("esri.symbols.WebStyleSymbol");let Q=X=class extends oe.Z{constructor(ee){super(ee),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const ee=(0,B.pC)(this.portal)?this.portal:ue.Z.getDefault();return`${this.styleName}:${this.styleUrl}:${this.name}:${ee.user?ee.user.username:null}:${ee.url}`}read(ee,le){this.portal=le?le.portal:void 0,super.read(ee,le)}clone(){return new X({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(ee){return this._fetchSymbol("webRef",ee)}fetchCIMSymbol(ee){return this._fetchSymbol("cimRef",ee)}_fetchSymbol(ee,le){var ne=this;return(0,D.Z)(function*(){const ce=(0,B.pC)(le)?le.cache:null,de=ce?ne.fetchCacheKey:null;if((0,B.pC)(ce)){const ye=ce.get(de);if(ye)return ye.clone()}const me=yield function J(){return Promise.resolve().then(T.bind(T,50998))}();(0,U.k_)(le);const _e=me.resolveWebStyleSymbol(ne,{portal:ne.portal},ee,le);_e.catch(ye=>{Z.error("#fetchSymbol()","Failed to create symbol from style",ye)});const he=yield _e;return"webRef"===ee&&"point-3d"===he.type||"cimRef"===ee&&"cim"===he.type?((0,B.pC)(ce)&&ce.set(de,he.clone()),he):null})()}};(0,x._)([(0,W.Cb)({json:{write:!1}})],Q.prototype,"color",void 0),(0,x._)([(0,W.Cb)({type:String,json:{write:!0}})],Q.prototype,"styleName",void 0),(0,x._)([(0,W.Cb)({type:ue.Z,json:{write:!1}})],Q.prototype,"portal",void 0),(0,x._)([(0,W.Cb)({type:String,json:{read:ae.r,write:ae.w}})],Q.prototype,"styleUrl",void 0),(0,x._)([(0,W.Cb)({type:ie.p,json:{read:!1}})],Q.prototype,"thumbnail",void 0),(0,x._)([(0,W.Cb)({type:String,json:{write:!0}})],Q.prototype,"name",void 0),(0,x._)([(0,$.J)({styleSymbolReference:"web-style"},{readOnly:!0})],Q.prototype,"type",void 0),(0,x._)([(0,W.Cb)()],Q.prototype,"fetchCacheKey",null),Q=X=(0,x._)([(0,re.j)("esri.symbols.WebStyleSymbol")],Q);const se=Q},21779:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($),this.visible=!0}clone(){}};(0,D._)([(0,w.Cb)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],H.prototype,"type",void 0),(0,D._)([(0,w.Cb)({readOnly:!0})],H.prototype,"visible",void 0),H=(0,D._)([(0,Y.j)("esri.symbols.callouts.Callout3D")],H);const G=H},17497:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ie});var ae,D=T(17626),x=T(91558),w=T(58817),B=T(62208),U=T(23841),W=T(77712),H=(T(90912),T(55342)),G=T(76898),$=T(21779),re=T(71530),ue=T(60958);let oe=ae=class extends $.Z{constructor(X){super(X),this.type="line",this.color=new x.Z([0,0,0,1]),this.size=(0,U.Wz)(1),this.border=null}get visible(){return this.size>0&&(0,B.pC)(this.color)&&this.color.a>0}clone(){return new ae({color:(0,w.d9)(this.color),size:this.size,border:(0,w.d9)(this.border)})}};(0,D._)([(0,H.J)({line:"line"},{readOnly:!0})],oe.prototype,"type",void 0),(0,D._)([(0,W.Cb)(ue.a)],oe.prototype,"color",void 0),(0,D._)([(0,W.Cb)(ue.y)],oe.prototype,"size",void 0),(0,D._)([(0,W.Cb)({type:re.a,json:{write:!0}})],oe.prototype,"border",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],oe.prototype,"visible",null),oe=ae=(0,D._)([(0,G.j)("esri.symbols.callouts.LineCallout3D")],oe);const ie=oe},9824:(qe,xe,T)=>{"use strict";T.d(xe,{Pd:()=>U,Uy:()=>w,Y2:()=>Y,as:()=>W,gv:()=>B});var D=T(21779),x=T(17497);function w(H){if(!H)return!1;const G=H.verticalOffset;return!!G&&!(G.screenLength<=0||G.maxWorldLength<=0)}function B(H){if(!H||!H.supportsCallout||!H.supportsCallout())return!1;const G=H.callout;return!!G&&!!G.visible&&!!w(H)}function U(H){return"point-3d"===H.type||"label-3d"===H.type}function W(H){return"center"===H.horizontalAlignment}const Y={types:{key:"type",base:D.Z,typeMap:{line:x.Z}},json:{write:!0}}},80991:(qe,xe,T)=>{"use strict";function x(X,Z,Q,J){return function D(X){return"function"==typeof X}(X)?X(Z,Q,J):X}function w(X){return[X.r,X.g,X.b,X.a]}function B(X,Z,Q){const se=ce=>{let de=ce.length;for(;de--;)if(!" /-,\n".includes(ce.charAt(de)))return!1;return!0},ee=[];let le=0,ne=-1;do{if(ne=Z.indexOf("[",le),ne>=le){if(ne>le){const ce=Z.substr(le,ne-le);ee.push([ce,null,se(ce)])}if(le=ne+1,ne=Z.indexOf("]",le),ne>=le){if(ne>le){const ce=X[Z.substr(le,ne-le)];ce&&ee.push([null,ce,!1])}le=ne+1}}}while(-1!==ne);if(le<Z.length-1){const ce=Z.substr(le);ee.push([ce,null,se(ce)])}return ce=>{let de="",me=null;for(const _e of ee){const[he,ye,fe]=_e;if(he)fe?me=he:(me&&(de+=me,me=null),de+=he);else{const De=ce.attributes[ye];De&&(me&&(de+=me,me=null),de+=De)}}return U(de,Q)}}function U(X,Z){switch("string"!=typeof X&&(X=String(X)),Z){case"LowerCase":return X.toLowerCase();case"Allcaps":return X.toUpperCase();default:return X}}function W(X,Z,Q,J,se,ee,le=!0){const ne=Z/se,ce=Q/ee,de=Math.ceil(ne/2),me=Math.ceil(ce/2);for(let _e=0;_e<ee;_e++)for(let he=0;he<se;he++){const ye=4*(he+(le?ee-_e-1:_e)*se);let fe=0,De=0,ve=0,Ce=0,ge=0,Te=0,Le=0;const je=(_e+.5)*ce;for(let ze=Math.floor(_e*ce);ze<(_e+1)*ce;ze++){const Ee=Math.abs(je-(ze+.5))/me,Ae=(he+.5)*ne,we=Ee*Ee;for(let Be=Math.floor(he*ne);Be<(he+1)*ne;Be++){let Pe=Math.abs(Ae-(Be+.5))/de;const Oe=Math.sqrt(we+Pe*Pe);Oe>=-1&&Oe<=1&&(fe=2*Oe*Oe*Oe-3*Oe*Oe+1,fe>0&&(Pe=4*(Be+ze*Z),Le+=fe*X[Pe+3],ve+=fe,X[Pe+3]<255&&(fe=fe*X[Pe+3]/250),Ce+=fe*X[Pe],ge+=fe*X[Pe+1],Te+=fe*X[Pe+2],De+=fe))}}J[ye]=Ce/De,J[ye+1]=ge/De,J[ye+2]=Te/De,J[ye+3]=Le/ve}}function Y(X){return X?{r:X[0],g:X[1],b:X[2],a:X[3]/255}:{r:0,g:0,b:0,a:0}}function H(X){return X.data?.symbol}function G(X){return"CIMVectorMarker"===X.type||"CIMPictureMarker"===X.type||"CIMBarChartMarker"===X.type||"CIMCharacterMarker"===X.type||"CIMPieChartMarker"===X.type||"CIMStackedBarChartMarker"===X.type}function $(X){return"CIMGradientStroke"===X.type||"CIMPictureStroke"===X.type||"CIMSolidStroke"===X.type}function re(X){return"CIMGradientFill"===X.type||"CIMHatchFill"===X.type||"CIMPictureFill"===X.type||"CIMSolidFill"===X.type||"CIMWaterFill"===X.type}function ue(X){return"CIMMarkerPlacementAlongLineRandomSize"===X.type||"CIMMarkerPlacementAlongLineSameSize"===X.type||"CIMMarkerPlacementAlongLineVariableSize"===X.type||"CIMMarkerPlacementAtExtremities"===X.type||"CIMMarkerPlacementAtMeasuredUnits"===X.type||"CIMMarkerPlacementAtRatioPositions"===X.type||"CIMMarkerPlacementOnLine"===X.type||"CIMMarkerPlacementOnVertices"===X.type}T.d(xe,{Cc:()=>oe,NA:()=>ae,NO:()=>Y,Qs:()=>B,RI:()=>ie,TT:()=>W,X3:()=>U,be:()=>H,gJ:()=>ue,hf:()=>x,k5:()=>re,nn:()=>w,yL:()=>$,zL:()=>G});const ae=X=>isNaN(X)||!X?0:X,oe=X=>{if(!X)return!1;for(const Z of X)switch(Z.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function ie(){return Promise.all([T.e(4918),T.e(8592),T.e(5994)]).then(T.bind(T,32825))}},31184:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var D=T(17626),x=T(91558),w=T(86810),B=T(58817),U=T(23841),W=T(77712),H=(T(90912),T(76898)),G=T(60958);let $=class extends w.wq{constructor(ue){super(ue),this.color=new x.Z([0,0,0,1]),this.extensionLength=0,this.size=(0,U.Wz)(1)}clone(){}cloneProperties(){return{color:(0,B.d9)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,D._)([(0,W.Cb)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],$.prototype,"type",void 0),(0,D._)([(0,W.Cb)(G.a)],$.prototype,"color",void 0),(0,D._)([(0,W.Cb)({...G.y,json:{write:{overridePolicy:ue=>({enabled:!!ue})}}})],$.prototype,"extensionLength",void 0),(0,D._)([(0,W.Cb)(G.y)],$.prototype,"size",void 0),$=(0,D._)([(0,H.j)("esri.symbols.edges.Edges3D")],$);const re=$},2252:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>ue});var $,D=T(17626),Y=(T(63290),T(90912),T(85931),T(8314),T(82255),T(55342)),H=T(76898),G=T(31184);let re=$=class extends G.Z{constructor(ae){super(ae),this.type="solid"}clone(){return new $(this.cloneProperties())}};(0,D._)([(0,Y.J)({solid:"solid"},{readOnly:!0})],re.prototype,"type",void 0),re=$=(0,D._)([(0,H.j)("esri.symbols.support.SolidEdges3D")],re);const ue=re},61261:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var $,D=T(31184),x=T(17626),H=(T(63290),T(90912),T(85931),T(8314),T(82255),T(55342)),G=T(76898);let re=$=class extends D.Z{constructor(ie){super(ie),this.type="sketch"}clone(){return new $(this.cloneProperties())}};(0,x._)([(0,H.J)({sketch:"sketch"},{readOnly:!0})],re.prototype,"type",void 0),re=$=(0,x._)([(0,G.j)("esri.symbols.edges.SketchEdges3D")],re);const ue=re;var ae=T(2252);const oe={types:{key:"type",base:D.Z,typeMap:{solid:ae.Z,sketch:ue}},json:{write:!0}}},38861:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($)}clone(){}};(0,D._)([(0,w.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.symbols.patterns.LinePattern3D")],H);const G=H},63743:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var re,D=T(17626),x=T(2076),w=T(77712),Y=(T(85931),T(8314),T(90912),T(55342)),H=T(76898),G=T(38861);const ue=(0,x.w)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ae=re=class extends G.Z{constructor(ie){super(ie),this.type="style",this.style="solid"}clone(){return new re({style:this.style})}};(0,D._)([(0,w.Cb)({type:["style"]})],ae.prototype,"type",void 0),(0,D._)([(0,Y.J)(ue),(0,w.Cb)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],ae.prototype,"style",void 0),ae=re=(0,D._)([(0,H.j)("esri.symbols.patterns.LineStylePattern3D")],ae);const oe=ae},40249:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.wq{constructor($){super($)}clone(){}};(0,D._)([(0,w.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],H.prototype,"type",void 0),H=(0,D._)([(0,Y.j)("esri.symbols.patterns.Pattern3D")],H);const G=H},153:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898)),Y=T(40249);let $=G=class extends Y.Z{constructor(ue){super(ue),this.type="style",this.style="solid"}clone(){return new G({style:this.style})}};(0,D._)([(0,x.Cb)({type:["style"]})],$.prototype,"type",void 0),(0,D._)([(0,x.Cb)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],$.prototype,"style",void 0),$=G=(0,D._)([(0,W.j)("esri.symbols.patterns.StylePattern3D")],$);const re=$},99255:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>W,q:()=>U});var D=T(38861),x=T(63743),w=T(40249),B=T(153);const U={types:{key:"type",base:w.Z,typeMap:{style:B.Z}},json:{write:!0}},W={types:{key:"type",base:D.Z,typeMap:{style:x.Z}},json:{write:!0}}},82706:(qe,xe,T)=>{"use strict";T.d(xe,{ZP:()=>le});var oe,D=T(17626),x=T(2076),w=T(86810),B=T(62208),U=T(77712),G=(T(85931),T(8314),T(90912),T(68653)),$=T(76898),re=T(99433),ue=T(15861),ae=T(36630);let ie=oe=class extends w.wq{collectRequiredFields(ne,ce){var de=this;return(0,ue.Z)(function*(){return(0,ae.io)(ne,ce,de.expression)})()}clone(){return new oe({expression:this.expression,title:this.title})}equals(ne){return this.expression===ne.expression&&this.title===ne.title}};(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ie.prototype,"expression",void 0),(0,D._)([(0,U.Cb)({type:String,json:{write:!0}})],ie.prototype,"title",void 0),ie=oe=(0,D._)([(0,$.j)("esri.layers.support.FeatureExpressionInfo")],ie);const X=ie;var Q,Z=T(29505);const J=(0,x.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),se=new x.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ee=Q=class extends w.wq{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(ne,ce){return ne??(ce.featureExpression&&0===ce.featureExpression.value?{expression:"0"}:void 0)}writeFeatureExpressionInfo(ne,ce,de,me){ce[de]=ne.write({},me),"0"===ne.expression&&(ce.featureExpression={value:0})}get mode(){const{offset:ne,featureExpressionInfo:ce}=this;return this._isOverridden("mode")?this._get("mode"):(0,B.pC)(ne)||ce?"relative-to-ground":"on-the-ground"}set mode(ne){this._override("mode",ne)}set unit(ne){this._set("unit",ne)}write(ne,ce){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(ne,ce):null}clone(){return new Q({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(ne){return this.mode===ne.mode&&this.offset===ne.offset&&this.unit===ne.unit&&(0,B._W)(this.featureExpressionInfo,ne.featureExpressionInfo)}};(0,D._)([(0,U.Cb)({type:X,json:{write:!0}})],ee.prototype,"featureExpressionInfo",void 0),(0,D._)([(0,G.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ee.prototype,"readFeatureExpressionInfo",null),(0,D._)([(0,re.c)("featureExpressionInfo",{featureExpressionInfo:{type:X},"featureExpression.value":{type:[0]}})],ee.prototype,"writeFeatureExpressionInfo",null),(0,D._)([(0,U.Cb)({type:J.apiValues,nonNullable:!0,json:{type:J.jsonValues,read:J.read,write:{writer:J.write,isRequired:!0}}})],ee.prototype,"mode",null),(0,D._)([(0,U.Cb)({type:Number,json:{write:!0}})],ee.prototype,"offset",void 0),(0,D._)([(0,U.Cb)({type:Z.f9,json:{type:String,read:se.read,write:se.write}})],ee.prototype,"unit",null),ee=Q=(0,D._)([(0,$.j)("esri.layers.support.ElevationInfo")],ee);const le=ee},33215:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>Z,b:()=>X});var oe,D=T(17626),x=T(2076),w=T(86810),B=T(21726),U=T(77712),G=(T(85931),T(8314),T(90912),T(55342)),$=T(68653),re=T(76898),ue=T(99433),ae=T(29840);const ie=(0,x.w)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let X=oe=class extends w.wq{constructor(Q){super(Q)}readHref(Q,J,se){return Q?(0,ae.f)(Q,se):J.dataURI}writeHref(Q,J,se,ee){Q&&((0,B.HK)(Q)?J.dataURI=Q:(J.href=(0,ae.t)(Q,ee),(0,B.YP)(J.href)&&(J.href=(0,B.Fv)(J.href))))}clone(){return new oe({href:this.href,primitive:this.primitive})}};(0,D._)([(0,U.Cb)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],X.prototype,"href",void 0),(0,D._)([(0,$.r)("href")],X.prototype,"readHref",null),(0,D._)([(0,ue.c)("href",{href:{type:String},dataURI:{type:String}})],X.prototype,"writeHref",null),(0,D._)([(0,G.J)(ie)],X.prototype,"primitive",void 0),X=oe=(0,D._)([(0,re.j)("esri.symbols.support.IconSymbol3DLayerResource")],X);const Z="circle"},48521:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>oe,k:()=>ae});var re,D=T(17626),x=T(2076),w=T(86810),B=T(77712),H=(T(85931),T(8314),T(90912),T(55342)),G=T(76898),$=T(29840);const ue=(0,x.w)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ae=re=class extends w.wq{clone(){return new re({href:this.href,primitive:this.primitive})}};(0,D._)([(0,B.Cb)({type:String,json:{read:$.r,write:$.w}})],ae.prototype,"href",void 0),(0,D._)([(0,H.J)(ue)],ae.prototype,"primitive",void 0),ae=re=(0,D._)([(0,G.j)("esri.symbols.support.ObjectSymbol3DLayerResource")],ae);const oe="sphere"},77345:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>re});var G,D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(84687);let $=G=class extends x.Z{constructor(){super(...arguments),this.portal=null}clone(){return new G({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,D._)([(0,w.Cb)({type:String})],$.prototype,"name",void 0),(0,D._)([(0,w.Cb)({type:String})],$.prototype,"styleUrl",void 0),(0,D._)([(0,w.Cb)({type:String})],$.prototype,"styleName",void 0),(0,D._)([(0,w.Cb)({type:H.Z})],$.prototype,"portal",void 0),$=G=(0,D._)([(0,Y.j)("esri.symbols.support.StyleOrigin")],$);const re=$},37519:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>G});var H,D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.Z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new H({x:this.x,y:this.y})}};(0,D._)([(0,w.Cb)({type:Number})],G.prototype,"x",void 0),(0,D._)([(0,w.Cb)({type:Number})],G.prototype,"y",void 0),G=H=(0,D._)([(0,Y.j)("esri.symbols.support.Symbol3DAnchorPosition2D")],G)},64830:(qe,xe,T)=>{"use strict";T.d(xe,{b:()=>re});var $,D=T(17626),x=T(86810),w=T(62208),B=T(77712),H=(T(85931),T(8314),T(90912),T(76898)),G=T(60958);let re=$=class extends x.wq{constructor(ue){super(ue),this.color=null}clone(){const ue={color:(0,w.pC)(this.color)?this.color.clone():null};return new $(ue)}};(0,D._)([(0,B.Cb)(G.a)],re.prototype,"color",void 0),re=$=(0,D._)([(0,H.j)("esri.symbols.support.Symbol3DMaterial")],re)},97595:(qe,xe,T)=>{"use strict";T.d(xe,{_:()=>$});var G,D=T(17626),x=T(86810),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898)),H=T(60958);let $=G=class extends x.wq{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new G({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,D._)([(0,w.Cb)(H.y)],$.prototype,"screenLength",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0,default:0}})],$.prototype,"minWorldLength",void 0),(0,D._)([(0,w.Cb)({type:Number,json:{write:!0}})],$.prototype,"maxWorldLength",void 0),$=G=(0,D._)([(0,Y.j)("esri.symbols.support.Symbol3DVerticalOffset")],$)},96296:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>G});var H,D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let G=H=class extends x.Z{clone(){return new H({url:this.url})}};(0,D._)([(0,w.Cb)({type:String})],G.prototype,"url",void 0),G=H=(0,D._)([(0,Y.j)("esri.symbols.support.Thumbnail")],G)},56445:(qe,xe,T)=>{"use strict";T.d(xe,{FW:()=>Y,PI:()=>B,ZB:()=>ae,iW:()=>$,kW:()=>w});var D=T(91558),x=T(80991);function w(Z){const Q=(0,x.be)(Z);if("CIMTextSymbol"===Q.type)return Q.height;let J=0;if(Q.symbolLayers)for(const se of Q.symbolLayers)(0,x.zL)(se)&&se.size>J?J=se.size:(0,x.yL)(se)&&se.width>J?J=se.width:(0,x.k5)(se);return J}function B(Z,Q,J){const se=(0,x.be)(Z),ee=w(Z);0!==ee?W(se,Q/ee,!1,J):function U(Z,Q){if("CIMTextSymbol"!==Z.type){if(Z.symbolLayers)for(const J of Z.symbolLayers)switch(J.type){case"CIMPictureMarker":case"CIMVectorMarker":J.size=Q;break;case"CIMPictureStroke":case"CIMSolidStroke":J.width=Q}}else Z.height=Q}(se,Q)}function W(Z,Q,J,se){if("CIMTextSymbol"!==Z.type){if(J&&Z.effects)for(const ee of Z.effects)G(ee,Q);if(Z.symbolLayers)for(const ee of Z.symbolLayers)switch(ee.type){case"CIMPictureMarker":case"CIMVectorMarker":Y(ee,Q,se);break;case"CIMPictureStroke":case"CIMSolidStroke":!se?.preserveOutlineWidth&&ee.width&&(ee.width*=Q);break;case"CIMPictureFill":ee.height&&(ee.height*=Q),ee.offsetX&&(ee.offsetX*=Q),ee.offsetY&&(ee.offsetY*=Q);break;case"CIMHatchFill":W(ee.lineSymbol,Q,!0,{...se,preserveOutlineWidth:!1}),ee.offsetX&&(ee.offsetX*=Q),ee.offsetY&&(ee.offsetY*=Q),ee.separation&&(ee.separation*=Q)}}else Z.height*=Q}function Y(Z,Q,J){if(Z.markerPlacement&&function H(Z,Q){switch((0,x.gJ)(Z)&&Z.offset&&(Z.offset*=Q),Z.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(Z.customEndingOffset&&(Z.customEndingOffset*=Q),Z.offsetAlongLine&&(Z.offsetAlongLine*=Q),Z.placementTemplate&&Z.placementTemplate.length){const J=Z.placementTemplate.map(se=>se*Q);Z.placementTemplate=J}break;case"CIMMarkerPlacementAlongLineVariableSize":if(Z.maxRandomOffset&&(Z.maxRandomOffset*=Q),Z.placementTemplate&&Z.placementTemplate.length){const J=Z.placementTemplate.map(se=>se*Q);Z.placementTemplate=J}break;case"CIMMarkerPlacementOnLine":Z.startPointOffset&&(Z.startPointOffset*=Q);break;case"CIMMarkerPlacementAtExtremities":Z.offsetAlongLine&&(Z.offsetAlongLine*=Q);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":Z.beginPosition&&(Z.beginPosition*=Q),Z.endPosition&&(Z.endPosition*=Q);break;case"CIMMarkerPlacementPolygonCenter":Z.offsetX&&(Z.offsetX*=Q),Z.offsetY&&(Z.offsetY*=Q);break;case"CIMMarkerPlacementInsidePolygon":Z.offsetX&&(Z.offsetX*=Q),Z.offsetY&&(Z.offsetY*=Q),Z.stepX&&(Z.stepX*=Q),Z.stepY&&(Z.stepY*=Q)}}(Z.markerPlacement,Q),Z.offsetX&&(Z.offsetX*=Q),Z.offsetY&&(Z.offsetY*=Q),Z.anchorPoint&&"Absolute"===Z.anchorPointUnits&&(Z.anchorPoint={x:Z.anchorPoint.x*Q,y:Z.anchorPoint.y*Q}),Z.size*=Q,"CIMVectorMarker"===Z.type&&Z.markerGraphics)for(const se of Z.markerGraphics)Z.scaleSymbolsProportionally||W(se.symbol,Q,!0,J)}function G(Z,Q){switch(Z.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":Z.width&&(Z.width*=Q);break;case"CIMGeometricEffectBuffer":Z.size&&(Z.size*=Q);break;case"CIMGeometricEffectCut":Z.beginCut&&(Z.beginCut*=Q),Z.endCut&&(Z.endCut*=Q),Z.middleCut&&(Z.middleCut*=Q);break;case"CIMGeometricEffectDashes":if(Z.customEndingOffset&&(Z.customEndingOffset*=Q),Z.offsetAlongLine&&(Z.offsetAlongLine*=Q),Z.dashTemplate&&Z.dashTemplate.length){const J=Z.dashTemplate.map(se=>se*Q);Z.dashTemplate=J}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":Z.length&&(Z.length*=Q);break;case"CIMGeometricEffectMove":Z.offsetX&&(Z.offsetX*=Q),Z.offsetY&&(Z.offsetY*=Q);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":Z.offset&&(Z.offset*=Q);break;case"CIMGeometricEffectRegularPolygon":Z.radius&&(Z.radius*=Q);break;case"CIMGeometricEffectTaperedPolygon":Z.fromWidth&&(Z.fromWidth*=Q),Z.length&&(Z.length*=Q),Z.toWidth&&(Z.toWidth*=Q);break;case"CIMGeometricEffectWave":Z.amplitude&&(Z.amplitude*=Q),Z.period&&(Z.period*=Q)}}function $(Z){const Q=[];return re((0,x.be)(Z),Q),Q.length?new D.Z((0,x.NO)(Q[0])):null}function re(Z,Q){let J;J="CIMTextSymbol"===Z.type?Z.symbol:Z;const se="CIMPolygonSymbol"===Z.type;if(J.symbolLayers)for(const ee of J.symbolLayers)if(!(ee.colorLocked||se&&((0,x.yL)(ee)||(0,x.zL)(ee)&&ee.markerPlacement&&(0,x.gJ)(ee.markerPlacement))))switch(ee.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":ee.tintColor&&ue(Q,ee.tintColor);break;case"CIMVectorMarker":ee.markerGraphics.forEach(le=>{re(le.symbol,Q)});break;case"CIMSolidStroke":case"CIMSolidFill":ue(Q,ee.color);break;case"CIMHatchFill":re(ee.lineSymbol,Q)}}function ue(Z,Q){for(const J of Z)if(J.join(".")===Q.join("."))return;Z.push(Q)}function ae(Z,Q,J){Q instanceof D.Z||(Q=new D.Z(Q));const se=(0,x.be)(Z);se&&oe(se,Q,J)}function oe(Z,Q,J){let se;se="CIMTextSymbol"===Z.type?Z.symbol:Z;const ee="CIMPolygonSymbol"===se.type;if(se.symbolLayers)for(const le of se.symbolLayers){if(le.colorLocked)continue;if(ee)if(J){const{layersToColor:ce}=J;if(((0,x.yL)(le)||(0,x.zL)(le)&&le.markerPlacement&&(0,x.gJ)(le.markerPlacement))&&"fill"===ce||(0,x.k5)(le)&&"outline"===ce)continue}else if((0,x.yL)(le)||(0,x.zL)(le)&&le.markerPlacement&&(0,x.gJ)(le.markerPlacement))continue;const ne=Q.toArray();switch(le.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":le.tintColor=ne;break;case"CIMVectorMarker":le.markerGraphics.forEach(ce=>{oe(ce.symbol,Q,J)});break;case"CIMSolidStroke":case"CIMSolidFill":le.color=ne;break;case"CIMHatchFill":oe(le.lineSymbol,Q,J)}}}},12948:(qe,xe,T)=>{"use strict";T.d(xe,{ix:()=>x,l9:()=>B,rx:()=>U});var D=T(91558);const x=new D.Z("white"),B=(new D.Z("black"),new D.Z([255,255,255,0]));function U(W){return 0===W.r&&0===W.g&&0===W.b}},8080:(qe,xe,T)=>{"use strict";T.d(xe,{CJ:()=>H,Rz:()=>$,xA:()=>Y,z3:()=>G}),T(8314);var x=T(88493),w=T(52068),B=T(57213),U=T(35540),W=T(24837);const Y=B.Z.fromJSON(W.I4),H=w.Z.fromJSON(W.ET),G=x.Z.fromJSON(W.lF),$=U.Z.fromJSON(W.qP);B.Z.fromJSON(W.eG),w.Z.fromJSON(W.wW),x.Z.fromJSON(W.lj)},24837:(qe,xe,T)=>{"use strict";T.d(xe,{ET:()=>B,I4:()=>w,SQ:()=>D,X1:()=>x,eG:()=>Y,lF:()=>U,lj:()=>G,qP:()=>W,wW:()=>H});const D=[252,146,31,255],x=[153,153,153,255],w={type:"esriSMS",style:"esriSMSCircle",size:6,color:D,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},B={type:"esriSLS",style:"esriSLSSolid",width:.75,color:D},U={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},W={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Y={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},H={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},G={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},74741:(qe,xe,T)=>{"use strict";T.d(xe,{Ne:()=>ne,Od:()=>se,Sp:()=>le,_M:()=>J,mx:()=>ee});var D=T(54346),x=T(91558),w=T(84792),B=T(78498),U=T(23841),W=T(56445);const Y="picture-fill",H="simple-fill",$="simple-marker",ie=new B.Z(1e3);function J(ce){const de=ce.style;let me=null;if(ce)switch(ce.type){case $:"cross"!==de&&"x"!==de&&(me=ce.color);break;case H:"solid"===de?me=ce.color:"none"!==de&&(me={type:"pattern",x:0,y:0,src:(0,D.V)(`esri/symbols/patterns/${de}.png`),width:5,height:5});break;case Y:me={type:"pattern",src:ce.url,width:(0,U.F2)(ce.width)*ce.xscale,height:(0,U.F2)(ce.height)*ce.yscale,x:(0,U.F2)(ce.xoffset),y:(0,U.F2)(ce.yoffset)};break;case"text":me=ce.color;break;case"cim":me=(0,W.iW)(ce)}return me}function se(ce,de){const me=ce+"-"+de;return void 0!==ie.get(me)?Promise.resolve(ie.get(me)):(0,w.default)(ce,{responseType:"image"}).then(_e=>{const he=_e.data,ye=he.naturalWidth,fe=he.naturalHeight,De=document.createElement("canvas");De.width=ye,De.height=fe;const ve=De.getContext("2d");ve.fillStyle=de,ve.fillRect(0,0,ye,fe),ve.globalCompositeOperation="destination-in",ve.drawImage(he,0,0);const Ce=De.toDataURL();return ie.put(me,Ce),Ce})}function ee(ce){if(!ce)return null;let de;switch(ce.type){case H:case Y:case $:de=ee(ce.outline);break;case"simple-line":{const me=(0,U.F2)(ce.width);"none"!==ce.style&&0!==me&&(de={color:ce.color,style:le(ce.style),width:me,cap:ce.cap,join:"miter"===ce.join?(0,U.F2)(ce.miterLimit):ce.join});break}default:de=null}return de}const le=(()=>{const ce={};return de=>{if(ce[de])return ce[de];const me=de.replace(/-/g,"");return ce[de]=me,me}})(),ne=new x.Z([128,128,128])},9461:(qe,xe,T)=>{"use strict";T.d(xe,{cW:()=>H,im:()=>ue,vX:()=>G});var D=T(20383),x=T(26584),w=T(62208),B=T(39368),U=T(70137),W=T(12874);const Y=["building-scene","integrated-mesh","point-cloud","scene"];function H(ae,oe,ie,X){const Z=re(ae,{},{context:X,isLabelSymbol:!1});(0,w.pC)(Z)&&(oe[ie]=Z)}function G(ae,oe,ie,X){const Z=re(ae,{},{context:X,isLabelSymbol:!0});(0,w.pC)(Z)&&(oe[ie]=Z)}function $(ae){return ae instanceof B.Z||ae instanceof W.Z}function re(ae,oe,ie){if((0,w.Wi)(ae))return null;const{context:X,isLabelSymbol:Z}=ie,Q=X?.origin,J=X?.messages;if("web-scene"===Q&&!$(ae)){const se=(0,U.q)(ae,{retainCIM:!0,hasLabelingContext:Z});return(0,w.pC)(se.symbol)?se.symbol.write(oe,X):(J?.push(new x.Z("symbol:unsupported",`Symbols of type '${ae.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:ae,context:X,error:se.error})),null)}return("web-map"===Q||"portal-item"===Q&&!Y.includes(X?.layer?.type))&&$(ae)?(J?.push(new x.Z("symbol:unsupported",`Symbols of type '${ae.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:ae,context:X})),null):ae.write(oe,X)}function ue(ae,oe){return(0,D.S9)(ae,null,oe)}},67866:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>D,k:()=>x});const D=["begin","end","begin-end"],x=["arrow","circle","square","diamond","cross","x"]},60958:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>Y,y:()=>H});var D=T(91558),x=T(23841),w=T(90912),B=T(92236);const Y={type:D.Z,json:{type:[w.z8],default:null,read:{source:["color","transparency"],reader:function U(G,$){const re=null!=$.transparency?(0,B.b)($.transparency):1,ue=$.color;return ue&&Array.isArray(ue)?new D.Z([ue[0]||0,ue[1]||0,ue[2]||0,re]):null}},write:{target:{color:{type:[w.z8]},transparency:{type:w.z8}},writer:function W(G,$){$.color=G.toJSON().slice(0,3);const re=(0,B.a)(G.a);0!==re&&($.transparency=re)}}}},H={type:Number,cast:x.t_,json:{write:!0}}},66960:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{getPatternDescriptor:()=>he,getSizeFromOptions:()=>Le,getSymbolLayerFill:()=>_e,previewSymbol3D:()=>Be});var D=T(15861),x=T(54346),w=T(78260),U=(T(8314),T(26584)),W=T(63290),Y=T(62208),H=T(10699),G=T(23841),$=T(74741),re=T(33215),ue=T(48521),ae=T(71131),oe=T(34057),ie=T(86606),X=T(50998);const Z=ae.b_.size,Q=ae.b_.maxSize,J=ae.b_.maxOutlineSize,se=ae.b_.lineWidth,ee=ae.b_.tallSymbolWidth,le=W.Z.getLogger("esri.symbols.support.previewSymbol3D");function ne(Pe){const Oe=Pe.outline,Ke=(0,Y.pC)(Pe.material)?Pe.material.color:null,Ve=(0,Y.pC)(Ke)?Ke.toHex():null;if((0,Y.Wi)(Oe)||"pattern"in Oe&&(0,Y.pC)(Oe.pattern)&&"style"===Oe.pattern.type&&"none"===Oe.pattern.style)return"fill"===Pe.type&&"#ffffff"===Ve?{color:"#bdc3c7",width:.75}:null;const Ne=(0,G.F2)(Oe.size)||0;return{color:"rgba("+((0,Y.pC)(Oe.color)?Oe.color.toRgba():"255,255,255,1")+")",width:Math.min(Ne,J),style:"pattern"in Oe&&(0,Y.pC)(Oe.pattern)&&"style"===Oe.pattern.type?(0,$.Sp)(Oe.pattern.style):null,join:"butt",cap:"patternCap"in Oe?Oe.patternCap:"butt"}}function de(Pe,Oe=1){const Ke=Pe.a,Ve=(0,w._Y)(Pe),Ne=Ve.h,Ie=Ve.s/Oe,We=100-(100-Ve.v)/Oe,{r:Se,g:He,b:$e}=(0,w.xr)({h:Ne,s:Ie,v:We});return[Se,He,$e,Ke]}function me(Pe){return"water"===Pe.type?(0,Y.Wi)(Pe.color)?null:Pe.color:(0,Y.Wi)(Pe.material)||(0,Y.Wi)(Pe.material.color)?null:Pe.material.color}function _e(Pe,Oe=0){const Ke=me(Pe);if(!Ke){if("fill"===Pe.type)return null;const Ie=(0,ae.uH)($.Ne.r,Oe);return[Ie,Ie,Ie,100]}const Ve=Ke.toRgba();for(let Ne=0;Ne<3;Ne++)Ve[Ne]=(0,ae.uH)(Ve[Ne],Oe);return Ve}function he(Pe,Oe){return ye.apply(this,arguments)}function ye(){return(ye=(0,D.Z)(function*(Pe,Oe){const Ke=Pe.style;return"none"===Ke?null:{type:"pattern",x:0,y:0,src:yield(0,$.Od)((0,x.V)(`esri/symbols/patterns/${Ke}.png`),Oe.toCss(!0)),width:5,height:5}})).apply(this,arguments)}function fe(Pe){return Pe.outline?ne(Pe):{color:"rgba(0, 0, 0, 1)",width:1.5}}function De(Pe,Oe){const Ke=me(Pe);if(!Ke)return null;let Ve="rgba(";return Ve+=(0,ae.uH)(Ke.r,Oe)+",",Ve+=(0,ae.uH)(Ke.g,Oe)+",",Ve+=(0,ae.uH)(Ke.b,Oe)+",",Ve+Ke.a+");"}function ve(Pe,Oe){const Ke=De(Pe,Oe);return Ke?"pattern"in Pe&&(0,Y.pC)(Pe.pattern)&&"style"===Pe.pattern.type&&"none"===Pe.pattern.style?null:{color:Ke,width:Math.min(Pe.size?(0,G.F2)(Pe.size):.75,J),style:"pattern"in Pe&&(0,Y.pC)(Pe.pattern)&&"style"===Pe.pattern.type?(0,$.Sp)(Pe.pattern.style):null,cap:"cap"in Pe?Pe.cap:null,join:"join"in Pe?"miter"===Pe.join?(0,G.F2)(2):Pe.join:null}:{}}function Ce(Pe,Oe,Ke){const Ve=.75*Ke;return{type:"linear",x1:Ve?.25*Ve:0,y1:Ve?.5*Ve:0,x2:Ve||4,y2:Ve?.5*Ve:4,colors:[{color:Pe,offset:0},{color:Oe,offset:1}]}}function Le(Pe){const Oe="number"==typeof Pe?.size?Pe?.size:null;return Oe?(0,G.F2)(Oe):null}function we(){return(we=(0,D.Z)(function*(Pe,Oe){const Ke="mesh-3d"===Pe.type,Ve=Pe.symbolLayers,Ne=Le(Oe),Ie=Oe&&Oe.maxSize?(0,G.F2)(Oe.maxSize):null,We=Ne||Z,Se=[];let He=0,$e=0,et=!1;for(let nt=0;nt<Ve.length;nt++){const it=Ve.getItemAt(nt),Xe=[];if(Ke&&"fill"!==it.type)continue;const rt=ae.JZ.fill[0];switch(it.type){case"fill":{const Ze=ne(it),lt=Math.min(We,Ie||Q);He=Math.max(He,lt),$e=Math.max($e,lt),et=!0;let st=_e(it,0);const Mt="pattern"in it&&it.pattern,Ft=me(it);!Ke&&(0,Y.pC)(Mt)&&"style"===Mt.type&&"solid"!==Mt.style&&Ft&&(st=yield he(Mt,Ft)),Xe.push({shape:rt,fill:st,stroke:Ze});break}case"line":{const Ze=ve(it,0);if((0,Y.Wi)(Ze))break;const lt={stroke:Ze,shape:rt};He=Math.max(He,Z),$e=Math.max($e,Z),Xe.push(lt);break}case"extrude":{const Ze={join:"round",width:1,...ve(it,-.4)},lt=_e(it,0),st=_e(it,-.2),Mt=Math.min(We,Ie||Q),Ft=(0,ae.EV)(Mt);Ze.width=1,Xe.push({shape:Ft[0],fill:st,stroke:Ze}),Xe.push({shape:Ft[1],fill:st,stroke:Ze}),Xe.push({shape:Ft[2],fill:lt,stroke:Ze});const wt=.7*Z+.5*Mt;He=Math.max(He,Z),$e=Math.max($e,wt);break}case"water":{const Ze=me(it),lt=de(Ze),st=de(Ze,2),Mt=de(Ze,3),Ft=(0,ae.ht)();et=!0,Xe.push({shape:Ft[0],fill:lt}),Xe.push({shape:Ft[1],fill:st}),Xe.push({shape:Ft[2],fill:Mt});const kt=Math.min(We,Ie||Q);He=Math.max(He,kt),$e=Math.max($e,kt);break}}Se.push(Xe)}return(0,oe.w)(Se,[He,$e],{node:Oe&&Oe.node,scale:et,opacity:Oe&&Oe.opacity})})).apply(this,arguments)}function Be(Pe,Oe){if(0===Pe.symbolLayers.length)return Promise.reject(new U.Z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(Pe.type){case"point-3d":return function ze(Pe,Oe){const Ke=Le(Oe),Ve=Oe&&Oe.maxSize?(0,G.F2)(Oe.maxSize):null,Ne=Oe&&Oe.disableUpsampling,Ie=Pe.symbolLayers,We=[];let Se=0,He=0;const $e=Ie.getItemAt(Ie.length-1);let et;return $e&&"icon"===$e.type&&(et=$e.size&&(0,G.F2)($e.size)),Ie.forEach(nt=>{if("icon"!==nt.type&&"object"!==nt.type)return;const it="icon"===nt.type?nt.size&&(0,G.F2)(nt.size):0,Xe=Ke||it?Math.ceil(Math.min(Ke||it,Ve||Q)):Z;if(nt&&nt.resource&&nt.resource.href){const rt=function ce(Pe,Oe){const Ke=Oe&&Oe.resource,Ve=Ke&&Ke.href;if(Pe.thumbnail&&Pe.thumbnail.url)return Promise.resolve(Pe.thumbnail.url);if(Ve&&"object"!==Oe.type)return Promise.resolve((0,ie.nf)(Pe,Oe));const Ne=(0,x.V)("esri/images/Legend/legend3dsymboldefault.png");return Pe.styleOrigin&&(Pe.styleOrigin.styleName||Pe.styleOrigin.styleUrl)?(0,X.resolveWebStyleSymbol)(Pe.styleOrigin,{portal:Pe.styleOrigin.portal},"webRef").catch(Ie=>Ie).then(Ie=>Ie?.thumbnail?.url||Ne):Promise.resolve(Ne)}(Pe,nt).then(Ze=>{const lt=nt.get("material.color"),st=function je(Pe){return"icon"===Pe.type?"multiply":"tint"}(nt);return(0,oe.r)(Ze,Xe,lt,st,Ne)}).then(Ze=>{const lt=Ze.width,st=Ze.height;return Se=Math.max(Se,lt),He=Math.max(He,st),[{shape:{type:"image",x:0,y:0,width:lt,height:st,src:Ze.url},fill:null,stroke:null}]});We.push(rt)}else{let rt=Xe;"icon"===nt.type&&et&&Ke&&(rt=Xe*(it/et));const Ze="tall"===Oe?.symbolConfig||Oe?.symbolConfig?.isTall||"object"===nt.type&&function ge(Pe){const Oe=Pe.depth,Ke=Pe.height,Ve=Pe.width;return Ve&&Oe&&Ke&&Ve===Oe&&Ve<Ke}(nt);Se=Math.max(Se,Ze?ee:rt),He=Math.max(He,rt),We.push(Promise.resolve(function Te(Pe,Oe,Ke){const Ve=[];if(!Pe)return Ve;switch(Pe.type){case"icon":{const We=Oe,Se=Oe;switch(Pe.resource&&Pe.resource.primitive||re.S){case"circle":Ve.push({shape:{type:"circle",cx:0,cy:0,r:.5*Oe},fill:_e(Pe,0),stroke:ne(Pe)});break;case"square":Ve.push({shape:{type:"path",path:[{command:"M",values:[0,Se]},{command:"L",values:[0,0]},{command:"L",values:[We,0]},{command:"L",values:[We,Se]},{command:"Z",values:[]}]},fill:_e(Pe,0),stroke:ne(Pe)});break;case"triangle":Ve.push({shape:{type:"path",path:[{command:"M",values:[0,Se]},{command:"L",values:[.5*We,0]},{command:"L",values:[We,Se]},{command:"Z",values:[]}]},fill:_e(Pe,0),stroke:ne(Pe)});break;case"cross":Ve.push({shape:{type:"path",path:[{command:"M",values:[.5*We,0]},{command:"L",values:[.5*We,Se]},{command:"M",values:[0,.5*Se]},{command:"L",values:[We,.5*Se]}]},stroke:fe(Pe)});break;case"x":Ve.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[We,Se]},{command:"M",values:[We,0]},{command:"L",values:[0,Se]}]},stroke:fe(Pe)});break;case"kite":Ve.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Se]},{command:"L",values:[.5*We,0]},{command:"L",values:[We,.5*Se]},{command:"L",values:[.5*We,Se]},{command:"Z",values:[]}]},fill:_e(Pe,0),stroke:ne(Pe)})}break}case"object":switch(Pe.resource&&Pe.resource.primitive||ue.S){case"cone":{const Ne=Ce(_e(Pe,0),_e(Pe,-.6),Ke?ee:Oe),Ie=(0,ae.TE)(Oe,Ke);Ve.push({shape:Ie[0],fill:Ne}),Ve.push({shape:Ie[1],fill:Ne});break}case"inverted-cone":{const Ne=_e(Pe,0),Ie=Ce(Ne,_e(Pe,-.6),Oe),We=(0,ae.DY)(Oe);Ve.push({shape:We[0],fill:Ie}),Ve.push({shape:We[1],fill:Ne});break}case"cube":{const Ne=(0,ae.Pc)(Oe,Ke);Ve.push({shape:Ne[0],fill:_e(Pe,0)}),Ve.push({shape:Ne[1],fill:_e(Pe,-.3)}),Ve.push({shape:Ne[2],fill:_e(Pe,-.5)});break}case"cylinder":{const Ne=Ce(_e(Pe,0),_e(Pe,-.6),Ke?ee:Oe),Ie=(0,ae.EB)(Oe,Ke);Ve.push({shape:Ie[0],fill:Ne}),Ve.push({shape:Ie[1],fill:Ne}),Ve.push({shape:Ie[2],fill:_e(Pe,0)});break}case"diamond":{const Ne=(0,ae.XX)(Oe);Ve.push({shape:Ne[0],fill:_e(Pe,-.3)}),Ve.push({shape:Ne[1],fill:_e(Pe,0)}),Ve.push({shape:Ne[2],fill:_e(Pe,-.3)}),Ve.push({shape:Ne[3],fill:_e(Pe,-.7)});break}case"sphere":{const Ne=Ce(_e(Pe,0),_e(Pe,-.6));Ne.x1=0,Ne.y1=0,Ne.x2=.25*Oe,Ne.y2=.25*Oe,Ve.push({shape:{type:"circle",cx:0,cy:0,r:.5*Oe},fill:Ne});break}case"tetrahedron":{const Ne=(0,ae.tp)(Oe);Ve.push({shape:Ne[0],fill:_e(Pe,-.3)}),Ve.push({shape:Ne[1],fill:_e(Pe,0)}),Ve.push({shape:Ne[2],fill:_e(Pe,-.6)});break}}}return Ve}(nt,rt,Ze)))}}),(0,H.as)(We).then(nt=>{const it=[];return nt.forEach(Xe=>{Xe.value?it.push(Xe.value):Xe.error&&le.warn("error while building swatchInfo!",Xe.error)}),(0,oe.w)(it,[Se,He],{node:Oe&&Oe.node,scale:!1,opacity:Oe&&Oe.opacity})})}(Pe,Oe);case"line-3d":return function Ee(Pe,Oe){const Ke=Pe.symbolLayers,Ve=[],Ne=(0,ie.YW)(Pe),Ie=Le(Oe),We=(Oe&&Oe.maxSize?(0,G.F2)(Oe.maxSize):null)||J;let Se,He=0,$e=0;return Ke.forEach((et,nt)=>{if(!et||"line"!==et.type&&"path"!==et.type)return;const it=[];switch(et.type){case"line":{const Xe=ve(et,0);if((0,Y.Wi)(Xe))break;const rt=Xe&&Xe.width||0;0===nt&&(Se=rt);const Ze=Math.min(Ie||rt,We),lt=0===nt?Ze:Ie?Ze*(rt/Se):Ze,st=lt>se/2?2*lt:se;$e=Math.max($e,lt),He=Math.max(He,st),Xe.width=lt,it.push({shape:{type:"path",path:[{command:"M",values:[0,.5*$e]},{command:"L",values:[He,.5*$e]}]},stroke:Xe});break}case"path":{const Xe=Math.min(Ie||Z,We),rt=_e(et,0),Ze=_e(et,-.2),lt=De(et,-.4),st=lt?{color:lt,width:1}:{};if("quad"===et.profile){const Mt=et.width,Ft=et.height,kt=(0,ae.eb)(Mt&&Ft?Mt/Ft:1,0===Ft,0===Mt),wt={...st,join:"bevel"};it.push({shape:kt[0],fill:Ze,stroke:wt}),it.push({shape:kt[1],fill:Ze,stroke:wt}),it.push({shape:kt[2],fill:rt,stroke:wt})}else it.push({shape:ae.JZ.pathSymbol3DLayer[0],fill:Ze,stroke:st}),it.push({shape:ae.JZ.pathSymbol3DLayer[1],fill:rt,stroke:st});$e=Math.max($e,Xe),He=$e}}Ve.push(it)}),Promise.resolve((0,oe.w)(Ve,[He,$e],{node:Oe&&Oe.node,scale:Ne,opacity:Oe&&Oe.opacity}))}(Pe,Oe);case"polygon-3d":case"mesh-3d":return function Ae(Pe,Oe){return we.apply(this,arguments)}(Pe,Oe)}return Promise.reject(new U.Z("symbolPreview: swatchInfo3D","symbol not supported."))}},71131:(qe,xe,T)=>{"use strict";T.d(xe,{DY:()=>$,EB:()=>H,EV:()=>U,JZ:()=>w,Pc:()=>Y,TE:()=>G,XX:()=>re,b_:()=>x,dc:()=>oe,eb:()=>B,ht:()=>W,tp:()=>ue,uH:()=>ae});var x,ie,D=T(91558);(ie=x||(x={}))[ie.size=22]="size",ie[ie.lineWidth=50]="lineWidth",ie[ie.maxSize=120]="maxSize",ie[ie.maxOutlineSize=80]="maxOutlineSize",ie[ie.tallSymbolWidth=20]="tallSymbolWidth";const w={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function B(ie,X,Z){const Q=x.size;let J=Q,se=Q;ie<1?J*=.75:ie>1&&(se*=1.25);let ne=Q,ce=Q;return X&&Z&&(J=se=ne=ce=0),[{type:"path",path:[{command:"M",values:[ne,0]},{command:"L",values:[Z?ne:.875*ne,0]},{command:"L",values:[Z?J-.5*ne:0,se-.5*ce]},{command:"L",values:[J-.5*ne,se-.5*ce]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[ne,0]},{command:"L",values:[ne,X?0:.125*ce]},{command:"L",values:[J-.5*ne,X?se-.5*ce:ce]},{command:"L",values:[J-.5*ne,se-.5*ce]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[J-.5*ne,se-.5*ce]},{command:"L",values:[Z?J-.5*ne:0,se-.5*ce]},{command:"L",values:[Z?J-.5*ne:0,X?se-.5*ce:ce]},{command:"L",values:[J-.5*ne,X?se-.5*ce:ce]},{command:"Z",values:[]}]}]}function U(ie){const X=x.size,Z=.5*ie;return[{type:"path",path:[{command:"M",values:[0,.7*X*.5]},{command:"L",values:[.3*X,.7*X]},{command:"L",values:[.3*X,.7*X+Z]},{command:"L",values:[0,.7*X+Z-.7*X*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*X,.7*X]},{command:"L",values:[.3*X,.7*X+Z]},{command:"L",values:[X,Z]},{command:"L",values:[X,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*X,0]},{command:"L",values:[X,0]},{command:"L",values:[.3*X,.7*X]},{command:"L",values:[0,.7*X*.5]},{command:"Z",values:[]}]}]}function W(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function Y(ie,X){let Z=X?x.tallSymbolWidth:ie;const J=X?4:6;Z-=Z<=x.size?.5*J:J;const le=X?.35*Z:.5*Z;return[{type:"path",path:[{command:"M",values:[.5*Z,0]},{command:"L",values:[Z,.5*le]},{command:"L",values:[.5*Z,le]},{command:"L",values:[0,.5*le]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*le]},{command:"L",values:[.5*Z,le]},{command:"L",values:[.5*Z,ie]},{command:"L",values:[0,ie-.5*le]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*Z,le]},{command:"L",values:[.5*Z,ie]},{command:"L",values:[Z,ie-.5*le]},{command:"L",values:[Z,.5*le]},{command:"Z",values:[]}]}]}function H(ie,X){let Z=X?x.tallSymbolWidth:ie;const J=X?4:6;Z-=Z<=x.size?.5*J:J;const se=.5*Z,ee=.15*Z,ne=ie-ee;return[{type:"ellipse",cx:.5*Z,cy:ne,rx:se,ry:ee},{type:"path",path:[{command:"M",values:[0,ee]},{command:"L",values:[0,ne]},{command:"L",values:[Z,ne]},{command:"L",values:[Z,ee]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*Z,cy:ee,rx:se,ry:ee}]}function G(ie,X){let Z=X?x.tallSymbolWidth:ie;const J=X?4:6;Z-=Z<=x.size?.5*J:J;const se=.15*Z,ee=ie-se;return[{type:"ellipse",cx:.5*Z,cy:ee,rx:.5*Z,ry:se},{type:"path",path:[{command:"M",values:[.5*Z,0]},{command:"L",values:[Z,ee]},{command:"L",values:[0,ee]},{command:"Z",values:[]}]}]}function $(ie){let X=ie;X-=X<x.size?3:6;const J=.15*X;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[X,0]},{command:"L",values:[.5*X,ie-J]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*X,cy:0,rx:.5*X,ry:J}]}function re(ie){let X=ie;const Z=ie;X-=X<x.size?2:4;const ee=X,le=Z,ne=Math.floor(ie/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*ee,0]},{command:"L",values:[ee,.5*le-ne]},{command:"L",values:[.45*ee-ne,.5*le+ne]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*ee,0]},{command:"L",values:[.45*ee-ne,.5*le+ne]},{command:"L",values:[0,.5*le-ne]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*le-ne]},{command:"L",values:[.45*ee-ne,.5*le+ne]},{command:"L",values:[.45*ee,Z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*ee,Z]},{command:"L",values:[ee,.5*le-ne]},{command:"L",values:[.45*ee-ne,.5*le+ne]},{command:"Z",values:[]}]}]}function ue(ie){let Q=ie;return Q-=Q<x.size?1:2,[{type:"path",path:[{command:"M",values:[.45*ie,0]},{command:"L",values:[ie,Q]},{command:"L",values:[.45*ie,.6*Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*ie,0]},{command:"L",values:[.45*ie,.6*Q]},{command:"L",values:[0,Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,Q]},{command:"L",values:[.45*ie,.6*Q]},{command:"L",values:[ie,Q]},{command:"Z",values:[]}]}]}function ae(ie,X){return Math.round(Math.min(Math.max(ie+255*X*.75,0),255))}function oe(ie,X){if("type"in ie&&("linear"===ie.type||"pattern"===ie.type))return ie;const Z=new D.Z(ie);return new D.Z([ae(Z.r,X),ae(Z.g,X),ae(Z.b,X),Z.a])}},34057:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>X,w:()=>re});var D=T(24263),x=T(84792),w=T(78260),B=T(26584),U=T(8314),Y=(T(50645),T(62996)),H=T(30695),G=T(86606);const $=(0,Y.E)();function re(Z,Q,J){const se=Math.ceil(Q[0]),ee=Math.ceil(Q[1]);if(!Z.some(ne=>!!ne.length))return null;const le=J&&J.node||document.createElement("div");return null!=J.opacity&&(le.style.opacity=J.opacity.toString()),null!=J.effectView&&(le.style.filter=(0,G.wJ)(J.effectView)),$.append(le,H.KB.bind(null,Z,se,ee,J)),le}function ie(Z,Q,J,se,ee){switch(ee){case"multiply":Z[Q+0]*=J[0],Z[Q+1]*=J[1],Z[Q+2]*=J[2],Z[Q+3]*=J[3];break;default:{const le=(0,w._Y)({r:Z[Q+0],g:Z[Q+1],b:Z[Q+2]});le.h=se.h,le.s=se.s,le.v=le.v/100*se.v;const ne=(0,w.xr)(le);Z[Q+0]=ne.r,Z[Q+1]=ne.g,Z[Q+2]=ne.b,Z[Q+3]*=J[3];break}}}function X(Z,Q,J,se,ee){return function ae(Z,Q,J){return Z?(0,x.default)(Z,{responseType:"image"}).then(se=>{const ee=se.data,le=ee.width,ne=ee.height,ce=le/ne;let de=Q;if(J){const me=Math.max(le,ne);de=Math.min(de,me)}return{image:ee,width:ce<=1?Math.ceil(de*ce):de,height:ce<=1?de:Math.ceil(de/ce)}}):Promise.reject(new B.Z("renderUtils: imageDataSize","href not provided."))}(Z,Q,ee).then(le=>{const ne=le.width?le.width:Q,ce=le.height?le.height:Q;if(le.image&&function oe(Z,Q){return!(!Z||"ignore"===Q||"multiply"===Q&&255===Z.r&&255===Z.g&&255===Z.b&&1===Z.a)}(J,se)){let de=le.image.width,me=le.image.height;(0,U.Z)("edge")&&/\.svg$/i.test(Z)&&(de-=1,me-=1);const _e=function ue(Z,Q){Z=Math.ceil(Z),Q=Math.ceil(Q);const J=document.createElement("canvas");J.width=Z,J.height=Q,J.style.width=Z+"px",J.style.height=Q+"px";const se=J.getContext("2d");return se.clearRect(0,0,Z,Q),se}(ne,ce);_e.drawImage(le.image,0,0,de,me,0,0,ne,ce);const he=_e.getImageData(0,0,ne,ce),ye=[J.r/255,J.g/255,J.b/255,J.a],fe=(0,w._Y)(J);for(let De=0;De<he.data.length;De+=4)ie(he.data,De,ye,fe,se);_e.putImageData(he,0,0),Z=_e.canvas.toDataURL("image/png")}else{const de=D.id&&D.id.findCredential(Z);if(de&&de.token){const me=Z.includes("?")?"&":"?";Z=`${Z}${me}token=${de.token}`}}return{url:Z,width:ne,height:ce}}).catch(()=>({url:Z,width:Q,height:Q}))}},71937:(qe,xe,T)=>{"use strict";T.d(xe,{EJ:()=>J,KV:()=>X,n2:()=>ie,v9:()=>Z,wm:()=>le});var D=T(15861),x=T(84792),w=T(26584),B=T(62208),U=T(10699),W=T(21726),Y=T(84687),H=T(6278),G=T(35560);const $={};function ue(){return(ue=(0,D.Z)(function*(ne,ce){try{return{data:(yield J(ne,ce)).data,baseUrl:(0,W.Yd)(ne),styleUrl:ne}}catch(de){return(0,U.r9)(de),null}})).apply(this,arguments)}function ie(ne,ce,de){return ne.styleUrl?function re(ne,ce){return ue.apply(this,arguments)}(ne.styleUrl,de):ne.styleName?function ae(ne,ce,de){const me=(0,B.pC)(ce.portal)?ce.portal:Y.Z.getDefault();let _e;const he=`${me.url} - ${me.user&&me.user.username} - ${ne}`;return $[he]||($[he]=function oe(ne,ce,de){return ce.load(de).then(()=>{const me=new H.Z({disableExtraQuery:!0,query:`owner:${se} AND type:${ee} AND typekeywords:"${ne}"`});return ce.queryItems(me,de)}).then(({results:me})=>{let _e=null;const he=ne.toLowerCase();if(me&&Array.isArray(me))for(const ye of me)if(ye.typeKeywords.some(fe=>fe.toLowerCase()===he)&&ye.type===ee&&ye.owner===se){_e=ye;break}if(!_e)throw new w.Z("symbolstyleutils:style-not-found",`The style '${ne}' could not be found`,{styleName:ne});return _e.load(de)})}(ne,me,de).then(ye=>(_e=ye,ye.fetchData())).then(ye=>({data:ye,baseUrl:_e.itemUrl,styleName:ne}))),$[he]}(ne.styleName,ce,de):Promise.reject(new w.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function X(ne){return null===ne||"CIMSymbolReference"===ne.type?ne:{type:"CIMSymbolReference",symbol:ne}}function Z(ne,ce){if("cimRef"===ce)return ne.cimRef;if(ne.formatInfos&&!(0,G.K)())for(const de of ne.formatInfos)if("gltf"===de.type)return de.href;return ne.webRef}function J(ne,ce){const de={responseType:"json",query:{f:"json"},...ce};return(0,x.default)((0,W.Fv)(ne),de)}const se="esri_en",ee="Style",le="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},30695:(qe,xe,T)=>{"use strict";T.d(xe,{A5:()=>ge,KB:()=>ze,al:()=>Te,ch:()=>de,iL:()=>Le,jA:()=>le,kQ:()=>ne,vq:()=>ee});var D=T(91558),x=T(8314),w=T(12225),B=T(31478),W=(T(38570),T(94450));let H=0,G=0;const $=(0,x.Z)("android"),re=(0,x.Z)("chrome")||$&&$>=4?"auto":"optimizeLegibility",ue={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ae=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let oe={},ie={};const X={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},Z=Math.PI;let Q=1;function J(Ee,Ae){const we=Ee*(Z/180);return Math.abs(Ae*Math.sin(we))+Math.abs(Ae*Math.cos(we))}function se(Ee){return Ee.map(Ae=>`${Ae.command} ${Ae.values.join(" ")}`).join(" ").trim()}function ee(Ee,Ae,we,Be){if(Ee){if("circle"===Ee.type)return(0,W.u)("circle",{fill:Ae,"fill-rule":"evenodd",stroke:we.color,"stroke-width":we.width,"stroke-linecap":we.cap,"stroke-linejoin":we.join,"stroke-dasharray":we.dashArray,"stroke-dashoffset":we.dashOffset,"stroke-miterlimit":"4",cx:Ee.cx,cy:Ee.cy,r:Ee.r});if("ellipse"===Ee.type)return(0,W.u)("ellipse",{fill:Ae,"fill-rule":"evenodd",stroke:we.color,"stroke-width":we.width,"stroke-linecap":we.cap,"stroke-linejoin":we.join,"stroke-dasharray":we.dashArray,"stroke-miterlimit":"4",cx:Ee.cx,cy:Ee.cy,rx:Ee.rx,ry:Ee.ry});if("rect"===Ee.type)return(0,W.u)("rect",{fill:Ae,"fill-rule":"evenodd",stroke:we.color,"stroke-width":we.width,"stroke-linecap":we.cap,"stroke-linejoin":we.join,"stroke-dasharray":we.dashArray,"stroke-miterlimit":"4",x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height});if("image"===Ee.type)return(0,W.u)("image",{href:Ee.src,x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,preserveAspectRatio:"none"});if("path"===Ee.type){const Pe="string"!=typeof Ee.path?se(Ee.path):Ee.path;return(0,W.u)("path",{fill:Ae,"fill-rule":"evenodd",stroke:we.color,"stroke-width":we.width,"stroke-linecap":we.cap,"stroke-linejoin":we.join,"stroke-dasharray":we.dashArray,"stroke-miterlimit":"4",d:Pe})}if("text"===Ee.type)return(0,W.u)("text",{"alignment-baseline":Be.alignBaseline,fill:Ae,"fill-rule":"evenodd",stroke:we.color,"stroke-width":we.width,"stroke-linecap":we.cap,"stroke-linejoin":we.join,"stroke-dasharray":we.dashArray,"stroke-miterlimit":"4","text-anchor":Be.align,"text-decoration":Be.decoration,kerning:Be.kerning,rotate:Be.rotate,"text-rendering":re,"font-style":Be.font.style,"font-variant":Be.font.variant,"font-weight":Be.font.weight,"font-size":Be.font.size,"font-family":Be.font.family,x:Ee.x,y:Ee.y},Ee.text)}return null}function le(Ee){const Ae={fill:"none",pattern:null,linearGradient:null};if(Ee)if("type"in Ee&&"pattern"===Ee.type){const we="patternId-"+ ++H;Ae.fill=`url(#${we})`,Ae.pattern={id:we,x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,image:{x:0,y:0,width:Ee.width,height:Ee.height,href:Ee.src}}}else if("type"in Ee&&"linear"===Ee.type){const we="linearGradientId-"+ ++G;Ae.fill=`url(#${we})`,Ae.linearGradient={id:we,x1:Ee.x1,y1:Ee.y1,x2:Ee.x2,y2:Ee.y2,stops:Ee.colors.map(Be=>({offset:Be.offset,color:Be.color&&new D.Z(Be.color).toString()}))}}else if(Ee){const we=new D.Z(Ee);Ae.fill=we.toString()}return Ae}function ne(Ee){const Ae={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(Ee&&(null!=Ee.width&&(Ae.width=Ee.width),Ee.cap&&(Ae.cap=Ee.cap),Ee.join&&(Ae.join=Ee.join.toString()),Ee.color&&(Ae.color=new D.Z(Ee.color).toString()),Ee.dashArray&&(Ae.dashArray=Ee.dashArray),Ee.dashArray&&(Ae.dashOffset=Ee.dashoffset),Ee.style)){let we=null;if(Ee.style in X&&(we=X[Ee.style]),Array.isArray(we)){we=we.slice(0);for(let Be=0;Be<we.length;++Be)we[Be]*=Ee.width;if("butt"!==Ee.cap){for(let Be=0;Be<we.length;Be+=2)we[Be]-=Ee.width,we[Be]<1&&(we[Be]=1);for(let Be=1;Be<we.length;Be+=2)we[Be]+=Ee.width}we=we.join(",")}Ae.dashArray=we}return Ae}function ce(Ee,Ae){const we={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return Ee&&(we.align=Ee.align,we.alignBaseline=Ee.alignBaseline,we.decoration=Ee.decoration,we.kerning=Ee.kerning?"auto":"0",we.rotate=Ee.rotated?"90":"0",we.font.style=Ae.style||"normal",we.font.variant=Ae.variant||"normal",we.font.weight=Ae.weight||"normal",we.font.size=Ae.size&&Ae.size.toString()||"10pt",we.font.family=Ae.family||"serif"),we}function de(Ee){const{pattern:Ae,linearGradient:we}=Ee;if(Ae)return(0,W.u)("pattern",{id:Ae.id,patternUnits:"userSpaceOnUse",x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height},(0,W.u)("image",{x:Ae.image.x,y:Ae.image.y,width:Ae.image.width,height:Ae.image.height,href:Ae.image.href}));if(we){const Be=we.stops.map((Pe,Oe)=>(0,W.u)("stop",{key:`${Oe}-stop`,offset:Pe.offset,"stop-color":Pe.color}));return(0,W.u)("linearGradient",{id:we.id,gradientUnits:"userSpaceOnUse",x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2},Be)}return null}function me(Ee,Ae){if(!Ee)return null;const we=[];for(const Be of Ee){const{shape:Pe,fill:Oe,stroke:Ke,font:Ve}=Be,Ne=le(Oe),Ie=ne(Ke),We="text"===Pe.type?ce(Pe,Ve):null;we.push(ee(Pe,Ne.fill,Ie,We))}return(0,W.u)("mask",{id:Ae,maskUnits:"userSpaceOnUse"},(0,W.u)("g",null,we))}function _e(Ee,Ae,we){return(0,B.t)(Ee,(0,B.i)(Ee),[Ae,we])}function he(Ee,Ae,we,Be,Pe){return(0,B.s)(Ee,(0,B.i)(Ee),[Ae,we]),Ee[4]=Ee[4]*Ae-Be*Ae+Be,Ee[5]=Ee[5]*we-Pe*we+Pe,Ee}function fe(Ee,Ae){oe&&"left"in oe?(oe.left>Ee&&(oe.left=Ee),oe.right<Ee&&(oe.right=Ee),oe.top>Ae&&(oe.top=Ae),oe.bottom<Ae&&(oe.bottom=Ae)):oe={left:Ee,bottom:Ae,right:Ee,top:Ae}}function De(Ee){const Ae=Ee.args,we=Ae.length;let Be;switch(Ee.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(Be=0;Be<we;Be+=2)fe(Ae[Be],Ae[Be+1]);ie.x=Ae[we-2],ie.y=Ae[we-1];break;case"H":for(Be=0;Be<we;++Be)fe(Ae[Be],ie.y);ie.x=Ae[we-1];break;case"V":for(Be=0;Be<we;++Be)fe(ie.x,Ae[Be]);ie.y=Ae[we-1];break;case"m":{let Pe=0;for(("x"in ie||(fe(ie.x=Ae[0],ie.y=Ae[1]),Pe=2),Be=Pe);Be<we;Be+=2)fe(ie.x+=Ae[Be],ie.y+=Ae[Be+1]);break}case"l":case"t":for(Be=0;Be<we;Be+=2)fe(ie.x+=Ae[Be],ie.y+=Ae[Be+1]);break;case"h":for(Be=0;Be<we;++Be)fe(ie.x+=Ae[Be],ie.y);break;case"v":for(Be=0;Be<we;++Be)fe(ie.x,ie.y+=Ae[Be]);break;case"c":for(Be=0;Be<we;Be+=6)fe(ie.x+Ae[Be],ie.y+Ae[Be+1]),fe(ie.x+Ae[Be+2],ie.y+Ae[Be+3]),fe(ie.x+=Ae[Be+4],ie.y+=Ae[Be+5]);break;case"s":case"q":for(Be=0;Be<we;Be+=4)fe(ie.x+Ae[Be],ie.y+Ae[Be+1]),fe(ie.x+=Ae[Be+2],ie.y+=Ae[Be+3]);break;case"A":for(Be=0;Be<we;Be+=7)fe(Ae[Be+5],Ae[Be+6]);ie.x=Ae[we-2],ie.y=Ae[we-1];break;case"a":for(Be=0;Be<we;Be+=7)fe(ie.x+=Ae[Be+5],ie.y+=Ae[Be+6])}}function ve(Ee,Ae,we){const Be=ue[Ee.toLowerCase()];let Pe;"number"==typeof Be&&(Be?Ae.length>=Be&&(Pe={action:Ee,args:Ae.slice(0,Ae.length-Ae.length%Be)},we.push(Pe),De(Pe)):(Pe={action:Ee,args:[]},we.push(Pe),De(Pe)))}function ge(Ee){const Ae={x:0,y:0,width:0,height:0};if("circle"===Ee.type)Ae.x=Ee.cx-Ee.r,Ae.y=Ee.cy-Ee.r,Ae.width=2*Ee.r,Ae.height=2*Ee.r;else if("ellipse"===Ee.type)Ae.x=Ee.cx-Ee.rx,Ae.y=Ee.cy-Ee.ry,Ae.width=2*Ee.rx,Ae.height=2*Ee.ry;else if("image"===Ee.type||"rect"===Ee.type)Ae.x=Ee.x,Ae.y=Ee.y,Ae.width=Ee.width,Ae.height=Ee.height;else if("path"===Ee.type){const we=function Ce(Ee){const Ae=("string"!=typeof Ee.path?se(Ee.path):Ee.path).match(ae),we=[];if(oe={},ie={},!Ae)return null;let Be="",Pe=[];const Oe=Ae.length;for(let Ve=0;Ve<Oe;++Ve){const Ne=Ae[Ve],Ie=parseFloat(Ne);isNaN(Ie)?(Be&&ve(Be,Pe,we),Pe=[],Be=Ne):Pe.push(Ie)}ve(Be,Pe,we);const Ke={x:0,y:0,width:0,height:0};return oe&&"left"in oe&&(Ke.x=oe.left,Ke.y=oe.top,Ke.width=oe.right-oe.left,Ke.height=oe.bottom-oe.top),Ke}(Ee);Ae.x=we.x,Ae.y=we.y,Ae.width=we.width,Ae.height=we.height}return Ae}function Te(Ee){const Ae={x:0,y:0,width:0,height:0};let we=null,Be=Number.NEGATIVE_INFINITY,Pe=Number.NEGATIVE_INFINITY;for(const Oe of Ee)we?(we.x=Math.min(we.x,Oe.x),we.y=Math.min(we.y,Oe.y),Be=Math.max(Be,Oe.x+Oe.width),Pe=Math.max(Pe,Oe.y+Oe.height)):(we=Ae,we.x=Oe.x,we.y=Oe.y,Be=Oe.x+Oe.width,Pe=Oe.y+Oe.height);return we&&(we.width=Be-we.x,we.height=Pe-we.y),we}function Le(Ee,Ae,we,Be,Pe,Oe,Ke,Ve,Ne){let Ie=(Ke&&Oe?J(Oe,Ae):Ae)/2,We=(Ke&&Oe?J(Oe,we):we)/2;if(Ne){const rt=Ne[0],Ze=Ne[1];Ie=(Ke&&Oe?J(Oe,rt):rt)/2,We=(Ke&&Oe?J(Oe,Ze):Ze)/2}const Se=Ee.width+Be,He=Ee.height+Be,$e=(0,w.c)(),et=(0,w.c)();let nt=!1;if(Pe&&0!==Se&&0!==He){const rt=Ae!==we?Ae/we:Se/He,Ze=Ae>we?Ae:we;let lt=1,st=1;isNaN(Ze)||(rt>1?(lt=Ze/Se,st=Ze/rt/He):(st=Ze/He,lt=Ze*rt/Se)),(0,B.m)(et,et,he($e,lt,st,Ie,We)),nt=!0}const it=Ee.x+(Se-Be)/2,Xe=Ee.y+(He-Be)/2;if((0,B.m)(et,et,_e($e,Ie-it,We-Xe)),!nt&&(Se>Ae||He>we)){const rt=Se/Ae>He/we,Ze=(rt?Ae:we)/(rt?Se:He);(0,B.m)(et,et,he($e,Ze,Ze,it,Xe))}return Oe&&(0,B.m)(et,et,function ye(Ee,Ae,we,Be){const Pe=Ae%360*Math.PI/180;(0,B.r)(Ee,(0,B.i)(Ee),Pe);const Oe=Math.cos(Pe),Ke=Math.sin(Pe),Ve=Ee[4],Ne=Ee[5];return Ee[4]=Ve*Oe-Ne*Ke+Be*Ke-we*Oe+we,Ee[5]=Ne*Oe+Ve*Ke-we*Ke-Be*Oe+Be,Ee}($e,Oe,it,Xe)),Ve&&(0,B.m)(et,et,_e($e,Ve[0],Ve[1])),`matrix(${et[0]},${et[1]},${et[2]},${et[3]},${et[4]},${et[5]})`}function ze(Ee,Ae,we,Be={}){const Pe=[],Oe=[],Ke=++Q,Ve=function je(Ee,Ae,we){const Be=Ee?.effects.find(Ie=>"bloom"===Ie.type);if(!Be)return null;const{strength:Pe,radius:Oe}=Be,Ke=Pe>0?Oe:0,Ve=(Pe+Ke)*Ae,Ne=4*Pe+1;return(0,W.u)("filter",{id:`bloom${we}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},(0,W.u)("feMorphology",{operator:"dilate",radius:(Pe+.5*Ke)*(5**(Ae/100)*(.4+Ae/100)),in:"SourceGraphic",result:"dilate"}),(0,W.u)("feGaussianBlur",{in:"dilate",stdDeviation:Ve/25,result:"blur"}),(0,W.u)("feGaussianBlur",{in:"blur",stdDeviation:Ve/50,result:"intensityBlur"}),(0,W.u)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,W.u)("feFuncR",{type:"linear",slope:Ne}),(0,W.u)("feFuncG",{type:"linear",slope:Ne}),(0,W.u)("feFuncB",{type:"linear",slope:Ne})),(0,W.u)("feMerge",null,(0,W.u)("feMergeNode",{in:"intensityBlur"}),(0,W.u)("feMergeNode",{in:"intensityBrightness"}),(0,W.u)("feGaussianBlur",{stdDeviation:Pe/10})))}(Be.effectView,Ae,Ke);let Ne=null;if(Ve){const Ie=Be.effectView?.effects.find($e=>"bloom"===$e.type),We=(Ie.strength?Ie.strength+Ie.radius/2:0)/3,He=we+we*We;Ne=[Math.max(Ae+Ae*We,10),Math.max(He,10)]}for(let Ie=0;Ie<Ee.length;Ie++){const We=Ee[Ie],Se=[],He=[];let $e=0,et=0,nt=0;for(const rt of We){const{shape:Ze,fill:lt,stroke:st,font:Mt,offset:Ft}=rt;Be.ignoreStrokeWidth||($e+=st&&st.width||0);const kt=le(lt),wt=ne(st),zt="text"===Ze.type?ce(Ze,Mt):null;Pe.push(de(kt)),Se.push(ee(Ze,kt.fill,wt,zt)),He.push(ge(Ze)),Ft&&(et+=Ft[0],nt+=Ft[1])}const it=Le(Te(He),Ae,we,$e,Be.scale,Be.rotation,Be.useRotationSize,[et,nt],Ne);let Xe=null;if(Be.masking){const rt=`mask-${Ie}`;Pe.push(me(Be.masking[Ie],rt)),Xe=`url(#${rt})`}Oe.push(Xe?(0,W.u)("g",{mask:Xe},(0,W.u)("g",{transform:it},Se)):(0,W.u)("g",{transform:it},Se))}return Be.useRotationSize&&Be.rotation&&(Ae=J(Be.rotation,Ae),we=J(Be.rotation,we)),Ve&&(Ae=Ne[0],we=Ne[1]),(0,W.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:Ae,height:we,style:"display: block;"},Ve,(0,W.u)("defs",null,Pe),Ve?(0,W.u)("g",{filter:`url(#bloom${Ke})`},Oe):Oe)}},70137:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>oe});var D=T(20383),x=T(26584),w=T(12874),B=T(69852),U=T(52068),W=T(9436),Y=T(57213),H=T(13546),G=T(88493),$=T(89673),re=T(35540),ue=T(22490);const ae={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function oe(ie,X=ae){if(!ie)return{symbol:null};const{retainId:Z=ae.retainId,ignoreDrivers:Q=ae.ignoreDrivers,hasLabelingContext:J=ae.hasLabelingContext,retainCIM:se=ae.retainCIM}=X;let ee;if((0,D.dU)(ie)||ie instanceof w.Z)ee=ie.clone();else if("cim"===ie.type){const le=ie.data?.symbol?.type;if("CIMPointSymbol"!==le)return{error:new x.Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${le||"unknown"}' is unsupported in 3D`,{symbol:ie})};ee=se?ie.clone():B.Z.fromCIMSymbol(ie)}else if(ie instanceof U.Z)ee=W.Z.fromSimpleLineSymbol(ie);else if(ie instanceof Y.Z)ee=B.Z.fromSimpleMarkerSymbol(ie);else if(ie instanceof H.Z)ee=B.Z.fromPictureMarkerSymbol(ie);else if(ie instanceof G.Z)ee=$.Z.fromSimpleFillSymbol(ie);else{if(!(ie instanceof re.Z))return{error:new x.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${ie.type||ie.declaredClass}' is unsupported in 3D`,{symbol:ie})};ee=J?ue.Z.fromTextSymbol(ie):B.Z.fromTextSymbol(ie)}if(Z&&"cim"!==ee.type&&(ee.id=ie.id),Q&&(0,D.dU)(ee))for(let le=0;le<ee.symbolLayers.length;++le)ee.symbolLayers.getItemAt(le)._ignoreDrivers=!0;return{symbol:ee}}},43652:(qe,xe,T)=>{"use strict";T.d(xe,{$K:()=>B,Hc:()=>G,KW:()=>$,Uz:()=>H,w2:()=>re}),T(8314);var x=T(28093),w=T(5548);function B(ue,{isPrimitive:ae,width:oe,depth:ie,height:X}){const Z=ae?10:1;if(null==oe&&null==X&&null==ie)return[Z*ue[0],Z*ue[1],Z*ue[2]];const Q=(0,x.f)(oe,ie,X);let J;for(let se=0;se<3;se++){const ee=Q[se];if(null!=ee){J=ee/ue[se];break}}for(let se=0;se<3;se++)null==Q[se]&&(Q[se]=ue[se]*J);return Q}const U=(0,w.al)(-.5,-.5,-.5,.5,.5,.5),W=(0,w.al)(-.5,-.5,0,.5,.5,1),Y=(0,w.al)(-.5,-.5,0,.5,.5,.5);function H(ue){switch(ue){case"sphere":case"cube":case"diamond":return U;case"cylinder":case"cone":case"inverted-cone":return W;case"tetrahedron":return Y;default:return}}const G=["butt","square","round"],$=[...G,"none"],re=["miter","bevel","round"]},3854:(qe,xe,T)=>{"use strict";T.d(xe,{LC:()=>ae,jT:()=>oe,k:()=>ue,l3:()=>X,zd:()=>J});var D=T(15861),w=(T(8314),T(62208)),B=T(46679),U=T(74741),W=T(71131),Y=T(34057),H=T(86606);let G=null;const $=[255,255,255];function re(ne,ce){return Math.floor(Math.random()*(ce-ne+1)+ne)}function ue(ne,ce,de){const{backgroundColor:me,outline:_e,dotSize:he}=ne,ye=de&&de.swatchSize||W.b_.size,De=Math.round(ye*ye/he**2*.8),ve=window.devicePixelRatio,Ce=document.createElement("canvas"),ge=ye*ve;Ce.width=ge,Ce.height=ge,Ce.style.width=Ce.width/ve+"px",Ce.style.height=Ce.height/ve+"px";const Te=Ce.getContext("2d");if(me&&(Te.fillStyle=me.toCss(!0),Te.fillRect(0,0,ge,ge),Te.fill()),Te.fillStyle=ce.toCss(!0),G&&G.length/2===De)for(let je=0;je<2*De;je+=2)Te.fillRect(G[je],G[je+1],he*ve,he*ve),Te.fill();else{G=[];for(let je=0;je<2*De;je+=2){const ze=re(0,ge),Ee=re(0,ge);G.push(ze,Ee),Te.fillRect(ze,Ee,he*ve,he*ve),Te.fill()}}_e&&(_e.color&&(Te.strokeStyle=_e.color.toCss(!0)),Te.lineWidth=_e.width,Te.strokeRect(0,0,ge,ge));const Le=new Image(ye,ye);return Le.src=Ce.toDataURL(),Le}function ae(ne,ce={}){const de=ce.radius||40,me=2*Math.PI*de,_e=ne.length,he=me/_e,ye=[],fe=(0,U.mx)(ce.outline);fe&&(fe.width*=2),(fe||ce.backgroundColor)&&ye.push({shape:{type:"circle",cx:de,cy:de,r:de},fill:ce.backgroundColor,stroke:fe,offset:[0,0]});const De=ce.values,ve=De&&De.length===_e&&100===De.reduce((je,ze)=>je+ze,0),Ce=[0];for(let je=0;je<_e;je++){const ze=ve?De[je]*me/100:null;ve&&Ce.push(ze+Ce[je]),ye.push({shape:{type:"circle",cx:de,cy:de,r:de/2},fill:[0,0,0,0],stroke:{width:de,dashArray:`${ze||he} ${me}`,dashoffset:"-"+(ve?Ce[je]/2:je*(he/2)),color:ne[je]},offset:[0,0]})}let ge=null;const Te=2*de+(fe?.width||0),Le=ce.holePercentage;if(Le){fe&&ye.push({shape:{type:"circle",cx:de,cy:de,r:de*Le},fill:null,stroke:fe,offset:[0,0]});const je=Te/2;ge=[[{shape:{type:"circle",cx:je,cy:je,r:je},fill:$,stroke:fe?{...fe,color:$}:null,offset:[0,0]},{shape:{type:"circle",cx:je,cy:je,r:de*Le},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return(0,Y.w)([ye],[Te,Te],{effectView:ce.effectList,ignoreStrokeWidth:!0,masking:ge,rotation:-90})}function oe(ne,ce={}){const _e="horizontal"===ce.align,he=_e?75:24,ye=_e?24:75,{width:fe=he,height:De=ye,gradient:ve=!0}=ce,Ce=window.devicePixelRatio,ge=fe*Ce,Te=De*Ce,Le=document.createElement("canvas");Le.width=ge,Le.height=Te,Le.style.width=`${fe}px`,Le.style.height=`${De}px`;const je=Le.getContext("2d");if(ve){const we=je.createLinearGradient(0,0,_e?ge:0,_e?0:Te),Be=ne.length,Pe=1===Be?0:1/(Be-1);ne.forEach((Oe,Ke)=>we.addColorStop(Ke*Pe,Oe.toString())),je.fillStyle=we,je.fillRect(0,0,ge,Te)}else{const we=_e?ge/ne.length:ge,Be=_e?Te:Te/ne.length;let Pe=0,Oe=0;for(const Ke of ne)je.fillStyle=Ke.toString(),je.fillRect(Pe,Oe,we,Be),Pe=_e?Pe+we:0,Oe=_e?0:Oe+Be}const Ae=document.createElement("div");return Ae.style.width=`${fe}px`,Ae.style.height=`${De}px`,function ie(ne,ce){if(!ce)return;ne.style.filter=(0,H.wJ)(ce);const de=ce.effects;if(de)for(const me of de)if("drop-shadow"===me?.type){me.offsetX<0?ne.style.marginLeft=`${Math.abs(me.offsetX)}px`:ne.style.marginRight=`${me.offsetX}px`;break}}(Ae,ce?.effectList),Ae.appendChild(Le),Ae}function X(ne,ce){return Z.apply(this,arguments)}function Z(){return(Z=(0,D.Z)(function*(ne,ce){switch(ne.type){case"web-style":{const{previewWebStyleSymbol:de}=yield T.e(8704).then(T.bind(T,38704));return de(ne,X,ce)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:de}=yield Promise.resolve().then(T.bind(T,66960));return de(ne,ce)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:de}=yield T.e(7385).then(T.bind(T,67385));return de(ne,ce)}case"cim":{const{previewCIMSymbol:de}=yield Promise.all([T.e(3751),T.e(4654),T.e(3141),T.e(9235),T.e(7313)]).then(T.bind(T,27313));return de(ne,ce)}default:return}})).apply(this,arguments)}function Q(ne){return ne&&"opacity"in ne?ne.opacity*Q(ne.parent):1}function J(ne,ce){return se.apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(ne,ce){if(!ne)return;const de=ne.sourceLayer,me=((0,w.pC)(ce)&&ce.useSourceLayer?de:ne.layer)??de,_e=Q(me);if((0,w.pC)(ne.symbol)&&(!(0,w.pC)(ce)||!0!==ce.ignoreGraphicSymbol)){const Ee="web-style"===ne.symbol.type?yield ne.symbol.fetchSymbol({...ce,cache:(0,w.pC)(ce)?ce.webStyleCache:null}):ne.symbol.clone();return(0,H.tb)(Ee,null,_e),Ee}const he=(0,w.pC)(ce)&&ce.renderer||me&&"renderer"in me&&me.renderer;let ye=he&&"getSymbolAsync"in he?yield he.getSymbolAsync(ne,ce):null;if(!ye)return;if(ye="web-style"===ye.type?yield ye.fetchSymbol({...ce,cache:(0,w.pC)(ce)?ce.webStyleCache:null}):ye.clone(),!("visualVariables"in he)||!he.visualVariables||!he.visualVariables.length)return(0,H.tb)(ye,null,_e),ye;if("arcadeRequiredForVisualVariables"in he&&he.arcadeRequiredForVisualVariables&&((0,w.Wi)(ce)||(0,w.Wi)(ce.arcade))){const Ee={...(0,w.Wg)(ce)};Ee.arcade=yield(0,B.LC)(),ce=Ee}const fe=yield Promise.resolve().then(T.bind(T,81808)),De=[],ve=[],Ce=[],ge=[];for(const Ee of he.visualVariables)switch(Ee.type){case"color":De.push(Ee);break;case"opacity":ve.push(Ee);break;case"rotation":ge.push(Ee);break;case"size":Ee.target||Ce.push(Ee)}const Te=!!De.length&&De[De.length-1],Le=Te?fe.getColor(Te,ne,ce):null,je=!!ve.length&&ve[ve.length-1];let ze=je?fe.getOpacity(je,ne,ce):null;if(null!=_e&&(ze=null!=ze?ze*_e:_e),(0,H.tb)(ye,Le,ze),Ce.length){const Ee=fe.getAllSizes(Ce,ne,ce);yield(0,H.e3)(ye,Ee)}for(const Ee of ge)(0,H.BR)(ye,fe.getRotationAngle(Ee,ne,ce),Ee.axis);return ye})).apply(this,arguments)}},50369:(qe,xe,T)=>{"use strict";T.d(xe,{Ck:()=>W,JT:()=>w,Nj:()=>$,g6:()=>B,vC:()=>U,x0:()=>G});var D=T(21286),x=T(90912);const w=["none","underline","line-through"],B=["normal","italic","oblique"],U=["normal","lighter","bold","bolder"],W={type:Number,cast:re=>{const ue=(0,x.q9)(re);return 0===ue?1:(0,D.uZ)(ue,.1,4)},nonNullable:!0},G={type:["left","right","center"],nonNullable:!0},$={type:["baseline","top","middle","bottom"],nonNullable:!0}},29505:(qe,xe,T)=>{"use strict";T.d(xe,{Z7:()=>w,f9:()=>U,lt:()=>x});var D=T(21254);function x(W){return null!=D.a[W]}function w(W){return 1/(D.a[W]||1)}const U=function B(){const W=Object.keys(D.a);return W.sort(),W}()},69738:(qe,xe,T)=>{"use strict";T.d(xe,{Ds:()=>Y,KA:()=>W});var D=T(21726),x=T(29840);function B(G,$){return function H(G){return G&&("service"===G.origin||"portal-item"===G.origin)&&G.layer&&("feature"===G.layer.type||"stream"===G.layer.type)}($)&&!(0,D.YP)(G)&&$.layer.parsedUrl?(0,D.v_)($.layer.parsedUrl.path,"images",G):(0,x.f)(G,$)}const W={json:{read:{source:["imageData","url"],reader:function w(G,$,re){return $.imageData?(0,D._l)({mediaType:$.contentType||"image/png",isBase64:!0,data:$.imageData}):B($.url,re)}},write:{writer(G,$,re,ue){!function U(G,$,re,ue){if((0,D.HK)(G)){const ae=(0,D.sJ)(G);$.contentType=ae.mediaType,$.imageData=ae.data,re&&re.imageData===$.imageData&&re.url&&(0,x.w)(re.url,$,"url",ue)}else(0,x.w)(G,$,"url",ue)}(G,$,this.source,ue)}}}},Y={readOnly:!0,json:{read:{source:["imageData","url"],reader(G,$,re){const ue={};return $.imageData&&(ue.imageData=$.imageData),$.contentType&&(ue.contentType=$.contentType),$.url&&(ue.url=B($.url,re)),ue}}}}},86606:(qe,xe,T)=>{"use strict";T.d(xe,{BR:()=>we,Y6:()=>ie,YW:()=>X,_h:()=>Q,e3:()=>Ee,nf:()=>Z,tb:()=>ne,wJ:()=>Be});var D=T(15861),x=T(91558),w=T(20383),B=T(59213),U=T(8314),W=T(62208),Y=T(23841),H=T(28093),G=T(71149),$=T(74741),re=T(64830);const ue=/\/resource\/(.*?)\.svg$/,ae=new x.Z("white");function ie(Pe){if(!Pe)return 0;if((0,w.dU)(Pe)){const Ke=function oe(Pe){const Oe=Pe.symbolLayers&&Pe.symbolLayers.length;if(!Oe)return;const Ke=Pe.symbolLayers.getItemAt(Oe-1);return"outline"in Ke?(0,W.U2)(Ke,"outline","size"):void 0}(Pe);return(0,W.pC)(Ke)?Ke:0}const Oe=(0,$.mx)(Pe);return Oe&&(0,Y.Wz)(Oe.width)||0}function X(Pe){if((0,W.Wi)(Pe)||!("symbolLayers"in Pe)||(0,W.Wi)(Pe.symbolLayers))return!1;switch(Pe.type){case"point-3d":return Pe.symbolLayers.some(Oe=>"object"===Oe.type);case"line-3d":return Pe.symbolLayers.some(Oe=>"path"===Oe.type);case"polygon-3d":return Pe.symbolLayers.some(Oe=>"object"===Oe.type||"extrude"===Oe.type);default:return!1}}function Z(Pe,Oe){const Ke=Oe.resource.href;return!(0,U.Z)("esri-canvas-svg-support")&&Pe.styleOrigin&&ue.test(Ke)?Ke.replace(ue,"/resource/png/$1.png"):Ke}function Q(Pe,Oe){if(!Pe)return null;let Ke=null;return(0,w.dU)(Pe)?Ke=function J(Pe){const Oe=Pe.symbolLayers;if(!Oe)return null;let Ke=null;return Oe.forEach(Ve=>{"object"===Ve.type&&null!=Ve.resource.href||(Ke="water"===Ve.type?(0,W.Wg)(Ve.color):(0,W.pC)(Ve.material)?(0,W.Wg)(Ve.material.color):null)}),Ke?new x.Z(Ke):null}(Pe):(0,w.cT)(Pe)&&(Ke=Pe.color?new x.Z(Pe.color):null),Ke?se(Ke,Oe):null}function se(Pe,Oe){if(null==Oe)return Pe;const Ke=Pe.toRgba();return Ke[3]=Ke[3]*Oe,new x.Z(Ke)}function ne(Pe,Oe,Ke){Pe&&(Oe||null!=Ke)&&(Oe&&(Oe=new x.Z(Oe)),(0,w.dU)(Pe)?function ee(Pe,Oe,Ke){const Ve=Pe.symbolLayers;if(!Ve)return;const Ne=Ie=>{const We=(0,W.pC)(Ie)?Ie:null;return se(Oe=Oe||We||null!=Ke&&ae,Ke)};Ve.forEach(Ie=>{if("object"!==Ie.type||null==Ie.resource.href||Oe)if("water"===Ie.type)Ie.color=Ne(Ie.color);else{const We=(0,W.pC)(Ie.material)?Ie.material.color:null,Se=Ne(We);(0,W.Wi)(Ie.material)?Ie.material=new re.b({color:Se}):Ie.material.color=Se,null!=Ke&&"outline"in Ie&&(0,W.pC)(Ie.outline)&&(0,W.pC)(Ie.outline.color)&&(Ie.outline.color=se(Ie.outline.color,Ke))}})}(Pe,Oe,Ke):(0,w.cT)(Pe)&&function le(Pe,Oe,Ke){(Oe=Oe||Pe.color)&&(Pe.color=se(Oe,Ke)),null!=Ke&&"outline"in Pe&&Pe.outline&&Pe.outline.color&&(Pe.outline.color=se(Pe.outline.color,Ke))}(Pe,Oe,Ke))}function ce(Pe,Oe){return de.apply(this,arguments)}function de(){return de=(0,D.Z)(function*(Pe,Oe){const Ke=Pe.symbolLayers;Ke&&(yield(0,B.Ed)(Ke,function(){var Ve=(0,D.Z)(function*(Ne){return me(Ne,Oe)});return function(Ne){return Ve.apply(this,arguments)}}()))}),de.apply(this,arguments)}function me(Pe,Oe){return _e.apply(this,arguments)}function _e(){return(_e=(0,D.Z)(function*(Pe,Oe){switch(Pe.type){case"extrude":fe(Pe,Oe);break;case"icon":case"line":case"text":he(Pe,Oe);break;case"path":Ce(Pe,Oe);break;case"object":yield De(Pe,Oe)}})).apply(this,arguments)}function he(Pe,Oe){const Ke=ye(Oe);(0,W.pC)(Ke)&&(Pe.size=Ke)}function ye(Pe){for(const Oe of Pe)if("number"==typeof Oe)return Oe;return null}function fe(Pe,Oe){Pe.size="number"==typeof Oe[2]?Oe[2]:0}function De(Pe,Oe){return ve.apply(this,arguments)}function ve(){return(ve=(0,D.Z)(function*(Pe,Oe){const{resourceSize:Ke,symbolSize:Ve}=yield Te(Pe),Ne=ge(Oe,Ke,Ve);Pe.width=je(Oe[0],Ve[0],Ke[0],Ne),Pe.depth=je(Oe[1],Ve[1],Ke[1],Ne),Pe.height=je(Oe[2],Ve[2],Ke[2],Ne)})).apply(this,arguments)}function Ce(Pe,Oe){const Ke=ge(Oe,H.O,[Pe.width,void 0,Pe.height]);Pe.width=je(Oe[0],Pe.width,1,Ke),Pe.height=je(Oe[2],Pe.height,1,Ke)}function ge(Pe,Oe,Ke){for(let Ve=0;Ve<3;Ve++){const Ne=Pe[Ve];switch(Ne){case"symbol-value":return null!=Ke[Ve]?Ke[Ve]/Oe[Ve]:1;case"proportional":break;default:if(Ne&&Oe[Ve])return Ne/Oe[Ve]}}return 1}function Te(Pe){return Le.apply(this,arguments)}function Le(){return(Le=(0,D.Z)(function*(Pe){const Oe=yield T.e(1831).then(T.bind(T,91831)),Ke=yield Oe.computeObjectLayerResourceSize(Pe,10),{width:Ve,height:Ne,depth:Ie}=Pe,We=[Ve,Ie,Ne];let Se=1;for(let He=0;He<3;He++)if(null!=We[He]){Se=We[He]/Ke[He];break}for(let He=0;He<3;He++)null==We[He]&&(We[He]=Ke[He]*Se);return{resourceSize:Ke,symbolSize:We}})).apply(this,arguments)}function je(Pe,Oe,Ke,Ve){switch(Pe){case"proportional":return Ke*Ve;case"symbol-value":return Oe??Ke;default:return Pe}}function ze(Pe,Oe){const Ke=ye(Oe);if(!(0,W.Wi)(Ke))switch(Pe.type){case"simple-marker":Pe.size=Ke;break;case"picture-marker":{const Ve=Pe.width/Pe.height;Ve>1?(Pe.width=Ke,Pe.height=Ke*Ve):(Pe.width=Ke*Ve,Pe.height=Ke);break}case"simple-line":Pe.width=Ke;break;case"text":Pe.font.size=Ke}}function Ee(Pe,Oe){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,D.Z)(function*(Pe,Oe){if(Pe&&Oe)return(0,w.dU)(Pe)?ce(Pe,Oe):void((0,w.cT)(Pe)&&ze(Pe,Oe))})).apply(this,arguments)}function we(Pe,Oe,Ke){if(Pe&&null!=Oe)if((0,w.dU)(Pe)){const Ve=Pe.symbolLayers;Ve&&Ve.forEach(Ne=>{if(Ne&&"object"===Ne.type)switch(Ke){case"tilt":Ne.tilt=Oe;break;case"roll":Ne.roll=Oe;break;default:Ne.heading=Oe}})}else(0,w.cT)(Pe)&&("simple-marker"!==Pe.type&&"picture-marker"!==Pe.type&&"text"!==Pe.type||(Pe.angle=Oe))}function Be(Pe){if(!Pe)return null;const Oe=Pe.effects.filter(Ke=>"bloom"!==Ke.type).map(Ke=>Ke.toJSON());return(0,G.rM)(Oe)}},50998:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{fetchSymbolFromStyle:()=>ae,resolveWebStyleSymbol:()=>ue});var D=T(20383),x=T(83100),w=T(26584),B=T(62208),U=T(21726),W=T(84687),Y=T(29840),H=T(9461),G=T(77345),$=T(71937),re=T(96296);function ue(ie,X,Z,Q){return ie.name?ie.styleName&&"Esri2DPointSymbolsStyle"===ie.styleName?function oe(ie,X,Z){const Q=$.wm.replace(/\{SymbolName\}/gi,ie.name),J=(0,B.pC)(X.portal)?X.portal:W.Z.getDefault();return(0,$.EJ)(Q,Z).then(se=>{const ee=(0,$.KV)(se.data);return(0,H.im)(ee,{portal:J,url:(0,U.mN)((0,U.Yd)(Q)),origin:"portal-item"})})}(ie,X,Q):(0,$.n2)(ie,X,Q).then(J=>ae(J,ie.name,X,Z,Q)):Promise.reject(new w.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function ae(ie,X,Z,Q,J){const se=ie.data,ee=Z&&(0,B.pC)(Z.portal)?Z.portal:W.Z.getDefault(),le={portal:ee,url:(0,U.mN)(ie.baseUrl),origin:"portal-item"},ne=se.items.find(he=>he.name===X);if(!ne)return Promise.reject(new w.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${X}' could not be found`,{symbolName:X}));let ce=(0,Y.f)((0,$.v9)(ne,Q),le),de=ne.thumbnail&&ne.thumbnail.href;const me=ne.thumbnail&&ne.thumbnail.imageData;(0,x.XO)()&&(ce=(0,x.pJ)(ce),de=(0,x.pJ)(de));const _e={portal:ee,url:(0,U.mN)((0,U.Yd)(ce)),origin:"portal-item"};return(0,$.EJ)(ce,J).then(he=>{const ye="cimRef"===Q?(0,$.KV)(he.data):he.data,fe=(0,H.im)(ye,_e);if(fe&&(0,D.dU)(fe)){if(de){const De=(0,Y.f)(de,le);fe.thumbnail=new re.p({url:De})}else me&&(fe.thumbnail=new re.p({url:`data:image/png;base64,${me}`}));ie.styleUrl?fe.styleOrigin=new G.Z({portal:Z.portal,styleUrl:ie.styleUrl,name:X}):ie.styleName&&(fe.styleOrigin=new G.Z({portal:Z.portal,styleName:ie.styleName,name:X}))}return fe})}},39236:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>B});var D=T(26584),x=T(63290),w=T(7848);function B(H,G,$,re,ue){const ae=H.referencesGeometry()&&ue?function W(H,G,$){const{transform:re,hasZ:ue,hasM:ae}=$;U.has(G)||U.set(G,function Y(H){const G={};switch(H){case"esriGeometryPoint":return($,re,ue,ae)=>(0,w.U1)(re,G,$,ue,ae);case"esriGeometryPolygon":return($,re,ue,ae)=>(0,w.Ie)(re,G,$,ue,ae);case"esriGeometryPolyline":return($,re,ue,ae)=>(0,w.G6)(re,G,$,ue,ae);case"esriGeometryMultipoint":return($,re,ue,ae)=>(0,w.J9)(re,G,$,ue,ae);default:return x.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new D.Z("mapview-arcade",`Unable to handle geometryType: ${H}`)),$=>$}}(G));const oe=U.get(G)(H.geometry,re,ue,ae);return{...H,geometry:oe}}(G,re,ue):G,oe=H.repurposeFeature(ae);try{return H.evaluate({...$,$feature:oe})}catch(ie){return x.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",ie),null}}const U=new Map},57477:(qe,xe,T)=>{"use strict";T.d(xe,{s:()=>W});var D=T(61885),x=T(8314),w=T(62208),B=T(10699);const U=1/(0,x.Z)("mapview-transitions-duration");class W extends D.Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(H){this._clips=H,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(H){this._opacity!==H&&(this._opacity=Math.min(1,Math.max(H,0)),this.requestRender())}get stage(){return this._stage}set stage(H){if(this._stage===H)return;const G=this._stage;this._stage=H,H?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):G.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,w.Wi)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(H){this._visible!==H&&(this._visible=H,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,B.hh)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,B.hh)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(H){this.updateTransitionProperties(H.deltaTime,H.state.scale)}afterRender(H){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){this.parent?.removeChild(this)}setTransform(H){}processRender(H){this.stage&&this.computedVisible&&this.doRender(H)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(H,G){if(this.fadeTransitionEnabled){const $=this._fadeOutResolver||!this.visible?0:this.opacity,re=this.computedOpacity;if(re===$)this.computedVisible=this.visible;else{const ue=H*U;this.computedOpacity=re>$?Math.max($,re-ue):Math.min($,re+ue),this.computedVisible=this.computedOpacity>0;const ae=$===this.computedOpacity;this.inFadeTransition=!ae,ae||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(H){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},62449:(qe,xe,T)=>{"use strict";var D,x,w;T.d(xe,{H:()=>x,U:()=>D}),(w=D||(D={}))[w.Stretch=0]="Stretch",w[w.Lut=1]="Lut",w[w.Hillshade=2]="Hillshade",w[w.COUNT=3]="COUNT",function(w){w[w.Noop=0]="Noop",w[w.PerBand=1]="PerBand",w[w.COUNT=2]="COUNT"}(x||(x={}))},21410:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>Q,K:()=>se});var D=T(62208),x=T(30217),w=T(49966),B=T(919),U=T(76763),W=T(83994),Y=T(67969),H=T(49353);class G{constructor(le,ne){this.layerUIDs=[],this.isDestroyed=!1,this.data=le,this.memoryUsed=le.byteLength;let ce=1;const de=new Uint32Array(le);this.layerUIDs=[];const me=de[ce++];for(let _e=0;_e<me;_e++)this.layerUIDs[_e]=de[ce++];this.bufferDataOffset=ce,ne&&(this.layer=ne.getStyleLayerByUID(this.layerUIDs[0]))}get isPreparedForRendering(){return(0,D.Wi)(this.data)}get offset(){return this.bufferDataOffset}destroy(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)}prepareForRendering(le){(0,D.Wi)(this.data)||(this.doPrepareForRendering(le,this.data,this.bufferDataOffset),this.data=null)}}class $ extends G{constructor(le,ne){super(le,ne),this.type=B.al.LINE,this.lineIndexStart=0,this.lineIndexCount=0;const ce=new Uint32Array(le);let de=this.bufferDataOffset;this.lineIndexStart=ce[de++],this.lineIndexCount=ce[de++];const me=ce[de++];if(me>0){const _e=new Map;for(let he=0;he<me;he++){const ye=ce[de++],fe=ce[de++],De=ce[de++];_e.set(ye,[fe,De])}this.patternMap=_e}this.bufferDataOffset=de}hasData(){return this.lineIndexCount>0}triangleCount(){return this.lineIndexCount/3}doDestroy(){(0,D.pC)(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose(),(0,D.pC)(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose(),(0,D.pC)(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose(),this.lineVertexArrayObject=null,this.lineVertexBuffer=null,this.lineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(le,ne,ce){const de=new Uint32Array(ne),me=new Int32Array(de.buffer),_e=de[ce++];this.lineVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,_e)),ce+=_e;const he=de[ce++];this.lineIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,he)),ce+=he;const ye=this.layer.lineMaterial;this.lineVertexArrayObject=new H.U(le,ye.getAttributeLocations(),ye.getLayoutInfo(),{geometry:this.lineVertexBuffer},this.lineIndexBuffer)}}class re extends G{constructor(le,ne){super(le,ne),this.type=B.al.FILL,this.fillIndexStart=0,this.fillIndexCount=0,this.outlineIndexStart=0,this.outlineIndexCount=0;const ce=new Uint32Array(le);let de=this.bufferDataOffset;this.fillIndexStart=ce[de++],this.fillIndexCount=ce[de++],this.outlineIndexStart=ce[de++],this.outlineIndexCount=ce[de++];const me=ce[de++];if(me>0){const _e=new Map;for(let he=0;he<me;he++){const ye=ce[de++],fe=ce[de++],De=ce[de++];_e.set(ye,[fe,De])}this.patternMap=_e}this.bufferDataOffset=de}hasData(){return this.fillIndexCount>0||this.outlineIndexCount>0}triangleCount(){return(this.fillIndexCount+this.outlineIndexCount)/3}doDestroy(){(0,D.pC)(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose(),(0,D.pC)(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose(),(0,D.pC)(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose(),this.fillVertexArrayObject=null,this.fillVertexBuffer=null,this.fillIndexBuffer=null,(0,D.pC)(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose(),(0,D.pC)(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose(),(0,D.pC)(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose(),this.outlineVertexArrayObject=null,this.outlineVertexBuffer=null,this.outlineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(le,ne,ce){const de=new Uint32Array(ne),me=new Int32Array(de.buffer),_e=de[ce++];this.fillVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,_e)),ce+=_e;const he=de[ce++];this.fillIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,he)),ce+=he;const ye=de[ce++];this.outlineVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,ye)),ce+=ye;const fe=de[ce++];this.outlineIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,fe)),ce+=fe;const De=this.layer,ve=De.fillMaterial,Ce=De.outlineMaterial;this.fillVertexArrayObject=new H.U(le,ve.getAttributeLocations(),ve.getLayoutInfo(),{geometry:this.fillVertexBuffer},this.fillIndexBuffer),this.outlineVertexArrayObject=new H.U(le,Ce.getAttributeLocations(),Ce.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)}}class ue extends G{constructor(le,ne,ce){super(le,ne),this.type=B.al.SYMBOL,this.iconPerPageElementsMap=new Map,this.glyphPerPageElementsMap=new Map,this.symbolInstances=[],this.isIconSDF=!1,this.opacityChanged=!1,this.lastOpacityUpdate=0,this.symbols=[];const de=new Uint32Array(le),me=new Int32Array(le),_e=new Float32Array(le);let he=this.bufferDataOffset;this.isIconSDF=!!de[he++];const ye=de[he++];for(let Ce=0;Ce<ye;Ce++){const ge=de[he++],Te=de[he++],Le=de[he++];this.iconPerPageElementsMap.set(ge,[Te,Le])}const fe=de[he++];for(let Ce=0;Ce<fe;Ce++){const ge=de[he++],Te=de[he++],Le=de[he++];this.glyphPerPageElementsMap.set(ge,[Te,Le])}const De=de[he++],ve=de[he++];this.iconOpacity=new Int32Array(De),this.textOpacity=new Int32Array(ve),he=(0,U.wB)(de,me,_e,he,this.symbols,ce),this.bufferDataOffset=he}hasData(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}triangleCount(){let le=0;for(const[ne,ce]of this.iconPerPageElementsMap)le+=ce[1];for(const[ne,ce]of this.glyphPerPageElementsMap)le+=ce[1];return le/3}doDestroy(){(0,D.pC)(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose(),(0,D.pC)(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose(),(0,D.pC)(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose(),(0,D.pC)(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose(),this.iconVertexArrayObject=null,this.iconVertexBuffer=null,this.iconOpacityBuffer=null,this.iconIndexBuffer=null,(0,D.pC)(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose(),(0,D.pC)(this.textVertexBuffer)&&this.textVertexBuffer.dispose(),(0,D.pC)(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose(),(0,D.pC)(this.textIndexBuffer)&&this.textIndexBuffer.dispose(),this.textVertexArrayObject=null,this.textVertexBuffer=null,this.textOpacityBuffer=null,this.textIndexBuffer=null,this.memoryUsed=0}updateOpacityInfo(){if(!this.opacityChanged)return;this.opacityChanged=!1;const le=(0,D.Wg)(this.iconOpacity),ne=(0,D.Wg)(this.iconOpacityBuffer);le.length>0&&le.byteLength===ne.size&&ne.setSubData(le);const ce=(0,D.Wg)(this.textOpacity),de=(0,D.Wg)(this.textOpacityBuffer);ce.length>0&&ce.byteLength===de.size&&de.setSubData(ce)}doPrepareForRendering(le,ne,ce){const de=new Uint32Array(ne),me=new Int32Array(de.buffer),_e=de[ce++];this.iconVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,_e)),ce+=_e;const he=de[ce++];this.iconIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,he)),ce+=he;const ye=de[ce++];this.textVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,ye)),ce+=ye;const fe=de[ce++];this.textIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,fe)),ce+=fe,this.iconOpacityBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,(0,D.Wg)(this.iconOpacity).buffer),this.textOpacityBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,(0,D.Wg)(this.textOpacity).buffer);const De=this.layer,ve=De.iconMaterial,Ce=De.textMaterial;this.iconVertexArrayObject=new H.U(le,ve.getAttributeLocations(),ve.getLayoutInfo(),{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer),this.textVertexArrayObject=new H.U(le,Ce.getAttributeLocations(),Ce.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)}}class ae extends G{constructor(le,ne){super(le,ne),this.type=B.al.CIRCLE,this.circleIndexStart=0,this.circleIndexCount=0;const ce=new Uint32Array(le);let de=this.bufferDataOffset;this.circleIndexStart=ce[de++],this.circleIndexCount=ce[de++],this.bufferDataOffset=de}hasData(){return this.circleIndexCount>0}triangleCount(){return this.circleIndexCount/3}doDestroy(){(0,D.pC)(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose(),(0,D.pC)(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose(),(0,D.pC)(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose(),this.circleVertexArrayObject=null,this.circleVertexBuffer=null,this.circleIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(le,ne,ce){const de=new Uint32Array(ne),me=new Int32Array(de.buffer),_e=de[ce++];this.circleVertexBuffer=W.f.createVertex(le,Y.l1.STATIC_DRAW,new Int32Array(me.buffer,4*ce,_e)),ce+=_e;const he=de[ce++];this.circleIndexBuffer=W.f.createIndex(le,Y.l1.STATIC_DRAW,new Uint32Array(de.buffer,4*ce,he)),ce+=he;const ye=this.layer.circleMaterial;this.circleVertexArrayObject=new H.U(le,ye.getAttributeLocations(),ye.getLayoutInfo(),{geometry:this.circleVertexBuffer},this.circleIndexBuffer)}}var oe=T(47132),ie=T(57477),X=T(58098);class Z extends ie.s{constructor(le,ne,ce,de,me,_e=de,he=me){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new X.Z(le),this.x=ne,this.y=ce,this.width=de,this.height=me,this.rangeX=_e,this.rangeY=he}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(le,ne){const ce=ne/(le.resolution*le.pixelRatio),de=this.transforms.tileMat3,[me,_e]=le.toScreenNoRotation([0,0],[this.x,this.y]);(0,x.s)(de,this.width/this.rangeX*ce,0,0,0,this.height/this.rangeY*ce,0,me,_e,1),(0,x.m)(this.transforms.dvs,le.displayViewMat3,de)}}class Q extends Z{constructor(le,ne,ce,de,me,_e,he=null){super(le,ne,ce,de,me,4096,4096),this._memCache=he,this.type="vector-tile",this._referenced=0,this._hasSymbolBuckets=!1,this._memoryUsedByLayerData=0,this.layerData=new Map,this.layerCount=0,this.status="loading",this.allSymbolsFadingOut=!1,this.lastOpacityUpdate=0,this.symbols=new Map,this.isCoverage=!1,this.neededForCoverage=!1,this.decluttered=!1,this.invalidating=!1,this.parentTile=null,this.childrenTiles=new Set,this._processed=!1,this._referenced=1,this.styleRepository=_e,this.id=le.id}get hasSymbolBuckets(){return this._hasSymbolBuckets}get isFading(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<oe.nN}get isHoldingForFade(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<oe.nN)}get wasRequested(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}setData(le){this.changeDataImpl(le),this.requestRender(),this.ready(),this.invalidating=!1,this._processed=!0}deleteLayerData(le){let ne=!1;for(const ce of le)if(this.layerData.has(ce)){const de=this.layerData.get(ce);this._memoryUsedByLayerData-=de.memoryUsed,de.type===B.al.SYMBOL&&this.symbols.has(ce)&&(this.symbols.delete(ce),ne=!0),de.destroy(),this.layerData.delete(ce),this.layerCount--}(0,D.pC)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData),ne&&this.emit("symbols-changed"),this.requestRender()}processed(){return this._processed}hasData(){return this.layerCount>0}dispose(){"unloaded"!==this.status&&(J.delete(this),Q._destroyRenderBuckets(this.layerData),this.layerData=null,this.layerCount=0,this._memoryUsedByLayerData=0,this.destroy(),this.status="unloaded")}release(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}retain(){++this._referenced}get referenced(){return this._referenced}get memoryUsage(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}changeDataImpl(le){let ne=!1;if(le){const{bucketsWithData:ce,emptyBuckets:de}=le,me=this._createRenderBuckets(ce);if(de&&de.byteLength>0){const _e=new Uint32Array(de);for(const he of _e)this._deleteLayerData(he)}for(const[_e,he]of me)this._deleteLayerData(_e),he.type===B.al.SYMBOL&&(this.symbols.set(_e,he.symbols),ne=!0),this._memoryUsedByLayerData+=he.memoryUsed,this.layerData.set(_e,he),this.layerCount++;(0,D.pC)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;for(const[ce,de]of this.layerData)de.type===B.al.SYMBOL&&(this._hasSymbolBuckets=!0);ne&&this.emit("symbols-changed")}attachWithContext(le){this.stage={context:le,trashDisplayObject(ne){ne.processDetach()},untrashDisplayObject:()=>!1}}setTransform(le,ne){super.setTransform(le,ne);const ce=ne/(le.resolution*le.pixelRatio),de=this.width/this.rangeX*ce,me=this.height/this.rangeY*ce,_e=[0,0];le.toScreen(_e,[this.x,this.y]);const he=this.transforms.tileUnitsToPixels;(0,x.b)(he),(0,x.c)(he,he,_e),(0,x.r)(he,he,Math.PI*le.rotation/180),(0,x.d)(he,he,[de,me,1])}_createTransforms(){return{dvs:(0,w.c)(),tileMat3:(0,w.c)(),tileUnitsToPixels:(0,w.c)()}}static _destroyRenderBuckets(le){if(!le)return;const ne=new Set;le.forEach(ce=>{ne.has(ce)||(ce.destroy(),ne.add(ce))}),le.clear()}_createRenderBuckets(le){const ne=new Map,ce=new Map;for(const de of le){const me=this._deserializeBucket(de,ce);for(const _e of me.layerUIDs)ne.set(_e,me)}return ne}_deserializeBucket(le,ne){let ce=ne.get(le);if(ce)return ce;switch(new Uint32Array(le)[0]){case B.al.FILL:ce=new re(le,this.styleRepository);break;case B.al.LINE:ce=new $(le,this.styleRepository);break;case B.al.SYMBOL:ce=new ue(le,this.styleRepository,this);break;case B.al.CIRCLE:ce=new ae(le,this.styleRepository)}return ne.set(le,ce),ce}_deleteLayerData(le){if(!this.layerData.has(le))return;const ne=this.layerData.get(le);this._memoryUsedByLayerData-=ne.memoryUsed,ne.destroy(),this.layerData.delete(le),this.layerCount--}}const J=new Map;function se(){J.forEach((ee,le)=>{console.log(`\n${le.key}:`),ee[0].forEach(ne=>console.log(ne)),console.log("========"),ee[1].forEach(ne=>console.log(ne))})}},47132:(qe,xe,T)=>{"use strict";T.d(xe,{Bf:()=>D,PF:()=>x,nN:()=>B});const D=!0,x=32,B=200},51200:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>x,a:()=>D});class D{constructor(B){this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=B}}class x{constructor(){this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}}},76763:(qe,xe,T)=>{"use strict";T.d(xe,{C$:()=>G,HX:()=>Y,co:()=>W,wB:()=>H});var D=T(919),x=T(51200);function W(re,ue,ae,oe,ie,X){const Z=ae-ie;if(Z>=0)return(ue>>Z)+(oe-(X<<Z))*(re>>Z);const Q=-Z;return ue-(X-(oe<<Q))*(re>>Q)<<Q}class Y{constructor(ue,ae,oe){this._rows=Math.ceil(ae/oe),this._columns=Math.ceil(ue/oe),this._cellSize=oe,this.cells=new Array(this._rows);for(let ie=0;ie<this._rows;ie++){this.cells[ie]=new Array(this._columns);for(let X=0;X<this._columns;X++)this.cells[ie][X]=[]}}getCell(ue,ae){const oe=Math.min(Math.max(Math.floor(ae/this._cellSize),0),this._rows-1),ie=Math.min(Math.max(Math.floor(ue/this._cellSize),0),this._columns-1);return this.cells[oe]&&this.cells[oe][ie]||null}getCellSpan(ue,ae,oe,ie){return[Math.min(Math.max(Math.floor(ue/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(ae/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(oe/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(ie/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function H(re,ue,ae,oe,ie,X){const Z=ue[oe++];for(let Q=0;Q<Z;Q++){const J=new x.a(X);J.xTile=ue[oe++],J.yTile=ue[oe++],J.hash=ue[oe++],J.priority=ue[oe++];const se=ue[oe++];for(let ne=0;ne<se;ne++){const ce=ue[oe++],de=ue[oe++],me=ue[oe++],_e=ue[oe++],he=!!ue[oe++],ye=ue[oe++],fe=ae[oe++],De=ae[oe++],ve=ue[oe++],Ce=ue[oe++];J.colliders.push({xTile:ce,yTile:de,dxPixels:me,dyPixels:_e,hard:he,partIndex:ye,width:ve,height:Ce,minLod:fe,maxLod:De})}const ee=re[oe++];for(let ne=0;ne<ee;ne++)J.textVertexRanges.push([re[oe++],re[oe++]]);const le=re[oe++];for(let ne=0;ne<le;ne++)J.iconVertexRanges.push([re[oe++],re[oe++]]);ie.push(J)}return oe}function G(re,ue,ae){for(const[oe,ie]of re.symbols)$(re,ue,ae,ie,oe)}function $(re,ue,ae,oe,ie){const X=re.layerData.get(ie);if(X.type===D.al.SYMBOL){for(const Z of oe){const Q=Z.unique;let J;if(Z.selectedForRendering){const se=Q.parts[0],ee=se.startOpacity,le=se.targetOpacity;re.allSymbolsFadingOut=re.allSymbolsFadingOut&&0===le;const ne=ae?Math.floor(127*ee)|le<<7:le?255:0;J=ne<<24|ne<<16|ne<<8|ne}else J=0;for(const[se,ee]of Z.iconVertexRanges)for(let le=se;le<se+ee;le+=4)X.iconOpacity[le/4]=J;if(Z.selectedForRendering){const se=Q.parts[1],ee=se.startOpacity,le=se.targetOpacity;re.allSymbolsFadingOut=re.allSymbolsFadingOut&&0===le;const ne=ae?Math.floor(127*ee)|le<<7:le?255:0;J=ne<<24|ne<<16|ne<<8|ne}else J=0;for(const[se,ee]of Z.textVertexRanges)for(let le=se;le<se+ee;le+=4)X.textOpacity[le/4]=J}X.lastOpacityUpdate=ue,X.opacityChanged=!0}}},919:(qe,xe,T)=>{"use strict";var D,x,w,B,U,W;T.d(xe,{Fr:()=>U,_K:()=>B,al:()=>x}),(W=D||(D={}))[W.UNKNOWN=0]="UNKNOWN",W[W.FILL_VERTEX=1]="FILL_VERTEX",W[W.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",W[W.FILL_INDEX=3]="FILL_INDEX",W[W.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",W[W.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",W[W.OUTLINE_INDEX=6]="OUTLINE_INDEX",W[W.LINE_VERTEX=7]="LINE_VERTEX",W[W.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",W[W.LINE_INDEX=9]="LINE_INDEX",W[W.ICON_VERTEX=10]="ICON_VERTEX",W[W.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",W[W.ICON_INDEX=12]="ICON_INDEX",W[W.TEXT_VERTEX=13]="TEXT_VERTEX",W[W.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",W[W.TEXT_INDEX=15]="TEXT_INDEX",W[W.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",W[W.CIRCLE_INDEX=17]="CIRCLE_INDEX",function(W){W[W.FILL=1]="FILL",W[W.LINE=2]="LINE",W[W.SYMBOL=3]="SYMBOL",W[W.CIRCLE=4]="CIRCLE"}(x||(x={})),function(W){W[W.BACKGROUND=0]="BACKGROUND",W[W.OPAQUE=1]="OPAQUE",W[W.TRANSLUCENT=2]="TRANSLUCENT",W[W.SYMBOLS=3]="SYMBOLS",W[W.HITTEST=4]="HITTEST"}(w||(w={})),function(W){W[W.BACKGROUND=0]="BACKGROUND",W[W.FILL=1]="FILL",W[W.OUTLINE=2]="OUTLINE",W[W.LINE=3]="LINE",W[W.ICON=4]="ICON",W[W.CIRCLE=5]="CIRCLE",W[W.TEXT=6]="TEXT",W[W.TILEINFO=7]="TILEINFO"}(B||(B={})),function(W){W[W.PAINTER_CHANGED=0]="PAINTER_CHANGED",W[W.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",W[W.LAYER_CHANGED=2]="LAYER_CHANGED",W[W.LAYER_REMOVED=3]="LAYER_REMOVED",W[W.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(U||(U={}))},93292:(qe,xe,T)=>{"use strict";T.d(xe,{cD:()=>U,sy:()=>w});var D=T(67969),x=T(40852);const w={geometry:[new x.G("a_pos",2,D.g.BYTE,0,2)]},U=(new x.G("a_pos",2,D.g.BYTE,0,4),new x.G("a_tex",2,D.g.BYTE,2,4),{geometry:[new x.G("a_pos",2,D.g.UNSIGNED_SHORT,0,4)]})},58098:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(27899);class x{constructor(B,U,W,Y){this.set(B,U,W,Y)}static getId(B,U,W,Y){return"object"==typeof B?`${B.level}/${B.row}/${B.col}/${B.world}`:`${B}/${U}/${W}/${Y}`}get key(){return this}get id(){return this.toString()}set id(B){this.set(B)}get hash(){return(3&this.world)<<30|(4095&this.col)<<22|(4095&this.row)<<8|63&this.level}acquire(B,U,W,Y){this.set(B,U,W,Y)}contains(B){const U=B.level-this.level;return this.row===B.row>>U&&this.col===B.col>>U&&this.world===B.world}equals(B){return this.level===B.level&&this.row===B.row&&this.col===B.col&&this.world===B.world}clone(){return new x(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(B,U,W,Y){if(null==B)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof B)this.level=B.level||0,this.row=B.row||0,this.col=B.col||0,this.world=B.world||0;else if("string"==typeof B){const[H,G,$,re]=B.split("/");this.level=parseFloat(H),this.row=parseFloat(G),this.col=parseFloat($),this.world=parseFloat(re)}else this.level=+B,this.row=+U,this.col=+W,this.world=+Y||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new x(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const B=this.level+1,U=this.row<<1,W=this.col<<1,Y=this.world;return[new x(B,U,W,Y),new x(B,U,W+1,Y),new x(B,U+1,W,Y),new x(B,U+1,W+1,Y)]}compareRowMajor(B){return this.row<B.row?-1:this.row>B.row?1:this.col<B.col?-1:this.col>B.col?1:0}}x.pool=new D.Z(x,null,null,25,50)},12015:(qe,xe,T)=>{"use strict";T.d(xe,{YF:()=>B,co:()=>U,hZ:()=>W,yl:()=>w});var B,U,W,Y,D=T(43703),x=T(28093);class w{constructor(){this.startTime=0,this.startTimeHeightFade=0,this.cameraPositionLastFrame=(0,x.c)(),this.parallax={anchorPointClouds:(0,x.c)(),cloudsHeight:1e5,radiusCurvatureCorrectionFactor:0,transform:(0,D.c)()},this.parallaxNew={anchorPointClouds:(0,x.c)(),cloudsHeight:1e5,radiusCurvatureCorrectionFactor:0,transform:(0,D.c)()},this.crossFade={enabled:!1,factor:0,distanceThresholdFactor:.3},this.fadeInOut={stage:U.FINISHED,factor:0,distanceThresholdFactor:.6},this.fadeIn={stage:B.FINISHED,factor:0,distanceThresholdFactor:2},this.fadeInOutHeight={stage:W.FINISHED,factor:-1}}}(Y=B||(B={}))[Y.FINISHED=0]="FINISHED",Y[Y.CHANGE_ANCHOR=1]="CHANGE_ANCHOR",Y[Y.FADE_IN=2]="FADE_IN",function(Y){Y[Y.FINISHED=0]="FINISHED",Y[Y.FADE_OUT=1]="FADE_OUT",Y[Y.SWITCH=2]="SWITCH",Y[Y.FADE_IN=3]="FADE_IN"}(U||(U={})),function(Y){Y[Y.FINISHED=0]="FINISHED",Y[Y.HEIGHT_FADE=1]="HEIGHT_FADE"}(W||(W={}))},32849:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>w,t:()=>B});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.SIXTEEN=0]="SIXTEEN",U[U.HUNDRED=1]="HUNDRED",U[U.TWOHUNDRED=2]="TWOHUNDRED",U[U.COUNT=3]="COUNT";class B extends x.m{constructor(){super(...arguments),this.steps=w.SIXTEEN}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"steps",void 0)},64312:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>B,u:()=>w});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.Full=0]="Full",U[U.WeatherMap=1]="WeatherMap",U[U.COUNT=2]="COUNT";class B extends x.m{constructor(){super(...arguments),this.mode=w.Full}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"mode",void 0)},85755:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>Y,IQ:()=>U,I_:()=>x,QZ:()=>H,iZ:()=>W,jy:()=>B,kR:()=>w});const x=(0,T(8314).Z)("esri-mobile")?64:128,w=x/128,B=Math.ceil(Math.sqrt(x)),U=(x+2)*B,W=1e5,Y=128,H=U/1560},6067:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>w,Y:()=>B});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.Rain=0]="Rain",U[U.Snow=1]="Snow",U[U.COUNT=2]="COUNT";class B extends x.m{constructor(){super(...arguments),this.type=w.Rain}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"type",void 0)},49115:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>B,n:()=>w});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.Cone=0]="Cone",U[U.Cylinder=1]="Cylinder",U[U.Underground=2]="Underground",U[U.COUNT=3]="COUNT";class B extends x.m{constructor(){super(...arguments),this.geometry=w.Cone}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"geometry",void 0)},9160:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>H});var D=T(15861),x=T(84792),w=T(59213),B=T(26584),U=T(62208),W=T(10699),Y=T(21726);class H{constructor(re){this.streamDataRequester=re}loadJSON(re,ue){var ae=this;return(0,D.Z)(function*(){return ae._load("json",re,ue)})()}loadBinary(re,ue){var ae=this;return(0,D.Z)(function*(){return(0,Y.HK)(re)?((0,W.k_)(ue),(0,Y.AH)(re)):ae._load("binary",re,ue)})()}loadImage(re,ue){var ae=this;return(0,D.Z)(function*(){return ae._load("image",re,ue)})()}_load(re,ue,ae){var oe=this;return(0,D.Z)(function*(){if((0,U.Wi)(oe.streamDataRequester))return(yield(0,x.default)(ue,{responseType:G[re]})).data;const ie=yield(0,w.q6)(oe.streamDataRequester.request(ue,re,ae));if(!0===ie.ok)return ie.value;throw(0,W.r9)(ie.error),new B.Z("",`Request for resource failed: ${ie.error}`)})()}}const G={image:"image",binary:"array-buffer",json:"json"}},96170:(qe,xe,T)=>{"use strict";T.d(xe,{DA:()=>B,jX:()=>U,nh:()=>w});var D=T(55713),x=T(36848);function w(W,Y=x.p){return"number"==typeof W?Y(W):(0,D.Uc)(W)||(0,D.lq)(W)?new Uint32Array(W):W}function B(W){const Y="number"==typeof W?W:W.length;if(Y<3)return new Uint16Array(0);const H=Y-2,G=H<=65536?new Uint16Array(3*H):new Uint32Array(3*H);if("number"==typeof W){let $=0;for(let re=0;re<H;re+=1)re%2==0?(G[$++]=re,G[$++]=re+1,G[$++]=re+2):(G[$++]=re+1,G[$++]=re,G[$++]=re+2)}else{let $=0;for(let re=0;re<H;re+=1)if(re%2==0){const ae=W[re+1],oe=W[re+2];G[$++]=W[re],G[$++]=ae,G[$++]=oe}else{const ae=W[re],oe=W[re+2];G[$++]=W[re+1],G[$++]=ae,G[$++]=oe}}return G}function U(W){const Y="number"==typeof W?W:W.length;if(Y<3)return new Uint16Array(0);const H=Y-2,G=H<=65536?new Uint16Array(3*H):new Uint32Array(3*H);if("number"==typeof W){let $=0;for(let re=0;re<H;++re)G[$++]=0,G[$++]=re+1,G[$++]=re+2;return G}{const $=W[0];let re=W[1],ue=0;for(let ae=0;ae<H;++ae){const oe=W[ae+2];G[ue++]=$,G[ue++]=re,G[ue++]=oe,re=oe}return G}}},93831:(qe,xe,T)=>{"use strict";T.d(xe,{z:()=>Ke});var D=T(15861),x=T(62208),w=T(43703),B=T(26584);const W=T(63290).Z.getLogger("esri.views.3d.glTF");var ee,le,it,H=T(67969),re=T(94573),ue=T(88159),ae=T(21726),oe=T(10349),ie=T(28347),X=T(48977),Z=T(78451),Q=T(60479),J=T(98148);class se{constructor(Xe){this.data=Xe,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const Xe=this.offset4;return this.offset4+=1,this.dataUint32[Xe]}readUint8Array(Xe){const rt=4*this.offset4;return this.offset4+=Xe/4,new Uint8Array(this.data,rt,Xe)}remainingBytes(){return this.data.byteLength-4*this.offset4}}(it=ee||(ee={})).SCALAR="SCALAR",it.VEC2="VEC2",it.VEC3="VEC3",it.VEC4="VEC4",it.MAT2="MAT2",it.MAT3="MAT3",it.MAT4="MAT4",function(it){it[it.ARRAY_BUFFER=34962]="ARRAY_BUFFER",it[it.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(le||(le={}));const ne={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},ce={pbrMetallicRoughness:ne,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},de={ESRI_externalColorMixMode:"tint"},me=(it={})=>{const Xe={...ne,...it.pbrMetallicRoughness},rt=function _e(it){switch(it.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,re.Bg)(it.ESRI_externalColorMixMode),it.ESRI_externalColorMixMode="tint"}return it}({...de,...it.extras});return{...ce,...it,pbrMetallicRoughness:Xe,extras:rt}},he={magFilter:H.cw.LINEAR,minFilter:H.cw.LINEAR_MIPMAP_LINEAR,wrapS:H.e8.REPEAT,wrapT:H.e8.REPEAT};class ve{constructor(Xe,rt,Ze,lt,st){this.context=Xe,this.errorContext=rt,this.uri=Ze,this.json=lt,this.glbBuffer=st,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function fe(it){let Xe,rt;return it.replace(/^(.*\/)?([^/]*)$/,(Ze,lt,st)=>(Xe=lt||"",rt=st||"","")),{dirPart:Xe,filePart:rt}}(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),rt.errorUnsupportedIf(null==lt.scenes,"Scenes must be defined."),rt.errorUnsupportedIf(null==lt.meshes,"Meshes must be defined"),rt.errorUnsupportedIf(null==lt.nodes,"Nodes must be defined."),this._computeNodeParents()}static load(Xe,rt,Ze,lt){var st=this;return(0,D.Z)(function*(){if((0,ae.HK)(Ze)){const kt=(0,ae.sJ)(Ze);if("model/gltf-binary"!==kt.mediaType)try{const zt=JSON.parse(kt.isBase64?atob(kt.data):kt.data);return new ve(Xe,rt,Ze,zt)}catch{}const wt=(0,ae.AH)(Ze);if(ve._isGLBData(wt))return st._fromGLBData(Xe,rt,Ze,wt)}if(Ze.endsWith(".gltf")){const kt=yield Xe.loadJSON(Ze,lt);return new ve(Xe,rt,Ze,kt)}const Mt=yield Xe.loadBinary(Ze,lt);if(ve._isGLBData(Mt))return st._fromGLBData(Xe,rt,Ze,Mt);const Ft=yield Xe.loadJSON(Ze,lt);return new ve(Xe,rt,Ze,Ft)})()}static _isGLBData(Xe){const rt=new se(Xe);return rt.remainingBytes()>=4&&1179937895===rt.readUint32()}static _fromGLBData(Xe,rt,Ze,lt){return(0,D.Z)(function*(){const st=yield ve._parseGLBData(rt,lt);return new ve(Xe,rt,Ze,st.json,st.binaryData)})()}static _parseGLBData(Xe,rt){return(0,D.Z)(function*(){const Ze=new se(rt);Xe.assert(Ze.remainingBytes()>=12,"GLB binary data is insufficiently large.");const lt=Ze.readUint32(),st=Ze.readUint32(),Mt=Ze.readUint32();Xe.assert(1179937895===lt,"Magic first 4 bytes do not fit to expected GLB value."),Xe.assert(rt.byteLength>=Mt,"GLB binary data is smaller than header specifies."),Xe.errorUnsupportedIf(2!==st,"An unsupported GLB container version was detected. Only version 2 is supported.");let Ft,kt,wt=0;for(;Ze.remainingBytes()>=8;){const zt=Ze.readUint32(),Zt=Ze.readUint32();0===wt?(Xe.assert(1313821514===Zt,"First GLB chunk must be JSON."),Xe.assert(zt>=0,"No JSON data found."),Ft=yield Ee(Ze.readUint8Array(zt))):1===wt?(Xe.errorUnsupportedIf(5130562!==Zt,"Second GLB chunk expected to be BIN."),kt=Ze.readUint8Array(zt)):Xe.warnUnsupported("More than 2 GLB chunks detected. Skipping."),wt+=1}return Ft||Xe.error("No GLB JSON chunk detected."),{json:Ft,binaryData:kt}})()}getBuffer(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.json.buffers[Xe],st=Ze.errorContext;if(null==lt.uri)return st.assert(null!=Ze.glbBuffer,"GLB buffer not present"),Ze.glbBuffer;const Mt=yield Ze._getBufferLoader(Xe,rt);return st.assert(Mt.byteLength===lt.byteLength,"Buffer byte lengths should match."),Mt})()}_getBufferLoader(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.bufferLoaders.get(Xe);if(lt)return lt;const Mt=Ze.context.loadBinary(Ze._resolveUri(Ze.json.buffers[Xe].uri),rt).then(Ft=>new Uint8Array(Ft));return Ze.bufferLoaders.set(Xe,Mt),Mt})()}getAccessor(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.errorUnsupportedIf(!Ze.json.accessors,"Accessors missing.");const st=Ze.json.accessors[Xe];lt.errorUnsupportedIf(null==st?.bufferView,"Some accessor does not specify a bufferView."),lt.errorUnsupportedIf(st.type in[ee.MAT2,ee.MAT3,ee.MAT4],`AttributeType ${st.type} is not supported`);const Mt=Ze.json.bufferViews[st.bufferView],Ft=yield Ze.getBuffer(Mt.buffer,rt),kt=Le[st.type],wt=je[st.componentType],zt=kt*wt,Zt=Mt.byteStride||zt;return{raw:Ft.buffer,byteStride:Zt,byteOffset:Ft.byteOffset+(Mt.byteOffset||0)+(st.byteOffset||0),entryCount:st.count,isDenselyPacked:Zt===zt,componentCount:kt,componentByteSize:wt,componentType:st.componentType,min:st.min,max:st.max,normalized:!!st.normalized}})()}getIndexData(Xe,rt){var Ze=this;return(0,D.Z)(function*(){if(null==Xe.indices)return null;const lt=yield Ze.getAccessor(Xe.indices,rt);if(lt.isDenselyPacked)switch(lt.componentType){case H.g.UNSIGNED_BYTE:return new Uint8Array(lt.raw,lt.byteOffset,lt.entryCount);case H.g.UNSIGNED_SHORT:return new Uint16Array(lt.raw,lt.byteOffset,lt.entryCount);case H.g.UNSIGNED_INT:return new Uint32Array(lt.raw,lt.byteOffset,lt.entryCount)}else switch(lt.componentType){case H.g.UNSIGNED_BYTE:return(0,J.m)(Ze._wrapAccessor(Q.D_,lt));case H.g.UNSIGNED_SHORT:return(0,J.m)(Ze._wrapAccessor(Q.av,lt));case H.g.UNSIGNED_INT:return(0,J.m)(Ze._wrapAccessor(Q.Nu,lt))}})()}getPositionData(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.errorUnsupportedIf(null==Xe.attributes.POSITION,"No POSITION vertex data found.");const st=yield Ze.getAccessor(Xe.attributes.POSITION,rt);return lt.errorUnsupportedIf(st.componentType!==H.g.FLOAT,"Expected type FLOAT for POSITION vertex attribute, but found "+Pe[st.componentType]),lt.errorUnsupportedIf(3!==st.componentCount,"POSITION vertex attribute must have 3 components, but found "+st.componentCount.toFixed()),Ze._wrapAccessor(Q.ct,st)})()}getNormalData(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.assert(null!=Xe.attributes.NORMAL,"No NORMAL vertex data found.");const st=yield Ze.getAccessor(Xe.attributes.NORMAL,rt);return lt.errorUnsupportedIf(st.componentType!==H.g.FLOAT,"Expected type FLOAT for NORMAL vertex attribute, but found "+Pe[st.componentType]),lt.errorUnsupportedIf(3!==st.componentCount,"NORMAL vertex attribute must have 3 components, but found "+st.componentCount.toFixed()),Ze._wrapAccessor(Q.ct,st)})()}getTangentData(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.assert(null!=Xe.attributes.TANGENT,"No TANGENT vertex data found.");const st=yield Ze.getAccessor(Xe.attributes.TANGENT,rt);return lt.errorUnsupportedIf(st.componentType!==H.g.FLOAT,"Expected type FLOAT for TANGENT vertex attribute, but found "+Pe[st.componentType]),lt.errorUnsupportedIf(4!==st.componentCount,"TANGENT vertex attribute must have 4 components, but found "+st.componentCount.toFixed()),new Q.ek(st.raw,st.byteOffset,st.byteStride,st.byteOffset+st.byteStride*st.entryCount)})()}getTextureCoordinates(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.assert(null!=Xe.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const st=yield Ze.getAccessor(Xe.attributes.TEXCOORD_0,rt);return lt.errorUnsupportedIf(2!==st.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+st.componentCount.toFixed()),st.componentType===H.g.FLOAT?Ze._wrapAccessor(Q.Eu,st):(lt.errorUnsupportedIf(!st.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function ze(it){switch(it.componentType){case H.g.BYTE:return new Q.Vs(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);case H.g.UNSIGNED_BYTE:return new Q.xA(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);case H.g.SHORT:return new Q.or(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);case H.g.UNSIGNED_SHORT:return new Q.TS(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);case H.g.UNSIGNED_INT:return new Q.qt(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);case H.g.FLOAT:return new Q.Eu(it.raw,it.byteOffset,it.byteStride,it.byteOffset+it.byteStride*it.entryCount);default:return void(0,re.Bg)(it.componentType)}}(st))})()}getVertexColors(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.errorContext;lt.assert(null!=Xe.attributes.COLOR_0,"No COLOR_0 vertex data found.");const st=yield Ze.getAccessor(Xe.attributes.COLOR_0,rt);if(lt.errorUnsupportedIf(4!==st.componentCount&&3!==st.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+st.componentCount.toFixed()),4===st.componentCount){if(st.componentType===H.g.FLOAT)return Ze._wrapAccessor(Q.ek,st);if(st.componentType===H.g.UNSIGNED_BYTE)return Ze._wrapAccessor(Q.mc,st);if(st.componentType===H.g.UNSIGNED_SHORT)return Ze._wrapAccessor(Q.v6,st)}else if(3===st.componentCount){if(st.componentType===H.g.FLOAT)return Ze._wrapAccessor(Q.ct,st);if(st.componentType===H.g.UNSIGNED_BYTE)return Ze._wrapAccessor(Q.ne,st);if(st.componentType===H.g.UNSIGNED_SHORT)return Ze._wrapAccessor(Q.mw,st)}lt.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+Pe[st.componentType])})()}hasPositions(Xe){return void 0!==Xe.attributes.POSITION}hasNormals(Xe){return void 0!==Xe.attributes.NORMAL}hasVertexColors(Xe){return void 0!==Xe.attributes.COLOR_0}hasTextureCoordinates(Xe){return void 0!==Xe.attributes.TEXCOORD_0}hasTangents(Xe){return void 0!==Xe.attributes.TANGENT}getMaterial(Xe,rt,Ze){var lt=this;return(0,D.Z)(function*(){let st=lt.materialCache.get(Xe.material);if(!st){const Mt=null!=Xe.material?me(lt.json.materials[Xe.material]):me(),Ft=Mt.pbrMetallicRoughness,kt=lt.hasVertexColors(Xe),wt=lt.getTexture(Ft.baseColorTexture,rt),zt=lt.getTexture(Mt.normalTexture,rt),Zt=Ze?lt.getTexture(Mt.occlusionTexture,rt):null,ar=Ze?lt.getTexture(Mt.emissiveTexture,rt):null,Pr=Ze?lt.getTexture(Ft.metallicRoughnessTexture,rt):null,kr=null!=Xe.material?Xe.material:-1;st={alphaMode:Mt.alphaMode,alphaCutoff:Mt.alphaCutoff,color:Ft.baseColorFactor,doubleSided:!!Mt.doubleSided,colorTexture:yield wt,normalTexture:yield zt,name:Mt.name,id:kr,occlusionTexture:yield Zt,emissiveTexture:yield ar,emissiveFactor:Mt.emissiveFactor,metallicFactor:Ft.metallicFactor,roughnessFactor:Ft.roughnessFactor,metallicRoughnessTexture:yield Pr,hasVertexColors:kt,ESRI_externalColorMixMode:Mt.extras.ESRI_externalColorMixMode}}return st})()}getTexture(Xe,rt){var Ze=this;return(0,D.Z)(function*(){if(!Xe)return null;Ze.errorContext.errorUnsupportedIf(0!==(Xe.texCoord||0),"Only TEXCOORD with index 0 is supported.");const lt=Xe.index,st=Ze.errorContext,Mt=Ze.json.textures[lt],Ft=(it=>({...he,...it}))(null!=Mt.sampler?Ze.json.samplers[Mt.sampler]:{});st.errorUnsupportedIf(null==Mt.source,"Source is expected to be defined for a texture.");const kt=Ze.json.images[Mt.source],wt=yield Ze._loadTextureImageData(lt,Mt,rt);return(0,ue.s1)(Ze.textureCache,lt,()=>{const zt=ar=>33071===ar||33648===ar||10497===ar,Zt=ar=>(st.error(`Unexpected TextureSampler WrapMode: ${ar}. Using default REPEAT(10497).`),10497);return{data:wt,wrapS:zt(Ft.wrapS)?Ft.wrapS:Zt(Ft.wrapS),wrapT:zt(Ft.wrapT)?Ft.wrapT:Zt(Ft.wrapT),minFilter:Ft.minFilter,name:kt.name,id:lt}})})()}getNodeTransform(Xe){if(void 0===Xe)return ge;let rt=this.nodeTransformCache.get(Xe);if(!rt){const Ze=this.getNodeTransform(this._getNodeParent(Xe)),lt=this.json.nodes[Xe];lt.matrix?rt=(0,ie.m)((0,w.c)(),Ze,lt.matrix):lt.translation||lt.rotation||lt.scale?(rt=(0,w.b)(Ze),lt.translation&&(0,ie.j)(rt,rt,lt.translation),lt.rotation&&(Te[3]=(0,X.g)(Te,lt.rotation),(0,ie.e)(rt,rt,Te[3],Te)),lt.scale&&(0,ie.h)(rt,rt,lt.scale)):rt=Ze,this.nodeTransformCache.set(Xe,rt)}return rt}_wrapAccessor(Xe,rt){return new Xe(rt.raw,rt.byteOffset,rt.byteStride,rt.byteOffset+rt.byteStride*(rt.entryCount-1)+rt.componentByteSize*rt.componentCount)}_resolveUri(Xe){return(0,ae.hF)(Xe,this.baseUri)}_getNodeParent(Xe){return this.nodeParentMap.get(Xe)}_checkVersionSupported(){const Xe=oe.G.parse(this.json.asset.version,"glTF");Ce.validate(Xe)}_checkRequiredExtensionsSupported(){const Xe=this.json;Xe.extensionsRequired&&0!==Xe.extensionsRequired.length&&this.errorContext.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+Xe.extensionsRequired.join(", "))}_computeNodeParents(){this.json.nodes.forEach((Xe,rt)=>{Xe.children&&Xe.children.forEach(Ze=>{this.nodeParentMap.set(Ze,rt)})})}_loadTextureImageData(Xe,rt,Ze){var lt=this;return(0,D.Z)(function*(){const st=lt.textureLoaders.get(Xe);if(st)return st;const Mt=lt._createTextureLoader(rt,Ze);return lt.textureLoaders.set(Xe,Mt),Mt})()}_createTextureLoader(Xe,rt){var Ze=this;return(0,D.Z)(function*(){const lt=Ze.json.images[Xe.source];if(lt.uri)return Ze.context.loadImage(Ze._resolveUri(lt.uri),rt);const st=Ze.errorContext;st.errorUnsupportedIf(null==lt.bufferView,"Image bufferView must be defined."),st.errorUnsupportedIf(null==lt.mimeType,"Image mimeType must be defined.");const Mt=Ze.json.bufferViews[lt.bufferView],Ft=yield Ze.getBuffer(Mt.buffer,rt);return st.errorUnsupportedIf(null!=Mt.byteStride,"byteStride not supported for image buffer"),function we(it,Xe){return Be.apply(this,arguments)}(new Uint8Array(Ft.buffer,Ft.byteOffset+(Mt.byteOffset||0),Mt.byteLength),lt.mimeType)})()}}const Ce=new oe.G(2,0,"glTF"),ge=(0,ie.z)((0,w.c)(),Math.PI/2),Te=(0,Z.a)(),Le={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},je={[H.g.BYTE]:1,[H.g.UNSIGNED_BYTE]:1,[H.g.SHORT]:2,[H.g.UNSIGNED_SHORT]:2,[H.g.FLOAT]:4,[H.g.UNSIGNED_INT]:4};function Ee(it){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,D.Z)(function*(it){return new Promise((Xe,rt)=>{const Ze=new Blob([it]),lt=new FileReader;lt.onload=()=>{Xe(JSON.parse(lt.result))},lt.onerror=st=>{rt(st)},lt.readAsText(Ze)})}),Ae.apply(this,arguments)}function Be(){return Be=(0,D.Z)(function*(it,Xe){return new Promise((rt,Ze)=>{const lt=new Blob([it],{type:Xe}),st=URL.createObjectURL(lt),Mt=new Image;Mt.addEventListener("load",()=>{URL.revokeObjectURL(st),"decode"in Mt?Mt.decode().then(()=>rt(Mt),()=>rt(Mt)):rt(Mt)}),Mt.addEventListener("error",Ft=>{URL.revokeObjectURL(st),Ze(Ft)}),Mt.src=st})}),Be.apply(this,arguments)}const Pe={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let Oe=0;function Ke(it,Xe){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,D.Z)(function*(it,Xe,rt={},Ze=!0){const lt=yield ve.load(it,$e,Xe,rt),st="gltf_"+Oe++,Mt={lods:[],materials:new Map,textures:new Map,meta:Ne(lt)},Ft=!(!lt.json.asset.extras||"symbolResource"!==lt.json.asset.extras.ESRI_type),kt=new Map;yield Ie(lt,function(){var wt=(0,D.Z)(function*(zt,Zt,ar,Pr){const kr=kt.get(ar)??0;kt.set(ar,kr+1);const ss=void 0!==zt.mode?zt.mode:H.MX.TRIANGLES,os=ss===H.MX.TRIANGLES||ss===H.MX.TRIANGLE_STRIP||ss===H.MX.TRIANGLE_FAN?ss:null;if((0,x.Wi)(os))return void $e.warnUnsupported("Unsupported primitive mode ("+nt[ss]+"). Skipping primitive.");if(!lt.hasPositions(zt))return void $e.warn("Skipping primitive without POSITION vertex attribute.");const Hr=lt.getPositionData(zt,rt),pt=lt.getMaterial(zt,rt,Ze),Ut=lt.hasNormals(zt)?lt.getNormalData(zt,rt):null,$t=lt.hasTangents(zt)?lt.getTangentData(zt,rt):null,Xt=lt.hasTextureCoordinates(zt)?lt.getTextureCoordinates(zt,rt):null,_r=lt.hasVertexColors(zt)?lt.getVertexColors(zt,rt):null,hr=lt.getIndexData(zt,rt),gr={transform:(0,w.b)(Zt),attributes:{position:yield Hr,normal:Ut?yield Ut:null,texCoord0:Xt?yield Xt:null,color:_r?yield _r:null,tangent:$t?yield $t:null},indices:yield hr,primitiveType:os,material:He(Mt,yield pt,st)};let vr=null;(0,x.pC)(Mt.meta)&&(0,x.pC)(Mt.meta.ESRI_lod)&&"screenSpaceRadius"===Mt.meta.ESRI_lod.metric&&(vr=Mt.meta.ESRI_lod.thresholds[ar]),Mt.lods[ar]=Mt.lods[ar]||{parts:[],name:Pr,lodThreshold:vr},Mt.lods[ar].parts[kr]=gr});return function(zt,Zt,ar,Pr){return wt.apply(this,arguments)}}());for(const wt of Mt.lods)wt.parts=wt.parts.filter(zt=>!!zt);return{model:Mt,meta:{isEsriSymbolResource:Ft,uri:lt.uri},customMeta:{}}}),Ve.apply(this,arguments)}function Ne(it){let rt=null;return it.json.nodes.forEach(Ze=>{const lt=Ze.extras;(0,x.pC)(lt)&&(lt.ESRI_proxyEllipsoid||lt.ESRI_lod)&&(rt=lt)}),rt}function Ie(it,Xe){return We.apply(this,arguments)}function We(){return We=(0,D.Z)(function*(it,Xe){const rt=it.json,Ze=rt.scenes[rt.scene||0].nodes,lt=Ze.length>1,st=[];for(const kt of Ze){const wt=rt.nodes[kt];st.push(Mt(kt,0)),Se(wt)&&!lt&&wt.extensions.MSFT_lod.ids.forEach((zt,Zt)=>Mt(zt,Zt+1))}function Mt(kt,wt){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,D.Z)(function*(kt,wt){const zt=rt.nodes[kt],Zt=it.getNodeTransform(kt);if($e.warnUnsupportedIf(null!=zt.weights,"Morph targets are not supported."),null!=zt.mesh){const ar=rt.meshes[zt.mesh];for(const Pr of ar.primitives)st.push(Xe(Pr,Zt,wt,ar.name))}for(const ar of zt.children||[])st.push(Mt(ar,wt))})).apply(this,arguments)}yield Promise.all(st)}),We.apply(this,arguments)}function Se(it){return it.extensions&&it.extensions.MSFT_lod&&Array.isArray(it.extensions.MSFT_lod.ids)}function He(it,Xe,rt){const Ze=st=>{const Mt=`${rt}_tex_${st&&st.id}${st&&st.name?"_"+st.name:""}`;if(st&&!it.textures.has(Mt)){const Ft=function $(it,Xe={}){return{data:it,parameters:{wrap:{s:H.e8.REPEAT,t:H.e8.REPEAT,...Xe.wrap},noUnpackFlip:!0,mipmap:!1,...Xe}}}(st.data,{wrap:{s:st.wrapS,t:st.wrapT},mipmap:et.includes(st.minFilter),noUnpackFlip:!0});it.textures.set(Mt,Ft)}return Mt},lt=`${rt}_mat_${Xe.id}_${Xe.name}`;if(!it.materials.has(lt)){const st=function G(it={}){return{color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply",...it}}({color:[Xe.color[0],Xe.color[1],Xe.color[2]],opacity:Xe.color[3],alphaMode:Xe.alphaMode,alphaCutoff:Xe.alphaCutoff,doubleSided:Xe.doubleSided,colorMixMode:Xe.ESRI_externalColorMixMode,textureColor:Xe.colorTexture?Ze(Xe.colorTexture):void 0,textureNormal:Xe.normalTexture?Ze(Xe.normalTexture):void 0,textureOcclusion:Xe.occlusionTexture?Ze(Xe.occlusionTexture):void 0,textureEmissive:Xe.emissiveTexture?Ze(Xe.emissiveTexture):void 0,textureMetallicRoughness:Xe.metallicRoughnessTexture?Ze(Xe.metallicRoughnessTexture):void 0,emissiveFactor:[Xe.emissiveFactor[0],Xe.emissiveFactor[1],Xe.emissiveFactor[2]],metallicFactor:Xe.metallicFactor,roughnessFactor:Xe.roughnessFactor});it.materials.set(lt,st)}return lt}const $e=new class Y{error(Xe){throw new B.Z("gltf-loader-error",Xe)}errorUnsupported(Xe){throw new B.Z("gltf-loader-unsupported-feature",Xe)}errorUnsupportedIf(Xe,rt){Xe&&this.errorUnsupported(rt)}assert(Xe,rt){Xe||this.error(rt)}warn(Xe){W.warn(Xe)}warnUnsupported(Xe){this.warn("[Unsupported Feature] "+Xe)}warnUnsupportedIf(Xe,rt){Xe&&this.warnUnsupported(rt)}},et=[H.cw.LINEAR_MIPMAP_LINEAR,H.cw.LINEAR_MIPMAP_NEAREST],nt=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},46807:(qe,xe,T)=>{"use strict";T.d(xe,{Lz:()=>X,RX:()=>ie,Wf:()=>ue,j3:()=>ae});var D=T(62208),x=T(28347),w=T(43703),B=T(84161),U=T(28093),W=T(55915),Y=T(81468),H=T(67225),G=T(93605),$=T(53929),re=T(16396);function ue(de,me,_e,he){const ye=de.stageObject,fe=ye.geometryRecords;let De=0;for(const ve of fe){const{update:Ce,averageGeometrySampledElevation:ge}=ce(ve,me,_e,he);De+=ge,Ce&&ye.geometryVertexAttrsUpdated(ve)}return De/fe.length}function ae(de,me,_e,he){const ye=de.stageObject,fe=me.centerPointInElevationSR;let De=0;ye.metadata.usesVerticalDistanceToGround?((0,Y.qZ)(fe,_e,me,he,ne),(0,H.CV)(ye,ne.verticalDistanceToGround),De=ne.sampledElevation):((0,Y.qZ)(fe,_e,me,he,ne),"absolute-height"!==me.mode&&(De=ne.sampledElevation));const ve=(0,x.c)(oe,ye.transformation),Ce=(0,B.s)(le,ve[12],ve[13],ve[14]);G.Z.TESTS_DISABLE_OPTIMIZATIONS?(Q[0]=fe.x,Q[1]=fe.y,Q[2]=ne.z,(0,W.Bm)(fe.spatialReference,Q,ve,he.spatialReference)&&(ye.transformation=ve)):he.setAltitudeOfTransformation(ne.z,ve);const ge=Z/he.unitInMeters;return(Math.abs(ve[12]-Ce[0])>=ge||Math.abs(ve[13]-Ce[1])>=ge||Math.abs(ve[14]-Ce[2])>=ge)&&(ye.transformation=ve),De}const oe=(0,w.c)();function ie(de,me,_e,he){const ye=de.graphics3DSymbolLayer.lodRenderer;if((0,D.Wi)(ye))return 0;const fe=me.centerPointInElevationSR;(0,Y.qZ)(fe,_e,me,he,ne);const De="absolute-height"!==me.mode?ne.sampledElevation:0,ve=ye.instanceData,Ce=de.instanceIndex,ge=ee;ve.getGlobalTransform(Ce,ge);const Te=(0,B.s)(le,ge[12],ge[13],ge[14]);G.Z.TESTS_DISABLE_OPTIMIZATIONS?(Q[0]=fe.x,Q[1]=fe.y,Q[2]=ne.z,(0,W.Bm)(fe.spatialReference,Q,ge,he.spatialReference)&&ve.setGlobalTransform(Ce,ge)):he.setAltitudeOfTransformation(ne.z,ge);const Le=Z/he.unitInMeters;return(G.Z.TESTS_DISABLE_OPTIMIZATIONS||Math.abs(ge[12]-Te[0])>=Le||Math.abs(ge[13]-Te[1])>=Le||Math.abs(ge[14]-Te[2])>=Le)&&ve.setGlobalTransform(Ce,ge),De}function X(de,me,_e,he){const ye=de.stageObject,fe=ye.geometryRecords;if(0===fe.length)return 0;let De=0,ve=null,Ce=0,ge=!1;for(const Te of fe){const Le=Te.geometry.vertexAttributes.get(re.T.POSITION);if(Le!==ve){const{update:je,averageGeometrySampledElevation:ze}=ce(Te,me,_e,he);Ce=ze,ve=Le,ge=je}ge&&ye.geometryVertexAttrsUpdated(Te),De+=Ce}return De/fe.length}const Z=.01,Q=(0,U.c)(),J=(0,U.c)(),se=(0,U.c)(),ee=(0,w.c)(),le=(0,U.c)(),ne=new Y.Lm;function ce(de,me,_e,he){let ye=!1;const fe=_e.spatialReference,De=de.geometry,ve=de.getShaderTransformation(),Ce=me.requiresSampledElevationInfo;J[0]=ve[12],J[1]=ve[13],J[2]=ve[14],De.invalidateBoundingInfo();const ge=De.getMutableAttribute(re.T.POSITION),Te=ge.data,Le=De.vertexAttributes.get(re.T.MAPPOS).data,je=ge.size,ze=Te.length/je,Ee=new $.sb(Le,fe);let Ae=0,we=0;for(let Be=0;Be<ze;Be++){if(se[0]=Te[Ae],se[1]=Te[Ae+1],se[2]=Te[Ae+2],(0,Y.qZ)(Ee,_e,me,he,ne),Ce&&(we+=ne.sampledElevation),G.Z.TESTS_DISABLE_OPTIMIZATIONS)Te[Ae]=Ee.array[Ee.offset],Te[Ae+1]=Ee.array[Ee.offset+1],Te[Ae+2]=ne.z,(0,W.CM)(Te,fe,Ae,Te,he.spatialReference,Ae,1),Te[Ae]-=J[0],Te[Ae+1]-=J[1],Te[Ae+2]-=J[2],ye=!0;else{Q[0]=Te[Ae]+J[0],Q[1]=Te[Ae+1]+J[1],Q[2]=Te[Ae+2]+J[2],he.setAltitude(Q,ne.z),Te[Ae]=Q[0]-J[0],Te[Ae+1]=Q[1]-J[1],Te[Ae+2]=Q[2]-J[2];const Pe=Z/he.unitInMeters;(Math.abs(se[0]-Te[Ae])>=Pe||Math.abs(se[1]-Te[Ae+1])>=Pe||Math.abs(se[2]-Te[Ae+2])>=Pe)&&(ye=!0)}Ae+=je,Ee.offset+=3}return we/=ze,{update:ye,averageGeometrySampledElevation:we}}},79112:(qe,xe,T)=>{"use strict";T.d(xe,{o:()=>B});var D=T(62208),x=T(29505),w=T(74746);class B{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(W){this._unit=W,this._metersPerElevationInfoUnit=(0,x.Z7)(W)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(W){this._meterUnitOffset=W,this._renderUnitOffset=0}set offsetElevationInfoUnits(W){this._meterUnitOffset=W*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(W){this._renderUnitOffset+=W}geometryZWithOffset(W,Y){const H=this.calculateOffsetRenderUnits(Y);return null!=this.featureExpressionInfoContext?H:W+H}calculateOffsetRenderUnits(W){let Y=this._meterUnitOffset;const H=this.featureExpressionInfoContext;return null!=H&&(Y+=(0,w.ht)(H)*this._metersPerElevationInfoUnit),Y/W.unitInMeters+this._renderUnitOffset}setFromElevationInfo(W){this.mode=W.mode,this.unit=(0,x.lt)(W.unit)?W.unit:"meters",this.offsetElevationInfoUnits=(0,D.Pt)(W.offset,0)}updateFeatureExpressionInfoContext(W,Y,H){if((0,D.Wi)(W))return void(this._featureExpressionInfoContext=null);const G=W&&W.arcade;G&&(0,D.pC)(Y)&&(0,D.pC)(H)?(this._featureExpressionInfoContext=(0,w.d9)(W),(0,w.aO)(this._featureExpressionInfoContext,(0,w.Tz)(G.modules,Y,H))):this._featureExpressionInfoContext=W}static fromElevationInfo(W){const Y=new B;return(0,D.pC)(W)&&Y.setFromElevationInfo(W),Y}}},39912:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>G,Y:()=>H});var D=T(15861),w=(T(29132),T(85931)),B=T(62208),U=T(10699),W=T(87091),Y=T(72854);class H{constructor(re,ue){this.spatialReference=re,this.view=ue}getElevation(re,ue,ae){return this.view.elevationProvider.getElevation(re,ue,0,this.spatialReference,ae)}queryElevation(re,ue,ae,oe,ie){var X=this;return(0,D.Z)(function*(){return X.view.elevationProvider.queryElevation(re,ue,0,X.spatialReference,ie,ae,oe)})()}}class G{constructor(re,ue,ae,oe){this.spatialReference=ue,this._getElevationQueryProvider=ae,this._queries=new Array,this._queryOptions={...oe,ignoreInvisibleLayers:!0},this._frameTask=re.registerTask(W.T8.ELEVATION_QUERY,this)}destroy(){this._frameTask.remove()}queryElevation(re,ue,ae,oe=0){return new Promise((ie,X)=>{const Z={x:re,y:ue,minDemResolution:oe,result:{resolve:ie,reject:X},signal:ae};this._queries.push(Z),(0,U.fu)(ae,()=>{(0,w.Od)(this._queries,Z),X((0,U.zE)())})})}get running(){return this._queries.length>0}runTask(){const re=this._queries;this._queries=[];const ue=this._getElevationQueryProvider();if(!ue)return void re.forEach(J=>J.result.reject());const ae=re.map(J=>[J.x,J.y]),oe=re.reduce((J,se)=>Math.min(J,se.minDemResolution),1/0),ie=new Y.Z({points:ae,spatialReference:this.spatialReference}),X=re.length>1&&re.some(J=>!!J.signal)?new AbortController:null,Z=(0,B.pC)(X)?X.signal:re[0].signal;if((0,B.pC)(X)){let J=0;re.forEach(se=>(0,U.fu)(se.signal,()=>{J++,se.result.reject((0,U.zE)()),J===re.length&&X.abort()}))}const Q={...this._queryOptions,minDemResolution:oe,signal:Z};ue.queryElevation(ie,Q).then(J=>{re.forEach((se,ee)=>{(0,B.pC)(se.signal)&&se.signal.aborted?se.result.reject((0,U.zE)()):se.result.resolve(J.geometry.points[ee][2])})}).catch(J=>{re.forEach(se=>se.result.reject(J))})}get test(){const re=this;return{update:()=>re._queries.length>0&&re.runTask()}}}},18170:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>$e});var D=T(63290),x=T(9824),w=T(15861),B=T(91558),U=T(62208),W=T(23841),Y=T(99770),H=T(46807),G=T(81468),$=T(79112),re=T(93927),ue=T(18422),ae=T(67225),oe=T(92690),ie=T(97161),X=T(42743),Z=T(52107),Q=T(40723),J=T(16396),se=T(9545),ee=T(19625),le=T(6945),ne=T(97347),ce=T(60881),de=T(5894),me=T(42037),_e=T(59617),he=T(651),ye=T(91056),fe=T(39114),De=T(12407),ve=T(76269),Ce=T(67969),ge=T(2078);class Te extends ye.A{initializeConfiguration(it,Xe){Xe.spherical=it.viewingMode===_e.JY.Global}initializeProgram(it){const Xe=Te.shader.get().build(this.configuration);return new De.$(it.rctx,Xe,fe.i)}setPipelineState(it){const Xe=it?Ce.wb.ALWAYS:Ce.wb.LESS;return(0,ge.sm)(this.configuration.depthHudEnabled?{depthTest:{func:Xe},depthWrite:ge.LZ}:{blending:(0,ge.wK)(Ce.zi.ONE,Ce.zi.SRC_ALPHA,Ce.zi.ONE_MINUS_SRC_ALPHA,Ce.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:Xe},colorWrite:ge.BK})}initializePipeline(){return this.setPipelineState(this.configuration.hasMultipassGeometry)}}Te.shader=new he.J(ve.L,()=>T.e(3807).then(T.bind(T,43807)));var Le=T(17626),je=T(87601),ze=T(41528);class Ee extends ze.W{constructor(){super(...arguments),this.screenCenterOffsetUnitsEnabled=ne.d.World,this.spherical=!1,this.occlusionTestEnabled=!0,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.depthHudEnabled=!1,this.depthHudAlignStartEnabled=!1,this.hasSlicePlane=!1,this.hasMultipassGeometry=!1}}(0,Le._)([(0,je.o)({count:ne.d.COUNT})],Ee.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"spherical",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"occlusionTestEnabled",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"hasVerticalOffset",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"hasScreenSizePerspective",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"depthHudEnabled",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"depthHudAlignStartEnabled",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"hasSlicePlane",void 0),(0,Le._)([(0,je.o)()],Ee.prototype,"hasMultipassGeometry",void 0),(0,Le._)([(0,je.o)({constValue:!0})],Ee.prototype,"hasSliceInVertexProgram",void 0),(0,Le._)([(0,je.o)({constValue:!1})],Ee.prototype,"isDraped",void 0);class Ae extends Q.F5{constructor(it){super(it,new Be),this.techniqueConfig=new Ee,this._uniqueMaterialIdentifier=Ae.uniqueMaterialIdentifier(this.parameters)}get uniqueMaterialIdentifier(){return this._uniqueMaterialIdentifier}getPassParameters(){return this.parameters}getConfiguration(it,Xe){const rt=Xe?.slot!==de.r.LINE_CALLOUTS;return this.techniqueConfig.occlusionTestEnabled=this.parameters.occlusionTest,this.techniqueConfig.hasVerticalOffset=(0,U.pC)(this.parameters.verticalOffset),this.techniqueConfig.hasScreenSizePerspective=(0,U.pC)(this.parameters.screenSizePerspective),this.techniqueConfig.depthHudEnabled=rt,this.techniqueConfig.depthHudAlignStartEnabled=!!this.parameters.depthHUDAlignStart,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits?ne.d.Screen:ne.d.World,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.hasMultipassGeometry=!!Xe&&Xe.multipassGeometry.enabled,this.techniqueConfig}intersect(){}requiresSlot(it){switch(it){case de.r.LINE_CALLOUTS:case de.r.LINE_CALLOUTS_HUD_DEPTH:return!0}return!1}createGLMaterial(it){return it.output===le.H.Color?new we(it):null}createBufferWriter(){return new Ke}validateParameters(it){const Xe=Ae.uniqueMaterialIdentifier(it);Xe!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=Xe)}static uniqueMaterialIdentifier(it){return JSON.stringify({screenOffset:it.screenOffset||[0,0],centerOffsetUnits:it.centerOffsetUnits||"world"})}}class we extends ce.Z{beginSlot(it){return this.ensureTechnique(Te,it)}}class Be extends Q.Mt{constructor(){super(...arguments),this.screenOffset=Y.Z,this.color=[0,0,0,1],this.size=1,this.occlusionTest=!1,this.shaderPolygonOffset=1e-5,this.depthHUDAlignStart=!1,this.centerOffsetUnits="world",this.hasSlicePlane=!1}}const Pe=(0,ee.U$)().vec3f(J.T.POSITION).vec3f(J.T.NORMAL).vec2f(J.T.UV0).vec4f(J.T.AUXPOS1),Oe=[(0,se.f)(0,0),(0,se.f)(1,0),(0,se.f)(0,1),(0,se.f)(1,0),(0,se.f)(1,1),(0,se.f)(0,1)];class Ke{constructor(){this.vertexBufferLayout=Pe}allocate(it){return this.vertexBufferLayout.createBuffer(it)}elementCount(it){return 6*it.indices.get(J.T.POSITION).length}write(it,Xe,rt,Ze){(0,me.ho)(Xe.indices.get(J.T.POSITION),Xe.vertexAttributes.get(J.T.POSITION).data,it.transformation,rt.position,Ze,6),(0,me.s5)(Xe.indices.get(J.T.NORMAL),Xe.vertexAttributes.get(J.T.NORMAL).data,it.invTranspTransformation,rt.normal,Ze,6),(0,me.SW)(Xe.indices.get(J.T.AUXPOS1),Xe.vertexAttributes.get(J.T.AUXPOS1).data,rt.auxpos1,Ze,6);for(let lt=0;lt<Oe.length;++lt)rt.uv0.setVec(Ze+lt,Oe[lt])}}class Ve extends ue.k{constructor(it,Xe){super(it,null,Xe,Se),this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1},this.ensureDrapedStatus(!1)}doLoad(){var it=this;return(0,w.Z)(function*(){it._material=new Ae(it.materialParameters),it._context.stage.add(it._material)})()}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null}_perInstanceMaterialParameters(it){const Xe=this.materialParameters;return Xe.screenOffset=it.screenOffset||Y.Z,Xe.centerOffsetUnits=it.centerOffsetUnits||"world",Xe}get materialParameters(){const it=this.symbol,Xe=it.callout,rt=(0,U.pC)(Xe.color)?B.Z.toUnitRGBA(Xe.color):[0,0,0,0];rt[3]*=this._getLayerOpacity();const Ze=(0,W.F2)(Xe.size||0);let lt=null;if(it.verticalOffset){const{screenLength:zt,minWorldLength:Zt,maxWorldLength:ar}=it.verticalOffset;lt={screenLength:(0,W.F2)(zt),minWorldLength:Zt||0,maxWorldLength:ar??1/0}}const st=(0,U.pC)(Xe.border)&&(0,U.pC)(Xe.border.color)?B.Z.toUnitRGBA(Xe.border.color):null,Mt="object"===it.symbolLayers.getItemAt(0).type;return{color:rt,size:Ze,verticalOffset:lt,screenSizePerspective:this._context.screenSizePerspectiveEnabled?this._context.sharedResources.screenSizePerspectiveSettings:null,screenOffset:[0,0],centerOffsetUnits:"world",borderColor:st,occlusionTest:!Mt,shaderPolygonOffset:Mt?0:void 0,depthHUDAlignStart:"label-3d"===it.type,hasSlicePlane:this._context.slicePlaneEnabled,renderOccluded:Q.yD.Occlude,__tagStrict:"NoParameters"}}_defaultElevationInfoNoZ(){return We}createGraphics3DGraphic(it){const Xe=it.renderingInfo,rt=it.graphic,Ze=this.setGraphicElevationContext(rt,new $.o,Xe.elevationOffset||0),lt=Xe.symbol,st="on-the-ground"===this._elevationContext.mode&&("cim"===lt.type||!lt.symbolLayers.some(Ft=>"object"===Ft.type||"text"===Ft.type));if("label-3d"!==lt.type&&st||"point-3d"===lt.type&&lt.symbolLayers.every(Ft=>"text"===Ft.type&&!(0,x.as)(Ft)))return null;const Mt=(0,ae.zE)(rt.geometry);return(0,U.Wi)(Mt)?null:this._createAs3DShape(Mt,Ze,Xe,rt.uid)}layerOpacityChanged(){return(0,U.Wi)(this._material)||this._material.setParameters(this.materialParameters),!0}layerElevationInfoChanged(it,Xe,rt){const lt=(0,G.GC)(Ve.elevationModeChangeTypes,rt,this._elevationContext.mode);return lt!==G.lO.UPDATE||it.forEach(st=>{const Mt=Xe(st);(0,U.pC)(Mt)&&this.updateGraphicElevationContext(st.graphic,Mt)}),lt}slicePlaneEnabledChanged(){return(0,U.Wi)(this._material)||this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!0}setGraphicElevationContext(it,Xe,rt=0){const Ze=super.setGraphicElevationContext(it,Xe);return Ze.addOffsetRenderUnits(rt),Ze}updateGraphicElevationContext(it,Xe){this.setGraphicElevationContext(it,Xe.elevationContext,Xe.metadata.elevationOffset),Xe.needsElevationUpdates=(0,G.Xf)(Xe.elevationContext.mode)}computeComplexity(){return{primitivesPerFeature:2,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!1,memory:ie.WU.memory}}_createVertexData(it){const{translation:Xe,centerOffset:rt}=it;return[[J.T.POSITION,Xe?{size:3,data:[Xe[0],Xe[1],Xe[2]],exclusive:!0}:{size:3,data:[0,0,0],exclusive:!0}],[J.T.NORMAL,{size:3,data:[0,0,1],exclusive:!0}],[J.T.AUXPOS1,rt?{size:4,data:[rt[0],rt[1],rt[2],rt[3]],exclusive:!0}:{size:4,data:[0,0,0,1],exclusive:!0}]]}_getOrCreateMaterial(it){const Xe=this._perInstanceMaterialParameters(it),rt=Ae.uniqueMaterialIdentifier(Xe);if((0,U.pC)(this._material)&&rt===this._material.uniqueMaterialIdentifier)return{material:this._material,isUnique:!1};if(it.materialCollection){let Ze=it.materialCollection.get(rt);return(0,U.Wi)(Ze)&&(Ze=new Ae(Xe),it.materialCollection.add(rt,Ze)),{material:Ze,isUnique:!1}}return{material:new Ae(Xe),isUnique:!0}}_createAs3DShape(it,Xe,rt,Ze){const lt=[new Z.Z(this._createVertexData(rt),Ie,X.MX.Point)],st=this._getOrCreateMaterial(rt),Mt=(0,oe.km)(this._context,it,lt,[st.material],Xe,this._context.layer.uid,Ze);if(null===Mt)return null;const Ft=new re.z(this,Mt.object,lt,st.isUnique?[st.material]:null,null,H.j3,Xe);return Ft.metadata={elevationOffset:rt.elevationOffset||0},Ft.alignedSampledElevation=Mt.sampledElevation,Ft.needsElevationUpdates=(0,G.Xf)(Xe.mode),(0,oe.dO)(Ft,it,this._context.elevationProvider),Ft}}Ve.elevationModeChangeTypes={definedChanged:G.lO.UPDATE,staysOnTheGround:G.lO.UPDATE,onTheGroundChanged:G.lO.RECREATE};const Ne=new Uint16Array([0]),Ie=[[J.T.POSITION,Ne],[J.T.NORMAL,Ne],[J.T.AUXPOS1,Ne]],We={mode:"relative-to-ground",offset:0},Se={ignoreDrivers:!0,renderPriority:0,renderPriorityStep:1},He=D.Z.getLogger("esri.views.3d.layers.graphics.Graphics3DCalloutSymbolLayerFactory");function $e(nt,it){if(!(0,x.Pd)(nt))return He.error("Graphics3DCalloutSymbolLayerFactory#make",`symbol of type '${nt.type}' does not support callouts`),null;if(!nt.callout)return null;const Xe=et[nt.callout.type];return Xe?new Xe(nt,it):(He.error("Graphics3DCalloutSymbolLayerFactory#make",`unknown or unsupported callout type ${nt.callout.type}`),null)}const et={line:Ve}},23641:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>D});class D{constructor(w,B,U){this.graphic=w,this.renderingInfo=B,this.layer=U}}},93927:(qe,xe,T)=>{"use strict";T.d(xe,{z:()=>re});var D=T(15861),x=T(62208),w=T(84161),B=T(28093),U=T(5548),W=T(97126),Y=T(74746),H=T(67225),G=T(42743),$=T(17803);class re{constructor(Q,J,se,ee,le,ne,ce,de=null){this.graphics3DSymbolLayer=Q,this.stageObject=J,this._uniqueGeometries=se,this._uniqueMaterials=ee,this._sharedResource=le,this.elevationAligner=ne,this.elevationContext=ce,this._edgeState=de,this.type="object3d",this._stageLayer=null,this._stage=null,this._visible=!1,this._addedToStage=!1,this.alignedSampledElevation=0,this.needsElevationUpdates=!1,this.useObjectOriginAsAttachmentOrigin=!1,this.graphics3DSymbolLayer=Q,this.stageObject=J}get isElevationSource(){return!(!this.stageObject.metadata||!this.stageObject.metadata.isElevationSource)}initialize(Q,J){this._stageLayer=J,this._stage=Q,Q.addMany(this._uniqueMaterials),Q.addMany(this._uniqueGeometries),Q.add(this.stageObject)}destroy(){const Q=this._stage;this._stageLayer&&(Q.removeMany(this._uniqueMaterials),Q.removeMany(this._uniqueGeometries)),Q.remove(this.stageObject),this._addedToStage&&(this._stageLayer.remove(this.stageObject),this._addedToStage=!1);const J=this._stage.renderView.ensureEdgeView();J.hasObject(this.stageObject)&&J.removeObject(this.stageObject),this.stageObject.dispose(),(0,x.pC)(this._sharedResource)&&this._sharedResource.release(),this._visible=!1,this._stageLayer=null,this._stage=null}layerOpacityChanged(Q,J){if((0,x.Wi)(this._edgeState))return;const se=ue(this._edgeState.baseMaterial);let ee=!1;for(const le of this._edgeState.edgeMaterials)le.objectTransparency!==se&&(le.objectTransparency=se,ee=!0);ee&&this._resetEdgeObject(J),this._stage.renderView.ensureEdgeView().updateAllComponentOpacities(this.stageObject,[Q])}slicePlaneEnabledChanged(Q,J){(0,x.Wi)(this._edgeState)||(this._stage.renderView.ensureEdgeView().updateAllComponentMaterials(this.stageObject,this._edgeState.edgeMaterials,{hasSlicePlane:Q},!J),this._edgeState.properties.hasSlicePlane=Q)}setVisibility(Q){if(null!=this._stage&&this._visible!==Q&&(this._visible=Q,this._visible?this._addedToStage?this.stageObject.setVisible(!0):(this._stageLayer.add(this.stageObject),this._addedToStage=!0):this.stageObject.setVisible(!1),(0,x.pC)(this._edgeState))){const J=this._stage.renderView.ensureEdgeView();J.hasObject(this.stageObject)?J.updateObjectVisibility(this.stageObject,Q):Q&&this._addOrUpdateEdgeObject(J,!1)}}get visible(){return this._visible}alignWithElevation(Q,J,se,ee){null!=this.elevationAligner&&((0,x.pC)(se)&&(0,Y.aO)(this.elevationContext.featureExpressionInfoContext,se),this.alignedSampledElevation=this.elevationAligner(this,this.elevationContext,Q,J),this._resetEdgeObject(ee))}getCenterObjectSpace(Q=(0,B.c)()){return(0,w.c)(Q,(0,W.g)(this.stageObject.boundingVolumeObjectSpace.bounds))}getBoundingBoxObjectSpace(Q=(0,U.Ue)()){const J=this.stageObject.boundingVolumeObjectSpace;return(0,U.op)(Q,J.min),(0,U.Tn)(Q,J.max),Q}computeAttachmentOrigin(Q){if(this.useObjectOriginAsAttachmentOrigin){const J=this.stageObject.transformation;Q.render.origin[0]+=J[12],Q.render.origin[1]+=J[13],Q.render.origin[2]+=J[14],Q.render.num++}else for(const J of this.stageObject.geometryRecords)J.computeAttachmentOrigin(ie)&&((0,w.m)(ie,ie,this.stageObject.transformation),(0,w.a)(Q.render.origin,Q.render.origin,ie),Q.render.num++)}getProjectedBoundingBox(Q,J,se,ee,le){var ne=this;return(0,D.Z)(function*(){const ce=ne.getBoundingBoxObjectSpace(le),de=X,me=(0,U.wp)(ce)?1:de.length;for(let he=0;he<me;he++){const ye=de[he];oe[0]=ce[ye[0]],oe[1]=ce[ye[1]],oe[2]=ce[ye[2]],(0,w.m)(oe,oe,ne.stageObject.transformation),ae[3*he+0]=oe[0],ae[3*he+1]=oe[1],ae[3*he+2]=oe[2]}if(!Q(ae,0,me))return null;(0,U.cS)(ce);let _e=null;ne.calculateRelativeScreenBounds&&(_e=ne.calculateRelativeScreenBounds());for(let he=0;he<3*me;he+=3){for(let ye=0;ye<3;ye++)ce[ye]=Math.min(ce[ye],ae[he+ye]),ce[ye+3]=Math.max(ce[ye+3],ae[he+ye]);_e&&se.push({location:ae.slice(he,he+3),screenSpaceBoundingRect:_e})}if(J&&J.service&&"absolute-height"!==ne.elevationContext.mode){(0,U.be)(ce,ie);const he="relative-to-scene"===ne.elevationContext.mode?"scene":"ground";let ye=0;if(J.useViewElevation)ye=(0,x.Pt)(J.service.getElevation(ie[0],ie[1],he),0);else try{const fe=(0,H.Si)(ce,J);ye=(0,x.Pt)(yield J.service.queryElevation(ie[0],ie[1],ee,fe,he),0)}catch{}(0,U.cv)(ce,0,0,-ne.alignedSampledElevation+ye)}return ce})()}addObjectState(Q,J){Q===G.V_.Highlight&&J.addObject(this.stageObject,this.stageObject.highlight()),Q===G.V_.MaskOccludee&&J.addObject(this.stageObject,this.stageObject.maskOccludee())}removeObjectState(Q){Q.removeObject(this.stageObject)}_resetEdgeObject(Q){if((0,x.Wi)(this._edgeState))return;const J=this._stage.renderView.ensureEdgeView();this._visible?this._addOrUpdateEdgeObject(J,Q):J.removeObject(this.stageObject)}_addOrUpdateEdgeObject(Q,J){const se=this._edgeState;if((0,x.Wi)(se))return;const ee=ue(se.baseMaterial);for(const le of se.edgeMaterials)le.objectTransparency=ee;Q.addOrUpdateObject3D(this.stageObject,se.edgeMaterials,se.properties,!J).then(()=>this._stageLayer?.sync())}}function ue(Z){return Z.isVisible?Z.parameters.transparent?$.i.TRANSPARENT:$.i.OPAQUE:$.i.INVISIBLE}const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],oe=(0,B.c)(),ie=(0,B.c)(),X=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]]},95428:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>Sm});var D=T(15861),x=T(59213),w=T(62208),B=T(10699),U=T(27306),W=T(27899),Y=T(67831),H=T(99770),G=T(84161),$=T(28093),re=T(37118),ue=T(55915),ae=T(5548),oe=T(65401),ie=T(38114),X=T(82054),Z=T(79721),Q=T(74746);const J=new W.Z(Array,Ct=>(0,ae.t8)(Ct,ae.xE),null,10,5),se=(0,oe.Ue)();class ee{constructor(Me,Ue,ke,ot,vt){this.graphic=Me,this.graphics3DSymbol=Ue,this.graphics=ke,this._labelGraphics=new Array,this._auxiliaryGraphics=new Array,this._visibilityFlags=function le(Ct,Me){const Ue=new Array(Ct);for(let ke=0;ke<Ue.length;ke++)Ue[ke]=new Array(Me);return Ue}(Z.E._COUNT,Z.P._COUNT),this._featureExpressionFeature=null,this._optimizedGeometry={geometry:null,hasZ:!1,hasM:!1},this._extent=null,this.isElevationSource=!1,++Ue.referenced,this._featureExpressionFeature=vt?(0,Q.Tz)(vt,Me,ot):null;for(const Lt of ke)(0,w.pC)(Lt)&&(this.isElevationSource=this.isElevationSource||Lt.isElevationSource)}get labelGraphics(){return this._labelGraphics}get extent(){return this._extent}initialize(Me,Ue){this._layer=Ue,this._stage=Me,this._forEachSymbolLayerGraphic(ke=>{ke.initialize(Me,Ue),ke.setVisibility(this.isVisible())})}destroy(){this._forEachSymbolLayerGraphic(Me=>Me.destroy()),this.graphics=null,this._auxiliaryGraphics=null,--this.graphics3DSymbol.referenced,this.graphics3DSymbol=null}get destroyed(){return null==this.graphics}clearLabelGraphics(){this._forEachLabelGraphic(Me=>Me.destroy()),this._labelGraphics.length=0}addLabelGraphic(Me,Ue,ke){this._labelGraphics.push(Me),Me.initialize(Ue,ke),Me.setVisibility(this.isVisible(Z.E.LABEL))}addAuxiliaryGraphic(Me){this._auxiliaryGraphics.push(Me),this._layer&&(Me.initialize(this._stage,this._layer),Me.setVisibility(this.isVisible()))}get isDraped(){let Me=!1;return this._forEachSymbolLayerGraphic(Ue=>{"draped"===Ue.type&&(Me=!0)}),Me}isVisible(Me=Z.E.GRAPHIC,Ue){for(let ke=0;ke<=Me;ke++){const ot=this._visibilityFlags[ke];for(let vt=0;vt<ot.length;++vt)if(!1===ot[vt]&&vt!==Ue)return!1}return!0}hasVisibilityFlag(Me,Ue){return null!=this._visibilityFlags[Ue][Me]}setVisibilityFlag(Me,Ue,ke){const ot=this.isVisible(ke);this._visibilityFlags[ke][Me]=Ue;const vt=this.isVisible(ke);if(ot===vt)return!1;if(ke===Z.E.LABEL)this._forEachLabelGraphic(Lt=>Lt.setVisibility(vt));else{this._forEachSymbolLayerGraphic(Yt=>Yt.setVisibility(vt));const Lt=this.isVisible(Z.E.LABEL);this._forEachLabelGraphic(Yt=>Yt.setVisibility(Lt))}return!0}clearVisibilityFlag(Me,Ue=Z.E.GRAPHIC){return this.setVisibilityFlag(Me,void 0,Ue)}computeExtent(Me){if(!this._extent){const Ue=this.graphic.geometry;if((0,w.Wi)(Ue))return!1;this._extent=(0,oe.Ue)(),(0,ie.TF)(Ue,this._extent);const ke=Ue.spatialReference;if(!ke.equals(Me)&&!(0,ue.dH)(this._extent,ke,this._extent,Me))return this._extent=null,!1}return!0}getAsOptimizedGeometry(Me,Ue){return(0,w.pC)(this._optimizedGeometry.geometry)&&this._optimizedGeometry.hasZ===Me&&this._optimizedGeometry.hasM===Ue||(this._optimizedGeometry.geometry=this._convertGraphicToOptimizedGeometry(this.graphic,Me,Ue),this._optimizedGeometry.hasZ=Me,this._optimizedGeometry.hasM=Ue),this._optimizedGeometry.geometry}_convertGraphicToOptimizedGeometry(Me,Ue,ke){let ot=Me.geometry;return"mesh"!==ot.type&&"extent"!==ot.type||(ot=re.Z.fromExtent("mesh"===ot.type?ot.extent:ot)),(0,X.GH)(ot,Ue,ke)}get usedMemory(){let Me=(0,U.f2)(this.graphic.attributes);return this._forEachSymbolLayerGraphic(Ue=>{const ke=Ue.graphics3DSymbolLayer.complexity;if((0,w.Wi)(ke))return;const ot="draped"===Ue.type?ke.memory.draped:ke.memory;Me+=ot.bytesPerFeature,ot.bytesPerCoordinate&&(Me+=(0,ie.R3)(this.graphic.geometry)*ot.bytesPerCoordinate)}),Me}computeAttachmentOrigin(){const Me={render:{origin:(0,$.c)(),num:0},draped:{origin:(0,H.a)(),num:0}};for(const Ue of this.graphics)(0,w.Wi)(Ue)||Ue.computeAttachmentOrigin(Me);return Me.render.num&&(0,G.g)(Me.render.origin,Me.render.origin,1/Me.render.num),Me.draped.num&&(0,Y.f)(Me.draped.origin,Me.draped.origin,1/Me.draped.num),Me}getProjectedBoundingBox(Me,Ue,ke,ot,vt){var Lt=this;return(0,D.Z)(function*(){return vt||(vt={boundingBox:null,requiresDrapedElevation:!1,screenSpaceObjects:[]}),vt.boundingBox?(0,ae.cS)(vt.boundingBox):vt.boundingBox=(0,ae.cS)(),vt.requiresDrapedElevation=!1,yield(0,x.Ed)(Lt.graphics,function(){var Yt=(0,D.Z)(function*(tr){if((0,w.Wi)(tr))return;const Or="draped"===tr.type?Ue:Me,Qr=J.acquire(),Vr=yield tr.getProjectedBoundingBox(Or,ke,vt.screenSpaceObjects,ot,Qr);isFinite(Vr[2])&&isFinite(Vr[5])||(vt.requiresDrapedElevation=!0),Vr&&(0,ae.TC)(vt.boundingBox,Qr),J.release(Qr)});return function(tr){return Yt.apply(this,arguments)}}()),(0,ae.sU)(vt.boundingBox)||(0,oe.sU)((0,ae.y8)(vt.boundingBox,se))?vt:null})()}needsElevationUpdates(){for(const Me of this.graphics)if((0,w.pC)(Me)&&("object3d"===Me.type||"lod-instance"===Me.type)&&Me.needsElevationUpdates)return!0;for(const Me of this._labelGraphics)if(Me&&Me.needsElevationUpdates)return!0;return!1}alignWithElevation(Me,Ue,ke){this._forEachRenderedGraphic(ot=>{"object3d"!==ot.type&&"lod-instance"!==ot.type||ot.alignWithElevation(Me,Ue,this._featureExpressionFeature,ke)})}addObjectStateSet(Me,Ue){this._forEachSymbolLayerGraphic(ke=>ke.addObjectState(Me,Ue))}removeObjectState(Me){this._forEachSymbolLayerGraphic(Ue=>Ue.removeObjectState(Me))}_forEachGraphicList(Me,Ue){Me.forEach(ke=>ke&&Ue(ke))}_forEachSymbolLayerGraphic(Me){this._forEachGraphicList(this.graphics,Me),this._forEachGraphicList(this._auxiliaryGraphics,Me)}_forEachLabelGraphic(Me){this._forEachGraphicList(this._labelGraphics,Me)}_forEachRenderedGraphic(Me){this._forEachSymbolLayerGraphic(Me),this._forEachLabelGraphic(Me)}}var ne=T(93927),ce=T(63290),de=T(26584),me=T(11915),_e=T(30217),he=T(550),ye=T(28347),fe=T(43703),De=T(60479),ve=T(79800),Ce=T(39256),ge=T(59617),Te=T(81468),Le=T(79112),je=T(18422),ze=T(67225),Ee=T(64538),we=(T(29132),T(85334)),Be=T(64835),Pe=T(52107),Oe=T(16396),Ke=T(2004);function Ve(Ct){const Me=[[Oe.T.POSITION,Ct.indices]],Ue=[[Oe.T.POSITION,{size:3,data:Ct.attributeData.position,exclusive:!0}]];return(0,w.pC)(Ct.attributeData.color)&&(Ue.push([Oe.T.COLOR,{size:4,data:Ct.attributeData.color,exclusive:!0}]),Me.push([Oe.T.COLOR,new Uint32Array(Ct.indices.length)])),(0,w.pC)(Ct.attributeData.uvMapSpace)&&(Ue.push([Oe.T.UVMAPSPACE,{size:4,data:Ct.attributeData.uvMapSpace,exclusive:!0}]),Me.push([Oe.T.UVMAPSPACE,Ct.indices])),(0,w.pC)(Ct.attributeData.boundingRect)&&(Ue.push([Oe.T.BOUNDINGRECT,{size:9,data:Ct.attributeData.boundingRect,exclusive:!0}]),Me.push([Oe.T.BOUNDINGRECT,Ct.indices])),(0,w.pC)(Ct.attributeData.mapPosition)&&(Ue.push([Oe.T.MAPPOS,{size:3,data:Ct.attributeData.mapPosition,exclusive:!0}]),Me.push([Oe.T.MAPPOS,Ct.indices])),new Pe.Z(Ue,Me)}function Ne(Ct){const Me=[[Oe.T.POSITION,Ct.indices],[Oe.T.UV0,Ct.indices]],Ue=[[Oe.T.POSITION,{size:3,data:Ct.attributeData.position,exclusive:!0}],[Oe.T.UV0,{size:2,data:Ct.attributeData.uv0,exclusive:!0}]];return(0,w.pC)(Ct.attributeData.mapPosition)&&(Ue.push([Oe.T.MAPPOS,{size:3,data:Ct.attributeData.mapPosition,exclusive:!0}]),Me.push([Oe.T.MAPPOS,Ct.indices])),new Pe.Z(Ue,Me)}function Ie(Ct){switch(Ct.type){case"extent":if(Ct instanceof Ke.Z)return re.Z.fromExtent(Ct);break;case"polygon":return Ct}return null}function We(Ct,Me,Ue,ke){const ot=(0,we.Mk)(Ct.rings,Ct.hasZ,we.ZI.CCW_IS_HOLE),vt=new Float64Array(ot.position.length),Lt=(0,Te.rR)(ot.position,Ct.spatialReference,0,vt,0,ot.position,0,ot.position.length/3,Me,Ue,ke),Yt=null!=Lt;return{position:ot.position,mapPosition:vt,polygons:$e(ot.polygons,ot.position,vt),outlines:He(ot.outlines,ot.position,vt),projectionSuccess:Yt,sampledElevation:Lt}}function Se(Ct,Me){const Ue=(0,we.Mk)(Ct.rings,!1,we.ZI.CCW_IS_HOLE),ke=(0,ue.CM)(Ue.position,Ct.spatialReference,0,Ue.position,Me,0,Ue.position.length/3);for(let ot=2;ot<Ue.position.length;ot+=3)Ue.position[ot]=Be.Rn;return{position:Ue.position,polygons:$e(Ue.polygons,Ue.position),outlines:He(Ue.outlines,Ue.position),projectionSuccess:ke}}function He(Ct,Me,Ue){const ke=new Array;for(const{index:ot,count:vt}of Ct){if(vt<=1)continue;const Lt=3*ot,Yt=Lt+3*vt;ke.push({index:ot,count:vt,position:Me.subarray(Lt,Yt),mapPosition:Ue?Ue.subarray(Lt,Yt):void 0})}return ke}function $e(Ct,Me,Ue){const ke=new Array;for(const{index:ot,count:vt,holeIndices:Lt,pathLengths:Yt}of Ct){if(vt<=1)continue;const tr=3*ot,Or=tr+3*vt,Qr=Lt.map(Vr=>Vr-ot);ke.push({index:ot,count:vt,holeIndices:Qr,pathLengths:Yt,position:Me.subarray(tr,Or),mapPosition:Ue?Ue.subarray(tr,Or):void 0})}return ke}var et=T(2180),nt=T(93605),it=T(53929),Xe=T(42743),rt=T(96867),Ze=T(28523);const lt=["polygon","extent"];function Mt(Ct,Me,Ue,ke){const ot=new Uint32Array(Ct.length),vt=[[Oe.T.POSITION,{size:3,data:Ue.positions,exclusive:!0}],[Oe.T.NORMAL,{size:3,data:Ue.normals,exclusive:!0}],[Oe.T.COLOR,{size:4,data:ke,exclusive:!0}],[Oe.T.SIZE,{size:1,data:Ue.heights,exclusive:!0}]],Lt=[[Oe.T.POSITION,Ct],[Oe.T.NORMAL,Ct],[Oe.T.COLOR,ot]];return Ue.elevation&&(vt.push([Oe.T.MAPPOS,{size:3,data:Ue.elevation}]),Lt.push([Oe.T.MAPPOS,Ct])),new Pe.Z(vt,Lt,Xe.MX.Triangle,Me)}function Ft(Ct,Me,Ue,ke,ot,vt,Lt,Yt,tr,Or,Qr,Vr,is,us){let Vs=0,Ri=2*ke.count;(function kt(Ct,Me,Ue,ke,ot,vt,Lt,Yt,tr,Or,Qr,Vr,is,us,_s,Vs,Ri,Fi){(0,G.c)(Xt,Ri);const bi=Vs>0?1:-1;let pi=3*Ue,Dn=Vr,qi=3*Dn,kn=Vr+ke,En=3*kn;for(let Qn=0;Qn<ke;++Qn)Fi&&(Xt[0]=Ct[pi+0],Xt[1]=Ct[pi+1],Xt[2]=Ct[pi+2],(0,G.n)(Xt,Xt)),Yt[qi+0]=Ct[pi+0],Yt[qi+1]=Ct[pi+1],Yt[qi+2]=Ct[pi+2],tr[qi+0]=Me[pi+0],tr[qi+1]=Me[pi+1],tr[qi+2]=Me[pi+2],Or[qi+0]=-bi*Xt[0],Or[qi+1]=-bi*Xt[1],Or[qi+2]=-bi*Xt[2],Qr[Dn]=0,Yt[En+0]=Ct[pi+0]+Vs*Xt[0],Yt[En+1]=Ct[pi+1]+Vs*Xt[1],Yt[En+2]=Ct[pi+2]+Vs*Xt[2],tr[En+0]=Me[pi+0],tr[En+1]=Me[pi+1],tr[En+2]=Me[pi+2],Or[En+0]=bi*Xt[0],Or[En+1]=bi*Xt[1],Or[En+2]=bi*Xt[2],Qr[kn]=Vs,qi+=3,En+=3,pi+=3,Dn+=1,kn+=1;pi=3*vt,qi=0,En=3*_s;const ho=Vs<0?gr:hr,Nn=Vs<0?hr:gr;for(let Qn=0;Qn<Lt;++Qn)us[qi+0]=ot[pi+ho[0]],us[qi+1]=ot[pi+ho[1]],us[qi+2]=ot[pi+ho[2]],is[En+0]=ot[pi+Nn[0]]+ke,is[En+1]=ot[pi+Nn[1]]+ke,is[En+2]=ot[pi+Nn[2]]+ke,qi+=3,En+=3,pi+=3})(Ct,Me,ke.index,ke.count,Ue,0,Ue.length/3,ot,vt,Lt,Yt,tr,Or,Qr,Ri,Vr,is,us),Ri=0,Zt(ot,vt,Yt,Lt,Vs,ke.pathLengths[0],ke.count,tr+=2*ke.count,Or,Ri,Vr),tr+=4*ke.pathLengths[0],Ri+=2*ke.pathLengths[0],Vs+=ke.pathLengths[0];for(let Fi=1;Fi<ke.pathLengths.length;++Fi)Zt(ot,vt,Yt,Lt,Vs,ke.pathLengths[Fi],ke.count,tr,Or,Ri,Vr),tr+=4*ke.pathLengths[Fi],Ri+=2*ke.pathLengths[Fi],Vs+=ke.pathLengths[Fi]}function wt(Ct,Me,Ue,ke,ot,vt,Lt){ke[vt]=ke[Lt],Ct[0+(vt*=3)]=Ct[0+(Lt*=3)],Ct[vt+1]=Ct[Lt+1],Ct[vt+2]=Ct[Lt+2],Me[vt+0]=Me[Lt+0],Me[vt+1]=Me[Lt+1],Me[vt+2]=Me[Lt+2],Ue[vt+0]=ot[0],Ue[vt+1]=ot[1],Ue[vt+2]=ot[2]}const zt=(0,$.c)();function Zt(Ct,Me,Ue,ke,ot,vt,Lt,Yt,tr,Or,Qr){let Vr=ot,is=ot+1,us=ot+Lt,_s=ot+Lt+1,Vs=Yt,Ri=Yt+1,Fi=Yt+2*vt,bi=Yt+2*vt+1;Qr<0&&(Vr=ot+Lt+1,_s=ot),Or*=3;for(let pi=0;pi<vt;++pi)pi===vt-1&&(Qr>0?(is=ot,_s=ot+Lt):(is=ot,Vr=ot+Lt)),Hr(Ct,Vr,is,us,zt),wt(Ct,Me,ke,Ue,zt,Vs,Vr),wt(Ct,Me,ke,Ue,zt,Ri,is),wt(Ct,Me,ke,Ue,zt,Fi,us),wt(Ct,Me,ke,Ue,zt,bi,_s),tr[Or++]=Vs,tr[Or++]=Fi,tr[Or++]=bi,tr[Or++]=Vs,tr[Or++]=bi,tr[Or++]=Ri,Vr++,is++,us++,_s++,Vs+=2,Ri+=2,Fi+=2,bi+=2}const ar=(0,$.c)(),Pr=(0,$.c)(),kr=(0,$.c)(),ss=(0,$.c)(),os=(0,$.c)();function Hr(Ct,Me,Ue,ke,ot){Me*=3,Ue*=3,ke*=3,(0,G.s)(ar,Ct[Me++],Ct[Me++],Ct[Me++]),(0,G.s)(Pr,Ct[Ue++],Ct[Ue++],Ct[Ue++]),(0,G.s)(kr,Ct[ke++],Ct[ke++],Ct[ke++]),(0,G.b)(ss,Pr,ar),(0,G.b)(os,kr,ar),(0,G.f)(ot,os,ss),(0,G.n)(ot,ot)}const pt=(0,$.c)();function Ut(Ct,Me,Ue,ke){const ot=Ct.stageObject,vt=ot.geometryRecords,Lt=vt.length,Yt="absolute-height"!==Me.mode;let tr=0;const Or=ot.transformation,Qr=(0,ye.a)((0,fe.c)(),Or);for(let Vr=0;Vr<Lt;Vr+=2){const is=vt[Vr].geometry,us=is.getMutableAttribute(Oe.T.POSITION).data,_s=is.vertexAttributes.get(Oe.T.SIZE).data,Vs=is.vertexAttributes.get(Oe.T.MAPPOS).data,Ri=new it.sb(Vs),Fi=us.length/3;let bi=0,pi=!1,Dn=0;const qi=Ue.spatialReference;for(let kn=0;kn<Fi;kn++){pt[0]=us[bi],pt[1]=us[bi+1],pt[2]=us[bi+2],(0,Te.qZ)(Ri,Ue,Me,ke,_r),Yt&&(Dn+=_r.sampledElevation),nt.Z.TESTS_DISABLE_OPTIMIZATIONS?((0,G.s)($t,Ri.array[Ri.offset+0],Ri.array[Ri.offset+1],_r.z+_s[bi/3]),ke.toRenderCoords($t,qi,$t),(0,G.m)($t,$t,Qr)):((0,G.s)($t,us[bi+0],us[bi+1],us[bi+2]),(0,G.m)($t,$t,Or),ke.setAltitude($t,_r.z+_s[bi/3]),(0,G.m)($t,$t,Qr)),us[bi]=$t[0],us[bi+1]=$t[1],us[bi+2]=$t[2];const En=vr/ke.unitInMeters;(Math.abs(pt[0]-us[bi])>=En||Math.abs(pt[1]-us[bi+1])>=En||Math.abs(pt[2]-us[bi+2])>=En)&&(pi=!0),Ri.offset+=3,bi+=3}pi&&(is.invalidateBoundingInfo(),ot.geometryVertexAttrsUpdated(vt[Vr]),vt[Vr+1].geometry.invalidateBoundingInfo(),ot.geometryVertexAttrsUpdated(vt[Vr+1])),tr+=Dn/Fi}return tr/Lt}const $t=(0,$.c)(),Xt=(0,$.c)(),_r=new Te.Lm,hr=[0,2,1],gr=[0,1,2],vr=.01;var Kr=T(91558),Jr=(T(20383),T(8314)),ns=T(23841),lr=T(21726),Tr=T(993),zr=T(4794),Tt=T(46679),sr=T(33215),Rr=T(86606),bt=T(39236),Qt=T(80960),qt=T(46807),yr=T(54840);class jr{constructor(Me,Ue,ke,ot){this.graphics3DSymbolLayer=Me,this.renderGeometries=Ue,this.boundingBox=ke,this._drapeSourceRenderer=ot,this.type="draped",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(Me){this.stage=Me}setVisibility(Me){if(null!=this.stage&&this._visible!==Me){if(this._visible=Me,Me&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,yr.$.Geometry.ADD);if(Me||this._addedToStage){for(const Ue of this.renderGeometries)Ue.instanceParameters.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,yr.$.State.VISIBILITIES)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,yr.$.Geometry.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(Me=(0,$.c)()){return(0,G.s)(Me,0,0,0)}getBoundingBoxObjectSpace(Me=(0,ae.Ue)()){return(0,ae.cS)(Me)}addObjectState(Me,Ue){Me===Xe.V_.Highlight&&(this.renderGeometries.forEach(ke=>{const ot=ke.addHighlight();Ue.addRenderGeometry(ke,ot,this)}),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,yr.$.State.HIGHLIGHTS))}removeObjectState(Me){this.renderGeometries.forEach(Ue=>{Me.removeRenderGeometry(Ue)})}removeRenderGeometryObjectState(Me,Ue){Me.removeHighlight(Ue),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,yr.$.State.HIGHLIGHTS)}computeAttachmentOrigin(Me){for(const Ue of this.renderGeometries)Ue.computeAttachmentOrigin(Is)&&(Me.draped.origin[0]+=Is[0],Me.draped.origin[1]+=Is[1],Me.draped.num++)}getProjectedBoundingBox(Me,Ue,ke,ot,vt){var Lt=this;return(0,D.Z)(function*(){(0,ae.cS)(vt);for(let Yt=0;Yt<Lt.renderGeometries.length;Yt++)Lt._getRenderGeometryProjectedBoundingRect(Lt.renderGeometries[Yt],Me,es,ke),(0,ae.VK)(vt,es);if(Ue){let Yt;(0,ae.be)(vt,Is);const tr=(0,ze.Si)(vt,Ue);try{Yt=yield Ue.service.queryElevation(Is[0],Is[1],ot,tr,"ground")}catch{}(0,w.pC)(Yt)&&(vt[2]=Math.min(vt[2],Yt),vt[5]=Math.max(vt[5],Yt))}return vt})()}_getRenderGeometryProjectedBoundingRect(Me,Ue,ke,ot){if(this.boundingBox)(0,ae.t8)(hs,this.boundingBox);else{const vt=Me.boundingSphere,Lt=vt[3];hs[0]=vt[0]-Lt,hs[1]=vt[1]-Lt,hs[2]=vt[2]-Lt,hs[3]=vt[0]+Lt,hs[4]=vt[1]+Lt,hs[5]=vt[2]+Lt}return Ue(hs,0,2),this.calculateRelativeScreenBounds&&ot.push({location:(0,ae.be)(hs),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),(0,ae.y8)(hs,ke)}}const es=(0,oe.Ue)(),hs=(0,ae.Ue)(),Is=(0,$.c)();var ps,zs,As,Ct,Yr=T(75688),Rs=T(92690),Zi=T(10596),Cr=T(21286),as=T(21254);function Ys(Ct){return null!=Ct}function di(Ct){return"number"==typeof Ct}function Nr(Ct){return"string"==typeof Ct}function ds(Ct,Me){Ct&&Ct.push(Me)}function Ci(Ct,Me,Ue,ke,ot){const vt=Ct.minSize,Lt=Ct.maxSize;if(Ct.expression)return ds(ot,"Could not convert size info: expression not supported"),!1;if(Ct.useSymbolValue){const Yt=ke.symbolSize[Ue];return Me.minSize[Ue]=Yt,Me.maxSize[Ue]=Yt,Me.offset[Ue]=Me.minSize[Ue],Me.factor[Ue]=0,Me.type[Ue]=ps.DefinedSize,!0}if(Ys(Ct.field))return Ys(Ct.stops)?2===Ct.stops.length&&di(Ct.stops[0].size)&&di(Ct.stops[1].size)?(gt(Ct.stops[0].size,Ct.stops[1].size,Ct.stops[0].value,Ct.stops[1].value,Me,Ue),Me.type[Ue]=ps.DefinedSize,!0):(ds(ot,"Could not convert size info: stops only supported with 2 elements"),!1):di(vt)&&di(Lt)&&Ys(Ct.minDataValue)&&Ys(Ct.maxDataValue)?(gt(vt,Lt,Ct.minDataValue,Ct.maxDataValue,Me,Ue),Me.type[Ue]=ps.DefinedSize,!0):null!=as.a[Ct.valueUnit]?(Me.minSize[Ue]=-1/0,Me.maxSize[Ue]=1/0,Me.offset[Ue]=0,Me.factor[Ue]=1/as.a[Ct.valueUnit],Me.type[Ue]=ps.DefinedSize,!0):"unknown"===Ct.valueUnit?(ds(ot,"Could not convert size info: proportional size not supported"),!1):(ds(ot,"Could not convert size info: scale-dependent size not supported"),!1);if(!Ys(Ct.field)){if(Ct.stops&&Ct.stops[0]&&di(Ct.stops[0].size))return Me.minSize[Ue]=Ct.stops[0].size,Me.maxSize[Ue]=Ct.stops[0].size,Me.offset[Ue]=Me.minSize[Ue],Me.factor[Ue]=0,Me.type[Ue]=ps.DefinedSize,!0;if(di(vt))return Me.minSize[Ue]=vt,Me.maxSize[Ue]=vt,Me.offset[Ue]=vt,Me.factor[Ue]=0,Me.type[Ue]=ps.DefinedSize,!0}return ds(ot,"Could not convert size info: unsupported variant of sizeInfo"),!1}function gt(Ct,Me,Ue,ke,ot,vt){const Lt=Math.abs(ke-Ue)>0?(Me-Ct)/(ke-Ue):0;ot.minSize[vt]=Lt>0?Ct:Me,ot.maxSize[vt]=Lt>0?Me:Ct,ot.offset[vt]=Ct-Ue*Lt,ot.factor[vt]=Lt}function bs(Ct,Me,Ue){Ct[4*Me+0]=Ue.r/255,Ct[4*Me+1]=Ue.g/255,Ct[4*Me+2]=Ue.b/255,Ct[4*Me+3]=Ue.a}function gi(Ct,Me,Ue){const ke=2===Ue&&"arithmetic"===Ct.rotationType;Me.offset[Ue]=ke?90:0,Me.factor[Ue]=ke?-1:1,Me.type[Ue]=1}function Di(Ct,Me,Ue){if(!Ct)return null;const ke=!Me.supportedTypes||!!Me.supportedTypes.size,ot=!Me.supportedTypes||!!Me.supportedTypes.color,vt=!Me.supportedTypes||!!Me.supportedTypes.rotation,Lt=!!Me.supportedTypes&&!!Me.supportedTypes.opacity,Yt=Ct.reduce((tr,Or)=>{if(!tr)return tr;if(Or.valueExpression)return ds(Ue,"Could not convert visual variables: arcade expressions not supported"),null;switch(Or.type){case"size":return ke?function Wr(Ct,Me,Ue,ke){if(Ct.normalizationField||Ct.valueRepresentation)return ds(ke,"Could not convert size info: unsupported property"),null;if(!function Ai(Ct){return null==Ct||Nr(Ct)}(Ct.field))return ds(ke,"Could not convert size info: field is not a string"),null;if(Me.size){if(Ct.field)if(Me.size.field){if(Ct.field!==Me.size.field)return ds(ke,"Could not convert size info: multiple fields in use"),null}else Me.size.field=Ct.field}else Me.size={field:Ct.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[ps.Undefined,ps.Undefined,ps.Undefined]};let ot;switch(Ct.axis){case"width":return ot=Ci(Ct,Me.size,0,Ue,ke),ot?Me:null;case"height":return ot=Ci(Ct,Me.size,2,Ue,ke),ot?Me:null;case"depth":return ot=Ci(Ct,Me.size,1,Ue,ke),ot?Me:null;case"width-and-depth":return ot=Ci(Ct,Me.size,0,Ue,ke),ot&&Ci(Ct,Me.size,1,Ue,ke),ot?Me:null;case null:case void 0:case"all":return ot=Ci(Ct,Me.size,0,Ue,ke),ot=ot&&Ci(Ct,Me.size,1,Ue,ke),ot=ot&&Ci(Ct,Me.size,2,Ue,ke),ot?Me:null;default:return ds(ke,`Could not convert size info: unknown axis "${Ct.axis}""`),null}}(Or,tr,Me,Ue):tr;case"color":return ot?function Ns(Ct,Me,Ue){if(Ct.normalizationField)return ds(Ue,"Could not convert color info: unsupported property"),null;if(Nr(Ct.field)){if(!Ct.stops)return ds(Ue,"Could not convert color info: missing stops or colors"),null;{if(Ct.stops.length>8)return ds(Ue,"Could not convert color info: too many color stops"),null;Me.color={field:Ct.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};const ke=Ct.stops;for(let ot=0;ot<8;++ot){const vt=ke[Math.min(ot,ke.length-1)];Me.color.values[ot]=vt.value,bs(Me.color.colors,ot,vt.color)}}}else{if(!(Ct.stops&&Ct.stops.length>=0))return ds(Ue,"Could not convert color info: no field and no colors/stops"),null;{const ke=Ct.stops&&Ct.stops.length>=0&&Ct.stops[0].color;Me.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(let ot=0;ot<8;ot++)Me.color.values[ot]=1/0,bs(Me.color.colors,ot,ke)}}return Me}(Or,tr,Ue):tr;case"opacity":return Lt?function _i(Ct,Me,Ue){if(Ct.normalizationField)return ds(Ue,"Could not convert opacity info: unsupported property"),null;if(Nr(Ct.field)){if(!Ct.stops)return ds(Ue,"Could not convert opacity info: missing stops or opacities"),null;{if(Ct.stops.length>8)return ds(Ue,"Could not convert opacity info: too many opacity stops"),null;Me.opacity={field:Ct.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};const ke=Ct.stops;for(let ot=0;ot<8;++ot){const vt=ke[Math.min(ot,ke.length-1)];Me.opacity.values[ot]=vt.value,Me.opacity.opacityValues[ot]=vt.opacity}}}else{if(!(Ct.stops&&Ct.stops.length>=0))return ds(Ue,"Could not convert opacity info: no field and no opacities/stops"),null;{const ke=Ct.stops&&Ct.stops.length>=0&&Ct.stops[0].opacity;Me.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(let ot=0;ot<8;ot++)Me.opacity.values[ot]=1/0,Me.opacity.opacityValues[ot]=ke}}return Me}(Or,tr,Ue):null;case"rotation":return vt?function hi(Ct,Me,Ue){if(!Nr(Ct.field))return ds(Ue,"Could not convert rotation info: field is not a string"),null;if(Me.rotation){if(Ct.field)if(Me.rotation.field){if(Ct.field!==Me.rotation.field)return ds(Ue,"Could not convert rotation info: multiple fields in use"),null}else Me.rotation.field=Ct.field}else Me.rotation={field:Ct.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(Ct.axis){case"tilt":return gi(Ct,Me.rotation,0),Me;case"roll":return gi(Ct,Me.rotation,1),Me;case null:case void 0:case"heading":return gi(Ct,Me.rotation,2),Me;default:return ds(Ue,`Could not convert rotation info: unknown axis "${Ct.axis}""`),null}}(Or,tr,Ue):tr;default:return null}},{size:null,color:null,opacity:null,rotation:null});return!(Ct.length>0&&Yt)||Yt.size||Yt.color||Yt.opacity||Yt.rotation?Yt&&Yt.size&&!function xr(Ct,Me,Ue){for(let ot=0;ot<3;++ot){let vt=Me.unitInMeters;Ct.type[ot]===ps.DefinedSize&&(vt*=Me.modelSize[ot],Ct.type[ot]=ps.DefinedScale),Ct.minSize[ot]=Ct.minSize[ot]/vt,Ct.maxSize[ot]=Ct.maxSize[ot]/vt,Ct.offset[ot]=Ct.offset[ot]/vt,Ct.factor[ot]=Ct.factor[ot]/vt}let ke;if(Ct.type[0]!==ps.Undefined)ke=0;else if(Ct.type[1]!==ps.Undefined)ke=1;else{if(Ct.type[2]===ps.Undefined)return ds(Ue,"No size axis contains a valid size or scale"),!1;ke=2}for(let ot=0;ot<3;++ot)Ct.type[ot]===ps.Undefined&&(Ct.minSize[ot]=Ct.minSize[ke],Ct.maxSize[ot]=Ct.maxSize[ke],Ct.offset[ot]=Ct.offset[ke],Ct.factor[ot]=Ct.factor[ke],Ct.type[ot]=Ct.type[ke]);return!0}(Yt.size,Me,Ue)?null:Yt:null}function Oi(Ct){return Ct&&null!=Ct.size}function zi(Ct,Me){if(!Ct)return{enabled:!1};if(nt.Z.TESTS_DISABLE_FAST_UPDATES)return{enabled:!1};const Ue=Di(Ct.visualVariables,Me);return Ue?{enabled:!0,visualVariables:Ue,materialParameters:yn(Ue,Me),requiresShaderTransformation:Oi(Ue)}:{enabled:!1}}function Zr(Ct,Me,Ue){if(!Me||!Ct.enabled)return!1;const ke=Ct.visualVariables,ot=Di(Me.visualVariables,Ue);return!!ot&&!!(ii(ke.size,ot.size,"size")&&ii(ke.color,ot.color,"color")&&ii(ke.rotation,ot.rotation,"rotation")&&ii(ke.opacity,ot.opacity,"opacity"))&&(Ct.visualVariables=ot,Ct.materialParameters=yn(ot,Ue),Ct.requiresShaderTransformation=Oi(ot),!0)}function ii(Ct,Me,Ue){if(!!Ct!=!!Me||Ct&&Ct.field!==Me.field)return!1;if(Ct&&"rotation"===Ue){const ke=Ct,ot=Me;for(let vt=0;vt<3;vt++)if(ke.type[vt]!==ot.type[vt]||ke.offset[vt]!==ot.offset[vt]||ke.factor[vt]!==ot.factor[vt])return!1}return!0}function yn(Ct,Me){const Ue={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},ke=Oi(Ct);return Ct&&Ct.size?(Ue.vvSizeEnabled=!0,Ue.vvSizeMinSize=Ct.size.minSize,Ue.vvSizeMaxSize=Ct.size.maxSize,Ue.vvSizeOffset=Ct.size.offset,Ue.vvSizeFactor=Ct.size.factor):Ct&&ke&&(Ue.vvSizeValue=Me.transformation.scale),Ct&&ke&&(Ue.vvSymbolAnchor=Me.transformation.anchor,Ue.vvSymbolRotationMatrix=(0,he.c)(),(0,ye.i)(dr),function Tn(Ct,Me,Ue,ke=(0,fe.c)()){const ot=Ct||0,vt=Me||0,Lt=Ue||0;0!==ot&&(0,ye.g)(ke,ke,-ot/180*Math.PI),0!==vt&&(0,ye.r)(ke,ke,vt/180*Math.PI),0!==Lt&&(0,ye.o)(ke,ke,Lt/180*Math.PI)}(Me.transformation.rotation[2],Me.transformation.rotation[0],Me.transformation.rotation[1],dr),(0,_e.f)(Ue.vvSymbolRotationMatrix,dr)),Ct&&Ct.color&&(Ue.vvColorEnabled=!0,Ue.vvColorValues=Ct.color.values,Ue.vvColorColors=Ct.color.colors),Ct&&Ct.opacity&&(Ue.vvOpacityEnabled=!0,Ue.vvOpacityValues=Ct.opacity.values,Ue.vvOpacityOpacities=Ct.opacity.opacityValues),Ue}(Ct=ps||(ps={}))[Ct.Undefined=0]="Undefined",Ct[Ct.DefinedSize=1]="DefinedSize",Ct[Ct.DefinedScale=2]="DefinedScale",function(Ct){Ct[Ct.Undefined=0]="Undefined",Ct[Ct.DefinedAngle=1]="DefinedAngle"}(zs||(zs={})),function(Ct){const Me=(0,fe.c)(),Ue=(0,$.c)();Ct.evaluateModelTransform=function ke(vt,Lt,Yt){if(!vt.vvSizeEnabled)return Yt;(0,ye.c)(Me,Yt);const tr=vt.vvSymbolRotationMatrix;(0,ye.s)(dr,tr[0],tr[1],tr[2],0,tr[3],tr[4],tr[5],0,tr[6],tr[7],tr[8],0,0,0,0,1),(0,ye.m)(Me,Me,dr);for(let Or=0;Or<3;++Or)Ue[Or]=(0,Cr.uZ)(vt.vvSizeOffset[Or]+Lt[0]*vt.vvSizeFactor[Or],vt.vvSizeMinSize[Or],vt.vvSizeMaxSize[Or]);return(0,ye.h)(Me,Me,Ue),(0,ye.j)(Me,Me,vt.vvSymbolAnchor),Me},Ct.evaluateModelTransformScale=function ot(vt,Lt,Yt){if(!Lt.vvSizeEnabled)return(0,G.s)(vt,1,1,1);for(let tr=0;tr<3;++tr)vt[tr]=(0,Cr.uZ)(Lt.vvSizeOffset[tr]+Yt[0]*Lt.vvSizeFactor[tr],Lt.vvSizeMinSize[tr],Lt.vvSizeMaxSize[tr]);return vt}}(As||(As={}));const dr=(0,fe.c)(),Dr=As.evaluateModelTransform,er=As.evaluateModelTransformScale;var Ir=T(57521),Ps=T(53855),Ws=T(81695),yi=T(80805),Gs=T(94398);const Mi=(0,fe.c)(),Xi=(0,$.f)(0,0,1),sn=Zi.Ns,Uo=[sn/2,sn/2,1-sn/2,1-sn/2],Vn=[Zi.Ph*sn,Zi.Ph*sn];class io extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._cimLayers=null,this._cimSymbolMaterials=new Map,this._cimSymbolTextures=new Map,this._cimMaterialParametersInfo=null,this._cimRequiredFields=null,this._cimScaleFactorOrFunction=null,this._size=null,this._symbolTextureRatio=1,this._outlineSize=0,this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!0}}getCachedSize(){return{size:this._getIconSize()}}doLoad(Me){var Ue=this;return(0,D.Z)(function*(){Ue._validateOrThrow();const ke=Ue._prepareMaterialParameters(),ot=Ue._getPrimitive();if((0,w.pC)(ot))Ue._prepareResourcesPrimitive(ke,ot);else{const vt=(0,Rr.nf)(Ue.symbol,Ue.symbolLayer),Lt=(0,lr.sJ)(vt);Lt&&"application/json"===Lt.mediaType?yield Ue._prepareResourcesCIM(ke,JSON.parse(Lt.data),Me):yield Ue._prepareResourcesHref(ke,vt,Me)}})()}_validateOrThrow(){if(this._drivenProperties.size)return;const Me=(0,ze.bh)(this._getIconSize());if(Me)throw new de.Z("graphics3diconsymbollayer:invalid-size",Me)}_getIconSize(){const Me=this.symbolLayer,Ue=Math.round(null!=Me.size?(0,ns.F2)(Me.size):16);return this._drivenProperties.size?Math.max(Ue,64):Ue}_generateTextureCIM(Me){const Ue=this._getGraphicHash(Me);let ke=""===Ue?null:this._cimSymbolTextures.get(Ue);if(!ke){const vt=this._context.sharedResources.cimSymbolRasterizer.rasterizeCIMSymbol(this._cimLayers,Me,"esriGeometryPoint",{scaleFactor:this._cimScaleFactorOrFunction},null,null);this._cimMaterialParametersInfo.anchorPosition=this._getAnchorPos("relative",vt.anchorPosition),ke=new Ws.x(vt.imageData,{width:vt.imageData.width,height:vt.imageData.height,powerOfTwoResizeMode:Xe.CE.PAD}),this._cimSymbolTextures.set(Ue,ke),this._context.stage.add(ke)}return ke}_computeSize(Me,Ue){const ke=Me.width/Me.height;return ke>1?[Ue,Math.round(Ue/ke)]:[Math.round(Ue*ke),Ue]}_prepareMaterialParameters(){const Me={anchorPosition:this._getAnchorPos(this.symbolLayer.anchor,this.symbolLayer.anchorPosition)},Ue=this.symbol;if(function An(Ct){return Ct&&"point-3d"===Ct.type&&Ct.hasVisibleVerticalOffset()}(Ue)){const{screenLength:ke,minWorldLength:ot,maxWorldLength:vt}=Ue.verticalOffset;Me.verticalOffset={screenLength:(0,ns.F2)(ke),minWorldLength:ot||0,maxWorldLength:vt??1/0}}return this._context.screenSizePerspectiveEnabled&&(Me.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),Me.occlusionTest=!0,Me.hasSlicePlane=this._context.slicePlaneEnabled,Me}_prepareResourcesPrimitive(Me,Ue){const ke=this._getOutlineSize();if(Gn(Ue)&&0===ke)throw new Error("Nothing to render");this._outlineSize=ke,Me.color=this._getFillColor(),Me.outlineColor=this._getOutlineColor(),Me.outlineSize=this._outlineSize;const ot=this._context.sharedResources.textures.fromData(Ue,()=>(0,Zi.cU)(Ue));this._texture=ot.texture,this._releaseTexture=ot,Me.textureIsSignedDistanceField=!0,Me.distanceFieldBoundingBox=Uo,Me.textureId=this._texture.id;const vt=this._getIconSize();this._size=[vt,vt],this._symbolTextureRatio=1/sn,this._createMaterialAndAddToStage(Me,this._context.stage)}_prepareResourcesHref(Me,Ue,ke){var ot=this;return(0,D.Z)(function*(){if(!(0,Jr.Z)("esri-canvas-svg-support")&&(0,lr.zd)(Ue))throw new de.Z("graphics3diconsymbollayer:unsupported-image-format","IconSymbol3DLayer failed to load (SVG symbols are not supported in IE11)");ot._outlineSize=ot._getOutlineSize(),Me.color=ot._getFillColor(),Me.outlineColor=ot._getOutlineColor(),Me.outlineSize=ot._outlineSize,Me.textureIsSignedDistanceField=!1;const vt=ot._getIconSize(),Lt=vt*ot._context.graphicsCoreOwner.view.state.pixelRatio,Yt=yield(0,x.q6)(ot._context.sharedResources.textures.fromUrl(Ue,Lt,{signal:ke}));if(!1===Yt.ok)throw(0,B.r9)(Yt.error),new de.Z("graphics3diconsymbollayer:request-failed",`Failed to load (Request for icon resource failed: ${Ue})`);ot._releaseTexture=Yt.value;const tr=Yt.value.texture;ot._size=ot._computeSize(tr.params,vt),Me.textureId=tr.id,ot._createMaterialAndAddToStage(Me,ot._context.stage)})()}_prepareResourcesCIM(Me,Ue,ke){var ot=this;return(0,D.Z)(function*(){const vt=new Gs.Z({data:Ue});if(!ot._context.sharedResources.cimSymbolRasterizer){const Vr=(yield Promise.all([T.e(3751),T.e(4654),T.e(3141),T.e(9235)]).then(T.bind(T,11369))).CIMSymbolRasterizer;(0,B.k_)(ke),ot._context.sharedResources.cimSymbolRasterizer||(ot._context.sharedResources.cimSymbolRasterizer=new Vr(ot._context.renderCoordsHelper.spatialReference,!0))}const Lt=ot._context.layer.fields?ot._context.layer.fields.map(Vr=>Vr.toJSON()):null;let Yt,tr;if(ot._cimLayers=yield ot._context.sharedResources.cimSymbolRasterizer.analyzeCIMSymbol(vt,Lt,ot._context.renderer&&"dictionary"===ot._context.renderer.type?ot._context.renderer.fieldMap:null,"esriGeometryPoint",{signal:ke}),ot._context.renderer&&"dictionary"===ot._context.renderer.type&&ot._context.renderer.scaleExpression){const Vr=ot._context.renderer;if(isNaN(Vr.scaleExpression)){const is=Vr.scaleExpression,us=yield(0,Tt.Yi)(is,ot._context.layer.spatialReference,Lt);tr=(_s,Vs,Ri)=>{const Fi=(0,bt.Z)(us,_s,{$view:Ri},"esriGeometryPoint",Vs);return null!==Fi?Fi:1}}else Yt=Number(Vr.scaleExpression)}ot._cimScaleFactorOrFunction=Yt||tr||1;const Or=ot._context.renderer?yield ot._context.renderer.getRequiredFields(ot._context.layer.fieldsIndex):[];(0,B.k_)(ke);const Qr=ot._context.layer.fieldsIndex;ot._cimRequiredFields=Or.map(Vr=>Qr.get(Vr).name),ot._cimMaterialParametersInfo=Me,ot._cimMaterialParametersInfo.color=ot._getFillColor(),ot._cimMaterialParametersInfo.outlineColor=[0,0,0,0],ot._cimMaterialParametersInfo.outlineSize=0,ot._cimMaterialParametersInfo.textureIsSignedDistanceField=!1})()}_getPrimitive(){return this.symbolLayer.resource&&this.symbolLayer.resource.href?null:this.symbolLayer.resource&&this.symbolLayer.resource.primitive||sr.S}_getOutlineSize(){let Me=0;const Ue=this.symbolLayer;return(0,w.pC)(Ue.outline)&&null!=Ue.outline.size?Math.max((0,ns.F2)(Ue.outline.size),0):(Me=Gn(this._getPrimitive())?1.5:0,Math.max(Me,0))}_getOutlineColor(){const Me=this._getLayerOpacity(),ke=(0,w.U2)(this.symbolLayer,"outline","color");if((0,w.pC)(ke)){const ot=Kr.Z.toUnitRGB(ke);return[ot[0],ot[1],ot[2],ke.a*Me]}return[0,0,0,0]}_getFillColor(){if(Gn(this._getPrimitive()))return Qt.rD;const Me=(0,w.Wi)(this._getPrimitive()),Ue=(0,w.U2)(this.symbolLayer,"material","color");return this._getCombinedOpacityAndColor(Ue,{hasIntrinsicColor:Me})}_getAnchorPos(Me,Ue){return"relative"===Me?(0,H.f)((Ue.x||0)+.5,.5-(Ue.y||0)):Me in Yr.yY?Yr.yY[Me]:Yr.yY.center}_createMaterialAndAddToStage(Me,Ue){if(this._fastUpdates=this._cimLayers?{enabled:!1}:zi(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates.enabled&&Object.assign(Me,this._fastUpdates.materialParameters),this._cimLayers){let ke=(0,w.pC)(Me.textureId)?this._cimSymbolMaterials.get(Me.textureId):null;return ke||(ke=new yi.A(Me),this._cimSymbolMaterials.set((0,w.Pt)(Me.textureId,0),ke),Ue.add(ke)),ke}return this._material=new yi.A(Me),Ue.add(this._material),this._material}_setDrapingDependentMaterialParameters(){this.draped&&(this._forEachMaterial(Me=>{Me.setParameters({verticalOffset:null,screenSizePerspective:null,occlusionTest:!1,hasSlicePlane:!1,shaderPolygonOffset:0,isDraped:this.draped})}),this.layerOpacityChanged())}destroy(){super.destroy(),this._forEachMaterial(Me=>this._context.stage.remove(Me)),this._material=null,this._cimSymbolMaterials.clear(),this._cimSymbolTextures.forEach(Me=>this._context.stage.remove(Me)),this._cimSymbolTextures.clear(),this._releaseTexture=(0,w.RY)(this._releaseTexture)}_getScaleFactor(Me,Ue){if(this._drivenProperties.size&&Me.size){for(let ke=0;ke<3;ke++){const ot=Me.size[ke];ot&&"symbol-value"!==ot&&"proportional"!==ot&&(Me.size[ke]=(0,ns.F2)(ot))}if("symbol-value"===Me.size[0])return 1;if(isFinite(+Me.size[0]))return+Me.size[0]/Ue;if(isFinite(+Me.size[2]))return+Me.size[2]/Ue}return 1}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry))return null;let ke,ot;if(this._cimLayers){if(!this._cimLayers.length)return null;const Vr=this._generateTextureCIM(Ue),is={textureId:Vr.id,...this._cimMaterialParametersInfo};ot=this._createMaterialAndAddToStage(is,this._context.stage),ke=[Vr.params.width,Vr.params.height]}else ke=this._size,ot=(0,w.Wg)(this._material);const vt=(0,Rs.S_)(Ue.geometry);if((0,w.Wi)(vt))return this.logger.warn(`unsupported geometry type for icon symbol: ${Ue.geometry.type}`),null;const Lt=Me.renderingInfo,Yt=this._getVertexOpacityAndColor(Lt);let tr=1;this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||(tr=this._getScaleFactor(Lt,ke[0]>ke[1]?ke[0]:ke[1])),tr*=this._symbolTextureRatio;const Or=[ke[0]*tr,ke[1]*tr],Qr=this.setGraphicElevationContext(Ue,new Le.o);return this.ensureDrapedStatus("on-the-ground"===Qr.mode)&&this._setDrapingDependentMaterialParameters(),this.draped?this._createAsOverlay(Ue,vt,ot,Yt,Or,Me.layer.uid):this._createAs3DShape(Ue,vt,ot,Yt,Or,Qr,Ue.uid)}layerOpacityChanged(){const Me=this._getFillColor(),Ue=this._getOutlineColor();return this._forEachMaterial(ke=>{ke.setParameters({color:Me}),ke.setParameters({outlineColor:Ue})}),!0}layerElevationInfoChanged(Me,Ue,ke){const ot=this._elevationContext.mode,vt=(0,Te.GC)(io.elevationModeChangeTypes,ke,ot);if(vt!==Te.lO.UPDATE)return vt;const Lt=(0,Te.Xf)(ot)||"absolute-height"===ot;return this.updateGraphics3DGraphicElevationInfo(Me,Ue,()=>Lt)}slicePlaneEnabledChanged(){return this.draped||this._forEachMaterial(Me=>{Me.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})}),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!!this._getPrimitive()}applyRendererDiff(Me,Ue){for(const ke in Me.diff){if("visualVariables"!==ke||!Zr(this._fastUpdates,Ue,this._fastVisualVariableConvertOptions()))return Ee.W.Recreate_Symbol;(0,w.pC)(this._material)&&this._material.setParameters(this._fastUpdates.materialParameters)}return Ee.W.Fast_Update}_defaultElevationInfoNoZ(){return hn}_createAs3DShape(Me,Ue,ke,ot,vt,Lt,Yt){const tr=this.getFastUpdateAttrValues(Me),Or=tr?us=>Dr(this._fastUpdates.materialParameters,tr,us):null,Qr=[Ir.Z.createPointGeometry(Xi,null,ot,vt,ya,null,tr)],Vr=(0,Rs.km)(this._context,Ue,Qr,[ke],Lt,this._context.layer.uid,Yt,Or);if(null===Vr)return null;const is=new ne.z(this,Vr.object,Qr,null,null,qt.j3,Lt);return is.alignedSampledElevation=Vr.sampledElevation,is.needsElevationUpdates=(0,Te.Xf)(Lt.mode)||"absolute-height"===Lt.mode,is.getScreenSize=this._createScreenSizeGetter(vt,Or),is.calculateRelativeScreenBounds=us=>ke.calculateRelativeScreenBounds(is.getScreenSize(),1,us),(0,Rs.dO)(is,Ue,this._context.elevationProvider),is}_createAsOverlay(Me,Ue,ke,ot,vt,Lt){ke.renderPriority=this._renderPriority;const Yt=(0,zr.c)();(0,ue.KC)(Ue,Yt,this._context.overlaySR),Yt[2]=Be.Rn;const tr=this._context.clippingExtent;if((0,w.pC)(tr)&&!(0,ae.BD)(tr,Yt))return null;const Or=this.getFastUpdateAttrValues(Me),Qr=Or?_s=>Dr(this._fastUpdates.materialParameters,Or,_s):null,Vr=Ir.Z.createPointGeometry(Xi,Yt,ot,vt,null,null,Or),is=new Ps.z(Vr,ke,{layerUid:Lt,graphicUid:Me.uid,calculateShaderTransformation:Qr});Yt[3]=0,(0,Tr.c)(is.boundingSphere,Yt);const us=new jr(this,[is],null,this._context.drapeSourceRenderer);return us.getScreenSize=this._createScreenSizeGetter(vt,Qr),us.calculateRelativeScreenBounds=_s=>ke.calculateRelativeScreenBounds(us.getScreenSize(),1,_s),us}_createScreenSizeGetter(Me,Ue){const ke=this._outlineSize+2;if(this._fastUpdates.enabled){const ot=Me[0]/this._symbolTextureRatio,vt=Me[1]/this._symbolTextureRatio;return(Lt=(0,H.a)())=>{const Yt=Ue(Mi);return Lt[0]=Yt[0]*ot+ke,Lt[1]=Yt[5]*vt+ke,Lt}}{const ot=Me[0]/this._symbolTextureRatio+ke,vt=Me[1]/this._symbolTextureRatio+ke;return(Lt=(0,H.a)())=>(Lt[0]=ot,Lt[1]=vt,Lt)}}_fastVisualVariableConvertOptions(){const Me=this._size[0]>this._size[1]?this._size[0]:this._size[1],Ue=(0,$.f)(Me,Me,Me),ke=(0,ns.Wz)(1),ot=Me*ke;return{modelSize:Ue,symbolSize:(0,$.f)(ot,ot,ot),unitInMeters:ke,transformation:{anchor:$.Z,scale:$.O,rotation:$.Z}}}_getGraphicHash(Me){let Ue="";for(const ke of this._cimRequiredFields)Ue+=ke+Me.attributes[ke];return Ue}_forEachMaterial(Me){(0,w.pC)(this._material)&&Me(this._material),this._cimSymbolMaterials.forEach(Me)}test(){return{...super.test(),material:this._material}}}function Gn(Ct){return!(0,w.Wi)(Ct)&&("cross"===Ct||"x"===Ct)}io.PRIMITIVE_SIZE=Vn,io.elevationModeChangeTypes={definedChanged:Te.lO.UPDATE,staysOnTheGround:Te.lO.NONE,onTheGroundChanged:Te.lO.RECREATE};const hn={mode:"relative-to-ground",offset:0},ya=(0,zr.f)(0,0,0,1);var Wo=T(44014),sa=T(30764),ia=T(19625),nn=T(6945),Co=T(32393),Ja=T(33470),Kn=T(40723),Yn=T(5894),hl=T(41857),Sr=T(651),Ts=T(91056),ys=T(88569),Wi=T(12407),an=T(64127),Ln=T(62718),ai=T(2078);const Oo=new Map([[Oe.T.POSITION,0],[Oe.T.UV0,2],[Oe.T.AUXPOS1,3],[Oe.T.SIZE,6],[Oe.T.SIZEFEATUREATTRIBUTE,6],[Oe.T.COLOR,5],[Oe.T.COLORFEATUREATTRIBUTE,5],[Oe.T.OPACITYFEATUREATTRIBUTE,7]]);class Bt extends Ts.A{initializeProgram(Me){const Ue=Bt.shader.get().build(this.configuration);return new Wi.$(Me.rctx,Ue,Oo)}_makePipelineState(Me,Ue){const ke=this.configuration,ot=Me===Xe.Am.NONE;return(0,ai.sm)({blending:ke.output===nn.H.Color||ke.output===nn.H.Alpha?ot?ys.wu:(0,ys.j7)(Me):null,depthTest:{func:(0,ys.Bh)(Me)},depthWrite:ot?ke.writeDepth&&ai.LZ:(0,ys.K5)(Me),colorWrite:ai.BK,stencilWrite:ke.hasOccludees?an.s3:null,stencilTest:ke.hasOccludees?Ue?an.eD:an.RY:null,polygonOffset:{factor:0,units:-10}})}initializePipeline(){return this.configuration.occluder&&(this._occluderPipelineTransparent=(0,ai.sm)({blending:ys.wu,depthTest:an.zV,depthWrite:null,colorWrite:ai.BK,stencilWrite:null,stencilTest:an.YD}),this._occluderPipelineOpaque=(0,ai.sm)({blending:ys.wu,depthTest:an.zV,depthWrite:null,colorWrite:ai.BK,stencilWrite:an.P7,stencilTest:an.ii}),this._occluderPipelineMaskWrite=(0,ai.sm)({blending:null,depthTest:an.JN,depthWrite:null,colorWrite:null,stencilWrite:an.s3,stencilTest:an.eD})),this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(Me,Ue){return Ue?this._occludeePipelineState:this.configuration.occluder?Me===Yn.r.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:Me===Yn.r.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipelineState(Me,Ue)}}Bt.shader=new Sr.J(Ln.L,()=>T.e(2958).then(T.bind(T,62958)));var Wt=T(17626),rr=T(87601),Er=T(41528);class ur extends Er.W{constructor(){super(...arguments),this.output=nn.H.Color,this.transparencyPassType=Xe.Am.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.writeDepth=!1,this.draped=!1,this.hasCap=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,Wt._)([(0,rr.o)({count:nn.H.COUNT})],ur.prototype,"output",void 0),(0,Wt._)([(0,rr.o)({count:Xe.Am.COUNT})],ur.prototype,"transparencyPassType",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"occluder",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"hasSlicePlane",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"writeDepth",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"draped",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"hasCap",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"vvSize",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"vvColor",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"vvOpacity",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"hasOccludees",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"hasMultipassTerrain",void 0),(0,Wt._)([(0,rr.o)()],ur.prototype,"cullAboveGround",void 0),(0,Wt._)([(0,rr.o)({constValue:!0})],ur.prototype,"hasVvInstancing",void 0),(0,Wt._)([(0,rr.o)({constValue:!0})],ur.prototype,"hasSliceTranslatedView",void 0);var Fr=T(39401);class ls extends Kn.F5{constructor(Me){super(Me,new St),this._vertexAttributeLocations=Oo,this.techniqueConfig=new ur,this.layout=this.createLayout()}dispose(){}getConfiguration(Me,Ue){return this.techniqueConfig.output=Me,this.techniqueConfig.draped=Ue.slot===Yn.r.DRAPED_MATERIAL,this.techniqueConfig.hasCap=this.parameters.cap!==Fr.R.BUTT,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.vvColor=this.parameters.vvColorEnabled,this.techniqueConfig.vvOpacity=this.parameters.vvOpacityEnabled,this.techniqueConfig.vvSize=this.parameters.vvSizeEnabled,this.techniqueConfig.occluder=this.parameters.renderOccluded===Kn.yD.OccludeAndTransparentStencil,this.techniqueConfig.transparencyPassType=Ue.transparencyPassType,this.techniqueConfig.hasMultipassTerrain=Ue.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=Ue.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(){}createLayout(){const Me=(0,ia.U$)().vec3f(Oe.T.POSITION).vec2f(Oe.T.UV0).vec3f(Oe.T.AUXPOS1);return Me.f32(this.parameters.vvSizeEnabled?Oe.T.SIZEFEATUREATTRIBUTE:Oe.T.SIZE),this.parameters.vvColorEnabled?Me.f32(Oe.T.COLORFEATUREATTRIBUTE):Me.vec4f(Oe.T.COLOR),this.parameters.vvOpacityEnabled&&Me.f32(Oe.T.OPACITYFEATUREATTRIBUTE),Me}createBufferWriter(){return new mr(this.layout,this.parameters)}requiresSlot(Me,Ue){if(Me===Yn.r.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===Kn.yD.OccludeAndTransparentStencil)return Me===Yn.r.OPAQUE_MATERIAL||Me===Yn.r.OCCLUDER_MATERIAL||Me===Yn.r.TRANSPARENT_OCCLUDER_MATERIAL;const ke=(0,Co.S)(Ue);return ke===nn.H.Color||ke===nn.H.Alpha?Me===(this.parameters.writeDepth?Yn.r.TRANSPARENT_MATERIAL:Yn.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):Me===Yn.r.OPAQUE_MATERIAL}createGLMaterial(Me){return Me.output===nn.H.Color||Me.output===nn.H.Alpha||Me.output===nn.H.Highlight||Me.output===nn.H.Depth?new Pt(Me):null}}class Pt extends Ja.F{_updateParameters(Me){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(Bt,Me)}_updateOccludeeState(Me){Me.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:Me.hasOccludees})}beginSlot(Me){return this._output!==nn.H.Color&&this._output!==nn.H.Alpha||this._updateOccludeeState(Me),this._updateParameters(Me)}}class St extends hl.n{constructor(){super(...arguments),this.width=0,this.color=[1,1,1,1],this.placement="end",this.cap=Fr.R.BUTT,this.writeDepth=!0,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.hasOccludees=!1}}class mr{constructor(Me,Ue){this.vertexBufferLayout=Me,this.parameters=Ue}allocate(Me){return this.vertexBufferLayout.createBuffer(Me)}elementCount(){return"begin-end"===this.parameters.placement?12:6}write(Me,Ue,ke,ot){const vt=Ue.vertexAttributes.get(Oe.T.POSITION).data,Lt=vt.length/3;let Yt=1,tr=0;this.parameters.vvSizeEnabled?tr=Ue.vertexAttributes.get(Oe.T.SIZEFEATUREATTRIBUTE).data[0]:Ue.vertexAttributes.has(Oe.T.SIZE)&&(Yt=Ue.vertexAttributes.get(Oe.T.SIZE).data[0]);let Or=[1,1,1,1],Qr=0;this.parameters.vvColorEnabled?Qr=Ue.vertexAttributes.get(Oe.T.COLORFEATUREATTRIBUTE).data[0]:Ue.vertexAttributes.has(Oe.T.COLOR)&&(Or=Ue.vertexAttributes.get(Oe.T.COLOR).data);let Vr=0;this.parameters.vvOpacityEnabled&&(Vr=Ue.vertexAttributes.get(Oe.T.OPACITYFEATUREATTRIBUTE).data[0]);const is=Me.transformation,us=new Float32Array(ke.buffer);let _s=ot*(this.vertexBufferLayout.stride/4);const Vs=(pi,Dn,qi,kn)=>{if(us[_s++]=pi[0],us[_s++]=pi[1],us[_s++]=pi[2],us[_s++]=qi[0],us[_s++]=qi[1],us[_s++]=Dn[0],us[_s++]=Dn[1],us[_s++]=Dn[2],us[_s++]=this.parameters.vvSizeEnabled?tr:Yt,this.parameters.vvColorEnabled)us[_s++]=Qr;else{const En=Math.min(4*kn,Or.length-4);us[_s++]=Or[En+0],us[_s++]=Or[En+1],us[_s++]=Or[En+2],us[_s++]=Or[En+3]}this.parameters.vvOpacityEnabled&&(us[_s++]=Vr)};let Ri;var pi;(pi=Ri||(Ri={}))[pi.ASCENDING=1]="ASCENDING",pi[pi.DESCENDING=-1]="DESCENDING";const Fi=(pi,Dn)=>{const qi=(0,G.s)(qr,vt[3*pi],vt[3*pi+1],vt[3*pi+2]),kn=fs;let En=pi+Dn;do{(0,G.s)(kn,vt[3*En],vt[3*En+1],vt[3*En+2]),En+=Dn}while((0,G.z)(qi,kn)&&En>=0&&En<Lt);is&&((0,G.m)(qi,qi,is),(0,G.m)(kn,kn,is)),Vs(qi,kn,[-1,-1],pi),Vs(qi,kn,[1,-1],pi),Vs(qi,kn,[1,1],pi),Vs(qi,kn,[-1,-1],pi),Vs(qi,kn,[1,1],pi),Vs(qi,kn,[-1,1],pi)},bi=this.parameters.placement;"begin"!==bi&&"begin-end"!==bi||Fi(0,Ri.ASCENDING),"end"!==bi&&"begin-end"!==bi||Fi(Lt-1,Ri.DESCENDING)}}const qr=(0,$.c)(),fs=(0,$.c)();var qs=T(54889),wi=T(92222);const fn=["polyline","polygon","extent"];class Fn extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._uniformSize=1}doLoad(){var Me=this;return(0,D.Z)(function*(){if(Me._vvConvertOptions={modelSize:[1,1,1],symbolSize:[1,1,1],unitInMeters:1,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}},Me._fastUpdates=Me._context.renderer&&Me._context.renderer.visualVariables&&Me._context.renderer.visualVariables.length>0?zi(Me._context.renderer,Me._vvConvertOptions):{enabled:!1},!Me._drivenProperties.size){const Ue=null!=Me.symbolLayer.size?Me.symbolLayer.size:(0,ns.Wz)(1);if(Ue<0)throw new de.Z("graphics3dlinesymbollayer:invalid-size","Symbol sizes may not be negative values");Me._uniformSize=Ue}Me._markerTexture=(0,sa.uM)(Me._context.sharedResources.textures,Me.symbolLayer.marker)})()}_getMaterialParameters(Me,Ue=!1){const ke=this._getCombinedOpacityAndColor(Ue&&this._markerColor||this._materialColor);this._patternHidesLine&&!Ue&&(ke[3]=0);const ot={width:this._computeMaterialWidth(this.symbolLayer?.size),color:ke,hasPolygonOffset:!0,join:this.symbolLayer.join||"miter",cap:(0,Wo.u9)(this.symbolLayer.cap||"butt"),hasSlicePlane:this._context.slicePlaneEnabled,isClosed:Me,stipplePattern:(0,qs.Dp)(this.symbolLayer.pattern),stippleScaleWithLineWidth:!0};return this._fastUpdates&&this._fastUpdates.visualVariables?{...ot,...this._fastUpdates.materialParameters}:ot}get _materialColor(){return(0,w.yw)(this.symbolLayer.material,Me=>Me.color)}get _markerColor(){return(0,w.yw)(this.symbolLayer.marker,Me=>Me.color)}get lineMaterial(){return(0,w.Wi)(this._lineMaterial)&&(this._lineMaterial=new wi.U(this._getMaterialParameters(!1)),this._context.stage.add(this._lineMaterial)),this._lineMaterial}get ringMaterial(){return(0,w.Wi)(this._ringMaterial)&&(this._ringMaterial=new wi.U(this._getMaterialParameters(!0)),this._context.stage.add(this._ringMaterial)),this._ringMaterial}get wireframeLineMaterial(){return(0,w.Wi)(this._wireframeLineMaterial)&&(this._wireframeLineMaterial=new wi.U({...this._getMaterialParameters(!1),wireframe:!0}),this._context.stage.add(this._wireframeLineMaterial)),this._wireframeLineMaterial}get wireframeRingMaterial(){return(0,w.Wi)(this._wireframeRingMaterial)&&(this._wireframeRingMaterial=new wi.U({...this._getMaterialParameters(!0),wireframe:!0}),this._context.stage.add(this._wireframeRingMaterial)),this._wireframeRingMaterial}get markerMaterial(){return(0,w.Wi)(this._markerMaterial)&&(0,w.pC)(this.symbolLayer.marker)&&(0,w.pC)(this._markerTexture)&&(this._markerMaterial=new ls({...this._getMaterialParameters(!1,!0),placement:this.symbolLayer.marker.placement,textureId:this._markerTexture.texture.id}),this._context.stage.add(this._markerMaterial)),this._markerMaterial}destroy(){super.destroy(),this._forEachMaterial(Me=>this._context.stage.remove(Me)),this._lineMaterial=null,this._ringMaterial=null,this._wireframeLineMaterial=null,this._wireframeRingMaterial=null,this._markerMaterial=null,this._markerTexture=(0,w.RY)(this._markerTexture)}_getDrivenSize(Me){return this._drivenProperties.size&&Me.size?(0,ns.F2)((0,Ce.o2)(Me.size)):1}_getSizeFeatureAttributeData(Me){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size?(0,je.d)(this._fastUpdates.visualVariables.size.field,Me):null}_getDrivenColor(Me){const Ue=(0,zr.f)(1,1,1,1);return this._drivenProperties.color&&Me.color&&(Ue[0]=Me.color[0],Ue[1]=Me.color[1],Ue[2]=Me.color[2],Me.color.length>0&&(Ue[3]=Me.color[3])),this._drivenProperties.opacity&&Me.opacity&&(Ue[3]=Me.opacity),Ue}_getColorFeatureAttributeData(Me){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color?(0,je.d)(this._fastUpdates.visualVariables.color.field,Me):null}_getOpacityFeatureAttributeData(Me){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.opacity?(0,je.d)(this._fastUpdates.visualVariables.opacity.field,Me):null}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,fn,this.symbolLayer.type))return null;const ke=this.setGraphicElevationContext(Ue,new Le.o);return this.ensureDrapedStatus("on-the-ground"===ke.mode),this.draped?this._createAsOverlay(Me,this._context.layer.uid):this._createAs3DShape(Me,ke,Ue.uid)}applyRendererDiff(Me,Ue){for(const ke in Me.diff){if("visualVariables"!==ke||!Zr(this._fastUpdates,Ue,this._vvConvertOptions))return Ee.W.Recreate_Symbol;this._forEachMaterial(ot=>ot.setParameters(this._fastUpdates.materialParameters))}return Ee.W.Fast_Update}prepareSymbolLayerPatch(Me){if("partial"!==Me.diff.type)return;const Ue=Me.diff.diff,ke={};"complete"===Ue.size?.type&&(ke.width=this._computeMaterialWidth(Ue.size.newValue),delete Ue.size),"complete"===Ue.cap?.type&&(ke.cap=(0,Wo.u9)((0,w.Pt)(Ue.cap.newValue,"butt")),delete Ue.cap);const ot=this._prepareMarkerPatch(Me,Ue);this._prepareMaterialPatch(Me,Ue,ot),Me.symbolLayerStatePatches.push(()=>this._forEachMaterial(vt=>vt.setParameters(ke)))}layerOpacityChanged(){return this._forEachMaterial((Me,Ue)=>this._updateMaterialLayerOpacity(Me,Ue)),!0}_forEachMaterial(Me){(0,w.pC)(this._lineMaterial)&&Me(this._lineMaterial),(0,w.pC)(this._ringMaterial)&&Me(this._ringMaterial),(0,w.pC)(this._wireframeLineMaterial)&&Me(this._wireframeLineMaterial),(0,w.pC)(this._wireframeRingMaterial)&&Me(this._wireframeRingMaterial),(0,w.pC)(this._markerMaterial)&&Me(this._markerMaterial,!0)}_updateMaterialLayerOpacity(Me,Ue=!1){const ke=Me.parameters.color,ot=(0,w.U2)(this.symbolLayer,"material","color"),vt=this._patternHidesLine&&!Ue?0:this._getCombinedOpacity(ot),Lt=(0,zr.f)(ke[0],ke[1],ke[2],vt);Me.setParameters({color:Lt})}layerElevationInfoChanged(Me,Ue,ke){const ot=this._elevationContext.mode,vt=(0,Te.GC)(Fn.elevationModeChangeTypes,ke,ot);if(vt!==Te.lO.UPDATE)return vt;const Lt=(0,Te.Xf)(ot);return this.updateGraphics3DGraphicElevationInfo(Me,Ue,()=>Lt)}slicePlaneEnabledChanged(){const Me={hasSlicePlane:this._context.slicePlaneEnabled};return this._forEachMaterial(Ue=>Ue.setParameters(Me)),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!0}_getGeometryAsPolygonOrPolyline(Me){switch(Me.type){case"extent":if(Me instanceof Ke.Z)return re.Z.fromExtent(Me);break;case"polygon":case"polyline":return Me}return null}_createAs3DShape(Me,Ue,ke){const vt=this._getGeometryAsPolygonOrPolyline(Me.graphic.geometry),Lt="polygon"===vt.type?vt.rings:vt.paths,Yt=new Array,tr=new Array,Or=new Array,Qr=(0,ae.Ue)(),Vr=(0,Wo.VP)(vt,this._context.elevationProvider,this._context.renderCoordsHelper,Ue);this._logGeometryCreationWarnings(Vr,Lt,"polygon"===vt.type?"rings":"paths","LineSymbol3DLayer");for(let Vs=0;Vs<Vr.lines.length;Vs++){const{position:Ri,mapPosition:Fi}=Vr.lines[Vs];if((0,w.pC)(this._context.clippingExtent)&&((0,ae.cS)(Qr),(0,ae.G1)(Qr,Fi),!(0,ae.Zp)(Qr,this._context.clippingExtent)))continue;const bi=this._createGeometry(Me,Ri,Fi,vt.type,un.ELEVATED);Yt.push(bi),tr.push("polygon"===vt.type?this.ringMaterial:this.lineMaterial),Or.push(fe.I),nt.Z.LINE_WIREFRAMES&&(Yt.push(bi.cloneShallow()),tr.push("polygon"===vt.type?this.wireframeRingMaterial:this.wireframeLineMaterial),Or.push(fe.I));const pi=this.markerMaterial;(0,w.pC)(pi)&&(Yt.push(bi.cloneShallow()),tr.push(pi),Or.push(fe.I))}if(0===Yt.length)return null;const us=new rt.T({geometries:Yt,materials:tr,transformations:Or,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:ke}}),_s=new ne.z(this,us,Yt,null,null,qt.Lz,Ue);return _s.alignedSampledElevation=Vr.sampledElevation,_s.needsElevationUpdates=(0,Te.Xf)(Ue.mode),_s}_createGeometry(Me,Ue,ke,ot,vt){const Yt=this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color;return(0,Wo.YU)({overlayInfo:vt===un.DRAPED?{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper}:null,removeDuplicateStartEnd:"polygon"===ot?Wo.NW.REMOVE:Wo.NW.KEEP,uniformSize:this._uniformSize,attributeData:{position:Ue,mapPosition:ke,size:this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size?null:this._getDrivenSize(Me.renderingInfo),color:Yt?null:this._getDrivenColor(Me.renderingInfo),sizeFeature:this._getSizeFeatureAttributeData(Me.graphic),colorFeature:this._getColorFeatureAttributeData(Me.graphic),opacityFeature:this._getOpacityFeatureAttributeData(Me.graphic)}})}_createAsOverlay(Me,Ue){const ke=Me.graphic,ot=this._getGeometryAsPolygonOrPolyline(ke.geometry),vt="polygon"===ot.type?ot.rings:ot.paths,Lt="polygon"===ot.type?this.ringMaterial:this.lineMaterial;Lt.renderPriority=this._renderPriority;const Yt=nt.Z.LINE_WIREFRAMES?"polygon"===ot.type?this.wireframeRingMaterial:this.wireframeLineMaterial:null,tr=this.markerMaterial;(0,w.pC)(Yt)&&(Yt.renderPriority=this._renderPriority-.001),(0,w.pC)(tr)&&(tr.renderPriority=this._renderPriority-.002);const Or=new Array,Qr=(0,ae.Ue)(),Vr=(0,ae.cS)(),is=(0,Wo.rm)(ot,this._context.overlaySR);this._logGeometryCreationWarnings(is,vt,"polygon"===ot.type?"rings":"paths","LineSymbol3DLayer");for(const _s of is.lines){if((0,ae.cS)(Qr),(0,ae.G1)(Qr,_s.position),!(0,ae.Zp)(Qr,this._context.clippingExtent))continue;(0,ae.TC)(Vr,Qr);const Vs=this._createGeometry(Me,_s.position,null,ot.type,un.DRAPED),Ri=bi=>{const pi=new Ps.z(Vs,bi,{layerUid:Ue,graphicUid:ke.uid});return Or.push(pi),pi};if((0,w.pC)(tr)){const bi=Ri(tr),pi=(0,w.Wg)(this.symbolLayer.marker).placement;"begin"!==pi&&"begin-end"!==pi||(0,ae.G1)(Qr,_s.position,0,1),"end"!==pi&&"begin-end"!==pi||(0,ae.G1)(Qr,_s.position,_s.position.length-3,1),this._updateBoundingSphere(bi,Qr)}const Fi=Ri(Lt);if(this._updateBoundingSphere(Fi,Qr),nt.Z.LINE_WIREFRAMES){const bi=Ri(Yt);this._updateBoundingSphere(bi,Qr)}}return new jr(this,Or,Vr,this._context.drapeSourceRenderer)}_updateBoundingSphere(Me,Ue){(0,Tr.s)(Me.boundingSphere,.5*(Ue[0]+Ue[3]),.5*(Ue[1]+Ue[4]),0,.5*Math.sqrt((Ue[3]-Ue[0])*(Ue[3]-Ue[0])+(Ue[4]-Ue[1])*(Ue[4]-Ue[1])))}get _patternHidesLine(){const Me=this.symbolLayer.pattern;return(0,w.pC)(Me)&&"style"===Me.type&&"none"===Me.style}_computeMaterialWidth(Me){return Me=(0,w.Pt)(Me,(0,ns.Wz)(1)),this._drivenProperties.size?this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size?(0,ns.F2)(1):1:(0,ns.F2)(Me)}_prepareMaterialPatch(Me,Ue,ke){const ot=Ue.material;if((0,w.Wi)(ot))return void(ke.changed&&ke.useMaterialColor&&this._patchMaterialColor(this._getCombinedOpacityAndColor(this._materialColor),this._markerMaterial,Me));if("collection"===ot.type)return;const vt="complete"===ot.type?(0,w.yw)(ot.newValue,Yt=>Yt.color):"complete"===ot.diff.color.type?ot.diff.color.newValue:null,Lt=this._getCombinedOpacityAndColor(vt);ke.useMaterialColor&&this._patchMaterialColor((0,zr.d)(Lt),this._markerMaterial,Me),this._patternHidesLine&&(Lt[3]=0),this._patchMaterialColor(Lt,this._lineMaterial,Me),delete Ue.material}_prepareMarkerPatch(Me,Ue){const ke=Ue.marker;if((0,w.Wi)(ke)||"partial"!==ke.type||(0,w.pC)(ke.diff.style)||(0,w.pC)(ke.diff.placement)||(0,w.pC)(ke.diff.color)&&"complete"!==ke.diff.color.type)return{changed:!1,useMaterialColor:(0,w.Wi)(this._markerColor)};const ot=ke.diff.color;if((0,w.Wi)(ot))return delete Ue.marker,{changed:!1,useMaterialColor:(0,w.Wi)(this._markerColor)};const vt=(0,w.Wg)(ot.newValue);return(0,w.Wi)(vt)?(delete Ue.marker,{changed:!0,useMaterialColor:!0}):(this._patchMaterialColor(this._getCombinedOpacityAndColor(vt),this._markerMaterial,Me),delete Ue.marker,{changed:!0,useMaterialColor:!1})}_patchMaterialColor(Me,Ue,ke){(0,w.Wi)(Ue)||ke.symbolLayerStatePatches.push(()=>Ue.setParameters({color:Me}))}}var un;Fn.elevationModeChangeTypes={definedChanged:Te.lO.RECREATE,staysOnTheGround:Te.lO.NONE,onTheGroundChanged:Te.lO.RECREATE},function(Ct){Ct[Ct.DRAPED=0]="DRAPED",Ct[Ct.ELEVATED=1]="ELEVATED"}(un||(un={}));var Xn=T(61751),uo=T(27530),bo=T(65231),eo=T(9044),za=T(36848),Xc=T(49580),Kl=T(67969);const Sl=["mesh"],Od=(0,$.c)(),na=(0,$.c)(),xc=(0,$.c)(),oa=(0,$.c)(),Sc=(0,$.c)(),Mu=(0,fe.c)(),Xa=(0,he.c)(),Oa=(0,ae.Ue)(),Qa=[new Xn.Z];var Bo;!function(Ct){Ct[Ct.NONE=0]="NONE",Ct[Ct.ECEF=1]="ECEF"}(Bo||(Bo={}));var Jd=T(48521),qa=T(43652),Po=T(7167);class Yl{constructor(Me,Ue,ke,ot){this.graphics3DSymbolLayer=Me,this.instanceIndex=Ue,this.elevationAligner=ke,this.elevationContext=ot,this.type="lod-instance",this._highlights=new Set,this.alignedSampledElevation=0,this.isElevationSource=!1,this.needsElevationUpdates=!1}initialize(){}setVisibility(Me){const Ue=this.lodRenderer.instanceData;Me!==Ue.getVisible(this.instanceIndex)&&Ue.setVisible(this.instanceIndex,Me)}destroy(){null!=this.instanceIndex&&(this.lodRenderer.instanceData.removeInstance(this.instanceIndex),this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this))}alignWithElevation(Me,Ue,ke){if(this.elevationAligner){(0,Q.aO)(this.elevationContext.featureExpressionInfoContext,ke);const ot=this.elevationAligner(this,this.elevationContext,Me,Ue);(0,w.pC)(ot)&&(this.alignedSampledElevation=ot)}}getCenterObjectSpace(Me=(0,$.c)()){return this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,Ko),(0,G.m)(Me,this.lodRenderer.baseBoundingSphere.center,Ko)}getBoundingBoxObjectSpace(Me=(0,ae.Ue)()){this.lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,Ko);const Ue=this.lodRenderer.baseBoundingBox;(0,ae.cS)(Me);for(let ke=0;ke<8;++ke)(0,G.s)(Pa,0==(1&ke)?Ue[0]:Ue[3],0==(2&ke)?Ue[1]:Ue[4],0==(4&ke)?Ue[2]:Ue[5]),(0,G.m)(Pa,Pa,Ko),(0,ae.pp)(Me,Pa);return Me}computeAttachmentOrigin(Me){this.lodRenderer.instanceData.getGlobalTransform(this.instanceIndex,Ko),Me.render.origin[0]+=Ko[12],Me.render.origin[1]+=Ko[13],Me.render.origin[2]+=Ko[14],Me.render.num++}getProjectedBoundingBox(Me,Ue,ke,ot,vt){var Lt=this;return(0,D.Z)(function*(){const Yt=Lt.getBoundingBoxObjectSpace(vt),tr=mo,Or=(0,ae.wp)(Yt)?1:tr.length;Lt.lodRenderer.instanceData.getGlobalTransform(Lt.instanceIndex,Ko);for(let Vr=0;Vr<Or;Vr++){const is=tr[Vr];Pa[0]=Yt[is[0]],Pa[1]=Yt[is[1]],Pa[2]=Yt[is[2]],(0,G.m)(Pa,Pa,Ko),Zl[3*Vr+0]=Pa[0],Zl[3*Vr+1]=Pa[1],Zl[3*Vr+2]=Pa[2]}if(!Me(Zl,0,Or))return null;(0,ae.cS)(Yt);let Qr=null;Lt.calculateRelativeScreenBounds&&(Qr=Lt.calculateRelativeScreenBounds());for(let Vr=0;Vr<3*Or;Vr+=3){for(let is=0;is<3;is++)Yt[is]=Math.min(Yt[is],Zl[Vr+is]),Yt[is+3]=Math.max(Yt[is+3],Zl[Vr+is]);Qr&&ke.push({location:Zl.slice(Vr,Vr+3),screenSpaceBoundingRect:Qr})}if(Ue&&((0,ae.be)(Yt,Ua),"absolute-height"!==Lt.elevationContext.mode)){let Vr;const is=(0,ze.Si)(Yt,Ue);try{Vr=yield Ue.service.queryElevation(Ua[0],Ua[1],ot,is,"ground")}catch{}(0,w.pC)(Vr)&&(0,ae.cv)(Yt,0,0,-Lt.alignedSampledElevation+Vr)}return Yt})()}addObjectState(Me,Ue){if(Me===Xe.V_.Highlight){const ke=new Po.O(Me);this._addHighlightId(ke),Ue.addExternal(ot=>{this._removeHighlightId(ot)},ke)}}removeObjectState(Me){this._highlights.forEach(Ue=>Me.remove(Ue))}_addHighlightId(Me){this._highlights.add(Me),this.lodRenderer.instanceData.setHighlight(this.instanceIndex,!0)}_removeHighlightId(Me){this._highlights.delete(Me),this.lodRenderer.instanceData.setHighlight(this.instanceIndex,this._highlights.size>0)}get lodRenderer(){return this.graphics3DSymbolLayer.lodRenderer}}const Zl=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pa=(0,$.c)(),Ua=(0,$.c)(),mo=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],Ko=(0,fe.c)();var $n=T(87930),no=T(47526);const Xd=.05;var Jn,bu=T(6176),Qd=T(56244),qd=T(97161),Ha=T(4511),Tu=T(59856),zn=T(39114),Jl=T(67857),Cu=T(82274),Xl=T(91263),Yo=T(2282),Ou=T(61885),Zo=T(98943);!function(Ct){Ct[Ct.ALLOCATED=1]="ALLOCATED",Ct[Ct.DEFAULT_ACTIVE=2]="DEFAULT_ACTIVE",Ct[Ct.VISIBLE=4]="VISIBLE",Ct[Ct.HIGHLIGHT=8]="HIGHLIGHT",Ct[Ct.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE",Ct[Ct.REMOVE=32]="REMOVE",Ct[Ct.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED",Ct[Ct.ACTIVE=18]="ACTIVE"}(Jn||(Jn={}));class Ah{constructor(Me){this.localTransform=Me.getField(Oe.T.LOCALTRANSFORM,De.O1),this.globalTransform=Me.getField(Oe.T.GLOBALTRANSFORM,De.O1),this.modelOrigin=Me.getField(Oe.T.MODELORIGIN,De.fP),this.model=Me.getField(Oe.T.MODEL,De.gK),this.modelNormal=Me.getField(Oe.T.MODELNORMAL,De.gK),this.modelScaleFactors=Me.getField(Oe.T.MODELSCALEFACTORS,De.Eu),this.boundingSphere=Me.getField(Oe.T.BOUNDINGSPHERE,De.Cd),this.color=Me.getField(Oe.T.COLOR,De.ek),this.featureAttribute=Me.getField(Oe.T.FEATUREATTRIBUTE,De.ek),this.state=Me.getField(Oe.T.STATE,De.D_),this.lodLevel=Me.getField(Oe.T.LODLEVEL,De.D_)}}class Qc extends Ou.Z{constructor(Me,Ue){super(),this._capacity=0,this._size=0,this._next=0,this._layout=function Ac(Ct){let Me=(0,ia.U$)().mat4f64(Oe.T.LOCALTRANSFORM).mat4f64(Oe.T.GLOBALTRANSFORM).vec4f64(Oe.T.BOUNDINGSPHERE).vec3f64(Oe.T.MODELORIGIN).mat3f(Oe.T.MODEL).mat3f(Oe.T.MODELNORMAL).vec2f(Oe.T.MODELSCALEFACTORS);return Ct.includes("color")&&(Me=Me.vec4f(Oe.T.COLOR)),Ct.includes("featureAttribute")&&(Me=Me.vec4f(Oe.T.FEATUREATTRIBUTE)),Me=Me.u8(Oe.T.STATE).u8(Oe.T.LODLEVEL).alignTo(8),Me}(Me),this._shaderTransformation=Ue}get capacity(){return this._capacity}get size(){return this._size}get buffer(){return this._buffer.buffer}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const Me=this._findSlot();return this._view.state.set(Me,Jn.ALLOCATED),this._size++,this.emit("instance-added",{index:Me}),Me}removeInstance(Me){(0,Yo.hu)(Me>=0&&Me<this._capacity&&this._view.state.get(Me)&Jn.ALLOCATED,"invalid instance handle"),this._getStateFlag(Me,Jn.ACTIVE)?this._setStateFlags(Me,Jn.REMOVE):this.freeInstance(Me),this.emit("instance-removed",{index:Me})}freeInstance(Me){const Ue=this._view.state;(0,Yo.hu)(Me>=0&&Me<this._capacity&&Ue.get(Me)&Jn.ALLOCATED,"invalid instance handle"),Ue.set(Me,0),this._size--}setLocalTransform(Me,Ue,ke=!0){this._view.localTransform.setMat(Me,Ue),ke&&this.updateModelTransform(Me)}getLocalTransform(Me,Ue){this._view.localTransform.getMat(Me,Ue)}setGlobalTransform(Me,Ue,ke=!0){this._view.globalTransform.setMat(Me,Ue),ke&&this.updateModelTransform(Me)}getGlobalTransform(Me,Ue){this._view.globalTransform.getMat(Me,Ue)}updateModelTransform(Me){const Ue=this._view,ke=dc,ot=Ba;Ue.localTransform.getMat(Me,Pu),Ue.globalTransform.getMat(Me,Do);const vt=(0,ye.m)(Do,Do,Pu);(0,G.s)(ke,vt[12],vt[13],vt[14]),Ue.modelOrigin.setVec(Me,ke),(0,_e.f)(ot,vt),Ue.model.setMat(Me,ot);const Lt=(0,Zo.mw)(dc,vt);Lt.sort(),Ue.modelScaleFactors.set(Me,0,Lt[1]),Ue.modelScaleFactors.set(Me,1,Lt[2]),(0,_e.e)(ot,ot),(0,_e.t)(ot,ot),Ue.modelNormal.setMat(Me,ot),this._setStateFlags(Me,Jn.TRANSFORM_CHANGED),this.emit("instance-transform-changed",{index:Me})}getModelTransform(Me,Ue){const ke=this._view;ke.model.getMat(Me,Ba),ke.modelOrigin.getVec(Me,dc),Ue[0]=Ba[0],Ue[1]=Ba[1],Ue[2]=Ba[2],Ue[3]=0,Ue[4]=Ba[3],Ue[5]=Ba[4],Ue[6]=Ba[5],Ue[7]=0,Ue[8]=Ba[6],Ue[9]=Ba[7],Ue[10]=Ba[8],Ue[11]=0,Ue[12]=dc[0],Ue[13]=dc[1],Ue[14]=dc[2],Ue[15]=1}applyShaderTransformation(Me,Ue){this._shaderTransformation&&this._shaderTransformation.applyTransform(this,Me,Ue)}getCombinedModelTransform(Me,Ue){return this.getModelTransform(Me,Ue),this._shaderTransformation&&this._shaderTransformation.applyTransform(this,Me,Ue),Ue}getCombinedLocalTransform(Me,Ue){return this._view.localTransform.getMat(Me,Ue),this._shaderTransformation&&this._shaderTransformation.applyTransform(this,Me,Ue),Ue}getCombinedMaxScaleFactor(Me){let Ue=this._view.modelScaleFactors.get(Me,1);if(this._shaderTransformation){const ke=this._shaderTransformation.scaleFactor(dc,this,Me);Ue*=Math.max(ke[0],ke[1],ke[2])}return Ue}getCombinedMedianScaleFactor(Me){let Ue=this._view.modelScaleFactors.get(Me,0);if(this._shaderTransformation){const ke=this._shaderTransformation.scaleFactor(dc,this,Me);ke.sort(),Ue*=ke[1]}return Ue}getModel(Me,Ue){this._view.model.getMat(Me,Ue)}setFeatureAttribute(Me,Ue){this._view.featureAttribute.setVec(Me,Ue)}getFeatureAttribute(Me,Ue){this._view.featureAttribute.getVec(Me,Ue)}setColor(Me,Ue){this._view.color.setVec(Me,Ue)}getColor(Me,Ue){this._view.color.getVec(Me,Ue)}setVisible(Me,Ue){Ue!==this.getVisible(Me)&&(this._setStateFlag(Me,Jn.VISIBLE,Ue),this.emit("instance-visibility-changed",{index:Me}))}getVisible(Me){return this._getStateFlag(Me,Jn.VISIBLE)}setHighlight(Me,Ue){Ue!==this.getHighlight(Me)&&(this._setStateFlag(Me,Jn.HIGHLIGHT,Ue),this.emit("instance-highlight-changed",{index:Me}))}getHighlight(Me){return this._getStateFlag(Me,Jn.HIGHLIGHT)}getState(Me){return this._view.state.get(Me)}getLodLevel(Me){return this._view.lodLevel.get(Me)}countFlags(Me){let Ue=0;for(let ke=0;ke<this._capacity;++ke)this.getState(ke)&Me&&++Ue;return Ue}_setStateFlags(Me,Ue){const ke=this._view.state;Ue=ke.get(Me)|Ue,ke.set(Me,Ue)}_clearStateFlags(Me,Ue){const ke=this._view.state;Ue=ke.get(Me)&~Ue,ke.set(Me,Ue)}_setStateFlag(Me,Ue,ke){ke?this._setStateFlags(Me,Ue):this._clearStateFlags(Me,Ue)}_getStateFlag(Me,Ue){return!!(this._view.state.get(Me)&Ue)}_grow(){const Me=Math.max(Da,Math.floor(this._capacity*Qu)),Ue=this._layout.createBuffer(Me);if(this._buffer){const ke=new Uint8Array(this._buffer.buffer);new Uint8Array(Ue.buffer).set(ke)}this._capacity=Me,this._buffer=Ue,this._view=new Ah(this._buffer)}_findSlot(){const Me=this._view.state;let Ue=this._next;for(;Me.get(Ue)&Jn.ALLOCATED;)Ue=(Ue+1)%this._capacity;return this._next=(Ue+1)%this._capacity,Ue}}const Da=1024,Qu=2,dc=(0,$.c)(),Ba=(0,he.c)(),Pu=(0,fe.c)(),Do=(0,fe.c)();var Al=T(97126);class qc extends Cu.Z{constructor(Me,Ue){super(ke=>(0,Al.w)(this._instanceData.view.boundingSphere.getVec(ke,this._tmpSphere)),{maximumDepth:25}),this._tmpSphere=(0,Al.c)(),this._tmpMat4=(0,fe.c)(),this._instanceData=Me,this._boundingSphere=Ue}addInstance(Me){const Ue=this._instanceData.view.boundingSphere,ke=this._instanceData.getCombinedModelTransform(Me,this._tmpMat4);(0,G.m)(this._tmpSphere,this._boundingSphere.center,ke),this._tmpSphere[3]=this._boundingSphere.radius*(0,Zo.u1)(ke),Ue.setVec(Me,this._tmpSphere),this.add([Me])}removeInstance(Me){this.remove([Me])}}class Du{constructor(Me,Ue){this.thresholdScale=1,this._camera=new Tu.V,this._worldSpaceRadius=Me,this._thresholds=Ue.map(ke=>ke)}updateCamera(Me){this._camera.copyFrom(Me)}selectLevel(Me,Ue){const ke=this._camera.computeScreenPixelSizeAt(Me),ot=this._worldSpaceRadius*Ue/ke,vt=this._thresholds;let Lt=-1;for(let Yt=0;Yt<vt.length;++Yt)ot>=vt[Yt]*this.thresholdScale&&(Lt=Yt);return Lt}}var eh=T(62483),jo=T(83994),el=T(49353);class eu{constructor(Me,Ue){const ke=Me.renderContext.rctx,{geometry:ot,material:vt}=Ue;this._materialRepository=Me.materialRep,vt.setParameters({instancedDoublePrecision:!0});const Lt=vt.createBufferWriter(),Yt=Lt.vertexBufferLayout,tr=Lt.elementCount(ot),Or=Lt.allocate(tr);Lt.write({},ot,Or,0),this.geometry=ot,this.material=vt,this.glMaterials=new Co.p(vt,this._materialRepository),this.vertexBufferLayout=Yt,this.vbo=jo.f.createVertex(ke,Kl.l1.STATIC_DRAW,Or.buffer),this.vao=new el.U(ke,zn.i,{geometry:(0,Ha.K)(Yt)},{geometry:this.vbo}),this.vertexCount=tr}destroy(){this.glMaterials.destroy(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(Me,Ue,ke,ot,vt,Lt,Yt,tr){const Or=this.geometry.id;this.material.intersect(this.geometry,null,Me.transform.transform,Me,ke,ot,(Qr,Vr,is,us,_s)=>{if(Qr>=0){if(null!=Ue&&!Ue(Me.rayBegin,Me.rayEnd,Qr))return;const Vs={layerUid:Lt.layerUid,graphicUid:Lt.graphicUid(vt),geometryId:Or,triangleNr:is,baseBoundingSphere:Yt,numLodLevels:tr};if((null==Me.results.min.drapedLayerOrder||_s>=Me.results.min.drapedLayerOrder)&&(null==Me.results.min.dist||Qr<Me.results.min.dist)&&Me.results.min.set(Jl.q7.LOD,Vs,Qr,Vr,Me.transform.transform,_s),Me.options.store!==Jl.eC.MIN&&(null==Me.results.max.drapedLayerOrder||_s>=Me.results.max.drapedLayerOrder)&&(null==Me.results.max.dist||Qr>Me.results.max.dist)&&Me.results.max.set(Jl.q7.LOD,Vs,Qr,Vr,Me.transform.transform,_s),Me.options.store===Jl.eC.ALL){const Ri=(0,eh.LP)(Me.results.min.ray);Ri.set(Jl.q7.LOD,Vs,Qr,Vr,Me.transform.transform,_s),Me.results.all.push(Ri)}}})}}class ua{constructor(Me,Ue){this.minScreenSpaceRadius=Me,this.components=Ue}static create(Me,Ue,ke){return(0,D.Z)(function*(){const ot=yield Promise.allSettled(Ue.components.map(Lt=>Me.schedule(()=>new eu(Me,Lt),ke))),vt=ot.map(Lt=>"fulfilled"===Lt.status?Lt.value:null).filter(Lt=>Lt);if((0,B.Hc)(ke)||vt.length!==ot.length){vt.forEach(Lt=>Lt.destroy()),(0,B.k_)(ke);for(const Lt of ot)if("rejected"===Lt.status)throw Lt.reason}return new ua(Ue.minScreenSpaceRadius,vt)})()}destroy(){this.components.forEach(Me=>Me.destroy())}intersect(Me,Ue,ke,ot,vt,Lt,Yt){this.components.forEach(tr=>tr.intersect(Me,Ue,ke,ot,vt,Lt,this.boundingSphere,Yt))}get boundingBox(){if((0,w.Wi)(this._boundingBox)){const Me=(0,ae.cS)();this.components.forEach(Ue=>{(0,w.pC)(Ue.boundingInfo)&&((0,ae.pp)(Me,Ue.boundingInfo.bbMin),(0,ae.pp)(Me,Ue.boundingInfo.bbMax))}),this._boundingBox=Me}return this._boundingBox}get boundingSphere(){if((0,w.Wi)(this._boundingSphere)){const Me=this.boundingBox,Ue=(0,$.c)();(0,ae.be)(Me,Ue),this._boundingSphere={center:Ue,radius:.5*(0,ae.wz)(Me)}}return this._boundingSphere}get triangleCount(){return this.components.reduce((Me,Ue)=>Me+Ue.triangleCount,0)}}class xu{constructor(Me,Ue,ke){this._elementSize=Ue,this._buffer=jo.f.createVertex(Me,Kl.l1.STATIC_DRAW),this.resize(ke)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get memoryUsage(){return{cpu:this._capacity*this._elementSize,gpu:this._capacity*this._elementSize}}copyRange(Me,Ue,ke,ot=0){const vt=new Uint8Array(this.array,Me*this.elementSize,(Ue-Me)*this.elementSize);new Uint8Array(ke.array,ot*this.elementSize).set(vt)}transferAll(){this._buffer.setData(this._array)}transferRange(Me,Ue){const ke=Me*this._elementSize;this._buffer.setSubData(this._array,ke,ke,Ue*this._elementSize)}resize(Me){const Ue=Me*this._elementSize,ke=new ArrayBuffer(Ue);this._array&&(Me>=this._capacity?new Uint8Array(ke).set(new Uint8Array(this._array)):new Uint8Array(ke).set(new Uint8Array(this._array).subarray(0,Me*this._elementSize))),this._array=ke,this._buffer.setSize(Ue),this._capacity=Me}}class Pd{constructor(Me){this.modelOriginHi=Me.getField(Oe.T.MODELORIGINHI,De.ct),this.modelOriginLo=Me.getField(Oe.T.MODELORIGINLO,De.ct),this.model=Me.getField(Oe.T.MODEL,De.gK),this.modelNormal=Me.getField(Oe.T.MODELNORMAL,De.gK),this.color=Me.getField(Oe.T.INSTANCECOLOR,De.ek),this.featureAttribute=Me.getField(Oe.T.INSTANCEFEATUREATTRIBUTE,De.ek)}}class qu{constructor(Me,Ue){this._headIndex=0,this._tailIndex=0,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._rctx=Me,this._instanceBufferLayout=Ue,this._elementSize=Ue.stride,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const Me=this._headIndex,Ue=this._tailIndex;return Me>=Ue?Me-Ue:Me+this._capacity-Ue}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get memoryUsage(){return this._buffer?this._buffer.memoryUsage:{cpu:0,gpu:0}}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCylce(){this._captureFirstIndex=!0}beginUpdate(){(0,Yo.hu)(!this._updating,"already updating"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){(0,Yo.hu)(this._updating,"not updating"),this.size<th*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){(0,Yo.hu)(this._updating,"not updating"),this.isFull&&this._grow();const Me=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=Me,this._captureFirstIndex=!1),this._incrementHead(),(0,Yo.hu)(this._headIndex!==this._tailIndex,"invalid pointers"),Me}freeTail(){(0,Yo.hu)(this._updating,"not updating"),(0,Yo.hu)(this.size>0,"invalid size");const Me=this._tailIndex===this._firstIndex;this._incrementTail(),Me&&(this._firstIndex=this._tailIndex)}_grow(){const Me=Math.max(oo,Math.floor(this._capacity*tu));this._resize(Me)}_shrink(){const Me=Math.max(oo,Math.floor(this._capacity*rh));this._resize(Me)}_resize(Me){if((0,Yo.hu)(this._updating,"not updating"),Me===this._capacity)return;const Ue=new xu(this._rctx,this._elementSize,Me);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const ke=this.size,ot=this._compactInstances(Ue);(0,Yo.hu)(ot===ke,"invalid compaction"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=ot,this._prevHeadIndex=0}this._resized=!0,this._capacity=Me,this._buffer=Ue,this._view=new Pd(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(Me){const Ue=this._headIndex,ke=this._tailIndex;return ke<Ue?(this._buffer.copyRange(ke,Ue,Me),Ue-ke):ke>Ue?(this._buffer.copyRange(ke,this._capacity,Me),Ue>0&&this._buffer.copyRange(0,Ue,Me,this._capacity-ke),Ue+(this._capacity-ke)):0}_incrementHead(Me=1){this._headIndex=(this._headIndex+Me)%this._capacity}_incrementTail(Me=1){this._tailIndex=(this._tailIndex+Me)%this._capacity}_transferRange(Me,Ue){Me<Ue?this._buffer.transferRange(Me,Ue):Me>Ue&&(Ue>0&&this._buffer.transferRange(0,Ue),this._buffer.transferRange(Me,this._capacity))}}const oo=1024,tu=2,th=.3,rh=.5;var tl=T(57623),aa=T(65073),ru=T(39711),ko=T(26906);class Lc{constructor(Me,Ue,ke,ot){this.type=Jl.q7.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=[],this._highlightRenderInstanceData=[],this._instanceIndex=0,this._slicePlane=!1,this._enableLevelSelection=!0,this._lastCamera=new Tu.V,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.slots=[Yn.r.OPAQUE_MATERIAL,Yn.r.TRANSPARENT_MATERIAL],this.canRender=!0,this._symbol=Me,this._optionalFields=Ue,this._metadata=ke,this._instanceBufferLayout=(0,Ze.RL)({instancedDoublePrecision:!0,instanced:Ue}),this._glInstanceBufferLayout=(0,Ha.K)(this._instanceBufferLayout,1),this._instanceData=new Qc(this._optionalFields,ot),this._instanceData.on("instance-added",()=>this._requestUpdateCycle()),this._instanceData.on("instance-removed",()=>this._requestUpdateCycle()),this._instanceData.on("instance-transform-changed",vt=>{this._requestUpdateCycle(),this._metadata.notifyGraphicGeometryChanged(vt.index)}),this._instanceData.on("instance-visibility-changed",vt=>{this._requestUpdateCycle(!0),this._metadata.notifyGraphicVisibilityChanged(vt.index)}),this._instanceData.on("instance-highlight-changed",()=>this._requestUpdateCycle(!0)),this._enableLevelSelection=this._symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(Me){this._slicePlane=Me}get layerUid(){return this._metadata.layerUid}get instanceData(){return this._instanceData}get memoryUsage(){const Me={cpu:0,gpu:0};return this._defaultRenderInstanceData.forEach(Ue=>{const ke=Ue.memoryUsage;Me.cpu+=ke.cpu,Me.gpu+=ke.gpu}),this._highlightRenderInstanceData.forEach(Ue=>{const ke=Ue.memoryUsage;Me.cpu+=ke.cpu,Me.gpu+=ke.gpu}),Me}get renderStats(){const Me=this._instanceData.size,Ue=[];return this._levels.forEach((ke,ot)=>{const Yt=this._defaultRenderInstanceData[ot].size+this._highlightRenderInstanceData[ot].size,tr=ke.triangleCount;Ue.push({renderedInstances:Yt,renderedTriangles:Yt*tr,trianglesPerInstance:tr})}),{totalInstances:Me,renderedInstances:Ue.reduce((ke,ot)=>ke+ot.renderedInstances,0),renderedTriangles:Ue.reduce((ke,ot)=>ke+ot.renderedTriangles,0),levels:Ue}}initializeRenderContext(Me,Ue){var ke=this;return(0,D.Z)(function*(){ke._context=Me;const ot=Me.renderContext.rctx,vt=yield Promise.allSettled(ke._symbol.levels.map(Yt=>(ke._defaultRenderInstanceData.push(new qu(ot,ke._instanceBufferLayout)),ke._highlightRenderInstanceData.push(new qu(ot,ke._instanceBufferLayout)),ua.create(Me,Yt,Ue)))),Lt=vt.map(Yt=>"fulfilled"===Yt.status?Yt.value:null).filter(Yt=>Yt);if((0,B.Hc)(Ue)||Lt.length!==vt.length){Lt.forEach(Yt=>Yt.destroy()),(0,B.k_)(Ue);for(const Yt of vt)if("rejected"===Yt.status)throw Yt.reason}ke._levels=Lt,ke._levelSelector=(Ct=>{const Me=Ct.baseBoundingSphere.radius,Ue=Ct.levels.map(ke=>ke.minScreenSpaceRadius);return new Du(Me,Ue)})(ke)})()}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach(Me=>Me.destroy()),this._defaultRenderInstanceData.forEach(Me=>Me.destroy()),this._highlightRenderInstanceData.forEach(Me=>Me.destroy())}get needsTransparentPass(){return this._levels.some(Me=>Me.components.some(Ue=>Ue.material.requiresSlot(Yn.r.TRANSPARENT_MATERIAL)))}get needsHighlight(){return this._highlightRenderInstanceData.some(Me=>Me.size>0)}prepareRender(Me){if(nt.Z.LOD_INSTANCE_RENDERER_DISABLE_UPDATES)return;if(this._enableLevelSelection){const ke=Me.bindParameters.contentCamera.equals(this._lastCamera);this._lastCamera.copyFrom(Me.bindParameters.contentCamera),ke||this._requestUpdateCycle()}const Ue=this._needFullCycle?this._instanceData.size:2e3;this._needFullCycle=!1,this._updateInstances(Me.bindParameters.contentCamera,Ue),this.needsUpdates&&this._context.requestRender()}render(Me){if(!this.baseMaterial.isVisible()||!this.baseMaterial.isVisibleInPass(Me.pass))return;Me.rctx.bindVAO();const ke=Me.pass!==Xl.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT;Me.pass!==Xl.C.MATERIAL_HIGHLIGHT&&Me.pass!==Xl.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT&&this._renderComponents(Me,this._defaultRenderInstanceData),ke&&this._renderComponents(Me,this._highlightRenderInstanceData)}intersect(Me,Ue,ke,ot){if(!this.baseMaterial.isVisible())return;const vt=(0,$.c)();(0,G.b)(vt,ot,ke);const Lt=Yt=>{this._instanceData.getCombinedModelTransform(Yt,ql),Me.transform.set(ql),(0,G.m)(wc,ke,Me.transform.inverse),(0,G.m)(hc,ot,Me.transform.inverse);const tr=this._instanceData.getState(Yt),Or=this._instanceData.getLodLevel(Yt),Qr=this._levels.length;(0,Yo.hu)(tr&Jn.ACTIVE,"invalid instance state"),(0,Yo.hu)(Or>=0&&Or<Qr,"invaid lod level"),this._levels[Or].intersect(Me,Ue,wc,hc,Yt,this._metadata,Qr)};this.baseMaterial.parameters.verticalOffset?this.octree.forEach(Lt):this.octree.forEachAlongRay(ke,vt,Lt)}queryDepthRange(Me){return this._queryDepthRangeOctree(Me)}notifyShaderTransformationChanged(){this._invalidateOctree()}_requestUpdateCycle(Me=!1){this._updateCyclesWithStaticCamera=-1,Me&&(this._needFullCycle=!0),this.needsUpdates&&this._context.requestRender()}get needsUpdates(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}get octree(){return this._octree||(this._octree=this._buildOctree()),this._octree}_invalidateOctree(){this._octree&&(this._octree.destroy(),this._octree=null)}_buildOctree(){const Me=new qc(this._instanceData,this.baseBoundingSphere),Ue=this._instanceData,ke=Ue.view?Ue.view.state:null;for(let ot=0;ot<this._instanceData.capacity;++ot)ke.get(ot)&Jn.ACTIVE&&Me.addInstance(ot);return Me}_queryDepthRangeOctree(Me){const Ue=Me.eye,ke=Me.viewForward,ot=this.octree.findClosest(ke,Cu.Z.DepthOrder.FRONT_TO_BACK,Me.frustum),vt=this.octree.findClosest(ke,Cu.Z.DepthOrder.BACK_TO_FRONT,Me.frustum);if(null!=ot&&null!=vt){this._instanceData.view.boundingSphere.getVec(ot,rl),(0,G.b)(rl,rl,Ue);const Lt=(0,G.e)(rl,ke)-rl[3];this._instanceData.view.boundingSphere.getVec(vt,rl),(0,G.b)(rl,rl,Ue);const Yt=(0,G.e)(rl,ke)+rl[3];return{near:Math.max(Me.near,Lt),far:Math.min(Me.far,Yt)}}return{near:1/0,far:-1/0}}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._defaultRenderInstanceData.forEach(Me=>{Me.startUpdateCylce()}),this._highlightRenderInstanceData.forEach(Me=>{Me.startUpdateCylce()}),this.needsUpdates&&this._context.requestRender()}_updateInstances(Me,Ue){const ke=this._enableLevelSelection,ot=this._levelSelector;ot.updateCamera(Me),this._defaultRenderInstanceData.forEach(Qr=>{Qr.beginUpdate()}),this._highlightRenderInstanceData.forEach(Qr=>{Qr.beginUpdate()});const vt=this._instanceData,Lt=this._instanceData.view,tr=vt.capacity;let Or=this._instanceIndex;Ue=Math.min(vt.size,Ue);for(let Qr=0;Qr<Ue;++Qr){0===Or&&this._startUpdateCycle();const Vr=Lt.state.get(Or);let is=0;if(!(Vr&Jn.ALLOCATED)){Or=(Or+1)%tr,Ue++;continue}const us=Lt.lodLevel.get(Or);if(Vr&Jn.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[us].freeTail(),Vr&Jn.HIGHLIGHT_ACTIVE&&this._highlightRenderInstanceData[us].freeTail(),Vr&Jn.REMOVE)vt.freeInstance(Or);else if(Vr&Jn.VISIBLE){let _s=0;ke&&(Lt.modelOrigin.getVec(Or,ed),_s=ot.selectLevel(ed,vt.getCombinedMedianScaleFactor(Or))),is=Vr&~(Jn.ACTIVE|Jn.TRANSFORM_CHANGED),_s>=0&&(Vr&Jn.HIGHLIGHT?(Ql(this._highlightRenderInstanceData[_s],Lt,Or),is|=Jn.HIGHLIGHT_ACTIVE):(Ql(this._defaultRenderInstanceData[_s],Lt,Or),is|=Jn.DEFAULT_ACTIVE)),Lt.state.set(Or,is),Lt.lodLevel.set(Or,_s)}else is=Vr&~(Jn.ACTIVE|Jn.TRANSFORM_CHANGED),Lt.state.set(Or,is);if(this._octree){const _s=!!(Vr&Jn.ACTIVE),Vs=!!(is&Jn.ACTIVE);!_s&&Vs?this._octree.addInstance(Or):_s&&!Vs?this._octree.removeInstance(Or):_s&&Vs&&Vr&Jn.TRANSFORM_CHANGED&&(this._octree.removeInstance(Or),this._octree.addInstance(Or))}Or=(Or+1)%tr}this._instanceIndex=Or,this._defaultRenderInstanceData.forEach(Qr=>{Qr.endUpdate()}),this._highlightRenderInstanceData.forEach(Qr=>{Qr.endUpdate()})}_renderComponents(Me,Ue){this.levels.forEach((ke,ot)=>{ke.components.forEach(vt=>{this._renderComponent(Me,Ue[ot],vt,ot)})})}_renderComponent(Me,Ue,ke,ot){const vt=Me.bindParameters;if(0===Ue.size||!ke.material.requiresSlot(vt.slot))return;const{rctx:Lt,pass:Yt}=Me,tr=ke.glMaterials.load(Lt,Yt);if((0,w.Wi)(tr))return;const Or=tr.beginSlot(vt),Qr=Lt.bindTechnique(Or,ke.material.parameters,vt);Lt.bindVAO(ke.vao),Or.ensureAttributeLocations(ke.vao),Or.bindDraw(xd,vt),nt.Z.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&Me.pass===Xl.C.MATERIAL&&(Qr.setUniform4fv("externalColor",fl[Math.min(ot,fl.length-1)]),Qr.setUniform1i("colorMixMode",tl.FZ.replace));const Vr=Lt.capabilities.instancing,is=Ue.capacity,us=Ue.headIndex,_s=Ue.tailIndex,Vs=Ue.firstIndex,Ri=this._glInstanceBufferLayout,Fi=(bi,pi)=>{(0,ko.XP)(Lt,zn.i,Ue.buffer,Ri,bi),Vr.drawArraysInstanced(Or.primitiveType,0,ke.vertexCount,pi-bi),(0,ko.UF)(Lt,zn.i,Ue.buffer,Ri)};ke.material.parameters.transparent&&null!=Vs?us>_s?((0,Yo.hu)(Vs>=_s&&Vs<=us,"invalid firstIndex"),Fi(Vs,us),Fi(_s,Vs)):us<_s&&(Vs<=us?((0,Yo.hu)(Vs>=0&&Vs<=us,"invalid firstIndex"),Fi(Vs,us),Fi(_s,is),Fi(0,Vs)):((0,Yo.hu)(Vs>=_s&&Vs<=is,"invalid firstIndex"),Fi(Vs,is),Fi(0,us),Fi(_s,Vs))):us>_s?Fi(_s,us):us<_s&&(Fi(0,us),Fi(_s,is)),Lt.bindVAO(null)}}function Ql(Ct,Me,Ue){const ke=Ct.allocateHead();!function pl(Ct,Me,Ue,ke){(0,aa.EE)(Ct.modelOrigin,Me,Ue.modelOriginHi,Ue.modelOriginLo,ke),Ue.model.copyFrom(ke,Ct.model,Me),Ue.modelNormal.copyFrom(ke,Ct.modelNormal,Me),Ct.color&&Ue.color&&Ue.color.copyFrom(ke,Ct.color,Me),Ct.featureAttribute&&Ue.featureAttribute&&Ue.featureAttribute.copyFrom(ke,Ct.featureAttribute,Me)}(Me,Ue,Ct.view,ke)}const ed=(0,$.c)(),rl=(0,zr.c)(),ql=(0,fe.c)(),wc=(0,$.c)(),hc=(0,$.c)(),fl=[[1,0,1,1],[0,0,1,1],[0,1,0,1],[1,1,0,1],[1,0,0,1]],xd=new ru.Qm,Rc=(0,$.c)(),Sd=(0,fe.c)(),Ad=(0,fe.c)(),ec=(0,zr.c)(),Su=new Te.Lm;var su=T(39863);function sl(Ct,Me,Ue,ke,ot){return Ct[0]=Me,Ct[1]=Ue,Ct[2]=ke,Ct[3]=ot,Ct}function dt(Ct,Me,Ue){const ke=Me[0],ot=Me[1],vt=Me[2],Lt=Me[3],Yt=Ue[0],tr=Ue[1],Or=Ue[2],Qr=Ue[3];return Ct[0]=ke*Yt+vt*tr,Ct[1]=ot*Yt+Lt*tr,Ct[2]=ke*Or+vt*Qr,Ct[3]=ot*Or+Lt*Qr,Ct}function Es(Ct,Me,Ue){return Ct[0]=Me[0]-Ue[0],Ct[1]=Me[1]-Ue[1],Ct[2]=Me[2]-Ue[2],Ct[3]=Me[3]-Ue[3],Ct}Object.freeze(Object.defineProperty({__proto__:null,copy:function Ld(Ct,Me){return Ct[0]=Me[0],Ct[1]=Me[1],Ct[2]=Me[2],Ct[3]=Me[3],Ct},identity:function iu(Ct){return Ct[0]=1,Ct[1]=0,Ct[2]=0,Ct[3]=1,Ct},set:sl,transpose:function il(Ct,Me){if(Ct===Me){const Ue=Me[1];Ct[1]=Me[2],Ct[2]=Ue}else Ct[0]=Me[0],Ct[1]=Me[2],Ct[2]=Me[1],Ct[3]=Me[3];return Ct},invert:function xo(Ct,Me){const Ue=Me[0],ke=Me[1],ot=Me[2],vt=Me[3];let Lt=Ue*vt-ot*ke;return Lt?(Lt=1/Lt,Ct[0]=vt*Lt,Ct[1]=-ke*Lt,Ct[2]=-ot*Lt,Ct[3]=Ue*Lt,Ct):null},adjoint:function va(Ct,Me){const Ue=Me[0];return Ct[0]=Me[3],Ct[1]=-Me[1],Ct[2]=-Me[2],Ct[3]=Ue,Ct},determinant:function _c(Ct){return Ct[0]*Ct[3]-Ct[2]*Ct[1]},multiply:dt,rotate:function xt(Ct,Me,Ue){const ke=Me[0],ot=Me[1],vt=Me[2],Lt=Me[3],Yt=Math.sin(Ue),tr=Math.cos(Ue);return Ct[0]=ke*tr+vt*Yt,Ct[1]=ot*tr+Lt*Yt,Ct[2]=ke*-Yt+vt*tr,Ct[3]=ot*-Yt+Lt*tr,Ct},scale:function mt(Ct,Me,Ue){const ot=Me[1],vt=Me[2],Lt=Me[3],Yt=Ue[0],tr=Ue[1];return Ct[0]=Me[0]*Yt,Ct[1]=ot*Yt,Ct[2]=vt*tr,Ct[3]=Lt*tr,Ct},fromRotation:function ct(Ct,Me){const Ue=Math.sin(Me),ke=Math.cos(Me);return Ct[0]=ke,Ct[1]=Ue,Ct[2]=-Ue,Ct[3]=ke,Ct},fromScaling:function Ot(Ct,Me){return Ct[0]=Me[0],Ct[1]=0,Ct[2]=0,Ct[3]=Me[1],Ct},str:function Kt(Ct){return"mat2("+Ct[0]+", "+Ct[1]+", "+Ct[2]+", "+Ct[3]+")"},frob:function fr(Ct){return Math.sqrt(Ct[0]**2+Ct[1]**2+Ct[2]**2+Ct[3]**2)},LDU:function Ar(Ct,Me,Ue,ke){return Ct[2]=ke[2]/ke[0],Ue[0]=ke[0],Ue[1]=ke[1],Ue[3]=ke[3]-Ct[2]*Ue[1],[Ct,Me,Ue]},add:function Xr(Ct,Me,Ue){return Ct[0]=Me[0]+Ue[0],Ct[1]=Me[1]+Ue[1],Ct[2]=Me[2]+Ue[2],Ct[3]=Me[3]+Ue[3],Ct},subtract:Es,exactEquals:function ei(Ct,Me){return Ct[0]===Me[0]&&Ct[1]===Me[1]&&Ct[2]===Me[2]&&Ct[3]===Me[3]},equals:function Zs(Ct,Me){const Ue=Ct[0],ke=Ct[1],ot=Ct[2],vt=Ct[3],Lt=Me[0],Yt=Me[1],tr=Me[2],Or=Me[3];return Math.abs(Ue-Lt)<=su.E*Math.max(1,Math.abs(Ue),Math.abs(Lt))&&Math.abs(ke-Yt)<=su.E*Math.max(1,Math.abs(ke),Math.abs(Yt))&&Math.abs(ot-tr)<=su.E*Math.max(1,Math.abs(ot),Math.abs(tr))&&Math.abs(vt-Or)<=su.E*Math.max(1,Math.abs(vt),Math.abs(Or))},multiplyScalar:function Qs(Ct,Me,Ue){return Ct[0]=Me[0]*Ue,Ct[1]=Me[1]*Ue,Ct[2]=Me[2]*Ue,Ct[3]=Me[3]*Ue,Ct},multiplyScalarAndAdd:function ji(Ct,Me,Ue,ke){return Ct[0]=Me[0]+Ue[0]*ke,Ct[1]=Me[1]+Ue[1]*ke,Ct[2]=Me[2]+Ue[2]*ke,Ct[3]=Me[3]+Ue[3]*ke,Ct},mul:dt,sub:Es},Symbol.toStringTag,{value:"Module"}));var Qi=T(14658);class go extends Pe.Z{constructor(Me,Ue,ke,ot,vt,Lt){super(Me,Ue),this.path=ke,this.geometrySR=ot,this.upVectorAlignment=vt,this.stencilWidth=Lt}}function Au(Ct){return"upVectorAlignment"in Ct}Object.freeze(Object.defineProperty({__proto__:null,create:function td(){return[1,0,0,1]},clone:function wd(Ct){return[Ct[0],Ct[1],Ct[2],Ct[3]]},fromValues:function pc(Ct,Me,Ue,ke){return[Ct,Me,Ue,ke]},createView:function On(Ct,Me){return new Float64Array(Ct,Me,4)}},Symbol.toStringTag,{value:"Module"}));var ja=T(90014),Rh=T(70562);function Lu(){return{up:(0,$.c)(),right:(0,$.c)()}}function rd(Ct,Me,Ue){(0,G.m)(Ct.up,Me.up,Ue),(0,G.m)(Ct.right,Me.right,Ue)}function sd(Ct,Me,Ue){(0,Y.a)(Ct,(0,G.e)(Ue,Me.right),(0,G.e)(Ue,Me.up))}class Fp{constructor(){this.pos=(0,$.c)(),this.posES=(0,$.c)(),this.posGS=(0,$.c)(),this.vRight=(0,$.c)(),this.vLeft=(0,$.c)(),this.frame=Lu(),this.rotationFrame=Lu(),this.rotationRight=(0,H.a)(),this.rotationAngle=0,this.miterStretch=[1,0,0,1]}setFrameFromUpVector(Me){(0,G.c)(this.frame.up,Me),(0,G.a)(Fe,this.vLeft,this.vRight),(0,G.n)(Fe,Fe),(0,G.g)(Cn,this.frame.up,(0,G.e)(Fe,this.frame.up)),(0,G.b)(At,Fe,Cn),(0,G.n)(At,At),(0,G.f)(this.frame.right,At,this.frame.up)}computeRotationAxisAndAngleFromUpVector(){(0,G.c)(this.rotationFrame.up,this.frame.up),(0,G.c)(this.rotationFrame.right,this.frame.right),(0,Y.a)(this.rotationRight,1,0),(0,G.g)(Cn,this.frame.up,(0,G.e)(this.frame.up,this.vLeft)),(0,G.b)(Cn,this.vLeft,Cn),(0,G.o)(Cn,Cn),(0,G.n)(Cn,Cn),(0,G.g)(Fe,this.frame.up,(0,G.e)(this.frame.up,this.vRight)),(0,G.b)(Fe,this.vRight,Fe),(0,G.n)(Fe,Fe),(0,G.f)(Qe,this.rotationFrame.up,this.vLeft);const Me=Math.sign((0,G.e)(Qe,this.vRight));if(this.rotationAngle=Me*(Math.PI-(0,Cr.ZF)((0,G.e)(Cn,Fe))),Math.abs(this.rotationAngle)>0){const ke=(0,Cr.b_)(Math.cos(.5*this.rotationAngle));sl(this.miterStretch,ke-1+1,0,0,1)}const Ue=Math.PI-this.rotationAngle;this.maxStretchDistance=Math.abs(Math.min(this.vLeftLength,this.vRightLength)/Math.cos(.5*Ue))}}class id{constructor(){this.vertices=[],this.vertexIndices=[],this.vertexNormals=[],this.poles=[],this.poleIndices=[],this.uvs=null,this.uvIndices=null}addVertex(Me,Ue){return this.vertices.push((0,H.d)(Me)),this.vertexNormals.push((0,H.d)(Ue)),this.vertices.length-1}addUV(Me){return this.uvs||(this.uvs=[],this.uvIndices=[]),this.uvs.push(Me),this.uvs.length-1}addPole(Me,Ue=null){return this.poles.push({position:(0,H.d)(Me),normal:Ue?(0,H.d)(Ue):null}),this.poles.length-1}addSegment(Me,Ue=null,ke=null){this.vertexIndices.push(Me.v0),this.vertexIndices.push(Me.v1),Ue&&(this.uvIndices.push(Ue.v0),this.uvIndices.push(Ue.v1)),ke&&(this.poleIndices.push(ke.v0),this.poleIndices.push(ke.v1))}get numSegments(){return this.vertexIndices.length/2}hasUV(){return null!=this.uvs}translate(Me,Ue){for(const ke of this.vertices)ke[0]+=Me,ke[1]+=Ue;for(const ke of this.poles)ke.position[0]+=Me,ke.position[1]+=Ue}static circle(Me=20){const ke=new id,ot={v0:0,v1:0};ke.addPole((0,H.f)(0,0));for(let Yt=0;Yt<Me;++Yt){const tr=2*Yt*Math.PI/Me,Or=Math.cos(tr),Qr=Math.sin(tr),Vr=(0,H.f)(.5*Or,.5*Qr),is=(0,H.f)(Or,Qr);ke.addVertex(Vr,is),ke.addUV(Yt/Me)}ke.addUV(1);for(let Yt=0;Yt<Me-1;++Yt){const tr={v0:Yt,v1:Yt+1};ke.addSegment(tr,tr,ot)}return ke.addSegment({v0:Me-1,v1:0},{v0:Me-1,v1:Me},ot),ke}static rect(){const ke=new id,ot=(0,H.f)(-.5,-.5),vt=(0,H.f)(.5,-.5),Lt=(0,H.f)(.5,.5),Yt=(0,H.f)(-.5,.5),tr=(0,H.f)(0,-1),Or=(0,H.f)(1,0),Qr=(0,H.f)(0,1),Vr=(0,H.f)(-1,0);ke.addUV(0),ke.addUV(1),ke.addPole((0,H.f)(0,.5),Qr),ke.addPole((0,H.f)(0,.5)),ke.addPole((0,H.f)(0,-.5)),ke.addPole((0,H.f)(0,-.5),tr);const is={v0:0,v1:1};return ke.addVertex(ot,tr),ke.addVertex(vt,tr),ke.addSegment({v0:0,v1:1},is,{v0:3,v1:3}),ke.addVertex(vt,Or),ke.addVertex(Lt,Or),ke.addSegment({v0:2,v1:3},is,{v0:2,v1:1}),ke.addVertex(Lt,Qr),ke.addVertex(Yt,Qr),ke.addSegment({v0:4,v1:5},is,{v0:0,v1:0}),ke.addVertex(Yt,Vr),ke.addVertex(ot,Vr),ke.addSegment({v0:6,v1:7},is,{v0:1,v1:2}),ke}}class ks{constructor(Me){this.vertices=[],this.offset=(0,$.c)(),this.xform=(0,fe.c)(),this.vertices=Me;const Ue=Math.floor((Me.length-1)/2);(0,G.c)(this.offset,this.vertices[Ue].pos);for(const ke of this.vertices)(0,G.b)(ke.pos,ke.pos,this.offset);(0,ye.j)(this.xform,this.xform,this.offset),this.updatePathVertexInformation()}updatePathVertexInformation(){const Me=this.vertices.length;let Ue=this.vertices[0];Ue.index=0,(0,G.s)(Ue.vLeft,0,0,0),Ue.vLeftLength=0,(0,G.b)(Ue.vRight,this.vertices[1].pos,Ue.pos),Ue.vRightLength=(0,G.l)(Ue.vRight),(0,G.n)(Ue.vRight,Ue.vRight);let ke=Ue;for(let ot=1;ot<Me;++ot)Ue=this.vertices[ot],Ue.index=ot,(0,G.c)(Ue.vLeft,ke.vRight),Ue.vLeftLength=ke.vRightLength,ot<Me-1?((0,G.b)(Ue.vRight,this.vertices[ot+1].pos,Ue.pos),Ue.vRightLength=(0,G.l)(Ue.vRight),(0,G.n)(Ue.vRight,Ue.vRight)):((0,G.c)(Ue.vRight,Ue.vLeft),Ue.vRightLength=Ue.vLeftLength),ke=Ue}}class xa{numProfilesPerJoin(){return 1}extrude(Me,Ue,ke){for(let ot=0;ot<Ue.vertices.length;++ot)ke(Me.index,Me.frame,Ue.vertices[ot],Ue.vertexNormals[ot],!1)}}class Uh{constructor(Me=.8*Math.PI,Ue=1){this.cutoffAngle=Me,this.numBendSubdivisions=Ue}numProfilesPerJoin(){return this.numBendSubdivisions+1}extrude(Me,Ue,ke){const ot=Ht;if(Math.abs(Me.rotationAngle)>=this.cutoffAngle)for(let vt=0;vt<this.numBendSubdivisions+1;++vt){(0,ye.d)(nr,.5*-Me.rotationAngle+vt*Me.rotationAngle/this.numBendSubdivisions,Me.rotationFrame.up),rd(ot,Me.frame,nr);for(let Lt=0;Lt<Ue.vertices.length;++Lt)(0,Y.h)(Ue.vertices[Lt],Me.rotationRight)*Me.rotationAngle>=0?ke(Me.index,ot,Ue.vertices[Lt],Ue.vertexNormals[Lt],!1):((0,Y.p)($o,Ue.vertices[Lt],Me.miterStretch),ke(Me.index,Me.frame,$o,Ue.vertexNormals[Lt],!0))}else for(let vt=0;vt<this.numBendSubdivisions+1;++vt)for(let Lt=0;Lt<Ue.vertices.length;++Lt){const Yt=(0,Y.h)(Ue.vertices[Lt],Me.rotationRight)*Me.rotationAngle>=0;(0,Y.p)($o,Ue.vertices[Lt],Me.miterStretch),ke(Me.index,Me.frame,$o,Ue.vertexNormals[Lt],!Yt)}}}const P_={generateUV:!1};class sh{rebuildConnectingProfileGeometry(Me,Ue,ke){for(let ot=0;ot<Ue.vertices.length;++ot)ke(Me.index,Me.frame,Ue.vertices[ot],Ue.vertexNormals[ot],0,0)}}class Hi extends sh{constructor(){super()}getNumVertices(){return 0}getNumIndices(){return 0}rebuildCapGeometry(){}buildTopology(){}}class Rd extends sh{constructor(Me,Ue=0,ke=!1){super(),this.profile=Me,this.profilePlaneOffset=Ue,this.flip=ke}getNumVertices(){return this.profile.vertices.length}getNumIndices(){return 3*this.profile.numSegments}rebuildConnectingProfileGeometry(Me,Ue,ke){for(let ot=0;ot<Ue.vertices.length;++ot)ke(Me.index,Me.frame,Ue.vertices[ot],Ue.vertexNormals[ot],this.profilePlaneOffset,0)}rebuildCapGeometry(Me,Ue){const ke=Ea;(0,Y.a)(ke,0,0);const ot=this.flip?1:-1;for(let vt=0;vt<this.profile.vertices.length;++vt)Ue(Me.index,Me.frame,this.profile.vertices[vt],ke,this.profilePlaneOffset,ot)}buildTopology(Me,Ue){const ke=this.vertexBufferStart+this.profile.vertexIndices[0];for(let ot=1;ot<this.profile.numSegments;++ot){const Yt=this.vertexBufferStart+this.profile.vertexIndices[2*ot+0],tr=this.vertexBufferStart+this.profile.vertexIndices[2*ot+1];this.flip?Ue(tr,Yt,ke):Ue(ke,Yt,tr)}}}class tc extends sh{constructor(Me){super(),this.flip=!1,this.sign=0,this.breakNormals=!1,this.numSegments=3,this.profile=Me.profile,this.flip=Me.flip,this.sign=this.flip?1:-1,this.breakNormals=Me.breakNormals,this.numSegments=Me.subdivisions}getNumVertices(){let Me=0;return Me=this.profile.vertices.length*(this.numSegments-1),this.breakNormals&&(Me+=this.profile.vertices.length),Me+=this.profile.poles.length,Me}getNumIndices(){let Me=0;Me+=2*this.profile.numSegments*(this.numSegments-1);for(let Ue=0;Ue<this.profile.numSegments;++Ue)Me+=this.profile.poleIndices[this.profile.vertexIndices[2*Ue+0]]===this.profile.poleIndices[this.profile.vertexIndices[2*Ue+1]]?1:2;return 3*Me}rebuildCapGeometry(Me,Ue){const ke=Me.frame,ot=.5*this.sign,vt=$o,Lt=Ea;(0,Y.a)(Lt,0,0);for(let Yt=0;Yt<this.profile.poles.length;++Yt){const tr=this.profile.poles[Yt];tr.normal?Ue(Me.index,ke,tr.position,tr.normal,ot,0):Ue(Me.index,ke,tr.position,Lt,ot,this.sign)}if(this.breakNormals)for(let Yt=0;Yt<this.profile.vertices.length;++Yt)Ue(Me.index,ke,this.profile.vertices[Yt],this.profile.vertexNormals[Yt],0,0);for(let Yt=0;Yt<this.numSegments-1;++Yt){const tr=(1-(Yt+1)/this.numSegments)*Math.PI*.5,Or=Math.sin(tr),Qr=Math.cos(tr);for(let Vr=0;Vr<this.profile.vertices.length;++Vr){const is=this.profile.poles[this.profile.poleIndices[Vr]];(0,Y.g)(vt,this.profile.vertices[Vr],is.position),(0,Y.f)(vt,vt,Or),is.normal?((0,Y.b)(vt,vt,is.position),Ue(Me.index,ke,vt,is.normal,ot*Qr,0)):((0,Y.i)(Lt,vt),(0,Y.f)(Lt,Lt,Or),(0,Y.b)(vt,vt,is.position),Ue(Me.index,ke,vt,Lt,ot*Qr,this.sign*Qr))}}}buildTopology(Me,Ue){const ke=this.breakNormals?this.vertexBufferStart+this.profile.poles.length:this.firstProfileVertexIndex,ot=this.breakNormals?this.vertexBufferStart+this.profile.poles.length+this.profile.vertices.length:this.vertexBufferStart+this.profile.poles.length;for(let vt=0;vt<this.profile.numSegments;++vt){const Lt=this.profile.vertexIndices[2*vt+0],Yt=this.profile.vertexIndices[2*vt+1],tr=this.vertexBufferStart+this.profile.poleIndices[Lt],Or=this.vertexBufferStart+this.profile.poleIndices[Yt];let Qr=ke+Lt,Vr=ke+Yt;for(let is=0;is<this.numSegments-1;++is){const us=ot+is*this.profile.vertices.length+Lt,_s=ot+is*this.profile.vertices.length+Yt;this.flip?(Ue(us,Vr,Qr),Ue(Vr,us,_s)):(Ue(Qr,Vr,us),Ue(_s,us,Vr)),Qr=us,Vr=_s}this.flip?(Ue(tr,Vr,Qr),tr!==Or&&Ue(tr,Or,Vr)):(Ue(Qr,Vr,tr),tr!==Or&&Ue(Vr,Or,tr))}}}class Bh{constructor(Me,Ue,ke,ot,vt,Lt=P_){this.options=Lt,this._extrusionVertexCount=0,this._triangleCount=0,this.numExtrusionProfiles=0,this.numVerticesTotal=0,this.numNormalsTotal=0,this.numUVTotal=0,this.profile=Ue,this.path=Me,this.extruder=ke,this.startCap=ot,this.endCap=vt;const Yt=this.path.vertices.length-2;this.numExtrusionProfiles=ke.numProfilesPerJoin()*Yt+2,this.numVerticesTotal=Ue.vertices.length*this.numExtrusionProfiles,this.numNormalsTotal=this.numVerticesTotal,this.startCap.vertexBufferStart=this.numVerticesTotal;const tr=this.startCap.getNumVertices();this.numVerticesTotal+=tr,this.numNormalsTotal+=tr,this.endCap.vertexBufferStart=this.numVerticesTotal;const Or=this.endCap.getNumVertices();this.numVerticesTotal+=Or,this.numNormalsTotal+=Or,this.pathVertexData=new Float32Array(1*this.numVerticesTotal),this.profileRightAxisData=new Float32Array(4*this.numVerticesTotal),this.profileUpAxisData=new Float32Array(4*this.numVerticesTotal),this.profileVertexAndNormalData=new Float32Array(4*this.numVerticesTotal),this.profile.hasUV()&&this.options.generateUV&&(this.numUVTotal=this.profile.uvs.length,this.uvData=new Float32Array(2*this.numUVTotal)),this.originData=new Float32Array(3*this.path.vertices.length),this._rebuildGeometry(),this.buildTopology()}emitVertex(Me,Ue,ke,ot,vt){if(this.profileRightAxisData[4*this._extrusionVertexCount+0]=Ue.right[0],this.profileRightAxisData[4*this._extrusionVertexCount+1]=Ue.right[1],this.profileRightAxisData[4*this._extrusionVertexCount+2]=Ue.right[2],this.profileUpAxisData[4*this._extrusionVertexCount+0]=Ue.up[0],this.profileUpAxisData[4*this._extrusionVertexCount+1]=Ue.up[1],this.profileUpAxisData[4*this._extrusionVertexCount+2]=Ue.up[2],this.profileVertexAndNormalData[4*this._extrusionVertexCount+0]=ke[0],this.profileVertexAndNormalData[4*this._extrusionVertexCount+1]=ke[1],this.profileVertexAndNormalData[4*this._extrusionVertexCount+2]=ot[0],this.profileVertexAndNormalData[4*this._extrusionVertexCount+3]=ot[1],this.pathVertexData[this._extrusionVertexCount]=Me,vt){const Lt=this.path.vertices[Me];this.profileRightAxisData[4*this._extrusionVertexCount+3]=Lt.rotationRight[0]*Lt.maxStretchDistance,this.profileUpAxisData[4*this._extrusionVertexCount+3]=Lt.rotationRight[1]*Lt.maxStretchDistance}else this.profileRightAxisData[4*this._extrusionVertexCount+3]=0,this.profileUpAxisData[4*this._extrusionVertexCount+3]=0;++this._extrusionVertexCount}emitCapVertex(Me,Ue,ke,ot,vt,Lt){this.profileRightAxisData[4*this._extrusionVertexCount+0]=Ue.right[0],this.profileRightAxisData[4*this._extrusionVertexCount+1]=Ue.right[1],this.profileRightAxisData[4*this._extrusionVertexCount+2]=Ue.right[2],this.profileUpAxisData[4*this._extrusionVertexCount+0]=Ue.up[0],this.profileUpAxisData[4*this._extrusionVertexCount+1]=Ue.up[1],this.profileUpAxisData[4*this._extrusionVertexCount+2]=Ue.up[2],this.profileVertexAndNormalData[4*this._extrusionVertexCount+0]=ke[0],this.profileVertexAndNormalData[4*this._extrusionVertexCount+1]=ke[1],this.profileVertexAndNormalData[4*this._extrusionVertexCount+2]=ot[0],this.profileVertexAndNormalData[4*this._extrusionVertexCount+3]=ot[1],this.pathVertexData[this._extrusionVertexCount]=Me,this.profileRightAxisData[4*this._extrusionVertexCount+3]=vt,this.profileUpAxisData[4*this._extrusionVertexCount+3]=Lt,++this._extrusionVertexCount}emitTriangle(Me,Ue,ke){this.vertexIndices[3*this._triangleCount+0]=Me,this.vertexIndices[3*this._triangleCount+1]=Ue,this.vertexIndices[3*this._triangleCount+2]=ke,this.pathVertexIndices[3*this._triangleCount+0]=this.pathVertexData[Me],this.pathVertexIndices[3*this._triangleCount+1]=this.pathVertexData[Ue],this.pathVertexIndices[3*this._triangleCount+2]=this.pathVertexData[ke],this.normalIndices[3*this._triangleCount+0]=Me,this.normalIndices[3*this._triangleCount+1]=Ue,this.normalIndices[3*this._triangleCount+2]=ke,++this._triangleCount}_rebuildGeometry(){const Me=(ke,ot,vt,Lt,Yt)=>this.emitVertex(ke,ot,vt,Lt,Yt),Ue=(ke,ot,vt,Lt,Yt,tr)=>this.emitCapVertex(ke,ot,vt,Lt,Yt,tr);this._extrusionVertexCount=0;for(const ke of this.path.vertices)this.originData[3*ke.index+0]=ke.pos[0],this.originData[3*ke.index+1]=ke.pos[1],this.originData[3*ke.index+2]=ke.pos[2];this.startCap.rebuildConnectingProfileGeometry(this.path.vertices[0],this.profile,Ue);for(let ke=1;ke<this.path.vertices.length-1;++ke)this.extruder.extrude(this.path.vertices[ke],this.profile,Me);if(this.endCap.rebuildConnectingProfileGeometry(this.path.vertices[this.path.vertices.length-1],this.profile,Ue),this.startCap.rebuildCapGeometry(this.path.vertices[0],Ue),this.endCap.rebuildCapGeometry(this.path.vertices[this.path.vertices.length-1],Ue),this.profile.hasUV()&&this.options.generateUV)for(let ke=0;ke<this.profile.uvs.length;++ke)this.uvData[2*ke+0]=this.profile.uvs[ke],this.uvData[2*ke+1]=0}buildTopology(){const Me=(Lt,Yt,tr)=>this.emitTriangle(Lt,Yt,tr);this._triangleCount=0;const Ue=this.profile.vertices.length,ke=this.profile.numSegments,ot=this.numExtrusionProfiles-1;let vt=ke*ot*2*3;this.startCap.indexBufferStart=vt,this.startCap.firstProfileVertexIndex=0,vt+=this.startCap.getNumIndices(),this.endCap.indexBufferStart=vt,this.endCap.firstProfileVertexIndex=Ue*(this.numExtrusionProfiles-1),vt+=this.endCap.getNumIndices(),this.vertexIndices=new Uint32Array(vt),this.normalIndices=new Uint32Array(vt),this.pathVertexIndices=new Uint32Array(vt),this.profile.hasUV()&&this.options.generateUV&&(this.uvIndices=new Uint32Array(vt));for(let Lt=0;Lt<ke;++Lt){const Yt=this.profile.vertexIndices[2*Lt],tr=this.profile.vertexIndices[2*Lt+1];for(let Or=0;Or<ot;++Or){const Qr=Or*Ue+Yt,Vr=(Or+1)*Ue+tr,is=Or*Ue+tr;Me(Qr,(Or+1)*Ue+Yt,Vr),Me(Qr,Vr,is)}}this.startCap.buildTopology(this.path.vertices[0],Me),this.endCap.buildTopology(this.path.vertices[this.path.vertices.length-1],Me)}onPathChanged(){this._rebuildGeometry()}}class Id{constructor(Me){this.builder=Me}get xform(){return this.builder.path.xform}onPathChanged(){this.builder.onPathChanged()}}class wu extends Id{constructor(Me){super(Me),this.vertexAttributePosition=null,this.vertexAttributeNormal=null,this.vertexAttributeColor=null,this.vertexAttributePosition=new Float32Array(3*this.builder.numVerticesTotal),this.vertexAttributeNormal=new Float32Array(3*this.builder.numNormalsTotal),this.vertexAttributeColor=new Uint8Array(4),this.vertexAttributeColor[0]=255,this.vertexAttributeColor[1]=255,this.vertexAttributeColor[2]=255,this.vertexAttributeColor[3]=255}bakeVertexColors(Me){this.vertexAttributeColor[0]=255*Me[0],this.vertexAttributeColor[1]=255*Me[1],this.vertexAttributeColor[2]=255*Me[2],this.vertexAttributeColor[3]=255*(Me.length>3?Me[3]:1)}bake(Me){this.size=Me;for(let Ue=0;Ue<this.builder.numVerticesTotal;++Ue){let ke=this.builder.pathVertexData[Ue];const ot=0===ke||ke===this.builder.path.vertices.length-1;ke*=3;const vt=ni;(0,G.s)(vt,this.builder.originData[ke++],this.builder.originData[ke++],this.builder.originData[ke]);const Lt=4*Ue,Yt=Cn,tr=$o,Or=Fe,Qr=Qe,Vr=_t;let is=0,us=0;if((0,G.s)(Qr,this.builder.profileRightAxisData[Lt],this.builder.profileRightAxisData[Lt+1],this.builder.profileRightAxisData[Lt+2]),(0,G.s)(Vr,this.builder.profileUpAxisData[Lt],this.builder.profileUpAxisData[Lt+1],this.builder.profileUpAxisData[Lt+2]),(0,Y.a)(tr,this.builder.profileVertexAndNormalData[Lt]*Me[0],this.builder.profileVertexAndNormalData[Lt+1]*Me[1]),ot)(0,G.f)(Or,Vr,Qr),is=this.builder.profileRightAxisData[Lt+3]*Me[0],us=this.builder.profileUpAxisData[Lt+3];else{const Vs=Ea,Ri=jh;(0,Y.a)(Vs,this.builder.profileRightAxisData[Lt+3],this.builder.profileUpAxisData[Lt+3]);const Fi=(0,Y.o)(Vs);(0,Y.i)(Vs,Vs);const bi=(0,Y.h)(tr,Vs);if(Math.abs(bi)>Fi){(0,Y.a)(Ri,-Vs[1],Vs[0]);const pi=(0,Y.h)(tr,Ri);(0,Y.f)(Vs,Vs,Fi*Math.sign(bi)),(0,Y.f)(Ri,Ri,pi),(0,Y.b)(tr,Vs,Ri)}(0,G.s)(Or,0,0,0)}(0,G.s)(Yt,Qr[0]*tr[0]+Vr[0]*tr[1],Qr[1]*tr[0]+Vr[1]*tr[1],Qr[2]*tr[0]+Vr[2]*tr[1]),this.vertexAttributePosition[3*Ue+0]=vt[0]+Yt[0]+Or[0]*is,this.vertexAttributePosition[3*Ue+1]=vt[1]+Yt[1]+Or[1]*is,this.vertexAttributePosition[3*Ue+2]=vt[2]+Yt[2]+Or[2]*is;const _s=$o;(0,Y.a)(_s,this.builder.profileVertexAndNormalData[Lt+2],this.builder.profileVertexAndNormalData[Lt+3]),this.vertexAttributeNormal[3*Ue+0]=Qr[0]*_s[0]+Vr[0]*_s[1]+Or[0]*us,this.vertexAttributeNormal[3*Ue+1]=Qr[1]*_s[0]+Vr[1]*_s[1]+Or[1]*us,this.vertexAttributeNormal[3*Ue+2]=Qr[2]*_s[0]+Vr[2]*_s[1]+Or[2]*us}}createGeometryData(){const Me=[[Oe.T.POSITION,this.builder.vertexIndices],[Oe.T.NORMAL,this.builder.normalIndices]],Ue=[[Oe.T.POSITION,{size:3,data:this.vertexAttributePosition,exclusive:!0}],[Oe.T.NORMAL,{size:3,data:this.vertexAttributeNormal,exclusive:!0}]];return this.vertexAttributeColor&&(Me.push([Oe.T.COLOR,new Uint32Array(this.builder.vertexIndices.length)]),Ue.push([Oe.T.COLOR,{size:4,data:this.vertexAttributeColor}])),{vertexAttributes:Ue,indices:Me}}onPathChanged(){super.onPathChanged(),this.bake(this.size)}intersect(Me,Ue,ke){const ot=this.builder.vertexIndices;(0,tl.CN)(Me,Ue,0,ot.length/3,ot,{size:3,data:this.vertexAttributePosition},void 0,void 0,ke)}}class fc extends Id{constructor(Me,Ue,ke,ot){super(Me),this.sizeAttributeValue=Ue,this.colorAttributeValue=ke,this.opacityAttributeValue=ot,this.vvData=null,this.baked=new wu(Me),this.vvData=new Float32Array(4*this.builder.path.vertices.length);for(let vt=0;vt<this.builder.path.vertices.length;++vt)this.vvData[4*vt+0]=Ue,this.vvData[4*vt+1]=ke,this.vvData[4*vt+2]=ot,this.vvData[4*vt+3]=0===vt||vt===this.builder.path.vertices.length-1?1:0}createGeometryData(){return{vertexAttributes:[[Oe.T.POSITION,{size:3,data:this.builder.originData,exclusive:!0}],[Oe.T.PROFILERIGHT,{size:4,data:this.builder.profileRightAxisData,exclusive:!0}],[Oe.T.PROFILEUP,{size:4,data:this.builder.profileUpAxisData,exclusive:!0}],[Oe.T.PROFILEVERTEXANDNORMAL,{size:4,data:this.builder.profileVertexAndNormalData,exclusive:!0}],[Oe.T.FEATUREVALUE,{size:4,data:this.vvData,exclusive:!0}]],indices:[[Oe.T.POSITION,this.builder.pathVertexIndices],[Oe.T.PROFILERIGHT,this.builder.vertexIndices],[Oe.T.PROFILEUP,this.builder.vertexIndices],[Oe.T.PROFILEVERTEXANDNORMAL,this.builder.vertexIndices],[Oe.T.FEATUREVALUE,this.builder.pathVertexIndices]]}}}const ni=(0,$.c)(),$o=(0,H.a)(),Ea=(0,H.a)(),jh=(0,H.a)(),Cn=(0,$.c)(),Fe=(0,$.c)(),Qe=(0,$.c)(),_t=(0,$.c)(),At=(0,$.c)(),Ht=Lu(),nr=(0,fe.c)();var Mr=T(96395),Ur=T(60881),rs=T(68565),Os=T(92724),ri=T(7228),vi=T(24079);const _n=new Map([[Oe.T.POSITION,0],[Oe.T.PROFILERIGHT,1],[Oe.T.PROFILEUP,2],[Oe.T.PROFILEVERTEXANDNORMAL,3],[Oe.T.FEATUREVALUE,4]]);class cn extends rs.C{constructor(){super(...arguments),this.ambient=(0,$.f)(.2,.2,.2),this.diffuse=(0,$.f)(.8,.8,.8),this.specular=(0,$.f)(0,0,0),this.opacity=1}}class Fo extends Ts.A{initializeConfiguration(Me,Ue){Ue.spherical=Me.viewingMode===ge.JY.Global,Ue.doublePrecisionRequiresObfuscation=(0,ri.I)(Me.rctx)}initializeProgram(Me){const Ue=Fo.shader.get().build(this.configuration);return new Wi.$(Me.rctx,Ue,_n)}_setPipelineState(Me){const Ue=this.configuration,ke=Me===Xe.Am.NONE,ot=Me===Xe.Am.FrontFace;return(0,ai.sm)({blending:Ue.output!==nn.H.Color&&Ue.output!==nn.H.Alpha||!Ue.transparent?null:ke?ys.wu:(0,ys.j7)(Me),culling:(Lt=Ue,!Lt.hasSlicePlane&&!(Lt.transparent||Lt.doubleSidedMode===Mr.q.None)&&ai.sg),depthTest:{func:(0,ys.Bh)(Me)},depthWrite:ke||ot?ai.LZ:null,colorWrite:ai.BK,stencilWrite:Ue.hasOccludees?an.s3:null,stencilTest:Ue.hasOccludees?an.RY:null,polygonOffset:ke||ot?null:ys.E0});var Lt}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}Fo.shader=new Sr.J(vi.P,()=>T.e(3478).then(T.bind(T,93478)));class Pn extends Er.W{constructor(){super(...arguments),this.output=nn.H.Color,this.doubleSidedMode=Mr.q.None,this.transparencyPassType=Xe.Am.NONE,this.spherical=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.doublePrecisionRequiresObfuscation=!1}}(0,Wt._)([(0,rr.o)({count:nn.H.COUNT})],Pn.prototype,"output",void 0),(0,Wt._)([(0,rr.o)({count:Mr.q.COUNT})],Pn.prototype,"doubleSidedMode",void 0),(0,Wt._)([(0,rr.o)({count:Xe.Am.COUNT})],Pn.prototype,"transparencyPassType",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"spherical",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"receiveShadows",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"receiveAmbientOcclusion",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"vvSize",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"vvColor",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"vvOpacity",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"hasSlicePlane",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"transparent",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"hasOccludees",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"hasMultipassTerrain",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"cullAboveGround",void 0),(0,Wt._)([(0,rr.o)()],Pn.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,Wt._)([(0,rr.o)({constValue:Os.f7.Disabled})],Pn.prototype,"pbrMode",void 0),(0,Wt._)([(0,rr.o)({constValue:!0})],Pn.prototype,"hasVvInstancing",void 0),(0,Wt._)([(0,rr.o)({constValue:!1})],Pn.prototype,"useCustomDTRExponentForWater",void 0),(0,Wt._)([(0,rr.o)({constValue:!1})],Pn.prototype,"useFillLights",void 0);var Vo=T(42037);class nl extends Kn.F5{constructor(Me){super(Me,new Fa),this.supportsEdges=!0,this._vertexAttributeLocations=_n,this._configuration=new Pn,this.vertexBufferLayout=nl.getVertexBufferLayout(this.parameters)}getConfiguration(Me,Ue){return this._configuration.output=Me,this._configuration.vvSize=this.parameters.vvSizeEnabled,this._configuration.vvColor=this.parameters.vvColorEnabled,this._configuration.vvOpacity=this.parameters.vvOpacityEnabled,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasOccludees=this.parameters.hasOccludees,Me!==nn.H.Color&&Me!==nn.H.Alpha||(this._configuration.doubleSidedMode=this.parameters.doubleSided&&"normal"===this.parameters.doubleSidedType?Mr.q.View:this.parameters.doubleSided&&"winding-order"===this.parameters.doubleSidedType?Mr.q.WindingOrder:Mr.q.None,this._configuration.receiveShadows=this.parameters.receiveShadows,this._configuration.receiveAmbientOcclusion=!!Ue.ssaoHelper.ready&&this.parameters.receiveSSAO),this._configuration.transparencyPassType=Ue.transparencyPassType,this._configuration.hasMultipassTerrain=Ue.multipassTerrain.enabled,this._configuration.cullAboveGround=Ue.multipassTerrain.cullAboveGround,this._configuration}isVisibleInPass(Me){return Me!==Xl.C.MATERIAL_DEPTH_SHADOWMAP_ALL&&Me!==Xl.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT&&Me!==Xl.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT||this.parameters.castShadows}isVisible(){const Me=this.parameters;return!!super.isVisible()&&Me.opacity>0}intersect(Me,Ue,ke,ot,vt,Lt,Yt){const tr=Me;if(!Au(tr))return;const Or=tr.path,Qr=[this.parameters.size[0],this.parameters.size[1]];if(this.parameters.vvSizeEnabled){const Fi=this.parameters.vvSizeOffset,bi=this.parameters.vvSizeFactor,pi=this.parameters.vvSizeMinSize,Dn=this.parameters.vvSizeMaxSize,qi=Or.sizeAttributeValue;Qr[0]*=(0,Cr.uZ)(Fi[0]+qi*bi[0],pi[0],Dn[0]),Qr[1]*=(0,Cr.uZ)(Fi[2]+qi*bi[2],pi[2],Dn[2])}const Vr=Math.max(Qr[0],Qr[1]),is=Me.boundingInfo;if((0,w.Wi)(is))return void this._intersectTriangles(Or,Qr,vt,Lt,Yt);const us=(0,ae.al)(is.bbMin[0]-Vr,is.bbMin[1]-Vr,is.bbMin[2]-Vr,is.bbMax[0]+Vr,is.bbMax[1]+Vr,is.bbMax[2]+Vr),_s=[Lt[0]-vt[0],Lt[1]-vt[1],Lt[2]-vt[2]],Vs=Math.sqrt(_s[0]*_s[0]+_s[1]*_s[1]+_s[2]*_s[2]);(0,tl.Tw)(us,vt,[Vs/_s[0],Vs/_s[1],Vs/_s[2]],ot.tolerance)&&this._intersectTriangles(Or,Qr,vt,Lt,Yt)}_intersectTriangles(Me,Ue,ke,ot,vt){Me.baked.size&&Me.baked.size[0]===Ue[0]&&Me.baked.size[1]===Ue[1]||Me.baked.bake(Ue),Me.baked.intersect(ke,ot,vt)}computeAttachmentOrigin(Me,Ue){const ke=Me.vertexAttributes;if(!ke)return null;const ot=ke.get(Oe.T.POSITION);return(0,za.qZ)(ot,null,!1,Ue)}createBufferWriter(){return new Np(this.vertexBufferLayout)}requiresSlot(Me){return Me===(this.parameters.transparent?Yn.r.TRANSPARENT_MATERIAL:Yn.r.OPAQUE_MATERIAL)||Me===Yn.r.DRAPED_MATERIAL}createGLMaterial(Me){return Me.output===nn.H.Color||Me.output===nn.H.Alpha||Me.output===nn.H.Depth||Me.output===nn.H.Normal||Me.output===nn.H.Highlight||Me.output===nn.H.Shadow&&this.parameters.castShadows?new mc(Me):null}static getVertexBufferLayout(Me){let Ue=(0,ia.U$)().vec3f(Oe.T.POSITION).vec4f(Oe.T.PROFILERIGHT).vec4f(Oe.T.PROFILEUP).vec4f(Oe.T.PROFILEVERTEXANDNORMAL);return(Me.vvColorEnabled||Me.vvSizeEnabled||Me.vvOpacityEnabled)&&(Ue=Ue.vec4f(Oe.T.FEATUREVALUE)),Ue}}class mc extends Ur.Z{_updateOccludeeState(Me){Me.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:Me.hasOccludees})}_updateShadowState(Me){((0,w.Wi)(this.technique)||Me.shadowMap.enabled!==this.technique.configuration.receiveShadows)&&this._material.setParameters({receiveShadows:Me.shadowMap.enabled})}beginSlot(Me){return this._output!==nn.H.Color&&this._output!==nn.H.Alpha||(this._updateShadowState(Me),this._updateOccludeeState(Me)),this.ensureTechnique(Fo,Me)}}class Fa extends cn{constructor(){super(...arguments),this.doubleSided=!1,this.doubleSidedType="normal",this.receiveSSAO=!0,this.receiveShadows=!1,this.castShadows=!0,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1}}class Np{constructor(Me){this.vertexBufferLayout=Me}allocate(Me){return this.vertexBufferLayout.createBuffer(Me)}elementCount(Me){return Me.indices.get(Oe.T.POSITION).length}write(Me,Ue,ke,ot){const vt=Lt=>{if(Ue.vertexAttributes.has(Lt)){const Yt=Ue.vertexAttributes.get(Lt),tr=Ue.indices.get(Lt);(0,Yo.hu)(4===Yt.size);const Or=ke.getField(Lt,De.ek);if(!Or)throw new Error("unable to acquire view for "+Lt);(0,Vo.SW)(tr,Yt.data,Or,ot)}};vt(Oe.T.PROFILERIGHT),vt(Oe.T.PROFILEUP),vt(Oe.T.PROFILEVERTEXANDNORMAL),this.vertexBufferLayout.hasField(Oe.T.FEATUREVALUE)&&vt(Oe.T.FEATUREVALUE),(0,Vo.NK)(Ue,this.vertexBufferLayout,Me.transformation,Me.invTranspTransformation,ke,ot)}}const Fh=["polyline"];function ih(Ct,Me,Ue){switch(Me){case"world":for(const ke of Ct.vertices)(0,G.a)(da,ke.pos,Ct.offset),Ue.worldUpAtPosition(da,Ma),ke.setFrameFromUpVector(Ma),ke.computeRotationAxisAndAngleFromUpVector();break;case"path":(0,G.a)(da,Ct.vertices[0].pos,Ct.offset),Ue.worldUpAtPosition(da,Ma),function O_(Ct,Me){let Ue=null;const ke=Ct.vertices.length,ot=.99619469809,vt=(0,$.c)(),Lt=(0,$.c)(),Yt=(0,$.c)(),tr=(0,$.c)(),Or=(0,$.c)(),Qr=(0,$.c)(),Vr=(0,ja.Ue)();let is=Ct.vertices[0];(0,G.c)(Lt,Me),(0,G.s)(vt,0,1,0),Ir.Z.makeOrthoBasisDirUpFallback(is.vRight,Lt,vt,vt,Yt,Lt,ot),(0,G.c)(is.frame.up,Lt),(0,G.c)(is.frame.right,Yt),Ue=is;for(let us=1;us<ke;++us){is=Ct.vertices[us],(0,G.a)(Or,is.vLeft,is.vRight);let _s=(0,G.l)(Or);_s>0?(_s=1/Math.sqrt(_s),Or[0]=Or[0]*_s,Or[1]=Or[1]*_s,Or[2]=Or[2]*_s):(Or[0]=is.vRight[0],Or[1]=is.vRight[1],Or[2]=is.vRight[2]),(0,G.a)(Qr,Ue.pos,Ue.frame.up),(0,ja.Yq)(is.pos,Or,Vr),(0,ja.BR)(Vr,(0,Rh.re)(Qr,is.vLeft),tr)?((0,G.b)(tr,tr,is.pos),(0,G.n)(Lt,tr),(0,G.f)(Yt,Or,Lt),(0,G.n)(Yt,Yt)):Ir.Z.makeOrthoBasisDirUpFallback(Or,Ue.frame.up,Ue.frame.right,vt,Yt,Lt,ot),(0,G.c)(is.frame.up,Lt),(0,G.c)(is.frame.right,Yt),Ue=is}}(Ct,Ma);for(const ke of Ct.vertices){const ot=Math.sign((0,G.e)(ke.frame.right,ke.vRight));(0,G.f)(ke.rotationFrame.up,ke.vRight,ke.vLeft),(0,G.g)(ke.rotationFrame.up,ke.rotationFrame.up,ot),(0,G.n)(ke.rotationFrame.up,ke.rotationFrame.up);const vt=(0,G.e)(ke.rotationFrame.up,ke.frame.up),Lt=(0,G.e)(ke.rotationFrame.up,ke.frame.right);if((0,G.g)(da,ke.frame.up,-Lt),(0,G.g)(ol,ke.frame.right,vt),(0,G.a)(da,da,ol),(0,G.n)(ke.rotationFrame.right,da),sd(ke.rotationRight,ke.frame,ke.rotationFrame.right),(0,G.o)(da,ke.vLeft),ke.rotationAngle=-ot*(Math.PI-(0,Cr.ZF)((0,G.e)(da,ke.vRight))),Math.abs(ke.rotationAngle)>0){const tr=(0,Cr.b_)(Math.cos(.5*ke.rotationAngle));sl(ke.miterStretch,1+(tr-1)*ke.rotationRight[0]*ke.rotationRight[0],(tr-1)*ke.rotationRight[0]*ke.rotationRight[1],(tr-1)*ke.rotationRight[0]*ke.rotationRight[1],1+(tr-1)*ke.rotationRight[1]*ke.rotationRight[1])}const Yt=Math.PI-ke.rotationAngle;ke.maxStretchDistance=Math.abs(Math.min(ke.vLeftLength,ke.vRightLength)*(0,Cr.b_)(Math.cos(.5*Yt)))}}}function D_(Ct,Me,Ue){switch(Ct){case"symbol-value":return Ue;case"proportional":return Me;default:return Ct}}function Vp(Ct,Me,Ue,ke){let ot=0;for(const vt of Ct.vertices)(0,Te.qZ)(vt.posES,Ue,Me,ke,Ru),ot+=Ru.sampledElevation,(0,G.a)(Ma,vt.pos,Ct.offset),ke.setAltitude(Ma,Ru.z),(0,G.b)(vt.pos,Ma,Ct.offset);return Ct.updatePathVertexInformation(),ot/Ct.vertices.length}function Ay(Ct,Me,Ue,ke){const ot=Ct.stageObject,vt=ot.geometryRecords;let Lt=0;Cm.spatialReference=ke.spatialReference;for(const Yt of vt){const tr=Yt.geometry;if(!Au(tr))continue;const Or=tr.path,Qr=Or.builder.path;zp.spatialReference=tr.geometrySR,Lt+=Vp(Qr,Me,Ue,ke),"world"!==tr.upVectorAlignment&&ih(Qr,tr.upVectorAlignment,ke),Or.onPathChanged(),tr.invalidateBoundingInfo(),ot.geometryVertexAttrsUpdated(Yt)}return Lt/vt.length}const Cm=(0,ie.Tx)(0,0,0,null),zp=(0,ie.Tx)(0,0,0,null),Ma=(0,$.c)(),da=(0,Qi.c)(),ol=(0,Qi.c)(),Ru=new Te.Lm;var Yp=T(12080);function Sa(Ct,Me,Ue,ke,ot=1){(0,G.s)(nd,1,0,0),(0,G.s)(Ic,0,1,0),(0,G.s)(Nh,0,0,1),function Ls(Ct,Me){(0,G.s)(Ki,0,0,0);for(let Ue=0;Ue<Me.count-1;Ue++)Me.getVec(Ue,la),(0,G.a)(Ki,Ki,la);(0,G.g)(Ct,Ki,1/(Me.count-1))}(nh,Me),function Ye(Ct,Me){const Ue=Ct.count-1;return(0,ja.$I)(Ct,Me,0,Math.floor(Ue/3),Math.floor(Ue*(2/3)))}(Me,oh)&&function ut(Ct,Me,Ue,ke,ot,vt){(0,w.pC)(ot)?(ot.basisMatrixAtPosition(vt,Dt),(0,G.s)(Vt,Dt[0],Dt[1],Dt[2]),(0,G.s)(cr,Dt[4],Dt[5],Dt[6]),(0,G.s)($r,Dt[8],Dt[9],Dt[10])):((0,G.s)(Vt,1,0,0),(0,G.s)(cr,0,1,0),(0,G.s)($r,0,0,1));const Lt=(0,ja.mJ)(Ct);(0,G.e)(Lt,$r)<0&&(0,G.g)(Lt,Lt,-1),(0,G.c)(ke,Lt);const Yt=(0,G.e)(Lt,cr),tr=(0,G.e)(Lt,Vt);Math.abs(Yt)<Math.abs(tr)?((0,G.C)(Me,Vt,Lt,-tr),(0,G.n)(Me,Me),(0,G.f)(Ue,Me,Lt),(0,G.n)(Ue,Ue),(0,G.g)(Ue,Ue,-1)):((0,G.C)(Ue,cr,Lt,-Yt),(0,G.n)(Ue,Ue),(0,G.f)(Me,Ue,Lt),(0,G.n)(Me,Me))}(oh,nd,Ic,Nh,Ue,nh),(0,Y.a)(Qo,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),(0,Y.a)(od,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let tr=0;tr<Me.count;tr++){Me.getVec(tr,la);const Or=(0,G.e)(nd,la),Qr=(0,G.e)(Ic,la);Qo[0]=Math.min(Qo[0],Or),Qo[1]=Math.min(Qo[1],Qr),od[0]=Math.max(od[0],Or),od[1]=Math.max(od[1],Qr)}const vt=(0,G.e)(Nh,nh);vn(Ll,Qo[0],Qo[1],vt,nd,Ic,Nh),vn(Uc,od[0],Qo[1],vt,nd,Ic,Nh),vn(Zn,Qo[0],od[1],vt,nd,Ic,Nh),(0,G.b)(Uc,Uc,Ll),(0,G.g)(Uc,Uc,.5),(0,G.b)(Zn,Zn,Ll),(0,G.g)(Zn,Zn,.5),(0,G.a)(Ll,Ll,Uc),(0,G.a)(Ll,Ll,Zn);const Yt=Qo[1]%ot;rc[0]=Qo[0]-Qo[0]%ot,rc[1]=Qo[1]-Yt;for(let tr=0;tr<Me.count;tr++){Me.getVec(tr,la),Ct.setValues(tr,((0,G.e)(nd,la)-rc[0])/ot,((0,G.e)(Ic,la)-rc[1])/ot,rc[0]/ot,rc[1]/ot);for(let Or=0;Or<3;Or++)ke.set(tr,Or,Ll[Or]),ke.set(tr,Or+3,Uc[Or]),ke.set(tr,Or+6,Zn[Or])}}const nh=(0,$.c)(),la=(0,$.c)(),oh=(0,ja.Ue)(),nd=(0,$.c)(),Ic=(0,$.c)(),Nh=(0,$.c)(),Qo=(0,H.a)(),od=(0,H.a)(),rc=(0,H.a)(),Ll=(0,$.c)(),Uc=(0,$.c)(),Zn=(0,$.c)(),Dt=(0,fe.c)(),Vt=(0,$.c)(),cr=(0,$.c)(),$r=(0,$.c)(),Ki=(0,$.c)();function vn(Ct,Me,Ue,ke,ot,vt,Lt){(0,G.s)(Ct,Me*ot[0]+Ue*vt[0]+ke*Lt[0],Me*ot[1]+Ue*vt[1]+ke*Lt[1],Me*ot[2]+Ue*vt[2]+ke*Lt[2])}var yo=T(92972),ca=T(95402),ad=T(60909),Ud=T(66401);class Om extends Ts.A{initializeProgram(Me){const Ue=Om.shader.get().build(this.configuration);return new Wi.$(Me.rctx,Ue,WE)}_setPipelineState(Me,Ue){const ke=this.configuration,ot=Me===Xe.Am.NONE,vt=Me===Xe.Am.FrontFace;return(0,ai.sm)({blending:ke.output===nn.H.Color||ke.output===nn.H.Alpha?ot?ys.wu:(0,ys.j7)(Me):null,culling:(0,ai.zp)(ke.cullFace),depthTest:{func:(0,ys.Bh)(Me)},depthWrite:ot?ke.writeDepth&&ai.LZ:(0,ys.K5)(Me),colorWrite:ai.BK,stencilWrite:ke.hasOccludees?an.s3:null,stencilTest:ke.hasOccludees?Ue?an.eD:an.RY:null,polygonOffset:ot||vt?ke.polygonOffset&&eO:(0,ys.je)(ke.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(Me,Ue){return Ue?this._occludeePipelineState:super.getPipelineState(Me,Ue)}}Om.shader=new Sr.J(Ud.P,()=>T.e(5655).then(T.bind(T,35655)));const eO={factor:1,units:1};class sc extends Er.W{constructor(){super(...arguments),this.output=nn.H.Color,this.cullFace=Xe.Vr.None,this.transparencyPassType=Xe.Am.NONE,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.writeDepth=!0,this.hasOccludees=!1,this.enableOffset=!0,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,Wt._)([(0,rr.o)({count:nn.H.COUNT})],sc.prototype,"output",void 0),(0,Wt._)([(0,rr.o)({count:Xe.Vr.COUNT})],sc.prototype,"cullFace",void 0),(0,Wt._)([(0,rr.o)({count:ca.b.COUNT})],sc.prototype,"style",void 0),(0,Wt._)([(0,rr.o)({count:Xe.Am.COUNT})],sc.prototype,"transparencyPassType",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"hasSlicePlane",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"hasVertexColors",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"polygonOffset",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"writeDepth",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"hasOccludees",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"patternSpacing",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"lineWidth",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"enableOffset",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"draped",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"hasMultipassTerrain",void 0),(0,Wt._)([(0,rr.o)()],sc.prototype,"cullAboveGround",void 0);const WE=new Map([[Oe.T.POSITION,0],[Oe.T.COLOR,3],[Oe.T.UVMAPSPACE,4],[Oe.T.BOUNDINGRECT,5]]);class Ly extends Kn.F5{constructor(Me){super(Me,new tO),this.supportsEdges=!0,this._vertexAttributeLocations=WE,this.techniqueConfig=new sc}getConfiguration(Me,Ue){return this.techniqueConfig.output=Me,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.hasVertexColors=this.parameters.hasVertexColors,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.polygonOffset=this.parameters.polygonOffset,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.style=this.parameters.style,this.techniqueConfig.patternSpacing=this.parameters.patternSpacing,this.techniqueConfig.lineWidth=this.parameters.lineWidth,this.techniqueConfig.draped=this.parameters.draped,this.techniqueConfig.transparencyPassType=Ue.transparencyPassType,this.techniqueConfig.enableOffset=Ue.camera.relativeElevation<ys.ve,this.techniqueConfig.hasMultipassTerrain=Ue.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=Ue.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(Me,Ue,ke,ot,vt,Lt,Yt){(0,tl.Bw)(Me,Ue,ot,vt,Lt,void 0,Yt)}requiresSlot(Me,Ue){return Me===Yn.r.DRAPED_MATERIAL||((0,Co.S)(Ue)===nn.H.Highlight?Me===Yn.r.OPAQUE_MATERIAL:Me===(this.parameters.writeDepth?Yn.r.TRANSPARENT_MATERIAL:Yn.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL))}createGLMaterial(Me){return Me.output===nn.H.Color||Me.output===nn.H.Alpha||Me.output===nn.H.Highlight||Me.output===nn.H.Depth&&this.parameters.writeLinearDepth?new wy(Me):null}createBufferWriter(){const Me=(0,ia.U$)().vec3f(Oe.T.POSITION).vec4u8(Oe.T.COLOR).vec4f(Oe.T.UVMAPSPACE);return this.parameters.draped||Me.mat3f(Oe.T.BOUNDINGRECT),new Ry(Me)}}class wy extends Ur.Z{_updateParameters(Me){return this.ensureTechnique(Om,Me)}_updateOccludeeState(Me){Me.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:Me.hasOccludees})}beginSlot(Me){return this._output!==nn.H.Color&&this._output!==nn.H.Alpha||this._updateOccludeeState(Me),this._updateParameters(Me)}}class Ry extends ad.G_{write(Me,Ue,ke,ot){for(const vt of this.vertexBufferLayout.fieldNames){const Lt=Ue.vertexAttributes.get(vt),Yt=Ue.indices.get(vt);if(Lt&&Yt)switch(vt){case Oe.T.POSITION:{(0,Yo.hu)(3===Lt.size);const tr=ke.getField(vt,De.ct);tr&&(0,Vo.ho)(Yt,Lt.data,Me.transformation,tr,ot);break}case Oe.T.COLOR:{(0,Yo.hu)(3===Lt.size||4===Lt.size);const tr=ke.getField(vt,De.mc);tr&&(0,Vo.Vs)(Yt,Lt.data,Lt.size,tr,ot);break}case Oe.T.UVMAPSPACE:{(0,Yo.hu)(4===Lt.size);const tr=ke.getField(vt,De.ek);tr&&(0,Vo.SW)(Yt,Lt.data,tr,ot);break}case Oe.T.BOUNDINGRECT:{(0,Yo.hu)(9===Lt.size);const tr=ke.getField(vt,De.gK);tr&&this.writeBoundingRect(Yt,Lt.data,Me.transformation,tr,ot);break}}}}writeBoundingRect(Me,Ue,ke,ot,vt){const Lt=ke,Yt=ot.typedBuffer,tr=ot.typedBufferStride,Or=Me.length;vt*=tr;for(let Qr=0;Qr<Or;++Qr){const Vr=9*Me[Qr],is=Ue[Vr],us=Ue[Vr+1],_s=Ue[Vr+2];Yt[vt]=Lt[0]*is+Lt[4]*us+Lt[8]*_s+Lt[12],Yt[vt+1]=Lt[1]*is+Lt[5]*us+Lt[9]*_s+Lt[13],Yt[vt+2]=Lt[2]*is+Lt[6]*us+Lt[10]*_s+Lt[14];for(let Vs=3;Vs<9;++Vs)Yt[vt+Vs]=Ue[Vr+Vs];vt+=tr}}}class tO extends Kn.Mt{constructor(){super(...arguments),this.color=(0,zr.f)(1,1,1,1),this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=Xe.Vr.None,this.hasOccludees=!1,this.style=ca.b.Cross,this.patternSpacing=10,this.lineWidth=1,this.draped=!0}}function sO(Ct,Me){if(function VE(Ct){return Ct.material instanceof Ly&&!Ct.material.parameters.draped}(Ct)){const Ue=Ct.geometry.vertexAttributes,ke=Ue.get(Oe.T.POSITION).data,ot=Ue.get(Oe.T.UVMAPSPACE).data,vt=Ue.get(Oe.T.BOUNDINGRECT).data;Sa(De.ek.fromTypedArray(ot),De.fP.fromTypedArray(ke),Me,De.ey.fromTypedArray(vt))}}function Uy(Ct,Me,Ue,ke){const ot=(0,qt.Wf)(Ct,Me,Ue,ke),vt=Ct.stageObject.geometryRecords;for(let Lt=0;Lt<vt.length;Lt++)sO(vt[Lt],ke);return ot}const zE=["polyline","polygon","extent"];class Dm extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._needsUV=!1,this._hasOutline=!1}doLoad(){return(0,D.Z)(function*(){})()}_ensureMaterials(){this._ensureFillMaterial(),this._ensureOutlineMaterial()}_ensureFillMaterial(){if((0,w.pC)(this._material))return;const Me=(0,w.U2)(this.symbolLayer,"material","color"),Ue=this._getCombinedOpacityAndColor(Me);this._material=function Pm(Ct,Me,Ue){return function rO(Ct,Me,Ue){return(0,w.pC)(Ct)?"none"===Ct.style||"solid"===Ct.style?("none"===Ct.style&&(Me.color=(0,zr.f)(0,0,0,0),Me.transparent=!0),new yo.E(Me)):(Me.style=function Iy(Ct){switch(Ct){case"horizontal":return ca.b.Horizontal;case"vertical":return ca.b.Vertical;case"cross":return ca.b.Cross;case"forward-diagonal":return ca.b.ForwardDiagonal;case"backward-diagonal":return ca.b.BackwardDiagonal;case"diagonal-cross":return ca.b.DiagonalCross;default:return}}(Ct.style),Me.draped=Ue.isDraped,new Ly(Me)):new yo.E(Me)}(function Wh(Ct){return Ct&&Ct.pattern||null}(Ct),Me,Ue)}(this.symbolLayer,{color:Ue,transparent:Ue[3]<1||this.needsDrivenTransparentPass,polygonOffset:!1,hasVertexColors:!0,writeLinearDepth:!0,hasSlicePlane:this._context.slicePlaneEnabled},{isDraped:this.draped}),this._needsUV=this._material instanceof Ly,this._context.stage.add(this._material)}_ensureOutlineMaterial(){const Me=this.symbolLayer.outline;!(0,w.pC)(this._outlineMaterial)&&this._isValidOutline(Me)&&(this._hasOutline=!0,this._outlineMaterial=(ke=>{const ot=(0,qs.Dp)(Me.pattern);return new wi.U({width:ke,color:this._getOutlineColor(),hasPolygonOffset:!0,hasSlicePlane:this._context.slicePlaneEnabled,isClosed:!0,stipplePattern:ot,stippleScaleWithLineWidth:!0,cap:(0,Wo.u9)(Me.patternCap||"butt")})})((0,ns.F2)(Me.size)),this._context.stage.add(this._outlineMaterial))}_isValidOutline(Me){return(0,w.pC)(Me)&&Me.size&&Me.size>0&&(0,w.pC)(Me.color)&&((0,w.Wi)(Me.pattern)||"style"!==Me.pattern.type||"none"!==Me.pattern.style)}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null,this._context.stage.remove(this._outlineMaterial),this._outlineMaterial=null}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,zE,this.symbolLayer.type))return null;const ke=this._getVertexOpacityAndColor(Me.renderingInfo,255),ot=this.setGraphicElevationContext(Ue,new Le.o);return this.ensureDrapedStatus("on-the-ground"===ot.mode),this._ensureMaterials(),this.draped?this._createAsOverlay(Ue,ke):this._createAs3DShape(Ue,ke,ot)}layerOpacityChanged(){if((0,w.pC)(this._material)){const Me=this._material.parameters.color,Ue=(0,w.U2)(this.symbolLayer,"material","color"),ke=this._getCombinedOpacity(Ue);this._material.setParameters({color:[Me[0],Me[1],Me[2],ke],transparent:ke<1||this.needsDrivenTransparentPass})}if((0,w.pC)(this._outlineMaterial)){const Me=this._outlineMaterial.parameters.color;this._outlineMaterial.setParameters({color:[Me[0],Me[1],Me[2],this._getOutlineOpacity()]})}return!0}layerElevationInfoChanged(Me,Ue,ke){const ot=this._elevationContext.mode,vt=(0,Te.GC)(Dm.elevationModeChangeTypes,ke,ot);if(vt!==Te.lO.UPDATE)return vt;const Lt=(0,Te.Xf)(ot);return this.updateGraphics3DGraphicElevationInfo(Me,Ue,()=>Lt)}slicePlaneEnabledChanged(){return(0,w.pC)(this._material)&&this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),(0,w.pC)(this._outlineMaterial)&&this._outlineMaterial.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!0}_createAs3DShape(Me,Ue,ke){const ot=Ie(Me.geometry);if((0,w.Wi)(ot))return null;ha.renderData=We(ot,this._context.elevationProvider,this._context.renderCoordsHelper,ke),ha.color=Ue;const vt=ha.renderData.position.length/3;if(this._needsUV&&(ha.uvMapSpace=new Float32Array(4*vt),ha.boundingRect=new Float64Array(9*vt)),ha.outNum=0,ha.outGeometries=[],ha.outTransforms=[],ha.outMaterials=[],this._createAs3DShapeFill(ha),this._hasOutline&&this._createAs3DShapeOutline(ha),this._logGeometryCreationWarnings(ha.renderData,ot.rings,"rings","FillSymbol3DLayer"),0===ha.outNum)return null;this._needsUV&&Sa(De.ek.fromTypedArray(ha.uvMapSpace),De.fP.fromTypedArray(ha.renderData.position),this._context.renderCoordsHelper,De.ey.fromTypedArray(ha.boundingRect));const Lt=new rt.T({geometries:ha.outGeometries,materials:ha.outMaterials,transformations:ha.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:Me.uid}}),Yt=new ne.z(this,Lt,ha.outGeometries,null,null,Uy,ke);return Yt.alignedSampledElevation=ha.renderData.sampledElevation,Yt.needsElevationUpdates=(0,Te.Xf)(ke.mode),Yt}_createAs3DShapeFill(Me){const Ue=Me.renderData.polygons;for(const{position:ke,mapPosition:ot,holeIndices:vt,index:Lt,count:Yt}of Ue){if((0,w.pC)(this._context.clippingExtent)&&((0,ae.cS)(ml),(0,ae.G1)(ml,ot),!(0,ae.Zp)(ml,this._context.clippingExtent)))continue;const tr=(0,me.e)(ot,vt,3);if(0===tr.length)continue;const Qr=Ve({indices:new Uint32Array(tr),attributeData:{position:ke,color:Me.color,mapPosition:ot,uvMapSpace:this._needsUV?new Float32Array(Me.uvMapSpace.buffer,4*Lt*Me.uvMapSpace.BYTES_PER_ELEMENT,4*Yt):null,boundingRect:this._needsUV?new Float64Array(Me.boundingRect.buffer,9*Lt*Me.boundingRect.BYTES_PER_ELEMENT,9*Yt):null}});Me.outGeometries.push(Qr),Me.outMaterials.push((0,w.Wg)(this._material)),Me.outTransforms.push(fe.I),Me.outNum++}}_createAs3DShapeOutline(Me){if(!this._hasOutline)return;const Ue=Me.renderData.outlines;for(let ke=0;ke<Ue.length;++ke){const{mapPosition:ot,position:vt}=Ue[ke];if((0,w.pC)(this._context.clippingExtent)&&((0,ae.cS)(ml),(0,ae.G1)(ml,ot),!(0,ae.Zp)(ml,this._context.clippingExtent)))continue;const Lt=(0,Wo.YU)({overlayInfo:null,removeDuplicateStartEnd:Wo.NW.REMOVE,attributeData:{position:vt,mapPosition:ot}}),Yt=Lt.vertexAttributes.get(Oe.T.POSITION);Yt.data===vt&&(Yt.data=new Float64Array(vt)),Me.outGeometries.push(Lt),Me.outMaterials.push((0,w.Wg)(this._outlineMaterial)),Me.outTransforms.push(fe.I),Me.outNum++}}_createAsOverlay(Me,Ue){const ke=Ie(Me.geometry);return(0,w.Wi)(ke)?null:((0,w.Wg)(this._material).renderPriority=this._renderPriority+this._renderPriorityStep/2,(0,w.pC)(this._outlineMaterial)&&(this._outlineMaterial.renderPriority=this._renderPriority),gl.renderData=Se(ke,this._context.overlaySR),gl.color=Ue,this._needsUV&&(gl.uvMapSpace=new Float32Array(gl.renderData.position.length/3*4)),gl.outNum=0,gl.outGeometries=[],gl.outBoundingBox=(0,ae.cS)(),gl.layerUid=this._context.layer.uid,gl.graphicsUid=Me.uid,this._createAsOverlayFill(gl),this._hasOutline&&this._createAsOverlayOutline(gl),this._logGeometryCreationWarnings(gl.renderData,ke.rings,"rings","FillSymbol3DLayer"),0===gl.outNum?null:(this._needsUV&&function Zp(Ct,Me,Ue,ke,ot=1){if(Ue.isGeographic&&ke===ge.JY.Global){const Yt=new Float64Array(Me.typedBuffer.length),tr=3*Me.count,Or=(0,Yp.Iu)(Ue);for(let Qr=0;Qr<tr;Qr+=3)(0,ue.gH)(Me.typedBuffer,Qr,Yt,Qr,Or);Me=De.fP.fromTypedArray(Yt)}(0,Y.a)(Qo,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);for(let Yt=0;Yt<Me.count;Yt++)Me.getVec(Yt,la),Qo[0]=Math.min(Qo[0],la[0]),Qo[1]=Math.min(Qo[1],la[1]);const Lt=Qo[1]%ot;rc[0]=Qo[0]-Qo[0]%ot,rc[1]=Qo[1]-Lt;for(let Yt=0;Yt<Me.count;Yt++)Me.getVec(Yt,la),Ct.setValues(Yt,(la[0]-rc[0])/ot,(la[1]-rc[1])/ot,rc[0]/ot,rc[1]/ot)}(De.ek.fromTypedArray(gl.uvMapSpace),De.fP.fromTypedArray(gl.renderData.position),this._context.overlaySR,this._context.graphicsCoreOwner.view.state.viewingMode),gl.outNum>0?new jr(this,gl.outGeometries,gl.outBoundingBox,this._context.drapeSourceRenderer):null))}_createAsOverlayFill(Me){const Ue=Me.renderData.polygons;for(const{position:ke,holeIndices:ot,index:vt,count:Lt}of Ue){if((0,ae.cS)(ml),(0,ae.G1)(ml,ke),!(0,ae.Zp)(ml,this._context.clippingExtent))continue;const Yt=(0,me.e)(ke,ot,3);if(0===Yt.length)continue;(0,ae.TC)(Me.outBoundingBox,ml);const Or=Ve({indices:new Uint32Array(Yt),attributeData:{position:ke,color:Me.color,uvMapSpace:this._needsUV?new Float32Array(Me.uvMapSpace.buffer,4*vt*Me.uvMapSpace.BYTES_PER_ELEMENT,4*Lt):null}}),Qr=new Ps.z(Or,(0,w.Wg)(this._material),{layerUid:Me.layerUid,graphicUid:Me.graphicsUid});(0,Tr.s)(Qr.boundingSphere,.5*(ml[0]+ml[3]),.5*(ml[1]+ml[4]),0,.5*Math.sqrt((ml[3]-ml[0])*(ml[3]-ml[0])+(ml[4]-ml[1])*(ml[4]-ml[1]))),Me.outGeometries.push(Qr),Me.outNum++}}_createAsOverlayOutline(Me){if(!this._hasOutline)return;const Ue=Me.renderData.outlines;for(let ke=0;ke<Ue.length;++ke){const{position:ot}=Ue[ke];if((0,ae.cS)(ml),(0,ae.G1)(ml,ot),!(0,ae.Zp)(ml,this._context.clippingExtent))continue;(0,ae.TC)(Me.outBoundingBox,ml);const vt=(0,Wo.YU)({overlayInfo:{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper},removeDuplicateStartEnd:Wo.NW.REMOVE,attributeData:{position:ot}}),Lt=new Ps.z(vt,(0,w.Wg)(this._outlineMaterial),{layerUid:Me.layerUid,graphicUid:Me.graphicsUid});(0,Tr.s)(Lt.boundingSphere,.5*(ml[0]+ml[3]),.5*(ml[1]+ml[4]),0,.5*Math.sqrt((ml[3]-ml[0])*(ml[3]-ml[0])+(ml[4]-ml[1])*(ml[4]-ml[1]))),Me.outGeometries.push(Lt),Me.outNum++}}_getOutlineOpacity(){const Me=(0,w.U2)(this.symbolLayer,"outline","color");return(this.draped?1:this._getLayerOpacity())*((0,w.pC)(Me)?Me.a:0)}_getOutlineColor(){const Me=(0,w.U2)(this.symbolLayer,"outline","color"),Ue=this._getOutlineOpacity();return(0,ze.Uu)((0,w.pC)(Me)?Kr.Z.toUnitRGB(Me):null,Ue)}test(){return{...super.test(),createAsOverlay:(Me,Ue)=>this._createAsOverlay(Me,Ue),createAs3DShape:(Me,Ue,ke)=>this._createAs3DShape(Me,Ue,ke)}}}Dm.elevationModeChangeTypes={definedChanged:Te.lO.RECREATE,staysOnTheGround:Te.lO.NONE,onTheGroundChanged:Te.lO.RECREATE};const ml=(0,ae.Ue)(),ha={renderData:null,color:null,uvMapSpace:null,boundingRect:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null},gl={renderData:null,color:null,uvMapSpace:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null};var ah=T(9824),xm=T(65542),kp=T(6169);class HE{constructor(Me,Ue,ke){this._renderer=new kp.tV(Me,Ue,ke)}get key(){return this._renderer.key}get baselineAnchorY(){return 1-this._renderer.firstRenderedBaselinePosition/this._renderer.renderedHeight}get displayWidth(){return this._renderer.displayWidth}get displayHeight(){return this._renderer.displayHeight}create(){const Me=(0,kp.GZ)(GE,this._renderer.renderedWidth,this._renderer.renderedHeight),Ue=Me.getContext("2d");return Ue.save(),this._renderer.render(Ue,0,0),Ue.restore(),new Ws.x(Me,{wrap:{s:Kl.e8.CLAMP_TO_EDGE,t:Kl.e8.CLAMP_TO_EDGE},noUnpackFlip:!1,mipmap:!0,preMultiplyAlpha:!0,powerOfTwoResizeMode:Xe.CE.PAD})}}const GE={canvas:null},x_=[0,0,1];function By(Ct,Me,Ue){Ct&&Ct.forEach(ke=>{const ot=Me(ke);(0,w.pC)(ot)&&Ue(ot,ke.graphic)})}const nO={mode:"relative-to-ground",offset:0},oO={text:null,translation:[0,0,0],elevationOffset:0,centerOffset:[0,0,0,1],screenOffset:[0,0],horizontalPlacement:"center",verticalPlacement:"center",verticalOffset:null,centerOffsetUnits:null,debugDrawLabelBorder:!1,displayWidth:0,displayHeight:0};var aO=T(16730),YE=T(44989);const lO={"calm-small":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},"rippled-small":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},"slight-small":{waveStrength:.05,perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},"moderate-small":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},"calm-medium":{waveStrength:.003125,perturbationStrength:.01,textureRepeat:8,waveVelocity:.02},"rippled-medium":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},"slight-medium":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},"moderate-medium":{waveStrength:.09,perturbationStrength:.03,textureRepeat:4,waveVelocity:.12},"calm-large":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},"rippled-large":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},"slight-large":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},"moderate-large":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}},cO=["polyline","polygon","extent"];class Iu extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot)}doLoad(){return(0,D.Z)(function*(){})()}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,cO,this.symbolLayer.type))return null;const ke=this.setGraphicElevationContext(Ue,new Le.o);return this.ensureDrapedStatus("on-the-ground"===ke.mode),this.ensureMaterial(),this.draped?this._createAsOverlay(Ue):this._createAs3DShape(Ue,ke,Ue.uid)}ensureMaterial(){if((0,w.pC)(this._material))return;const Me=new YE.m,Ue=this.symbolLayer.color;(0,w.pC)(Ue)&&(Me.color=Kr.Z.toUnitRGBA(Ue));const ke=this._getCombinedOpacity(Ue,{hasIntrinsicColor:!0});Me.color=[Me.color[0],Me.color[1],Me.color[2],ke],Me.transparent=ke<1||this.needsDrivenTransparentPass,Me.waveDirection=(0,w.pC)(this.symbolLayer.waveDirection)?Iu.headingVectorFromAngle(this.symbolLayer.waveDirection):(0,H.f)(0,0);const vt=lO[this.symbolLayer.waveStrength+"-"+this.symbolLayer.waterbodySize];Me.waveStrength=vt.waveStrength,Me.waveTextureRepeat=vt.textureRepeat,Me.waveVelocity=vt.waveVelocity,Me.flowStrength=vt.perturbationStrength,Me.hasSlicePlane=this._context.slicePlaneEnabled,Me.isDraped=this.draped,this._material=new YE.H(Me),this._context.stage.add(this._material)}layerOpacityChanged(){if((0,w.Wi)(this._material))return!0;const Me=this._material.parameters.color,Ue=this._getCombinedOpacity(this.symbolLayer.color,{hasIntrinsicColor:!0});return this._material.setParameters({color:[Me[0],Me[1],Me[2],Ue],transparent:Ue<1||this.needsDrivenTransparentPass}),!0}layerElevationInfoChanged(Me,Ue,ke){const ot=this._elevationContext.mode,vt=(0,Te.GC)(Iu.elevationModeChangeTypes,ke,ot);if(vt!==Te.lO.UPDATE)return vt;const Lt=(0,Te.Xf)(ot);return this.updateGraphics3DGraphicElevationInfo(Me,Ue,()=>Lt)}slicePlaneEnabledChanged(){return(0,w.pC)(this._material)&&this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!0}_createAs3DShape(Me,Ue,ke){const ot=Ie(Me.geometry);if((0,w.Wi)(ot))return null;wl.renderData=We(ot,this._context.elevationProvider,this._context.renderCoordsHelper,Ue);const vt=wl.renderData.position.length/3;if(wl.uvCoords=new Float64Array(2*vt),wl.outNum=0,wl.outGeometries=[],wl.outTransforms=[],wl.outMaterials=[],this._create3DShapeGeometries(wl),this._logGeometryCreationWarnings(wl.renderData,ot.rings,"rings","WaterSymbol3DLayer"),0===wl.outNum)return null;this._createUVCoordsFromVertices(wl.uvCoords,wl.renderData.mapPosition,vt,this._context.elevationProvider.spatialReference);const Lt=new rt.T({geometries:wl.outGeometries,materials:wl.outMaterials,transformations:wl.outTransforms,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:ke}}),Yt=new ne.z(this,Lt,wl.outGeometries,null,null,qt.Wf,Ue);return Yt.alignedSampledElevation=wl.renderData.sampledElevation,Yt.needsElevationUpdates=(0,Te.Xf)(Ue.mode),Yt}_createUVCoordsFromVertices(Me,Ue,ke,ot){const vt=(0,aO.c9)(ot);(0,oe.cS)(Vh);for(let tr=0;tr<ke;tr++)(0,Y.a)(G0,Ue[3*tr+0],Ue[3*tr+1]),(0,oe.Ho)(Vh,G0);(0,Tr.b)(Vh,Vh,vt);const Yt=Vh[1]%Iu.unitSizeOfTexture;H0[0]=Vh[0]-Vh[0]%Iu.unitSizeOfTexture,H0[1]=Vh[1]-Yt;for(let tr=0;tr<ke;tr++)Me[2*tr+0]=(Ue[3*tr+0]*vt-H0[0])/Iu.unitSizeOfTexture,Me[2*tr+1]=(Ue[3*tr+1]*vt-H0[1])/Iu.unitSizeOfTexture}_create3DShapeGeometries(Me){const Ue=Me.renderData.polygons,ke=Me.uvCoords;for(const{count:ot,index:vt,position:Lt,mapPosition:Yt,holeIndices:tr}of Ue){if((0,w.pC)(this._context.clippingExtent)&&((0,ae.cS)(Bc),(0,ae.G1)(Bc,Yt),!(0,ae.Zp)(Bc,this._context.clippingExtent)))continue;const Or=(0,me.e)(Yt,tr,3);if(0===Or.length)continue;const is=Ne({indices:new Uint32Array(Or),attributeData:{position:Lt,uv0:new Float64Array(ke.buffer,2*vt*ke.BYTES_PER_ELEMENT,2*ot),mapPosition:Yt}});Me.outGeometries.push(is),Me.outMaterials.push((0,w.Wg)(this._material)),Me.outTransforms.push(fe.I),Me.outNum++}}_createAsOverlay(Me){const Ue=Ie(Me.geometry);if((0,w.Wi)(Ue))return null;(0,w.Wg)(this._material).renderPriority=this._renderPriority,yl.renderData=Se(Ue,this._context.overlaySR);const ke=yl.renderData.position.length/3;return yl.uvCoords=new Float64Array(2*ke),yl.outNum=0,yl.outGeometries=[],yl.outBoundingBox=(0,ae.cS)(),yl.layerUid=this._context.layer.uid,yl.graphicsUid=Me.uid,this._createAsOverlayWater(yl),this._logGeometryCreationWarnings(yl.renderData,Ue.rings,"rings","WaterSymbol3DLayer"),0===yl.outNum?null:(this._createUVCoordsFromVertices(yl.uvCoords,yl.renderData.position,ke,this._context.overlaySR),yl.outNum>0?new jr(this,yl.outGeometries,yl.outBoundingBox,this._context.drapeSourceRenderer):null)}_createAsOverlayWater(Me){const Ue=Me.uvCoords,ke=Me.renderData.polygons;for(const{position:ot,holeIndices:vt,index:Lt,count:Yt}of ke){if((0,ae.cS)(Bc),(0,ae.G1)(Bc,ot),!(0,ae.Zp)(Bc,this._context.clippingExtent))continue;(0,ae.TC)(Me.outBoundingBox,Bc);const tr=(0,me.e)(ot,vt,3);if(0===tr.length)continue;const Vr=Ne({indices:new Uint32Array(tr),attributeData:{position:ot,uv0:new Float64Array(Ue.buffer,2*Lt*Ue.BYTES_PER_ELEMENT,2*Yt)}}),is=new Ps.z(Vr,(0,w.Wg)(this._material),{layerUid:Me.layerUid,graphicUid:Me.graphicsUid});(0,Tr.s)(is.boundingSphere,.5*(Bc[0]+Bc[3]),.5*(Bc[1]+Bc[4]),0,.5*Math.sqrt((Bc[3]-Bc[0])*(Bc[3]-Bc[0])+(Bc[4]-Bc[1])*(Bc[4]-Bc[1]))),Me.outGeometries.push(is),Me.outNum++}}static headingVectorFromAngle(Me){const Ue=(0,H.a)(),ke=(0,su.t)(Me);return Ue[0]=Math.sin(ke),Ue[1]=Math.cos(ke),Ue}test(){return{...super.test(),create3DShape:Me=>this._createAs3DShape(Me.graphic,Me.elevationContext,Me.graphicUid),ensureMaterial:()=>this.ensureMaterial()}}}Iu.unitSizeOfTexture=100,Iu.elevationModeChangeTypes={definedChanged:Te.lO.RECREATE,staysOnTheGround:Te.lO.NONE,onTheGroundChanged:Te.lO.RECREATE};const H0=(0,H.a)(),Vh=(0,oe.Ue)(),G0=(0,H.a)(),Bc=(0,ae.Ue)(),wl={renderData:null,uvCoords:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null},yl={renderData:null,uvCoords:null,outNum:0,outBoundingBox:null,outGeometries:null,outMaterials:null,outTransforms:null},uO=ce.Z.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory");function dO(Ct,Me,Ue,ke){const ot=K0[Ct.type]&&K0[Ct.type][Me.type]||jy[Me.type];return ot?new ot(Ct,Me,Ue,ke):(uO.error("GraphicsLayerFactory#make",`unknown symbol type ${Me.type}`),null)}const jy={icon:io,object:class Lh extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._resources=null,this._optionalFields=new Array,this._instanceIndexToGraphicUid=new Map,this.hasLoadedPBRTextures=!1,this._disposeResourceHandles=new Array,this.ensureDrapedStatus(!1),this.hasLoadedPBRTextures=ke.physicalBasedRenderingEnabled}getCachedSize(){const[Me,Ue,ke]=(0,w.pC)(this._resources)?this._resources.symbolSize:[1,1,1];return{width:Me,depth:Ue,height:ke}}doLoad(Me){var Ue=this;return(0,D.Z)(function*(){if(!Ue._drivenProperties.size&&(0,ze.bh)(Ue.symbolLayer))throw new Error;const ke=Ue.symbolLayer;if(Ue.isPrimitive){const ot=ke.resource?ke.resource.primitive:Jd.S;Ue._resources=yield Ue._createResourcesForPrimitive(ot,Me)}else Ue._resources=yield Ue._createResourcesForUrl(ke.resource.href,Me);Ue.layerOpacityChanged(),Ue.slicePlaneEnabledChanged(),Ue.physicalBasedRenderingChanged(),Ue.complexity=Ue.computeComplexity()})()}get extentPadding(){return(0,w.pC)(this._resources)?this._resources.extentPadding:0}get isPrimitive(){return!(this.symbolLayer.resource&&this.symbolLayer.resource.href)}get lodRenderer(){return(0,w.U2)(this._resources,"lodRenderer")}_setMaterialTransparencyParams(Me,Ue=(0,w.U2)(this.symbolLayer,"material","color")){const ke=this._getCombinedOpacity(Ue),ot=ke<1||this.needsDrivenTransparentPass;return Me.transparent=ot,Me.opacity=ke,Me.cullFace=ot?Xe.Vr.None:Xe.Vr.Back,Me}_createResourcesForPrimitive(Me,Ue){var ke=this;return(0,D.Z)(function*(){if(!(0,Qd.F)(Me))throw new Error(`Unknown object symbol primitive: ${Me}`);const ot=ke.symbolLayer,vt=(0,ae.Ue)((0,qa.Uz)(Me)),Lt=(0,$.d)((0,ae.dp)(vt)),Yt=(0,$.d)((0,qa.$K)(Lt,ot)),tr=(0,G.l)(Yt),Vr={usePBR:ke._context.physicalBasedRenderingEnabled,isSchematic:!0,ambient:$.O,diffuse:$.O,hasSlicePlane:ke._context.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:ke.symbolLayer.castShadows,offsetTransparentBackfaces:!ke.symbolLayer.isPrimitive},is=Vr.usePBR;ke._setMaterialTransparencyParams(Vr);const us=ke.symbol;if("point-3d"===us.type&&us.verticalOffset){const{screenLength:bi,minWorldLength:pi,maxWorldLength:Dn}=us.verticalOffset;Vr.verticalOffset={screenLength:(0,ns.F2)(bi),minWorldLength:pi||0,maxWorldLength:Dn??1/0},Vr.castShadows=!1}if(ke._context.screenSizePerspectiveEnabled&&(Vr.screenSizePerspective=ke._context.sharedResources.screenSizePerspectiveSettings),ke._drivenProperties.color)Vr.externalColor=zr.O;else{const bi=(0,w.pC)(ot.material)&&ot.material.color,pi=(0,w.pC)(bi)?Kr.Z.toUnitRGBA(bi):zr.O;Vr.externalColor=pi}ke._fastUpdates=zi(ke._context.renderer,ke._fastVisualVariableConvertOptions(vt,Yt,Lt,w.YP)),Vr.instanced=["transformation"],ke._fastUpdates.enabled?(Object.assign(Vr,ke._fastUpdates.materialParameters),Vr.instanced.push("featureAttribute"),ke._optionalFields.push("featureAttribute")):ke._hasPerInstanceColor()&&(Vr.instanced.push("color"),ke._optionalFields.push("color"));const _s=new Ze.Gp(Vr),Vs=(0,Qd.t)(Me,_s);if(!Vs)throw new Error(`Unknown object symbol primitive: ${Me}`);const Ri=(0,no.aH)(Vs).map(bi=>({opacity:1,transparent:bi.parameters.transparent})),Fi=yield ke._createStageResources(Vs,is);return{lodResources:Vs,lodRenderer:yield ke._createLodRenderer(Vs,Ue),stageResources:Fi,symbolSize:Yt,extentPadding:tr,isEsriSymbolResource:!1,isWosr:!1,originalMaterialParameters:Ri,physicalBasedRenderingEnabled:is,resourceBoundingBox:vt,resourceSize:Lt,pivotOffset:w.YP}})()}_createResourcesForUrl(Me,Ue){var ke=this;return(0,D.Z)(function*(){const ot=["transformation"],vt={materialParamsMixin:{instanced:ot,hasSlicePlane:ke._context.slicePlaneEnabled,castShadows:ke.symbolLayer.castShadows},streamDataRequester:ke._context.streamDataRequester,cache:ke._context.sharedResources.objectResourceCache};ke._fastUpdates=zi(ke._context.renderer,ke._fastVisualVariableConvertOptions(w.YP,w.YP,w.YP,w.YP)),ke._fastUpdates.enabled?(Object.assign(vt.materialParamsMixin,ke._fastUpdates.materialParameters),ot.push("featureAttribute"),ke._optionalFields.push("featureAttribute")):ke._hasPerInstanceColor()&&(ot.push("color"),ke._optionalFields.push("color"));const Lt=ke.symbol;if("point-3d"===Lt.type&&Lt.verticalOffset){const{screenLength:Qn,minWorldLength:vl,maxWorldLength:zo}=Lt.verticalOffset;vt.materialParamsMixin.verticalOffset={screenLength:(0,ns.F2)(Qn),minWorldLength:vl||0,maxWorldLength:zo??1/0},vt.materialParamsMixin.castShadows=!1}vt.signal=Ue,vt.usePBR=ke._context.physicalBasedRenderingEnabled;const Yt=vt.usePBR,tr=yield(0,bu.fetch)(Me,vt),Or=tr.isEsriSymbolResource,Qr=tr.isWosr;ke._addDisposeResource(()=>tr.remove());const Vr=function uc(Ct){return{levels:Ct.map(Me=>function kl(Ct){const Me=[];return Ct.stageResources.geometries.forEach((Ue,ke)=>{Me.push({material:Ct.stageResources.materials[ke],geometry:Ue,textures:Ct.stageResources.textures})}),{components:Me,minScreenSpaceRadius:Ct.lodThreshold,pivotOffset:Ct.pivotOffset}}(Me))}}(tr.lods);(function $l(Ct){Ct.levels.forEach(Me=>{Me.minScreenSpaceRadius||(Me.minScreenSpaceRadius=function Xu(Ct,Me=Xd){const Ue=(0,no.HI)(Ct);return Math.sqrt(Ue/(Me*Math.PI))}(Me))})})(Vr),Vr.levels.sort((Qn,vl)=>Qn.minScreenSpaceRadius-vl.minScreenSpaceRadius),Vr.levels[0].minScreenSpaceRadius=Math.min(2,Vr.levels[0].minScreenSpaceRadius);const is=ke._context,_s=ke._getExternalColorParameters(ke.symbolLayer.material),Vs=(0,w.U2)(ke.symbolLayer,"material","color"),Ri=ke._getCombinedOpacity(Vs,{hasIntrinsicColor:!0}),Fi=ke.needsDrivenTransparentPass,bi=(0,no.aH)(Vr),pi=(0,no.aH)(Vr).map(Qn=>({opacity:Qn.parameters.opacity||1,transparent:Qn.parameters.transparent}));bi.forEach(Qn=>{const vl=Qn.parameters;Qn.setParameters(_s);const zo=vl.opacity*Ri;Qn.setParameters({opacity:zo,transparent:zo<1||Fi||vl.transparent}),is.screenSizePerspectiveEnabled&&Qn.setParameters({screenSizePerspective:is.sharedResources.screenSizePerspectiveSettings})});const Dn=tr.referenceBoundingBox,qi=(0,$.d)((0,ae.dp)(Dn)),kn=(0,$.d)(Vr.levels[0].pivotOffset),En=(0,$.d)((0,qa.$K)(qi,ke.symbolLayer)),ho=(0,G.l)(En);Zr(ke._fastUpdates,ke._context.renderer,ke._fastVisualVariableConvertOptions(Dn,En,qi,kn))&&bi.forEach(Qn=>Qn.setParameters(ke._fastUpdates.materialParameters));const Nn=yield ke._createStageResources(Vr,Yt);return{lodResources:Vr,lodRenderer:yield ke._createLodRenderer(Vr,Ue),stageResources:Nn,symbolSize:En,extentPadding:ho,isEsriSymbolResource:Or,isWosr:Qr,originalMaterialParameters:pi,physicalBasedRenderingEnabled:Yt,resourceBoundingBox:Dn,resourceSize:qi,pivotOffset:kn}})()}_addDisposeResource(Me){this._disposeResourceHandles.push(Me)}_createStageResources(Me,Ue){var ke=this;return(0,D.Z)(function*(){const ot=ke._context.stage,vt=(0,no.aH)(Me);Ue!==ke._context.physicalBasedRenderingEnabled&&ke.physicalBasedRenderingChanged(),ot.addMany(vt),ke._addDisposeResource(()=>ot.removeMany(vt));const Lt=(0,no.VQ)(Me);ot.addMany(Lt),ke._addDisposeResource(()=>ot.removeMany(Lt)),yield ot.load(Lt);const Yt=(0,no.ci)(Me);return ot.addMany(Yt),ke._addDisposeResource(()=>ot.removeMany(Yt)),{materials:vt,textures:Lt,geometries:Yt}})()}_createLodRenderer(Me,Ue){var ke=this;return(0,D.Z)(function*(){const ot=ke._context.stage,vt={layerUid:ke._context.layer.uid,graphicUid:tr=>ke._instanceIndexToGraphicUid.get(tr),notifyGraphicGeometryChanged:tr=>ke._context.notifyGraphicGeometryChanged(ke._instanceIndexToGraphicUid.get(tr)),notifyGraphicVisibilityChanged:tr=>ke._context.notifyGraphicVisibilityChanged(ke._instanceIndexToGraphicUid.get(tr))},Yt=new Lc(Me,ke._optionalFields,vt,ke._fastUpdates.enabled?{applyTransform:(tr,Or,Qr)=>{tr.getFeatureAttribute(Or,ec),(0,ye.c)(Qr,Dr(ke._fastUpdates.materialParameters,ec,Qr))},scaleFactor:(tr,Or,Qr)=>(Or.getFeatureAttribute(Qr,ec),er(tr,ke._fastUpdates.materialParameters,ec))}:null);return Yt.slicePlaneEnabled=ke._context.slicePlaneEnabled,ke._addDisposeResource(()=>{ot.removeRenderPlugin(Yt)}),yield ot.addRenderPlugin(Yt.slots,Yt,Ue),Yt})()}_getExternalColorParameters(Me){const Ue={};return this._drivenProperties.color?Ue.externalColor=zr.O:(0,w.pC)(Me)&&(0,w.pC)(Me.color)?Ue.externalColor=Kr.Z.toUnitRGBA(Me.color):(Ue.externalColor=zr.O,Ue.colorMixMode="ignore"),Ue}destroy(){super.destroy(),this._cleanupResources()}_cleanupResources(){this._disposeResourceHandles.forEach(Me=>Me()),this._disposeResourceHandles.length=0,this._resources=null}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry))return null;const ke=(0,Rs.S_)(Ue.geometry);if((0,w.Wi)(ke))return this.logger.warn(`unsupported geometry type for icon symbol: ${Ue.geometry.type}`),null;const ot=this.setGraphicElevationContext(Ue,new Le.o);return this._createAs3DShape(Ue,ke,Me.renderingInfo,ot,Ue.uid)}notifyDestroyGraphicLayer(Me){this._instanceIndexToGraphicUid.delete(Me.instanceIndex)}graphicLayerToGraphicId(){return 0}layerOpacityChanged(){if((0,w.Wi)(this._resources))return!0;const Me=this._drivenProperties.opacity,Ue=!this.isPrimitive,ke=this._resources.stageResources.materials,ot=this._resources.originalMaterialParameters;for(let vt=0;vt<ke.length;vt++){const Lt=ke[vt],Yt=(0,w.U2)(this.symbolLayer,"material","color"),tr=ot[vt],Or=this._getCombinedOpacity(Yt,{hasIntrinsicColor:Ue})*tr.opacity,Qr=Or<1||Me||tr.transparent;Lt.setParameters({opacity:Or,transparent:Qr}),this.isPrimitive&&Lt.setParameters({cullFace:Qr?Xe.Vr.None:Xe.Vr.Back})}return!0}layerElevationInfoChanged(Me,Ue){return this.updateGraphics3DGraphicElevationInfo(Me,Ue,Te.B5)}slicePlaneEnabledChanged(){if((0,w.Wi)(this._resources))return!0;this._resources.lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;for(const Me of this._resources.stageResources.materials)Me.setParameters({hasSlicePlane:this._context.slicePlaneEnabled});return!0}physicalBasedRenderingChanged(){if((0,w.Wi)(this._resources))return!0;const{stageResources:Me,isWosr:Ue}=this._resources;for(const ke of Me.materials)this.isPrimitive?ke.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}):Ue||ke.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!1});return!1!==this.hasLoadedPBRTextures||!0!==this._context.physicalBasedRenderingEnabled||(this.hasLoadedPBRTextures=!0,!1)}pixelRatioChanged(){return!0}applyRendererDiff(Me,Ue){if((0,w.Wi)(this._resources))return Ee.W.Recreate_Symbol;const{stageResources:{materials:ke},lodRenderer:ot,resourceBoundingBox:vt,symbolSize:Lt,resourceSize:Yt,pivotOffset:tr}=this._resources;for(const Or in Me.diff){if("visualVariables"!==Or||!Zr(this._fastUpdates,Ue,this._fastVisualVariableConvertOptions(vt,Lt,Yt,tr)))return Ee.W.Recreate_Symbol;for(const Qr of ke)Qr.setParameters(this._fastUpdates.materialParameters);ot.notifyShaderTransformationChanged()}return Ee.W.Fast_Update}computeComplexity(){return(0,w.Wi)(this._resources)?super.computeComplexity():{primitivesPerFeature:(0,no.VV)(this._resources.lodResources.levels[0]).reduce((Me,Ue)=>Me+Ue.indices.get(Oe.T.POSITION).length,0)/3,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!1,memory:(0,qd.BN)(this.symbol,this.symbolLayer)}}_hasLodRenderer(){return(0,w.pC)(this._resources)}_createAs3DShape(Me,Ue,ke,ot,vt){if(!this._hasLodRenderer()||(0,w.Wi)(this._resources))return null;const Lt=this.getFastUpdateAttrValues(Me),Yt=!this._fastUpdates.enabled&&this._hasPerInstanceColor()?(0,ze.Uu)(ke.color,ke.opacity):null,tr=this._context.clippingExtent;if((0,ue.KC)(Ue,Rc,this._context.elevationProvider.spatialReference),(0,w.pC)(tr)&&!(0,ae.BD)(tr,Rc))return null;const Or=this._requiresTerrainElevation(ot),Qr=this._computeGlobalTransform(Ue,ot,Ad,Su),Vr=this._computeLocalTransform(this._resources,this.symbolLayer,ke,Sd),is=this._resources.lodRenderer.instanceData,us=is.addInstance();this._instanceIndexToGraphicUid.set(us,vt),is.setLocalTransform(us,Vr,!1),is.setGlobalTransform(us,Qr),Lt&&is.setFeatureAttribute(us,Lt),Yt&&is.setColor(us,Yt);const _s=new Yl(this,us,qt.RX,ot);return Or&&(_s.alignedSampledElevation=Su.sampledElevation),_s.needsElevationUpdates=(0,Te.B5)(ot.mode),(0,Rs.dO)(_s,Ue,this._context.elevationProvider),_s}_computeGlobalTransform(Me,Ue,ke,ot){return(0,Te.qZ)(Me,this._context.elevationProvider,Ue,this._context.renderCoordsHelper,ot),Rc[0]=Me.x,Rc[1]=Me.y,Rc[2]=ot.z,(0,ue.Bm)(Me.spatialReference,Rc,ke,this._context.renderCoordsHelper.spatialReference),ke}_computeLocalTransform(Me,Ue,ke,ot){return(0,ye.i)(ot),this._applyObjectRotation(ke,!1,ot),this._applyObjectRotation(Ue,!0,ot),this._applyObjectScale(Me,ke,ot),this._applyAnchor(Me,Ue,ot),ot}_applyObjectScale(Me,Ue,ke){if(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation)return;const vt=(0,ze.bD)(this._drivenProperties.size&&Ue.size?Ue.size:Me.symbolSize,Me.symbolSize,Me.resourceSize,this._context.renderCoordsHelper.unitInMeters);1===vt[0]&&1===vt[1]&&1===vt[2]||(0,ye.h)(ke,ke,vt)}prepareSymbolLayerPatch(Me){if("partial"!==Me.diff.type)return;const Ue=Me.diff.diff;this._preparePatchTransform(Me,Ue),this._preparePatchColor(Me,Ue)}updateGeometry(Me,Ue){if((0,w.Wi)(this._resources))return!0;const ke=Ue&&(0,Rs.S_)(Ue);if((0,w.Wi)(ke))return!1;const ot=this.getGeometryElevationMode(Ue);return Me.elevationContext.mode===ot&&(this._computeGlobalTransform(ke,Me.elevationContext,Ad,Su),this._requiresTerrainElevation(Me.elevationContext)&&(Me.alignedSampledElevation=Su.sampledElevation),this._resources.lodRenderer.instanceData.setGlobalTransform(Me.instanceIndex,Ad,!0),(0,Rs.dO)(Me,ke,this._context.elevationProvider),!0)}_preparePatchTransform(Me,Ue){if(!(Ue.heading||Ue.tilt||Ue.roll||Ue.width||Ue.height||Ue.depth||Ue.anchor||Ue.anchorPosition)||(0,w.Wi)(this._resources))return;const ke=(_s,Vs,Ri)=>(0,w.Pt)(null!=_s&&"complete"===_s.type?_s.newValue:Vs,Ri),ot=ke(Ue.heading,this.symbolLayer.heading,0),vt=ke(Ue.tilt,this.symbolLayer.tilt,0),Lt=ke(Ue.roll,this.symbolLayer.roll,0),Yt=ke(Ue.width,this.symbolLayer.width,void 0),tr=ke(Ue.height,this.symbolLayer.height,void 0),Or=ke(Ue.depth,this.symbolLayer.depth,void 0),Qr=ke(Ue.anchor,this.symbolLayer.anchor,void 0),Vr=ke(Ue.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete Ue.heading,delete Ue.tilt,delete Ue.roll,delete Ue.width,delete Ue.height,delete Ue.depth,delete Ue.anchor,delete Ue.anchorPosition;const is={heading:ot,tilt:vt,roll:Lt,anchor:Qr,anchorPosition:Vr},us=this._resources;this.loadStatus===$n.P.LOADED&&Me.symbolLayerStatePatches.push(()=>{us.symbolSize=(0,$.d)((0,qa.$K)(us.resourceSize,{width:Yt,height:tr,depth:Or,isPrimitive:this.symbolLayer.isPrimitive}))}),Me.graphics3DGraphicPatches.push((_s,Vs)=>{const Ri=this._computeLocalTransform(us,is,Vs,Sd);us.lodRenderer.instanceData.setLocalTransform(_s.instanceIndex,Ri,!0)})}_preparePatchColor(Me,Ue){if(!Ue.material||"partial"!==Ue.material.type)return;const ke=Ue.material.diff;if(!ke.color||"complete"!==ke.color.type||null==ke.color.newValue||null==ke.color.oldValue)return;const ot=ke.color.newValue,vt=(0,w.pC)(ot)?Kr.Z.toUnitRGBA(ot):zr.O;delete ke.color;const Lt=this._resources;(0,w.Wi)(Lt)||Me.graphics3DGraphicPatches.push(Yt=>{let tr;this._hasPerInstanceColor()?(Lt.lodRenderer.instanceData.setColor(Yt.instanceIndex,vt),tr=this._setMaterialTransparencyParams({},ot)):tr=this._setMaterialTransparencyParams({externalColor:vt},ot);for(const Or of Lt.stageResources.materials)Or.setParameters(tr)})}_requiresTerrainElevation(Me){return"absolute-height"!==Me.mode}_applyObjectRotation(Me,Ue,ke){if(!(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation&&Ue))return(0,ze._Z)(Me.heading,Me.tilt,Me.roll,ke)}_computeAnchor(Me,Ue,ke){const ot=(0,$.c)();switch(ke.anchor){case"center":(0,G.c)(ot,(0,ae.be)(Me)),(0,G.o)(ot,ot);break;case"top":{const vt=(0,ae.be)(Me);(0,G.s)(ot,-vt[0],-vt[1],-Me[5]);break}case"bottom":{const vt=(0,ae.be)(Me);(0,G.s)(ot,-vt[0],-vt[1],-Me[2]);break}case"relative":{const vt=(0,ae.be)(Me),Lt=(0,ae.dp)(Me),Yt=ke.anchorPosition,tr=Yt?(0,$.f)(Yt.x,Yt.y,Yt.z):$.Z;(0,G.E)(ot,Lt,tr),(0,G.a)(ot,ot,vt),(0,G.o)(ot,ot);break}default:(0,w.pC)(Ue)?(0,G.o)(ot,Ue):(0,G.c)(ot,$.Z)}return ot}_applyAnchor(Me,Ue,ke){if(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation)return;const ot=this._computeAnchor(Me.resourceBoundingBox,Me.pivotOffset,Ue);ot&&(0,ye.j)(ke,ke,ot)}_hasPerInstanceColor(){return this._drivenProperties.color||this._drivenProperties.opacity}_fastVisualVariableConvertOptions(Me,Ue,ke,ot){const vt=(0,w.pC)(Me)?(0,$.d)((0,ae.dp)(Me)):$.O,Lt=(0,w.pC)(Me)?this._computeAnchor(Me,ot,this.symbolLayer):$.Z,Yt=this._context.renderCoordsHelper.unitInMeters,tr=(0,ze.bD)((0,w.pC)(Ue)?Ue:void 0,Ue,ke,Yt),Or=(0,$.f)(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return{modelSize:vt,symbolSize:(0,w.pC)(Ue)?Ue:$.O,unitInMeters:Yt,transformation:{anchor:Lt,scale:tr,rotation:Or}}}},line:Fn,path:class Wp extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._intrinsicSize=(0,H.f)(1,1),this.upVectorAlignment="path",this.stencilWidth=.1,this.ensureDrapedStatus(!1)}doLoad(){var Me=this;return(0,D.Z)(function*(){const Ue=(0,w.pC)(Me.symbolLayer.width)?Me.symbolLayer.width:Me.symbolLayer.height,ke=(0,w.pC)(Me.symbolLayer.height)?Me.symbolLayer.height:Ue;Me._vvConvertOptions={modelSize:[1,1,1],symbolSize:[Ue,1,ke],unitInMeters:Me._context.renderCoordsHelper.unitInMeters,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}},Me._fastUpdates=Me._context.renderer&&Me._context.renderer.visualVariables&&Me._context.renderer.visualVariables.length>0?zi(Me._context.renderer,Me._vvConvertOptions):{enabled:!1};const ot=Me.symbolLayer.anchor||"center";Me.upVectorAlignment="path","heading"===Me.symbolLayer.profileRotation&&(Me.upVectorAlignment="world");const vt=Me.symbolLayer.profile||"circle";switch(vt){case"circle":default:Me._profile=id.circle(10);break;case"quad":Me._profile=id.rect()}let Lt=[0,0];switch("center"!==ot&&(Lt={left:[.5,0],right:[-.5,0],top:[0,-.5],bottom:[0,.5]}[ot],Me._profile.translate(Lt[0],Lt[1])),Me.symbolLayer.join||"simple"){case"round":Me._extruder=new Uh(0,3);break;case"bevel":Me._extruder=new Uh(0,1);break;case"miter":Me._extruder=new Uh(.8*Math.PI,1);break;default:Me._extruder=new xa}const Yt=Me.symbolLayer.cap||"butt";switch(Yt){case"none":Me._startCap=new Hi,Me._endCap=new Hi;break;case"butt":default:Me._startCap=new Rd(Me._profile,0),Me._endCap=new Rd(Me._profile,0,!0);break;case"square":Me._startCap=new Rd(Me._profile,-.5),Me._endCap=new Rd(Me._profile,.5,!0);break;case"round":{const _s="quad"===vt;Me._startCap=new tc({profile:Me._profile,flip:!1,breakNormals:_s,subdivisions:3}),Me._endCap=new tc({profile:Me._profile,flip:!0,breakNormals:_s,subdivisions:3});break}}const tr=(0,w.U2)(Me.symbolLayer,"material","color"),Or=Me._getCombinedOpacityAndColor(tr),Qr=(0,$.d)(Or),Vr=Or[3],is=Vr<1||Me.needsDrivenTransparentPass,us={diffuse:Qr,ambient:Qr,opacity:Vr,transparent:is,hasVertexColors:!1,hasSlicePlane:Me._context.slicePlaneEnabled,castShadows:Me.symbolLayer.castShadows,cullFace:is||"none"===Yt?Xe.Vr.None:Xe.Vr.Back,offsetTransparentBackfaces:!0};if(!Me._drivenProperties.size&&((0,Y.a)(Me._intrinsicSize,Ue,ke),!(0,ze.ZL)(Me._intrinsicSize[0])||!(0,ze.ZL)(Me._intrinsicSize[1])))throw new de.Z("graphics3dpathsymbollayer:invalid-size","Symbol sizes may not be negative values");if(Me._fastUpdates.enabled&&Me._fastUpdates.visualVariables.size||(0,Y.f)(Me._intrinsicSize,Me._intrinsicSize,1/Me._context.renderCoordsHelper.unitInMeters),Me._fastUpdates.enabled){const _s={...us,...Me._fastUpdates.materialParameters,size:(0,H.b)(Me._intrinsicSize)};Me._material=new nl(_s)}else us.hasVertexColors=Me._drivenProperties.color||Me._drivenProperties.opacity,Me._material=new Ze.Gp(us);Me._material.setParameters({usePBR:Me._context.physicalBasedRenderingEnabled,isSchematic:!0}),Me._context.stage.add(Me._material)})()}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,Fh,this.symbolLayer.type))return null;const ke=this.setGraphicElevationContext(Ue,new Le.o);return this._createAs3DShape(Ue,Me.renderingInfo,ke,Ue.uid)}layerOpacityChanged(){const Me=(0,w.U2)(this.symbolLayer,"material","color"),Ue=this._getCombinedOpacity(Me);return this._material.setParameters({opacity:Ue,transparent:Ue<1||this.needsDrivenTransparentPass}),!0}layerElevationInfoChanged(Me,Ue){return this.updateGraphics3DGraphicElevationInfo(Me,Ue,Te.B5)}slicePlaneEnabledChanged(){return this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}pixelRatioChanged(){return!0}applyRendererDiff(Me,Ue){for(const ke in Me.diff){if("visualVariables"!==ke||!Zr(this._fastUpdates,Ue,this._vvConvertOptions))return Ee.W.Recreate_Symbol;this._material.setParameters(this._fastUpdates.materialParameters)}return Ee.W.Fast_Update}getVertexData(Me){let Ue=0;const ke=Me.paths,ot=[],vt=Me.spatialReference,Lt=this._context.elevationProvider.spatialReference,Yt=this._context.renderCoordsHelper.spatialReference;for(const us of ke)Ue+=us.length;const tr=new Float64Array(3*Ue),Or=new Float64Array(3*Ue),Qr=new Float64Array(3*Ue);let Vr=0;for(const us of ke){ot.push({index:Vr,numVertices:us.length});for(const _s of us)tr[Vr++]=_s[0],tr[Vr++]=_s[1],tr[Vr++]=Me.hasZ?_s[2]:0}let is=!0;return vt.equals(Lt)?this._copyVertices(tr,0,Or,0,Ue):is=(0,ue.CM)(tr,vt,0,Or,Lt,0,Ue),Lt.equals(Yt)?this._copyVertices(Or,0,Qr,0,Ue):(0,ue.CM)(Or,Lt,0,Qr,Yt,0,Ue),{pathVertexDataInfos:ot,vertexDataGS:tr,vertexDataES:Or,vertexDataRS:Qr,projectionSuccess:is,terrainElevation:0}}_copyVertices(Me,Ue,ke,ot,vt){Ue*=3,ot*=3;for(let Lt=0;Lt<vt;++Lt)ke[ot++]=Me[Ue++],ke[ot++]=Me[Ue++],ke[ot++]=Me[Ue++]}_createAs3DShape(Me,Ue,ke,ot){const vt=Me.geometry,Lt=new Array,Yt=new Array,tr=new Array,Or=vt.spatialReference,Qr=(0,ae.Ue)(),Vr=this._context.renderCoordsHelper;zp.spatialReference=Or;const is=this.getVertexData(vt);if(!is.projectionSuccess)return this.logger.warn("PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)"),null;if(is.pathVertexDataInfos.length>0){for(let us=0;us<is.pathVertexDataInfos.length;++us){const _s=is.pathVertexDataInfos[us],Vs=_s.index,Ri=_s.numVertices;if(Ri<2||(0,w.pC)(this._context.clippingExtent)&&((0,ae.cS)(Qr),(0,ae.G1)(Qr,is.vertexDataES,3*Vs,Ri),!(0,ae.Zp)(Qr,this._context.clippingExtent)))continue;const Fi=[];for(let ho=Vs;ho<Vs+3*Ri;){const Nn=ho++,Qn=ho++,vl=ho++,zo=new Fp;(0,G.s)(zo.posGS,is.vertexDataGS[Nn],is.vertexDataGS[Qn],is.vertexDataGS[vl]),(0,G.s)(zo.posES,is.vertexDataES[Nn],is.vertexDataES[Qn],is.vertexDataES[vl]);const gc=(0,Te.w7)(zo.posES,this._context.elevationProvider,ke,Vr);(0,G.s)(Ma,is.vertexDataRS[Nn],is.vertexDataRS[Qn],is.vertexDataRS[vl]),Vr.setAltitude(Ma,gc),(0,G.s)(zo.pos,Ma[0],Ma[1],Ma[2]),Fi.push(zo)}const bi=new ks(Fi);ih(bi,this.upVectorAlignment,this._context.renderCoordsHelper);const pi=new Bh(bi,this._profile,this._extruder,this._startCap,this._endCap);let Dn=null;if(this._fastUpdates.enabled){const ho=this._fastUpdates.visualVariables,Nn=ho.size?(0,je.d)(ho.size.field,Me):0,Qn=ho.color?(0,je.d)(ho.color.field,Me):0,vl=ho.opacity?(0,je.d)(ho.opacity.field,Me):0;Dn=new fc(pi,Nn,Qn,vl)}else{const ho=[this._intrinsicSize[0],this._intrinsicSize[1]];this._drivenProperties.size&&(ho[0]*=D_(Ue.size[0],"symbol-value"===Ue.size[2]?this.symbolLayer.height||0:Ue.size[2],this.symbolLayer.width||0),ho[1]*=D_(Ue.size[2],"symbol-value"===Ue.size[0]?this.symbolLayer.width||0:Ue.size[0],this.symbolLayer.height||0));let Nn=null;this._drivenProperties.color&&(Nn=Ue.color),this._drivenProperties.opacity&&null!=Ue.opacity&&(Nn=Nn?[Nn[0],Nn[1],Nn[2],Ue.opacity]:[1,1,1,Ue.opacity]);const Qn=new wu(pi);Qn.bake(ho),Nn&&Qn.bakeVertexColors(Nn),Dn=Qn}const{vertexAttributes:qi,indices:kn}=Dn.createGeometryData(),En=new go(qi,kn,Dn,Or,this.upVectorAlignment,this.stencilWidth);Lt.push(En),Yt.push(this._material),tr.push(Dn.xform)}if(Lt.length>0){const _s=new rt.T({geometries:Lt,materials:Yt,transformations:tr,metadata:{layerUid:this._context.layer.uid,graphicUid:ot}}),Vs=new ne.z(this,_s,Lt,null,null,Ay,ke);return Vs.alignedSampledElevation=is.terrainElevation,Vs.needsElevationUpdates=(0,Te.B5)(ke.mode),Vs}}else 0!==vt.paths.length&&vt.paths.some(us=>us.length>0)||this.logger.warn("PathSymbol3DLayer geometry failed to be created (no paths were defined)");return null}},fill:Dm,extrude:class st extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this.ensureDrapedStatus(!1)}doLoad(){var Me=this;return(0,D.Z)(function*(){if(!Me._drivenProperties.size){const tr=(0,ze.bh)(Me._getSymbolSize());if(tr)throw new de.Z("graphics3dextrudesymbollayer:invalid-size",tr)}const Ue=(0,w.U2)(Me.symbolLayer,"material","color"),ke=Me._getCombinedOpacityAndColor(Ue),ot=(0,$.d)(ke),vt=ke[3],Lt=vt<1||Me.needsDrivenTransparentPass,Yt={usePBR:Me._context.physicalBasedRenderingEnabled,isSchematic:!0,diffuse:ot,ambient:ot,opacity:vt,transparent:Lt,cullFace:Lt?Xe.Vr.None:Xe.Vr.Back,hasVertexColors:!0,hasSlicePlane:Me._context.slicePlaneEnabled,castShadows:Me.symbolLayer.castShadows,offsetTransparentBackfaces:!0};Me._material=new Ze.Gp(Yt),Me._bottomMaterial=new Ze.Gp({...Yt,cullFace:Xe.Vr.Back}),Me._context.stage.add(Me._material),Me._context.stage.add(Me._bottomMaterial)})()}destroy(){super.destroy(),this._material&&(this._context.stage.remove(this._material),this._context.stage.remove(this._bottomMaterial))}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,lt,this.symbolLayer.type))return null;const ke=this._getVertexOpacityAndColor(Me.renderingInfo,255),ot=this.setGraphicElevationContext(Ue,new Le.o);return this._createAs3DShape(Ue,Me.renderingInfo,ke,ot,Ue.uid)}layerOpacityChanged(Me,Ue){const ke=(0,w.U2)(this.symbolLayer,"material","color"),ot=this._getCombinedOpacity(ke),vt=ot<1||this.needsDrivenTransparentPass;this._material.setParameters({opacity:ot,transparent:vt}),this._bottomMaterial.setParameters({opacity:ot,transparent:vt});const Lt=this._getLayerOpacity();return Me.forEach(Yt=>{const tr=Ue(Yt);(0,w.pC)(tr)&&tr.layerOpacityChanged(Lt,this._context.isAsync)}),!0}layerElevationInfoChanged(Me,Ue){return this.updateGraphics3DGraphicElevationInfo(Me,Ue,Te.B5)}slicePlaneEnabledChanged(Me,Ue){return this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._bottomMaterial.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),Me.forEach(ke=>{const ot=Ue(ke);(0,w.pC)(ot)&&ot.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)}),!0}physicalBasedRenderingChanged(){return this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._bottomMaterial.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}pixelRatioChanged(){return!0}_getExtrusionSize(Me){let Ue;return Ue=Me.size&&this._drivenProperties.size?(0,Ce.sV)(Me.size,2)??0:this._getSymbolSize(),Ue/=this._context.renderCoordsHelper.unitInMeters,Ue}applyRendererDiff(Me,Ue){return this._drivenPropertiesChanged(Ue)?Ee.W.Recreate_Symbol:Ee.W.Recreate_Graphics}_getSymbolSize(){return this.symbolLayer.size??1}_createAs3DShape(Me,Ue,ke,ot,vt){const Lt=Ie(Me.geometry);if((0,w.Wi)(Lt))return null;const Yt=We(Lt,this._context.elevationProvider,this._context.renderCoordsHelper,ot);if(this._logGeometryCreationWarnings(Yt,Lt.rings,"rings","ExtrudeSymbol3DLayer"),0===Lt.rings.length||!Lt.rings.some($p=>$p.length>0))return null;const tr=(0,ze.zE)(Lt);if((0,w.Wi)(tr))return null;const Or=new Array,Qr=new Array,Vr=new Array,is=(0,ae.Ue)(),us=(0,fe.c)(),_s=(0,$.c)(),Vs=this._context.renderCoordsHelper.viewingMode===ge.JY.Global;Vs||this._context.renderCoordsHelper.worldUpAtPosition(null,_s),(0,ue.Bm)(Lt.spatialReference,[tr.x,tr.y,0],us,this._context.renderCoordsHelper.spatialReference);const Ri=(0,fe.c)();(0,ye.a)(Ri,us);const Fi=(0,he.c)();(0,_e.a)(Fi,Ri);const{polygons:bi,mapPosition:pi,position:Dn}=Yt,qi=Dn.length/3,kn=new Float64Array(3*qi*6),En=new Float64Array(3*qi*6),ho=new Float64Array(3*qi*6),Nn=new Float64Array(1*qi*6);let Qn=0;for(let $p=0;$p<bi.length;++$p){const Jp=bi[$p],Y0=Jp.count;if(this._context.clippingExtent&&((0,ae.cS)(is),(0,ae.G1)(is,Jp.mapPosition),!(0,ae.Zp)(is,this._context.clippingExtent)))continue;const Z0=(0,me.e)(Jp.mapPosition,Jp.holeIndices,3);if(0===Z0.length)continue;const Am=new Uint32Array(3*Y0*2+Z0.length),Lm=new Uint32Array(Z0.length),k0=6*Y0,wm=3*kn.BYTES_PER_ELEMENT,S_=new De.fP(kn.buffer,Qn*wm,wm,(Qn+k0)*wm),Rm=3*En.BYTES_PER_ELEMENT,Xp=new De.fP(En.buffer,Qn*Rm,Rm,(Qn+k0)*Rm),Im=new Float64Array(ho.buffer,3*Qn*ho.BYTES_PER_ELEMENT,3*k0),Um=new Float64Array(Nn.buffer,1*Qn*Nn.BYTES_PER_ELEMENT,1*k0),kE=this._getExtrusionSize(Ue);Ft(Dn,pi,Z0,Jp,S_.typedBuffer,Im,Xp.typedBuffer,Um,0,Am,Lm,kE,_s,Vs),(0,ve.t)(S_,S_,Ri),(0,ve.a)(Xp,Xp,Fi),Qn+=6*Y0;const $E=Mt(Am,Am.length-Lm.length,{positions:S_.typedBuffer,elevation:Im,normals:Xp.typedBuffer,heights:Um},ke);Or.push($E),Qr.push(this._material),Vr.push(fe.I);const JE=Mt(Lm,0,{positions:S_.typedBuffer,elevation:Im,normals:Xp.typedBuffer,heights:Um},ke);Or.push(JE),Qr.push(this._bottomMaterial),Vr.push(fe.I)}if(0===Or.length)return null;const vl=new rt.T({geometries:Or,materials:Qr,transformations:Vr,metadata:{layerUid:this._context.layer.uid,graphicUid:vt,isElevationSource:!0}});vl.transformation=us;const zo=(0,et.hM)(this.symbolLayer,{opacity:this._getLayerOpacity()}),gc=(0,w.pC)(zo)?{baseMaterial:this._material,edgeMaterials:[zo],properties:{mergeGeometries:!0,hasSlicePlane:this._context.slicePlaneEnabled}}:null,ld=new ne.z(this,vl,Or,null,null,Ut,ot,gc);return ld.alignedSampledElevation=Yt.sampledElevation,ld.needsElevationUpdates=(0,Te.B5)(ot.mode),ld}},text:class KE extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1},this.ensureDrapedStatus(!1)}doLoad(){var Me=this;return(0,D.Z)(function*(){if(!Me._drivenProperties.size){const Ue=(0,ze.bh)(Me.symbolLayer.size);if(Ue)throw new de.Z("graphics3dtextsymbollayer:invalid-size",Ue)}yield Me._createTextRenderParameters()})()}_createTextRenderParameters(){var Me=this;return(0,D.Z)(function*(){const Ue=Me._context.graphicsCoreOwner.view.state.pixelRatio;Me._textRenderParameters=yield xm.V.fromSymbol(Me.symbolLayer,Ue)})()}destroy(){super.destroy()}createGraphics3DGraphic(Me){const Ue=Me.graphic,ke=(0,Rs.S_)(Ue.geometry);if((0,w.Wi)(ke))return this.logger.warn(`unsupported geometry type for text symbol: ${Ue.geometry.type}`),null;const ot=this.symbolLayer.text;if((0,w.Wi)(ot)||""===ot)return null;const vt=(0,ah.Pd)(this.symbol)&&this.symbol.hasVisibleVerticalOffset()?this.symbol.verticalOffset:null;if((0,w.pC)(vt)&&!(0,ah.as)(this.symbolLayer))return this.logger.errorOncePerTick(`Callouts and vertical offset on text symbols are currently only supported with 'center' horizontal alignment (not with '${this.symbolLayer.horizontalAlignment}' alignment)`),null;const Lt={...oO,verticalOffset:vt,horizontalPlacement:this.symbolLayer.horizontalAlignment,verticalPlacement:(0,Yr.j1)(this.symbolLayer.verticalAlignment)};return this._createAs3DShape(Ue,ke,ot,Lt)}createLabel(Me,Ue,ke,ot){const vt=Me.graphic,Lt=(0,Rs.S_)(vt.geometry);if((0,w.Wi)(Lt))return this.logger.warn(`unsupported geometry type for label: ${vt.geometry.type}`),null;const Yt=Ue.text;return!Yt||/^\s+$/.test(Yt)?null:this._createAs3DShape(vt,Lt,Yt,Ue,ke,ot)}setGraphicElevationContext(Me,Ue,ke=0){const ot=super.setGraphicElevationContext(Me,Ue);return ot.addOffsetRenderUnits(ke),ot}layerOpacityChanged(){return this.logger.warn("layer opacity change not yet implemented in Graphics3DTextSymbolLayer"),!1}layerElevationInfoChanged(Me,Ue){return By(Me,Ue,(ke,ot)=>{this.updateGraphicElevationContext(ot,ke)}),Te.lO.UPDATE}slicePlaneEnabledChanged(Me,Ue){return By(Me,Ue,ke=>{for(const ot of ke.stageObject.geometryRecords)ot.material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})}),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!1}updateGraphicElevationContext(Me,Ue){this.setGraphicElevationContext(Me,Ue.elevationContext,Ue.metadata.elevationOffset),Ue.needsElevationUpdates=(0,Te.Xf)(Ue.elevationContext.mode)||"absolute-height"===Ue.elevationContext.mode}_defaultElevationInfoNoZ(){return nO}_createAs3DShape(Me,Ue,ke,ot,vt,Lt){const Yt=this.setGraphicElevationContext(Me,new Le.o,ot.elevationOffset),tr="polyline"===(0,w.U2)(Me.geometry,"type"),Or=Me.uid;let Qr=null,Vr=null;if((0,w.Wi)(Lt)){const zo=(0,Yr.mq)(ot.horizontalPlacement);Qr=new HE(ke,zo,this._textRenderParameters);let gc=null;Vr=this._context.sharedResources.textures.fromData(Qr.key,()=>(0,w.Wg)(Qr).create(),()=>{(0,w.pC)(gc)&&gc.release()});const ld=this._context.stage.renderView.textureRepository.acquire(Vr.texture.id);if((0,w.Wi)(ld)||(0,B.y8)(ld))return Vr.release(),null;gc=ld}const is=function iO(Ct,Me){if("baseline"===Me.verticalPlacement){const ke=Yr.$A[Me.horizontalPlacement],ot=(0,w.pC)(Ct)?Ct.baselineAnchorY:0;return(0,H.f)(ke,ot)}const Ue=(0,Yr.QW)(Me.horizontalPlacement,Me.verticalPlacement);return Yr.yY[Ue]}(Qr,ot),us={occlusionTest:!0,screenOffset:ot.screenOffset,anchorPosition:is,polygonOffset:!0,color:[1,1,1,1],centerOffsetUnits:ot.centerOffsetUnits,debugDrawLabelBorder:ot.debugDrawLabelBorder,drawInSecondSlot:!0};if((0,w.pC)(Vr)&&(us.textureId=Vr.texture.id),(0,w.pC)(Lt)&&(us.textureId=Lt.id),(0,w.pC)(ot.verticalOffset)){const{screenLength:zo,minWorldLength:gc,maxWorldLength:ld}=ot.verticalOffset;us.verticalOffset={screenLength:(0,ns.F2)(zo),minWorldLength:gc||0,maxWorldLength:ld??1/0}}if(this._context.screenSizePerspectiveEnabled){const{screenSizePerspectiveSettings:zo,screenSizePerspectiveSettingsLabels:gc}=this._context.sharedResources;us.screenSizePerspective=gc.overridePadding(this._textRenderParameters.haloSize+this._textRenderParameters.definition.background.padding[0]),us.screenSizePerspectiveAlignment=zo}let _s;if(tr&&(us.shaderPolygonOffset=1e-4),us.hasSlicePlane=this._context.slicePlaneEnabled,(0,w.pC)(vt)){const zo=JSON.stringify(us);_s=vt.get(zo),(0,w.Wi)(_s)&&(_s=new yi.A(us),vt.add(zo,_s))}else _s=new yi.A(us);const Vs=[_s],Ri=ot.translation,Fi=(0,w.pC)(Qr)?[Qr.displayWidth,Qr.displayHeight]:[0,0],qi=[Ir.Z.createPointGeometry(x_,Ri,null,Fi,ot.centerOffset,[0,0],null)],En=(0,Rs.km)(this._context,Ue,qi,Vs,Yt,this._context.layer.uid,Or);if(null===En)return null;const ho=new ne.z(this,En.object,qi,(0,w.Wi)(vt)?Vs:null,Vr,qt.j3,Yt);ho.alignedSampledElevation=En.sampledElevation,ho.needsElevationUpdates=(0,Te.Xf)(Yt.mode)||"absolute-height"===Yt.mode;const{displayWidth:Nn,displayHeight:Qn}=(0,w.pC)(Qr)?Qr:ot;return ho.getScreenSize=(zo=(0,H.a)())=>(zo[0]=Nn,zo[1]=Qn,zo),ho.metadata={labelText:ke,elevationOffset:ot.elevationOffset},(0,Rs.dO)(ho,Ue,this._context.elevationProvider),ho}},water:Iu},K0={"mesh-3d":{fill:class _l extends je.k{constructor(Me,Ue,ke,ot){super(Me,Ue,ke,ot),this._materials=new Map,this._textures=new Map,this.ensureDrapedStatus(!1)}doLoad(){var Me=this;return(0,D.Z)(function*(){nt.Z.DRAW_MESH_GEOMETRY_NORMALS&&(Me._debugVertexNormalMaterial=new Xc.Y({color:[1,0,1,1]}),Me._debugFaceNormalMaterial=new Xc.Y({color:[0,1,1,1]}))})()}destroy(){super.destroy(),this._context.stage.removeMany(Array.from(this._materials.values(),Me=>Me.material)),this._context.stage.removeMany(Array.from(this._textures.values())),this._materials.clear(),this._textures.clear()}createGraphics3DGraphic(Me){const Ue=Me.graphic;if(!this._validateGeometry(Ue.geometry,Sl,"fill on mesh-3d"))return null;const ke=this.setGraphicElevationContext(Ue,new Le.o);return this._createAs3DShape(Ue,Me.renderingInfo,ke,Ue.uid)}layerOpacityChanged(Me,Ue){const ke=this._getLayerOpacity();return this._materials.forEach(ot=>{ot.material.setParameters({layerOpacity:ke});const vt=ot.material.parameters;this._setMaterialTransparentParameter(vt,ot),ot.material.setParameters({transparent:vt.transparent})}),Me.forEach(ot=>{const vt=Ue(ot);(0,w.pC)(vt)&&vt.layerOpacityChanged(ke,this._context.isAsync)}),!0}layerElevationInfoChanged(Me,Ue){return this.updateGraphics3DGraphicElevationInfo(Me,Ue,Te.B5)}slicePlaneEnabledChanged(Me,Ue){return this._materials.forEach(ke=>{ke.material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})}),Me.forEach(ke=>{const ot=Ue(ke);(0,w.pC)(ot)&&ot.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)}),!0}physicalBasedRenderingChanged(){const Me=this._usePBR();return this._materials.forEach(Ue=>Ue.material.setParameters({usePBR:Me})),!0}pixelRatioChanged(){return!0}_requiresSymbolVertexColors(){return this._drivenProperties.color||this._drivenProperties.opacity}_colorOrTextureUid(Me){return(0,w.Wi)(Me)?"-":Me instanceof Kr.Z?Me.toHex():Me.contentHash}_materialPropertiesDefault(Me,Ue){const ke=this._requiresSymbolVertexColors(),ot=!!Me.vertexAttributes.color,vt=!!Me.vertexAttributes.tangent;return{hasSymbolVertexColors:ke,hasVertexColors:ot,hasVertexTangents:vt,uid:`vc:${ot},vt:${vt},vct${Ue},svc:${ke}`}}_materialProperties(Me,Ue,ke){const ot=this._materialPropertiesDefault(Me,ke);if(!Ue.material)return ot;const{color:vt,colorTexture:Lt,normalTexture:Yt,doubleSided:tr,alphaCutoff:Or,alphaMode:Qr}=Ue.material,Vr=this._colorOrTextureUid(vt),is=this._colorOrTextureUid(Lt),us=this._colorOrTextureUid(Yt);if(ot.color=vt,ot.colorTexture=Lt,ot.normalTexture=Yt,ot.uid=`${ot.uid},cmuid:${Vr},ctmuid:${is},ntmuid:${us},ds:${tr},ac:${Or},am:${Qr}`,Ue.material instanceof uo.Z){const{metallic:_s,roughness:Vs,metallicRoughnessTexture:Ri,emissiveColor:Fi,emissiveTexture:bi,occlusionTexture:pi}=Ue.material,Dn=this._colorOrTextureUid(Ri),qi=this._colorOrTextureUid(Fi),kn=this._colorOrTextureUid(bi),En=this._colorOrTextureUid(pi);ot.metallic=_s,ot.roughness=Vs,ot.metallicRoughnessTexture=Ri,ot.emissiveColor=Fi,ot.emissiveTexture=bi,ot.occlusionTexture=pi,ot.uid=`${ot.uid},mrm:${_s},mrr:${Vs},mrt:${Dn},emuid:${qi},etmuid:${kn},otmuid:${En}`}return ot}_setInternalColorValueParameters(Me,Ue){Ue.diffuse=Kr.Z.toUnitRGB(Me),Ue.opacity=Me.a}_getLoadableTextureResource(Me){return Me.data?Me.data:Me.url}_getInternalTextureId(Me){const Ue=this._getInternalTexture(Me,Xe.JJ.Opaque);return(0,w.pC)(Ue)?Ue.id:null}_getInternalTexture(Me,Ue){const ke=this._getLoadableTextureResource(Me);if(!ke)return null;const ot=`${Me.contentHash}/${Ue}`;let vt=this._textures.get(ot);return vt||(vt=new Ws.x(ke,{mipmap:!0,wrap:this._castTextureWrap(Me.wrap),noUnpackFlip:!0,preMultiplyAlpha:Ue!==Xe.JJ.Opaque}),this._textures.set(ot,vt),this._context.stage.add(vt),this._context.stage.loadImmediate(vt)),vt}_castTextureWrap(Me="repeat"){if("string"==typeof Me){const Ue=this._castTextureWrapIndividual(Me);return{s:Ue,t:Ue}}return{s:this._castTextureWrapIndividual(Me.horizontal),t:this._castTextureWrapIndividual(Me.vertical)}}_castTextureWrapIndividual(Me){switch(Me){case"clamp":return Kl.e8.CLAMP_TO_EDGE;case"mirror":return Kl.e8.MIRRORED_REPEAT;default:return Kl.e8.REPEAT}}_setInternalMaterialParameters(Me,Ue){if((0,w.pC)(Me.color)&&this._setInternalColorValueParameters(Me.color,Ue),(0,w.pC)(Me.colorTexture)){const ke=this._getInternalTexture(Me.colorTexture,Ue.textureAlphaMode);(0,w.pC)(ke)?(Ue.textureId=ke.id,Ue.textureAlphaPremultiplied=!!ke.params.preMultiplyAlpha):Ue.textureId=void 0}(0,w.pC)(Me.normalTexture)&&(Ue.normalTextureId=this._getInternalTextureId(Me.normalTexture)),(0,w.pC)(Me.emissiveColor)&&(Ue.emissiveFactor=Kr.Z.toUnitRGB(Me.emissiveColor)),(0,w.pC)(Me.emissiveTexture)&&(Ue.emissiveTextureId=this._getInternalTextureId(Me.emissiveTexture)),(0,w.pC)(Me.occlusionTexture)&&(Ue.occlusionTextureId=this._getInternalTextureId(Me.occlusionTexture)),(0,w.pC)(Me.metallicRoughnessTexture)&&(Ue.metallicRoughnessTextureId=this._getInternalTextureId(Me.metallicRoughnessTexture))}_setExternalMaterialParameters(Me){const Ue=this._drivenProperties.color;let ke=(0,w.pC)(this.symbolLayer.material)?this.symbolLayer.material.colorMixMode:null;if(Ue)Me.externalColor=zr.O;else{const ot=(0,w.pC)(this.symbolLayer.material)?this.symbolLayer.material.color:null;(0,w.pC)(ot)?Me.externalColor=Kr.Z.toUnitRGBA(ot):(ke=null,Me.externalColor=zr.O)}ke&&(Me.colorMixMode=ke),Me.castShadows=!!this.symbolLayer.castShadows}_hasTransparentVertexColors(Me){const Ue=Me.vertexAttributes.color;if((0,w.Wi)(Ue))return!1;for(let ke=3;ke<Ue.length;ke+=4)if(255!==Ue[ke])return!0;return!1}_getOrCreateMaterial(Me,Ue){const ke=Ue.material?.color,ot=Ue.material?.colorTexture,vt=Ue.material?.alphaMode,Lt="blend"===vt,Yt="opaque"!==vt&&(this._hasTransparentVertexColors(Me)||(0,w.pC)(ke)&&ke.a<1||(0,w.pC)(ot)&&ot.transparent||Lt),tr=this._materialProperties(Me,Ue,Yt),Or=this._materials.get(tr.uid);if(Or)return Or.material;const Qr={material:null,isComponentTransparent:Yt,alphaMode:Ue.material?Ue.material.alphaMode:"opaque"},Vr=null==tr.metallicRoughnessTexture&&null==tr.metallic&&null==tr.roughness,is={usePBR:this._usePBR(),isSchematic:Vr,hasVertexColors:tr.hasVertexColors,hasSymbolColors:tr.hasSymbolVertexColors,hasVertexTangents:tr.hasVertexTangents,ambient:$.Z,diffuse:$.O,opacity:1,doubleSided:!0,doubleSidedType:"winding-order",cullFace:Xe.Vr.None,layerOpacity:this._getLayerOpacity(),hasSlicePlane:this._context.slicePlaneEnabled,initTextureTransparent:!0};Vr||(is.mrrFactors=[null!=tr.metallic?tr.metallic:1,null!=tr.roughness?tr.roughness:1,.5]),Ue.material&&(is.doubleSided=Ue.material.doubleSided,is.cullFace=Ue.material.doubleSided?Xe.Vr.None:Xe.Vr.Back,is.textureAlphaCutoff=Ue.material.alphaCutoff),this._setExternalMaterialParameters(is),this._setMaterialTransparentParameter(is,Qr),this._setInternalMaterialParameters(tr,is);const us=new Ze.Gp(is);return Qr.material=us,this._materials.set(tr.uid,Qr),this._context.stage.add(us),us}_usePBR(){return this._context.physicalBasedRenderingEnabled}_setMaterialTransparentParameter(Me,Ue){Me.transparent=this.needsDrivenTransparentPass||Ue.isComponentTransparent||Me.layerOpacity<1||Me.opacity<1||Me.externalColor&&Me.externalColor[3]<1,Me.textureAlphaMode="auto"===Ue.alphaMode?Me.transparent?Xe.JJ.MaskBlend:Xe.JJ.Opaque:"opaque"===Ue.alphaMode?Xe.JJ.Opaque:"mask"===Ue.alphaMode?Xe.JJ.Mask:Xe.JJ.Blend}_addDebugNormals(Me,Ue,ke,ot){const vt=Ue.length,Lt=Me.spatialReference.isGeographic?20015077/180:1,Yt=.1*Math.max(Me.extent.width*Lt,Me.extent.height*Lt,Me.extent.zmax-Me.extent.zmin),tr=[],Or=[],Qr=[],Vr=[];for(let _s=0;_s<vt;_s++){const Vs=Ue[_s],Ri=Vs.vertexAttributes.get(Oe.T.POSITION),Fi=Vs.vertexAttributes.get(Oe.T.NORMAL),bi=Vs.indices.get(Oe.T.POSITION),pi=Vs.indices.get(Oe.T.NORMAL),Dn=Ri.data,qi=Fi.data;for(let kn=0;kn<bi.length;kn++){const En=3*bi[kn],ho=3*pi[kn];for(let Nn=0;Nn<3;Nn++)tr.push(Dn[En+Nn]);for(let Nn=0;Nn<3;Nn++)tr.push(Dn[En+Nn]+qi[ho+Nn]*Yt);if(Or.push(Or.length),Or.push(Or.length),kn%3==0){this._calculateFaceNormal(Dn,bi,kn,Sc),this._getFaceVertices(Dn,bi,kn,na,xc,oa),(0,G.a)(na,na,xc),(0,G.a)(na,na,oa),(0,G.g)(na,na,1/3);for(let Nn=0;Nn<3;Nn++)Qr.push(na[Nn]);for(let Nn=0;Nn<3;Nn++)Qr.push(na[Nn]+Sc[Nn]*Yt);Vr.push(Vr.length),Vr.push(Vr.length)}}}const is=new Pe.Z([[Oe.T.POSITION,{data:tr,size:3,exclusive:!0}]],[[Oe.T.POSITION,new Uint32Array(Or)]],Xe.MX.Line);Ue.push(is),ke.push(this._debugVertexNormalMaterial),ot.push((0,fe.b)(ot[0]));const us=new Pe.Z([[Oe.T.POSITION,{data:Qr,size:3,exclusive:!0}]],[[Oe.T.POSITION,new Uint32Array(Vr)]],Xe.MX.Line);Ue.push(us),ke.push(this._debugFaceNormalMaterial),ot.push((0,fe.b)(ot[0]))}_createAs3DShape(Me,Ue,ke,ot){const vt=Me.geometry;if("mesh"!==vt.type)return null;const Lt=this._createGeometryInfo(vt,Ue);if(!Lt)return null;const{geometries:Yt,materials:tr,transformations:Or,objectTransformation:Qr}=Lt;nt.Z.DRAW_MESH_GEOMETRY_NORMALS&&this._addDebugNormals(vt,Yt,tr,Or);const Vr=new rt.T({geometries:Yt,materials:tr,transformations:Or,metadata:{layerUid:this._context.layer.uid,graphicUid:ot}});Vr.transformation=Qr;const is=this._createEdgeMaterial(),us=(0,w.pC)(is)?{baseMaterial:tr[0],edgeMaterials:[is],properties:{mergeGeometries:!0,hasSlicePlane:this._context.slicePlaneEnabled}}:null,_s=new ne.z(this,Vr,Yt,null,null,qt.j3,ke,us);return _s.needsElevationUpdates=(0,Te.B5)(ke.mode),_s.useObjectOriginAsAttachmentOrigin=!0,_s.elevationContext.centerPointInElevationSR=this._getCenterPointInElevationSR(Vr),_s.alignedSampledElevation=(0,qt.j3)(_s,_s.elevationContext,this._context.elevationProvider,this._context.renderCoordsHelper),_s}_getCenterPointInElevationSR(Me){const Ue=(0,ie.Tx)(0,0,0,this._context.elevationProvider.spatialReference);return(0,ue.MT)([Me.transformation[12],Me.transformation[13],Me.transformation[14]],this._context.renderCoordsHelper.spatialReference,Ue),Ue}_createComponentNormals(Me,Ue,ke,ot){switch(ke.shading||"flat"){case"source":return this._createComponentNormalsSource(Me,Ue,ke,ot);case"flat":return this._createComponentNormalsFlat(Me,ot);case"smooth":return this._createComponentNormalsSmooth(Me,ot);default:return}}_createComponentNormalsSource(Me,Ue,ke,ot){if((0,w.Wi)(Ue))return this._createComponentNormalsFlat(Me,ot);let vt=!1;if(!ke.trustSourceNormals)for(let Lt=0;Lt<ot.length;Lt+=3){this._calculateFaceNormal(Me,ot,Lt,Sc);for(let Yt=0;Yt<3;Yt++){const tr=3*ot[Lt+Yt];na[0]=Ue[tr+0],na[1]=Ue[tr+1],na[2]=Ue[tr+2],(0,G.e)(Sc,na)<0&&(Ue[tr+0]=-Ue[tr+0],Ue[tr+1]=-Ue[tr+1],Ue[tr+2]=-Ue[tr+2],vt=!0)}}return{normals:Ue,indices:ot,didFlipNormals:vt}}_createComponentNormalsFlat(Me,Ue){const ke=new Float32Array(Ue.length),ot=new Uint32Array(3*Ue.length);for(let vt=0;vt<Ue.length;vt+=3){const Lt=this._calculateFaceNormal(Me,Ue,vt,Sc);for(let Yt=0;Yt<3;Yt++)ke[vt+Yt]=Lt[Yt],ot[vt+Yt]=vt/3}return{normals:ke,indices:ot,didFlipNormals:!1}}_createComponentNormalsSmooth(Me,Ue){const ke={};for(let Lt=0;Lt<Ue.length;Lt+=3){const Yt=this._calculateFaceNormal(Me,Ue,Lt,Sc);for(let tr=0;tr<3;tr++){const Or=Ue[Lt+tr];let Qr=ke[Or];Qr||(Qr={normal:(0,$.c)(),count:0},ke[Or]=Qr),(0,G.a)(Qr.normal,Qr.normal,Yt),Qr.count++}}const ot=new Float32Array(3*Ue.length),vt=new Uint32Array(3*Ue.length);for(let Lt=0;Lt<Ue.length;Lt++){const Yt=ke[Ue[Lt]];1!==Yt.count&&((0,G.n)(Yt.normal,Yt.normal),Yt.count=1);for(let tr=0;tr<3;tr++)ot[3*Lt+tr]=Yt.normal[tr];vt[Lt]=Lt}return{normals:ot,indices:vt,didFlipNormals:!1}}_getFaceVertices(Me,Ue,ke,ot,vt,Lt){const Yt=3*Ue[ke+0],tr=3*Ue[ke+1],Or=3*Ue[ke+2];ot[0]=Me[Yt+0],ot[1]=Me[Yt+1],ot[2]=Me[Yt+2],vt[0]=Me[tr+0],vt[1]=Me[tr+1],vt[2]=Me[tr+2],Lt[0]=Me[Or+0],Lt[1]=Me[Or+1],Lt[2]=Me[Or+2]}_calculateFaceNormal(Me,Ue,ke,ot){return this._getFaceVertices(Me,Ue,ke,na,xc,oa),(0,G.b)(xc,xc,na),(0,G.b)(oa,oa,na),(0,G.f)(na,xc,oa),(0,G.n)(ot,na),ot}_getOrCreateComponents(Me){return(0,w.Pt)(Me.components,Qa)}_createPositionBuffer(Me,Ue){let ke=Me.vertexAttributes.position;const ot=Ue.reprojection===Bo.ECEF?Ue.transformBeforeProject:null;if((0,w.pC)(ot)&&(ke=(0,bo.zZ)(ke,new Float64Array(ke.length),ot)),Ue.reprojection===Bo.NONE)return Ue.needsBufferCopy?new Float64Array(ke):ke;const vt=(0,w.pC)(ot)?ke:new Float64Array(ke.length);return(0,ue.CM)(ke,Me.spatialReference,0,vt,this._context.renderCoordsHelper.spatialReference,0,ke.length/3),vt}_createNormalBuffer(Me,Ue,ke){let ot=Me.vertexAttributes.normal;if((0,w.Wi)(ot))return null;const vt=ke.reprojection===Bo.ECEF?ke.transformBeforeProject:null;if((0,w.pC)(vt)&&(ot=(0,bo.w9)(ot,new Float32Array(ot.length),vt)),"local"===this._context.graphicsCoreOwner.view.viewingMode||ke.reprojection===Bo.NONE)return ke.needsBufferCopy&&Me.vertexAttributes.normal===ot?new Float32Array(ot):ot;const Lt=Me.vertexAttributes.position,Yt=(0,w.pC)(vt)?ot:new Float32Array(ot.length);return(0,bo.Iz)(ot,Lt,Ue,Me.spatialReference,Yt)}_createTangentBuffer(Me,Ue,ke){let ot=Me.vertexAttributes.tangent;if((0,w.Wi)(ot))return null;const vt=ke.reprojection===Bo.ECEF?ke.transformBeforeProject:null;if((0,w.pC)(vt)&&(ot=(0,bo.VS)(ot,new Float32Array(ot.length),vt)),"local"===this._context.graphicsCoreOwner.view.viewingMode||ke.reprojection===Bo.NONE)return ke.needsBufferCopy&&Me.vertexAttributes.normal===ot?new Float32Array(ot):ot;const Lt=Me.vertexAttributes.position,Yt=(0,w.pC)(vt)?ot:new Float32Array(ot.length);return(0,bo.wi)(ot,Lt,Ue,Me.spatialReference,Yt)}_createColorBuffer(Me){return Me.vertexAttributes.color}_createSymbolColorBuffer(Me){if(this._requiresSymbolVertexColors()){const Ue=this._getVertexOpacityAndColor(Me),ke=(0,eo.F5)((0,w.U2)(this.symbolLayer,"material","colorMixMode")),ot=new Uint8Array(4);return(0,eo.HB)(Ue,ke,ot),ot}return null}_createBuffers(Me,Ue){const ke=Me.vertexAttributes&&Me.vertexAttributes.position;if(!ke)return this.logger.warn("Mesh geometry must contain position vertex attributes"),null;const ot=Me.vertexAttributes.normal,vt=Me.vertexAttributes.uv,Lt=Me.vertexAttributes.tangent;if((0,w.pC)(ot)&&ot.length!==ke.length)return this.logger.warn("Mesh normal vertex buffer must contain the same number of elements as the position buffer"),null;if((0,w.pC)(Lt)&&Lt.length/4!=ke.length/3)return this.logger.warn("Mesh tangent vertex buffer must contain the same number of elements as the position buffer"),null;if((0,w.pC)(vt)&&vt.length/2!=ke.length/3)return this.logger.warn("Mesh uv vertex buffer must contain the same number of elements as the position buffer"),null;const Yt=this._computeReprojectionInfo(Me),tr=this._createPositionBuffer(Me,Yt),Or=this._createColorBuffer(Me),Qr=this._createSymbolColorBuffer(Ue),Vr=this._createNormalBuffer(Me,tr,Yt),is=this._createTangentBuffer(Me,tr,Yt);return{positionBuffer:tr,normalBuffer:Vr,tangentBuffer:is,uvBuffer:vt,colorBuffer:Or,symbolColorBuffer:Qr,objectTransformation:Yt.reprojection===Bo.NONE&&(0,w.pC)(Yt.objectTransformation)?Yt.objectTransformation:this._transformOriginLocal(Me,tr,Vr,is),geometryTransformation:Yt.reprojection===Bo.NONE&&(0,w.pC)(Yt.geometryTransformation)?Yt.geometryTransformation:(0,fe.c)()}}_computeReprojectionInfo(Me){const Ue=(0,w.pC)(Me.transform),ke=Ue&&Me.transform.geographic||this._context.renderCoordsHelper.viewingMode===ge.JY.Local?Bo.NONE:Bo.ECEF;if(Ue){if(ke===Bo.NONE){const vt=(0,fe.c)();return(0,ue.Bm)(Me.spatialReference,Me.transform.origin,vt,this._context.renderCoordsHelper.spatialReference),{reprojection:ke,objectTransformation:vt,geometryTransformation:(0,fe.b)(Me.transform.localMatrix),needsBufferCopy:!1}}const ot=(0,ye.f)((0,fe.c)(),Me.transform.origin);return(0,ye.m)(ot,ot,Me.transform.localMatrix),{reprojection:ke,transformBeforeProject:ot,needsBufferCopy:!0}}return{reprojection:ke,needsBufferCopy:!0}}_transformOriginLocal(Me,Ue,ke,ot){const vt=this._context.renderCoordsHelper.spatialReference,Lt=Me.anchor;Od[0]=Lt.x,Od[1]=Lt.y,Od[2]=Lt.z;const Yt=(0,fe.c)();(0,ue.Bm)(Me.spatialReference,Od,Yt,vt);const tr=De.fP.fromTypedArray(Ue);if((0,ye.a)(Mu,Yt),(0,ve.t)(tr,tr,Mu),(0,w.pC)(ke)||(0,w.pC)(ot)){if((0,_e.f)(Xa,Yt),(0,_e.t)(Xa,Xa),(0,w.pC)(ke)){const Or=De.ct.fromTypedArray(ke);(0,ve.a)(Or,Or,Xa)}if((0,w.pC)(ot)){const Or=De.ct.fromTypedArray(ot,4*ot.BYTES_PER_ELEMENT);(0,ve.a)(Or,Or,Xa)}}return Yt}_validateFaces(Me,Ue){const ke=Me.vertexAttributes.position.length/3,ot=Ue.faces;if(ot){let vt=-1;for(let Lt=0;Lt<ot.length;Lt++){const Yt=ot[Lt];Yt>vt&&(vt=Yt)}if(ke<=vt)return this.logger.warn(`Vertex index ${vt} is out of bounds of the mesh position buffer`),!1}else if(ke%3!=0)return this.logger.warn("Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)"),!1;return!0}_getOrCreateFaces(Me,Ue){return Ue.faces?Ue.faces:(0,za.p)(Me.vertexAttributes.position.length/3)}_isOutsideClippingArea(Me){if(!this._context.clippingExtent)return!1;const Ue=Me.vertexAttributes&&Me.vertexAttributes.position;if(!Ue)return!1;const ke=this._context.elevationProvider.spatialReference;let ot;const vt=Ue.length/3;return Me.spatialReference.equals(ke)?ot=Ue:(ot=new Float64Array(Ue.length),(0,ue.CM)(Me.vertexAttributes.position,Me.spatialReference,0,ot,ke,0,vt)),(0,ae.cS)(Oa),(0,ae.G1)(Oa,ot,0,vt),!(0,ae.Zp)(Oa,this._context.clippingExtent)}_createGeometryInfo(Me,Ue){if(!(0,ue.Up)(Me.spatialReference,this._context.graphicsCoreOwner.view.spatialReference))return this.logger.warn("Geometry spatial reference is not compatible with the view"),null;if(this._isOutsideClippingArea(Me))return null;const ke=this._createBuffers(Me,Ue);if((0,w.Wi)(ke))return null;const{positionBuffer:ot,uvBuffer:vt,colorBuffer:Lt,symbolColorBuffer:Yt,normalBuffer:tr,tangentBuffer:Or,objectTransformation:Qr,geometryTransformation:Vr}=ke,is=this._getOrCreateComponents(Me),us=[],_s=[],Vs=[];let Ri=!1;for(const Fi of is){if(!this._validateFaces(Me,Fi))return null;const bi=this._getOrCreateFaces(Me,Fi);if(0===bi.length)continue;const pi=this._createComponentNormals(ot,tr,Fi,bi);pi.didFlipNormals&&(Ri=!0);const Dn=[[Oe.T.POSITION,{size:3,data:ot,exclusive:!0}],[Oe.T.NORMAL,{size:3,data:pi.normals,exclusive:!0}]],qi=[[Oe.T.POSITION,bi],[Oe.T.NORMAL,pi.indices]];(0,w.pC)(Lt)&&(Dn.push([Oe.T.COLOR,{size:4,data:Lt,exclusive:!0}]),qi.push([Oe.T.COLOR,bi])),(0,w.pC)(Yt)&&(Dn.push([Oe.T.SYMBOLCOLOR,{size:4,data:Yt,exclusive:!0}]),qi.push([Oe.T.SYMBOLCOLOR,new Uint16Array(bi.length)])),(0,w.pC)(vt)&&(Dn.push([Oe.T.UV0,{size:2,data:vt,exclusive:!0}]),qi.push([Oe.T.UV0,bi])),(0,w.pC)(Or)&&(Dn.push([Oe.T.TANGENT,{size:4,data:Or,exclusive:!0}]),qi.push([Oe.T.TANGENT,bi]));const kn=new Pe.Z(Dn,qi);us.push(kn),_s.push(Vr),Vs.push(this._getOrCreateMaterial(Me,Fi))}return Ri&&this.logger.warn("Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals."),{geometries:us,transformations:_s,materials:Vs,objectTransformation:Qr}}_createEdgeMaterial(){const Me={opacity:this._getLayerOpacity()};return(0,et.hM)(this.symbolLayer,Me)}}}};class Sm extends $n.w{constructor(Me,Ue,ke){super(Ue.schedule),this._symbol=Me,this._context=Ue,this._backgroundLayers=ke,this._destroyed=!1,this.symbolLayers=new Array,this.referenced=0,this._extentPadding=0}set symbol(Me){this._symbol=Me;for(let Ue=0;Ue<Me.symbolLayers.length;Ue++){const ke=this.symbolLayers[Ue];(0,w.Wi)(ke)||(ke.symbol=Me,ke.symbolLayer=Me.symbolLayers.items[Ue])}}get symbol(){return this._symbol}doLoad(Me){var Ue=this;return(0,D.Z)(function*(){let ke=Ue._symbol.symbolLayers;Ue._extentPadding=0,Ue._backgroundLayers&&(ke=Ue._backgroundLayers.concat(ke));const ot=ke.length;for(;Ue.symbolLayers.length<ke.length;)Ue.symbolLayers.push(null);Ue.symbolLayers.length=ke.length;const vt=[];for(let Lt=0;Lt<ot;Lt++){const Yt=ke.getItemAt(Lt);if(!1===Yt.enabled)continue;lh.renderPriority=1-(1+Lt)/ot,lh.renderPriorityStep=1/ot,lh.ignoreDrivers=Yt._ignoreDrivers;const tr=dO(Ue.symbol,Yt,Ue._context,lh);vt.push((0,B.$F)(Me,()=>{Ue.symbolLayers[Lt]=null,tr.destroy()})),Ue.symbolLayers[Lt]=tr}yield(0,x.Ed)(Ue.symbolLayers,function(){var Lt=(0,D.Z)(function*(Yt,tr){if((0,w.pC)(Yt))try{yield Yt.load(),Ue._extentPadding+=Math.max(Ue._extentPadding,Yt.extentPadding)}catch{Ue.symbolLayers[tr]=null}});return function(Yt,tr){return Lt.apply(this,arguments)}}());for(const Lt of vt)Lt?.remove();if(vt.length=0,(0,B.k_)(Me),Ue.symbolLayers.length&&!Ue.symbolLayers.some(Lt=>!!Lt))throw new Error})()}getSymbolLayerSize(Me){const Ue=this.symbolLayers[Me];return(0,w.pC)(Ue)?Ue.getCachedSize():null}get extentPadding(){return this._extentPadding}createGraphics3DGraphic(Me,Ue){const ke=Me.graphic,ot=new Array(this.symbolLayers.length);for(let Lt=0;Lt<this.symbolLayers.length;Lt++){const Yt=this.symbolLayers[Lt];ot[Lt]=(0,w.pC)(Yt)?Yt.createGraphics3DGraphic(Me):null}return new ee(ke,Ue||this,ot,Me.layer,this._context.arcade||this._context.featureExpressionInfoContext&&this._context.featureExpressionInfoContext.arcade&&this._context.featureExpressionInfoContext.arcade.modules||null)}get complexity(){return(0,qd.IQ)(this.symbolLayers.map(Me=>(0,w.U2)(Me,"complexity")))}globalPropertyChanged(Me,Ue){const ke=this.symbolLayers.length;for(let ot=0;ot<ke;ot++){const vt=this.symbolLayers[ot],Lt=Yt=>{const tr=Yt.graphics[ot];return tr instanceof ne.z?tr:null};if((0,w.pC)(vt)&&!vt.globalPropertyChanged(Me,Ue,Lt))return!1}return!0}applyRendererDiff(Me,Ue){return this.loadStatus!==$n.P.LOADED?Ee.W.Recreate_Symbol:this.symbolLayers.reduce((ke,ot)=>ke!==Ee.W.Recreate_Symbol&&(0,w.pC)(ot)?Math.min(ke,ot.applyRendererDiff(Me,Ue)):ke,Ee.W.Fast_Update)}prepareSymbolPatch(Me){if(this.loadStatus===$n.P.FAILED||"partial"!==Me.diff.type)return;const Ue=Me.diff.diff;if(!Ue.symbolLayers||"partial"!==Ue.symbolLayers.type)return;const ke=Ue.symbolLayers.diff;this.symbolLayers.forEach((ot,vt)=>{if((0,w.Wi)(ot))return;const Lt=ke[vt];if(Lt){const Yt={diff:Lt,graphics3DGraphicPatches:[],symbolLayerStatePatches:[]};ot.prepareSymbolLayerPatch(Yt),Me.symbolStatePatches.push(...Yt.symbolLayerStatePatches),Yt.graphics3DGraphicPatches.length&&Me.graphics3DGraphicPatches.push((tr,Or)=>{const Qr=tr.graphics[vt];(0,w.pC)(Qr)&&Yt.graphics3DGraphicPatches.forEach(Vr=>Vr(Qr,Or))})}})}updateGeometry(Me,Ue){for(let ke=0;ke<this.symbolLayers.length;ke++){const ot=this.symbolLayers[ke];if((0,w.Wi)(ot))continue;const vt=Me.graphics[ke];if((0,w.Wi)(vt)||!ot.updateGeometry(vt,Ue))return!1}return!0}onRemoveGraphic(Me){for(let Ue=0;Ue<this.symbolLayers.length;Ue++){const ke=this.symbolLayers[Ue];if((0,w.Wi)(ke))continue;const ot=Me.graphics[Ue];(0,w.pC)(ot)&&ke.onRemoveGraphic(ot)}}getFastUpdateStatus(){let Me=0,Ue=0,ke=0;return this.symbolLayers.forEach(ot=>{(0,w.Wi)(ot)||(ot.loadStatus===$n.P.LOADING?Me++:ot.isFastUpdatesEnabled()?ke++:Ue++)}),{loading:Me,slow:Ue,fast:ke}}destroy(){if(this.destroyed)console.error("Graphics3DSymbol.destroy called when already destroyed!");else{super.destroy();for(const Me of this.symbolLayers)(0,w.pC)(Me)&&Me.destroy();this.symbolLayers.length=0,this._destroyed=!0}}get destroyed(){return this._destroyed}}const lh={renderPriority:0,renderPriorityStep:1,ignoreDrivers:!1}},18422:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>X,k:()=>ie});var D=T(91558),w=(T(8314),T(63290)),B=T(62208),U=T(28093),W=T(4794),Y=T(81468),H=T(79112),G=T(74746),$=T(67225),re=T(64538),ue=T(87930),ae=T(97161);const oe=w.Z.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayer");class ie extends ue.w{constructor(le,ne,ce,de){super(ce.schedule),this._context=ce,this._elevationInfoOverride=null,this._ignoreDrivers=!1,this._drivenProperties={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1},this.complexity=null,this.logger=oe,this._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0},this.symbol=le,this.symbolLayer=ne,this._renderPriority=de.renderPriority,this._renderPriorityStep=de.renderPriorityStep,this._elevationContext=new H.o,this.complexity=this.computeComplexity(),this._ignoreDrivers=de.ignoreDrivers,this._ignoreDrivers||(this._drivenProperties=Z(this._context.renderer)),this._updateElevationContext()}getCachedSize(){return null}get extentPadding(){return 0}_drivenPropertiesChanged(le){if(this._ignoreDrivers)return!1;const ne=this._drivenProperties,ce=Z(le);return ce.color!==ne.color||ce.opacity!==ne.opacity||ce.opacityAlwaysOpaque!==ne.opacityAlwaysOpaque||ce.size!==ne.size}get needsDrivenTransparentPass(){return this._drivenProperties.opacity&&!this._drivenProperties.opacityAlwaysOpaque}_logGeometryCreationWarnings(le,ne,ce,de){const _e="polygons"in le?le.polygons:null,he=`${de} geometry failed to be created`;let ye=null;le.projectionSuccess?!ne.length||1===ne.length&&!ne[0].length?ye=`${he} (no ${ce} were defined)`:Array.isArray(ne)&&Array.isArray(ne[0])?_e&&0===_e.length&&"rings"===ce&&ne.length>0&&ne[0].length>2&&(ye=`${he} (filled rings should use clockwise winding - try reversing the order of vertices)`):ye=`${he} (${ce} should be defined as a 2D array)`:ye=`${he} (failed to project geometry to view spatial reference)`,ye&&oe.warnOncePerTick(ye)}_validateGeometry(le,ne=null,ce=null){if((0,B.pC)(ne)&&!ne.includes(le.type))return this.logger.warn("unsupported geometry type for "+ce+` symbol: ${le.type}`),!1;if("point"===le.type){const de=le;if(!isFinite(de.x)||!isFinite(de.y))return oe.warn("point coordinate is not a valid number, graphic skipped"),!1}return!0}_defaultElevationInfoNoZ(){return Q}_defaultElevationInfoZ(){return J}_updateElevationContext(){(0,B.pC)(this._elevationInfoOverride)?(this._elevationContext.setFromElevationInfo(this._elevationInfoOverride),this._elevationContext.updateFeatureExpressionInfoContext(null)):this._context.layer.elevationInfo?(this._elevationContext.setFromElevationInfo(this._context.layer.elevationInfo),this._elevationContext.updateFeatureExpressionInfoContext(this._context.featureExpressionInfoContext)):this._elevationContext.reset()}getDefaultElevationInfo(le){return le.hasZ?this._defaultElevationInfoZ():this._defaultElevationInfoNoZ()}getGeometryElevationMode(le,ne=this.getDefaultElevationInfo(le)){return this._elevationContext.mode||ne.mode}setElevationInfoOverride(le){this._elevationInfoOverride=le,this._updateElevationContext()}setGraphicElevationContext(le,ne){const ce=(0,B.Wg)(le.geometry),de=this.getDefaultElevationInfo(ce);ne.unit=null!=this._elevationContext.unit?this._elevationContext.unit:de.unit,ne.mode=this.getGeometryElevationMode(ce,de),ne.offsetMeters=(0,B.Pt)(this._elevationContext.meterUnitOffset,(0,B.Pt)(de.offset,0));const me=!this._elevationOptions.supportsOnTheGround&&"on-the-ground"===ne.mode;return me&&(ne.mode="relative-to-ground",ne.offsetMeters=0),ne.updateFeatureExpressionInfoContext(me?G.O$:this._elevationContext.featureExpressionInfoContext,le,this._context.layer),ne}prepareSymbolLayerPatch(le){}updateGeometry(le,ne){return!1}onRemoveGraphic(le){}_getLayerOpacity(){return this._context.graphicsCoreOwner&&"fullOpacity"in this._context.graphicsCoreOwner?this._context.graphicsCoreOwner.fullOpacity:this._context.layer.opacity??1}_getCombinedOpacity(le,ne=se){let ce=1;return this.draped||(ce*=this._getLayerOpacity()),this._drivenProperties.opacity||((0,B.pC)(le)?ce*=le.a:ne.hasIntrinsicColor||(ce=0)),ce}_getCombinedOpacityAndColor(le,ne=se){const ce=this._getCombinedOpacity(le,ne);if(this._drivenProperties.color)return(0,$.Uu)(null,ce);const de=(0,B.pC)(le)?D.Z.toUnitRGB(le):U.O;return(0,$.Uu)(de,ce)}_getVertexOpacityAndColor(le,ne=null){const me=(0,$.Uu)(this._drivenProperties.color?le.color:null,this._drivenProperties.opacity?le.opacity:null);return(0,B.pC)(ne)&&(me[0]*=ne,me[1]*=ne,me[2]*=ne,me[3]*=ne),me}isFastUpdatesEnabled(){return this._fastUpdates&&this._fastUpdates.enabled}computeComplexity(){return(0,ae.u)(this.symbol,this.symbolLayer)}globalPropertyChanged(le,ne,ce){switch(le){case"opacity":return this.layerOpacityChanged(ne,ce);case"elevationInfo":{const de=this._elevationContext.mode;return this._updateElevationContext(),this.layerElevationInfoChanged(ne,ce,de)!==Y.lO.RECREATE}case"slicePlaneEnabled":return this.slicePlaneEnabledChanged(ne,ce);case"physicalBasedRenderingEnabled":return this.physicalBasedRenderingChanged();case"pixelRatio":return this.pixelRatioChanged();default:return!1}}updateGraphics3DGraphicElevationInfo(le,ne,ce){let de=Y.lO.UPDATE;return le.forEach(me=>{const _e=ne(me);(0,B.pC)(_e)?(this.setGraphicElevationContext(me.graphic,_e.elevationContext),_e.needsElevationUpdates=ce(_e.elevationContext.mode)):de=Y.lO.RECREATE}),de}applyRendererDiff(le,ne){return re.W.Recreate_Symbol}getFastUpdateAttrValues(le){if(!this._fastUpdates.enabled)return null;const ne=this._fastUpdates.visualVariables,ce=ne.size?X(ne.size.field,le):0,de=ne.color?X(ne.color.field,le):0,me=ne.opacity?X(ne.opacity.field,le):0;return(0,W.f)(ce,de,me,0)}get draped(){return this._draped}ensureDrapedStatus(le){return null==this._draped?(this._draped=le,!0):(le!==this.draped&&oe.warnOnce("A symbol can only produce either draped or non-draped visualizations. Use two separate symbol instances for draped and non-draped graphics if necessary."),!1)}test(){return{drivenProperties:this._drivenProperties,getVisVarFields:()=>({size:this._fastUpdates?.visualVariables?.size?.field??null,color:this._fastUpdates?.visualVariables?.color?.field??null,opacity:this._fastUpdates?.visualVariables?.opacity?.field??null,rotation:this._fastUpdates?.visualVariables?.rotation?.field??null})}}}function X(ee,le){const ne=null!=ee?le.attributes[ee]:0;return null!=ne&&isFinite(ne)?ne:0}function Z(ee){const le={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1};return ee&&"visualVariables"in ee&&ee.visualVariables&&ee.visualVariables.forEach(ne=>{switch(ne.type){case"color":if(le.color=!0,ne.stops)for(let ce=0;ce<ne.stops.length;ce++){const de=ne.stops[ce].color;de&&(le.opacity=!0,de.a<1&&(le.opacityAlwaysOpaque=!1))}break;case"opacity":le.opacity=!0,le.opacityAlwaysOpaque=!1;break;case"size":le.size=!0}}),le}const Q={mode:"on-the-ground",offset:0,unit:"meters"},J={mode:"absolute-height",offset:0,unit:"meters"},se={hasIntrinsicColor:!1}},13939:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>W});var D=T(15861),x=T(62208),w=T(64538),B=T(87930),U=T(97161);class W extends B.w{constructor(H,G,$){super(G),this.symbol=H,this.convert=$,this.graphics3DSymbol=null,this.referenced=0}getSymbolLayerSize(H){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.getSymbolLayerSize(H):null}get symbolLayers(){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.symbolLayers:[]}get extentPadding(){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.extentPadding:0}doLoad(H){var G=this;return(0,D.Z)(function*(){const $=yield G.symbol.fetchSymbol({signal:H});$.id=G.symbol.id,G.graphics3DSymbol=G.convert($),(0,x.pC)(G.graphics3DSymbol)&&(yield G.graphics3DSymbol.load())})()}createGraphics3DGraphic(H){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.createGraphics3DGraphic(H,this):null}get complexity(){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.complexity:U.WU}globalPropertyChanged(H,G){return!!(0,x.pC)(this.graphics3DSymbol)&&this.graphics3DSymbol.globalPropertyChanged(H,G)}applyRendererDiff(H,G){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.applyRendererDiff(H,G):w.W.Recreate_Symbol}prepareSymbolPatch(H){(0,x.pC)(this.graphics3DSymbol)&&this.graphics3DSymbol.prepareSymbolPatch(H)}updateGeometry(H,G){return!!(0,x.pC)(this.graphics3DSymbol)&&this.graphics3DSymbol.updateGeometry(H,G)}onRemoveGraphic(){}getFastUpdateStatus(){return(0,x.pC)(this.graphics3DSymbol)?this.graphics3DSymbol.getFastUpdateStatus():{loading:1,fast:0,slow:0}}destroy(){(0,x.pC)(this.graphics3DSymbol)&&this.graphics3DSymbol.destroy(),this.graphics3DSymbol=void 0,super.destroy()}get destroyed(){return void 0===this.graphics3DSymbol}}},87930:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>B,w:()=>w});var B,U,D=T(62208),x=T(10699);class w{constructor(W){this.schedule=W,this._loadStatus=B.LOADING,this.logger=null}destroy(){this.abortLoad()}get loadStatus(){return this._loadStatus}load(W,Y){return this._loadStatus===B.LOADED?(W&&W(),(0,D.Wg)(this._loader)):this._loadStatus===B.FAILED?(Y&&Y(this._loadError),(0,D.Wg)(this._loader)):((0,D.Wi)(this._loader)&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then(()=>{this._abortController=null,this._loadStatus=B.LOADED},H=>{throw this._loadError=H,this._abortController=null,this._loadStatus=B.FAILED,!(0,x.D_)(H)&&this.logger&&H.message&&this.logger.warn(H.message),H})),this._loader.then(W,Y).catch(()=>{}),this._loader)}abortLoad(){(0,D.pC)(this._abortController)?this._abortController=(0,D.IM)(this._abortController):this._loadStatus===B.LOADING&&(this._loadStatus=B.FAILED),this._loader=null}}(U=B||(B={}))[U.LOADING=0]="LOADING",U[U.LOADED=1]="LOADED",U[U.FAILED=2]="FAILED"},80960:(qe,xe,T)=>{"use strict";T.d(xe,{ZF:()=>w,a1:()=>U,rD:()=>B});var D=T(4794);const w=1.2,B=D.Z,U=D.O},81468:(qe,xe,T)=>{"use strict";T.d(xe,{B5:()=>ie,GC:()=>ae,Lm:()=>le,Xf:()=>oe,bD:()=>X,lO:()=>ne,qZ:()=>re,rR:()=>$,w7:()=>ue});var ne,he,D=T(94573),x=T(62208),w=T(28347),B=T(43703),U=T(28093),W=T(55915),Y=T(88530),H=T(67225),G=T(53929);function $(he,ye,fe,De,ve,Ce,ge,Te,Le,je,ze){const Ee=ce[ze.mode];let Ae,we,Be=0;if((0,W.CM)(he,ye,fe,De,Le.spatialReference,ve,Te))return Ee.requiresAlignment(ze)?(Be=Ee.applyElevationAlignmentBuffer(De,ve,Ce,ge,Te,Le,je,ze),Ae=Ce,we=ge):(Ae=De,we=ve),(0,W.CM)(Ae,Le.spatialReference,we,Ce,je.spatialReference,ge,Te)?Be:void 0}function re(he,ye,fe,De,ve){const Ce=((0,Y.f)(he)?he.z:(0,G.Fb)(he)?he.array[he.offset+2]:he[2])||0;switch(fe.mode){case"on-the-ground":{const ge=(0,x.Pt)((0,G.KO)(ye,he,"ground"),0);return ve.verticalDistanceToGround=0,ve.sampledElevation=ge,void(ve.z=ge)}case"relative-to-ground":{const ge=(0,x.Pt)((0,G.KO)(ye,he,"ground"),0),Te=fe.geometryZWithOffset(Ce,De);return ve.verticalDistanceToGround=Te,ve.sampledElevation=ge,void(ve.z=Te+ge)}case"relative-to-scene":{const ge=(0,x.Pt)((0,G.KO)(ye,he,"scene"),0),Te=fe.geometryZWithOffset(Ce,De);return ve.verticalDistanceToGround=Te,ve.sampledElevation=ge,void(ve.z=Te+ge)}case"absolute-height":{const ge=fe.geometryZWithOffset(Ce,De),Te=(0,x.Pt)((0,G.KO)(ye,he,"ground"),0);return ve.verticalDistanceToGround=ge-Te,ve.sampledElevation=Te,void(ve.z=ge)}default:return(0,D.Bg)(fe.mode),void(ve.z=0)}}function ue(he,ye,fe,De){return re(he,ye,fe,De,me),me.z}function ae(he,ye,fe){return null==ye||null==fe?he.definedChanged:"on-the-ground"===ye&&"on-the-ground"===fe?he.staysOnTheGround:ye===fe||"on-the-ground"!==ye&&"on-the-ground"!==fe?ne.UPDATE:he.onTheGroundChanged}function oe(he){return"relative-to-ground"===he||"relative-to-scene"===he}function ie(he){return"absolute-height"!==he}function X(he,ye,fe,De,ve){re(ye,fe,ve,De,me),(0,H.CV)(he,me.verticalDistanceToGround);const Ce=me.sampledElevation,ge=(0,w.c)(de,he.transformation);return _e[0]=ye.x,_e[1]=ye.y,_e[2]=me.z,(0,W.Bm)(ye.spatialReference,_e,ge,De.spatialReference)?he.transformation=ge:console.warn("Could not locate symbol object properly, it might be misplaced"),Ce}class le{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}(he=ne||(ne={}))[he.NONE=0]="NONE",he[he.UPDATE=1]="UPDATE",he[he.RECREATE=2]="RECREATE";const ce={"absolute-height":{applyElevationAlignmentBuffer:function ee(he,ye,fe,De,ve,Ce,ge,Te){const Le=Te.calculateOffsetRenderUnits(ge),je=Te.featureExpressionInfoContext;ye*=3,De*=3;for(let ze=0;ze<ve;++ze){const Ae=he[ye+1],we=he[ye+2];fe[De+0]=he[ye+0],fe[De+1]=Ae,fe[De+2]=null==je?we+Le:Le,ye+=3,De+=3}return 0},requiresAlignment:function se(he){return 0!==he.meterUnitOffset||null!=he.featureExpressionInfoContext}},"on-the-ground":{applyElevationAlignmentBuffer:function Z(he,ye,fe,De,ve,Ce){let ge=0;const Te=Ce.spatialReference;ye*=3,De*=3;for(let Le=0;Le<ve;++Le){const je=he[ye+0],ze=he[ye+1],Ae=(0,x.Pt)(Ce.getElevation(je,ze,he[ye+2],Te,"ground"),0);ge+=Ae,fe[De+0]=je,fe[De+1]=ze,fe[De+2]=Ae,ye+=3,De+=3}return ge/ve},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function Q(he,ye,fe,De,ve,Ce,ge,Te){let Le=0;const je=Te.calculateOffsetRenderUnits(ge),ze=Te.featureExpressionInfoContext,Ee=Ce.spatialReference;ye*=3,De*=3;for(let Ae=0;Ae<ve;++Ae){const we=he[ye+0],Be=he[ye+1],Pe=he[ye+2],Oe=(0,x.Pt)(Ce.getElevation(we,Be,Pe,Ee,"ground"),0);Le+=Oe,fe[De+0]=we,fe[De+1]=Be,fe[De+2]=null==ze?Pe+Oe+je:Oe+je,ye+=3,De+=3}return Le/ve},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function J(he,ye,fe,De,ve,Ce,ge,Te){let Le=0;const je=Te.calculateOffsetRenderUnits(ge),ze=Te.featureExpressionInfoContext,Ee=Ce.spatialReference;ye*=3,De*=3;for(let Ae=0;Ae<ve;++Ae){const we=he[ye+0],Be=he[ye+1],Pe=he[ye+2],Oe=(0,x.Pt)(Ce.getElevation(we,Be,Pe,Ee,"scene"),0);Le+=Oe,fe[De+0]=we,fe[De+1]=Be,fe[De+2]=null==ze?Pe+Oe+je:Oe+je,ye+=3,De+=3}return Le/ve},requiresAlignment:()=>!0}},de=(0,B.c)(),me=new le,_e=(0,U.c)()},79721:(qe,xe,T)=>{"use strict";var D,x,w;T.d(xe,{E:()=>D,P:()=>x}),(w=D||(D={}))[w.GRAPHIC=0]="GRAPHIC",w[w.LABEL=1]="LABEL",w[w._COUNT=2]="_COUNT",function(w){w[w.USER_SETTING=0]="USER_SETTING",w[w.SCALE_RANGE=1]="SCALE_RANGE",w[w.FILTER=2]="FILTER",w[w.DECONFLICTION=3]="DECONFLICTION",w[w._COUNT=4]="_COUNT"}(x||(x={}))},74746:(qe,xe,T)=>{"use strict";T.d(xe,{O$:()=>oe,Tz:()=>$,WI:()=>ae,aO:()=>re,bw:()=>Y,d9:()=>W,ht:()=>ue,kr:()=>H});var D=T(15861),x=T(63290),w=T(84786),B=T(46679);const U=x.Z.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function W(Z){return{cachedResult:Z.cachedResult,arcade:Z.arcade?{func:Z.arcade.func,context:Z.arcade.modules.arcadeUtils.createExecContext(null,{sr:Z.arcade.context.spatialReference}),modules:Z.arcade.modules}:null}}function Y(Z){const Q=Z&&Z.expression;if("string"==typeof Q){const J=X(Q);if(null!=J)return{cachedResult:J}}return null}function H(Z,Q,J){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*(Z,Q,J){const se=Z&&Z.expression;if("string"!=typeof se)return null;const ee=X(se);if(null!=ee)return{cachedResult:ee};const le=yield(0,B.LC)(),ne=le.arcadeUtils,ce=ne.createSyntaxTree(se);return ne.dependsOnView(ce)?(J?.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:ne.createFunction(ce),context:ne.createExecContext(null,{sr:Q}),modules:le}}})).apply(this,arguments)}function $(Z,Q,J){return Z.arcadeUtils.createFeature(Q.attributes,Q.geometry,J)}function re(Z,Q){if(null!=Z&&!ie(Z)){if(!Q||!Z.arcade)return void U.errorOncePerTick("Arcade support required but not provided");const J=Q;J._geometry&&(J._geometry=(0,w.kB)(J._geometry)),Z.arcade.modules.arcadeUtils.updateExecContext(Z.arcade.context,Q)}}function ue(Z){if(null!=Z){if(ie(Z))return Z.cachedResult;const Q=Z.arcade;let J=Z.arcade.modules.arcadeUtils.executeFunction(Q.func,Q.context);return"number"!=typeof J&&(Z.cachedResult=0,J=0),J}return 0}function ae(Z,Q=!1){let J=Z&&Z.featureExpressionInfo;return Q||"0"===(J&&J.expression)||(J=null),J}const oe={cachedResult:0};function ie(Z){return null!=Z.cachedResult}function X(Z){return"0"===Z?0:null}},67225:(qe,xe,T)=>{"use strict";T.d(xe,{$o:()=>ne,CV:()=>ee,Go:()=>se,Si:()=>ye,Uu:()=>le,ZL:()=>_e,_Z:()=>he,bD:()=>ce,bh:()=>me,zE:()=>ie});var D=T(62208),x=T(28347),w=T(43703),B=T(28093),U=T(993),W=T(4794),Y=T(55915),H=T(5548),G=T(65401),$=T(27105),re=T(25748),ue=T(38114),ae=T(84786),oe=T(16396);function ie(fe,De){if("point"===fe.type)return J(fe,De,!1);if((0,ae.Ou)(fe))switch(fe.type){case"extent":return J(fe.center,De,!1);case"polygon":return J(fe.centroid,De,!1);case"polyline":return J(X(fe),De,!0);case"mesh":return J(fe.origin,De,!1)}else switch(fe.type){case"extent":return J(function Z(fe){const De=isFinite(fe.zmin);return(0,ue.Tx)(.5*(fe.xmax+fe.xmin),.5*(fe.ymax+fe.ymin),De?.5*(fe.zmax+fe.zmin):void 0,fe.spatialReference)}(fe),De,!0);case"polygon":return J(function Q(fe){const De=fe.rings[0];if(!De||0===De.length)return null;const ve=(0,$.a)(fe.rings,fe.hasZ);return(0,ue.Tx)(ve[0],ve[1],ve[2],fe.spatialReference)}(fe),De,!0);case"polyline":return J(X(fe),De,!0)}}function X(fe){const De=fe.paths[0];if(!De||0===De.length)return null;const ve=(0,re.n8)(De,(0,re.ok)(De)/2);return(0,ue.Tx)(ve[0],ve[1],ve[2],fe.spatialReference)}function J(fe,De,ve){const Ce=ve?fe:(0,ae.WG)(fe);return De&&fe?(0,Y.nF)(fe,Ce,De)?Ce:null:Ce}function se(fe,De,ve,Ce=0){if(fe){De||(De=(0,G.Ue)());const ge=fe;let Te=.5*ge.width*(ve-1),Le=.5*ge.height*(ve-1);return ge.width<1e-7*ge.height?Te+=Le/20:ge.height<1e-7*ge.width&&(Le+=Te/20),(0,U.s)(De,ge.xmin-Te-Ce,ge.ymin-Le-Ce,ge.xmax+Te+Ce,ge.ymax+Le+Ce),De}return null}function ee(fe,De){for(let ve=0;ve<fe.geometries.length;++ve){const Ce=fe.geometries[ve].getMutableAttribute(oe.T.AUXPOS1);Ce&&Ce.data[3]!==De&&(Ce.data[3]=De,fe.geometryVertexAttrsUpdated(fe.geometryRecords[ve]))}}function le(fe,De){const ve=(0,W.d)(W.O);return(0,D.pC)(fe)&&(ve[0]=fe[0],ve[1]=fe[1],ve[2]=fe[2]),(0,D.pC)(De)?ve[3]=De:(0,D.pC)(fe)&&fe.length>3&&(ve[3]=fe[3]),ve}function ne(fe,De,ve,Ce,ge,Te=[0,0,0,0]){for(let Le=0;Le<3;++Le)Te[Le]=(0,D.pC)(fe)&&null!=fe[Le]?fe[Le]:(0,D.pC)(ve)&&null!=ve[Le]?ve[Le]:ge[Le];return Te[3]=(0,D.pC)(De)?De:(0,D.pC)(Ce)?Ce:ge[3],Te}function ce(fe=B.O,De,ve,Ce=1){const ge=new Array(3);if((0,D.Wi)(De)||(0,D.Wi)(ve))ge[0]=1,ge[1]=1,ge[2]=1;else{let Te,Le=0;for(let je=2;je>=0;je--){const ze=fe[je];let Ee;const Ae=null!=ze,we=0===je&&!Te&&!Ae,Be=ve[je];"symbol-value"===ze||we?Ee=0!==Be?De[je]/Be:1:Ae&&"proportional"!==ze&&isFinite(ze)&&(Ee=0!==Be?ze/Be:1),null!=Ee&&(ge[je]=Ee,Te=Ee,Le=Math.max(Le,Math.abs(Ee)))}for(let je=2;je>=0;je--)null==ge[je]?ge[je]=Te:0===ge[je]&&(ge[je]=.001*Le)}for(let Te=2;Te>=0;Te--)ge[Te]/=Ce;return(0,B.d)(ge)}function me(fe){return function de(fe){return null!=fe.isPrimitive}(fe)&&(fe=[fe.width,fe.depth,fe.height]),_e(fe)?null:"Symbol sizes may not be negative values"}function _e(fe){if(Array.isArray(fe)){for(const De of fe)if(!_e(De))return!1;return!0}return null==fe||fe>=0}function he(fe,De,ve,Ce=(0,w.c)()){const ge=fe||0,Te=De||0,Le=ve||0;return 0!==ge&&(0,x.g)(Ce,Ce,-ge/180*Math.PI),0!==Te&&(0,x.r)(Ce,Ce,Te/180*Math.PI),0!==Le&&(0,x.o)(Ce,Ce,Le/180*Math.PI),Ce}function ye(fe,De){return null!=De.minDemResolution?De.minDemResolution:(0,H.wp)(fe)?De.minDemResolutionForPoints:.01*(0,H.aO)(fe)}},64538:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{W:()=>D}),(x=D||(D={}))[x.Recreate_Symbol=0]="Recreate_Symbol",x[x.Recreate_Graphics=1]="Recreate_Graphics",x[x.Fast_Update=2]="Fast_Update"},44014:(qe,xe,T)=>{"use strict";T.d(xe,{NW:()=>De,VP:()=>J,YU:()=>Q,rm:()=>ee,u9:()=>ge}),T(8314);var De,Te,x=T(62208),w=T(55713),B=T(67831),U=T(84161),W=T(28093),Y=T(55915),H=T(12080),G=T(85334),$=T(59617),re=T(80960),ue=T(81468),ae=T(64835),oe=T(42743),ie=T(52107),X=T(16396),Z=T(39401);function Q(Te){const Le=[],je=[];!function le(Te,Le,je){const{attributeData:{position:ze},removeDuplicateStartEnd:Ee}=Te,Ae=function fe(Te){const Le=Te.length;return Te[0]===Te[Le-3]&&Te[1]===Te[Le-2]&&Te[2]===Te[Le-1]}(ze)&&Ee===De.REMOVE,we=ze.length/3-(Ae?1:0),Be=new Uint32Array(2*(we-1)),Pe=Ae?(0,w.tP)(ze,0,ze.length-3):ze;let Oe=0;for(let Ke=0;Ke<we-1;Ke++)Be[Oe++]=Ke,Be[Oe++]=Ke+1;Le.push([X.T.POSITION,{size:3,data:Pe,exclusive:Ae}]),je.push([X.T.POSITION,Be])}(Te,je,Le);const ze=je[0][1].data,Ae=new Uint16Array(Le[0][1].length);return function ne(Te,Le,je){const ze=Te.attributeData.mapPosition;(0,x.Wi)(ze)||(je.push([X.T.MAPPOS,je[0][1]]),Le.push([X.T.MAPPOS,{size:3,data:ze}]))}(Te,je,Le),function ce(Te,Le,je,ze){(0,x.pC)(Te.attributeData.colorFeature)||(Le.push([X.T.COLOR,{size:4,data:(0,x.Pt)(Te.attributeData.color,re.a1)}]),je.push([X.T.COLOR,ze]))}(Te,je,Le,Ae),function me(Te,Le,je,ze){(0,x.pC)(Te.attributeData.sizeFeature)||(Le.push([X.T.SIZE,{size:1,data:[(0,x.Pt)(Te.attributeData.size,1)]}]),je.push([X.T.SIZE,ze]))}(Te,je,Le,Ae),function de(Te,Le,je,ze){const Ee=Te.attributeData.colorFeature;(0,x.Wi)(Ee)||(Le.push([X.T.COLORFEATUREATTRIBUTE,{size:1,data:new Float32Array([Ee])}]),je.push([X.T.COLOR,ze]))}(Te,je,Le,Ae),function _e(Te,Le,je,ze){const Ee=Te.attributeData.sizeFeature;(0,x.Wi)(Ee)||(Le.push([X.T.SIZEFEATUREATTRIBUTE,{size:1,data:new Float32Array([Ee])}]),je.push([X.T.SIZEFEATUREATTRIBUTE,ze]))}(Te,je,Le,Ae),function he(Te,Le,je,ze){const Ee=Te.attributeData.opacityFeature;(0,x.Wi)(Ee)||(Le.push([X.T.OPACITYFEATUREATTRIBUTE,{size:1,data:new Float32Array([Ee])}]),je.push([X.T.OPACITYFEATUREATTRIBUTE,ze]))}(Te,je,Le,Ae),function ye(Te,Le,je,ze){if((0,x.Wi)(Te.overlayInfo)||Te.overlayInfo.renderCoordsHelper.viewingMode!==$.JY.Global||!Te.overlayInfo.spatialReference.isGeographic)return;const Ee=new Float64Array(ze.length),Ae=(0,H.Iu)(Te.overlayInfo.spatialReference);for(let Ne=0;Ne<Ee.length;Ne+=3)(0,Y.gH)(ze,Ne,Ee,Ne,Ae);const we=ze.length/3,Be=new Float32Array(we+1);let Pe=ve,Oe=Ce,Ke=0,Ve=0;(0,U.s)(Pe,Ee[Ve++],Ee[Ve++],Ee[Ve++]),Be[0]=0;for(let Ne=1;Ne<we+1;++Ne)Ne===we&&(Ve=0),(0,U.s)(Oe,Ee[Ve++],Ee[Ve++],Ee[Ve++]),Ke+=(0,B.d)(Pe,Oe),Be[Ne]=Ke,[Pe,Oe]=[Oe,Pe];Le.push([X.T.DISTANCETOSTART,{size:1,data:Be}]),je.push([X.T.DISTANCETOSTART,je[0][1]])}(Te,je,Le,ze),new ie.Z(je,Le,oe.MX.Line)}function J(Te,Le,je,ze){const Ee="polygon"===Te.type?G.ZI.CCW_IS_HOLE:G.ZI.NONE,Ae="polygon"===Te.type?Te.rings:Te.paths,{position:we,outlines:Be}=(0,G.Mk)(Ae,Te.hasZ,Ee),Pe=new Float64Array(we.length),Oe=(0,ue.rR)(we,Te.spatialReference,0,Pe,0,we,0,we.length/3,Le,je,ze),Ke=null!=Oe;return{lines:Ke?se(Be,we,Pe):[],projectionSuccess:Ke,sampledElevation:Oe}}function se(Te,Le,je){const ze=new Array;for(const{index:Ee,count:Ae}of Te){if(Ae<=1)continue;const we=3*Ee,Be=we+3*Ae;ze.push({position:Le.subarray(we,Be),mapPosition:je?je.subarray(we,Be):void 0})}return ze}function ee(Te,Le){const je="polygon"===Te.type?G.ZI.CCW_IS_HOLE:G.ZI.NONE,ze="polygon"===Te.type?Te.rings:Te.paths,{position:Ee,outlines:Ae}=(0,G.Mk)(ze,!1,je),we=(0,Y.CM)(Ee,Te.spatialReference,0,Ee,Le,0,Ee.length/3);for(let Be=2;Be<Ee.length;Be+=3)Ee[Be]=ae.Rn;return{lines:we?se(Ae,Ee):[],projectionSuccess:we}}(Te=De||(De={}))[Te.KEEP=0]="KEEP",Te[Te.REMOVE=1]="REMOVE";const ve=(0,W.c)(),Ce=(0,W.c)();function ge(Te){switch(Te){case"butt":return Z.R.BUTT;case"square":return Z.R.SQUARE;case"round":return Z.R.ROUND;default:return null}}},6176:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{fetch:()=>ye,gltfToEngineResources:()=>ve,parseUrl:()=>De});var D=T(15861),x=T(83100),w=T(62208),B=T(30217),U=T(550),W=T(28347),Y=T(43703),H=T(84161),G=T(28093),$=T(5548),re=T(60479),ue=T(79800),ae=T(63657),oe=T(60490),ie=T(9160),X=T(93831),Z=T(96170),Q=T(98973),J=T(42743),se=T(52107),ee=T(81695),le=T(16396),ne=T(28523),ce=T(79331),de=T(67969),me=T(35995),_e=T(63470),he=T(9554);function ye(Le,je){return fe.apply(this,arguments)}function fe(){return(fe=(0,D.Z)(function*(Le,je){const ze=De((0,x.pJ)(Le));if("wosr"===ze.fileType){const Oe=yield je.cache?je.cache.loadWOSR(ze.url,je):(0,Q.zD)(ze.url,je),Ke=(0,Q.p2)(Oe,je);return{lods:[Ke],referenceBoundingBox:Ke.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:Oe.remove}}const Ee=yield je.cache?je.cache.loadGLTF(ze.url,je,je.usePBR):(0,X.z)(new ie.C(je.streamDataRequester),ze.url,je,je.usePBR),Ae=(0,w.U2)(Ee.model.meta,"ESRI_proxyEllipsoid");Ee.meta.isEsriSymbolResource&&(0,w.pC)(Ae)&&Ee.meta.uri.includes("/RealisticTrees/")&&Te(Ee,Ae);const we=Ee.meta.isEsriSymbolResource?{usePBR:je.usePBR,isSchematic:!1,treeRendering:!!Ee.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:je.usePBR,isSchematic:!1,treeRendering:!1,mrrFactors:[0,1,.5]},Be={...je.materialParamsMixin,treeRendering:!!Ee.customMeta.esriTreeRendering};if(null!=ze.specifiedLodIndex){const Oe=ve(Ee,we,Be,ze.specifiedLodIndex);let Ke=Oe[0].boundingBox;return 0!==ze.specifiedLodIndex&&(Ke=ve(Ee,we,Be,0)[0].boundingBox),{lods:Oe,referenceBoundingBox:Ke,isEsriSymbolResource:Ee.meta.isEsriSymbolResource,isWosr:!1,remove:Ee.remove}}const Pe=ve(Ee,we,Be);return{lods:Pe,referenceBoundingBox:Pe[0].boundingBox,isEsriSymbolResource:Ee.meta.isEsriSymbolResource,isWosr:!1,remove:Ee.remove}})).apply(this,arguments)}function De(Le){const je=Le.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return je?{fileType:"gltf",url:je[1],specifiedLodIndex:null!=je[4]?Number(je[4]):null}:Le.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:Le,specifiedLodIndex:null}:{fileType:"unknown",url:Le,specifiedLodIndex:null}}function ve(Le,je,ze,Ee){const Ae=Le.model,we=(0,U.c)(),Be=new Array,Pe=new Map,Oe=new Map;return Ae.lods.forEach((Ke,Ve)=>{if(void 0!==Ee&&Ve!==Ee)return;const Ne={name:Ke.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:(0,w.pC)(Ke.lodThreshold)?Ke.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:(0,$.cS)()};Be.push(Ne),Ke.parts.forEach(Ie=>{const We=Ie.material+(Ie.attributes.normal?"_normal":"")+(Ie.attributes.color?"_color":"")+(Ie.attributes.texCoord0?"_texCoord0":"")+(Ie.attributes.tangent?"_tangent":""),Se=Ae.materials.get(Ie.material),He=(0,w.pC)(Ie.attributes.texCoord0),$e=(0,w.pC)(Ie.attributes.normal),et=function Ce(Le){switch(Le){case"BLEND":return J.JJ.Blend;case"MASK":return J.JJ.Mask;case"OPAQUE":case null:case void 0:return J.JJ.Opaque}}(Se.alphaMode);if(!Pe.has(We)){if(He){if((0,w.pC)(Se.textureColor)&&!Oe.has(Se.textureColor)){const Pr=Ae.textures.get(Se.textureColor),kr={...Pr.parameters,preMultiplyAlpha:et!==J.JJ.Opaque};Oe.set(Se.textureColor,new ee.x(Pr.data,kr))}if((0,w.pC)(Se.textureNormal)&&!Oe.has(Se.textureNormal)){const Pr=Ae.textures.get(Se.textureNormal);Oe.set(Se.textureNormal,new ee.x(Pr.data,Pr.parameters))}if((0,w.pC)(Se.textureOcclusion)&&!Oe.has(Se.textureOcclusion)){const Pr=Ae.textures.get(Se.textureOcclusion);Oe.set(Se.textureOcclusion,new ee.x(Pr.data,Pr.parameters))}if((0,w.pC)(Se.textureEmissive)&&!Oe.has(Se.textureEmissive)){const Pr=Ae.textures.get(Se.textureEmissive);Oe.set(Se.textureEmissive,new ee.x(Pr.data,Pr.parameters))}if((0,w.pC)(Se.textureMetallicRoughness)&&!Oe.has(Se.textureMetallicRoughness)){const Pr=Ae.textures.get(Se.textureMetallicRoughness);Oe.set(Se.textureMetallicRoughness,new ee.x(Pr.data,Pr.parameters))}}const Mt=Se.color[0]**(1/ce.K),Ft=Se.color[1]**(1/ce.K),kt=Se.color[2]**(1/ce.K),wt=Se.emissiveFactor[0]**(1/ce.K),zt=Se.emissiveFactor[1]**(1/ce.K),Zt=Se.emissiveFactor[2]**(1/ce.K),ar=(0,w.pC)(Se.textureColor)&&He?Oe.get(Se.textureColor):null;Pe.set(We,new ne.Gp({...je,transparent:et===J.JJ.Blend,customDepthTest:J.Gv.Lequal,textureAlphaMode:et,textureAlphaCutoff:Se.alphaCutoff,diffuse:[Mt,Ft,kt],ambient:[Mt,Ft,kt],opacity:Se.opacity,doubleSided:Se.doubleSided,doubleSidedType:"winding-order",cullFace:Se.doubleSided?J.Vr.None:J.Vr.Back,hasVertexColors:!!Ie.attributes.color,hasVertexTangents:!!Ie.attributes.tangent,normals:$e?"default":"screenDerivative",castShadows:!0,receiveSSAO:!0,textureId:(0,w.pC)(ar)?ar.id:void 0,colorMixMode:Se.colorMixMode,normalTextureId:(0,w.pC)(Se.textureNormal)&&He?Oe.get(Se.textureNormal).id:void 0,textureAlphaPremultiplied:(0,w.pC)(ar)&&!!ar.params.preMultiplyAlpha,occlusionTextureId:(0,w.pC)(Se.textureOcclusion)&&He?Oe.get(Se.textureOcclusion).id:void 0,emissiveTextureId:(0,w.pC)(Se.textureEmissive)&&He?Oe.get(Se.textureEmissive).id:void 0,metallicRoughnessTextureId:(0,w.pC)(Se.textureMetallicRoughness)&&He?Oe.get(Se.textureMetallicRoughness).id:void 0,emissiveFactor:[wt,zt,Zt],mrrFactors:[Se.metallicFactor,Se.roughnessFactor,je.mrrFactors[2]],isSchematic:!1,...ze}))}const nt=function ge(Le,je){switch(je){case de.MX.TRIANGLES:return(0,Z.nh)(Le);case de.MX.TRIANGLE_STRIP:return(0,Z.DA)(Le);case de.MX.TRIANGLE_FAN:return(0,Z.jX)(Le)}}(Ie.indices||Ie.attributes.position.count,Ie.primitiveType),it=Ie.attributes.position.count,Xe=(0,oe.gS)(re.ct,it);(0,ue.t)(Xe,Ie.attributes.position,Ie.transform);const rt=[[le.T.POSITION,{data:Xe.typedBuffer,size:Xe.elementCount,exclusive:!0}]],Ze=[[le.T.POSITION,nt]];if((0,w.pC)(Ie.attributes.normal)){const Mt=(0,oe.gS)(re.ct,it);(0,B.a)(we,Ie.transform),(0,ue.a)(Mt,Ie.attributes.normal,we),rt.push([le.T.NORMAL,{data:Mt.typedBuffer,size:Mt.elementCount,exclusive:!0}]),Ze.push([le.T.NORMAL,nt])}if((0,w.pC)(Ie.attributes.tangent)){const Mt=(0,oe.gS)(re.ek,it);(0,B.a)(we,Ie.transform),(0,ae.t)(Mt,Ie.attributes.tangent,we),rt.push([le.T.TANGENT,{data:Mt.typedBuffer,size:Mt.elementCount,exclusive:!0}]),Ze.push([le.T.TANGENT,nt])}if((0,w.pC)(Ie.attributes.texCoord0)){const Mt=(0,oe.gS)(re.Eu,it);(0,me.n)(Mt,Ie.attributes.texCoord0),rt.push([le.T.UV0,{data:Mt.typedBuffer,size:Mt.elementCount,exclusive:!0}]),Ze.push([le.T.UV0,nt])}if((0,w.pC)(Ie.attributes.color)){const Mt=(0,oe.gS)(re.mc,it);if(4===Ie.attributes.color.elementCount)Ie.attributes.color instanceof re.ek?(0,ae.s)(Mt,Ie.attributes.color,255):Ie.attributes.color instanceof re.mc?(0,_e.c)(Mt,Ie.attributes.color):Ie.attributes.color instanceof re.v6&&(0,ae.s)(Mt,Ie.attributes.color,1/256);else{(0,_e.f)(Mt,255,255,255,255);const Ft=new re.ne(Mt.buffer,0,4);Ie.attributes.color instanceof re.ct?(0,ue.s)(Ft,Ie.attributes.color,255):Ie.attributes.color instanceof re.ne?(0,he.c)(Ft,Ie.attributes.color):Ie.attributes.color instanceof re.mw&&(0,ue.s)(Ft,Ie.attributes.color,1/256)}rt.push([le.T.COLOR,{data:Mt.typedBuffer,size:Mt.elementCount,exclusive:!0}]),Ze.push([le.T.COLOR,nt])}const lt=new se.Z(rt,Ze);Ne.stageResources.geometries.push(lt),Ne.stageResources.materials.push(Pe.get(We)),He&&((0,w.pC)(Se.textureColor)&&Ne.stageResources.textures.push(Oe.get(Se.textureColor)),(0,w.pC)(Se.textureNormal)&&Ne.stageResources.textures.push(Oe.get(Se.textureNormal)),(0,w.pC)(Se.textureOcclusion)&&Ne.stageResources.textures.push(Oe.get(Se.textureOcclusion)),(0,w.pC)(Se.textureEmissive)&&Ne.stageResources.textures.push(Oe.get(Se.textureEmissive)),(0,w.pC)(Se.textureMetallicRoughness)&&Ne.stageResources.textures.push(Oe.get(Se.textureMetallicRoughness))),Ne.numberOfVertices+=it;const st=lt.boundingInfo;(0,w.pC)(st)&&((0,$.pp)(Ne.boundingBox,st.getBBMin()),(0,$.pp)(Ne.boundingBox,st.getBBMax()))})}),Be}function Te(Le,je){for(let ze=0;ze<Le.model.lods.length;++ze){const Ee=Le.model.lods[ze];Le.customMeta.esriTreeRendering=!0;for(const Ae of Ee.parts){const we=Ae.attributes.normal;if((0,w.Wi)(we))return;const Be=Ae.attributes.position,Pe=Be.count,Oe=(0,G.c)(),Ke=(0,G.c)(),Ve=(0,G.c)(),Ne=(0,oe.gS)(re.mc,Pe),Ie=(0,oe.gS)(re.ct,Pe),We=(0,W.a)((0,Y.c)(),Ae.transform);for(let Se=0;Se<Pe;Se++){Be.getVec(Se,Ke),we.getVec(Se,Oe),(0,H.m)(Ke,Ke,Ae.transform),(0,H.b)(Ve,Ke,je.center),(0,H.G)(Ve,Ve,je.radius);const He=Ve[2],$e=(0,H.l)(Ve),et=Math.min(.45+.55*$e*$e,1);(0,H.G)(Ve,Ve,je.radius),(0,H.m)(Ve,Ve,We),(0,H.n)(Ve,Ve),ze+1!==Le.model.lods.length&&Le.model.lods.length>1&&(0,H.h)(Ve,Ve,Oe,He>-1?.2:Math.min(-4*He-3.8,1)),Ie.setVec(Se,Ve),Ne.set(Se,0,255*et),Ne.set(Se,1,255*et),Ne.set(Se,2,255*et),Ne.set(Se,3,255)}Ae.attributes.normal=Ie,Ae.attributes.color=Ne}}}},75688:(qe,xe,T)=>{"use strict";T.d(xe,{$A:()=>w,EP:()=>Y,QW:()=>H,j1:()=>G,mq:()=>U,yY:()=>B,zi:()=>W});var D=T(99770),x=T(6169);const w={left:0,center:.5,right:1},B={"bottom-left":(0,D.f)(0,0),bottom:(0,D.f)(.5,0),"bottom-right":(0,D.f)(1,0),left:(0,D.f)(0,.5),center:(0,D.f)(.5,.5),right:(0,D.f)(1,.5),"top-left":(0,D.f)(0,1),top:(0,D.f)(.5,1),"top-right":(0,D.f)(1,1)};function U($){switch($){case"left":return x.vU.Left;case"right":return x.vU.Right;default:return x.vU.Center}}function W($){switch($){case"bottom-left":case"left":case"top-left":return"left";case"bottom":case"center":case"top":return"center";case"bottom-right":case"right":case"top-right":return"right"}}function Y($){switch($){case"bottom-left":case"bottom":case"bottom-right":return"bottom";case"left":case"center":case"right":return"center";case"top-left":case"top":case"top-right":return"top"}}function H($,re){switch(re){case"bottom":return"left"===$?"bottom-left":"right"===$?"bottom-right":"bottom";case"center":return $;case"top":return"left"===$?"top-left":"right"===$?"top-right":"top"}}function G($){return"middle"===$?"center":$}},92690:(qe,xe,T)=>{"use strict";T.d(xe,{S_:()=>oe,dO:()=>ae,km:()=>ue});var D=T(62208),x=T(43703),w=T(28093),B=T(55915),U=T(5548),W=T(25748),Y=T(38114),H=T(81468),G=T(67225),$=T(96867);const re=(0,w.c)();function ue(X,Z,Q,J,se,ee,le,ne){const ce=Q?Q.length:0,de=X.clippingExtent;if((0,B.KC)(Z,re,X.elevationProvider.spatialReference),(0,D.pC)(de)&&!(0,U.BD)(de,re))return null;(0,B.KC)(Z,re,X.renderCoordsHelper.spatialReference);const me=X.localOriginFactory.getOrigin(re),_e=new $.T({castShadow:!1,metadata:{layerUid:ee,graphicUid:le,usesVerticalDistanceToGround:!0}});for(let he=0;he<ce;he++)_e.addGeometry(Q[he],J[he],x.I,me,ne);return{object:_e,sampledElevation:(0,H.bD)(_e,Z,X.elevationProvider,X.renderCoordsHelper,se)}}function ae(X,Z,Q){const J=X.elevationContext,se=Q.spatialReference;(0,B.KC)(Z,re,se),J.centerPointInElevationSR=(0,Y.Tx)(re[0],re[1],Z.hasZ?re[2]:0,se)}function oe(X){switch(X.type){case"point":return X;case"polygon":case"extent":return(0,G.zE)(X);case"polyline":{const Z=X.paths[0];if(!Z||0===Z.length)return null;const Q=(0,W.n8)(Z,(0,W.ok)(Z)/2);return(0,Y.Tx)(Q[0],Q[1],Q[2],X.spatialReference)}case"mesh":return X.origin}return null}},56244:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>w,t:()=>B}),T(8314);var x=T(57521);function w(W){switch(W){case"sphere":case"cube":case"diamond":case"cylinder":case"cone":case"inverted-cone":case"tetrahedron":return!0}return!1}function B(W,Y){const H=(G,$,re=!1)=>({levels:G.map(ue=>{const ae=$(ue.tesselation);return re&&x.Z.cgToGIS(ae),{components:[{geometry:ae,material:Y}],faceCount:ae.indexCount/3,minScreenSpaceRadius:ue.minScreenSpaceRadius}})});switch(W){case"sphere":return H([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],G=>x.Z.createPolySphereGeometry(.5,G,!0));case"cube":return H([{tesselation:0,minScreenSpaceRadius:0}],()=>x.Z.createBoxGeometry(1));case"cone":return H(U,G=>x.Z.createConeGeometry(1,.5,G,!1),!0);case"inverted-cone":return H(U,G=>x.Z.createConeGeometry(1,.5,G,!0),!0);case"cylinder":return H(U,G=>x.Z.createCylinderGeometry(1,.5,G,[0,0,1],[0,0,.5]));case"tetrahedron":return H([{tesselation:0,minScreenSpaceRadius:0}],()=>x.Z.createTetrahedronGeometry(1),!0);case"diamond":return H([{tesselation:0,minScreenSpaceRadius:0}],()=>x.Z.createDiamondGeometry(1),!0);default:return}}const U=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}]},10596:(qe,xe,T)=>{"use strict";T.d(xe,{Ns:()=>W,Ph:()=>U,cU:()=>Y}),T(8314);var x=T(36161),w=T(81695),B=T(67969);const U=128,W=.5;function Y(ee,le=U,ne=le*W,ce=0){const de=function H(ee,le=U,ne=le*W,ce=0){switch(ee){case"circle":default:return function G(ee,le){const ne=ee/2-.5;return se(ee,Q(ne,ne,le/2))}(le,ne);case"square":return function $(ee,le){return X(ee,le,!1)}(le,ne);case"cross":return function ue(ee,le,ne=0){return Z(ee,le,!1,ne)}(le,ne,ce);case"x":return function ae(ee,le,ne=0){return Z(ee,le,!0,ne)}(le,ne,ce);case"kite":return function re(ee,le){return X(ee,le,!0)}(le,ne);case"triangle":return function oe(ee,le){return se(ee,J(ee/2,le,le/2))}(le,ne);case"arrow":return function ie(ee,le){const ne=le,ce=le/2,de=ee/2,me=.8*ne,_e=Q(de,(ee-le)/2-me,Math.sqrt(me*me+ce*ce)),he=J(de,ne,ce);return se(ee,(ye,fe)=>Math.max(he(ye,fe),-_e(ye,fe)))}(le,ne)}}(ee,le,ne,ce);return new w.x(de,{mipmap:!1,wrap:{s:B.e8.CLAMP_TO_EDGE,t:B.e8.CLAMP_TO_EDGE},width:le,height:le,components:4,noUnpackFlip:!0})}function X(ee,le,ne){return ne&&(le/=Math.SQRT2),se(ee,(ce,de)=>{let me=ce-.5*ee+.25,_e=.5*ee-de-.75;if(ne){const he=(me+_e)/Math.SQRT2;_e=(_e-me)/Math.SQRT2,me=he}return Math.max(Math.abs(me),Math.abs(_e))-.5*le})}function Z(ee,le,ne,ce=0){le-=ce,ne&&(le*=Math.SQRT2);const de=.5*le;return se(ee,(me,_e)=>{let he,ye=me-.5*ee,fe=.5*ee-_e-1;if(ne){const De=(ye+fe)/Math.SQRT2;fe=(fe-ye)/Math.SQRT2,ye=De}return ye=Math.abs(ye),fe=Math.abs(fe),he=ye>fe?ye>de?Math.sqrt((ye-de)*(ye-de)+fe*fe):fe:fe>de?Math.sqrt(ye*ye+(fe-de)*(fe-de)):ye,he-=ce/2,he})}function Q(ee,le,ne){return(ce,de)=>{const me=ce-ee,_e=de-le;return Math.sqrt(me*me+_e*_e)-ne}}function J(ee,le,ne){const ce=Math.sqrt(le*le+ne*ne);return(de,me)=>{const _e=Math.abs(de-ee)-ne,he=me-ee+le/2+.75;return Math.max((le*_e+ne*he)/ce,-he)}}function se(ee,le){const ne=new Uint8Array(4*ee*ee);for(let ce=0;ce<ee;ce++)for(let de=0;de<ee;de++){const me=de+ee*ce;let _e=le(de,ce);_e=_e/ee+.5,(0,x.I)(_e,ne,4*me)}return ne}},97161:(qe,xe,T)=>{"use strict";T.d(xe,{BN:()=>oe,IQ:()=>$,V9:()=>G,WU:()=>H,bz:()=>re,u:()=>ae});var D=T(94573),x=T(62208),w=T(48521),B=T(56244),U=T(2180),W=T(16396),Y=T(47526);const H={primitivesPerFeature:0,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!0,memory:{bytesPerFeature:0,bytesPerCoordinate:0,bytesPerFeatureLabel:0,draped:{bytesPerFeature:0,bytesPerFeatureLabel:0,bytesPerCoordinate:0}}};function G(Z){return"web-style"===Z.type?H:$(Z.symbolLayers.toArray().map(Q=>ae(Z,Q)))}function $(Z){let Q=0,J=0,se=0,ee=!1,le=0;const ne={bytesPerFeature:0,bytesPerFeatureLabel:0,bytesPerCoordinate:0,draped:{bytesPerFeature:0,bytesPerFeatureLabel:0,bytesPerCoordinate:0}};for(const ce of Z)(0,x.Wi)(ce)||(Q+=ce.primitivesPerFeature,J+=ce.primitivesPerCoordinate,se+=ce.drawCallsPerFeature,ne.bytesPerFeature+=ce.memory.bytesPerFeature,ne.bytesPerFeatureLabel+=ce.memory.bytesPerFeatureLabel,ne.bytesPerCoordinate+=ce.memory.bytesPerCoordinate,ne.draped.bytesPerFeature+=ce.memory.bytesPerFeature,ne.draped.bytesPerFeatureLabel+=ce.memory.bytesPerFeatureLabel,ne.draped.bytesPerCoordinate+=ce.memory.bytesPerCoordinate,ee=ee||ce.estimated,++le);return{primitivesPerFeature:Q,primitivesPerCoordinate:J,drawCallsPerFeature:se,estimated:ee,memory:ne,numComplexities:le}}function re(Z){const Q=$(Z);return Q.numComplexities>0&&(Q.primitivesPerFeature/=Q.numComplexities,Q.primitivesPerCoordinate/=Q.numComplexities,Q.drawCallsPerFeature/=Q.numComplexities,Q.memory.bytesPerFeature/=Q.numComplexities,Q.memory.bytesPerFeatureLabel/=Q.numComplexities,Q.memory.bytesPerCoordinate/=Q.numComplexities,Q.memory.draped.bytesPerFeature/=Q.numComplexities,Q.memory.draped.bytesPerFeatureLabel/=Q.numComplexities,Q.memory.draped.bytesPerCoordinate/=Q.numComplexities),Q}const ue={};function ae(Z,Q){const J=oe(Z,Q),se=(0,U.eU)(Q)?2:0;switch(Q.type){case"extrude":return{primitivesPerFeature:-4,primitivesPerCoordinate:4,drawCallsPerFeature:se,estimated:!1,memory:J};case"fill":return"mesh-3d"===Z.type?{primitivesPerFeature:0,primitivesPerCoordinate:0,drawCallsPerFeature:se,estimated:!1,memory:J}:(0,x.pC)(Q.outline)&&Q.outline.size>0?{primitivesPerFeature:-4,primitivesPerCoordinate:3,drawCallsPerFeature:0,estimated:!1,memory:J}:{primitivesPerFeature:-2,primitivesPerCoordinate:1,drawCallsPerFeature:0,estimated:!1,memory:J};case"water":return{primitivesPerFeature:-2,primitivesPerCoordinate:1,drawCallsPerFeature:0,estimated:!1,memory:J};case"line":return{primitivesPerFeature:-2,primitivesPerCoordinate:2,drawCallsPerFeature:0,estimated:!1,memory:J};case"object":return Q.resource&&Q.resource.href?{primitivesPerFeature:16,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!0,memory:J}:{...ie(Q.resource&&Q.resource.primitive||w.S),memory:J};case"path":{let ce=0,de=0;switch(Q.profile){case"circle":ce=10;break;case"quad":ce=4;break;default:return void(0,D.Bg)(Q.profile)}switch(Q.join){case"round":de=3;break;case"miter":case"bevel":de=1;break;default:return void(0,D.Bg)(Q.join)}const me=2*ce,_e=ce*de*2;let he=-2*_e-me;switch(Q.cap){case"none":break;case"butt":case"square":he+=2*(ce-1);break;case"round":he+=2*(2*ce*2+ce);break;default:return}return{primitivesPerFeature:he,primitivesPerCoordinate:_e+me,drawCallsPerFeature:0,estimated:!1,memory:J}}case"text":case"icon":return{primitivesPerFeature:2,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!1,memory:J};default:return}}function oe(Z,Q){const J="point-3d"===Z.type;switch(Q.type){case"extrude":return Q.edges&&Q.edges.size>0?X.EXTRUDE_EDGES:X.EXTRUDE;case"fill":return(0,x.pC)(Q.outline)&&Q.outline.size>0?X.FILL_OUTLINE:X.FILL;case"water":return X.FILL;case"line":return"round"===Q.join?X.LINE_ROUND:X.LINE_MITER;case"path":switch(Q.join){case"round":switch(Q.profile){case"circle":return X.PATH_ROUND_CIRCLE;case"quad":return X.PATH_ROUND_QUAD;default:return void(0,D.Bg)(Q.profile)}case"miter":case"bevel":switch(Q.profile){case"circle":return X.PATH_MITER_CIRCLE;case"quad":return X.PATH_MITER_QUAD;default:return void(0,D.Bg)(Q.profile)}default:return void(0,D.Bg)(Q.join)}case"object":return J?X.OBJECT_POINT:X.OBJECT_POLYGON;case"icon":case"text":return J?X.ICON_POINT:X.ICON_POLYGON;default:return}}function ie(Z){let Q=ue[Z];if(Q)return Q;const J=(0,B.t)(Z,null);return Q={primitivesPerFeature:(0,Y.VV)(J.levels[0]).reduce((se,ee)=>se+ee.indices.get(W.T.POSITION).length/3,0),primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!1},ue[Z]=Q,Q}const X={ICON_POINT:{bytesPerFeature:7127.413186968842,bytesPerFeatureLabel:4826.302896296296,bytesPerCoordinate:0,draped:{bytesPerFeature:3929.4396628895197,bytesPerFeatureLabel:3550.1332222222227,bytesPerCoordinate:0}},ICON_POLYGON:{bytesPerFeature:9329.452613976147,bytesPerFeatureLabel:3675.3372604938268,bytesPerCoordinate:60.177252982212096,draped:{bytesPerFeature:6190.247450139383,bytesPerFeatureLabel:3744.074358024691,bytesPerCoordinate:59.488211068026104}},OBJECT_POINT:{bytesPerFeature:2350.5884192634558,bytesPerFeatureLabel:4446.651003703703,bytesPerCoordinate:0,draped:{bytesPerFeature:2350.5884192634558,bytesPerFeatureLabel:4446.651003703703,bytesPerCoordinate:0}},OBJECT_POLYGON:{bytesPerFeature:4583.807620302299,bytesPerFeatureLabel:3665.342685185186,bytesPerCoordinate:60.11621818101506,draped:{bytesPerFeature:4583.807620302299,bytesPerFeatureLabel:3665.342685185186,bytesPerCoordinate:60.11621818101506}},LINE_MITER:{bytesPerFeature:7321.028181375921,bytesPerFeatureLabel:4048.0226716049388,bytesPerCoordinate:186.55621386363578,draped:{bytesPerFeature:4246.856619435009,bytesPerFeatureLabel:3852.3737679012347,bytesPerCoordinate:163.47884002621583}},LINE_ROUND:{bytesPerFeature:7482.205842738954,bytesPerFeatureLabel:4045.886987654321,bytesPerCoordinate:191.5452524171851,draped:{bytesPerFeature:4473.481387957992,bytesPerFeatureLabel:3842.1112395061728,bytesPerCoordinate:167.27703460226945}},PATH_MITER_CIRCLE:{bytesPerFeature:9010.489006415351,bytesPerFeatureLabel:4230.9109,bytesPerCoordinate:4618.2594178027275,draped:{bytesPerFeature:9010.489006415351,bytesPerFeatureLabel:4230.9109,bytesPerCoordinate:4618.2594178027275}},PATH_ROUND_CIRCLE:{bytesPerFeature:4104.727250200398,bytesPerFeatureLabel:4251.8525,bytesPerCoordinate:8019.043777064957,draped:{bytesPerFeature:4104.727250200398,bytesPerFeatureLabel:4251.8525,bytesPerCoordinate:8019.043777064957}},PATH_MITER_QUAD:{bytesPerFeature:9416.372942261387,bytesPerFeatureLabel:4241.2757,bytesPerCoordinate:3176.7222742582203,draped:{bytesPerFeature:9416.372942261387,bytesPerFeatureLabel:4241.2757,bytesPerCoordinate:3176.7222742582203}},PATH_ROUND_QUAD:{bytesPerFeature:6614.431545308682,bytesPerFeatureLabel:4206.7461,bytesPerCoordinate:5141.817789093826,draped:{bytesPerFeature:6614.431545308682,bytesPerFeatureLabel:4206.7461,bytesPerCoordinate:5141.817789093826}},FILL:{bytesPerFeature:9478.244183633637,bytesPerFeatureLabel:3713.816824691358,bytesPerCoordinate:95.9343604185578,draped:{bytesPerFeature:6287.911108168086,bytesPerFeatureLabel:3790.785032098766,bytesPerCoordinate:83.08783220478168}},FILL_OUTLINE:{bytesPerFeature:13085.871870349445,bytesPerFeatureLabel:3392.613241975309,bytesPerCoordinate:118.63968023169875,draped:{bytesPerFeature:8437.199992480122,bytesPerFeatureLabel:3973.5431172839503,bytesPerCoordinate:106.33556817014312}},EXTRUDE:{bytesPerFeature:19459.53727140414,bytesPerFeatureLabel:3743.7045209876546,bytesPerCoordinate:372.6819978900477,draped:{bytesPerFeature:19459.53727140414,bytesPerFeatureLabel:3743.7045209876546,bytesPerCoordinate:372.6819978900477}},EXTRUDE_EDGES:{bytesPerFeature:22266.888534913724,bytesPerFeatureLabel:3064.3193358024696,bytesPerCoordinate:374.3725221561312,draped:{bytesPerFeature:22266.888534913724,bytesPerFeatureLabel:3064.3193358024696,bytesPerCoordinate:374.3725221561312}}}},98973:(qe,xe,T)=>{"use strict";T.d(xe,{p2:()=>me,zD:()=>Q});var D=T(15861),x=T(84792),w=T(59213),B=T(26584),U=T(63290),W=T(62208),Y=T(10699),H=T(10349),G=T(28093),$=T(5548),re=T(70026),ue=T(42743),ae=T(52107),oe=T(81695),ie=T(28523),X=T(67969);const Z=U.Z.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");function Q(Ce,ge){return J.apply(this,arguments)}function J(){return(J=(0,D.Z)(function*(Ce,ge){const Te=yield se(Ce,ge);return{resource:Te,textures:yield he(Te.textureDefinitions,ge)}})).apply(this,arguments)}function se(Ce,ge){return ee.apply(this,arguments)}function ee(){return(ee=(0,D.Z)(function*(Ce,ge){const Te=(0,W.pC)(ge)&&ge.streamDataRequester;if(Te)return le(Ce,Te,ge);const Le=yield(0,w.q6)((0,x.default)(Ce,(0,W.Wg)(ge)));if(!0===Le.ok)return Le.value.data;(0,Y.r9)(Le.error),ce(Le.error)})).apply(this,arguments)}function le(Ce,ge,Te){return ne.apply(this,arguments)}function ne(){return(ne=(0,D.Z)(function*(Ce,ge,Te){const Le=yield(0,w.q6)(ge.request(Ce,"json",Te));if(!0===Le.ok)return Le.value;(0,Y.r9)(Le.error),ce(Le.error.details.url)})).apply(this,arguments)}function ce(Ce){throw new B.Z("",`Request for object resource failed: ${Ce}`)}function de(Ce){const ge=Ce.params,Te=ge.topology;let Le=!0;switch(ge.vertexAttributes||(Z.warn("Geometry must specify vertex attributes"),Le=!1),ge.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const ze=ge.faces;if(ze){if(ge.vertexAttributes)for(const Ee in ge.vertexAttributes){const Ae=ze[Ee];Ae&&Ae.values?(null!=Ae.valueType&&"UInt32"!==Ae.valueType&&(Z.warn(`Unsupported indexed geometry indices type '${Ae.valueType}', only UInt32 is currently supported`),Le=!1),null!=Ae.valuesPerElement&&1!==Ae.valuesPerElement&&(Z.warn(`Unsupported indexed geometry values per element '${Ae.valuesPerElement}', only 1 is currently supported`),Le=!1)):(Z.warn(`Indexed geometry does not specify face indices for '${Ee}' attribute`),Le=!1)}}else Z.warn("Indexed geometries must specify faces"),Le=!1;break}default:Z.warn(`Unsupported topology '${Te}'`),Le=!1}Ce.params.material||(Z.warn("Geometry requires material"),Le=!1);const je=Ce.params.vertexAttributes;for(const ze in je)je[ze].values||(Z.warn("Geometries with externally defined attributes are not yet supported"),Le=!1);return Le}function me(Ce,ge){const Te=[],Le=[],je=[],ze=[],Ee=Ce.resource,Ae=H.G.parse(Ee.version||"1.0","wosr");ve.validate(Ae);const we=Ee.model.name,Be=Ee.model.geometries,Pe=Ee.materialDefinitions,Oe=Ce.textures;let Ke=0;const Ve=new Map;for(let Ne=0;Ne<Be.length;Ne++){const Ie=Be[Ne];if(!de(Ie))continue;const We=De(Ie),Se=Ie.params.vertexAttributes,He=[];for(const Ze in Se){const lt=Se[Ze];He.push([Ze,{data:lt.values,size:lt.valuesPerElement,exclusive:!0}])}const $e=[];if("PerAttributeArray"!==Ie.params.topology){const Ze=Ie.params.faces;for(const lt in Ze)$e.push([lt,new Uint32Array(Ze[lt].values)])}const et=Oe&&Oe[We.texture];if(et&&!Ve.has(We.texture)){const{image:Ze,params:lt}=et,st=new oe.x(Ze,lt);ze.push(st),Ve.set(We.texture,st)}const nt=Ve.get(We.texture),it=nt?nt.id:void 0;let Xe=je[We.material]?je[We.material][We.texture]:null;if(!Xe){const Ze=Pe[We.material.substring(We.material.lastIndexOf("/")+1)].params;1===Ze.transparency&&(Ze.transparency=0);const lt=et&&et.alphaChannelUsage,st=Ze.transparency>0||"transparency"===lt||"maskAndTransparency"===lt,Mt=et?fe(et.alphaChannelUsage):void 0,Ft={ambient:(0,G.d)(Ze.diffuse),diffuse:(0,G.d)(Ze.diffuse),opacity:1-(Ze.transparency||0),transparent:st,textureAlphaMode:Mt,textureAlphaCutoff:.33,textureId:it,initTextureTransparent:!0,doubleSided:!0,cullFace:ue.Vr.None,colorMixMode:Ze.externalColorMixMode||"tint",textureAlphaPremultiplied:!!et&&!!et.params.preMultiplyAlpha};(0,W.pC)(ge)&&ge.materialParamsMixin&&Object.assign(Ft,ge.materialParamsMixin),Xe=new ie.Gp(Ft),je[We.material]||(je[We.material]={}),je[We.material][We.texture]=Xe}Le.push(Xe);const rt=new ae.Z(He,$e);Ke+=$e.position?$e.position.length:0,Te.push(rt)}return{name:we,stageResources:{textures:ze,materials:Le,geometries:Te},pivotOffset:Ee.model.pivotOffset,boundingBox:_e(Te),numberOfVertices:Ke,lodThreshold:null}}function _e(Ce){const ge=(0,$.cS)();return Ce.forEach(Te=>{const Le=Te.boundingInfo;(0,W.pC)(Le)&&((0,$.pp)(ge,Le.getBBMin()),(0,$.pp)(ge,Le.getBBMax()))}),ge}function he(Ce,ge){return ye.apply(this,arguments)}function ye(){return(ye=(0,D.Z)(function*(Ce,ge){const Te=[];for(const ze in Ce){const Ee=Ce[ze],Ae=Ee.images[0].data;if(!Ae){Z.warn("Externally referenced texture data is not yet supported");continue}const we=Ee.encoding+";base64,"+Ae,Be="/textureDefinitions/"+ze,Pe="rgba"===Ee.channels?Ee.alphaChannelUsage||"transparency":"none",Oe={noUnpackFlip:!0,wrap:{s:X.e8.REPEAT,t:X.e8.REPEAT},preMultiplyAlpha:fe(Pe)!==ue.JJ.Opaque},Ke=(0,W.pC)(ge)&&ge.disableTextures?Promise.resolve(null):(0,re.t)(we,ge);Te.push(Ke.then(Ve=>({refId:Be,image:Ve,params:Oe,alphaChannelUsage:Pe})))}const Le=yield Promise.all(Te),je={};for(const ze of Le)je[ze.refId]=ze;return je})).apply(this,arguments)}function fe(Ce){switch(Ce){case"mask":return ue.JJ.Mask;case"maskAndTransparency":return ue.JJ.MaskBlend;case"none":return ue.JJ.Opaque;default:return ue.JJ.Blend}}function De(Ce){const ge=Ce.params;return{id:1,material:ge.material,texture:ge.texture,region:ge.texture}}const ve=new H.G(1,2,"wosr")},92852:(qe,xe,T)=>{"use strict";T.d(xe,{Es:()=>X,I_:()=>$,W7:()=>ie,qM:()=>se});var D=T(26584),x=T(58817),w=T(63290),B=T(61566),U=T(16396);const W=w.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function Y(de,me,_e){let he="",ye=0;for(;ye<_e;){const fe=de[me+ye];if(fe<128)he+=String.fromCharCode(fe),ye++;else if(fe>=192&&fe<224){if(ye+1>=_e)throw new D.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");he+=String.fromCharCode((31&fe)<<6|63&de[me+ye+1]),ye+=2}else if(fe>=224&&fe<240){if(ye+2>=_e)throw new D.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");he+=String.fromCharCode((15&fe)<<12|(63&de[me+ye+1])<<6|63&de[me+ye+2]),ye+=3}else{if(!(fe>=240&&fe<248))throw new D.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(ye+3>=_e)throw new D.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const De=(7&fe)<<18|(63&de[me+ye+1])<<12|(63&de[me+ye+2])<<6|63&de[me+ye+3];he+=De>=65536?String.fromCharCode(55296+(De-65536>>10),56320+(1023&De)):String.fromCharCode(De),ye+=4}}}return he}function H(de,me){const _e={byteOffset:0,byteCount:0,fields:Object.create(null)};let he=0;for(let ye=0;ye<me.length;ye++){const fe=me[ye],De=fe.valueType||fe.type;_e.fields[fe.property]=(0,le[De])(de,he),he+=ee[De].BYTES_PER_ELEMENT}return _e.byteCount=he,_e}function $(de,me){return new ee[me.valueType](de,me.byteOffset,me.count*me.valuesPerElement)}function ae(de,me,_e){if(me!==de&&W.error(`Invalid ${_e} buffer size\n expected: ${de}, actual: ${me})`),me<de)throw new D.Z("buffer-too-small","Binary buffer is too small",{expectedSize:de,actualSize:me})}function ie(de,me){const _e=H(de,me&&me.header);let he=_e.byteCount;const ye={isDraco:!1,header:_e,byteOffset:_e.byteCount,byteCount:0,vertexAttributes:{}},fe=_e.fields,De=null!=fe.vertexCount?fe.vertexCount:fe.count;for(const ge of me.ordering){if(!me.vertexAttributes[ge])continue;const Te={...me.vertexAttributes[ge],byteOffset:he,count:De};ye.vertexAttributes[J[ge]?J[ge]:"_"+ge]=Te,he+=ce(Te.valueType)*Te.valuesPerElement*De}const ve=fe.faceCount;if(me.faces&&ve){ye.faces={};for(const ge of me.ordering){if(!me.faces[ge])continue;const Te={...me.faces[ge],byteOffset:he,count:ve};ye.faces[ge]=Te,he+=ce(Te.valueType)*Te.valuesPerElement*ve}}const Ce=fe.featureCount;if(me.featureAttributes&&me.featureAttributeOrder&&Ce){ye.featureAttributes={};for(const ge of me.featureAttributeOrder){if(!me.featureAttributes[ge])continue;const Te={...me.featureAttributes[ge],byteOffset:he,count:Ce};ye.featureAttributes[ge]=Te,he+=("UInt64"===Te.valueType?8:ce(Te.valueType))*Te.valuesPerElement*Ce}}return ae(he,de.byteLength,"geometry"),ye.byteCount=he-ye.byteOffset,ye}function X(de,me){return de&&de.compressedAttributes&&"draco"===de.compressedAttributes.encoding?function Q(de){const me={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const _e of de)switch(_e){case"position":break;case"normal":me.normal=!0;break;case"uv0":me.uv0=!0;break;case"color":me.color=!0;break;case"uv-region":me.uvRegion=!0;break;case"feature-index":me.featureIndex=!0}return me}(de.compressedAttributes.attributes):de?function oe(de){return{isDraco:!1,isLegacy:!1,color:null!=de.color,normal:null!=de.normal,uv0:null!=de.uv0,uvRegion:null!=de.uvRegion,featureIndex:null!=de.faceRange&&null!=de.featureId}}(de):function Z(de){const me={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const _e of de.ordering)if(de.vertexAttributes[_e])switch(_e){case"position":break;case"normal":me.normal=!0;break;case"color":me.color=!0;break;case"uv0":me.uv0=!0;break;case"region":me.uvRegion=!0}return de.featureAttributes&&de.featureAttributeOrder&&(me.featureIndex=!0),me}(me)}const J={position:U.T.POSITION,normal:U.T.NORMAL,color:U.T.COLOR,uv0:U.T.UV0,region:U.T.UVREGION};function se(de,me,_e){if("lepcc-rgb"===de.encoding)return(0,B.IT)(me);if("lepcc-intensity"===de.encoding)return(0,B.ti)(me);if(null!=de.encoding&&""!==de.encoding)throw new D.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");de["attributeByteCounts "]&&!de.attributeByteCounts&&(W.warn("Warning: Trailing space in 'attributeByteCounts '."),de.attributeByteCounts=de["attributeByteCounts "]),"ObjectIds"===de.ordering[0]&&de.hasOwnProperty("objectIds")&&(W.warn("Warning: Case error in objectIds"),de.ordering[0]="objectIds");const he=function ue(de,me,_e){const he=null!=me.header?H(de,me.header):{byteOffset:0,byteCount:0,fields:{count:_e}},ye={header:he,byteOffset:he.byteCount,byteCount:0,entries:Object.create(null)};let fe=he.byteCount;for(let De=0;De<me.ordering.length;De++){const ve=me.ordering[De],Ce=(0,x.d9)(me[ve]);if(Ce.count=he.fields.count,"String"===Ce.valueType){if(Ce.byteOffset=fe,Ce.byteCount=he.fields[ve+"ByteCount"],"UTF-8"!==Ce.encoding)throw new D.Z("unsupported-encoding","Unsupported String encoding.",{encoding:Ce.encoding})}else{if(!ne(Ce.valueType))throw new D.Z("unsupported-value-type","Unsupported binary valueType",{valueType:Ce.valueType});{const ge=ce(Ce.valueType);fe+=fe%ge!=0?ge-fe%ge:0,Ce.byteOffset=fe,Ce.byteCount=ge*Ce.valuesPerElement*Ce.count}}fe+=Ce.byteCount,ye.entries[ve]=Ce}return ye.byteCount=fe-ye.byteOffset,ye}(me,de,_e);ae(he.byteOffset+he.byteCount,me.byteLength,"attribute");const ye=he.entries.attributeValues||he.entries.objectIds;if(ye){if("String"===ye.valueType){const fe=he.entries.attributeByteCounts,De=$(me,fe),ve=function re(de,me){return new Uint8Array(de,me.byteOffset,me.byteCount)}(me,ye);return function G(de,me,_e){const he=[];let ye,fe,De=0;for(fe=0;fe<de;fe+=1){if(ye=me[fe],ye>0){if(he.push(Y(_e,De,ye-1)),0!==_e[De+ye-1])throw new D.Z("string-array-error","Invalid string array: missing null termination.")}else he.push(null);De+=ye}return he}(fe.count,De,ve)}return $(me,ye)}throw new D.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const ee={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},le={Float32:(de,me)=>new DataView(de,0).getFloat32(me,!0),Float64:(de,me)=>new DataView(de,0).getFloat64(me,!0),UInt8:(de,me)=>new DataView(de,0).getUint8(me),Int8:(de,me)=>new DataView(de,0).getInt8(me),UInt16:(de,me)=>new DataView(de,0).getUint16(me,!0),Int16:(de,me)=>new DataView(de,0).getInt16(me,!0),UInt32:(de,me)=>new DataView(de,0).getUint32(me,!0),Int32:(de,me)=>new DataView(de,0).getInt32(me,!0)};function ne(de){return ee.hasOwnProperty(de)}function ce(de){return ne(de)?ee[de].BYTES_PER_ELEMENT:0}},5590:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>U,n:()=>H});var D=T(43703),x=T(28093),w=T(55915),B=T(12080);function U(G,$,re,ue){const ae=H(G,$,re),oe=(0,D.c)();return(0,w.Bm)(re,ae,oe,ue),oe}function H(G,$,re){const ue=(0,x.c)(),oe=2**(4*Math.ceil(Math.log(G[3])*Math.LOG2E/4)+1);if(re.isGeographic){const Z=oe/(0,B.Iu)(re).radius*180/Math.PI,Q=Math.round(G[1]/Z),J=Math.max(-90,Math.min(90,Q*Z)),se=Z/Math.cos((Math.abs(J)-Z/2)/180*Math.PI),ee=Math.round(G[0]/se)*se;ue[0]=ee,ue[1]=J}else{const Z=Math.round(G[0]/oe),Q=Math.round(G[1]/oe);ue[0]=Z*oe,ue[1]=Q*oe}const X=Math.round((G[2]+$)/oe);return ue[2]=X*oe,ue}},42964:(qe,xe,T)=>{"use strict";T.d(xe,{Cx:()=>Tt,HV:()=>os,Jf:()=>Xe,Jx:()=>$e,OJ:()=>Ze,T2:()=>nt,VL:()=>bt,WD:()=>Qt,X5:()=>ve,Yb:()=>Te,a7:()=>ar,bf:()=>Pe,c$:()=>Rr,cr:()=>Ae,e8:()=>Be,ei:()=>it,gI:()=>pt,gn:()=>Mt,hv:()=>ge,ix:()=>ss,jv:()=>Hr,ns:()=>je,p8:()=>st,pD:()=>Ee,tS:()=>Ce,tp:()=>et,uC:()=>Pr,vH:()=>sr,yS:()=>wt,zW:()=>kt});var D=T(15861),x=T(84792),w=T(85931),B=T(26584),U=T(8314),W=T(62208),Y=T(10699),H=T(55713),G=T(30217),$=T(550),re=T(28347),ue=T(43703),ae=T(48977),oe=T(56729),ie=T(78451),X=T(84161),Z=T(28093),Q=T(4794),J=T(55915),se=T(12080),ee=T(65234),le=T(65401),ne=T(37053),ce=T(84952),de=T(59617),me=T(92852),_e=T(5590),he=T(2180),ye=T(9044),fe=T(93394);function De(Cr){return Cr&&parseInt(Cr.substring(Cr.lastIndexOf("/")+1,Cr.length),10)}function ve(Cr){if((0,U.Z)("disable-feature:i3s-draco")||!Cr)return!1;for(const as of Cr)for(const ps of as.geometryBuffers)if("draco"===ps.compressedAttributes?.encoding)return!0;return!1}function Ce(Cr,as,ps,zs,As,Ys){const di=as!==zs;As.traverse(ps,Nr=>{let Ai=Nr.mbs;return di&&(Ai=ze,(0,J.st)(Nr.mbs,zs,Ai,as)),Ae(Cr,Ai)!==Ee.OUTSIDE&&(Ys(Nr),!0)})}function ge(Cr,as,ps){let zs=0,As=0;for(let Ys=0;Ys<as.length&&zs<Cr.length;Ys++)Cr[zs]===as[Ys]&&(ps(Ys)&&(Cr[As]=Cr[zs],As++),zs++);Cr.length=As}function Te(Cr,as,ps){let zs=0,As=0;for(;zs<ps.length;)(0,w.$A)(Cr,ps[zs])>=0===as&&(ps[As]=ps[zs],As++),zs++;ps.length=As}const Le=(0,le.Ue)();function je(Cr,as){if(0===as.rotationScale[1]&&0===as.rotationScale[2]&&0===as.rotationScale[3]&&0===as.rotationScale[5]&&0===as.rotationScale[6]&&0===as.rotationScale[7])return Le[0]=(Cr[0]-as.position[0])/as.rotationScale[0],Le[1]=(Cr[1]-as.position[1])/as.rotationScale[4],Le[2]=(Cr[2]-as.position[0])/as.rotationScale[0],Le[3]=(Cr[3]-as.position[1])/as.rotationScale[4],Le}const ze=(0,Q.c)();var Ee,Cr;function Ae(Cr,as){const ps=as[0],zs=as[1],As=as[3],Ys=Cr[0]-ps,di=ps-Cr[2],Nr=Cr[1]-zs,Ai=zs-Cr[3],ds=Math.max(Ys,di,0),Tn=Math.max(Nr,Ai,0),Ci=ds*ds+Tn*Tn;return Ci>As*As?Ee.OUTSIDE:Ci>0?Ee.INTERSECTS_CENTER_OUTSIDE:-Math.max(Ys,di,Nr,Ai)>As?Ee.INSIDE:Ee.INTERSECTS_CENTER_INSIDE}function Be(Cr,as,ps){const zs=[],As=ps&&ps.missingFields,Ys=ps&&ps.originalFields;for(const di of Cr){const Nr=di.toLowerCase();let Ai=!1;for(const ds of as)if(Nr===ds.name.toLowerCase()){zs.push(ds.name),Ai=!0,Ys&&Ys.push(di);break}!Ai&&As&&As.push(di)}return zs}function Pe(Cr,as,ps,zs,As){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,D.Z)(function*(Cr,as,ps,zs,As){if(0===as.length)return[];const Ys=Cr.attributeStorageInfo;if((0,W.pC)(Cr.associatedLayer))try{return yield Ve(Cr.associatedLayer,as,ps,zs)}catch(di){if(Cr.associatedLayer.loaded)throw di}if(Ys){const di=Ke(as,ps,As);if((0,W.Wi)(di))throw new B.Z("scenelayer:features-not-loaded","Tried to query attributes for unloaded features");const Nr=Cr.parsedUrl.path,Ai=yield Promise.all(di.map(ds=>We(Nr,Ys,ds.node,ds.indices,zs).then(Tn=>{for(let Ci=0;Ci<ds.graphics.length;Ci++){const gt=ds.graphics[Ci],Wr=Tn[Ci];if(gt.attributes)for(const xr in gt.attributes)xr in Wr||(Wr[xr]=gt.attributes[xr]);gt.attributes=Wr}return ds.graphics})));return(0,w.xH)(Ai)}throw new B.Z("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available")})).apply(this,arguments)}function Ke(Cr,as,ps){const zs=new Map,As=[],Ys=ps();for(const di of Cr){const Nr=di.attributes[as];for(let Ai=0;Ai<Ys.length;Ai++){const ds=Ys[Ai],Tn=ds.featureIds.indexOf(Nr);if(Tn>=0){let Ci=zs.get(ds.node);Ci||(Ci={node:ds.node,indices:[],graphics:[]},As.push(Ci),zs.set(ds.node,Ci)),Ci.indices.push(Tn),Ci.graphics.push(di);for(let gt=Ai;gt>0;gt--)Ys[gt]=Ys[gt-1];Ys[0]=ds;break}}}return As}function Ve(Cr,as,ps,zs){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,D.Z)(function*(Cr,as,ps,zs){as.sort((Ai,ds)=>Ai.attributes[ps]-ds.attributes[ps]);const As=as.map(Ai=>Ai.attributes[ps]),Ys=[],di=Be(zs,Cr.fields,{originalFields:Ys}),Nr=yield Ie(Cr,As,di);for(let Ai=0;Ai<as.length;Ai++){const ds=as[Ai],Tn=Nr[Ai],Ci={};if(ds.attributes)for(const gt in ds.attributes)Ci[gt]=ds.attributes[gt];for(let gt=0;gt<Ys.length;gt++)Ci[Ys[gt]]=Tn[di[gt]];ds.attributes=Ci}return as})).apply(this,arguments)}function Ie(Cr,as,ps){const zs=Cr.capabilities.query.maxRecordCount;if(null!=zs&&as.length>zs){const Ys=(0,w.vr)(as,zs);return Promise.all(Ys.map(di=>Ie(Cr,di,ps))).then(w.xH)}const As=new ce.Z({objectIds:as,outFields:ps,orderByFields:[Cr.objectIdField]});return Cr.queryFeatures(As).then(Ys=>{if(Ys&&Ys.features&&Ys.features.length===as.length)return Ys.features.map(di=>di.attributes);throw new B.Z("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer")})}function We(Cr,as,ps,zs,As){const Ys=[];for(const di of as)di&&As.includes(di.name)&&Ys.push({url:`${Cr}/nodes/${ps.resources.attributes}/attributes/${di.key}/0`,storageInfo:di});return(0,Y.as)(Ys.map(di=>(0,x.default)(di.url,{responseType:"array-buffer"}).then(Nr=>(0,me.qM)(di.storageInfo,Nr.data)))).then(di=>{const Nr=[];for(const Ai of zs){const ds={};for(let Tn=0;Tn<di.length;Tn++)null!=di[Tn].value&&(ds[Ys[Tn].storageInfo.name]=$e(di[Tn].value,Ai));Nr.push(ds)}return Nr})}function $e(Cr,as){if(!Cr)return null;const ps=Cr[as];return(0,H.z3)(Cr)?-32768===ps?null:ps:(0,H.Hx)(Cr)?-2147483648===ps?null:ps:ps!=ps?null:ps}function et(Cr){const as=Cr.store.indexCRS||Cr.store.geographicCRS,ps=void 0===as?Cr.store.indexWKT:void 0;if(ps){if(!Cr.spatialReference)throw new B.Z("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indeWKT in the scene layer store but no layer spatial reference",{});if(ps!==Cr.spatialReference.wkt)throw new B.Z("layerview:store-spatial-reference-wkt-index-incompatible","The indeWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const zs=as?new ee.Z(De(as)):Cr.spatialReference;return zs.equals(Cr.spatialReference)?Cr.spatialReference:zs}function nt(Cr){const as=Cr.store.vertexCRS||Cr.store.projectedCRS,ps=void 0===as?Cr.store.vertexWKT:void 0;if(ps){if(!Cr.spatialReference)throw new B.Z("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(ps!==Cr.spatialReference.wkt)throw new B.Z("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const zs=as?new ee.Z(De(as)):Cr.spatialReference;return zs.equals(Cr.spatialReference)?Cr.spatialReference:zs}function it(Cr,as){return(0,W.Wi)(as)?"@null":as===(0,se.rS)(as)?"@ECEF":Cr.equals(as)?"":null!=as.wkid?"@"+as.wkid:null}function Xe(Cr,as,ps){if(!(0,J.Up)(Cr,as))throw new B.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===ps&&!function rt(Cr,as){return Cr.equals(as)||Cr.isWGS84&&as.isWebMercator||Cr.isWebMercator&&as.isWGS84}(Cr,as))throw new B.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{})}function Ze(Cr,as,ps){const zs=et(Cr),As=nt(Cr);Xe(zs,as,ps),Xe(As,as,ps)}function st(Cr){if(null==Cr.store||null==Cr.store.defaultGeometrySchema||!function lt(Cr){return!(null!=Cr.geometryType&&"triangles"!==Cr.geometryType||null!=Cr.topology&&"PerAttributeArray"!==Cr.topology||null==Cr.vertexAttributes||null==Cr.vertexAttributes.position)}(Cr.store.defaultGeometrySchema))throw new B.Z("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{url:Cr.parsedUrl.path})}function Mt(Cr,as){Ze(Cr,as.spatialReference,as.viewingMode)}function kt(Cr){if(null==Cr.store||null==Cr.store.defaultGeometrySchema||!function Ft(Cr){return!(null==Cr.geometryType||"points"!==Cr.geometryType||null!=Cr.topology&&"PerAttributeArray"!==Cr.topology||null!=Cr.encoding&&""!==Cr.encoding&&"lepcc-xyz"!==Cr.encoding||null==Cr.vertexAttributes||null==Cr.vertexAttributes.position)}(Cr.store.defaultGeometrySchema))throw new B.Z("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{})}function wt(Cr,as){Xe(Cr.spatialReference,as.spatialReference,as.viewingMode)}function Zt(Cr){return"mesh-3d"===Cr.type}function ar(Cr){if(null==Cr||!function zt(Cr){return"simple"===Cr.type||"class-breaks"===Cr.type||"unique-value"===Cr.type}(Cr)||("unique-value"===Cr.type||"class-breaks"===Cr.type)&&null==Cr.defaultSymbol)return!0;const as=Cr.getSymbols();if(0===as.length)return!0;for(const ps of as){if(!Zt(ps)||0===ps.symbolLayers.length)return!0;for(const zs of ps.symbolLayers.items)if("fill"!==zs.type||(0,W.Wi)(zs.material)||(0,W.Wi)(zs.material.color)||"replace"!==zs.material.colorMixMode)return!0}return!1}(Cr=Ee||(Ee={}))[Cr.OUTSIDE=0]="OUTSIDE",Cr[Cr.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",Cr[Cr.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",Cr[Cr.INSIDE=3]="INSIDE";const Pr=(0,he.$s)({color:[0,0,0,0],opacity:0});class kr{constructor(){this.edgeMaterial=null,this.material=null,this.castShadows=!0}}function ss(Cr){const as=new kr;let ps=!1,zs=!1;for(const As of Cr.symbolLayers.items)if("fill"===As.type&&As.enabled){const Ys=As.material,di=As.edges;if((0,W.pC)(Ys)&&!ps){const Nr=Ys.color,Ai=(0,ye.F5)(Ys.colorMixMode);as.material=(0,W.pC)(Nr)?{color:[Nr.r/255,Nr.g/255,Nr.b/255],alpha:Nr.a,colorMixMode:Ai}:{color:[1,1,1],alpha:1,colorMixMode:ye.a9.Multiply},as.castShadows=As.castShadows,ps=!0}(0,W.pC)(di)&&!zs&&(as.edgeMaterial=(0,he.C8)(di,{}),zs=!0)}return as.material||(as.material={color:[1,1,1],alpha:1,colorMixMode:ye.a9.Multiply}),as}function os(Cr,as){return(0|Cr)+(0|as)|0}function Hr(Cr,as,ps,zs,As=0){zs===(0,se.rS)(zs)?as.isGeographic?function zr(Cr,as,ps,zs){const As=(0,se.Iu)(ps),Ys=1+Math.max(0,zs)/(As.radius+Cr.center[2]);(0,X.s)(as.center,Cr.center[0],Cr.center[1],Cr.center[2]+zs),(0,J.CM)(as.center,ps,0,as.center,(0,se.rS)(ps),0,1),(0,ae.a)(as.quaternion,Cr.quaternion),(0,ae.c)(yr,Cr.quaternion),(0,X.s)(Yr,0,0,1),(0,X.q)(Yr,Yr,yr),(0,X.s)(Yr,Cr.halfSize[0]*Math.abs(Yr[0]),Cr.halfSize[1]*Math.abs(Yr[1]),Cr.halfSize[2]*Math.abs(Yr[2])),(0,X.g)(Yr,Yr,As.inverseFlattening),(0,X.a)(as.halfSize,Cr.halfSize,Yr),(0,X.g)(as.halfSize,as.halfSize,Ys)}(Cr,ps,as,As):function Tr(Cr,as,ps,zs){(0,fe.$e)(Cr,jr),(0,X.s)(as.center,Cr.center[0],Cr.center[1],Cr.center[2]+zs),(0,J.Bm)(ps,as.center,qt,(0,se.rS)(ps)),(0,X.s)(as.center,qt[12],qt[13],qt[14]);const As=2*Math.sqrt(1+qt[0]+qt[5]+qt[10]);yr[0]=(qt[6]-qt[9])/As,yr[1]=(qt[8]-qt[2])/As,yr[2]=(qt[1]-qt[4])/As,yr[3]=.25*As,(0,ae.m)(as.quaternion,yr,Cr.quaternion),(0,ae.c)(yr,as.quaternion);let Ys=0,di=0,Nr=0;for(const Ai of jr)Ai[2]+=zs,(0,J.CM)(Ai,ps,0,Ai,(0,se.rS)(ps),0,1),(0,X.v)(Yr,Ai,as.center),(0,X.q)(Yr,Yr,yr),Ys=Math.max(Ys,Math.abs(Yr[0])),di=Math.max(di,Math.abs(Yr[1])),Nr=Math.max(Nr,Math.abs(Yr[2]));(0,X.s)(as.halfSize,Ys,di,Nr)}(Cr,ps,as,As):as.isWGS84&&(zs.isWebMercator||(0,ne.QM)(zs))?function hr(Cr,as,ps,zs,As){(0,X.c)(Gr,as.center),Gr[2]+=As;const Ys=(0,se.rS)(ps);(0,J.CM)(Gr,Cr,0,Gr,Ys,0,1),lr(Ys,as,Gr,ps,zs)}(as,Cr,zs,ps,As):as.isWebMercator&&(0,ne.QM)(zs)?function ns(Cr,as,ps,zs,As){(0,X.c)(Gr,as.center),Gr[2]+=As,lr(Cr,as,Gr,ps,zs)}(as,Cr,zs,ps,As):Cr===ps?(ps.center[2]+=As,(0,J.CM)(ps.center,as,0,ps.center,zs,0,1)):((0,X.s)(ps.center,Cr.center[0],Cr.center[1],Cr.center[2]+As),(0,J.CM)(ps.center,as,0,ps.center,zs,0,1),(0,ae.a)(ps.quaternion,Cr.quaternion),(0,X.c)(ps.halfSize,Cr.halfSize))}function pt(Cr,as,ps,zs,As){if((0,ae.a)(As.quaternion,Cr.quaternion),zs===de.JY.Global){(0,ae.c)(_r,Cr.quaternion),(0,X.q)(Ut,Cr.center,_r),(0,X.A)($t,Ut),(0,X.B)(Xt,$t,Cr.halfSize),(0,X.v)(Xt,$t,Xt);const Ys=(0,X.l)(Xt);(0,X.a)(Xt,$t,Cr.halfSize);const di=(0,X.l)(Xt);if(Ys<ps)(0,X.c)(As.center,Cr.center),(0,X.s)(Ut,ps,ps,ps),(0,X.a)(As.halfSize,Cr.halfSize,Ut);else{const Nr=di>0?1+as/di:1,Ai=Ys>0?1+ps/Ys:1,ds=(Ai+Nr)/2,Tn=(Ai-Nr)/2;(0,X.g)(As.halfSize,$t,Tn),(0,X.C)(As.halfSize,As.halfSize,Cr.halfSize,ds),(0,X.g)(As.center,$t,ds),(0,X.C)(As.center,As.center,Cr.halfSize,Tn),(0,X.D)(Ut,Ut),(0,X.E)(As.center,As.center,Ut),(0,X.q)(As.center,As.center,As.quaternion)}}else{const Ys=(0,X.s)(Ut,0,0,1);(0,X.C)(As.center,Cr.center,Ys,(ps+as)/2),(0,ae.c)(_r,Cr.quaternion),(0,X.q)(Ys,Ys,_r),(0,X.A)(Ys,Ys),(0,X.C)(As.halfSize,Cr.halfSize,Ys,(ps-as)/2)}return As}const Ut=(0,Z.c)(),$t=(0,Z.c)(),Xt=(0,Z.c)(),_r=(0,ie.a)(),gr=new Float64Array(24),vr={data:gr,size:3},Kr=(0,Z.c)(),Gr=(0,Z.c)(),Jr=(0,$.c)();function lr(Cr,as,ps,zs,As){const Ys=(0,G.g)(Jr,as.quaternion);for(let di=0;di<8;++di){for(let Nr=0;Nr<3;++Nr)Kr[Nr]=as.halfSize[Nr]*(0!=(di&1<<Nr)?-1:1);for(let Nr=0;Nr<3;++Nr){let Ai=ps[Nr];for(let ds=0;ds<3;++ds)Ai+=Kr[ds]*Ys[3*ds+Nr];gr[3*di+Nr]=Ai}}(0,J.CM)(gr,Cr,0,gr,zs,0,8),(0,fe.Qb)(vr,As)}function Tt(Cr,as,ps,zs,As,Ys){if(!Ys||0===Ys.length||(0,W.Wi)(as))return null;const di=(0,_e.c)(Cr.mbs,As,ps,as);let Nr;(0,re.a)(Zi,di);let ds=1/0,Tn=-1/0;if(Ys.forEach(Wr=>(Wr=>{if("replace"!==Wr.type)return;const xr=Wr.geometry;if(!xr.hasZ)return;(0,le.cS)(es);const bs=xr.spatialReference||zs,Ns=xr.rings.reduce((_i,gi)=>gi.reduce((hi,Di)=>((0,J.SH)(Di,bs,Yr,as),(0,X.m)(Yr,Yr,Zi),(0,le.Ho)(es,Yr),Math.min(Yr[2],hi)),_i),1/0);(()=>{if(!Nr)if(Nr=jr,(0,le.cS)(hs),(0,W.pC)(Cr.serviceObb)){Hr(Cr.serviceObb,ps,Is,as,As),(0,fe.$e)(Is,Nr);for(const Wr of Nr)(0,X.m)(Wr,Wr,Zi),(0,le.Ho)(hs,Wr)}else{const Wr=Cr.mbs,xr=Wr[3];(0,J.SH)(Wr,ps,Yr,as),(0,X.m)(Yr,Yr,Zi),Yr[2]+=As;for(let bs=0;bs<8;++bs){const hi=Nr[bs];(0,X.c)(hi,[Yr[0]+(1&bs?xr:-xr),Yr[1]+(2&bs?xr:-xr),Yr[2]+(4&bs?xr:-xr)]),(0,le.Ho)(hs,hi)}}})(),(0,le.kK)(hs,es)&&(ds=Math.min(ds,Ns),Tn=Math.max(Tn,Ns))})(Wr)),ds===1/0)return null;const gt=(Wr,xr,bs)=>{(0,X.m)(Yr,bs,di),Wr[xr+0]=Yr[0],Wr[xr+1]=Yr[1],Wr[xr+2]=Yr[2],xr+=24,bs[2]=ds,(0,X.m)(Yr,bs,di),Wr[xr+0]=Yr[0],Wr[xr+1]=Yr[1],Wr[xr+2]=Yr[2],xr+=24,bs[2]=Tn,(0,X.m)(Yr,bs,di),Wr[xr+0]=Yr[0],Wr[xr+1]=Yr[1],Wr[xr+2]=Yr[2]};for(let Wr=0;Wr<8;++Wr)gt(Rs.data,3*Wr,Nr[Wr]);return(0,fe.Qb)(Rs)}function sr(Cr){return(0,W.pC)(Cr)&&Cr.halfSize[0]>=0}function Rr(Cr){return Cr[3]>=0}function bt(Cr){(0,W.pC)(Cr)&&(Cr.halfSize[0]=-1)}function Qt(Cr){(0,W.pC)(Cr)&&(Cr[3]=-1)}const qt=(0,ue.c)(),yr=(0,oe.c)(),jr=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],es=(0,le.Ue)(),hs=(0,le.Ue)(),Is=(0,fe.Ue)(),Yr=[0,0,0],Rs={data:new Array(72),size:3},Zi=(0,ue.c)()},77926:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>B,a:()=>w});var D=T(67857),x=T(91480);function w(U){return(0,x.nn)(U)&&U.intersector===D.q7.PCL&&!!U.target}function B(U){return(0,x.nn)(U)&&U.intersector===D.q7.I3S&&!!U.target}},61566:(qe,xe,T)=>{"use strict";T.d(xe,{Gi:()=>Y,IT:()=>ue,ti:()=>ie});var D=T(26584);const x=!0;function B(X,Z,Q){return{identifier:String.fromCharCode.apply(null,new Uint8Array(X,Q+0,10)),version:Z.getUint16(Q+10,x),checksum:Z.getUint32(Q+12,x)}}function Y(X){const Z=new DataView(X,0);let Q=0;const{identifier:J,version:se}=B(X,Z,Q);if(Q+=16,"LEPCC     "!==J)throw new D.Z("lepcc-decode-error","Bad identifier");if(se>1)throw new D.Z("lepcc-decode-error","Unknown version");const ee=function W(X,Z){return{sizeLo:X.getUint32(Z+0,x),sizeHi:X.getUint32(Z+4,x),minX:X.getFloat64(Z+8,x),minY:X.getFloat64(Z+16,x),minZ:X.getFloat64(Z+24,x),maxX:X.getFloat64(Z+32,x),maxY:X.getFloat64(Z+40,x),maxZ:X.getFloat64(Z+48,x),errorX:X.getFloat64(Z+56,x),errorY:X.getFloat64(Z+64,x),errorZ:X.getFloat64(Z+72,x),count:X.getUint32(Z+80,x),reserved:X.getUint32(Z+84,x)}}(Z,Q);if(Q+=88,ee.sizeHi*2**32+ee.sizeLo!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");const le=new Float64Array(3*ee.count),ne=[],ce=[],de=[],me=[];if(Q=H(X,Q,ne),Q=H(X,Q,ce),Q=H(X,Q,de),Q=H(X,Q,me),Q!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad length");let _e=0,he=0;for(let ye=0;ye<ne.length;ye++){he+=ne[ye];let fe=0;for(let De=0;De<ce[ye];De++){fe+=de[_e];const ve=me[_e];le[3*_e]=Math.min(ee.maxX,ee.minX+2*ee.errorX*fe),le[3*_e+1]=Math.min(ee.maxY,ee.minY+2*ee.errorY*he),le[3*_e+2]=Math.min(ee.maxZ,ee.minZ+2*ee.errorZ*ve),_e++}}return{errorX:ee.errorX,errorY:ee.errorY,errorZ:ee.errorZ,result:le}}function H(X,Z,Q){const J=[];Z=G(X,Z,J);const se=[];for(let ee=0;ee<J.length;ee++){se.length=0,Z=G(X,Z,se);for(let le=0;le<se.length;le++)Q.push(se[le]+J[ee])}return Z}function G(X,Z,Q){const J=new DataView(X,Z),se=J.getUint8(0),ee=31&se,le=!!(32&se),ne=(192&se)>>6;let ce=0;if(0===ne)ce=J.getUint32(1,x),Z+=5;else if(1===ne)ce=J.getUint16(1,x),Z+=3;else{if(2!==ne)throw new D.Z("lepcc-decode-error","Bad count type");ce=J.getUint8(1),Z+=2}if(le)throw new D.Z("lepcc-decode-error","LUT not implemented");const de=Math.ceil(ce*ee/8),me=new Uint8Array(X,Z,de);let _e=0,he=0,ye=0;const fe=-1>>>32-ee;for(let De=0;De<ce;De++){for(;he<ee;)_e|=me[ye]<<he,he+=8,ye+=1;Q[De]=_e&fe,_e>>>=ee,he-=ee,he+ee>32&&(_e|=me[ye-1]>>8-he)}return Z+ye}function ue(X){const Z=new DataView(X,0);let Q=0;const{identifier:J,version:se}=B(X,Z,Q);if(Q+=16,"ClusterRGB"!==J)throw new D.Z("lepcc-decode-error","Bad identifier");if(se>1)throw new D.Z("lepcc-decode-error","Unknown version");const ee=function re(X,Z){return{sizeLo:X.getUint32(Z+0,x),sizeHi:X.getUint32(Z+4,x),count:X.getUint32(Z+8,x),colorMapCount:X.getUint16(Z+12,x),lookupMethod:X.getUint8(Z+14),compressionMethod:X.getUint8(Z+15)}}(Z,Q);if(Q+=16,ee.sizeHi*2**32+ee.sizeLo!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");if((2===ee.lookupMethod||1===ee.lookupMethod)&&0===ee.compressionMethod){if(3*ee.colorMapCount+ee.count+Q!==X.byteLength||ee.colorMapCount>256)throw new D.Z("lepcc-decode-error","Bad count");const le=new Uint8Array(X,Q,3*ee.colorMapCount),ne=new Uint8Array(X,Q+3*ee.colorMapCount,ee.count),ce=new Uint8Array(3*ee.count);for(let de=0;de<ee.count;de++){const me=ne[de];ce[3*de]=le[3*me],ce[3*de+1]=le[3*me+1],ce[3*de+2]=le[3*me+2]}return ce}if(0===ee.lookupMethod&&0===ee.compressionMethod){if(3*ee.count+Q!==X.byteLength||0!==ee.colorMapCount)throw new D.Z("lepcc-decode-error","Bad count");return new Uint8Array(X,Q).slice()}if(ee.lookupMethod<=2&&1===ee.compressionMethod){if(Q+3!==X.byteLength||1!==ee.colorMapCount)throw new D.Z("lepcc-decode-error","Bad count");const le=Z.getUint8(Q),ne=Z.getUint8(Q+1),ce=Z.getUint8(Q+2),de=new Uint8Array(3*ee.count);for(let me=0;me<ee.count;me++)de[3*me]=le,de[3*me+1]=ne,de[3*me+2]=ce;return de}throw new D.Z("lepcc-decode-error","Bad method "+ee.lookupMethod+","+ee.compressionMethod)}function ie(X){const Z=new DataView(X,0);let Q=0;const{identifier:J,version:se}=B(X,Z,Q);if(Q+=16,"Intensity "!==J)throw new D.Z("lepcc-decode-error","Bad identifier");if(se>1)throw new D.Z("lepcc-decode-error","Unknown version");const ee=function oe(X,Z){return{sizeLo:X.getUint32(Z+0,x),sizeHi:X.getUint32(Z+4,x),count:X.getUint32(Z+8,x),scaleFactor:X.getUint16(Z+12,x),bitsPerPoint:X.getUint8(Z+14),reserved:X.getUint8(Z+15)}}(Z,Q);if(Q+=16,ee.sizeHi*2**32+ee.sizeLo!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");const le=new Uint16Array(ee.count);if(8===ee.bitsPerPoint){if(ee.count+Q!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");const ne=new Uint8Array(X,Q,ee.count);for(let ce=0;ce<ee.count;ce++)le[ce]=ne[ce]*ee.scaleFactor}else if(16===ee.bitsPerPoint){if(2*ee.count+Q!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");const ne=new Uint16Array(X,Q,ee.count);for(let ce=0;ce<ee.count;ce++)le[ce]=ne[ce]*ee.scaleFactor}else{const ne=[];if(G(X,Q,ne)!==X.byteLength)throw new D.Z("lepcc-decode-error","Bad size");for(let ce=0;ce<ee.count;ce++)le[ce]=ne[ce]*ee.scaleFactor}return le}},62600:(qe,xe,T)=>{"use strict";var D,x,w;T.d(xe,{L:()=>D,a:()=>x}),(w=D||(D={}))[w.RasterImage=0]="RasterImage",w[w.Features=1]="Features",function(w){w[w.WithRasterImage=0]="WithRasterImage",w[w.WithoutRasterImage=1]="WithoutRasterImage"}(x||(x={}))},27351:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>x,E:()=>w});var w,B,D=T(65401);class x{constructor(U,W,Y,H=null){this.lij=[0,0,0],this.extent=(0,D.Ue)(),this.resolution=0,this.loadPriority=0,this.measures={visibility:w.VISIBLE_ON_SURFACE,screenRect:(0,D.Ue)(),distance:0,shouldSplit:!1},this.used=!1,H&&this.acquire(U,W,Y,H)}acquire(U,W,Y,H){this.tilingScheme=H,this.id=x.id(U,W,Y),this.lij[0]=U,this.lij[1]=W,this.lij[2]=Y,H.getExtent(U,W,Y,this.extent),this.resolution=H.resolutionAtLevel(U)}release(){this.tilingScheme=null}getChildren(U){const W=this.lij[0]+1,Y=2*this.lij[1],H=2*this.lij[2];return U?(U[0].acquire(W,Y,H,this.tilingScheme),U[1].acquire(W,Y+1,H,this.tilingScheme),U[2].acquire(W,Y,H+1,this.tilingScheme),U[3].acquire(W,Y+1,H+1,this.tilingScheme),U):[new x(W,Y,H,this.tilingScheme),new x(W,Y+1,H,this.tilingScheme),new x(W,Y,H+1,this.tilingScheme),new x(W,Y+1,H+1,this.tilingScheme)]}copyMeasurementsFrom(U){this.measures.visibility=U.measures.visibility,this.measures.shouldSplit=U.measures.shouldSplit,this.measures.distance=U.measures.distance,(0,D.JG)(U.measures.screenRect,this.measures.screenRect)}static id(U,W,Y){return`${U}/${W}/${Y}`}}(B=w||(w={}))[B.INVISIBLE=0]="INVISIBLE",B[B.VISIBLE_WHEN_EXTENDED=1]="VISIBLE_WHEN_EXTENDED",B[B.VISIBLE_ON_SURFACE=2]="VISIBLE_ON_SURFACE"},2180:(qe,xe,T)=>{"use strict";T.d(xe,{hM:()=>re,C8:()=>ue,$s:()=>ae,eU:()=>G});var D=T(91558),w=(T(8314),T(62208)),B=T(23841),U=T(4794),H=T(17803);function G(Z){return Z&&Z.enabled&&(function Y(Z){return"extrude"===Z.type}(Z)||function W(Z){return"fill"===Z.type}(Z))&&(0,w.pC)(Z.edges)}function re(Z,Q){return ue(function $(Z){return Z&&Z.enabled&&Z.edges||null}(Z),Q)}function ue(Z,Q){if((0,w.Wi)(Z))return null;const J=(0,w.pC)(Z.color)?(0,U.b)(D.Z.toUnitRGBA(Z.color)):(0,U.f)(0,0,0,0),se=(0,B.F2)(Z.size),ee=(0,B.F2)(Z.extensionLength);switch(Z.type){case"solid":return ae({color:J,size:se,extensionLength:ee,...Q});case"sketch":return function oe(Z){return{...X,...Z,type:"sketch"}}({color:J,size:se,extensionLength:ee,...Q});default:return}}function ae(Z){return{...ie,...Z,type:"solid"}}const ie={color:(0,U.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:H.i.OPAQUE,hasSlicePlane:!1},X={color:(0,U.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:H.i.OPAQUE,hasSlicePlane:!1}},30764:(qe,xe,T)=>{"use strict";T.d(xe,{CM:()=>U,uM:()=>W,vT:()=>w});var D=T(62208),x=T(10596);const w=64,B=w/2,U=B/5;function W(G,$){return(0,D.pC)($)?function Y(G,$){return G.fromData($,()=>(0,x.cU)($,w,B,U))}(G,function H(G){return"diamond"===G?"kite":G}($.style)):null}},9044:(qe,xe,T)=>{"use strict";T.d(xe,{F5:()=>B,HB:()=>U,a9:()=>w});var w,$,D=T(21286),x=T(62208);function B($){switch($){case"multiply":default:return w.Multiply;case"ignore":return w.Ignore;case"replace":return w.Replace;case"tint":return w.Tint}}function U($,re,ue){if((0,x.Wi)($)||re===w.Ignore)return ue[0]=255,ue[1]=255,ue[2]=255,void(ue[3]=255);const ae=(0,D.uZ)(Math.round($[3]*Y),0,Y),oe=0===ae||re===w.Tint?0:re===w.Replace?H:G;ue[0]=(0,D.uZ)(Math.round($[0]*W),0,W),ue[1]=(0,D.uZ)(Math.round($[1]*W),0,W),ue[2]=(0,D.uZ)(Math.round($[2]*W),0,W),ue[3]=ae+oe}($=w||(w={}))[$.Multiply=1]="Multiply",$[$.Ignore=2]="Ignore",$[$.Replace=3]="Replace",$[$.Tint=4]="Tint";const W=255,Y=85,H=Y,G=2*Y},24805:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>B});var D=T(84161),x=T(28093),w=T(8834);class B{constructor(Y){this.renderCoordsHelper=Y,this.frustum=(0,w.Ue)(),this._points=(0,w.Hf)(),this.lines=new Array(12),this._origin=(0,x.c)(),this._direction=(0,x.c)(),this._altitude=null;for(let H=0;H<12;H++)this.lines[H]={origin:null,direction:(0,x.c)(),endpoint:null}}get planes(){return this.frustum}get points(){return this._points}get mutablePoints(){return this._points}get direction(){return this._direction}update(Y){(0,w.q_)(Y.viewMatrix,Y.projectionMatrix,this.frustum,this._points),(0,D.c)(this._origin,Y.eye),(0,D.c)(this._direction,Y.viewForward),this._altitude=this.renderCoordsHelper.getAltitude(this._origin),this._updateLines()}updatePoints(Y){for(let H=0;H<this._points.length;H++)(0,D.c)(this._points[H],Y[H]);(0,w.Jp)(this.frustum,this._points),this._updateLines()}get altitude(){return this._altitude}intersectsSphere(Y){return(0,w.hr)(this.frustum,Y)}intersectsRay(Y){return(0,w.Zr)(this.frustum,Y)}intersectsLineSegment(Y,H){return(0,w.rN)(this.frustum,Y,H)}intersectsPoint(Y){return(0,w.g8)(this.frustum,Y)}_updateLines(){const Y=this._points;for(let H=0;H<4;H++){const G=H+4;U(this.lines[H],Y[H],Y[G]),U(this.lines[H+4],Y[H],3===H?Y[0]:Y[H+1]),U(this.lines[H+8],Y[G],3===H?Y[4]:Y[G+1])}}}function U(W,Y,H){W.origin=Y,W.endpoint=H,(0,D.r)(W.direction,Y,H)}B.planePointIndices=w.xu,B.nearFarLineIndices=[[w.NQ.NEAR_BOTTOM_LEFT,w.NQ.FAR_BOTTOM_LEFT],[w.NQ.NEAR_BOTTOM_RIGHT,w.NQ.FAR_BOTTOM_RIGHT],[w.NQ.NEAR_TOP_RIGHT,w.NQ.FAR_TOP_RIGHT],[w.NQ.NEAR_TOP_LEFT,w.NQ.FAR_TOP_LEFT]]},53929:(qe,xe,T)=>{"use strict";T.d(xe,{Fb:()=>B,KO:()=>U,sb:()=>w});var D=T(62208),x=T(88530);class w{constructor(Y,H=null,G=0){this.array=Y,this.spatialReference=H,this.offset=G}}function B(W){return"array"in W}function U(W,Y,H="ground"){if((0,x.f)(Y))return W.getElevation(Y.x,Y.y,Y.z||0,Y.spatialReference,H);if(B(Y)){let G=Y.offset;return W.getElevation(Y.array[G++],Y.array[G++],Y.array[G]||0,(0,D.Pt)(Y.spatialReference,W.spatialReference),H)}return W.getElevation(Y[0],Y[1],Y[2]||0,W.spatialReference,H)}},37810:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>J});var D=T(94573),x=T(21286),w=T(28347),B=T(43703),U=T(84161),W=T(28093),Y=T(55915),H=T(12080),G=T(5548),$=T(65401),re=T(8834),ue=T(13777),ae=T(90014),oe=T(70562),ie=T(59617),X=T(24229);const Z=.5*Math.PI,Q=Z/Math.PI*180;class J{constructor(he){this.renderCoordsHelper=he.renderCoordsHelper,this.extent=new Array(4),this.planes=new Array(6),this.maxSpan=0,this.center={origin:(0,W.c)(),direction:(0,W.c)()};for(let ye=0;ye<4;ye++)this.extent[ye]={origin:(0,W.c)(),direction:(0,W.c)(),cap:{next:null,direction:(0,W.c)()}},this.planes[ye]=(0,ae.Ue)();this.planes[re.Nu.NEAR]=(0,ae.Ue)(),this.planes[re.Nu.FAR]=(0,ae.Ue)(),this.planesWithoutFar=this.planes.slice(0,5)}update(he,ye,fe,De=!0){const ve=this.extent;this._toRenderBoundingExtent(he,ye,fe),(0,U.a)(this.center.origin,ve[0].origin,ve[2].origin),(0,U.g)(this.center.origin,this.center.origin,.5),this.renderCoordsHelper.worldUpAtPosition(this.center.origin,this.center.direction),De||(0,U.g)(this.center.direction,this.center.direction,-1);for(let Ce=0;Ce<4;Ce++){const ge=ve[Ce];this.renderCoordsHelper.worldUpAtPosition(ge.origin,ge.direction);const Te=ve[3===Ce?0:Ce+1];ge.cap.next=Te.origin,(0,U.r)(ge.cap.direction,ge.origin,Te.origin),(0,ae.my)(ge.direction,ge.cap.direction,ge.origin,this.planes[Ce]),De||(0,U.g)(ge.direction,ge.direction,-1)}(0,ae.my)(ve[0].cap.direction,ve[1].cap.direction,ve[0].origin,this.planes[re.Nu.NEAR]),De?(0,ae.tk)(this.planes[re.Nu.NEAR],this.planes[re.Nu.FAR]):((0,ae.JG)(this.planes[re.Nu.FAR],this.planes[re.Nu.NEAR]),(0,ae.tk)(this.planes[re.Nu.NEAR],this.planes[re.Nu.NEAR])),this.maxSpan=Math.max(Math.abs(he[0]-he[2]),Math.abs(he[1]-he[3])),this.maxSpanSpatialReference=ye,this.minGlobalAltitude=.9*(0,H.Iu)(this.maxSpanSpatialReference).radius}isVisibleInFrustum(he,ye,fe=!1){if(null==he)return!1;if(this.renderCoordsHelper.viewingMode===ie.JY.Global){if(this.maxSpan>(this.maxSpanSpatialReference.isGeographic?Q:Z*ye))return!0;if(he.altitude>=this.minGlobalAltitude)return this._isVisibleInFrustumGlobal(he)}if(0===this.maxSpan){const ve=this.extent[0];return!(fe||!he.intersectsRay((0,oe.re)(ve.origin,ve.direction)))}for(let ve=0;ve<this.extent.length;ve++){const Ce=this.extent[ve];if(!fe&&he.intersectsRay((0,oe.re)(Ce.origin,Ce.direction))||he.intersectsLineSegment((0,ue.zk)(Ce.origin,Ce.cap.next,me),Ce.cap.direction))return!0}const De=fe?this.planes:this.planesWithoutFar;for(let ve=0;ve<he.lines.length;ve++){const Ce=he.lines[ve];if((0,X.kD)(De,Ce.origin,Ce.endpoint,Ce.direction))return!0}return!1}_toRenderBoundingExtentGlobal(he,ye,fe){(0,$.be)(he,ee),ee[2]=fe,(0,Y.Bm)(ye,ee,le,this.renderCoordsHelper.spatialReference),(0,w.a)(ne,le),(0,G.cS)(ce);for(const{x0:ve,x1:Ce,y0:ge,y1:Te}of se)for(let Le=0;Le<5;Le++){const je=Le/4;ee[0]=(0,x.t7)(he[ve],he[Ce],je),ee[1]=(0,x.t7)(he[ge],he[Te],je),ee[2]=fe,(0,Y.SH)(ee,ye,ee,this.renderCoordsHelper.spatialReference),(0,U.m)(ee,ee,ne),(0,G.pp)(ce,ee)}(0,U.s)(this.extent[0].origin,ce[0],ce[1],ce[2]),(0,U.s)(this.extent[1].origin,ce[3],ce[1],ce[2]),(0,U.s)(this.extent[2].origin,ce[3],ce[4],ce[2]),(0,U.s)(this.extent[3].origin,ce[0],ce[4],ce[2]);for(let ve=0;ve<4;++ve)(0,U.m)(this.extent[ve].origin,this.extent[ve].origin,le)}_toRenderBoundingExtentLocal(he,ye,fe){(0,Y.dH)(he,ye,de,this.renderCoordsHelper.spatialReference),(0,U.s)(this.extent[0].origin,de[0],de[1],fe),(0,U.s)(this.extent[1].origin,de[2],de[1],fe),(0,U.s)(this.extent[2].origin,de[2],de[3],fe),(0,U.s)(this.extent[3].origin,de[0],de[3],fe)}_toRenderBoundingExtent(he,ye,fe){switch(this.renderCoordsHelper.viewingMode){case ie.JY.Global:this._toRenderBoundingExtentGlobal(he,ye,fe);break;case ie.JY.Local:this._toRenderBoundingExtentLocal(he,ye,fe);break;default:(0,D.Bg)(this.renderCoordsHelper.viewingMode)}}_isVisibleInFrustumGlobal(he){if((0,ae.jH)(he.planes[re.Nu.NEAR],this.center.origin)<0&&(0,U.e)(this.center.direction,he.direction)<0)return!0;for(let ye=0;ye<4;ye++){const fe=this.extent[ye];if((0,ae.jH)(he.planes[re.Nu.NEAR],fe.origin)<0&&(0,U.e)(fe.direction,he.direction)<0)return!0}return!1}}const se=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],ee=(0,W.c)(),le=(0,B.c)(),ne=(0,B.c)(),ce=(0,G.Ue)(),de=(0,$.Ue)(),me=(0,ue.Ue)()},63416:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>w});var D=T(94530),x=T(30755);class w{constructor(U,W){this.owner=W,this.properties={},this.afterDispatchHandle=null;for(const Y in U){const G=new D.e(U[Y],null,null,2,2);this.properties[Y]={pool:G,acquired:[]}}this.afterDispatchHandle=(0,x.Fs)(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const U in this.properties){const W=this.properties[U];for(const Y of W.acquired)(0,x.NC)(Y)||W.pool.release(Y);W.pool.destroy(),W.pool=null,W.acquired=null}this.properties=null,this.owner=null}get(U){const W=this.owner._get(U),Y=this.properties[U];let H=Y.pool.acquire();for(Y.acquired.push(H);H===W;)Y.acquired.push(H),H=Y.pool.acquire();return H}_release(){for(const U in this.properties){const W=this.properties[U];let Y=0;for(const H of W.acquired)(0,x.NC)(H)?W.acquired[Y++]=H:W.pool.release(H);W.acquired.length=Y}}}},60011:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>oe});var D=T(62208),x=T(16730),w=T(28347),B=T(84161),U=T(55915),W=T(65234),Y=T(78172),H=T(93088),G=T(90014),$=T(26242),re=T(88530),ue=T(59617),ae=T(86080);class oe{constructor(Z,Q,J,se){this.viewingMode=Z,this.spatialReference=Q,this.unitInMeters=J,this.coordinateSystem=se,this._coordinateSystem=(0,H.Ue)(se)}set extent(Z){Z&&(0,H.qf)(this.coordinateSystem,Z,this.coordinateSystem)}getAltitude(Z){return(0,H.id)(this.coordinateSystem,Z)}setAltitude(Z,Q,J=Z){return(0,H.Is)(this.coordinateSystem,J,Q,Z)}setAltitudeOfTransformation(Z,Q){(0,H.rF)(this.coordinateSystem,Q,Z,Q)}worldUpAtPosition(Z,Q){return(0,H.P0)(this.coordinateSystem,Z,Q)}worldBasisAtPosition(Z,Q,J){return(0,H.Kf)(this.coordinateSystem,Z,Q,J)}basisMatrixAtPosition(Z,Q){const J=this.worldBasisAtPosition(Z,Y.R.X,$.WM.get()),se=this.worldBasisAtPosition(Z,Y.R.Y,$.WM.get()),ee=this.worldBasisAtPosition(Z,Y.R.Z,$.WM.get());return(0,w.s)(Q,J[0],J[1],J[2],0,se[0],se[1],se[2],0,ee[0],ee[1],ee[2],0,0,0,0,1),Q}intersectManifoldClosestSilhouette(Z,Q,J){return(0,H.NE)(this.coordinateSystem,Q,this._coordinateSystem),(0,H.ej)(this._coordinateSystem,Z,J),J}intersectManifold(Z,Q,J){(0,H.NE)(this.coordinateSystem,Q,this._coordinateSystem);const se=$.WM.get();return(0,H.BR)(this._coordinateSystem,Z,se)?(0,B.c)(J,se):null}intersectInfiniteManifold(Z,Q,J){if(this.viewingMode===ue.JY.Global)return this.intersectManifold(Z,Q,J);(0,H.NE)(this.coordinateSystem,Q,this._coordinateSystem);const se=this._coordinateSystem.value,ee=$.WM.get();return(0,G.BR)(se.plane,Z,ee)?(0,B.c)(J,ee):null}toRenderCoords(Z,Q,J){return(0,re.f)(Z)?(0,U.KC)(Z,Q,this.spatialReference):(0,U.SH)(Z,Q,J,this.spatialReference)}fromRenderCoords(Z,Q,J=null){return(0,re.f)(Q)?((0,D.pC)(J)&&(Q.spatialReference=J),(0,U.MT)(Z,this.spatialReference,Q)):Q instanceof W.Z?(0,U.fA)(Z,this.spatialReference,Q):(0,U.SH)(Z,this.spatialReference,Q,J)?Q:null}static create(Z,Q){switch(Z){case ue.JY.Local:return new oe(ue.JY.Local,Q,(0,x.c9)(Q),(0,H.pb)());case ue.JY.Global:return new oe(ue.JY.Global,Q,1,(0,H.pt)(Q))}}static renderUnitScaleFactor(Z,Q){return ie(Z)/ie(Q)}}function ie(X){if((0,ae.D)(X,ue.JY.Global))return 1;const Z=(0,H.E2)(!1,X);return(0,x.c9)(Z)}},91540:(qe,xe,T)=>{"use strict";T.d(xe,{nN:()=>ee,wu:()=>Q});var D=T(17626),x=T(84792),w=T(14517),B=T(85931),U=T(26584),W=T(58817),Y=T(62208),H=T(10699),G=T(77712),re=(T(90912),T(76898)),ue=T(2282);class ae{constructor(me){this.client=me,this._cancelled=!1,this.size=0,this.duration=0}}class oe{constructor(me){this.typeWorkerQuota=me,this.tasks=new Array,this.numWorkers=0,this.statistics=new ie}}class ie{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class X{constructor(me,_e,he,ye){this._workerFunc=me,this._callbackFunc=_e,this._maxTotalNumWorkers=he,this._totalNumWorkers=0,this._clients=ye.map(fe=>new oe(fe))}hasQuota(me){const _e=this._clients[me];return!!_e&&(this._totalNumWorkers<this._maxTotalNumWorkers||_e.numWorkers+_e.tasks.length<_e.typeWorkerQuota)}push(me){const _e=this._clients[me.client];_e&&(this._totalNumWorkers<this._maxTotalNumWorkers?(_e.numWorkers++,this._totalNumWorkers++,this._workerFunc(me,(he,ye)=>this._taskCallback(he,ye))):_e.tasks.push(me))}cancel(me){this._taskFinished(me),me._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(me){const _e=this._clients[me.client];this._totalNumWorkers--,_e.numWorkers--,_e.statistics.requests++,_e.statistics.size+=me.size||0,_e.statistics.duration+=me.duration||0,_e.statistics.speed=_e.statistics.duration>0?_e.statistics.size/_e.statistics.duration:0,(0,ue.hu)(_e.numWorkers>=0),this._next()}_next(){for(const me of this._clients)if(me&&me.numWorkers<me.typeWorkerQuota&&this._processQueue(me))return;for(const me of this._clients)if(me&&this._processQueue(me))return}_processQueue(me){for(;me.tasks.length>0;)if(this._workerFunc(me.tasks.shift(),(_e,he)=>this._taskCallback(_e,he)))return me.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(me,_e){me._cancelled||(this._callbackFunc(me,_e),this._taskFinished(me))}getStatsForType(me){const _e=this._clients[me];return _e?{quota:_e.typeWorkerQuota,workers:_e.numWorkers,queueSize:_e.tasks.length,requestStats:_e.statistics}:null}get test(){const me=this;return{set workerFunc(_e){me._workerFunc=_e}}}}var Z=T(87091);let Q=class extends w.Z{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(de,me,_e){this._loadQueue=new X((he,ye)=>this._startLoading(he,ye),(he,ye)=>this._doneLoadingCB(he,ye),de,me),_e&&(this._frameTask=_e.registerTask(Z.T8.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=(0,Y.hw)(this._frameTask),this._tasks.forEach(de=>(0,Y.IM)(de.abortController)),this._loadQueue=(0,Y.SC)(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(de){return this._loadQueue.hasQuota(de)}request(de,me,_e,he={}){const ye=(0,H.hh)();ye.__signal=(0,Y.pC)(he)?he.signal:null;const fe=this._createOrUpdateTask(de,me,_e,he,ye);return(0,H.fu)(he,()=>this._cancelRequest(fe,ye)),ye.promise}_createTask(de,me,_e,he,ye,fe){const De=new le(de,me,_e,he,ye);return this._updateTask(De,fe),this._tasks.set(ye,De),1===this._tasks.size&&this._set("updating",!0),this._loadQueue.push(De),De}_cancelRequest(de,me){(0,B.e$)(de.resolvers,me),me.reject((0,H.zE)()),0===de.resolvers.length&&(de.status===ce.DOWNLOADING&&(de.status=ce.CANCELLED,this._loadQueue.cancel(de),de.abortController.abort(),de.request=null,de.abortController=null),de.status=ce.CANCELLED,this._tasks.delete(de.key),0===this._tasks.size&&this._set("updating",!1))}_updateTask(de,me){de.resolvers.push(me)}_createOrUpdateTask(de,me,_e,he,ye){const fe=function ne(de,me,_e){return`${de}:${me}:${_e}`}((0,Y.pC)(he)&&he.uid||de,me,_e),De=this._tasks.get(fe);return De?(this._updateTask(De,ye),De):this._createTask(de,he,me,_e,fe,ye)}_doneLoadingCB(de,me){this._loadQueue&&((0,ue.hu)(de.status===ce.DOWNLOADING),de.status=ce.DOWNLOADED,this._frameTask?this._doneQueue.push({task:de,err:me}):this._doneLoading(de,me))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(de){for(;!de.done&&this._onLoadQueue.length>0;){const me=this._onLoadQueue.shift();(0,H.k_)(me.task.abortController),me.task.abortController=null,me.callback(me.task),de.madeProgress()}for(;!de.done&&this._doneQueue.length>0;){const me=this._doneQueue.shift();me.task.status!==ce.DOWNLOADED&&(me.err=me.err||(0,H.zE)()),this._doneLoading(me.task,me.err),de.madeProgress()}}_doneLoading(de,me){if(me&&!(0,H.D_)(me)&&de.numRetries>0)return--de.numRetries,void this._loadQueue.push(de);let _e=de.result instanceof HTMLImageElement?0:de.resolvers.length;for(const he of de.resolvers)if(me)(0,H.D_)(me)?he.reject(me):he.reject(new U.Z("stream-data-loader:request-error",`Failed to request resource at '${de.url}'. ${me}`,{url:de.url,error:me}));else{--_e;const ye=_e<=0?de.result:(0,W.d9)(de.result);he.resolve(ye)}this._tasks.delete(de.key),0===this._tasks.size&&this._set("updating",!1)}_startLoading(de,me){if(de.status===ce.CANCELLED)return!1;let _e,he;switch(de.startTime=performance.now(),de.status=ce.DOWNLOADING,de.docType){case"binary":he="array-buffer",_e=0;break;case"image":he="image";break;case"image+type":he="array-buffer";break;default:he="json"}de.abortController=new AbortController;const ye=de.abortController.signal;de.request=(0,x.default)(de.url,{...de.options,responseType:he,timeout:_e,signal:ye});let fe=()=>{};const De=Ce=>{de.duration=performance.now()-de.startTime,de.size=Ce instanceof ArrayBuffer?Ce.byteLength:de.size||0,de.result=Ce,this._frameTask?this._onLoadQueue.push({callback:me,task:de}):(de.abortController=null,me(de))},ve=Ce=>{de.status===ce.DOWNLOADING&&me(de,Ce),fe()};return"image+type"!==de.docType?(de.request.then(Ce=>De(Ce.data),ve),!0):(de.request.then(Ce=>{const ge=Ce.data,Te=function se(de){if(de.byteLength<2)return"unknown";const me=new Uint8Array(de,0,de.byteLength);return 137===me[0]&&80===me[1]?"image/png":71===me[0]&&73===me[1]?"image/gif":66===me[0]&&77===me[1]?"image/bmp":255===me[0]&&216===me[1]?"image/jpeg":"unknown"}(ge);if(he="image",de.size=ge.byteLength,"unknown"===Te)return de.request=(0,x.default)(de.url,{responseType:he,timeout:_e,signal:ye}),void de.request.then(ze=>De(ze.data),ve);const Le=new Blob([ge],{type:Te}),je=window.URL.createObjectURL(Le);fe=()=>window.URL.revokeObjectURL(je),de.request=(0,x.default)(je,{responseType:he,timeout:_e,signal:ye}),de.request.then(ze=>De(new ee(ze.data,Te,fe)),ve)},ve),!0)}get test(){return{loadQueue:this._loadQueue}}};(0,D._)([(0,G.Cb)({readOnly:!0})],Q.prototype,"updating",void 0),Q=(0,D._)([(0,re.j)("esri.views.3d.support.StreamDataLoader")],Q);class ee{constructor(me,_e,he){this.image=me,this.type=_e,this.release=he}get isOpaque(){return"image/jpeg"===this.type}}class le extends ae{constructor(me,_e,he,ye,fe){super(ye),this.url=me,this.options=_e,this.docType=he,this.key=fe,this.result=null,this.status=ce.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=0}}var ce,de;(de=ce||(ce={}))[de.QUEUED=1]="QUEUED",de[de.DOWNLOADING=2]="DOWNLOADING",de[de.DOWNLOADED=3]="DOWNLOADED",de[de.CANCELLED=4]="CANCELLED"},19625:(qe,xe,T)=>{"use strict";T.d(xe,{U$:()=>U});var D=T(60479),x=T(81096);class w{constructor(Y,H){this.layout=Y,this.buffer="number"==typeof H?new ArrayBuffer(H*Y.stride):H;for(const G of Y.fieldNames){const $=Y.fields.get(G);this[G]=new $.constructor(this.buffer,$.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(Y,H){const G=this[Y];return G&&G.elementCount===H.ElementCount&&G.elementType===H.ElementType?G:null}slice(Y,H){return new w(this.layout,this.buffer.slice(Y*this.stride,H*this.stride))}copyFrom(Y,H,G,$){const re=this.stride;if(re%4==0){const ue=new Uint32Array(Y.buffer,H*re,$*re/4);new Uint32Array(this.buffer,G*re,$*re/4).set(ue)}else{const ue=new Uint8Array(Y.buffer,H*re,$*re);new Uint8Array(this.buffer,G*re,$*re).set(ue)}}}class B{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(Y,H){return this._appendField(Y,D.Eu,H),this}vec2f64(Y,H){return this._appendField(Y,D.q6,H),this}vec3f(Y,H){return this._appendField(Y,D.ct,H),this}vec3f64(Y,H){return this._appendField(Y,D.fP,H),this}vec4f(Y,H){return this._appendField(Y,D.ek,H),this}vec4f64(Y,H){return this._appendField(Y,D.Cd,H),this}mat3f(Y,H){return this._appendField(Y,D.gK,H),this}mat3f64(Y,H){return this._appendField(Y,D.ey,H),this}mat4f(Y,H){return this._appendField(Y,D.bj,H),this}mat4f64(Y,H){return this._appendField(Y,D.O1,H),this}vec4u8(Y,H){return this._appendField(Y,D.mc,H),this}f32(Y,H){return this._appendField(Y,D.ly,H),this}f64(Y,H){return this._appendField(Y,D.oS,H),this}u8(Y,H){return this._appendField(Y,D.D_,H),this}u16(Y,H){return this._appendField(Y,D.av,H),this}i8(Y,H){return this._appendField(Y,D.Hz,H),this}vec2i8(Y,H){return this._appendField(Y,D.Vs,H),this}vec2i16(Y,H){return this._appendField(Y,D.or,H),this}vec2u8(Y,H){return this._appendField(Y,D.xA,H),this}vec4u16(Y,H){return this._appendField(Y,D.v6,H),this}u32(Y,H){return this._appendField(Y,D.Nu,H),this}_appendField(Y,H,G){const $=H.ElementCount*(0,x.n1)(H.ElementType);this.fields.set(Y,{size:$,constructor:H,offset:this.stride,optional:G}),this.stride+=$,this.fieldNames.push(Y)}alignTo(Y){return this.stride=Math.floor((this.stride+Y-1)/Y)*Y,this}hasField(Y){return this.fieldNames.includes(Y)}createBuffer(Y){return new w(this,Y)}createView(Y){return new w(this,Y)}clone(){const Y=new B;return Y.stride=this.stride,Y.fields=new Map,this.fields.forEach((H,G)=>Y.fields.set(G,H)),Y.fieldNames=this.fieldNames.slice(),Y.BufferType=this.BufferType,Y}}function U(){return new B}},4511:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>w});var D=T(67969),x=T(40852);function w(W,Y=0){const H=W.stride;return W.fieldNames.filter(G=>{const $=W.fields.get(G).optional;return!($&&$.glPadding)}).map(G=>{const $=W.fields.get(G),re=$.constructor.ElementCount,ue=function B(W){const Y=U[W];if(Y)return Y;throw new Error("BufferType not supported in WebGL")}($.constructor.ElementType);return new x.G(G,re,ue,$.offset,H,!(!$.optional||!$.optional.glNormalized),Y)})}const U={u8:D.g.UNSIGNED_BYTE,u16:D.g.UNSIGNED_SHORT,u32:D.g.UNSIGNED_INT,i8:D.g.BYTE,i16:D.g.SHORT,i32:D.g.INT,f32:D.g.FLOAT}},2975:(qe,xe,T)=>{"use strict";T.d(xe,{HL:()=>w,aj:()=>B});var D=T(60479),x=T(19625);function w(re,ue){return ue.push(re.buffer),{buffer:re.buffer,layout:U(re.layout)}}function B(re){return function W(re){const ue=(0,x.U$)();return ue.stride=re.stride,ue.fieldNames=re.fieldNames,re.fields.forEach(ae=>ue.fields.set(ae[0],{...ae[1],constructor:G(ae[1].constructor)})),ue}(re.layout).createView(re.buffer)}function U(re){const ue=new Array;return re.fields.forEach((ae,oe)=>{const ie={...ae,constructor:H(ae.constructor)};ue.push([oe,ie])}),{stride:re.stride,fields:ue,fieldNames:re.fieldNames}}const Y=[D.ly,D.Eu,D.ct,D.ek,D.gK,D.bj,D.oS,D.q6,D.fP,D.Cd,D.ey,D.O1,D.D_,D.xA,D.ne,D.mc,D.av,D.TS,D.mw,D.v6,D.Nu,D.qt,D.G5,D.hu,D.Hz,D.Vs,D.P_,D.ir,D.o7,D.or,D.n1,D.zO,D.Jj,D.wA,D.PP,D.TN];function H(re){return`${re.ElementType}_${re.ElementCount}`}function G(re){return $.get(re)}const $=new Map;Y.forEach(re=>$.set(H(re),re))},93605:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.Z{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};(0,D._)([(0,w.Cb)()],H.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"LABELS_SHOW_BORDER",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"TEXT_SHOW_BASELINE",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"TEXT_SHOW_BORDER",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"SHOW_POI",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"LINE_WIREFRAMES",void 0),H=(0,D._)([(0,Y.j)("esri.views.3d.support.DebugFlags")],H);const G=new H},55745:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>U,O:()=>B});var D=T(62208),x=T(28093),w=T(55915);function B(Y,H,G){if((0,D.Wi)(Y)||(0,D.Wi)(G))return!1;let $=!0;return W[0]=null!=Y.xmin?Y.xmin:0,W[1]=null!=Y.ymin?Y.ymin:0,W[2]=null!=Y.zmin?Y.zmin:0,$=$&&(0,w.CM)(W,Y.spatialReference,0,H,G,0,1),W[0]=null!=Y.xmax?Y.xmax:0,W[1]=null!=Y.ymax?Y.ymax:0,W[2]=null!=Y.zmax?Y.zmax:0,$=$&&(0,w.CM)(W,Y.spatialReference,0,H,G,3,1),null==Y.xmin&&(H[0]=-1/0),null==Y.ymin&&(H[1]=-1/0),null==Y.zmin&&(H[2]=-1/0),null==Y.xmax&&(H[3]=1/0),null==Y.ymax&&(H[4]=1/0),null==Y.zmax&&(H[5]=1/0),$}function U(Y,H,G){if((0,D.Wi)(Y)||(0,D.Wi)(G))return!1;let $=!0;return W[0]=null!=Y.xmin?Y.xmin:0,W[1]=null!=Y.ymin?Y.ymin:0,W[2]=null!=Y.zmin?Y.zmin:0,$=$&&(0,w.CM)(W,Y.spatialReference,0,W,G,0,1),H[0]=W[0],H[1]=W[1],W[0]=null!=Y.xmax?Y.xmax:0,W[1]=null!=Y.ymax?Y.ymax:0,W[2]=null!=Y.zmax?Y.zmax:0,$=$&&(0,w.CM)(W,Y.spatialReference,0,W,G,0,1),H[2]=W[0],H[3]=W[1],null==Y.xmin&&(H[0]=-1/0),null==Y.ymin&&(H[1]=-1/0),null==Y.xmax&&(H[2]=1/0),null==Y.ymax&&(H[3]=1/0),$}const W=(0,x.c)()},26046:(qe,xe,T)=>{"use strict";T.d(xe,{Bh:()=>Y,eW:()=>G,iE:()=>H,u4:()=>W});var D=T(62208),x=T(23841),w=T(67831),B=T(84161),U=T(26242);function W($,re,ue){return Y($,$.screenToRender(re,(0,x.Wv)(U.WM.get())),ue)}function Y($,re,ue){const ae=(0,x.Wv)((0,w.c)(U.WM.get(),re));if(ae[2]=0,!$.unprojectFromRenderScreen(ae,ue.origin))return null;const oe=(0,x.Wv)((0,w.c)(U.WM.get(),re));oe[2]=1;const ie=$.unprojectFromRenderScreen(oe,U.WM.get());return(0,D.Wi)(ie)?null:((0,B.b)(ue.direction,ie,ue.origin),ue)}function H($,re,ue){return G($,$.screenToRender(re,(0,x.Wv)(U.WM.get())),ue)}function G($,re,ue){(0,B.c)(ue.origin,$.eye);const ae=(0,B.s)(U.WM.get(),re[0],re[1],1),oe=$.unprojectFromRenderScreen(ae,U.WM.get());return(0,D.Wi)(oe)?null:((0,B.b)(ue.direction,oe,ue.origin),ue)}},39135:(qe,xe,T)=>{"use strict";var D,B;T.d(xe,{Bh:()=>D,NT:()=>w,Ty:()=>x}),(B=D||(D={}))[B.ELEVATION=0]="ELEVATION",B[B.BASEMAP=1]="BASEMAP",B[B.I3S_INDEX=2]="I3S_INDEX",B[B.I3S_DATA=3]="I3S_DATA",B[B.SYMBOLOGY=4]="SYMBOLOGY";const x=(()=>{const B=new Array;return B[D.ELEVATION]=10,B[D.BASEMAP]=10,B[D.I3S_INDEX]=10,B[D.I3S_DATA]=10,B[D.SYMBOLOGY]=5,B})(),w=30},24229:(qe,xe,T)=>{"use strict";T.d(xe,{W8:()=>$,kD:()=>G});var D=T(99770),x=T(84161),w=T(28093),B=T(90014);function G(ie,X,Z,Q){return function oe(ie,X,Z,Q){Q.clip[0]=0,Q.clip[1]=Z?Q.len:Number.MAX_VALUE;for(let J=0;J<ie.length;J++)if(!ae(ie[J],X,Q))return!1;return!0}(ie,X,Z,function ue(ie,X,Z,Q){const J=re;return ie?(Z&&Q&&(J.len=(0,x.i)(X,Z)),(0,x.c)(J.dir,ie)):Q?(J.len=(0,x.i)(X,Z),(0,x.b)(J.dir,Z,X),(0,x.g)(J.dir,J.dir,1/J.len)):((0,x.b)(J.dir,Z,X),(0,x.n)(J.dir,J.dir)),J}(Q,X,Z,!0))}function $(ie,X,Z,Q){const J=(0,x.e)(Z,(0,x.b)(ie,Q,X));return(0,x.a)(ie,X,(0,x.g)(ie,Z,J))}const re={dir:(0,w.c)(),len:0,clip:(0,D.a)()};function ae(ie,X,Z){const Q=(0,x.e)((0,B.mJ)(ie),Z.dir),J=-(0,B.jH)(ie,X);if(J<0&&Q>=0)return!1;if(Q>-1e-6&&Q<1e-6)return J>0;if((J<0||Q<0)&&!(J<0&&Q<0))return!0;const se=J/Q;return Q>0?se<Z.clip[1]&&(Z.clip[1]=se):se>Z.clip[0]&&(Z.clip[0]=se),Z.clip[0]<=Z.clip[1]}},98943:(qe,xe,T)=>{"use strict";T.d(xe,{EU:()=>ie,T:()=>G,ZA:()=>ae,_F:()=>$,bX:()=>ue,ek:()=>oe,mw:()=>H,pG:()=>Z,u1:()=>Y,uV:()=>X});var D=T(21286),x=T(84161),w=T(28093);function Y(ne){return Math.sqrt(Math.max(ne[0]*ne[0]+ne[4]*ne[4]+ne[8]*ne[8],ne[1]*ne[1]+ne[5]*ne[5]+ne[9]*ne[9],ne[2]*ne[2]+ne[6]*ne[6]+ne[10]*ne[10]))}function H(ne,ce){const de=Math.sqrt(ce[0]*ce[0]+ce[4]*ce[4]+ce[8]*ce[8]),me=Math.sqrt(ce[1]*ce[1]+ce[5]*ce[5]+ce[9]*ce[9]),_e=Math.sqrt(ce[2]*ce[2]+ce[6]*ce[6]+ce[10]*ce[10]);return(0,x.s)(ne,de,me,_e),ne}function G(ne,ce,de){de=de||ne;const me=(0,x.e)(ne,ce);(0,x.s)(de,ne[0]-me*ce[0],ne[1]-me*ce[1],ne[2]-me*ce[2]),(0,x.n)(de,de)}function $(ne,ce,de){Math.abs(ne[0])>Math.abs(ne[1])?(0,x.s)(ce,0,1,0):(0,x.s)(ce,1,0,0),(0,x.f)(de,ne,ce),(0,x.n)(ce,ce),(0,x.f)(ce,de,ne),(0,x.n)(de,de)}function ue(ne,ce,de,me,_e,he){const ye=ne+(ce-ne)*_e;return ye+(de+(me-de)*_e-ye)*he}function ae(ne,ce,de,me=(0,w.c)()){const _e=(0,x.l)(ne),he=(0,x.l)(ce),ye=(0,x.e)(ne,ce)/(_e*he);if(ye<.9999999999999999){const fe=Math.acos(ye),De=((1-de)*_e+de*he)/Math.sin(fe),ve=De/_e*Math.sin((1-de)*fe),Ce=De/he*Math.sin(de*fe);return(0,x.g)(ee,ne,ve),(0,x.g)(le,ce,Ce),(0,x.a)(me,ee,le)}return(0,x.h)(me,ne,ce,de)}function oe(ne,ce,de,me=(0,w.c)(),_e=(0,w.c)()){const he=(0,x.l)(ne),ye=(0,x.l)(ce),fe=(0,x.e)(ne,ce)/(he*ye);if(fe<.9999999999999999){const De=Math.acos(fe),ve=Math.sin(De),Ce=Math.sin(de*De),ge=Math.sin((1-de)*De),Te=(1-de)*he+de*ye;{const Le=Te/ve,je=Le/ye*Ce;(0,x.g)(ee,ne,Le/he*ge),(0,x.g)(le,ce,je),(0,x.a)(me,ee,le)}{const Le=1/he*(-Math.cos((1-de)*De)*De*Te+ge*(-he+ye));(0,x.g)(ee,ne,Le);const je=1/ye*(Math.cos(de*De)*De*Te+Ce*(-he+ye));(0,x.g)(le,ce,je),(0,x.a)(_e,ee,le),(0,x.g)(_e,_e,1/ve)}return _e}return(0,x.h)(me,ne,ce,de),(0,x.b)(_e,ce,ne),(0,x.n)(_e,_e),_e}function ie(ne,ce,de){ne=(0,x.n)(ee,ne),ce=(0,x.n)(le,ce);const me=(0,D.ZF)((0,x.e)(ne,ce));if(de){const _e=(0,x.f)(se,ne,ce);if((0,x.e)(_e,de)<0)return-me}return me}function X(ne){const ce=ne.length;return de=>{if(de<=ne[0][0])return ne[0][1];if(de>=ne[ce-1][0])return ne[ce-1][1];let me=1;for(;de>ne[me][0];)me++;const he=ne[me][0],ye=(he-de)/(he-ne[me-1][0]);return ye*ne[me-1][1]+(1-ye)*ne[me][1]}}function Z(ne,ce,de,me){(0,x.b)(Q,ce,ne),(0,x.b)(J,de,ne),(0,x.f)(me,Q,J),(0,x.n)(me,me),me[3]=-(0,x.e)(ne,me)}const Q=(0,w.c)(),J=(0,w.c)(),se=(0,w.c)(),ee=(0,w.c)(),le=(0,w.c)()},93394:(qe,xe,T)=>{"use strict";T.d(xe,{JF:()=>Ut,d9:()=>Xt,Qb:()=>hr,$e:()=>sr,Ue:()=>$t,fn:()=>ns,hZ:()=>gr,pn:()=>Jr,n3:()=>Gr,JH:()=>Kr,xz:()=>Tt,q0:()=>Rr,t8:()=>_r,mr:()=>vr});var D=T(30217),x=T(550),w=T(48977),B=T(56729),U=T(78451),W=T(84161),Y=T(14658),H=T(28093),$=(T(993),T(4794)),re=T(5548),ue=T(90014);const ae=1e-6,oe=[0,0,0],ie=[0,0,0];const Q=[0,0,0],J=[0,0,0],se=[0,0,0],ee=[0,0,0],le=[0,0,0],ne=[0,0,0],ce=[0,0,0],de=[0,0,0],he=[0,0,0],fe=[0,0],ve=[0,0,0],Ce=[0,0,0],ge=[0,0,0],Te=[0,0,0],Le=[0,0,0],je=[0,0,0];function ze(bt,Qt,qt,yr,jr,es){if(zt(Qt)<ae)return;kt(ve,qt,Qt),kt(Ce,yr,Qt),kt(ge,jr,Qt),Ae(bt,Qt,fe),Le[1]=fe[0],Te[1]=fe[1],je[1]=Te[1]-Le[1];const hs=[qt,yr,jr],Is=[ve,Ce,ge];for(let Yr=0;Yr<3;++Yr){Ae(bt,hs[Yr],fe),Le[0]=fe[0],Te[0]=fe[1],Ae(bt,Is[Yr],fe),Le[2]=fe[0],Te[2]=fe[1],je[0]=Te[0]-Le[0],je[2]=Te[2]-Le[2];const Rs=Ze(je);Rs<es.quality&&(Ft(es.b0,hs[Yr]),Ft(es.b1,Qt),Ft(es.b2,Is[Yr]),es.quality=Rs)}}const Ee=[0,0,0];function Ae(bt,Qt,qt){const{data:yr,size:jr}=bt;qt[0]=Number.POSITIVE_INFINITY,qt[1]=Number.NEGATIVE_INFINITY;for(let es=0;es<yr.length;es+=jr){const hs=yr[es]*Qt[0]+yr[es+1]*Qt[1]+yr[es+2]*Qt[2];qt[0]=Math.min(qt[0],hs),qt[1]=Math.max(qt[1],hs)}}function Be(bt,Qt,qt){Ft(qt.center,bt),Mt(qt.halfSize,Qt,.5),qt.quaternion[0]=0,qt.quaternion[1]=0,qt.quaternion[2]=0,qt.quaternion[3]=1}const Pe=[0,0,0],Oe=[0,0,0],Ke=[0,0,0],Ve=[0,0,0],Ne=[0,0,0],Ie=[0,0,0];function Se(bt,Qt,qt,yr,jr,es){Ae(bt,Qt,fe),jr[0]=fe[0],es[0]=fe[1],Ae(bt,qt,fe),jr[1]=fe[0],es[1]=fe[1],Ae(bt,yr,fe),jr[2]=fe[0],es[2]=fe[1]}const He=[0,0,0],$e=[1,0,0,0,1,0,0,0,1],et=[0,0,0];function nt(bt,Qt,qt,yr,jr,es,hs){$e[0]=bt[0],$e[1]=bt[1],$e[2]=bt[2],$e[3]=Qt[0],$e[4]=Qt[1],$e[5]=Qt[2],$e[6]=qt[0],$e[7]=qt[1],$e[8]=qt[2],function Pr(bt,Qt){const qt=Qt[0]+Qt[4]+Qt[8];if(qt>0){let yr=Math.sqrt(qt+1);bt[3]=.5*yr,yr=.5/yr,bt[0]=(Qt[5]-Qt[7])*yr,bt[1]=(Qt[6]-Qt[2])*yr,bt[2]=(Qt[1]-Qt[3])*yr}else{let yr=0;Qt[4]>Qt[0]&&(yr=1),Qt[8]>Qt[3*yr+yr]&&(yr=2);const jr=(yr+1)%3,es=(yr+2)%3;let hs=Math.sqrt(Qt[3*yr+yr]-Qt[3*jr+jr]-Qt[3*es+es]+1);bt[yr]=.5*hs,hs=.5/hs,bt[3]=(Qt[3*jr+es]-Qt[3*es+jr])*hs,bt[jr]=(Qt[3*jr+yr]+Qt[3*yr+jr])*hs,bt[es]=(Qt[3*es+yr]+Qt[3*yr+es])*hs}}(hs.quaternion,$e),lt(et,yr,jr),Mt(et,et,.5),Mt(hs.center,bt,et[0]),Mt(He,Qt,et[1]),lt(hs.center,hs.center,He),Mt(He,qt,et[2]),lt(hs.center,hs.center,He),Mt(hs.halfSize,es,.5)}class Xe{constructor(Qt){this.minVert=new Array(7),this.maxVert=new Array(7),this.buffer=new ArrayBuffer(448);let yr=0;this.minProj=new Float64Array(this.buffer,yr,7),yr+=56,this.maxProj=new Float64Array(this.buffer,yr,7),yr+=56;for(let Yr=0;Yr<7;++Yr)this.minVert[Yr]=new Float64Array(this.buffer,yr,3),yr+=24;for(let Yr=0;Yr<7;++Yr)this.maxVert[Yr]=new Float64Array(this.buffer,yr,3),yr+=24;for(let Yr=0;Yr<7;++Yr)this.minProj[Yr]=Number.POSITIVE_INFINITY,this.maxProj[Yr]=Number.NEGATIVE_INFINITY;const jr=new Array(7),es=new Array(7),{data:hs,size:Is}=Qt;for(let Yr=0;Yr<hs.length;Yr+=Is){let Rs=hs[Yr];Rs<this.minProj[0]&&(this.minProj[0]=Rs,jr[0]=Yr),Rs>this.maxProj[0]&&(this.maxProj[0]=Rs,es[0]=Yr),Rs=hs[Yr+1],Rs<this.minProj[1]&&(this.minProj[1]=Rs,jr[1]=Yr),Rs>this.maxProj[1]&&(this.maxProj[1]=Rs,es[1]=Yr),Rs=hs[Yr+2],Rs<this.minProj[2]&&(this.minProj[2]=Rs,jr[2]=Yr),Rs>this.maxProj[2]&&(this.maxProj[2]=Rs,es[2]=Yr),Rs=hs[Yr]+hs[Yr+1]+hs[Yr+2],Rs<this.minProj[3]&&(this.minProj[3]=Rs,jr[3]=Yr),Rs>this.maxProj[3]&&(this.maxProj[3]=Rs,es[3]=Yr),Rs=hs[Yr]+hs[Yr+1]-hs[Yr+2],Rs<this.minProj[4]&&(this.minProj[4]=Rs,jr[4]=Yr),Rs>this.maxProj[4]&&(this.maxProj[4]=Rs,es[4]=Yr),Rs=hs[Yr]-hs[Yr+1]+hs[Yr+2],Rs<this.minProj[5]&&(this.minProj[5]=Rs,jr[5]=Yr),Rs>this.maxProj[5]&&(this.maxProj[5]=Rs,es[5]=Yr),Rs=hs[Yr]-hs[Yr+1]-hs[Yr+2],Rs<this.minProj[6]&&(this.minProj[6]=Rs,jr[6]=Yr),Rs>this.maxProj[6]&&(this.maxProj[6]=Rs,es[6]=Yr)}for(let Yr=0;Yr<7;++Yr){let Rs=jr[Yr];Ft(this.minVert[Yr],hs,Rs),Rs=es[Yr],Ft(this.maxVert[Yr],hs,Rs)}}}class rt{constructor(){this.b0=[1,0,0],this.b1=[0,1,0],this.b2=[0,0,1],this.quality=0}}function Ze(bt){return bt[0]*bt[1]+bt[0]*bt[2]+bt[1]*bt[2]}function lt(bt,Qt,qt){bt[0]=Qt[0]+qt[0],bt[1]=Qt[1]+qt[1],bt[2]=Qt[2]+qt[2]}function st(bt,Qt,qt){bt[0]=Qt[0]-qt[0],bt[1]=Qt[1]-qt[1],bt[2]=Qt[2]-qt[2]}function Mt(bt,Qt,qt){bt[0]=Qt[0]*qt,bt[1]=Qt[1]*qt,bt[2]=Qt[2]*qt}function Ft(bt,Qt,qt=0){bt[0]=Qt[qt+0],bt[1]=Qt[qt+1],bt[2]=Qt[qt+2]}function kt(bt,Qt,qt){const yr=Qt[0],jr=Qt[1],es=Qt[2],hs=qt[0],Is=qt[1],Yr=qt[2];bt[0]=jr*Yr-es*Is,bt[1]=es*hs-yr*Yr,bt[2]=yr*Is-jr*hs}function wt(bt,Qt){const qt=Qt[0]*Qt[0]+Qt[1]*Qt[1]+Qt[2]*Qt[2];if(qt>0){const yr=1/Math.sqrt(qt);bt[0]=Qt[0]*yr,bt[1]=Qt[1]*yr,bt[2]=Qt[2]*yr}}function zt(bt){return bt[0]*bt[0]+bt[1]*bt[1]+bt[2]*bt[2]}function Zt(bt,Qt){const qt=Qt[0]-bt[0],yr=Qt[1]-bt[1],jr=Qt[2]-bt[2];return qt*qt+yr*yr+jr*jr}function ar(bt,Qt){return bt[0]*Qt[0]+bt[1]*Qt[1]+bt[2]*Qt[2]}const kr=(0,U.a)(),ss=(0,H.c)(),os=(0,H.c)(),pt=((0,$.c)(),(0,x.c)());class Ut{constructor(Qt){this.buffer=new ArrayBuffer(56*Qt),this.obbs=new Array(Qt);for(let Is=0;Is<Qt;Is++)this.obbs[Is]={center:(0,H.b)(this.buffer,56*Is+0),halfSize:(0,Y.b)(this.buffer,56*Is+24),quaternion:(0,B.b)(this.buffer,56*Is+36)}}}function $t(bt=[0,0,0],Qt=[-1,-1,-1],qt=[0,0,0,1]){return{center:(0,H.a)(bt),halfSize:(0,Y.a)(Qt),quaternion:(0,B.a)(qt)}}function Xt(bt){return $t(bt.center,bt.halfSize,bt.quaternion)}function _r(bt,Qt){(0,W.c)(Qt.center,bt.center),(0,W.c)(Qt.halfSize,bt.halfSize),(0,w.a)(Qt.quaternion,bt.quaternion)}function hr(bt,Qt){return function X(bt,Qt){const{data:qt,size:yr}=bt,jr=qt.length/yr;if(jr<=0)return;const es=new Xe(bt);lt(oe,es.minProj,es.maxProj),Mt(oe,oe,.5),st(ie,es.maxProj,es.minProj);const hs=Ze(ie),Is=new rt;Is.quality=hs,jr<14&&(bt={data:new Float64Array(es.buffer,112,42),size:3});const Yr=[0,0,0],Rs=[0,0,0],Zi=[0,0,0],Cr=[0,0,0],as=[0,0,0],ps=[0,0,0],zs=[0,0,0];switch(function Z(bt,Qt,qt,yr,jr,es,hs,Is,Yr,Rs){return function _e(bt,Qt,qt){let yr=Zt(bt.maxVert[0],bt.minVert[0]),jr=0;for(let es=1;es<7;++es){const hs=Zt(bt.maxVert[es],bt.minVert[es]);hs>yr&&(yr=hs,jr=es)}Ft(Qt,bt.minVert[jr]),Ft(qt,bt.maxVert[jr])}(bt,yr,jr),Zt(yr,jr)<ae?1:(st(hs,yr,jr),wt(hs,hs),function ye(bt,Qt,qt,yr){const{data:jr,size:es}=bt;let hs=Number.NEGATIVE_INFINITY,Is=0;for(let Yr=0;Yr<jr.length;Yr+=es){he[0]=jr[Yr]-Qt[0],he[1]=jr[Yr+1]-Qt[1],he[2]=jr[Yr+2]-Qt[2];const Rs=qt[0]*he[0]+qt[1]*he[1]+qt[2]*he[2],Cr=he[0]*he[0]+he[1]*he[1]+he[2]*he[2]-Rs*Rs/(qt[0]*qt[0]+qt[1]*qt[1]+qt[2]*qt[2]);Cr>hs&&(hs=Cr,Is=Yr)}return Ft(yr,jr,Is),hs}(Qt,yr,hs,es)<ae?2:(st(Is,jr,es),wt(Is,Is),st(Yr,es,yr),wt(Yr,Yr),kt(qt,Is,hs),wt(qt,qt),ze(Qt,qt,hs,Is,Yr,Rs),0))}(es,bt,zs,Yr,Rs,Zi,Cr,as,ps,Is)){case 1:return void Be(oe,ie,Qt);case 2:return void function We(bt,Qt,qt){Ft(Pe,Qt),Math.abs(Qt[0])>Math.abs(Qt[1])&&Math.abs(Qt[0])>Math.abs(Qt[2])?Pe[0]=0:Math.abs(Qt[1])>Math.abs(Qt[2])?Pe[1]=0:Pe[2]=0,zt(Pe)<ae&&(Pe[0]=Pe[1]=Pe[2]=1),kt(Oe,Qt,Pe),wt(Oe,Oe),kt(Ke,Qt,Oe),wt(Ke,Ke),Se(bt,Qt,Oe,Ke,Ve,Ne),st(Ie,Ne,Ve),nt(Qt,Oe,Ke,Ve,Ne,Ie,qt)}(bt,Cr,Qt)}(function me(bt,Qt,qt,yr,jr,es,hs,Is,Yr){(function De(bt,Qt,qt,yr,jr){!function we(bt,Qt,qt,yr,jr){const{data:es,size:hs}=bt;Ft(yr,es),Ft(jr,yr),qt[0]=ar(Ee,Qt),qt[1]=qt[0];for(let Is=hs;Is<es.length;Is+=hs){const Yr=es[Is]*Qt[0]+es[Is+1]*Qt[1]+es[Is+2]*Qt[2];Yr<qt[0]&&(qt[0]=Yr,Ft(yr,es,Is)),Yr>qt[1]&&(qt[1]=Yr,Ft(jr,es,Is))}}(bt,Qt,fe,jr,yr);const es=ar(qt,Qt);fe[1]-ae<=es&&(yr[0]=void 0),fe[0]+ae>=es&&(jr[0]=void 0)})(bt,Qt,qt,Q,J),void 0!==Q[0]&&(st(se,Q,qt),wt(se,se),st(ee,Q,yr),wt(ee,ee),st(le,Q,jr),wt(le,le),kt(ne,ee,es),wt(ne,ne),kt(ce,le,hs),wt(ce,ce),kt(de,se,Is),wt(de,de),ze(bt,ne,es,ee,se,Yr),ze(bt,ce,hs,le,ee,Yr),ze(bt,de,Is,se,le,Yr)),void 0!==J[0]&&(st(se,J,qt),wt(se,se),st(ee,J,yr),wt(ee,ee),st(le,J,jr),wt(le,le),kt(ne,ee,es),wt(ne,ne),kt(ce,le,hs),wt(ce,ce),kt(de,se,Is),wt(de,de),ze(bt,ne,es,ee,se,Yr),ze(bt,ce,hs,le,ee,Yr),ze(bt,de,Is,se,le,Yr))})(bt,zs,Yr,Rs,Zi,Cr,as,ps,Is),Se(bt,Is.b0,Is.b1,Is.b2,Ve,Ne);const As=[0,0,0];st(As,Ne,Ve),Is.quality=Ze(As),Is.quality<hs?nt(Is.b0,Is.b1,Is.b2,Ve,Ne,As,Qt):Be(oe,ie,Qt)}(bt,Qt=Qt||$t()),Qt}function gr(bt,Qt){const qt=(0,ue.jH)(Qt,bt.center),yr=Tt(bt,(0,ue.mJ)(Qt));return qt>yr?1:qt<-yr?-1:0}function vr(bt,Qt){Qt||(Qt=(0,re.Ue)());const qt=(0,D.g)(pt,bt.quaternion),yr=bt.halfSize[0]*Math.abs(qt[0])+bt.halfSize[1]*Math.abs(qt[3])+bt.halfSize[2]*Math.abs(qt[6]),jr=bt.halfSize[0]*Math.abs(qt[1])+bt.halfSize[1]*Math.abs(qt[4])+bt.halfSize[2]*Math.abs(qt[7]),es=bt.halfSize[0]*Math.abs(qt[2])+bt.halfSize[1]*Math.abs(qt[5])+bt.halfSize[2]*Math.abs(qt[8]);return Qt[0]=bt.center[0]-yr,Qt[1]=bt.center[1]-jr,Qt[2]=bt.center[2]-es,Qt[3]=bt.center[0]+yr,Qt[4]=bt.center[1]+jr,Qt[5]=bt.center[2]+es,Qt}function Kr(bt,Qt){return(0,ue.jH)(Qt,bt.center)-Tt(bt,(0,ue.mJ)(Qt))}function Gr(bt,Qt){return(0,ue.jH)(Qt,bt.center)+Tt(bt,(0,ue.mJ)(Qt))}function Jr(bt,Qt){return gr(bt,Qt[0])<=0&&gr(bt,Qt[1])<=0&&gr(bt,Qt[2])<=0&&gr(bt,Qt[3])<=0&&gr(bt,Qt[4])<=0&&gr(bt,Qt[5])<=0}function ns(bt,Qt,qt,yr=0){(0,w.c)(kr,bt.quaternion),(0,W.b)(ss,Qt,bt.center);const jr=(0,W.q)(ss,ss,kr),es=(0,W.q)(os,qt,kr);let hs=-1/0,Is=1/0;for(let Yr=0;Yr<3;Yr++)if(Math.abs(es[Yr])>1e-6){const Rs=(yr+bt.halfSize[Yr]-jr[Yr])/es[Yr],Zi=(-yr-bt.halfSize[Yr]-jr[Yr])/es[Yr];hs=Math.max(hs,Math.min(Rs,Zi)),Is=Math.min(Is,Math.max(Rs,Zi))}else if(jr[Yr]>bt.halfSize[Yr]+yr||jr[Yr]<-bt.halfSize[Yr]-yr)return!1;return hs<=Is}function Tt(bt,Qt){(0,w.c)(kr,bt.quaternion),(0,W.q)(ss,Qt,kr);const qt=bt.halfSize;return Math.abs(ss[0]*qt[0])+Math.abs(ss[1]*qt[1])+Math.abs(ss[2]*qt[2])}function sr(bt,Qt){for(let qt=0;qt<8;++qt){const yr=Qt[qt];yr[0]=1&qt?-bt.halfSize[0]:bt.halfSize[0],yr[1]=2&qt?-bt.halfSize[1]:bt.halfSize[1],yr[2]=4&qt?-bt.halfSize[2]:bt.halfSize[2],(0,W.q)(yr,yr,bt.quaternion),(0,W.a)(yr,yr,bt.center)}}function Rr(bt){return(0,W.u)(bt.halfSize)}(()=>{const bt=new Int8Array(162);let Qt=0;const qt=yr=>{for(let jr=0;jr<yr.length;jr++)bt[Qt+jr]=yr[jr];Qt+=6};qt([6,2,3,1,5,4]),qt([0,2,3,1,5,4]),qt([0,2,3,7,5,4]),qt([0,1,3,2,6,4]),qt([0,1,3,2,0,0]),qt([0,1,5,7,3,2]),qt([0,1,3,7,6,4]),qt([0,1,3,7,6,2]),qt([0,1,5,7,6,2]),qt([0,1,5,4,6,2]),qt([0,1,5,4,0,0]),qt([0,1,3,7,5,4]),qt([0,2,6,4,0,0]),qt([0,0,0,0,0,0]),qt([1,3,7,5,0,0]),qt([2,3,7,6,4,0]),qt([2,3,7,6,0,0]),qt([2,3,1,5,7,6]),qt([0,1,5,7,6,2]),qt([0,1,5,7,6,4]),qt([0,1,3,7,6,4]),qt([4,5,7,6,2,0]),qt([4,5,7,6,0,0]),qt([4,5,1,3,7,6]),qt([0,2,3,7,5,4]),qt([6,2,3,7,5,4]),qt([6,2,3,1,5,4])})()},41632:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>D,q:()=>x});const D={value:.5,readOnly:!0},x={readOnly:!0,value:.5,get(){return this.updating?this.updatingProgressValue:1}}},90793:(qe,xe,T)=>{"use strict";T.d(xe,{T:()=>w,j:()=>B});var D=T(67857),x=T(91480);function w(U){return(0,x.nn)(U)&&U.intersector===D.q7.TERRAIN&&!!U.target}function B(U){return(0,x.nn)(U)&&U.intersector===D.q7.OVERLAY&&!!U.target}},61034:(qe,xe,T)=>{"use strict";T.d(xe,{$e:()=>W,Jk:()=>H,aV:()=>Y});var W,$,D=T(21286),x=T(65401),w=T(75224),B=T(42743),U=T(30993);($=W||(W={}))[$.None=0]="None",$[$.ColorAndWater=1]="ColorAndWater",$[$.Highlight=2]="Highlight",$[$.Occluded=3]="Occluded";class Y{constructor(re,ue){this.index=re,this.renderTargets=ue,this._extent=(0,x.Ue)(),this.resolution=0,this.renderLocalOrigin=(0,U.al)(0,0,0,"O"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new G,this.validTargets=null,this.hasDrapedFeatureSource=!1,this.hasDrapedRasterSource=!1,this.hasTargetWithoutRasterImage=!1,this.index=re,this.validTargets=new Array(ue.renderTargets.length).fill(!1)}get extent(){return this._extent}getValidTexture(re){return this.validTargets[re]?this.renderTargets.getTarget(re).getTexture():null}get _needsColorWithoutRasterImage(){return this.hasDrapedRasterSource&&this.hasDrapedFeatureSource&&this.hasTargetWithoutRasterImage}getColorTexture(re){const ue=this.renderTargets.getTarget(re===W.ColorAndWater?w.NH.Color:re===W.Highlight?w.NH.Highlight:w.NH.Occluded);return ue?ue.getTexture():null}getColorTextureNoRasterImage(){return this._needsColorWithoutRasterImage?this.getValidTexture(w.NH.ColorNoRasterImage):this.hasDrapedFeatureSource?this.getValidTexture(w.NH.Color):null}getNormalTexture(re){const ue=re===W.ColorAndWater?this.renderTargets.getTarget(w.NH.Water):null;return ue?ue.getTexture():null}draw(re,ue){const ae=this.computeRenderTargetValidityBitfield();for(const oe of this.renderTargets.renderTargets)this.validTargets[oe.type]=!(oe.type===w.NH.ColorNoRasterImage&&!this._needsColorWithoutRasterImage)&&re.drawTarget(this,oe,ue);return ae^this.computeRenderTargetValidityBitfield()?B.Yg.CHANGED:B.Yg.UNCHANGED}computeRenderTargetValidityBitfield(){const re=this.validTargets;return+re[w.NH.Color]|+re[w.NH.ColorNoRasterImage]<<1|+re[w.NH.Highlight]<<2|+re[w.NH.Water]<<3|+re[w.NH.Occluded]<<4}setupGeometryViewsCyclical(re){this.setupGeometryViewsDirect();const ue=.001*re.range;if(this._extent[0]-ue<=re.min){const ae=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,x.cv)(this._extent,re.range,0,ae)}if(this._extent[2]+ue>=re.max){const ae=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,x.cv)(this._extent,-re.range,0,ae)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,(0,x.JG)(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let re=0;re<this.canvasGeometries.numViews;re++){const ue=this.canvasGeometries.extents[re];if(ue[0]!==ue[2]&&ue[1]!==ue[3])return!0}return!1}applyViewport(re){re.setViewport(this.index===w.fu.INNER?0:this.resolution,0,this.resolution,this.resolution)}}function H($,re,ue){return Math.min((0,D.Sf)(Math.max($,re)+256),ue)}class G{constructor(){this.extents=[(0,x.Ue)(),(0,x.Ue)(),(0,x.Ue)()],this.numViews=0}}},64835:(qe,xe,T)=>{"use strict";T.d(xe,{Rn:()=>Xe,CB:()=>He,Qi:()=>rt});var D=T(15861),x=T(17626),w=T(14517),B=T(61885),U=T(72392),W=T(88159),Y=T(62208),H=T(77029),G=T(32917),$=T(28862),re=T(77712),ie=(T(85931),T(8314),T(90912),T(76898)),X=T(28347),Z=T(28093),Q=T(59617),J=T(62600),se=T(93605),ee=T(75224),le=T(61034),ne=T(9545),ce=T(67969),de=T(85775);class me{constructor(lt,st){this.size=(0,ne.c)(),this._fbo=null,this._fbo=new de.X(lt,{colorTarget:ce.Lm.TEXTURE,depthStencilTarget:ce.OU.NONE},{target:ce.No.TEXTURE_2D,pixelFormat:ce.VI.RGBA,dataType:ce.Br.UNSIGNED_BYTE,wrapMode:ce.e8.CLAMP_TO_EDGE,samplingMode:ce.cw.LINEAR_MIPMAP_LINEAR,hasMipmap:st,maxAnisotropy:8,width:0,height:0})}dispose(){this._fbo=(0,Y.O3)(this._fbo)}getTexture(){return this._fbo?this._fbo.colorTexture:null}isValid(){return null!==this._fbo}resize(lt,st){this.size[0]=lt,this.size[1]=st,this._fbo.resize(this.size[0],this.size[1])}bind(lt){lt.bindFramebuffer(this._fbo)}generateMipMap(){this._fbo.colorTexture.descriptor.hasMipmap&&this._fbo.colorTexture.generateMipmap()}disposeRenderTargetMemory(){this._fbo?.resize(0,0)}get gpuMemoryUsage(){return this._fbo?.gpuMemoryUsage??0}}var _e=T(91263);class he{constructor(lt){const st=(Mt,Ft,kt=!0)=>({type:Ft,fbo:new me(lt,kt),renderPass:Mt,valid:!1,lastUsed:1/0});this.renderTargets=[st(_e.C.MATERIAL,ee.NH.Color),st(_e.C.MATERIAL,ee.NH.ColorNoRasterImage),st(_e.C.MATERIAL_HIGHLIGHT,ee.NH.Highlight,!1),st(_e.C.MATERIAL_NORMAL,ee.NH.Water),st(_e.C.MATERIAL,ee.NH.Occluded)]}getTarget(lt){return this.renderTargets[lt].fbo}dispose(){for(const lt of this.renderTargets)lt.fbo.dispose()}disposeRenderTargetMemory(){for(const lt of this.renderTargets)lt.fbo.disposeRenderTargetMemory()}validateUsageForTarget(lt,st,Mt){if(lt)st.lastUsed=Mt;else if(Mt-st.lastUsed>ye)st.fbo.disposeRenderTargetMemory(),st.lastUsed=1/0;else if(st.lastUsed<1/0)return!0;return!1}get gpuMemoryUsage(){return this.renderTargets.reduce((lt,st)=>lt+st.fbo.gpuMemoryUsage,0)}}const ye=1e3;var fe=T(45323),De=T(2286),ve=T(42743),Ce=T(59856),ge=T(50907),Te=T(19597),Le=T(57851),je=T(40723),ze=T(64624),Ee=T(5894),Ae=T(53319),we=T(14411),Be=T(93783),Pe=T(80855),Oe=T(97825),Ke=T(82244),Ve=T(51899),Ne=T(54580),Ie=T(87091),We=T(55086),Se=T(26906);let He=class extends((0,De.TF)(w.Z)){constructor(Ze){super(Ze),this._overlays=null,this._overlayRenderTarget=null,this._hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._handles=new U.Z,this._frameTask=Ie.sq,this._drapeSourceRenderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedDrapeSourceRenderers=new H.Z,this._rctx=null,this._materialRepository=null,this._screenToWorldRatio=1,this._localOriginFactory=null,this.worldToPCSRatio=1,this.events=new B.Z,this.longitudeCyclical=null}get _bindParameters(){return this._renderContext.bindParameters}get rctx(){return this._rctx}get materialRepository(){return this._materialRepository}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}initialize(){const Ze=this.view._stage.renderView;this._rctx=Ze.renderingContext;const lt=Ze.waterTextureRepository;this._stippleTextureRepository=new Ve.h(Ze.renderingContext),this._shaderTechniqueRepository=new fe.M({rctx:this._rctx,viewingMode:Q.JY.Local,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:lt}),this._renderContext=new ze.Y(this._rctx,new Ae.l(this._rctx,this.view.state.viewingMode),new Be.L(this._shaderTechniqueRepository,this._rctx,()=>{})),this._handles.add([(0,G.YP)(()=>lt.updating,()=>this.events.emit("content-changed"),G.tX),(0,G.YP)(()=>this.spatialReference,st=>this._localOriginFactory=new Le.C(st),G.tX),(0,G.on)(()=>this.view.allLayerViews,"after-changes",()=>this._sortedDrapeSourceRenderersDirty=!0)]),this._materialRepository=new ge.h(Ze.textureRepository,this._shaderTechniqueRepository,st=>{(st.renderOccluded&rt)>0!==this._rendersOccluded&&this._updateRendersOccluded(),this.events.emit("content-changed"),this.notifyChange("updating")},()=>this.events.emit("content-changed")),this._bindParameters.slot=Ee.r.DRAPED_MATERIAL,this._bindParameters.highlightDepthTexture=(0,Te.hf)(this._rctx),this._bindParameters.camera=it,this._bindParameters.transparencyPassType=ve.Am.NONE,this._bindParameters.lighting.groundLightingFactor=1,this._bindParameters.lighting.globalFactor=0,this._bindParameters.lighting.set([new Ke.Mi((0,Z.f)(1,1,1))]),this._frameTask=this.view.resourceController.scheduler.registerTask(Ie.T8.STAGE,this),this._handles.add(this._frameTask)}dispose(){this._handles.destroy(),this._drapeSourceRenderers.forEach(Ze=>Ze.destroy()),this._drapeSourceRenderers.clear(),this._debugTextureTechnique=(0,Y.RY)(this._debugTextureTechnique),this._debugPatternTexture=(0,Y.O3)(this._debugPatternTexture),this._bindParameters.highlightDepthTexture=(0,Y.O3)(this._bindParameters.highlightDepthTexture),this._shaderTechniqueRepository=(0,Y.O3)(this._shaderTechniqueRepository),this._temporaryFBO=(0,Y.O3)(this._temporaryFBO),this._quadVAO=(0,Y.O3)(this._quadVAO),this.disposeOverlays()}get updating(){return this._sortedDrapeSourceRenderersDirty||this._frameTask.updating||(0,W.oE)(this._drapeSourceRenderers,Ze=>Ze.updating)}get hasOverlays(){return(0,Y.pC)(this._overlays)&&(0,Y.pC)(this._overlayRenderTarget)}get gpuMemoryUsage(){return(0,Y.pC)(this._overlayRenderTarget)?this._overlayRenderTarget.gpuMemoryUsage:0}createGeometryDrapeSourceRenderer(Ze){return this.createDrapeSourceRenderer(Ze,we.S)}createDrapeSourceRenderer(Ze,lt,st){const Mt=this._drapeSourceRenderers.get(Ze);(0,Y.pC)(Mt)&&Mt.destroy();const Ft=new lt({...st,rendererContext:this,drapeSource:Ze});return this._drapeSourceRenderers.set(Ze,Ft),this._sortedDrapeSourceRenderersDirty=!0,"fullOpacity"in Ze&&this._handles.add((0,G.YP)(()=>Ze.fullOpacity,()=>this.events.emit("content-changed")),Ze),Ft}removeDrapeSourceRenderer(Ze){if((0,Y.Wi)(Ze))return;const lt=this._drapeSourceRenderers.get(Ze);(0,Y.Wi)(lt)||(this._sortedDrapeSourceRenderersDirty=!0,this._drapeSourceRenderers.delete(Ze),this._handles.remove(Ze),lt.destroy())}collectUnusedRenderTargetMemory(Ze){let lt=!1;if((0,Y.pC)(this._overlayRenderTarget))for(const st of this._overlayRenderTarget.renderTargets)lt=this._overlayRenderTarget.validateUsageForTarget(this.overlays[0].validTargets[st.type]||!this.overlays[1].validTargets[st.type],st,Ze)||lt;return lt}get overlays(){return(0,Y.Pt)(this._overlays,[])}ensureDrapeTargets(Ze){(0,Y.pC)(this._overlays)&&this._overlays.forEach(lt=>{lt.hasTargetWithoutRasterImage=(0,$.f)(Ze,st=>st.drapeTargetType===J.a.WithoutRasterImage)})}ensureDrapeSources(Ze){(0,Y.pC)(this._overlays)&&this._overlays.forEach(lt=>{lt.hasDrapedFeatureSource=(0,$.f)(Ze,st=>st.drapeSourceType===J.L.Features),lt.hasDrapedRasterSource=(0,$.f)(Ze,st=>st.drapeSourceType===J.L.RasterImage)})}ensureOverlays(Ze,lt){(0,Y.Wi)(this._overlays)&&(this._overlayRenderTarget=new he(this._rctx),this._overlays=[new le.aV(ee.fu.INNER,this._overlayRenderTarget),new le.aV(ee.fu.OUTER,this._overlayRenderTarget)]),this.ensureDrapeTargets(Ze),this.ensureDrapeSources(lt)}disposeOverlays(){this._overlays=null,this._overlayRenderTarget=(0,Y.O3)(this._overlayRenderTarget),this.events.emit("textures-disposed")}get running(){return this.updating}runTask(Ze,lt=(()=>!0)){this._frameTask.processQueue(Ze),Ze.done||this._processDrapeSources(Ze,lt)}_processDrapeSources(Ze,lt){let st=!1;for(const[Mt,Ft]of this._drapeSourceRenderers){if(Ze.done)break;(Mt.destroyed||lt(Mt))&&Ft.commitChanges()&&(st=!0,Ze.madeProgress())}this._updateSortedDrapeSourceRenderers(),st&&((0,Y.pC)(this._overlays)&&0===this._drapeSourceRenderers.size&&this.disposeOverlays(),this.notifyChange("updating"),this.events.emit("content-changed"),this._updateHasHighlights(),this._updateRendersOccluded(),this._updateHasWater())}processSyncDrapeSources(){this._processDrapeSources(Ie.G5,Ze=>Ze.updatePolicy===ve.jq.SYNC)}isEmpty(){if(se.Z.OVERLAY_DRAW_DEBUG_TEXTURE)return!1;for(const Ze of this._drapeSourceRenderers.values())if(!Ze.isEmpty)return!1;return!0}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}updateAnimation(Ze){let lt=!1;return this._drapeSourceRenderers.forEach(st=>lt=st.updateAnimation(Ze)||lt),lt}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}drawTarget(Ze,lt,st){const Mt=Ze.canvasGeometries;if(0===Mt.numViews)return!1;this._screenToWorldRatio=st*Ze.mapUnitsPerPixel;const Ft=lt.renderPass;if(this.isEmpty()||Ft===_e.C.MATERIAL_HIGHLIGHT&&!this.hasHighlights||Ft===_e.C.MATERIAL_NORMAL&&!this.hasWater||!Ze.hasSomeSizedView())return!1;const kt=lt.fbo;if(!kt.isValid())return!1;const wt=2*Ze.resolution,zt=Ze.resolution;kt.resize(wt,zt);const Zt=this._rctx;it.pixelRatio=Ze.pixelRatio*st,this._renderContext.pass=Ft,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToPCSRatio=this._screenToWorldRatio*this.worldToPCSRatio,this._bindParameters.slot=Ft===_e.C.MATERIAL_NORMAL?Ee.r.DRAPED_WATER:Ee.r.DRAPED_MATERIAL,Ze.applyViewport(this._rctx),kt.bind(Zt),Ze.index===ee.fu.INNER&&(Zt.setClearColor(0,0,0,0),Zt.clearSafe(ce.lk.COLOR_BUFFER_BIT));const ar=lt.type===ee.NH.ColorNoRasterImage?$e.ExcludeRasterImage:lt.type===ee.NH.Occluded?$e.OccludedOnly:$e.Normal;if(ar===$e.OccludedOnly&&(this._renderContext.renderOccludedMask=rt),se.Z.OVERLAY_DRAW_DEBUG_TEXTURE&&ar!==$e.OccludedOnly)for(let Pr=0;Pr<Mt.numViews;Pr++)this._setViewParameters(Mt.extents[Pr],Ze,it),this._drawDebugTexture(Ze.resolution,nt[Ze.index]);return this._drapeSourceRenderers.size>0&&this._sortedDrapeSourceRenderers.forAll(({drapeSource:Pr,renderer:kr})=>{if(ar===$e.ExcludeRasterImage&&Pr.drapeSourceType===J.L.RasterImage)return;const{fullOpacity:ss}=Pr,os=(0,Y.pC)(ss)&&ss<1&&Ft===_e.C.MATERIAL;os&&(this.bindTemporaryFramebuffer(this._rctx,wt,zt),Zt.clearSafe(ce.lk.COLOR_BUFFER_BIT));for(let Hr=0;Hr<Mt.numViews;Hr++)this._setViewParameters(Mt.extents[Hr],Ze,it),kr.render(this._renderContext,this._bindParameters);os&&(0,Y.pC)(this._temporaryFBO)&&(kt.bind(Zt),this.view._stage.renderView.compositingHelper.composite(this._renderContext.bindParameters,this._temporaryFBO.getTexture(),Ne.Fv.PremultipliedAlpha,ss,Ne.v3.OverlayWithTransparency,Ze.index))}),Zt.bindFramebuffer(null),kt.generateMipMap(),this._renderContext.resetRenderOccludedMask(),!0}bindTemporaryFramebuffer(Ze,lt,st){(0,Y.Wi)(this._temporaryFBO)&&(this._temporaryFBO=new me(Ze,!1)),this._temporaryFBO.resize(lt,st),this._temporaryFBO.bind(Ze)}reloadShaders(){var Ze=this;return(0,D.Z)(function*(){yield Ze._shaderTechniqueRepository.reloadAll()})()}notifyContentChanged(){this.events.emit("content-changed")}intersect(Ze,lt,st,Mt){let Ft=0;for(const kt of this._drapeSourceRenderers.values())Ft=kt.intersect?.(Ze,lt,st,Mt,Ft)??Ft}_updateSortedDrapeSourceRenderers(){if(!this._sortedDrapeSourceRenderersDirty||(this._sortedDrapeSourceRenderersDirty=!1,this._sortedDrapeSourceRenderers.clear(),0===this._drapeSourceRenderers.size))return;const Ze=this.view.map.allLayers;this._drapeSourceRenderers.forEach((lt,st)=>{const Mt=Ze.indexOf(st.layer);this._sortedDrapeSourceRenderers.push(new et(st,lt,Mt<0?1/0:Mt))}),this._sortedDrapeSourceRenderers.sort((lt,st)=>lt.index-st.index)}_setViewParameters(Ze,lt,st){st.viewport[0]=st.viewport[1]=0,st.viewport[2]=st.viewport[3]=lt.resolution,(0,X.q)(st.projectionMatrix,0,Ze[2]-Ze[0],0,Ze[3]-Ze[1],st.near,st.far),(0,X.f)(st.viewMatrix,[-Ze[0],-Ze[1],0]),this._bindParameters.camera=st}_updateHasWater(){const Ze=(0,W.oE)(this._drapeSourceRenderers,lt=>lt.hasWater);Ze!==this._hasWater&&(this._hasWater=Ze,this.events.emit("has-water",Ze))}_updateHasHighlights(){const Ze=(0,W.oE)(this._drapeSourceRenderers,lt=>lt.hasHighlights);Ze!==this._hasHighlights&&(this._hasHighlights=Ze,this.events.emit("has-highlights",Ze))}_updateRendersOccluded(){const Ze=(0,W.oE)(this._drapeSourceRenderers,lt=>lt.rendersOccluded);Ze!==this._rendersOccluded&&(this._rendersOccluded=Ze,this.events.emit("renders-occluded",Ze))}_drawDebugTexture(Ze,lt){this._ensureDebugPatternResources(Ze,Ze);const st=this._rctx,Mt=st.bindTechnique(this._debugTextureTechnique);Mt.setUniform4f("uColor",lt[0],lt[1],lt[2],1),Mt.bindTexture("tex",this._debugPatternTexture),st.bindVAO(this._quadVAO),st.drawArrays(ce.MX.TRIANGLE_STRIP,0,(0,Se._V)(this._quadVAO,"geometry"))}_ensureDebugPatternResources(Ze,lt){if(this._debugPatternTexture)return;const st=new Uint8Array(Ze*lt*4);let Mt=0;for(let kt=0;kt<lt;kt++)for(let wt=0;wt<Ze;wt++){const zt=Math.floor(wt/10),Zt=Math.floor(kt/10);zt<2||Zt<2||10*zt>Ze-20||10*Zt>lt-20?(st[Mt++]=255,st[Mt++]=255,st[Mt++]=255,st[Mt++]=255):(st[Mt++]=255,st[Mt++]=255,st[Mt++]=255,st[Mt++]=1&zt&&1&Zt?1&wt^1&kt?0:255:1&zt^1&Zt?0:128)}this._debugPatternTexture=new We.x(this._rctx,{target:ce.No.TEXTURE_2D,pixelFormat:ce.VI.RGBA,dataType:ce.Br.UNSIGNED_BYTE,samplingMode:ce.cw.NEAREST,width:Ze,height:lt},st);const Ft=new Oe.V;Ft.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquire(Pe.K,Ft),this._quadVAO=(0,Te.ow)(this._rctx)}get test(){return{drapeSourceRenderers:this._drapeSourceRenderers,getDrapeSourceRenderer:Ze=>this._drapeSourceRenderers.get(Ze)}}};var $e,Ze;(0,x._)([(0,re.Cb)()],He.prototype,"_frameTask",void 0),(0,x._)([(0,re.Cb)()],He.prototype,"_sortedDrapeSourceRenderersDirty",void 0),(0,x._)([(0,De.gT)()],He.prototype,"_shaderTechniqueRepository",void 0),(0,x._)([(0,De.gT)()],He.prototype,"_stippleTextureRepository",void 0),(0,x._)([(0,re.Cb)({constructOnly:!0})],He.prototype,"view",void 0),(0,x._)([(0,re.Cb)()],He.prototype,"worldToPCSRatio",void 0),(0,x._)([(0,re.Cb)()],He.prototype,"spatialReference",void 0),(0,x._)([(0,re.Cb)({type:Boolean,readOnly:!0})],He.prototype,"updating",null),He=(0,x._)([(0,ie.j)("esri.views.3d.terrain.OverlayRenderer")],He),(Ze=$e||($e={}))[Ze.Normal=0]="Normal",Ze[Ze.OccludedOnly=1]="OccludedOnly",Ze[Ze.ExcludeRasterImage=2]="ExcludeRasterImage";class et{constructor(lt,st,Mt){this.drapeSource=lt,this.renderer=st,this.index=Mt}}const nt=[[1,.5,.5],[.5,.5,1]],it=new Ce.V;it.near=1,it.far=1e4,it.relativeElevation=null;const Xe=-2,rt=je.yD.OccludeAndTransparent},31498:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>W});var D=T(62208),x=T(44796),w=T(67969),B=T(38982);const U={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,stretchType:"none",type:"stretch"};class W{constructor(H,G,$=null,re=null){this.type="raster-tile",this._memoryUsed=null,this._source=null,this._symbolizerParameters=null,this._bandIds=null,this._interpolation=null,this._dirty=!1,this._transformGrid=null,this.isRendereredSource=!1,this.symbolizerRenderer=null,this.rawPixelData=null,this.lij=null,this.opacity=1,this.lij=H,this.source=G,this.width=$||G.width,this.height=re||G.height}get source(){return this._source}set source(H){this._source=H,this._rasterTexture=(0,D.O3)(this._rasterTexture),this._memoryUsed=null}get symbolizerParameters(){return this.isRendereredSource?{...U,maxCutOff:[1,1,1],factor:[1,1,1]}:this._symbolizerParameters||U}set symbolizerParameters(H){this._symbolizerParameters=H}get bandIds(){return this._bandIds}set bandIds(H){(0,D.pC)(H)&&H.length>0?this._bandIds&&H.every((G,$)=>!!this._bandIds[$]&&G===this._bandIds[$])||(this._bandIds=H,this._dirty=!0):this._bandIds=null}get interpolation(){return this._interpolation||"nearest"}set interpolation(H){if(this._interpolation=H,(0,D.pC)(this._rasterTexture)){const G=this._getRasterTextureInterpolation(H);this._rasterTexture.setSamplingMode("bilinear"===G?w.cw.LINEAR:w.cw.NEAREST)}}get transformGrid(){return this._transformGrid}set transformGrid(H){this._transformGrid=H,this._transformGridTexture=(0,D.O3)(this._transformGridTexture),this._memoryUsed=null}bind(H){return!!(this.source&&this.source.pixels&&this.source.pixels.length>0)&&(((0,D.Wi)(this._rasterTexture)||this._dirty)&&this._updateRasterTexture(H,this.bandIds),(0,D.pC)(this._rasterTexture)&&(this._updateColormapTexture(H),this.transformGrid&&(0,D.Wi)(this._transformGridTexture)&&(this._transformGridTexture=(0,B.Br)(H,this.transformGrid))),!0)}getUniforms(){const{symbolizerParameters:H,transformGrid:G,width:$,height:re,opacity:ue}=this,ae=(0,B.Tc)(G,[$,re],[this.source.width,this.source.height],ue),oe=(0,B.Ue)(H.colormap,H.colormapOffset),ie="stretch"===this.symbolizerParameters.type?(0,B.xW)(this.symbolizerParameters):null,X="hillshade"===this.symbolizerParameters.type?(0,B.Fm)(this.symbolizerParameters):null;return new x.C(ae,oe,ie||X,this._rasterTexture,this._transformGridTexture,this._colormapTexture)}get memoryUsage(){return(0,D.Wi)(this._memoryUsed)&&(this._memoryUsed=[this._rasterTexture,this._transformGridTexture,this._colormapTexture].map(G=>(0,D.pC)(G)?G.descriptor.width*G.descriptor.height*4:0).reduce((G,$)=>G+$,0)),this._memoryUsed}release(){return this._rasterTexture=(0,D.O3)(this._rasterTexture),this._transformGridTexture=(0,D.O3)(this._transformGridTexture),this._colormapTexture=(0,D.O3)(this._colormapTexture),this.source=null,this.transformGrid=null,this.rawPixelData=null,!0}_updateRasterTexture(H,G){const $=this.source?this.source.extractBands(G):null;if(!($&&$.pixels&&$.pixels.length>0))return void(this._rasterTexture=(0,D.O3)(this._rasterTexture));const re=(0,D.Wi)(G)&&(0,D.Wi)(this.bandIds)||(0,D.pC)(G)&&(0,D.pC)(this.bandIds)&&G.join("")===this.bandIds.join("");if((0,D.pC)(this._rasterTexture)&&re)return;this._rasterTexture=(0,D.O3)(this._rasterTexture);const ue=this._getRasterTextureInterpolation(this.interpolation);this._rasterTexture=(0,B.s9)(H,$,ue,this.isRendereredSource||this.hasStretchTypeNone())}hasStretchTypeNone(){return"stretchType"in this.symbolizerParameters&&"none"===this.symbolizerParameters.stretchType&&!this.symbolizerParameters.useGamma&&"u8"===this.source.pixelType}_getRasterTextureInterpolation(H){return"lut"===this.symbolizerParameters.type||"nearest"===H||"majority"===H?"nearest":"bilinear"}_updateColormapTexture(H){const G=this._colormap,$=this.symbolizerParameters.colormap;return $?G?$.length!==G.length||$.some((re,ue)=>re!==G[ue])?(this._colormapTexture=(0,D.O3)(this._colormapTexture),this._colormapTexture=(0,B.iC)(H,$),void(this._colormap=$)):void 0:(this._colormapTexture=(0,B.iC)(H,$),void(this._colormap=$)):(this._colormapTexture=(0,D.O3)(this._colormapTexture),void(this._colormap=null))}}},10558:(qe,xe,T)=>{"use strict";T.d(xe,{$7:()=>H,$r:()=>U,DR:()=>Y,HB:()=>W,L:()=>re,Lz:()=>ae,Sx:()=>G,Tg:()=>oe,Vs:()=>X,cy:()=>ue,iU:()=>ie});var D=T(21286),x=T(65401),w=T(23461);const U=64,W=512,Y=2.5,H=(0,D.oK)(D._3/10),G=4,re=Q=>Q<4?3:4,ue=(0,x.Ue)();w.t.WebMercatorAuxiliarySphere.getExtent(0,0,0,ue);const ae=(0,x.Ue)([-180,-90,180,90]),oe="Cannot extend surface to encompass all layers because it would result in too many root tiles.",ie="Surface extent is too large for tile resolution at level 0.",X=8},23461:(qe,xe,T)=>{"use strict";T.d(xe,{_:()=>oe,t:()=>ae});var D=T(26584),x=T(21286),w=T(62208),B=T(16730),U=T(2004),W=T(55915),Y=T(65234),H=T(65401),G=T(37053),$=T(46367),re=T(2584);class ae{constructor(Z){const Q=ae.checkUnsupported(Z);if((0,w.pC)(Q))throw Q;const J=(0,w.Wg)(Z);this.spatialReference=J.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,W.jF)(this.spatialReference)||(0,G.BZ)(this.spatialReference)||(0,G.V2)(this.spatialReference),this.origin=[J.origin.x,J.origin.y],this.pixelSize=J.size[0],this.dpi=J.dpi;const se=J.lods.reduce((de,me,_e)=>(me.level<de.min&&(de.min=me.level,de.minIndex=_e),de.max=Math.max(de.max,me.level),de),{min:1/0,minIndex:0,max:-1/0}),ee=J.lods[se.minIndex],le=2**ee.level;let ne=ee.resolution*le,ce=ee.scale*le;this.levels=new Array(se.max+1);for(let de=0;de<this.levels.length;de++)this.levels[de]={resolution:ne,scale:ce,tileSize:[ne*J.size[0],ne*J.size[1]]},ne/=2,ce/=2}clone(){return new ae(this.toTileInfo())}toTileInfo(){return new re.Z({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((Z,Q)=>({level:Q,scale:Z.scale,resolution:Z.resolution}))})}getExtent(Z,Q,J,se){const ee=this.levels[Z],le=ee.tileSize[0],ne=ee.tileSize[1];se[0]=this.origin[0]+J*le,se[2]=this.origin[0]+(J+1)*le,se[3]=this.origin[1]-Q*ne,se[1]=this.origin[1]-(Q+1)*ne}convertExtentToRadians(Z,Q){this._isWebMercator?(Q[0]=(0,$.tp)(Z[0]),Q[1]=(0,$.mZ)(Z[1]),Q[2]=(0,$.tp)(Z[2]),Q[3]=(0,$.mZ)(Z[3])):this._isGCS&&(Q[0]=(0,x.Vl)(Z[0]),Q[1]=(0,x.Vl)(Z[1]),Q[2]=(0,x.Vl)(Z[2]),Q[3]=(0,x.Vl)(Z[3]))}getExtentGeometry(Z,Q,J,se=new U.Z){return this.getExtent(Z,Q,J,ie),se.spatialReference=this.spatialReference,se.xmin=ie[0],se.ymin=ie[1],se.xmax=ie[2],se.ymax=ie[3],se.zmin=void 0,se.zmax=void 0,se}ensureMaxLod(Z){if(null==Z)return!1;let Q=!1;for(;this.levels.length<=Z;){const J=this.levels[this.levels.length-1],se=J.resolution/2;this.levels.push({resolution:se,scale:J.scale/2,tileSize:[se*this.pixelSize,se*this.pixelSize]}),Q=!0}return Q}capMaxLod(Z){this.levels.length>Z+1&&(this.levels.length=Z+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(Z){return this.levels[0].scale/2**Z}levelAtScale(Z){const Q=this.levels[0].scale;return Z>=Q?0:Math.log(Q/Z)*Math.LOG2E}resolutionAtLevel(Z){return this.levels[0].resolution/2**Z}compatibleWith(Z){if(!(Z instanceof ae)){if(ae.checkUnsupported(Z))return!1;Z=new ae(Z)}if(!Z.spatialReference.equals(this.spatialReference)||Z.pixelSize!==this.pixelSize)return!1;const Q=Math.min(this.levels.length,Z.levels.length)-1,J=this.levels[Q].resolution;let se=.5*J;return!(!(0,x.W8)(Z.origin[0],this.origin[0],se)||!(0,x.W8)(Z.origin[1],this.origin[1],se))&&(se=.5*J/2**Q/this.pixelSize*12,(0,x.W8)(J,Z.levels[Q].resolution,se))}rootTilesInExtent(Z,Q=null,J=1/0){const se=new Array,ee=this.levels[0].tileSize;if((0,w.Wi)(Z)||0===ee[0]||0===ee[1])return se;ae.computeRowColExtent(Z,ee,this.origin,ie);let le=ie[1],ne=ie[3],ce=ie[0],de=ie[2];const me=de-ce,_e=ne-le;if(me*_e>J){const he=Math.floor(Math.sqrt(J));_e>he&&(le=le+Math.floor(.5*_e)-Math.floor(.5*he),ne=le+he),me>he&&(ce=ce+Math.floor(.5*me)-Math.floor(.5*he),de=ce+he)}for(let he=le;he<ne;he++)for(let ye=ce;ye<de;ye++)se.push([0,he,ye]);return(0,w.pC)(Q)&&(Q[0]=this.origin[0]+ce*ee[0],Q[1]=this.origin[1]-ne*ee[1],Q[2]=this.origin[0]+de*ee[0],Q[3]=this.origin[1]-le*ee[1]),se}static computeRowColExtent(Z,Q,J,se){const ee=.001*(Z[2]-Z[0]+(Z[3]-Z[1]));se[0]=Math.max(0,Math.floor((Z[0]+ee-J[0])/Q[0])),se[2]=Math.max(0,Math.ceil((Z[2]-ee-J[0])/Q[0])),se[1]=Math.max(0,Math.floor((J[1]-Z[3]+ee)/Q[1])),se[3]=Math.max(0,Math.ceil((J[1]-Z[1]-ee)/Q[1]))}static isPowerOfTwo(Z){const Q=Z.lods,J=Q[0].resolution*2**Q[0].level;return!Q.some(se=>!(0,x.Y8)(se.resolution,J/2**se.level))}static hasGapInLevels(Z){const Q=Z.lods.map(J=>J.level);Q.sort((J,se)=>J-se);for(let J=1;J<Q.length;J++)if(Q[J]!==Q[0]+J)return!0;return!1}static tileSizeSupported(Z){const Q=Z.size[1];return Q===Z.size[0]&&0==(Q&Q-1)&&Q>=128&&Q<=512}static hasOriginPerLODs(Z){const Q=Z.origin;return Z.lods.some(J=>null!=J.origin&&(J.origin[0]!==Q.x||J.origin[1]!==Q.y))}static getMissingTileInfoError(){return new D.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(Z){return(0,w.Wi)(Z)?oe():Z.lods.length<1?new D.Z("tilingscheme:generic","Tiling scheme must have at least one level"):ae.isPowerOfTwo(Z)?ae.hasGapInLevels(Z)?new D.Z("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):ae.tileSizeSupported(Z)?ae.hasOriginPerLODs(Z)?new D.Z("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new D.Z("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new D.Z("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(Z,Q){const J=Z[2]-Z[0],se=Z[3]-Z[1],ee=(0,B.c9)(Q),le=1.2*Math.max(J,se),me=new ae(new re.Z({size:[256,256],origin:{x:Z[0]-.5*(le-J),y:Z[3]+.5*(le-se)},lods:[{level:0,resolution:le/256,scale:1/(256/96*.0254/(le*ee))}],spatialReference:Q}));return me.ensureMaxLod(20),me}static makeWebMercatorAuxiliarySphere(Z){const Q=new ae(ae.WebMercatorAuxiliarySphereTileInfo);return Q.ensureMaxLod(Z),Q}static makeGCSWithTileSize(Z,Q=256,J=16){const se=256/Q,ee=new ae(new re.Z({size:[Q,Q],origin:{x:-180,y:90,spatialReference:Z},spatialReference:Z,lods:[{level:0,resolution:.703125*se,scale:295497598.570834*se}]}));return ee.ensureMaxLod(J),ee}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function oe(){return new D.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}ae.WebMercatorAuxiliarySphereTileInfo=new re.Z({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:Y.Z.WebMercator},spatialReference:Y.Z.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),ae.WebMercatorAuxiliarySphere=ae.makeWebMercatorAuxiliarySphere(19);const ie=(0,H.Ue)()},75224:(qe,xe,T)=>{"use strict";var D,x,w,B,U,W,Y;T.d(xe,{NH:()=>U,Ns:()=>W,VB:()=>B,Xo:()=>w,fu:()=>D,tk:()=>x}),(Y=D||(D={}))[Y.INNER=0]="INNER",Y[Y.OUTER=1]="OUTER",function(Y){Y[Y.REGULAR=0]="REGULAR",Y[Y.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",Y[Y.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",Y[Y.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(x||(x={})),function(Y){Y[Y.NORTH=0]="NORTH",Y[Y.NORTH_EAST=1]="NORTH_EAST",Y[Y.EAST=2]="EAST",Y[Y.SOUTH_EAST=3]="SOUTH_EAST",Y[Y.SOUTH=4]="SOUTH",Y[Y.SOUTH_WEST=5]="SOUTH_WEST",Y[Y.WEST=6]="WEST",Y[Y.NORTH_WEST=7]="NORTH_WEST"}(w||(w={})),function(Y){Y[Y.OFF=0]="OFF",Y[Y.ON=1]="ON"}(B||(B={})),function(Y){Y[Y.Color=0]="Color",Y[Y.ColorNoRasterImage=1]="ColorNoRasterImage",Y[Y.Highlight=2]="Highlight",Y[Y.Water=3]="Water",Y[Y.Occluded=4]="Occluded"}(U||(U={})),function(Y){Y[Y.FADING=0]="FADING",Y[Y.IMMEDIATE=1]="IMMEDIATE",Y[Y.UNFADED=2]="UNFADED"}(W||(W={}))},61779:(qe,xe,T)=>{"use strict";T.d(xe,{XJ:()=>Ce,er:()=>nt,RB:()=>Le,E_:()=>it,Fp:()=>Te,TK:()=>Oe,Eu:()=>ar,_1:()=>Be,CY:()=>Pe,sR:()=>ze,Ay:()=>Ie,GL:()=>Ke,Mw:()=>kr,wt:()=>zt,x4:()=>je,L4:()=>He,uv:()=>Pr,wP:()=>Ve,xk:()=>Ne,z7:()=>Se,FH:()=>Ee,Q:()=>Ae,Ke:()=>We,OD:()=>Zt,_0:()=>wt,cA:()=>os,OC:()=>ss,$v:()=>Ft,_F:()=>kt,z4:()=>$e,Bu:()=>Ze,FZ:()=>et,jO:()=>rt,wu:()=>De});var D=T(46160),x=T(94573),w=T(62208),B=T(37053),U=T(72469),W=T(59617),Y=T(91540),H=T(75224),G=T(26584),$=T(84161),re=T(28093),ue=T(55915),ae=T(65401),oe=T(10558),ie=T(23461);const X=(0,re.c)(),Z=(0,re.c)(),Q=(0,re.c)(),J=(0,re.c)();function ee(pt,Ut,$t,Xt){(0,$.c)(X,$t),X[Xt]=Ut[Xt];const _r=(0,$.b)(X,X,Ut),hr=(0,$.b)(Z,pt,Ut),gr=(0,$.e)(hr,_r),vr=(0,$.e)(_r,_r);let Kr;Kr=gr<=0?Ut:vr<=gr?$t:(0,$.a)(X,Ut,(0,$.g)(_r,_r,gr/vr));const Gr=(0,$.b)(X,pt,Kr);return Math.PI/2-Math.atan(Gr[2]/Math.sqrt(Gr[0]*Gr[0]+Gr[1]*Gr[1]))}const de=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function se(pt,Ut,$t=0){const Xt=pt.extent;if((0,w.Wi)(Xt))return!1;if(0===$t)return(0,ae.BD)(Xt,Ut);const _r=Math.min(Xt[2]-Xt[0],Xt[3]-Xt[1]);return(0,ae.Zm)(Xt,Ut,$t*_r)},tiltToExtentEdge:function le(pt,Ut,$t){const Xt=pt.extent;if((0,w.Wi)(Xt))return 0;Q[0]=Xt[0],Q[1]=Xt[1],Q[2]=$t,J[0]=Xt[2],J[1]=Xt[3],J[2]=$t;let _r=1/0,hr=1/0;return Ut[0]<Q[0]?_r=ee(Ut,Q,J,0):Ut[0]>J[0]&&(_r=ee(Ut,J,Q,0)),Ut[1]<Q[1]?hr=ee(Ut,Q,J,1):Ut[1]>J[1]&&(hr=ee(Ut,J,Q,1)),Math.min(_r,hr)},checkIfTileInfoSupportedForViewSR:function ne(pt,Ut,$t){if((0,w.Wi)(pt))return(0,ie._)();if(pt.spatialReference.isGeographic&&!(0,ue.jF)(pt.spatialReference))return new G.Z("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const Xt=ie.t.checkUnsupported(pt);if((0,w.pC)(Xt))return Xt;if((0,w.Wi)($t))return new G.Z("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const _r=function ce(pt,Ut){const $t=pt.lods,Xt=$t[0].resolution*2**$t[0].level,_r=[Xt*pt.size[0],Xt*pt.size[1]],hr=[pt.origin.x,pt.origin.y],gr=(0,ae.oJ)(Ut),vr=(0,ae.Ue)();ie.t.computeRowColExtent(gr,_r,hr,vr);const Kr=(vr[2]-vr[0])*(vr[3]-vr[1]);if(Kr>oe.$r){const Gr=$t[0].scale*2**$t[0].level;let Jr=Math.max((gr[3]-gr[1])/pt.size[1],(gr[2]-gr[0])/pt.size[0])*Gr/Xt;const ns=Math.floor(Math.log(Jr)/Math.log(10));return Jr=Math.ceil(Jr/10**ns)*10**ns,new G.Z("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(Gr).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+Jr.toLocaleString()+".",{level0Scale:Gr,suggestedLevel0Scale:Jr,requiredNumRootTiles:Kr,allowedNumRootTiles:oe.$r})}return null}(pt,$t);if(_r)return _r;const hr=pt.spatialReference;return(0,w.pC)(Ut)&&!(hr.equals(Ut)||Ut.isWGS84&&hr.isWebMercator)?new G.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function me(){return!0},tiltToExtentEdge:function _e(){return 0},checkIfTileInfoSupportedForViewSR:function he(pt,Ut){if((0,w.Wi)(pt))return(0,ie._)();const $t=pt.lods.length-1,Xt=pt.spatialReference,_r=(0,ue.jF)(Xt)||(0,B.BZ)(Xt)||(0,B.V2)(Xt);if(Xt.isWebMercator){if(!ie.t.makeWebMercatorAuxiliarySphere($t).compatibleWith(pt))return new G.Z("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!_r)return new G.Z("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!ie.t.makeGCSWithTileSize(pt.spatialReference,pt.size[0],$t).compatibleWith(pt))return pt.spatialReference.isWGS84?new G.Z("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new G.Z("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return(0,w.pC)(Ut)&&!pt.spatialReference.equals(Ut)?new G.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}},Symbol.toStringTag,{value:"Module"})),fe={[W.JY.Global]:ye,[W.JY.Local]:de};function De(pt,Ut){pt||console.warn("Terrain: "+Ut)}let Ce=!1;function Te(pt,Ut){}function Le(pt){return ze(pt)?{fullExtent:pt.fullExtent,minScale:pt.layer.minScale,maxScale:pt.layer.maxScale,tilemapCache:null}:pt.layer}function je(pt){return"imagery-tile"===pt?.type||"wcs"===pt?.type}function ze(pt){return"imagery-tile-3d"===pt?.type}function Ee(pt){return"tile-3d"===pt?.type}function Ae(pt){return"vector-tile-3d"===pt?.type}function we(pt){return"wmts-3d"===pt?.type}function Be(pt){return"elevation-3d"===pt?.type}function Pe(pt){return"group"===pt?.type}function Oe(pt){return pt&&(Ee(pt)||we(pt)||ze(pt)||Ae(pt))}function Ke(pt){return pt&&(Ee(pt)||ze(pt)||Ae(pt)||we(pt))}function Ve(pt){return Ke(pt)||Be(pt)}function Ne(pt){switch(pt.type){case"building-scene":case"csv":case"feature":case"geo-rss":case"geojson":case"graphics":case"group":case"integrated-mesh":case"kml":case"line-of-sight":case"map-notes":case"ogc-feature":case"point-cloud":case"route":case"scene":case"stream":case"voxel":case"subtype-group":case"unknown":case"unsupported":case"wfs":case null:return!1;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"elevation":case"imagery":case"imagery-tile":case"map-image":case"media":case"open-street-map":case"tile":case"vector-tile":case"wcs":case"web-tile":case"wms":case"wmts":return!0;default:return(0,x.Bg)(pt.type),!1}}function Ie(pt){const Ut=pt?.sourceLayerInfo?.data;return(0,w.pC)(Ut)&&"type"in Ut&&"raster-tile"===Ut.type}function We(pt){const Ut=pt?.sourceLayerInfo?.data;return(0,w.pC)(Ut)&&"type"in Ut&&"vector-tile"===Ut.type}function Se(pt){const Ut=pt?.sourceLayerInfo?.data;return(0,w.pC)(Ut)&&"type"in Ut&&"tile-texture"===Ut.type}function He(pt){const Ut=pt?.sourceLayerInfo?.data;return Ut instanceof HTMLImageElement||Ut instanceof Y.nN||Ut instanceof HTMLCanvasElement||Ut instanceof ImageData}function $e(pt){return(0,w.pC)(pt)&&"release"in pt&&pt.release(),null}function et(pt){return pt.fetchTile&&!1!==pt.hasOverriddenFetchTile}function nt(pt,Ut,$t,Xt){return fe[Xt].checkIfTileInfoSupportedForViewSR(pt,$t,Ut)}function it(pt,Ut,$t){let Xt=null,_r=null;if("wmts"===pt?.type){const hr=function Xe(pt,Ut,$t){const Xt=(0,U.mt)(pt);if((0,w.pC)(Xt)){if(!D.Z.isCollection(Xt))return{tileInfo:Xt.tileInfo,fullExtent:Xt.fullExtent};{const _r=Xt.find(hr=>null==nt(hr.tileInfo,hr.fullExtent,Ut,$t));if(_r)return{tileInfo:_r.tileInfo,fullExtent:_r.fullExtent}}}return{tileInfo:null,fullExtent:null}}(pt,Ut,$t);Xt=hr.tileInfo,_r=hr.fullExtent}else{_r=je(pt)?pt.getCompatibleFullExtent(Ut):pt.fullExtent;const hr=$t===W.JY.Local;if(je(pt))Xt=pt.getCompatibleTileInfo(Ut,_r,hr);else if("vector-tile"===pt?.type){const gr=hr&&!rt(Ut)||Ze.force512VTL,vr=pt.tileInfo.spatialReference.isGeographic;Xt=gr?pt.tileInfo:pt.tileInfo.getOrCreateCompatible(256,vr?1:2)}else Xt=pt.tileInfo}return(0,w.pC)(Xt)&&(0,w.pC)(_r)&&null==nt(Xt,_r,Ut,$t)?{tileInfo:Xt,fullExtent:_r}:null}function rt(pt){return pt.isWGS84||pt.isWebMercator||(0,B.yW)(pt)||!(0,B.N$)(pt)}const Ze={force512VTL:!1};function Ft(pt){return pt===H.Xo.NORTH_EAST?H.Xo.SOUTH_WEST:pt===H.Xo.NORTH_WEST?H.Xo.SOUTH_EAST:pt===H.Xo.SOUTH_WEST?H.Xo.NORTH_EAST:H.Xo.NORTH_WEST}function kt(pt){return pt===H.Xo.NORTH?H.Xo.SOUTH:pt===H.Xo.EAST?H.Xo.WEST:pt===H.Xo.SOUTH?H.Xo.NORTH:H.Xo.EAST}function wt(pt){return pt===H.Xo.NORTH_WEST||pt===H.Xo.SOUTH_WEST}function zt(pt){return pt===H.Xo.NORTH_WEST||pt===H.Xo.NORTH_EAST}function Zt(pt){return pt===H.Xo.NORTH_WEST||pt===H.Xo.WEST||pt===H.Xo.SOUTH_WEST}function ar(pt){return pt===H.Xo.NORTH_EAST||pt===H.Xo.EAST||pt===H.Xo.SOUTH_EAST}function Pr(pt){return pt===H.Xo.SOUTH_EAST||pt===H.Xo.SOUTH||pt===H.Xo.SOUTH_WEST}function kr(pt){return pt===H.Xo.NORTH_EAST||pt===H.Xo.NORTH||pt===H.Xo.NORTH_WEST}const ss=[H.Xo.NORTH,H.Xo.EAST,H.Xo.SOUTH,H.Xo.WEST],os=[H.Xo.NORTH_EAST,H.Xo.SOUTH_EAST,H.Xo.SOUTH_WEST,H.Xo.NORTH_WEST]},15076:(qe,xe,T)=>{"use strict";T.d(xe,{AA:()=>w,E9:()=>oe,QT:()=>ue,b:()=>re,dF:()=>$,rv:()=>B,t8:()=>ae,yf:()=>Y,zW:()=>G});var D=T(62208),x=T(77029);class w{constructor(){this._queue=new x.Z,this._last=null,this.remove=()=>{}}get done(){return 0===this._queue.length&&(!this._last||this._last.isLeaf)}resetOne(X){this._queue.clear(),this._queue.push(X),this._last=null}reset(X=null){this._queue.clear(),(0,D.pC)(X)&&this._queue.pushArray(X),this._last=null}skipSubtree(){this._last=null}next(){return this._last&&!this._last.isLeaf&&this._queue.pushArray(this._last.children),this._last=this._queue.pop(),this._last}}class B{constructor(){this.q=new x.Z}get done(){return 0===this.q.length}reset(X){if(this.q.clear(),!(0,D.Wi)(X)){this.q.pushArray(X);for(let Z=0;Z<this.q.length;++Z){const Q=this.q.data[Z];Q.isLeaf||this.q.pushArray(Q.children)}}}next(){return this.q.pop()}}function Y(ie,X,Z){if((0,D.Wi)(X)||(0,D.Wi)(X.fullExtent))return!1;const Q=X.fullExtent,J=ie.extent;if(Z){if(J[0]<Q.xmin||J[1]<Q.ymin||J[2]>Q.xmax||J[3]>Q.ymax)return!1}else if(Q.xmin>J[2]||Q.ymin>J[3]||Q.xmax<J[0]||Q.ymax<J[1])return!1;const se=ie.surface.tilingScheme.levels[ie.level].scale;return!(X.minScale>0&&se>1.00000001*X.minScale||X.maxScale>0&&se<.99999999*X.maxScale)}function H(ie,X){return ie.lij[0]-X.lij[0]||ie.lij[1]-X.lij[1]||ie.lij[2]-X.lij[2]}function G(ie,X){X.sort((Z,Q)=>$(Z,Q,ie))}function $(ie,X,Z){const Q=ie.screenDepth,J=X.screenDepth;return Q<J?-Z:Q>J?Z:H(ie,X)}function re(ie,X){const Z=new Map;ie.forAll(Q=>Z.set(Q.lij,Q.distanceToSquared(X))),ie.sort((Q,J)=>Z.get(Q.lij)-Z.get(J.lij)||H(Q,J))}function ue(ie,X,Z){let Q=1,J=0,se=0;for(;ie!==X;)if(Q*=.5,J*=.5,se*=.5,1&ie.lij[2]&&(J+=.5),0==(1&ie.lij[1])&&(se+=.5),null==(ie=ie.parent))throw new Error("tile was not a descendant of upsampleTile");Z.init(X,J,se,Q)}function ae(ie){for(let X=0;X<ie.length;X++){const Z=ie[X],Q=Z.parent;if(Q)for(let J=0;J<4;J++){const se=Q.children[J];if(se&&se!==Z&&se.loadable)return!0}}return!1}function oe(ie,X){if(!ie||!X||ie[0]===X[0])return!1;const Z=ie[0]<X[0],Q=Z?ie:X,J=Z?X:ie,se=1<<J[0]-Q[0];return Math.floor(J[1]/se)===Q[1]&&Math.floor(J[2]/se)===Q[2]}},24225:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>B,c:()=>w});var B,U,D=T(17626),x=T(2286);class w extends x.Xn{constructor(){super(...arguments),this.visible=B.Hidden}}(0,D._)([(0,x.gT)()],w.prototype,"renderable",void 0),(0,D._)([(0,x.gT)()],w.prototype,"components",void 0),(U=B||(B={}))[U.Hidden=0]="Hidden",U[U.Visible=1]="Visible"},75550:(qe,xe,T)=>{"use strict";T.d(xe,{OH:()=>oe,_O:()=>ie});var ae,oe,X,D=T(17626),x=T(35357),w=T(50574),B=T(6945),U=T(26859),W=T(36603),Y=T(96395),H=T(92724),G=T(22799),$=T(37847),re=T(87601),ue=T(42743);(X=ae||(ae={}))[X.None=0]="None",X[X.Transparent=1]="Transparent",X[X.Opaque=2]="Opaque",X[X.COUNT=3]="COUNT",function(X){X[X.None=0]="None",X[X.NoOverlay=1]="NoOverlay",X[X.ColorOverlay=2]="ColorOverlay",X[X.ColorOverlayWithWater=3]="ColorOverlayWithWater",X[X.COUNT=4]="COUNT"}(oe||(oe={}));class ie extends re.m{constructor(){super(...arguments),this.output=B.H.Color,this.textureCoordinateType=W.N.None,this.componentData=x._N.Uniform,this.cullFace=ue.Vr.Back,this.vertexDiscardMode=w.a.None,this.doubleSidedMode=Y.q.WindingOrder,this.alphaDiscardMode=ue.JJ.Opaque,this.integratedMeshMode=oe.None,this.transparencyPassType=ue.Am.NONE,this.ellipsoidMode=G.U.Earth,this.pbrMode=H.f7.Disabled,this.normalType=U.h.Attribute,this.spherical=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasVertexColors=!1,this.hasNormals=!1,this.hasSlicePlane=!1,this.hasBaseColorTexture=!1,this.receiveAmbientOcclusion=!0,this.receiveShadows=!0,this.blendingEnabled=!0,this.hasScreenSpaceReflections=!1,this.hasPolygonOffset=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.isGround=!1,this.hasCloudsReflections=!0,this.snowCover=!1}}(0,D._)([(0,re.o)({count:B.H.COUNT})],ie.prototype,"output",void 0),(0,D._)([(0,re.o)({count:W.N.COUNT})],ie.prototype,"textureCoordinateType",void 0),(0,D._)([(0,re.o)({count:x._N.COUNT})],ie.prototype,"componentData",void 0),(0,D._)([(0,re.o)({count:ue.Vr.COUNT})],ie.prototype,"cullFace",void 0),(0,D._)([(0,re.o)({count:w.a.COUNT})],ie.prototype,"vertexDiscardMode",void 0),(0,D._)([(0,re.o)({count:Y.q.COUNT})],ie.prototype,"doubleSidedMode",void 0),(0,D._)([(0,re.o)({count:ue.JJ.COUNT})],ie.prototype,"alphaDiscardMode",void 0),(0,D._)([(0,re.o)({count:oe.COUNT})],ie.prototype,"integratedMeshMode",void 0),(0,D._)([(0,re.o)({count:ue.Am.COUNT})],ie.prototype,"transparencyPassType",void 0),(0,D._)([(0,re.o)({count:G.U.COUNT})],ie.prototype,"ellipsoidMode",void 0),(0,D._)([(0,re.o)({count:H.f7.COUNT})],ie.prototype,"pbrMode",void 0),(0,D._)([(0,re.o)({count:U.h.COUNT})],ie.prototype,"normalType",void 0),(0,D._)([(0,re.o)()],ie.prototype,"spherical",void 0),(0,D._)([(0,re.o)()],ie.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasVertexColors",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasNormals",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasSlicePlane",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasBaseColorTexture",void 0),(0,D._)([(0,re.o)()],ie.prototype,"receiveAmbientOcclusion",void 0),(0,D._)([(0,re.o)()],ie.prototype,"receiveShadows",void 0),(0,D._)([(0,re.o)()],ie.prototype,"blendingEnabled",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasScreenSpaceReflections",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasPolygonOffset",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasMetalnessAndRoughnessTexture",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasEmissionTexture",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasOcclusionTexture",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasNormalTexture",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasOccludees",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasMultipassTerrain",void 0),(0,D._)([(0,re.o)()],ie.prototype,"cullAboveGround",void 0),(0,D._)([(0,re.o)()],ie.prototype,"isGround",void 0),(0,D._)([(0,re.o)()],ie.prototype,"hasCloudsReflections",void 0),(0,D._)([(0,re.o)()],ie.prototype,"snowCover",void 0),(0,D._)([(0,re.o)({constValue:$.P.Draw})],ie.prototype,"pbrTextureBindType",void 0),(0,D._)([(0,re.o)({constValue:!0})],ie.prototype,"hasSliceHighlight",void 0),(0,D._)([(0,re.o)({constValue:!1})],ie.prototype,"hasSliceInVertexProgram",void 0),(0,D._)([(0,re.o)({constValue:!1})],ie.prototype,"useCustomDTRExponentForWater",void 0),(0,D._)([(0,re.o)({constValue:!1})],ie.prototype,"hasVertexTangents",void 0),(0,D._)([(0,re.o)({constValue:!0})],ie.prototype,"supportsTextureAtlas",void 0),(0,D._)([(0,re.o)({constValue:!1})],ie.prototype,"highStepCount",void 0),(0,D._)([(0,re.o)({constValue:!1})],ie.prototype,"instancedDoublePrecision",void 0),(0,D._)([(0,re.o)({constValue:!0})],ie.prototype,"useFillLights",void 0)},35357:(qe,xe,T)=>{"use strict";T.d(xe,{AD:()=>X,_N:()=>ae,E_:()=>oe,nO:()=>ie});var D=T(94573),x=T(36161),w=T(60785),B=T(19278),U=T(65364),W=T(90637),Y=T(85930),H=T(37847);class G extends Y.x{constructor(se,ee){super(se,"int",H.P.Draw,(le,ne,ce)=>le.setUniform1i(se,ee(ne,ce)))}}var ae,J,$=T(17625),re=T(66838),ue=T(16396);(J=ae||(ae={}))[J.Uniform=0]="Uniform",J[J.Varying=1]="Varying",J[J.COUNT=2]="COUNT";const oe=429496.7296;function ie(J,se){(0,x.I)(J/oe*.5+.5,se)}function X(J,se){switch(se.componentData){case ae.Varying:return function Z(J){const{vertex:se,fragment:ee}=J;se.include(B.n),se.uniforms.add([new re.Q("componentColorTex"),new U.e("componentColorTexInvDim")]),J.attributes.add(ue.T.COMPONENTINDEX,"float"),J.varyings.add("vExternalColorMixMode","mediump float"),J.varyings.add("vExternalColor","vec4"),J.include(w.A),se.constants.add("elevationScale","float",2*oe),se.code.add($.H`vec4 _readComponentColor() {
float normalizedIndex = (componentIndex * 2.0 + 0.5) * componentColorTexInvDim.x;
vec2 indexCoord = vec2(
mod(normalizedIndex, 1.0),
(floor(normalizedIndex) + 0.5) * componentColorTexInvDim.y
);
return texture2D(componentColorTex, indexCoord);
}
float readElevationOffset() {
float normalizedIndex = (componentIndex * 2.0 + 1.5) * componentColorTexInvDim.x;
vec2 indexCoord = vec2(
mod(normalizedIndex, 1.0),
(floor(normalizedIndex) + 0.5) * componentColorTexInvDim.y
);
return (rgba2float(texture2D(componentColorTex, indexCoord)) - 0.5) * elevationScale;
}
vec4 forwardExternalColor(out bool castShadows) {
vec4 componentColor = _readComponentColor() * 255.0;
float shadowFlag = mod(componentColor.b * 255.0, 2.0);
componentColor.b -= shadowFlag;
castShadows = shadowFlag >= 1.0;
int decodedColorMixMode;
vExternalColor = decodeSymbolColor(componentColor, decodedColorMixMode) * 0.003921568627451;
vExternalColorMixMode = float(decodedColorMixMode) + 0.5;
return vExternalColor;
}`),ee.code.add($.H`void readExternalColor(out vec4 externalColor, out int externalColorMixMode) {
externalColor = vExternalColor;
externalColorMixMode = int(vExternalColorMixMode);
}`)}(J);case ae.Uniform:return function Q(J){const{vertex:se,fragment:ee}=J;se.uniforms.add(new W.$("externalColor",le=>le.componentParameters.externalColor)),ee.uniforms.add(new G("externalColorMixMode",le=>le.componentParameters.externalColorMixMode)),J.varyings.add("vExternalColor","vec4"),se.code.add($.H`float readElevationOffset() {
return 0.0;
}
vec4 forwardExternalColor(out bool castShadows) {
vExternalColor = externalColor;
castShadows = true;
return externalColor;
}`),ee.code.add($.H`void readExternalColor(out vec4 color, out int colorMixMode) {
color = vExternalColor;
colorMixMode = externalColorMixMode;
}`)}(J);case ae.COUNT:return;default:(0,D.Bg)(se.componentData)}}},60785:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>w});var D=T(9044),x=T(17625);function w(B){B.vertex.code.add(x.H`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${x.H.int(D.a9.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${x.H.int(D.a9.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${x.H.int(D.a9.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${x.H.int(D.a9.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}},50574:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>x,z:()=>w});var x,B,D=T(17625);function w(B,U){const W=B.vertex;switch(W.code.add(D.H`#define VERTEX_DISCARD_CUTOFF (1.0 - 1.0 / 255.0)`),U.vertexDiscardMode){case x.None:W.code.add(D.H`#define vertexDiscardByOpacity(_opacity_) {}`);break;case x.Opaque:W.code.add(D.H`#define vertexDiscardByOpacity(_opacity_) { if (_opacity_ >  VERTEX_DISCARD_CUTOFF) {  gl_Position = vec4(1e38, 1e38, 1e38, 1.0); return; } }`);break;case x.Transparent:W.code.add(D.H`#define vertexDiscardByOpacity(_opacity_) { if (_opacity_ <= VERTEX_DISCARD_CUTOFF) {  gl_Position = vec4(1e38, 1e38, 1e38, 1.0); return; } }`)}}(B=x||(x={}))[B.None=0]="None",B[B.Transparent=1]="Transparent",B[B.Opaque=2]="Opaque",B[B.COUNT=3]="COUNT"},27355:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>B});var D=T(19625),x=T(36603),w=T(16396);function B(U){const W=(0,D.U$)().vec3f(w.T.POSITION);return U.normals&&W.vec2i16(w.T.NORMALCOMPRESSED,{glNormalized:!0}),U.textureCoordinates===x.N.Default?W.vec2f(w.T.UV0):U.textureCoordinates===x.N.Atlas&&(W.vec2f(w.T.UV0),W.vec4u16(w.T.UVREGION,{glNormalized:!0})),U.colors&&W.vec4u8(w.T.COLOR,{glNormalized:!0}),W.alignTo(4)}},43553:(qe,xe,T)=>{"use strict";T.d(xe,{SP:()=>Y,T5:()=>G,kF:()=>H,o9:()=>U,zp:()=>W});var U,W,$,D=T(28093),x=T(21799);class w extends x.d4{constructor(){super(...arguments),this.slicePlaneLocalOrigin=(0,D.c)(),this.origin=this.slicePlaneLocalOrigin}}($=U||(U={}))[$.Material=0]="Material",$[$.ShadowMap=1]="ShadowMap",$[$.Highlight=2]="Highlight",function($){$[$.Color=0]="Color",$[$.Alpha=1]="Alpha",$[$.Depth=2]="Depth",$[$.Normal=3]="Normal"}(W||(W={}));class Y extends w{constructor(){super(...arguments),this.identifier=U.Material,this.transparent=!1,this.integratedMesh=!1}}class H extends w{constructor(){super(...arguments),this.identifier=U.ShadowMap}}class G extends w{constructor(){super(...arguments),this.identifier=U.Highlight}}},52382:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>U});var D=T(6945),x=T(51040),w=T(95285),B=T(17625);function U(W,Y){Y.output===D.H.Color&&Y.receiveShadows?(W.varyings.add("linearDepth","float"),W.vertex.code.add(B.H`void forwardLinearDepth() { linearDepth = gl_Position.w; }`)):Y.output===D.H.Depth||Y.output===D.H.Shadow?(W.include(x.up,Y),W.varyings.add("linearDepth","float"),W.vertex.uniforms.add(new w.A("nearFar",(H,G)=>G.camera.nearFar)),W.vertex.code.add(B.H`void forwardLinearDepth() {
linearDepth = (-vPosition_view.z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)):W.vertex.code.add(B.H`void forwardLinearDepth() {}`)}},73132:(qe,xe,T)=>{"use strict";T.d(xe,{w:()=>x});var D=T(17625);function x(w){w.vertex.code.add(D.H`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {
vec3 camToVert = posWorld - camPosWorld;
bool isBackface = dot(camToVert, normalWorld) > 0.0;
if (isBackface) {
posClip.z += 0.0000003 * posClip.w;
}
return posClip;
}`)}},98071:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>w});var D=T(17625),x=T(16396);function w(B,U=!0){B.attributes.add(x.T.POSITION,"vec2"),U&&B.varyings.add("uv","vec2"),B.vertex.code.add(D.H`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      ${U?D.H`uv = position * 0.5 + vec2(0.5);`:""}
    }
  `)}},6945:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{H:()=>D}),(x=D||(D={}))[x.Color=0]="Color",x[x.Depth=1]="Depth",x[x.Normal=2]="Normal",x[x.Shadow=3]="Shadow",x[x.Highlight=4]="Highlight",x[x.Draped=5]="Draped",x[x.Occlusion=6]="Occlusion",x[x.Alpha=7]="Alpha",x[x.COUNT=8]="COUNT"},78925:(qe,xe,T)=>{"use strict";T.d(xe,{P_:()=>$,UT:()=>G,f5:()=>re});var D=T(62208),x=T(28347),w=T(43703),B=T(84161),U=T(28093),W=T(77739),Y=T(97139),H=T(17625);class G extends H.K{constructor(ne){super(),this.slicePlaneLocalOrigin=ne}}function $(le,ne){ue(le,ne,[new Y.J("slicePlaneOrigin",(ce,de)=>X(ne,ce,de)),new Y.J("slicePlaneBasis1",(ce,de)=>Z(ne,ce,de,(0,D.Wg)(de.slicePlane)?.basis1)),new Y.J("slicePlaneBasis2",(ce,de)=>Z(ne,ce,de,(0,D.Wg)(de.slicePlane)?.basis2))])}function re(le,ne){ue(le,ne,[new W.B("slicePlaneOrigin",(ce,de)=>X(ne,ce,de)),new W.B("slicePlaneBasis1",(ce,de)=>Z(ne,ce,de,(0,D.Wg)(de.slicePlane)?.basis1)),new W.B("slicePlaneBasis2",(ce,de)=>Z(ne,ce,de,(0,D.Wg)(de.slicePlane)?.basis2))])}function ue(le,ne,ce){if(!ne.hasSlicePlane){const he=H.H`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;return ne.hasSliceInVertexProgram&&le.vertex.code.add(he),void le.fragment.code.add(he)}le.extensions.add("GL_OES_standard_derivatives"),ne.hasSliceInVertexProgram&&le.vertex.uniforms.add(ce),le.fragment.uniforms.add(ce);const de=H.H`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,me=H.H`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`,_e=ne.hasSliceHighlight?H.H`
        ${me}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:H.H`#define highlightSlice(_color_, _pos_) (_color_)`;ne.hasSliceInVertexProgram&&le.vertex.code.add(de),le.fragment.code.add(de),le.fragment.code.add(_e)}function ae(le,ne,ce){return le.instancedDoublePrecision?(0,B.s)(Q,ce.camera.viewInverseTransposeMatrix[3],ce.camera.viewInverseTransposeMatrix[7],ce.camera.viewInverseTransposeMatrix[11]):ne.slicePlaneLocalOrigin}function oe(le,ne){return(0,D.pC)(le)?(0,B.b)(J,ne.origin,le):ne.origin}function ie(le,ne,ce){return le.hasSliceTranslatedView?(0,D.pC)(ne)?(0,x.j)(ee,ce.camera.viewMatrix,ne):ce.camera.viewMatrix:null}function X(le,ne,ce){if((0,D.Wi)(ce.slicePlane))return U.Z;const de=ae(le,ne,ce),me=oe(de,ce.slicePlane),_e=ie(le,de,ce);return(0,D.pC)(_e)?(0,B.m)(J,me,_e):me}function Z(le,ne,ce,de){if((0,D.Wi)(de)||(0,D.Wi)(ce.slicePlane))return U.Z;const me=ae(le,ne,ce),_e=oe(me,ce.slicePlane),he=ie(le,me,ce);return(0,D.pC)(he)?((0,B.a)(se,de,_e),(0,B.m)(J,_e,he),(0,B.m)(se,se,he),(0,B.b)(se,se,J)):de}const Q=(0,U.c)(),J=(0,U.c)(),se=(0,U.c)(),ee=(0,w.c)()},24255:(qe,xe,T)=>{"use strict";T.d(xe,{w:()=>x});var D=T(17625);function x(w,B={hasModelTransformation:!1,linearDepth:!1}){if(B.hasModelTransformation)return B.linearDepth?void w.vertex.code.add(D.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, mat4 model, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * (model * vec4(pos, 1.0));
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`):void w.vertex.code.add(D.H`vec4 transformPosition(mat4 proj, mat4 view, mat4 model, vec3 pos) {
return proj * (view * (model * vec4(pos, 1.0)));
}`);w.vertex.code.add(B.linearDepth?D.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`:D.H`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}},60355:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>$});var D=T(84161),x=T(28093),w=T(6945),B=T(7228),U=T(77739),W=T(17625),Y=T(63123),H=T(16396),G=T(2757);function $(ue,ae){ae.instanced&&ae.instancedDoublePrecision&&(ue.attributes.add(H.T.MODELORIGINHI,"vec3"),ue.attributes.add(H.T.MODELORIGINLO,"vec3"),ue.attributes.add(H.T.MODEL,"mat3"),ue.attributes.add(H.T.MODELNORMAL,"mat3"));const oe=ue.vertex;ae.instancedDoublePrecision&&(oe.include(B.$,ae),oe.uniforms.add(new U.B("viewOriginHi",(ie,X)=>(0,G.U8)((0,D.s)(re,X.camera.viewInverseTransposeMatrix[3],X.camera.viewInverseTransposeMatrix[7],X.camera.viewInverseTransposeMatrix[11]),re))),oe.uniforms.add(new U.B("viewOriginLo",(ie,X)=>(0,G.GB)((0,D.s)(re,X.camera.viewInverseTransposeMatrix[3],X.camera.viewInverseTransposeMatrix[7],X.camera.viewInverseTransposeMatrix[11]),re)))),oe.code.add(W.H`
    vec3 calculateVPos() {
      ${ae.instancedDoublePrecision?"return model * localPosition().xyz;":"return localPosition().xyz;"}
    }
    `),oe.code.add(W.H`
    vec3 subtractOrigin(vec3 _pos) {
      ${ae.instancedDoublePrecision?W.H`
          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);
          return _pos - originDelta;`:"return vpos;"}
    }
    `),oe.code.add(W.H`
    vec3 dpNormal(vec4 _normal) {
      ${ae.instancedDoublePrecision?"return normalize(modelNormal * _normal.xyz);":"return normalize(_normal.xyz);"}
    }
    `),ae.output===w.H.Normal&&(oe.uniforms.add(new Y.g("viewNormal",(ie,X)=>X.camera.viewInverseTransposeMatrix)),oe.code.add(W.H`
    vec3 dpNormalView(vec4 _normal) {
      ${ae.instancedDoublePrecision?"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);":"return normalize((viewNormal * _normal).xyz);"}
    }
    `)),ae.hasVertexTangents&&oe.code.add(W.H`
    vec4 dpTransformVertexTangent(vec4 _tangent) {
      ${ae.instancedDoublePrecision?"return vec4(modelNormal * _tangent.xyz, _tangent.w);":"return _tangent;"}

    }
    `)}const re=(0,x.c)()},26859:(qe,xe,T)=>{"use strict";T.d(xe,{O:()=>B,h:()=>U});var D=T(17625);function x(W){const Y=D.H`vec3 decodeNormal(vec2 f) {
float z = 1.0 - abs(f.x) - abs(f.y);
return vec3(f + sign(f) * min(z, 0.0), z);
}`;W.fragment.code.add(Y),W.vertex.code.add(Y)}var U,W,w=T(16396);function B(W,Y){Y.normalType===U.Attribute&&(W.attributes.add(w.T.NORMAL,"vec3"),W.vertex.code.add(D.H`vec3 normalModel() {
return normal;
}`)),Y.normalType===U.CompressedAttribute&&(W.include(x),W.attributes.add(w.T.NORMALCOMPRESSED,"vec2"),W.vertex.code.add(D.H`vec3 normalModel() {
return decodeNormal(normalCompressed);
}`)),Y.normalType===U.ScreenDerivative&&(W.extensions.add("GL_OES_standard_derivatives"),W.fragment.code.add(D.H`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`))}(W=U||(U={}))[W.Attribute=0]="Attribute",W[W.CompressedAttribute=1]="CompressedAttribute",W[W.Ground=2]="Ground",W[W.ScreenDerivative=3]="ScreenDerivative",W[W.COUNT=4]="COUNT"},68565:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>ue,W:()=>re});var D=T(99770),x=T(84833),w=T(95285),B=T(97139),U=T(48565),W=T(7090),Y=T(17625),H=T(16396),G=T(41857);function re(ae,oe){ae.attributes.add(H.T.FEATUREVALUE,"vec4");const ie=ae.vertex;ie.code.add(Y.H`bool isCapVertex() {
return featureValue.w == 1.0;
}`),ie.uniforms.add(new w.A("size",X=>X.size)),oe.vvSize?(ie.uniforms.add(new B.J("vvSizeMinSize",X=>X.vvSizeMinSize)),ie.uniforms.add(new B.J("vvSizeMaxSize",X=>X.vvSizeMaxSize)),ie.uniforms.add(new B.J("vvSizeOffset",X=>X.vvSizeOffset)),ie.uniforms.add(new B.J("vvSizeFactor",X=>X.vvSizeFactor)),ie.code.add(Y.H`vec2 getSize() {
return size * clamp(vvSizeOffset + featureValue.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).xz;
}`)):ie.code.add(Y.H`vec2 getSize(){
return size;
}`),oe.vvOpacity?(ie.constants.add("vvOpacityNumber","int",8),ie.uniforms.add([new W.O("vvOpacityValues",X=>X.vvOpacityValues,8),new W.O("vvOpacityOpacities",X=>X.vvOpacityOpacities,8)]),ie.code.add(Y.H`vec4 applyOpacity(vec4 color) {
float value = featureValue.z;
if (value <= vvOpacityValues[0]) {
return vec4( color.xyz, vvOpacityOpacities[0]);
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return vec4( color.xyz, mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f));
}
}
return vec4( color.xyz, vvOpacityOpacities[vvOpacityNumber - 1]);
}`)):ie.code.add(Y.H`vec4 applyOpacity(vec4 color){
return color;
}`),oe.vvColor?(ie.constants.add("vvColorNumber","int",G.x),ie.uniforms.add([new W.O("vvColorValues",X=>X.vvColorValues,G.x),new U.b("vvColorColors",X=>X.vvColorColors,G.x)]),ie.code.add(Y.H`vec4 getColor() {
float value = featureValue.y;
if (value <= vvColorValues[0]) {
return applyOpacity(vvColorColors[0]);
}
for (int i = 1; i < vvColorNumber; ++i) {
if (vvColorValues[i] >= value) {
float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
return applyOpacity(mix(vvColorColors[i-1], vvColorColors[i], f));
}
}
return applyOpacity(vvColorColors[vvColorNumber - 1]);
}`)):ie.code.add(Y.H`vec4 getColor(){
return applyOpacity(vec4(1, 1, 1, 1));
}`),ae.include(x.f),ae.attributes.add(H.T.PROFILERIGHT,"vec4"),ae.attributes.add(H.T.PROFILEUP,"vec4"),ae.attributes.add(H.T.PROFILEVERTEXANDNORMAL,"vec4"),ie.code.add(Y.H`vec3 calculateVPos() {
vec2 size = getSize();
vec3 origin = position;
vec3 right = profileRight.xyz;
vec3 up = profileUp.xyz;
vec3 forward = cross(up, right);
vec2 profileVertex = profileVertexAndNormal.xy * size;
vec2 profileNormal = profileVertexAndNormal.zw;
float positionOffsetAlongProfilePlaneNormal = 0.0;
float normalOffsetAlongProfilePlaneNormal = 0.0;`),ie.code.add(Y.H`if(!isCapVertex()) {
vec2 rotationRight = vec2(profileRight.w, profileUp.w);
float maxDistance = length(rotationRight);`),ie.code.add(Y.H`rotationRight = maxDistance > 0.0 ? normalize(rotationRight) : vec2(0, 0);
float rx = dot(profileVertex, rotationRight);
if (abs(rx) > maxDistance) {
vec2 rotationUp = vec2(-rotationRight.y, rotationRight.x);
float ry = dot(profileVertex, rotationUp);
profileVertex = rotationRight * maxDistance * sign(rx) + rotationUp * ry;
}
}else{
positionOffsetAlongProfilePlaneNormal = profileRight.w * size[0];
normalOffsetAlongProfilePlaneNormal = profileUp.w;
}
vec3 offset = right * profileVertex.x + up * profileVertex.y + forward * positionOffsetAlongProfilePlaneNormal;
return origin + offset;
}`),ie.code.add(Y.H`vec3 localNormal() {
vec3 right = profileRight.xyz;
vec3 up = profileUp.xyz;
vec3 forward = cross(up, right);
vec2 profileNormal = profileVertexAndNormal.zw;
vec3 normal = right * profileNormal.x + up * profileNormal.y;
if(isCapVertex()) {
normal += forward * profileUp.w;
}
return normal;
}`)}class ue extends G.n{constructor(){super(...arguments),this.size=(0,D.f)(1,1)}}},84833:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>w});var D=T(17625),x=T(16396);function w(B){B.attributes.add(x.T.POSITION,"vec3"),B.vertex.code.add(D.H`vec3 positionModel() { return position; }`)}},39645:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>G});var D=T(97139),x=T(48565),w=T(65787),B=T(7090),U=T(17625),W=T(16396),Y=T(41857);function G($,re){const ue=$.vertex;ue.uniforms.add(new w.p("intrinsicWidth",ae=>ae.width)),re.vvSize?($.attributes.add(W.T.SIZEFEATUREATTRIBUTE,"float"),ue.uniforms.add(new D.J("vvSizeMinSize",ae=>ae.vvSizeMinSize)),ue.uniforms.add(new D.J("vvSizeMaxSize",ae=>ae.vvSizeMaxSize)),ue.uniforms.add(new D.J("vvSizeOffset",ae=>ae.vvSizeOffset)),ue.uniforms.add(new D.J("vvSizeFactor",ae=>ae.vvSizeFactor)),ue.code.add(U.H`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):($.attributes.add(W.T.SIZE,"float"),ue.code.add(U.H`float getSize(){
return intrinsicWidth * size;
}`)),re.vvOpacity?($.attributes.add(W.T.OPACITYFEATUREATTRIBUTE,"float"),ue.constants.add("vvOpacityNumber","int",8),ue.uniforms.add([new B.O("vvOpacityValues",ae=>ae.vvOpacityValues,8),new B.O("vvOpacityOpacities",ae=>ae.vvOpacityOpacities,8)]),ue.code.add(U.H`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):ue.code.add(U.H`vec4 applyOpacity( vec4 color ){
return color;
}`),re.vvColor?($.attributes.add(W.T.COLORFEATUREATTRIBUTE,"float"),ue.constants.add("vvColorNumber","int",Y.x),ue.uniforms.add(new B.O("vvColorValues",ae=>ae.vvColorValues,Y.x)),ue.uniforms.add(new x.b("vvColorColors",ae=>ae.vvColorColors,Y.x)),ue.code.add(U.H`vec4 interpolateColor( float value ) {
if (value <= vvColorValues[0]) {
return vvColorColors[0];
}
for (int i = 1; i < vvColorNumber; ++i) {
if (vvColorValues[i] >= value) {
float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
return mix(vvColorColors[i-1], vvColorColors[i], f);
}
}
return vvColorColors[vvColorNumber - 1];
}
vec4 getColor(){
return applyOpacity(interpolateColor(colorFeatureAttribute));
}`)):($.attributes.add(W.T.COLOR,"vec4"),ue.code.add(U.H`vec4 getColor(){
return applyOpacity(color);
}`))}},99579:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>W});var D=T(60785),x=T(18952),w=T(17625),B=T(16396),U=T(57623);function W(Y,H){H.hasSymbolColors?(Y.include(D.A),Y.attributes.add(B.T.SYMBOLCOLOR,"vec4"),Y.varyings.add("colorMixMode","mediump float"),Y.vertex.code.add(w.H`int symbolColorMixMode;
vec4 getSymbolColor() {
return decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;
}
void forwardColorMixMode() {
colorMixMode = float(symbolColorMixMode) + 0.5;
}`)):(Y.fragment.uniforms.add(new x._("colorMixMode",G=>U.FZ[G.colorMixMode])),Y.vertex.code.add(w.H`vec4 getSymbolColor() { return vec4(1.0); }
void forwardColorMixMode() {}`))}},36603:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>U,N:()=>B});var B,W,D=T(94573),x=T(17625),w=T(16396);function U(W,Y){switch(Y.textureCoordinateType){case B.Default:return W.attributes.add(w.T.UV0,"vec2"),W.varyings.add("vuv0","vec2"),void W.vertex.code.add(x.H`void forwardTextureCoordinates() {
vuv0 = uv0;
}`);case B.Atlas:return W.attributes.add(w.T.UV0,"vec2"),W.varyings.add("vuv0","vec2"),W.attributes.add(w.T.UVREGION,"vec4"),W.varyings.add("vuvRegion","vec4"),void W.vertex.code.add(x.H`void forwardTextureCoordinates() {
vuv0 = uv0;
vuvRegion = uvRegion;
}`);case B.None:return void W.vertex.code.add(x.H`void forwardTextureCoordinates() {}`);default:(0,D.Bg)(Y.textureCoordinateType);case B.COUNT:return}}(W=B||(B={}))[W.None=0]="None",W[W.Default=1]="Default",W[W.Atlas=2]="Atlas",W[W.COUNT=3]="COUNT"},58173:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>w});var D=T(17625),x=T(16396);function w(B,U){U.hasVertexColors?(B.attributes.add(x.T.COLOR,"vec4"),B.varyings.add("vColor","vec4"),B.vertex.code.add(D.H`void forwardVertexColor() { vColor = color; }`),B.vertex.code.add(D.H`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):B.vertex.code.add(D.H`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}},21799:(qe,xe,T)=>{"use strict";T.d(xe,{Bb:()=>H,Pf:()=>$,d4:()=>G});var D=T(550),x=T(4794),w=T(26859),B=T(51040),U=T(17625),W=T(9546),Y=T(91574);function H(re,ue){ue.normalType===w.h.Attribute||ue.normalType===w.h.CompressedAttribute?(re.include(w.O,ue),re.varyings.add("vNormalWorld","vec3"),re.varyings.add("vNormalView","vec3"),re.vertex.uniforms.add([new W.j("transformNormalGlobalFromModel",ae=>ae.transformNormalGlobalFromModel),new Y.c("transformNormalViewFromGlobal",ae=>ae.transformNormalViewFromGlobal)]),re.vertex.code.add(U.H`void forwardNormal() {
vNormalWorld = transformNormalGlobalFromModel * normalModel();
vNormalView = transformNormalViewFromGlobal * vNormalWorld;
}`)):ue.normalType===w.h.Ground?(re.include(B.up,ue),re.varyings.add("vNormalWorld","vec3"),re.vertex.code.add(U.H`
    void forwardNormal() {
      vNormalWorld = ${ue.spherical?U.H`normalize(vPositionWorldCameraRelative);`:U.H`vec3(0.0, 0.0, 1.0);`}
    }
    `)):re.vertex.code.add(U.H`void forwardNormal() {}`)}class G extends B.su{constructor(){super(...arguments),this.transformNormalViewFromGlobal=(0,D.c)()}}class $ extends B.OU{constructor(){super(...arguments),this.transformNormalGlobalFromModel=(0,D.c)(),this.toMapSpace=(0,x.c)()}}},51040:(qe,xe,T)=>{"use strict";T.d(xe,{OU:()=>ie,su:()=>oe,up:()=>ae});var D=T(550),x=T(43703),w=T(14658),B=T(28093),U=T(84833),W=T(7228),Y=T(77739),H=T(97139),G=T(17625),$=T(9546),re=T(91574),ue=T(63123);function ae(X,Z){X.include(U.f);const Q=X.vertex;Q.include(W.$,Z),X.varyings.add("vPositionWorldCameraRelative","vec3"),X.varyings.add("vPosition_view","vec3"),Q.uniforms.add([new H.J("transformWorldFromViewTH",J=>J.transformWorldFromViewTH),new H.J("transformWorldFromViewTL",J=>J.transformWorldFromViewTL),new re.c("transformViewFromCameraRelativeRS",J=>J.transformViewFromCameraRelativeRS),new ue.g("transformProjFromView",J=>J.transformProjFromView),new $.j("transformWorldFromModelRS",J=>J.transformWorldFromModelRS),new Y.B("transformWorldFromModelTH",J=>J.transformWorldFromModelTH),new Y.B("transformWorldFromModelTL",J=>J.transformWorldFromModelTL)]),Q.code.add(G.H`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),Q.code.add(G.H`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${Z.spherical?G.H`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:G.H`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),X.fragment.uniforms.add(new H.J("transformWorldFromViewTL",J=>J.transformWorldFromViewTL)),Q.code.add(G.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),X.fragment.code.add(G.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class oe extends G.K{constructor(){super(...arguments),this.transformWorldFromViewTH=(0,B.c)(),this.transformWorldFromViewTL=(0,B.c)(),this.transformViewFromCameraRelativeRS=(0,D.c)(),this.transformProjFromView=(0,x.c)()}}class ie extends G.K{constructor(){super(...arguments),this.transformWorldFromModelRS=(0,D.c)(),this.transformWorldFromModelTH=(0,w.c)(),this.transformWorldFromModelTL=(0,w.c)()}}},43880:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>x});var D=T(17625);function x(w,B){w.varyings.add("tbnTangent","vec3"),w.varyings.add("tbnBiTangent","vec3"),w.vertex.code.add(B.spherical?D.H`void forwardVertexTangent(vec3 n) {
tbnTangent = normalize(cross(vec3(0.0, 0.0, 1.0), n));
tbnBiTangent = normalize(cross(n, tbnTangent));
}`:D.H`void forwardVertexTangent(vec3 n) {
tbnTangent = vec3(1.0, 0.0, 0.0);
tbnBiTangent = normalize(cross(n, tbnTangent));
}`),w.fragment.code.add(D.H`mat3 getTBNMatrix(vec3 n) {
return mat3(tbnTangent, tbnBiTangent, n);
}`)}},95284:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>U});var D=T(94573),x=T(36603),w=T(95267),B=T(17625);function U(W,Y){switch(W.include(x.D,Y),W.fragment.code.add(B.H`
  struct TextureLookupParameter {
    vec2 uv;
    ${Y.supportsTextureAtlas?"vec2 size;":""}
  } vtc;
  `),Y.textureCoordinateType){case x.N.Default:return void W.fragment.code.add(B.H`vec4 textureLookup(sampler2D texture, TextureLookupParameter params) {
return texture2D(texture, params.uv);
}`);case x.N.Atlas:return W.include(w.r),void W.fragment.code.add(B.H`vec4 textureLookup(sampler2D texture, TextureLookupParameter params) {
return textureAtlasLookup(texture, params.size, params.uv, vuvRegion);
}`);default:(0,D.Bg)(Y.textureCoordinateType);case x.N.None:case x.N.COUNT:return}}},66085:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>Y,V:()=>G});var D=T(993),x=T(4794),w=T(71850),B=T(2166),U=T(69960),W=T(17625);function Y($,re){const ue=$.vertex;re.hasVerticalOffset?(G(ue),re.hasScreenSizePerspective&&($.include(w.cK),(0,w.m8)(ue),(0,B.h)($.vertex,re)),ue.code.add(W.H`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${re.spherical?W.H`vec3 worldNormal = normalize(worldPos + localOrigin);`:W.H`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${re.hasScreenSizePerspective?W.H`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:W.H`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):ue.code.add(W.H`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const H=(0,x.c)();function G($){$.uniforms.add(new U.N("verticalOffset",(re,ue)=>{const{minWorldLength:ae,maxWorldLength:oe,screenLength:ie}=re.verticalOffset,X=Math.tan(.5*ue.camera.fovY)/(.5*ue.camera.fullViewport[3]);return(0,D.s)(H,ie*(ue.camera.pixelRatio||1),X,ae,oe)}))}},58208:(qe,xe,T)=>{"use strict";T.d(xe,{s:()=>ie});var D=T(6945),x=T(78925),w=T(24255),B=T(26859),U=T(36603),W=T(21799),Y=T(54120),H=T(62952),G=T(92836),$=T(93609),re=T(2166),ue=T(95285),ae=T(17625),oe=T(35387);function ie(X,Z){const Q=X.vertex.code,J=X.fragment.code,se=Z.hasModelTransformation;Z.output!==D.H.Depth&&Z.output!==D.H.Shadow||((0,re.S)(X,Z),X.include(w.w,{linearDepth:!0,hasModelTransformation:se}),X.include(U.D,Z),X.include(G.k,Z),X.include(Y.F,Z),X.include(x.f5,Z),X.vertex.uniforms.add(new ue.A("nearFar",(ee,le)=>le.camera.nearFar)),X.varyings.add("depth","float"),Z.hasColorTexture&&X.fragment.uniforms.add(new oe.A("tex",ee=>ee.texture)),Q.add(ae.H`
      void main(void) {
        vpos = calculateVPos();
        vpos = subtractOrigin(vpos);
        vpos = addVerticalOffset(vpos, localOrigin);
        gl_Position = transformPositionWithDepth(proj, view, ${se?"model,":""} vpos, nearFar, depth);
        forwardTextureCoordinates();
      }
    `),X.include($.z,Z),J.add(ae.H`
      void main(void) {
        discardBySlice(vpos);
        ${Z.hasColorTexture?ae.H`
        vec4 texColor = texture2D(tex, vuv0);
        discardOrAdjustAlpha(texColor);`:""}
        outputDepth(depth);
      }
    `)),Z.output===D.H.Normal&&((0,re.S)(X,Z),X.include(w.w,{linearDepth:!1,hasModelTransformation:se}),X.include(B.O,Z),X.include(W.Bb,Z),X.include(U.D,Z),X.include(G.k,Z),Z.hasColorTexture&&X.fragment.uniforms.add(new oe.A("tex",ee=>ee.texture)),X.varyings.add("vPositionView","vec3"),Q.add(ae.H`
      void main(void) {
        vpos = calculateVPos();
        vpos = subtractOrigin(vpos);
        ${Z.normalType===B.h.Attribute?ae.H`
        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:""}
        vpos = addVerticalOffset(vpos, localOrigin);
        gl_Position = transformPosition(proj, view, ${se?"model,":""} vpos);
        forwardTextureCoordinates();
      }
    `),X.include(x.f5,Z),X.include($.z,Z),J.add(ae.H`
      void main() {
        discardBySlice(vpos);
        ${Z.hasColorTexture?ae.H`
        vec4 texColor = texture2D(tex, vuv0);
        discardOrAdjustAlpha(texColor);`:""}

        ${Z.normalType===B.h.ScreenDerivative?ae.H`
            vec3 normal = screenDerivativeNormal(vPositionView);`:ae.H`
            vec3 normal = normalize(vNormalWorld);
            if (gl_FrontFacing == false) normal = -normal;`}
        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);
      }
    `)),Z.output===D.H.Highlight&&((0,re.S)(X,Z),X.include(w.w,{linearDepth:!1,hasModelTransformation:se}),X.include(U.D,Z),X.include(G.k,Z),Z.hasColorTexture&&X.fragment.uniforms.add(new oe.A("tex",ee=>ee.texture)),Q.add(ae.H`
      void main(void) {
        vpos = calculateVPos();
        vpos = subtractOrigin(vpos);
        vpos = addVerticalOffset(vpos, localOrigin);
        gl_Position = transformPosition(proj, view, ${se?"model,":""} vpos);
        forwardTextureCoordinates();
      }
    `),X.include(x.f5,Z),X.include($.z,Z),X.include(H.bA),J.add(ae.H`
      void main() {
        discardBySlice(vpos);
        ${Z.hasColorTexture?ae.H`
        vec4 texColor = texture2D(tex, vuv0);
        discardOrAdjustAlpha(texColor);`:""}
        outputHighlight();
      }
    `))}},35283:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>x});var D=T(17625);function x(w){const B=D.H`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`,U=D.H`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`;w.vertex.code.add(B),w.vertex.code.add(U),w.fragment.code.add(B),w.fragment.code.add(U)}},97347:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>ue,d:()=>re});var re,ae,D=T(66085),x=T(42309),w=T(71850),B=T(2166),U=T(69960),W=T(65787),Y=T(17625),H=T(63123),G=T(35387),$=T(16396);function ue(ae,oe){ae.include(w.cK),ae.attributes.add($.T.POSITION,"vec3"),ae.attributes.add($.T.NORMAL,"vec3"),ae.attributes.add($.T.AUXPOS1,"vec4");const ie=ae.vertex;(0,B.S)(ae,oe),(0,B.h)(ie,oe),ie.uniforms.add([new U.N("viewport",(X,Z)=>Z.camera.fullViewport),new W.p("polygonOffset",X=>X.shaderPolygonOffset),new W.p("cameraGroundRelative",(X,Z)=>Z.camera.aboveGround?1:-1),new W.p("renderTransparentlyOccludedHUD",(X,Z)=>Z.renderTransparentlyOccludedHUD===x.v.Occluded?1:Z.renderTransparentlyOccludedHUD===x.v.NotOccluded?0:.75),new G.A("hudVisibilityTexture",(X,Z)=>Z.hudVisibilityTexture)]),oe.hasVerticalOffset&&(0,D.V)(ie),ie.constants.add("smallOffsetAngle","float",.984807753012208),ie.code.add(Y.H`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),ie.code.add(Y.H`float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
float pointGroundSign = sign(pointGroundDistance);
if (pointGroundSign == 0.0) {
pointGroundSign = cameraGroundRelative;
}
float groundRelative = cameraGroundRelative * pointGroundSign;
if (polygonOffset > .0) {
float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
float factor = (1.0 - tanAlpha / viewport[2]);
if (groundRelative > 0.0) {
posView *= factor;
}
else {
posView /= factor;
}
}
return groundRelative;
}`),oe.isDraped&&!oe.hasVerticalOffset||ie.uniforms.add(new H.g("viewNormal",(X,Z)=>Z.camera.viewInverseTransposeMatrix)),oe.isDraped||(ie.uniforms.add(new W.p("perDistancePixelRatio",(X,Z)=>Math.tan(Z.camera.fovY/2)/(Z.camera.fullViewport[2]/2))),ie.code.add(Y.H`void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
float distanceToCamera = length(posView);
float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;
vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;
vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
posModel += modelOffset;
posView += viewOffset;
}`)),oe.screenCenterOffsetUnitsEnabled===re.Screen&&ie.uniforms.add(new W.p("pixelRatio",(X,Z)=>Z.camera.pixelRatio)),oe.hasScreenSizePerspective&&(0,w.m8)(ie),ie.code.add(Y.H`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${oe.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${oe.hasScreenSizePerspective&&(oe.hasVerticalOffset||oe.screenCenterOffsetUnitsEnabled===re.Screen)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${oe.hasVerticalOffset?oe.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${oe.hasVerticalOffset?Y.H`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${oe.screenCenterOffsetUnitsEnabled!==re.Screen?Y.H`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${oe.screenCenterOffsetUnitsEnabled===re.Screen?oe.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${oe.screenCenterOffsetUnitsEnabled===re.Screen?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `),ie.code.add(Y.H`bool testVisibilityHUD(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}(ae=re||(re={}))[ae.World=0]="World",ae[ae.Screen=1]="Screen",ae[ae.COUNT=2]="COUNT"},27776:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>Y});var D=T(47923),x=T(82793),w=T(19278),B=T(95285),U=T(17625),W=T(35387);function Y(H,G){const{vertex:$,fragment:re}=H;G.hasMultipassGeometry&&$.include(x.S),G.hasMultipassTerrain&&H.varyings.add("depth","float"),$.code.add(U.H`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${G.hasMultipassGeometry?U.H`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      ${G.hasMultipassTerrain?"depth = projectAux.posView.z;":""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `),G.hasMultipassTerrain&&re.include(D.S),G.hasMultipassTerrain&&re.uniforms.add([new W.A("terrainDepthTexture",(ue,ae)=>ae.multipassTerrain.linearDepthTexture),new B.A("nearFar",(ue,ae)=>ae.camera.nearFar),new B.A("inverseViewport",(ue,ae)=>ae.inverseViewport)]),re.include(w.n),re.code.add(U.H`
  void main() {
    gl_FragColor = vec4(1, 1, 1, 1);
    ${G.hasMultipassTerrain?U.H`
          vec2 uv = gl_FragCoord.xy * inverseViewport;

          //Read the rgba data from the texture linear depth
          vec4 terrainDepthData = texture2D(terrainDepthTexture, uv);

          float terrainDepth = linearDepthFromFloat(rgba2float(terrainDepthData), nearFar);

          //If HUD vertex is behind terrain and the terrain depth is not the initialize value (e.g. we are not looking at the sky)
          //Mark the HUD vertex as occluded by transparent terrain
          if(depth < terrainDepth && terrainDepthData != vec4(0,0,0,1)){
            gl_FragColor.g = 0.5;
          }`:""}
  }
  `)}},42309:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{v:()=>D}),(x=D||(D={}))[x.Occluded=0]="Occluded",x[x.NotOccluded=1]="NotOccluded",x[x.Both=2]="Both",x[x.COUNT=3]="COUNT"},7699:(qe,xe,T)=>{"use strict";var D,x,U;T.d(xe,{MV:()=>B,iM:()=>x,pU:()=>w}),(U=D||(D={}))[U.OneMinusSourceAlpha=0]="OneMinusSourceAlpha",U[U.SourceAlpha=1]="SourceAlpha",U[U.COUNT=2]="COUNT",function(U){U[U.Normal=0]="Normal",U[U.Average=1]="Average",U[U.Lighten=2]="Lighten",U[U.Lighter=3]="Lighter",U[U.Plus=4]="Plus",U[U.Screen=5]="Screen",U[U.ColorDodge=6]="ColorDodge",U[U.Darken=7]="Darken",U[U.Multiply=8]="Multiply",U[U.ColorBurn=9]="ColorBurn",U[U.Overlay=10]="Overlay",U[U.SoftLight=11]="SoftLight",U[U.HardLight=12]="HardLight",U[U.VividLight=13]="VividLight",U[U.Hue=14]="Hue",U[U.Saturation=15]="Saturation",U[U.Luminosity=16]="Luminosity",U[U.Color=17]="Color",U[U.DestinationOver=18]="DestinationOver",U[U.DestinationAtop=19]="DestinationAtop",U[U.DestinationIn=20]="DestinationIn",U[U.DestinationOut=21]="DestinationOut",U[U.SourceAtop=22]="SourceAtop",U[U.SourceIn=23]="SourceIn",U[U.SourceOut=24]="SourceOut",U[U.Xor=25]="Xor",U[U.Difference=26]="Difference",U[U.Exclusion=27]="Exclusion",U[U.Minus=28]="Minus",U[U.Invert=29]="Invert",U[U.Reflect=30]="Reflect",U[U.COUNT=31]="COUNT"}(x||(x={}));const w={normal:x.Normal,average:x.Average,lighten:x.Lighten,lighter:x.Lighter,screen:x.Screen,plus:x.Plus,"color-dodge":x.ColorDodge,darken:x.Darken,multiply:x.Multiply,"color-burn":x.ColorBurn,overlay:x.Overlay,"soft-light":x.SoftLight,"hard-light":x.HardLight,"vivid-light":x.VividLight,hue:x.Hue,saturation:x.Saturation,luminosity:x.Luminosity,color:x.Color,difference:x.Difference,exclusion:x.Exclusion,minus:x.Minus,invert:x.Invert,reflect:x.Reflect,"destination-over":x.DestinationOver,"destination-atop":x.DestinationAtop,"destination-in":x.DestinationIn,"destination-out":x.DestinationOut,"source-atop":x.SourceAtop,"source-in":x.SourceIn,"source-out":x.SourceOut,xor:x.Xor};function B(U){return U===x.DestinationOver||U===x.DestinationAtop||U===x.DestinationIn||U===x.DestinationOut||U===x.SourceAtop||U===x.SourceIn||U===x.SourceOut||U===x.Xor}},54120:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>B});var D=T(6945),x=T(19278),w=T(17625);function B(U,W){U.fragment.include(x.n),W.output===D.H.Shadow?(U.extensions.add("GL_OES_standard_derivatives"),U.fragment.code.add(w.H`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):W.output===D.H.Depth&&U.fragment.code.add(w.H`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)}},62952:(qe,xe,T)=>{"use strict";T.d(xe,{bA:()=>H,ck:()=>Y}),T(99770);var x=T(4794),w=T(95285),B=T(17625),U=T(35387);const W=(0,x.f)(1,1,0,1),Y=(0,x.f)(1,0,1,1);function H($){$.fragment.uniforms.add(new U.A("depthTex",(re,ue)=>ue.highlightDepthTexture)),$.fragment.uniforms.add(new w.A("highlightViewportPixelSz",(re,ue)=>ue.inverseViewport)),$.fragment.constants.add("occludedHighlightFlag","vec4",W).add("unoccludedHighlightFlag","vec4",Y),$.fragment.code.add(B.H`void outputHighlight() {
vec4 fragCoord = gl_FragCoord;
float sceneDepth = texture2D(depthTex, fragCoord.xy * highlightViewportPixelSz.xy).r;
if (fragCoord.z > sceneDepth + 5e-7) {
gl_FragColor = occludedHighlightFlag;
}
else {
gl_FragColor = unoccludedHighlightFlag;
}
}`)}},47923:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>w});var D=T(19278),x=T(17625);function w(B){B.include(D.n),B.code.add(x.H`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)}},3802:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>B});var D=T(65787),x=T(17625),w=T(35387);function B(U){U.fragment.uniforms.add([new w.A("u_colormap",W=>W.u_colormap),new D.p("u_colormapOffset",W=>W.colormap.u_colormapOffset),new D.p("u_colormapMaxIndex",W=>W.colormap.u_colormapMaxIndex),new D.p("u_opacity",W=>W.common.u_opacity)]),U.fragment.code.add(x.H`vec4 colormap(vec4 currentPixel, bool isFloat) {
float clrIndex = isFloat ? currentPixel.r - u_colormapOffset : currentPixel.r * 255.0 - u_colormapOffset;
vec4 result;
if (currentPixel.a == 0.0 || clrIndex > u_colormapMaxIndex) {
result = vec4(0.0, 0.0, 0.0, 0.0);
} else {
vec2 clrPosition = vec2((clrIndex + 0.5) / (u_colormapMaxIndex + 1.0), 0.0);
result = texture2D(u_colormap, clrPosition);
}
return result;
}`)}},76301:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>H,J:()=>Y});var D=T(95285),x=T(17625),w=T(35387);function B(G){G.fragment.uniforms.add(new w.A("u_transformGrid",$=>$.u_transformGrid)),G.fragment.uniforms.add(new D.A("u_transformSpacing",$=>$.common.u_transformSpacing)),G.fragment.uniforms.add(new D.A("u_transformGridSize",$=>$.common.u_transformGridSize)),G.fragment.uniforms.add(new D.A("u_targetImageSize",$=>$.common.u_targetImageSize)),G.fragment.code.add(x.H`vec2 projectPixelLocation(vec2 coords) {
vec2 index_image = floor(coords * u_targetImageSize);
vec2 oneTransformPixel = vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);
vec2 index_transform = floor(index_image / u_transformSpacing) / u_transformGridSize;
vec2 pos = fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);
vec2 srcLocation;
vec2 transform_location = index_transform + oneTransformPixel * 0.5;
if (pos.s <= pos.t) {
vec4 ll_abc = texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));
vec4 ll_def = texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));
srcLocation.s = dot(ll_abc.rgb, vec3(pos, 1.0));
srcLocation.t = dot(ll_def.rgb, vec3(pos, 1.0));
} else {
vec4 ur_abc = texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));
vec4 ur_def = texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));
srcLocation.s = dot(ur_abc.rgb, vec3(pos, 1.0));
srcLocation.t = dot(ur_def.rgb, vec3(pos, 1.0));
}
return srcLocation;;
}`)}var U=T(14273),W=T(78038);class Y extends U.R{constructor($,re,ue){super(),this.common=$,this.u_image=re,this.u_transformGrid=ue}}function H(G){G.include(B),G.fragment.uniforms.add([new w.A("u_image",$=>$.u_image),new W.U("u_flipY",$=>$.common.u_flipY),new W.U("u_applyTransform",$=>$.common.u_applyTransform)]),G.fragment.code.add(x.H`vec2 getPixelLocation(vec2 coords) {
vec2 targetLocation = u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;
if (!u_applyTransform) {
return targetLocation;
}
return projectPixelLocation(targetLocation);
}
bool isOutside(vec2 coords){
if (coords.t>1.00001 ||coords.t<-0.00001 || coords.s>1.00001 ||coords.s<-0.00001) {
return true;
} else {
return false;
}
}
vec4 getPixel(vec2 pixelLocation) {
return texture2D(u_image, pixelLocation);
}`)}},2122:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>W});var D=T(58173),x=T(28137),w=T(90637),B=T(2163),U=T(17625);function W(Y,H){Y.include(D.c,H),Y.fragment.include(x.y);const G=Y.fragment;G.uniforms.add(new w.$("baseColor",$=>$.baseColor)),G.uniforms.add(new B.p("objectOpacity",$=>$.objectOpacity)),G.code.add(H.hasVertexColors?U.H`vec3 _baseColor() {
return baseColor.rgb * vColor.rgb;
}
float _baseOpacity() {
return baseColor.a * vColor.a;
}`:U.H`vec3 _baseColor() {
return baseColor.rgb;
}
float _baseOpacity() {
return baseColor.a;
}`),G.code.add(U.H`vec4 computeMaterialColor(vec4 textureColor, vec4 externalColor, int externalColorMixMode) {
vec3 baseColor = _baseColor();
float baseOpacity = _baseOpacity();
vec3 color = mixExternalColor(
baseColor,
textureColor.rgb,
externalColor.rgb,
externalColorMixMode
);
float opacity = objectOpacity * mixExternalOpacity(
baseOpacity,
textureColor.a,
externalColor.a,
externalColorMixMode
);
return vec4(color, opacity);
}`)}},29052:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>G});var D=T(36603),x=T(95284),w=T(96395),B=T(17625),U=T(5864),W=T(35387),Y=T(37847),H=T(16396);function G($,re){const ue=$.fragment;if(re.hasVertexTangents?($.attributes.add(H.T.TANGENT,"vec4"),$.varyings.add("vTangent","vec4"),ue.code.add(re.doubleSidedMode===w.q.WindingOrder?B.H`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;
vec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`:B.H`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = vTangent.w;
vec3 tangent = normalize(vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`)):($.extensions.add("GL_OES_standard_derivatives"),ue.code.add(B.H`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {
vec3 Q1 = dFdx(pos);
vec3 Q2 = dFdy(pos);
vec2 stx = dFdx(st);
vec2 sty = dFdy(st);
float det = stx.t * sty.s - sty.t * stx.s;
vec3 T = stx.t * Q2 - sty.t * Q1;
T = T - normal * dot(normal, T);
T *= inversesqrt(max(dot(T,T), 1.e-10));
vec3 B = sign(det) * cross(normal, T);
return mat3(T, B, normal);
}`)),re.textureCoordinateType!==D.N.None){$.include(x.i,re);const ae=re.supportsTextureAtlas;ue.uniforms.add(re.pbrTextureBindType===Y.P.Pass?(0,W.J)("normalTexture",oe=>oe.textureNormal,ae):(0,U.F)("normalTexture",oe=>oe.textureNormal,ae)),ue.code.add(B.H`
    vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {
      vtc.uv = uv;
      ${re.supportsTextureAtlas?"vtc.size = normalTextureSize;":""}
      vec3 rawNormal = textureLookup(normalTexture, vtc).rgb * 2.0 - 1.0;
      return tangentSpace * rawNormal;
    }
  `)}}},75819:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>Y});var D=T(94573),x=T(26859),w=T(21799),B=T(51040),U=T(96395),W=T(17625);function Y(H,G){const $=H.fragment;switch(G.doubleSidedMode){case U.q.None:$.code.add(W.H`vec3 _adjustDoublesided(vec3 normal) {
return normal;
}`);break;case U.q.View:H.include(B.up,G),$.code.add(W.H`vec3 _adjustDoublesided(vec3 normal) {
return dot(normal, vPositionWorldCameraRelative) > 0.0 ? -normal : normal;
}`);break;case U.q.WindingOrder:$.code.add(W.H`vec3 _adjustDoublesided(vec3 normal) {
return gl_FrontFacing ? normal : -normal;
}`);break;default:(0,D.Bg)(G.doubleSidedMode);case U.q.COUNT:}switch(G.normalType){case x.h.Attribute:case x.h.CompressedAttribute:H.include(w.Bb,G),$.code.add(W.H`vec3 shadingNormalWorld() {
return _adjustDoublesided(normalize(vNormalWorld));
}
vec3 shadingNormal_view() {
vec3 normal = normalize(vNormalView);
return gl_FrontFacing ? normal : -normal;
}`);break;case x.h.ScreenDerivative:H.extensions.add("GL_OES_standard_derivatives"),H.include(B.up,G),$.code.add(W.H`vec3 shadingNormalWorld() {
return normalize(cross(
dFdx(vPositionWorldCameraRelative),
dFdy(vPositionWorldCameraRelative)
));
}
vec3 shadingNormal_view() {
return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view)));
}`);break;case x.h.Ground:G.spherical?(H.include(B.up,G),$.code.add(W.H`vec3 shadingNormalWorld() {
return normalize(positionWorld());
}`)):$.code.add(W.H`vec3 shadingNormalWorld() {
return vec3(0.0, 0.0, 1.0);
}`),H.extensions.add("GL_OES_standard_derivatives"),$.code.add(W.H`vec3 shadingNormal_view() {
return normalize(cross(dFdx(vPosition_view),dFdy(vPosition_view))).xyz;
}`);break;default:(0,D.Bg)(G.normalType);case x.h.COUNT:}}},44965:(qe,xe,T)=>{"use strict";T.d(xe,{_:()=>G});var D=T(84161),x=T(28093),w=T(993),B=T(4794),U=T(92724),W=T(97139),Y=T(69960),H=T(17625);function G(ue,ae){const oe=ue.fragment,ie=void 0!==ae.lightingSphericalHarmonicsOrder?ae.lightingSphericalHarmonicsOrder:2;0===ie?(oe.uniforms.add(new W.J("lightingAmbientSH0",(X,Z)=>(0,D.s)($,Z.lighting.sh.r[0],Z.lighting.sh.g[0],Z.lighting.sh.b[0]))),oe.code.add(H.H`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
return ambientLight * (1.0 - ambientOcclusion);
}`)):1===ie?(oe.uniforms.add([new Y.N("lightingAmbientSH_R",(X,Z)=>(0,w.s)(re,Z.lighting.sh.r[0],Z.lighting.sh.r[1],Z.lighting.sh.r[2],Z.lighting.sh.r[3])),new Y.N("lightingAmbientSH_G",(X,Z)=>(0,w.s)(re,Z.lighting.sh.g[0],Z.lighting.sh.g[1],Z.lighting.sh.g[2],Z.lighting.sh.g[3])),new Y.N("lightingAmbientSH_B",(X,Z)=>(0,w.s)(re,Z.lighting.sh.b[0],Z.lighting.sh.b[1],Z.lighting.sh.b[2],Z.lighting.sh.b[3]))]),oe.code.add(H.H`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec4 sh0 = vec4(
0.282095,
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y
);
vec3 ambientLight = vec3(
dot(lightingAmbientSH_R, sh0),
dot(lightingAmbientSH_G, sh0),
dot(lightingAmbientSH_B, sh0)
);
return ambientLight * (1.0 - ambientOcclusion);
}`)):2===ie&&(oe.uniforms.add([new W.J("lightingAmbientSH0",(X,Z)=>(0,D.s)($,Z.lighting.sh.r[0],Z.lighting.sh.g[0],Z.lighting.sh.b[0])),new Y.N("lightingAmbientSH_R1",(X,Z)=>(0,w.s)(re,Z.lighting.sh.r[1],Z.lighting.sh.r[2],Z.lighting.sh.r[3],Z.lighting.sh.r[4])),new Y.N("lightingAmbientSH_G1",(X,Z)=>(0,w.s)(re,Z.lighting.sh.g[1],Z.lighting.sh.g[2],Z.lighting.sh.g[3],Z.lighting.sh.g[4])),new Y.N("lightingAmbientSH_B1",(X,Z)=>(0,w.s)(re,Z.lighting.sh.b[1],Z.lighting.sh.b[2],Z.lighting.sh.b[3],Z.lighting.sh.b[4])),new Y.N("lightingAmbientSH_R2",(X,Z)=>(0,w.s)(re,Z.lighting.sh.r[5],Z.lighting.sh.r[6],Z.lighting.sh.r[7],Z.lighting.sh.r[8])),new Y.N("lightingAmbientSH_G2",(X,Z)=>(0,w.s)(re,Z.lighting.sh.g[5],Z.lighting.sh.g[6],Z.lighting.sh.g[7],Z.lighting.sh.g[8])),new Y.N("lightingAmbientSH_B2",(X,Z)=>(0,w.s)(re,Z.lighting.sh.b[5],Z.lighting.sh.b[6],Z.lighting.sh.b[7],Z.lighting.sh.b[8]))]),oe.code.add(H.H`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
vec4 sh1 = vec4(
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y,
1.092548 * normal.x * normal.y
);
vec4 sh2 = vec4(
1.092548 * normal.y * normal.z,
0.315392 * (3.0 * normal.z * normal.z - 1.0),
1.092548 * normal.x * normal.z,
0.546274 * (normal.x * normal.x - normal.y * normal.y)
);
ambientLight += vec3(
dot(lightingAmbientSH_R1, sh1),
dot(lightingAmbientSH_G1, sh1),
dot(lightingAmbientSH_B1, sh1)
);
ambientLight += vec3(
dot(lightingAmbientSH_R2, sh2),
dot(lightingAmbientSH_G2, sh2),
dot(lightingAmbientSH_B2, sh2)
);
return ambientLight * (1.0 - ambientOcclusion);
}`),ae.pbrMode!==U.f7.Normal&&ae.pbrMode!==U.f7.Schematic||oe.code.add(H.H`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);
vec3 calculateAmbientRadiance(float ambientOcclusion)
{
vec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;
return ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;
}`))}const $=(0,x.c)(),re=(0,B.c)()},54662:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>W});var D=T(993),x=T(4794),w=T(69960),B=T(17625),U=T(35387);function W(H,G){const $=H.fragment;G.receiveAmbientOcclusion?($.uniforms.add([new U.A("ssaoTex",(re,ue)=>ue.ssaoHelper.colorTexture),new w.N("viewportPixelSz",(re,ue)=>(0,D.s)(Y,ue.camera.fullViewport[0],ue.camera.fullViewport[1],1/ue.ssaoHelper.width,1/ue.ssaoHelper.height))]),$.code.add(B.H`float evaluateAmbientOcclusion() {
return 1.0 - texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;
}
float evaluateAmbientOcclusionInverse() {
return texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;
}`)):$.code.add(B.H`float evaluateAmbientOcclusion() { return 0.0; }
float evaluateAmbientOcclusionInverse() { return 1.0; }`)}const Y=(0,x.c)()},13146:(qe,xe,T)=>{"use strict";T.d(xe,{X:()=>ue});var D=T(44965),x=T(54662),w=T(31166),B=T(98898),U=T(92724),W=T(39337),Y=T(78038),H=T(97139),G=T(65787),$=T(17625),re=T(95279);function ue(ae,oe){const ie=ae.fragment;ae.include(x.K,oe),oe.pbrMode!==U.f7.Disabled&&ae.include(B.T,oe),ae.include(D._,oe),ie.constants.add("ambientBoostFactor","float",re.V),ae.include(W.e),ie.code.add($.H`
    const float GAMMA_SRGB = 2.1;
    const float INV_GAMMA_SRGB = 0.4761904;
    ${oe.pbrMode===U.f7.Disabled?"":"const vec3 GROUND_REFLECTANCE = vec3(0.2);"}
  `),ie.uniforms.add(new H.J("lightingMainDirection",(X,Z)=>Z.lighting.lightingMainDirection)),ie.code.add($.H`
    float additionalDirectedAmbientLight(vec3 vPosWorld) {
      float vndl = dot(${oe.spherical?$.H`normalize(vPosWorld)`:$.H`vec3(0.0, 0.0, 1.0)`}, lightingMainDirection);
      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));
    }
  `),ie.uniforms.add([new G.p("lightingGlobalFactor",(X,Z)=>Z.lighting.globalFactor),new H.J("lightingMainIntensity",(X,Z)=>Z.lighting.mainLight.intensity)]),ie.code.add($.H`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {
float additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);
return (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * lightingMainIntensity;
}`),oe.pbrMode===U.f7.Disabled||oe.pbrMode===U.f7.WaterOnIntegratedMesh?(ae.include(w.k,oe),ie.code.add($.H`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)
{
vec3 mainLighting = evaluateMainLighting(normalWorld, shadow);
vec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);
vec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
vec3 totalLight = mainLighting + ambientLighting + additionalLight;
totalLight = min(totalLight, vec3(PI));
vec3 outColor = vec3((albedoLinear / PI) * totalLight);
return pow(outColor, vec3(INV_GAMMA_SRGB));
}`)):oe.pbrMode!==U.f7.Normal&&oe.pbrMode!==U.f7.Schematic||(ie.code.add($.H`const float fillLightIntensity = 0.25;
const float horizonLightDiffusion = 0.4;
const float additionalAmbientIrradianceFactor = 0.02;
vec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)
{
vec3 viewDirection = -viewDir;
vec3 mainLightDirection = lightingMainDirection;
vec3 h = normalize(viewDirection + mainLightDirection);
PBRShadingInfo inputs;
inputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);
inputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);
inputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);
inputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);
inputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);
vec3 reflectedView = normalize(reflect(viewDirection, normal));
inputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);
inputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
inputs.ssao = ssao;
inputs.metalness = mrr[0];
inputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),ie.code.add($.H`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;
inputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));
inputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),oe.useFillLights?ie.uniforms.add(new Y.U("hasFillLights",(X,Z)=>Z.enableFillLights)):ie.constants.add("hasFillLights","bool",!1),ie.code.add($.H`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);
ambientDir = ambientDir != vec3(0.0)? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));
inputs.NdotAmbDir = hasFillLights ? abs(dot(normal, ambientDir)) : 1.0;
vec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;
vec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * lightingMainIntensity * fillLightIntensity;
vec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;
inputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;
inputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),ie.uniforms.add([new G.p("lightingSpecularStrength",(X,Z)=>Z.lighting.mainLight.specularStrength),new G.p("lightingEnvironmentStrength",(X,Z)=>Z.lighting.mainLight.environmentStrength)]),ie.code.add($.H`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;
vec3 horizonRingH = normalize(viewDirection + horizonRingDir);
inputs.NdotH_Horizon = dot(normal, horizonRingH);
vec3 mainLightRadianceComponent = lightingSpecularStrength * normalDistribution(inputs.NdotH, inputs.roughness) * lightingMainIntensity * (1.0 - shadow);
vec3 horizonLightRadianceComponent = lightingEnvironmentStrength * normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * lightingMainIntensity * fillLightIntensity;
vec3 ambientLightRadianceComponent = lightingEnvironmentStrength * calculateAmbientRadiance(ssao) + additionalLight;
inputs.skyRadianceToSurface = ambientLightRadianceComponent + mainLightRadianceComponent + horizonLightRadianceComponent;
inputs.groundRadianceToSurface = GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) + mainLightRadianceComponent;
inputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),ie.code.add($.H`
        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);
        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;
        vec3 emissionComponent = pow(_emission, vec3(GAMMA_SRGB));
        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;
        ${oe.pbrMode===U.f7.Schematic?$.H`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:$.H`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`}
        return outColor;
      }
    `))}},45027:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>w,K:()=>x});var D=T(17625);function x(B){B.fragment.code.add(D.H`float normals2FoamIntensity(vec3 n, float waveStrength){
float normalizationFactor =  max(0.015, waveStrength);
return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);
}`)}function w(B){B.fragment.code.add(D.H`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){
return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;
}`)}},96896:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>x});var D=T(17625);function x(w){w.fragment.code.add(D.H`const float GAMMA = 2.2;
const float INV_GAMMA = 0.4545454545;
vec4 delinearizeGamma(vec4 color) {
return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);
}
vec3 linearizeGamma(vec3 color) {
return pow(color, vec3(GAMMA));
}`)}},92484:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>ae});var D=T(19278),x=T(2166),w=T(69960),B=T(65787),U=T(84178),W=T(17625),Y=T(66838),H=T(62208),G=T(993),$=T(4794);const ue=(0,$.c)();function ae(Z,Q){Z.constants.add("stippleAlphaColorDiscard","float",.001),Z.constants.add("stippleAlphaHighlightDiscard","float",.5),Q.stippleEnabled?function oe(Z,Q){const J=!(Q.draped&&Q.stipplePreferContinuous),{vertex:se,fragment:ee}=Z;ee.include(D.n),se.uniforms.add(new U.d("stipplePatternPixelSize")),Q.draped||((0,x.h)(se,Q),se.uniforms.add(new B.p("worldToScreenPerDistanceRatio",(le,ne)=>1/ne.camera.perScreenPixelRatio)),se.code.add(W.H`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),Z.varyings.add("vStippleDistance","float"),Q.stippleRequiresClamp&&Z.varyings.add("vStippleDistanceLimits","vec2"),Q.stippleRequiresStretchMeasure&&Z.varyings.add("vStipplePatternStretch","float"),se.code.add(W.H`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${X};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),se.code.add(W.H`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),se.code.add(W.H`
    if (segmentLengthPseudoScreen >= ${J?"patternLength":"1e4"}) {
  `),se.uniforms.add(new B.p("pixelRatio",(le,ne)=>ne.camera.pixelRatio)),se.code.add(W.H`
        // Round the screen length to get an integer number of pattern repetitions (minimum 1).
        float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
        float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
        float segmentLengthScreenRounded = flooredRepetitions * patternLength;

        ${Q.stippleRequiresStretchMeasure?W.H`
              float stretch = repetitions / flooredRepetitions;

              // We need to impose a lower bound on the stretch factor to prevent the dots from merging together when there is only 1 repetition.
              // 0.75 is the lowest possible stretch value for flooredRepetitions > 1, so it makes sense as lower bound.
              vStipplePatternStretch = max(0.75, stretch);`:""}

        return vec2(0.0, segmentLengthScreenRounded);
      }
      return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
    }
  `),ee.uniforms.add(new Y.Q("stipplePatternTexture")),ee.uniforms.add(new U.d("stipplePatternSDFNormalizer")),ee.uniforms.add(new U.d("stipplePatternTextureSize")),ee.uniforms.add(new U.d("stipplePatternPixelSizeInv")),ee.code.add(W.H`float padTexture(float u) {
return (u * stipplePatternTextureSize + 1.0)/(stipplePatternTextureSize + 2.0);
}`),ee.code.add(W.H`
    float getStippleSDF(out bool isClamped) {
      ${Q.stippleRequiresClamp?W.H`
          float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
          vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
          isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;`:W.H`
          float stippleDistanceClamped = vStippleDistance;
          isClamped = false;`}

      float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv;
      ${Q.stippleScaleWithLineWidth?W.H`u *= vLineSizeInv;`:""}
      u = padTexture(fract(u));

      float encodedSDF = rgba2float(texture2D(stipplePatternTexture, vec2(u, 0.5)));
      float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;

      ${Q.stippleRequiresStretchMeasure?W.H`return (sdf - 0.5) * vStipplePatternStretch + 0.5;`:W.H`return sdf;`}
    }

    float getStippleSDF() {
      bool ignored;
      return getStippleSDF(ignored);
    }

    float getStippleAlpha() {
      bool isClamped;
      float stippleSDF = getStippleSDF(isClamped);

      float antiAliasedResult = ${Q.stippleScaleWithLineWidth?W.H`clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);`:W.H`clamp(stippleSDF + 0.5, 0.0, 1.0);`}

      return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
    }
  `),Q.stippleOffColorEnabled?(ee.uniforms.add(new w.N("stippleOffColor",le=>function re(Z){return(0,H.Wi)(Z)?$.Z:4===Z.length?Z:(0,G.s)(ue,Z[0],Z[1],Z[2],1)}(le.stippleOffColor))),ee.code.add(W.H`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):ee.code.add(W.H`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}(Z,Q):function ie(Z){Z.fragment.code.add(W.H`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)}(Z)}const X=W.H.float(.4)},31166:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>B});var D=T(97139),x=T(65787),w=T(17625);function B(U,W){const Y=U.fragment;W.isGround?Y.uniforms.add(new x.p("lightingFixedFactor",(H,G)=>(1-G.lighting.groundLightingFactor)*(1-G.lighting.globalFactor))):Y.constants.add("lightingFixedFactor","float",0),Y.uniforms.add([new D.J("lightingMainDirection",(H,G)=>G.lighting.lightingMainDirection),new D.J("lightingMainIntensity",(H,G)=>G.lighting.mainLight.intensity)]),Y.code.add(w.H`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {
float dotVal = clamp(dot(normal_global, lightingMainDirection), 0.0, 1.0);
dotVal = mix(dotVal, 1.0, lightingFixedFactor);
return lightingMainIntensity * ((1.0 - shadowing) * dotVal);
}`)}},82793:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>U,_:()=>W});var D=T(47923),x=T(95285),w=T(17625),B=T(35387);function U(Y){Y.include(D.S),Y.uniforms.add([new B.A("geometryDepthTexture",(H,G)=>G.multipassGeometry.linearDepthTexture),new x.A("nearFar",(H,G)=>G.camera.nearFar)]),Y.code.add(w.H`bool geometryDepthTest(vec2 pos, float elementDepth) {
float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, nearFar);
return (elementDepth < (geometryDepth - 1.0));
}`)}class W{constructor(){this.enabled=!1}}},10109:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>W,l:()=>U});var D=T(47923),x=T(95285),w=T(17625),B=T(35387);function U(Y,H){H.hasMultipassTerrain&&(Y.fragment.include(D.S),Y.fragment.uniforms.add(new B.A("terrainDepthTexture",(G,$)=>$.multipassTerrain.linearDepthTexture)),Y.fragment.uniforms.add(new x.A("nearFar",(G,$)=>$.camera.nearFar)),Y.fragment.uniforms.add(new x.A("inverseViewport",(G,$)=>$.inverseViewport)),Y.fragment.code.add(w.H`
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){
      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, nearFar);
      if(fragmentDepth ${H.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `))}class W{constructor(){this.enabled=!1,this.cullAboveGround=!1}}},7025:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>x});var D=T(17625);function x(w,B){w.vertex.code.add(B.spherical?D.H`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return normalize(pos + origin);
}`:D.H`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return vec3(0.0, 0.0, 1.0);
}`),w.vertex.code.add(B.spherical?D.H`mat3 getTBNMatrix(in vec3 n) {
vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`:D.H`mat3 getTBNMatrix(in vec3 n) {
vec3 t = vec3(1.0, 0.0, 0.0);
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`)}},96395:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>w,q:()=>B});var B,U,D=T(94573),x=T(17625);function w(U,W){const Y=U.fragment;switch(Y.code.add(x.H`struct ShadingNormalParameters {
vec3 normalView;
vec3 viewDirection;
} shadingParams;`),W.doubleSidedMode){case B.None:Y.code.add(x.H`vec3 shadingNormal(ShadingNormalParameters params) {
return normalize(params.normalView);
}`);break;case B.View:Y.code.add(x.H`vec3 shadingNormal(ShadingNormalParameters params) {
return dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);
}`);break;case B.WindingOrder:Y.code.add(x.H`vec3 shadingNormal(ShadingNormalParameters params) {
return gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);
}`);break;default:(0,D.Bg)(W.doubleSidedMode);case B.COUNT:}}(U=B||(B={}))[U.None=0]="None",U[U.View=1]="View",U[U.WindingOrder=2]="WindingOrder",U[U.COUNT=3]="COUNT"},98898:(qe,xe,T)=>{"use strict";T.d(xe,{T:()=>U});var D=T(17625);function x(W){const Y=W.fragment.code;Y.add(D.H`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)
{
return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;
}`),Y.add(D.H`float integratedRadiance(float cosTheta2, float roughness)
{
return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);
}`),Y.add(D.H`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)
{
float cosTheta2 = 1.0 - RdotNG * RdotNG;
float intRadTheta = integratedRadiance(cosTheta2, roughness);
float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;
float sky = 2.0 - ground;
return (ground * ambientGround + sky * ambientSky) * 0.5;
}`)}var w=T(92724),B=T(39337);function U(W,Y){const H=W.fragment.code;W.include(B.e),Y.pbrMode===w.f7.Water||Y.pbrMode===w.f7.WaterOnIntegratedMesh?(H.add(D.H`
    struct PBRShadingWater
    {
        float NdotL;   // cos angle between normal and light direction
        float NdotV;   // cos angle between normal and view direction
        float NdotH;   // cos angle between normal and half vector
        float VdotH;   // cos angle between view direction and half vector
        float LdotH;   // cos angle between light direction and half vector
        float VdotN;   // cos angle between view direction and normal vector
    };

    float dtrExponent = ${Y.useCustomDTRExponentForWater?"2.2":"2.0"};
    `),H.add(D.H`vec3 fresnelReflection(float angle, vec3 f0, float f90) {
return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);
}`),H.add(D.H`float normalDistributionWater(float NdotH, float roughness)
{
float r2 = roughness * roughness;
float NdotH2 = NdotH * NdotH;
float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;
return r2 / denom;
}`),H.add(D.H`float geometricOcclusionKelemen(float LoH)
{
return 0.25 / (LoH * LoH);
}`),H.add(D.H`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)
{
vec3  F = fresnelReflection(props.VdotH, F0, F0Max);
float dSun = normalDistributionWater(props.NdotH, roughness);
float V = geometricOcclusionKelemen(props.LdotH);
float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);
float strengthSunHaze  = 1.2;
float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;
return ((dSun + dSunHaze) * V) * F;
}
vec3 tonemapACES(const vec3 x) {
return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);
}`)):Y.pbrMode!==w.f7.Normal&&Y.pbrMode!==w.f7.Schematic||(W.include(x),H.add(D.H`struct PBRShadingInfo
{
float NdotL;
float NdotV;
float NdotH;
float VdotH;
float LdotH;
float NdotNG;
float RdotNG;
float NdotAmbDir;
float NdotH_Horizon;
vec3 skyRadianceToSurface;
vec3 groundRadianceToSurface;
vec3 skyIrradianceToSurface;
vec3 groundIrradianceToSurface;
float averageAmbientRadiance;
float ssao;
vec3 albedoLinear;
vec3 f0;
vec3 f90;
vec3 diffuseColor;
float metalness;
float roughness;
};`),H.add(D.H`float normalDistribution(float NdotH, float roughness)
{
float a = NdotH * roughness;
float b = roughness / (1.0 - NdotH * NdotH + a * a);
return b * b * INV_PI;
}`),H.add(D.H`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);
const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);
const vec2 c2 = vec2(-1.04, 1.04);
vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {
vec4 r = roughness * c0 + c1;
float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;
return c2 * a004 + r.zw;
}`),H.add(D.H`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {
vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);
vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);
vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;
vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);
vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;
vec3 specularComponent = specularColor * indirectSpecular;
return (diffuseComponent + specularComponent);
}`),H.add(D.H`float gamutMapChanel(float x, vec2 p){
return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );
}`),H.add(D.H`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){
vec3 outColor;
vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));
outColor.x = gamutMapChanel(inColor.x, p) ;
outColor.y = gamutMapChanel(inColor.y, p) ;
outColor.z = gamutMapChanel(inColor.z, p) ;
return outColor;
}`))}},92724:(qe,xe,T)=>{"use strict";T.d(xe,{Fw:()=>$,f7:()=>re,jV:()=>ae});var D=T(14658),x=T(95284),w=T(77739),B=T(97139),U=T(17625),W=T(5864),Y=T(35387),H=T(37847);T(33470);const $=(0,D.f)(0,.6,.2);var re,oe;function ae(oe,ie){const X=oe.fragment,Z=ie.hasMetalnessAndRoughnessTexture||ie.hasEmissionTexture||ie.hasOcclusionTexture;if(ie.pbrMode===re.Normal&&Z&&oe.include(x.i,ie),ie.pbrMode!==re.Schematic)if(ie.pbrMode!==re.Disabled){if(ie.pbrMode===re.Normal){X.code.add(U.H`vec3 mrr;
vec3 emission;
float occlusion;`);const Q=ie.supportsTextureAtlas,J=ie.pbrTextureBindType;ie.hasMetalnessAndRoughnessTexture&&(X.uniforms.add(J===H.P.Pass?(0,Y.J)("texMetallicRoughness",se=>se.textureMetallicRoughness,Q):(0,W.F)("texMetallicRoughness",se=>se.textureMetallicRoughness,Q)),X.code.add(U.H`void applyMetallnessAndRoughness(TextureLookupParameter params) {
vec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;
mrr[0] *= metallicRoughness.b;
mrr[1] *= metallicRoughness.g;
}`)),ie.hasEmissionTexture&&(X.uniforms.add(J===H.P.Pass?(0,Y.J)("texEmission",se=>se.textureEmissive,Q):(0,W.F)("texEmission",se=>se.textureEmissive,Q)),X.code.add(U.H`void applyEmission(TextureLookupParameter params) {
emission *= textureLookup(texEmission, params).rgb;
}`)),ie.hasOcclusionTexture?(X.uniforms.add(J===H.P.Pass?(0,Y.J)("texOcclusion",se=>se.textureOcclusion,Q):(0,W.F)("texOcclusion",se=>se.textureOcclusion,Q)),X.code.add(U.H`void applyOcclusion(TextureLookupParameter params) {
occlusion *= textureLookup(texOcclusion, params).r;
}
float getBakedOcclusion() {
return occlusion;
}`)):X.code.add(U.H`float getBakedOcclusion() { return 1.0; }`),X.uniforms.add(J===H.P.Pass?[new B.J("emissionFactor",se=>se.emissiveFactor),new B.J("mrrFactors",se=>se.mrrFactors)]:[new w.B("emissionFactor",se=>se.emissiveFactor),new w.B("mrrFactors",se=>se.mrrFactors)]),X.code.add(U.H`
    void applyPBRFactors() {
      mrr = mrrFactors;
      emission = emissionFactor;
      occlusion = 1.0;
      ${Z?"vtc.uv = vuv0;":""}
      ${ie.hasMetalnessAndRoughnessTexture?ie.supportsTextureAtlas?"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);":"applyMetallnessAndRoughness(vtc);":""}
      ${ie.hasEmissionTexture?ie.supportsTextureAtlas?"vtc.size = texEmissionSize; applyEmission(vtc);":"applyEmission(vtc);":""}
      ${ie.hasOcclusionTexture?ie.supportsTextureAtlas?"vtc.size = texOcclusionSize; applyOcclusion(vtc);":"applyOcclusion(vtc);":""}
    }
  `)}}else X.code.add(U.H`float getBakedOcclusion() { return 1.0; }`);else X.code.add(U.H`vec3 mrr = vec3(0.0, 0.6, 0.2);
vec3 emission = vec3(0.0);
float occlusion = 1.0;
void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`)}(oe=re||(re={}))[oe.Disabled=0]="Disabled",oe[oe.Normal=1]="Normal",oe[oe.Schematic=2]="Schematic",oe[oe.Water=3]="Water",oe[oe.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh",oe[oe.COUNT=5]="COUNT"},39337:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>x});var D=T(17625);function x(w){w.vertex.code.add(D.H`const float PI = 3.141592653589793;`),w.fragment.code.add(D.H`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)}},37926:(qe,xe,T)=>{"use strict";T.d(xe,{s:()=>W});var D=T(36603),x=T(95284),w=T(95267),B=T(17625),U=T(5864);function W(Y,H){const G=Y.fragment;if(H.hasBaseColorTexture){Y.include(x.i,H);const $=H.textureCoordinateType===D.N.Atlas;G.uniforms.add((0,U.F)("baseColorTexture",re=>re.texture,$)),$?(Y.include(w.r),G.code.add(B.H`vec4 readBaseColorTexture() {
return textureAtlasLookup(baseColorTexture, baseColorTextureSize, vuv0, vuvRegion);
}`)):G.code.add(B.H`vec4 readBaseColorTexture() {
return texture2D(baseColorTexture, vuv0);
}`)}else G.code.add(B.H`vec4 readBaseColorTexture() { return vec4(1.0); }`)}},56693:(qe,xe,T)=>{"use strict";T.d(xe,{ry:()=>re,XE:()=>ae,hb:()=>ue});var D=T(28093),x=T(19278),w=T(69960),B=T(65787),U=T(18952),W=T(17625),Y=T(85930),H=T(37847);class G extends Y.x{constructor(X,Z,Q,J){switch(Z){case H.P.Pass:case H.P.Draw:return void super(X,"mat4",Z,(se,ee,le)=>se.setUniformMatrix4fv(X,Q(ee,le)),J)}}}var $=T(35387);class re extends W.K{constructor(){super(...arguments),this.origin=(0,D.c)()}}function ue(ie,X){X.receiveShadows&&(ie.fragment.uniforms.add(new G("shadowMapMatrix",H.P.Pass,(Z,Q)=>Q.shadowMap.getShadowMapMatrices(Z.origin),4)),oe(ie))}function ae(ie,X){X.receiveShadows&&(ie.fragment.uniforms.add(new G("shadowMapMatrix",H.P.Draw,(Z,Q)=>Q.shadowMap.getShadowMapMatrices(Z.origin),4)),oe(ie))}function oe(ie){const X=ie.fragment;X.include(x.n),X.uniforms.add([new $.A("shadowMapTex",(Z,Q)=>Q.shadowMap.depthTexture),new U._("numCascades",(Z,Q)=>Q.shadowMap.numCascades),new w.N("cascadeDistances",(Z,Q)=>Q.shadowMap.cascadeDistances),new B.p("depthHalfPixelSz",(Z,Q)=>.5/Q.shadowMap.textureSize)]),X.code.add(W.H`int chooseCascade(float depth, out mat4 mat) {
vec4 distance = cascadeDistances;
int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;
mat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];
return i;
}
vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {
vec4 lv = mat * vec4(_vpos, 1.0);
lv.xy /= lv.w;
return 0.5 * lv.xyz + vec3(0.5);
}
vec2 cascadeCoordinates(int i, vec3 lvpos) {
return vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;
}
float readShadowMapDepth(vec2 uv, sampler2D _depthTex) {
return rgba2float(texture2D(_depthTex, uv));
}
float posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {
return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;
}
float filterShadow(vec2 uv, vec3 lvpos, float halfPixelSize, sampler2D _depthTex) {
float texSize = 0.5 / halfPixelSize;
vec2 st = fract((vec2(halfPixelSize) + uv) * texSize);
float s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);
float s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);
float s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);
float s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);
return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);
}
float readShadowMap(const in vec3 _vpos, float _linearDepth) {
mat4 mat;
int i = chooseCascade(_linearDepth, mat);
if (i >= numCascades) { return 0.0; }
vec3 lvpos = lightSpacePosition(_vpos, mat);
if (lvpos.z >= 1.0) { return 0.0; }
if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }
vec2 uv = cascadeCoordinates(i, lvpos);
return filterShadow(uv, lvpos, depthHalfPixelSz, shadowMapTex);
}`)}},45867:(qe,xe,T)=>{"use strict";T.d(xe,{O:()=>G,P:()=>H});var D=T(43703),x=T(47923),w=T(95285),B=T(65787),U=T(17625),W=T(63123),Y=T(35387);function H($,re){const ue=$.fragment.uniforms;ue.add(new w.A("nearFar",(ae,oe)=>oe.camera.nearFar)),ue.add(new Y.A("depthMap",(ae,oe)=>oe.linearDepthTexture)),ue.add(new W.g("view",(ae,oe)=>oe.ssr.camera.viewMatrix)),ue.add(new W.g("proj",(ae,oe)=>oe.ssr.camera.projectionMatrix)),ue.add(new B.p("invResolutionHeight",(ae,oe)=>1/oe.ssr.camera.height)),ue.add(new Y.A("lastFrameColorMap",(ae,oe)=>oe.ssr.lastFrameColorTexture)),ue.add(new W.g("reprojectionMatrix",(ae,oe)=>oe.ssr.reprojectionMatrix)),$.fragment.include(x.S),$.fragment.code.add(U.H`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy * 0.5 + 0.5;
  }

  const int maxSteps = ${re.highStepCount?"150;":"75;"}

  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)
  {
    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);
    projectedCoord.xy /= projectedCoord.w;
    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;
    return projectedCoord;
  }

  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)
  {
    vec3 viewPos = startPosition;
    vec3 viewPosEnd = startPosition;

    // Project the start position to the screen
    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);
    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space
    float k0 = 1.0/ projectedCoordStart.w;

    // advance the position in the direction of the reflection
    viewPos += dir;

    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);

    // Project the advanced position to the screen
    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);
    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space
    float k1 = 1.0/ projectedCoordEnd.w;

    // calculate the reflection direction in the screen space
    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);
    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);

    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);

    float projectedCoordDirLength = length(projectedCoordDir);
    float maxSt = float(maxSteps);

    // normalize the projection direction depending on maximum steps
    // this determines how blocky the reflection looks
    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);

    // Normalize the homogeneous camera space coordinates
    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);
    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);

    // initialize the variables for ray marching
    vec2 P = projectedCoordStart.xy;
    vec3 Q = Q0;
    float k = k0;
    float rayStartZ = -startPosition.z; // estimated ray start depth value
    float rayEndZ = -startPosition.z;   // estimated ray end depth value
    float prevEstimateZ = -startPosition.z;
    float rayDiffZ = 0.0;
    float dDepth;
    float depth;
    float rayDiffZOld = 0.0;

    // early outs
    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)
      return vec3(P, 0.0);

    for(int i = 0; i < maxSteps-1; i++)
    {
      depth = -linearDepthFromTexture(depthMap, P, nearFar); // get linear depth from the depth buffer

      // estimate depth of the marching ray
      rayStartZ = prevEstimateZ;
      dDepth = -rayStartZ - depth;
      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));
      rayDiffZ = rayEndZ- rayStartZ;
      prevEstimateZ = rayEndZ;

      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )
      {
        return vec3(P, 0.);
      }

      // If we detect a hit - return the intersection point, two conditions:
      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth
      //  - if difference between dDepth and rayDiffZOld is not too large
      //  - if difference between dDepth and 0.025/abs(k) is not too large
      //  - if the sampled depth is not behind far plane or in front of near plane

      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)
      {
        return vec3(P, depth);
      }

      // continue with ray marching
      P += dP;
      Q.z += dQ.z;
      k += dk;
      rayDiffZOld = rayDiffZ;
    }
    return vec3(P, 0.0);
  }
  `)}class G{constructor(){this.reprojectionMatrix=(0,D.c)()}}},92836:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>H});var D=T(97139),x=T(48565),w=T(7090),B=T(17625),U=T(91574),W=T(16396),Y=T(41857);function H(G,$){$.hasVvInstancing&&($.vvSize||$.vvColor)&&G.attributes.add(W.T.INSTANCEFEATUREATTRIBUTE,"vec4");const re=G.vertex;$.vvSize?(re.uniforms.add(new D.J("vvSizeMinSize",ue=>ue.vvSizeMinSize)),re.uniforms.add(new D.J("vvSizeMaxSize",ue=>ue.vvSizeMaxSize)),re.uniforms.add(new D.J("vvSizeOffset",ue=>ue.vvSizeOffset)),re.uniforms.add(new D.J("vvSizeFactor",ue=>ue.vvSizeFactor)),re.uniforms.add(new U.c("vvSymbolRotationMatrix",ue=>ue.vvSymbolRotationMatrix)),re.uniforms.add(new D.J("vvSymbolAnchor",ue=>ue.vvSymbolAnchor)),re.code.add(B.H`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),re.code.add(B.H`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${$.hasVvInstancing?B.H`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):re.code.add(B.H`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),$.vvColor?(re.constants.add("vvColorNumber","int",Y.x),$.hasVvInstancing&&re.uniforms.add([new w.O("vvColorValues",ue=>ue.vvColorValues,Y.x),new x.b("vvColorColors",ue=>ue.vvColorColors,Y.x)]),re.code.add(B.H`
      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${$.hasVvInstancing?B.H`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):re.code.add(B.H`vec4 vvColor() { return vec4(1.0); }`)}},69117:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>H});var D=T(45027),x=T(96896),w=T(98898),B=T(45867),U=T(69602),W=T(65787),Y=T(17625);function H(G,$){G.include(w.T,$),G.include(x.D),G.include(D.E),$.hasCloudsReflections&&G.include(U.j,$),$.hasScreenSpaceReflections&&G.include(B.P,$);const re=G.fragment;re.constants.add("fresnelSky","vec3",[.02,1,15]).add("fresnelMaterial","vec2",[.02,.1]).add("roughness","float",.015).add("foamIntensityExternal","float",1.7).add("ssrIntensity","float",.65).add("ssrHeightFadeStart","float",3e5).add("ssrHeightFadeEnd","float",5e5).add("waterDiffusion","float",.92).add("waterSeaColorMod","float",.8).add("correctionViewingPowerFactor","float",.4).add("skyZenitColor","vec3",[.52,.68,.9]).add("skyColor","vec3",[.67,.79,.9]).add("cloudFresnelModifier","vec2",[1.2,.01]),re.code.add(Y.H`PBRShadingWater shadingInfo;
vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {
float exponent = pow((1.0 - cosTheta), fresnelSky[2]);
return mix(zenit, horizon, exponent);
}`),re.uniforms.add([new W.p("lightingSpecularStrength",(ue,ae)=>ae.lighting.mainLight.specularStrength),new W.p("lightingEnvironmentStrength",(ue,ae)=>ae.lighting.mainLight.environmentStrength)]),re.code.add(Y.H`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {
float reflectionHit = 0.0;
float reflectionHitDiffused = 0.0;
vec3 seaWaterColor = linearizeGamma(color);
vec3 h = normalize(l + v);
shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);
shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);
shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);
shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);
shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);
shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);
float upDotV = max(dot(localUp,v), 0.0);
vec3 skyHorizon = linearizeGamma(skyColor);
vec3 skyZenit = linearizeGamma(skyZenitColor);
vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );
float upDotL = max(dot(localUp,l),0.0);
float daytimeMod = 0.1 + upDotL * 0.9;
skyColor *= daytimeMod;
float shadowModifier = clamp(shadow, 0.8, 1.0);
vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);
vec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;
vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;
vec3 specular = vec3(0.0);
if(upDotV > 0.0 && upDotL > 0.0) {
vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);
vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;
specular = lightingSpecularStrength * shadingInfo.NdotL * incidentLight * specularSun;
}
vec3 foam = vec3(0.0);
if(upDotV > 0.0) {
foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);
}
float correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);
vec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);
vec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),$.hasCloudsReflections&&re.code.add(Y.H`vec4 cloudsColor = renderClouds(reflectedWorld, position);
cloudsColor.a = 1.0 - cloudsColor.a;
cloudsColor = pow(cloudsColor, vec4(GAMMA));
cloudsColor *= clamp(fresnelModifier.y*cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * clamp((1.0 - totalFadeInOut), 0.0, 1.0);`),re.code.add($.hasScreenSpaceReflections?Y.H`vec3 viewDir = normalize(viewPosition);
vec4 viewNormalVectorCoordinate = view *vec4(n, 0.0);
vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);
vec4 viewUp = view *vec4(localUp, 0.0);
vec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);
vec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));
vec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);
vec3 reflectedColor = vec3(0.0);
if (hitCoordinate.z > 0.0)
{
vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);
vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));
float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);
reflectionHit = clamp(1.0 - (1.3*dCoords.y), 0.0, 1.0) * heightMod;
reflectionHitDiffused = waterDiffusion * reflectionHit;
reflectedColor = linearizeGamma(texture2D(lastFrameColorMap, reprojectedCoordinate).xyz)* reflectionHitDiffused * fresnelModifier.y * ssrIntensity;
}
float seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod*0.5, reflectionHitDiffused);
vec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor + reflSea * seaColorMod + specular  + foam);`:Y.H`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),re.code.add($.hasCloudsReflections?$.hasScreenSpaceReflections?Y.H`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;
}`:Y.H`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;
}`:Y.H`return waterRenderedColor;
}`)}},45780:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>$});var D=T(67831),x=T(99770),w=T(993),B=T(4794),U=T(45027),W=T(95285),Y=T(69960),H=T(17625),G=T(66838);function $(ae){ae.fragment.uniforms.add(new G.Q("texWaveNormal")),ae.fragment.uniforms.add(new G.Q("texWavePerturbation")),ae.fragment.uniforms.add([new Y.N("waveParams",oe=>(0,w.s)(re,oe.waveStrength,oe.waveTextureRepeat,oe.flowStrength,oe.flowOffset)),new W.A("waveDirection",oe=>(0,D.a)(ue,oe.waveDirection[0]*oe.waveVelocity,oe.waveDirection[1]*oe.waveVelocity))]),ae.include(U.K),ae.fragment.code.add(H.H`const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);
vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture2D(_tex, _uv).rg - 1.0;
}
float sampleNoiseTexture(vec2 _uv) {
return texture2D(texWavePerturbation, _uv).b;
}
vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture2D(_tex, _uv).rgb - 1.0;
}
float computeProgress(vec2 uv, float time) {
return fract(time);
}
float computeWeight(vec2 uv, float time) {
float progress = computeProgress(uv, time);
return 1.0 - abs(1.0 - 2.0 * progress);
}
vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {
float flowStrength = waveParams[2];
float flowOffset = waveParams[3];
vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;
float progress = computeProgress(uv, time + phaseOffset);
float weight = computeWeight(uv, time + phaseOffset);
vec2 result = uv;
result -= flowVector * (progress + flowOffset);
result += phaseOffset;
result += (time - progress) * FLOW_JUMP;
return vec3(result, weight);
}
const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;
const float TIME_NOISE_STRENGTH = 7.77;
vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {
float waveStrength = waveParams[0];
vec2 waveMovement = time * -_waveDir;
float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;
vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);
vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);
vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;
vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;
vec3 mixNormal = normalize(normal_A + normal_B);
mixNormal.xy *= waveStrength;
mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));
return mixNormal;
}
vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {
float waveTextureRepeat = waveParams[1];
vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);
float foam  = normals2FoamIntensity(normal, waveParams[0]);
return vec4(normal, foam);
}`)}const re=(0,B.c)(),ue=(0,x.a)()},89798:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>x});var D=T(17625);function x(w){w.code.add(D.H`
    float lineFactorAtPosition(float value) {
      float pos = value * ${D.H.float(257)};
      if(pos < 0.5 || pos > ${D.H.float(256.5)}) {
        return 1.0;
      }

      pos = pos + 0.5;
      float modulo = mod(pos, 16.0);
      return modulo <= 2.0 ?  1.0 - abs(modulo - 1.0) : 0.0;
    }

    float lineFactorAtUV(vec2 uv) {
      return max(lineFactorAtPosition(uv.x), lineFactorAtPosition(uv.y));
    }

    float lineFactor(vec2 uv) {
      vec2 offset = fwidth(uv) * 0.25;
      return (lineFactorAtUV(vec2(uv.x + offset.x, uv.y + offset.y)) +
              lineFactorAtUV(vec2(uv.x - offset.x, uv.y + offset.y)) +
              lineFactorAtUV(vec2(uv.x + offset.x, uv.y - offset.y)) +
              lineFactorAtUV(vec2(uv.x - offset.x, uv.y - offset.y))) / 4.0;
    }

    vec4 gridColor(vec2 uv) {
      float line = lineFactor(uv) * 0.1 + 0.9;
      return vec4(vec3(1.0, 0.972, 0.918) * line, 1.0);
    }`)}},30249:(qe,xe,T)=>{"use strict";T.d(xe,{Tw:()=>Q,WB:()=>X,gT:()=>ae,uS:()=>oe,yl:()=>ie});var ae,le,D=T(4794),x=T(65401),w=T(75224),B=T(43553),U=T(92724),W=T(69117),Y=T(97139),H=T(90637),G=T(66054),$=T(65787),re=T(17625),ue=T(35387);(le=ae||(ae={}))[le.Disabled=0]="Disabled",le[le.Enabled=1]="Enabled",le[le.EnabledWithWater=2]="EnabledWithWater",le[le.COUNT=3]="COUNT";class oe extends re.K{constructor(){super(...arguments),this.overlayOpacity=1}}function ie(le,ne){le.vertex.uniforms.add([new G.y("overlayTexOffset"),new G.y("overlayTexScale")]),le.fragment.uniforms.add([new $.p("overlayOpacity",ce=>ce.overlayOpacity),new ue.A("ovColorTex",(ce,de)=>0===de.overlays.length?null:de.overlays[w.fu.INNER].getColorTexture(ce.overlaySource))]),Z(le,ne)}function X(le,ne){const{vertex:ce,fragment:de}=le;ce.uniforms.add([new H.$("overlayTexOffset",(me,_e)=>function J(le,ne){for(const ce of ne.overlays){const{index:de,extent:me}=ce;(0,x.SO)(me)>0&&(ee[2*de]=le.toMapSpace[0]/(0,x.bf)(me)-me[0]/(0,x.bf)(me),ee[2*de+1]=le.toMapSpace[1]/(0,x.Cb)(me)-me[1]/(0,x.Cb)(me))}return ee}(me,_e)),new H.$("overlayTexScale",(me,_e)=>function se(le,ne){for(const ce of ne.overlays){const{index:de,extent:me}=ce;(0,x.SO)(me)>0&&(ee[2*de]=le.toMapSpace[2]/(0,x.bf)(me),ee[2*de+1]=le.toMapSpace[3]/(0,x.Cb)(me))}return ee}(me,_e))]),de.constants.add("overlayOpacity","float",1),de.uniforms.add(new ue.A("ovColorTex",(me,_e)=>Q(me,_e))),Z(le,ne)}function Z(le,ne){le.extensions.add("GL_OES_standard_derivatives"),ne.pbrMode!==U.f7.Water&&ne.pbrMode!==U.f7.WaterOnIntegratedMesh||le.include(W.B,ne);const{vertex:ce,fragment:de}=le;le.varyings.add("vtcOverlay","vec4"),ce.code.add(re.H`void setOverlayVTC(in vec2 uv) {
vtcOverlay = vec4(uv, uv) * overlayTexScale + overlayTexOffset;
}`),de.code.add(re.H`bool isValid(vec2 uv, vec2 dxdy) {
return (uv.x >= 0.0 + dxdy.x) && (uv.x <= 1.0 - dxdy.x) && (uv.y >= 0.0 + dxdy.y) && (uv.y <= 1.0 - dxdy.y);
}
vec4 getOverlayColor(sampler2D ov0Tex, vec4 texCoords) {
vec4 color0 = texture2D(ov0Tex, vec2(texCoords.x * 0.5, texCoords.y));
vec4 color1 = texture2D(ov0Tex, vec2(texCoords.z * 0.5 + 0.5, texCoords.w));
bool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));
bool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));
return mix(color1 * float(isValid1), color0, float(isValid0));
}`),de.code.add(re.H`vec4 getCombinedOverlayColor() {
return overlayOpacity * getOverlayColor(ovColorTex, vtcOverlay);
}`),ne.pbrMode!==U.f7.Water&&ne.pbrMode!==U.f7.WaterOnIntegratedMesh||(de.uniforms.add([new Y.J("lightingMainDirection",(me,_e)=>_e.lighting.lightingMainDirection),new Y.J("lightingMainIntensity",(me,_e)=>_e.lighting.mainLight.intensity)]),de.code.add(re.H`vec4 getOverlayWaterColor(vec4 maskInput, vec4 colorInput, vec3 vposEyeDir,
float shadow, vec3 localUp, mat3 tbn, vec3 position, vec3 positionWorld) {
vec3 n = normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));
vec3 v = vposEyeDir;
vec3 final = getSeaColor(n, v, lightingMainDirection, colorInput.rgb, lightingMainIntensity, localUp, 1.0 - shadow, maskInput.w, position, positionWorld);
return vec4(final, colorInput.w);
}`))}function Q(le,ne){return 0===ne.overlays.length?null:le.identifier===B.o9.Material&&le.subPass===B.zp.Color?ne.overlays[w.fu.INNER].getColorTextureNoRasterImage():le.identifier===B.o9.Highlight?ne.overlays[w.fu.INNER].getValidTexture(w.NH.Highlight):null}const ee=(0,D.c)()},91528:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>H});var D=T(89798),x=T(87633),w=T(39704),B=T(66054),U=T(84178),W=T(17625),Y=T(66838);function H(G,$){G.varyings.add("vtc","vec2"),G.vertex.uniforms.add(new B.y("texOffsetAndScale")),G.fragment.uniforms.add(new Y.Q("tex")),G.fragment.uniforms.add(new w.K("textureOpacities"));const re=$.textureFadingEnabled&&!$.renderOccluded;re&&(G.vertex.uniforms.add(new B.y("nextTexOffsetAndScale")),G.varyings.add("nvtc","vec2"),G.fragment.uniforms.add(new Y.Q("texNext")),G.fragment.uniforms.add(new w.K("nextTexOpacities")),G.fragment.uniforms.add(new U.d("fadeFactor")));const ue=$.tileBlendInput===x.R.ColorComposite,ae=$.tileBlendInput===x.R.GridComposite;ae&&G.fragment.include(D.H),ue&&G.fragment.uniforms.add(new w.K("backgroundColor")),G.vertex.code.add(W.H`
  void forwardTextureCoordinates(in vec2 uv) {
    vtc = uv * texOffsetAndScale.zw + texOffsetAndScale.xy;
    ${re?W.H`nvtc = uv * nextTexOffsetAndScale.zw + nextTexOffsetAndScale.xy;`:W.H``}
  }`),G.fragment.code.add(W.H`
    vec4 applyBaseOpacity(vec4 _color, vec3 _opacities) {
      return _opacities.z <= 0.0 ? _color : _color * _opacities.x;
    }

    vec4 getColor(vec4 color, vec2 uv, vec3 opacities) {
      ${ae||ue?W.H`
              if (opacities.y <= 0.0) {
                return color * opacities.z * opacities.x;
              }
              vec4 bg = ${ue?W.H`vec4(backgroundColor, 1.0)`:W.H`gridColor(uv)`} * opacities.y;
              float alpha = opacities.z * color.a;
              return mix(bg, color, alpha) * opacities.x;`:W.H`return color;`}
    }`),G.fragment.code.add(re?W.H`vec4 getTileColor() {
vec4 color = getColor(texture2D(tex, vtc), vtc, textureOpacities);
if (fadeFactor >= 1.0) {
return color;
}
vec4 nextColor = getColor(texture2D(texNext, nvtc), nvtc, nextTexOpacities);
return mix(nextColor, color, fadeFactor);
}`:W.H`vec4 getTileColor() {
return getColor(texture2D(tex, vtc), vtc, textureOpacities);
}`)}},87633:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{R:()=>D}),(x=D||(D={}))[x.LayerOnly=0]="LayerOnly",x[x.ColorComposite=1]="ColorComposite",x[x.GridComposite=2]="GridComposite",x[x.COUNT=3]="COUNT"},14273:(qe,xe,T)=>{"use strict";T.d(xe,{R:()=>W,T:()=>Y});var D=T(99770),x=T(95285),w=T(65787),B=T(17625),U=T(16396);class W extends B.K{constructor(){super(...arguments),this.scale=1,this.offset=D.Z}}function Y(H){H.attributes.add(U.T.POSITION,"vec2"),H.attributes.add(U.T.UV0,"vec2"),H.vertex.uniforms.add(new w.p("scale",G=>G.scale)),H.vertex.uniforms.add(new x.A("offset",G=>G.offset)),H.varyings.add("uv","vec2"),H.varyings.add("vuv","vec2"),H.vertex.code.add(B.H`void main(void) {
gl_Position = vec4(position, 0.0, 1.0);
uv = uv0 * scale + offset;
vuv = uv0;
}`)}},67022:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>D,b:()=>x});const D=.1,x=.001},93609:(qe,xe,T)=>{"use strict";T.d(xe,{o:()=>Y,z:()=>W});var D=T(49480),x=T(2163),w=T(65787),B=T(17625),U=T(42743);function W(G,$){H(G,$,new w.p("textureAlphaCutoff",re=>re.textureAlphaCutoff))}function Y(G,$){H(G,$,new x.p("textureAlphaCutoff",re=>re.textureAlphaCutoff))}function H(G,$,re){const ue=G.fragment;switch($.alphaDiscardMode!==U.JJ.Mask&&$.alphaDiscardMode!==U.JJ.MaskBlend||ue.uniforms.add(re),$.alphaDiscardMode){case U.JJ.Blend:return G.include(D.f);case U.JJ.Opaque:ue.code.add(B.H`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case U.JJ.Mask:ue.code.add(B.H`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case U.JJ.MaskBlend:G.fragment.code.add(B.H`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}},67668:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>w});var D=T(7699),x=T(17625);function w(B,U){const W=U.blendMode;W!==D.iM.Normal&&(W===D.iM.Reflect&&B.code.add(x.H`float reflectBlend(in float cb, in float cl) {
return (cl == 1.0) ? cl : min(cb * cb / (1.0 - cl), 1.0);
}`),W!==D.iM.ColorDodge&&W!==D.iM.VividLight||B.code.add(x.H`float colorDodge(in float cb, in float cl) {
return (cb == 0.0) ? 0.0 : (cl == 1.0) ? 1.0 : min(1.0, cb / (1.0 - cl));
}`),W!==D.iM.ColorBurn&&W!==D.iM.VividLight||B.code.add(x.H`float colorBurn(in float cb, in float cl) {
return (cb == 1.0) ? 1.0 : (cl == 0.0) ? 0.0 : 1.0 - min(1.0, (1.0 - cb) / cl);
}`),W===D.iM.Overlay&&B.code.add(x.H`float overlay(in float cb, in float cl) {
return (1.0 - step(0.5, cl)) * (1.0 - 2.0 * (1.0 - cl ) * (1.0 - cb)) + step(0.5, cl) * (2.0 * cl * cb);
}`),W===D.iM.HardLight&&B.code.add(x.H`float hardLight(in float cb, in float cl) {
return (1.0 - step(0.5, cl)) * (2.0 * cl * cb) + step(0.5, cl) * (1.0 - 2.0 * (1.0 - cl) * (1.0 - cb));
}`),W===D.iM.SoftLight&&B.code.add(x.H`float softLight(in float cb, in float cl) {
if (cl <= 0.5) {
return cb - (1.0 - 2.0 * cl) * cb * (1.0 - cb);
}
if (cb <= 0.25) {
return cb + (2.0 * cl - 1.0) * cb * ((16.0 * cb - 12.0) * cb + 3.0);
}
return cb + (2.0 * cl - 1.0) * (sqrt(cb) - cb);
}`),W===D.iM.VividLight&&B.code.add(x.H`float vividLight(in float cb, in float cl) {
return (1.0 - step(0.5, cl)) * colorBurn(cb, 2.0 * cl) + step(0.5, cl) * colorDodge(cb, (2.0 * (cl - 0.5)));
}`),W!==D.iM.Hue&&W!==D.iM.Saturation&&W!==D.iM.Color&&W!==D.iM.Luminosity||(B.code.add(x.H`float minv3(in vec3 c) {
return min(min(c.r, c.g), c.b);
}
float maxv3(in vec3 c) {
return max(max(c.r, c.g), c.b);
}
float lumv3(in vec3 c) {
return dot(c, vec3(0.3, 0.59, 0.11));
}
vec3 clipColor(vec3 color) {
float lum = lumv3(color);
float mincol = minv3(color);
float maxcol = maxv3(color);
if (mincol < 0.0) {
color = lum + ((color - lum) * lum) / (lum - mincol);
}
if (maxcol > 1.0) {
color = lum + ((color - lum) * (1.0 - lum)) / (maxcol - lum);
}
return color;
}
vec3 setLum(vec3 cbase, vec3 clum) {
return clipColor(cbase + vec3(lumv3(clum) - lumv3(cbase)));
}`),W!==D.iM.Hue&&W!==D.iM.Saturation||B.code.add(x.H`float satv3(vec3 c) {
return maxv3(c) - minv3(c);
}
vec3 setLumSat(vec3 cbase, vec3 csat, vec3 clum)
{
float minbase = minv3(cbase);
float sbase = satv3(cbase);
float ssat = satv3(csat);
return setLum(sbase > 0.0 ? (cbase - minbase) * ssat / sbase : vec3(0.0), clum);
}`)),B.code.add(x.H`
    vec4 applyBlendMode(vec3 cl, float ol, vec3 cb, float ob) {
      ${W===D.iM.Multiply?x.H`return vec4(cl * ol * cb * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Average?x.H`return vec4((cb + cl) * 0.5 * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Lighten?x.H`return vec4(max(cb, cl) * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Darken?x.H`return vec4(min(cl, cb) * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Lighter?x.H`return vec4(cl * ol + cb * ob, ol + ob);`:W===D.iM.Plus?x.H`return clamp(vec4(cl.rgb + cb.rgb, ol + ob), 0.0, 1.0);`:W===D.iM.Minus?x.H`return vec4(clamp(vec3(cb.rgb - cl.rgb), 0.0, 1.0), ob * ol);`:W===D.iM.Screen?x.H`return vec4((cl + cb - cl * cb) * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Difference?x.H`return vec4(abs(cb - cl) * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Invert?x.H`return vec4((1.0 - cb) * ol * ob + cb * ob * (1.0 - ol), ob);`:W===D.iM.DestinationOver?x.H`return vec4(cl * ol * (1.0 - ob) + cb * ob, ol + ob - ol * ob);`:W===D.iM.DestinationAtop?x.H`return vec4(cl * ol * (1.0 - ob) + cb * ob * ol, ol);`:W===D.iM.DestinationOut?x.H`return vec4(cb * ob * (1.0 - ol), ob * (1.0 - ol));`:W===D.iM.SourceAtop?x.H`return vec4(cl * ol * ob + cb * ob * (1.0 - ol), ob);`:W===D.iM.SourceOut?x.H`return vec4(cl * ol * (1.0 - ob), ol * (1.0 - ob));`:W===D.iM.Xor?x.H`return vec4(cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), ol * (1.0 - ob) + ob * (1.0 - ol));`:W===D.iM.DestinationIn?x.H`return vec4(cb * ob * ol, ol * ob);`:W===D.iM.SourceIn?x.H`return vec4(cl * ol * ob, ol * ob);`:W===D.iM.Hue?x.H`
          vec3 f = setLumSat(cl, cb, cb);
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Saturation?x.H`
          vec3 f = setLumSat(cb, cl, cb);
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Color?x.H`
          vec3 f = setLum(cl, cb);
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Luminosity?x.H`
          vec3 f = setLum(cb, cl);
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Exclusion?x.H`
          vec3 f = cl + cb - 2.0 * cl * cb;
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Reflect?x.H`
          vec3 f = vec3(reflectBlend(cb.r, cl.r), reflectBlend(cb.g, cl.g), reflectBlend(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.ColorDodge?x.H`
          vec3 f = vec3(colorDodge(cb.r, cl.r), colorDodge(cb.g, cl.g), colorDodge(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.ColorBurn?x.H`
          vec3 f = vec3(colorBurn(cb.r, cl.r), colorBurn(cb.g, cl.g), colorBurn(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.Overlay?x.H`
          vec3 f = vec3(overlay(cb.r, cl.r), overlay(cb.g, cl.g), overlay(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.SoftLight?x.H`
          vec3 f = vec3(softLight(cb.r, cl.r), softLight(cb.g, cl.g), softLight(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.HardLight?x.H`
          vec3 f = vec3(hardLight(cb.r, cl.r), hardLight(cb.g, cl.g), hardLight(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:W===D.iM.VividLight?x.H`
          vec3 f = vec3(vividLight(cb.r, cl.r), vividLight(cb.g, cl.g), vividLight(cb.b, cl.b));
          return vec4(f * ol * ob + cl * ol * (1.0 - ob) + cb * ob * (1.0 - ol), mix(ob, 1.0, ol));`:x.H``}
    }
  `))}},39832:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>H,R:()=>re});var D=T(67831),x=T(99770),w=T(993),B=T(4794),U=T(95285),W=T(69960),Y=T(17625);function H(ae){ae.fragment.uniforms.add(new W.N("projInfo",(oe,ie)=>function G(ae){const oe=ae.camera.projectionMatrix;return 0===oe[11]?(0,w.s)($,2/(ae.camera.fullWidth*oe[0]),2/(ae.camera.fullHeight*oe[5]),(1+oe[12])/oe[0],(1+oe[13])/oe[5]):(0,w.s)($,-2/(ae.camera.fullWidth*oe[0]),-2/(ae.camera.fullHeight*oe[5]),(1-oe[8])/oe[0],(1-oe[9])/oe[5])}(ie))),ae.fragment.uniforms.add(new U.A("zScale",(oe,ie)=>re(ie))),ae.fragment.code.add(Y.H`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}const $=(0,B.c)();function re(ae){return 0===ae.camera.projectionMatrix[11]?(0,D.a)(ue,0,1):(0,D.a)(ue,1,0)}const ue=(0,x.a)()},69602:(qe,xe,T)=>{"use strict";T.d(xe,{j:()=>X});var D=T(21286),x=T(62208),w=T(67831),B=T(99770),U=T(94425),W=T(12015),Y=T(78038),H=T(95285),G=T(97139),$=T(65787),re=T(17625),ue=T(63123),ae=T(85930),oe=T(37847);class ie extends ae.x{constructor(J,se){super(J,"samplerCube",oe.P.Pass,(ee,le,ne)=>ee.bindTexture(J,se(le,ne)))}}function X(Q){const J=Q.fragment;J.uniforms.add([new ue.g("rotationMatrixClouds",(se,ee)=>ee.clouds.parallax.transform),new ue.g("rotationMatrixCloudsCrossFade",(se,ee)=>ee.clouds.parallaxNew.transform),new G.J("anchorPosition",(se,ee)=>ee.clouds.parallax.anchorPointClouds),new G.J("anchorPositionCrossFade",(se,ee)=>ee.clouds.parallaxNew.anchorPointClouds),new H.A("cloudVariables",(se,ee)=>(0,x.pC)(ee.clouds.data)?(0,w.a)(Z,ee.clouds.data.coverage,ee.clouds.data.absorption):B.Z),new $.p("cloudsHeight",(se,ee)=>ee.clouds.parallax.cloudsHeight),new $.p("radiusCurvatureCorrectionFactor",(se,ee)=>ee.clouds.parallax.radiusCurvatureCorrectionFactor),new $.p("totalFadeInOut",(se,ee)=>ee.clouds.fadeInOut.stage===W.co.FINISHED?ee.clouds.fadeInOutHeight.factor+Math.max((0,D.uZ)(ee.clouds.fadeIn.factor,0,1)):ee.clouds.fadeInOutHeight.factor+Math.max((0,D.uZ)(ee.clouds.fadeInOut.factor,0,1))),new $.p("crossFadeAnchorFactor",(se,ee)=>(0,D.uZ)(ee.clouds.crossFade.factor,0,1)),new ie("cubeMap",(se,ee)=>(0,x.pC)(ee.clouds.data)?ee.clouds.data.cubeMap.colorTexture:null),new Y.U("crossFade",(se,ee)=>ee.clouds.crossFade.enabled)]),J.constants.add("planetRadius","float",U.sv.radius),J.code.add(re.H`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos)
{
float radiusClouds = planetRadius + cloudsHeight;
float B = 2.0 * dot(cameraPosition, dir);
float C = dot(cameraPosition, cameraPosition) - radiusClouds * radiusClouds;
float det = B * B - 4.0 * C;
float pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));
vec3 intersectionPont = cameraPosition + dir * pointIntDist;
intersectionPont =  intersectionPont - spherePos;
return intersectionPont;
}`),J.code.add(re.H`vec3 correctForPlanetCurvature(vec3 dir)
{
dir.z = dir.z*(1.-radiusCurvatureCorrectionFactor) + radiusCurvatureCorrectionFactor;
return dir;
}`),J.code.add(re.H`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec)
{
return (rotMat * vec4(inVec, 0.0)).xyz;
}`),J.uniforms.add([new G.J("lightingMainDirection",(se,ee)=>ee.lighting.lightingMainDirection),new G.J("lightingMainIntensity",(se,ee)=>ee.lighting.mainLight.intensity)]),J.code.add(re.H`const float SUNSET_TRANSITION_FACTOR = 0.3;
const vec3 RIM_COLOR = vec3(0.28, 0.175, 0.035);
const float RIM_SCATTERING_FACTOR = 140.0;
const float BACKLIGHT_FACTOR = 0.2;
const float BACKLIGHT_SCATTERING_FACTOR = 10.0;
const float BACKLIGHT_TRANSITION_FACTOR = 0.3;
vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds)
{
float upDotLight = dot(normalize(cameraPosition), normalize(lightingMainDirection));
float dirDotLight = max(dot(normalize(-worldSpaceRay), normalize(lightingMainDirection)), 0.0);
float sunsetTransition = clamp(pow(max(upDotLight, 0.0), SUNSET_TRANSITION_FACTOR), 0.0, 1.0);
vec3 ambientLight = calculateAmbientIrradiance(normalize(cameraPosition),  0.0);
vec3 mainLight = evaluateMainLighting(normalize(cameraPosition),  0.0);
vec3 combinedLight = clamp((lightingMainIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));
vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));
float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);
float rimLightIntensity = 0.5 + 0.5 *pow(max(upDotLight, 0.0), 0.35);
vec3 directSunScattering = RIM_COLOR * rimLightIntensity * pow(dirDotLight, RIM_SCATTERING_FACTOR) * scatteringMod;
float additionalLight = BACKLIGHT_FACTOR * pow(dirDotLight, BACKLIGHT_SCATTERING_FACTOR) * (1. - pow(sunsetTransition, BACKLIGHT_TRANSITION_FACTOR)) ;
return vec3(baseCloudColor * (1. + additionalLight) + directSunScattering);
}`),J.code.add(re.H`vec4 getCloudData(vec3 rayDir)
{
vec4 cloudData = textureCube(cubeMap, rayDir);
float mu = dot(rayDir, vec3(0, 0, 1));
return mix(vec4(vec3(clamp(1.0 - cloudVariables.y, 0.6, 1.0)), 0.0), cloudData, smoothstep(-0.01, mix(0.0, 0.075, cloudVariables.x), abs(mu)));
}`),J.code.add(re.H`vec4 renderCloudsNoFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected);
float totalTransmittance = clamp(cloudData.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudData.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), totalTransmittance);
}`),J.code.add(re.H`vec4 renderCloudsCrossFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected);
vec4 cloudColor = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPositionCrossFade);
worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixCloudsCrossFade, normalize(intersectionPoint));
worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
cloudData = getCloudData(worldRayRotatedCorrected);
vec4 cloudColorCrossFade = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
cloudColor = mix(cloudColor, cloudColorCrossFade, crossFadeAnchorFactor);
float totalTransmittance = clamp(cloudColor.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudColor.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(cloudColor.rgb, totalTransmittance);
}`),J.code.add(re.H`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition)
{
return crossFade ? renderCloudsCrossFade(worldRay, cameraPosition) : renderCloudsNoFade(worldRay, cameraPosition);
}`)}const Z=(0,B.a)()},33726:(qe,xe,T)=>{"use strict";T.d(xe,{Y:()=>x});var D=T(17625);function x(w){w.code.add(D.H`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}},49480:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>w});var D=T(67022),x=T(17625);function w(B){B.fragment.code.add(x.H`
    #define discardOrAdjustAlpha(color) { if (color.a < ${x.H.float(D.b)}) { discard; } }
  `)}},7228:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>w,I:()=>B});var D=T(8314),x=T(17625);function w({code:U},W){U.add(W.doublePrecisionRequiresObfuscation?x.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`:x.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}function B(U){return!!(0,D.Z)("force-double-precision-obfuscation")||U.driverTest.doublePrecisionRequiresObfuscation}},22799:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>x,j:()=>w});var x,B,D=T(37053);function w(B){return B&&(0,D.BZ)(B)?x.Mars:B&&(0,D.V2)(B)?x.Moon:x.Earth}(B=x||(x={}))[B.Earth=1]="Earth",B[B.Mars=2]="Mars",B[B.Moon=3]="Moon",B[B.COUNT=4]="COUNT"},411:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>B});var D=T(6945),x=T(17625),w=T(68598);function B(U,W){const Y=x.H`
  /*
  *  ${W.name}
  *  ${W.output===D.H.Color?"RenderOutput: Color":W.output===D.H.Depth?"RenderOutput: Depth":W.output===D.H.Shadow?"RenderOutput: Shadow":W.output===D.H.Normal?"RenderOutput: Normal":W.output===D.H.Highlight?"RenderOutput: Highlight":""}
  */
  `;(0,w.CG)()&&(U.fragment.code.add(Y),U.vertex.code.add(Y))}},28137:(qe,xe,T)=>{"use strict";T.d(xe,{y:()=>B});var D=T(9044),x=T(33726),w=T(17625);function B(U){U.include(x.Y),U.code.add(w.H`
    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {
      // workaround for artifacts in OSX using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      vec3 internalMixed = internalColor * textureColor;
      vec3 allMixed = internalMixed * externalColor;

      if (mode == ${w.H.int(D.a9.Multiply)}) {
        return allMixed;
      }
      if (mode == ${w.H.int(D.a9.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${w.H.int(D.a9.Replace)}) {
        return externalColor;
      }

      // tint (or something invalid)
      float vIn = rgb2v(internalMixed);
      vec3 hsvTint = rgb2hsv(externalColor);
      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);
      return hsv2rgb(hsvOut);
    }

    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {
      // workaround for artifacts in OSX using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      float internalMixed = internalOpacity * textureOpacity;
      float allMixed = internalMixed * externalOpacity;

      if (mode == ${w.H.int(D.a9.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${w.H.int(D.a9.Replace)}) {
        return externalOpacity;
      }

      // multiply or tint (or something invalid)
      return allMixed;
    }
  `)}},19278:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>x});var D=T(17625);function x(w){w.code.add(D.H`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}},71850:(qe,xe,T)=>{"use strict";T.d(xe,{cK:()=>U,m8:()=>Y,ww:()=>W});var D=T(993),x=T(4794),w=T(69960),B=T(17625);function U($){$.vertex.code.add(B.H`float screenSizePerspectiveMinSize(float size, vec4 factor) {
float nonZeroSize = 1.0 - step(size, 0.0);
return (
factor.z * (
1.0 +
nonZeroSize *
2.0 * factor.w / (
size + (1.0 - nonZeroSize)
)
)
);
}`),$.vertex.code.add(B.H`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),$.vertex.code.add(B.H`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
return vec4(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z,
params.w
);
}`),$.vertex.code.add(B.H`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
}`),$.vertex.code.add(B.H`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),$.vertex.code.add(B.H`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / max(1e-5, size.y), 1.0), size, factor.y);
}`),$.vertex.code.add(B.H`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function W($){$.uniforms.add(new w.N("screenSizePerspective",re=>H(re.screenSizePerspective)))}function Y($){$.uniforms.add(new w.N("screenSizePerspectiveAlignment",re=>H(re.screenSizePerspectiveAlignment||re.screenSizePerspective)))}function H($){return(0,D.s)(G,$.parameters.divisor,$.parameters.offset,$.parameters.minPixelSize,$.paddingPixelsOverride)}const G=(0,x.c)()},95267:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>x});var D=T(17625);function x(w){w.extensions.add("GL_EXT_shader_texture_lod"),w.extensions.add("GL_OES_standard_derivatives"),w.fragment.code.add(D.H`#ifndef GL_EXT_shader_texture_lod
float calcMipMapLevel(const vec2 ddx, const vec2 ddy) {
float deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));
return max(0.0, 0.5 * log2(deltaMaxSqr));
}
#endif
vec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {
vec2 atlasScale = atlasRegion.zw - atlasRegion.xy;
vec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;
float maxdUV = 0.125;
vec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
vec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
#ifdef GL_EXT_shader_texture_lod
return texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);
#else
vec2 dUVdxAuto = dFdx(uvAtlas);
vec2 dUVdyAuto = dFdy(uvAtlas);
float mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);
float autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);
return texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);
#endif
}`)}},2166:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>$,h:()=>G});var D=T(28347),x=T(55494),w=T(84161),B=T(28093),U=T(77739),W=T(97139),Y=T(47205),H=T(63123);function G(ae,oe){oe.instancedDoublePrecision?ae.constants.add("cameraPosition","vec3",B.Z):ae.uniforms.add(new U.B("cameraPosition",(ie,X)=>(0,w.s)(ue,X.camera.viewInverseTransposeMatrix[3]-ie.origin[0],X.camera.viewInverseTransposeMatrix[7]-ie.origin[1],X.camera.viewInverseTransposeMatrix[11]-ie.origin[2])))}function $(ae,oe){if(ae.vertex.uniforms.add(new H.g("proj",(X,Z)=>Z.camera.projectionMatrix)),oe.instancedDoublePrecision){const X=(Q,J)=>(0,w.s)(ue,J.camera.viewInverseTransposeMatrix[3],J.camera.viewInverseTransposeMatrix[7],J.camera.viewInverseTransposeMatrix[11]);ae.vertex.uniforms.add(new H.g("view",(Q,J)=>(0,D.j)(re,J.camera.viewMatrix,X(Q,J))));const Z=new W.J("localOrigin",X);return ae.vertex.uniforms.add(Z),Z}ae.vertex.uniforms.add(new Y.K("view",(X,Z)=>(0,D.j)(re,Z.camera.viewMatrix,X.origin)));const ie=new U.B("localOrigin",X=>X.origin);return ae.vertex.uniforms.add(ie),ie}const re=(0,x.c)(),ue=(0,B.c)()},78038:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"bool",x.P.Pass,(Y,H,G)=>Y.setUniform1b(U,W(H,G)))}}},32181:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec2",x.P.Draw,(Y,H,G)=>Y.setUniform2fv(U,W(H,G)))}}},95285:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec2",x.P.Pass,(Y,H,G)=>Y.setUniform2fv(U,W(H,G)))}}},65364:(qe,xe,T)=>{"use strict";T.d(xe,{e:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"vec2")}}},77739:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec3",x.P.Draw,(Y,H,G)=>Y.setUniform3fv(U,W(H,G)))}}},97139:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec3",x.P.Pass,(Y,H,G)=>Y.setUniform3fv(U,W(H,G)))}}},39704:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"vec3")}}},90637:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec4",x.P.Draw,(Y,H,G)=>Y.setUniform4fv(U,W(H,G)))}}},69960:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"vec4",x.P.Pass,(Y,H,G)=>Y.setUniform4fv(U,W(H,G)))}}},66054:(qe,xe,T)=>{"use strict";T.d(xe,{y:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"vec4")}}},48565:(qe,xe,T)=>{"use strict";T.d(xe,{b:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W,Y){super(U,"vec4",x.P.Pass,(H,G,$)=>H.setUniform4fv(U,W(G,$)),Y)}}},2163:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"float",x.P.Draw,(Y,H,G)=>Y.setUniform1f(U,W(H,G)))}}},65787:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"float",x.P.Pass,(Y,H,G)=>Y.setUniform1f(U,W(H,G)))}}},84178:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"float")}}},7090:(qe,xe,T)=>{"use strict";T.d(xe,{O:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W,Y){super(U,"float",x.P.Pass,(H,G,$)=>H.setUniform1fv(U,W(G,$)),Y)}}},18952:(qe,xe,T)=>{"use strict";T.d(xe,{_:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"int",x.P.Pass,(Y,H,G)=>Y.setUniform1i(U,W(H,G)))}}},9546:(qe,xe,T)=>{"use strict";T.d(xe,{j:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"mat3",x.P.Draw,(Y,H,G)=>Y.setUniformMatrix3fv(U,W(H,G)))}}},91574:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"mat3",x.P.Pass,(Y,H,G)=>Y.setUniformMatrix3fv(U,W(H,G)))}}},47205:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"mat4",x.P.Draw,(Y,H,G)=>Y.setUniformMatrix4fv(U,W(H,G)))}}},63123:(qe,xe,T)=>{"use strict";T.d(xe,{g:()=>w});var D=T(85930),x=T(37847);class w extends D.x{constructor(U,W){super(U,"mat4",x.P.Pass,(Y,H,G)=>Y.setUniformMatrix4fv(U,W(H,G)))}}},46524:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"mat4")}}},22355:(qe,xe,T)=>{"use strict";T.d(xe,{kG:()=>W});var D=T(26584),x=T(63290),w=T(62208);const B=x.Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class U{constructor(){this.includedModules=new Map}include(Z,Q){if(this.includedModules.has(Z)){const J=this.includedModules.get(Z);if(J!==Q){B.error("Trying to include shader module multiple times with different sets of options.");const se=new Set;for(const ee of Object.keys(J))J[ee]!==Z[ee]&&se.add(ee);for(const ee of Object.keys(Z))J[ee]!==Z[ee]&&se.add(ee);se.forEach(ee=>console.error(`  ${ee}: current ${J[ee]} new ${Z[ee]}`))}}else this.includedModules.set(Z,Q),Z(this.builder,Q)}}class W extends U{constructor(){super(...arguments),this.vertex=new G,this.fragment=new G,this.attributes=new $,this.varyings=new re,this.extensions=new ue,this.constants=new ae}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(Z){const Q=this.extensions.generateSource(Z),J=this.attributes.generateSource(Z),se=this.varyings.generateSource(),ee="vertex"===Z?this.vertex:this.fragment,le=ee.uniforms.generateSource(),ne=ee.code.generateSource(),ce="vertex"===Z?ie:oe,de=this.constants.generateSource().concat(ee.constants.generateSource());return`\n${Q.join("\n")}\n\n${ce}\n\n${de.join("\n")}\n\n${le.join("\n")}\n\n${J.join("\n")}\n\n${se.join("\n")}\n\n${ne.join("\n")}`}generateBind(Z,Q){const J=new Map;this.vertex.uniforms.entries.forEach(le=>{const ne=le.bind[Z];(0,w.pC)(ne)&&J.set(le.name,ne)}),this.fragment.uniforms.entries.forEach(le=>{const ne=le.bind[Z];(0,w.pC)(ne)&&J.set(le.name,ne)});const se=Array.from(J.values()),ee=se.length;return(le,ne)=>{for(let ce=0;ce<ee;++ce)se[ce](Q,le,ne)}}}class Y{constructor(){this._entries=new Map}add(Z){if(!Array.isArray(Z))return this._add(Z);for(const Q of Z)this._add(Q)}_add(Z){if(this._entries.has(Z.name)&&!this._entries.get(Z.name).equals(Z))throw new D.Z(`Duplicate uniform name ${Z.name} for different uniform type`);this._entries.set(Z.name,Z)}generateSource(){return Array.from(this._entries.values()).map(Z=>(0,w.pC)(Z.arraySize)?`uniform ${Z.type} ${Z.name}[${Z.arraySize}];`:`uniform ${Z.type} ${Z.name};`)}get entries(){return Array.from(this._entries.values())}}class H{constructor(){this._entries=new Array}add(Z){this._entries.push(Z)}generateSource(){return this._entries}}class G extends U{constructor(){super(...arguments),this.uniforms=new Y,this.code=new H,this.constants=new ae}get builder(){return this}}class ${constructor(){this._entries=new Array}add(Z,Q){this._entries.push([Z,Q])}generateSource(Z){return"fragment"===Z?[]:this._entries.map(Q=>`attribute ${Q[1]} ${Q[0]};`)}}class re{constructor(){this._entries=new Array}add(Z,Q){this._entries.push([Z,Q])}generateSource(){return this._entries.map(Z=>`varying ${Z[1]} ${Z[0]};`)}}class ue{constructor(){this._entries=new Set}add(Z){this._entries.add(Z)}generateSource(Z){const Q="vertex"===Z?ue.ALLOWLIST_VERTEX:ue.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(J=>Q.includes(J)).map(J=>`#extension ${J} : enable`)}}ue.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],ue.ALLOWLIST_VERTEX=[];class ae{constructor(){this._entries=new Set}add(Z,Q,J){let se="ERROR_CONSTRUCTOR_STRING";switch(Q){case"float":se=ae._numberToFloatStr(J);break;case"int":se=ae._numberToIntStr(J);break;case"bool":se=J.toString();break;case"vec2":se=`vec2(${ae._numberToFloatStr(J[0])},                            ${ae._numberToFloatStr(J[1])})`;break;case"vec3":se=`vec3(${ae._numberToFloatStr(J[0])},                            ${ae._numberToFloatStr(J[1])},                            ${ae._numberToFloatStr(J[2])})`;break;case"vec4":se=`vec4(${ae._numberToFloatStr(J[0])},                            ${ae._numberToFloatStr(J[1])},                            ${ae._numberToFloatStr(J[2])},                            ${ae._numberToFloatStr(J[3])})`;break;case"ivec2":se=`ivec2(${ae._numberToIntStr(J[0])},                             ${ae._numberToIntStr(J[1])})`;break;case"ivec3":se=`ivec3(${ae._numberToIntStr(J[0])},                             ${ae._numberToIntStr(J[1])},                             ${ae._numberToIntStr(J[2])})`;break;case"ivec4":se=`ivec4(${ae._numberToIntStr(J[0])},                             ${ae._numberToIntStr(J[1])},                             ${ae._numberToIntStr(J[2])},                             ${ae._numberToIntStr(J[3])})`;break;case"mat2":case"mat3":case"mat4":se=`${Q}(${Array.prototype.map.call(J,ee=>ae._numberToFloatStr(ee)).join(", ")})`}return this._entries.add(`const ${Q} ${Z} = ${se};`),this}static _numberToIntStr(Z){return Z.toFixed(0)}static _numberToFloatStr(Z){return Number.isInteger(Z)?Z.toFixed(1):Z.toString()}generateSource(){return Array.from(this._entries)}}const oe="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",ie="precision highp float;\nprecision highp sampler2D;"},5864:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>H,R:()=>Y});var D=T(62208),x=T(67831),w=T(99770),B=T(32181),U=T(85930),W=T(37847);class Y extends U.x{constructor(re,ue){super(re,"sampler2D",W.P.Draw,(ae,oe,ie)=>ae.bindTexture(re,ue(oe,ie)))}}function H($,re,ue){const ae=[new Y($,re)];return ue&&ae.push(new B.q($+"Size",(ie,X)=>{const Z=re(ie,X);return(0,D.pC)(Z)?(0,x.a)(G,Z.descriptor.width,Z.descriptor.height):w.Z})),ae}const G=(0,w.a)()},35387:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>Y,J:()=>H});var D=T(62208),x=T(67831),w=T(99770),B=T(95285),U=T(85930),W=T(37847);class Y extends U.x{constructor(re,ue){super(re,"sampler2D",W.P.Pass,(ae,oe,ie)=>ae.bindTexture(re,ue(oe,ie)))}}function H($,re,ue){const ae=[new Y($,re)];return ue&&ae.push(new B.A($+"Size",(ie,X)=>{const Z=re(ie,X);return(0,D.pC)(Z)?(0,x.a)(G,Z.descriptor.width,Z.descriptor.height):w.Z})),ae}const G=(0,w.a)()},66838:(qe,xe,T)=>{"use strict";T.d(xe,{Q:()=>x});var D=T(85930);class x extends D.x{constructor(B){super(B,"sampler2D")}}},85930:(qe,xe,T)=>{"use strict";T.d(xe,{x:()=>w});var D=T(62208),x=T(37847);class w{constructor(U,W,Y,H,G=null){this.name=U,this.type=W,this.arraySize=G,this.bind={[x.P.Pass]:null,[x.P.Draw]:null},(0,D.pC)(Y)&&(0,D.pC)(H)&&(this.bind[Y]=H)}equals(U){return this.type===U.type&&this.name===U.name&&this.arraySize===U.arraySize}}},17625:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>x,K:()=>D});class D{}function x(w,...B){let U="";for(let W=0;W<B.length;W++)U+=w[W]+B[W];return U+=w[w.length-1],U}var w;(w=x||(x={})).int=function B(W){return Math.round(W).toString()},w.float=function U(W){return W.toPrecision(8)}},37847:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{P:()=>D}),(x=D||(D={}))[x.Pass=0]="Pass",x[x.Draw=1]="Draw"},651:(qe,xe,T)=>{"use strict";T.d(xe,{J:()=>x});var D=T(15861);class x{constructor(B,U){this._module=B,this._loadModule=U}get(){return this._module}reload(){var B=this;return(0,D.Z)(function*(){return B._module=yield B._loadModule(),B._module})()}}},91056:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>w});var D=T(62208),x=T(67969);class w{constructor(U,W,Y){this.release=Y,W&&(this.initializeConfiguration(U,W),this._configuration=W.snapshot()),this._program=this.initializeProgram(U),this._pipeline=this.initializePipeline(U.rctx.capabilities)}destroy(){this._program=(0,D.O3)(this._program),this._pipeline=this._configuration=null}reload(U){(0,D.O3)(this._program),this._program=this.initializeProgram(U),this._pipeline=this.initializePipeline(U.rctx.capabilities)}get program(){return this._program}get compiled(){return this.program.isCompiled}get key(){return this._configuration.key}get configuration(){return this._configuration}bindPass(U,W){this.program.bindPass(U,W)}bindDraw(U,W){this.program.bindDraw(U,W),this.program.rebindTextures()}bindPipelineState(U,W=null,Y){U.setPipelineState(this.getPipelineState(W,Y))}ensureAttributeLocations(U){this.program.assertCompatibleVertexAttributeLocations(U)}get primitiveType(){return x.MX.TRIANGLES}getPipelineState(U,W){return this._pipeline}initializeConfiguration(U,W){}}},87601:(qe,xe,T)=>{"use strict";T.d(xe,{m:()=>D,o:()=>x});class D{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits?this._parameterBits.map(()=>0):[],this._parameterNames||(this._parameterNames=[])}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const B=this._parameterNames,U={key:this.key};for(const W of B)U[W]=this[W];return U}}function x(w={}){return(B,U)=>{if(B._parameterNames=B._parameterNames??[],B._parameterNames.push(U),null!=w.constValue)Object.defineProperty(B,U,{get:()=>w.constValue});else{const W=B._parameterNames.length-1,H=Math.ceil(Math.log2(w.count||2)),G=B._parameterBits??[0];let $=0;for(;G[$]+H>16;)$++,$>=G.length&&G.push(0);B._parameterBits=G;const re=G[$],ue=(1<<H)-1<<re;G[$]+=H,Object.defineProperty(B,U,{get(){return this[W]},set(ae){if(this[W]!==ae&&(this[W]=ae,this._keyDirty=!0,this._parameterBits[$]=this._parameterBits[$]&~ue|+ae<<re&ue,"number"!=typeof ae&&"boolean"!=typeof ae))throw"Configuration value for "+U+" must be boolean or number, got "+typeof ae}})}}}},45323:(qe,xe,T)=>{"use strict";T.d(xe,{M:()=>B});var D=T(15861),x=T(62208),w=T(1101);class B{constructor(H){this._context=H,this._perConstructorInstances=new w.r,this._frameCounter=0,this._keepAliveFrameCount=W}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}dispose(){this._perConstructorInstances.forEach(H=>H.forEach(G=>G.technique.destroy())),this._perConstructorInstances.clear()}acquire(H,G){const $=G.key;let re=this._perConstructorInstances.get(H,$);if((0,x.Wi)(re)){const ue=new H(this._context,G,()=>this.release(ue));re=new U(ue),this._perConstructorInstances.set(H,$,re)}return++re.refCount,re.technique}releaseAndAcquire(H,G,$){if((0,x.pC)($)){if(G.key===$.key)return $;this.release($)}return this.acquire(H,G)}release(H){if((0,x.Wi)(H)||this._perConstructorInstances.empty)return;const G=this._perConstructorInstances.get(H.constructor,H.key);(0,x.Wi)(G)||(--G.refCount,0===G.refCount&&(G.refZeroFrame=this._frameCounter))}frameUpdate(){this._frameCounter++,this._keepAliveFrameCount!==W&&this._perConstructorInstances.forEach((H,G)=>{H.forEach(($,re)=>{0===$.refCount&&$.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&($.technique.destroy(),this._perConstructorInstances.delete(G,re))})})}reloadAll(){var H=this;return(0,D.Z)(function*(){const G=new Array;H._perConstructorInstances.forEach(($,re)=>{const ue=function(){var ae=(0,D.Z)(function*(oe,ie){const X=ie.shader;X&&(yield X.reload(),oe.forEach(Z=>{Z.technique.reload(H._context)}))});return function(ie,X){return ae.apply(this,arguments)}}();G.push(ue($,re))}),yield Promise.all(G)})()}}class U{constructor(H){this.technique=H,this.refCount=0,this.refZeroFrame=0}}const W=-1},42836:(qe,xe,T)=>{"use strict";T.d(xe,{d:()=>w});var D=T(62208),x=T(27422);class w{constructor(){this.enabled=!0,this._time=0}get time(){return(0,x.HA)(this._time)}advance(U){return(0,D.pC)(U.forcedTime)?this._time!==U.forcedTime&&(this._time=U.forcedTime,!0):!(!this.enabled||0===U.dt||(this._time+=U.dt,0))}}},2286:(qe,xe,T)=>{"use strict";T.d(xe,{TF:()=>D,Xn:()=>x,gT:()=>w});const D=B=>class U extends B{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const Y of this._managedDisposables??[]){const H=this[Y];this[Y]=null,H&&"function"==typeof H.dispose&&H.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}};class x extends(D(class{})){}function w(){return(B,U)=>{B.hasOwnProperty("_managedDisposables")||(B._managedDisposables=B._managedDisposables?.slice()??[]),B._managedDisposables.unshift(U)}}},13756:(qe,xe,T)=>{"use strict";T.d(xe,{fX:()=>J,pk:()=>ee,$u:()=>oe,_h:()=>ie,$8:()=>ue});var D=T(15861),x=T(62208),w=T(54346);function B(){if((0,x.Wi)(U)){const ce=de=>(0,w.V)(`esri/libs/basisu/${de}`);U=T.e(2405).then(T.bind(T,52405)).then(de=>de.b).then(({default:de})=>de({locateFile:ce}).then(me=>(me.initializeBasis(),delete me.then,me)))}return U}let U;var W,ce;(ce=W||(W={}))[ce.ETC1_RGB=0]="ETC1_RGB",ce[ce.ETC2_RGBA=1]="ETC2_RGBA",ce[ce.BC1_RGB=2]="BC1_RGB",ce[ce.BC3_RGBA=3]="BC3_RGBA",ce[ce.BC4_R=4]="BC4_R",ce[ce.BC5_RG=5]="BC5_RG",ce[ce.BC7_M6_RGB=6]="BC7_M6_RGB",ce[ce.BC7_M5_RGBA=7]="BC7_M5_RGBA",ce[ce.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",ce[ce.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",ce[ce.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",ce[ce.ATC_RGB=11]="ATC_RGB",ce[ce.ATC_RGBA=12]="ATC_RGBA",ce[ce.FXT1_RGB=17]="FXT1_RGB",ce[ce.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",ce[ce.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",ce[ce.ETC2_EAC_R11=20]="ETC2_EAC_R11",ce[ce.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",ce[ce.RGBA32=13]="RGBA32",ce[ce.RGB565=14]="RGB565",ce[ce.BGR565=15]="BGR565",ce[ce.RGBA4444=16]="RGBA4444";var Y=T(67969),H=T(55086),G=T(26906);let $=null,re=null;function ue(){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(){return(0,x.Wi)(re)&&(re=B(),$=yield re),re})).apply(this,arguments)}function oe(ce,de){if((0,x.Wi)($))return ce.byteLength;const me=new $.BasisFile(new Uint8Array(ce)),_e=Z(me)?X(me.getNumLevels(0),me.getHasAlpha(),me.getImageWidth(0,0),me.getImageHeight(0,0),de):0;return me.close(),me.delete(),_e}function ie(ce,de){if((0,x.Wi)($))return ce.byteLength;const me=new $.KTX2File(new Uint8Array(ce)),_e=Q(me)?X(me.getLevels(),me.getHasAlpha(),me.getWidth(),me.getHeight(),de):0;return me.close(),me.delete(),_e}function X(ce,de,me,_e,he){const ye=(0,G.RG)(de?Y.q_.COMPRESSED_RGBA8_ETC2_EAC:Y.q_.COMPRESSED_RGB8_ETC2);return Math.ceil(me*_e*ye*(he&&ce>1?(4**ce-1)/(3*4**(ce-1)):1))}function Z(ce){return ce.getNumImages()>=1&&!ce.isUASTC()}function Q(ce){return ce.getFaces()>=1&&ce.isETC1S()}function J(ce,de,me){return se.apply(this,arguments)}function se(){return se=(0,D.Z)(function*(ce,de,me){(0,x.Wi)($)&&($=yield ue());const _e=new $.BasisFile(new Uint8Array(me));if(!Z(_e))return null;_e.startTranscoding();const he=ne(ce,de,_e.getNumLevels(0),_e.getHasAlpha(),_e.getImageWidth(0,0),_e.getImageHeight(0,0),(ye,fe)=>_e.getImageTranscodedSizeInBytes(0,ye,fe),(ye,fe,De)=>_e.transcodeImage(De,0,ye,fe,0,0));return _e.close(),_e.delete(),he}),se.apply(this,arguments)}function ee(ce,de,me){return le.apply(this,arguments)}function le(){return le=(0,D.Z)(function*(ce,de,me){(0,x.Wi)($)&&($=yield ue());const _e=new $.KTX2File(new Uint8Array(me));if(!Q(_e))return null;_e.startTranscoding();const he=ne(ce,de,_e.getLevels(),_e.getHasAlpha(),_e.getWidth(),_e.getHeight(),(ye,fe)=>_e.getImageTranscodedSizeInBytes(ye,0,0,fe),(ye,fe,De)=>_e.transcodeImage(De,ye,0,0,fe,0,-1,-1));return _e.close(),_e.delete(),he}),le.apply(this,arguments)}function ne(ce,de,me,_e,he,ye,fe,De){const{compressedTextureETC:ve,compressedTextureS3TC:Ce}=ce.capabilities,[ge,Te]=ve?_e?[W.ETC2_RGBA,Y.q_.COMPRESSED_RGBA8_ETC2_EAC]:[W.ETC1_RGB,Y.q_.COMPRESSED_RGB8_ETC2]:Ce?_e?[W.BC3_RGBA,Y.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[W.BC1_RGB,Y.q_.COMPRESSED_RGB_S3TC_DXT1_EXT]:[W.RGBA32,Y.VI.RGBA],Le=de.hasMipmap?me:Math.min(1,me),je=[];for(let we=0;we<Le;we++)je.push(new Uint8Array(fe(we,ge))),De(we,ge,je[we]);const ze=je.length>1,Ee=ze?Y.cw.LINEAR_MIPMAP_LINEAR:Y.cw.LINEAR,Ae={...de,samplingMode:Ee,hasMipmap:ze,internalFormat:Te,width:he,height:ye};return new H.x(ce,Ae,{type:"compressed",levels:je})}},74202:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>H});var D=T(99770),x=T(12015),w=T(82793),B=T(10109),U=T(45867),W=T(5894),Y=T(95279);class H{constructor($,re,ue){this.shadowMap=$,this.ssaoHelper=re,this.slicePlane=ue,this.slot=W.r.OPAQUE_MATERIAL,this.hasOccludees=!1,this.enableFillLights=!0,this._inverseViewport=(0,D.a)(),this.lighting=new Y.c,this.ssr=new U.O,this.multipassTerrain=new B.a,this.multipassGeometry=new w._,this.clouds=new x.yl,this.overlays=[]}get camera(){return this._camera}set camera($){this._camera=this.ssr.camera=$,this._inverseViewport[0]=1/$.fullViewport[2],this._inverseViewport[1]=1/$.fullViewport[3]}get inverseViewport(){return this._inverseViewport}}},98565:(qe,xe,T)=>{"use strict";T.d(xe,{j:()=>U});var D=T(77029),x=T(84161),w=T(28093),B=T(2282);class U{constructor(H,G,$,re){this.primitiveIndices=H,this._numIndexPerPrimitive=G,this.indices=$,this.position=re,this.center=(0,w.c)(),(0,B.hu)(H.length>=1),(0,B.hu)($.length%this._numIndexPerPrimitive==0),(0,B.hu)($.length>=H.length*this._numIndexPerPrimitive),(0,B.hu)(3===re.size||4===re.size);const{data:ue,size:ae}=re,oe=H.length;let ie=ae*$[this._numIndexPerPrimitive*H[0]];W.clear(),W.push(ie),this.bbMin=(0,w.f)(ue[ie],ue[ie+1],ue[ie+2]),this.bbMax=(0,w.a)(this.bbMin);for(let Z=0;Z<oe;++Z){const Q=this._numIndexPerPrimitive*H[Z];for(let J=0;J<this._numIndexPerPrimitive;++J){ie=ae*$[Q+J],W.push(ie);let se=ue[ie];this.bbMin[0]=Math.min(se,this.bbMin[0]),this.bbMax[0]=Math.max(se,this.bbMax[0]),se=ue[ie+1],this.bbMin[1]=Math.min(se,this.bbMin[1]),this.bbMax[1]=Math.max(se,this.bbMax[1]),se=ue[ie+2],this.bbMin[2]=Math.min(se,this.bbMin[2]),this.bbMax[2]=Math.max(se,this.bbMax[2])}}(0,x.h)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let X=this.radius*this.radius;for(let Z=0;Z<W.length;++Z){ie=W.getItemAt(Z);const Q=ue[ie]-this.center[0],J=ue[ie+1]-this.center[1],se=ue[ie+2]-this.center[2],ee=Q*Q+J*J+se*se;if(ee<=X)continue;const le=Math.sqrt(ee),ne=.5*(le-this.radius);this.radius=this.radius+ne,X=this.radius*this.radius;const ce=ne/le;this.center[0]+=Q*ce,this.center[1]+=J*ce,this.center[2]+=se*ce}W.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if((0,x.d)(this.bbMin,this.bbMax)>1){const H=(0,x.h)((0,w.c)(),this.bbMin,this.bbMax,.5),G=this.primitiveIndices.length,$=new Uint8Array(G),re=new Array(8);for(let X=0;X<8;++X)re[X]=0;const{data:ue,size:ae}=this.position;for(let X=0;X<G;++X){let Z=0;const Q=this._numIndexPerPrimitive*this.primitiveIndices[X];let J=ae*this.indices[Q],se=ue[J],ee=ue[J+1],le=ue[J+2];for(let ne=1;ne<this._numIndexPerPrimitive;++ne){J=ae*this.indices[Q+ne];const ce=ue[J],de=ue[J+1],me=ue[J+2];ce<se&&(se=ce),de<ee&&(ee=de),me<le&&(le=me)}se<H[0]&&(Z|=1),ee<H[1]&&(Z|=2),le<H[2]&&(Z|=4),$[X]=Z,++re[Z]}let oe=0;for(let X=0;X<8;++X)re[X]>0&&++oe;if(oe<2)return;const ie=new Array(8);for(let X=0;X<8;++X)ie[X]=re[X]>0?new Uint32Array(re[X]):void 0;for(let X=0;X<8;++X)re[X]=0;for(let X=0;X<G;++X){const Z=$[X];ie[Z][re[Z]++]=this.primitiveIndices[X]}this._children=new Array(8);for(let X=0;X<8;++X)void 0!==ie[X]&&(this._children[X]=new U(ie[X],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){W.prune()}}const W=new D.Z({deallocator:null})},59856:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>de,V:()=>J});var D=T(63290),x=T(21286),w=T(62208),B=T(23841),U=T(28347),W=T(43703),Y=T(67831),H=T(99770),G=T(84161),$=T(28093),re=T(993),ue=T(4794),ae=T(8834),oe=T(70562),ie=T(34054),X=T(59617),Z=T(2282);const Q=D.Z.getLogger("esri.views.3d.webgl-engine.lib.Camera");class J{constructor(_e=null,he=null,ye=null){this._viewUp=(0,$.c)(),this._viewForward=(0,$.c)(),this._viewRight=(0,$.c)(),this._ray=(0,oe.Ue)(),this._viewport=(0,ue.f)(0,0,1,1),this._padding=(0,ue.f)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,H.f)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,W.c)(),this._projectionDirty=!0,this._projectionMatrix=(0,W.c)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,W.c)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,W.c)(),this._inverseProjectionDirty=!0,this._inverseProjectionMatrix=null,this._frustumDirty=!0,this._frustum=(0,ae.Ue)(),this._fullViewport=(0,ue.c)(),this._pixelRatio=1,this.relativeElevation=0,(0,w.pC)(_e)&&(0,G.c)(this._ray.origin,_e),this._center=(0,w.pC)(he)?(0,$.a)(he):(0,$.c)(),this._up=(0,w.pC)(ye)?(0,$.a)(ye):(0,$.f)(0,0,1)}get pixelRatio(){return this._pixelRatio}set pixelRatio(_e){this._pixelRatio=_e>0?_e:1}get eye(){return this._ray.origin}set eye(_e){this._compareAndSetView(_e,this._ray.origin)}get center(){return this._center}set center(_e){this._compareAndSetView(_e,this._center)}get ray(){return(0,G.b)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(_e){this._compareAndSetView(_e,this._up)}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(_e){(0,U.c)(this._viewMatrix,_e),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(_e){this._nearFar[0]!==_e&&(this._nearFar[0]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get far(){return this._nearFar[1]}set far(_e){this._nearFar[1]!==_e&&(this._nearFar[1]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get viewport(){return this._viewport}set viewport(_e){this.x=_e[0],this.y=_e[1],this.width=_e[2],this.height=_e[3]}get x(){return this._viewport[0]}set x(_e){this._viewport[0]!==(_e+=this._padding[de.LEFT])&&(this._viewport[0]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get y(){return this._viewport[1]}set y(_e){this._viewport[1]!==(_e+=this._padding[de.BOTTOM])&&(this._viewport[1]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get width(){return this._viewport[2]}set width(_e){this._viewport[2]!==_e&&(this._viewport[2]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get height(){return this._viewport[3]}set height(_e){this._viewport[3]!==_e&&(this._viewport[3]=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get fullWidth(){return this._viewport[2]+this._padding[de.RIGHT]+this._padding[de.LEFT]}set fullWidth(_e){this.width=_e-(this._padding[de.RIGHT]+this._padding[de.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[de.TOP]+this._padding[de.BOTTOM]}set fullHeight(_e){this.height=_e-(this._padding[de.TOP]+this._padding[de.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[de.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[de.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get aspect(){return this.width/this.height}get padding(){return this._padding}set padding(_e){this._padding[de.TOP]===_e[de.TOP]&&this._padding[de.RIGHT]===_e[de.RIGHT]&&this._padding[de.BOTTOM]===_e[de.BOTTOM]&&this._padding[de.LEFT]===_e[de.LEFT]||(this._viewport[0]+=_e[de.LEFT]-this._padding[de.LEFT],this._viewport[1]+=_e[de.BOTTOM]-this._padding[de.BOTTOM],this._viewport[2]-=_e[de.RIGHT]+_e[de.LEFT]-(this._padding[de.RIGHT]+this._padding[de.LEFT]),this._viewport[3]-=_e[de.TOP]+_e[de.BOTTOM]-(this._padding[de.TOP]+this._padding[de.BOTTOM]),(0,re.c)(this._padding,_e),this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0)}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,U.m)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){if(this._projectionDirty){const _e=this.width,he=this.height,ye=this.near*Math.tan(this.fovY/2),fe=ye*this.aspect;(0,U.l)(this._projectionMatrix,-fe*(1+2*this._padding[de.LEFT]/_e),fe*(1+2*this._padding[de.RIGHT]/_e),-ye*(1+2*this._padding[de.BOTTOM]/he),ye*(1+2*this._padding[de.TOP]/he),this.near,this.far),this._projectionDirty=!1}return this._projectionMatrix}get inverseProjectionMatrix(){return(0,w.Wi)(this._inverseProjectionMatrix)&&(this._inverseProjectionMatrix=(0,W.c)()),this._inverseProjectionDirty&&(0,U.a)(this._inverseProjectionMatrix,this.projectionMatrix),this._inverseProjectionMatrix}set projectionMatrix(_e){(0,U.c)(this._projectionMatrix,_e),this._projectionDirty=!1,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fov(){return this._fov}set fov(_e){this._fov=_e,this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return(0,Z.tM)(this._fov,this.width,this.height)}set fovX(_e){this._fov=(0,Z.Kj)(_e,this.width,this.height),this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return(0,Z.RQ)(this._fov,this.width,this.height)}set fovY(_e){this._fov=(0,Z.zF)(_e,this.width,this.height),this._projectionDirty=!0,this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return(0,G.i)(this._center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,U.a)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,U.t)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(_e){return 2*this.near*this.far/(this.far+this.near-(2*_e-1)*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this._pixelRatio}get aboveGround(){return this.relativeElevation&&this.relativeElevation>=0}copyFrom(_e){(0,G.c)(this._ray.origin,_e.eye),(0,G.c)(this._center,_e.center),(0,G.c)(this._up,_e.up),(0,re.c)(this._viewport,_e.viewport),(0,re.c)(this._padding,_e.padding),(0,Y.c)(this._nearFar,_e.nearFar),this._fov=_e.fov,this.relativeElevation=_e.relativeElevation;const he=_e;return this._viewDirty=he._viewDirty,this._viewDirty||((0,U.c)(this._viewMatrix,_e.viewMatrix),(0,G.c)(this._viewRight,_e.viewRight),(0,G.c)(this._viewUp,_e.viewUp),(0,G.c)(this._viewForward,_e.viewForward)),he._projectionDirty?this._projectionDirty=!0:((0,U.c)(this._projectionMatrix,_e.projectionMatrix),this._projectionDirty=!1),this._viewProjectionDirty=!0,this._inverseProjectionDirty=!0,this._frustumDirty=he._frustumDirty,this._frustumDirty||((0,ae.JG)(this._frustum,_e.frustum),this._frustumDirty=!1),he._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,U.c)(this._viewInverseTransposeMatrix,_e.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,re.c)(this._fullViewport,_e.fullViewport),this._pixelRatio=_e.pixelRatio,this}copyViewFrom(_e){this.eye=_e.eye,this.center=_e.center,this.up=_e.up}clone(){return(new J).copyFrom(this)}equals(_e){return(0,G.k)(this.eye,_e.eye)&&(0,G.k)(this._center,_e.center)&&(0,G.k)(this._up,_e.up)&&(0,re.g)(this._viewport,_e.viewport)&&(0,re.g)(this._padding,_e.padding)&&(0,Y.e)(this._nearFar,_e.nearFar)&&this._fov===_e.fov&&this._pixelRatio===_e.pixelRatio&&this.relativeElevation===_e.relativeElevation}almostEquals(_e){if(this._pixelRatio!==_e.pixelRatio||Math.abs(_e.fov-this._fov)>=.001)return!1;(0,G.v)(le,_e.eye,_e.center),(0,G.v)(ne,this.eye,this._center);const fe=(0,G.e)(le,ne),De=(0,G.w)(le),ve=(0,G.w)(ne);return fe*fe>=(1-1e-10)*De*ve&&(0,G.x)(_e.eye,this.eye)<5e-4*Math.max(De,ve)*5e-4&&(0,re.i)(_e.padding,this._padding)<.5&&(0,re.i)(_e.viewport,this._viewport)<.5}computeRenderPixelSizeAt(_e){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(_e))}computeRenderPixelSizeAtDist(_e){return _e*this.perRenderPixelRatio}computeScreenPixelSizeAt(_e){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(_e))}_viewDirectionDistance(_e){return Math.abs((0,ie.SR)(this.viewForward,(0,G.b)(le,_e,this.eye)))}computeScreenPixelSizeAtDist(_e){return _e*this.perScreenPixelRatio}computeDistanceFromRadius(_e,he){return _e/Math.tan(Math.min(this.fovX,this.fovY)/(2*(he||1)))}getScreenCenter(_e=(0,B.s1)()){return _e[0]=(this.padding[de.LEFT]+this.width/2)/this._pixelRatio,_e[1]=(this.padding[de.TOP]+this.height/2)/this._pixelRatio,_e}getRenderCenter(_e,he=.5,ye=.5){return _e[0]=this.padding[de.LEFT]+this.width*he,_e[1]=this.padding[de.BOTTOM]+this.height*ye,_e[2]=.5,_e}setGLViewport(_e){const he=this.viewport,ye=this.padding;_e.setViewport(he[0]-ye[3],he[1]-ye[2],he[2]+ye[1]+ye[3],he[3]+ye[0]+ye[2])}applyProjection(_e,he){_e!==se&&(0,G.c)(se,_e),se[3]=1,(0,re.t)(se,se,this.projectionMatrix);const ye=Math.abs(se[3]);(0,G.g)(se,se,1/ye);const fe=this.fullViewport;he[0]=(0,x.t7)(0,fe[0]+fe[2],.5+.5*se[0]),he[1]=(0,x.t7)(0,fe[1]+fe[3],.5+.5*se[1]),he[2]=.5*(se[2]+1),he[3]=ye}unapplyProjection(_e,he){const ye=this.fullViewport;se[0]=(_e[0]/(ye[0]+ye[2])*2-1)*_e[3],se[1]=(_e[1]/(ye[1]+ye[3])*2-1)*_e[3],se[2]=(2*_e[2]-1)*_e[3],se[3]=_e[3],(0,re.t)(se,se,this.inverseProjectionMatrix),he[0]=se[0],he[1]=se[1],he[2]=se[2]}projectToScreen(_e,he){this.projectToRenderScreen(_e,ce),this.renderToScreen(ce,he)}projectToRenderScreen(_e,he){if(se[0]=_e[0],se[1]=_e[1],se[2]=_e[2],se[3]=1,(0,re.t)(se,se,this.viewProjectionMatrix),0===se[3])return null;(0,G.g)(se,se,1/Math.abs(se[3]));const ye=this.fullViewport;return"x"in he?(he.x=(0,x.t7)(0,ye[0]+ye[2],.5+.5*se[0]),he.y=(0,x.t7)(0,ye[1]+ye[3],.5+.5*se[1])):(he[0]=(0,x.t7)(0,ye[0]+ye[2],.5+.5*se[0]),he[1]=(0,x.t7)(0,ye[1]+ye[3],.5+.5*se[1]),he.length>2&&(he[2]=.5*(se[2]+1))),he}unprojectFromScreen(_e,he){return this.unprojectFromRenderScreen(this.screenToRender(_e,ce),he)}unprojectFromRenderScreen(_e,he){if((0,U.m)(ee,this.projectionMatrix,this.viewMatrix),!(0,U.a)(ee,ee))return null;const ye=this.fullViewport;return se[0]=2*(_e[0]-ye[0])/ye[2]-1,se[1]=2*(_e[1]-ye[1])/ye[3]-1,se[2]=2*_e[2]-1,se[3]=1,(0,re.t)(se,se,ee),0===se[3]?null:(he[0]=se[0]/se[3],he[1]=se[1]/se[3],he[2]=se[2]/se[3],he)}constrainWindowSize(_e,he,ye,fe=ye){const De=_e*this._pixelRatio,ve=he*this._pixelRatio,Ce=Math.max(De-ye/2,0),ge=Math.max(this.fullHeight-ve-fe/2,0),Te=-Math.min(De-ye/2,0),Le=-Math.min(this.fullHeight-ve-fe/2,0);return[Ce,ge,ye-Te- -Math.min(this.fullWidth-De-ye/2,0),fe-Le- -Math.min(ve-fe/2,0)]}computeUp(_e){_e===X.JY.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(_e,he){const fe=this.fullHeight-_e[1]*this._pixelRatio;return he[0]=_e[0]*this._pixelRatio,he[1]=fe,he}renderToScreen(_e,he){const fe=(this.fullHeight-_e[1])/this._pixelRatio;he[0]=_e[0]/this._pixelRatio,he[1]=fe}_computeUpGlobal(){(0,G.b)(le,this.center,this.eye);const _e=(0,G.l)(this.center);_e<1?((0,G.s)(this._up,0,0,1),this._markViewDirty()):Math.abs((0,G.e)(le,this.center))>.9999*(0,G.l)(le)*_e||((0,G.f)(this._up,le,this.center),(0,G.f)(this._up,this._up,le),(0,G.n)(this._up,this._up),this._markViewDirty())}_computeUpLocal(){(0,G.r)(le,this.eye,this.center),Math.abs(le[2])<=.9999&&((0,G.g)(le,le,le[2]),(0,G.s)(this._up,-le[0],-le[1],1-le[2]),(0,G.n)(this._up,this._up),this._markViewDirty())}_compareAndSetView(_e,he){"number"==typeof _e[0]&&isFinite(_e[0])&&"number"==typeof _e[1]&&isFinite(_e[1])&&"number"==typeof _e[2]&&isFinite(_e[2])?(0,G.k)(_e,he)||((0,G.c)(he,_e),this._markViewDirty()):Q.warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,ae.q_)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,U.n)(this._viewMatrix,this.eye,this._center,this._up),(0,G.s)(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),(0,G.s)(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),(0,G.s)(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}}const se=(0,ue.c)(),ee=(0,W.c)(),le=(0,$.c)(),ne=(0,$.c)(),ce=(0,B.J$)();var de,me;(me=de||(de={}))[me.TOP=0]="TOP",me[me.RIGHT=1]="RIGHT",me[me.BOTTOM=2]="BOTTOM",me[me.LEFT=3]="LEFT"},26594:(qe,xe,T)=>{"use strict";T.d(xe,{as:()=>x,t9:()=>B});var D=T(77029);class x{constructor(){this.adds=new D.Z,this.removes=new D.Z,this.updates=new D.Z({allocator:W=>W||new w,deallocator:W=>(W.renderGeometry=null,W)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}}class w{}class B{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}},12699:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>x});var D=T(86236);class x{constructor(){this.id=(0,D.D)()}unload(){}}},24425:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{U:()=>D}),(x=D||(D={}))[x.Layer=0]="Layer",x[x.Object=1]="Object",x[x.Geometry=2]="Geometry",x[x.Material=3]="Material",x[x.Texture=4]="Texture",x[x.COUNT=5]="COUNT"},39114:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>x});var D=T(16396);const x=new Map([[D.T.POSITION,0],[D.T.NORMAL,1],[D.T.UV0,2],[D.T.COLOR,3],[D.T.SIZE,4],[D.T.TANGENT,4],[D.T.AUXPOS1,5],[D.T.SYMBOLCOLOR,5],[D.T.AUXPOS2,6],[D.T.FEATUREATTRIBUTE,6],[D.T.INSTANCEFEATUREATTRIBUTE,6],[D.T.INSTANCECOLOR,7],[D.T.MODEL,8],[D.T.MODELNORMAL,12],[D.T.MODELORIGINHI,11],[D.T.MODELORIGINLO,15]])},59631:(qe,xe,T)=>{"use strict";T.d(xe,{Bn:()=>G,QI:()=>H});var D=T(16396),x=T(67969),w=T(40852);new w.G(D.T.POSITION,3,x.g.FLOAT,0,12),new w.G(D.T.POSITION,3,x.g.FLOAT,0,20),new w.G(D.T.UV0,2,x.g.FLOAT,12,20),new w.G(D.T.POSITION,3,x.g.FLOAT,0,32),new w.G(D.T.NORMAL,3,x.g.FLOAT,12,32),new w.G(D.T.UV0,2,x.g.FLOAT,24,32),new w.G(D.T.POSITION,3,x.g.FLOAT,0,16),new w.G(D.T.COLOR,4,x.g.UNSIGNED_BYTE,12,16);const H=[new w.G(D.T.POSITION,2,x.g.FLOAT,0,8)],G=[new w.G(D.T.POSITION,2,x.g.FLOAT,0,16),new w.G(D.T.UV0,2,x.g.FLOAT,8,16)]},60881:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>x});var D=T(42743);class x{constructor(B){this._material=B.material,this._techniqueRepository=B.techniqueRep,this._output=B.output}dispose(){this._techniqueRepository.release(this._technique)}get technique(){return this._technique}ensureTechnique(B,U,W=this._output){return this._technique=this._techniqueRepository.releaseAndAcquire(B,this._material.getConfiguration(W,U),this._technique),this._technique}ensureResources(B){return D.Rw.LOADED}}},50907:(qe,xe,T)=>{"use strict";T.d(xe,{h:()=>W});var D=T(63290),x=T(62208),w=T(1101),B=T(2282);const U=D.Z.getLogger("esri.views.3d.webgl-engine.lib.GLMaterialRepository");class W{constructor(G,$,re,ue){this._textureRepository=G,this._techniqueRepository=$,this.materialChanged=re,this.requestRender=ue,this._id2glMaterialRef=new w.r}dispose(){this._textureRepository.dispose()}acquire(G,$){this._ownMaterial(G);let re=this._id2glMaterialRef.get($,G.id);if((0,x.Wi)(re)){const ue=G.createGLMaterial({material:G,techniqueRep:this._techniqueRepository,textureRep:this._textureRepository,output:$});re=new Y(ue),this._id2glMaterialRef.set($,G.id,re)}return re.ref(),re.glMaterial}release(G,$){const re=this._id2glMaterialRef.get($,G.id);(0,x.pC)(re)&&(re.unref(),re.referenced||((0,x.O3)(re.glMaterial),this._id2glMaterialRef.delete($,G.id)))}_ownMaterial(G){(0,x.pC)(G.repository)&&G.repository!==this&&U.error("Material is already owned by a different material repository"),G.repository=this}}class Y{constructor(G){this.glMaterial=G,this.refCnt=0}ref(){++this.refCnt}unref(){--this.refCnt,(0,B.hu)(this.refCnt>=0)}get referenced(){return this.refCnt>0}}},32393:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>W,p:()=>U});var D=T(62208),x=T(6945),w=T(42743),B=T(91263);class U{constructor(H,G){this._material=H,this._repository=G,this._map=new Map}destroy(){this._map.forEach((H,G)=>{(0,D.pC)(H)&&this._repository.release(this._material,W(G))})}load(H,G){this._map.has(G)||this._map.set(G,this._repository.acquire(this._material,W(G)));const $=this._map.get(G);if((0,D.pC)($)){if($.ensureResources(H)===w.Rw.LOADED)return $;this._repository.requestRender()}return null}}function W(Y){switch(Y){case B.C.MATERIAL:return x.H.Color;case B.C.MATERIAL_ALPHA:return x.H.Alpha;case B.C.MATERIAL_DEPTH:return x.H.Depth;case B.C.MATERIAL_NORMAL:return x.H.Normal;case B.C.MATERIAL_DEPTH_SHADOWMAP_ALL:return x.H.Shadow;case B.C.MATERIAL_HIGHLIGHT:return x.H.Highlight;case B.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT:case B.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT:return x.H.Shadow}}},33470:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>Y,F:()=>W});var D=T(62208),x=T(10699),w=T(17625),B=T(42743),U=T(60881);class W extends U.Z{constructor(G){super(G),this._numLoading=0,this._disposed=!1,this._textureRepository=G.textureRep,this._textureId=G.textureId,this._acquire(G.textureId,$=>this._texture=$),this._acquire(G.normalTextureId,$=>this._textureNormal=$),this._acquire(G.emissiveTextureId,$=>this._textureEmissive=$),this._acquire(G.occlusionTextureId,$=>this._textureOcclusion=$),this._acquire(G.metallicRoughnessTextureId,$=>this._textureMetallicRoughness=$)}dispose(){this._texture=(0,D.RY)(this._texture),this._textureNormal=(0,D.RY)(this._textureNormal),this._textureEmissive=(0,D.RY)(this._textureEmissive),this._textureOcclusion=(0,D.RY)(this._textureOcclusion),this._textureMetallicRoughness=(0,D.RY)(this._textureMetallicRoughness),this._disposed=!0}ensureResources(G){return 0===this._numLoading?B.Rw.LOADED:B.Rw.LOADING}get textureBindParameters(){return new Y((0,D.pC)(this._texture)?this._texture.glTexture:null,(0,D.pC)(this._textureNormal)?this._textureNormal.glTexture:null,(0,D.pC)(this._textureEmissive)?this._textureEmissive.glTexture:null,(0,D.pC)(this._textureOcclusion)?this._textureOcclusion.glTexture:null,(0,D.pC)(this._textureMetallicRoughness)?this._textureMetallicRoughness.glTexture:null)}updateTexture(G){((0,D.Wi)(this._texture)||G!==this._texture.id)&&(this._texture=(0,D.RY)(this._texture),this._textureId=G,this._acquire(this._textureId,$=>this._texture=$))}_acquire(G,$){if((0,D.Wi)(G))return void $(null);const re=this._textureRepository.acquire(G);if((0,x.y8)(re))return++this._numLoading,void re.then(ue=>{if(this._disposed)return(0,D.RY)(ue),void $(null);$(ue)}).finally(()=>--this._numLoading);$(re)}}class Y extends w.K{constructor(G=null,$=null,re=null,ue=null,ae=null){super(),this.texture=G,this.textureNormal=$,this.textureEmissive=re,this.textureOcclusion=ue,this.textureMetallicRoughness=ae}}},52107:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(62208),x=T(42743),w=T(98565),B=T(12699),U=T(24425),W=T(36848),Y=T(2282),H=T(16396);class G extends B.c{constructor(ae,oe=[],ie=x.MX.Triangle,X=-1){super(),this._primitiveType=ie,this.edgeIndicesLength=X,this.type=U.U.Geometry,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[Z,Q]of ae)Q&&this._vertexAttributes.set(Z,{...Q});if(null==oe||0===oe.length){const Z=function $(ue){const ae=ue.values().next().value;return null==ae?0:ae.data.length/ae.size}(this._vertexAttributes),Q=(0,W.p)(Z);this.edgeIndicesLength=this.edgeIndicesLength<0?Z:this.edgeIndicesLength;for(const J of this._vertexAttributes.keys())this._indices.set(J,Q)}else for(const[Z,Q]of oe)Q&&(this._indices.set(Z,re(Q)),Z===H.T.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(Z).length:this.edgeIndicesLength))}cloneShallow(){const ae=new G([],void 0,this._primitiveType,void 0),{_vertexAttributes:oe,_indices:ie}=ae;return this._vertexAttributes.forEach((X,Z)=>{oe.set(Z,X)}),this._indices.forEach((X,Z)=>{ie.set(Z,X)}),ae.screenToWorldRatio=this.screenToWorldRatio,ae._boundingInfo=this._boundingInfo,ae}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(ae){const oe=this._vertexAttributes.get(ae);return oe&&!oe.exclusive&&(oe.data=Array.from(oe.data),oe.exclusive=!0),oe}get indices(){return this._indices}get indexCount(){const ae=this._indices.values().next().value;return ae?ae.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return(0,D.Wi)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(ae){return this.primitiveType===x.MX.Triangle?this._computeAttachmentOriginTriangles(ae):this._computeAttachmentOriginPoints(ae)}_computeAttachmentOriginTriangles(ae){const oe=this.indices.get(H.T.POSITION),ie=this.vertexAttributes.get(H.T.POSITION);return(0,W.cM)(ie,oe,ae)}_computeAttachmentOriginPoints(ae){const oe=this.indices.get(H.T.POSITION),ie=this.vertexAttributes.get(H.T.POSITION);return(0,W.NO)(ie,oe,ae)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const ae=this.indices.get(H.T.POSITION);if(0===ae.length)return null;const oe=this.primitiveType===x.MX.Triangle?3:1;(0,Y.hu)(ae.length%oe==0,"Indexing error: "+ae.length+" not divisible by "+oe);const ie=(0,W.p)(ae.length/oe),X=this.vertexAttributes.get(H.T.POSITION);return new w.j(ie,oe,ae,X)}}function re(ue){if(ue.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return ue;for(const ae of ue)if(ae>=65536)return ue;return new Uint16Array(ue)}},24260:(qe,xe,T)=>{"use strict";T.d(xe,{k:()=>U});var D=T(62208),x=T(27899),w=T(86236),B=T(84161);class U{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(Y,H,G,$,re,ue){this.id=(0,w.D)(),this.geometry=Y,this.material=H,this.transformation=G,this.instanceParameters=$,this.origin=re,this._shaderTransformation=ue,this._disposed=!1}release(){this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return(0,D.pC)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(Y){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,Y):this.geometry.computeAttachmentOrigin(Y))&&((0,B.m)(Y,Y,this.getStaticTransformation()),!0)}}U.pool=new x.Z(U)},57521:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>J});var Y,se,D=T(84161),x=T(14658),w=T(28093),B=T(90014),U=T(70562),W=T(42743);(se=Y||(Y={})).length=function ee(me,_e){const he=me[_e],ye=me[_e+1],fe=me[_e+2];return Math.sqrt(he*he+ye*ye+fe*fe)},se.normalize=function le(me,_e){const he=me[_e],ye=me[_e+1],fe=me[_e+2],De=1/Math.sqrt(he*he+ye*ye+fe*fe);me[_e]*=De,me[_e+1]*=De,me[_e+2]*=De},se.scale=function ne(me,_e,he){me[_e]*=he,me[_e+1]*=he,me[_e+2]*=he},se.add=function ce(me,_e,he,ye,fe,De=_e){(fe=fe||me)[De]=me[_e]+he[ye],fe[De+1]=me[_e+1]+he[ye+1],fe[De+2]=me[_e+2]+he[ye+2]},se.subtract=function de(me,_e,he,ye,fe,De=_e){(fe=fe||me)[De]=me[_e]-he[ye],fe[De+1]=me[_e+1]-he[ye+1],fe[De+2]=me[_e+2]-he[ye+2]};var H=T(52107),G=T(36848),$=T(2282),re=T(16396);const ue=Y;var ae,oe,ie,X;(function(se){const le=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],ne=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],ce=[0,0,1,0,1,1,0,1],de=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),me=new Uint16Array(36);for(let ye=0;ye<6;ye++)for(let fe=0;fe<6;fe++)me[6*ye+fe]=ye;const _e=new Uint16Array(36);for(let ye=0;ye<6;ye++)_e[6*ye+0]=0,_e[6*ye+1]=1,_e[6*ye+2]=2,_e[6*ye+3]=2,_e[6*ye+4]=3,_e[6*ye+5]=0;se.createGeometry=function he(ye){Array.isArray(ye)||(ye=[ye,ye,ye]);const fe=new Array(24);for(let De=0;De<8;De++)fe[3*De]=le[De][0]*ye[0],fe[3*De+1]=le[De][1]*ye[1],fe[3*De+2]=le[De][2]*ye[2];return new H.Z([[re.T.POSITION,{size:3,data:fe,exclusive:!0}],[re.T.NORMAL,{size:3,data:ne}],[re.T.UV0,{size:2,data:ce}]],[[re.T.POSITION,de],[re.T.NORMAL,me],[re.T.UV0,_e]])}})(ae||(ae={})),function(se){const le=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],ne=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],ce=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),de=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);se.createGeometry=function me(_e){Array.isArray(_e)||(_e=[_e,_e,_e]);const he=new Array(18);for(let ye=0;ye<6;ye++)he[3*ye]=le[ye][0]*_e[0],he[3*ye+1]=le[ye][1]*_e[1],he[3*ye+2]=le[ye][2]*_e[2];return new H.Z([[re.T.POSITION,{size:3,data:he,exclusive:!0}],[re.T.NORMAL,{size:3,data:ne}]],[[re.T.POSITION,ce],[re.T.NORMAL,de]])}}(oe||(oe={})),function(se){const ne=(0,x.f)(-.5,0,-.5),ce=(0,x.f)(.5,0,-.5),de=(0,x.f)(0,0,.5),me=(0,x.f)(0,.5,0),_e=(0,x.c)(),he=(0,x.c)(),ye=(0,x.c)(),fe=(0,x.c)(),De=(0,x.c)();(0,D.b)(_e,ne,me),(0,D.b)(he,ne,ce),(0,D.f)(ye,_e,he),(0,D.n)(ye,ye),(0,D.b)(_e,ce,me),(0,D.b)(he,ce,de),(0,D.f)(fe,_e,he),(0,D.n)(fe,fe),(0,D.b)(_e,de,me),(0,D.b)(he,de,ne),(0,D.f)(De,_e,he),(0,D.n)(De,De);const ve=[ne,ce,de,me],Ce=[0,-1,0,ye[0],ye[1],ye[2],fe[0],fe[1],fe[2],De[0],De[1],De[2]],ge=[0,1,2,3,1,0,3,2,1,3,0,2],Te=[0,0,0,1,1,1,2,2,2,3,3,3];se.createGeometry=function Le(je){Array.isArray(je)||(je=[je,je,je]);const ze=new Array(12);for(let Ee=0;Ee<4;Ee++)ze[3*Ee]=ve[Ee][0]*je[0],ze[3*Ee+1]=ve[Ee][1]*je[1],ze[3*Ee+2]=ve[Ee][2]*je[2];return new H.Z([[re.T.POSITION,{size:3,data:ze,exclusive:!0}],[re.T.NORMAL,{size:3,data:Ce}]],[[re.T.POSITION,new Uint16Array(ge)],[re.T.NORMAL,new Uint16Array(Te)]])}}(ie||(ie={})),function(se){se.createBoxGeometry=ae.createGeometry,se.createDiamondGeometry=oe.createGeometry,se.createTetrahedronGeometry=ie.createGeometry,se.createSphereGeometry=function ee(Ee,Ae,we,Be={uv:!0}){const Pe=-Math.PI,Oe=2*Math.PI,Ke=-Math.PI/2,Ve=Math.PI,Ne=Math.max(3,Math.floor(Ae)),Ie=Math.max(2,Math.floor(we)),We=(Ne+1)*(Ie+1),Se=new Float32Array(3*We),He=new Float32Array(3*We),$e=new Float32Array(2*We),et=[];let nt=0;for(let Ze=0;Ze<=Ie;Ze++){const lt=[],st=Ze/Ie,Mt=Ke+st*Ve,Ft=Math.cos(Mt);for(let kt=0;kt<=Ne;kt++){const wt=kt/Ne,zt=Pe+wt*Oe,Zt=Math.cos(zt)*Ft,ar=Math.sin(Mt),Pr=-Math.sin(zt)*Ft;Se[3*nt]=Zt*Ee,Se[3*nt+1]=ar*Ee,Se[3*nt+2]=Pr*Ee,He[3*nt]=Zt,He[3*nt+1]=ar,He[3*nt+2]=Pr,$e[2*nt]=wt,$e[2*nt+1]=st,lt.push(nt),++nt}et.push(lt)}const it=new Uint32Array(2*Ne*(Ie-1)*3);nt=0;for(let Ze=0;Ze<Ie;Ze++)for(let lt=0;lt<Ne;lt++){const st=et[Ze][lt],Mt=et[Ze][lt+1],Ft=et[Ze+1][lt+1],kt=et[Ze+1][lt];0===Ze?(it[nt++]=st,it[nt++]=Ft,it[nt++]=kt):Ze===Ie-1?(it[nt++]=st,it[nt++]=Mt,it[nt++]=Ft):(it[nt++]=st,it[nt++]=Mt,it[nt++]=Ft,it[nt++]=Ft,it[nt++]=kt,it[nt++]=st)}const Xe=[[re.T.POSITION,it],[re.T.NORMAL,it]],rt=[[re.T.POSITION,{size:3,data:Se,exclusive:!0}],[re.T.NORMAL,{size:3,data:He,exclusive:!0}]];return Be.uv&&(rt.push([re.T.UV0,{size:2,data:$e,exclusive:!0}]),Xe.push([re.T.UV0,it])),Be.offset&&(Xe[0][0]=re.T.OFFSET,rt[0][0]=re.T.OFFSET,Xe.push([re.T.POSITION,new Uint32Array(it.length)]),rt.push([re.T.POSITION,{size:3,data:Float64Array.from(Be.offset),exclusive:!0}])),new H.Z(rt,Xe)},se.createPolySphereGeometry=function le(Ee,Ae,we){const Be=Ee;let Pe,Oe;if(we)Pe=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],Oe=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{const Se=Be*(1+Math.sqrt(5))/2;Pe=[-Be,Se,0,Be,Se,0,-Be,-Se,0,Be,-Se,0,0,-Be,Se,0,Be,Se,0,-Be,-Se,0,Be,-Se,Se,0,-Be,Se,0,Be,-Se,0,-Be,-Se,0,Be],Oe=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(let Se=0;Se<Pe.length;Se+=3)ue.scale(Pe,Se,Ee/ue.length(Pe,Se));let Ke={};function Ve(Se,He){Se>He&&([Se,He]=[He,Se]);const $e=Se.toString()+"."+He.toString();if(Ke[$e])return Ke[$e];let et=Pe.length;return Pe.length+=3,ue.add(Pe,3*Se,Pe,3*He,Pe,et),ue.scale(Pe,et,Ee/ue.length(Pe,et)),et/=3,Ke[$e]=et,et}for(let Se=0;Se<Ae;Se++){const He=Oe.length,$e=new Uint32Array(4*He);for(let et=0;et<He;et+=3){const nt=Oe[et],it=Oe[et+1],Xe=Oe[et+2],rt=Ve(nt,it),Ze=Ve(it,Xe),lt=Ve(Xe,nt),st=4*et;$e[st]=nt,$e[st+1]=rt,$e[st+2]=lt,$e[st+3]=it,$e[st+4]=Ze,$e[st+5]=rt,$e[st+6]=Xe,$e[st+7]=lt,$e[st+8]=Ze,$e[st+9]=rt,$e[st+10]=Ze,$e[st+11]=lt}Oe=$e,Ke={}}const Ne=new Float32Array(Pe);for(let Se=0;Se<Ne.length;Se+=3)ue.normalize(Ne,Se);const Ie=[[re.T.POSITION,Oe],[re.T.NORMAL,Oe]],We=[[re.T.POSITION,{size:3,data:new Float32Array(Pe),exclusive:!0}],[re.T.NORMAL,{size:3,data:Ne,exclusive:!0}]];return new H.Z(We,Ie)},se.createPointGeometry=function ne(Ee,Ae,we,Be,Pe,Oe,Ke){const Se=[[re.T.POSITION,{size:3,data:Ae?[Ae[0],Ae[1],Ae[2]]:[0,0,0],exclusive:!0}],[re.T.NORMAL,{size:3,data:Ee?[Ee[0],Ee[1],Ee[2]]:[0,0,1],exclusive:!0}],[re.T.UV0,{size:(Oe=Oe||[0,0]).length,data:Oe}],[re.T.COLOR,{size:4,data:we?[255*we[0],255*we[1],255*we[2],we.length>3?255*we[3]:255]:[255,255,255,255],exclusive:!0}],[re.T.SIZE,{size:2,data:null!=Be&&2===Be.length?Be:[1,1]}]];if(null!=Pe){const He=new Float32Array([Pe[0],Pe[1],Pe[2],Pe[3]]);Se.push([re.T.AUXPOS1,{size:4,data:He}])}if(null!=Ke){const He=new Float32Array([Ke[0],Ke[1],Ke[2],Ke[3]]);Se.push([re.T.AUXPOS2,{size:4,data:He}])}return new H.Z(Se,null,W.MX.Point)},se.updatePointGeometry=function ce(Ee,Ae,we,Be,Pe,Oe,Ke,Ve){if(null!=Ee){const{data:Ne}=Ve.getMutableAttribute(re.T.NORMAL);Ne[0]=Ee[0],Ne[1]=Ee[1],Ne[2]=Ee[2]}if(null!=Ae){const{data:Ne}=Ve.getMutableAttribute(re.T.POSITION);Ne[0]=Ae[0],Ne[1]=Ae[1],Ne[2]=Ae[2]}if(null!=we){const{data:Ne}=Ve.getMutableAttribute(re.T.COLOR);Ne[0]=we[0],Ne[1]=we[1],Ne[2]=we[2],Ne[3]=we[3]}if(null!=Be){const{data:Ne}=Ve.getMutableAttribute(re.T.SIZE);Ne[0]=Be[0],Ne[1]=Be[1]}if(null!=Pe){const{data:Ne}=Ve.getMutableAttribute(re.T.AUXPOS1);Ne[0]=Pe[0],Ne[1]=Pe[1],Ne[2]=Pe[2],Ne[3]=Pe[3]}if(null!=Oe){const{data:Ne}=Ve.getMutableAttribute(re.T.UV0);Ne[0]=Oe[0],Ne[1]=Oe[1]}if(null!=Ke){const{data:Ne}=Ve.getMutableAttribute(re.T.AUXPOS2);Ne[0]=Ke[0],Ne[1]=Ke[1],Ne[2]=Ke[2],Ne[3]=Ke[3]}},se.createPointArrayGeometry=function de(Ee,Ae){const we=new Float32Array(3*Ee.length),Be=new Float32Array(Ae?3*Ee.length:3),Pe=new Uint32Array(Ee.length),Oe=new Uint32Array(Ee.length);for(let Ie=0;Ie<Ee.length;Ie++)we[3*Ie]=Ee[Ie][0],we[3*Ie+1]=Ee[Ie][1],we[3*Ie+2]=Ee[Ie][2],Ae&&(Be[3*Ie]=Ae[Ie][0],Be[3*Ie+1]=Ae[Ie][1],Be[3*Ie+2]=Ae[Ie][2]),Pe[Ie]=Ie,Oe[Ie]=0;return Ae||(Be[0]=0,Be[1]=1,Be[2]=0),new H.Z([[re.T.POSITION,{size:3,data:we,exclusive:!0}],[re.T.NORMAL,{size:3,data:Be,exclusive:!0}],[re.T.UV0,{size:2,data:[0,0],exclusive:!0}]],[[re.T.POSITION,Pe],[re.T.NORMAL,Ae?Pe:Oe],[re.T.UV0,Oe]],W.MX.Point)},se.createTriangleGeometry=function me(){const Ae=new Uint16Array([0,1,2]),Be=new Uint16Array([0,0,0]),Oe=new Uint16Array([0,0,0]);return new H.Z([[re.T.POSITION,{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],[re.T.NORMAL,{size:3,data:[0,1,0],exclusive:!0}],[re.T.UV0,{size:2,data:[0,0],exclusive:!0}]],[[re.T.POSITION,Ae],[re.T.NORMAL,Be],[re.T.UV0,Oe]])};const _e=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function je(Ee,Ae,we,Be,Pe){return!(Math.abs((0,D.e)(Ae,Ee))>Pe||((0,D.f)(we,Ee,Ae),(0,D.n)(we,we),(0,D.f)(Be,we,Ee),(0,D.n)(Be,Be),0))}function ze(Ee,Ae,we,Be,Pe,Oe,Ke){return je(Ee,Ae,Pe,Oe,Ke)||je(Ee,we,Pe,Oe,Ke)||je(Ee,Be,Pe,Oe,Ke)}se.createSquareGeometry=function he(Ee=_e){const Ae=new Array(12);for(let Ie=0;Ie<4;Ie++)for(let We=0;We<3;We++)Ae[3*Ie+We]=Ee[Ie][We];const we=new Uint32Array([0,1,2,2,3,0]),Pe=new Uint32Array([0,0,0,0,0,0]);return new H.Z([[re.T.POSITION,{size:3,data:Ae,exclusive:!0}],[re.T.NORMAL,{size:3,data:[0,0,1],exclusive:!0}],[re.T.UV0,{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],[re.T.COLOR,{size:4,data:[255,255,255,255],exclusive:!0}]],[[re.T.POSITION,we],[re.T.NORMAL,Pe],[re.T.UV0,we],[re.T.COLOR,Pe]])},se.createConeGeometry=function ye(Ee,Ae,we,Be,Pe=!0,Oe=!0){let Ke=0;const Ve=Ae,Ne=Ee;let Ie=(0,x.f)(0,Ke,0),We=(0,x.f)(0,Ke+Ne,0),Se=(0,x.f)(0,-1,0),He=(0,x.f)(0,1,0);Be&&(Ke=Ne,We=(0,x.f)(0,0,0),Ie=(0,x.f)(0,Ke,0),Se=(0,x.f)(0,1,0),He=(0,x.f)(0,-1,0));const $e=[We,Ie],et=[Se,He],nt=we+2,it=Math.sqrt(Ne*Ne+Ve*Ve);if(Be)for(let wt=we-1;wt>=0;wt--){const zt=wt*(2*Math.PI/we),Zt=(0,x.f)(Math.cos(zt)*Ve,Ke,Math.sin(zt)*Ve);$e.push(Zt);const ar=(0,x.f)(Ne*Math.cos(zt)/it,-Ve/it,Ne*Math.sin(zt)/it);et.push(ar)}else for(let wt=0;wt<we;wt++){const zt=wt*(2*Math.PI/we),Zt=(0,x.f)(Math.cos(zt)*Ve,Ke,Math.sin(zt)*Ve);$e.push(Zt);const ar=(0,x.f)(Ne*Math.cos(zt)/it,Ve/it,Ne*Math.sin(zt)/it);et.push(ar)}const Xe=new Uint32Array(2*(we+2)*3),rt=new Uint32Array(2*(we+2)*3);let Ze=0,lt=0;if(Pe){for(let wt=3;wt<$e.length;wt++)Xe[Ze++]=1,Xe[Ze++]=wt-1,Xe[Ze++]=wt,rt[lt++]=0,rt[lt++]=0,rt[lt++]=0;Xe[Ze++]=$e.length-1,Xe[Ze++]=2,Xe[Ze++]=1,rt[lt++]=0,rt[lt++]=0,rt[lt++]=0}if(Oe){for(let wt=3;wt<$e.length;wt++)Xe[Ze++]=wt,Xe[Ze++]=wt-1,Xe[Ze++]=0,rt[lt++]=wt,rt[lt++]=wt-1,rt[lt++]=1;Xe[Ze++]=0,Xe[Ze++]=2,Xe[Ze++]=$e.length-1,rt[lt++]=1,rt[lt++]=2,rt[lt++]=et.length-1}const st=new Float32Array(3*nt);for(let wt=0;wt<nt;wt++)st[3*wt]=$e[wt][0],st[3*wt+1]=$e[wt][1],st[3*wt+2]=$e[wt][2];const Mt=new Float32Array(3*nt);for(let wt=0;wt<nt;wt++)Mt[3*wt]=et[wt][0],Mt[3*wt+1]=et[wt][1],Mt[3*wt+2]=et[wt][2];return new H.Z([[re.T.POSITION,{size:3,data:st,exclusive:!0}],[re.T.NORMAL,{size:3,data:Mt,exclusive:!0}]],[[re.T.POSITION,Xe],[re.T.NORMAL,rt]])},se.createCylinderGeometry=function fe(Ee,Ae,we,Be,Pe,Oe){const Ke=Be?(0,x.a)(Be):(0,x.f)(1,0,0),Ve=Pe?(0,x.a)(Pe):(0,x.f)(0,0,0);Oe=null==Oe||Oe;const Ne=(0,x.c)();(0,D.n)(Ne,Ke);const Ie=(0,x.c)();(0,D.g)(Ie,Ne,Math.abs(Ee));const We=(0,x.c)();(0,D.g)(We,Ie,-.5),(0,D.a)(We,We,Ve);const Se=(0,x.f)(0,1,0);Math.abs(1-(0,D.e)(Ne,Se))<.2&&(0,D.s)(Se,0,0,1);const He=(0,x.c)();(0,D.f)(He,Ne,Se),(0,D.n)(He,He),(0,D.f)(Se,He,Ne);const $e=2*we+(Oe?2:0),et=we+(Oe?2:0),nt=new Float32Array(3*$e),it=new Float32Array(3*et),Xe=new Float32Array(2*$e),rt=new Uint32Array(3*we*(Oe?4:2)),Ze=new Uint32Array(3*we*(Oe?4:2));Oe&&(nt[3*($e-2)+0]=We[0],nt[3*($e-2)+1]=We[1],nt[3*($e-2)+2]=We[2],Xe[2*($e-2)]=0,Xe[2*($e-2)+1]=0,nt[3*($e-1)+0]=nt[3*($e-2)+0]+Ie[0],nt[3*($e-1)+1]=nt[3*($e-2)+1]+Ie[1],nt[3*($e-1)+2]=nt[3*($e-2)+2]+Ie[2],Xe[2*($e-1)]=1,Xe[2*($e-1)+1]=1,it[3*(et-2)+0]=-Ne[0],it[3*(et-2)+1]=-Ne[1],it[3*(et-2)+2]=-Ne[2],it[3*(et-1)+0]=Ne[0],it[3*(et-1)+1]=Ne[1],it[3*(et-1)+2]=Ne[2]);const lt=(zt,Zt,ar)=>{rt[zt]=Zt,Ze[zt]=ar};let st=0;const Mt=(0,x.c)(),Ft=(0,x.c)();for(let zt=0;zt<we;zt++){const Zt=zt*(2*Math.PI/we);(0,D.g)(Mt,Se,Math.sin(Zt)),(0,D.g)(Ft,He,Math.cos(Zt)),(0,D.a)(Mt,Mt,Ft),it[3*zt+0]=Mt[0],it[3*zt+1]=Mt[1],it[3*zt+2]=Mt[2],(0,D.g)(Mt,Mt,Ae),(0,D.a)(Mt,Mt,We),nt[3*zt+0]=Mt[0],nt[3*zt+1]=Mt[1],nt[3*zt+2]=Mt[2],Xe[2*zt+0]=zt/we,Xe[2*zt+1]=0,nt[3*(zt+we)+0]=nt[3*zt+0]+Ie[0],nt[3*(zt+we)+1]=nt[3*zt+1]+Ie[1],nt[3*(zt+we)+2]=nt[3*zt+2]+Ie[2],Xe[2*(zt+we)+0]=zt/we,Xe[2*zt+1]=1;const ar=(zt+1)%we;lt(st++,zt,zt),lt(st++,zt+we,zt),lt(st++,ar,ar),lt(st++,ar,ar),lt(st++,zt+we,zt),lt(st++,ar+we,ar)}if(Oe){for(let zt=0;zt<we;zt++){const Zt=(zt+1)%we;lt(st++,$e-2,et-2),lt(st++,zt,et-2),lt(st++,Zt,et-2)}for(let zt=0;zt<we;zt++){const Zt=(zt+1)%we;lt(st++,zt+we,et-1),lt(st++,$e-1,et-1),lt(st++,Zt+we,et-1)}}return new H.Z([[re.T.POSITION,{size:3,data:nt,exclusive:!0}],[re.T.NORMAL,{size:3,data:it,exclusive:!0}],[re.T.UV0,{size:2,data:Xe,exclusive:!0}]],[[re.T.POSITION,rt],[re.T.NORMAL,Ze],[re.T.UV0,rt]])},se.createTubeGeometry=function De(Ee,Ae,we,Be,Pe){we=we||10,Be=null==Be||Be,(0,$.hu)(Ee.length>1);const Ke=[],Ve=[];for(let Ne=0;Ne<we;Ne++){Ke.push([0,-Ne-1,-(Ne+1)%we-1]);const Ie=Ne/we*2*Math.PI;Ve.push([Math.cos(Ie)*Ae,Math.sin(Ie)*Ae])}return se.createPathExtrusionGeometry(Ve,Ee,[[0,0,0]],Ke,Be,Pe)},se.createPathExtrusionGeometry=function ve(Ee,Ae,we,Be,Pe,Oe=(0,x.f)(0,0,0)){const Ke=Ee.length,Ve=new Float32Array(Ae.length*Ke*3+(6*we.length||0)),Ne=new Float32Array(Ae.length*Ke*3+(we?6:0)),Ie=(Ae.length-1)*Ke*6+3*Be.length*2,We=new Uint32Array(Ie),Se=new Uint32Array(Ie);let He=0,$e=0,et=0,nt=0;const it=(0,x.c)(),Xe=(0,x.c)(),rt=(0,x.c)(),Ze=(0,x.c)(),lt=(0,x.c)(),st=(0,x.c)(),Mt=(0,x.c)(),Ft=(0,w.c)(),kt=(0,x.c)(),wt=(0,x.c)(),zt=(0,x.c)(),Zt=(0,x.c)(),ar=(0,x.c)(),Pr=(0,B.Ue)();(0,D.s)(kt,0,1,0),(0,D.b)(Xe,Ae[1],Ae[0]),(0,D.n)(Xe,Xe),Pe?((0,D.a)(Ft,Ae[0],Oe),(0,D.n)(rt,Ft)):(0,D.s)(rt,0,0,1),ze(Xe,rt,kt,kt,lt,rt,Z),(0,D.c)(Ze,rt),(0,D.c)(Zt,lt);for(let Xt=0;Xt<we.length;Xt++)(0,D.g)(st,lt,we[Xt][0]),(0,D.g)(Ft,rt,we[Xt][2]),(0,D.a)(st,st,Ft),(0,D.a)(st,st,Ae[0]),Ve[He++]=st[0],Ve[He++]=st[1],Ve[He++]=st[2];Ne[$e++]=-Xe[0],Ne[$e++]=-Xe[1],Ne[$e++]=-Xe[2];for(let Xt=0;Xt<Be.length;Xt++)We[et++]=Be[Xt][0]>0?Be[Xt][0]:-Be[Xt][0]-1+we.length,We[et++]=Be[Xt][1]>0?Be[Xt][1]:-Be[Xt][1]-1+we.length,We[et++]=Be[Xt][2]>0?Be[Xt][2]:-Be[Xt][2]-1+we.length,Se[nt++]=0,Se[nt++]=0,Se[nt++]=0;let kr=we.length;const ss=we.length-1;for(let Xt=0;Xt<Ae.length;Xt++){let _r=!1;Xt>0&&((0,D.c)(it,Xe),Xt<Ae.length-1?((0,D.b)(Xe,Ae[Xt+1],Ae[Xt]),(0,D.n)(Xe,Xe)):_r=!0,(0,D.a)(wt,it,Xe),(0,D.n)(wt,wt),(0,D.a)(zt,Ae[Xt-1],Ze),(0,B.Yq)(Ae[Xt],wt,Pr),(0,B.BR)(Pr,(0,U.re)(zt,it),Ft)?((0,D.b)(Ft,Ft,Ae[Xt]),(0,D.n)(rt,Ft),(0,D.f)(lt,wt,rt),(0,D.n)(lt,lt)):ze(wt,Ze,Zt,kt,lt,rt,Z),(0,D.c)(Ze,rt),(0,D.c)(Zt,lt)),Pe&&((0,D.a)(Ft,Ae[Xt],Oe),(0,D.n)(ar,Ft));for(let hr=0;hr<Ke;hr++)if((0,D.g)(st,lt,Ee[hr][0]),(0,D.g)(Ft,rt,Ee[hr][1]),(0,D.a)(st,st,Ft),(0,D.n)(Mt,st),Ne[$e++]=Mt[0],Ne[$e++]=Mt[1],Ne[$e++]=Mt[2],(0,D.a)(st,st,Ae[Xt]),Ve[He++]=st[0],Ve[He++]=st[1],Ve[He++]=st[2],!_r){const gr=(hr+1)%Ke;We[et++]=kr+hr,We[et++]=kr+Ke+hr,We[et++]=kr+gr,We[et++]=kr+gr,We[et++]=kr+Ke+hr,We[et++]=kr+Ke+gr;for(let vr=0;vr<6;vr++)Se[nt++]=We[et-6+vr]-ss}kr+=Ke}const os=Ae[Ae.length-1];for(let Xt=0;Xt<we.length;Xt++)(0,D.g)(st,lt,we[Xt][0]),(0,D.g)(Ft,rt,we[Xt][1]),(0,D.a)(st,st,Ft),(0,D.a)(st,st,os),Ve[He++]=st[0],Ve[He++]=st[1],Ve[He++]=st[2];const Hr=$e/3;Ne[$e++]=Xe[0],Ne[$e++]=Xe[1],Ne[$e++]=Xe[2];const pt=kr-Ke;for(let Xt=0;Xt<Be.length;Xt++)We[et++]=Be[Xt][0]>=0?kr+Be[Xt][0]:-Be[Xt][0]-1+pt,We[et++]=Be[Xt][2]>=0?kr+Be[Xt][2]:-Be[Xt][2]-1+pt,We[et++]=Be[Xt][1]>=0?kr+Be[Xt][1]:-Be[Xt][1]-1+pt,Se[nt++]=Hr,Se[nt++]=Hr,Se[nt++]=Hr;return new H.Z([[re.T.POSITION,{size:3,data:Ve,exclusive:!0}],[re.T.NORMAL,{size:3,data:Ne,exclusive:!0}]],[[re.T.POSITION,We],[re.T.NORMAL,Se]])},se.createPolylineGeometry=function Ce(Ee,Ae,we){(0,$.hu)(Ee.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,$.hu)(3===Ee[0].length,"createPolylineGeometry(): malformed vertex"),(0,$.hu)(null==Ae||Ae.length===Ee.length,"createPolylineGeometry: need same number of points and normals"),(0,$.hu)(null==Ae||3===Ae[0].length,"createPolylineGeometry(): malformed normal");const Be=new Float64Array(3*Ee.length),Pe=new Uint32Array(2*(Ee.length-1));let Oe=0,Ke=0;for(let Ie=0;Ie<Ee.length;Ie++){for(let We=0;We<3;We++)Be[Oe++]=Ee[Ie][We];Ie>0&&(Pe[Ke++]=Ie-1,Pe[Ke++]=Ie)}const Ve=[],Ne=[];if(Ve.push([re.T.POSITION,Pe]),Ne.push([re.T.POSITION,{size:3,data:Be,exclusive:!0}]),Ae){const Ie=new Float32Array(3*Ae.length);let We=0;for(let Se=0;Se<Ee.length;Se++)for(let He=0;He<3;He++)Ie[We++]=Ae[Se][He];Ve.push([re.T.NORMAL,Pe]),Ne.push([re.T.NORMAL,{size:3,data:Ie,exclusive:!0}])}return we&&(Ne.push([re.T.COLOR,{size:4,data:we}]),Ve.push([re.T.COLOR,(0,G.p)(we.length/4)])),new H.Z(Ne,Ve,W.MX.Line)},se.createExtrudedTriangle=function ge(Ee,Ae,we,Be,Pe=0){const Oe=new Array(18),Ke=[[-Ae,Pe,Be/2],[we,Pe,Be/2],[0,Ee+Pe,Be/2],[-Ae,Pe,-Be/2],[we,Pe,-Be/2],[0,Ee+Pe,-Be/2]],Ve=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]);for(let Ne=0;Ne<6;Ne++)Oe[3*Ne]=Ke[Ne][0],Oe[3*Ne+1]=Ke[Ne][1],Oe[3*Ne+2]=Ke[Ne][2];return new H.Z([[re.T.POSITION,{size:3,data:Oe,exclusive:!0}]],[[re.T.POSITION,Ve]])},se.transformInPlace=function Te(Ee,Ae){const we=Ee.getMutableAttribute(re.T.POSITION).data;for(let Be=0;Be<we.length;Be+=3)(0,D.s)(Q,we[Be],we[Be+1],we[Be+2]),(0,D.m)(Q,Q,Ae),we[Be]=Q[0],we[Be+1]=Q[1],we[Be+2]=Q[2]},se.cgToGIS=function Le(Ee,Ae=Ee){const we=Ee.vertexAttributes,Be=we.get(re.T.POSITION).data,Pe=we.get(re.T.NORMAL).data;if(Pe){const Oe=Ae.getMutableAttribute(re.T.NORMAL).data;for(let Ke=0;Ke<Pe.length;Ke+=3){const Ve=Pe[Ke+1];Oe[Ke+1]=-Pe[Ke+2],Oe[Ke+2]=Ve}}if(Be){const Oe=Ae.getMutableAttribute(re.T.POSITION).data;for(let Ke=0;Ke<Be.length;Ke+=3){const Ve=Be[Ke+1];Oe[Ke+1]=-Be[Ke+2],Oe[Ke+2]=Ve}}return Ae},se.makeOrthoBasisDirUp=je,se.makeOrthoBasisDirUpFallback=ze}(X||(X={}));const Z=.99619469809,Q=(0,x.c)(),J=X},57851:(qe,xe,T)=>{"use strict";T.d(xe,{C:()=>X});var D=T(62208),x=T(86236),w=T(43703),B=T(84161),U=T(28093),W=T(4794),Y=T(55915),H=T(42743),G=T(52107),$=T(30993),re=T(96867),ue=T(39782),ae=T(16396),oe=T(34103),ie=T(92222);class X{constructor(J,se=125e4){this._originSR=J,this._gridSize=se,this._origins=new Map,this._objects=new Map,this._rootOriginId="root/"+(0,x.D)()}getOrigin(J){const se=this._origins.get(this._rootOriginId);if(null==se){const he=ue.p.rootOrigin;if((0,D.pC)(he))return this._origins.set(this._rootOriginId,(0,$.al)(he[0],he[1],he[2],this._rootOriginId)),this.getOrigin(J);const ye=(0,$.al)(J[0]+Math.random()-.5,J[1]+Math.random()-.5,J[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,ye),ye}const ee=this._gridSize,le=Math.round(J[0]/ee),ne=Math.round(J[1]/ee),ce=Math.round(J[2]/ee),de=`${le}/${ne}/${ce}`;let me=this._origins.get(de);const _e=.5*ee;if((0,B.b)(Z,J,se.vec3),Z[0]=Math.abs(Z[0]),Z[1]=Math.abs(Z[1]),Z[2]=Math.abs(Z[2]),Z[0]<_e&&Z[1]<_e&&Z[2]<_e){if(me){const he=Math.max(...Z);if((0,B.b)(Z,J,me.vec3),Z[0]=Math.abs(Z[0]),Z[1]=Math.abs(Z[1]),Z[2]=Math.abs(Z[2]),Math.max(...Z)<he)return me}return se}return me||(me=(0,$.al)(le*ee,ne*ee,ce*ee,de),this._origins.set(de,me)),me}_drawOriginBox(J,se=(0,W.f)(1,1,0,1)){const ee=window.view,le=ee._stage,ne=se.toString();if(!this._objects.has(ne)){this._material=new ie.U({width:2,color:se}),le.add(this._material);const De=new oe.F({isPickable:!1}),ve=new re.T({castShadow:!1});le.add(ve),De.add(ve),le.add(De),this._objects.set(ne,ve)}const ce=this._objects.get(ne),de=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],me=de.length,_e=new Array(3*me),he=new Uint16Array(2*(me-1)),ye=.5*this._gridSize;for(let De=0;De<me;De++)_e[3*De+0]=J[0]+(1&de[De]?ye:-ye),_e[3*De+1]=J[1]+(2&de[De]?ye:-ye),_e[3*De+2]=J[2]+(4&de[De]?ye:-ye),De>0&&(he[2*De+0]=De-1,he[2*De+1]=De);(0,Y.CM)(_e,this._originSR,0,_e,ee.renderSpatialReference,0,me);const fe=new G.Z([[ae.T.POSITION,{size:3,data:_e,exclusive:!0}]],[[ae.T.POSITION,he]],H.MX.Line);le.add(fe),ce.addGeometry(fe,this._material,w.I)}}const Z=(0,U.c)()},62483:(qe,xe,T)=>{"use strict";T.d(xe,{LP:()=>se,Z8:()=>X,vh:()=>oe});var D=T(62208),x=T(28347),w=T(43703),B=T(84161),U=T(28093),W=T(993),Y=T(4794),H=T(70562),G=T(59617),$=T(67857),re=T(91480),ue=T(40841),ae=T(65073);const oe=1e-5;class ie{constructor(ce){this.options=new $.om,this._results=new Z,this.transform=new ue.yn,this.tolerance=oe,this.verticalOffset=null,this._ray=(0,H.Ue)(),this._rayEnd=(0,U.c)(),this._rayBeginTransformed=(0,U.c)(),this._rayEndTransformed=(0,U.c)(),this.viewingMode=ce??G.JY.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(ce,de,me){this.resetWithRay((0,H.zk)(ce,de,this._ray),me)}resetWithRay(ce,de){this.camera=de,ce!==this._ray&&(0,H.JG)(ce,this._ray),0!==this.options.verticalOffset?this.viewingMode===G.JY.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,B.a)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(ce=null,de,me,_e,he){this.point=de,this.filterPredicate=_e,this.tolerance=me??oe;const ye=(0,ue.W9)(this.verticalOffset);if((0,D.pC)(ce)&&ce.length>0){const fe=he?De=>{he(De)&&this.intersectObject(De)}:De=>{this.intersectObject(De)};for(const De of ce){const ve=De.getSpatialQueryAccelerator&&De.getSpatialQueryAccelerator();(0,D.pC)(ve)?((0,D.pC)(ye)?ve.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,fe,ye):ve.forEachAlongRay(this._ray.origin,this._ray.direction,fe),this.options.selectionMode&&this.options.hud&&ve.forEachDegenerateObject(fe)):De.objects.forAll(Ce=>fe(Ce))}}this.sortResults()}intersectObject(ce){const de=ce.geometryRecords;if(!de)return;const me=ce.transformation,_e=(0,ue.W9)(this.verticalOffset);for(const he of de){const{geometry:ye,material:fe,instanceParameters:De}=he;if((0,ae.PD)(De))continue;const ve=ye.id;this.transform.setAndInvalidateLazyTransforms(me,he.getShaderTransformation()),(0,B.m)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,B.m)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const Ce=this.transform.transform;(0,D.pC)(_e)&&(_e.objectTransform=this.transform),fe.intersect(ye,De,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(ge,Te,Le,je,ze,Ee)=>{if(ge>=0){if((0,D.pC)(this.filterPredicate)&&!this.filterPredicate(this._ray.origin,this._rayEnd,ge))return;const Ae=je?this._results.hud:this._results,we=je?Be=>{const Pe={object:ce,geometryId:ve,triangleNr:Le,center:(0,D.pC)(Ee)?[Ee[0],Ee[1],Ee[2]]:null};Be.set($.q7.HUD,Pe,ge,Te,w.I,ze)}:Be=>Be.set($.q7.OBJECT,{object:ce,geometryId:ve,triangleNr:Le},ge,Te,Ce,ze);if((null==Ae.min.drapedLayerOrder||ze>=Ae.min.drapedLayerOrder)&&(null==Ae.min.dist||ge<Ae.min.dist)&&we(Ae.min),this.options.store!==$.eC.MIN&&(null==Ae.max.drapedLayerOrder||ze<Ae.max.drapedLayerOrder)&&(null==Ae.max.dist||ge>Ae.max.dist)&&we(Ae.max),this.options.store===$.eC.ALL)if(je){const Be=new J(this._ray);we(Be),this._results.hud.all.push(Be)}else{const Be=new Q(this._ray);we(Be),this._results.all.push(Be)}}},he.shaderTransformation)}}sortResults(ce=this._results.all){ce.sort((de,me)=>de.dist!==me.dist?(0,D.Pt)(de.dist,0)-(0,D.Pt)(me.dist,0):de.drapedLayerOrder!==me.drapedLayerOrder?(0,D.Pt)(de.drapedLayerOrder,Number.MAX_VALUE)-(0,D.Pt)(me.drapedLayerOrder,Number.MAX_VALUE):(0,D.Pt)(me.drapedLayerGraphicOrder,Number.MIN_VALUE)-(0,D.Pt)(de.drapedLayerGraphicOrder,Number.MIN_VALUE))}}function X(ne){return new ie(ne)}class Z{constructor(){this.min=new Q((0,H.Ue)()),this.max=new Q((0,H.Ue)()),this.hud={min:new J((0,H.Ue)()),max:new J((0,H.Ue)()),all:new Array},this.ground=new Q((0,H.Ue)()),this.all=[]}init(ce){this.min.init(ce),this.max.init(ce),this.ground.init(ce),this.all.length=0,this.hud.min.init(ce),this.hud.max.init(ce),this.hud.all.length=0}}class Q{constructor(ce){this.intersector=$.q7.OBJECT,this.normal=(0,U.c)(),this.transformation=(0,w.c)(),this._ray=(0,H.Ue)(),this.init(ce)}get ray(){return this._ray}get distanceInRenderSpace(){return(0,D.pC)(this.dist)?((0,B.g)(ee,this.ray.direction,this.dist),(0,B.l)(ee)):null}getIntersectionPoint(ce){return!!(0,re.nn)(this)&&((0,B.g)(ee,this.ray.direction,this.dist),(0,B.a)(ce,this.ray.origin,ee),!0)}getTransformedNormal(ce){return(0,B.c)(le,this.normal),le[3]=0,(0,W.t)(le,le,this.transformation),(0,B.c)(ce,le),(0,B.n)(ce,ce)}init(ce){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=$.q7.OBJECT,(0,H.JG)(ce,this._ray)}set(ce,de,me,_e,he,ye,fe){this.intersector=ce,this.dist=me,(0,B.c)(this.normal,(0,D.Pt)(_e,U.U)),(0,x.c)(this.transformation,(0,D.Pt)(he,w.I)),this.target=de,this.drapedLayerOrder=ye,this.drapedLayerGraphicOrder=fe}copy(ce){(0,H.JG)(ce.ray,this._ray),this.intersector=ce.intersector,this.dist=ce.dist,this.target=ce.target,this.drapedLayerOrder=ce.drapedLayerOrder,this.drapedLayerGraphicOrder=ce.drapedLayerGraphicOrder,(0,B.c)(this.normal,ce.normal),(0,x.c)(this.transformation,ce.transformation)}}class J extends Q{constructor(){super(...arguments),this.intersector=$.q7.HUD}}function se(ne){return new Q(ne)}const ee=(0,U.c)(),le=(0,Y.c)()},67857:(qe,xe,T)=>{"use strict";var D,x,B;T.d(xe,{eC:()=>x,om:()=>w,q7:()=>D}),(B=D||(D={}))[B.OBJECT=0]="OBJECT",B[B.HUD=1]="HUD",B[B.TERRAIN=2]="TERRAIN",B[B.OVERLAY=3]="OVERLAY",B[B.I3S=4]="I3S",B[B.PCL=5]="PCL",B[B.LOD=6]="LOD",B[B.VOXEL=7]="VOXEL";class w{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.store=x.ALL}}!function(B){B[B.MIN=0]="MIN",B[B.MINMAX=1]="MINMAX",B[B.ALL=2]="ALL"}(x||(x={}))},30993:(qe,xe,T)=>{"use strict";T.d(xe,{al:()=>B});var D=T(28093);class x{constructor(W,Y){this.vec3=W,this.id=Y}}function B(U,W,Y,H){return new x((0,D.f)(U,W,Y),H)}},40723:(qe,xe,T)=>{"use strict";T.d(xe,{F5:()=>Y,Mt:()=>G,yD:()=>H});var H,$,D=T(62208),x=T(17625),w=T(12699),B=T(24425),U=T(39114),W=T(57623);class Y extends w.c{constructor(re,ue){super(),this.type=B.U.Material,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=U.i,this._parameters=(0,W.Uf)(re,ue),this.validateParameters(this._parameters)}dispose(){}get parameters(){return this._parameters}update(re){return!1}setParameters(re,ue=!0){(0,W.LO)(this._parameters,re)&&(this.validateParameters(this._parameters),ue&&this.parametersChanged())}validateParameters(re){}get visible(){return this._visible}set visible(re){re!==this._visible&&(this._visible=re,this.parametersChanged())}shouldRender(re){return this.isVisible()&&this.isVisibleInPass(re.pass)&&0!=(this.renderOccluded&re.renderOccludedMask)}isVisibleInPass(re){return!0}get renderOccluded(){return this.parameters.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(re){re!==this._renderPriority&&(this._renderPriority=re,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(re){re!==this._insertOrder&&(this._insertOrder=re,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){(0,D.pC)(this.repository)&&this.repository.materialChanged(this)}}($=H||(H={}))[$.Occlude=1]="Occlude",$[$.Transparent=2]="Transparent",$[$.OccludeAndTransparent=4]="OccludeAndTransparent",$[$.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil",$[$.Opaque=16]="Opaque";class G extends x.K{constructor(){super(...arguments),this.renderOccluded=H.Occlude}}},54840:(qe,xe,T)=>{"use strict";var D,x,w,B;T.d(xe,{$:()=>D}),(w=(x=D||(D={})).Geometry||(x.Geometry={}))[w.ADD=1]="ADD",w[w.UPDATE=2]="UPDATE",w[w.REMOVE=4]="REMOVE",(B=x.State||(x.State={}))[B.VISIBILITIES=1]="VISIBILITIES",B[B.VERTEXATTRS=2]="VERTEXATTRS",B[B.TRANSFORMATION=4]="TRANSFORMATION",B[B.HIGHLIGHTS=8]="HIGHLIGHTS",B[B.OCCLUDEES=16]="OCCLUDEES"},96867:(qe,xe,T)=>{"use strict";T.d(xe,{T:()=>ie});var D=T(62208),x=T(28347),w=T(43703),B=T(84161),U=T(28093),W=T(97126),Y=T(98943),H=T(42743),G=T(12699),$=T(24425),re=T(24260),ue=T(7167),ae=T(2282),oe=T(65073);class ie extends G.c{constructor(J={}){super(),this.type=$.U.Object,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=(0,w.c)(),this._bvObjectSpace=new Z,this._bvWorldSpace=new Z,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==J.castShadow||J.castShadow,this.metadata=J.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new X),this.transformation=(0,w.c)();const{geometries:se,materials:ee,transformations:le,origins:ne}=J;if(Array.isArray(se)){(0,ae.hu)(ee.length===se.length,"Object3D: materials don't match geometries"),(0,ae.hu)(le.length===se.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=se.length,this._geometries.length=se.length;for(let ce=0;ce<se.length;ce++)this._geometries[ce]=se[ce],this._geometryRecords[ce]=re.k.pool.acquire(se[ce],ee[ce],(0,w.b)(le[ce]),{highlights:null,occludees:null,visible:this._visible},ne&&ne[ce])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(J){(0,x.c)(this._objectTransformation,J),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(J){(0,ae.hu)(null==this._parentLayer||null==J,"Object3D can only be added to a single Layer"),this._parentLayer=J}addGeometry(J,se,ee,le,ne){ee=ee||w.I,this._geometries.push(J);const ce=re.k.pool.acquire(J,se,ee,{highlights:null,occludees:null,visible:this._visible},le,ne);return this._geometryRecords.push(ce),this._hasVolatileTransformation=this._hasVolatileTransformation||(0,D.pC)(ce.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:ce}),this._invalidateBoundingVolume(),ce}removeGeometry(J){const se=this._geometryRecords.splice(J,1)[0];return this._hasVolatileTransformation=(0,D.pC)(se.shaderTransformation)?this._geometryRecords.some(ee=>(0,D.pC)(ee.shaderTransformation)):this._hasVolatileTransformation,se.dispose(),this._geometries.splice(J,1),this._emit("objectGeometryRemoved",{object:this,record:se}),this._invalidateBoundingVolume(),se}removeAllGeometries(){for(;this.geometryRecords.length>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(J){this._emit("vertexAttrsUpdated",{object:this,record:J}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(J){if(this._visible!==J){this._visible=J;for(const se of this._geometryRecords)se.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const J=new ue.O(H.V_.MaskOccludee);for(const se of this._geometryRecords)se.instanceParameters.occludees=(0,oe.lr)(se.instanceParameters.occludees,J);return this._emit("occlusionChanged",this),J}removeOcclude(J){for(const se of this._geometryRecords)se.instanceParameters.occludees=(0,oe.U_)(se.instanceParameters.occludees,J);this._emit("occlusionChanged",this)}highlight(){const J=new ue.O(H.V_.Highlight);for(const se of this._geometryRecords)se.instanceParameters.highlights=(0,oe.lr)(se.instanceParameters.highlights,J);return this._emit("highlightChanged",this),J}removeHighlight(J){for(const se of this._geometryRecords)se.instanceParameters.highlights=(0,oe.U_)(se.instanceParameters.highlights,J);this._emit("highlightChanged",this)}getCombinedStaticTransformation(J,se){return(0,x.m)((0,D.Pt)(se,(0,w.c)()),this.transformation,J.getStaticTransformation())}_getCombinedShaderTransformation(J,se){return se=se||(0,w.c)(),(0,x.m)(se,this.transformation,J.getShaderTransformation()),se}hasVolativeTransformation(){return this._hasVolatileTransformation}get boundingVolumeWorldSpace(){return this._validateBoundingVolume(),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._validateBoundingVolume(),this._bvObjectSpace}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let le=0;le<this._geometryRecords.length;++le){const ce=this._geometryRecords[le],de=this._geometries[le].boundingInfo;(0,D.pC)(de)&&(this._calculateTransformedBoundingVolume(de,this._bvObjectSpace,ce.getShaderTransformation()),this._calculateTransformedBoundingVolume(de,this._bvWorldSpace,this._getCombinedShaderTransformation(ce)))}(0,B.h)(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5),(0,B.h)(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);const J=(0,U.c)(),se=(0,U.c)(),ee=(0,Y.u1)(this.transformation);for(let le=0;le<this._geometryRecords.length;++le){const ne=this._geometries[le].boundingInfo;if((0,D.Wi)(ne))continue;const ce=this._geometryRecords[le].getShaderTransformation(),de=(0,Y.u1)(ce);(0,B.m)(J,ne.getCenter(),ce);const me=(0,B.i)(J,this._bvObjectSpace.bounds),_e=ne.getBSRadius()*de;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],me+_e),(0,B.m)(se,J,this.transformation);const he=(0,B.i)(se,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],he+_e*ee)}this._bvDirty=!1}_calculateTransformedBoundingVolume(J,se,ee){const le=J.getBBMin(),ne=J.getBBMax(),ce=(0,U.a)(le),de=(0,U.a)(ne);(0,B.m)(ce,ce,ee),(0,B.m)(de,de,ee);for(let me=0;me<3;++me)se.min[me]=Math.min(se.min[me],ce[me],de[me]),se.max[me]=Math.max(se.max[me],ce[me],de[me]);for(let me=0;me<3;++me){(0,B.c)(ce,le),(0,B.c)(de,ne),ce[me]=ne[me],de[me]=le[me],(0,B.m)(ce,ce,ee),(0,B.m)(de,de,ee);for(let _e=0;_e<3;++_e)se.min[_e]=Math.min(se.min[_e],ce[_e],de[_e]),se.max[_e]=Math.max(se.max[_e],ce[_e],de[_e])}}_invalidateBoundingVolume(){this._bvDirty=!0,(0,D.pC)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(J,se){(0,D.pC)(this._parentLayer)&&this._parentLayer.events.emit(J,se)}get test(){const J=this;return{hasGeometry:se=>J._geometries.includes(se),getGeometryIndex:se=>J._geometries.indexOf(se)}}}class X{constructor(){this.min=(0,U.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,U.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class Z extends X{constructor(){super(...arguments),this.bounds=(0,W.c)()}init(){(0,B.s)(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),(0,B.s)(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),(0,W.a)(this.bounds)}}},7167:(qe,xe,T)=>{"use strict";T.d(xe,{O:()=>x});var D=T(86236);class x{constructor(B){this.channel=B,this.id=(0,D.D)()}}},82274:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>je});var ze,Ee,D=T(62208),x=T(27899),w=T(77029),B=T(84161),U=T(28093),W=T(8834),Y=T(70562),H=T(97126),G=T(2282);class ${constructor(Ee,Ae){this._objectToBoundingSphere=Ee,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new re,this._objectCount=0,Ae&&(void 0!==Ae.maximumObjectsPerNode&&(this._maximumObjectsPerNode=Ae.maximumObjectsPerNode),void 0!==Ae.maximumDepth&&(this._maximumDepth=Ae.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),re.clearPool(),ne[0]=null,ye.prune(),Te.prune()}add(Ee,Ae=Ee.length){this._objectCount+=Ae,this._grow(Ee,Ae);const we=re.acquire();for(let Be=0;Be<Ae;Be++){const Pe=Ee[Be];this._isDegenerate(Pe)?this._degenerateObjects.add(Pe):(we.init(this._root),this._add(Pe,we))}re.release(we)}remove(Ee,Ae=null){this._objectCount-=Ee.length;const we=re.acquire();for(const Be of Ee){const Pe=(0,D.pC)(Ae)?Ae:(0,H.b)(this._objectToBoundingSphere(Be),fe);J(Pe[3])?(we.init(this._root),this._remove(Be,Pe,we)):this._degenerateObjects.delete(Be)}re.release(we),this._shrink()}update(Ee,Ae){if(!J(Ae[3])&&this._isDegenerate(Ee))return;const we=function ce(ze){return ne[0]=ze,ne}(Ee);this.remove(we,Ae),this.add(we)}forEachAlongRay(Ee,Ae,we){const Be=(0,Y.re)(Ee,Ae);this._forEachNode(this._root,Pe=>{if(!this._intersectsNode(Be,Pe))return!1;const Oe=Pe.node;return Oe.terminals.forAll(Ke=>{this._intersectsObject(Be,Ke)&&we(Ke)}),null!==Oe.residents&&Oe.residents.forAll(Ke=>{this._intersectsObject(Be,Ke)&&we(Ke)}),!0})}forEachAlongRayWithVerticalOffset(Ee,Ae,we,Be){const Pe=(0,Y.re)(Ee,Ae);this._forEachNode(this._root,Oe=>{if(!this._intersectsNodeWithOffset(Pe,Oe,Be))return!1;const Ke=Oe.node;return Ke.terminals.forAll(Ve=>{this._intersectsObjectWithOffset(Pe,Ve,Be)&&we(Ve)}),null!==Ke.residents&&Ke.residents.forAll(Ve=>{this._intersectsObjectWithOffset(Pe,Ve,Be)&&we(Ve)}),!0})}forEach(Ee){this._forEachNode(this._root,Ae=>{const we=Ae.node;return we.terminals.forAll(Ee),null!==we.residents&&we.residents.forAll(Ee),!0}),this._degenerateObjects.forEach(Ee)}forEachDegenerateObject(Ee){this._degenerateObjects.forEach(Ee)}findClosest(Ee,Ae,we,Be=(()=>!0),Pe=1/0){let Oe=1/0,Ke=1/0,Ve=null;const Ne=Z(Ee,Ae),Ie=We=>{if(--Pe,!Be(We))return;const Se=this._objectToBoundingSphere(We);if(!(0,W.hr)(we,Se))return;const He=Q(Ee,Ae,(0,H.g)(Se)),$e=He-Se[3];$e<Oe&&(Oe=$e,Ke=He+Se[3],Ve=We)};return this._forEachNodeDepthOrdered(this._root,We=>{if(Pe<=0||!(0,W.hr)(we,We.bounds)||((0,B.g)(me,Ne,We.halfSize),(0,B.a)(me,me,We.bounds),Q(Ee,Ae,me)>Ke))return!1;const Se=We.node;return Se.terminals.forAll(He=>Ie(He)),null!==Se.residents&&Se.residents.forAll(He=>Ie(He)),!0},Ee,Ae),Ve}forEachInDepthRange(Ee,Ae,we,Be,Pe,Oe,Ke){let Ve=-1/0,Ne=1/0;const Ie={setRange:et=>{we===$.DepthOrder.FRONT_TO_BACK?(Ve=Math.max(Ve,et.near),Ne=Math.min(Ne,et.far)):(Ve=Math.max(Ve,-et.far),Ne=Math.min(Ne,-et.near))}};Ie.setRange(Be);const We=Q(Ae,we,Ee),Se=Z(Ae,we),He=Z(Ae,-we),$e=et=>{if(!Ke(et))return;const nt=this._objectToBoundingSphere(et),it=(0,H.g)(nt),Xe=Q(Ae,we,it)-We;Xe-nt[3]>Ne||Xe+nt[3]<Ve||!(0,W.hr)(Oe,nt)||Pe(et,Ie)};this._forEachNodeDepthOrdered(this._root,et=>{if(!(0,W.hr)(Oe,et.bounds)||((0,B.g)(me,Se,et.halfSize),(0,B.a)(me,me,et.bounds),Q(Ae,we,me)-We>Ne)||((0,B.g)(me,He,et.halfSize),(0,B.a)(me,me,et.bounds),Q(Ae,we,me)-We<Ve))return!1;const nt=et.node;return nt.terminals.forAll(it=>$e(it)),null!==nt.residents&&nt.residents.forAll(it=>$e(it)),!0},Ae,we)}forEachNode(Ee){this._forEachNode(this._root,Ae=>Ee(Ae.node,Ae.bounds,Ae.halfSize))}forEachNeighbor(Ee,Ae){const we=(0,H.d)(Ae),Be=(0,H.g)(Ae),Pe=Oe=>{const Ke=this._objectToBoundingSphere(Oe),Ve=(0,H.d)(Ke),Ne=we+Ve;(0,B.d)((0,H.g)(Ke),Be)-Ne*Ne<=0&&Ee(Oe)};this._forEachNode(this._root,Oe=>{const Ke=(0,H.d)(Oe.bounds),Ve=we+Ke;if((0,B.d)((0,H.g)(Oe.bounds),Be)-Ve*Ve>0)return!1;const Ne=Oe.node;return Ne.terminals.forAll(Ie=>Pe(Ie)),null!==Ne.residents&&Ne.residents.forAll(Ie=>Pe(Ie)),!0}),this.forEachDegenerateObject(Pe)}_intersectsNode(Ee,Ae){return oe(Ae.bounds,2*-Ae.halfSize,_e),oe(Ae.bounds,2*Ae.halfSize,he),(0,G.yK)(Ee.origin,Ee.direction,_e,he)}_intersectsNodeWithOffset(Ee,Ae,we){return oe(Ae.bounds,2*-Ae.halfSize,_e),oe(Ae.bounds,2*Ae.halfSize,he),we.applyToMinMax(_e,he),(0,G.yK)(Ee.origin,Ee.direction,_e,he)}_intersectsObject(Ee,Ae){const we=this._objectToBoundingSphere(Ae);return!(we[3]>0)||(0,H.i)(we,Ee)}_intersectsObjectWithOffset(Ee,Ae,we){const Be=this._objectToBoundingSphere(Ae);return!(Be[3]>0)||(0,H.i)(we.applyToBoundingSphere(Be),Ee)}_forEachNode(Ee,Ae){let we=re.acquire().init(Ee);const Be=[we];for(;0!==Be.length;){if(we=Be.pop(),Ae(we)&&!we.isLeaf())for(let Pe=0;Pe<we.node.children.length;Pe++)we.node.children[Pe]&&Be.push(re.acquire().init(we).advance(Pe));re.release(we)}}_forEachNodeDepthOrdered(Ee,Ae,we,Be=$.DepthOrder.FRONT_TO_BACK){let Pe=re.acquire().init(Ee);const Oe=[Pe];for(function X(ze,Ee,Ae){if(!Te.length)for(let we=0;we<8;++we)Te.push({index:0,distance:0});for(let we=0;we<8;++we){const Be=se[we];Te.data[we].index=we,Te.data[we].distance=Q(ze,Ee,Be)}Te.sort((we,Be)=>we.distance-Be.distance);for(let we=0;we<8;++we)Ae[we]=Te.data[we].index}(we,Be,Le);0!==Oe.length;){if(Pe=Oe.pop(),Ae(Pe)&&!Pe.isLeaf())for(let Ke=7;Ke>=0;--Ke){const Ve=Le[Ke];Pe.node.children[Ve]&&Oe.push(re.acquire().init(Pe).advance(Ve))}re.release(Pe)}}_remove(Ee,Ae,we){ye.clear();const Be=we.advanceTo(Ae,(Pe,Oe)=>{ye.push(Pe.node),ye.push(Oe)})?we.node.terminals:we.node.residents;if(Be.removeUnordered(Ee),0===Be.length)for(let Pe=ye.length-2;Pe>=0&&this._purge(ye.data[Pe],ye.data[Pe+1]);Pe-=2);}_nodeIsEmpty(Ee){if(0!==Ee.terminals.length)return!1;if(null!==Ee.residents)return 0===Ee.residents.length;for(let Ae=0;Ae<Ee.children.length;Ae++)if(Ee.children[Ae])return!1;return!0}_purge(Ee,Ae){return Ae>=0&&(Ee.children[Ae]=null),!!this._nodeIsEmpty(Ee)&&(null===Ee.residents&&(Ee.residents=new w.Z({shrink:!0})),!0)}_add(Ee,Ae){Ae.advanceTo(this._objectToBoundingSphere(Ee))?Ae.node.terminals.push(Ee):(Ae.node.residents.push(Ee),Ae.node.residents.length>this._maximumObjectsPerNode&&Ae.depth<this._maximumDepth&&this._split(Ae))}_split(Ee){const Ae=Ee.node.residents;Ee.node.residents=null;for(let we=0;we<Ae.length;we++){const Be=re.acquire().init(Ee);this._add(Ae.getItemAt(we),Be),re.release(Be)}}_grow(Ee,Ae){if(0!==Ae&&(ie(Ee,Ae,we=>this._objectToBoundingSphere(we),De),J(De[3])&&!this._fitsInsideTree(De)))if(this._nodeIsEmpty(this._root.node))(0,H.b)(De,this._root.bounds),this._root.halfSize=1.25*De[3];else{const we=this._rootBoundsForRootAsSubNode(De);this._placingRootViolatesMaxDepth(we)?this._rebuildTree(De,we):this._growRootAsSubNode(we),re.release(we)}}_rebuildTree(Ee,Ae){(0,B.c)(ve,Ae.bounds),ve[3]=Ae.halfSize,ie([Ee,ve],2,Be=>Be,Ce);const we=re.acquire().init(this._root);this._root.initFrom(null,Ce,1.25*Ce[3]),this._forEachNode(we,Be=>(this.add(Be.node.terminals.data,Be.node.terminals.length),null!==Be.node.residents&&this.add(Be.node.residents.data,Be.node.residents.length),!0)),re.release(we)}_placingRootViolatesMaxDepth(Ee){const Ae=Math.log(Ee.halfSize/this._root.halfSize)*Math.LOG2E;let we=0;return this._forEachNode(this._root,Be=>(we=Math.max(we,Be.depth),we+Ae<=this._maximumDepth)),we+Ae>this._maximumDepth}_rootBoundsForRootAsSubNode(Ee){const Ae=Ee[3],we=Ee;let Be=-1/0;const Pe=this._root.bounds,Oe=this._root.halfSize;for(let Ke=0;Ke<3;Ke++){const Ne=we[Ke]+Ae-(Pe[Ke]+Oe),Ie=Math.max(0,Math.ceil((Pe[Ke]-Oe-(we[Ke]-Ae))/(2*Oe))),We=Math.max(0,Math.ceil(Ne/(2*Oe)))+1,Se=2**Math.ceil(Math.log(Ie+We)*Math.LOG2E);Be=Math.max(Be,Se),ge[Ke].min=Ie,ge[Ke].max=We}for(let Ke=0;Ke<3;Ke++){let Ve=ge[Ke].min,Ne=ge[Ke].max;const Ie=(Be-(Ve+Ne))/2;Ve+=Math.ceil(Ie),Ne+=Math.floor(Ie),de[Ke]=Pe[Ke]-Oe-Ve*Oe*2+(Ne+Ve)*Oe}return de[3]=Be*Oe*le,re.acquire().initFrom(null,de,Be*Oe,0)}_growRootAsSubNode(Ee){const Ae=this._root.node;(0,B.c)(De,this._root.bounds),De[3]=this._root.halfSize,this._root.init(Ee),Ee.advanceTo(De,null,!0),Ee.node.children=Ae.children,Ee.node.residents=Ae.residents,Ee.node.terminals=Ae.terminals}_shrink(){for(;;){const Ee=this._findShrinkIndex();if(-1===Ee)break;this._root.advance(Ee),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let Ee=null;const Ae=this._root.node.children;let we=0,Be=0;for(;Be<Ae.length&&null==Ee;)we=Be++,Ee=Ae[we];for(;Be<Ae.length;)if(Ae[Be++])return-1;return we}_isDegenerate(Ee){return!J(this._objectToBoundingSphere(Ee)[3])}_fitsInsideTree(Ee){const Ae=this._root.bounds,we=this._root.halfSize;return Ee[3]<=we&&Ee[0]>=Ae[0]-we&&Ee[0]<=Ae[0]+we&&Ee[1]>=Ae[1]-we&&Ee[1]<=Ae[1]+we&&Ee[2]>=Ae[2]-we&&Ee[2]<=Ae[2]+we}}class re{constructor(){this.bounds=(0,H.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(Ee){return this.initFrom(Ee.node,Ee.bounds,Ee.halfSize,Ee.depth)}initFrom(Ee,Ae,we,Be=this.depth){return this.node=(0,D.pC)(Ee)?Ee:re.createEmptyNode(),(0,D.pC)(Ae)&&(0,H.b)(Ae,this.bounds),this.halfSize=we,this.depth=Be,this}advance(Ee){let Ae=this.node.children[Ee];Ae||(Ae=re.createEmptyNode(),this.node.children[Ee]=Ae),this.node=Ae,this.halfSize/=2,this.depth++;const we=se[Ee];return this.bounds[0]+=we[0]*this.halfSize,this.bounds[1]+=we[1]*this.halfSize,this.bounds[2]+=we[2]*this.halfSize,this.bounds[3]=this.halfSize*le,this}advanceTo(Ee,Ae,we=!1){for(;;){if(this.isTerminalFor(Ee))return Ae&&Ae(this,-1),!0;if(this.isLeaf()){if(!we)return Ae&&Ae(this,-1),!1;this.node.residents=null}const Be=this._childIndex(Ee);Ae&&Ae(this,Be),this.advance(Be)}}isLeaf(){return null!=this.node.residents}isTerminalFor(Ee){return Ee[3]>this.halfSize/2}_childIndex(Ee){const Ae=this.bounds;return(Ae[0]<Ee[0]?1:0)+(Ae[1]<Ee[1]?2:0)+(Ae[2]<Ee[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new w.Z({shrink:!0}),residents:new w.Z({shrink:!0})}}static acquire(){return re._pool.acquire()}static release(Ee){re._pool.release(Ee)}static clearPool(){re._pool.prune()}}function ue(ze,Ee){ze[0]=Math.min(ze[0],Ee[0]-Ee[3]),ze[1]=Math.min(ze[1],Ee[1]-Ee[3]),ze[2]=Math.min(ze[2],Ee[2]-Ee[3])}function ae(ze,Ee){ze[0]=Math.max(ze[0],Ee[0]+Ee[3]),ze[1]=Math.max(ze[1],Ee[1]+Ee[3]),ze[2]=Math.max(ze[2],Ee[2]+Ee[3])}function oe(ze,Ee,Ae){Ae[0]=ze[0]+Ee,Ae[1]=ze[1]+Ee,Ae[2]=ze[2]+Ee}function ie(ze,Ee,Ae,we){if(1===Ee){const Be=Ae(ze[0]);(0,H.b)(Be,we)}else{_e[0]=1/0,_e[1]=1/0,_e[2]=1/0,he[0]=-1/0,he[1]=-1/0,he[2]=-1/0;for(let Be=0;Be<Ee;Be++){const Pe=Ae(ze[Be]);J(Pe[3])&&(ue(_e,Pe),ae(he,Pe))}(0,B.h)(we,_e,he,.5),we[3]=Math.max(he[0]-_e[0],he[1]-_e[1],he[2]-_e[2])/2}}function Z(ze,Ee){let Ae=1/0,we=null;for(let Be=0;Be<8;++Be){const Pe=Q(ze,Ee,ee[Be]);Pe<Ae&&(Ae=Pe,we=ee[Be])}return we}function Q(ze,Ee,Ae){return Ee*(ze[0]*Ae[0]+ze[1]*Ae[1]+ze[2]*Ae[2])}function J(ze){return!isNaN(ze)&&ze!==-1/0&&ze!==1/0&&ze>0}re._pool=new x.Z(re),(Ee=(ze=$||($={})).DepthOrder||(ze.DepthOrder={}))[Ee.FRONT_TO_BACK=1]="FRONT_TO_BACK",Ee[Ee.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const se=[(0,U.f)(-1,-1,-1),(0,U.f)(1,-1,-1),(0,U.f)(-1,1,-1),(0,U.f)(1,1,-1),(0,U.f)(-1,-1,1),(0,U.f)(1,-1,1),(0,U.f)(-1,1,1),(0,U.f)(1,1,1)],ee=[(0,U.f)(-1,-1,-1),(0,U.f)(-1,-1,1),(0,U.f)(-1,1,-1),(0,U.f)(-1,1,1),(0,U.f)(1,-1,-1),(0,U.f)(1,-1,1),(0,U.f)(1,1,-1),(0,U.f)(1,1,1)],le=Math.sqrt(3),ne=[null],de=(0,H.c)(),me=(0,U.c)(),_e=(0,U.c)(),he=(0,U.c)(),ye=new w.Z,fe=(0,H.c)(),De=(0,H.c)(),ve=(0,H.c)(),Ce=(0,H.c)(),ge=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],Te=new w.Z,Le=[0,0,0,0,0,0,0,0],je=$},88569:(qe,xe,T)=>{"use strict";T.d(xe,{Bh:()=>ue,E0:()=>$,IB:()=>W,K5:()=>H,j7:()=>Y,je:()=>re,ve:()=>G,wu:()=>B});var D=T(42743),x=T(67969),w=T(2078);const B=(0,w.wK)(x.zi.SRC_ALPHA,x.zi.ONE,x.zi.ONE_MINUS_SRC_ALPHA,x.zi.ONE_MINUS_SRC_ALPHA),U=(0,w.if)(x.zi.ONE,x.zi.ONE),W=(0,w.if)(x.zi.ZERO,x.zi.ONE_MINUS_SRC_ALPHA);function Y(ae){return ae===D.Am.FrontFace?null:ae===D.Am.Alpha?W:U}function H(ae){return ae===D.Am.FrontFace?w.LZ:null}const G=5e5,$={factor:-1,units:-2};function re(ae){return ae?$:null}function ue(ae,oe=x.wb.LESS){return ae===D.Am.NONE||ae===D.Am.FrontFace?oe:x.wb.LEQUAL}},12407:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>U});var D=T(62208),x=T(77029),w=T(37847),B=T(68598);class U{constructor(Y,H,G){this._context=Y,this._locations=G,this._textures=new Map,this._freeTextureUnits=new x.Z({deallocator:null}),this._glProgram=Y.programCache.acquire(H.generate("vertex"),H.generate("fragment"),G),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bindPass=H.generateBind(w.P.Pass,this),this.bindDraw=H.generateBind(w.P.Draw,this),this._fragmentUniforms=(0,B.hZ)()?H.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get isCompiled(){return this._glProgram.isCompiled}setUniform1b(Y,H){this._glProgram.setUniform1i(Y,H?1:0)}setUniform1i(Y,H){this._glProgram.setUniform1i(Y,H)}setUniform1f(Y,H){this._glProgram.setUniform1f(Y,H)}setUniform2f(Y,H,G){this._glProgram.setUniform2f(Y,H,G)}setUniform2fv(Y,H){this._glProgram.setUniform2fv(Y,H)}setUniform3f(Y,H,G,$){this._glProgram.setUniform3f(Y,H,G,$)}setUniform3fv(Y,H){this._glProgram.setUniform3fv(Y,H)}setUniform4f(Y,H,G,$,re){this._glProgram.setUniform4f(Y,H,G,$,re)}setUniform4fv(Y,H){this._glProgram.setUniform4fv(Y,H)}setUniformMatrix3fv(Y,H){this._glProgram.setUniformMatrix3fv(Y,H)}setUniformMatrix4fv(Y,H){this._glProgram.setUniformMatrix4fv(Y,H)}setUniform1fv(Y,H){this._glProgram.setUniform1fv(Y,H)}setUniform1iv(Y,H){this._glProgram.setUniform1iv(Y,H)}setUniform2iv(Y,H){this._glProgram.setUniform3iv(Y,H)}setUniform3iv(Y,H){this._glProgram.setUniform3iv(Y,H)}setUniform4iv(Y,H){this._glProgram.setUniform4iv(Y,H)}assertCompatibleVertexAttributeLocations(Y){Y.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(Y,H){if((0,D.Wi)(H)||null==H.glName){const $=this._textures.get(Y);return $&&(this._context.bindTexture(null,$.unit),this._freeTextureUnit($),this._textures.delete(Y)),null}let G=this._textures.get(Y);return null==G?(G=this._allocTextureUnit(H),this._textures.set(Y,G)):G.texture=H,this._context.useProgram(this),this.setUniform1i(Y,G.unit),this._context.bindTexture(H,G.unit),G.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach((Y,H)=>{this._context.bindTexture(Y.texture,Y.unit),this.setUniform1i(H,Y.unit)}),(0,D.pC)(this._fragmentUniforms)&&this._fragmentUniforms.forEach(Y=>{"sampler2D"!==Y.type&&"samplerCube"!==Y.type||this._textures.has(Y.name)||console.error(`Texture sampler ${Y.name} has no bound texture`)})}_allocTextureUnit(Y){return{texture:Y,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(Y){this._freeTextureUnits.push(Y.unit)}}},64624:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>Y,Y:()=>W});var D=T(62208),x=T(74202),w=T(59856),B=T(40723),U=T(91263);class W{constructor($,re,ue,ae=null){this.rctx=$,this.sliceHelper=ae,this.lastFrameCamera=new w.V,this.pass=U.C.MATERIAL,this.renderOccludedMask=H,this.bindParameters=new x.p(re,ue,(0,D.pC)(ae)?ae.plane:null)}resetRenderOccludedMask(){this.renderOccludedMask=H}get isHighlightPass(){return this.pass===U.C.MATERIAL_HIGHLIGHT}}class Y extends W{constructor($,re,ue,ae,oe){super($,ue,ae,oe),this.offscreenRenderingHelper=re,this.sliceHelper=oe}}const H=B.yD.Occlude|B.yD.OccludeAndTransparent|B.yD.OccludeAndTransparentStencil},53855:(qe,xe,T)=>{"use strict";T.d(xe,{z:()=>oe});var D=T(62208),x=T(86236),w=T(28347),B=T(43703),U=T(84161),W=T(4794),Y=T(98943),H=T(42743),G=T(36848);class ${constructor(){this.visible=!0}}var re=T(7167),ue=T(16396),ae=T(65073);class oe{constructor(Z,Q,J={}){this.data=Z,this.material=Q,this.boundingSphere=(0,W.c)(),this.instanceParameters=new $,this._transformation=(0,B.c)(),this._shaderTransformationDirty=!0,this.layerUid=(0,D.Pt)(J.layerUid,null),this.graphicUid=(0,D.Pt)(J.graphicUid,null),this.id=J.id?J.id:(0,x.D)(),this.boundingInfo=(0,D.Pt)(J.boundingInfo,null),this.calculateShaderTransformation=(0,D.Pt)(J.calculateShaderTransformation,null),this.castShadow=!!J.castShadow&&J.castShadow}get transformation(){return this._transformation}updateTransformation(Z){Z(this._transformation),this._shaderTransformationDirty=!0,this.computeBoundingSphere(this._transformation,this.boundingSphere)}shaderTransformationChanged(){this._shaderTransformationDirty=!0}computeBoundingSphere(Z,Q,J=(0,Y.u1)(Z)){(0,D.Wi)(this.boundingInfo)||((0,U.m)(Q,this.boundingInfo.getCenter(),Z),Q[3]=this.boundingInfo.getBSRadius()*J)}get hasShaderTransformation(){return(0,D.pC)(this.calculateShaderTransformation)}get primitiveType(){return this.data.primitiveType}getShaderTransformation(){return(0,D.Wi)(this.calculateShaderTransformation)?(0,D.Pt)(this.transformation,B.I):(this._shaderTransformationDirty&&(this._shaderTransformation||(this._shaderTransformation=(0,B.c)()),(0,w.c)(this._shaderTransformation,this.calculateShaderTransformation((0,D.Pt)(this.transformation,B.I))),this._shaderTransformationDirty=!1),this._shaderTransformation)}computeAttachmentOrigin(Z){if(this.material.computeAttachmentOrigin)return!!this.material.computeAttachmentOrigin(this,Z)&&((0,D.pC)(this._transformation)&&(0,U.m)(Z,Z,this._transformation),!0);const Q=this.indices.get(ue.T.POSITION),J=this.vertexAttributes.get(ue.T.POSITION);return!!(0,G.cM)(J,Q,Z)&&((0,D.pC)(this._transformation)&&(0,U.m)(Z,Z,this._transformation),!0)}get indices(){return this.data.indices}get vertexAttributes(){return this.data.vertexAttributes}addHighlight(){const Z=new re.O(H.V_.Highlight),Q=this.instanceParameters;return Q.highlights=(0,ae.lr)(Q.highlights,Z),Z}removeHighlight(Z){const Q=this.instanceParameters;Q.highlights=(0,ae.U_)(Q.highlights,Z)}}},91263:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{C:()=>D}),(x=D||(D={}))[x.MATERIAL=0]="MATERIAL",x[x.MATERIAL_ALPHA=1]="MATERIAL_ALPHA",x[x.MATERIAL_DEPTH=2]="MATERIAL_DEPTH",x[x.MATERIAL_NORMAL=3]="MATERIAL_NORMAL",x[x.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL",x[x.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT",x[x.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT",x[x.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT"},5894:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{r:()=>D}),(x=D||(D={}))[x.INTEGRATED_MESH=0]="INTEGRATED_MESH",x[x.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",x[x.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",x[x.TRANSPARENT_MATERIAL=3]="TRANSPARENT_MATERIAL",x[x.TRANSPARENT_TERRAIN=4]="TRANSPARENT_TERRAIN",x[x.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=5]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",x[x.OCCLUDED_TERRAIN=6]="OCCLUDED_TERRAIN",x[x.OCCLUDER_MATERIAL=7]="OCCLUDER_MATERIAL",x[x.TRANSPARENT_OCCLUDER_MATERIAL=8]="TRANSPARENT_OCCLUDER_MATERIAL",x[x.OCCLUSION_PIXELS=9]="OCCLUSION_PIXELS",x[x.POSTPROCESSING_ENVIRONMENT_OPAQUE=10]="POSTPROCESSING_ENVIRONMENT_OPAQUE",x[x.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=11]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT",x[x.LASERLINES=12]="LASERLINES",x[x.LASERLINES_CONTRAST_CONTROL=13]="LASERLINES_CONTRAST_CONTROL",x[x.HUD_MATERIAL=14]="HUD_MATERIAL",x[x.LABEL_MATERIAL=15]="LABEL_MATERIAL",x[x.LINE_CALLOUTS=16]="LINE_CALLOUTS",x[x.LINE_CALLOUTS_HUD_DEPTH=17]="LINE_CALLOUTS_HUD_DEPTH",x[x.DRAPED_MATERIAL=18]="DRAPED_MATERIAL",x[x.DRAPED_WATER=19]="DRAPED_WATER",x[x.VOXEL=20]="VOXEL",x[x.MAX_SLOTS=21]="MAX_SLOTS"},53218:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>B,f:()=>w});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.EdgeDetector=0]="EdgeDetector",U[U.BlendWeight=1]="BlendWeight",U[U.Blur=2]="Blur",U[U.COUNT=3]="COUNT";class B extends x.m{constructor(){super(...arguments),this.output=w.EdgeDetector}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"output",void 0)},93783:(qe,xe,T)=>{"use strict";T.d(xe,{L:()=>Q});var D=T(62208),x=T(84161),w=T(70026),B=T(17625),U=T(19597),W=T(651),Y=T(91056),H=T(39114),G=T(12407),$=T(52376),re=T(2078);class ue extends Y.A{initializeProgram(ee){const le=ue.shader.get().build(this.configuration);return new G.$(ee.rctx,le,H.i)}initializePipeline(){return(0,re.sm)({colorWrite:re.BK})}}ue.shader=new W.J($.S,()=>T.e(3999).then(T.bind(T,73999)));var ae=T(76217),oe=T(67969),ie=T(85775),X=T(55086),Z=T(26906);class Q{constructor(ee,le,ne){this._techniqueRep=ee,this._rctx=le,this._requestRender=ne,this._enabled=!1,this._ssaoTechniqueConfig=new ae.F,this.quadVAO=null,this._blurSizePx=2,this._attenuation=.5}dispose(){this.quadVAO=(0,D.O3)(this.quadVAO)}disposeOffscreenBuffers(){(0,D.yw)(this._ssaoFBO,ee=>ee.resize(0,0)),(0,D.yw)(this._blur0FBO,ee=>ee.resize(0,0)),(0,D.yw)(this._blur1FBO,ee=>ee.resize(0,0))}set enabled(ee){ee?this._enable():this._disable()}get enabled(){return this._enabled}get ready(){return this.enabled&&(0,D.pC)(this._noiseTexture)&&(0,D.pC)(this._ssaoFBO)&&(0,D.pC)(this._blur0FBO)&&(0,D.pC)(this._blur1FBO)}get colorTexture(){return(0,D.pC)(this._blur1FBO)?this._blur1FBO.colorTexture:null}get width(){return(0,D.pC)(this._ssaoFBO)?this._ssaoFBO.width:-1}get height(){return(0,D.pC)(this._ssaoFBO)?this._ssaoFBO.height:-1}computeSSAO(ee,le,ne){if(!this.enabled||(0,D.Wi)(le)||(0,D.Wi)(ne)||(0,D.Wi)(this._noiseTexture)||(0,D.Wi)(this._ssaoFBO)||(0,D.Wi)(this._blur0FBO)||(0,D.Wi)(this._blur1FBO))return;const ce=this._rctx,de=ee.camera,me=de.fullViewport,_e=me[2],he=me[3],ye=_e/this._blurSizePx,fe=he/this._blurSizePx;this._ssaoFBO.resize(_e,he),this._blur0FBO.resize(ye,fe),this._blur1FBO.resize(ye,fe);const Ce=1*_e,ge=1*he;ce.bindFramebuffer(this._ssaoFBO),ce.setViewport(0,0,_e,he);const Te=ce.bindTechnique(this._ssaoTechnique,J,ee);Te.setUniform2f("rnmScale",_e/this._noiseTexture.descriptor.width,he/this._noiseTexture.descriptor.height);let Le=1/de.computeRenderPixelSizeAtDist(1);Te.setUniform1f("projScale",1*Le),Te.setUniform2f("screenSize",Ce,ge);const je=(0,x.i)(de.eye,de.center);let ze=20*de.computeRenderPixelSizeAtDist(je);ze=Math.max(.1,ze),Te.setUniform1f("radius",ze),Te.setUniform1f("intensity",4*this._attenuation/ze**6),Te.bindTexture("rnm",this._noiseTexture),Te.bindTexture("normalMap",ne),Te.bindTexture("depthMap",le),(0,D.Wi)(this.quadVAO)&&(this.quadVAO=(0,U.ow)(this._rctx)),ce.bindVAO(this.quadVAO),ce.drawArrays(oe.MX.TRIANGLE_STRIP,0,(0,Z._V)(this.quadVAO,"geometry"));const Ee=ce.bindTechnique(this._blurTechnique,J,ee);Ee.bindTexture("tex",this._ssaoFBO.colorTexture),Ee.bindTexture("normalMap",ne),Ee.bindTexture("depthMap",le),ce.setViewport(0,0,Ce/this._blurSizePx,ge/this._blurSizePx),ce.bindFramebuffer(this._blur0FBO),Ee.setUniform2f("screenSize",Ce,ge),Ee.setUniform2f("blurSize",0,1*this._blurSizePx/ge),je>5e4&&(Le=Math.max(0,Le-(je-5e4))),Ee.setUniform1f("projScale",Le),ce.drawArrays(oe.MX.TRIANGLE_STRIP,0,(0,Z._V)(this.quadVAO,"geometry")),Ee.setUniform2f("blurSize",1*this._blurSizePx/Ce,0),ce.bindFramebuffer(this._blur1FBO),Ee.bindTexture("tex",this._blur0FBO.colorTexture),ce.drawArrays(oe.MX.TRIANGLE_STRIP,0,(0,Z._V)(this.quadVAO,"geometry")),ce.setViewport(me[0],me[1],me[2],me[3])}_selectPrograms(){this._ssaoTechniqueConfig.output=ae.Q.SSAO,this._ssaoTechnique=this._techniqueRep.releaseAndAcquire(ue,this._ssaoTechniqueConfig,this._ssaoTechnique),this._ssaoTechniqueConfig.output=ae.Q.Blur,this._blurTechnique=this._techniqueRep.releaseAndAcquire(ue,this._ssaoTechniqueConfig,this._blurTechnique)}_enable(){this.enabled||(this._enabled=!0,this._loadResources(()=>{this._enabled&&this._initialize()}))}_loadResources(ee){this._data?ee():T.e(181).then(T.bind(T,10181)).then(le=>{this._data=le,ee()})}_initialize(){const ee={target:oe.No.TEXTURE_2D,pixelFormat:oe.VI.RGBA,dataType:oe.Br.UNSIGNED_BYTE,samplingMode:oe.cw.LINEAR,wrapMode:oe.e8.CLAMP_TO_EDGE,width:0,height:0},le={colorTarget:oe.Lm.TEXTURE,depthStencilTarget:oe.OU.NONE};(0,w.t)(this._data.noiseTexture).then(ne=>{this._enabled&&(this._ssaoFBO=new ie.X(this._rctx,le,ee),this._blur0FBO=new ie.X(this._rctx,le,ee),this._blur1FBO=new ie.X(this._rctx,le,ee),this._noiseTexture=new X.x(this._rctx,{target:oe.No.TEXTURE_2D,pixelFormat:oe.VI.RGBA,dataType:oe.Br.UNSIGNED_BYTE,hasMipmap:!0,width:ne.width,height:ne.height},ne),this._requestRender())}),this._selectPrograms()}_disable(){this._enabled=!1,this._noiseTexture=(0,D.O3)(this._noiseTexture),this._blur1FBO=(0,D.O3)(this._blur1FBO),this._blur0FBO=(0,D.O3)(this._blur0FBO),this._ssaoFBO=(0,D.O3)(this._ssaoFBO)}get gpuMemoryUsage(){return((0,D.pC)(this._blur0FBO)?this._blur0FBO.gpuMemoryUsage:0)+((0,D.pC)(this._blur1FBO)?this._blur1FBO.gpuMemoryUsage:0)+((0,D.pC)(this._ssaoFBO)?this._ssaoFBO.gpuMemoryUsage:0)}get test(){return{ssao:this._ssaoFBO,blur:this._blur1FBO}}}const J=new B.K},76217:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>B,Q:()=>w});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.SSAO=0]="SSAO",U[U.Blur=1]="Blur",U[U.COUNT=2]="COUNT";class B extends x.m{constructor(){super(...arguments),this.output=w.SSAO}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"output",void 0)},53319:(qe,xe,T)=>{"use strict";T.d(xe,{i:()=>J,l:()=>ee});var J,Xe,D=T(21286),x=T(62208),w=T(550),B=T(28347),U=T(43703),W=T(67831),Y=T(99770),H=T(84161),G=T(28093),$=T(993),re=T(4794),ue=T(59617),ae=T(59856),oe=T(2282),ie=T(67969),X=T(85775),Z=T(55086),Q=T(26906);(Xe=J||(J={}))[Xe.Highlight=0]="Highlight",Xe[Xe.Default=1]="Default";class se{constructor(){this.camera=new ae.V,this.lightMat=(0,U.c)()}}class ee{constructor(rt,Ze,lt=0){this.rctx=rt,this.viewingMode=Ze,this._enabled=!1,this._snapshots=new Array,this._textureSize=0,this.maxTextureSize=0,this.numCascades=1,this.maxNumCascades=4,this.splitSchemeLambda=0,this.warp=!0,this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=(0,re.c)(),this._cascades=[new se,new se,new se,new se],this.maxTextureSize=this.rctx.parameters.maxTextureSize,this.snapshotCount=lt}get depthTexture(){return this._depthTexture}get textureSize(){return this._textureSize}get cascadeDistances(){return(0,$.s)(this._usedCascadeDistances,this._cascadeDistances[0],this.numCascades>1?this._cascadeDistances[1]:1/0,this.numCascades>2?this._cascadeDistances[2]:1/0,this.numCascades>3?this._cascadeDistances[3]:1/0)}dispose(){this._discardDepthTexture(),this._discardAllSnapshots()}set maxCascades(rt){this.maxNumCascades=(0,D.uZ)(Math.floor(rt),1,4)}get maxCascades(){return this.maxNumCascades}set enabled(rt){this._enabled=rt,rt||(this._discardDepthTexture(),this._discardAllSnapshots())}get enabled(){return this._enabled}get ready(){return this._enabled&&(0,x.pC)(this._depthTexture)}get snapshotCount(){return this._snapshots.length}set snapshotCount(rt){const Ze=this._snapshots.length;if(rt>Ze){const lt=rt-Ze;this._snapshots.length=rt;for(let st=0;st<lt;++st)this._snapshots[Ze+st]=null}else if(rt<this.snapshotCount){const lt=Ze-rt;for(let st=0;st<lt;++st)this._discardSnapshot(rt+st);this._snapshots.length=rt}}getSnapshot(rt){return this.enabled?this._snapshots[rt]:null}getCascades(){for(let rt=0;rt<this.numCascades;++rt)Le[rt]=this._cascades[rt];return Le.length=this.numCascades,Le}start(rt,Ze,lt){(0,oe.hu)(this.enabled),this._textureSize=this._computeTextureSize(rt.fullWidth,rt.fullHeight),this._ensureDepthTexture();const{near:st,far:Mt}=this._clampNearFar(lt);this._computeCascadeDistances(Mt,st),this._setupMatrices(rt,Ze);const Ft=rt.viewMatrix,kt=rt.projectionMatrix;for(let wt=0;wt<this.numCascades;++wt)this._constructCascade(wt,kt,Ft,Ze);this.lastOrigin=null,this.clear()}finish(rt){(0,oe.hu)(this.enabled),this.rctx.bindFramebuffer(rt)}getShadowMapMatrices(rt){if(!this.lastOrigin||!(0,H.k)(rt,this.lastOrigin)){this.lastOrigin=this.lastOrigin||(0,G.c)(),(0,H.c)(this.lastOrigin,rt);for(let Ze=0;Ze<this.numCascades;++Ze){(0,B.j)(je,this._cascades[Ze].lightMat,rt);for(let lt=0;lt<16;++lt)ze[16*Ze+lt]=je[lt]}}return ze}takeCascadeSnapshotTo(rt,Ze){(0,oe.hu)(this.enabled);const lt=this._ensureSnapshot(Ze);this._bindFbo();const st=this.rctx,Mt=st.bindTexture(lt,Z.x.TEXTURE_UNIT_FOR_UPDATES);st.gl.copyTexSubImage2D(ie.No.TEXTURE_2D,0,rt.camera.viewport[0],rt.camera.viewport[1],rt.camera.viewport[0],rt.camera.viewport[1],rt.camera.viewport[2],rt.camera.viewport[3]),st.bindTexture(Mt,Z.x.TEXTURE_UNIT_FOR_UPDATES)}clear(){const rt=this.rctx;this._bindFbo(),rt.setClearColor(1,1,1,1),rt.clearSafe(ie.lk.COLOR_BUFFER_BIT|ie.lk.DEPTH_BUFFER_BIT)}_computeTextureSize(rt,Ze){const lt=.5*Math.log(rt*rt+Ze*Ze)*Math.LOG2E,Mt=2**Math.round(lt+.35);return Math.min(this.maxTextureSize,2*Mt)}_ensureDepthTexture(){(0,x.pC)(this._depthTexture)&&this._depthTexture.descriptor.width===this._textureSize||(this._discardDepthTexture(),this._depthTexture=new Z.x(this.rctx,{target:ie.No.TEXTURE_2D,pixelFormat:ie.VI.RGBA,dataType:ie.Br.UNSIGNED_BYTE,wrapMode:ie.e8.CLAMP_TO_EDGE,samplingMode:ie.cw.NEAREST,flipped:!0,width:this._textureSize,height:this._textureSize}),this._fbo=new X.X(this.rctx,{colorTarget:ie.Lm.TEXTURE,depthStencilTarget:ie.OU.DEPTH_RENDER_BUFFER,width:this._textureSize,height:this._textureSize},this._depthTexture))}_ensureSnapshot(rt){let Ze=this._snapshots[rt];return(0,x.pC)(Ze)&&Ze.descriptor.width===this._textureSize||(this._discardSnapshot(rt),Ze=new Z.x(this.rctx,{target:ie.No.TEXTURE_2D,pixelFormat:ie.VI.RGBA,dataType:ie.Br.UNSIGNED_BYTE,wrapMode:ie.e8.CLAMP_TO_EDGE,samplingMode:ie.cw.NEAREST,flipped:!0,width:this._textureSize,height:this._textureSize}),this._snapshots[rt]=Ze),Ze}_discardDepthTexture(){this._fbo=(0,x.O3)(this._fbo),this._depthTexture=(0,x.O3)(this._depthTexture)}_discardSnapshot(rt){this._snapshots[rt]=(0,x.O3)(this._snapshots[rt])}_discardAllSnapshots(){for(let rt=0;rt<this.snapshotCount;++rt)this._discardSnapshot(rt)}_bindFbo(){const rt=this.rctx;rt.unbindTexture(this._depthTexture),rt.bindFramebuffer(this._fbo)}_constructCascade(rt,Ze,lt,st){const Mt=this._cascades[rt],Ft=-this._cascadeDistances[rt],kt=-this._cascadeDistances[rt+1],wt=(Ze[10]*Ft+Ze[14])/Math.abs(Ze[11]*Ft+Ze[15]),zt=(Ze[10]*kt+Ze[14])/Math.abs(Ze[11]*kt+Ze[15]);(0,oe.hu)(wt<zt);for(let ar=0;ar<8;++ar){(0,$.s)(de,ar%4==0||ar%4==3?-1:1,ar%4==0||ar%4==1?-1:1,ar<4?wt:zt,1),(0,$.t)(me[ar],de,ce);for(let Pr=0;Pr<3;++Pr)me[ar][Pr]/=me[ar][3]}(0,H.o)(Te,me[0]),(0,B.j)(le,ge,Te),Mt.camera.viewMatrix=le;for(let ar=0;ar<8;++ar)(0,H.m)(me[ar],me[ar],Mt.camera.viewMatrix);(0,H.c)(_e,me[0]),(0,H.c)(he,me[0]);for(let ar=1;ar<8;++ar)for(let Pr=0;Pr<3;++Pr)_e[Pr]=Math.min(_e[Pr],me[ar][Pr]),he[Pr]=Math.max(he[Pr],me[ar][Pr]);_e[2]-=200,he[2]+=200,Mt.camera.near=-he[2],Mt.camera.far=-_e[2],this.warp?this._constructTrapezoidalProjection(lt,st,Mt):this._constructOrthogonalProjection(Mt),(0,B.m)(Mt.lightMat,Mt.camera.projectionMatrix,Mt.camera.viewMatrix);const Zt=this._textureSize/2;Mt.camera.viewport[0]=rt%2==0?0:Zt,Mt.camera.viewport[1]=0===Math.floor(rt/2)?0:Zt,Mt.camera.viewport[2]=Zt,Mt.camera.viewport[3]=Zt}_constructOrthogonalProjection(rt){(0,B.q)(rt.camera.projectionMatrix,_e[0],he[0],_e[1],he[1],rt.camera.near,rt.camera.far)}_constructTrapezoidalProjection(rt,Ze,lt){const st=1/me[0][3],Mt=1/me[4][3];(0,oe.hu)(st<Mt);let Ft=st+Math.sqrt(st*Mt);const kt=Math.sin((0,D.ZF)(rt[2]*Ze[0]+rt[6]*Ze[1]+rt[10]*Ze[2]));Ft/=kt,function We(Xe,rt,Ze,lt,st,Mt,Ft,kt){(0,W.a)(Ee,0,0);for(let _r=0;_r<4;++_r)(0,W.b)(Ee,Ee,Xe[_r]);(0,W.f)(Ee,Ee,.25),(0,W.a)(Ae,0,0);for(let _r=4;_r<8;++_r)(0,W.b)(Ae,Ae,Xe[_r]);(0,W.f)(Ae,Ae,.25),(0,W.l)(we[0],Xe[4],Xe[5],.5),(0,W.l)(we[1],Xe[5],Xe[6],.5),(0,W.l)(we[2],Xe[6],Xe[7],.5),(0,W.l)(we[3],Xe[7],Xe[4],.5);let wt=0,zt=(0,W.s)(we[0],Ee);for(let _r=1;_r<4;++_r){const hr=(0,W.s)(we[_r],Ee);hr<zt&&(zt=hr,wt=_r)}(0,W.g)(Be,we[wt],Xe[wt+4]);const Zt=Be[0];let ar,Pr;Be[0]=-Be[1],Be[1]=Zt,(0,W.g)(Pe,Ae,Ee),(0,W.h)(Pe,Be)<0&&(0,W.n)(Be,Be),(0,W.l)(Be,Be,Pe,Ze),(0,W.i)(Be,Be),ar=Pr=(0,W.h)((0,W.g)(Oe,Xe[0],Ee),Be);for(let _r=1;_r<8;++_r){const hr=(0,W.h)((0,W.g)(Oe,Xe[_r],Ee),Be);hr<ar?ar=hr:hr>Pr&&(Pr=hr)}(0,W.c)(lt,Ee),(0,W.f)(Oe,Be,ar-rt),(0,W.b)(lt,lt,Oe);let kr=-1,ss=1,os=0,Hr=0;for(let _r=0;_r<8;++_r){(0,W.g)(Ke,Xe[_r],lt),(0,W.i)(Ke,Ke);const hr=Be[0]*Ke[1]-Be[1]*Ke[0];hr>0?hr>kr&&(kr=hr,os=_r):hr<ss&&(ss=hr,Hr=_r)}(0,oe.T)(kr>0,"leftArea"),(0,oe.T)(ss<0,"rightArea"),(0,W.f)(Ve,Be,ar),(0,W.b)(Ve,Ve,Ee),(0,W.f)(Ne,Be,Pr),(0,W.b)(Ne,Ne,Ee),Ie[0]=-Be[1],Ie[1]=Be[0];const pt=(0,oe.ep)(lt,Xe[Hr],Ne,(0,W.b)(Oe,Ne,Ie),1,st),Ut=(0,oe.ep)(lt,Xe[os],Ne,Oe,1,Mt),$t=(0,oe.ep)(lt,Xe[os],Ve,(0,W.b)(Oe,Ve,Ie),1,Ft),Xt=(0,oe.ep)(lt,Xe[Hr],Ve,Oe,1,kt);(0,oe.T)(pt,"rayRay"),(0,oe.T)(Ut,"rayRay"),(0,oe.T)($t,"rayRay"),(0,oe.T)(Xt,"rayRay")}(me,Ft,kt,ye,fe,De,ve,Ce),function it(Xe,rt,Ze,lt,st){(0,W.g)(et,Ze,lt),(0,W.f)(et,et,.5),nt[0]=et[0],nt[1]=et[1],nt[2]=0,nt[3]=et[1],nt[4]=-et[0],nt[5]=0,nt[6]=et[0]*et[0]+et[1]*et[1],nt[7]=et[0]*et[1]-et[1]*et[0],nt[8]=1,nt[Se(0,2)]=-(0,W.h)($e(nt,0),Xe),nt[Se(1,2)]=-(0,W.h)($e(nt,1),Xe);let Mt=(0,W.h)($e(nt,0),Ze)+nt[Se(0,2)],Ft=(0,W.h)($e(nt,1),Ze)+nt[Se(1,2)],kt=(0,W.h)($e(nt,0),lt)+nt[Se(0,2)],wt=(0,W.h)($e(nt,1),lt)+nt[Se(1,2)];Mt=-(Mt+kt)/(Ft+wt),nt[Se(0,0)]+=nt[Se(1,0)]*Mt,nt[Se(0,1)]+=nt[Se(1,1)]*Mt,nt[Se(0,2)]+=nt[Se(1,2)]*Mt,Mt=1/((0,W.h)($e(nt,0),Ze)+nt[Se(0,2)]),Ft=1/((0,W.h)($e(nt,1),Ze)+nt[Se(1,2)]),nt[Se(0,0)]*=Mt,nt[Se(0,1)]*=Mt,nt[Se(0,2)]*=Mt,nt[Se(1,0)]*=Ft,nt[Se(1,1)]*=Ft,nt[Se(1,2)]*=Ft,nt[Se(2,0)]=nt[Se(1,0)],nt[Se(2,1)]=nt[Se(1,1)],nt[Se(2,2)]=nt[Se(1,2)],nt[Se(1,2)]+=1,Mt=(0,W.h)($e(nt,1),rt)+nt[Se(1,2)],Ft=(0,W.h)($e(nt,2),rt)+nt[Se(2,2)],kt=(0,W.h)($e(nt,1),Ze)+nt[Se(1,2)],wt=(0,W.h)($e(nt,2),Ze)+nt[Se(2,2)],Mt=-.5*(Mt/Ft+kt/wt),nt[Se(1,0)]+=nt[Se(2,0)]*Mt,nt[Se(1,1)]+=nt[Se(2,1)]*Mt,nt[Se(1,2)]+=nt[Se(2,2)]*Mt,Mt=(0,W.h)($e(nt,1),rt)+nt[Se(1,2)],Ft=(0,W.h)($e(nt,2),rt)+nt[Se(2,2)],kt=-Ft/Mt,nt[Se(1,0)]*=kt,nt[Se(1,1)]*=kt,nt[Se(1,2)]*=kt,st[0]=nt[0],st[1]=nt[1],st[2]=0,st[3]=nt[2],st[4]=nt[3],st[5]=nt[4],st[6]=0,st[7]=nt[5],st[8]=0,st[9]=0,st[10]=1,st[11]=0,st[12]=nt[6],st[13]=nt[7],st[14]=0,st[15]=nt[8]}(ye,fe,ve,Ce,lt.camera.projectionMatrix),lt.camera.projectionMatrix[10]=2/(_e[2]-he[2]),lt.camera.projectionMatrix[14]=-(_e[2]+he[2])/(_e[2]-he[2])}_setupMatrices(rt,Ze){(0,B.m)(ne,rt.projectionMatrix,rt.viewMatrix),(0,B.a)(ce,ne);const lt=this.viewingMode===ue.JY.Global?rt.eye:(0,H.s)(Te,0,0,1);(0,B.n)(ge,[0,0,0],[-Ze[0],-Ze[1],-Ze[2]],lt)}_clampNearFar(rt){let{near:Ze,far:lt}=rt;return Ze<2&&(Ze=2),lt<2&&(lt=2),Ze>=lt&&(Ze=2,lt=4),{near:Ze,far:lt}}_computeCascadeDistances(rt,Ze){this.numCascades=Math.min(1+Math.floor((0,oe.E6)(rt/Ze,4)),this.maxNumCascades);const lt=(rt-Ze)/this.numCascades,st=(rt/Ze)**(1/this.numCascades);let Mt=Ze,Ft=Ze;for(let kt=0;kt<this.numCascades+1;++kt)this._cascadeDistances[kt]=(0,D.t7)(Mt,Ft,this.splitSchemeLambda),Mt*=st,Ft+=lt}get gpuMemoryUsage(){return this._snapshots.reduce((rt,Ze)=>rt+(0,Q.un)(Ze),this._fbo?.gpuMemoryUsage??0)}get test(){const rt=this;return{maxNumCascades:this.maxNumCascades,cascades:this._cascades,textureSize:this._textureSize,set splitSchemeLambda(Ze){rt.splitSchemeLambda=Ze},get splitSchemeLambda(){return rt.splitSchemeLambda},set warp(Ze){rt.warp=Ze},get warp(){return rt.warp}}}}const le=(0,U.c)(),ne=(0,U.c)(),ce=(0,U.c)(),de=(0,re.c)(),me=[];for(let Xe=0;Xe<8;++Xe)me.push((0,re.c)());const _e=(0,G.c)(),he=(0,G.c)(),ye=(0,Y.a)(),fe=(0,Y.a)(),De=(0,Y.a)(),ve=(0,Y.a)(),Ce=(0,Y.a)(),ge=(0,U.c)(),Te=(0,G.c)(),Le=[],je=(0,U.c)(),ze=new Float32Array(64),Ee=(0,Y.a)(),Ae=(0,Y.a)(),we=[(0,Y.a)(),(0,Y.a)(),(0,Y.a)(),(0,Y.a)()],Be=(0,Y.a)(),Pe=(0,Y.a)(),Oe=(0,Y.a)(),Ke=(0,Y.a)(),Ve=(0,Y.a)(),Ne=(0,Y.a)(),Ie=(0,Y.a)();function Se(Xe,rt){return 3*rt+Xe}const He=(0,Y.a)();function $e(Xe,rt){return(0,W.a)(He,Xe[rt],Xe[rt+3]),He}const et=(0,Y.a)(),nt=(0,w.c)()},14411:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>Q});var D=T(17626),x=T(14517),w=T(88159),B=T(62208),U=T(77029),W=T(77712),$=(T(85931),T(8314),T(90912),T(76898)),re=T(28093),ue=T(26594),ae=T(62483),oe=T(67857),ie=T(54840),X=T(83196),Z=T(38516);let Q=class extends x.Z{constructor(ne){super(ne),this._pending=new J,this._changes=new ue.as,this._materialRenderers=new Map,this._sortedMaterialRenderers=new U.Z,this._geometries=new Map,this._hasHighlights=!1,this._hasWater=!1}destroy(){this._changes.prune(),this._materialRenderers.forEach(ne=>ne.dispose()),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear(),this._geometries.clear()}get updating(){return!this._pending.empty||this._changes.updates.length>0}get rctx(){return this.rendererContext.rctx}get _materialRepository(){return this.rendererContext.materialRepository}get _localOriginFactory(){return this.rendererContext.localOriginFactory}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return(0,w.oE)(this._materialRenderers,ne=>ne.rendersOccluded)}get isEmpty(){return!this.updating&&0===this._materialRenderers.size&&0===this._geometries.size}commitChanges(){if(!this.updating)return!1;this._processAddsRemoves();const ne=(0,X.q)(this._changes);let ce=!1,de=!1,me=!1;return ne.forEach((_e,he)=>{let ye=this._materialRenderers.get(he);if(!ye&&_e.adds.length>0&&(ye=new Z.A(this.rctx,this._materialRepository,he),this._materialRenderers.set(he,ye),ce=!0,de=!0,me=!0),!ye)return;const fe=de||ye.hasHighlights,De=me||ye.hasWater;ye.modify(_e),de=de||fe!==ye.hasHighlights,me=me||De!==ye.hasWater,ye.isEmpty&&(this._materialRenderers.delete(he),ye.dispose(),ce=!0)}),this._changes.clear(),ce&&this._updateSortedMaterialRenderers(),de&&(this._hasHighlights=(0,w.oE)(this._materialRenderers,_e=>_e.hasHighlights)),me&&(this._hasWater=(0,w.oE)(this._materialRenderers,_e=>_e.hasWater)),this.notifyChange("updating"),!0}addGeometries(ne,ce){if(0===ne.length)return;const de=this._validateRenderGeometries(ne);for(const _e of de)this._geometries.set(_e.id,_e);const me=this._pending.empty;for(const _e of de)this._pending.adds.add(_e);me&&this.notifyChange("updating"),ce===ie.$.Geometry.UPDATE&&this._notifyGraphicGeometryChanged(ne)}removeGeometries(ne,ce){const de=this._pending.empty,me=this._pending.adds;for(const _e of ne)me.has(_e)?(this._pending.removed.add(_e),me.delete(_e)):this._pending.removed.has(_e)||this._pending.removes.add(_e),this._geometries.delete((0,B.Wg)(_e.id));de&&!this._pending.empty&&this.notifyChange("updating"),ce===ie.$.Geometry.UPDATE&&this._notifyGraphicGeometryChanged(ne)}modifyGeometries(ne,ce){const de=0===this._changes.updates.length;for(const me of ne){const _e=this._changes.updates.pushNew();_e.renderGeometry=this._validateRenderGeometry(me),_e.updateType=ce}switch(de&&this._changes.updates.length>0&&this.notifyChange("updating"),ce){case ie.$.State.TRANSFORMATION:case ie.$.State.VERTEXATTRS:return this._notifyGraphicGeometryChanged(ne);case ie.$.State.VISIBILITIES:return this._notifyGraphicVisibilityChanged(ne)}}updateAnimation(ne){let ce=!1;return this._sortedMaterialRenderers.forAll(({materialRenderer:de})=>ce=de.updateAnimation(ne)||ce),ce}render(ne,ce){for(let de=0;de<this._sortedMaterialRenderers.length;de++){const me=this._sortedMaterialRenderers.data[de];me.material.shouldRender(ne)&&me.materialRenderer.render(ne.pass,ce)}}intersect(ne,ce,de,me,_e){return this._geometries.forEach(he=>{if(me&&!me(he))return;this._intersectRenderGeometry(he,de,ce,0,ne,_e);const ye=this.rendererContext.longitudeCyclical;ye&&(he.boundingSphere[0]-he.boundingSphere[3]<ye.min&&this._intersectRenderGeometry(he,de,ce,ye.range,ne,_e),he.boundingSphere[0]+he.boundingSphere[3]>ye.max&&this._intersectRenderGeometry(he,de,ce,-ye.range,ne,_e)),_e++}),_e}_updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear();let ne=0;this._materialRenderers.forEach((ce,de)=>{de.insertOrder=ne++,this._sortedMaterialRenderers.push({material:de,materialRenderer:ce})}),this._sortedMaterialRenderers.sort((ce,de)=>{const me=de.material.renderPriority-ce.material.renderPriority;return 0!==me?me:ce.material.insertOrder-de.material.insertOrder})}_processAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._changes.adds.pushArray(Array.from(this._pending.adds)),this._changes.removes.pushArray(Array.from(this._pending.removes));for(let ne=0;ne<this._changes.updates.length;)this._pending.has(this._changes.updates.data[ne].renderGeometry)?this._changes.updates.removeUnorderedIndex(ne):ne++;this._pending.clear()}_intersectRenderGeometry(ne,ce,de,me,_e,he){if(!ne.instanceParameters.visible)return;let ye=0;(0,B.pC)(ne.transformation)&&(me+=ne.transformation[12],ye=ne.transformation[13]),ee[0]=de[0]-me,ee[1]=de[1]-ye,ee[2]=1,le[0]=de[0]-me,le[1]=de[1]-ye,le[2]=0,ne.screenToWorldRatio=this.rendererContext.screenToWorldRatio,ne.material.intersect(ne,null,ne.getShaderTransformation(),_e,ee,le,(fe,De,ve)=>{!function se(ne,ce,de,me,_e,he,ye){const fe={layerUid:he,graphicUid:ye,triangleNr:ce},De=ve=>{ve.set(oe.q7.OVERLAY,fe,ne.dist,ne.normal,ne.transformation,de,me)};if((null==_e.results.min.drapedLayerOrder||de>=_e.results.min.drapedLayerOrder)&&(null==_e.results.min.dist||_e.results.ground.dist<=_e.results.min.dist)&&De(_e.results.min),_e.options.store!==oe.eC.MIN&&(null==_e.results.max.drapedLayerOrder||de<_e.results.max.drapedLayerOrder)&&(null==_e.results.max.dist||_e.results.ground.dist>_e.results.max.dist)&&De(_e.results.max),_e.options.store===oe.eC.ALL){const ve=(0,ae.LP)(_e.ray);De(ve),_e.results.all.push(ve)}}(ce,ve,ne.material.renderPriority,he,_e,ne.layerUid,ne.graphicUid)},ne.calculateShaderTransformation,ce)}_notifyGraphicGeometryChanged(ne){if((0,B.Wi)(this.drapeSource.notifyGraphicGeometryChanged))return;let ce;for(const de of ne){const me=de.graphicUid;(0,B.pC)(me)&&me!==ce&&(this.drapeSource.notifyGraphicGeometryChanged(me),ce=me)}}_notifyGraphicVisibilityChanged(ne){if((0,B.Wi)(this.drapeSource.notifyGraphicVisibilityChanged))return;let ce;for(const de of ne){const me=de.graphicUid;(0,B.pC)(me)&&me!==ce&&(this.drapeSource.notifyGraphicVisibilityChanged(me),ce=me)}}_validateRenderGeometries(ne){for(const ce of ne)this._validateRenderGeometry(ce);return ne}_validateRenderGeometry(ne){return(0,B.Wi)(ne.origin)&&(ne.origin=this._localOriginFactory.getOrigin(ne.boundingSphere)),ne}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};(0,D._)([(0,W.Cb)()],Q.prototype,"drapeSource",void 0),(0,D._)([(0,W.Cb)()],Q.prototype,"updating",null),(0,D._)([(0,W.Cb)()],Q.prototype,"rctx",null),(0,D._)([(0,W.Cb)()],Q.prototype,"rendererContext",void 0),(0,D._)([(0,W.Cb)()],Q.prototype,"_materialRepository",null),(0,D._)([(0,W.Cb)()],Q.prototype,"_localOriginFactory",null),Q=(0,D._)([(0,$.j)("esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer")],Q);class J{constructor(){this.adds=new Set,this.removes=new Set,this.removed=new Set}get empty(){return 0===this.adds.size&&0===this.removes.size&&0===this.removed.size}has(ce){return this.adds.has(ce)||this.removes.has(ce)||this.removed.has(ce)}clear(){this.adds.clear(),this.removes.clear(),this.removed.clear()}}const ee=(0,re.c)(),le=(0,re.c)()},64127:(qe,xe,T)=>{"use strict";T.d(xe,{JN:()=>w,P7:()=>W,RY:()=>G,YD:()=>ue,eD:()=>$,ec:()=>H,iV:()=>Y,ii:()=>re,s3:()=>U,zV:()=>B});var D=T(42743),x=T(67969);const w={func:x.wb.LESS},B={func:x.wb.ALWAYS},U={mask:255},W={mask:0},Y=ae=>({function:{func:x.wb.NOTEQUAL,ref:ae,mask:ae},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.KEEP}}),H=ae=>({function:{func:x.wb.ALWAYS,ref:ae,mask:ae},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.REPLACE}}),G={function:{func:x.wb.ALWAYS,ref:D.hU.OutlineVisualElementMask,mask:D.hU.OutlineVisualElementMask},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.ZERO}},$={function:{func:x.wb.ALWAYS,ref:D.hU.OutlineVisualElementMask,mask:D.hU.OutlineVisualElementMask},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.REPLACE}},re={function:{func:x.wb.EQUAL,ref:D.hU.OutlineVisualElementMask,mask:D.hU.OutlineVisualElementMask},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.KEEP}},ue={function:{func:x.wb.NOTEQUAL,ref:D.hU.OutlineVisualElementMask,mask:D.hU.OutlineVisualElementMask},operation:{fail:x.xS.KEEP,zFail:x.xS.KEEP,zPass:x.xS.KEEP}}},65542:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>H});var D=T(15861),x=T(91558),w=T(63290),B=T(62208),U=T(23841),W=T(4794);const Y=w.Z.getLogger("esri.views.3d.webgl-engine.lib.TextRenderParameters");class H{constructor($){this.definition=$,this.key=JSON.stringify($),this.haloSize=Math.round($.halo.size),this.textStyle=this._colorToRGBA($.color),this.haloStyle=this._colorToRGB($.halo.color),this.backgroundStyle=0!==$.background.color[3]?this._colorToRGBA($.background.color):null}fontString($){const re=this.definition.font;return`${re.style} ${re.weight} ${$}px ${re.family}, sans-serif`}_colorToRGB($){return`rgb(${$.slice(0,3).map(re=>Math.floor(255*re)).toString()})`}_colorToRGBA($){return`rgba(${$.slice(0,3).map(re=>Math.floor(255*re)).toString()},${$[3]})`}static fromSymbol($,re=1){return(0,D.Z)(function*(){const ue=(0,B.U2)($,"material","color"),ae=(0,B.R2)(ue,W.Z,x.Z.toUnitRGBA),oe=(0,B.R2)($.size,12,U.F2),ie=$.lineHeight,X=(0,B.pC)($.background)?x.Z.toUnitRGBA($.background.color):W.Z,Z={family:(0,B.R2)($.font,"sans-serif",le=>le.family),decoration:(0,B.R2)($.font,"none",le=>le.decoration),weight:(0,B.R2)($.font,"normal",le=>le.weight),style:(0,B.R2)($.font,"normal",le=>le.style)},Q=$.halo,J=(0,B.pC)(Q)&&(0,B.pC)(Q.color)&&Q.size>0?{size:(0,U.F2)(Q.size),color:x.Z.toUnitRGBA(Q.color)}:{size:0,color:W.Z},se=new H({color:ae,size:oe,background:{color:X,padding:(0,B.pC)($.background)?[.65*oe,.5*oe]:[0,0],borderRadius:(0,B.pC)($.background)?oe*(6/16):0},lineSpacingFactor:ie,font:Z,halo:J,pixelRatio:re}),ee=se.fontString(oe);try{yield document.fonts.load(ee)}catch{Y.warnOnce(`Failed to preload font '${ee}'. Some text symbology may be rendered using the default browser font.`)}return se})()}}},6169:(qe,xe,T)=>{"use strict";T.d(xe,{GZ:()=>Y,tV:()=>B,vU:()=>W});var D=T(21286),x=T(62208),w=T(93605);class B{constructor(oe,ie,X,Z=2048){this.text=oe,this._alignment=ie,this._parameters=X,this.maxSize=Z,this._textWidths=[],this._lineWidths=[],this._renderPixelRatio=null,this._displayWidth=null,this._heightMetrics=null,this.key=`TextRenderer-${this._parameters.key}-${this._alignment}--${oe}`,this._lines=oe.split(/\r?\n/)}get displayWidth(){return Math.ceil(this._ensureTextWidth()+2*this.backgroundHorizontalPadding)}get displayHeight(){return Math.ceil(this.lineSpacing*(this._lines.length-1)+this.lineHeight+2*this.haloSize+this.backgroundTopPadding+this.backgroundBottomPadding)}get renderedWidth(){return Math.ceil(this._toRenderUnit(this.displayWidth))}get renderedHeight(){return Math.ceil(this._toRenderUnit(this.displayHeight))}get firstRenderedBaselinePosition(){return this._toRenderUnit(this.firstLineYOffset+this.baselinePosition)}get firstLineYOffset(){return this.backgroundTopPadding+this.haloSize}get heightMetrics(){return this._ensureHeightMetrics()}get lineSpacing(){return(this.lineHeight+this.linePadding)*this._parameters.definition.lineSpacingFactor}get lineHeight(){return this.heightMetrics.lineHeight}get linePadding(){return this.lineHeight*G}get baselinePosition(){return this.heightMetrics.baselinePosition}get renderedFontSize(){return this._toRenderUnit(this.fontSize)}get fontSize(){return this._parameters.definition.size}get renderedHaloSize(){return this._toRenderUnit(this.haloSize)}get haloSize(){return this._parameters.haloSize}get backgroundHorizontalPadding(){return this.hasBackground?this._parameters.definition.background.padding[0]:0}get backgroundVerticalPadding(){return this.hasBackground?this._parameters.definition.background.padding[1]:0}get backgroundTopPadding(){return Math.max(0,this.backgroundVerticalPadding-this.heightMetrics.paddingTop)}get backgroundBottomPadding(){return Math.max(0,this.backgroundVerticalPadding-this.heightMetrics.paddingBottom)}get hasBackground(){return!!this._parameters.backgroundStyle}get renderPixelRatio(){if((0,x.Wi)(this._renderPixelRatio)){const oe=this._parameters.definition.pixelRatio;this._renderPixelRatio=this.maxSize>0?Math.min(oe,Math.min(this.maxSize/this.displayWidth,this.maxSize/this.displayHeight)):oe}return this._renderPixelRatio}_getLineXOffset(oe){switch(this._alignment){case W.Left:return this.backgroundHorizontalPadding;case W.Center:return(this.displayWidth-this._lineWidths[oe])/2;case W.Right:return this.displayWidth-this.backgroundHorizontalPadding-this._lineWidths[oe]}}render(oe,ie=0,X=0){oe.save();const Z=ie/=this.renderPixelRatio,Q=X/=this.renderPixelRatio,J=this.haloSize,se=this.firstLineYOffset;ie+=J,X+=se+this.baselinePosition;const ee=this.haloSize>0;ee&&this._renderHalo(oe,Z,Q,J,se),this._setFontProperties(oe,this.renderedFontSize);for(let le=0;le<this._lines.length;++le){const ne=this._lines[le],ce=this._getLineXOffset(le);ee&&(oe.globalCompositeOperation="destination-out",oe.fillStyle="rgb(0, 0, 0)",this._fillText(oe,ne,ie+ce,X),this._renderLineDecoration(oe,ie+ce,X,this._textWidths[le])),oe.globalCompositeOperation="source-over",oe.fillStyle=this._parameters.textStyle,this._fillText(oe,ne,ie+this._getLineXOffset(le),X),this._renderLineDecoration(oe,ie+ce,X,this._textWidths[le]),X+=this.lineSpacing}if(w.Z.TEXT_SHOW_BASELINE){oe.strokeStyle=re,oe.setLineDash([2,2]),oe.lineWidth=1;let le=Q+se;for(let ne=0;ne<this._lines.length;++ne){const ce=le+this.baselinePosition;this._drawLine(oe,[Z,ce],[Z+this.displayWidth,ce]),le+=this.lineSpacing}}w.Z.TEXT_SHOW_BORDER&&(oe.strokeStyle=re,oe.setLineDash([]),oe.lineWidth=1,this._drawBox(oe,[Z,Q],[this.displayWidth,this.displayHeight])),this.hasBackground&&(this._roundedRect(oe,Z,Q,this._parameters.definition.background.borderRadius*this.renderPixelRatio),oe.globalCompositeOperation="destination-over",oe.fillStyle=this._parameters.backgroundStyle,oe.fill()),oe.restore()}_renderLineDecoration(oe,ie,X,Z,Q=!1){if("none"===this._parameters.definition.font.decoration||0===Z)return;const se=Math.max(this._parameters.definition.size/16,1);switch(this._parameters.definition.font.decoration){case"underline":X+=2*se;break;case"line-through":X-=.33*this.baselinePosition}const ee=Q?this.haloSize:0;oe.strokeStyle=Q?this._parameters.haloStyle:this._parameters.textStyle,oe.lineWidth=this._toRenderUnit(se+2*ee),oe.beginPath(),oe.moveTo(this._toRenderUnit(ie-ee),this._toRenderUnit(X)),oe.lineTo(this._toRenderUnit(ie+Z+ee),this._toRenderUnit(X)),oe.stroke()}_roundedRect(oe,ie,X,Z){ie=this._toRenderUnit(ie),X=this._toRenderUnit(X);const Q=this.renderedWidth,J=this.renderedHeight;0!==Z?(Z=(0,D.uZ)(Z,0,Math.floor(J/2)),oe.beginPath(),oe.moveTo(ie,X+Z),oe.arcTo(ie,X,ie+Z,X,Z),oe.lineTo(ie+Q-Z,X),oe.arcTo(ie+Q,X,ie+Q,X+Z,Z),oe.lineTo(ie+Q,X+J-Z),oe.arcTo(ie+Q,X+J,ie+Q-Z,X+J,Z),oe.lineTo(ie+Z,X+J),oe.arcTo(ie,X+J,ie,X+J-Z,Z),oe.closePath()):oe.rect(ie,X,Q,J)}_renderHalo(oe,ie,X,Z,Q){const J=this.renderedWidth,se=this.renderedHeight,ee=Y(H,Math.max(J,$),Math.max(se,$)),le=ee.getContext("2d");le.clearRect(0,0,J,se),this._setFontProperties(le,this.renderedFontSize),le.fillStyle=this._parameters.haloStyle,le.strokeStyle=this._parameters.haloStyle;const ne=this.renderedHaloSize<3;le.lineJoin=ne?"miter":"round",ne?this._renderHaloEmulated(le,Z,Q):this._renderHaloNative(le,Z,Q);let ce=Q+this.baselinePosition;for(let de=0;de<this._lines.length;++de){const me=this._getLineXOffset(de);this._renderLineDecoration(le,Z+me,ce,this._textWidths[de],!0),ce+=this.lineSpacing}oe.globalAlpha=this._parameters.definition.halo.color[3],oe.drawImage(ee,0,0,J,se,this._toRenderUnit(ie),this._toRenderUnit(X),J,se),oe.globalAlpha=1}_renderHaloEmulated(oe,ie,X){X+=this.baselinePosition;for(let Z=0;Z<this._lines.length;++Z){const Q=this._lines[Z],J=this._getLineXOffset(Z);for(const[se,ee]of U)this._fillText(oe,Q,ie+J+this.haloSize*se,X+this.haloSize*ee);X+=this.lineSpacing}}_renderHaloNative(oe,ie,X){const Z=2*this.haloSize;X+=this.baselinePosition;for(let Q=0;Q<this._lines.length;++Q){const J=this._lines[Q],se=this._getLineXOffset(Q),ee=5,le=.1;for(let ne=0;ne<ee;ne++)oe.lineWidth=this._toRenderUnit((1-(ee-1)*le+ne*le)*Z),this._strokeText(oe,J,ie+se,X);X+=this.lineSpacing}}_setFontProperties(oe,ie){oe.font=this._parameters.fontString(ie),oe.textAlign="left",oe.textBaseline="alphabetic"}_ensureTextWidth(){if((0,x.pC)(this._displayWidth))return this._displayWidth;const oe=Y(H,$,$).getContext("2d");this._setFontProperties(oe,this.fontSize);let ie=2*this.haloSize;const X=this._parameters.definition.font;"italic"!==X.style&&"oblique"!==X.style&&"bold"!==X.weight&&"bolder"!==X.weight||(ie+=.3*oe.measureText("A").width),this._textWidths.length=0,this._lineWidths.length=0;let Z=0;for(const Q of this._lines){const J=oe.measureText(Q).width,se=J+ie;this._textWidths.push(J),this._lineWidths.push(se),Z=Math.max(Z,se)}return this._displayWidth=Z,this._displayWidth}_ensureHeightMetrics(){if((0,x.Wi)(this._heightMetrics)){const oe=Y(H,$,$).getContext("2d");this._setFontProperties(oe,this.fontSize);const ie=oe.measureText(this.text+ue),X=this.hasBackground?oe.measureText(this._lines[0]):ie,Z=1===this._lines.length?X:this.hasBackground?oe.measureText(this._lines[this._lines.length-1]):ie;this._heightMetrics={paddingTop:ie.actualBoundingBoxAscent-X.actualBoundingBoxAscent,paddingBottom:ie.actualBoundingBoxDescent-Z.actualBoundingBoxDescent,lineHeight:ie.actualBoundingBoxAscent+ie.actualBoundingBoxDescent,baselinePosition:ie.actualBoundingBoxAscent}}return this._heightMetrics}_toRenderUnit(oe){return oe*this.renderPixelRatio}_toRoundedRenderUnit(oe){return Math.round(oe*this.renderPixelRatio)}_fillText(oe,ie,X,Z){oe.fillText(ie,this._toRenderUnit(X),this._toRenderUnit(Z))}_strokeText(oe,ie,X,Z){oe.strokeText(ie,this._toRenderUnit(X),this._toRenderUnit(Z))}_drawLine(oe,ie,X){oe.beginPath(),oe.moveTo(this._toRoundedRenderUnit(ie[0])+.5,this._toRoundedRenderUnit(ie[1])+.5),oe.lineTo(this._toRoundedRenderUnit(X[0])+.5,this._toRoundedRenderUnit(X[1])+.5),oe.stroke()}_drawBox(oe,ie,X){const Z=this._toRenderUnit(ie[0]),Q=this._toRenderUnit(ie[1]),J=this._toRenderUnit(X[0]),se=this._toRenderUnit(X[1]),ee=Math.floor(Z)+.5,le=Math.ceil(Z+J)-.5,ne=Math.floor(Q)+.5,ce=Math.ceil(Q+se)-.5;oe.beginPath(),oe.moveTo(ee,ne),oe.lineTo(le,ne),oe.lineTo(le,ce),oe.lineTo(ee,ce),oe.lineTo(ee,ne),oe.stroke()}}const U=[];for(let oe=0;oe<360;oe+=22.5)U.push([Math.cos(Math.PI*oe/180),Math.sin(Math.PI*oe/180)]);var W,ae;function Y(ae,oe,ie){return ae.canvas||(ae.canvas=document.createElement("canvas")),ae.canvas.width=oe,ae.canvas.height=ie,ae.canvas}(ae=W||(W={}))[ae.Left=0]="Left",ae[ae.Center=1]="Center",ae[ae.Right=2]="Right";const H={canvas:null},G=.2,$=512,re="rgb(255, 0, 255, 0.5)",ue=(()=>{let ae="";for(let oe=32;oe<127;oe++)ae+=String.fromCharCode(oe);return ae})()},81695:(qe,xe,T)=>{"use strict";T.d(xe,{x:()=>Oe});var D=T(15861),x=T(94573),w=T(26584),B=T(61885),U=T(21286),W=T(62208),Y=T(10699),H=T(55713),G=T(21726),$=T(70026),re=T(33899),ue=T(42743),ae=T(13756),oe=T(12699),ie=T(24425),X=T(63290),Z=T(67969),Q=T(55086);const J=X.Z.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil");function ne(Ve){return Ve.charCodeAt(0)+(Ve.charCodeAt(1)<<8)+(Ve.charCodeAt(2)<<16)+(Ve.charCodeAt(3)<<24)}const de=ne("DXT1"),me=ne("DXT3"),_e=ne("DXT5");var Ke,Ve,Ee=T(19597),Ae=T(2282),we=T(85775),Be=T(26906),Pe=T(38210);class Oe extends oe.c{constructor(Ne,Ie){super(),this.data=Ne,this.type=ie.U.Texture,this._glTexture=null,this._powerOfTwoStretchInfo=null,this._loadingPromise=null,this._loadingController=null,this.events=new B.Z,this.params=Ie||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:Z.e8.REPEAT,t:Z.e8.REPEAT},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||ue.CE.STRETCH,this.estimatedTexMemRequired=Oe._estimateTexMemRequired(this.data,this.params),this._startPreload()}_startPreload(){const Ne=this.data;(0,W.Wi)(Ne)||(Ne instanceof HTMLVideoElement?this._startPreloadVideoElement(Ne):Ne instanceof HTMLImageElement&&this._startPreloadImageElement(Ne))}_startPreloadVideoElement(Ne){if(!((0,G.jc)(Ne.src)||"auto"===Ne.preload&&Ne.crossOrigin)){Ne.preload="auto",Ne.crossOrigin="anonymous";const Ie=!Ne.paused;if(Ne.src=Ne.src,Ie&&Ne.autoplay){const We=()=>{Ne.removeEventListener("canplay",We),Ne.play()};Ne.addEventListener("canplay",We)}}}_startPreloadImageElement(Ne){(0,G.HK)(Ne.src)||(0,G.jc)(Ne.src)||Ne.crossOrigin||(Ne.crossOrigin="anonymous",Ne.src=Ne.src)}static _getDataDimensions(Ne){return Ne instanceof HTMLVideoElement?{width:Ne.videoWidth,height:Ne.videoHeight}:Ne}static _estimateTexMemRequired(Ne,Ie){if((0,W.Wi)(Ne))return 0;if((0,H.eP)(Ne)||(0,H.lq)(Ne))return Ie.encoding===Oe.KTX2_ENCODING?(0,ae._h)(Ne,Ie.mipmap):Ie.encoding===Oe.BASIS_ENCODING?(0,ae.$u)(Ne,Ie.mipmap):Ne.byteLength;const{width:We,height:Se}=Ne instanceof Image||Ne instanceof ImageData||Ne instanceof HTMLCanvasElement||Ne instanceof HTMLVideoElement?Oe._getDataDimensions(Ne):Ie;return(Ie.mipmap?4/3:1)*We*Se*(Ie.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}_createDescriptor(Ne){return{target:Z.No.TEXTURE_2D,pixelFormat:Z.VI.RGBA,dataType:Z.Br.UNSIGNED_BYTE,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?Z.cw.LINEAR_MIPMAP_LINEAR:Z.cw.LINEAR,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.maxAnisotropy??(this.params.mipmap?Ne.parameters.maxMaxAnisotropy:1)}}get glTexture(){return this._glTexture}load(Ne,Ie){if((0,W.pC)(this._glTexture))return this._glTexture;if((0,W.pC)(this._loadingPromise))return this._loadingPromise;const We=this.data;return(0,W.Wi)(We)?(this._glTexture=new Q.x(Ne,this._createDescriptor(Ne),null),this._glTexture):"string"==typeof We?this._loadFromURL(Ne,Ie,We):We instanceof Image?this._loadFromImageElement(Ne,Ie,We):We instanceof HTMLVideoElement?this._loadFromVideoElement(Ne,Ie,We):We instanceof ImageData||We instanceof HTMLCanvasElement?this._loadFromImage(Ne,We,Ie):((0,H.eP)(We)||(0,H.lq)(We))&&this.params.encoding===Oe.DDS_ENCODING?(this.data=void 0,this._loadFromDDSData(Ne,We)):((0,H.eP)(We)||(0,H.lq)(We))&&this.params.encoding===Oe.KTX2_ENCODING?(this.data=void 0,this._loadFromKTX2(Ne,We)):((0,H.eP)(We)||(0,H.lq)(We))&&this.params.encoding===Oe.BASIS_ENCODING?(this.data=void 0,this._loadFromBasis(Ne,We)):(0,H.lq)(We)?this._loadFromPixelData(Ne,We):(0,H.eP)(We)?this._loadFromPixelData(Ne,new Uint8Array(We)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(Ne,Ie,We){if(!(this.data instanceof HTMLVideoElement)||(0,W.Wi)(this._glTexture)||this.data.readyState<Ke.HAVE_CURRENT_DATA||We===this.data.currentTime)return We;if((0,W.pC)(this._powerOfTwoStretchInfo)){const{framebuffer:Se,vao:He,sourceTexture:$e}=this._powerOfTwoStretchInfo;$e.setData(this.data),this._drawStretchedTexture(Ne,Ie,Se,He,$e,this._glTexture)}else{const{videoWidth:Se,videoHeight:He}=this.data,{width:$e,height:et}=this._glTexture.descriptor;Se!==$e||He!==et?this._glTexture.updateData(0,0,0,Math.min(Se,$e),Math.min(He,et),this.data):this._glTexture.setData(this.data)}return this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this.params.updateCallback&&this.params.updateCallback(),this.data.currentTime}_loadFromDDSData(Ne,Ie){return this._glTexture=function je(Ve,Ne,Ie){const{textureData:We,internalFormat:Se,width:He,height:$e}=function ze(Ve,Ne){const Ie=new Int32Array(Ve,0,31);if(542327876!==Ie[0])return J.error("Invalid magic number in DDS header"),null;if(!(4&Ie[20]))return J.error("Unsupported format, must contain a FourCC code"),null;const We=Ie[21];let Se,He;switch(We){case de:Se=8,He=Z.q_.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case me:Se=16,He=Z.q_.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case _e:Se=16,He=Z.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return J.error("Unsupported FourCC code:",function ce(Ve){return String.fromCharCode(255&Ve,Ve>>8&255,Ve>>16&255,Ve>>24&255)}(We)),null}let $e=1,et=Ie[4],nt=Ie[3];0==(3&et)&&0==(3&nt)||(J.warn("Rounding up compressed texture size to nearest multiple of 4."),et=et+3&-4,nt=nt+3&-4);const it=et,Xe=nt;let rt,Ze;131072&Ie[2]&&!1!==Ne&&($e=Math.max(1,Ie[7])),1===$e||(0,U.wt)(et)&&(0,U.wt)(nt)||(J.warn("Ignoring mipmaps of non power of two sized compressed texture."),$e=1);let lt=Ie[1]+4;const st=[];for(let Mt=0;Mt<$e;++Mt)Ze=(et+3>>2)*(nt+3>>2)*Se,rt=new Uint8Array(Ve,lt,Ze),st.push(rt),lt+=Ze,et=Math.max(1,et>>1),nt=Math.max(1,nt>>1);return{textureData:{type:"compressed",levels:st},internalFormat:He,width:it,height:Xe}}(Ie,Ne.hasMipmap);return Ne.samplingMode=We.levels.length>1?Z.cw.LINEAR_MIPMAP_LINEAR:Z.cw.LINEAR,Ne.hasMipmap=We.levels.length>1,Ne.internalFormat=Se,Ne.width=He,Ne.height=$e,new Q.x(Ve,Ne,We)}(Ne,this._createDescriptor(Ne),Ie),this._glTexture}_loadFromKTX2(Ne,Ie){return this._loadAsync(()=>(0,ae.pk)(Ne,this._createDescriptor(Ne),Ie).then(We=>(this._glTexture=We,We)))}_loadFromBasis(Ne,Ie){return this._loadAsync(()=>(0,ae.fX)(Ne,this._createDescriptor(Ne),Ie).then(We=>(this._glTexture=We,We)))}_loadFromPixelData(Ne,Ie){(0,Ae.hu)(this.params.width>0&&this.params.height>0);const We=this._createDescriptor(Ne);return We.pixelFormat=1===this.params.components?Z.VI.LUMINANCE:3===this.params.components?Z.VI.RGB:Z.VI.RGBA,We.width=this.params.width,We.height=this.params.height,this._glTexture=new Q.x(Ne,We,Ie),this._glTexture}_loadFromURL(Ne,Ie,We){var Se=this;return this._loadAsync(function(){var He=(0,D.Z)(function*($e){const et=yield(0,$.t)(We,{signal:$e});return(0,Y.k_)($e),Se._loadFromImage(Ne,et,Ie)});return function($e){return He.apply(this,arguments)}}())}_loadFromImageElement(Ne,Ie,We){var Se=this;return We.complete?this._loadFromImage(Ne,We,Ie):this._loadAsync(function(){var He=(0,D.Z)(function*($e){const et=yield(0,re.fY)(We,We.src,!1,$e);return(0,Y.k_)($e),Se._loadFromImage(Ne,et,Ie)});return function($e){return He.apply(this,arguments)}}())}_loadFromVideoElement(Ne,Ie,We){return We.readyState>=Ke.HAVE_CURRENT_DATA?this._loadFromImage(Ne,We,Ie):this._loadFromVideoElementAsync(Ne,Ie,We)}_loadFromVideoElementAsync(Ne,Ie,We){return this._loadAsync(Se=>new Promise((He,$e)=>{const et=()=>{We.removeEventListener("loadeddata",nt),We.removeEventListener("error",it),(0,W.hw)(Xe)},nt=()=>{We.readyState>=Ke.HAVE_CURRENT_DATA&&(et(),He(this._loadFromImage(Ne,We,Ie)))},it=rt=>{et(),$e(rt||new w.Z("Failed to load video"))};We.addEventListener("loadeddata",nt),We.addEventListener("error",it);const Xe=(0,Y.fu)(Se,()=>it((0,Y.zE)()))}))}_loadFromImage(Ne,Ie,We){const Se=Oe._getDataDimensions(Ie);this.params.width=Se.width,this.params.height=Se.height;const He=this._createDescriptor(Ne);return He.pixelFormat=3===this.params.components?Z.VI.RGB:Z.VI.RGBA,!this._requiresPowerOfTwo(Ne,He)||(0,U.wt)(Se.width)&&(0,U.wt)(Se.height)?(He.width=Se.width,He.height=Se.height,this._glTexture=new Q.x(Ne,He,Ie),this._glTexture):(this._glTexture=this._makePowerOfTwoTexture(Ne,Ie,Se,He,We),this._glTexture)}_loadAsync(Ne){const Ie=new AbortController;this._loadingController=Ie;const We=Ne(Ie.signal);this._loadingPromise=We;const Se=()=>{this._loadingController===Ie&&(this._loadingController=null),this._loadingPromise===We&&(this._loadingPromise=null)};return We.then(Se,Se),We}_requiresPowerOfTwo(Ne,Ie){const We=Z.e8.CLAMP_TO_EDGE,Se="number"==typeof Ie.wrapMode?Ie.wrapMode===We:Ie.wrapMode.s===We&&Ie.wrapMode.t===We;return!(0,Pe.Z)(Ne.gl)&&(Ie.hasMipmap||!Se)}_makePowerOfTwoTexture(Ne,Ie,We,Se,He){const{width:$e,height:et}=We,nt=(0,U.Sf)($e),it=(0,U.Sf)(et);let Xe;switch(Se.width=nt,Se.height=it,this.params.powerOfTwoResizeMode){case ue.CE.PAD:Se.textureCoordinateScaleFactor=[$e/nt,et/it],Xe=new Q.x(Ne,Se),Xe.updateData(0,0,0,$e,et,Ie);break;case ue.CE.STRETCH:case null:case void 0:Xe=this._stretchToPowerOfTwo(Ne,Ie,Se,He());break;default:(0,x.Bg)(this.params.powerOfTwoResizeMode)}return Se.hasMipmap&&Xe.generateMipmap(),Xe}_stretchToPowerOfTwo(Ne,Ie,We,Se){const He=new Q.x(Ne,We),$e=new we.X(Ne,{colorTarget:Z.Lm.TEXTURE,depthStencilTarget:Z.OU.NONE},He),et=new Q.x(Ne,{target:Z.No.TEXTURE_2D,pixelFormat:We.pixelFormat,dataType:Z.Br.UNSIGNED_BYTE,wrapMode:Z.e8.CLAMP_TO_EDGE,samplingMode:Z.cw.LINEAR,flipped:!!We.flipped,maxAnisotropy:8,preMultiplyAlpha:We.preMultiplyAlpha},Ie),nt=(0,Ee.ow)(Ne),it=Ne.getBoundFramebufferObject();return this._drawStretchedTexture(Ne,Se,$e,nt,et,He),this.requiresFrameUpdates?this._powerOfTwoStretchInfo={vao:nt,sourceTexture:et,framebuffer:$e}:(nt.dispose(!0),et.dispose(),$e.detachColorTexture(),$e.dispose()),Ne.bindFramebuffer(it),He}_drawStretchedTexture(Ne,Ie,We,Se,He,$e){Ne.bindFramebuffer(We);const et=Ne.getViewport();Ne.setViewport(0,0,$e.descriptor.width,$e.descriptor.height);const nt=Ne.bindTechnique(Ie);nt.setUniform4f("uColor",1,1,1,1),nt.bindTexture("tex",He),Ne.bindVAO(Se),Ne.drawArrays(Z.MX.TRIANGLE_STRIP,0,(0,Be._V)(Se,"geometry")),Ne.bindFramebuffer(null),Ne.setViewport(et.x,et.y,et.width,et.height)}unload(){if((0,W.pC)(this._powerOfTwoStretchInfo)){const{framebuffer:Ne,vao:Ie,sourceTexture:We}=this._powerOfTwoStretchInfo;Ie.dispose(!0),We.dispose(),Ne.dispose(),this._glTexture=null,this._powerOfTwoStretchInfo=null}if((0,W.pC)(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null),(0,W.pC)(this._loadingController)){const Ne=this._loadingController;this._loadingController=null,this._loadingPromise=null,Ne.abort()}this.events.emit("unloaded")}}Oe.DDS_ENCODING="image/vnd-ms.dds",Oe.KTX2_ENCODING="image/ktx2",Oe.BASIS_ENCODING="image/x.basis",(Ve=Ke||(Ke={}))[Ve.HAVE_NOTHING=0]="HAVE_NOTHING",Ve[Ve.HAVE_METADATA=1]="HAVE_METADATA",Ve[Ve.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",Ve[Ve.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",Ve[Ve.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"},80855:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>H});var D=T(98361),x=T(651),w=T(91056),B=T(39114),U=T(12407),W=T(67969),Y=T(2078);class H extends w.A{initializeProgram($){const re=H.shader.get().build();return new U.$($.rctx,re,B.i)}initializePipeline(){return(0,Y.sm)(this.configuration.hasAlpha?{blending:(0,Y.wK)(W.zi.SRC_ALPHA,W.zi.ONE,W.zi.ONE_MINUS_SRC_ALPHA,W.zi.ONE_MINUS_SRC_ALPHA),colorWrite:Y.BK}:{colorWrite:Y.BK})}}H.shader=new x.J(D.T,()=>T.e(6859).then(T.bind(T,98101)))},97825:(qe,xe,T)=>{"use strict";T.d(xe,{V:()=>w});var D=T(17626),x=T(87601);class w extends x.m{constructor(){super(...arguments),this.hasAlpha=!1}}(0,D._)([(0,x.o)()],w.prototype,"hasAlpha",void 0)},2282:(qe,xe,T)=>{"use strict";T.d(xe,{E6:()=>re,Kj:()=>oe,RQ:()=>Z,T:()=>Y,ep:()=>G,hu:()=>W,iV:()=>$,kG:()=>ae,tM:()=>X,u_:()=>ue,yK:()=>H,zF:()=>ie});var D=T(99770),x=T(993);const B=(0,T(4794).c)();class U{constructor(J){this.message=J}toString(){return`AssertException: ${this.message}`}}function W(Q,J){if(!Q)throw J=J||"assert",console.log(new Error(J).stack),new U(J)}function Y(Q,J){Q||(J=J||"",console.warn("Verify failed: "+J+"\n"+new Error("verify").stack))}function H(Q,J,se,ee){let le,ne=(se[0]-Q[0])/J[0],ce=(ee[0]-Q[0])/J[0];ne>ce&&(le=ne,ne=ce,ce=le);let de=(se[1]-Q[1])/J[1],me=(ee[1]-Q[1])/J[1];if(de>me&&(le=de,de=me,me=le),ne>me||de>ce)return!1;de>ne&&(ne=de),me<ce&&(ce=me);let _e=(se[2]-Q[2])/J[2],he=(ee[2]-Q[2])/J[2];return _e>he&&(le=_e,_e=he,he=le),!(ne>he||_e>ce||(he<ce&&(ce=he),ce<0))}function G(Q,J,se,ee,le,ne=(0,D.a)()){const ce=(ee[le]-se[le])*(J[0]-Q[0])-(ee[0]-se[0])*(J[le]-Q[le]);if(0===ce)return!1;const me=((ee[0]-se[0])*(Q[le]-se[le])-(ee[le]-se[le])*(Q[0]-se[0]))/ce;return ne[0]=Q[0]+me*(J[0]-Q[0]),ne[1]=Q[le]+me*(J[le]-Q[le]),!0}function $(Q,J,se,ee,le){le||(le=Q),B[0]=Q[0],B[1]=Q[1],B[2]=Q[2],B[3]=1,(0,x.t)(B,B,J),le.length>2&&(le[2]=-B[2]),(0,x.t)(B,B,se),W(0!==B[3]),le[0]=B[0]/B[3],le[1]=B[1]/B[3],le[2]=B[2]/B[3],le[0]=(.5*le[0]+.5)*ee[2]+ee[0],le[1]=(.5*le[1]+.5)*ee[3]+ee[1]}function re(Q,J){return Math.log(Q)/Math.log(J)}function ue(Q,J,se,ee){Q[12]=J,Q[13]=se,Q[14]=ee}function ae(Q){return 1===Q[0]&&0===Q[1]&&0===Q[2]&&0===Q[3]&&0===Q[4]&&1===Q[5]&&0===Q[6]&&0===Q[7]&&0===Q[8]&&0===Q[9]&&1===Q[10]&&0===Q[11]&&1===Q[15]}function oe(Q,J,se){return 2*Math.atan(Math.sqrt(J*J+se*se)*Math.tan(.5*Q)/J)}function ie(Q,J,se){return 2*Math.atan(Math.sqrt(J*J+se*se)*Math.tan(.5*Q)/se)}function X(Q,J,se){return 2*Math.atan(J*Math.tan(.5*Q)/Math.sqrt(J*J+se*se))}function Z(Q,J,se){return 2*Math.atan(se*Math.tan(.5*Q)/Math.sqrt(J*J+se*se))}},16396:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{T:()=>D}),(x=D||(D={})).POSITION="position",x.NORMAL="normal",x.UV0="uv0",x.AUXPOS1="auxpos1",x.AUXPOS2="auxpos2",x.MAPPOS="mapPos",x.COLOR="color",x.SYMBOLCOLOR="symbolColor",x.SIZE="size",x.TANGENT="tangent",x.OFFSET="offset",x.SUBDIVISIONFACTOR="subdivisionFactor",x.COLORFEATUREATTRIBUTE="colorFeatureAttribute",x.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",x.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",x.DISTANCETOSTART="distanceToStart",x.UVMAPSPACE="uvMapSpace",x.BOUNDINGRECT="boundingRect",x.UVREGION="uvRegion",x.NORMALCOMPRESSED="normalCompressed",x.PROFILERIGHT="profileRight",x.PROFILEUP="profileUp",x.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",x.FEATUREVALUE="featureValue",x.MODELORIGINHI="modelOriginHi",x.MODELORIGINLO="modelOriginLo",x.MODEL="model",x.MODELNORMAL="modelNormal",x.INSTANCECOLOR="instanceColor",x.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",x.LOCALTRANSFORM="localTransform",x.GLOBALTRANSFORM="globalTransform",x.BOUNDINGSPHERE="boundingSphere",x.MODELORIGIN="modelOrigin",x.MODELSCALEFACTORS="modelScaleFactors",x.FEATUREATTRIBUTE="featureAttribute",x.STATE="state",x.LODLEVEL="lodLevel",x.POSITION0="position0",x.POSITION1="position1",x.NORMALA="normalA",x.NORMALB="normalB",x.COMPONENTINDEX="componentIndex",x.VARIANTOFFSET="variantOffset",x.VARIANTSTROKE="variantStroke",x.VARIANTEXTENSION="variantExtension",x.U8PADDING="u8padding",x.U16PADDING="u16padding",x.SIDENESS="sideness",x.START="start",x.END="end",x.UP="up",x.EXTRUDE="extrude"},34103:(qe,xe,T)=>{"use strict";T.d(xe,{F:()=>$,e:()=>re});var D=T(61885),x=T(72392),w=T(62208),B=T(77029),U=T(42743),W=T(12699),Y=T(24425);const H=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"];var G=T(82274);class $ extends W.c{constructor(ae,oe=""){super(),this.apiLayerUid=oe,this.type=Y.U.Layer,this.events=new D.Z,this.isSliceable=!1,this._objects=new B.Z,this._stageHandles=new x.Z,this.apiLayerUid=oe,this.isVisible=ae?.isVisible??!0,this.isPickable=ae?.isPickable??!0,this.updatePolicy=ae?.updatePolicy??U.jq.ASYNC}get objects(){return this._objects}destroy(){this.detachStage(),this._stage=null}attachStage(ae){this.detachStage(),this._stage=ae;for(const oe of H)this._stageHandles.add(this.events.on(oe,ie=>ae.handleEvent(oe,ie)))}detachStage(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}add(ae){this._objects.push(ae),ae.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:ae}),(0,w.pC)(this._octree)&&this._octree.add([ae])}remove(ae){this._objects.removeUnordered(ae)&&(ae.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:ae}),(0,w.pC)(this._octree)&&this._octree.remove([ae]))}addMany(ae){this._objects.pushArray(ae);for(const oe of ae)oe.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:ae}),(0,w.pC)(this._octree)&&this._octree.add(ae)}removeMany(ae){const oe=new Array;if(this._objects.removeUnorderedMany(ae,ae.length,oe),0!==oe.length){for(const ie of oe)ie.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:oe}),(0,w.pC)(this._octree)&&this._octree.remove(oe)}}sync(){(0,w.pC)(this._stage)&&this.updatePolicy!==U.jq.SYNC&&this._stage.syncLayer(this.id)}notifyObjectBBChanged(ae,oe){(0,w.pC)(this._octree)&&this._octree.update(ae,oe)}getSpatialQueryAccelerator(){return(0,w.Wi)(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}shaderTransformationChanged(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}invalidateSpatialQueryAccelerator(){this._octree=(0,w.SC)(this._octree)}_createOctree(){this._octree=new G.Z(ae=>ae.boundingVolumeWorldSpace.bounds),this._octree.add(this._objects.data,this._objects.length)}}function re(ue){return(0,w.pC)(ue)&&ue.type===Y.U.Layer}},42743:(qe,xe,T)=>{"use strict";var D,x,w,B,U,W,Y,H,G,$,re,ue,ae,oe,ie;T.d(xe,{Am:()=>B,CE:()=>re,C_:()=>w,Gv:()=>x,Iq:()=>oe,JJ:()=>ae,MX:()=>$,Rw:()=>W,V_:()=>G,Vr:()=>D,Xx:()=>U,Yg:()=>ue,hU:()=>Y,jq:()=>H}),(ie=D||(D={}))[ie.None=0]="None",ie[ie.Front=1]="Front",ie[ie.Back=2]="Back",ie[ie.COUNT=3]="COUNT",function(ie){ie[ie.Less=0]="Less",ie[ie.Lequal=1]="Lequal",ie[ie.COUNT=2]="COUNT"}(x||(x={})),function(ie){ie[ie.NONE=0]="NONE",ie[ie.SMAA=1]="SMAA"}(w||(w={})),function(ie){ie[ie.Color=0]="Color",ie[ie.Alpha=1]="Alpha",ie[ie.FrontFace=2]="FrontFace",ie[ie.NONE=3]="NONE",ie[ie.COUNT=4]="COUNT"}(B||(B={})),function(ie){ie[ie.BACKGROUND=0]="BACKGROUND",ie[ie.UPDATE=1]="UPDATE"}(U||(U={})),function(ie){ie[ie.NOT_LOADED=0]="NOT_LOADED",ie[ie.LOADING=1]="LOADING",ie[ie.LOADED=2]="LOADED"}(W||(W={})),function(ie){ie[ie.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",ie[ie.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(Y||(Y={})),function(ie){ie[ie.ASYNC=0]="ASYNC",ie[ie.SYNC=1]="SYNC"}(H||(H={})),function(ie){ie[ie.Highlight=0]="Highlight",ie[ie.MaskOccludee=1]="MaskOccludee",ie[ie.COUNT=2]="COUNT"}(G||(G={})),function(ie){ie[ie.Triangle=0]="Triangle",ie[ie.Point=1]="Point",ie[ie.Line=2]="Line"}($||($={})),function(ie){ie[ie.STRETCH=1]="STRETCH",ie[ie.PAD=2]="PAD"}(re||(re={})),function(ie){ie[ie.CHANGED=0]="CHANGED",ie[ie.UNCHANGED=1]="UNCHANGED"}(ue||(ue={})),function(ie){ie[ie.Blend=0]="Blend",ie[ie.Opaque=1]="Opaque",ie[ie.Mask=2]="Mask",ie[ie.MaskBlend=3]="MaskBlend",ie[ie.COUNT=4]="COUNT"}(ae||(ae={})),function(ie){ie[ie.OFF=0]="OFF",ie[ie.ON=1]="ON"}(oe||(oe={}))},51445:(qe,xe,T)=>{"use strict";T.r(xe),T.d(xe,{EdgeProcessingWorker:()=>$,default:()=>ce,extract:()=>re,extractComponentsEdgeLocationsLayout:()=>ne,extractEdgeLocationsLayout:()=>le});var D=T(15861),x=T(13757);function w(de,me,_e){const he=me/3,ye=new Uint32Array(_e+1),fe=new Uint32Array(_e+1),De=(Be,Pe)=>{Be<Pe?ye[Be+1]++:fe[Pe+1]++};for(let Be=0;Be<he;Be++){const Pe=de[3*Be],Oe=de[3*Be+1],Ke=de[3*Be+2];De(Pe,Oe),De(Oe,Ke),De(Ke,Pe)}let ve=0,Ce=0;for(let Be=0;Be<_e;Be++){const Pe=ye[Be+1],Oe=fe[Be+1];ye[Be+1]=ve,fe[Be+1]=Ce,ve+=Pe,Ce+=Oe}const ge=new Uint32Array(6*he),Te=ye[_e],Le=(Be,Pe,Oe)=>{if(Be<Pe){const Ke=ye[Be+1]++;ge[2*Ke]=Pe,ge[2*Ke+1]=Oe}else{const Ke=fe[Pe+1]++;ge[2*Te+2*Ke]=Be,ge[2*Te+2*Ke+1]=Oe}};for(let Be=0;Be<he;Be++){const Pe=de[3*Be],Oe=de[3*Be+1],Ke=de[3*Be+2];Le(Pe,Oe,Be),Le(Oe,Ke,Be),Le(Ke,Pe,Be)}const je=(Be,Pe)=>{const Oe=2*Be,Ke=Pe-Be;for(let Ve=1;Ve<Ke;Ve++){const Ne=ge[Oe+2*Ve],Ie=ge[Oe+2*Ve+1];let We=Ve-1;for(;We>=0&&ge[Oe+2*We]>Ne;We--)ge[Oe+2*We+2]=ge[Oe+2*We],ge[Oe+2*We+3]=ge[Oe+2*We+1];ge[Oe+2*We+2]=Ne,ge[Oe+2*We+3]=Ie}};for(let Be=0;Be<_e;Be++)je(ye[Be],ye[Be+1]),je(Te+fe[Be],Te+fe[Be+1]);const ze=new Int32Array(3*he),Ee=(Be,Pe)=>Be===de[3*Pe]?0:Be===de[3*Pe+1]?1:Be===de[3*Pe+2]?2:-1,Ae=(Be,Pe)=>{const Oe=Ee(Be,Pe);ze[3*Pe+Oe]=-1},we=(Be,Pe,Oe,Ke)=>{const Ve=Ee(Be,Pe);ze[3*Pe+Ve]=Ke;const Ne=Ee(Oe,Ke);ze[3*Ke+Ne]=Pe};for(let Be=0;Be<_e;Be++){let Pe=ye[Be];const Oe=ye[Be+1];let Ke=fe[Be];const Ve=fe[Be+1];for(;Pe<Oe&&Ke<Ve;){const Ne=ge[2*Pe],Ie=ge[2*Te+2*Ke];Ne===Ie?(we(Be,ge[2*Pe+1],Ie,ge[2*Te+2*Ke+1]),Pe++,Ke++):Ne<Ie?(Ae(Be,ge[2*Pe+1]),Pe++):(Ae(Ie,ge[2*Te+2*Ke+1]),Ke++)}for(;Pe<Oe;)Ae(Be,ge[2*Pe+1]),Pe++;for(;Ke<Ve;)Ae(ge[2*Te+2*Ke],ge[2*Te+2*Ke+1]),Ke++}return ze}var B=T(19625),U=T(2975),W=T(16396),Y=T(7184),H=T(89917),G=T(25558);class ${extract(me){return(0,D.Z)(function*(){const _e=ue(me),he=re(_e),ye=[_e.data.buffer];return{result:ae(he,ye),transferList:ye}})()}extractComponentsEdgeLocations(me){return(0,D.Z)(function*(){const _e=ue(me),he=oe(_e.data,_e.skipDeduplicate,_e.indices,_e.indicesLength),ye=(0,G.n)(he,se,ee),fe=[];return{result:(0,U.HL)(ye.regular.instancesData,fe),transferList:fe}})()}extractEdgeLocations(me){return(0,D.Z)(function*(){const _e=ue(me),he=oe(_e.data,_e.skipDeduplicate,_e.indices,_e.indicesLength),ye=(0,G.n)(he,J,ee),fe=[];return{result:(0,U.HL)(ye.regular.instancesData,fe),transferList:fe}})()}}function re(de){const me=oe(de.data,de.skipDeduplicate,de.indices,de.indicesLength);return ie.updateSettings(de.writerSettings),X.updateSettings(de.writerSettings),(0,G.n)(me,ie,X)}function ue(de){return{data:Y.tf.createView(de.dataBuffer),indices:"Uint32Array"===de.indicesType?new Uint32Array(de.indicesBuffer):"Uint16Array"===de.indicesType?new Uint16Array(de.indicesBuffer):void 0,indicesLength:de.indicesLength,writerSettings:de.writerSettings,skipDeduplicate:de.skipDeduplicate}}function ae(de,me){return me.push(de.regular.lodInfo.lengths.buffer),me.push(de.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,U.HL)(de.regular.instancesData,me),lodInfo:{lengths:de.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,U.HL)(de.silhouette.instancesData,me),lodInfo:{lengths:de.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:de.averageEdgeLength}}function oe(de,me,_e,he){if(me)return{faces:_e,facesLength:he,neighbors:w(_e,he,de.count),vertices:de};const ye=(0,x.d)(de.buffer,de.stride/4,{originalIndices:_e,originalIndicesLength:he}),fe=w(ye.indices,he,ye.uniqueCount);return{faces:ye.indices,facesLength:ye.indices.length,neighbors:fe,vertices:Y.tf.createView(ye.buffer)}}const ie=new H.D9,X=new H.qE,J=new class Z{allocate(me){return le.createBuffer(me)}trim(me,_e){return me.slice(0,_e)}write(me,_e,he){me.position0.setVec(_e,he.position0),me.position1.setVec(_e,he.position1)}},se=new class Q{allocate(me){return ne.createBuffer(me)}trim(me,_e){return me.slice(0,_e)}write(me,_e,he){me.position0.setVec(_e,he.position0),me.position1.setVec(_e,he.position1),me.componentIndex.set(_e,he.componentIndex)}},ee={allocate:()=>null,write:()=>{},trim:()=>null},le=(0,B.U$)().vec3f(W.T.POSITION0).vec3f(W.T.POSITION1),ne=(0,B.U$)().vec3f(W.T.POSITION0).vec3f(W.T.POSITION1).u16(W.T.COMPONENTINDEX).u16(W.T.U16PADDING,{glPadding:!0});function ce(){return new $}},14171:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>W});var D=T(15861),x=T(55713),w=T(42930),B=T(2975),U=T(51445);class W extends w.q{constructor(H){super("EdgeProcessingWorker","extract",{extract:G=>[G.dataBuffer],extractComponentsEdgeLocations:G=>[G.dataBuffer],extractEdgeLocations:G=>[G.dataBuffer]},H)}process(H,G,$){var re=this;return(0,D.Z)(function*(){if($)return(0,U.extract)(H);const ue=re._packInput(H),ae=yield re.invoke(ue,G);return re._unpackOutput(ae)})()}extractEdgeLocations(H,G){var $=this;return(0,D.Z)(function*(){const re=$._packInput(H),ue=yield $.invokeMethod("extractEdgeLocations",re,G);return(0,B.aj)(ue)})()}extractComponentsEdgeLocations(H,G){var $=this;return(0,D.Z)(function*(){const re=$._packInput(H),ue=yield $.invokeMethod("extractComponentsEdgeLocations",re,G);return(0,B.aj)(ue)})()}_packInput(H){return{dataBuffer:H.data.buffer,writerSettings:H.writerSettings,skipDeduplicate:H.skipDeduplicate,indicesBuffer:H.indices.buffer,indicesType:(0,x.ZY)(H.indices)?"Uint32Array":"Uint16Array",indicesLength:H.indicesLength}}_unpackOutput(H){return{regular:{instancesData:(0,B.aj)(H.regular.instancesData),lodInfo:{lengths:new Float32Array(H.regular.lodInfo.lengths)}},silhouette:{instancesData:(0,B.aj)(H.silhouette.instancesData),lodInfo:{lengths:new Float32Array(H.silhouette.lodInfo.lengths)}},averageEdgeLength:H.averageEdgeLength}}}},7184:(qe,xe,T)=>{"use strict";T.d(xe,{Hr:()=>G,dG:()=>H,dx:()=>W,rD:()=>U,so:()=>$,tf:()=>B});var D=T(4511),x=T(19625),w=T(16396);const B=(0,x.U$)().vec3f(w.T.POSITION).u16(w.T.COMPONENTINDEX).u16(w.T.U16PADDING),U=(0,x.U$)().vec2u8(w.T.SIDENESS),W=(0,D.K)(U),Y=(0,x.U$)().vec3f(w.T.POSITION0).vec3f(w.T.POSITION1).u16(w.T.COMPONENTINDEX).u8(w.T.VARIANTOFFSET,{glNormalized:!0}).u8(w.T.VARIANTSTROKE).u8(w.T.VARIANTEXTENSION,{glNormalized:!0}).u8(w.T.U8PADDING,{glPadding:!0}).u16(w.T.U16PADDING,{glPadding:!0}),H=Y.clone().vec3f(w.T.NORMAL),G=Y.clone().vec3f(w.T.NORMALA).vec3f(w.T.NORMALB),$=new Map([[w.T.POSITION0,0],[w.T.POSITION1,1],[w.T.COMPONENTINDEX,2],[w.T.VARIANTOFFSET,3],[w.T.VARIANTSTROKE,4],[w.T.VARIANTEXTENSION,5],[w.T.NORMAL,6],[w.T.NORMALA,6],[w.T.NORMALB,7],[w.T.SIDENESS,8]])},89917:(qe,xe,T)=>{"use strict";T.d(xe,{D9:()=>ie,qE:()=>X});var D=T(4619),x=T(84161),w=T(28093),B=T(4511),U=T(7184);class W{updateSettings(se){this.settings=se,this.edgeHashFunction=se.reducedPrecision?re:$}write(se,ee,le){const ne=this.edgeHashFunction(le);Q.seed=ne;const ce=Q.getIntRange(0,255),de=Q.getIntRange(0,this.settings.variants-1),_e=Q.getFloat(),he=255*(.5*function oe(J,se){const ee=J<0?-1:1;return Math.abs(J)**se*ee}(-(1-Math.min(_e/.7,1))+Math.max(0,_e-.7)/(1-.7),1.2)+.5);se.position0.setVec(ee,le.position0),se.position1.setVec(ee,le.position1),se.componentIndex.set(ee,le.componentIndex),se.variantOffset.set(ee,ce),se.variantStroke.set(ee,de),se.variantExtension.set(ee,he)}trim(se,ee){return se.slice(0,ee)}}const Y=new Float32Array(6),H=new Uint32Array(Y.buffer),G=new Uint32Array(1);function $(J){const se=Y;se[0]=J.position0[0],se[1]=J.position0[1],se[2]=J.position0[2],se[3]=J.position1[0],se[4]=J.position1[1],se[5]=J.position1[2],G[0]=5381;for(let ee=0;ee<H.length;ee++)G[0]=31*G[0]+H[ee];return G[0]}function re(J){const se=Y;se[0]=ae(J.position0[0]),se[1]=ae(J.position0[1]),se[2]=ae(J.position0[2]),se[3]=ae(J.position1[0]),se[4]=ae(J.position1[1]),se[5]=ae(J.position1[2]),G[0]=5381;for(let ee=0;ee<H.length;ee++)G[0]=31*G[0]+H[ee];return G[0]}function ae(J){return Math.round(1e4*J)/1e4}class ie{constructor(){this.commonWriter=new W}updateSettings(se){this.commonWriter.updateSettings(se)}allocate(se){return U.dG.createBuffer(se)}write(se,ee,le){this.commonWriter.write(se,ee,le),(0,x.a)(Z,le.faceNormal0,le.faceNormal1),(0,x.n)(Z,Z),se.normal.setVec(ee,Z)}trim(se,ee){return this.commonWriter.trim(se,ee)}}ie.Layout=U.dG,ie.glLayout=(0,B.K)(U.dG,1);class X{constructor(){this.commonWriter=new W}updateSettings(se){this.commonWriter.updateSettings(se)}allocate(se){return U.Hr.createBuffer(se)}write(se,ee,le){this.commonWriter.write(se,ee,le),se.normalA.setVec(ee,le.faceNormal0),se.normalB.setVec(ee,le.faceNormal1)}trim(se,ee){return this.commonWriter.trim(se,ee)}}X.Layout=U.Hr,X.glLayout=(0,B.K)(U.Hr,1);const Z=(0,w.c)(),Q=new D.Z},25558:(qe,xe,T)=>{"use strict";T.d(xe,{P:()=>Y,n:()=>H});var D=T(85931),x=T(21286),w=T(55713),B=T(84161),U=T(28093);const W=-1;var Y,Z;function H(Z,Q,J,se=X){const ee=Z.vertices.position,le=Z.vertices.componentIndex,ne=(0,x.Vl)(se.anglePlanar),ce=(0,x.Vl)(se.angleSignificantEdge),de=Math.cos(ce),me=Math.cos(ne),_e=oe.edge,he=_e.position0,ye=_e.position1,fe=_e.faceNormal0,De=_e.faceNormal1,ve=function ae(Z){const Q=Z.faces.length/3,J=Z.vertices.position,se=Z.faces,ee=ie.v0,le=ie.v1,ne=ie.v2,ce=new Float32Array(3*Q);for(let de=0;de<Q;de++){const _e=se[3*de+1],he=se[3*de+2];J.getVec(se[3*de+0],ee),J.getVec(_e,le),J.getVec(he,ne),(0,B.b)(le,le,ee),(0,B.b)(ne,ne,ee),(0,B.f)(ee,le,ne),(0,B.n)(ee,ee),ce[3*de+0]=ee[0],ce[3*de+1]=ee[1],ce[3*de+2]=ee[2]}return ce}(Z),Ce=function ue(Z){const Q=Z.faces.length/3,J=Z.faces,se=Z.neighbors;let ee=0;for(let ce=0;ce<Q;ce++){const he=J[3*ce+0],ye=J[3*ce+1],fe=J[3*ce+2];ee+=se[3*ce+0]===W||he<ye?1:0,ee+=se[3*ce+1]===W||ye<fe?1:0,ee+=se[3*ce+2]===W||fe<he?1:0}const le=new Int32Array(4*ee);let ne=0;for(let ce=0;ce<Q;ce++){const de=se[3*ce+0],me=se[3*ce+1],_e=se[3*ce+2],he=J[3*ce+0],ye=J[3*ce+1],fe=J[3*ce+2];(de===W||he<ye)&&(le[ne++]=he,le[ne++]=ye,le[ne++]=ce,le[ne++]=de),(me===W||ye<fe)&&(le[ne++]=ye,le[ne++]=fe,le[ne++]=ce,le[ne++]=me),(_e===W||fe<he)&&(le[ne++]=fe,le[ne++]=he,le[ne++]=ce,le[ne++]=_e)}return le}(Z),ge=Ce.length/4,Te=Q.allocate(ge);let Le=0;const ze=J.allocate(ge);let Ee=0,Ae=0,we=0;const Be=(0,D.w6)(0,ge),Pe=new Float32Array(ge);(0,w.Ed)(Pe,(Ie,We,Se)=>{ee.getVec(Ce[4*We+0],he),ee.getVec(Ce[4*We+1],ye),Se[We]=(0,B.i)(he,ye)}),Be.sort((Ie,We)=>Pe[We]-Pe[Ie]);const Oe=new Array,Ke=new Array;for(let Ie=0;Ie<ge;Ie++){const We=Be[Ie],Se=Pe[We],He=Ce[4*We+0],$e=Ce[4*We+1],et=Ce[4*We+2],nt=Ce[4*We+3],it=nt===W;if(ee.getVec(He,he),ee.getVec($e,ye),it)(0,B.s)(fe,ve[3*et+0],ve[3*et+1],ve[3*et+2]),(0,B.c)(De,fe),_e.componentIndex=le.get(He),_e.cosAngle=(0,B.e)(fe,De);else{if((0,B.s)(fe,ve[3*et+0],ve[3*et+1],ve[3*et+2]),(0,B.s)(De,ve[3*nt+0],ve[3*nt+1],ve[3*nt+2]),_e.componentIndex=le.get(He),_e.cosAngle=(0,B.e)(fe,De),$(_e,me))continue;_e.cosAngle<-.9999&&(0,B.c)(De,fe)}Ae+=Se,we++,it||G(_e,de)?(Q.write(Te,Le++,_e),Oe.push(Se)):re(_e,ne)&&(J.write(ze,Ee++,_e),Ke.push(Se))}const Ve=new Float32Array(Oe.reverse()),Ne=new Float32Array(Ke.reverse());return{regular:{instancesData:Q.trim(Te,Le),lodInfo:{lengths:Ve}},silhouette:{instancesData:J.trim(ze,Ee),lodInfo:{lengths:Ne}},averageEdgeLength:Ae/we}}function G(Z,Q){return Z.cosAngle<Q}function $(Z,Q){return Z.cosAngle>Q}function re(Z,Q){const J=(0,x.ZF)(Z.cosAngle),se=oe.fwd,ee=oe.ortho;return(0,B.r)(se,Z.position1,Z.position0),J*((0,B.e)((0,B.f)(ee,Z.faceNormal0,Z.faceNormal1),se)>0?-1:1)>Q}(Z=Y||(Y={}))[Z.SOLID=0]="SOLID",Z[Z.SKETCH=1]="SKETCH";const oe={edge:{position0:(0,U.c)(),position1:(0,U.c)(),faceNormal0:(0,U.c)(),faceNormal1:(0,U.c)(),componentIndex:0,cosAngle:0},ortho:(0,U.c)(),fwd:(0,U.c)()},ie={v0:(0,U.c)(),v1:(0,U.c)(),v2:(0,U.c)()},X={anglePlanar:4,angleSignificantEdge:35}},17803:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{i:()=>D}),(x=D||(D={}))[x.INVISIBLE=0]="INVISIBLE",x[x.TRANSPARENT=1]="TRANSPARENT",x[x.OPAQUE=2]="OPAQUE"},36848:(qe,xe,T)=>{"use strict";T.d(xe,{DX:()=>H,NO:()=>$,cM:()=>G,p:()=>Y,qZ:()=>re});var D=T(84161),x=T(28093),w=T(11544);let B=(()=>{const X=new Uint32Array(131072);for(let Z=0;Z<X.length;++Z)X[Z]=Z;return X})();const U=new Uint16Array([0]),W=(()=>{const X=new Uint16Array(65536);for(let Z=0;Z<X.length;++Z)X[Z]=Z;return X})();function Y(X){if(1===X)return U;if(X<W.length)return new Uint16Array(W.buffer,0,X);if(X>B.length){const Z=Math.max(2*B.length,X);B=new Uint32Array(Z);for(let Q=0;Q<B.length;Q++)B[Q]=Q}return new Uint32Array(B.buffer,0,X)}function H(X){if(1===X)return new Uint16Array(U);if(X<W.length)return new Uint16Array(W.slice(0,X));if(X>B.length){const Z=new Uint32Array(X);for(let Q=0;Q<Z.length;Q++)Z[Q]=Q;return Z}return new Uint32Array(B.slice(0,X))}function G(X,Z,Q){if(!X)return!1;const{size:J,data:se}=X;(0,D.s)(Q,0,0,0),(0,D.s)(ie,0,0,0);let ee=0,le=0;for(let ne=0;ne<Z.length-2;ne+=3){const ce=Z[ne+0]*J,de=Z[ne+1]*J,me=Z[ne+2]*J;(0,D.s)(ue,se[ce+0],se[ce+1],se[ce+2]),(0,D.s)(ae,se[de+0],se[de+1],se[de+2]),(0,D.s)(oe,se[me+0],se[me+1],se[me+2]);const _e=(0,w.bE)(ue,ae,oe);_e?((0,D.a)(ue,ue,ae),(0,D.a)(ue,ue,oe),(0,D.g)(ue,ue,1/3*_e),(0,D.a)(Q,Q,ue),ee+=_e):((0,D.a)(ie,ie,ue),(0,D.a)(ie,ie,ae),(0,D.a)(ie,ie,oe),le+=3)}return!(0===le&&0===ee||(0!==ee?((0,D.g)(Q,Q,1/ee),0):0===le||((0,D.g)(Q,ie,1/le),0)))}function $(X,Z,Q){if(!X||!Z)return!1;const{size:J,data:se}=X;(0,D.s)(Q,0,0,0);let ee=-1,le=0;for(let ne=0;ne<Z.length;ne++){const ce=Z[ne]*J;ee!==ce&&(Q[0]+=se[ce+0],Q[1]+=se[ce+1],Q[2]+=se[ce+2],le++),ee=ce}return le>1&&(0,D.g)(Q,Q,1/le),le>0}function re(X,Z,Q,J){if(!X)return!1;const{size:se,data:ee}=X;(0,D.s)(J,0,0,0),(0,D.s)(ie,0,0,0);let le=0,ne=0;const ce=Z?Z.length-1:ee.length/se-1,de=ce+(Q?2:0);for(let me=0;me<de;me+=2){const _e=me<ce?me:ce,he=me<ce?me+1:0,ye=(Z?Z[_e]:_e)*se,fe=(Z?Z[he]:he)*se;ue[0]=ee[ye+0],ue[1]=ee[ye+1],ue[2]=ee[ye+2],ae[0]=ee[fe+0],ae[1]=ee[fe+1],ae[2]=ee[fe+2],(0,D.g)(ue,(0,D.a)(ue,ue,ae),.5);const De=(0,D.j)(ue,ae);De>0?((0,D.a)(J,J,(0,D.g)(ue,ue,De)),le+=De):((0,D.a)(ie,ie,ue),ne++)}return 0!==le?((0,D.g)(J,J,1/le),!0):0!==ne&&((0,D.g)(J,ie,1/ne),!0)}const ue=(0,x.c)(),ae=(0,x.c)(),oe=(0,x.c)(),ie=(0,x.c)()},19597:(qe,xe,T)=>{"use strict";T.d(xe,{E9:()=>H,YO:()=>re,hf:()=>ue,l_:()=>$,ow:()=>Y});var D=T(39114),x=T(59631),w=T(83994),B=T(67969),U=T(55086),W=T(49353);function Y(ae,oe=x.QI,ie=D.i,X=-1,Z=1){let Q=null;return Q=oe===x.Bn?new Float32Array([X,X,0,0,Z,X,1,0,X,Z,0,1,Z,Z,1,1]):new Float32Array([X,X,Z,X,X,Z,Z,Z]),new W.U(ae,ie,{geometry:oe},{geometry:w.f.createVertex(ae,B.l1.STATIC_DRAW,Q)})}function H(ae,oe=x.QI,ie=D.i){const X=new Float32Array([-1,-1,3,-1,-1,3]);return new W.U(ae,ie,{geometry:oe},{geometry:w.f.createVertex(ae,B.l1.STATIC_DRAW,X)})}function $(ae,oe=4){return new U.x(ae,{target:B.No.TEXTURE_2D,pixelFormat:B.VI.RGBA,dataType:B.Br.UNSIGNED_BYTE,samplingMode:B.cw.NEAREST,width:oe,height:oe})}function re(ae,oe,ie=4){const X=new Uint8Array(ie*ie*4);for(let Z=0;Z<X.length;Z+=4)X[Z+0]=255*oe[0],X[Z+1]=255*oe[1],X[Z+2]=255*oe[2],X[Z+3]=255*oe[3];return new U.x(ae,{target:B.No.TEXTURE_2D,pixelFormat:B.VI.RGBA,dataType:B.Br.UNSIGNED_BYTE,samplingMode:B.cw.NEAREST,width:ie,height:ie},X)}function ue(ae){return new U.x(ae,{target:B.No.TEXTURE_2D,pixelFormat:B.VI.RGBA,dataType:B.Br.UNSIGNED_BYTE,samplingMode:B.cw.NEAREST,width:1,height:1},new Uint8Array([255,255,255,255]))}},91480:(qe,xe,T)=>{"use strict";T.d(xe,{G1:()=>G,e4:()=>Y,es:()=>H,nn:()=>W});var D=T(62208),x=T(84161),w=T(28093),B=T(41743),U=T(67857);function W(re){return(0,D.pC)(re)&&(0,D.pC)(re.dist)}function Y(re){return(ue,ae,oe)=>((0,x.h)($,ue,ae,oe),!(0,B.e)(re,$))}function H(re){return W(re)&&re.intersector===U.q7.OBJECT&&!!re.target}function G(re){return W(re)&&re.intersector===U.q7.HUD&&!!re.target&&(0,D.pC)(re.target.center)}const $=(0,w.c)()},55314:(qe,xe,T)=>{"use strict";T.d(xe,{VB:()=>J,_s:()=>se,tB:()=>ue,bK:()=>ae,J4:()=>re});var D=T(62208),x=T(28347),w=T(28093),B=T(5548),U=T(97126),W=T(77926),Y=T(90793),H=T(91480),G=T(67857);function $(le){return(0,H.nn)(le)&&le.intersector===G.q7.LOD&&!!le.target}function re(le,ne){return(0,H.es)(le)||(0,H.G1)(le)?Q(le.target.object.metadata,ne):(0,Y.T)(le)?ne.map?.ground:(0,W.a)(le)||(0,W.G)(le)||(0,Y.j)(le)?Q(le.target,ne):null}function ue(le,ne){const ce=ae(le,ne);return(0,D.pC)(ce)&&"graphic"===ce.type?ce.graphic:null}function ae(le,ne){if((0,D.Wi)(le))return null;if((0,H.es)(le)||(0,H.G1)(le))return oe(le.target.object.metadata,ne);if((0,W.a)(le)){const ce=le.target.createGraphic();return{type:"graphic",graphic:ce,layer:ce.layer}}return(0,Y.j)(le)||$(le)?oe(le.target,ne):(0,W.G)(le)?function ie(le,ne){const ce=Q(le,ne);if((0,D.Wi)(ce))return null;const de=ne.allLayerViews.find(me=>me.layer===ce);return de&&!de.suspended&&"getGraphicFromIntersectorTarget"in de?function Z(le){return(0,D.pC)(le)?{type:"graphic",graphic:le,layer:le.layer}:null}(de.getGraphicFromIntersectorTarget(le)):null}(le.target,ne):null}function oe(le,ne){if((0,D.Wi)(le)||(0,D.Wi)(le.graphicUid))return null;const ce=Q(le,ne);if((0,D.Wi)(ce))return null;if(ce===ne.graphics)return(0,D.Wi)(ne.graphicsView)||"number"!=typeof le.graphicUid?null:ne.graphicsView.getHit(le.graphicUid);const de=ne.allLayerViews.find(me=>me.layer===ce);return!de||de.suspended||(0,D.Wi)(le.graphicUid)?null:"getHit"in de?de.getHit(le.graphicUid):null}function Q(le,ne){return(0,D.Wi)(le.layerUid)?null:(0,D.pC)(ne.graphicsView)&&le.layerUid===ne.graphicsView.processor.layer.id?ne.graphics:ne.map.findLayerByUid(le.layerUid)}function J(le,ne){if((0,H.es)(le)||(0,H.G1)(le))return(0,U.d)(le.target.object.boundingVolumeWorldSpace.bounds);if($(le)){(0,x.x)(ee,le.transformation);const ce=Math.max(ee[0],ee[1],ee[2]);return le.target.baseBoundingSphere.radius*ce}return(0,W.G)(le)?(0,D.yw)(function X(le,ne){const ce=Q(le,ne);if((0,D.Wi)(ce))return null;const de=ne.allLayerViews.find(me=>me.layer===ce);return de&&!de.suspended&&"getAABBFromIntersectorTarget"in de?de.getAABBFromIntersectorTarget(le):null}(le.target,ne),ce=>.5*(0,B.wz)(ce)):null}function se(le){return!(0,H.es)(le)&&!(0,H.G1)(le)&&($(le)?le.target.numLodLevels>1:!!(0,W.G)(le))}const ee=(0,w.c)()},47526:(qe,xe,T)=>{"use strict";T.d(xe,{HI:()=>W,VQ:()=>w,VV:()=>B,aH:()=>x,ci:()=>U});var D=T(85931);function x(Y){const H=[];return Y.levels.forEach(G=>{G.components.forEach($=>{H.push($.material)})}),(0,D.Tw)(H)}function w(Y){const H=new Array;return Y.levels.forEach(G=>{G.components.forEach($=>{$.textures&&H.push(...$.textures)})}),(0,D.Tw)(H)}function B(Y){const H=[];return Y.components.forEach(G=>{H.push(G.geometry)}),(0,D.Tw)(H)}function U(Y){const H=[];return Y.levels.forEach(G=>{G.components.forEach($=>{H.push($.geometry)})}),(0,D.Tw)(H)}function W(Y){return B(Y).reduce((H,G)=>H+G.indexCount/3,0)}},83196:(qe,xe,T)=>{"use strict";T.d(xe,{q:()=>x});var D=T(26594);function x(B){const U=new Map,W=Y=>{let H=U.get(Y);return H||(H=new D.t9,U.set(Y,H)),H};return B.removes.forAll(Y=>{w(Y)&&W(Y.material).removes.push(Y)}),B.adds.forAll(Y=>{w(Y)&&W(Y.material).adds.push(Y)}),B.updates.forAll(Y=>{w(Y.renderGeometry)&&W(Y.renderGeometry.material).updates.push(Y)}),U}function w(B){return B.data.indexCount>=1}},17962:(qe,xe,T)=>{"use strict";T.d(xe,{Gw:()=>w,PV:()=>$,TU:()=>re,bA:()=>ue,n9:()=>B,sX:()=>H});var D=T(21286),x=T(59617);function w(J,se){return new ae(J,oe,se)}function B(J,se){const{curvatureDependent:ee,scaleStart:le,scaleFallOffRange:ne}=oe;return new ae(J,{curvatureDependent:{min:{curvature:ee.min.curvature,tiltAngle:ee.min.tiltAngle,scaleFallOffFactor:ie.curvatureDependent.min.scaleFallOffFactor},max:{curvature:ee.max.curvature,tiltAngle:ee.max.tiltAngle,scaleFallOffFactor:ie.curvatureDependent.max.scaleFallOffFactor}},scaleStart:le,scaleFallOffRange:ne,minPixelSize:ie.minPixelSize},se)}function W(J,se,ee){const le=ee.parameters,ne=ee.paddingPixelsOverride;return Z.scale=Math.min(le.divisor/(se-le.offset),1),Z.factor=function U(J){return Math.abs(J*J*J)}(J),Z.minPixelSize=le.minPixelSize,Z.paddingPixels=ne,Z}function Y(J,se){return 0===J?se.minPixelSize:se.minPixelSize*(1+2*se.paddingPixels/J)}function H(J,se){return Math.max((0,D.t7)(J*se.scale,J,se.factor),Y(J,se))}function $(J,se,ee,le){le.scale=function G(J,se,ee){const le=W(J,se,ee);return le.minPixelSize=0,le.paddingPixels=0,H(1,le)}(J,se,ee),le.factor=0,le.minPixelSize=ee.parameters.minPixelSize,le.paddingPixels=ee.paddingPixelsOverride}function re(J,se,ee=[0,0]){const le=Math.min(Math.max(se.scale,Y(J[1],se)/Math.max(1e-5,J[1])),1);return ee[0]=J[0]*le,ee[1]=J[1]*le,ee}function ue(J,se,ee,le){return H(J,W(se,ee,le))}class ae{constructor(se,ee,le,ne={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},ce){this.viewingMode=se,this.description=ee,this.ellipsoidRadius=le,this.parameters=ne,this._paddingPixelsOverride=ce,this.viewingMode===x.JY.Local?(this.coverageCompensation=this._surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this._surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}get paddingPixelsOverride(){return this._paddingPixelsOverride||this.parameters.paddingPixels}update(se){return!(this.parameters&&this.parameters.camera.fovY===se.fovY&&this.parameters.camera.distance===se.distance||(this._calculateParameters(se,this.ellipsoidRadius,this.parameters),0))}overridePadding(se){return se!==this.paddingPixelsOverride?new ae(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,se):this}_calculateParameters(se,ee,le){const{scaleStart:ne,scaleFallOffRange:ce,minPixelSize:de}=this.description,{fovY:me,distance:_e}=se,he=this.calculateCurvatureDependentParameters(se,ee),ye=this.coverageCompensation(se,ee,he),{tiltAngle:fe,scaleFallOffFactor:De}=he,ve=Math.sin(fe)*_e,Ce=.5*Math.PI-fe-me*(.5-ne*ye),ge=ve/Math.cos(Ce),Le=(ge-De*(ve/Math.cos(Ce+me*ce*ye)))/(1-De);return le.camera.fovY=se.fovY,le.camera.distance=se.distance,le.offset=Le,le.divisor=ge-Le,le.minPixelSize=de,le}_calculateCurvatureDependentParametersLocal(se,ee,le=Q){return le.tiltAngle=this.description.curvatureDependent.min.tiltAngle,le.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor,le}_calculateCurvatureDependentParametersGlobal(se,ee,le=Q){const ne=this.description.curvatureDependent,ce=1+se.distance/ee,de=Math.sqrt(ce*ce-1),[me,_e]=[ne.min.curvature,ne.max.curvature],he=(0,D.uZ)((de-me)/(_e-me),0,1),[ye,fe]=[ne.min,ne.max];return le.tiltAngle=(0,D.t7)(ye.tiltAngle,fe.tiltAngle,he),le.scaleFallOffFactor=(0,D.t7)(ye.scaleFallOffFactor,fe.scaleFallOffFactor,he),le}_surfaceCoverageCompensationLocal(se,ee,le){return(se.fovY-le.tiltAngle)/se.fovY}_surfaceCoverageCompensationGlobal(se,ee,le){const ne=ee*ee,ce=le.tiltAngle+.5*Math.PI,{fovY:de,distance:me}=se,_e=me*me+ne-2*Math.cos(ce)*me*ee,he=Math.sqrt(_e),ye=Math.sqrt(_e-ne);return(Math.acos(ye/he)-Math.asin(ee/(he/Math.sin(ce)))+.5*de)/de}}const oe={curvatureDependent:{min:{curvature:(0,D.Vl)(10),tiltAngle:(0,D.Vl)(12),scaleFallOffFactor:.5},max:{curvature:(0,D.Vl)(70),tiltAngle:(0,D.Vl)(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},ie={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14},Z={scale:0,factor:0,minPixelSize:0,paddingPixels:0},Q={tiltAngle:0,scaleFallOffFactor:0}},39782:(qe,xe,T)=>{"use strict";T.d(xe,{p:()=>x,y:()=>D});const D={orderedRepackingEnabled:!1},x={rootOrigin:null}},40841:(qe,xe,T)=>{"use strict";T.d(xe,{W9:()=>ee,cy:()=>me,iO:()=>ne,lV:()=>de,yn:()=>ue});var D=T(62208),x=T(30217),w=T(550),B=T(28347),U=T(43703),W=T(48977),Y=T(78451),H=T(84161),G=T(14658),$=T(28093),re=T(97126);class ue{constructor(){this._transform=(0,U.c)(),this._transformInverse=new ae({value:this._transform},B.a,U.c),this._transformInverseTranspose=new ae(this._transformInverse,B.t,U.c),this._transformTranspose=new ae({value:this._transform},B.t,U.c),this._transformInverseRotation=new ae({value:this._transform},x.n,w.c)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(ye){(0,B.c)(this._transform,ye)}multiplyTransform(ye){(0,B.m)(this._transform,this._transform,ye)}set(ye){(0,B.c)(this._transform,ye),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(ye,fe){this.setTransformMatrix(ye),this.multiplyTransform(fe),this._invalidateLazyTransforms()}}class ae{constructor(ye,fe,De){this.original=ye,this.update=fe,this.dirty=!0,this.transform=De()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}const ie=(0,$.c)(),X=(0,$.c)(),Z=(0,$.c)(),se=new class J{constructor(ye=0){this.offset=ye,this.sphere=(0,re.c)(),this.tmpVertex=(0,$.c)()}applyToVertex(ye,fe,De){const ve=this.objectTransform.transform;let Ce=ve[0]*ye+ve[4]*fe+ve[8]*De+ve[12],ge=ve[1]*ye+ve[5]*fe+ve[9]*De+ve[13],Te=ve[2]*ye+ve[6]*fe+ve[10]*De+ve[14];const Le=this.offset/Math.sqrt(Ce*Ce+ge*ge+Te*Te);Ce+=Ce*Le,ge+=ge*Le,Te+=Te*Le;const je=this.objectTransform.inverse;return this.tmpVertex[0]=je[0]*Ce+je[4]*ge+je[8]*Te+je[12],this.tmpVertex[1]=je[1]*Ce+je[5]*ge+je[9]*Te+je[13],this.tmpVertex[2]=je[2]*Ce+je[6]*ge+je[10]*Te+je[14],this.tmpVertex}applyToMinMax(ye,fe){const De=this.offset/Math.sqrt(ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2]);ye[0]+=ye[0]*De,ye[1]+=ye[1]*De,ye[2]+=ye[2]*De;const ve=this.offset/Math.sqrt(fe[0]*fe[0]+fe[1]*fe[1]+fe[2]*fe[2]);fe[0]+=fe[0]*ve,fe[1]+=fe[1]*ve,fe[2]+=fe[2]*ve}applyToAabb(ye){const fe=this.offset/Math.sqrt(ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2]);ye[0]+=ye[0]*fe,ye[1]+=ye[1]*fe,ye[2]+=ye[2]*fe;const De=this.offset/Math.sqrt(ye[3]*ye[3]+ye[4]*ye[4]+ye[5]*ye[5]);return ye[3]+=ye[3]*De,ye[4]+=ye[4]*De,ye[5]+=ye[5]*De,ye}applyToBoundingSphere(ye){const fe=Math.sqrt(ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2]),De=this.offset/fe;return this.sphere[0]=ye[0]+ye[0]*De,this.sphere[1]=ye[1]+ye[1]*De,this.sphere[2]=ye[2]+ye[2]*De,this.sphere[3]=ye[3]+ye[3]*this.offset/fe,this.sphere}};function ee(he){return(0,D.pC)(he)?(se.offset=he,se):null}const le=new class Q{constructor(ye=0){this.componentLocalOriginLength=0,this._tmpVertex=(0,$.c)(),this._mbs=(0,re.c)(),this._obb={center:(0,$.c)(),halfSize:(0,G.c)(),quaternion:null},this._totalOffset=0,this._offset=0,this._resetOffset(ye)}_resetOffset(ye){this._offset=ye,this._totalOffset=ye}set offset(ye){this._resetOffset(ye)}get offset(){return this._offset}set componentOffset(ye){this._totalOffset=this._offset+ye}set localOrigin(ye){this.componentLocalOriginLength=Math.sqrt(ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2])}applyToVertex(ye,fe,De){const ve=ye,Ce=fe,ge=De+this.componentLocalOriginLength,Te=this._totalOffset/Math.sqrt(ve*ve+Ce*Ce+ge*ge);return this._tmpVertex[0]=ye+ve*Te,this._tmpVertex[1]=fe+Ce*Te,this._tmpVertex[2]=De+ge*Te,this._tmpVertex}applyToAabb(ye){const fe=ye[0],De=ye[1],ve=ye[2]+this.componentLocalOriginLength,Ce=ye[3],ge=ye[4],Te=ye[5]+this.componentLocalOriginLength,Le=fe*Ce<0?0:Math.min(Math.abs(fe),Math.abs(Ce)),je=De*ge<0?0:Math.min(Math.abs(De),Math.abs(ge)),ze=ve*Te<0?0:Math.min(Math.abs(ve),Math.abs(Te)),Ee=Math.sqrt(Le*Le+je*je+ze*ze);if(Ee<this._totalOffset)return ye[0]-=fe<0?this._totalOffset:0,ye[1]-=De<0?this._totalOffset:0,ye[2]-=ve<0?this._totalOffset:0,ye[3]+=Ce>0?this._totalOffset:0,ye[4]+=ge>0?this._totalOffset:0,ye[5]+=Te>0?this._totalOffset:0,ye;const Ae=Math.max(Math.abs(fe),Math.abs(Ce)),we=Math.max(Math.abs(De),Math.abs(ge)),Be=Math.max(Math.abs(ve),Math.abs(Te)),Pe=Math.sqrt(Ae*Ae+we*we+Be*Be),Oe=this._totalOffset/Pe,Ke=this._totalOffset/Ee;return ye[0]+=fe*(fe>0?Oe:Ke),ye[1]+=De*(De>0?Oe:Ke),ye[2]+=ve*(ve>0?Oe:Ke),ye[3]+=Ce*(Ce<0?Oe:Ke),ye[4]+=ge*(ge<0?Oe:Ke),ye[5]+=Te*(Te<0?Oe:Ke),ye}applyToMbs(ye){const fe=Math.sqrt(ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2]),De=this._totalOffset/fe;return this._mbs[0]=ye[0]+ye[0]*De,this._mbs[1]=ye[1]+ye[1]*De,this._mbs[2]=ye[2]+ye[2]*De,this._mbs[3]=ye[3]+ye[3]*this._totalOffset/fe,this._mbs}applyToObb(ye){const fe=ye.center,De=this._totalOffset/Math.sqrt(fe[0]*fe[0]+fe[1]*fe[1]+fe[2]*fe[2]);this._obb.center[0]=fe[0]+fe[0]*De,this._obb.center[1]=fe[1]+fe[1]*De,this._obb.center[2]=fe[2]+fe[2]*De,(0,H.q)(this._obb.halfSize,ye.halfSize,ye.quaternion),(0,H.a)(this._obb.halfSize,this._obb.halfSize,ye.center);const ve=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);return this._obb.halfSize[0]+=this._obb.halfSize[0]*ve,this._obb.halfSize[1]+=this._obb.halfSize[1]*ve,this._obb.halfSize[2]+=this._obb.halfSize[2]*ve,(0,H.b)(this._obb.halfSize,this._obb.halfSize,ye.center),(0,W.c)(_e,ye.quaternion),(0,H.q)(this._obb.halfSize,this._obb.halfSize,_e),this._obb.halfSize[0]*=this._obb.halfSize[0]<0?-1:1,this._obb.halfSize[1]*=this._obb.halfSize[1]<0?-1:1,this._obb.halfSize[2]*=this._obb.halfSize[2]<0?-1:1,this._obb.quaternion=ye.quaternion,this._obb}};function ne(he){return(0,D.pC)(he)?(le.offset=he,le):null}const ce=new class oe{constructor(ye=0){this.offset=ye,this.tmpVertex=(0,$.c)()}applyToVertex(ye,fe,De){const ve=ye+this.localOrigin[0],Ce=fe+this.localOrigin[1],ge=De+this.localOrigin[2],Te=this.offset/Math.sqrt(ve*ve+Ce*Ce+ge*ge);return this.tmpVertex[0]=ye+ve*Te,this.tmpVertex[1]=fe+Ce*Te,this.tmpVertex[2]=De+ge*Te,this.tmpVertex}applyToAabb(ye){for(let Ce=0;Ce<3;++Ce)ie[Ce]=ye[0+Ce]+this.localOrigin[Ce],X[Ce]=ye[3+Ce]+this.localOrigin[Ce],Z[Ce]=ie[Ce];const fe=this.applyToVertex(ie[0],ie[1],ie[2]);for(let Ce=0;Ce<3;++Ce)ye[Ce]=fe[Ce],ye[Ce+3]=fe[Ce];const De=Ce=>{const ge=this.applyToVertex(Ce[0],Ce[1],Ce[2]);for(let Te=0;Te<3;++Te)ye[Te+0]=Math.min(ye[Te+0],ge[Te]),ye[Te+3]=Math.max(ye[Te+3],ge[Te])};for(let Ce=1;Ce<8;++Ce){for(let ge=0;ge<3;++ge)Z[ge]=0==(Ce&1<<ge)?ie[ge]:X[ge];De(Z)}let ve=0;for(let Ce=0;Ce<3;++Ce)ie[Ce]*X[Ce]<0&&(ve|=1<<Ce);if(0!==ve&&7!==ve)for(let Ce=0;Ce<8;++Ce)if(0==(ve&Ce)){for(let ge=0;ge<3;++ge)Z[ge]=ve[ge]?0:0!=(Ce&1<<ge)?ie[ge]:X[ge];De(Z)}for(let Ce=0;Ce<3;++Ce)ye[Ce+0]-=this.localOrigin[Ce],ye[Ce+3]-=this.localOrigin[Ce];return ye}};function de(he){return(0,D.pC)(he)?(ce.offset=he,ce):null}const me="terrain",_e=(0,Y.a)()},82244:(qe,xe,T)=>{"use strict";T.d(xe,{AM:()=>w,Eg:()=>B,Mi:()=>x,Ur:()=>U});var D=T(28093);class x{constructor(Y=(0,D.c)()){this.intensity=Y}}class w{constructor(Y=(0,D.c)(),H=(0,D.f)(.57735,.57735,.57735)){this.intensity=Y,this.direction=H}}class B{constructor(Y=(0,D.c)(),H=(0,D.f)(.57735,.57735,.57735),G=!0,$=1,re=1){this.intensity=Y,this.direction=H,this.castShadows=G,this.specularStrength=$,this.environmentStrength=re}}class U{constructor(){this.r=[0],this.g=[0],this.b=[0]}}},95279:(qe,xe,T)=>{"use strict";T.d(xe,{c:()=>ce,V:()=>ne});var D=T(84161),x=T(28093),w=T(82244),B=T(21286);function W(me,_e,he){(he=he||me).length=me.length;for(let ye=0;ye<me.length;ye++)he[ye]=me[ye]*_e[ye];return he}function Y(me,_e,he){(he=he||me).length=me.length;for(let ye=0;ye<me.length;ye++)he[ye]=me[ye]*_e;return he}function H(me,_e,he){(he=he||me).length=me.length;for(let ye=0;ye<me.length;ye++)he[ye]=me[ye]+_e[ye];return he}function G(me){return(me+1)*(me+1)}function re(me,_e,he){const ye=me[0],fe=me[1],De=me[2],ve=he||[];return ve.length=G(_e),_e>=0&&(ve[0]=.28209479177),_e>=1&&(ve[1]=.4886025119*ye,ve[2]=.4886025119*De,ve[3]=.4886025119*fe),_e>=2&&(ve[4]=1.09254843059*ye*fe,ve[5]=1.09254843059*fe*De,ve[6]=.31539156525*(3*De*De-1),ve[7]=1.09254843059*ye*De,ve[8]=.54627421529*(ye*ye-fe*fe)),ve}function ie(me,_e,he,ye){(function ue(me,_e){const he=G(me),ye=_e||{r:[],g:[],b:[]};ye.r.length=ye.g.length=ye.b.length=he;for(let fe=0;fe<he;fe++)ye.r[fe]=ye.g[fe]=ye.b[fe]=0})(_e,ye),(0,D.s)(he.intensity,0,0,0);let fe=!1;const De=X,ve=Z,Ce=Q;De.length=0,ve.length=0,Ce.length=0;for(const ge of me)ge instanceof w.Eg&&!fe?((0,D.c)(he.direction,ge.direction),(0,D.c)(he.intensity,ge.intensity),he.specularStrength=ge.specularStrength,he.environmentStrength=ge.environmentStrength,he.castShadows=ge.castShadows,fe=!0):ge instanceof w.Eg||ge instanceof w.AM?De.push(ge):ge instanceof w.Mi?ve.push(ge):ge instanceof w.Ur&&Ce.push(ge);(function ae(me,_e){const he=function $(me){return(0,B.uZ)(Math.floor(Math.sqrt(me)-1),0,2)}(_e.r.length);for(const ye of me)(0,D.o)(ee,ye.direction),re(ee,he,J),W(J,le),Y(J,ye.intensity[0],se),H(_e.r,se),Y(J,ye.intensity[1],se),H(_e.g,se),Y(J,ye.intensity[2],se),H(_e.b,se);return _e})(De,ye),function oe(me,_e){re(ee,0,J);for(const he of me)_e.r[0]+=J[0]*le[0]*he.intensity[0]*4*Math.PI,_e.g[0]+=J[0]*le[0]*he.intensity[1]*4*Math.PI,_e.b[0]+=J[0]*le[0]*he.intensity[2]*4*Math.PI}(ve,ye);for(const ge of Ce)H(ye.r,ge.r),H(ye.g,ge.g),H(ye.b,ge.b)}const X=[],Z=[],Q=[],J=[0],se=[0],ee=(0,x.c)(),le=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398],ne=.4;class ce{constructor(){this._shOrder=2,this._oldSunlight={direction:(0,x.c)(),ambient:{color:(0,x.c)(),intensity:1},diffuse:{color:(0,x.c)(),intensity:1}},this.globalFactor=.5,this.groundLightingFactor=.5,this._sphericalHarmonics=new w.Ur,this._mainLight={intensity:(0,x.c)(),direction:(0,x.f)(1,0,0),castShadows:!1,specularStrength:1,environmentStrength:1}}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}get lightingMainDirection(){return this._mainLight.direction}set(_e){ie(_e,this._shOrder,this._mainLight,this._sphericalHarmonics),(0,D.c)(this._oldSunlight.direction,this._mainLight.direction);const he=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*he,this._oldSunlight.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*he,this._oldSunlight.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*he,(0,D.g)(this._oldSunlight.diffuse.color,this._mainLight.intensity,he),(0,D.c)(de,this._oldSunlight.diffuse.color),(0,D.g)(de,de,ne*this.globalFactor),(0,D.a)(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,de)}get old(){return this._oldSunlight}}const de=(0,x.c)()},92972:(qe,xe,T)=>{"use strict";T.d(xe,{E:()=>ce});var D=T(4794),x=T(6945),w=T(42743),B=T(60881),U=T(32393),W=T(40723),Y=T(88569),H=T(5894),G=T(60909),$=T(57623),re=T(651),ue=T(91056),ae=T(39114),oe=T(12407),ie=T(64127),X=T(89652),Z=T(2078);class Q extends ue.A{initializeProgram(he){const ye=Q.shader.get().build(this.configuration);return new oe.$(he.rctx,ye,ae.i)}_createPipeline(he,ye){const fe=this.configuration,De=he===w.Am.NONE,ve=he===w.Am.FrontFace;return(0,Z.sm)({blending:fe.output!==x.H.Color&&fe.output!==x.H.Alpha||!fe.transparent?null:De?Y.wu:(0,Y.j7)(he),culling:(0,Z.zp)(fe.cullFace),depthTest:{func:(0,Y.Bh)(he)},depthWrite:De||ve?fe.writeDepth&&Z.LZ:null,colorWrite:Z.BK,stencilWrite:fe.hasOccludees?ie.s3:null,stencilTest:fe.hasOccludees?ye?ie.eD:ie.RY:null,polygonOffset:De||ve?fe.polygonOffset&&J:(0,Y.je)(fe.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(he,ye){return ye?this._occludeePipelineState:super.getPipelineState(he,ye)}}Q.shader=new re.J(X.C,()=>T.e(1362).then(T.bind(T,11362)));const J={factor:1,units:1};var se=T(17626),ee=T(87601),le=T(41528);class ne extends le.W{constructor(){super(...arguments),this.output=x.H.Color,this.cullFace=w.Vr.None,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=w.Am.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,se._)([(0,ee.o)({count:x.H.COUNT})],ne.prototype,"output",void 0),(0,se._)([(0,ee.o)({count:w.Vr.COUNT})],ne.prototype,"cullFace",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"hasSlicePlane",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"hasVertexColors",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"transparent",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"polygonOffset",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"enableOffset",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"writeDepth",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"hasOccludees",void 0),(0,se._)([(0,ee.o)({count:w.Am.COUNT})],ne.prototype,"transparencyPassType",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"hasMultipassTerrain",void 0),(0,se._)([(0,ee.o)()],ne.prototype,"cullAboveGround",void 0);class ce extends W.F5{constructor(he){super(he,new me),this.supportsEdges=!0,this._configuration=new ne}getConfiguration(he,ye){return this._configuration.output=he,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=ye.transparencyPassType,this._configuration.enableOffset=ye.camera.relativeElevation<Y.ve,this._configuration.hasMultipassTerrain=ye.multipassTerrain.enabled,this._configuration.cullAboveGround=ye.multipassTerrain.cullAboveGround,this._configuration}intersect(he,ye,fe,De,ve,Ce,ge){(0,$.Bw)(he,ye,De,ve,Ce,void 0,ge)}requiresSlot(he,ye){return he===H.r.DRAPED_MATERIAL||((0,U.S)(ye)===x.H.Highlight?he===H.r.OPAQUE_MATERIAL:he===(this.parameters.transparent?this.parameters.writeDepth?H.r.TRANSPARENT_MATERIAL:H.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:H.r.OPAQUE_MATERIAL))}createGLMaterial(he){return he.output===x.H.Color||he.output===x.H.Alpha||he.output===x.H.Highlight||he.output===x.H.Depth&&this.parameters.writeLinearDepth?new de(he):null}createBufferWriter(){return new G.G_(G.IM)}}class de extends B.Z{_updateOccludeeState(he){he.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:he.hasOccludees})}beginSlot(he){return this._output!==x.H.Color&&this._output!==x.H.Alpha||this._updateOccludeeState(he),this.ensureTechnique(Q,he)}}class me extends W.Mt{constructor(){super(...arguments),this.color=D.Z,this.transparent=!1,this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=w.Vr.None,this.hasOccludees=!1}}},28523:(qe,xe,T)=>{"use strict";T.d(xe,{Gp:()=>ye,RL:()=>Te});var D=T(62208),x=T(84161),w=T(28093),B=T(59617),U=T(19625),W=T(6945),Y=T(26859),H=T(96395),G=T(92724),$=T(42743),re=T(33470),ue=T(40723),ae=T(88569),oe=T(91263),ie=T(5894),X=T(16396),Z=T(40841),Q=T(42037),J=T(57623),se=T(39711),ee=T(17626),le=T(36603),ne=T(87601),ce=T(41528);class de extends ce.W{constructor(){super(...arguments),this.output=W.H.Color,this.alphaDiscardMode=$.JJ.Opaque,this.doubleSidedMode=H.q.None,this.pbrMode=G.f7.Disabled,this.cullFace=$.Vr.None,this.transparencyPassType=$.Am.NONE,this.normalType=Y.h.Attribute,this.textureCoordinateType=le.N.None,this.customDepthTest=$.Gv.Less,this.spherical=!1,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.hasVerticalOffset=!1,this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.hasColorTexture=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.hasScreenSizePerspective=!1,this.hasVertexTangents=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.hasModelTransformation=!1,this.offsetBackfaces=!1,this.vvSize=!1,this.vvColor=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.textureAlphaPremultiplied=!1,this.instanced=!1,this.instancedColor=!1,this.instancedDoublePrecision=!1,this.doublePrecisionRequiresObfuscation=!1,this.writeDepth=!0,this.transparent=!1,this.enableOffset=!0,this.cullAboveGround=!1,this.snowCover=!1}}(0,ee._)([(0,ne.o)({count:W.H.COUNT})],de.prototype,"output",void 0),(0,ee._)([(0,ne.o)({count:$.JJ.COUNT})],de.prototype,"alphaDiscardMode",void 0),(0,ee._)([(0,ne.o)({count:H.q.COUNT})],de.prototype,"doubleSidedMode",void 0),(0,ee._)([(0,ne.o)({count:G.f7.COUNT})],de.prototype,"pbrMode",void 0),(0,ee._)([(0,ne.o)({count:$.Vr.COUNT})],de.prototype,"cullFace",void 0),(0,ee._)([(0,ne.o)({count:$.Am.COUNT})],de.prototype,"transparencyPassType",void 0),(0,ee._)([(0,ne.o)({count:Y.h.COUNT})],de.prototype,"normalType",void 0),(0,ee._)([(0,ne.o)({count:le.N.COUNT})],de.prototype,"textureCoordinateType",void 0),(0,ee._)([(0,ne.o)({count:$.Gv.COUNT})],de.prototype,"customDepthTest",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"spherical",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasVertexColors",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasSymbolColors",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasVerticalOffset",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasSlicePlane",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasSliceHighlight",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasColorTexture",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasMetalnessAndRoughnessTexture",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasEmissionTexture",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasOcclusionTexture",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasNormalTexture",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasScreenSizePerspective",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasVertexTangents",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasOccludees",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasMultipassTerrain",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"hasModelTransformation",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"offsetBackfaces",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"vvSize",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"vvColor",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"receiveShadows",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"receiveAmbientOcclusion",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"textureAlphaPremultiplied",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"instanced",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"instancedColor",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"instancedDoublePrecision",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"writeDepth",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"transparent",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"enableOffset",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"cullAboveGround",void 0),(0,ee._)([(0,ne.o)()],de.prototype,"snowCover",void 0),(0,ee._)([(0,ne.o)({constValue:!0})],de.prototype,"hasVvInstancing",void 0),(0,ee._)([(0,ne.o)({constValue:!1})],de.prototype,"useCustomDTRExponentForWater",void 0),(0,ee._)([(0,ne.o)({constValue:!1})],de.prototype,"supportsTextureAtlas",void 0),(0,ee._)([(0,ne.o)({constValue:!0})],de.prototype,"useFillLights",void 0);var me=T(651),_e=T(77133);class he extends se.tT{initializeConfiguration(Oe,Ke){super.initializeConfiguration(Oe,Ke),Ke.hasMetalnessAndRoughnessTexture=!1,Ke.hasEmissionTexture=!1,Ke.hasOcclusionTexture=!1,Ke.hasNormalTexture=!1,Ke.hasModelTransformation=!1,Ke.normalType=Y.h.Attribute,Ke.doubleSidedMode=H.q.WindingOrder,Ke.hasVertexTangents=!1}initializeProgram(Oe){return this._initializeProgram(Oe,he.shader)}}he.shader=new me.J(_e.R,()=>T.e(3959).then(T.bind(T,93959)));class ye extends ue.F5{constructor(Oe){super(Oe,ve),this.supportsEdges=!0,this.techniqueConfig=new de,this.vertexBufferLayout=function ge(Pe){const Oe=Pe.textureId||Pe.normalTextureId||Pe.metallicRoughnessTextureId||Pe.emissiveTextureId||Pe.occlusionTextureId,Ke=(0,U.U$)().vec3f(X.T.POSITION).vec3f(X.T.NORMAL);return Pe.hasVertexTangents&&Ke.vec4f(X.T.TANGENT),Oe&&Ke.vec2f(X.T.UV0),Pe.hasVertexColors&&Ke.vec4u8(X.T.COLOR),Pe.hasSymbolColors&&Ke.vec4u8(X.T.SYMBOLCOLOR),Ke}(this.parameters),this.instanceBufferLayout=Oe.instanced?Te(this.parameters):null}isVisibleInPass(Oe){return Oe!==oe.C.MATERIAL_DEPTH_SHADOWMAP_ALL&&Oe!==oe.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT&&Oe!==oe.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT||this.parameters.castShadows}isVisible(){const Oe=this.parameters;if(!super.isVisible()||0===Oe.layerOpacity)return!1;const{instanced:Ke,hasVertexColors:Ve,hasSymbolColors:Ne,vvColorEnabled:Ie}=Oe,We=(0,D.pC)(Ke)&&Ke.includes("color"),Se="replace"===Oe.colorMixMode,He=Oe.opacity>0,$e=Oe.externalColor&&Oe.externalColor[3]>0;return Ve&&(We||Ie||Ne)?!!Se||He:Ve?Se?$e:He:We||Ie||Ne?!!Se||He:Se?$e:He}getConfiguration(Oe,Ke){return this.techniqueConfig.output=Oe,this.techniqueConfig.hasNormalTexture=!!this.parameters.normalTextureId,this.techniqueConfig.hasColorTexture=!!this.parameters.textureId,this.techniqueConfig.hasVertexTangents=this.parameters.hasVertexTangents,this.techniqueConfig.instanced=!!this.parameters.instanced,this.techniqueConfig.instancedDoublePrecision=this.parameters.instancedDoublePrecision,this.techniqueConfig.vvSize=this.parameters.vvSizeEnabled,this.techniqueConfig.hasVerticalOffset=(0,D.pC)(this.parameters.verticalOffset),this.techniqueConfig.hasScreenSizePerspective=(0,D.pC)(this.parameters.screenSizePerspective),this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.hasSliceHighlight=this.parameters.hasSliceHighlight,this.techniqueConfig.alphaDiscardMode=this.parameters.textureAlphaMode,this.techniqueConfig.normalType="screenDerivative"===this.parameters.normals?Y.h.ScreenDerivative:Y.h.Attribute,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,(0,D.pC)(this.parameters.customDepthTest)&&(this.techniqueConfig.customDepthTest=this.parameters.customDepthTest),this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.cullFace=this.parameters.hasSlicePlane?$.Vr.None:this.parameters.cullFace,this.techniqueConfig.hasMultipassTerrain=Ke.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=Ke.multipassTerrain.cullAboveGround,this.techniqueConfig.hasModelTransformation=(0,D.pC)(this.parameters.modelTransformation),Oe!==W.H.Color&&Oe!==W.H.Alpha||(this.techniqueConfig.hasVertexColors=this.parameters.hasVertexColors,this.techniqueConfig.hasSymbolColors=this.parameters.hasSymbolColors,this.techniqueConfig.doubleSidedMode=this.parameters.treeRendering?H.q.WindingOrder:this.parameters.doubleSided&&"normal"===this.parameters.doubleSidedType?H.q.View:this.parameters.doubleSided&&"winding-order"===this.parameters.doubleSidedType?H.q.WindingOrder:H.q.None,this.techniqueConfig.instancedColor=(0,D.pC)(this.parameters.instanced)&&this.parameters.instanced.includes("color"),this.techniqueConfig.receiveShadows=this.parameters.receiveShadows&&this.parameters.shadowMappingEnabled,this.techniqueConfig.receiveAmbientOcclusion=!!Ke.ssaoHelper.ready&&this.parameters.receiveSSAO,this.techniqueConfig.vvColor=this.parameters.vvColorEnabled,this.techniqueConfig.textureAlphaPremultiplied=!!this.parameters.textureAlphaPremultiplied,this.techniqueConfig.pbrMode=this.parameters.usePBR?this.parameters.isSchematic?G.f7.Schematic:G.f7.Normal:G.f7.Disabled,this.techniqueConfig.hasMetalnessAndRoughnessTexture=!!this.parameters.metallicRoughnessTextureId,this.techniqueConfig.hasEmissionTexture=!!this.parameters.emissiveTextureId,this.techniqueConfig.hasOcclusionTexture=!!this.parameters.occlusionTextureId,this.techniqueConfig.offsetBackfaces=!(!this.parameters.transparent||!this.parameters.offsetTransparentBackfaces),this.techniqueConfig.transparencyPassType=Ke.transparencyPassType,this.techniqueConfig.enableOffset=Ke.camera.relativeElevation<ae.ve,this.techniqueConfig.snowCover=this.hasSnowCover(Ke)),this.techniqueConfig}hasSnowCover(Oe){return(0,D.pC)(Oe.weather)&&Oe.weatherVisible&&"snowy"===Oe.weather.type&&"enabled"===Oe.weather.snowCover}intersect(Oe,Ke,Ve,Ne,Ie,We,Se){if((0,D.pC)(this.parameters.verticalOffset)){const He=Ne.camera;(0,x.s)(we,Ve[12],Ve[13],Ve[14]);let $e=null;switch(Ne.viewingMode){case B.JY.Global:$e=(0,x.n)(Ee,we);break;case B.JY.Local:$e=(0,x.c)(Ee,ze)}let et=0;const nt=(0,x.b)(Be,we,He.eye),it=(0,x.l)(nt),Xe=(0,x.g)(nt,nt,1/it);let rt=null;this.parameters.screenSizePerspective&&(rt=(0,x.e)($e,Xe)),et+=(0,J.Hx)(He,it,this.parameters.verticalOffset,rt,this.parameters.screenSizePerspective),(0,x.g)($e,$e,et),(0,x.t)(Ae,$e,Ne.transform.inverseRotation),Ie=(0,x.b)(Le,Ie,Ae),We=(0,x.b)(je,We,Ae)}(0,J.Bw)(Oe,Ke,Ne,Ie,We,(0,Z.W9)(Ne.verticalOffset),Se)}requiresSlot(Oe){return Oe===(this.parameters.transparent?this.parameters.writeDepth?ie.r.TRANSPARENT_MATERIAL:ie.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:ie.r.OPAQUE_MATERIAL)||Oe===ie.r.DRAPED_MATERIAL}createGLMaterial(Oe){return Oe.output===W.H.Color||Oe.output===W.H.Alpha||Oe.output===W.H.Depth||Oe.output===W.H.Normal||Oe.output===W.H.Shadow||Oe.output===W.H.Highlight?new fe(Oe):null}createBufferWriter(){return new Ce(this.vertexBufferLayout,this.instanceBufferLayout)}}class fe extends re.F{constructor(Oe){super({...Oe,...Oe.material.parameters})}_updateParameters(Oe){const Ke=this._material.parameters;this.updateTexture(Ke.textureId);const Ve=Oe.camera.viewInverseTransposeMatrix;return(0,x.s)(Ke.origin,Ve[3],Ve[7],Ve[11]),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(Ke.treeRendering?he:se.tT,Oe)}_updateShadowState(Oe){Oe.shadowMap.enabled!==this._material.parameters.shadowMappingEnabled&&this._material.setParameters({shadowMappingEnabled:Oe.shadowMap.enabled})}_updateOccludeeState(Oe){Oe.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:Oe.hasOccludees})}beginSlot(Oe){return this._output!==W.H.Color&&this._output!==W.H.Alpha||(this._updateShadowState(Oe),this._updateOccludeeState(Oe)),this._updateParameters(Oe)}}const ve=new class De extends se.em{constructor(){super(...arguments),this.initTextureTransparent=!1,this.treeRendering=!1,this.hasVertexTangents=!1}};class Ce{constructor(Oe,Ke){this.vertexBufferLayout=Oe,this.instanceBufferLayout=Ke}allocate(Oe){return this.vertexBufferLayout.createBuffer(Oe)}elementCount(Oe){return Oe.indices.get(X.T.POSITION).length}write(Oe,Ke,Ve,Ne){(0,Q.NK)(Ke,this.vertexBufferLayout,Oe.transformation,Oe.invTranspTransformation,Ve,Ne)}}function Te(Pe){let Oe=(0,U.U$)();return Oe=Pe.instancedDoublePrecision?Oe.vec3f(X.T.MODELORIGINHI).vec3f(X.T.MODELORIGINLO).mat3f(X.T.MODEL).mat3f(X.T.MODELNORMAL):Oe.mat4f(X.T.MODEL).mat4f(X.T.MODELNORMAL),(0,D.pC)(Pe.instanced)&&Pe.instanced.includes("color")&&(Oe=Oe.vec4f(X.T.INSTANCECOLOR)),(0,D.pC)(Pe.instanced)&&Pe.instanced.includes("featureAttribute")&&(Oe=Oe.vec4f(X.T.INSTANCEFEATUREATTRIBUTE)),Oe}const Le=(0,w.c)(),je=(0,w.c)(),ze=(0,w.f)(0,0,1),Ee=(0,w.c)(),Ae=(0,w.c)(),we=(0,w.c)(),Be=(0,w.c)()},79331:(qe,xe,T)=>{"use strict";T.d(xe,{K:()=>D});const D=2.1},41528:(qe,xe,T)=>{"use strict";T.d(xe,{W:()=>B});var D=T(17626),x=T(37847),w=T(87601);class B extends w.m{}(0,D._)([(0,w.o)({constValue:!0})],B.prototype,"hasSliceHighlight",void 0),(0,D._)([(0,w.o)({constValue:!1})],B.prototype,"hasSliceInVertexProgram",void 0),(0,D._)([(0,w.o)({constValue:!1})],B.prototype,"instancedDoublePrecision",void 0),(0,D._)([(0,w.o)({constValue:!1})],B.prototype,"isGround",void 0),(0,D._)([(0,w.o)({constValue:x.P.Pass})],B.prototype,"pbrTextureBindType",void 0)},7949:(qe,xe,T)=>{"use strict";T.d(xe,{w:()=>w});var D=T(28093),x=T(21799);class w extends x.Pf{constructor(U=(0,D.c)()){super(),this.origin=U,this.slicePlaneLocalOrigin=this.origin}}},80805:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>Ve});var D=T(21286),x=T(62208),w=T(30217),B=T(550),U=T(28347),W=T(43703),Y=T(67831),H=T(99770),G=T(84161),$=T(28093),re=T(4794);var ie=T(65401),X=T(19625),Z=T(6945),Q=T(97347),J=T(36848),se=T(33470),ee=T(40723),le=T(5894),ne=T(17962),ce=T(2282),de=T(16396),me=T(42037),_e=T(57623),he=T(65073),ye=T(6467),fe=T(59617),De=T(651),ve=T(91056),Ce=T(42743),ge=T(39114),Te=T(88569),Le=T(12407),je=T(67969),ze=T(2078);class Ee extends ve.A{initializeConfiguration(pt,Ut){Ut.spherical=pt.viewingMode===fe.JY.Global}initializeProgram(pt){const Ut=Ee.shader.get().build(this.configuration);return new Le.$(pt.rctx,Ut,ge.i)}_setPipelineState(pt){const Ut=this.configuration,$t=pt===Ce.Am.NONE,_r=this.configuration.hasPolygonOffset&&Ae,hr=!$t&&pt!==Ce.Am.FrontFace||Ut.output===Z.H.Highlight?null:(Ut.depthEnabled||Ut.output===Z.H.Occlusion)&&ze.LZ;return(0,ze.sm)({blending:Ut.output===Z.H.Color||Ut.output===Z.H.Alpha||Ut.output===Z.H.Highlight?$t?we:(0,Te.j7)(pt):null,depthTest:{func:je.wb.LEQUAL},depthWrite:hr,colorWrite:ze.BK,polygonOffset:_r})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return this.configuration.output===Z.H.Occlusion?je.MX.POINTS:je.MX.TRIANGLES}}Ee.shader=new De.J(ye.H,()=>T.e(6771).then(T.bind(T,46771)));const Ae={factor:0,units:-4},we=(0,ze.if)(je.zi.ONE,je.zi.ONE_MINUS_SRC_ALPHA);var Be=T(17626),Pe=T(87601),Oe=T(41528);class Ke extends Oe.W{constructor(){super(...arguments),this.output=Z.H.Color,this.screenCenterOffsetUnitsEnabled=Q.d.World,this.transparencyPassType=Ce.Am.NONE,this.spherical=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.debugDrawLabelBorder=!1,this.binaryHighlightOcclusionEnabled=!0,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthEnabled=!0,this.pixelSnappingEnabled=!0,this.isDraped=!1,this.hasMultipassGeometry=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,Be._)([(0,Pe.o)({count:Z.H.COUNT})],Ke.prototype,"output",void 0),(0,Be._)([(0,Pe.o)({count:Q.d.COUNT})],Ke.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,Be._)([(0,Pe.o)({count:Ce.Am.COUNT})],Ke.prototype,"transparencyPassType",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"spherical",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"occlusionTestEnabled",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"signedDistanceFieldEnabled",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"vvSize",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"vvColor",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasVerticalOffset",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasScreenSizePerspective",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"debugDrawLabelBorder",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"binaryHighlightOcclusionEnabled",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasSlicePlane",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasPolygonOffset",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"depthEnabled",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"pixelSnappingEnabled",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"isDraped",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasMultipassGeometry",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"hasMultipassTerrain",void 0),(0,Be._)([(0,Pe.o)()],Ke.prototype,"cullAboveGround",void 0),(0,Be._)([(0,Pe.o)({constValue:!0})],Ke.prototype,"hasSliceInVertexProgram",void 0),(0,Be._)([(0,Pe.o)({constValue:!1})],Ke.prototype,"hasVvInstancing",void 0);class Ve extends ee.F5{constructor(pt){super(pt,new kr),this.techniqueConfig=new Ke}getConfiguration(pt,Ut){return this.techniqueConfig.output=pt,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.hasVerticalOffset=!!this.parameters.verticalOffset,this.techniqueConfig.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits?Q.d.Screen:Q.d.World,this.techniqueConfig.hasPolygonOffset=this.parameters.polygonOffset,this.techniqueConfig.isDraped=this.parameters.isDraped,this.techniqueConfig.occlusionTestEnabled=this.parameters.occlusionTest,this.techniqueConfig.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this.techniqueConfig.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this.techniqueConfig.vvSize=!!this.parameters.vvSizeEnabled,this.techniqueConfig.vvColor=!!this.parameters.vvColorEnabled,pt===Z.H.Color&&(this.techniqueConfig.debugDrawLabelBorder=!!this.parameters.debugDrawLabelBorder),pt===Z.H.Highlight&&(this.techniqueConfig.binaryHighlightOcclusionEnabled=this.parameters.binaryHighlightOcclusion),this.techniqueConfig.depthEnabled=this.parameters.depthEnabled,this.techniqueConfig.transparencyPassType=Ut.transparencyPassType,this.techniqueConfig.hasMultipassGeometry=Ut.multipassGeometry.enabled,this.techniqueConfig.hasMultipassTerrain=Ut.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=Ut.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(pt,Ut,$t,Xt,_r,hr,gr,vr,Kr){(0,x.pC)(Kr)?this._intersectDrapedHudGeometry(pt,hr,gr,vr,Kr):this._intersectHudGeometry(pt,Ut,$t,Xt,gr,vr)}_intersectDrapedHudGeometry(pt,Ut,$t,Xt,_r){const hr=pt.vertexAttributes.get(de.T.POSITION),gr=pt.vertexAttributes.get(de.T.SIZE),vr=this.parameters,Kr=(0,ye.c)(vr);let Gr=1,Jr=1;if((0,x.pC)(Xt)){const lr=Xt(wt);Gr=lr[0],Jr=lr[5]}Gr*=pt.screenToWorldRatio,Jr*=pt.screenToWorldRatio;const ns=Zt*pt.screenToWorldRatio;for(let lr=0;lr<hr.data.length/hr.size;lr++){const Tr=lr*hr.size,zr=hr.data[Tr],Tt=hr.data[Tr+1],sr=lr*gr.size;let Rr;ar[0]=gr.data[sr]*Gr,ar[1]=gr.data[sr+1]*Jr,vr.textureIsSignedDistanceField&&(Rr=vr.outlineSize*pt.screenToWorldRatio/2),He(Ut,zr,Tt,ar,ns,Rr,vr,Kr)&&$t(_r.dist,_r.normal,-1,!1)}}_intersectHudGeometry(pt,Ut,$t,Xt,_r,hr){if(!Xt.options.selectionMode||!Xt.options.hud||(0,he.PD)(Ut))return;const gr=this.parameters;let vr=1,Kr=1;if((0,w.f)(lt,$t),(0,x.pC)(hr)){const Rr=hr(wt);vr=Rr[0],Kr=Rr[5],function Se(Hr){const pt=Hr[0],Ut=Hr[1],$t=Hr[2],Xt=Hr[3],_r=Hr[4],hr=Hr[5],gr=Hr[6],vr=Hr[7],Kr=Hr[8],Gr=1/Math.sqrt(pt*pt+Ut*Ut+$t*$t),Jr=1/Math.sqrt(Xt*Xt+_r*_r+hr*hr),ns=1/Math.sqrt(gr*gr+vr*vr+Kr*Kr);Hr[0]=pt*Gr,Hr[1]=Ut*Gr,Hr[2]=$t*Gr,Hr[3]=Xt*Jr,Hr[4]=_r*Jr,Hr[5]=hr*Jr,Hr[6]=gr*ns,Hr[7]=vr*ns,Hr[8]=Kr*ns}(lt)}const Gr=pt.vertexAttributes.get(de.T.POSITION),Jr=pt.vertexAttributes.get(de.T.SIZE),ns=pt.vertexAttributes.get(de.T.NORMAL),lr=pt.vertexAttributes.get(de.T.AUXPOS1);(0,ce.hu)(Gr.size>=3);const Tr=Xt.point,zr=Xt.camera,Tt=(0,ye.c)(gr);vr*=zr.pixelRatio,Kr*=zr.pixelRatio;const sr="screen"===this.parameters.centerOffsetUnits;for(let Rr=0;Rr<Gr.data.length/Gr.size;Rr++){const bt=Rr*Gr.size;(0,G.s)(nt,Gr.data[bt],Gr.data[bt+1],Gr.data[bt+2]),(0,G.m)(nt,nt,$t);const Qt=Rr*Jr.size;ar[0]=Jr.data[Qt]*vr,ar[1]=Jr.data[Qt+1]*Kr,(0,G.m)(nt,nt,zr.viewMatrix);const qt=Rr*lr.size;if((0,G.s)(Ft,lr.data[qt+0],lr.data[qt+1],lr.data[qt+2]),!sr&&(nt[0]+=Ft[0],nt[1]+=Ft[1],0!==Ft[2])){const jr=Ft[2];(0,G.n)(Ft,nt),(0,G.b)(nt,nt,(0,G.g)(Ft,Ft,jr))}const yr=Rr*ns.size;if((0,G.s)(it,ns.data[yr],ns.data[yr+1],ns.data[yr+2]),this._normalAndViewAngle(it,lt,zr,kt),this._applyVerticalOffsetTransformationView(nt,kt,zr,$e),zr.applyProjection(nt,Xe),Xe[0]>-1){let es;if(Xe[0]=Math.floor(Xe[0]),Xe[1]=Math.floor(Xe[1]),sr&&(Ft[0]||Ft[1])&&(Xe[0]+=Ft[0],0!==Ft[1]&&(Xe[1]+=(0,ne.sX)(Ft[1],$e.factorAlignment)),zr.unapplyProjection(Xe,nt)),Xe[0]+=this.parameters.screenOffset[0],Xe[1]+=this.parameters.screenOffset[1],(0,ne.TU)(ar,$e.factor,ar),gr.textureIsSignedDistanceField&&(es=gr.outlineSize*zr.pixelRatio/2),He(Tr,Xe[0],Xe[1],ar,zt*zr.pixelRatio,es,gr,Tt)){const hs=Xt.ray;if((0,G.m)(Ze,nt,(0,U.a)(Mt,zr.viewMatrix)),Xe[0]=Tr[0],Xe[1]=Tr[1],zr.unprojectFromRenderScreen(Xe,nt)){const Is=(0,$.c)();(0,G.c)(Is,hs.direction);const Yr=1/(0,G.l)(Is);(0,G.g)(Is,Is,Yr),_r((0,G.i)(hs.origin,nt)*Yr,Is,-1,!0,1,Ze)}}}}}computeAttachmentOrigin(pt,Ut){const $t=pt.vertexAttributes;if(!$t)return!1;const Xt=$t.get(de.T.POSITION),_r=pt.indices.get(de.T.POSITION);return(0,J.NO)(Xt,_r,Ut)}createBufferWriter(){return new os(this)}_normalAndViewAngle(pt,Ut,$t,Xt){return function oe(Hr){return function ue(Hr){return Hr instanceof Float32Array&&Hr.length>=16}(Hr)||function ae(Hr){return Array.isArray(Hr)&&Hr.length>=16}(Hr)}(Ut)&&(Ut=(0,w.f)(st,Ut)),(0,G.t)(Xt.normal,pt,Ut),(0,G.m)(Xt.normal,Xt.normal,$t.viewInverseTransposeMatrix),Xt.cosAngle=(0,G.e)(rt,Pr),Xt}_updateScaleInfo(pt,Ut,$t){const Xt=this.parameters;(0,x.pC)(Xt.screenSizePerspective)?(0,ne.PV)($t,Ut,Xt.screenSizePerspective,pt.factor):(pt.factor.scale=1,pt.factor.factor=0,pt.factor.minPixelSize=0,pt.factor.paddingPixels=0),(0,x.pC)(Xt.screenSizePerspectiveAlignment)?(0,ne.PV)($t,Ut,Xt.screenSizePerspectiveAlignment,pt.factorAlignment):(pt.factorAlignment.factor=pt.factor.factor,pt.factorAlignment.scale=pt.factor.scale,pt.factorAlignment.minPixelSize=pt.factor.minPixelSize,pt.factorAlignment.paddingPixels=pt.factor.paddingPixels)}applyShaderOffsetsView(pt,Ut,$t,Xt,_r,hr,gr){const vr=this._normalAndViewAngle(Ut,$t,_r,kt);return this._applyVerticalGroundOffsetView(pt,vr,_r,gr),this._applyVerticalOffsetTransformationView(gr,vr,_r,hr),this._applyPolygonOffsetView(gr,vr,Xt[3],_r,gr),this._applyCenterOffsetView(gr,Xt,gr),gr}applyShaderOffsetsNDC(pt,Ut,$t,Xt,_r){return this._applyCenterOffsetNDC(pt,Ut,$t,Xt),(0,x.pC)(_r)&&(0,G.c)(_r,Xt),this._applyPolygonOffsetNDC(Xt,Ut,$t,Xt),Xt}_applyPolygonOffsetView(pt,Ut,$t,Xt,_r){const hr=Xt.aboveGround?1:-1;let gr=Math.sign($t);0===gr&&(gr=hr);const vr=hr*gr;if(this.parameters.shaderPolygonOffset<=0)return(0,G.c)(_r,pt);const Kr=(0,D.uZ)(Math.abs(Ut.cosAngle),.01,1),Gr=1-Math.sqrt(1-Kr*Kr)/Kr/Xt.viewport[2];return(0,G.g)(_r,pt,vr>0?Gr:1/Gr),_r}_applyVerticalGroundOffsetView(pt,Ut,$t,Xt){const _r=(0,G.l)(pt),hr=$t.aboveGround?1:-1,gr=.5*$t.computeRenderPixelSizeAtDist(_r),vr=(0,G.g)(nt,Ut.normal,hr*gr);return(0,G.a)(Xt,pt,vr),Xt}_applyVerticalOffsetTransformationView(pt,Ut,$t,Xt){const _r=this.parameters;if(!_r.verticalOffset||!_r.verticalOffset.screenLength){if(_r.screenSizePerspective||_r.screenSizePerspectiveAlignment){const Kr=(0,G.l)(pt);this._updateScaleInfo(Xt,Kr,Ut.cosAngle)}else Xt.factor.scale=1,Xt.factorAlignment.scale=1;return pt}const hr=(0,G.l)(pt),gr=(0,x.Pt)(_r.screenSizePerspectiveAlignment,_r.screenSizePerspective),vr=(0,_e.Hx)($t,hr,_r.verticalOffset,Ut.cosAngle,gr);return this._updateScaleInfo(Xt,hr,Ut.cosAngle),(0,G.g)(Ut.normal,Ut.normal,vr),(0,G.a)(pt,pt,Ut.normal)}_applyCenterOffsetView(pt,Ut,$t){const Xt="screen"!==this.parameters.centerOffsetUnits;return $t!==pt&&(0,G.c)($t,pt),Xt&&($t[0]+=Ut[0],$t[1]+=Ut[1],Ut[2]&&((0,G.n)(it,$t),(0,G.a)($t,$t,(0,G.g)(it,it,Ut[2])))),$t}_applyCenterOffsetNDC(pt,Ut,$t,Xt){const _r="screen"!==this.parameters.centerOffsetUnits;return Xt!==pt&&(0,G.c)(Xt,pt),_r||(Xt[0]+=Ut[0]/$t.fullWidth*2,Xt[1]+=Ut[1]/$t.fullHeight*2),Xt}_applyPolygonOffsetNDC(pt,Ut,$t,Xt){const _r=this.parameters.shaderPolygonOffset;if(pt!==Xt&&(0,G.c)(Xt,pt),_r){const hr=$t.aboveGround?1:-1,gr=hr*Math.sign(Ut[3]);Xt[2]-=(gr||hr)*_r}return Xt}requiresSlot(pt){if(pt===le.r.DRAPED_MATERIAL)return!0;const{drawInSecondSlot:Ut,occlusionTest:$t}=this.parameters;return pt===(Ut?le.r.LABEL_MATERIAL:le.r.HUD_MATERIAL)||$t&&pt===le.r.OCCLUSION_PIXELS}createGLMaterial(pt){return pt.output===Z.H.Color||pt.output===Z.H.Alpha?new Ie(pt):pt.output===Z.H.Highlight?new Ne(pt):null}calculateRelativeScreenBounds(pt,Ut,$t=(0,ie.Ue)()){return function We(Hr,pt,Ut,$t=et){(0,Y.c)($t,Hr.anchorPosition),$t[0]*=-pt[0],$t[1]*=-pt[1],$t[0]+=Hr.screenOffset[0]*Ut,$t[1]+=Hr.screenOffset[1]*Ut}(this.parameters,pt,Ut,$t),$t[2]=$t[0]+pt[0],$t[3]=$t[1]+pt[1],$t}}class Ne extends se.F{constructor(pt){super({...pt,...pt.material.parameters})}selectProgram(pt){return this.ensureTechnique(Ee,pt)}beginSlot(pt){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.selectProgram(pt)}}class Ie extends Ne{_isOcclusionSlot(pt){return pt.slot===le.r.OCCLUSION_PIXELS&&this._material.parameters.occlusionTest&&(this._output===Z.H.Color||this._output===Z.H.Alpha)}selectProgram(pt){return this.ensureTechnique(Ee,pt,this._isOcclusionSlot(pt)?Z.H.Occlusion:this._output)}}function He(Hr,pt,Ut,$t,Xt,_r,hr,gr){let vr=pt-Xt-(gr[0]>0?$t[0]*gr[0]:0),Kr=vr+$t[0]+2*Xt,Gr=Ut-Xt-(gr[1]>0?$t[1]*gr[1]:0),Jr=Gr+$t[1]+2*Xt;const ns=hr.distanceFieldBoundingBox;return hr.textureIsSignedDistanceField&&(0,x.pC)(ns)&&(vr+=$t[0]*ns[0],Gr+=$t[1]*ns[1],Kr-=$t[0]*(1-ns[2]),Jr-=$t[1]*(1-ns[3]),vr-=_r,Kr+=_r,Gr-=_r,Jr+=_r),Hr[0]>vr&&Hr[0]<Kr&&Hr[1]>Gr&&Hr[1]<Jr}const $e={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},et=(0,H.a)(),nt=(0,$.c)(),it=(0,$.c)(),Xe=(0,re.c)(),rt=(0,$.c)(),Ze=(0,$.c)(),lt=(0,B.c)(),st=(0,B.c)(),Mt=(0,W.c)(),Ft=(0,$.c)(),kt={normal:rt,cosAngle:0},wt=(0,W.c)(),zt=1,Zt=2,ar=[0,0],Pr=(0,$.f)(0,0,1);class kr extends se.E{constructor(){super(...arguments),this.renderOccluded=ee.yD.Occlude,this.color=[1,1,1,1],this.texCoordScale=[1,1],this.polygonOffset=!1,this.anchorPosition=(0,H.f)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.outlineColor=[1,1,1,1],this.outlineSize=0,this.vvSizeEnabled=!1,this.vvSizeMinSize=[1,1,1],this.vvSizeMaxSize=[100,100,100],this.vvSizeOffset=[0,0,0],this.vvSizeFactor=[1,1,1],this.vvColorEnabled=!1,this.vvColorValues=[0,0,0,0,0,0,0,0],this.vvColorColors=[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.binaryHighlightOcclusion=!0,this.debugDrawLabelBorder=!1,this.centerOffsetUnits="world",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.isDraped=!1}}const ss=(0,X.U$)().vec3f(de.T.POSITION).vec3f(de.T.NORMAL).vec2f(de.T.UV0).vec4u8(de.T.COLOR).vec2f(de.T.SIZE).vec4f(de.T.AUXPOS1).vec4f(de.T.AUXPOS2);class os{constructor(pt){this.material=pt,this.vertexBufferLayout=ss}allocate(pt){return this.vertexBufferLayout.createBuffer(pt)}elementCount(pt){return 6*pt.indices.get(de.T.POSITION).length}write(pt,Ut,$t,Xt){(0,me.ho)(Ut.indices.get(de.T.POSITION),Ut.vertexAttributes.get(de.T.POSITION).data,pt.transformation,$t.position,Xt,6),(0,me.s5)(Ut.indices.get(de.T.NORMAL),Ut.vertexAttributes.get(de.T.NORMAL).data,pt.invTranspTransformation,$t.normal,Xt,6);{const _r=Ut.vertexAttributes.get(de.T.UV0).data;let hr,gr,vr,Kr;if(null==_r||_r.length<4){const lr=this.material.parameters;hr=0,gr=0,vr=lr.texCoordScale[0],Kr=lr.texCoordScale[1]}else hr=_r[0],gr=_r[1],vr=_r[2],Kr=_r[3];vr=Math.min(1.99999,vr+1),Kr=Math.min(1.99999,Kr+1);const Gr=Ut.indices.get(de.T.POSITION).length,Jr=$t.uv0;let ns=Xt;for(let lr=0;lr<Gr;++lr)Jr.set(ns,0,hr),Jr.set(ns,1,gr),ns+=1,Jr.set(ns,0,vr),Jr.set(ns,1,gr),ns+=1,Jr.set(ns,0,vr),Jr.set(ns,1,Kr),ns+=1,Jr.set(ns,0,vr),Jr.set(ns,1,Kr),ns+=1,Jr.set(ns,0,hr),Jr.set(ns,1,Kr),ns+=1,Jr.set(ns,0,hr),Jr.set(ns,1,gr),ns+=1}(0,me.Vs)(Ut.indices.get(de.T.COLOR),Ut.vertexAttributes.get(de.T.COLOR).data,4,$t.color,Xt,6);{const _r=Ut.indices.get(de.T.SIZE),hr=Ut.vertexAttributes.get(de.T.SIZE).data,gr=_r.length,vr=$t.size;let Kr=Xt;for(let Gr=0;Gr<gr;++Gr){const Jr=hr[2*_r[Gr]],ns=hr[2*_r[Gr]+1];for(let lr=0;lr<6;++lr)vr.set(Kr,0,Jr),vr.set(Kr,1,ns),Kr+=1}}Ut.indices.get(de.T.AUXPOS1)&&Ut.vertexAttributes.get(de.T.AUXPOS1)&&(0,me.SW)(Ut.indices.get(de.T.AUXPOS1),Ut.vertexAttributes.get(de.T.AUXPOS1).data,$t.auxpos1,Xt,6),Ut.indices.get(de.T.AUXPOS2)&&Ut.vertexAttributes.get(de.T.AUXPOS2)&&(0,me.SW)(Ut.indices.get(de.T.AUXPOS2),Ut.vertexAttributes.get(de.T.AUXPOS2).data,$t.auxpos2,Xt,6)}}},49580:(qe,xe,T)=>{"use strict";T.d(xe,{Y:()=>ze});var D=T(63290),x=T(62208),w=T(23841),B=T(67831),U=T(84161),W=T(28093),Y=T(4794),H=T(8834),G=T(13777),$=T(90014),re=T(60479),ue=T(6945),ae=T(36848),oe=T(60881),ie=T(40723),X=T(5894),Z=T(2282),Q=T(16396),J=T(42037),se=T(60909),ee=T(57623),le=T(65073),ne=T(651),ce=T(91056),de=T(39114),me=T(12407),_e=T(64127),he=T(32616),ye=T(67969),fe=T(2078);class De extends ce.A{constructor(st,Mt,Ft){super(st,Mt,Ft),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=st.stippleTextureRepository}get stippleEnabled(){return this.configuration.stippleEnabled&&this.configuration.output!==ue.H.Highlight}initializeProgram(st){const Mt=De.shader.get().build(this.configuration);return new me.$(st.rctx,Mt,de.i)}destroy(){super.destroy(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(st,Mt){if(this.program.bindPass(st,Mt),this.stipplePattern!==st.stipplePattern){const Ft=st.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,Ft),this.stipplePattern=Ft}if(this.stippleEnabled){const{pixelSize:Ft,sdfNormalizer:kt,pixels:wt}=(0,x.pC)(this.stippleTextureBind)?this.stippleTextureBind(this.program):{pixelSize:1,sdfNormalizer:1,pixels:1};this.program.setUniform1f("stipplePatternSDFNormalizer",kt),this.program.setUniform1f("stipplePatternTextureSize",wt),this.program.setUniform1f("stipplePatternPixelSize",Ft),this.program.setUniform1f("stipplePatternPixelSizeInv",1/Ft)}}initializePipeline(){const st=this.configuration,Mt=(0,fe.wK)(ye.zi.SRC_ALPHA,ye.zi.ONE,ye.zi.ONE_MINUS_SRC_ALPHA,ye.zi.ONE_MINUS_SRC_ALPHA),Ft=(kt,wt=null,zt=null)=>(0,fe.sm)({blending:wt,depthTest:_e.JN,depthWrite:zt,colorWrite:fe.BK,stencilWrite:st.hasOccludees?_e.s3:null,stencilTest:st.hasOccludees?kt?_e.eD:_e.RY:null});return st.output===ue.H.Color?(this._occludeePipelineState=Ft(!0,st.transparent||this.stippleEnabled?Mt:null,fe.LZ),Ft(!1,st.transparent||this.stippleEnabled?Mt:null,fe.LZ)):Ft(!1)}get primitiveType(){return ye.MX.LINES}getPipelineState(st,Mt){return Mt?this._occludeePipelineState:super.getPipelineState(st,Mt)}}De.shader=new ne.J(he.N,()=>T.e(310).then(T.bind(T,20310)));var ve=T(17626),Ce=T(87601),ge=T(41528);class Te extends ge.W{constructor(){super(...arguments),this.output=ue.H.Color,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.hasOccludees=!1}}(0,ve._)([(0,Ce.o)({count:ue.H.COUNT})],Te.prototype,"output",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"hasSlicePlane",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"hasVertexColors",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"transparent",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"draped",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"stippleEnabled",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"stippleOffColorEnabled",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"stipplePreferContinuous",void 0),(0,ve._)([(0,Ce.o)()],Te.prototype,"hasOccludees",void 0),(0,ve._)([(0,Ce.o)({constValue:!1})],Te.prototype,"stippleRequiresClamp",void 0),(0,ve._)([(0,Ce.o)({constValue:!1})],Te.prototype,"stippleScaleWithLineWidth",void 0),(0,ve._)([(0,Ce.o)({constValue:!1})],Te.prototype,"stippleRequiresStretchMeasure",void 0);const Le=D.Z.getLogger("esri.views.3d.webgl-engine.materials.NativeLineMaterial");var je,lt;(lt=je||(je={}))[lt.START=0]="START",lt[lt.END=1]="END";class ze extends ie.F5{constructor(st){super(st,new we),this._techniqueConfig=new Te}getConfiguration(st,Mt){this._techniqueConfig.output=st,this._techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this._techniqueConfig.hasVertexColors=this.parameters.hasVertexColors,this._techniqueConfig.transparent=this.parameters.color[3]<1||this.parameters.width<1,this._techniqueConfig.draped=Mt.slot===X.r.DRAPED_MATERIAL;const Ft=(0,x.pC)(this.parameters.stipplePattern);return this._techniqueConfig.stippleEnabled=Ft,this._techniqueConfig.stippleOffColorEnabled=Ft&&(0,x.pC)(this.parameters.stippleOffColor),this._techniqueConfig.hasOccludees=this.parameters.hasOccludees,this._techniqueConfig.stipplePreferContinuous=this.parameters.stipplePreferContinuous,this._techniqueConfig}intersect(st,Mt,Ft,kt,wt,zt,Zt,ar,Pr){(0,x.pC)(Pr)?(0,ee.TT)(st,kt,Pr,zt,1,Zt):this._intersectLineGeometry(st,Mt,Ft,kt,Zt)}_intersectLineGeometry(st,Mt,Ft,kt,wt){if(!kt.options.selectionMode||(0,le.PD)(Mt))return;if(!(0,Z.kG)(Ft))return void Le.error("intersection assumes a translation-only matrix");const zt=st.vertexAttributes.get(Q.T.POSITION).data,Zt=kt.camera,ar=$e;(0,B.c)(ar,kt.point),(0,U.s)(et[0],ar[0]-2,ar[1]+2,0),(0,U.s)(et[1],ar[0]+2,ar[1]+2,0),(0,U.s)(et[2],ar[0]+2,ar[1]-2,0),(0,U.s)(et[3],ar[0]-2,ar[1]-2,0);for(let pt=0;pt<4;pt++)if(!Zt.unprojectFromRenderScreen(et[pt],nt[pt]))return;(0,$.zk)(Zt.eye,nt[0],nt[1],it),(0,$.zk)(Zt.eye,nt[1],nt[2],Xe),(0,$.zk)(Zt.eye,nt[2],nt[3],rt),(0,$.zk)(Zt.eye,nt[3],nt[0],Ze);let kr=Number.MAX_VALUE,ss=0;for(let pt=0;pt<zt.length-5;pt+=3){if(Be[0]=zt[pt]+Ft[12],Be[1]=zt[pt+1]+Ft[13],Be[2]=zt[pt+2]+Ft[14],Pe[0]=zt[pt+3]+Ft[12],Pe[1]=zt[pt+4]+Ft[13],Pe[2]=zt[pt+5]+Ft[14],(0,$.jH)(it,Be)<0&&(0,$.jH)(it,Pe)<0||(0,$.jH)(Xe,Be)<0&&(0,$.jH)(Xe,Pe)<0||(0,$.jH)(rt,Be)<0&&(0,$.jH)(rt,Pe)<0||(0,$.jH)(Ze,Be)<0&&(0,$.jH)(Ze,Pe)<0)continue;if(Zt.projectToRenderScreen(Be,Ve),Zt.projectToRenderScreen(Pe,Ne),Ve[2]<0&&Ne[2]>0){(0,U.b)(Oe,Be,Pe);const $t=Zt.frustum,Xt=-(0,$.jH)($t[H.Nu.NEAR],Be)/(0,U.e)(Oe,(0,$.mJ)($t[H.Nu.NEAR]));(0,U.g)(Oe,Oe,Xt),(0,U.a)(Be,Be,Oe),Zt.projectToRenderScreen(Be,Ve)}else if(Ve[2]>0&&Ne[2]<0){(0,U.b)(Oe,Pe,Be);const $t=Zt.frustum,Xt=-(0,$.jH)($t[H.Nu.NEAR],Pe)/(0,U.e)(Oe,(0,$.mJ)($t[H.Nu.NEAR]));(0,U.g)(Oe,Oe,Xt),(0,U.a)(Pe,Pe,Oe),Zt.projectToRenderScreen(Pe,Ne)}else if(Ve[2]<0&&Ne[2]<0)continue;Ve[2]=0,Ne[2]=0;const Ut=(0,G.Jk)((0,G.zk)(Ve,Ne,Se),ar);Ut<kr&&(kr=Ut,(0,U.c)(Ie,Be),(0,U.c)(We,Pe),ss=pt/3)}const os=kt.rayBegin,Hr=kt.rayEnd;if(kr<4){let pt=Number.MAX_VALUE;if((0,G.AR)((0,G.zk)(Ie,We,Se),(0,G.zk)(os,Hr,He),Ke)){(0,U.b)(Ke,Ke,os);const Ut=(0,U.l)(Ke);(0,U.g)(Ke,Ke,1/Ut),pt=Ut/(0,U.i)(os,Hr)}wt(pt,Ke,ss,!1)}}computeAttachmentOrigin(st,Mt){const Ft=st.vertexAttributes;if(!Ft)return!1;const kt=Ft.get(Q.T.POSITION);return(0,ae.qZ)(kt,null,!1,Mt)}requiresSlot(st){return st===X.r.OPAQUE_MATERIAL||st===X.r.DRAPED_MATERIAL}createGLMaterial(st){return st.output===ue.H.Color||st.output===ue.H.Highlight?new Ee(st):null}createBufferWriter(){const st=this.parameters.hasVertexColors?se.IM:se.wp;return(0,x.Wi)(this.parameters.stipplePattern)?new se.G_(st):new Ae(st.clone().vec3f(Q.T.AUXPOS1).vec2f(Q.T.UV0))}}class Ee extends oe.Z{_updateOccludeeState(st){st.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:st.hasOccludees})}beginSlot(st){return this._output===ue.H.Color&&this._updateOccludeeState(st),this.ensureTechnique(De,st)}}class Ae{constructor(st){this.vertexBufferLayout=st}allocate(st){return this.vertexBufferLayout.createBuffer(st)}elementCount(st){return st.indices.get(Q.T.POSITION).length}write(st,Mt,Ft,kt){(0,J.NK)(Mt,this.vertexBufferLayout,st.transformation,st.invTranspTransformation,Ft,kt),this._writeAuxpos1(st,Mt,Ft,kt),this._writeUV0(st,Mt,Ft,kt)}_writeAuxpos1(st,Mt,Ft,kt){const wt=Ft.getField(Q.T.AUXPOS1,re.ct),zt=Mt.indices.get(Q.T.POSITION),Zt=Mt.vertexAttributes.get(Q.T.POSITION).data,ar=st.transformation,Pr=wt.typedBufferStride,kr=wt.typedBuffer;kt*=Pr;for(let ss=0;ss<zt.length-1;ss+=2)for(const os of[1,0]){const Hr=3*zt[ss+os],pt=Zt[Hr],Ut=Zt[Hr+1],$t=Zt[Hr+2],_r=ar[1]*pt+ar[5]*Ut+ar[9]*$t+ar[13],hr=ar[2]*pt+ar[6]*Ut+ar[10]*$t+ar[14];kr[kt]=ar[0]*pt+ar[4]*Ut+ar[8]*$t+ar[12],kr[kt+1]=_r,kr[kt+2]=hr,kt+=Pr}}_writeUV0(st,Mt,Ft,kt){const wt=Ft.getField(Q.T.UV0,re.Eu),zt=Mt.indices.get(Q.T.POSITION),Zt=Mt.vertexAttributes.get(Q.T.POSITION).data,ar=Mt.vertexAttributes.get(Q.T.DISTANCETOSTART)?.data,Pr=st.transformation,kr=wt.typedBufferStride,ss=wt.typedBuffer;let os=0;ss[kt*=kr]=je.START,ss[kt+1]=os,kt+=kr;const Hr=3*zt[0],pt=(0,U.s)(Be,Zt[Hr],Zt[Hr+1],Zt[Hr+2]);Pr&&(0,U.m)(pt,pt,Pr);const Ut=Pe,$t=zt.length-1;let Xt=1;const _r=ar?(gr,vr,Kr)=>os=ar[Kr]:(gr,vr,Kr)=>os+=(0,U.i)(gr,vr);for(let gr=1;gr<$t;gr+=2){const vr=3*zt[gr];(0,U.s)(Ut,Zt[vr],Zt[vr+1],Zt[vr+2]),Pr&&(0,U.m)(Ut,Ut,Pr),_r(pt,Ut,Xt++);for(let Kr=0;Kr<2;++Kr)ss[kt]=1-Kr,ss[kt+1]=os,kt+=kr;(0,U.c)(pt,Ut)}const hr=3*zt[$t];(0,U.s)(Ut,Zt[hr],Zt[hr+1],Zt[hr+2]),Pr&&(0,U.m)(Ut,Ut,Pr),_r(pt,Ut,Xt),ss[kt]=je.END,ss[kt+1]=os}}class we extends ie.Mt{constructor(){super(...arguments),this.color=Y.O,this.hasVertexColors=!1,this.hasSlicePlane=!1,this.width=1,this.stipplePreferContinuous=!0,this.hasOccludees=!1}}const Be=(0,W.c)(),Pe=(0,W.c)(),Oe=(0,W.c)(),Ke=(0,W.c)(),Ve=(0,w.J$)(),Ne=(0,w.J$)(),Ie=(0,W.c)(),We=(0,W.c)(),Se=(0,G.Ue)(),He=(0,G.Ue)(),$e=(0,W.c)(),et=[(0,w.J$)(),(0,w.J$)(),(0,w.J$)(),(0,w.J$)()],nt=[(0,W.c)(),(0,W.c)(),(0,W.c)(),(0,W.c)()],it=(0,$.Ue)(),Xe=(0,$.Ue)(),rt=(0,$.Ue)(),Ze=(0,$.Ue)()},95402:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{b:()=>D}),(x=D||(D={}))[x.Horizontal=0]="Horizontal",x[x.Vertical=1]="Vertical",x[x.Cross=2]="Cross",x[x.ForwardDiagonal=3]="ForwardDiagonal",x[x.BackwardDiagonal=4]="BackwardDiagonal",x[x.DiagonalCross=5]="DiagonalCross",x[x.COUNT=6]="COUNT"},92222:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>ze});var D=T(63290),x=T(21286),w=T(62208),B=T(23841),U=T(67831),W=T(84161),Y=T(28093),H=T(4794),G=T(8834),$=T(13777),re=T(90014),ue=T(19625),ae=T(6945),oe=T(36848),ie=T(60881),X=T(32393),Z=T(40723),Q=T(5894),J=T(2282),se=T(16396),ee=T(41857),le=T(65073),ne=T(3393),ce=T(651),de=T(91056),me=T(42743),_e=T(88569),he=T(12407),ye=T(64127),fe=T(67969),De=T(2078);const ve=new Map([[se.T.POSITION,0],[se.T.SUBDIVISIONFACTOR,1],[se.T.UV0,2],[se.T.AUXPOS1,3],[se.T.AUXPOS2,4],[se.T.COLOR,5],[se.T.COLORFEATUREATTRIBUTE,5],[se.T.SIZE,6],[se.T.SIZEFEATUREATTRIBUTE,6],[se.T.OPACITYFEATUREATTRIBUTE,7]]);class Ce extends de.A{constructor(Zt,ar,Pr){super(Zt,ar,Pr),this.stippleTextureRepository=Zt.stippleTextureRepository}initializeProgram(Zt){const ar=Ce.shader.get().build(this.configuration);return new he.$(Zt.rctx,ar,ve)}destroy(){super.destroy(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(Zt,ar){if(this.program.bindPass(Zt,ar),this.stipplePattern!==Zt.stipplePattern){const Pr=Zt.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,Pr),this.stipplePattern=Pr}if(this.configuration.stippleEnabled){const{pixelSize:Pr,sdfNormalizer:kr,pixels:ss}=(0,w.pC)(this.stippleTextureBind)?this.stippleTextureBind(this.program):{pixelSize:1,sdfNormalizer:1,pixels:1};this.program.setUniform1f("stipplePatternSDFNormalizer",kr),this.program.setUniform1f("stipplePatternTextureSize",ss),this.program.setUniform1f("stipplePatternPixelSize",Pr),this.program.setUniform1f("stipplePatternPixelSizeInv",1/Pr)}}_makePipelineState(Zt,ar){const Pr=this.configuration,kr=Zt===me.Am.NONE,ss=Zt===me.Am.FrontFace;return(0,De.sm)({blending:Pr.output===ae.H.Color||Pr.output===ae.H.Alpha?kr?_e.wu:(0,_e.j7)(Zt):null,depthTest:{func:(0,_e.Bh)(Zt)},depthWrite:kr?Pr.writeDepth&&De.LZ:(0,_e.K5)(Zt),colorWrite:De.BK,stencilWrite:Pr.hasOccludees?ye.s3:null,stencilTest:Pr.hasOccludees?ar?ye.eD:ye.RY:null,polygonOffset:kr||ss?Pr.hasPolygonOffset&&ge:_e.E0})}initializePipeline(){const Zt=this.configuration;if(Zt.occluder){const ar=Zt.hasPolygonOffset&&ge;this._occluderPipelineTransparent=(0,De.sm)({blending:_e.wu,polygonOffset:ar,depthTest:ye.zV,depthWrite:null,colorWrite:De.BK,stencilWrite:null,stencilTest:ye.YD}),this._occluderPipelineOpaque=(0,De.sm)({blending:_e.wu,polygonOffset:ar,depthTest:ye.zV,depthWrite:null,colorWrite:De.BK,stencilWrite:ye.P7,stencilTest:ye.ii}),this._occluderPipelineMaskWrite=(0,De.sm)({blending:null,polygonOffset:ar,depthTest:ye.JN,depthWrite:null,colorWrite:null,stencilWrite:ye.s3,stencilTest:ye.eD})}return this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return this.configuration.wireframe?fe.MX.LINES:fe.MX.TRIANGLE_STRIP}getPipelineState(Zt,ar){return ar?this._occludeePipelineState:this.configuration.occluder?Zt===Q.r.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:Zt===Q.r.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipelineState(Zt,ar)}}Ce.shader=new ce.J(ne.R,()=>T.e(4346).then(T.bind(T,84346)));const ge={factor:0,units:-4};var Te=T(39401);const Le=D.Z.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");var je,zt;(zt=je||(je={}))[zt.LEFT_JOIN_START=-2]="LEFT_JOIN_START",zt[zt.LEFT_JOIN_END=-1]="LEFT_JOIN_END",zt[zt.LEFT_CAP_START=-4]="LEFT_CAP_START",zt[zt.LEFT_CAP_END=-5]="LEFT_CAP_END",zt[zt.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",zt[zt.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",zt[zt.RIGHT_CAP_START=4]="RIGHT_CAP_START",zt[zt.RIGHT_CAP_END=5]="RIGHT_CAP_END";class ze extends Z.F5{constructor(Zt){super(Zt,new Ae),this._vertexAttributeLocations=ve,this.techniqueConfig=new Te.G,this.layout=this.createLayout()}isClosed(Zt,ar){return Oe(this.parameters,Zt,ar)}getConfiguration(Zt,ar){this.techniqueConfig.output=Zt,this.techniqueConfig.draped=ar.slot===Q.r.DRAPED_MATERIAL;const Pr=(0,w.pC)(this.parameters.stipplePattern)&&Zt!==ae.H.Highlight;return this.techniqueConfig.stippleEnabled=Pr,this.techniqueConfig.stippleOffColorEnabled=Pr&&(0,w.pC)(this.parameters.stippleOffColor),this.techniqueConfig.stippleScaleWithLineWidth=Pr&&this.parameters.stippleScaleWithLineWidth,this.techniqueConfig.stipplePreferContinuous=Pr&&this.parameters.stipplePreferContinuous,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.roundJoins="round"===this.parameters.join,this.techniqueConfig.capType=this.parameters.cap,this.techniqueConfig.hasPolygonOffset=this.parameters.hasPolygonOffset,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.vvColor=this.parameters.vvColorEnabled,this.techniqueConfig.vvOpacity=this.parameters.vvOpacityEnabled,this.techniqueConfig.vvSize=this.parameters.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.parameters.innerWidth>0&&(0,w.pC)(this.parameters.innerColor),this.techniqueConfig.falloffEnabled=this.parameters.falloff>0,this.techniqueConfig.occluder=this.parameters.renderOccluded===Z.yD.OccludeAndTransparentStencil,this.techniqueConfig.transparencyPassType=ar.transparencyPassType,this.techniqueConfig.hasMultipassTerrain=ar.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=ar.multipassTerrain.cullAboveGround,this.techniqueConfig.wireframe=this.parameters.wireframe,this.techniqueConfig}intersect(Zt,ar,Pr,kr,ss,os,Hr,pt,Ut){(0,w.pC)(Ut)?this._intersectDrapedLineGeometry(Zt,kr,Ut,os,Hr):this._intersectLineGeometry(Zt,ar,Pr,kr,Hr)}_intersectDrapedLineGeometry(Zt,ar,Pr,kr,ss){if(!ar.options.selectionMode)return;const os=Zt.vertexAttributes.get(se.T.POSITION).data,Hr=Zt.vertexAttributes.get(se.T.SIZE);let pt=this.parameters.width;if(this.parameters.vvSizeEnabled){const gr=Zt.vertexAttributes.get(se.T.SIZEFEATUREATTRIBUTE).data[0];pt*=(0,x.uZ)(this.parameters.vvSizeOffset[0]+gr*this.parameters.vvSizeFactor[0],this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])}else Hr&&(pt*=Hr.data[0]);const Ut=kr[0],$t=kr[1],Xt=(pt/2+4)*Zt.screenToWorldRatio;let _r=Number.MAX_VALUE,hr=0;for(let gr=0;gr<os.length-5;gr+=3){const vr=os[gr],Kr=os[gr+1],Gr=Ut-vr,Jr=$t-Kr,ns=os[gr+3]-vr,lr=os[gr+4]-Kr,Tr=(0,x.uZ)((ns*Gr+lr*Jr)/(ns*ns+lr*lr),0,1),zr=ns*Tr-Gr,Tt=lr*Tr-Jr,sr=zr*zr+Tt*Tt;sr<_r&&(_r=sr,hr=gr/3)}_r<Xt*Xt&&ss(Pr.dist,Pr.normal,hr,!1)}_intersectLineGeometry(Zt,ar,Pr,kr,ss){if(!kr.options.selectionMode||(0,le.PD)(ar))return;if(!(0,J.kG)(Pr))return void Le.error("intersection assumes a translation-only matrix");const os=Zt.vertexAttributes,Hr=os.get(se.T.POSITION).data;let pt=this.parameters.width;if(this.parameters.vvSizeEnabled){const Gr=os.get(se.T.SIZEFEATUREATTRIBUTE).data[0];pt*=(0,x.uZ)(this.parameters.vvSizeOffset[0]+Gr*this.parameters.vvSizeFactor[0],this.parameters.vvSizeMinSize[0],this.parameters.vvSizeMaxSize[0])}else os.has(se.T.SIZE)&&(pt*=os.get(se.T.SIZE).data[0]);const Ut=kr.camera,$t=We;(0,U.c)($t,kr.point);const Xt=pt*Ut.pixelRatio/2+4*Ut.pixelRatio;(0,W.s)(lt[0],$t[0]-Xt,$t[1]+Xt,0),(0,W.s)(lt[1],$t[0]+Xt,$t[1]+Xt,0),(0,W.s)(lt[2],$t[0]+Xt,$t[1]-Xt,0),(0,W.s)(lt[3],$t[0]-Xt,$t[1]-Xt,0);for(let Gr=0;Gr<4;Gr++)if(!Ut.unprojectFromRenderScreen(lt[Gr],st[Gr]))return;(0,re.zk)(Ut.eye,st[0],st[1],Mt),(0,re.zk)(Ut.eye,st[1],st[2],Ft),(0,re.zk)(Ut.eye,st[2],st[3],kt),(0,re.zk)(Ut.eye,st[3],st[0],wt);let _r=Number.MAX_VALUE,hr=0;const gr=Pe(this.parameters,os,Zt.indices)?Hr.length-2:Hr.length-5;for(let Gr=0;Gr<gr;Gr+=3){Ke[0]=Hr[Gr]+Pr[12],Ke[1]=Hr[Gr+1]+Pr[13],Ke[2]=Hr[Gr+2]+Pr[14];const Jr=(Gr+3)%Hr.length;if(Ve[0]=Hr[Jr]+Pr[12],Ve[1]=Hr[Jr+1]+Pr[13],Ve[2]=Hr[Jr+2]+Pr[14],(0,re.jH)(Mt,Ke)<0&&(0,re.jH)(Mt,Ve)<0||(0,re.jH)(Ft,Ke)<0&&(0,re.jH)(Ft,Ve)<0||(0,re.jH)(kt,Ke)<0&&(0,re.jH)(kt,Ve)<0||(0,re.jH)(wt,Ke)<0&&(0,re.jH)(wt,Ve)<0)continue;if(Ut.projectToRenderScreen(Ke,Se),Ut.projectToRenderScreen(Ve,He),Se[2]<0&&He[2]>0){(0,W.b)(Ne,Ke,Ve);const lr=Ut.frustum,Tr=-(0,re.jH)(lr[G.Nu.NEAR],Ke)/(0,W.e)(Ne,(0,re.mJ)(lr[G.Nu.NEAR]));(0,W.g)(Ne,Ne,Tr),(0,W.a)(Ke,Ke,Ne),Ut.projectToRenderScreen(Ke,Se)}else if(Se[2]>0&&He[2]<0){(0,W.b)(Ne,Ve,Ke);const lr=Ut.frustum,Tr=-(0,re.jH)(lr[G.Nu.NEAR],Ve)/(0,W.e)(Ne,(0,re.mJ)(lr[G.Nu.NEAR]));(0,W.g)(Ne,Ne,Tr),(0,W.a)(Ve,Ve,Ne),Ut.projectToRenderScreen(Ve,He)}else if(Se[2]<0&&He[2]<0)continue;Se[2]=0,He[2]=0;const ns=(0,$.Jk)((0,$.zk)(Se,He,nt),$t);ns<_r&&(_r=ns,(0,W.c)($e,Ke),(0,W.c)(et,Ve),hr=Gr/3)}const vr=kr.rayBegin,Kr=kr.rayEnd;if(_r<Xt*Xt){let Gr=Number.MAX_VALUE;if((0,$.AR)((0,$.zk)($e,et,nt),(0,$.zk)(vr,Kr,it),Ie)){(0,W.b)(Ie,Ie,vr);const Jr=(0,W.l)(Ie);(0,W.g)(Ie,Ie,1/Jr),Gr=Jr/(0,W.i)(vr,Kr)}ss(Gr,Ie,hr,!1)}}computeAttachmentOrigin(Zt,ar){const Pr=Zt.vertexAttributes;if(!Pr)return null;const kr=Zt.indices,ss=Pr.get(se.T.POSITION);return(0,oe.qZ)(ss,kr?kr.get(se.T.POSITION):null,kr&&Pe(this.parameters,Pr,kr),ar)}createLayout(){const Zt=(0,ue.U$)().vec3f(se.T.POSITION).f32(se.T.SUBDIVISIONFACTOR).vec2f(se.T.UV0).vec3f(se.T.AUXPOS1).vec3f(se.T.AUXPOS2);return Zt.f32(this.parameters.vvSizeEnabled?se.T.SIZEFEATUREATTRIBUTE:se.T.SIZE),this.parameters.vvColorEnabled?Zt.f32(se.T.COLORFEATUREATTRIBUTE):Zt.vec4f(se.T.COLOR),this.parameters.vvOpacityEnabled&&Zt.f32(se.T.OPACITYFEATUREATTRIBUTE),Zt}createBufferWriter(){return new we(this.layout,this.parameters)}requiresSlot(Zt,ar){if(Zt===Q.r.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===Z.yD.OccludeAndTransparentStencil)return Zt===Q.r.OPAQUE_MATERIAL||Zt===Q.r.OCCLUDER_MATERIAL||Zt===Q.r.TRANSPARENT_OCCLUDER_MATERIAL;const Pr=(0,X.S)(ar);return Pr===ae.H.Color||Pr===ae.H.Alpha?Zt===(this.parameters.writeDepth?Q.r.TRANSPARENT_MATERIAL:Q.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):Zt===Q.r.OPAQUE_MATERIAL}createGLMaterial(Zt){return Zt.output===ae.H.Color||Zt.output===ae.H.Alpha||Zt.output===ae.H.Highlight||Zt.output===ae.H.Depth?new Ee(Zt):null}validateParameters(Zt){"miter"!==Zt.join&&(Zt.miterLimit=0)}}class Ee extends ie.Z{_updateOccludeeState(Zt){Zt.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:Zt.hasOccludees})}beginSlot(Zt){return this._output!==ae.H.Color&&this._output!==ae.H.Alpha||this._updateOccludeeState(Zt),this.ensureTechnique(Ce,Zt)}}class Ae extends ee.n{constructor(){super(...arguments),this.width=0,this.color=H.O,this.join="miter",this.cap=Te.R.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleScaleWithLineWidth=!1,this.stipplePreferContinuous=!0,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.hasOccludees=!1,this.wireframe=!1}}class we{constructor(Zt,ar){this.parameters=ar,this.numJoinSubdivisions=0,this.vertexBufferLayout=Zt;const Pr=ar.stipplePattern?1:0;switch(this.parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=Pr;break;case"round":this.numJoinSubdivisions=ne.N+Pr}}_isClosed(Zt){return Pe(this.parameters,Zt.vertexAttributes,Zt.indices)}allocate(Zt){return this.vertexBufferLayout.createBuffer(Zt)}elementCount(Zt){const Pr=Zt.indices.get(se.T.POSITION).length/2+1,kr=this._isClosed(Zt);let ss=kr?2:4;return ss+=((kr?Pr:Pr-1)-(kr?0:1))*(2*this.numJoinSubdivisions+4),ss+=2,this.parameters.wireframe&&(ss=2+4*(ss-2)),ss}write(Zt,ar,Pr,kr){const ss=Xe,os=rt,Hr=Ze,pt=ar.vertexAttributes.get(se.T.POSITION).data,Ut=ar.indices&&ar.indices.get(se.T.POSITION),$t=ar.vertexAttributes.get(se.T.DISTANCETOSTART)?.data;Ut&&Ut.length!==2*(pt.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");let Xt=1,_r=0;this.parameters.vvSizeEnabled?_r=ar.vertexAttributes.get(se.T.SIZEFEATUREATTRIBUTE).data[0]:ar.vertexAttributes.has(se.T.SIZE)&&(Xt=ar.vertexAttributes.get(se.T.SIZE).data[0]);let hr=[1,1,1,1],gr=0;this.parameters.vvColorEnabled?gr=ar.vertexAttributes.get(se.T.COLORFEATUREATTRIBUTE).data[0]:ar.vertexAttributes.has(se.T.COLOR)&&(hr=ar.vertexAttributes.get(se.T.COLOR).data);let vr=0;this.parameters.vvOpacityEnabled&&(vr=ar.vertexAttributes.get(se.T.OPACITYFEATUREATTRIBUTE).data[0]);const Kr=pt.length/3,Gr=Zt.transformation,Jr=new Float32Array(Pr.buffer),ns=this.vertexBufferLayout.stride/4;let lr=kr*ns;const Tr=lr;let zr=0;const Tt=$t?(qt,yr,jr)=>zr=$t[jr]:(qt,yr,jr)=>zr+=(0,W.i)(qt,yr),sr=(qt,yr,jr,es,hs,Is,Yr)=>{if(Jr[lr++]=yr[0],Jr[lr++]=yr[1],Jr[lr++]=yr[2],Jr[lr++]=es,Jr[lr++]=Yr,Jr[lr++]=hs,Jr[lr++]=qt[0],Jr[lr++]=qt[1],Jr[lr++]=qt[2],Jr[lr++]=jr[0],Jr[lr++]=jr[1],Jr[lr++]=jr[2],Jr[lr++]=this.parameters.vvSizeEnabled?_r:Xt,this.parameters.vvColorEnabled)Jr[lr++]=gr;else{const Rs=Math.min(4*Is,hr.length-4);Jr[lr++]=hr[Rs+0],Jr[lr++]=hr[Rs+1],Jr[lr++]=hr[Rs+2],Jr[lr++]=hr[Rs+3]}this.parameters.vvOpacityEnabled&&(Jr[lr++]=vr)};lr+=ns,(0,W.s)(os,pt[0],pt[1],pt[2]),Gr&&(0,W.m)(os,os,Gr);const Rr=this._isClosed(ar);if(Rr){const qt=pt.length-3;(0,W.s)(ss,pt[qt],pt[qt+1],pt[qt+2]),Gr&&(0,W.m)(ss,ss,Gr)}else(0,W.s)(Hr,pt[3],pt[4],pt[5]),Gr&&(0,W.m)(Hr,Hr,Gr),sr(os,os,Hr,1,je.LEFT_CAP_START,0,0),sr(os,os,Hr,1,je.RIGHT_CAP_START,0,0),(0,W.c)(ss,os),(0,W.c)(os,Hr);const bt=Rr?0:1,Qt=Rr?Kr:Kr-1;for(let qt=bt;qt<Qt;qt++){const yr=(qt+1)%Kr*3;(0,W.s)(Hr,pt[yr+0],pt[yr+1],pt[yr+2]),Gr&&(0,W.m)(Hr,Hr,Gr),Tt(ss,os,qt),sr(ss,os,Hr,0,je.LEFT_JOIN_END,qt,zr),sr(ss,os,Hr,0,je.RIGHT_JOIN_END,qt,zr);const jr=this.numJoinSubdivisions;for(let es=0;es<jr;++es){const hs=(es+1)/(jr+1);sr(ss,os,Hr,hs,je.LEFT_JOIN_END,qt,zr),sr(ss,os,Hr,hs,je.RIGHT_JOIN_END,qt,zr)}sr(ss,os,Hr,1,je.LEFT_JOIN_START,qt,zr),sr(ss,os,Hr,1,je.RIGHT_JOIN_START,qt,zr),(0,W.c)(ss,os),(0,W.c)(os,Hr)}Rr?((0,W.s)(Hr,pt[3],pt[4],pt[5]),Gr&&(0,W.m)(Hr,Hr,Gr),zr=Tt(ss,os,Qt),sr(ss,os,Hr,0,je.LEFT_JOIN_END,bt,zr),sr(ss,os,Hr,0,je.RIGHT_JOIN_END,bt,zr)):(zr=Tt(ss,os,Qt),sr(ss,os,os,0,je.LEFT_CAP_END,Qt,zr),sr(ss,os,os,0,je.RIGHT_CAP_END,Qt,zr)),Be(Jr,Tr+ns,Jr,Tr,ns),lr=Be(Jr,lr-ns,Jr,lr,ns),this.parameters.wireframe&&this._addWireframeVertices(Pr,Tr,lr,ns)}_addWireframeVertices(Zt,ar,Pr,kr){const ss=new Float32Array(Zt.buffer,Pr*Float32Array.BYTES_PER_ELEMENT),os=new Float32Array(Zt.buffer,ar*Float32Array.BYTES_PER_ELEMENT,Pr-ar);let Hr=0;const pt=Ut=>Hr=Be(os,Ut,ss,Hr,kr);for(let Ut=0;Ut<os.length-1;Ut+=2*kr)pt(Ut),pt(Ut+2*kr),pt(Ut+1*kr),pt(Ut+2*kr),pt(Ut+1*kr),pt(Ut+3*kr)}}function Be(zt,Zt,ar,Pr,kr){for(let ss=0;ss<kr;ss++)ar[Pr++]=zt[Zt++];return Pr}function Pe(zt,Zt,ar){return Oe(zt,Zt.get(se.T.POSITION).data,ar?ar.get(se.T.POSITION):null)}function Oe(zt,Zt,ar){return!!zt.isClosed&&(ar?ar.length>2:Zt.length>6)}const Ke=(0,Y.c)(),Ve=(0,Y.c)(),Ne=(0,Y.c)(),Ie=(0,Y.c)(),We=(0,Y.c)(),Se=(0,B.J$)(),He=(0,B.J$)(),$e=(0,Y.c)(),et=(0,Y.c)(),nt=(0,$.Ue)(),it=(0,$.Ue)(),Xe=(0,Y.c)(),rt=(0,Y.c)(),Ze=(0,Y.c)(),lt=[(0,B.J$)(),(0,B.J$)(),(0,B.J$)(),(0,B.J$)()],st=[(0,Y.c)(),(0,Y.c)(),(0,Y.c)(),(0,Y.c)()],Mt=(0,re.Ue)(),Ft=(0,re.Ue)(),kt=(0,re.Ue)(),wt=(0,re.Ue)()},51899:(qe,xe,T)=>{"use strict";T.d(xe,{h:()=>U});var D=T(36161),x=T(62208),w=T(67969),B=T(55086);class U{constructor(H){this._rctx=H,this.cache=new Map}dispose(){this.cache.forEach(H=>H.texture=(0,x.O3)(H.texture)),this.cache.clear()}_acquire(H){if((0,x.Wi)(H))return null;const G=this._patternId(H),$=this.cache.get(G);if($)return $.refCount++,$.bind;const re=H.pixelRatio,{encodedData:ue,sdfNormalizer:ae,pixels:oe,paddedPixels:ie}=function W(Y,H){const G=Y.map(ee=>Math.round(ee*H)),$=1/H,re=Math.floor(G.reduce((ee,le)=>ee+le)),ue=G.reduce((ee,le)=>Math.max(ee,le)),ae=(Math.floor(.5*(ue-1))+.5)*$,oe=[];let ie=1;for(const ee of G){for(let le=0;le<ee;le++){const ne=ie*(Math.min(le,ee-1-le)+.5)*$/ae*.5+.5;oe.push(ne)}ie=-ie}const X=Math.round(G[0]/2),Z=[...oe.slice(X),...oe.slice(0,X)],Q=re+2,J=new Uint8Array(4*Q);let se=4;for(const ee of Z)(0,D.I)(ee,J,se),se+=4;return J.copyWithin(0,se-4,se),J.copyWithin(se,4,8),{encodedData:J,sdfNormalizer:ae,paddedPixels:Q,pixels:re}}(H.pattern,re),X=oe/re,Z={refCount:1,texture:null,bind:Q=>((0,x.Wi)(Z.texture)&&(Z.texture=new B.x(this._rctx,{width:ie,height:1,internalFormat:w.VI.RGBA,pixelFormat:w.VI.RGBA,dataType:w.Br.UNSIGNED_BYTE,wrapMode:w.e8.CLAMP_TO_EDGE},ue)),Q.bindTexture("stipplePatternTexture",Z.texture),{pixelSize:X,sdfNormalizer:ae,pixels:oe})};return this.cache.set(G,Z),Z.bind}release(H){if((0,x.Wi)(H))return;const G=this._patternId(H),$=this.cache.get(G);$&&($.refCount--,0===$.refCount&&((0,x.pC)($.texture)&&$.texture.dispose(),this.cache.delete(G)))}swap(H,G){const $=this._acquire(G);return this.release(H),$}_patternId(H){return`${H.pattern.join(",")}-r${H.pixelRatio}`}}},41857:(qe,xe,T)=>{"use strict";T.d(xe,{n:()=>B,x:()=>U});var D=T(550),x=T(28093),w=T(40723);class B extends w.Mt{constructor(){super(...arguments),this.vvSizeEnabled=!1,this.vvSizeMinSize=(0,x.f)(1,1,1),this.vvSizeMaxSize=(0,x.f)(100,100,100),this.vvSizeOffset=(0,x.f)(0,0,0),this.vvSizeFactor=(0,x.f)(1,1,1),this.vvSizeValue=(0,x.f)(1,1,1),this.vvColorEnabled=!1,this.vvColorValues=[0,0,0,0,0,0,0,0],this.vvColorColors=[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],this.vvOpacityEnabled=!1,this.vvOpacityValues=[0,0,0,0,0,0,0,0],this.vvOpacityOpacities=[1,1,1,1,1,1,1,1],this.vvSymbolAnchor=[0,0,0],this.vvSymbolRotationMatrix=(0,D.c)()}}const U=8},44989:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>fe,m:()=>De});var D=T(27422),x=T(99770),w=T(4794),B=T(6945),U=T(42836),W=T(32393),Y=T(40723),H=T(88569),G=T(5894),$=T(62208),re=T(42743),ue=T(60881),ae=T(17626),oe=T(59617),ie=T(92724),X=T(7228),Z=T(651),Q=T(91056),J=T(87601),se=T(39114),ee=T(12407),le=T(41528),ne=T(61584),ce=T(2078);class de extends Q.A{constructor(ge,Te,Le){super(ge,Te,Le),this._textureRepository=ge.waterTextureRepository}initializeConfiguration(ge,Te){Te.spherical=ge.viewingMode===oe.JY.Global,Te.doublePrecisionRequiresObfuscation=(0,X.I)(ge.rctx)}initializeProgram(ge){const Te=de.shader.get().build(this.configuration);return new ee.$(ge.rctx,Te,se.i)}bindPass(ge,Te){this.program.bindPass(ge,Te),this.configuration.output!==B.H.Color&&this.configuration.output!==B.H.Normal||this._textureRepository.bind(this.program)}_setPipelineState(ge){const Te=this.configuration,Le=ge===re.Am.NONE,je=ge===re.Am.FrontFace;return(0,ce.sm)({blending:Te.output!==B.H.Normal&&Te.output!==B.H.Highlight&&Te.transparent?Le?H.wu:(0,H.j7)(ge):null,depthTest:{func:(0,H.Bh)(ge)},depthWrite:Le?Te.writeDepth&&ce.LZ:(0,H.K5)(ge),colorWrite:ce.BK,polygonOffset:Le||je?null:(0,H.je)(Te.enableOffset)})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}de.shader=new Z.J(ne.W,()=>T.e(4095).then(T.bind(T,74095)));class me extends le.W{constructor(){super(...arguments),this.output=B.H.Color,this.transparencyPassType=re.Am.NONE,this.spherical=!1,this.receiveShadows=!1,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.hasScreenSpaceReflections=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasCloudsReflections=!1,this.isDraped=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,ae._)([(0,J.o)({count:B.H.COUNT})],me.prototype,"output",void 0),(0,ae._)([(0,J.o)({count:re.Am.COUNT})],me.prototype,"transparencyPassType",void 0),(0,ae._)([(0,J.o)()],me.prototype,"spherical",void 0),(0,ae._)([(0,J.o)()],me.prototype,"receiveShadows",void 0),(0,ae._)([(0,J.o)()],me.prototype,"hasSlicePlane",void 0),(0,ae._)([(0,J.o)()],me.prototype,"transparent",void 0),(0,ae._)([(0,J.o)()],me.prototype,"enableOffset",void 0),(0,ae._)([(0,J.o)()],me.prototype,"writeDepth",void 0),(0,ae._)([(0,J.o)()],me.prototype,"hasScreenSpaceReflections",void 0),(0,ae._)([(0,J.o)()],me.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,ae._)([(0,J.o)()],me.prototype,"hasCloudsReflections",void 0),(0,ae._)([(0,J.o)()],me.prototype,"isDraped",void 0),(0,ae._)([(0,J.o)()],me.prototype,"hasMultipassTerrain",void 0),(0,ae._)([(0,J.o)()],me.prototype,"cullAboveGround",void 0),(0,ae._)([(0,J.o)({constValue:ie.f7.Water})],me.prototype,"pbrMode",void 0),(0,ae._)([(0,J.o)({constValue:!0})],me.prototype,"useCustomDTRExponentForWater",void 0),(0,ae._)([(0,J.o)({constValue:!0})],me.prototype,"highStepCount",void 0),(0,ae._)([(0,J.o)({constValue:!1})],me.prototype,"useFillLights",void 0);class _e extends ue.Z{_updateShadowState(ge){ge.shadowMap.enabled!==this._material.parameters.receiveShadows&&this._material.setParameters({receiveShadows:ge.shadowMap.enabled})}_updateSSRState(ge){ge.ssr.enabled!==this._material.parameters.hasScreenSpaceReflections&&this._material.setParameters({hasScreenSpaceReflections:ge.ssr.enabled})}_updateCloudsReflectionState(ge){const Te=(0,$.pC)(ge.clouds.data);Te!==this._material.parameters.hasCloudsReflections&&this._material.setParameters({hasCloudsReflections:Te})}ensureResources(ge){const Te=this._techniqueRepository.constructionContext.waterTextureRepository;return Te.resourceState===re.Rw.NOT_LOADED&&Te.loadTextures(ge),Te.resourceState}beginSlot(ge){return this._output===B.H.Color&&(this._updateShadowState(ge),this._updateSSRState(ge),this._updateCloudsReflectionState(ge)),this.ensureTechnique(de,ge)}}var he=T(60909),ye=T(57623);class fe extends Y.F5{constructor(ge){super(ge,new De),this._techniqueConfig=new me,this.animation=new U.d}getConfiguration(ge,Te){return this._techniqueConfig.output=ge,this._techniqueConfig.writeDepth=this.parameters.writeDepth,this._techniqueConfig.receiveShadows=this.parameters.receiveShadows,this._techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this._techniqueConfig.transparent=this.parameters.transparent,this._techniqueConfig.hasScreenSpaceReflections=this.parameters.hasScreenSpaceReflections,this._techniqueConfig.hasCloudsReflections=this.parameters.hasCloudsReflections,this._techniqueConfig.isDraped=this.parameters.isDraped,this._techniqueConfig.transparencyPassType=Te.transparencyPassType,this._techniqueConfig.enableOffset=Te.camera.relativeElevation<H.ve,this._techniqueConfig.hasMultipassTerrain=Te.multipassTerrain.enabled,this._techniqueConfig.cullAboveGround=Te.multipassTerrain.cullAboveGround,this._techniqueConfig}update(ge){const Te=Math.min(ge.camera.relativeElevation,ge.camera.distance);this.animation.enabled=Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*Te<ve;const Le=this.animation.advance(ge);return this.setParameters({timeElapsed:(0,D.D9)(this.animation.time)*this.parameters.animationSpeed},!1),this.animation.enabled&&Le}intersect(ge,Te,Le,je,ze,Ee,Ae){(0,ye.Bw)(ge,Te,je,ze,Ee,void 0,Ae)}requiresSlot(ge,Te){switch((0,W.S)(Te)){case B.H.Normal:return ge===G.r.DRAPED_WATER;case B.H.Color:if(this.parameters.isDraped)return ge===G.r.DRAPED_MATERIAL;break;case B.H.Highlight:return ge===G.r.OPAQUE_MATERIAL||ge===G.r.DRAPED_MATERIAL}let Le=G.r.OPAQUE_MATERIAL;return this.parameters.transparent&&(Le=this.parameters.writeDepth?G.r.TRANSPARENT_MATERIAL:G.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),ge===Le}createGLMaterial(ge){if(ge.output===B.H.Color&&this.parameters.isDraped)return ge.output=B.H.Draped,new _e(ge);switch(ge.output){case B.H.Color:case B.H.Normal:case B.H.Highlight:case B.H.Alpha:return new _e(ge)}return null}createBufferWriter(){return new he.G_(he.W1)}}class De extends Y.Mt{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=(0,x.f)(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=(0,w.f)(0,0,0,0),this.transparent=!0,this.writeDepth=!0,this.hasSlicePlane=!1,this.isDraped=!1,this.receiveShadows=!0,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1}}const ve=35e3},60909:(qe,xe,T)=>{"use strict";T.d(xe,{G_:()=>Y,IM:()=>W,W1:()=>U,wp:()=>B});var D=T(19625),x=T(16396),w=T(42037);const B=(0,D.U$)().vec3f(x.T.POSITION),U=(0,D.U$)().vec3f(x.T.POSITION).vec2f(x.T.UV0),W=(0,D.U$)().vec3f(x.T.POSITION).vec4u8(x.T.COLOR);class Y{constructor(G){this.vertexBufferLayout=G}allocate(G){return this.vertexBufferLayout.createBuffer(G)}elementCount(G){return G.indices.get(x.T.POSITION).length}write(G,$,re,ue){(0,w.NK)($,this.vertexBufferLayout,G.transformation,G.invTranspTransformation,re,ue)}}},57623:(qe,xe,T)=>{"use strict";T.d(xe,{Bw:()=>ae,CN:()=>Z,FZ:()=>fe,Fw:()=>ce,Hx:()=>de,LO:()=>_e,Mw:()=>ee,TT:()=>he,Tw:()=>ne,Ue:()=>le,Uf:()=>me});var D=T(85931),x=T(21286),w=T(62208),B=T(84161),U=T(28093),W=T(5548),Y=T(42743),H=T(17962),G=T(2282),$=T(16396),re=T(65073);const ue=(0,W.Ue)();function ae(ve,Ce,ge,Te,Le,je,ze){if(!(0,re.PD)(Ce))if(ve.boundingInfo)(0,G.hu)(ve.primitiveType===Y.MX.Triangle),ie(ve.boundingInfo,Te,Le,ge.tolerance,je,ze);else{const Ee=ve.indices.get($.T.POSITION),Ae=ve.vertexAttributes.get($.T.POSITION);Z(Te,Le,0,Ee.length/3,Ee,Ae,void 0,je,ze)}}const oe=(0,U.c)();function ie(ve,Ce,ge,Te,Le,je){if((0,w.Wi)(ve))return;const ze=le(Ce,ge,oe);if((0,W.op)(ue,ve.getBBMin()),(0,W.Tn)(ue,ve.getBBMax()),(0,w.pC)(Le)&&Le.applyToAabb(ue),ne(ue,Ce,ze,Te)){const{primitiveIndices:Ee,indices:Ae,position:we}=ve,Be=Ee?Ee.length:Ae.length/3;if(Be>De){const Pe=ve.getChildren();if(void 0!==Pe){for(let Oe=0;Oe<8;++Oe)void 0!==Pe[Oe]&&ie(Pe[Oe],Ce,ge,Te,Le,je);return}}Z(Ce,ge,0,Be,Ae,we,Ee,Le,je)}}const X=(0,U.c)();function Z(ve,Ce,ge,Te,Le,je,ze,Ee,Ae){if(ze)return function Q(ve,Ce,ge,Te,Le,je,ze,Ee,Ae){const we=je.data,Be=je.stride||je.size,Pe=ve[0],Oe=ve[1],Ke=ve[2],Ve=Ce[0]-Pe,Ne=Ce[1]-Oe,Ie=Ce[2]-Ke;for(let We=ge;We<Te;++We){const Se=ze[We];let He=3*Se,$e=Be*Le[He++],et=we[$e++],nt=we[$e++],it=we[$e];$e=Be*Le[He++];let Xe=we[$e++],rt=we[$e++],Ze=we[$e];$e=Be*Le[He];let lt=we[$e++],st=we[$e++],Mt=we[$e];(0,w.pC)(Ee)&&([et,nt,it]=Ee.applyToVertex(et,nt,it,We),[Xe,rt,Ze]=Ee.applyToVertex(Xe,rt,Ze,We),[lt,st,Mt]=Ee.applyToVertex(lt,st,Mt,We));const Ft=Xe-et,kt=rt-nt,wt=Ze-it,zt=lt-et,Zt=st-nt,ar=Mt-it,Pr=Ne*ar-Zt*Ie,kr=Ie*zt-ar*Ve,ss=Ve*Zt-zt*Ne,os=Ft*Pr+kt*kr+wt*ss;if(Math.abs(os)<=Number.EPSILON)continue;const Hr=Pe-et,pt=Oe-nt,Ut=Ke-it,$t=Hr*Pr+pt*kr+Ut*ss;if(os>0){if($t<0||$t>os)continue}else if($t>0||$t<os)continue;const Xt=pt*wt-kt*Ut,_r=Ut*Ft-wt*Hr,hr=Hr*kt-Ft*pt,gr=Ve*Xt+Ne*_r+Ie*hr;if(os>0){if(gr<0||$t+gr>os)continue}else if(gr>0||$t+gr<os)continue;const vr=(zt*Xt+Zt*_r+ar*hr)/os;vr>=0&&Ae(vr,ee(Ft,kt,wt,zt,Zt,ar,X),Se,!1)}}(ve,Ce,ge,Te,Le,je,ze,Ee,Ae);const we=je.data,Be=je.stride||je.size,Pe=ve[0],Oe=ve[1],Ke=ve[2],Ve=Ce[0]-Pe,Ne=Ce[1]-Oe,Ie=Ce[2]-Ke;for(let We=ge,Se=3*ge;We<Te;++We){let He=Be*Le[Se++],$e=we[He++],et=we[He++],nt=we[He];He=Be*Le[Se++];let it=we[He++],Xe=we[He++],rt=we[He];He=Be*Le[Se++];let Ze=we[He++],lt=we[He++],st=we[He];(0,w.pC)(Ee)&&([$e,et,nt]=Ee.applyToVertex($e,et,nt,We),[it,Xe,rt]=Ee.applyToVertex(it,Xe,rt,We),[Ze,lt,st]=Ee.applyToVertex(Ze,lt,st,We));const Mt=it-$e,Ft=Xe-et,kt=rt-nt,wt=Ze-$e,zt=lt-et,Zt=st-nt,ar=Ne*Zt-zt*Ie,Pr=Ie*wt-Zt*Ve,kr=Ve*zt-wt*Ne,ss=Mt*ar+Ft*Pr+kt*kr;if(Math.abs(ss)<=Number.EPSILON)continue;const os=Pe-$e,Hr=Oe-et,pt=Ke-nt,Ut=os*ar+Hr*Pr+pt*kr;if(ss>0){if(Ut<0||Ut>ss)continue}else if(Ut>0||Ut<ss)continue;const $t=Hr*kt-Ft*pt,Xt=pt*Mt-kt*os,_r=os*Ft-Mt*Hr,hr=Ve*$t+Ne*Xt+Ie*_r;if(ss>0){if(hr<0||Ut+hr>ss)continue}else if(hr>0||Ut+hr<ss)continue;const gr=(wt*$t+zt*Xt+Zt*_r)/ss;gr>=0&&Ae(gr,ee(Mt,Ft,kt,wt,zt,Zt,X),We,!1)}}const J=(0,U.c)(),se=(0,U.c)();function ee(ve,Ce,ge,Te,Le,je,ze){return(0,B.s)(J,ve,Ce,ge),(0,B.s)(se,Te,Le,je),(0,B.f)(ze,J,se),(0,B.n)(ze,ze),ze}function le(ve,Ce,ge){return(0,B.s)(ge,1/(Ce[0]-ve[0]),1/(Ce[1]-ve[1]),1/(Ce[2]-ve[2]))}function ne(ve,Ce,ge,Te){return ce(ve,Ce,ge,Te,1/0)}function ce(ve,Ce,ge,Te,Le){const je=(ve[0]-Te-Ce[0])*ge[0],ze=(ve[3]+Te-Ce[0])*ge[0];let Ee=Math.min(je,ze),Ae=Math.max(je,ze);const we=(ve[1]-Te-Ce[1])*ge[1],Be=(ve[4]+Te-Ce[1])*ge[1];if(Ae=Math.min(Ae,Math.max(we,Be)),Ae<0||(Ee=Math.max(Ee,Math.min(we,Be)),Ee>Ae))return!1;const Pe=(ve[2]-Te-Ce[2])*ge[2],Oe=(ve[5]+Te-Ce[2])*ge[2];return Ae=Math.min(Ae,Math.max(Pe,Oe)),!(Ae<0)&&(Ee=Math.max(Ee,Math.min(Pe,Oe)),!(Ee>Ae)&&Ee<Le)}function de(ve,Ce,ge,Te,Le){let je=(ge.screenLength||0)*ve.pixelRatio;(0,w.pC)(Le)&&(je=(0,H.bA)(je,Te,Ce,Le));const ze=je*Math.tan(.5*ve.fovY)/(.5*ve.fullHeight);return(0,x.uZ)(ze*Ce,ge.minWorldLength||0,null!=ge.maxWorldLength?ge.maxWorldLength:1/0)}function me(ve,Ce){const ge=Ce?me(Ce):{};for(const Te in ve){let Le=ve[Te];Le&&Le.forEach&&(Le=ye(Le)),null==Le&&Te in ge||(ge[Te]=Le)}return ge}function _e(ve,Ce){let ge=!1;for(const Te in Ce){const Le=Ce[Te];void 0!==Le&&(Array.isArray(Le)?null===ve[Te]?(ve[Te]=Le.slice(),ge=!0):(0,D.Vx)(ve[Te],Le)&&(ge=!0):ve[Te]!==Le&&(ge=!0,ve[Te]=Le))}return ge}function he(ve,Ce,ge,Te,Le,je){if(!Ce.options.selectionMode)return;const ze=ve.vertexAttributes.get($.T.POSITION).data,Ee=ve.vertexAttributes.get($.T.SIZE),we=Te[0],Be=Te[1],Pe=(((Ee&&Ee.data[0])+Le)/2+4)*ve.screenToWorldRatio;let Oe=Number.MAX_VALUE,Ke=0;for(let Ve=0;Ve<ze.length-5;Ve+=3){const Ne=ze[Ve],Ie=ze[Ve+1],We=we-Ne,Se=Be-Ie,He=ze[Ve+3]-Ne,$e=ze[Ve+4]-Ie,et=(0,x.uZ)((He*We+$e*Se)/(He*He+$e*$e),0,1),nt=He*et-We,it=$e*et-Se,Xe=nt*nt+it*it;Xe<Oe&&(Oe=Xe,Ke=Ve/3)}Oe<Pe*Pe&&je(ge.dist,ge.normal,Ke,!1)}function ye(ve){const Ce=[];return ve.forEach(ge=>Ce.push(ge)),Ce}const fe={multiply:1,ignore:2,replace:3,tint:4},De=1e3},42037:(qe,xe,T)=>{"use strict";T.d(xe,{NK:()=>ie,SW:()=>H,Vs:()=>oe,XW:()=>U,ho:()=>re,s5:()=>ue});var D=T(28347),x=T(60479),w=T(2282),B=T(16396);function U(X,Z,Q,J,se=1){const ee=Q.typedBuffer,le=Q.typedBufferStride,ne=X.length;if(J*=le,1===se)for(let ce=0;ce<ne;++ce)ee[J]=Z[X[ce]],J+=le;else for(let ce=0;ce<ne;++ce){const de=Z[X[ce]];for(let me=0;me<se;me++)ee[J]=de,J+=le}}function W(X,Z,Q,J){const se=Q.typedBuffer,ee=Q.typedBufferStride,le=X.length;J*=ee;for(let ne=0;ne<le;++ne){const ce=2*X[ne];se[J]=Z[ce],se[J+1]=Z[ce+1],J+=ee}}function Y(X,Z,Q,J,se){const ee=Q.typedBuffer,le=Q.typedBufferStride,ne=X.length;if(J*=le,null==se||1===se)for(let ce=0;ce<ne;++ce){const de=3*X[ce];ee[J]=Z[de],ee[J+1]=Z[de+1],ee[J+2]=Z[de+2],J+=le}else for(let ce=0;ce<ne;++ce){const de=3*X[ce];for(let me=0;me<se;++me)ee[J]=Z[de],ee[J+1]=Z[de+1],ee[J+2]=Z[de+2],J+=le}}function H(X,Z,Q,J,se=1){const ee=Q.typedBuffer,le=Q.typedBufferStride,ne=X.length;if(J*=le,1===se)for(let ce=0;ce<ne;++ce){const de=4*X[ce];ee[J]=Z[de],ee[J+1]=Z[de+1],ee[J+2]=Z[de+2],ee[J+3]=Z[de+3],J+=le}else for(let ce=0;ce<ne;++ce){const de=4*X[ce];for(let me=0;me<se;++me)ee[J]=Z[de],ee[J+1]=Z[de+1],ee[J+2]=Z[de+2],ee[J+3]=Z[de+3],J+=le}}function re(X,Z,Q,J,se,ee=1){if(!Q)return void Y(X,Z,J,se,ee);const le=J.typedBuffer,ne=J.typedBufferStride,ce=X.length,de=Q[0],me=Q[1],_e=Q[2],he=Q[4],ye=Q[5],fe=Q[6],De=Q[8],ve=Q[9],Ce=Q[10],ge=Q[12],Te=Q[13],Le=Q[14];if(se*=ne,1===ee)for(let je=0;je<ce;++je){const ze=3*X[je],Ee=Z[ze],Ae=Z[ze+1],we=Z[ze+2];le[se]=de*Ee+he*Ae+De*we+ge,le[se+1]=me*Ee+ye*Ae+ve*we+Te,le[se+2]=_e*Ee+fe*Ae+Ce*we+Le,se+=ne}else for(let je=0;je<ce;++je){const ze=3*X[je],Ee=Z[ze],Ae=Z[ze+1],we=Z[ze+2],Be=de*Ee+he*Ae+De*we+ge,Pe=me*Ee+ye*Ae+ve*we+Te,Oe=_e*Ee+fe*Ae+Ce*we+Le;for(let Ke=0;Ke<ee;++Ke)le[se]=Be,le[se+1]=Pe,le[se+2]=Oe,se+=ne}}function ue(X,Z,Q,J,se,ee=1){if(!Q)return void Y(X,Z,J,se,ee);const ne=J.typedBuffer,ce=J.typedBufferStride,de=X.length,me=Q[0],_e=Q[1],he=Q[2],ye=Q[4],fe=Q[5],De=Q[6],ve=Q[8],Ce=Q[9],ge=Q[10],Te=!(0,D.p)(Q);if(se*=ce,1===ee)for(let ze=0;ze<de;++ze){const Ee=3*X[ze],Ae=Z[Ee],we=Z[Ee+1],Be=Z[Ee+2];let Pe=me*Ae+ye*we+ve*Be,Oe=_e*Ae+fe*we+Ce*Be,Ke=he*Ae+De*we+ge*Be;if(Te){const Ve=Pe*Pe+Oe*Oe+Ke*Ke;if(Ve<.999999&&Ve>1e-6){const Ne=1/Math.sqrt(Ve);Pe*=Ne,Oe*=Ne,Ke*=Ne}}ne[se+0]=Pe,ne[se+1]=Oe,ne[se+2]=Ke,se+=ce}else for(let ze=0;ze<de;++ze){const Ee=3*X[ze],Ae=Z[Ee],we=Z[Ee+1],Be=Z[Ee+2];let Pe=me*Ae+ye*we+ve*Be,Oe=_e*Ae+fe*we+Ce*Be,Ke=he*Ae+De*we+ge*Be;if(Te){const Ve=Pe*Pe+Oe*Oe+Ke*Ke;if(Ve<.999999&&Ve>1e-6){const Ne=1/Math.sqrt(Ve);Pe*=Ne,Oe*=Ne,Ke*=Ne}}for(let Ve=0;Ve<ee;++Ve)ne[se+0]=Pe,ne[se+1]=Oe,ne[se+2]=Ke,se+=ce}}function ae(X,Z,Q,J,se,ee=1){if(!Q)return void H(X,Z,J,se,ee);const ne=J.typedBuffer,ce=J.typedBufferStride,de=X.length,me=Q[0],_e=Q[1],he=Q[2],ye=Q[4],fe=Q[5],De=Q[6],ve=Q[8],Ce=Q[9],ge=Q[10],Te=!(0,D.p)(Q);if(se*=ce,1===ee)for(let ze=0;ze<de;++ze){const Ee=4*X[ze],Ae=Z[Ee],we=Z[Ee+1],Be=Z[Ee+2],Pe=Z[Ee+3];let Oe=me*Ae+ye*we+ve*Be,Ke=_e*Ae+fe*we+Ce*Be,Ve=he*Ae+De*we+ge*Be;if(Te){const Ne=Oe*Oe+Ke*Ke+Ve*Ve;if(Ne<.999999&&Ne>1e-6){const Ie=1/Math.sqrt(Ne);Oe*=Ie,Ke*=Ie,Ve*=Ie}}ne[se+0]=Oe,ne[se+1]=Ke,ne[se+2]=Ve,ne[se+3]=Pe,se+=ce}else for(let ze=0;ze<de;++ze){const Ee=4*X[ze],Ae=Z[Ee],we=Z[Ee+1],Be=Z[Ee+2],Pe=Z[Ee+3];let Oe=me*Ae+ye*we+ve*Be,Ke=_e*Ae+fe*we+Ce*Be,Ve=he*Ae+De*we+ge*Be;if(Te){const Ne=Oe*Oe+Ke*Ke+Ve*Ve;if(Ne<.999999&&Ne>1e-6){const Ie=1/Math.sqrt(Ne);Oe*=Ie,Ke*=Ie,Ve*=Ie}}for(let Ne=0;Ne<ee;++Ne)ne[se+0]=Oe,ne[se+1]=Ke,ne[se+2]=Ve,ne[se+3]=Pe,se+=ce}}function oe(X,Z,Q,J,se,ee=1){const le=J.typedBuffer,ne=J.typedBufferStride,ce=X.length;if(se*=ne,1===ee){if(4===Q)for(let de=0;de<ce;++de){const me=4*X[de];le[se]=Z[me],le[se+1]=Z[me+1],le[se+2]=Z[me+2],le[se+3]=Z[me+3],se+=ne}else if(3===Q)for(let de=0;de<ce;++de){const me=3*X[de];le[se]=Z[me],le[se+1]=Z[me+1],le[se+2]=Z[me+2],le[se+3]=255,se+=ne}}else if(4===Q)for(let de=0;de<ce;++de){const me=4*X[de];for(let _e=0;_e<ee;++_e)le[se]=Z[me],le[se+1]=Z[me+1],le[se+2]=Z[me+2],le[se+3]=Z[me+3],se+=ne}else if(3===Q)for(let de=0;de<ce;++de){const me=3*X[de];for(let _e=0;_e<ee;++_e)le[se]=Z[me],le[se+1]=Z[me+1],le[se+2]=Z[me+2],le[se+3]=255,se+=ne}}function ie(X,Z,Q,J,se,ee){for(const le of Z.fieldNames){const ne=X.vertexAttributes.get(le),ce=X.indices.get(le);if(ne&&ce)switch(le){case B.T.POSITION:{(0,w.hu)(3===ne.size);const de=se.getField(le,x.ct);de&&re(ce,ne.data,Q,de,ee);break}case B.T.NORMAL:{(0,w.hu)(3===ne.size);const de=se.getField(le,x.ct);de&&ue(ce,ne.data,J,de,ee);break}case B.T.UV0:{(0,w.hu)(2===ne.size);const de=se.getField(le,x.Eu);de&&W(ce,ne.data,de,ee);break}case B.T.COLOR:{(0,w.hu)(3===ne.size||4===ne.size);const de=se.getField(le,x.mc);de&&oe(ce,ne.data,ne.size,de,ee);break}case B.T.SYMBOLCOLOR:{(0,w.hu)(3===ne.size||4===ne.size);const de=se.getField(le,x.mc);de&&oe(ce,ne.data,ne.size,de,ee);break}case B.T.TANGENT:{(0,w.hu)(4===ne.size);const de=se.getField(le,x.ek);de&&ae(ce,ne.data,J,de,ee);break}}}}},54889:(qe,xe,T)=>{"use strict";T.d(xe,{Dp:()=>Y,z5:()=>W});var D=T(62208);const x={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},w={dash:x.dash,"dash-dot":[...x.dash,...x.dot],dot:x.dot,"long-dash":x["long-dash"],"long-dash-dot":[...x["long-dash"],...x.dot],"long-dash-dot-dot":[...x["long-dash"],...x.dot,...x.dot],none:null,"short-dash":x["short-dash"],"short-dash-dot":[...x["short-dash"],...x["short-dot"]],"short-dash-dot-dot":[...x["short-dash"],...x["short-dot"],...x["short-dot"]],"short-dot":x["short-dot"],solid:null};function W(G,$=2){return{pattern:[G,G],pixelRatio:$}}function Y(G){return(0,D.pC)(G)&&"style"===G.type?function H(G){return(0,D.pC)(G)?function U(G,$=2){return(0,D.Wi)(G)?G:{pattern:G.slice(),pixelRatio:$}}(w[G],8):null}(G.style):null}},38516:(qe,xe,T)=>{"use strict";T.d(xe,{A:()=>Te});var D=T(88159),x=T(62208),w=T(77029),B=T(28347),U=T(43703),W=T(4511),Y=T(32393),H=T(40723),G=T(54840),$=T(91263),re=T(2282),ue=T(7949),ae=T(44989);class oe{constructor(We){this.first=We.from,this.count=We.to-We.from}}class ie{constructor(We=0,Se=0){this.from=We,this.to=Se}}class X extends ie{constructor(We,Se,He,$e,et,nt){super(Se,He),this.id=We,this.isVisible=$e,this.hasHighlights=et,this.hasOccludees=nt}}function Z(Ie){return Array.from(Ie.values()).sort(Q)}function Q(Ie,We){return Ie.from===We.from?Ie.to-We.to:Ie.from-We.from}function J(Ie,We){if(0===Ie.length)return void Ie.push(new oe(We));const Se=Ie[Ie.length-1];!function se(Ie,We){return Ie.first+Ie.count>=We.from}(Se,We)?Ie.push(new oe(We)):Se.count=We.from-Se.first+We.to-We.from}class ee{constructor(We,Se){this._pool=We,this._size=0,this._buffer=We.newBuffer(ne(Se))}dispose(){this._buffer=this._pool.deleteBuffer(this._buffer),this._size=0}release(){this.erase(0,this._size),this.dispose()}get vao(){return this._buffer.vao}get array(){return this._buffer.array}get size(){return this._size}grow(We){this._resize(this._size+We,!0).dispose()}alloc(We){return this._resize(We,!1)}_resize(We,Se){let He;const $e=function ce(Ie,We,Se){return We<=Se?Ie>=Se?Ie:ne(Math.max(2*Ie,Se)):Ie<=2*Se?Ie:ne(Se)}(this._buffer.length,this._size,We);if(this._buffer.length!==$e){const nt=this._pool.newBuffer($e);Se&&(nt.array.set(this._buffer.array.subarray(0,Math.min(this._size,$e))),nt.vao.vertexBuffers.geometry.setSubData(nt.array,0,0,nt.array.byteLength)),He=this._buffer,this._buffer=nt}const et=this._size;return this._size=We,He?{dispose:()=>{He.array.fill(0,0,et),this._pool.deleteBuffer(He)},copy:(nt,it,Xe)=>this._buffer.array.set(He.array.subarray(it,Xe),nt),hasNewBuffer:!0}:{dispose:()=>{},copy:(nt,it,Xe)=>{nt!==it&&this._buffer.array.copyWithin(nt,it,Xe)},hasNewBuffer:!1}}erase(We,Se){this._buffer.array.fill(0,We,Se)}}function ne(Ie){return 65536*Math.ceil(Ie/65536)}var de=T(1036),me=T(86236),_e=T(83994),he=T(67969),ye=T(49353);class fe{constructor(We,Se,He,$e){this.vao=new ye.U(We,Se,{geometry:He},{geometry:_e.f.createVertex(We,he.l1.STATIC_DRAW)}),this.array=new Float32Array($e),this.vao.vertexBuffers.geometry.setSize(this.array.byteLength)}dispose(){this.vao.dispose(!0)}get length(){return this.array.length}}const De=de.an+1;class ve{constructor(We,Se,He){this._rctx=We,this._locations=Se,this._layout=He,this._cache=We.newCache(`MergedRenderer pool ${(0,me.D)()}`,Ce)}dispose(){this._cache.destroy()}newBuffer(We){const Se=We.toString(),He=this._cache.pop(Se);if((0,x.pC)(He)){const $e=He.pop();return He.length>0&&this._cache.put(Se,He,$e.array.byteLength*He.length,De),$e}return new fe(this._rctx,this._locations,this._layout,We)}deleteBuffer(We){const Se=We.array.byteLength,He=We.array.length.toString(),$e=this._cache.pop(He);return(0,x.pC)($e)?($e.push(We),this._cache.put(He,$e,Se*$e.length,-1)):this._cache.put(He,[We],Se,-1),null}}function Ce(Ie,We){if(We===de.lN.ALL)return void Ie.forEach($e=>$e.dispose());const Se=Ie.pop(),He=Ie.length*Se.array.byteLength;return Se.dispose(),He}var ge=T(65073);class Te{constructor(We,Se,He){this._rctx=We,this._materialRepository=Se,this._material=He,this.type="MergedRenderer",this._dataByOrigin=new Map,this._renderCommandData=new w.Z,this._hasHighlights=!1,this._hasOccludees=!1,this._glMaterials=new Y.p(this._material,this._materialRepository),this._bufferWriter=He.createBufferWriter(),this._bufferPool=new ve(We,He.vertexAttributeLocations,(0,W.K)(this._bufferWriter.vertexBufferLayout))}dispose(){this._glMaterials.destroy(),this._dataByOrigin.forEach(We=>We.buffer.dispose()),this._dataByOrigin.clear(),this._bufferPool.dispose()}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&this._material instanceof ae.H}get rendersOccluded(){return!this.isEmpty&&this._material.renderOccluded!==H.yD.Occlude}modify(We){this._updateGeometries(We.updates),this._addAndRemoveGeometries(We.adds,We.removes),this._updateRenderCommands()}_addAndRemoveGeometries(We,Se){const He=this._bufferWriter,$e=He.vertexBufferLayout.stride/4,et=this._dataByOrigin,nt=function je(Ie,We){const Se=new Map;for(const He of Ie)ze(Se,He,!0);for(const He of We)ze(Se,He,!1);return Se}(We,Se);nt.forEach((it,Xe)=>{nt.delete(Xe);const rt=it.toAdd.reduce((zt,Zt)=>zt+He.elementCount(Zt.data),0);let Ze=et.get(Xe);if(null==Ze)(0,re.hu)(0===it.toRemove.length),Ze=new Be(it.origin,new ee(this._bufferPool,rt*$e)),et.set(Xe,Ze);else if(0===it.toAdd.length&&Ze.instances.size===it.toRemove.length)return Ze.buffer.dispose(),void et.delete(Xe);let lt=0;Ze.instances.forEach(zt=>lt+=zt.to-zt.from);const st=it.toRemove.reduce((zt,Zt)=>zt+He.elementCount(Zt.data),0),Ft=(lt+rt-st)*$e,kt=Oe;if(Ft<Ze.buffer.size/2?this._removeAndRebuild(Ze,it.toRemove,$e,Ft,kt):it.toRemove.length>0&&this._remove(Ze,it.toRemove,$e,kt),it.toAdd.length>0){const zt=Ke;(0,re.u_)(zt,-it.origin[0],-it.origin[1],-it.origin[2]),this._add(Ze,it.toAdd,$e,zt,kt)}const wt=Ze.buffer.vao.vertexBuffers.geometry;we(kt),kt.forAll(({from:zt,to:Zt})=>{if(zt<Zt){const Pr=4,kr=zt*Pr;wt.setSubData(Ze.buffer.array,kr,kr,Zt*Pr)}}),kt.clear(),Ze.drawCommandsDirty=!0})}_updateGeometries(We){const Se=this._bufferWriter,He=Se.vertexBufferLayout.stride/4;for(const $e of We){const et=$e.renderGeometry,nt=this._dataByOrigin.get(et.origin.id),it=nt&&nt.instances.get(et.id);if(!it)return;const Xe=$e.updateType;if(Xe&G.$.State.VISIBILITIES&&(it.isVisible=et.instanceParameters.visible),Xe&(G.$.State.HIGHLIGHTS|G.$.State.VISIBILITIES)){const rt=et.instanceParameters.visible;it.hasHighlights=!!et.instanceParameters.highlights&&rt}if(Xe&G.$.State.OCCLUDEES&&(it.hasOccludees=!!et.instanceParameters.occludees),Xe&(G.$.State.VERTEXATTRS|G.$.State.TRANSFORMATION)){const{array:rt,vao:Ze}=nt.buffer;(0,ge.bZ)(et,Ve,Ne),Se.write({transformation:Ve,invTranspTransformation:Ne},et.data,Se.vertexBufferLayout.createView(rt.buffer),it.from),(0,re.hu)(it.from+Se.elementCount(et.data)===it.to,"material VBO layout has changed"),Ze.vertexBuffers.geometry.setSubData(rt,it.from*He*4,it.from*He*4,it.to*He*4)}nt.drawCommandsDirty=!0}}_updateRenderCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach(Se=>{Se.hasHiddenInstances=!1,Se.hasHighlights=!1,Se.hasOccludees=!1,(0,D.oE)(Se.instances,He=>(He.isVisible?(He.hasHighlights&&(this._hasHighlights=!0,Se.hasHighlights=!0),He.hasOccludees&&(this._hasOccludees=!0,Se.hasOccludees=!0)):Se.hasHiddenInstances=!0,Se.hasHiddenInstances&&Se.hasHighlights&&Se.hasOccludees))});const We=Se=>{if(Se.drawCommandsDefault=null,Se.drawCommandsHighlight=null,Se.drawCommandsOccludees=null,Se.drawCommandsShadowHighlightRest=null,0===Se.instances.size)return;if(!Ee(Se))return void(Se.drawCommandsDefault=[{first:0,count:4*Se.buffer.size/this._bufferWriter.vertexBufferLayout.stride}]);const He=Z(Se.instances);Se.drawCommandsDefault=[],Se.drawCommandsHighlight=[],Se.drawCommandsOccludees=[],Se.drawCommandsShadowHighlightRest=[];for(const $e of He)$e.isVisible&&(J($e.hasOccludees?Se.drawCommandsOccludees:Se.drawCommandsDefault,$e),J($e.hasHighlights?Se.drawCommandsHighlight:Se.drawCommandsShadowHighlightRest,$e))};this._dataByOrigin.forEach(Se=>{Se.drawCommandsDirty&&(We(Se),Se.drawCommandsDirty=!1)})}updateAnimation(We){return this._material.update(We)}requiresSlot(We,Se){return null==We||this._material.requiresSlot(We,Se)}render(We,Se){if(!this.requiresSlot(Se.slot,We))return!1;const He=We===$.C.MATERIAL_HIGHLIGHT||We===$.C.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT;if(He&&!this._hasHighlights)return!1;const $e=We===$.C.MATERIAL_DEPTH_SHADOWMAP_DEFAULT,et=!(He||$e);if(this._dataByOrigin.forEach(rt=>{if(He&&!rt.hasHighlights)return;const Ze=(He?rt.drawCommandsHighlight:$e&&Ee(rt)?rt.drawCommandsShadowHighlightRest:rt.drawCommandsDefault)||null,lt=et&&rt.drawCommandsOccludees||null;((0,x.pC)(Ze)||(0,x.pC)(lt))&&this._renderCommandData.push(new Pe(rt.origin,rt.buffer,Ze,lt))}),0===this._renderCommandData.length)return!1;const nt=this._rctx,it=this._glMaterials.load(nt,We);if((0,x.Wi)(it))return this._renderCommandData.clear(),!1;const Xe=it.beginSlot(Se);return nt.bindTechnique(Xe,this._material.parameters,Se,!1),this._renderCommandData.forAll(rt=>{Xe.bindDraw(rt,Se);const{buffer:Ze,renderCommands:lt,occludeeCommands:st}=rt;Xe.ensureAttributeLocations(Ze.vao),nt.bindVAO(Ze.vao);const Mt=Xe.primitiveType;(0,x.pC)(lt)&&this._renderCommands(nt,Mt,lt),(0,x.pC)(st)&&(Xe.bindPipelineState(nt,Se.slot,!0),this._renderCommands(nt,Mt,st),Xe.bindPipelineState(nt,Se.slot,!1))}),this._renderCommandData.clear(),!0}_renderCommands(We,Se,He){for(let $e=0;$e<He.length;$e++)We.drawArrays(Se,He[$e].first,He[$e].count)}_removeAndRebuild(We,Se,He,$e,et){for(const Ze of Se)We.instances.delete(Ze.id);const nt=Z(We.instances);We.instances.clear();const it=We.buffer.size,Xe=We.buffer.alloc($e);let rt=0;for(const Ze of nt){const lt=Ze.from*He,st=Ze.to*He;Xe.copy(rt,lt,st),Ze.from=rt/He,rt+=st-lt,Ze.to=rt/He,We.instances.set(Ze.id,Ze)}et.push(new ie(0,Xe.hasNewBuffer?We.buffer.array.length:it)),Xe.dispose(),We.buffer.erase(rt,et.back().to),We.holes.clear()}_remove(We,Se,He,$e){for(const et of Se){const nt=et.id,it=We.instances.get(nt),Xe=it.from*He,rt=it.to*He;We.buffer.erase(Xe,rt),We.holes.push(new ie(it.from,it.to)),We.instances.delete(nt),$e.push(new ie(Xe,rt))}we(We.holes)}_add(We,Se,He,$e,et){if(0===Se.length)return;const nt=this._bufferWriter;let it=nt.vertexBufferLayout.createView(We.buffer.array.buffer);const Xe=We.holes.length>0;let rt=Number.MAX_SAFE_INTEGER,Ze=Number.MIN_SAFE_INTEGER;for(const lt of Se){const st=(0,x.pC)(lt.transformation)?(0,B.m)(Ve,$e,lt.transformation):$e;(0,B.a)(Ne,st);const Mt=(0,B.t)(Ne,Ne),Ft=nt.elementCount(lt.data),kt=Ft*He;let wt=Ae(We.holes,Ft);(0,x.Wi)(wt)&&(wt=We.buffer.size/He,We.buffer.grow(kt),it=nt.vertexBufferLayout.createView(We.buffer.array.buffer)),nt.write({transformation:st,invTranspTransformation:Mt},lt.data,it,wt);const zt=lt.instanceParameters.visible,Pr=new X(lt.id,wt,wt+Ft,zt,!!lt.instanceParameters.highlights&&zt,!!lt.instanceParameters.occludees);(0,re.hu)(null==We.instances.get(lt.id)),We.instances.set(lt.id,Pr),Xe?et.push(new ie(Pr.from*He,Pr.to*He)):(rt=Math.min(Pr.from,rt),Ze=Math.max(Pr.to,Ze))}Xe||et.push(new ie(rt*He,Ze*He))}get test(){return{material:this._material,glMaterials:this._glMaterials,dataByOrigin:this._dataByOrigin}}}class Le{constructor(We){this.origin=We,this.toAdd=new Array,this.toRemove=new Array}}function ze(Ie,We,Se){const He=We.origin;if((0,x.Wi)(He))return;let $e=Ie.get(He.id);null==$e&&($e=new Le(He.vec3),Ie.set(He.id,$e)),Se?$e.toAdd.push(We):$e.toRemove.push(We)}function Ee(Ie){return Ie.hasOccludees||Ie.hasHighlights||Ie.hasHiddenInstances}function Ae(Ie,We){let Se;if(!Ie.some($e=>!($e.to-$e.from<We||(Se=$e,0))))return null;const He=Se.from;return Se.from+=We,Se.from>=Se.to&&Ie.removeUnordered(Se),He}function we(Ie){const We=new Map;Ie.forAll(He=>We.set(He.from,He));let Se=!0;for(;Se;)Se=!1,Ie.forEach(He=>{const $e=We.get(He.to);$e&&(He.to=$e.to,We.delete($e.from),Ie.removeUnordered($e),Se=!0)})}class Be{constructor(We,Se){this.origin=We,this.buffer=Se,this.instances=new Map,this.holes=new w.Z({deallocator:null}),this.hasHiddenInstances=!1,this.hasHighlights=!1,this.hasOccludees=!1,this.drawCommandsDirty=!1}}class Pe extends ue.w{constructor(We,Se,He,$e){super(We),this.buffer=Se,this.renderCommands=He,this.occludeeCommands=$e}}const Oe=new w.Z({deallocator:null}),Ke=(0,U.c)(),Ve=(0,U.c)(),Ne=(0,U.c)()},65073:(qe,xe,T)=>{"use strict";T.d(xe,{EE:()=>$,PD:()=>H,U_:()=>Y,bZ:()=>G,lr:()=>W});var D=T(62208),x=T(28347),w=T(43703),B=T(2282),U=T(2757);function W(oe,ie){return(0,D.Wi)(oe)&&(oe=[]),oe.push(ie),oe}function Y(oe,ie){if((0,D.Wi)(oe))return null;const X=oe.filter(Z=>Z!==ie);return 0===X.length?null:X}function H(oe){return!!(0,D.pC)(oe)&&!oe.visible}function G(oe,ie,X){const Z=oe.origin.vec3;(0,B.u_)(ae,-Z[0],-Z[1],-Z[2]),(0,D.pC)(oe.transformation)?(0,x.m)(ie,ae,oe.transformation):(0,x.c)(ie,ae),X&&((0,x.a)(X,ie),(0,x.t)(X,X))}function $(oe,ie,X,Z,Q){re[0]=oe.get(ie,0),re[1]=oe.get(ie,1),re[2]=oe.get(ie,2),(0,U.LF)(re,ue,3),X.set(Q,0,ue[0]),Z.set(Q,0,ue[1]),X.set(Q,1,ue[2]),Z.set(Q,1,ue[3]),X.set(Q,2,ue[4]),Z.set(Q,2,ue[5])}const re=new Float64Array(3),ue=new Float32Array(6),ae=(0,w.c)()},54580:(qe,xe,T)=>{"use strict";T.d(xe,{Fv:()=>B,ZB:()=>U,v3:()=>w});var w,B,W,D=T(17626),x=T(87601);(W=w||(w={}))[W.Standard=0]="Standard",W[W.TransparentToHUDVisibility=1]="TransparentToHUDVisibility",W[W.Transparency=2]="Transparency",W[W.OverlayWithTransparency=3]="OverlayWithTransparency",W[W.COUNT=4]="COUNT",function(W){W[W.None=0]="None",W[W.Alpha=1]="Alpha",W[W.PremultipliedAlpha=2]="PremultipliedAlpha",W[W.COUNT=3]="COUNT"}(B||(B={}));class U extends x.m{constructor(){super(...arguments),this.function=w.Standard,this.alphaMode=B.None,this.hasOpacityFactor=!1}}(0,D._)([(0,x.o)({count:w.COUNT})],U.prototype,"function",void 0),(0,D._)([(0,x.o)({count:B.COUNT})],U.prototype,"alphaMode",void 0),(0,D._)([(0,x.o)()],U.prototype,"hasOpacityFactor",void 0)},39711:(qe,xe,T)=>{"use strict";T.d(xe,{Qm:()=>le,em:()=>ee,tT:()=>ne});var D=T(550),x=T(28093),w=T(4794),B=T(59617),U=T(6945),W=T(36603),Y=T(21799),H=T(67022),G=T(7228),$=T(651),re=T(91056),ue=T(42743),ae=T(39114),oe=T(40723),ie=T(88569),X=T(12407),Z=T(64127),Q=T(96160),J=T(67969),se=T(2078);class ee extends Y.d4{constructor(){super(...arguments),this.isSchematic=!1,this.usePBR=!1,this.mrrFactors=(0,x.f)(0,1,.5),this.hasVertexColors=!1,this.hasSymbolColors=!1,this.doubleSided=!1,this.doubleSidedType="normal",this.cullFace=ue.Vr.Back,this.emissiveFactor=(0,x.f)(0,0,0),this.instancedDoublePrecision=!1,this.normals="default",this.receiveSSAO=!0,this.receiveShadows=!0,this.castShadows=!0,this.shadowMappingEnabled=!1,this.ambient=(0,x.f)(.2,.2,.2),this.diffuse=(0,x.f)(.8,.8,.8),this.externalColor=(0,w.f)(1,1,1,1),this.colorMixMode="multiply",this.opacity=1,this.layerOpacity=1,this.origin=(0,x.c)(),this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.offsetTransparentBackfaces=!1,this.vvSizeEnabled=!1,this.vvSizeMinSize=[1,1,1],this.vvSizeMaxSize=[100,100,100],this.vvSizeOffset=[0,0,0],this.vvSizeFactor=[1,1,1],this.vvSizeValue=[1,1,1],this.vvColorEnabled=!1,this.vvColorValues=[0,0,0,0,0,0,0,0],this.vvColorColors=[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],this.vvSymbolAnchor=[0,0,0],this.vvSymbolRotationMatrix=(0,D.c)(),this.vvOpacityEnabled=!1,this.vvOpacityValues=[],this.vvOpacityOpacities=[],this.transparent=!1,this.writeDepth=!0,this.customDepthTest=ue.Gv.Less,this.textureAlphaMode=ue.JJ.Blend,this.textureAlphaCutoff=H.F,this.textureAlphaPremultiplied=!1,this.hasOccludees=!1,this.renderOccluded=oe.yD.Occlude}}class le extends Y.Pf{constructor(){super(...arguments),this.origin=(0,x.c)(),this.slicePlaneLocalOrigin=this.origin}}class ne extends re.A{initializeConfiguration(me,_e){_e.spherical=me.viewingMode===B.JY.Global,_e.doublePrecisionRequiresObfuscation=(0,G.I)(me.rctx),_e.textureCoordinateType=_e.hasColorTexture||_e.hasMetalnessAndRoughnessTexture||_e.hasEmissionTexture||_e.hasOcclusionTexture||_e.hasNormalTexture?W.N.Default:W.N.None}initializeProgram(me){return this._initializeProgram(me,ne.shader)}_initializeProgram(me,_e){const he=_e.get().build(this.configuration);return new X.$(me.rctx,he,ae.i)}_convertDepthTestFunction(me){return me===ue.Gv.Lequal?J.wb.LEQUAL:J.wb.LESS}_setPipeline(me,_e){const he=this.configuration,ye=me===ue.Am.NONE,fe=me===ue.Am.FrontFace;return(0,se.sm)({blending:he.output!==U.H.Color&&he.output!==U.H.Alpha||!he.transparent?null:ye?ie.wu:(0,ie.j7)(me),culling:(de=he,(de.cullFace!==ue.Vr.None||!de.hasSlicePlane&&!de.transparent&&!de.doubleSidedMode)&&(0,se.zp)(he.cullFace)),depthTest:{func:(0,ie.Bh)(me,this._convertDepthTestFunction(he.customDepthTest))},depthWrite:ye||fe?he.writeDepth&&se.LZ:null,colorWrite:se.BK,stencilWrite:he.hasOccludees?Z.s3:null,stencilTest:he.hasOccludees?_e?Z.eD:Z.RY:null,polygonOffset:ye||fe?null:(0,ie.je)(he.enableOffset)});var de}initializePipeline(){return this._occludeePipelineState=this._setPipeline(this.configuration.transparencyPassType,!0),this._setPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(me,_e){return _e?this._occludeePipelineState:super.getPipelineState(me,_e)}}ne.shader=new $.J(Q.D,()=>T.e(3907).then(T.bind(T,83907)))},39401:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>Y,R:()=>W});var W,H,D=T(17626),x=T(6945),w=T(87601),B=T(42743),U=T(41528);(H=W||(W={}))[H.BUTT=0]="BUTT",H[H.SQUARE=1]="SQUARE",H[H.ROUND=2]="ROUND",H[H.COUNT=3]="COUNT";class Y extends U.W{constructor(){super(...arguments),this.output=x.H.Color,this.capType=W.BUTT,this.transparencyPassType=B.Am.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleScaleWithLineWidth=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.wireframe=!1}}(0,D._)([(0,w.o)({count:x.H.COUNT})],Y.prototype,"output",void 0),(0,D._)([(0,w.o)({count:W.COUNT})],Y.prototype,"capType",void 0),(0,D._)([(0,w.o)({count:B.Am.COUNT})],Y.prototype,"transparencyPassType",void 0),(0,D._)([(0,w.o)()],Y.prototype,"occluder",void 0),(0,D._)([(0,w.o)()],Y.prototype,"hasSlicePlane",void 0),(0,D._)([(0,w.o)()],Y.prototype,"hasPolygonOffset",void 0),(0,D._)([(0,w.o)()],Y.prototype,"writeDepth",void 0),(0,D._)([(0,w.o)()],Y.prototype,"draped",void 0),(0,D._)([(0,w.o)()],Y.prototype,"stippleEnabled",void 0),(0,D._)([(0,w.o)()],Y.prototype,"stippleOffColorEnabled",void 0),(0,D._)([(0,w.o)()],Y.prototype,"stippleScaleWithLineWidth",void 0),(0,D._)([(0,w.o)()],Y.prototype,"stipplePreferContinuous",void 0),(0,D._)([(0,w.o)()],Y.prototype,"roundJoins",void 0),(0,D._)([(0,w.o)()],Y.prototype,"vvSize",void 0),(0,D._)([(0,w.o)()],Y.prototype,"vvColor",void 0),(0,D._)([(0,w.o)()],Y.prototype,"vvOpacity",void 0),(0,D._)([(0,w.o)()],Y.prototype,"falloffEnabled",void 0),(0,D._)([(0,w.o)()],Y.prototype,"innerColorEnabled",void 0),(0,D._)([(0,w.o)()],Y.prototype,"hasOccludees",void 0),(0,D._)([(0,w.o)()],Y.prototype,"hasMultipassTerrain",void 0),(0,D._)([(0,w.o)()],Y.prototype,"cullAboveGround",void 0),(0,D._)([(0,w.o)()],Y.prototype,"wireframe",void 0),(0,D._)([(0,w.o)({constValue:!0})],Y.prototype,"stippleRequiresClamp",void 0),(0,D._)([(0,w.o)({constValue:!0})],Y.prototype,"stippleRequiresStretchMeasure",void 0),(0,D._)([(0,w.o)({constValue:!0})],Y.prototype,"hasVvInstancing",void 0),(0,D._)([(0,w.o)({constValue:!0})],Y.prototype,"hasSliceTranslatedView",void 0)},69828:(qe,xe,T)=>{"use strict";T.d(xe,{l:()=>B,w:()=>w});var w,U,D=T(17626),x=T(87601);(U=w||(w={}))[U.Gradient=0]="Gradient",U[U.Threshold=1]="Threshold",U[U.COUNT=2]="COUNT";class B extends x.m{constructor(){super(...arguments),this.visualization=w.Gradient,this.bandsEnabled=!1}}(0,D._)([(0,x.o)({count:w.COUNT})],B.prototype,"visualization",void 0),(0,D._)([(0,x.o)()],B.prototype,"bandsEnabled",void 0)},57008:(qe,xe,T)=>{"use strict";T.d(xe,{g:()=>G});var D=T(99770),x=T(17625);function w($){const re=x.H`bool isNaN( float val )
{
return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}`;$.code.add(re)}var B=T(95285),U=T(91574),W=T(63123),Y=T(46524);const H=(0,D.f)(.5,-4e-4);function G($,re){const ue=$.vertex;ue.include(w),ue.constants.add("depthBias","vec2",H),ue.uniforms.add(new B.A("inverseViewport",(ae,oe)=>oe.inverseViewport)),re.legacy?(ue.uniforms.add(new Y.B("localView")),ue.uniforms.add(new W.g("proj",(ae,oe)=>oe.camera.projectionMatrix)),ue.code.add(x.H`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {
float offsetXY = depthBias.x;
vec4 projNormal = proj * localView * vec4(globalNormal, 0.0);
return offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;
}`)):(ue.uniforms.add(new U.c("transformNormalViewFromGlobal",ae=>ae.transformNormalViewFromGlobal)),ue.uniforms.add(new W.g("transformProjFromView",ae=>ae.transformProjFromView)),ue.code.add(x.H`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {
float offsetXY = depthBias.x;
vec4 projNormal = transformProjFromView * vec4(transformNormalViewFromGlobal * globalNormal, 0.0);
return offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;
}`)),ue.code.add(x.H`float _calculateProjectedBiasZ(vec4 projPos) {
float offsetZ = depthBias.y;
return sqrt(max(projPos.z,0.0)) * offsetZ;
}
vec4 adjustProjectedPosition(vec4 projPos, vec3 worldNormal, float lineWidth) {
vec2 offsetXY = calculateProjectedBiasXY(projPos, worldNormal);
if (!isNaN(offsetXY.x) && !isNaN(offsetXY.y)) {
projPos.xy += offsetXY;
}
projPos.z += _calculateProjectedBiasZ(projPos);
return projPos;
}`)}},98828:(qe,xe,T)=>{"use strict";T.d(xe,{S:()=>x});var D=T(17625);function x(w,B){const U=w.fragment;U.constants.add("coverageTestThreshold","float",.01),U.code.add(B.antialiasing?D.H`#define discardByCoverage(radius, coverage) { if (coverage < coverageTestThreshold) discard; }`:D.H`#define discardByCoverage(radius, coverage) { float coverageLimit = radius <= 0.5 ? coverageTestThreshold : 0.75; if (coverage < coverageLimit) discard; }`)}},72175:(qe,xe,T)=>{"use strict";T.d(xe,{o:()=>x});var D=T(17625);function x(w,B){const U=w.vertex;B.silhouette?(U.code.add(D.H`bool isSilhouetteEdge(vec3 viewDir, vec3 normalA, vec3 normalB) {
float faceAVisible = dot(viewDir, normalA);
float faceBVisible = dot(viewDir, normalB);
return faceAVisible * faceBVisible < 0.0;
}`),U.code.add(B.legacy?D.H`bool discardNonSilhouetteEdges(vec3 viewPos, vec3 worldPos) {
vec3 viewNormalA = _modelToViewNormal(normalA);
vec3 viewNormalB = _modelToViewNormal(normalB);
vec3 viewDir = -viewPos;
if (isSilhouetteEdge(viewDir, viewNormalA, viewNormalB)) {
return false;
}
gl_Position = vec4(10.0, 10.0, 10.0, 1.0);
return true;
}`:D.H`bool discardNonSilhouetteEdges(vec3 viewPos, vec3 worldPos) {
vec3 worldNormalA = _modelToWorldNormal(normalA);
vec3 worldNormalB = _modelToWorldNormal(normalB);
vec3 viewDir = -worldPos;
if (isSilhouetteEdge(viewDir, worldNormalA, worldNormalB)) {
return false;
}
gl_Position = vec4(10.0, 10.0, 10.0, 1.0);
return true;
}`)):U.code.add(D.H`bool discardNonSilhouetteEdges(vec3 viewPos, vec3 worldPos) {
return false;
}`)}},98412:(qe,xe,T)=>{"use strict";T.d(xe,{l:()=>w});var D=T(17625),x=T(73105);function w(B,U){const W=B.vertex;switch(U.mode){case x.Jb.SKETCH:W.code.add(D.H`#define discardShortEdges(unpackedAttributes, lineLengthPixels) { if (lineLengthPixels <= 3.0) { gl_Position = vec4(10.0, 10.0, 10.0, 1.0); return; }}`);break;case x.Jb.MIXED:W.code.add(D.H`#define discardShortEdges(unpackedAttributes, lineLengthPixels) { if (unpackedAttributes.type <= 0.0 && lineLengthPixels <= 3.0) { gl_Position = vec4(10.0, 10.0, 10.0, 1.0); return; }}`);break;case x.Jb.SOLID:W.code.add(D.H`#define discardShortEdges(unpackedAttributes, lineLengthPixels) {}`)}}},73105:(qe,xe,T)=>{"use strict";T.d(xe,{Jb:()=>Z,UR:()=>oe,lV:()=>ie});var Z,Q,D=T(35357),x=T(7228),w=T(19278),B=T(65364),U=T(77739),W=T(97139),Y=T(65787),H=T(17625),G=T(9546),$=T(91574),re=T(63123),ue=T(66838),ae=T(16396);function oe(Q,J){const se=Q.vertex;se.include(w.n),se.uniforms.add(new Y.p("distanceFalloffFactor",ee=>ee.distanceFalloffFactor)),se.code.add(H.H`float distanceBasedPerspectiveFactor(float distance) {
return clamp(sqrt(distanceFalloffFactor / distance), 0.0, 1.0);
}`),se.uniforms.add(new ue.Q("componentDataTex")),se.uniforms.add(new B.e("componentDataTexInvDim")),Q.attributes.add(ae.T.COMPONENTINDEX,"float"),se.constants.add("componentColorFieldOffset","float",0),se.constants.add("componentOtherFieldOffset","float",1),se.constants.add("componentVerticalOffsetFieldOffset","float",2),se.constants.add("componentFieldCount","float",3),se.constants.add("lineWidthFractionFactor","float",8),se.constants.add("extensionLengthOffset","float",128),se.constants.add("componentTexWidth","float",4096),se.constants.add("verticalOffsetScale","float",2*D.E_),se.code.add(H.H`vec2 _componentTextureCoords(float componentIndex, float fieldOffset) {
float fieldIndex = componentFieldCount * componentIndex + fieldOffset;
float rowIndex = floor(fieldIndex / componentTexWidth);
float colIndex = mod(fieldIndex, componentTexWidth);
vec2 linearIndex = vec2(
(colIndex + 0.5) / componentTexWidth,
(rowIndex + 0.5) * componentDataTexInvDim.y
);
return linearIndex;
}
struct ComponentData {
vec4 color;
float lineWidth;
float extensionLength;
float type;
float verticalOffset;
};
ComponentData readComponentData() {
vec2 colorIndex = _componentTextureCoords(componentIndex, componentColorFieldOffset);
vec2 otherIndex = _componentTextureCoords(componentIndex, componentOtherFieldOffset);
vec2 verticalOffsetIndex = _componentTextureCoords(componentIndex, componentVerticalOffsetFieldOffset);
vec4 colorValue = texture2D(componentDataTex, colorIndex);
vec4 otherValue = texture2D(componentDataTex, otherIndex);
float verticalOffset = (rgba2float(texture2D(componentDataTex, verticalOffsetIndex)) - 0.5) * verticalOffsetScale;
return ComponentData(
vec4(colorValue.rgb, colorValue.a * otherValue.w),
otherValue.x * (255.0 / lineWidthFractionFactor),
otherValue.y * 255.0 - extensionLengthOffset,
-(otherValue.z * 255.0) + 0.5,
verticalOffset
);
}`),J.legacy?se.code.add(H.H`vec3 _modelToWorldNormal(vec3 normal) {
return (model * vec4(normal, 0.0)).xyz;
}
vec3 _modelToViewNormal(vec3 normal) {
return (localView * model * vec4(normal, 0.0)).xyz;
}`):(se.uniforms.add(new G.j("transformNormalGlobalFromModel",ee=>ee.transformNormalGlobalFromModel)),se.code.add(H.H`vec3 _modelToWorldNormal(vec3 normal) {
return transformNormalGlobalFromModel * normal;
}`)),J.silhouette?(Q.attributes.add(ae.T.NORMALA,"vec3"),Q.attributes.add(ae.T.NORMALB,"vec3"),se.code.add(H.H`vec3 worldNormal() {
return _modelToWorldNormal(normalize(normalA + normalB));
}`)):(Q.attributes.add(ae.T.NORMAL,"vec3"),se.code.add(H.H`vec3 worldNormal() {
return _modelToWorldNormal(normal);
}`)),J.legacy?se.code.add(H.H`void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {
worldPos = (model * vec4(modelPos, 1.0)).xyz;
viewPos = (localView * vec4(worldPos, 1.0)).xyz;
}`):(se.include(x.$,J),se.include(x.$,J),se.uniforms.add([new $.c("transformViewFromCameraRelativeRS",ee=>ee.transformViewFromCameraRelativeRS),new G.j("transformWorldFromModelRS",ee=>ee.transformWorldFromModelRS),new U.B("transformWorldFromModelTL",ee=>ee.transformWorldFromModelTL),new U.B("transformWorldFromModelTH",ee=>ee.transformWorldFromModelTH),new W.J("transformWorldFromViewTL",ee=>ee.transformWorldFromViewTL),new W.J("transformWorldFromViewTH",ee=>ee.transformWorldFromViewTH)]),se.code.add(H.H`
      void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {
        vec3 rotatedModelPosition = transformWorldFromModelRS * modelPos;

        vec3 transformCameraRelativeFromModel = dpAdd(
          transformWorldFromModelTL,
          transformWorldFromModelTH,
          -transformWorldFromViewTL,
          -transformWorldFromViewTH
        );

        worldPos = transformCameraRelativeFromModel + rotatedModelPosition;

        if (verticalOffset != 0.0) {
          vec3 vUp = ${J.spherical?H.H`normalize(transformWorldFromModelTL + rotatedModelPosition);`:H.H`vec3(0.0, 0.0, 1.0);`}
          worldPos += verticalOffset * vUp;
        }

        viewPos = transformViewFromCameraRelativeRS * worldPos;
      }
    `)),se.uniforms.add(new re.g("transformProjFromView",(ee,le)=>le.camera.projectionMatrix)),se.code.add(H.H`vec4 projFromViewPosition(vec3 position) {
return transformProjFromView * vec4(position, 1.0);
}`),se.code.add(H.H`float calculateExtensionLength(float extensionLength, float lineLength) {
return extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);
}`)}function ie(Q){return Q.mode===Z.SKETCH||Q.mode===Z.MIXED}(Q=Z||(Z={}))[Q.SOLID=0]="SOLID",Q[Q.SKETCH=1]="SKETCH",Q[Q.MIXED=2]="MIXED",Q[Q.COUNT=3]="COUNT"},10967:(qe,xe,T)=>{"use strict";T.d(xe,{B:()=>U});var D=T(84178),x=T(17625),w=T(73105),B=T(69276);function U(W,Y){const H=W.vertex;switch(W.include(B.H,Y),(0,w.lV)(Y)&&H.uniforms.add(new D.d("strokesAmplitude")),Y.mode){case w.Jb.SOLID:H.code.add(x.H`float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {
return 0.0;
}`);break;case w.Jb.SKETCH:H.code.add(x.H`float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {
return strokesAmplitude;
}`);break;case w.Jb.MIXED:H.code.add(x.H`float calculateLineAmplitude(UnpackedAttributes unpackedAttributes) {
float type = unpackedAttributes.type;
if (type <= 0.0) {
return strokesAmplitude;
}
else {
return 0.0;
}
}`)}}},82716:(qe,xe,T)=>{"use strict";T.d(xe,{N:()=>H});var D=T(19278),x=T(65364),w=T(84178),B=T(17625),U=T(66838),W=T(73105),Y=T(69276);function H(G,$){const re=G.vertex;G.include(Y.H,$);const ue=G.fragment;switch((0,W.lV)($)&&(re.uniforms.add(new x.e("strokesTextureScale")),re.uniforms.add(new w.d("strokesLog2Resolution")),re.uniforms.add(new w.d("strokeVariants")),G.varyings.add("vStrokeUV","vec2"),ue.uniforms.add(new U.Q("strokesTexture")),ue.uniforms.add(new w.d("strokesNormalizationScale")),re.code.add(B.H`void calculateStyleOutputsSketch(float lineLength, UnpackedAttributes unpackedAttributes) {
vec2 sidenessNorm = unpackedAttributes.sidenessNorm;
float lineIndex = clamp(ceil(log2(lineLength)), 0.0, strokesLog2Resolution);
vStrokeUV = vec2(exp2(lineIndex) * sidenessNorm.y, lineIndex * strokeVariants + variantStroke + 0.5) * strokesTextureScale;
vStrokeUV.x += variantOffset;
}`),G.fragment.include(D.n),ue.code.add(B.H`float calculateLineOffsetSketch() {
float offsetNorm = rgba2float(texture2D(strokesTexture, vStrokeUV));
return (offsetNorm - 0.5) * strokesNormalizationScale;
}
float calculateLinePressureSketch() {
return rgba2float(texture2D(strokesTexture, vStrokeUV + vec2(0.0, 0.5)));
}`)),$.mode){case W.Jb.SOLID:re.code.add(B.H`void calculateStyleOutputs(UnpackedAttributes unpackedAttributes) {}`),ue.code.add(B.H`float calculateLineOffset() {
return 0.0;
}
float calculateLinePressure() {
return 1.0;
}`);break;case W.Jb.SKETCH:re.code.add(B.H`void calculateStyleOutputs(UnpackedAttributes unpackedAttributes)
{
calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);
}`),ue.code.add(B.H`float calculateLineOffset() {
return calculateLineOffsetSketch();
}
float calculateLinePressure() {
return calculateLinePressureSketch();
}`);break;case W.Jb.MIXED:G.varyings.add("vType","float"),re.code.add(B.H`void calculateStyleOutputs(UnpackedAttributes unpackedAttributes)
{
vType = unpackedAttributes.type;
if (unpackedAttributes.type <= 0.0) {
calculateStyleOutputsSketch(vLineLengthPixels, unpackedAttributes);
}
}`),ue.code.add(B.H`float calculateLineOffset() {
if (vType <= 0.0) {
return calculateLineOffsetSketch();
}
else {
return 0.0;
}
}
float calculateLinePressure() {
if (vType <= 0.0) {
return calculateLinePressureSketch();
}
else {
return 1.0;
}
}`)}}},69276:(qe,xe,T)=>{"use strict";T.d(xe,{H:()=>U});var D=T(94573),x=T(17625),w=T(16396),B=T(73105);function U(W,Y){const H=W.vertex;switch(W.attributes.add(w.T.SIDENESS,"vec2"),H.code.add(Y.mode===B.Jb.MIXED?x.H`struct UnpackedAttributes {
vec2 sideness;
vec2 sidenessNorm;
float lineWidthPixels;
float extensionLengthPixels;
float type;
};`:x.H`struct UnpackedAttributes {
vec2 sideness;
vec2 sidenessNorm;
float lineWidthPixels;
float extensionLengthPixels;
};`),Y.mode){case B.Jb.MIXED:H.code.add(x.H`UnpackedAttributes unpackAttributes(ComponentData component) {
vec2 sidenessNorm = sideness;
vec2 sideness = sidenessNorm * 2.0 - 1.0;
float fType = component.type;
float extensionLengthPixels = component.extensionLength;
float lineWidth = component.lineWidth;
if (fType <= 0.0) {
extensionLengthPixels *= variantExtension * 2.0 - 1.0;
}
return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels, fType);
}`);break;case B.Jb.SKETCH:H.code.add(x.H`UnpackedAttributes unpackAttributes(ComponentData component) {
vec2 sidenessNorm = sideness;
vec2 sideness = sidenessNorm * 2.0 - 1.0;
float extensionLengthPixels = component.extensionLength;
extensionLengthPixels *= variantExtension * 2.0 - 1.0;
float lineWidth = component.lineWidth;
return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels);
}`);break;case B.Jb.SOLID:H.code.add(x.H`UnpackedAttributes unpackAttributes(ComponentData component) {
vec2 sidenessNorm = sideness;
vec2 sideness = sidenessNorm * 2.0 - 1.0;
float extensionLengthPixels = component.extensionLength;
float lineWidth = component.lineWidth;
return UnpackedAttributes(sideness, sidenessNorm, lineWidth, extensionLengthPixels);
}`);break;case B.Jb.COUNT:break;default:(0,D.Bg)(Y.mode)}}},79599:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>jh,t:()=>Cn});var D=T(17626),x=T(40764),w=T(32917),B=T(50618),U=T(77712),G=(T(85931),T(8314),T(90912),T(76898)),$=T(14517),re=T(46160),ue=T(17760),oe=(T(50645),T(62996));let ie=class extends $.Z{constructor(){super(...arguments),this.items=new re.Z,this._watchUpdatingTracking=new ue.t,this._callbacks=new Map,this._projector=(0,oe.E)(),this._hiddenProjector=(0,oe.E)()}get needsRender(){return this.items.length>0}initialize(){const Fe=document.createElement("div");Fe.className="esri-overlay-surface",this._set("surface",Fe),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),Fe.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,Qe=>{for(const _t of Qe.added){const At=()=>_t.render();this._callbacks.set(_t,At),this._projector.append(this.surface,At)}for(const _t of Qe.removed){const At=this._projector.detach(this._callbacks.get(_t));this.surface.removeChild(At.domNode),this._callbacks.delete(_t)}})}addItem(Fe){this.items.add(Fe)}removeItem(Fe){this.items.remove(Fe)}destroy(){this.items.removeAll(),this._callbacks.forEach(Fe=>this._projector.detach(Fe)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(Fe){const Qe=this._hiddenSurface,_t=this._hiddenProjector;let At=null;const Ht=()=>(At=Fe.render(),At);_t.append(Qe,Ht),_t.renderNow();const nr={left:0,top:0,right:0,bottom:0};if(At&&At.domNode){const Mr=At.domNode.getBoundingClientRect();nr.left=Mr.left,nr.top=Mr.top,nr.right=Mr.right,nr.bottom=Mr.bottom}for(_t.detach(Ht);Qe.firstChild;)Qe.removeChild(Qe.firstChild);return nr}overlaps(Fe,Qe){const _t=this.computeBoundingRect(Fe),At=this.computeBoundingRect(Qe);return Math.max(_t.left,At.left)<=Math.min(_t.right,At.right)&&Math.max(_t.top,At.top)<=Math.min(_t.bottom,At.bottom)}get hasVisibleItems(){return this.items.some(Fe=>Fe.visible)}renderCanvas(Fe){if(!this.items.some(_t=>_t.visible))return;const Qe=Fe.getContext("2d");Qe.save(),Qe.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(_t=>{Qe.save(),_t.renderCanvas(Qe),Qe.restore()}),Qe.restore()}};(0,D._)([(0,U.Cb)({readOnly:!0})],ie.prototype,"surface",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],ie.prototype,"items",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],ie.prototype,"needsRender",null),(0,D._)([(0,U.Cb)({readOnly:!0})],ie.prototype,"_watchUpdatingTracking",void 0),(0,D._)([(0,U.Cb)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],ie.prototype,"updating",void 0),ie=(0,D._)([(0,G.j)("esri.views.overlay.ViewOverlay")],ie);const X=ie;var Z=T(15861),J=(T(52515),T(17770)),se=T(72392),ee=T(63290),le=T(62208);function ne(Fe,Qe,_t,At){let Ht=null,nr=1e3;"number"==typeof Qe?(nr=Qe,At=_t):(Ht=Qe??null,nr=_t);let Mr,Ur=0;const rs=()=>{Ur=0,Fe.apply(At,Mr)},Os=(...ri)=>{Ht&&Ht.apply(At,ri),Mr=ri,nr?Ur||(Ur=setTimeout(rs,nr)):rs()};return Os.remove=()=>{Ur&&(clearTimeout(Ur),Ur=0)},Os.forceUpdate=()=>{Ur&&(clearTimeout(Ur),rs())},Os.hasPendingUpdates=()=>!!Ur,Os}var ce=T(83960),de=T(66656),me=T(10391),_e=T(26584),he=T(90466),ye=T(88879),fe=T(87183),De=T(67736),ve=T(77275),Ce=T(88411),ge=T(15348),Te=T(36630),Le=T(66845),je=T(46679);const Ee=ee.Z.getLogger("esri.widgets.Feature.support.featureUtils"),Ae=/href=(""|'')/gi,we=/(\{([^\{\r\n]+)\})/g,Be=/\'/g,Pe=/^\s*expression\//i,Oe=/(\n)/gi,Ke=/[\u00A0-\u9999<>\&]/gim,Ve=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Ne=/^(?:mailto:|tel:)/,Ie="relationships/",We=(0,Ce.Ze)("short-date-short-time");function Se(Fe){if(!(0,le.Wi)(Fe))return Fe.get("sourceLayer")||Fe.get("layer")}function He(Fe,Qe){return $e.apply(this,arguments)}function $e(){return($e=(0,Z.Z)(function*(Fe,Qe){return"function"==typeof Fe?Fe.call(null,Qe):Fe})).apply(this,arguments)}function et(Fe=""){if(Fe)return!Ne.test(Fe.trim().toLowerCase())}function nt(Fe){return!!Fe&&Pe.test(Fe)}function Xe(Fe,Qe){const _t=function it(Fe,Qe){if(!nt(Qe)||!Fe)return null;const _t=Qe.replace(Pe,"").toLowerCase();let At;return Fe.some(Ht=>Ht.name.toLowerCase()===_t&&(At=Ht,!0)),At}(Qe,Fe?.fieldName);return _t?_t.title||null:Fe?Fe.label||Fe.fieldName:null}function lt(Fe,Qe){const _t=Mt(Qe,Fe);return _t?_t.name:Fe}function Mt(Fe,Qe){return Fe&&"function"==typeof Fe.getField?Fe.getField(Qe):null}function Ft(Fe){return`${Fe}`.trim()}function kt({attributes:Fe,globalAttributes:Qe,layer:_t,text:At,expressionAttributes:Ht,fieldInfoMap:nr}){return At?wt({formattedAttributes:Qe,template:kr(At,{...Qe,...Ht,...Fe},_t),fieldInfoMap:nr}):""}function wt({formattedAttributes:Fe,template:Qe,fieldInfoMap:_t}){return Ft(function Ze(Fe){return Fe.replace(Ae,"")}((0,ve.gx)((0,ve.gx)(Qe,At=>function rt(Fe,Qe){const _t=Qe.get(Fe.toLowerCase());return`{${_t&&_t.fieldName||Fe}}`}(At,_t)),Fe)))}function Pr(Fe,Qe){return Fe.replace(we,(_t,At,Ht)=>{const nr=Mt(Qe,Ht);return nr?`{${nr.name}}`:At})}function kr(Fe,Qe,_t){const At=Pr(Fe,_t);return At&&At.replace(Ve,(Ht,nr,Mr)=>function ar(Fe,Qe,_t){const At=(Qe=Ft(Qe))&&"{"!==Qe[0];return(0,ve.gx)(Fe,function Zt(Fe,Qe=!1){const _t={...Fe};return Object.keys(_t).forEach(At=>function zt(Fe,Qe,_t=!1){const At=Qe[Fe];if("string"==typeof At){const Ht="%27",nr=(_t?encodeURIComponent(At):At).replace(Be,Ht);Qe[Fe]=nr}}(At,_t,Qe)),_t}(_t,At))}(Ht,nr||Mr,Qe))}function Hr(Fe){return!!Fe?.layer}function $t(Fe,Qe){if(!Fe||!Fe.length||!Qe)return;const _t=Qe.toLowerCase();let At;return Fe.some(Ht=>!(!Ht.fieldName||Ht.fieldName.toLowerCase()!==_t||(At=Ht,0))),At}function vr(Fe){const Qe=[];if(!Fe)return Qe;const{fieldInfos:_t,content:At}=Fe;return _t&&Qe.push(..._t),At&&Array.isArray(At)&&At.forEach(Ht=>{if("fields"===Ht.type){const nr=Ht&&Ht.fieldInfos;nr&&Qe.push(...nr)}}),Qe}function Kr(Fe){return Fe.replace(Ke,Qe=>`&#${Qe.charCodeAt(0)};`)}function Gr(Fe){return"string"==typeof Fe?Fe.replace(Oe,'<br class="esri-text-new-line" />'):Fe}function Jr(Fe){const{value:Qe,fieldName:_t,fieldInfos:At,fieldInfoMap:Ht,layer:nr,graphic:Mr}=Fe;if(null==Qe)return"";const Ur=function _r({fieldName:Fe,value:Qe,graphic:_t,layer:At}){if(bt(Fe)||!At||"function"!=typeof At.getFieldDomain)return null;const Ht=At.getFieldDomain(Fe,{feature:_t});return Ht&&"coded-value"===Ht.type?Ht.getName(Qe):null}({fieldName:_t,value:Qe,graphic:Mr,layer:nr});if(Ur)return Ur;const rs=function Xt({fieldName:Fe,graphic:Qe,layer:_t}){if(bt(Fe)||!_t||"function"!=typeof _t.getFeatureType)return null;const{typeIdField:At}=_t;if(!At||Fe!==At)return null;const Ht=_t.getFeatureType(Qe);return Ht?Ht.name:null}({fieldName:_t,graphic:Mr,layer:nr});if(rs)return rs;if(Ht.get(_t.toLowerCase()))return function Ut(Fe,Qe){const At=Qe.fieldName,Ht=$t(Qe.fieldInfos,At)?.clone(),nr=Qe.preventPlacesFormatting,Mr=Qe.layer,Ur=Mt(Mr,At);if(Ht&&"date"===Ur?.type){const Os=Ht.format||new Le.Z;Os.dateFormat=Os.dateFormat||"short-date-short-time",Os.dateTimeFormatOptions=!Hr(Mr)&&function os(Fe){return"feature"===Fe?.type}(Mr)&&Mr.datesInUnknownTimezone||Hr(Mr)&&function pt(Fe){return"map-image"===Fe?.type}(Mr.layer)&&Mr.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,Ht.format=Os}const rs=Ht&&Ht.format;return"string"==typeof Fe&&(0,Te.Ec)(At)&&rs?rs.formatRasterPixelValue(Fe):"string"==typeof(Fe=function ss(Fe,Qe){if("string"==typeof Fe&&Qe&&null==Qe.dateFormat&&(null!=Qe.places||null!=Qe.digitSeparator)){const _t=Number(Fe);if(!isNaN(_t))return _t}return Fe}(Fe,rs))||null==Fe||null==rs?Gr(Fe):nr?(0,ge.uf)(Fe,{...(0,ge.sh)(rs),minimumFractionDigits:0,maximumFractionDigits:20}):rs.format(Fe)}(Qe,{fieldInfos:At||Array.from(Ht.values()),fieldName:_t,layer:nr});const Os=nr&&nr.fieldsIndex;return Os&&Os.isDateField(_t)?(0,Ce.p6)(Qe,We):Gr(Qe)}function ns({fieldInfos:Fe,attributes:Qe,layer:_t,graphic:At,fieldInfoMap:Ht,relatedInfos:nr}){const Mr={};return nr?.forEach(Ur=>function yr({attributes:Fe,relatedInfo:Qe,fieldInfoMap:_t,fieldInfos:At,layer:Ht}){Fe&&Qe&&(Qe.relatedFeatures&&Qe.relatedFeatures&&Qe.relatedFeatures.forEach(nr=>qt({attributes:Fe,graphic:nr,relatedInfo:Qe,fieldInfoMap:_t,fieldInfos:At,layer:Ht})),Qe.relatedStatsFeatures&&Qe.relatedStatsFeatures&&Qe.relatedStatsFeatures.forEach(nr=>qt({attributes:Fe,graphic:nr,relatedInfo:Qe,fieldInfoMap:_t,fieldInfos:At,layer:Ht})))}({attributes:Mr,relatedInfo:Ur,fieldInfoMap:Ht,fieldInfos:Fe,layer:_t})),Object.keys(Qe).forEach(Ur=>{Mr[Ur]=Jr({fieldName:Ur,fieldInfos:Fe,fieldInfoMap:Ht,layer:_t,value:Qe[Ur],graphic:At})}),Mr}function lr(Fe,Qe){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,Z.Z)(function*(Fe,Qe){const{layer:_t,graphic:At,outFields:Ht,objectIds:nr,returnGeometry:Mr,spatialReference:Ur}=Fe,rs=nr[0];if("number"!=typeof rs&&"string"!=typeof rs)return Ee.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:_t,graphic:At,objectId:rs,requiredFields:Ht}),null;if(!_t.capabilities?.operations?.supportsQuery)return Ee.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:_t,graphic:At,requiredFields:Ht,returnGeometry:Mr}),null;const Os=_t.createQuery();return Os.objectIds=nr,Os.outFields=Ht?.length?Ht:[_t.objectIdField],Os.returnGeometry=!!Mr,Os.returnZ=!!Mr,Os.returnM=!!Mr,Os.outSpatialReference=Ur,(yield _t.queryFeatures(Os,Qe)).features[0]})).apply(this,arguments)}function zr(Fe){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Z.Z)(function*(Fe){if(!Fe.expressionInfos?.length)return!1;const Qe=yield(0,je.LC)(),{arcadeUtils:{hasGeometryFunctions:_t}}=Qe;return _t(Fe)})).apply(this,arguments)}function Rr(){return(Rr=(0,Z.Z)(function*({graphic:Fe,popupTemplate:Qe,layer:_t,spatialReference:At},Ht){if(!_t||!Qe||("function"==typeof _t.load&&(yield _t.load(Ht)),!Fe.attributes))return;const nr=Fe.attributes[_t.objectIdField];if(null==nr)return;const Mr=[nr],Ur=yield Qe.getRequiredFields(_t.fieldsIndex),rs=(0,Te.R9)(Ur,Fe),Os=rs?[]:Ur,ri=Qe.returnGeometry||(yield zr(Qe));if(rs&&!ri)return;const vi=yield lr({layer:_t,graphic:Fe,outFields:Os,objectIds:Mr,returnGeometry:ri,spatialReference:At},Ht);vi&&(vi.geometry&&(Fe.geometry=vi.geometry),vi.attributes&&(Fe.attributes={...Fe.attributes,...vi.attributes}))})).apply(this,arguments)}function bt(Fe=""){return!!Fe&&Fe.includes(Ie)}function qt({attributes:Fe,graphic:Qe,relatedInfo:_t,fieldInfos:At,fieldInfoMap:Ht,layer:nr}){Fe&&Qe&&_t&&Object.keys(Qe.attributes).forEach(Mr=>{const Ur=function Qt(Fe){return Fe?`${Ie}${Fe.layerId}/${Fe.fieldName}`:""}({layerId:_t.relation.id.toString(),fieldName:Mr});Fe[Ur]=Jr({fieldName:Ur,fieldInfos:At,fieldInfoMap:Ht,layer:nr,value:Qe.attributes[Mr],graphic:Qe})})}const jr=Fe=>{if(!Fe)return!1;const Qe=Fe.toUpperCase();return Qe.includes("CURRENT_TIMESTAMP")||Qe.includes("CURRENT_DATE")||Qe.includes("CURRENT_TIME")},es=({layer:Fe,method:Qe,query:_t,definitionExpression:At})=>{if(!Fe.capabilities?.query?.supportsCacheHint||"attachments"===Qe)return;const Ht=(0,le.pC)(_t.where)&&_t.where,nr=(0,le.pC)(_t.geometry)&&_t.geometry;jr(At)||jr(Ht)||"extent"===nr?.type||"tile"===_t.resultType||(_t.cacheHint=!0)},Yr={editing:!1,operations:{add:!0,update:!0,delete:!0}},Rs=re.Z.ofType(fe.Z);let Cr=class extends $.Z{constructor(Fe){super(Fe),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...Yr},this.activeAttachmentInfo=null,this.attachmentInfos=new Rs,this.graphic=null,this.mode="view",this.own((0,w.YP)(()=>this.graphic,()=>this._graphicChanged(),w.nn))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(Fe){return{...Yr,...Fe}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}getAttachments(){var Fe=this;return(0,Z.Z)(function*(){const{_attachmentLayer:Qe,attachmentInfos:_t}=Fe;if(!Qe||"function"!=typeof Qe.queryAttachments)throw new _e.Z("invalid-layer","getAttachments(): A valid layer is required.");const At=Fe._getFeatureId(),Ht=new De.Z({objectIds:[At],returnMetadata:!0}),nr=[],Mr=Qe.queryAttachments(Ht).then(rs=>rs[At]||nr).catch(()=>nr);Fe._getAttachmentsPromise=Mr,Fe.notifyChange("state");const Ur=yield Mr;return _t.removeAll(),Ur.length&&_t.addMany(Ur),Fe._getAttachmentsPromise=null,Fe.notifyChange("state"),Ur})()}addAttachment(Fe){var Qe=this;return(0,Z.Z)(function*(){const{_attachmentLayer:_t,attachmentInfos:At,graphic:Ht,abilities:nr}=Qe;if(!Fe)throw new _e.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:Fe});if(!nr.operations.add)throw new _e.Z("invalid-abilities","addAttachment(): add abilities are required.");if(!_t||"function"!=typeof _t.addAttachment)throw new _e.Z("invalid-layer","addAttachment(): A valid layer is required.");const Mr=_t.addAttachment(Ht,Fe).then(rs=>Qe._queryAttachment(rs.objectId)),Ur=yield Mr;return At.add(Ur),Ur})()}deleteAttachment(Fe){var Qe=this;return(0,Z.Z)(function*(){const{_attachmentLayer:_t,attachmentInfos:At,graphic:Ht,abilities:nr}=Qe;if(!Fe)throw new _e.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:Fe});if(!nr.operations.delete)throw new _e.Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!_t||"function"!=typeof _t.deleteAttachments)throw new _e.Z("invalid-layer","deleteAttachment(): A valid layer is required.");const Mr=_t.deleteAttachments(Ht,[Fe.id]).then(()=>Fe),Ur=yield Mr;return At.remove(Ur),Ur})()}updateAttachment(Fe,Qe=this.activeAttachmentInfo){var _t=this;return(0,Z.Z)(function*(){const{_attachmentLayer:At,attachmentInfos:Ht,graphic:nr,abilities:Mr}=_t;if(!Fe)throw new _e.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:Fe});if(!Qe)throw new _e.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:Qe});if(!Mr.operations.update)throw new _e.Z("invalid-abilities","updateAttachment(): Update abilities are required.");const Ur=Ht.findIndex(ri=>ri===Qe);if(!At||"function"!=typeof At.updateAttachment)throw new _e.Z("invalid-layer","updateAttachment(): A valid layer is required.");const rs=At.updateAttachment(nr,Qe.id,Fe).then(ri=>_t._queryAttachment(ri.objectId)),Os=yield rs;return Ht.splice(Ur,1,Os),Os})()}_queryAttachment(Fe){var Qe=this;return(0,Z.Z)(function*(){if(!Fe)throw new _e.Z("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:_t}=Qe,At=Qe._getFeatureId(),Ht=new De.Z({objectIds:[At],attachmentsWhere:`AttachmentId=${Fe}`,returnMetadata:!0});return _t.queryAttachments(Ht).then(nr=>nr[At][0])})()}_getFeatureId(){const{_attachmentLayer:Fe,graphic:Qe}=this;if(!Fe||!Qe)return null;const{objectIdField:_t}=Fe,{attributes:At}=Qe;return At&&At[_t]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:Fe}=this,Qe=Se(Fe);this._attachmentLayer=Qe?"scene"===Qe.type&&(0,le.pC)(Qe.associatedLayer)?Qe.associatedLayer:Qe:null}};(0,D._)([(0,U.Cb)()],Cr.prototype,"abilities",void 0),(0,D._)([(0,de.p)("abilities")],Cr.prototype,"castAbilities",null),(0,D._)([(0,U.Cb)()],Cr.prototype,"activeAttachmentInfo",void 0),(0,D._)([(0,U.Cb)({readOnly:!0,type:Rs})],Cr.prototype,"attachmentInfos",void 0),(0,D._)([(0,U.Cb)({type:ye.Z})],Cr.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)()],Cr.prototype,"mode",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Cr.prototype,"state",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Cr.prototype,"supportsResizeAttachments",null),Cr=(0,D._)([(0,G.j)("esri.widgets.Attachments.AttachmentsViewModel")],Cr);const as=Cr;var ps=T(54346),Ys=T(38570),di=T(25552),Nr=T(94450);const Ai={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Tn=window.CSS;let Ci=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new as,this.visibleElements={...Ai},this._supportsImageOrientation=Tn&&Tn.supports&&Tn.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([(0,w.on)(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),(0,w.YP)(()=>this.viewModel?.mode,()=>this._modeChanged(),w.nn)])}get effectiveDisplayType(){const{displayType:Fe}=this;return Fe&&"auto"!==Fe?Fe:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(Fe){return{...Ai,...Fe}}addAttachment(){const{_addAttachmentForm:Fe,viewModel:Qe}=this;return this._set("submitting",!0),this._set("error",null),Qe.addAttachment(Fe).then(_t=>(this._set("submitting",!1),this._set("error",null),Qe.mode="view",_t)).catch(_t=>{throw this._set("submitting",!1),this._set("error",new _e.Z("attachments:add-attachment",this.messages.addErrorMessage,_t)),_t})}deleteAttachment(Fe){const{viewModel:Qe}=this;return this._set("submitting",!0),this._set("error",null),Qe.deleteAttachment(Fe).then(_t=>(this._set("submitting",!1),this._set("error",null),Qe.mode="view",_t)).catch(_t=>{throw this._set("submitting",!1),this._set("error",new _e.Z("attachments:delete-attachment",this.messages.deleteErrorMessage,_t)),_t})}updateAttachment(){const{viewModel:Fe}=this,{_updateAttachmentForm:Qe}=this;return this._set("submitting",!0),this._set("error",null),Fe.updateAttachment(Qe).then(_t=>(this._set("submitting",!1),this._set("error",null),Fe.mode="view",_t)).catch(_t=>{throw this._set("submitting",!1),this._set("error",new _e.Z("attachments:update-attachment",this.messages.updateErrorMessage,_t)),_t})}render(){const{submitting:Fe,viewModel:Qe}=this,{state:_t}=Qe;return(0,Nr.u)("div",{class:this.classes("esri-attachments","esri-widget")},Fe?this.renderProgressBar():null,"loading"===_t?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:Fe,visibleElements:Qe}=this;return Fe&&Qe.errorMessage?(0,Nr.u)("div",{key:"error-message",class:"esri-attachments__error-message"},Fe.message):null}renderAttachments(){const{mode:Fe,activeAttachmentInfo:Qe}=this.viewModel;return"add"===Fe?this.renderAddForm():"edit"===Fe?this.renderDetailsForm(Qe):this.renderAttachmentContainer()}renderLoading(){return(0,Nr.u)("div",{class:"esri-attachments__loader-container",key:"loader"},(0,Nr.u)("div",{class:"esri-attachments__loader"}))}renderProgressBar(){return this.visibleElements.progressBar?(0,Nr.u)("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}renderAddForm(){const{submitting:Fe,selectedFile:Qe}=this,_t=Fe||!Qe,At=this.visibleElements.cancelAddButton?(0,Nr.u)("button",{type:"button",bind:this,disabled:Fe,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",Fe&&"esri-button--disabled")},this.messages.cancel):null,Ht=this.visibleElements.addSubmitButton?(0,Nr.u)("button",{type:"submit",disabled:_t,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{"esri-button--disabled":_t})},this.messages.add):null,nr=Qe?(0,Nr.u)("span",{key:"file-name",class:"esri-attachments__file-name"},Qe.name):null,Mr=(0,Nr.u)("form",{bind:this,afterCreate:Ys.Yo,afterRemoved:Ys.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,Nr.u)("fieldset",{class:"esri-attachments__file-fieldset"},nr,(0,Nr.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},Qe?this.messages.changeFile:this.messages.selectFile,(0,Nr.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),Ht,At);return(0,Nr.u)("div",{key:"add-form-container",class:"esri-attachments__form-node"},Mr)}renderDetailsForm(Fe){const{visibleElements:Qe,viewModel:_t,selectedFile:At,submitting:Ht}=this,{contentType:nr,size:Mr,url:Ur}=Fe,{abilities:rs}=_t,Os=Ht||!At,ri=rs.editing&&rs.operations.delete&&Qe.deleteButton?(0,Nr.u)("button",{key:"delete-button",type:"button",disabled:Ht,bind:this,onclick:mc=>this._submitDeleteAttachment(mc,Fe),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{"esri-button--disabled":Ht})},this.messages.delete):null,vi=rs.editing&&rs.operations.update&&Qe.updateButton?(0,Nr.u)("button",{disabled:Os,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{"esri-button--disabled":Os})},this.messages.update):null,_n=this.visibleElements.cancelUpdateButton?(0,Nr.u)("button",{disabled:Ht,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{"esri-button--disabled":Ht})},this.messages.cancel):null,cn=At?(0,Nr.u)("span",{key:"file-name",class:"esri-attachments__file-name"},At.name):null,Fo=rs.editing&&rs.operations.update?(0,Nr.u)("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},cn,(0,Nr.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,(0,Nr.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,Pn=(0,Nr.u)("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},(0,Nr.u)("label",null,(0,he.sS)(this.messagesUnits,Mr))),Vo=(0,Nr.u)("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},(0,Nr.u)("label",null,nr)),nl=(0,Nr.u)("form",{bind:this,afterCreate:Ys.Yo,afterRemoved:Ys.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},(0,Nr.u)("div",{class:"esri-attachments__metadata"},Pn,Vo),Fo,(0,Nr.u)("div",{class:"esri-attachments__actions"},ri,_n,vi));return(0,Nr.u)("div",{key:"edit-form-container",class:"esri-attachments__form-node"},(0,Nr.u)("a",{class:"esri-attachments__item-link",href:Ur,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:Fe,size:400}),(0,Nr.u)("div",{class:"esri-attachments__item-link-overlay"},(0,Nr.u)("span",{class:"esri-attachments__item-link-overlay-icon"},(0,Nr.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,Nr.u)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),(0,Nr.u)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),nl)}renderImageMask({attachmentInfo:Fe,size:Qe}){const{supportsResizeAttachments:_t}=this.viewModel,{contentType:At,name:Ht,url:nr}=Fe,Mr=_t&&function zs(Fe){const Qe=Fe.toLowerCase();return"image/bmp"===Qe||"image/emf"===Qe||"image/exif"===Qe||"image/gif"===Qe||"image/x-icon"===Qe||"image/jpeg"===Qe||"image/png"===Qe||"image/tiff"===Qe||"image/x-wmf"===Qe}(At),Ur=this._getCSSTransform(Fe,Mr),rs=Ur?{transform:Ur,"image-orientation":"none"}:{},Os=nr.includes("?")?"&":"?",ri=Mr?`${nr}${Os}w=${Qe}`:function As(Fe){const Qe=(0,ps.V)("esri/themes/base/images/files/");return Fe?"text/plain"===Fe?`${Qe}text-32.svg`:"application/pdf"===Fe?`${Qe}pdf-32.svg`:"text/csv"===Fe?`${Qe}csv-32.svg`:"application/gpx+xml"===Fe?`${Qe}gpx-32.svg`:"application/x-dwf"===Fe?`${Qe}cad-32.svg`:"application/postscript"===Fe||"application/json"===Fe||"text/xml"===Fe||"model/vrml"===Fe?`${Qe}code-32.svg`:"application/x-zip-compressed"===Fe||"application/x-7z-compressed"===Fe||"application/x-gzip"===Fe||"application/x-tar"===Fe||"application/x-gtar"===Fe||"application/x-bzip2"===Fe||"application/gzip"===Fe||"application/x-compress"===Fe||"application/x-apple-diskimage"===Fe||"application/x-rar-compressed"===Fe||"application/zip"===Fe?`${Qe}zip-32.svg`:Fe.includes("image/")?`${Qe}image-32.svg`:Fe.includes("audio/")?`${Qe}sound-32.svg`:Fe.includes("video/")?`${Qe}video-32.svg`:Fe.includes("msexcel")||Fe.includes("ms-excel")||Fe.includes("spreadsheetml")?`${Qe}excel-32.svg`:Fe.includes("msword")||Fe.includes("ms-word")||Fe.includes("wordprocessingml")?`${Qe}word-32.svg`:Fe.includes("powerpoint")||Fe.includes("presentationml")?`${Qe}report-32.svg`:`${Qe}generic-32.svg`:`${Qe}generic-32.svg`}(At),_n={"esri-attachments__image--resizable":_t};return(0,Nr.u)("div",{class:this.classes({"esri-attachments__item-mask--icon":!Mr},"esri-attachments__item-mask")},(0,Nr.u)("img",{styles:rs,alt:Ht,src:ri,class:this.classes(_n,"esri-attachments__image")}))}renderAttachmentInfo({attachmentInfo:Fe,displayType:Qe}){const{viewModel:_t}=this,{abilities:At}=_t,{name:Ht,url:nr}=Fe,Mr=this.renderImageMask({attachmentInfo:Fe,size:"list"===Qe?48:400}),Ur=At.editing?(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",(0,Ys.dZ)(this.container)?"esri-icon-left":"esri-icon-right")}):null,rs=[Mr,(0,Nr.u)("label",{class:"esri-attachments__label"},(0,Nr.u)("span",{class:"esri-attachments__filename"},Ht||this.messages.noTitle),Ur)],Os=At.editing?(0,Nr.u)("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":Fe.id,onclick:()=>this._startEditAttachment(Fe),type:"button"},rs):(0,Nr.u)("a",{key:"details-link",class:"esri-attachments__item-button",href:nr,target:"_blank"},rs);return(0,Nr.u)("li",{class:"esri-attachments__item",key:Fe},Os)}renderAttachmentContainer(){const{effectiveDisplayType:Fe,viewModel:Qe,visibleElements:_t}=this,{attachmentInfos:At,abilities:Ht}=Qe,nr=At&&At.length,Mr={"esri-attachments__container--list":"preview"!==Fe,"esri-attachments__container--preview":"preview"===Fe},Ur=Ht.editing&&Ht.operations.add&&_t.addButton?(0,Nr.u)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null,rs=nr?(0,Nr.u)("ul",{class:"esri-attachments__items"},At.toArray().map(Os=>this.renderAttachmentInfo({attachmentInfo:Os,displayType:Fe}))):(0,Nr.u)("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return(0,Nr.u)("div",{key:"attachments-container",class:this.classes("esri-attachments__container",Mr)},rs,Ur)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(Fe){const Qe=Fe.target,_t=Qe&&Qe.files&&Qe.files.item(0);this._set("selectedFile",_t)}_submitDeleteAttachment(Fe,Qe){Fe.preventDefault(),this.deleteAttachment(Qe)}_submitAddAttachment(Fe){Fe.preventDefault(),this.addAttachment()}_submitUpdateAttachment(Fe){Fe.preventDefault(),this.updateAttachment()}_startEditAttachment(Fe){const{viewModel:Qe}=this;Qe.activeAttachmentInfo=Fe,Qe.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(Fe){Fe.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(Fe,Qe){const{orientationInfo:_t}=Fe;return!this._supportsImageOrientation&&Qe&&_t?[_t.rotation?`rotate(${_t.rotation}deg)`:"",_t.mirrored?"scaleX(-1)":""].join(" "):""}};(0,D._)([(0,ce.B)("viewModel.abilities")],Ci.prototype,"abilities",void 0),(0,D._)([(0,U.Cb)()],Ci.prototype,"displayType",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Ci.prototype,"effectiveDisplayType",null),(0,D._)([(0,ce.B)("viewModel.graphic")],Ci.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ci.prototype,"label",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/Attachments/t9n/Attachments")],Ci.prototype,"messages",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/core/t9n/Units")],Ci.prototype,"messagesUnits",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Ci.prototype,"selectedFile",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Ci.prototype,"submitting",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Ci.prototype,"error",void 0),(0,D._)([(0,U.Cb)({type:as})],Ci.prototype,"viewModel",void 0),(0,D._)([(0,U.Cb)()],Ci.prototype,"visibleElements",void 0),(0,D._)([(0,de.p)("visibleElements")],Ci.prototype,"castVisibleElements",null),Ci=(0,D._)([(0,G.j)("esri.widgets.Attachments")],Ci);const gt=Ci;let Wr=class extends as{constructor(Fe){super(Fe),this.description=null,this.title=null}};(0,D._)([(0,U.Cb)()],Wr.prototype,"description",void 0),(0,D._)([(0,U.Cb)()],Wr.prototype,"title",void 0),Wr=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Wr);const xr=Wr;var bs=T(13065);let _i=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,Nr.u)("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:Fe}=this;return Fe?(0,Nr.u)(bs.X6,{level:this.headingLevel,class:"esri-feature-element-info__title"},Fe):null}renderDescription(){const{description:Fe}=this;return Fe?(0,Nr.u)("div",{key:"description",class:"esri-feature-element-info__description"},Fe):null}};(0,D._)([(0,U.Cb)()],_i.prototype,"description",void 0),(0,D._)([(0,U.Cb)()],_i.prototype,"headingLevel",void 0),(0,D._)([(0,U.Cb)()],_i.prototype,"title",void 0),_i=(0,D._)([(0,G.j)("esri.widgets.Feature.support.FeatureElementInfo")],_i);const gi=_i;let Di=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this._featureElementInfo=null,this.attachmentsWidget=new gt,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new xr}initialize(){this._featureElementInfo=new gi,this.own([(0,w.YP)(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),w.nn),(0,w.YP)(()=>this.viewModel?.graphic,Fe=>this.attachmentsWidget.graphic=Fe,w.nn)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){const{attachmentsWidget:Fe}=this;return(0,Nr.u)("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),Fe?.render())}_setupFeatureElementInfo(){const{description:Fe,title:Qe,headingLevel:_t}=this;this._featureElementInfo.set({description:Fe,title:Qe,headingLevel:_t})}};(0,D._)([(0,U.Cb)({readOnly:!0})],Di.prototype,"attachmentsWidget",void 0),(0,D._)([(0,ce.B)("viewModel.description")],Di.prototype,"description",void 0),(0,D._)([(0,ce.B)("attachmentsWidget.displayType")],Di.prototype,"displayType",void 0),(0,D._)([(0,ce.B)("viewModel.graphic")],Di.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)()],Di.prototype,"headingLevel",void 0),(0,D._)([(0,ce.B)("viewModel.title")],Di.prototype,"title",void 0),(0,D._)([(0,U.Cb)({type:xr})],Di.prototype,"viewModel",void 0),Di=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureAttachments")],Di);const Oi=Di;var zi=T(80542);let Zr=class extends((0,zi.p)($.Z)){constructor(Fe){super(Fe),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add((0,w.YP)(()=>this.creator,Qe=>{this._destroyContent(),this._createContent(Qe)},w.nn))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:Fe,graphic:Qe,destroyer:_t}=this;Fe&&(He(_t,{graphic:Qe}).catch(()=>null),this._set("created",null))}_createContent(Fe){var Qe=this;return(0,Z.Z)(function*(){const{graphic:_t}=Qe,At=He(Fe,{graphic:_t}).catch(()=>null);Qe._loadingPromise=At,Qe.notifyChange("state");const Ht=yield At;At===Qe._loadingPromise&&(Qe._loadingPromise=null,Qe.notifyChange("state"),Qe._set("created",Ht))})()}};(0,D._)([(0,U.Cb)({readOnly:!0})],Zr.prototype,"created",void 0),(0,D._)([(0,U.Cb)()],Zr.prototype,"creator",void 0),(0,D._)([(0,U.Cb)()],Zr.prototype,"destroyer",void 0),(0,D._)([(0,U.Cb)({type:ye.Z})],Zr.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Zr.prototype,"state",null),Zr=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Zr);const ii=Zr;var yn=T(25469);let Dr=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=_t=>{Array.from(_t.querySelectorAll("a")).forEach(At=>{et(At.href)&&!At.hasAttribute("target")&&At.setAttribute("target","_blank")})}}renderLoading(){return(0,Nr.u)("div",{class:"esri-feature-content__loader-container",key:"loader"},(0,Nr.u)("div",{class:"esri-feature-content__loader"}))}renderCreated(){const Fe=this.viewModel?.created;return Fe?Fe instanceof HTMLElement?(0,Nr.u)("div",{key:Fe,bind:Fe,afterCreate:this._attachToNode}):(0,yn.Qd)(Fe)?(0,Nr.u)("div",{key:Fe},!Fe.destroyed&&Fe.render()):(0,Nr.u)("div",{key:Fe,innerHTML:Fe,afterCreate:this._addTargetToAnchors}):null}render(){const Fe=this.viewModel?.state;return(0,Nr.u)("div",{class:"esri-feature-content"},"loading"===Fe?this.renderLoading():this.renderCreated())}_attachToNode(Fe){Fe.appendChild(this)}};(0,D._)([(0,ce.B)("viewModel.creator")],Dr.prototype,"creator",void 0),(0,D._)([(0,ce.B)("viewModel.graphic")],Dr.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)({type:ii})],Dr.prototype,"viewModel",void 0),Dr=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureContent")],Dr);const er=Dr;var Ir=T(38439),Ps=T(25621);let Ws=class extends $.Z{constructor(Fe){super(Fe),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:Fe,fieldInfos:Qe}=this,_t=[];return Qe?.forEach(At=>{if(At.hasOwnProperty("visible")&&!At.visible)return;const Ht=At.clone();Ht.label=Xe(Ht,Fe),_t.push(Ht)}),_t}};(0,D._)([(0,U.Cb)()],Ws.prototype,"attributes",void 0),(0,D._)([(0,U.Cb)({type:[Ir.Z]})],Ws.prototype,"expressionInfos",void 0),(0,D._)([(0,U.Cb)()],Ws.prototype,"description",void 0),(0,D._)([(0,U.Cb)({type:[Ps.Z]})],Ws.prototype,"fieldInfos",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Ws.prototype,"formattedFieldInfos",null),(0,D._)([(0,U.Cb)()],Ws.prototype,"title",void 0),Ws=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Ws);const yi=Ws,Gs=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];let ki=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new yi,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new gi,this.own((0,w.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),w.nn))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(Fe,Qe){const{attributes:_t}=this.viewModel,At=Fe.fieldName,Ht=Fe.label||At,nr=_t?_t[At]??"":"",Mr=!(!Fe.format||!Fe.format.dateFormat),Ur="number"!=typeof nr||Mr?function Xi(Fe,Qe){if("string"!=typeof Qe||!Qe)return Qe;const _t=function Mi(Fe){let Qe=null;return Gs.some(_t=>(_t.pattern.test(Fe)&&(Qe=_t),!!Qe)),Qe}(Qe);if(!_t)return Qe;const At=Qe.match(_t.pattern),nr=(0,ve.gx)((0,ve.gx)(_t.label,{messages:Fe,hierPart:At&&At[2]}),{appName:_t.appName});return Qe.replace(_t.pattern,`<a${_t.target?` target="${_t.target}"`:""} href="$1"${"_blank"===_t.target?' rel="noreferrer"':""}>${nr}</a>`)}(this.messagesURIUtils,nr):this._forceLTR(nr),rs={"esri-feature-fields__field-data--date":Mr};return(0,Nr.u)("tr",{key:`fields-element-info-row-${At}-${Qe}`},(0,Nr.u)("th",{key:`fields-element-info-row-header-${At}-${Qe}`,class:"esri-feature-fields__field-header",innerHTML:Ht}),(0,Nr.u)("td",{key:`fields-element-info-row-data-${At}-${Qe}`,class:this.classes("esri-feature-fields__field-data",rs),innerHTML:Ur}))}renderFields(){const{formattedFieldInfos:Fe}=this.viewModel;return Fe?.length?(0,Nr.u)("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},(0,Nr.u)("tbody",null,Fe.map((Qe,_t)=>this.renderFieldInfo(Qe,_t)))):null}render(){return(0,Nr.u)("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:Fe,title:Qe}=this;this._featureElementInfo.set({description:Fe,title:Qe})}_forceLTR(Fe){return`&lrm;${Fe}`}};(0,D._)([(0,ce.B)("viewModel.attributes")],ki.prototype,"attributes",void 0),(0,D._)([(0,ce.B)("viewModel.description")],ki.prototype,"description",void 0),(0,D._)([(0,ce.B)("viewModel.expressionInfos")],ki.prototype,"expressionInfos",void 0),(0,D._)([(0,ce.B)("viewModel.fieldInfos")],ki.prototype,"fieldInfos",void 0),(0,D._)([(0,ce.B)("viewModel.title")],ki.prototype,"title",void 0),(0,D._)([(0,U.Cb)({type:yi})],ki.prototype,"viewModel",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/Feature/t9n/Feature")],ki.prototype,"messages",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/support/t9n/uriUtils")],ki.prototype,"messagesURIUtils",void 0),ki=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureFields")],ki);const sn=ki;var Uo=T(64831),Vn=T(77891),io=T(84792),An=T(10699),hn=(T(15283),T(2865)),Kn=(T(21726),T(16730),T(37053),T(82054),T(2004),T(21674),T(72854),T(49672)),Wi=(T(37118),T(55214),T(13924),T(24192),T(17253),T(84952)),ai=(T(24263),T(29132),T(67010)),Bt=(T(6871),T(60776));const rr=ee.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),Er=new Map;function ur(Fe){if(!bt(Fe))return null;const[Qe,_t]=Fe.split("/").slice(1);return{layerId:Qe,fieldName:_t}}function ls({originRelationship:Fe,relationships:Qe,layerId:_t}){let At;return Qe&&Qe.some(Ht=>(`${Ht.relatedTableId}`===_t&&Ht.id===Fe.id&&(At=Ht),!!At)),At}function Pt(Fe,Qe){const _t=Qe.toLowerCase();for(const At in Fe)if(At.toLowerCase()===_t)return Fe[At];return null}function qr(Fe,Qe,_t,At){const Ht=new ai.Z;return Ht.outFields=["*"],Ht.relationshipId="number"==typeof Qe.id?Qe.id:parseInt(Qe.id,10),Ht.objectIds=[Fe.attributes[_t.objectIdField]],_t.queryRelatedFeatures(Ht,At)}function fs(Fe,Qe,_t){let At=0;const Ht=[];for(;At<Qe.length;)Ht.push(`${Fe} IN (${Qe.slice(At,_t+At)})`),At+=_t;return Ht.join(" OR ")}function wi(){return(wi=(0,Z.Z)(function*(Fe,Qe,_t,At){const Ht=_t.layerId.toString(),{layerInfo:nr,relation:Mr,relatedFields:Ur,outStatistics:rs,url:Os,sourceSpatialReference:ri}=Qe,vi=ls({originRelationship:Mr,relationships:nr.relationships,layerId:Ht});if(vi.relationshipTableId&&vi.keyFieldInRelationshipTable){const cn=(yield qr(Fe,vi,_t,At))[Fe.attributes[_t.objectIdField]];if(!cn)return null;const Fo=cn.features.map(Pn=>Pn.attributes[nr.objectIdField]);if(rs?.length>0&&nr.supportsStatistics){const Pn=new Wi.Z;Pn.where=fs(nr.objectIdField,Fo,1e3),Pn.outFields=Ur,Pn.outStatistics=rs,Pn.sourceSpatialReference=ri;const Vo={features:Promise.resolve(cn),statsFeatures:(0,hn.e)(Os,Pn)};return(0,An.as)(Vo)}}const _n=vi?.keyField;if(_n){const cn=(0,Te.H7)(uo(nr.fields,_n)),Fo=Pt(Fe.attributes,Mr.keyField),Pn=cn?`${_n}=${Fo}`:`${_n}='${Fo}'`,Vo=(0,hn.e)(Os,new Wi.Z({where:Pn,outFields:Qe.relatedFields,sourceSpatialReference:ri}),At),nl=Qe.outStatistics&&Qe.outStatistics.length>0&&nr.supportsStatistics?(0,hn.e)(Os,new Wi.Z({where:Pn,outFields:Qe.relatedFields,outStatistics:Qe.outStatistics,sourceSpatialReference:ri}),At):null,mc={features:Vo};return nl&&(mc.statsFeatures=nl),(0,An.as)(mc)}return null})).apply(this,arguments)}function uo(Fe,Qe){if(null!=Fe){Qe=Qe.toLowerCase();for(const _t of Fe)if(_t&&_t.name.toLowerCase()===Qe)return _t}return null}const bo={chartAnimation:!0};let eo=class extends $.Z{constructor(Fe){super(Fe),this.abilities={...bo},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(Fe){return{...bo,...Fe}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(Fe){this._setContentElementMedia(Fe)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(Fe){const{formattedMediaInfoCount:Qe}=this;this.activeMediaInfoIndex=(Fe+Qe)%Qe}_pageContentElementMedia(Fe){const{activeMediaInfoIndex:Qe}=this;this._setContentElementMedia(Qe+Fe)}_formatMediaInfos(){const{attributes:Fe,mediaInfos:Qe,formattedAttributes:_t,expressionAttributes:At,fieldInfoMap:Ht,layer:nr}=this;return Qe?.map(Mr=>{const Ur=Mr?.clone();if(!Ur)return null;if(Ur.title=kt({attributes:Fe,fieldInfoMap:Ht,globalAttributes:_t,expressionAttributes:At,layer:nr,text:Ur.title}),Ur.caption=kt({attributes:Fe,fieldInfoMap:Ht,globalAttributes:_t,expressionAttributes:At,layer:nr,text:Ur.caption}),Ur.altText=kt({attributes:Fe,fieldInfoMap:Ht,globalAttributes:_t,expressionAttributes:At,layer:nr,text:Ur.altText}),"image"===Ur.type){const{value:rs}=Ur;return this._setImageValue({value:rs,formattedAttributes:_t,layer:nr}),Ur.value.sourceURL?Ur:void 0}if("pie-chart"===Ur.type||"line-chart"===Ur.type||"column-chart"===Ur.type||"bar-chart"===Ur.type){const{value:rs}=Ur;return this._setChartValue({value:rs,chartType:Ur.type,attributes:Fe,formattedAttributes:_t,layer:nr}),Ur}return null}).filter(Boolean)}_setImageValue(Fe){const{fieldInfoMap:Qe}=this,{value:_t,formattedAttributes:At,layer:Ht}=Fe,{linkURL:nr,sourceURL:Mr}=_t;if(Mr){const Ur=Pr(Mr,Ht);_t.sourceURL=wt({formattedAttributes:At,template:Ur,fieldInfoMap:Qe})}if(nr){const Ur=Pr(nr,Ht);_t.linkURL=wt({formattedAttributes:At,template:Ur,fieldInfoMap:Qe})}}_setChartValue(Fe){const{value:Qe,attributes:_t,formattedAttributes:At,chartType:Ht,layer:nr}=Fe,{popupTemplate:Mr,relatedInfos:Ur}=this,{fields:rs,normalizeField:Os}=Qe;if(Qe.fields=function st(Fe,Qe){return Fe&&Fe.map(_t=>lt(_t,Qe))}(rs,nr),Os&&(Qe.normalizeField=lt(Os,nr)),!rs.some(vi=>!!(null!=At[vi]||bt(vi)&&Ur.size)))return;const ri=Mr?.fieldInfos;rs.forEach(vi=>{if(bt(vi))return void(Qe.series=[...Qe.series,...this._getRelatedChartInfos({fieldInfos:ri,fieldName:vi,formattedAttributes:At,chartType:Ht,value:Qe})]);const _n=this._getChartOption({value:Qe,attributes:_t,chartType:Ht,formattedAttributes:At,fieldName:vi,fieldInfos:ri});Qe.series.push(_n)})}_getRelatedChartInfos(Fe){const{fieldInfos:Qe,fieldName:_t,formattedAttributes:At,chartType:Ht,value:nr}=Fe,Mr=[],Ur=ur(_t),{layerId:rs,fieldName:Os}=Ur,ri=this.relatedInfos?.get(rs.toString());if(!ri)return Mr;const{relatedFeatures:vi,relation:_n}=ri;if(!_n||!vi)return Mr;const{cardinality:cn}=_n;return vi.forEach(Fo=>{const{attributes:Pn}=Fo;Pn&&Object.keys(Pn).forEach(Vo=>{Vo===Os&&Mr.push(this._getChartOption({value:nr,attributes:Pn,formattedAttributes:At,fieldName:_t,chartType:Ht,relatedFieldName:Vo,fieldInfos:Qe}))})}),"one-to-many"===cn||"many-to-many"===cn?Mr:[Mr[0]]}_getTooltip({label:Fe,value:Qe,chartType:_t}){return"pie-chart"===_t?`${Fe}`:`${Fe}: ${Qe}`}_getChartOption(Fe){const{value:Qe,attributes:_t,formattedAttributes:At,fieldName:Ht,relatedFieldName:nr,fieldInfos:Mr,chartType:Ur}=Fe,{layer:rs,fieldInfoMap:Os}=this,{normalizeField:ri,tooltipField:vi}=Qe,_n=ri?bt(ri)?_t[ur(ri).fieldName]:_t[ri]:null,cn=nr&&void 0!==_t[nr]?_t[nr]:void 0!==_t[Ht]?_t[Ht]:At[Ht],Fo=new Vn.Z({fieldName:Ht,value:void 0===cn?null:cn&&_n?cn/_n:cn});if(bt(Ht)){const Fa=Os.get(Ht.toLowerCase()),Np=Os.get(vi.toLowerCase());return Fo.tooltip=this._getTooltip({label:At[Np?.fieldName??vi]??Fa?.label??Fa?.fieldName??nr,value:At[Fa?.fieldName??Ht],chartType:Ur}),Fo}const Pn=$t(Mr,Ht),Vo=lt(Ht,rs),nl=vi&&void 0!==At[vi]?At[vi]:Xe(Pn||new Ps.Z({fieldName:Vo}),this.popupTemplate?.expressionInfos);return Fo.tooltip=this._getTooltip({label:nl,value:At[Vo],chartType:Ur}),Fo}};(0,D._)([(0,U.Cb)()],eo.prototype,"abilities",void 0),(0,D._)([(0,de.p)("abilities")],eo.prototype,"castAbilities",null),(0,D._)([(0,U.Cb)()],eo.prototype,"activeMediaInfoIndex",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],eo.prototype,"activeMediaInfo",null),(0,D._)([(0,U.Cb)()],eo.prototype,"attributes",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"description",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"fieldInfoMap",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"formattedAttributes",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"expressionAttributes",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],eo.prototype,"formattedMediaInfos",null),(0,D._)([(0,U.Cb)()],eo.prototype,"layer",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],eo.prototype,"formattedMediaInfoCount",null),(0,D._)([(0,U.Cb)()],eo.prototype,"mediaInfos",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"popupTemplate",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"relatedInfos",void 0),(0,D._)([(0,U.Cb)()],eo.prototype,"title",void 0),eo=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],eo);const za=eo;var Xc=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Sl=[{name:"default",colors:[].concat(Xc.slice(30,39),Xc.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],na=T(56683);const oa=new Map([["ar",()=>T.e(3309).then(T.bind(T,93309)).then(Fe=>Fe.a)],["bg-bg",()=>T.e(2504).then(T.bind(T,82504)).then(Fe=>Fe.b)],["bs-ba",()=>T.e(88).then(T.bind(T,88)).then(Fe=>Fe.b)],["ca-es",()=>T.e(2371).then(T.bind(T,32371)).then(Fe=>Fe.c)],["cs-cz",()=>T.e(3690).then(T.bind(T,93690)).then(Fe=>Fe.c)],["da-dk",()=>T.e(2125).then(T.bind(T,42125)).then(Fe=>Fe.d)],["de-de",()=>T.e(7396).then(T.bind(T,7396)).then(Fe=>Fe.d)],["de-ch",()=>T.e(2479).then(T.bind(T,62479)).then(Fe=>Fe.d)],["el-gr",()=>T.e(9548).then(T.bind(T,39548)).then(Fe=>Fe.e)],["en-us",()=>T.e(700).then(T.bind(T,20700)).then(Fe=>Fe.e)],["en-ca",()=>T.e(7028).then(T.bind(T,37028)).then(Fe=>Fe.e)],["es-es",()=>T.e(4824).then(T.bind(T,54824)).then(Fe=>Fe.e)],["et-ee",()=>T.e(3914).then(T.bind(T,23914)).then(Fe=>Fe.e)],["fi-fi",()=>T.e(1299).then(T.bind(T,1299)).then(Fe=>Fe.f)],["fr-fr",()=>T.e(9856).then(T.bind(T,39856)).then(Fe=>Fe.f)],["he-il",()=>T.e(4609).then(T.bind(T,24609)).then(Fe=>Fe.h)],["hr-hr",()=>T.e(7731).then(T.bind(T,87731)).then(Fe=>Fe.h)],["hu-hu",()=>T.e(7127).then(T.bind(T,57127)).then(Fe=>Fe.h)],["id-id",()=>T.e(6560).then(T.bind(T,36560)).then(Fe=>Fe.i)],["it-it",()=>T.e(7708).then(T.bind(T,67708)).then(Fe=>Fe.i)],["ja-jp",()=>T.e(6651).then(T.bind(T,36651)).then(Fe=>Fe.j)],["ko-kr",()=>T.e(7016).then(T.bind(T,7016)).then(Fe=>Fe.k)],["lt-lt",()=>T.e(5010).then(T.bind(T,5010)).then(Fe=>Fe.l)],["lv-lv",()=>T.e(2620).then(T.bind(T,92620)).then(Fe=>Fe.l)],["nb-no",()=>T.e(5237).then(T.bind(T,55237)).then(Fe=>Fe.n)],["nl-nl",()=>T.e(948).then(T.bind(T,948)).then(Fe=>Fe.n)],["pl-pl",()=>T.e(8351).then(T.bind(T,58351)).then(Fe=>Fe.p)],["pt-br",()=>T.e(6681).then(T.bind(T,86681)).then(Fe=>Fe.p)],["pt-pt",()=>T.e(8110).then(T.bind(T,48110)).then(Fe=>Fe.p)],["ro-ro",()=>T.e(8372).then(T.bind(T,95058)).then(Fe=>Fe.r)],["ru-ru",()=>T.e(8073).then(T.bind(T,88073)).then(Fe=>Fe.r)],["sk-sk",()=>T.e(7419).then(T.bind(T,7419)).then(Fe=>Fe.s)],["sl-sl",()=>T.e(1218).then(T.bind(T,11218)).then(Fe=>Fe.s)],["sr-rs",()=>T.e(5302).then(T.bind(T,85302)).then(Fe=>Fe.s)],["sv-se",()=>T.e(6079).then(T.bind(T,86079)).then(Fe=>Fe.s)],["th-th",()=>T.e(5508).then(T.bind(T,55508)).then(Fe=>Fe.t)],["tr-tr",()=>T.e(6844).then(T.bind(T,56844)).then(Fe=>Fe.t)],["uk-ua",()=>T.e(4978).then(T.bind(T,4978)).then(Fe=>Fe.u)],["vi-vn",()=>T.e(9202).then(T.bind(T,29202)).then(Fe=>Fe.v)],["zh-cn",()=>T.e(865).then(T.bind(T,70865)).then(Fe=>Fe.z)],["zh-hk",()=>T.e(3207).then(T.bind(T,3207)).then(Fe=>Fe.z)],["zh-tw",()=>T.e(3207).then(T.bind(T,3207)).then(Fe=>Fe.z)]]);function Mu(Fe){return Fe?oa.has(Fe.toLowerCase())?Fe.toLowerCase():function Sc(Fe){const Qe=Fe.split("-")[0].toLowerCase();let _t=null;for(const At of oa.keys())if(At.startsWith(Qe)){_t=At;break}return _t}(Fe)||"en-us":"en-us"}let Xa,Oa;function Bo(){return(Bo=(0,Z.Z)(function*(Fe=(0,na.Kd)()){if(Fe=Mu(Fe),Xa&&Fe===Oa)return Xa;Xa=T.e(4430).then(T.bind(T,4430)).then(Qe=>Qe.i),Oa=Fe;try{const[Qe,_t]=yield Promise.all([Xa,oa.get(Oa)()]);Oa===Fe&&(Qe.am4core.options.defaultLocale=_t.default),Qe.am4core.options.suppressWarnings=!0,Qe.am4core.options.autoDispose=!0}catch{return Xa=null,Oa=null,null}return Xa})).apply(this,arguments)}var qa=T(64183);const Po_mediaIcon="esri-feature-media__icon",Ua="color",mo="tooltip",Ko="value",$n="default-line-value";let no=class extends me.Z{constructor(Fe,Qe){var _t;super(Fe,Qe),_t=this,this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new za,this.messages=null,this._getChartDependencies=function(){var At=(0,Z.Z)(function*(Ht){const nr=yield function Qa(){return Bo.apply(this,arguments)}(),{destroyed:Mr,viewModel:Ur}=_t;if(Mr||!Ur||!Ht)return;const{activeMediaInfo:rs}=Ur,Os=yield _t._getRendererColors(nr);_t._renderChart({chartDiv:Ht,mediaInfo:rs,chartsModule:nr,colorMap:Os})});return function(Ht){return At.apply(this,arguments)}}()}initialize(){this._featureElementInfo=new gi,this.own([(0,w.YP)(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),w.nn),(0,w.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),w.nn)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){return(0,Nr.u)("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:Fe}=this.viewModel;return Fe?(0,Nr.u)("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(Fe){const{_refreshIntervalInfo:Qe}=this,{activeMediaInfoIndex:_t,formattedMediaInfoCount:At}=this.viewModel,{value:Ht,refreshInterval:nr,altText:Mr,title:Ur,type:rs}=Fe,{sourceURL:Os,linkURL:ri}=Ht,vi=et(ri)?"_blank":"_self",_n="_blank"===vi?"noreferrer":"",cn=nr?Qe:null,Vo=(0,Nr.u)("img",{alt:Mr||Ur,key:`media-${rs}-${_t}-${At}-${cn?cn.timestamp:0}`,src:cn?cn.sourceURL:Os});return(ri?(0,Nr.u)("a",{title:Ur,href:ri,rel:_n,target:vi},Vo):null)||Vo}renderChartMediaInfo(Fe){const{activeMediaInfoIndex:Qe,formattedMediaInfoCount:_t}=this.viewModel;return(0,Nr.u)("div",{key:`media-${Fe.type}-${Qe}-${_t}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:Fe}=this.viewModel;return Fe?"image"===Fe.type?this.renderImageMediaInfo(Fe):Fe.type.includes("chart")?this.renderChartMediaInfo(Fe):null:null}renderMediaInfo(){const{activeMediaInfo:Fe}=this.viewModel;if(!Fe)return null;const Qe=Fe.title?(0,Nr.u)("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:Fe.title}):null,_t=Fe.caption?(0,Nr.u)("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:Fe.caption}):null;return(0,Nr.u)("div",{key:"media-container",class:"esri-feature-media__item-container"},(0,Nr.u)("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),Qe,_t)}renderMediaPageButton(Fe){if(this.viewModel.formattedMediaInfoCount<2)return null;const Qe="previous"===Fe,_t=Qe?this.messages.previous:this.messages.next,At=this.classes("esri-feature-media__button",Qe?"esri-feature-media__previous":"esri-feature-media__next"),Ht=Qe?this.classes(Po_mediaIcon,"esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes(Po_mediaIcon,"esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),nr=Qe?this.classes(Po_mediaIcon,"esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes(Po_mediaIcon,"esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return(0,Nr.u)("button",{type:"button",key:Qe?"media-previous":"media-next",title:_t,"aria-label":_t,tabIndex:0,class:At,bind:this,onclick:Qe?this._previous:this._next},(0,Nr.u)("span",{"aria-hidden":"true",class:Ht}),(0,Nr.u)("span",{"aria-hidden":"true",class:nr}))}_setupFeatureElementInfo(){const{description:Fe,title:Qe}=this;this._featureElementInfo.set({description:Fe,title:Qe})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRendererColors(Fe){var Qe=this;return(0,Z.Z)(function*(){const{am4core:_t}=Fe,At=Qe.viewModel?.layer,Ht=new Map;if(!At)return Ht;const nr=yield(0,Uo.zB)(At.renderer);return nr.delete(null),Array.from(nr.values()).every(Mr=>1===Mr?.length)&&(Ht.set($n,_t.color({r:50,g:50,b:50,a:1})),Array.from(nr.keys()).forEach(Mr=>{Mr&&Ht.set(Mr,_t.color(nr.get(Mr)[0].toCss(!0)))})),Ht})()}_handleMediaKeyup(Fe){const Qe=(0,J.kK)(Fe);"ArrowLeft"===Qe&&(Fe.stopPropagation(),this.viewModel.previous()),"ArrowRight"===Qe&&(Fe.stopPropagation(),this.viewModel.next())}_renderChart(Fe){const{abilities:Qe}=this.viewModel,{chartsModule:_t,chartDiv:At,mediaInfo:Ht,colorMap:nr}=Fe,{value:Mr,type:Ur}=Ht,{am4core:rs}=_t,Os=function Jd(Fe,Qe="default"){const _t=Sl.find(At=>At.name===Qe);return _t?_t.colors.map(At=>Fe.color(At)):null}(rs);(0,qa.$o)()&&rs.useTheme(_t.am4themes_dark);const vi=window.matchMedia("(prefers-reduced-motion: reduce)");Qe.chartAnimation&&!vi.matches?rs.useTheme(_t.am4themes_animated):rs.unuseTheme(_t.am4themes_animated),rs.useTheme(function ri(cn){cn instanceof rs.ColorSet&&Os&&(cn.list=Os)});const _n="pie-chart"===Ur?this._createPieChart(Fe):this._createXYChart(Fe);At.setAttribute("aria-label",Ht.altText||Ht.title),_n.data=Mr.series.map(cn=>({[mo]:cn.tooltip,[Ko]:cn.value,[Ua]:nr.get(cn.fieldName)})).filter(cn=>"pie-chart"!==Ur||cn.value>0)}_customizeChartTooltip(Fe,Qe){Fe.label.wrap=!0,Fe.label.maxWidth=200,Fe.autoTextColor=!1,Fe.getFillFromObject=!1,Fe.label.fill=Qe.color("#ffffff"),Fe.background.fill=Qe.color({r:0,g:0,b:0,a:.7})}_createPieChart(Fe){const{chartDiv:Qe,chartsModule:_t}=Fe,{am4core:At,am4charts:Ht}=_t,nr=At.create(Qe,Ht.PieChart);nr.rtl=(0,Ys.dZ)(this.container);const Mr=nr.series.push(new Ht.PieSeries);return Mr.labels.template.disabled=!0,Mr.ticks.template.disabled=!0,Mr.dataFields.value=Ko,Mr.dataFields.category=mo,this._customizeChartTooltip(Mr.tooltip,At),Mr.slices.template.tooltipText=nr.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",Mr.slices.template.propertyFields.fill=Ua,Mr.slices.template.propertyFields.stroke=Ua,nr}_getMinSeriesValue(Fe){let Qe=0;return Fe.forEach(_t=>Qe=Math.min(_t.value,Qe)),Qe}_createColumnChart(Fe,Qe){const{chartsModule:_t,mediaInfo:At}=Qe,{value:Ht}=At,{am4core:nr,am4charts:Mr}=_t,Ur=Fe.xAxes.push(new Mr.CategoryAxis);Ur.dataFields.category=mo,Ur.renderer.labels.template.disabled=!0,this._customizeChartTooltip(Ur.tooltip,nr),Ur.tooltip.events.on("sizechanged",()=>{Ur.tooltip.dy=-Ur.tooltip.contentHeight});const rs=Fe.yAxes.push(new Mr.ValueAxis),Os=rs.renderer.labels.template;rs.renderer.minLabelPosition=.05,rs.renderer.maxLabelPosition=.95,rs.min=this._getMinSeriesValue(Ht.series),this._customizeChartTooltip(rs.tooltip,nr),Os.wrap=!0;const ri=Fe.series.push(new Mr.ColumnSeries);ri.dataFields.valueY=Ko,ri.dataFields.categoryX=mo,ri.columns.template.propertyFields.fill=Ua,ri.columns.template.propertyFields.stroke=Ua,Fe.cursor=new Mr.XYCursor,Ht.series.length>15&&(Fe.scrollbarX=new nr.Scrollbar)}_createBarChart(Fe,Qe){const{chartsModule:_t,mediaInfo:At}=Qe,{value:Ht}=At,{am4core:nr,am4charts:Mr}=_t,Ur=Fe.yAxes.push(new Mr.CategoryAxis);Ur.dataFields.category=mo,Ur.renderer.inversed=!0,Ur.renderer.labels.template.disabled=!0,this._customizeChartTooltip(Ur.tooltip,nr),Ur.tooltip.events.on("sizechanged",()=>{Ur.tooltip.dx=Ur.tooltip.contentWidth});const rs=Fe.xAxes.push(new Mr.ValueAxis),Os=rs.renderer.labels.template;rs.renderer.minLabelPosition=.05,rs.renderer.maxLabelPosition=.95,rs.min=this._getMinSeriesValue(Ht.series),this._customizeChartTooltip(rs.tooltip,nr),Os.wrap=!0;const ri=Fe.series.push(new Mr.ColumnSeries);ri.dataFields.valueX=Ko,ri.dataFields.categoryY=mo,ri.columns.template.propertyFields.fill=Ua,ri.columns.template.propertyFields.stroke=Ua,Fe.cursor=new Mr.XYCursor,Ht.series.length>15&&(Fe.scrollbarY=new nr.Scrollbar)}_createLineChart(Fe,Qe){const{chartsModule:_t,mediaInfo:At,colorMap:Ht}=Qe,{value:nr}=At,{am4core:Mr,am4charts:Ur}=_t,rs=Fe.xAxes.push(new Ur.CategoryAxis);rs.dataFields.category=mo,rs.renderer.labels.template.disabled=!0,this._customizeChartTooltip(rs.tooltip,Mr),rs.tooltip.events.on("sizechanged",()=>{rs.tooltip.dy=-rs.tooltip.contentHeight});const Os=Fe.yAxes.push(new Ur.ValueAxis),ri=Os.renderer.labels.template;Os.renderer.minLabelPosition=.05,Os.renderer.maxLabelPosition=.95,Os.min=this._getMinSeriesValue(nr.series),this._customizeChartTooltip(Os.tooltip,Mr),ri.wrap=!0;const vi=Fe.series.push(new Ur.LineSeries);vi.dataFields.categoryX=mo,vi.dataFields.valueY=Ko,vi.strokeWidth=1;const _n=Ht.get($n);_n&&(vi.stroke=_n);const cn=vi.bullets.push(new Ur.CircleBullet);cn.propertyFields.fill=Ua,cn.propertyFields.stroke=Ua,Fe.cursor=new Ur.XYCursor,nr.series.length>15&&(Fe.scrollbarX=new Mr.Scrollbar)}_createXYChart(Fe){const{chartDiv:Qe,chartsModule:_t,mediaInfo:At}=Fe,{type:Ht}=At,{am4core:nr,am4charts:Mr}=_t,Ur=nr.create(Qe,Mr.XYChart);return Ur.rtl=(0,Ys.dZ)(this.container),"column-chart"===Ht&&this._createColumnChart(Ur,Fe),"bar-chart"===Ht&&this._createBarChart(Ur,Fe),"line-chart"===Ht&&this._createLineChart(Ur,Fe),Ur}_clearMediaRefreshTimer(){const{_refreshTimer:Fe}=this;Fe&&(clearTimeout(Fe),this._refreshTimer=null)}_updateMediaInfoTimestamp(Fe){const Qe=Date.now();this._refreshIntervalInfo={timestamp:Qe,sourceURL:this._getImageSource(Fe,Qe)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:Fe}=this.viewModel;Fe&&"image"===Fe.type&&Fe.refreshInterval&&this._setRefreshTimeout(Fe)}_setRefreshTimeout(Fe){const{refreshInterval:Qe,value:_t}=Fe;if(!Qe)return;const At=6e4*Qe;this._updateMediaInfoTimestamp(_t.sourceURL);const Ht=setInterval(()=>{this._updateMediaInfoTimestamp(_t.sourceURL)},At);this._refreshTimer=Ht}_getImageSource(Fe,Qe){const _t=Fe.includes("?")?"&":"?",[At,Ht=""]=Fe.split("#");return`${At}${_t}timestamp=${Qe}${Ht?"#":""}${Ht}`}};(0,D._)([(0,ce.B)("viewModel.attributes")],no.prototype,"attributes",void 0),(0,D._)([(0,ce.B)("viewModel.activeMediaInfoIndex")],no.prototype,"activeMediaInfoIndex",void 0),(0,D._)([(0,ce.B)("viewModel.description")],no.prototype,"description",void 0),(0,D._)([(0,ce.B)("viewModel.fieldInfoMap")],no.prototype,"fieldInfoMap",void 0),(0,D._)([(0,ce.B)("viewModel.layer")],no.prototype,"layer",void 0),(0,D._)([(0,ce.B)("viewModel.mediaInfos")],no.prototype,"mediaInfos",void 0),(0,D._)([(0,ce.B)("viewModel.popupTemplate")],no.prototype,"popupTemplate",void 0),(0,D._)([(0,ce.B)("viewModel.relatedInfos")],no.prototype,"relatedInfos",void 0),(0,D._)([(0,ce.B)("viewModel.title")],no.prototype,"title",void 0),(0,D._)([(0,U.Cb)({type:za})],no.prototype,"viewModel",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/Feature/t9n/Feature")],no.prototype,"messages",void 0),no=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureMedia")],no);const kl=no;var uc=T(47562),Qd=(T(55664),T(55013),T(16615),T(82561),T(75484)),qd=T(64531),Ha=T(501),Tu=T(38159),zn=T(32258);const Jl=["$datastore","$map","$layer","$aggregatedfeatures"],Xl=ee.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function Yo(Fe){return"string"==typeof Fe?Gr(Kr(Fe)):Array.isArray(Fe)?function Ou(Fe){return`<ul class="esri-widget__list">${Fe.map(Qe=>`<li>${"string"==typeof Qe?Gr(Kr(Qe)):Qe}</li>`).join("")}</ul>`}(Fe):"esri.arcade.Dictionary"===Fe?.declaredClass?function Zo(Fe){return`<table class="esri-widget__table">${Fe.keys().map(Qe=>{const _t=Fe.field(Qe);return`<tr><th>${Qe}</th><td>${"string"==typeof _t?Gr(Kr(_t)):_t}</td></tr>`}).join("")}</table>`}(Fe):Fe}function Jn({aggregatedFeatures:Fe,arcadeUtils:Qe,featureSetVars:_t,context:At,viewInfo:Ht,map:nr,graphic:Mr,interceptor:Ur}){_t.forEach(rs=>{const Os=rs.toLowerCase();if("$map"===Os&&(At.vars[Os]=Qe.convertMapToFeatureSetCollection({map:nr,spatialReference:Ht.sr,interceptor:Ur})),"$layer"===Os&&(At.vars[Os]=Qe.convertFeatureLayerToFeatureSet({layer:Mr.sourceLayer,spatialReference:Ht.sr,interceptor:Ur})),"$datastore"===Os&&(At.vars[Os]=Qe.convertServiceUrlToWorkspace({url:Mr.sourceLayer.url,spatialReference:Ht.sr,interceptor:Ur})),"$aggregatedfeatures"===Os){const vi=Mr.layer,{fields:_n,objectIdField:cn,geometryType:Fo,spatialReference:Pn,displayField:Vo}=vi,nl=new zn.default({fields:_n,objectIdField:cn,geometryType:Fo,spatialReference:Pn,displayField:Vo,..."feature"===vi.type?{templates:vi.templates,typeIdField:vi.typeIdField,types:vi.types}:null,source:Fe});At.vars[Os]=Qe.convertFeatureLayerToFeatureSet({layer:nl,spatialReference:Ht.sr,interceptor:Ur})}})}function Ac(){return T.e(5068).then(T.bind(T,75068))}function Ah(Fe){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,Z.Z)(function*({graphic:Fe,view:Qe}){const{isAggregate:_t,layer:At}=Fe;if(!_t||!At||"2d"!==Qe?.type)return[];const Ht=yield Qe.whenLayerView(At);if(!Ht.createQuery||!Ht.queryFeatures)return[];const nr=Ht.createQuery();nr.aggregateIds=[Fe.getObjectId()];const{features:Mr}=yield Ht.queryFeatures(nr);return Mr})).apply(this,arguments)}function Da(Fe){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,Z.Z)(function*({expressionInfo:Fe,arcadeUtils:Qe,interceptor:_t,spatialReference:At,map:Ht,graphic:nr,view:Mr}){if(!Fe||!Fe.expression)return null;const Ur=Qe.createSyntaxTree(Fe.expression),rs=Jl.filter(cn=>Qe.hasVariable(Ur,cn)),[Os]=yield Promise.all([Ah({graphic:nr,view:Mr}),Qe.loadScriptDependencies(Ur,!0,rs)]),ri=Qe.getViewInfo({spatialReference:At}),vi=Qe.createExecContext(nr,ri);vi.interceptor=_t,vi.useAsync=!0,Jn({aggregatedFeatures:Os,arcadeUtils:Qe,featureSetVars:rs,context:vi,viewInfo:ri,map:Ht,graphic:nr,interceptor:_t});const _n=Qe.createFunction(Ur,vi);return Qe.executeAsyncFunction(_n,vi).catch(cn=>Xl.error("arcade-execution-error",{error:cn,graphic:nr,expressionInfo:Fe}))})).apply(this,arguments)}function dc(Fe){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,Z.Z)(function*({expressionInfos:Fe,spatialReference:Qe,graphic:_t,interceptor:At,map:Ht,view:nr}){if(!Fe||!Fe.length)return{};const Mr=yield Ac(),Ur={};for(const ri of Fe)Ur[`expression/${ri.name}`]=Da({expressionInfo:ri,arcadeUtils:Mr,interceptor:At,spatialReference:Qe,map:Ht,graphic:_t,view:nr});const rs=yield(0,An.as)(Ur),Os={};for(const ri in rs)Os[ri]=Yo(rs[ri].value);return Os})).apply(this,arguments)}let Do=class extends((0,zi.p)($.Z)){constructor(Fe){var Qe;super(Fe),Qe=this,this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:_t}=this;_t&&_t.abort(),this._abortController=null},this._createVM=()=>{const _t=this.contentElement?.type;this.contentElementViewModel?.destroy();const At="fields"===_t?new yi:"media"===_t?new za:"text"===_t?new ii:null;this._set("contentElementViewModel",At)},this._compile=(0,Z.Z)(function*(){Qe._cancelQuery();const _t=new AbortController;Qe._abortController=_t,yield Qe._compileExpression(),Qe._abortController===_t&&(Qe._abortController=null)}),this._compileThrottled=ne(this._compile,1,this),this._compileExpression=(0,Z.Z)(function*(){const{expressionInfo:_t,graphic:At,interceptor:Ht,spatialReference:nr,map:Mr,view:Ur,_abortController:rs}=Qe;if(!(_t&&At&&nr&&Mr))return void Qe._set("contentElement",null);const Os=yield Ac();if(rs!==Qe._abortController)return;const ri=yield Da({arcadeUtils:Os,expressionInfo:_t,graphic:At,interceptor:Ht,map:Mr,spatialReference:nr,view:Ur});if(!ri||"esri.arcade.Dictionary"!==ri.declaredClass)return void Qe._set("contentElement",null);const vi=yield(0,uc.d)(ri,rs.signal),_n=vi?.type,cn="media"===_n?qd.Z.fromJSON(vi):"text"===_n?Ha.Z.fromJSON(vi):"fields"===_n?Qd.Z.fromJSON(vi):null;Qe._set("contentElement",cn)}),this.handles.add([(0,w.YP)(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),w.nn),(0,w.YP)(()=>[this.contentElement],()=>this._createVM(),w.nn)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference||null}set spatialReference(Fe){void 0!==Fe?this._override("spatialReference",Fe):this._clearOverride("spatialReference")}get state(){const{_abortController:Fe,contentElement:Qe,contentElementViewModel:_t}=this;return Fe?"loading":Qe||_t?"ready":"disabled"}get map(){return this.view?.map||null}set map(Fe){void 0!==Fe?this._override("map",Fe):this._clearOverride("map")}};(0,D._)([(0,U.Cb)()],Do.prototype,"_abortController",void 0),(0,D._)([(0,U.Cb)({type:Tu.Z})],Do.prototype,"expressionInfo",void 0),(0,D._)([(0,U.Cb)({type:ye.Z})],Do.prototype,"graphic",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Do.prototype,"contentElement",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Do.prototype,"contentElementViewModel",void 0),(0,D._)([(0,U.Cb)()],Do.prototype,"interceptor",void 0),(0,D._)([(0,U.Cb)()],Do.prototype,"spatialReference",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Do.prototype,"state",null),(0,D._)([(0,U.Cb)()],Do.prototype,"map",null),(0,D._)([(0,U.Cb)()],Do.prototype,"view",void 0),Do=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Do);const Al=Do;let Du=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this.viewModel=new Al}initialize(){this.own((0,w.YP)(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),w.nn))}destroy(){this._destroyContentWidget()}renderLoading(){return(0,Nr.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Nr.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}render(){const{state:Fe}=this.viewModel;return(0,Nr.u)("div",{class:"esri-feature-expression"},"loading"===Fe?this.renderLoading():"disabled"===Fe?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:Fe}=this;Fe&&(Fe.viewModel=null,Fe.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:Fe,contentElement:Qe}=this.viewModel,_t=Qe?.type;this._destroyContentWidget();const At=Fe?"fields"===_t?new sn({viewModel:Fe}):"media"===_t?new kl({viewModel:Fe}):"text"===_t?new er({viewModel:Fe}):null:null;this._contentWidget=At,this.scheduleRender()}};(0,D._)([(0,U.Cb)({type:Al})],Du.prototype,"viewModel",void 0),Du=(0,D._)([(0,G.j)("esri.widgets.Feature.FeatureExpression")],Du);const eh=Du;var el;const ua="content-view-models",xu="esri.widgets.FeatureViewModel",Pd=ee.Z.getLogger(xu),qu={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let oo=el=class extends $.Z{constructor(Fe){super(Fe),this._handles=new se.Z,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=ne(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...qu},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=Qe=>{const{abilities:_t}=this;return"attachments"===Qe.type&&_t.attachmentsContent||"custom"===Qe.type&&_t.customContent||"fields"===Qe.type&&_t.fieldsContent||"media"===Qe.type&&_t.mediaContent||"text"===Qe.type&&_t.textContent||"expression"===Qe.type&&_t.expressionContent},this._handles.add((0,w.YP)(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),w.nn))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return(0,le.pC)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function gr(Fe,Qe){const _t=new Map;return Fe&&Fe.forEach(At=>{const Ht=lt(At.fieldName,Qe);At.fieldName=Ht,_t.set(Ht.toLowerCase(),At)}),_t}(vr(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Se(this.graphic)}castAbilities(Fe){return{...qu,...Fe}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(Fe){this._set("graphic",Fe?Fe.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(Fe){void 0!==Fe?this._override("spatialReference",Fe):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(Fe){void 0!==Fe?this._override("map",Fe):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(Fe,Qe){const _t=this.contentViewModels[Fe];_t instanceof za&&_t.setActiveMedia(Qe)}nextMedia(Fe){const Qe=this.contentViewModels[Fe];Qe instanceof za&&Qe.next()}previousMedia(Fe){const Qe=this.contentViewModels[Fe];Qe instanceof za&&Qe.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){var Fe=this;return(0,Z.Z)(function*(){Fe._cancelFeatureQuery(),Fe._error=null,Fe._clear();const{graphic:Qe}=Fe;if(!Qe)return;const _t=new AbortController;Fe._featureAbortController=_t;try{yield Fe._queryFeature({signal:_t.signal})}catch(At){(0,An.D_)(At)||(Fe._error=At,Pd.error("error","The popupTemplate could not be displayed for this feature.",{error:At,graphic:Qe,popupTemplate:Fe._effectivePopupTemplate}))}Fe._featureAbortController===_t&&(Fe._featureAbortController=null)})()}_cancelFeatureQuery(){const{_featureAbortController:Fe}=this;Fe&&Fe.abort(),this._featureAbortController=null}_compileContentElement(Fe,Qe){return"attachments"===Fe.type?this._compileAttachments(Fe,Qe):"custom"===Fe.type?this._compileCustom(Fe,Qe):"fields"===Fe.type?this._compileFields(Fe,Qe):"media"===Fe.type?this._compileMedia(Fe,Qe):"text"===Fe.type?this._compileText(Fe,Qe):"expression"===Fe.type?this._compileExpression(Fe,Qe):void 0}_compileContent(Fe){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(Fe)?Fe.filter(this._isAllowedContentType).map((Qe,_t)=>this._compileContentElement(Qe,_t)):"string"==typeof Fe?this._compileText(new Ha.Z({text:Fe}),0).text:Fe}_destroyContentViewModels(){this._handles?.remove(ua),this.contentViewModels.forEach(Fe=>Fe&&!Fe.destroyed&&Fe.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(Fe,Qe){const{formattedAttributes:_t}=this,{contentElement:At,contentElementViewModel:Ht}=Fe,nr=At?.type;Ht&&nr&&("fields"===nr&&(this._createFieldsFormattedAttributes({contentElement:At,contentElementIndex:Qe,formattedAttributes:_t}),Ht.set(this._createFieldsVMParams(At,Qe))),"media"===nr&&(this._createMediaFormattedAttributes({contentElement:At,contentElementIndex:Qe,formattedAttributes:_t}),Ht.set(this._createMediaVMParams(At,Qe))),"text"===nr&&Ht.set(this._createTextVMParams(At)))}_compileExpression(Fe,Qe){const{expressionInfo:_t}=Fe,{graphic:At,map:Ht,spatialReference:nr,view:Mr}=this,Ur=new Al({expressionInfo:_t,graphic:At,interceptor:el.interceptor,map:Ht,spatialReference:nr,view:Mr});return this.contentViewModels[Qe]=Ur,this._handles.add((0,w.YP)(()=>Ur.contentElementViewModel,()=>this._setExpressionContentVM(Ur,Qe),w.nn),ua),Fe}_compileAttachments(Fe,Qe){const{graphic:_t}=this,{description:At,title:Ht}=Fe;return this.contentViewModels[Qe]=new xr({graphic:_t,...this._compileTitleAndDesc({title:Ht,description:At})}),Fe}_compileCustom(Fe,Qe){const{graphic:_t}=this,{creator:At,destroyer:Ht}=Fe;return this.contentViewModels[Qe]=new ii({graphic:_t,creator:At,destroyer:Ht}),Fe}_compileTitleAndDesc({title:Fe,description:Qe}){const{_fieldInfoMap:_t,_sourceLayer:At,graphic:Ht,formattedAttributes:nr,_expressionAttributes:Mr}=this,{attributes:Ur}=Ht,rs=nr.global;return{title:kt({attributes:Ur,fieldInfoMap:_t,globalAttributes:rs,expressionAttributes:Mr,layer:At,text:Fe}),description:kt({attributes:Ur,fieldInfoMap:_t,globalAttributes:rs,expressionAttributes:Mr,layer:At,text:Qe})}}_createFieldsVMParams(Fe,Qe){const{_effectivePopupTemplate:_t,formattedAttributes:At}=this,Ht={...At.global,...At.content[Qe]},nr=(Fe?.fieldInfos||_t?.fieldInfos)?.filter(({fieldName:Os})=>nt(Os)||bt(Os)||Ht.hasOwnProperty(Os)),Mr=_t?.expressionInfos,{description:Ur,title:rs}=Fe;return{attributes:Ht,expressionInfos:Mr,fieldInfos:nr,...this._compileTitleAndDesc({title:rs,description:Ur})}}_compileFields(Fe,Qe){const _t=Fe.clone(),At=new yi(this._createFieldsVMParams(Fe,Qe));return this.contentViewModels[Qe]=At,_t.fieldInfos=At.formattedFieldInfos.slice(0),_t}_createMediaVMParams(Fe,Qe){const{abilities:_t,graphic:At,_fieldInfoMap:Ht,formattedAttributes:nr,_effectivePopupTemplate:Mr,relatedInfos:Ur,_sourceLayer:rs,_expressionAttributes:Os}=this,{attributes:ri}=At,{description:vi,mediaInfos:_n,title:cn}=Fe;return{abilities:{chartAnimation:_t.chartAnimation},activeMediaInfoIndex:Fe.activeMediaInfoIndex||0,attributes:ri,layer:rs,fieldInfoMap:Ht,formattedAttributes:{...nr.global,...nr.content[Qe]},expressionAttributes:Os,mediaInfos:_n,popupTemplate:Mr,relatedInfos:Ur,...this._compileTitleAndDesc({title:cn,description:vi})}}_compileMedia(Fe,Qe){const _t=Fe.clone(),At=new za(this._createMediaVMParams(Fe,Qe));return _t.mediaInfos=At.formattedMediaInfos.slice(0),this.contentViewModels[Qe]=At,_t}_createTextVMParams(Fe){const{graphic:Qe,_fieldInfoMap:_t,_sourceLayer:At,_expressionAttributes:Ht}=this;if(Fe&&Fe.text){const{attributes:nr}=Qe;Fe.text=kt({attributes:nr,fieldInfoMap:_t,globalAttributes:this.formattedAttributes.global,expressionAttributes:Ht,layer:At,text:Fe.text})}return{graphic:Qe,creator:Fe.text}}_compileText(Fe,Qe){const _t=Fe.clone();return this.contentViewModels[Qe]=new ii(this._createTextVMParams(_t)),_t}_compileLastEditInfo(){const{_effectivePopupTemplate:Fe,_sourceLayer:Qe,graphic:_t}=this;if(!Fe)return;const{lastEditInfoEnabled:At}=Fe,Ht=Qe?.editFieldsInfo;return At&&Ht?function hr(Fe,Qe){const{creatorField:_t,creationDateField:At,editorField:Ht,editDateField:nr}=Fe;if(!Qe)return;const Mr=Qe[nr];if("number"==typeof Mr){const rs=Qe[Ht];return{type:"edit",date:(0,Ce.p6)(Mr,We),user:rs}}const Ur=Qe[At];if("number"==typeof Ur){const rs=Qe[_t];return{type:"create",date:(0,Ce.p6)(Ur,We),user:rs}}return null}(Ht,_t.attributes):void 0}_compileTitle(Fe){const{_fieldInfoMap:Qe,_sourceLayer:_t,graphic:At,_expressionAttributes:Ht}=this,{attributes:nr}=At;return kt({attributes:nr,fieldInfoMap:Qe,globalAttributes:this.formattedAttributes.global,expressionAttributes:Ht,layer:_t,text:Fe})}_getTitle(){var Fe=this;return(0,Z.Z)(function*(){const{_effectivePopupTemplate:Qe,graphic:_t}=Fe,At=Qe?.title;return He(At,{graphic:_t})})()}_getContent(){var Fe=this;return(0,Z.Z)(function*(){const{_effectivePopupTemplate:Qe,graphic:_t}=Fe,At=Qe?.content;return He(At,{graphic:_t})})()}_queryFeature(Fe){var Qe=this;return(0,Z.Z)(function*(){const{_featureAbortController:_t,_sourceLayer:At,graphic:Ht,_effectivePopupTemplate:nr,spatialReference:Mr,map:Ur,view:rs}=Qe,{content:{value:Os},title:{value:ri}}=yield(0,An.as)({content:Qe._getContent(),title:Qe._getTitle()});if(_t!==Qe._featureAbortController||!Ht)return;yield function sr(Fe,Qe){return Rr.apply(this,arguments)}({graphic:Ht,popupTemplate:nr,layer:At,spatialReference:Mr},Fe);const{expressionAttributes:{value:vi}}=yield(0,An.as)({checkForRelatedFeatures:Qe._checkForRelatedFeatures(Fe),expressionAttributes:dc({expressionInfos:nr?.expressionInfos,spatialReference:Mr,graphic:Ht,map:Ur,interceptor:el.interceptor,view:rs})});_t===Qe._featureAbortController&&Ht&&(Qe._expressionAttributes=vi,Qe._graphicExpressionAttributes={...Ht.attributes,...vi},Qe._set("formattedAttributes",Qe._createFormattedAttributes(Os)),Qe._set("title",Qe._compileTitle(ri)),Qe._set("lastEditInfo",Qe._compileLastEditInfo()||null),Qe._set("content",Qe._compileContent(Os)||null))})()}_createMediaFormattedAttributes({contentElement:Fe,contentElementIndex:Qe,formattedAttributes:_t}){const{_effectivePopupTemplate:At,graphic:Ht,relatedInfos:nr,_sourceLayer:Mr,_fieldInfoMap:Ur,_graphicExpressionAttributes:rs}=this;_t.content[Qe]=ns({fieldInfos:At?.fieldInfos,graphic:Ht,attributes:{...rs,...Fe.attributes},layer:Mr,fieldInfoMap:Ur,relatedInfos:nr})}_createFieldsFormattedAttributes({contentElement:Fe,contentElementIndex:Qe,formattedAttributes:_t}){if(Fe.fieldInfos){const{graphic:At,relatedInfos:Ht,_sourceLayer:nr,_fieldInfoMap:Mr,_graphicExpressionAttributes:Ur}=this;_t.content[Qe]=ns({fieldInfos:Fe.fieldInfos,graphic:At,attributes:{...Ur,...Fe.attributes},layer:nr,fieldInfoMap:Mr,relatedInfos:Ht})}}_createFormattedAttributes(Fe){const{_effectivePopupTemplate:Qe,graphic:_t,relatedInfos:At,_sourceLayer:Ht,_fieldInfoMap:nr,_graphicExpressionAttributes:Mr}=this,Ur=Qe?.fieldInfos,rs={global:ns({fieldInfos:Ur,graphic:_t,attributes:Mr,layer:Ht,fieldInfoMap:nr,relatedInfos:At}),content:[]};return Array.isArray(Fe)&&Fe.forEach((Os,ri)=>{"fields"===Os.type&&this._createFieldsFormattedAttributes({contentElement:Os,contentElementIndex:ri,formattedAttributes:rs}),"media"===Os.type&&this._createMediaFormattedAttributes({contentElement:Os,contentElementIndex:ri,formattedAttributes:rs})}),rs}_checkForRelatedFeatures(Fe){const{graphic:Qe,_effectivePopupTemplate:_t}=this;return this._queryRelatedInfos(Qe,vr(_t),Fe)}_queryRelatedInfos(Fe,Qe,_t){var At=this;return(0,Z.Z)(function*(){const{relatedInfos:Ht,_sourceLayer:nr}=At;Ht.clear();const Mr=(0,le.pC)(nr.associatedLayer)?yield nr.associatedLayer.load(_t):nr;if(!Mr)return;const Ur=Qe.filter(ri=>ri&&bt(ri.fieldName));if(!Ur||!Ur.length)return;Qe.forEach(ri=>At._configureRelatedInfo(ri,Mr));const rs=yield function Fn({relatedInfos:Fe,layer:Qe},_t){const At={};return Fe.forEach((Ht,nr)=>{const{relation:Mr}=Ht;if(!Mr){const vi=new _e.Z("relation-required","A relation is required on a layer to retrieve related records.");throw rr.error(vi),vi}const{relatedTableId:Ur}=Mr;if("number"!=typeof Ur){const vi=new _e.Z("A related table ID is required on a layer to retrieve related records.");throw rr.error(vi),vi}const rs=`${Qe.url}/${Ur}`,Os=Er.get(rs),ri=Os||function fn(Fe,Qe){return(0,io.default)(Fe,{query:{f:"json"},signal:Qe&&Qe.signal})}(rs,_t);Os||Er.set(rs,ri),At[nr]=ri}),(0,An.as)(At)}({relatedInfos:Ht,layer:Mr},_t);Object.keys(rs).forEach(ri=>{const vi=Ht.get(ri.toString()),_n=rs[ri]?.value;vi&&_n&&(vi.layerInfo=_n.data)});const Os=yield function un({graphic:Fe,relatedInfos:Qe,layer:_t},At){const Ht={};return Qe.forEach((nr,Mr)=>{nr.layerInfo&&(Ht[Mr]=function qs(Fe,Qe,_t,At){return wi.apply(this,arguments)}(Fe,nr,_t,At))}),(0,An.as)(Ht)}({graphic:Fe,relatedInfos:Ht,layer:Mr},_t);Object.keys(Os).forEach(ri=>{!function mr(Fe,Qe){if(!Qe||!Fe)return;const{features:_t,statsFeatures:At}=Fe,Ht=_t&&_t.value;Qe.relatedFeatures=Ht?Ht.features:[];const nr=At&&At.value;Qe.relatedStatsFeatures=nr?nr.features:[]}(Os[ri]?.value,Ht.get(ri.toString()))})})()}_configureRelatedInfo(Fe,Qe){const{relatedInfos:_t}=this,At=ur(Fe.fieldName);if(!At)return;const{layerId:Ht,fieldName:nr}=At;if(!Ht)return;const Mr=_t.get(Ht.toString())||function St(Fe,Qe){const _t=function Fr(Fe,Qe){if(!Qe.relationships)return null;let _t=null;const{relationships:At}=Qe;return At.some(Ht=>Ht.id===parseInt(Fe,10)&&(_t=Ht,!0)),_t}(Fe,Qe);if(_t)return{url:`${Qe.url}/${_t.relatedTableId}`,sourceSpatialReference:Qe.spatialReference,relation:_t,relatedFields:[],outStatistics:[]}}(Ht,Qe);Mr&&(function Xn({relatedInfo:Fe,fieldName:Qe,fieldInfo:_t}){if(Fe.relatedFields.push(Qe),_t.statisticType){const At=new Bt.Z({statisticType:_t.statisticType,onStatisticField:Qe,outStatisticFieldName:Qe});Fe.outStatistics.push(At)}}({relatedInfo:Mr,fieldName:nr,fieldInfo:Fe}),this.relatedInfos.set(Ht,Mr))}};oo.interceptor=new class jo{constructor(Qe,_t){this.preLayerQueryCallback=Qe,this.preRequestCallback=_t,this.preLayerQueryCallback||(this.preLayerQueryCallback=At=>{}),this.preRequestCallback||(this.preLayerQueryCallback=At=>{})}}(({query:Fe,layer:Qe,method:_t})=>{es({layer:Qe,method:_t,query:Fe,definitionExpression:`${Qe.definitionExpression} ${Qe.serviceDefinitionExpression}`})},({queryPayload:Fe,layer:Qe,method:_t})=>{es({layer:Qe,method:_t,query:Fe,definitionExpression:`${Qe.definitionExpression} ${Qe.serviceDefinitionExpression}`})}),(0,D._)([(0,U.Cb)()],oo.prototype,"_error",void 0),(0,D._)([(0,U.Cb)()],oo.prototype,"_featureAbortController",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"_effectivePopupTemplate",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"_fieldInfoMap",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"_sourceLayer",null),(0,D._)([(0,U.Cb)()],oo.prototype,"abilities",void 0),(0,D._)([(0,de.p)("abilities")],oo.prototype,"castAbilities",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"content",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"contentViewModels",void 0),(0,D._)([(0,U.Cb)({type:Boolean})],oo.prototype,"defaultPopupTemplateEnabled",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"state",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"formattedAttributes",void 0),(0,D._)([(0,U.Cb)({type:ye.Z,value:null})],oo.prototype,"graphic",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"lastEditInfo",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"relatedInfos",void 0),(0,D._)([(0,U.Cb)()],oo.prototype,"spatialReference",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"title",void 0),(0,D._)([(0,U.Cb)()],oo.prototype,"map",null),(0,D._)([(0,U.Cb)({readOnly:!0})],oo.prototype,"waitingForContent",null),(0,D._)([(0,U.Cb)()],oo.prototype,"view",void 0),oo=el=(0,D._)([(0,G.j)(xu)],oo);const tu=oo;T(82255);const rh=Fe=>{let Qe=class extends Fe{constructor(){super(...arguments),this.renderNodeContent=_t=>(0,yn.Qd)(_t)&&!_t.destroyed?(0,Nr.u)("div",{key:_t},_t.render()):_t instanceof HTMLElement?(0,Nr.u)("div",{key:_t,bind:_t,afterCreate:this._attachToNode}):(0,yn.o)(_t)?(0,Nr.u)("div",{key:_t,bind:_t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(_t){_t.appendChild(this)}};return Qe=(0,D._)([(0,G.j)("esri.widgets.Feature.ContentMixin")],Qe),Qe};var tl=T(97059);const aa_contentElement="esri-feature__content-element",ru={title:!0,content:!0,lastEditedInfo:!0};let ko=class extends(rh(me.Z)){constructor(Fe,Qe){super(Fe,Qe),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...ru},this.map=null,this.view=null,this.viewModel=new tu}initialize(){this.own((0,w.YP)(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),w.nn))}loadDependencies(){return T.e(1360).then(T.bind(T,61360))}destroy(){this._destroyContentWidgets()}castVisibleElements(Fe){return{...ru,...Fe}}render(){const{state:Fe}=this.viewModel,Qe=(0,Nr.u)("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===Fe?this.renderError():"loading"===Fe?this.renderLoading():this.renderContentContainer());return(0,Nr.u)("div",{class:this.classes("esri-feature","esri-widget")},Qe)}setActiveMedia(Fe,Qe){this.viewModel.setActiveMedia(Fe,Qe)}nextMedia(Fe){this.viewModel.nextMedia(Fe)}previousMedia(Fe){this.viewModel.previousMedia(Fe)}renderError(){const{messagesCommon:Fe,messages:Qe,visibleElements:_t}=this;return(0,Nr.u)("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},_t.title?(0,Nr.u)("div",{key:"error-title",slot:"title"},Fe.errorMessage):null,(0,Nr.u)("div",{key:"error-message",slot:"message"},Qe.loadingError))}renderLoading(){return(0,Nr.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Nr.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}renderContentContainer(){const{visibleElements:Fe}=this;return Fe.content?(0,Nr.u)("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:Fe,title:Qe}=this;return Fe.title?(0,Nr.u)(bs.X6,{level:this.headingLevel,class:"esri-feature__title",innerHTML:Qe}):null}renderContent(){const Fe=this.viewModel.content,Qe="content";if(!Fe)return null;if(Array.isArray(Fe))return Fe.length?(0,Nr.u)("div",{key:`${Qe}-content-elements`},Fe.map(this.renderContentElement,this)):null;if("string"==typeof Fe){const _t=this._contentWidgets[0];return!_t||_t.destroyed?null:(0,Nr.u)("div",{key:`${Qe}-content`},_t.render())}return this.renderNodeContent(Fe)}renderContentElement(Fe,Qe){const{visibleElements:_t}=this;if("boolean"!=typeof _t.content&&!_t.content[Fe.type])return null;switch(Fe.type){case"attachments":return this.renderAttachments(Qe);case"custom":return this.renderCustom(Fe,Qe);case"fields":return this.renderFields(Qe);case"media":return this.renderMedia(Qe);case"text":return this.renderText(Fe,Qe);case"expression":return this.renderExpression(Qe);default:return null}}renderAttachments(Fe){const Qe=this._contentWidgets[Fe];if(!Qe||Qe.destroyed)return null;const{state:_t,attachmentInfos:At}=Qe.viewModel;return"loading"===_t||At.length>0?(0,Nr.u)("div",{key:this._buildKey("attachments-element",Fe),class:this.classes(aa_contentElement)},Qe.render()):null}renderExpression(Fe){const Qe=this._contentWidgets[Fe];return!Qe||Qe.destroyed?null:(0,Nr.u)("div",{key:this._buildKey("expression-element",Fe),class:aa_contentElement},Qe.render())}renderCustom(Fe,Qe){const{creator:_t}=Fe,At=this._contentWidgets[Qe];return!At||At.destroyed?null:_t?(0,Nr.u)("div",{key:this._buildKey("custom-element",Qe),class:aa_contentElement},At.render()):null}renderFields(Fe){const Qe=this._contentWidgets[Fe];return!Qe||Qe.destroyed?null:(0,Nr.u)("div",{key:this._buildKey("fields-element",Fe),class:aa_contentElement},Qe.render())}renderMedia(Fe){const Qe=this._contentWidgets[Fe];return!Qe||Qe.destroyed?null:(0,Nr.u)("div",{key:this._buildKey("media-element",Fe),class:aa_contentElement},Qe.render())}renderLastEditInfo(){const{visibleElements:Fe,messages:Qe}=this,{lastEditInfo:_t}=this.viewModel;if(!_t||!Fe.lastEditedInfo)return null;const{date:At,user:Ht}=_t,Mr=(0,tl.n)("edit"===_t.type?Ht?Qe.lastEditedByUser:Qe.lastEdited:Ht?Qe.lastCreatedByUser:Qe.lastCreated,{date:At,user:Ht});return(0,Nr.u)("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info",aa_contentElement)},Mr)}renderText(Fe,Qe){const At=this._contentWidgets[Qe];return!At||At.destroyed?null:Fe.text?(0,Nr.u)("div",{key:this._buildKey("text-element",Qe),class:this.classes(aa_contentElement,"esri-feature__text")},At.render()):null}_buildKey(Fe,...Qe){return`${Fe}__${this.get("viewModel.graphic.uid")||"0"}-${Qe.join("-")}`}_destroyContentWidget(Fe){Fe&&(Fe.viewModel=null,!Fe.destroyed&&Fe.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(Fe=>this._destroyContentWidget(Fe)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:Fe,visibleElements:Qe}=this,_t=this.get("viewModel.content"),{contentViewModels:At}=this.viewModel;if(Array.isArray(_t))_t.forEach((Ht,nr)=>{"attachments"===Ht.type&&(this._contentWidgets[nr]=new Oi({displayType:Ht.displayType,headingLevel:Qe.title?Fe+1:Fe,viewModel:At[nr]})),"fields"===Ht.type&&(this._contentWidgets[nr]=new sn({viewModel:At[nr]})),"media"===Ht.type&&(this._contentWidgets[nr]=new kl({viewModel:At[nr]})),"text"===Ht.type&&(this._contentWidgets[nr]=new er({viewModel:At[nr]})),"custom"===Ht.type&&(this._contentWidgets[nr]=new er({viewModel:At[nr]})),"expression"===Ht.type&&(this._contentWidgets[nr]=new eh({viewModel:At[nr]}))},this);else{const Ht=At[0];Ht&&!Ht.destroyed&&(this._contentWidgets[0]=new er({viewModel:Ht}))}this.scheduleRender()}};(0,D._)([(0,ce.B)("viewModel.graphic")],ko.prototype,"graphic",void 0),(0,D._)([(0,ce.B)("viewModel.defaultPopupTemplateEnabled")],ko.prototype,"defaultPopupTemplateEnabled",void 0),(0,D._)([(0,U.Cb)()],ko.prototype,"headingLevel",void 0),(0,D._)([(0,U.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ko.prototype,"label",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/Feature/t9n/Feature")],ko.prototype,"messages",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/t9n/common")],ko.prototype,"messagesCommon",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/support/t9n/uriUtils")],ko.prototype,"messagesURIUtils",void 0),(0,D._)([(0,ce.B)("viewModel.spatialReference")],ko.prototype,"spatialReference",void 0),(0,D._)([(0,ce.B)("viewModel.title")],ko.prototype,"title",void 0),(0,D._)([(0,U.Cb)()],ko.prototype,"visibleElements",void 0),(0,D._)([(0,de.p)("visibleElements")],ko.prototype,"castVisibleElements",null),(0,D._)([(0,ce.B)("viewModel.map")],ko.prototype,"map",void 0),(0,D._)([(0,ce.B)("viewModel.view")],ko.prototype,"view",void 0),(0,D._)([(0,U.Cb)({type:tu})],ko.prototype,"viewModel",void 0),ko=(0,D._)([(0,G.j)("esri.widgets.Feature")],ko);const Dd=ko;var Lc,T_=T(61885);const Ql=Symbol("anchorHandles");let pl=class extends T_.Z.EventedAccessor{constructor(Fe){super(Fe),this[Lc]=new se.Z,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Ql].add([(0,w.gx)(()=>(0,le.yw)(this.screenLocationEnabled?this.view:null,Qe=>[Qe.size,"3d"===Qe.type?Qe.camera:Qe.viewpoint]),()=>this.notifyChange("screenLocation")),(0,w.YP)(()=>this.screenLocation,(Qe,_t)=>{(0,le.pC)(Qe)&&(0,le.pC)(_t)&&this.emit("view-change")})])}destroy(){this.view=null,this[Ql]=(0,le.SC)(this[Ql])}get screenLocation(){const{location:Fe,view:Qe,screenLocationEnabled:_t}=this;return _t&&(0,le.pC)(Fe)&&(0,le.pC)(Qe)&&Qe.ready?Qe.toScreen(Fe):null}};Lc=Ql,(0,D._)([(0,U.Cb)()],pl.prototype,"location",void 0),(0,D._)([(0,U.Cb)()],pl.prototype,"screenLocation",null),(0,D._)([(0,U.Cb)()],pl.prototype,"screenLocationEnabled",void 0),(0,D._)([(0,U.Cb)()],pl.prototype,"view",void 0),pl=(0,D._)([(0,G.j)("esri.widgets.support.AnchorElementViewModel")],pl);const ed=pl;let ql=class extends ed{constructor(Fe){super(Fe),this.visible=!1}};(0,D._)([(0,U.Cb)()],ql.prototype,"visible",void 0),ql=(0,D._)([(0,G.j)("esri.widgets.CompassViewModel")],ql);const wc=ql;let fl=class extends me.Z{constructor(Fe,Qe){super(Fe,Qe),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new wc,this.visible=!1}initialize(){this.own([(0,w.YP)(()=>this.visible,Fe=>this._visibleChange(Fe))])}destroy(){this._animationPromise=null}show(Fe){const{location:Qe,promise:_t}=Fe;Qe&&(this.viewModel.location=Qe),this.visible=!0,_t&&_t.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){const{visible:Fe}=this,{screenLocation:Qe}=this.viewModel,_t=!!Qe,nr={"esri-spinner--start":Fe&&_t,"esri-spinner--finish":!Fe&&_t},Mr=this._getPositionStyles();return(0,Nr.u)("div",{class:this.classes("esri-spinner",nr),styles:Mr})}_visibleChange(Fe){if(Fe)return void(this.viewModel.screenLocationEnabled=!0);const Qe=(0,An.e4)(this._animationDelay);this._animationPromise=Qe,Qe.catch(()=>{}).then(()=>{this._animationPromise===Qe&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:Fe,view:Qe}=this.viewModel;if((0,le.Wi)(Qe)||(0,le.Wi)(Fe))return{};const{padding:_t}=Qe;return{left:Fe.x-_t.left+"px",top:Fe.y-_t.top+"px"}}};(0,D._)([(0,ce.B)("viewModel.location")],fl.prototype,"location",void 0),(0,D._)([(0,ce.B)("viewModel.view")],fl.prototype,"view",void 0),(0,D._)([(0,U.Cb)({type:wc})],fl.prototype,"viewModel",void 0),(0,D._)([(0,ce.B)("viewModel.visible")],fl.prototype,"visible",void 0),fl=(0,D._)([(0,G.j)("esri.widgets.Spinner")],fl);const xd=fl;T(20383);var Rc=T(46367),Sd=T(44917),Ad=T(59397),ec=T(48753),Su=T(10671),su=T(3854),Ld=T(56846),iu=T(93579);const sl_iconZoom="esri-icon-zoom-in-magnifying-glass",il=new ec.Z({id:"zoom-to-feature",title:"{messages.zoom}",className:sl_iconZoom}),xo=new ec.Z({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),va=new ec.Z({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:sl_iconZoom}),_c=new ec.Z({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),mt=ee.Z.getLogger("esri.widgets.Popup.PopupViewModel"),ct=Fe=>{const{event:Qe,view:_t}=Fe,{action:At}=Qe,Ht=_t&&_t.popup;if(!At)return Promise.reject(new _e.Z("trigger-action:missing-arguments","Event has no action"));if(!Ht)return Promise.reject(new _e.Z("trigger-action:missing-arguments","view.popup is missing"));const{disabled:nr,id:Mr}=At;if(!Mr)return Promise.reject(new _e.Z("trigger-action:invalid-action","action.id is missing"));if(nr)return Promise.reject(new _e.Z("trigger-action:invalid-action","Action is disabled"));if(Mr===il.id)return function Ar(Fe){return Xr.apply(this,arguments)}(Ht.viewModel).catch(An.H9);if(Mr===va.id)return function Es(Fe){return ei.apply(this,arguments)}(Ht.viewModel);if(Mr===_c.id)return Ht.featureMenuOpen=!Ht.featureMenuOpen,Ht.viewModel.browseClusterEnabled=!Ht.viewModel.browseClusterEnabled,Promise.resolve();if(Ht.viewModel.browseClusterEnabled=!1,Mr===xo.id){Ht.close();const{selectedFeature:Ur}=Ht;if(!Ur)return Promise.reject(new _e.Z(`trigger-action:${xo.id}`,"selectedFeature is required",{selectedFeature:Ur}));const{sourceLayer:rs}=Ur;return rs?rs.remove(Ur):_t.graphics.remove(Ur),Promise.resolve()}return Promise.resolve()};function Ot(Fe){const{selectedFeature:Qe,location:_t,view:At}=Fe;return At?"3d"===At.type?Qe||_t:Fe.get("selectedFeature.geometry")||_t:null}function Kt(Fe){return Fe?.isAggregate&&"cluster"===Fe?.sourceLayer?.featureReduction?.type}function fr(Fe,Qe){if("3d"!==Qe?.type||!Fe||"esri.Graphic"!==Fe.declaredClass)return!0;const _t=Qe.getViewForGraphic(Fe);if(_t&&"whenGraphicBounds"in _t){let At=!1;return _t.whenGraphicBounds(Fe,{useViewElevation:!0}).then(Ht=>{At=!Ht||!Ht.boundingBox||Ht.boundingBox[0]===Ht.boundingBox[3]&&Ht.boundingBox[1]===Ht.boundingBox[4]&&Ht.boundingBox[2]===Ht.boundingBox[5]}).catch(()=>{const Ht=new _e.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:Fe});mt.error(Ht)}),At}return!0}function Xr(){return(Xr=(0,Z.Z)(function*(Fe){const{location:Qe,selectedFeature:_t,view:At,zoomFactor:Ht}=Fe,nr=Ot(Fe);if(!nr){const Os=new _e.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:nr,view:At});throw mt.error(Os),Os}const Mr=At.scale/Ht,Ur=Fe.get("selectedFeature.geometry")||Qe,rs=Ur&&"point"===Ur.type&&fr(_t,At);il.active=!0,il.disabled=!0;try{yield Fe.view.goTo({target:nr,scale:rs?Mr:void 0})}finally{il.active=!1,il.disabled=!1,Fe.zoomToLocation=null,rs&&(Fe.location=Ur)}})).apply(this,arguments)}function ei(){return(ei=(0,Z.Z)(function*(Fe){const{selectedFeature:Qe,view:_t}=Fe;if("2d"!==_t?.type){const Ur=new _e.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:_t});throw mt.error(Ur),Ur}if(!Kt(Qe)){const Ur=new _e.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:Qe});throw mt.error(Ur),Ur}const At=Qe.sourceLayer,Ht=yield _t.whenLayerView(At),nr=Ht.createQuery();nr.aggregateIds=[Qe.getObjectId()],va.active=!0,va.disabled=!0;const{extent:Mr}=yield Ht.queryExtent(nr);yield _t.goTo({target:Mr}),va.active=!1,va.disabled=!1})).apply(this,arguments)}function Qs(){return(Qs=(0,Z.Z)(function*(Fe){const{selectedFeature:Qe,view:_t}=Fe,At=Qe.sourceLayer,Ht=yield _t.whenLayerView(At),nr=Ht.createQuery();nr.aggregateIds=[Qe.getObjectId()];const{extent:Mr}=yield Ht.queryExtent(nr);Fe.selectedClusterBoundaryFeature.geometry=Mr,_t.graphics.add(Fe.selectedClusterBoundaryFeature)})).apply(this,arguments)}function ln(){return(ln=(0,Z.Z)(function*(Fe){const{selectedFeature:Qe,view:_t}=Fe,At=Qe.sourceLayer,Ht=yield _t.whenLayerView(At),nr=Ht.createQuery();nr.aggregateIds=[Qe.getObjectId()],_c.active=!0,_c.disabled=!0;const{features:Mr}=yield Ht.queryFeatures(nr);_c.active=!1,_c.disabled=!1,_t.popup.open({features:[Qe].concat(Mr),featureMenuOpen:!0})})).apply(this,arguments)}var wn=T(67436),Qi=T(88493);const go=re.Z.ofType({key:"type",defaultKeyValue:"button",base:Ad.Z,typeMap:{button:ec.Z,toggle:Su.Z}}),wd="esri.widgets.Popup.PopupViewModel",pc=ee.Z.getLogger(wd);let On=class extends((0,wn._)(ed)){constructor(Fe){super(Fe),this._handles=new se.Z,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new go,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ye.Z({symbol:new Qi.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(Fe=>Fe.waitingForContent)}initialize(){this._handles.add([(0,w.YP)(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),(0,w.YP)(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),(0,w.YP)(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),(0,w.YP)(()=>this.view?.animation?.state,Fe=>this._animationStateChange(Fe)),(0,w.YP)(()=>this.location,Fe=>this._locationChange(Fe)),(0,w.YP)(()=>this.selectedFeature,Fe=>this._selectedFeatureChange(Fe)),(0,w.YP)(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),(0,w.YP)(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),(0,w.YP)(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",Fe=>ct({event:Fe,view:this.view})),(0,w.gx)(()=>!this.waitingForResult,()=>this._waitingForResultChange(),w.Z_),(0,w.YP)(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),(0,w.YP)(()=>this.view?.scale,()=>this._viewScaleChange()),(0,w.gx)(()=>!this.visible,()=>this.browseClusterEnabled=!1),(0,w.YP)(()=>this.browseClusterEnabled,Fe=>Fe?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const Fe=this._get("allActions")||new go;Fe.removeAll();const{actions:Qe,defaultActions:_t,defaultPopupTemplateEnabled:At,includeDefaultActions:Ht,selectedFeature:nr}=this,Mr=Ht?_t.concat(Qe):Qe,Ur=nr&&("function"==typeof nr.getEffectivePopupTemplate&&nr.getEffectivePopupTemplate(At)||nr.popupTemplate),rs=Ur&&Ur.actions,Os=Ur&&Ur.overwriteActions?rs:rs?rs.concat(Mr):Mr;return Os&&Os.filter(Boolean).forEach(ri=>Fe.add(ri)),Fe}get defaultActions(){const Fe=this._get("defaultActions")||new go;return Fe.removeAll(),Fe.addMany(Kt(this.selectedFeature)?[va.clone(),_c.clone()]:[il.clone()]),Fe}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(Fe){const Qe=Fe||[];this._set("features",Qe);const{pendingPromisesCount:_t,promiseCount:At,selectedFeatureIndex:Ht}=this,nr=At&&Qe.length;nr&&_t&&-1===Ht?this.selectedFeatureIndex=0:nr&&-1!==Ht||(this.selectedFeatureIndex=Qe.length?0:-1)}get location(){return this._get("location")||null}set location(Fe){const Qe=this.get("view.spatialReference.isWebMercator");Fe&&Fe.get("spatialReference.isWGS84")&&Qe&&(Fe=(0,Rc.$)(Fe)),this._set("location",Fe)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(Fe){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(Fe)||!Fe.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",Fe),(Fe=Fe.slice(0)).forEach(Qe=>{this._pendingPromises.add(Qe),Qe.then(Ht=>{this._pendingPromises.has(Qe)&&this._updateFeatures(Ht),this._updatePendingPromises(Qe)},()=>this._updatePendingPromises(Qe))}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:Fe,selectedFeatureIndex:Qe}=this;return-1===Qe?null:Fe[Qe]||null}get selectedFeatureIndex(){const Fe=this._get("selectedFeatureIndex");return"number"==typeof Fe?Fe:-1}set selectedFeatureIndex(Fe){const{featureCount:Qe}=this;Fe=isNaN(Fe)||Fe<-1||!Qe?-1:(Fe+Qe)%Qe,this.activeFeature=null,this._set("selectedFeatureIndex",Fe)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:Fe}=this,Qe=Ot(this);if(!Qe){const _t=new _e.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:Qe,view:Fe});return pc.error(_t),Promise.reject(_t)}return this.callGoTo({target:{target:Qe,scale:Fe.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(Fe,Qe){const{view:_t}=this;if(!_t||!Fe){const At=new _e.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:Fe,view:_t});return pc.error(At),Promise.reject(At)}return _t.fetchPopupFeatures(Fe,{event:Qe&&Qe.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:Qe&&Qe.signal})}open(Fe){const Qe={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...Fe,visible:!0},{fetchFeatures:_t}=Qe;delete Qe.fetchFeatures,_t&&this._setFetchFeaturesPromises(Qe.location);const At=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const Ht of At)delete Qe[Ht];this.set(Qe)}triggerAction(Fe){const Qe=this.allActions.getItemAt(Fe);Qe&&!Qe.disabled&&this.emit("trigger-action",{action:Qe})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function Un(Fe){const Qe=Fe.features.filter(_t=>Kt(_t));Qe.length&&(Fe.features=Qe)})(this),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var Fe=this;return(0,Z.Z)(function*(){const{view:Qe,selectedFeature:_t}=Fe;"2d"===Qe?.type?Kt(_t)?(yield function Zs(Fe){return Qs.apply(this,arguments)}(Fe),yield function ji(Fe){return ln.apply(this,arguments)}(Fe)):pc.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",_t):pc.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",_t)})()}_animationStateChange(Fe){this.zoomToLocation||(il.disabled="waiting-for-target"===Fe)}_clearBrowsedClusterGraphics(){const Fe=this.view?.graphics;Fe&&(Fe.remove(this.selectedClusterBoundaryFeature),Fe.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Kt(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(Fe){const{selectedFeature:Qe,updateLocationEnabled:_t}=this;_t&&Fe&&(!Qe||Qe.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:Fe,featureCount:Qe,featurePage:_t,featuresPerPage:At,featureViewModels:Ht}=this;if(null===_t)return;const nr=((_t-1)*At+Qe)%Qe;Ht.slice(nr,nr+At).forEach((Ur,rs)=>{Ur&&!Ur.graphic&&(Ur.graphic=Fe[nr+rs])})}_selectedFeatureChange(Fe){var Qe=this;return(0,Z.Z)(function*(){if(!Fe)return;const{location:_t,updateLocationEnabled:At,view:Ht}=Qe;if(Qe.browseClusterEnabled)return Qe._selectedClusterFeature&&(Ht.graphics.remove(Qe._selectedClusterFeature),Qe._selectedClusterFeature=null),Kt(Fe)?void 0:(Fe.symbol=yield(0,su.zd)(Fe),Qe._selectedClusterFeature=Fe,void Ht.graphics.add(Qe._selectedClusterFeature));!At&&_t||!Fe.geometry?At&&!Fe.geometry&&Qe.centerAtLocation().then(()=>{Qe.location=Ht.center.clone()}):Qe.location=(0,le.Wg)(Qe._getPointFromGeometry(Fe.geometry))})()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(Fe){return this._fetchFeaturesWithController(this._getScreenPoint(Fe||this.location)).then(Qe=>{const{clientOnlyGraphics:_t,promisesPerLayerView:At}=Qe,Ht=Promise.resolve(_t),nr=At.map(Mr=>Mr.promise);this.promises=[Ht,...nr]})}_destroyFeatureVMs(){this.featureViewModels.forEach(Fe=>Fe&&!Fe.destroyed&&Fe.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:Fe,features:Qe,featureViewModels:_t}=this;if(Kt(Fe)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!Qe||!Qe.length)return;const At=_t.slice(0),Ht=[];Qe.forEach((nr,Mr)=>{if(!nr)return;let Ur=null;if(At.some((rs,Os)=>(rs&&rs.graphic===nr&&(Ur=rs,At.splice(Os,1)),!!Ur)),Ur)Ht[Mr]=Ur;else{const rs=new tu({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:nr===Fe?nr:null,map:this.view?.map,view:this.view});Ht[Mr]=rs}}),At.forEach(nr=>nr&&!nr.destroyed&&nr.destroy()),this._set("featureViewModels",Ht)}_getScreenPoint(Fe){const{view:Qe}=this;return Qe&&Fe&&"function"==typeof Qe.toScreen?Qe.toScreen(Fe):null}_autoOpenEnabledChange(){const Fe="auto-fetch-features",{_handles:Qe,autoOpenEnabled:_t}=this;if(Qe.remove(Fe),_t&&this.view){const At=this.view.on("click",Ht=>{"mouse"===Ht.pointerType&&0!==Ht.button||this._fetchFeaturesAndOpen(Ht)},Ld.f.WIDGET);Qe.add(At,Fe)}}_cancelFetchingFeatures(){const Fe=this._fetchFeaturesController;Fe&&Fe.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(Fe,Qe){this._cancelFetchingFeatures();const _t=new AbortController,{signal:At}=_t;this._fetchFeaturesController=_t,this.notifyChange("waitingForResult");const Ht=this.fetchFeatures(Fe,{signal:At,event:Qe});return Ht.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),Ht}_fetchFeaturesAndOpen(Fe){const{screenPoint:Qe,mapPoint:_t}=Fe,{view:At}=this;this._fetchFeaturesWithController(Qe,Fe).then(Ht=>{const{clientOnlyGraphics:nr,promisesPerLayerView:Mr,location:Ur}=Ht,rs=[Promise.resolve(nr),...Mr.map(Os=>Os.promise)];return At.popup.open({location:Ur||_t,promises:rs}),Ht})}_updatePendingPromises(Fe){Fe&&this._pendingPromises.has(Fe)&&(this._pendingPromises.delete(Fe),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(Fe){return(0,le.Wi)(Fe)?null:"point"===Fe.type?Fe:"extent"===Fe.type?Fe.center:"polygon"===Fe.type?Fe.centroid:"multipoint"===Fe.type||"polyline"===Fe.type?Fe.extent.center:null}_getLayerView(Fe,Qe){return(0,Z.Z)(function*(){return yield Fe.when(),Fe.whenLayerView(Qe)})()}_getHighlightLayer(Fe){const{layer:Qe,sourceLayer:_t}=Fe;return"map-notes"===_t?.type||"subtype-group"===_t?.type?_t:Qe}_getHighlightTarget(Fe,Qe){const _t="imagery"===Qe.type?void 0:"objectIdField"in Qe&&Qe.objectIdField,At=Fe.attributes;return At&&_t&&At[_t]||Fe}_highlightActiveFeature(){var Fe=this;return(0,Z.Z)(function*(){const Qe="highlight-active-feature";Fe._handles.remove(Qe);const{highlightEnabled:_t,view:At,activeFeature:Ht,visible:nr}=Fe;if(!(Ht&&At&&_t&&nr))return;const Mr=Fe._getHighlightLayer(Ht);if(!(Mr&&Mr instanceof Sd.Z))return;const Ur=Fe._getLayerView(At,Mr);Fe._highlightActiveFeaturePromise=Ur;const rs=yield Ur;if(!(rs&&(0,iu.tl)(rs)&&Fe._highlightActiveFeaturePromise===Ur&&Fe.activeFeature&&Fe.highlightEnabled))return;const Os=rs.highlight(Fe._getHighlightTarget(Ht,Mr));Fe._handles.add(Os,Qe)})()}_highlightSelectedFeature(){var Fe=this;return(0,Z.Z)(function*(){const Qe="highlight-selected-feature";Fe._handles.remove(Qe);const{selectedFeature:_t,highlightEnabled:At,view:Ht,visible:nr}=Fe;if(!(_t&&Ht&&At&&nr))return;const Mr=Fe._getHighlightLayer(_t);if(!(Mr&&Mr instanceof Sd.Z))return;const Ur=Fe._getLayerView(Ht,Mr);Fe._highlightSelectedFeaturePromise=Ur;const rs=yield Ur;if(!(rs&&(0,iu.tl)(rs)&&Fe._highlightSelectedFeaturePromise===Ur&&Fe.selectedFeature&&Fe.highlightEnabled&&Fe.visible))return;const Os=rs.highlight(Fe._getHighlightTarget(_t,Mr));Fe._handles.add(Os,Qe)})()}_updateFeatures(Fe){const{features:Qe}=this;if(!Fe||!Fe.length)return;if(!Qe.length)return void(this.features=Fe);const _t=Fe.filter(At=>!Qe.includes(At));this.features=Qe.concat(_t)}};(0,D._)([(0,U.Cb)()],On.prototype,"featurePage",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"isLoadingFeature",null),(0,D._)([(0,U.Cb)({type:go})],On.prototype,"actions",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"active",null),(0,D._)([(0,U.Cb)()],On.prototype,"activeFeature",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"allActions",null),(0,D._)([(0,U.Cb)({type:Boolean})],On.prototype,"defaultPopupTemplateEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"autoCloseEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"autoOpenEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"browseClusterEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"content",void 0),(0,D._)([(0,U.Cb)({type:go,readOnly:!0})],On.prototype,"defaultActions",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"featureCount",null),(0,D._)([(0,U.Cb)()],On.prototype,"features",null),(0,D._)([(0,U.Cb)()],On.prototype,"featuresPerPage",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"featureViewModelAbilities",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"featureViewModels",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"highlightEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"includeDefaultActions",void 0),(0,D._)([(0,U.Cb)({type:Kn.Z})],On.prototype,"location",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"pendingPromisesCount",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"selectedClusterBoundaryFeature",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"waitingForResult",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"promiseCount",null),(0,D._)([(0,U.Cb)()],On.prototype,"promises",null),(0,D._)([(0,U.Cb)({value:null,readOnly:!0})],On.prototype,"selectedFeature",null),(0,D._)([(0,U.Cb)({value:-1})],On.prototype,"selectedFeatureIndex",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"selectedFeatureViewModel",null),(0,D._)([(0,U.Cb)({readOnly:!0})],On.prototype,"state",null),(0,D._)([(0,U.Cb)()],On.prototype,"title",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"updateLocationEnabled",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"view",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"visible",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"zoomFactor",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"zoomToLocation",void 0),(0,D._)([(0,U.Cb)()],On.prototype,"centerAtLocation",null),On=(0,D._)([(0,G.j)(wd)],On);const wh=On;var ja=T(24940);const sd="selected-index",id="popup-spinner",ks_shadow="esri-popup--shadow",ks_button="esri-popup__button",ks_icon="esri-popup__icon",O_={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Ih="esri-popup";function xa(Fe,Qe){return void 0===Qe?`${Ih}__${Fe}`:`${Ih}__${Fe}-${Qe}`}const Uh="esri.widgets.Popup",P_=ee.Z.getLogger(Uh),sh={closeButton:!0,featureNavigation:!0};let Hi=class extends(rh(me.Z)){constructor(Fe,Qe){super(Fe,Qe),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new se.Z,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([_t])=>{_t?.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=ne(()=>this._displaySpinner(),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new wh,this.visible=null,this.visibleElements={...sh},this._addSelectedFeatureIndexHandle(),this.own([(0,w.YP)(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),(0,w.YP)(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),(0,w.YP)(()=>this.viewModel?.screenLocation,(_t,At)=>{!!_t!=!!At&&this.reposition()}),(0,w.YP)(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),(0,w.YP)(()=>this.spinnerEnabled,_t=>this._spinnerEnabledChange(_t)),(0,w.YP)(()=>this.viewModel?.view?.size,(_t,At)=>this._updateDockEnabledForViewSize(_t,At)),(0,w.YP)(()=>this.viewModel?.view,(_t,At)=>this._viewChange(_t,At)),(0,w.YP)(()=>this.viewModel?.view?.ready,(_t,At)=>this._viewReadyChange(_t,At)),(0,w.YP)(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,w.YP)(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),(0,w.YP)(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),(0,w.gx)(()=>!this.collapsed,()=>{"xsmall"===this.viewModel?.view?.widthBreakpoint&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),(0,w.on)(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),(0,w.YP)(()=>this.viewModel?.allActions,()=>this._watchActions(),w.nn),(0,w.YP)(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop())])}destroy(){this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){return!!(this.selectedFeatureWidget?this.selectedFeatureWidget?.viewModel?.waitingForContent||"error"===this.selectedFeatureWidget?.viewModel?.state||this.selectedFeatureWidget?.viewModel?.content:this.viewModel?.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(Fe){this._set("actionsMenuOpen",!!Fe)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||O_}set dockOptions(Fe){const Qe={...O_},_t=this.get("viewModel.view.breakpoints"),At={};_t&&(At.width=_t.xsmall,At.height=_t.xsmall);const Ht={...Qe,...Fe},nr={...Qe.breakpoint,...At},{breakpoint:Mr}=Ht;!0===Mr?Ht.breakpoint=nr:"object"==typeof Mr&&(Ht.breakpoint={...nr,...Mr}),this._set("dockOptions",Ht),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:Fe,visibleElements:Qe,headingLevel:_t}=this,{selectedFeatureViewModel:At}=this.viewModel,Ht={...Qe,title:!1};return At?(Fe?(Fe.viewModel=At,Fe.visibleElements=Ht):this._feature=new Dd({headingLevel:_t+1,viewModel:At,visibleElements:Ht}),this._feature):null}castVisibleElements(Fe){return{...sh,...Fe}}blur(){const{active:Fe}=this.viewModel;Fe||P_.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(Fe,Qe){return this.viewModel.fetchFeatures(Fe,Qe)}focus(){const{active:Fe}=this.viewModel;Fe||P_.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(Fe){this._handles.remove(sd);const At={collapsed:!!Fe&&!!Fe.collapsed,actionsMenuOpen:!!Fe&&!!Fe.actionsMenuOpen,featureMenuOpen:!!Fe&&!!Fe.featureMenuOpen};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(At.collapsed=!0),this.set(At),this.viewModel.open(Fe),this._shouldFocus(Fe),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(Fe){this.viewModel.triggerAction(Fe)}render(){const{actionsMenuOpen:Fe,dockEnabled:Qe,featureMenuVisible:_t,dividedActions:At,currentAlignment:Ht,currentDockPosition:nr}=this,{active:Mr}=this.viewModel,{menuActions:Ur}=At,vi=this.selectedFeature?.layer?.title,_n=this.selectedFeature?.layer?.id;return(0,Nr.u)("div",{class:this.classes("esri-popup",{"esri-popup--aligned-top-center":"top-center"===Ht,"esri-popup--aligned-bottom-center":"bottom-center"===Ht,"esri-popup--aligned-top-left":"top-left"===Ht,"esri-popup--aligned-bottom-left":"bottom-left"===Ht,"esri-popup--aligned-top-right":"top-right"===Ht,"esri-popup--aligned-bottom-right":"bottom-right"===Ht,"esri-popup--is-docked":Mr&&Qe,[ks_shadow]:Mr&&!Qe,"esri-popup--is-docked-top-left":"top-left"===nr,"esri-popup--is-docked-top-center":"top-center"===nr,"esri-popup--is-docked-top-right":"top-right"===nr,"esri-popup--is-docked-bottom-left":"bottom-left"===nr,"esri-popup--is-docked-bottom-center":"bottom-center"===nr,"esri-popup--is-docked-bottom-right":"bottom-right"===nr,"esri-popup--feature-menu-open":_t,"esri-popup--actions-menu-open":Mr&&Ur.length>1&&Fe}),role:"presentation","data-layer-title":vi,"data-layer-id":_n,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Mr?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes(ks_icon,"esri-icon-loading-indicator","esri-rotating")})}renderNavigationLoading(){const{messagesCommon:Fe}=this;return this.viewModel.pendingPromisesCount?(0,Nr.u)("div",{key:xa("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":Fe.loading,title:Fe.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const Fe=(0,Ys.dZ)(this.container);return(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes(ks_icon,{"esri-icon-right-triangle-arrow":Fe,"esri-popup__pagination-previous-icon--rtl":Fe,"esri-icon-left-triangle-arrow":!Fe,"esri-popup__pagination-previous-icon":!Fe})})}renderPreviousButton(){const{messages:Fe}=this;return(0,Nr.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ks_button,"esri-popup__pagination-previous"),"aria-label":Fe.previous,title:Fe.previous},this.renderPreviousIcon())}renderNextIcon(){const Fe=(0,Ys.dZ)(this.container);return(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes(ks_icon,{"esri-icon-left-triangle-arrow":Fe,"esri-popup__pagination-next-icon--rtl":Fe,"esri-icon-right-triangle-arrow":!Fe,"esri-popup__pagination-next-icon":!Fe})})}renderNextButton(){const{messages:Fe}=this;return(0,Nr.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ks_button,"esri-popup__pagination-next"),"aria-label":Fe.next,title:Fe.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:Fe,featureMenuId:Qe,messagesCommon:_t}=this,{featureCount:At,selectedFeatureIndex:Ht}=this.viewModel;return(0,Nr.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ks_button,"esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":Qe,"aria-expanded":Fe.toString(),"aria-label":_t.menu,title:_t.menu},this._getPageText(At,Ht))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:Fe}=this,Qe=this._wouldDockTo();return(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes({"esri-icon-minimize":Fe,"esri-popup__icon--dock-icon":!Fe,"esri-icon-dock-right":!Fe&&("top-right"===Qe||"bottom-right"===Qe),"esri-icon-dock-left":!Fe&&("top-left"===Qe||"bottom-left"===Qe),"esri-icon-maximize":!Fe&&"top-center"===Qe,"esri-icon-dock-bottom":!Fe&&"bottom-center"===Qe},ks_icon)})}renderDockButton(){const{dockEnabled:Fe,messages:Qe}=this,_t=this.viewModel?.view?.widthBreakpoint,At=Fe?Qe.undock:Qe.dock;return"xsmall"!==_t&&this.dockOptions?.buttonEnabled?(0,Nr.u)("div",{role:"button","aria-label":At,title:At,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ks_button,"esri-popup__button--dock")},this.renderDockIcon()):null}renderTitle(){const{title:Fe}=this.viewModel,{titleId:Qe,collapsible:_t,contentCollapsed:At,messagesCommon:Ht}=this,nr={"esri-popup__header-container--button":_t},Mr=(0,Nr.u)(bs.X6,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:Fe}),Ur=_t?(0,Nr.u)("button",{key:`${Fe}--collapsible`,id:Qe,title:At?Ht.expand:Ht.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",nr),"aria-expanded":At?"false":"true",onclick:this._toggleCollapsed,type:"button"},Mr):(0,Nr.u)("div",{key:Fe,id:Qe,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",nr)},Mr);return Fe?Ur:null}renderCloseIcon(){return(0,Nr.u)("span",{"aria-hidden":"true",class:this.classes(ks_icon,"esri-icon-close")})}renderCloseButton(){const{visibleElements:Fe,messagesCommon:Qe}=this;return Fe.closeButton?(0,Nr.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ks_button,"aria-label":Qe.close,title:Qe.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return(0,Nr.u)("header",{class:"esri-popup__header"},this.renderTitle(),(0,Nr.u)("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:Fe,hasContent:Qe,contentCollapsed:_t}=this,{content:At}=this.viewModel;return Qe&&!_t?(0,Nr.u)("article",{key:At,enterAnimation:this._createFeatureUpdatedAnimation(),id:Fe,class:"esri-popup__content"},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:Fe,actionsMenuButtonId:Qe,actionsMenuOpen:_t,dividedActions:At,messagesCommon:Ht}=this,nr=_t?Ht.close:Ht.open,{menuActions:Mr}=At;return Mr.length?(0,Nr.u)("div",{key:xa("actions-menu-button"),class:this.classes(ks_button,"esri-popup__actions-menu-button"),role:"button",id:Qe,"aria-haspopup":"true","aria-controls":_t?Fe:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":nr,title:nr},(0,Nr.u)("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null}renderMenuActions(){const{actionsMenuId:Fe,actionsMenuButtonId:Qe,actionsMenuOpen:_t,dividedActions:At}=this,{menuActions:Ht}=At;return Ht.length&&_t?(0,Nr.u)("ul",{id:Fe,role:"menu","aria-labelledby":Qe,key:xa("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},Ht.toArray().map(nr=>this.renderAction({action:nr,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:Fe}=this.dividedActions;return!!Fe.length&&Fe.toArray().map(Qe=>this.renderAction({action:Qe,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:Fe,menuActions:Qe}=this.dividedActions,_t=!!Fe.length,At=!!Qe.length;return _t||At?(0,Nr.u)("div",{key:"inline-actions-container","data-inline-actions":_t.toString(),"data-menu-actions":At.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?(0,Nr.u)("section",{key:xa("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:Fe,dividedActions:Qe}=this,{inlineActions:_t,menuActions:At}=Qe,Ht=!!_t.length,Mr={"esri-popup__footer--has-pagination":Fe,"esri-popup__footer--has-actions":Ht,"esri-popup__footer--has-actions-menu":!!At.length};return Fe||Ht?(0,Nr.u)("div",{key:xa("feature-buttons"),class:this.classes("esri-popup__footer",Mr)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:Fe}=this,{featureViewModels:Qe,isLoadingFeature:_t}=this.viewModel,At=(0,tl.n)(Fe.selectedFeatures,{total:Qe.length});return(0,Nr.u)("section",{key:xa("menu"),class:"esri-popup__feature-menu"},(0,Nr.u)("strong",{class:"esri-popup__feature-menu-header"},At),(0,Nr.u)("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:Ys.Yo},this.renderFeatureMenu(),(0,Nr.u)("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),_t?(0,Nr.u)("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:(0,Nr.u)("div",{key:xa("pointer"),class:"esri-popup__pointer",role:"presentation"},(0,Nr.u)("div",{class:this.classes("esri-popup__pointer-direction",ks_shadow)}))}renderMainContainer(){const{dockEnabled:Fe,currentAlignment:Qe,currentDockPosition:_t,titleId:At,contentId:Ht,collapsible:nr,hasContent:Mr,contentCollapsed:Ur,visibleElements:rs}=this,{title:Os}=this.viewModel,ri="bottom-left"===Qe||"bottom-center"===Qe||"bottom-right"===Qe||"top-left"===_t||"top-center"===_t||"top-right"===_t,vi="top-left"===Qe||"top-center"===Qe||"top-right"===Qe||"bottom-left"===_t||"bottom-center"===_t||"bottom-right"===_t;return(0,Nr.u)("div",{class:this.classes("esri-popup__main-container","esri-widget",{[ks_shadow]:Fe,"esri-popup--is-collapsible":nr,"esri-popup--is-collapsed":Ur}),tabIndex:rs.closeButton?null:-1,role:"dialog","aria-labelledby":Os?At:"","aria-describedby":Mr&&!Ur?Ht:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},ri?this.renderFooter():null,ri?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),vi?this.renderFooter():null,vi?this.renderFeatureMenuContainer():null)}renderContent(){const Fe=this.viewModel?.content;return Fe?"string"==typeof Fe?(0,Nr.u)("div",{key:Fe,innerHTML:Fe}):this.renderNodeContent(Fe):null}renderActionText(Fe){return(0,Nr.u)("span",{key:"text",class:"esri-popup__action-text"},Fe)}renderActionIcon(Fe){const Qe=this._getActionClass(Fe),_t=this._getActionImage(Fe),At={"esri-icon-loading-indicator":Fe.active,"esri-rotating":Fe.active,[ks_icon]:!!Qe,"esri-popup__action-image":!Fe.active&&!!_t};return Qe&&(At[Qe]=!Fe.active),(0,Nr.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(ks_icon,At),styles:this._getIconStyles(_t)})}renderAction(Fe){const{action:Qe,type:_t}=Fe,At=this._getActionTitle(Qe),Ht={"esri-popup__action":"toggle"!==Qe.type,"esri-popup__action-toggle":"toggle"===Qe.type,"esri-popup__action-toggle--on":"toggle"===Qe.type&&Qe.value,"esri-popup__button--disabled":Qe.disabled},nr=[this.renderActionIcon(Qe),this.renderActionText(At)],Mr="menu-item"===_t?(0,Nr.u)("li",{key:Qe.uid,role:"menuitem",tabIndex:0,title:At,"aria-label":At,class:this.classes(ks_button,Ht),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":Qe.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},nr):(0,Nr.u)("div",{key:Qe.uid,role:"button",tabIndex:0,title:At,"aria-label":At,class:this.classes(ks_button,Ht),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":Qe.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},nr);return Qe.visible?Mr:null}renderFeatureMenuItem(Fe,Qe){const{messages:_t,messagesCommon:At}=this,{selectedFeatureIndex:Ht,selectedFeatureViewModel:nr}=this.viewModel,Mr=Fe===nr,Ur={"esri-popup__feature-menu-item--selected":Mr},rs=Mr?(0,Nr.u)("span",{key:xa(`feature-menu-selected-feature-${Ht}`),title:_t.selectedFeature,"aria-label":_t.selectedFeature,class:"esri-icon-check-mark"}):null,Os=(0,Nr.u)("span",{innerHTML:Fe.title||At.untitled});return(0,Nr.u)("li",{role:"menuitem",tabIndex:-1,key:xa(`feature-menu-feature-${Ht}`),class:this.classes(Ur,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":Qe,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},(0,Nr.u)("span",{class:"esri-popup__feature-menu-title"},Os,rs))}renderFeatureMenu(){const{featureMenuId:Fe}=this,{featureViewModels:Qe}=this.viewModel;return Qe.length>1?(0,Nr.u)("ol",{class:"esri-popup__feature-menu-list",id:Fe,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},Qe.filter(_t=>!!_t.graphic).map((_t,At)=>this.renderFeatureMenuItem(_t,At))):null}_getActionTitle(Fe){const{messages:Qe,selectedFeature:_t,messagesCommon:At}=this,{id:Ht}=Fe,nr=_t?.attributes,Mr="zoom-to-feature"===Ht?(0,tl.n)(Fe.title,{messages:Qe}):"remove-selected-feature"===Ht?(0,tl.n)(Fe.title,{messages:At}):"zoom-to-clustered-features"===Ht||"browse-clustered-features"===Ht?(0,tl.n)(Fe.title,{messages:Qe}):Fe.title;return Mr&&nr?(0,tl.n)(Mr,nr):Mr}_getActionClass(Fe){const{selectedFeature:Qe}=this,_t=Qe?.attributes,{className:At,image:Ht}=Fe,nr=Ht||At?At:"esri-icon-default-action";return nr&&_t?(0,tl.n)(nr,_t):nr}_getActionImage(Fe){const{selectedFeature:Qe}=this,_t=Qe?.attributes,{image:At}=Fe;return At&&_t?(0,tl.n)(At,_t):At}_createFeatureUpdatedAnimation(){return(0,Ys.vU)("enter","esri-popup--feature-updated")}_getInlineActionCount(){const{maxInlineActions:Fe,featureNavigationVisible:Qe}=this;if("number"!=typeof Fe)return null;const _t=Math.round(Fe);return Math.max(Qe?_t-1:_t,0)}_watchActions(){const{allActions:Fe}=this.viewModel;this.notifyChange("dividedActions");const Qe="actions";this._handles.remove(Qe),Fe&&Fe.forEach(_t=>{this._handles.add((0,w.YP)(()=>[_t.uid,_t.active,_t.className,_t.disabled,_t.id,_t.title,_t.image,_t.visible],()=>this.scheduleRender()),Qe)})}_divideActions(){const{allActions:Fe}=this.viewModel,Qe=Fe.filter(nr=>nr.visible),_t=this._getInlineActionCount(),At=null===_t,Ht=0===_t;return{inlineActions:At?Qe.slice(0):Ht?new re.Z:Qe.slice(0,_t),menuActions:At?new re.Z:Qe.slice(Ht?0:_t)}}_featureMenuOpenChanged(Fe){Fe?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(Fe){Fe?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:Fe,messagesCommon:Qe}=this;Fe&&(this.viewModel.title="error"===Fe.viewModel?.state?Qe.errorMessage:Fe.viewModel?.title||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:Fe}=this;Fe&&(this.viewModel.content=Fe)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(Fe){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(Fe),this._featureMenuIntersectionObserverNode=Fe}_handleFeatureMenuKeyup(Fe){"Escape"===(0,J.kK)(Fe)&&(Fe.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(Fe){"Escape"===(0,J.kK)(Fe)&&(Fe.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(Fe){const{viewModel:Qe}=this;Qe.activeFeature=Qe.features[Fe.currentTarget["data-feature-index"]]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(Fe){const Qe=(0,J.kK)(Fe),{_featureMenuNode:_t}=this,At=Fe.currentTarget["data-feature-index"];if(!_t)return;const Ht=_t.querySelectorAll("li"),nr=Ht.length;"ArrowUp"!==Qe?"ArrowDown"!==Qe?"Home"!==Qe?"End"!==Qe||(Fe.stopPropagation(),Ht[Ht.length-1].focus()):(Fe.stopPropagation(),Ht[0].focus()):(Fe.stopPropagation(),Ht[(At+1+nr)%nr].focus()):(Fe.stopPropagation(),Ht[(At-1+nr)%nr].focus())}_handleActionMenuItemKeyup(Fe){const Qe=(0,J.kK)(Fe),{_actionsMenuNode:_t}=this,At=Fe.currentTarget.dataset.actionUid,{menuActions:Ht}=this.dividedActions,nr=Ht.findIndex(rs=>rs.uid===At);if(!_t)return;const Mr=_t.querySelectorAll("li"),Ur=Mr.length;"ArrowUp"!==Qe?"ArrowDown"!==Qe?"Home"!==Qe?"End"!==Qe||(Fe.stopPropagation(),Mr[Mr.length-1].focus()):(Fe.stopPropagation(),Mr[0].focus()):(Fe.stopPropagation(),Mr[(nr+1+Ur)%Ur].focus()):(Fe.stopPropagation(),Mr[(nr-1+Ur)%Ur].focus())}_handleMainKeyup(Fe){const Qe=(0,J.kK)(Fe);"ArrowLeft"===Qe&&(Fe.stopPropagation(),this.previous()),"ArrowRight"===Qe&&(Fe.stopPropagation(),this.next())}_spinnerEnabledChange(Fe){if(this._destroySpinner(),!Fe)return;const Qe=this.get("viewModel.view");this._createSpinner(Qe)}_hideSpinner(){const{_spinner:Fe}=this;Fe&&(Fe.location=null,Fe.hide())}_displaySpinner(){const{_spinner:Fe}=this;if(!Fe)return;const{location:Qe,waitingForResult:_t}=this.viewModel;_t?Fe.show({location:Qe}):Fe.hide()}_getIconStyles(Fe){return{"background-image":Fe?`url(${Fe})`:""}}_shouldFocus(Fe){var Qe=this;return(0,Z.Z)(function*(){Fe.shouldFocus&&(yield(0,w.N1)(()=>!0===Qe.viewModel?.active),Qe.focus())})()}_addSelectedFeatureIndexHandle(){const Fe=(0,w.YP)(()=>this.viewModel?.selectedFeatureIndex,(Qe,_t)=>this._selectedFeatureIndexUpdated(Qe,_t));this._handles.add(Fe,sd)}_selectedFeatureIndexUpdated(Fe,Qe){const{featureCount:_t}=this;_t&&Fe!==Qe&&-1!==Fe&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:Fe}=this;Fe&&(Fe.viewModel=null,Fe&&!Fe.destroyed&&Fe.destroy()),this._feature=null}_isScreenLocationWithinView(Fe,Qe){return Fe.x>-1&&Fe.y>-1&&Fe.x<=Qe.width&&Fe.y<=Qe.height}_isOutsideView(Fe){const{popupHeight:Qe,popupWidth:_t,screenLocation:At,side:Ht,view:nr}=Fe;if(isNaN(_t)||isNaN(Qe)||!nr||!At)return!1;const Mr=nr.padding;return"right"===Ht&&At.x+_t/2>nr.width-Mr.right||"left"===Ht&&At.x-_t/2<Mr.left||"top"===Ht&&At.y-Qe<Mr.top||"bottom"===Ht&&At.y+Qe>nr.height-Mr.bottom}_calculateAutoAlignment(Fe){if("auto"!==Fe)return Fe;const{_pointerOffsetInPx:Qe,_containerNode:_t,_mainContainerNode:At,viewModel:Ht}=this,{screenLocation:nr,view:Mr}=Ht;if((0,le.Wi)(nr)||!Mr||!_t)return"top-center";if(!this._isScreenLocationWithinView(nr,Mr))return this._get("currentAlignment")||"top-center";function Ur(Fa){return parseInt(Fa.replace(/[^-\d\.]/g,""),10)}const rs=At?window.getComputedStyle(At,null):null,Os=rs?Ur(rs.getPropertyValue("max-height")):0,ri=rs?Ur(rs.getPropertyValue("height")):0,{height:vi,width:_n}=_t.getBoundingClientRect(),cn=_n+Qe,Fo=Math.max(vi,Os,ri)+Qe,Pn=this._isOutsideView({popupHeight:Fo,popupWidth:cn,screenLocation:nr,side:"right",view:Mr}),Vo=this._isOutsideView({popupHeight:Fo,popupWidth:cn,screenLocation:nr,side:"left",view:Mr}),nl=this._isOutsideView({popupHeight:Fo,popupWidth:cn,screenLocation:nr,side:"top",view:Mr}),mc=this._isOutsideView({popupHeight:Fo,popupWidth:cn,screenLocation:nr,side:"bottom",view:Mr});return Vo?nl?"bottom-right":"top-right":Pn?nl?"bottom-left":"top-left":nl?mc?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(Fe){return"function"==typeof Fe?Fe.call(this):Fe}_getCurrentAlignment(){const{alignment:Fe,dockEnabled:Qe}=this;return Qe||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(Fe)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(Fe){const Qe=["left","right"];return(0,Ys.dZ)(this.container)&&Qe.reverse(),Fe.replace(/leading/gi,Qe[0]).replace(/trailing/gi,Qe[1])}_callDockPosition(Fe){return"function"==typeof Fe?Fe.call(this):Fe}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(Fe){if("auto"!==Fe)return Fe;const Qe=this.viewModel?.view,_t=(0,Ys.dZ)(this.container)?"top-left":"top-right";if(!Qe)return _t;const At=Qe.padding||{left:0,right:0,top:0,bottom:0},Ht=Qe.width-At.left-At.right,{breakpoints:nr}=Qe;return nr&&Ht<=nr.xsmall?"bottom-center":_t}_positionContainer(Fe=this._containerNode){if(Fe&&(this._containerNode=Fe),!Fe)return;const{screenLocation:Qe}=this.viewModel,{width:_t}=Fe.getBoundingClientRect(),At=this._calculatePositionStyle(Qe,_t);At&&(Fe.style.top=At.top,Fe.style.left=At.left,Fe.style.bottom=At.bottom,Fe.style.right=At.right)}_calculateFullWidth(Fe){const{currentAlignment:Qe,_pointerOffsetInPx:_t}=this;return"top-left"===Qe||"bottom-left"===Qe||"top-right"===Qe||"bottom-right"===Qe?Fe+_t:Fe}_calculateAlignmentPosition(Fe,Qe,_t,At){const{currentAlignment:Ht,_pointerOffsetInPx:nr}=this,Mr=At/2,Ur=_t.height-Qe,rs=_t.width-Fe,{padding:Os}=this.view;return"bottom-center"===Ht?{top:Qe+nr-Os.top,left:Fe-Mr-Os.left}:"top-left"===Ht?{bottom:Ur+nr-Os.bottom,right:rs+nr-Os.right}:"bottom-left"===Ht?{top:Qe+nr-Os.top,right:rs+nr-Os.right}:"top-right"===Ht?{bottom:Ur+nr-Os.bottom,left:Fe+nr-Os.left}:"bottom-right"===Ht?{top:Qe+nr-Os.top,left:Fe+nr-Os.left}:"top-center"===Ht?{bottom:Ur+nr-Os.bottom,left:Fe-Mr-Os.left}:void 0}_calculatePositionStyle(Fe,Qe){const{dockEnabled:_t,view:At}=this;if(!At)return;if(_t)return{left:"",top:"",right:"",bottom:""};if((0,le.Wi)(Fe)||!Qe)return;const Ht=this._calculateFullWidth(Qe),nr=this._calculateAlignmentPosition(Fe.x,Fe.y,At,Ht);return nr?{top:void 0!==nr.top?`${nr.top}px`:"auto",left:void 0!==nr.left?`${nr.left}px`:"auto",bottom:void 0!==nr.bottom?`${nr.bottom}px`:"auto",right:void 0!==nr.right?`${nr.right}px`:"auto"}:void 0}_viewChange(Fe,Qe){Fe&&Qe&&(this.close(),this.clear())}_viewReadyChange(Fe,Qe){if(Fe){const _t=this.get("viewModel.view");this._wireUpView(_t)}else Qe&&(this.close(),this.clear())}_wireUpView(Fe){if(this._destroySpinner(),!Fe)return;const{spinnerEnabled:Qe}=this;Qe&&this._createSpinner(Fe),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(Fe,Qe,_t){const[At,Ht]=Fe,[nr,Mr]=Qe,{width:Ur,height:rs}=_t;return At<=Ur&&nr>Ur||At>Ur&&nr<=Ur||Ht<=rs&&Mr>rs||Ht>rs&&Mr<=rs}_updateDockEnabledForViewSize(Fe,Qe){if(!Fe||!Qe)return;const _t=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},At=_t.left+_t.right,Ht=_t.top+_t.bottom,nr=[],Mr=[];nr[0]=Fe[0]-At,nr[1]=Fe[1]-Ht,Mr[0]=Qe[0]-At,Mr[1]=Qe[1]-Ht;const{dockOptions:Ur}=this;this._dockingThresholdCrossed(nr,Mr,Ur.breakpoint)&&this._setDockEnabledForViewSize(Ur),this._setCurrentDockPosition()}_focusDockButtonNode(Fe){this._focusDockButton&&(this._focusDockButton=!1,Fe.focus())}_closeButtonNodeUpdated(Fe){return this._focusClose?(this._focusClose=!1,void Fe.focus()):this._blurClose?(this._blurClose=!1,void Fe.blur()):void 0}_mainContainerNodeUpdated(Fe){return this._mainContainerNode=Fe,this._focusContainer?(this._focusContainer=!1,void Fe.focus()):this._blurContainer?(this._blurContainer=!1,void Fe.blur()):void 0}_featureMenuNodeUpdated(Fe){if(this._featureMenuNode=Fe,!Fe||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const Qe=Fe.querySelectorAll("li");Qe.length&&Qe[0].focus()}_actionsMenuNodeUpdated(Fe){if(this._actionsMenuNode=Fe,!Fe||!this._focusFirstAction)return;this._focusFirstAction=!1;const Qe=Fe.querySelectorAll("li");Qe.length&&Qe[0].focus()}_focusFeatureMenuButtonNode(Fe){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,Fe.focus())}_focusActionsMenuButtonNode(Fe){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,Fe.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:Fe,viewModel:Qe}=this;Qe&&(Qe.screenLocationEnabled=Qe.active&&!Fe)}_shouldDockAtCurrentViewSize(Fe){const Qe=Fe.breakpoint,_t=this.viewModel?.view?.ui;if(!_t)return!1;const{width:At,height:Ht}=_t;if(isNaN(At)||isNaN(Ht))return!1;const nr=Qe.hasOwnProperty("width")&&At<=Qe.width,Mr=Qe.hasOwnProperty("height")&&Ht<=Qe.height;return nr||Mr}_setDockEnabledForViewSize(Fe){Fe.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(Fe))}_getPageText(Fe,Qe){return this.featureNavigationVisible?(0,tl.n)(this.messages.pageText,{index:Qe+1,total:Fe}):null}_destroySpinner(){const{_spinner:Fe,view:Qe}=this;Fe&&(Qe&&Qe.ui&&Qe.ui.remove(this._spinner,id),Fe.destroy(),this._spinner=null)}_createSpinner(Fe){Fe&&(this._spinner=new xd({view:Fe}),Fe.ui.add(this._spinner,{key:id,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const Fe=!this.featureMenuOpen;this._featureMenuOpenChanged(Fe),this.actionsMenuOpen=!1,this.featureMenuOpen=Fe}_toggleActionsMenu(){const Fe=!this.actionsMenuOpen;this._actionsMenuOpenChanged(Fe),this.featureMenuOpen=!1,this.actionsMenuOpen=Fe}_triggerAction(Fe){const Qe=Fe.currentTarget.dataset.actionUid,{allActions:_t}=this.viewModel,At=_t.findIndex(nr=>nr.uid===Qe),Ht=_t.getItemAt(At);Ht&&"toggle"===Ht.type&&(Ht.value=!Ht.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(At)}_selectFeature(Fe){const Qe=Fe.currentTarget["data-feature-index"];isNaN(Qe)||(this.viewModel.selectedFeatureIndex=Qe),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"actionsMenuId",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"actionsMenuButtonId",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"featureMenuId",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"titleId",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"contentId",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"hasContent",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"featureNavigationVisible",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"collapsible",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"featureMenuVisible",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"contentCollapsed",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"dividedActions",null),(0,D._)([(0,ce.B)("viewModel.actions")],Hi.prototype,"actions",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"actionsMenuOpen",null),(0,D._)([(0,U.Cb)()],Hi.prototype,"alignment",void 0),(0,D._)([(0,ce.B)("viewModel.autoCloseEnabled")],Hi.prototype,"autoCloseEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.autoOpenEnabled")],Hi.prototype,"autoOpenEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.defaultPopupTemplateEnabled")],Hi.prototype,"defaultPopupTemplateEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.content")],Hi.prototype,"content",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"collapsed",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"collapseEnabled",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"currentAlignment",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"currentDockPosition",null),(0,D._)([(0,U.Cb)()],Hi.prototype,"dockOptions",null),(0,D._)([(0,U.Cb)()],Hi.prototype,"dockEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.featureCount")],Hi.prototype,"featureCount",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"featureMenuOpen",void 0),(0,D._)([(0,ce.B)("viewModel.features")],Hi.prototype,"features",void 0),(0,D._)([(0,ce.B)("viewModel.goToOverride")],Hi.prototype,"goToOverride",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"headingLevel",void 0),(0,D._)([(0,ce.B)("viewModel.highlightEnabled")],Hi.prototype,"highlightEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.location")],Hi.prototype,"location",void 0),(0,D._)([(0,U.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Hi.prototype,"label",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"maxInlineActions",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/widgets/Popup/t9n/Popup")],Hi.prototype,"messages",void 0),(0,D._)([(0,U.Cb)(),(0,di.H)("esri/t9n/common")],Hi.prototype,"messagesCommon",void 0),(0,D._)([(0,ce.B)("viewModel.promises")],Hi.prototype,"promises",void 0),(0,D._)([(0,ce.B)("viewModel.selectedFeature")],Hi.prototype,"selectedFeature",void 0),(0,D._)([(0,ce.B)("viewModel.selectedFeatureIndex")],Hi.prototype,"selectedFeatureIndex",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Hi.prototype,"selectedFeatureWidget",null),(0,D._)([(0,U.Cb)()],Hi.prototype,"spinnerEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.title")],Hi.prototype,"title",void 0),(0,D._)([(0,ce.B)("viewModel.updateLocationEnabled")],Hi.prototype,"updateLocationEnabled",void 0),(0,D._)([(0,ce.B)("viewModel.view")],Hi.prototype,"view",void 0),(0,D._)([(0,U.Cb)({type:wh}),function C_(Fe){return Qe=>{Qe.hasOwnProperty("_delegatedEventNames")||(Qe._delegatedEventNames=Qe._delegatedEventNames?Qe._delegatedEventNames.slice():[]);const _t=Qe._delegatedEventNames,At=Array.isArray(Fe)?Fe:function Rh(Fe){return Fe.split(",").map(Qe=>Qe.trim())}(Fe);_t.push(...At)}}(["triggerAction","trigger-action"])],Hi.prototype,"viewModel",void 0),(0,D._)([(0,ce.B)("viewModel.visible")],Hi.prototype,"visible",void 0),(0,D._)([(0,U.Cb)()],Hi.prototype,"visibleElements",void 0),(0,D._)([(0,de.p)("visibleElements")],Hi.prototype,"castVisibleElements",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_close",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_toggleDockEnabled",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_toggleFeatureMenu",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_toggleActionsMenu",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_triggerAction",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_selectFeature",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_next",null),(0,D._)([(0,ja.h)()],Hi.prototype,"_previous",null),Hi=(0,D._)([(0,G.j)(Uh)],Hi);const Rd=Hi,tc=[0,0];function Id(Fe){Fe&&((0,x.cS)(Fe),Fe.parentNode&&Fe.parentNode.removeChild(Fe))}const jh=Fe=>{let Qe=class extends Fe{constructor(..._t){super(..._t),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([(0,w.YP)(()=>this.cursor,At=>{const{surface:Ht}=this;Ht&&Ht.setAttribute("data-cursor",At)}),(0,w.YP)(()=>this.interacting,At=>{const{surface:Ht}=this;Ht&&Ht.setAttribute("data-interacting",At.toString())})])}initialize(){this.handles.add((0,w.YP)(()=>this.ui,(_t,At)=>this._handleUIChange(_t,At))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(_t){const At=this._get("container");if(At===_t)return;const Ht="dom-size";if(this.handles.remove(Ht),this._stopMeasuring(),At&&(At.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),Id(this.root),this._set("root",null),(0,x.YD)(this.userContent,At),Id(this.userContent),this._set("userContent",null)),_t){_t.classList.add("esri-view");const nr=document.createElement("div");nr.className="esri-view-user-storage",(0,x.YD)(_t,nr),_t.appendChild(nr),this._set("userContent",nr);const Mr=document.createElement("div");Mr.className="esri-view-root",_t.insertBefore(Mr,_t.firstChild),this._set("root",Mr);const Ur=document.createElement("div");Ur.className="esri-view-surface",Ur.setAttribute("role","application"),Ur.tabIndex=0,Mr.appendChild(Ur),this._set("surface",Ur);const rs=new X;Mr.appendChild(rs.surface),this._set("overlay",rs),(0,w.YP)(()=>rs.needsRender,Os=>{Os&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,B.A)({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add((0,w.YP)(()=>this.size,Os=>{const[ri,vi]=Os,_n="esri-view-surface--inset-outline";ri>=document.body.clientWidth||vi>=document.body.clientHeight?Ur.classList.add(_n):Ur.classList.remove(_n)},w.nn),Ht),this._set("container",_t),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const _t=document.activeElement===this.surface;return document.hasFocus()&&_t}get popup(){return this._get("popup")||new Rd({view:this})}set popup(_t){const At=this._get("popup");At&&At!==_t&&At.destroy(),this._set("popup",_t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(_t,At,Ht){const nr=this.position;return _t-=nr[0],At-=nr[1],Ht?(Ht[0]=_t,Ht[1]=At):Ht=[_t,At],Ht}containerToPage(_t,At,Ht){const nr=this.position;return _t+=nr[0],At+=nr[1],Ht?(Ht[0]=_t,Ht[1]=At):Ht=[_t,At],Ht}_handleUIChange(_t,At){At&&(this.handles.remove("ui"),At.destroy()),_t&&this._wireUI(_t),this._set("ui",_t)}_wireUI(_t){this.handles.remove("ui"),_t&&(_t.view=this,this.handles.add([(0,w.YP)(()=>this.root,At=>{_t.container=At?function wu(Fe){const Qe=document.createElement("div");return Fe.appendChild(Qe),Qe}(At):null},w.nn),(0,w.YP)(()=>this.popup,(At,Ht)=>{Ht&&_t.remove(Ht,"popup"),At&&(At.view=_t.view,_t.add(At,{key:"popup",position:"manual"}))},w.nn)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const _t=this._freqInfo;_t.freq=16,_t.time=750,this.handles.add([(()=>{const At=()=>{_t.freq=16,_t.time=750};return window.addEventListener("resize",At),{remove(){window.removeEventListener("resize",At)}}})(),(0,B.A)({prepare:At=>{const Ht=this._measure(),nr=this._freqInfo;if(nr.time+=At.deltaTime,Ht&&(nr.freq=16,this._get("resizing")||this._set("resizing",!0)),nr.time<nr.freq)return;nr.time=0;const Mr=this._position();nr.freq=Mr||Ht?16:Math.min(750,2*nr.freq),!Ht&&nr.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const _t=this.container,At=_t?_t.clientWidth:0,Ht=_t?_t.clientHeight:0;if(0===At||0===Ht)return this.suspended||this._set("suspended",!0),!1;const nr=this.width,Mr=this.height;return At===nr&&Ht===Mr?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",At),this._set("height",Ht),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:nr,oldHeight:Mr,width:At,height:Ht}),!0)}_position(){const At=this.position,Ht=function Bh(Fe){const Qe=(Fe.ownerDocument||window.document).defaultView,_t=Fe.getBoundingClientRect();return tc[0]=_t.left+Qe.pageXOffset,tc[1]=_t.top+Qe.pageYOffset,tc}(this.container);return!(At&&Ht[0]===At[0]&&Ht[1]===At[1]||(this._set("position",[Ht[0],Ht[1]]),0))}forceDOMReadyCycle(){}};return(0,D._)([(0,U.Cb)({value:null,cast:_t=>(0,x.L7)(_t)})],Qe.prototype,"container",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"focused",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"height",void 0),(0,D._)([(0,U.Cb)({type:Rd})],Qe.prototype,"popup",null),(0,D._)([(0,U.Cb)({type:X})],Qe.prototype,"overlay",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"position",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"resizing",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"root",void 0),(0,D._)([(0,U.Cb)({value:null,readOnly:!0})],Qe.prototype,"size",null),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"surface",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"suspended",void 0),(0,D._)([(0,U.Cb)()],Qe.prototype,"ui",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"userContent",void 0),(0,D._)([(0,U.Cb)({readOnly:!0})],Qe.prototype,"width",void 0),(0,D._)([(0,U.Cb)()],Qe.prototype,"widthBreakpoint",void 0),Qe=(0,D._)([(0,G.j)("esri.views.DOMContainer")],Qe),Qe};function Cn(Fe){return Fe&&"focus"in Fe}},59617:(qe,xe,T)=>{"use strict";var D,B;function x(B){return"global"===B?D.Global:D.Local}function w(B){return B===D.Global?"global":"local"}T.d(xe,{JY:()=>D,M7:()=>w,wg:()=>x}),(B=D||(D={}))[B.Global=1]="Global",B[B.Local=2]="Local"},85112:(qe,xe,T)=>{"use strict";var D,x;T.d(xe,{t:()=>D}),(x=D||(D={}))[x.Left=0]="Left",x[x.Middle=1]="Middle",x[x.Right=2]="Right"},35216:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>B});var D=T(63290);class x{constructor(H,G=[]){this.eventType=H,this.keyModifiers=G}matches(H){if(H.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const G=H.modifiers;for(const $ of this.keyModifiers)if(!G.has($))return!1;return!0}}const w=D.Z.getLogger("esri.views.input.InputHandler");class B{constructor(H){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=H}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const H in this._incoming){const G=this._incoming[H];for(const $ of G)this._incomingEventMatches.push($.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(H=>H.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(H){this._manager?w.error("This InputHandler has already been registered with an InputManager"):(H.setEventCallback(G=>this._handleEvent(G)),H.setUninstallCallback(()=>this._onUninstall()),this._manager=H)}onUninstall(){}registerIncoming(H,G,$){let re;"function"==typeof G?($=G,re=[]):re=G||[];const ue="string"==typeof H?new x(H,re):H,ae=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},oe=Z=>{const Q=this._incoming[Z.match.eventType];if(Q){const J=Q.indexOf(Z);Q.splice(J,1),ae(),this._manager&&this._manager.updateDependencies()}},ie=new U(ue,$,{onPause:oe,onRemove:oe,onResume:Z=>{const Q=this._incoming[Z.match.eventType];Q&&!Q.includes(Z)&&(Q.push(Z),ae(),this._manager&&this._manager.updateDependencies())}});let X=this._incoming[ue.eventType];return X||(X=[],this._incoming[ue.eventType]=X),X.push(ie),ae(),this._manager&&this._manager.updateDependencies(),ie}registerOutgoing(H){if(this._outgoing[H])throw Error("There is already a callback registered for this outgoing InputEvent: "+H);const G=new W(H,{onEmit:($,re,ue,ae)=>{this._manager.emit($.eventType,re,ue,ae)},onRemove:$=>{delete this._outgoing[$.eventType],this._manager.updateDependencies()}});return this._outgoing[H]=G,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),G}startCapturingPointer(H){this._manager.setPointerCapture(H,!0)}stopCapturingPointer(H){this._manager.setPointerCapture(H,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):w.error("This InputHandler is not registered with an InputManager")}_handleEvent(H){const G=this._incoming[H.type];if(G)for(const $ of G)if($.match.matches(H)&&($.callback(H),H.shouldStopPropagation()))break}}class U{constructor(H,G,$){this.match=H,this._callback=G,this._handler=$}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class W{constructor(H,G){this.eventType=H,this._removed=!1,this._handler=G}emit(H,G,$){this._removed||this._handler.onEmit(this,H,G,$)}remove(){this._removed=!0,this._handler.onRemove(this)}}},56846:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>X,f:()=>J});var D=T(17626),x=T(14517),w=T(63290),B=T(62208),U=T(35133),W=T(77712),$=(T(85931),T(8314),T(90912),T(76898)),re=T(63416),ue=T(25441),ae=T(35216);class oe extends ae.a{constructor(le){super(!0),this._onChange=le,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",ne=>{this._setValue("touch"===ne.data.native.pointerType?"touch":"mouse",ne.data.x,ne.data.y)})}_setValue(le,ne,ce){le===this._value&&this._x===ne&&this._y===ce||(this._value=le,this._x=ne,this._y=ce,this._onChange(le,ne,ce))}}const ie=w.Z.getLogger("esri.views.input.InputManager");let X=class extends x.Z{constructor(ee){super(ee),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ue.CK,this.latestPointerType="mouse",this._propertiesPool=new re.L({latestPointerLocation:se},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const ee=Object.keys(this._nameToGroup);for(const le of ee)this.uninstallHandlers(le);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(ee=>ee.handler.hasPendingInputs)}installHandlers(ee,le,ne=J.INTERNAL){if(this._nameToGroup[ee])return void ie.error("There is already an InputHandler group registered under the name `"+ee+"`");if(0===le.length)return void ie.error("Can't register a group of zero handlers");const ce={name:ee,handlers:le.map(de=>({handler:de,active:!0,removed:!1,priorityIndex:0,groupPriority:ne,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[ee]=ce;for(let de=ce.handlers.length-1;de>=0;de--){const me=ce.handlers[de];this._handlers.push(me),me.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(_e,he,ye,fe,De)=>{this._emitInputEvent(me.priorityIndex+1,_e,he,ye,De,fe)},setPointerCapture:(_e,he)=>{this._setPointerCapture(ce,me,_e,he)},setEventCallback:_e=>{me.eventCallback=_e},setUninstallCallback:_e=>{me.uninstallCallback=_e},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(ee){const le=this._nameToGroup[ee];le?(le.handlers.forEach(ne=>{ne.removed=!0,ne.uninstallCallback()}),delete this._nameToGroup[ee],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ie.error("There is no InputHandler group registered under the name `"+ee+"`")}hasHandlers(ee){return void 0!==this._nameToGroup[ee]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const ee=new Set,le=new Set;this._handlersPriority=[];for(let ne=this._handlers.length-1;ne>=0;ne--){const ce=this._handlers[ne];ce.priorityIndex=ne,this._handlersPriority.push(ce)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let ne=this._handlersPriority.length-1;ne>=0;ne--){const ce=this._handlersPriority[ne];ce.priorityIndex=ne;let de=ce.handler.hasSideEffects;if(!de)for(const me of ce.handler.outgoingEventTypes)if(ee.has(me)){de=!0;break}if(de)for(const me of ce.handler.incomingEventMatches){ee.add(me.eventType);for(const _e of me.keyModifiers)(0,ue.wj)(_e)||le.add(_e)}ce.active=de}this._sourceEvents=ee,this._keyModifiers=le,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(ee,le,ne){this._get("latestPointerType")!==ee&&this._set("latestPointerType",ee);const ce=this._get("latestPointerLocation");if((0,B.Wi)(ce)||ce.x!==le||ce.y!==ne){const de=this._propertiesPool.get("latestPointerLocation");de.x=le,de.y=ne,this._set("latestPointerLocation",de)}}_onEventReceived(ee,le){"pointer-capture-lost"===ee&&this._pointerCaptures.delete(le.native.pointerId),this._updateKeyModifiers(ee,le),this._emitInputEventFromSource(ee,le,null!=this.test.timestamp?this.test.timestamp:le.native?le.native.timestamp:void 0,le.native?le.native.cancelable:void 0)}_updateKeyModifiers(ee,le){if(!le)return;let ne=!1;const ce=()=>{if(!ne){const _e=new Set;this._activeKeyModifiers.forEach(he=>{_e.add(he)}),this._activeKeyModifiers=_e,ne=!0}},de=(_e,he)=>{he&&!this._activeKeyModifiers.has(_e)?(ce(),this._activeKeyModifiers.add(_e)):!he&&this._activeKeyModifiers.has(_e)&&(ce(),this._activeKeyModifiers.delete(_e))};if("key-down"===ee||"key-up"===ee){const _e=le.key;this._keyModifiers.has(_e)&&de(_e,"key-down"===ee)}const me=le.native;de("Alt",!(!me||!me.altKey)),de("Ctrl",!(!me||!me.ctrlKey)),de("Shift",!(!me||!me.shiftKey)),de("Meta",!(!me||!me.metaKey)),de("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new oe((ee,le,ne)=>this._setLatestPointer(ee,le,ne)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],J.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,J.INTERNAL)}_setPointerCapture(ee,le,ne,ce){const de=ee.name+"-"+le.priorityIndex,me=this._pointerCaptures.get(ne.pointerId)||new Set;this._pointerCaptures.set(ne.pointerId,me),ce?(me.add(de),1===me.size&&this.eventSource&&this.eventSource.setPointerCapture(ne,!0)):me.has(de)&&(me.delete(de),0===me.size&&(this._pointerCaptures.delete(ne.pointerId),this.eventSource&&this.eventSource.setPointerCapture(ne,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(ee=>!ee.removed),this.updateDependencies()}_emitInputEventFromSource(ee,le,ne,ce){this._emitInputEvent(0,ee,le,ne,ce)}_emitInputEvent(ee,le,ne,ce,de,me){const _e=void 0!==ce?ce:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),ye={event:new Z(le,ne,_e,me||this._activeKeyModifiers,void 0!==de&&de),priorityIndex:ee};this._currentPropagation?this._currentPropagation.events.push(ye):this._doNewPropagation(ye)}_doNewPropagation(ee){this._currentPropagation={events:new U.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:ee.event.timestamp},this._currentPropagation.events.push(ee),this._continuePropagation()}_continuePropagation(){const ee=this._currentPropagation;if(ee){for(;this._currentPropagation.events.length>0;){const{event:le,priorityIndex:ne}=this._currentPropagation.events.pop(),ce=le.data&&le.data.eventId;if(null==ce||!this._stoppedPropagationEventIds.has(ce))for(ee.currentHandler=this._handlersPriority[ne];ee.currentHandler;){if(ee.currentHandler.removed)ee.needsHandlerGarbageCollect=!0;else{if(ee.currentHandler.active&&!le.shouldStopPropagation()&&ee.currentHandler.eventCallback(le),le.shouldStopPropagation()){null!=ce&&this._stoppedPropagationEventIds.add(ce);break}if(le.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:le,priorityIndex:ee.currentHandler.priorityIndex+1})}ee.currentHandler=this._handlersPriority[ee.currentHandler.priorityIndex+1]}}ee.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(ee){const le=new U.Z;for(le.push(ee);this._currentPropagation.events.length;)le.push(this._currentPropagation.events.pop());this._currentPropagation.events=le,this._currentPropagation.currentHandler=null}_compareHandlerPriority(ee,le){if(ee.handler.hasSideEffects!==le.handler.hasSideEffects)return ee.handler.hasSideEffects?1:-1;if(ee.groupPriority!==le.groupPriority)return ee.groupPriority>le.groupPriority?-1:1;for(const ne of ee.handler.incomingEventMatches)for(const ce of le.handler.incomingEventMatches){if(ne.eventType!==ce.eventType)continue;const de=ne.keyModifiers.filter(me=>ce.keyModifiers.includes(me));if(de.length===ne.keyModifiers.length!=(de.length===ce.keyModifiers.length))return ne.keyModifiers.length>ce.keyModifiers.length?-1:1}return ee.priorityIndex>le.priorityIndex?-1:1}_sortHandlersPriority(ee){const le=[];for(const ne of ee){let ce=0;for(;ce<le.length&&this._compareHandlerPriority(ne,le[ce])>=0;)ce++;le.splice(ce,0,ne)}return le}get debug(){const ee=le=>{const ne=this._setPointerCapture;this._setPointerCapture=()=>{},le(),this._setPointerCapture=ne};return{injectEvent:(le,ne)=>{ee(()=>{this._onEventReceived(le,ne)})},disablePointerCapture:ee}}};(0,D._)([(0,W.Cb)({readOnly:!0})],X.prototype,"hasPendingInputs",null),(0,D._)([(0,W.Cb)()],X.prototype,"eventSource",void 0),(0,D._)([(0,W.Cb)()],X.prototype,"recognizers",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],X.prototype,"latestPointerType",void 0),(0,D._)([(0,W.Cb)({readOnly:!0})],X.prototype,"latestPointerLocation",void 0),X=(0,D._)([(0,$.j)("esri.views.input.InputManager")],X);class Z{constructor(le,ne,ce,de,me){this.type=le,this.data=ne,this.timestamp=ce,this.modifiers=de,this.cancelable=me,this._propagationState=Q.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Q.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&Q.STOPPED)}async(le){this._propagationState|=Q.PAUSED;const ne=(ce,de)=>{this._propagationState&=~Q.PAUSED;const me=this._resumeCallback;if(this._resumeCallback=null,me&&me(),de)throw ce;return ce};return("function"==typeof le?le():le).then(ce=>ne(ce,!1),ce=>ne(ce,!0))}shouldPausePropagation(le){return!!(this._propagationState&Q.PAUSED)&&(this._resumeCallback=le,!0)}preventDefault(){this.data.native.preventDefault()}}var Q,ee;(ee=Q||(Q={}))[ee.NONE=0]="NONE",ee[ee.STOPPED=1]="STOPPED",ee[ee.PAUSED=2]="PAUSED";const J={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class se{}},45458:(qe,xe,T)=>{"use strict";T.d(xe,{CE:()=>re,uS:()=>Y}),T(8314);var x=T(21286),w=T(23841),B=T(35216),U=T(56846);T(85112);const Y=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],H={};function G(ae){return!!H[ae]}Y.forEach(ae=>{H[ae]=!0});class re{constructor(oe){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=oe,this.inputManager=null}connect(oe){oe&&this.disconnect(),this.inputManager=oe,this.handlers.forEach(({handler:ie,priority:X},Z)=>this.inputManager.installHandlers(Z,[ie],X))}disconnect(){this.inputManager&&this.handlers.forEach((oe,ie)=>this.inputManager.uninstallHandlers(ie)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(oe,ie,X,Z){const Q=Array.isArray(oe)?oe:oe.split(",");if(!function $(ae){for(const oe of ae)if(!G(oe))return!1;return!0}(Q))return Q.some(G)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let J,se;Array.isArray(ie)?se=ie:(J=ie,se=[]),"function"==typeof X?J=X:Z=X,Z=Z??U.f.DEFAULT;const ee=this._createUniqueGroupName(),le=new ue(this.view,Q,se,J);this.handlers.set(ee,{handler:le,priority:Z});for(const ne of Q){const ce=this.handlerCounts.get(ne)||0;this.handlerCounts.set(ne,ce+1)}return this.inputManager&&this.inputManager.installHandlers(ee,[le],Z),{remove:()=>this._removeHandler(ee,Q)}}hasHandler(oe){return!!this.handlerCounts.get(oe)}_removeHandler(oe,ie){if(this.handlers.has(oe)){this.handlers.delete(oe);for(const X of ie){const Z=this.handlerCounts.get(X);void 0===Z?console.error("Trying to remove handler for event that has no handlers registered: ",X):1===Z?this.handlerCounts.delete(X):this.handlerCounts.set(X,Z-1)}}this.inputManager&&this.inputManager.uninstallHandlers(oe)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class ue extends B.a{constructor(oe,ie,X,Z){super(!0),this.view=oe;for(const Q of ie)switch(Q){case"click":this.registerIncoming("click",X,J=>Z(this._wrapClick(J)));break;case"double-click":this.registerIncoming("double-click",X,J=>Z(this._wrapDoubleClick(J)));break;case"immediate-click":this.registerIncoming("immediate-click",X,J=>Z(this._wrapImmediateClick(J)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",X,J=>Z(this._wrapImmediateDoubleClick(J)));break;case"hold":this.registerIncoming("hold",X,J=>Z(this._wrapHold(J)));break;case"drag":this.registerIncoming("drag",X,J=>{const se=this._wrapDrag(J);se&&Z(se)});break;case"key-down":this.registerIncoming("key-down",X,J=>Z(this._wrapKeyDown(J)));break;case"key-up":this.registerIncoming("key-up",X,J=>Z(this._wrapKeyUp(J)));break;case"pointer-down":this.registerIncoming("pointer-down",X,J=>Z(this._wrapPointer(J,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",X,J=>Z(this._wrapPointer(J,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",X,J=>Z(this._wrapPointer(J,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",X,J=>Z(this._wrapPointerDrag(J)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",X,J=>Z(this._wrapMouseWheel(J)));break;case"pointer-enter":this.registerIncoming("pointer-enter",X,J=>Z(this._wrapPointer(J,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",X,J=>Z(this._wrapPointer(J,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",X,J=>{Z(this._wrapGamepad(J))});break;case"focus":this.registerIncoming("focus",X,J=>{Z(this._wrapFocus(J))});break;case"blur":this.registerIncoming("blur",X,J=>{Z(this._wrapBlur(J))})}}_wrapFocus(oe){return{type:"focus",timestamp:oe.timestamp,native:oe.data.native,cancelable:oe.cancelable,stopPropagation:()=>oe.stopPropagation(),async:ie=>oe.async(ie),preventDefault:()=>oe.preventDefault()}}_wrapBlur(oe){return{type:"blur",timestamp:oe.timestamp,native:oe.data.native,cancelable:oe.cancelable,stopPropagation:()=>oe.stopPropagation(),async:ie=>oe.async(ie),preventDefault:()=>oe.preventDefault()}}_wrapClick(oe){const{pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,eventId:ee}=oe.data,{cancelable:le,timestamp:ne}=oe;return{type:"click",pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,timestamp:ne,screenPoint:(0,w.vW)(Q,J),mapPoint:this._getMapPoint(Q,J),eventId:ee,cancelable:le,stopPropagation:()=>oe.stopPropagation(),async:ce=>oe.async(ce),preventDefault:()=>oe.preventDefault()}}_wrapDoubleClick(oe){const{pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,eventId:ee}=oe.data,{cancelable:le,timestamp:ne}=oe;return{type:"double-click",pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,timestamp:ne,mapPoint:this._getMapPoint(Q,J),eventId:ee,cancelable:le,stopPropagation:()=>oe.stopPropagation(),async:ce=>oe.async(ce),preventDefault:()=>oe.preventDefault()}}_wrapImmediateClick(oe){const{pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,eventId:ee}=oe.data,le=se.pointerId,{cancelable:ne,timestamp:ce}=oe;return{type:"immediate-click",pointerId:le,pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,timestamp:ce,mapPoint:this._getMapPoint(Q,J),eventId:ee,cancelable:ne,stopPropagation:()=>oe.stopPropagation(),async:de=>oe.async(de),preventDefault:()=>oe.preventDefault()}}_wrapImmediateDoubleClick(oe){const{pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,eventId:ee}=oe.data,le=se.pointerId,{cancelable:ne,timestamp:ce}=oe;return{type:"immediate-double-click",pointerId:le,pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,timestamp:ce,mapPoint:this._getMapPoint(Q,J),eventId:ee,cancelable:ne,stopPropagation:()=>oe.stopPropagation(),async:de=>oe.async(de),preventDefault:()=>oe.preventDefault()}}_wrapHold(oe){const{pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se}=oe.data,{cancelable:ee,timestamp:le}=oe;return{type:"hold",pointerType:ie,button:X,buttons:Z,x:Q,y:J,native:se,timestamp:le,mapPoint:this._getMapPoint(Q,J),cancelable:ee,stopPropagation:()=>oe.stopPropagation(),async:ne=>oe.async(ne),preventDefault:()=>oe.preventDefault()}}_getMapPoint(oe,ie){return this.view.toMap((0,w.vW)(oe,ie),{exclude:[]})}_wrapDrag(oe){const ie=oe.data,{x:X,y:Z}=ie.center,{action:Q,pointerType:J,button:se}=ie;if("start"===Q&&(this.latestDragStart=ie),!this.latestDragStart)return;const ee=ie.pointer.native,le=ie.buttons,{cancelable:ne,timestamp:ce}=oe,de={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===Q&&(this.latestDragStart=void 0),{type:"drag",action:Q,x:X,y:Z,origin:de,pointerType:J,button:se,buttons:le,radius:ie.radius,angle:(0,x.BV)(ie.angle),native:ee,timestamp:ce,cancelable:ne,stopPropagation:()=>oe.stopPropagation(),async:me=>oe.async(me),preventDefault:()=>oe.preventDefault()}}_wrapKeyDown(oe){const{key:ie,repeat:X,native:Z}=oe.data,{cancelable:Q,timestamp:J}=oe;return{type:"key-down",key:ie,repeat:X,native:Z,timestamp:J,cancelable:Q,stopPropagation:()=>oe.stopPropagation(),async:se=>oe.async(se),preventDefault:()=>oe.preventDefault()}}_wrapKeyUp(oe){const{key:ie,native:X}=oe.data,{cancelable:Z,timestamp:Q}=oe;return{type:"key-up",key:ie,native:X,timestamp:Q,cancelable:Z,stopPropagation:()=>oe.stopPropagation(),async:J=>oe.async(J),preventDefault:()=>oe.preventDefault()}}_wrapPointer(oe,ie){const{x:X,y:Z,button:Q,buttons:J,native:se,eventId:ee}=oe.data,le=se.pointerId,ne=se.pointerType,{cancelable:ce,timestamp:de}=oe;return{type:ie,x:X,y:Z,pointerId:le,pointerType:ne,button:Q,buttons:J,native:se,timestamp:de,eventId:ee,cancelable:ce,stopPropagation:()=>oe.stopPropagation(),async:me=>oe.async(me),preventDefault:()=>oe.preventDefault()}}_wrapPointerDrag(oe){const{x:ie,y:X,buttons:Z,native:Q,eventId:J}=oe.data.currentEvent,{button:se}=oe.data.startEvent,ee=oe.data.startEvent.native.pointerId,le=oe.data.startEvent.native.pointerType,ne=oe.data.action,ce={x:oe.data.startEvent.x,y:oe.data.startEvent.y},{cancelable:de,timestamp:me}=oe;return{type:"pointer-drag",x:ie,y:X,pointerId:ee,pointerType:le,button:se,buttons:Z,action:ne,origin:ce,native:Q,timestamp:me,eventId:J,cancelable:de,stopPropagation:()=>oe.stopPropagation(),async:_e=>oe.async(_e),preventDefault:()=>oe.preventDefault()}}_wrapMouseWheel(oe){const{cancelable:ie,data:X,timestamp:Z}=oe,{x:Q,y:J,deltaY:se,native:ee}=X;return{type:"mouse-wheel",x:Q,y:J,deltaY:se,native:ee,timestamp:Z,cancelable:ie,stopPropagation:()=>oe.stopPropagation(),async:le=>oe.async(le),preventDefault:()=>oe.preventDefault()}}_wrapGamepad(oe){const{action:ie,state:X,device:Z}=oe.data,{cancelable:Q,timestamp:J}=oe,{buttons:se,axes:ee}=X;return{type:"gamepad",device:Z,timestamp:J,action:ie,buttons:se,axes:ee,cancelable:Q,stopPropagation:()=>oe.stopPropagation(),async:le=>oe.async(le),preventDefault:()=>oe.preventDefault()}}}},25441:(qe,xe,T)=>{"use strict";T.d(xe,{CK:()=>w,kK:()=>U,wj:()=>W});var D=T(17770);const w=(0,T(8314).Z)("mac")?"Meta":"Ctrl",B={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let Y=48;Y<58;Y++)B[Y]=String.fromCharCode(Y);for(let Y=1;Y<25;Y++)B[111+Y]=`F${Y}`;for(let Y=65;Y<91;Y++)B[Y]=[String.fromCharCode(Y+32),String.fromCharCode(Y)];function U(Y){if(void 0!==Y.key)return(0,D.kK)(Y);const H=B[Y.keyCode];return Array.isArray(H)?Y.shiftKey?H[1]:H[0]:H}function W(Y){switch(Y){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},33786:(qe,xe,T)=>{"use strict";var D,x,w,B;T.d(xe,{Q9:()=>x,bH:()=>D,jg:()=>w}),(B=D||(D={}))[B.USER=0]="USER",B[B.MANAGER=1]="MANAGER",function(B){B[B.None=0]="None",B[B.Unfocused=1]="Unfocused",B[B.Focused=2]="Focused",B[B.Unselected=4]="Unselected",B[B.Selected=8]="Selected",B[B.All=15]="All"}(x||(x={})),function(B){B[B.None=0]="None",B[B.Custom1=16]="Custom1",B[B.Custom2=32]="Custom2",B[B.Custom3=64]="Custom3",B[B.Custom4=128]="Custom4",B[B.Custom5=256]="Custom5",B[B.Custom6=512]="Custom6",B[B.Custom7=1024]="Custom7",B[B.Custom8=2048]="Custom8",B[B.Custom9=4096]="Custom9",B[B.Custom10=8192]="Custom10",B[B.Custom11=16384]="Custom11",B[B.Custom12=32768]="Custom12",B[B.All=65520]="All"}(w||(w={}))},87091:(qe,xe,T)=>{"use strict";T.d(xe,{G5:()=>Ce,T8:()=>se,ZM:()=>ce,sq:()=>Te,z4:()=>J});var D=T(17626),x=T(14517),w=T(72392),B=T(63290),U=T(62208),W=T(73362),Y=T(77029),H=T(10699),G=T(32917),$=T(27422),re=T(77712),ie=(T(85931),T(8314),T(90912),T(76898)),X=T(41291),Z=T(66463);const Q=B.Z.getLogger("esri.views.support.Scheduler");function J(){return new De.Scheduler}var se,je;(je=se||(se={})).RESOURCE_CONTROLLER="schedule",je.SLIDE="slide",je.STREAM_DATA_LOADER="stream loader",je.ELEVATION_QUERY="elevation query",je.TERRAIN_SURFACE="terrain",je.SURFACE_GEOMETRY_UPDATES="surface geometry updates",je.GRAPHICS_CORE="Graphics3D",je.I3S_CONTROLLER="I3S",je.POINT_CLOUD_LAYER="point cloud",je.FEATURE_TILE_FETCHER="feature fetcher",je.OVERLAY="overlay",je.STAGE="stage",je.GRAPHICS_DECONFLICTOR="graphics deconflictor",je.FILTER_VISIBILITY="Graphics3D filter visibility",je.SCALE_VISIBILITY="Graphics3D scale visibility",je.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",je.POINT_OF_INTEREST_FREQUENT="POI frequent",je.POINT_OF_INTEREST_INFREQUENT="POI infrequent",je.LABELER="labeler",je.FEATURE_QUERY_ENGINE="feature query",je.FEATURE_TILE_TREE="feature tile tree",je.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",je.ELEVATION_ALIGNMENT="elevation alignment",je.TEXT_TEXTURE_ATLAS="text texture atlas",je.TEXTURE_UNLOAD="texture unload",je.LINE_OF_SIGHT_TOOL="line of sight tool",je.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",je.ELEVATION_PROFILE="elevation profile",je.SNAPPING="snapping",je.SHADOW_ACCUMULATOR="shadow accumulator",je.CLOUDS_GENERATOR="cloud generator",je[je.TEST_PRIO=1]="TEST_PRIO";const le=new Map([[se.RESOURCE_CONTROLLER,0],[se.SLIDE,0],[se.STREAM_DATA_LOADER,0],[se.ELEVATION_QUERY,0],[se.TERRAIN_SURFACE,1],[se.SURFACE_GEOMETRY_UPDATES,1],[se.GRAPHICS_CORE,2],[se.I3S_CONTROLLER,2],[se.POINT_CLOUD_LAYER,2],[se.FEATURE_TILE_FETCHER,2],[se.OVERLAY,4],[se.STAGE,4],[se.GRAPHICS_DECONFLICTOR,4],[se.FILTER_VISIBILITY,4],[se.SCALE_VISIBILITY,4],[se.FRUSTUM_VISIBILITY,4],[se.POINT_OF_INTEREST_FREQUENT,6],[se.POINT_OF_INTEREST_INFREQUENT,30],[se.LABELER,8],[se.FEATURE_QUERY_ENGINE,8],[se.FEATURE_TILE_TREE,16],[se.FEATURE_TILE_TREE_ACTIVE,0],[se.ELEVATION_ALIGNMENT,12],[se.TEXT_TEXTURE_ATLAS,12],[se.CLOUDS_GENERATOR,12],[se.TEXTURE_UNLOAD,12],[se.LINE_OF_SIGHT_TOOL,16],[se.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[se.SNAPPING,0],[se.SHADOW_ACCUMULATOR,30]]);function ne(je){return le.has(je)?le.get(je):"number"==typeof je?je:1}var ce;!function(je){je[je.ANIMATING=0]="ANIMATING",je[je.INTERACTING=1]="INTERACTING",je[je.IDLE=2]="IDLE"}(ce||(ce={}));const de=(0,$.HA)(6.5),me=(0,$.HA)(1),_e=(0,$.HA)(30),he=(0,$.HA)(1e3/30),ye=(0,$.HA)(100);var De,ve;(function(je){let ze=class extends x.Z{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new W.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Ae,this._state=ce.INTERACTING,this._tasks=new Y.Z,this._runQueue=new Y.Z,this._load=0,this._idleStateCallbacks=new Y.Z,this._idleUpdatesStartFired=!1,this._maxReschedule=Le,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,G.YP)(()=>Z.Z.SCHEDULER_LOG_SLOW_TASKS,Pe=>this._debug=Pe,G.nn);for(const Pe of Object.keys(se))this.performanceInfo.tasks.set(se[Pe],new W.Z(se[Pe]));let we;const Be=this;this._test={get state(){return(0,U.Pt)(we,Be._state)},set state(Pe){we=Pe},FRAME_SAFETY_BUDGET:de,INTERACTING_BUDGET:he,IDLE_BUDGET:ye,get availableBudget(){return Be._budget.budget},usedBudget:0,getBudget:()=>Be._budget,setBudget:Pe=>Be._budget=Pe,updateTask:Pe=>this._updateTask(Pe),getState:Pe=>this._getState(Pe),getRuntime:Pe=>this._getRuntime(Pe),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(we=>we.remove()),this._tasks.clear(),(0,U.hw)(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=Le,this._schedule(),this.frame()))}))}registerTask(we,Be){const Pe=ne(we),Oe=new Ee(this,we,Be,Pe);return this._tasks.push(Oe),this.performanceInfo.tasks.has(we)||this.performanceInfo.tasks.set(we,new W.Z(we)),Oe}registerIdleStateCallbacks(we,Be){const Pe={idleBegin:we,idleEnd:Be};this._idleStateCallbacks.push(Pe),this.state===ce.IDLE&&this._idleUpdatesStartFired&&Pe.idleBegin();const Oe=this;return{remove:()=>this._removeIdleStateCallbacks(Pe),set idleBegin(Ke){Oe._idleUpdatesStartFired&&(Pe.idleEnd(),Oe._state===ce.IDLE&&Ke()),Pe.idleBegin=Ke},set idleEnd(Ke){Pe.idleEnd=Ke}}}get load(){return this._load}set state(we){this._state!==we&&(this._state=we,this.state!==ce.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(Be=>Be.idleEnd())))}get state(){return(0,U.Wi)(this._test.state)?this._state:this._test.state}updateBudget(we){this._test.usedBudget=0;let Be=de,Pe=we.frameDuration,Oe=me;switch(this.state){case ce.IDLE:Be=(0,$.HA)(0),Pe=(0,$.HA)(Math.max(ye,we.frameDuration)),Oe=_e;break;case ce.INTERACTING:Pe=(0,$.HA)(Math.max(he,we.frameDuration))}return Pe=(0,$.HA)(Pe-we.elapsedFrameTime-Be),this.state!==ce.IDLE&&Pe<me&&!this._forceTask?(this._forceTask=!0,!1):(Pe=(0,$.HA)(Math.max(Pe,Oe)),this._budget.reset(Pe,this.state),this._maxReschedule=Le,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ce.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(we=>we.idleBegin())),this._runIdle();break;case ce.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,$.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(we){this._idleUpdatesStartFired&&we.idleEnd(),this._idleStateCallbacks.removeUnordered(we)}removeTask(we){this._tasks.removeUnordered(we),this._runQueue.removeUnordered(we)}_updateTask(we){this._tasks.forAll(Be=>{Be.name===we&&Be.setPriority(we)})}_getState(we){if(this._runQueue.some(Pe=>Pe.name===we))return ve.SCHEDULED;let Be=ve.IDLE;return this._tasks.forAll(Pe=>{Pe.name===we&&Pe.needsUpdate&&(Pe.schedulePriority<=1?Be=ve.READY:Be!==ve.READY&&(Be=ve.WAITING))}),Be}_getRuntime(we){let Be=0;return this._tasks.forAll(Pe=>{Pe.name===we&&(Be+=Pe.runtime)}),Be}_resetRuntimes(){this._tasks.forAll(we=>we.runtime=0)}_getRunning(){const we=new Map;if(this._tasks.forAll(Pe=>{Pe.needsUpdate&&we.set(Pe.name,(we.get(Pe.name)||0)+1)}),0===we.size)return null;let Be="";return we.forEach((Pe,Oe)=>{Be+=Pe>1?` ${Pe}x ${Oe}`:` ${Oe}`}),Be}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const we=this._tasks.reduce((Be,Pe)=>Pe.needsUpdate?++Be:Be,0);this._load=.9*this._load+we*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(we=>!!we.needsUpdate||(we.schedulePriority=we.basePriority,!1)),this._tasks.forAll(we=>{0===we.basePriority&&we.needsUpdate&&!this._runQueue.includes(we)&&this._runQueue.unshift(we)});0===this._runQueue.length;){let we=!1,Be=0;if(this._tasks.forAll(Pe=>{Pe.needsUpdate&&0!==Pe.schedulePriority&&0!==Pe.basePriority&&(we=!0,Be=Math.max(Be,Pe.basePriority),1===Pe.schedulePriority?(Pe.schedulePriority=0,this._runQueue.push(Pe)):--Pe.schedulePriority)}),!we)return this.updating=!1,!1;this._maxReschedule===Le&&(this._maxReschedule=Be),--this._maxReschedule}return this.updating=!0,!0}_run(){const we=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const Be=this._budget.now(),Pe=this._runQueue.pop();this._budget.resetProgress();try{Pe.task.runTask(this._budget)}catch(Ke){Q.error(`Exception in task "${Pe.name}"`,Ke)}Pe.schedulePriority=Pe.basePriority;const Oe=this._budget.now()-Be;if(Pe.runtime+=Oe,this._frameTaskTimes.set(Pe.priority,this._frameTaskTimes.get(Pe.priority)+Oe),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",Pe.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(Ke=>Ke.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-we)}}while(this._schedule());this.updating=this._tasks.some(Be=>Be.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-we)}_startFrameTaskTimes(){for(const we of Object.keys(se))this._frameTaskTimes.set(se[we],0)}_recordFrameTaskTimes(we){this._frameTaskTimes.forEach((Be,Pe)=>this.performanceInfo.tasks.get(Pe).record(Be)),this.performanceInfo.total.record(we)}get test(){return this._test}};(0,D._)([(0,re.Cb)()],ze.prototype,"updating",void 0),ze=(0,D._)([(0,ie.j)("esri.views.support.Scheduler")],ze),je.Scheduler=ze;let Ee=class extends x.Z{constructor(we,Be,Pe,Oe){super({}),this._scheduler=we,this.name=Be,this._basePriority=Oe,this.runtime=0,this._queue=new X.b,this._handles=new w.Z,this.schedulePriority=this._basePriority,this.task=(0,U.pC)(Pe)?Pe:this._queue,this._handles.add((0,G.gx)(()=>this.task.running,()=>we.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(Ce),this._scheduler.removeTask(this),this.schedule=Te.schedule,this.reschedule=Te.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(we){this.name=we;const Be=ne(we);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=Be),this._basePriority=Be}get priority(){return this.name}set priority(we){this.setPriority(we)}get needsUpdate(){return this.updating||this.task.running}schedule(we,Be,Pe){return this._queue.push(we,Be,Pe)}reschedule(we,Be,Pe){return this._queue.unshift(we,Be,Pe)}processQueue(we){this._queue.runTask(we)}};(0,D._)([(0,re.Cb)({constructOnly:!0})],Ee.prototype,"task",void 0),(0,D._)([(0,re.Cb)({readOnly:!0})],Ee.prototype,"updating",null),Ee=(0,D._)([(0,ie.j)("esri.views.support.SchedulerTask")],Ee);class Ae{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=ce.IDLE,this._didWork=!1,this._enabled=!0}run(Be){return!this.done&&(!0===Be()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(Be){this._enabled=Be}reset(Be,Pe){this._begin=this.now(),this._budget=Be,this._state=Pe,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}je.Budget=Ae})(De||(De={})),function(je){je.SCHEDULED="s",je.READY="r",je.WAITING="w",je.IDLE="i"}(ve||(ve={}));const Ce=(()=>{const je=new De.Budget;return je.enabled=!1,je})(),Te=new class ge{remove(){}processQueue(){}schedule(ze,Ee,Ae){try{if((0,H.Hc)(Ee)){const we=(0,H.zE)();return Ae?Promise.resolve(Ae(we)):Promise.reject(we)}return(0,H.gx)(ze(Ce))}catch(we){return Promise.reject(we)}}reschedule(ze,Ee,Ae){return this.schedule(ze,Ee,Ae)}},Le=Number.MAX_SAFE_INTEGER},66463:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>G});var D=T(17626),x=T(14517),w=T(77712),Y=(T(85931),T(8314),T(90912),T(76898));let H=class extends x.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,D._)([(0,w.Cb)()],H.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,D._)([(0,w.Cb)()],H.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),H=(0,D._)([(0,Y.j)("esri.views.support.DebugFlags")],H);const G=new H},93579:(qe,xe,T)=>{"use strict";T.d(xe,{Av:()=>U,_1:()=>w,lu:()=>W,rs:()=>B,tl:()=>x});var D=T(62208);function x(Y){return Y&&"function"==typeof Y.highlight}function w(Y){return Y&&"function"==typeof Y.maskOccludee}function B(Y,H,G){return(0,D.Wi)(Y)||Y>G&&(0===H||Y<H)}function U(Y,H){return Y>0||H>0}function W(Y){const H=Y.effectiveScaleRange;return{minScale:H?.minScale??0,maxScale:H?.maxScale??0}}},41900:(qe,xe,T)=>{"use strict";T.d(xe,{Eu:()=>U,Rw:()=>Y,Sj:()=>B,s6:()=>W,vT:()=>w}),T(8314);var x=T(23841);function w(H){return(0,x.vW)(H.x,H.y)}function B(H){return(0,x.s1)(H.x,H.y)}function U(H,G){const $=(H instanceof HTMLElement?H:H.surface).getBoundingClientRect();return(0,x.vW)(G.clientX-$.left,G.clientY-$.top)}function W(H,G){return G instanceof Event?U(H,G):w(G)}function Y(H){if(H instanceof Event)return!0;if("object"==typeof H&&"type"in H)switch(H.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}},18605:(qe,xe,T)=>{"use strict";T.d(xe,{$3:()=>ee,Jl:()=>J,TT:()=>se,cv:()=>G,r7:()=>Q,uz:()=>H,v8:()=>$}),T(8314);var x=T(21286),w=T(62208);function Y(Ee,Ae){const{format:we,quality:Be,rotation:Pe,disableDecorations:Oe}=Ee||{},Ke=fe(Ee,Ae.padding),Ve=function _e(Ee,Ae){const we={x:0,y:0,width:Ae.width,height:Ae.height};if(Ee&&Ee.area){null!=Ee.area.x&&(we.x=Math.floor(Ee.area.x)),null!=Ee.area.y&&(we.y=Math.floor(Ee.area.y));const Be=null!=Ee.area.width?Math.floor(Ee.area.width):null,Pe=null!=Ee.area.height?Math.floor(Ee.area.height):null;if(we.width=Ae.width-we.x,we.height=Ae.height-we.y,null!=Be&&null!=Pe)we.width=Math.min(we.width,Be),we.height=Math.min(we.height,Pe);else if(null==Be&&null!=Pe){const Oe=Math.min(we.width,Be);we.height=Oe/we.width*we.height,we.width=Oe}else if(null!=Be&&null==Pe){const Oe=Math.min(we.height,Pe);we.width=Oe/we.height*we.width,we.height=Oe}}return function he(Ee,Ae){const we=Math.floor(Math.max(Ee.x,0)),Be=Math.floor(Math.max(Ee.y,0)),Pe={x:we,y:Be,width:Math.floor(Math.min(Ee.width,Ae.width-we)),height:Math.floor(Math.min(Ee.height,Ae.height-Be))},Oe=Pe.width/Pe.height,Ke=Ee.width/Ee.height;if(Ke===Oe)return Pe;if(Ke>Oe){const Ie=Math.floor(Pe.width/Ke);return{x:Pe.x,y:Math.floor(Pe.y+(Pe.height-Ie)/2),width:Pe.width,height:Ie}}const Ve=Math.floor(Pe.height*Ke);return{x:Math.floor(Pe.x+(Pe.width-Ve)/2),y:Pe.y,width:Ve,height:Pe.height}}(function ye(Ee,Ae){if(!Ae||null==Ae.width||null==Ae.height)return Ee;const we=Ae.width/Ae.height,Be=Ee.width/Ee.height;if(Be===we)return Ee;if(Be<we){const Oe=Math.floor(Ee.height*we);return Ee.x-=(Oe-Ee.width)/2,Ee.width=Oe,Ee}const Pe=Math.floor(Ee.width/we);return Ee.y-=(Pe-Ee.height)/2,Ee.height=Pe,Ee}(we,Ee),Ae)}(Ee,{width:Ae.width-Ke.left-Ke.right,height:Ae.height-Ke.top-Ke.bottom}),{width:Ne,height:Ie}=function me(Ee,Ae){if(!Ee)return Ae;const we=Ee.width,Be=Ee.height;if(null!=we&&null!=Be)return{width:Math.floor(we),height:Math.floor(Be)};if(null==we&&null==Be)return Ae;const Pe=Ae.width/Ae.height;return null==Be?{width:Math.floor(we),height:Math.floor(we/Pe)}:{width:Math.floor(Be*Pe),height:Math.floor(Be)}}(Ee,Ve),We=function De(Ee){switch(Ee){case"png":case"jpg":case"jpeg":return Ee;default:return Le}}(we);return{format:We,quality:(0,x.uZ)(Be??je[We],0,100),area:Ve,width:Ne,height:Ie,rotation:Pe,disableDecorations:!!Oe,ignoreBackground:!(!Ee||!Ee.ignoreBackground),ignorePadding:!(!Ee||!Ee.ignorePadding)}}function H(Ee,Ae){const we=Y(Ee,Ae),Be=we.area,Pe=we.width/Be.width,Oe=fe(we,Ae.padding),Ke=Oe.left+Oe.right,Ve=Oe.top+Oe.bottom,Ie=Ae.height-Ve,We=Math.floor((Ae.width-Ke)*Pe+Ke),Se=Math.floor(Ie*Pe+Ve),He=Ee&&Ee.layers?Ee.layers:[],$e=we.ignoreBackground,et=we.ignorePadding;return{framebufferWidth:We,framebufferHeight:Se,region:{x:Math.floor(Be.x*Pe)+Oe.left,y:Math.floor(Be.y*Pe)+Oe.top,width:we.width,height:we.height},format:we.format,quality:we.quality,rotation:we.rotation,pixelRatio:Pe,layers:He,disableDecorations:we.disableDecorations,ignoreBackground:$e,ignorePadding:et}}function G(Ee,Ae,we){const{ctx:Be,canvas:Pe}=re(Ee,we),Oe=Be.getImageData(0,0,Ee.width,Ee.height),Ke=function ie(Ee,Ae){return Ee.toDataURL(ge[Ae.format],Ae.quality/100)}(Pe,Ae);return ue(Pe),{dataUrl:Ke,data:Oe}}function $(Ee,Ae){const{ctx:we,canvas:Be}=re(Ee,Ae),Pe=we.getImageData(0,0,Ee.width,Ee.height);return ue(Be),Pe}function re(Ee,Ae){const we=function ae(){return(0,w.Wi)(oe)&&(oe=document.createElement("canvas")),oe}();Ae.premultipliedAlpha&&function Ce(Ee){const Ae=Ee.data,we=Ae.length;for(let Be=0;Be<we;Be+=4){const Pe=Ae[Be+3];if(255!==Pe&&Pe>0){const Oe=255/Pe;Ae[Be+0]=Ae[Be+0]*Oe,Ae[Be+1]=Ae[Be+1]*Oe,Ae[Be+2]=Ae[Be+2]*Oe}}}(Ee),we.width=Ee.width,we.height=Ee.height;const Be=we.getContext("2d");return Be.putImageData(Ee,0,0),Ae.flipY&&function ve(Ee){Ee.save(),Ee.globalCompositeOperation="copy",Ee.scale(1,-1),Ee.translate(0,-Ee.canvas.height),Ee.drawImage(Ee.canvas,0,0),Ee.restore()}(Be),{ctx:Be,canvas:we}}function ue(Ee){Ee.width=0,Ee.height=0}let oe=null;function Q(Ee,Ae,we){if(!Ee||!Ae)throw new Error("Cannot construct image data without dimensions");if(ce)try{return new ImageData(Ee,Ae)}catch{ce=!1}return le(Ee,Ae,we)}function J(Ee,Ae,we,Be){if(!Ae||!we)throw new Error("Cannot construct image data without dimensions");if(ce)try{return new ImageData(Ee,Ae,we)}catch{ce=!1}const Pe=le(Ae,we,Be);return Pe.data.set(Ee,0),Pe}function se(Ee,Ae,we,Be=0,Pe=0,Oe=Ee.width-Be,Ke=Ee.height-Pe,Ve=!1){const{data:Ne}=Ee,{width:Ie,height:We,data:Se}=Ae,He=Oe/Ie,$e=Ke/We,et=Math.ceil(He/2),nt=Math.ceil($e/2),it=Ee.width;for(let Xe=0;Xe<We;Xe++)for(let rt=0;rt<Ie;rt++){const Ze=4*(rt+(Ve?We-Xe-1:Xe)*Ie);let lt=0,st=0,Mt=0,Ft=0,kt=0,wt=0;const zt=(Xe+.5)*$e;for(let Zt=Math.floor(Xe*$e);Zt<(Xe+1)*$e;Zt++){const ar=Math.abs(zt-(Zt+.5))/nt,Pr=(rt+.5)*He,kr=ar*ar;for(let ss=Math.floor(rt*He);ss<(rt+1)*He;ss++){const os=Math.abs(Pr-(ss+.5))/et,Hr=Math.sqrt(kr+os*os);if(Hr>=1)continue;let pt=2*Hr*Hr*Hr-3*Hr*Hr+1;const Ut=4*(Be+ss+(Pe+Zt)*it);wt+=pt*Ne[Ut+3],st+=pt,!we&&Ne[Ut+3]<255&&(pt=pt*Ne[Ut+3]/255),Mt+=pt*Ne[Ut],Ft+=pt*Ne[Ut+1],kt+=pt*Ne[Ut+2],lt+=pt}}Se[Ze]=Mt/lt,Se[Ze+1]=Ft/lt,Se[Ze+2]=kt/lt,Se[Ze+3]=wt/st}return Ae}function ee(Ee,Ae,we){if(!Ae)return Ee;const{framebufferWidth:Be,framebufferHeight:Pe,pixelRatio:Oe,region:Ke}=Ee,Ve=fe(Ee,we),Ne=Ve.left+Ve.right,Ie=Ve.top+Ve.bottom,We=Be-Ne,Se=Pe-Ie,He=Math.min(8,Math.min((2048-Ne)/We,(2048-Ie)/Se));return He<1.5?Ee:{...Ee,framebufferWidth:Math.round(We*He)+Ne,framebufferHeight:Math.round(Se*He)+Ie,pixelRatio:Oe*He,resample:{region:{x:Math.round((Ke.x-Ve.left)*He)+Ve.left,y:Math.round((Ke.y-Ve.top)*He)+Ve.top,width:Math.round(Ke.width*He),height:Math.round(Ke.height*He)},width:Be,height:Pe}}}function le(Ee,Ae,we){return we||(we=function de(){return ne||(ne=document.createElement("canvas"),ne.width=1,ne.height=1),ne}()),we.getContext("2d").createImageData(Ee,Ae)}let ne=null,ce=!0;function fe(Ee,Ae){return!Ae||Ee&&Ee.ignorePadding?ze:Ae}const ge={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Le="png",je={png:100,jpg:98,jpeg:98},ze={top:0,right:0,bottom:0,left:0}},86080:(qe,xe,T)=>{"use strict";T.d(xe,{D:()=>w});var D=T(6178),x=T(59617);function w(B,U){return null!=B&&(null==U||(U===x.JY.Local?!B.isGeographic||B.isWGS84||B.wkid===D.W.CGCS2000:B.isWebMercator||B.isWGS84||B.wkid===D.W.CGCS2000||B.wkid===D.W.GCSMARS2000||B.wkid===D.W.GCSMARS2000_SPHERE||B.wkid===D.W.GCSMOON2000))}},83994:(qe,xe,T)=>{"use strict";T.d(xe,{f:()=>re});var D=T(15861),x=T(85931),w=T(63290),B=T(62208),U=T(55713),W=T(68598),Y=T(57596),H=T(67969);const G=w.Z.getLogger("esri.views.webgl.BufferObject");class re{constructor(ae,oe,ie,X){this._context=ae,this.bufferType=oe,this.usage=ie,this._glName=null,this._size=-1,this._indexType=void 0,ae.instanceCounter.increment(H._g.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,W.zu)(this._context.gl),X&&this.setData(X)}static createIndex(ae,oe,ie){return new re(ae,H.w0.ELEMENT_ARRAY_BUFFER,oe,ie)}static createVertex(ae,oe,ie){return new re(ae,H.w0.ARRAY_BUFFER,oe,ie)}static createUniform(ae,oe,ie){if(ae.type!==Y.zO.WEBGL2)throw new Error("Uniform buffers are supported in WebGL2 only!");return new re(ae,H.w0.UNIFORM_BUFFER,oe,ie)}static createPixelPack(ae,oe=H.l1.STREAM_READ,ie){if(ae.type!==Y.zO.WEBGL2)throw new Error("Pixel pack buffers are supported in WebGL2 only!");const X=new re(ae,H.w0.PIXEL_PACK_BUFFER,oe);return ie&&X.setSize(ie),X}static createPixelUnpack(ae,oe=H.l1.STREAM_DRAW,ie){if(ae.type!==Y.zO.WEBGL2)throw new Error("Pixel unpack buffers are supported in WebGL2 only!");return new re(ae,H.w0.PIXEL_UNPACK_BUFFER,oe,ie)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return this.bufferType===H.w0.ELEMENT_ARRAY_BUFFER?this._indexType===H.g.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===H.w0.ELEMENT_ARRAY_BUFFER||this.bufferType===H.w0.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(H._g.BufferObject,this),this._context=null):this._glName&&G.warn("Leaked WebGL buffer object")}setSize(ae,oe=null){if(ae<=0&&G.error("Buffer size needs to be positive!"),this.bufferType===H.w0.ELEMENT_ARRAY_BUFFER&&(0,B.pC)(oe))switch(this._indexType=oe,oe){case H.g.UNSIGNED_SHORT:ae*=2;break;case H.g.UNSIGNED_INT:ae*=4}this._setBufferData(ae)}setData(ae){if(!ae)return;let oe=ae.byteLength;this.bufferType===H.w0.ELEMENT_ARRAY_BUFFER&&((0,U.Uc)(ae)&&(oe/=2,this._indexType=H.g.UNSIGNED_SHORT),(0,U.ZY)(ae)&&(oe/=4,this._indexType=H.g.UNSIGNED_INT)),this._setBufferData(oe,ae)}_setBufferData(ae,oe=null){this._size=ae;const ie=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const X=this._context.gl;(0,B.pC)(oe)?X.bufferData(this.bufferType,oe,this.usage):X.bufferData(this.bufferType,ae,this.usage),(0,W.zu)(X),this._isVAOAware&&this._context.bindVAO(ie)}setSubData(ae,oe=0,ie=0,X=ae.byteLength){if(!ae)return;(oe<0||oe>=this._size)&&G.error("offset is out of range!");let Z=oe,Q=ie,J=X,se=ae.byteLength;this.bufferType===H.w0.ELEMENT_ARRAY_BUFFER&&((0,U.Uc)(ae)?(se/=2,Z*=2,Q*=2,J*=2):(0,U.ZY)(ae)&&(se/=4,Z*=4,Q*=4,J*=4)),void 0===X&&(X=se-1),ie>=X&&G.error("end must be bigger than start!"),oe+ie-X>this._size&&G.error("An attempt to write beyond the end of the buffer!");const ee=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const le=this._context.gl,ne=ArrayBuffer.isView(ae)?ae.buffer:ae,ce=0===Q&&J===ae.byteLength?ne:ne.slice(Q,J);le.bufferSubData(this.bufferType,Z,ce),(0,W.zu)(le),this._isVAOAware&&this._context.bindVAO(ee)}setSubDataFromView(ae,oe,ie,X){if(!ae)return;(oe<0||oe>=this._size)&&G.error("offset is out of range!"),ie>=X&&G.error("end must be bigger than start!"),oe+ie-X>this._size&&G.error("An attempt to write beyond the end of the buffer!");const Z=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const Q=this._context.gl;if(this._context.type===Y.zO.WEBGL2)Q.bufferSubData(this.bufferType,oe*ae.BYTES_PER_ELEMENT,ae,ie,X-ie);else{const J=0===ie&&X===ae.length?ae:ae.subarray(ie,X);Q.bufferSubData(this.bufferType,oe*ae.BYTES_PER_ELEMENT,J)}(0,W.zu)(Q),this._isVAOAware&&this._context.bindVAO(Z)}getSubData(ae,oe=0,ie,X){if(this._context.type!==Y.zO.WEBGL2)return void G.error("Get buffer subdata is supported in WebGL2 only!");if(ie<0||X<0)return void G.error("Problem getting subdata: offset and length were less than zero!");const Z=function $(ue){return(0,x.zG)(ue)}(ae)?ae.BYTES_PER_ELEMENT:1;if(Z*((ie??0)+(X??0))>ae.byteLength)return void G.error("Problem getting subdata: offset and length exceeded destination size!");oe+Z*(X??0)>this.byteSize&&G.warn("Potential problem getting subdata: requested data exceeds buffer size!");const Q=this._context.gl;this._context.bindBuffer(this,H.w0.COPY_READ_BUFFER),Q.getBufferSubData(H.w0.COPY_READ_BUFFER,oe,ae,ie,X),this._context.unbindBuffer(H.w0.COPY_READ_BUFFER)}getSubDataAsync(ae,oe=0,ie,X){var Z=this;return(0,D.Z)(function*(){Z._context.type===Y.zO.WEBGL2?(yield Z._context.clientWaitAsync(),Z.getSubData(ae,oe,ie,X)):G.error("Get buffer subdata is supported in WebGL2 only!")})()}}},85775:(qe,xe,T)=>{"use strict";T.d(xe,{X:()=>ue});var D=T(15861),x=T(63290),w=T(62208),B=T(83994),U=T(68598),W=T(57596),Y=T(67969),H=T(49266),G=T(55086),$=T(26906);const re=x.Z.getLogger("esri.views.webgl.FrameBufferObject");class ue{constructor(ee,le,ne=null,ce=null){if(this._context=ee,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...le},ee.instanceCounter.increment(Y._g.FramebufferObject,this),(0,w.pC)(ne)){Array.isArray(ne)||(ne=[ne]);for(let de=0;de<ne.length;++de){const me=ne[de],_e=Y.VY.COLOR_ATTACHMENT0+de;let he;ie(me)?(ae(me)?(he=me.descriptor,this._colorAttachments.set(_e,me)):(he=me,this._colorAttachments.set(_e,new G.x(this._context,he))),Z(he,this._desc)):(oe(me)?(he=me.descriptor,this._colorAttachments.set(_e,me)):(he=me,this._colorAttachments.set(_e,new H.r(this._context,he))),Q(he,this._desc)),this._validateColorAttachmentPoint(_e)}}if((0,w.pC)(ce)){let de,me;if(ie(ce))this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),ae(ce)?(me=ce.descriptor,this._depthStencilTexture=ce):(me=ce,this._depthStencilTexture=new G.x(this._context,me)),Z(me,this._desc);else{oe(ce)?(me=ce.descriptor,de=ce):(me=ce,de=new H.r(this._context,me));const _e=this._desc.depthStencilTarget??Y.OU.DEPTH_STENCIL_RENDER_BUFFER;_e===Y.OU.STENCIL_RENDER_BUFFER?this._stencilAttachment=de:_e===Y.OU.DEPTH_RENDER_BUFFER||_e===Y.OU.DEPTH_STENCIL_RENDER_BUFFER?this._depthAttachment=de:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),Q(me,this._desc)}}}dispose(){if(!this._desc)return;const ee=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(ee),this._context.instanceCounter.decrement(Y._g.FramebufferObject,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const ee=this._colorAttachments.get(Y.VY.COLOR_ATTACHMENT0);return ee&&ae(ee)?ee:null}get colorAttachment(){return this._colorAttachments.get(Y.VY.COLOR_ATTACHMENT0)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}get gpuMemoryUsage(){return[...this._colorAttachments].reduce((ee,[le,ne])=>ee+(0,$.un)(ne),0)+(0,$.un)(this.depthStencilAttachment)}getColorTexture(ee){const le=this._colorAttachments.get(ee);return le&&ae(le)?le:null}attachColorTexture(ee,le=Y.VY.COLOR_ATTACHMENT0){!ee||(this._validateColorAttachmentPoint(le),Z(ee.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(ee.glName,le)),this._colorAttachments.set(le,ee))}detachColorTexture(ee=Y.VY.COLOR_ATTACHMENT0){const le=this._colorAttachments.get(ee);if(ae(le)){const ne=le;return this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,ee)),this._colorAttachments.delete(ee),ne}}setColorTextureTarget(ee,le=Y.VY.COLOR_ATTACHMENT0){const ne=this._colorAttachments.get(le);ae(ne)&&this._framebufferTexture2D(ne.glName,le,ee)}attachDepthStencilTexture(ee){if((0,w.Wi)(ee))return;const le=ee.descriptor;le.pixelFormat!==Y.VI.DEPTH_STENCIL&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),le.dataType!==Y.Br.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),Z(le,this._desc),this._desc.depthStencilTarget&&this._desc.depthStencilTarget!==Y.OU.DEPTH_STENCIL_TEXTURE&&(this._desc.depthStencilTarget=Y.OU.DEPTH_STENCIL_TEXTURE),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(ee.glName,Y.Lu)),this._depthStencilTexture=ee}detachDepthStencilTexture(){const ee=this._depthStencilTexture;return ee&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,Y.Lu)),this._depthStencilTexture=null,ee}attachDepthStencilBuffer(ee){if((0,w.Wi)(ee))return;const le=ee.descriptor;if(le.internalFormat!==Y.Tg.DEPTH_STENCIL&&le.internalFormat!==Y.Tg.DEPTH_COMPONENT16&&console.error("Depth/Stencil buffer must have correct internalFormat"),Q(le,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=le.internalFormat===Y.Tg.DEPTH_STENCIL?Y.OU.DEPTH_STENCIL_RENDER_BUFFER:Y.OU.DEPTH_RENDER_BUFFER,this._initialized){this._context.bindFramebuffer(this);const ne=this._context.gl;ne.framebufferRenderbuffer(Y.qi.FRAMEBUFFER,this._desc.depthStencilTarget===Y.OU.DEPTH_RENDER_BUFFER?ne.DEPTH_ATTACHMENT:ne.DEPTH_STENCIL_ATTACHMENT,ne.RENDERBUFFER,ee.glName)}this._depthAttachment=ee}detachDepthStencilBuffer(){const ee=this._context.gl,le=this._depthAttachment;return le&&this._initialized&&(this._context.bindFramebuffer(this),ee.framebufferRenderbuffer(Y.qi.FRAMEBUFFER,this._desc.depthStencilTarget===Y.OU.DEPTH_RENDER_BUFFER?ee.DEPTH_ATTACHMENT:ee.DEPTH_STENCIL_ATTACHMENT,ee.RENDERBUFFER,null)),this._depthAttachment=null,le}detachAll(){this._colorAttachments.forEach((ee,le)=>this._detachColorAttachment(le)),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}copyToTexture(ee,le,ne,ce,de,me,_e){(ee<0||le<0||de<0||me<0)&&console.error("Offsets cannot be negative!"),(ne<=0||ce<=0)&&console.error("Copy width and height must be greater than zero!");const he=this._desc,ye=_e.descriptor;_e.descriptor.target!==Y.No.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(ee+ne>he.width||le+ce>he.height||de+ne>ye.width||me+ce>ye.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const fe=this._context,De=fe.bindTexture(_e,G.x.TEXTURE_UNIT_FOR_UPDATES);fe.setActiveTexture(G.x.TEXTURE_UNIT_FOR_UPDATES),fe.bindFramebuffer(this),fe.gl.copyTexSubImage2D(Y.No.TEXTURE_2D,0,de,me,ee,le,ne,ce),fe.bindTexture(De,G.x.TEXTURE_UNIT_FOR_UPDATES)}readPixels(ee,le,ne,ce,de,me,_e){(ne<=0||ce<=0)&&console.error("Copy width and height must be greater than zero!"),_e||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(ee,le,ne,ce,de,me,_e)}readPixelsAsync(ee,le,ne,ce,de,me,_e){var he=this;return(0,D.Z)(function*(){if(he._context.type!==W.zO.WEBGL2)return(0,U.hZ)()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),void he.readPixels(ee,le,ne,ce,de,me,_e);const ye=he._context.gl,fe=B.f.createPixelPack(he._context,Y.l1.STREAM_READ,_e.byteLength);he._context.bindBuffer(fe),he._context.bindFramebuffer(he),ye.readPixels(ee,le,ne,ce,de,me,0),he._context.unbindBuffer(Y.w0.PIXEL_PACK_BUFFER),yield fe.getSubDataAsync(_e),fe.dispose()})()}resize(ee,le){const ne=this._desc;if(ne.width!==ee||ne.height!==le){if(!this._initialized)return ne.width=ee,ne.height=le,this._colorAttachments.forEach(ce=>{ce&&ce.resize(ee,le)}),void(this._depthStencilTexture&&this._depthStencilTexture.resize(ee,le));ne.width=ee,ne.height=le,this._colorAttachments.forEach(ce=>{ce&&ce.resize(ee,le)}),null!=this._depthStencilTexture?this._depthStencilTexture.resize(ee,le):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(ee,le),this._stencilAttachment&&this._stencilAttachment.resize(ee,le)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(ee=Y.qi.FRAMEBUFFER){const le=this._context.gl;if(this._initialized)return void le.bindFramebuffer(ee,this.glName);this._glName&&le.deleteFramebuffer(this._glName);const ne=this._context,ce=le.createFramebuffer(),de=this._desc,me=de.colorTarget??Y.Lm.RENDER_BUFFER,_e=de.width??1,he=de.height??1;if(le.bindFramebuffer(ee,ce),0===this._colorAttachments.size)if(me===Y.Lm.TEXTURE||me===Y.Lm.CUBEMAP)this._colorAttachments.set(Y.VY.COLOR_ATTACHMENT0,function X(se,ee,le){return new G.x(se,{target:le,pixelFormat:Y.VI.RGBA,dataType:Y.Br.UNSIGNED_BYTE,samplingMode:Y.cw.NEAREST,wrapMode:Y.e8.CLAMP_TO_EDGE,width:ee.width,height:ee.height})}(ne,de,this.descriptor.colorTarget===Y.Lm.CUBEMAP?Y.No.TEXTURE_CUBE_MAP:Y.No.TEXTURE_2D));else{const fe=new H.r(ne,{internalFormat:Y.lP.RGBA4,width:_e,height:he});this._colorAttachments.set(Y.VY.COLOR_ATTACHMENT0,fe)}this._colorAttachments.forEach((fe,De)=>{fe&&(ae(fe)?this._framebufferTexture2D(fe.glName,De,J(fe),ee):le.framebufferRenderbuffer(ee,De,le.RENDERBUFFER,fe.glName))});const ye=de.depthStencilTarget??Y.OU.NONE;switch(ye){case Y.OU.DEPTH_RENDER_BUFFER:case Y.OU.DEPTH_STENCIL_RENDER_BUFFER:this._depthAttachment||(this._depthAttachment=new H.r(ne,{internalFormat:de.depthStencilTarget===Y.OU.DEPTH_RENDER_BUFFER?Y.Tg.DEPTH_COMPONENT16:Y.Tg.DEPTH_STENCIL,width:_e,height:he})),le.framebufferRenderbuffer(ee,ye===Y.OU.DEPTH_RENDER_BUFFER?le.DEPTH_ATTACHMENT:le.DEPTH_STENCIL_ATTACHMENT,le.RENDERBUFFER,this._depthAttachment.glName);break;case Y.OU.STENCIL_RENDER_BUFFER:this._stencilAttachment||(this._stencilAttachment=new H.r(ne,{internalFormat:Y.Tg.STENCIL_INDEX8,width:_e,height:he})),le.framebufferRenderbuffer(ee,le.STENCIL_ATTACHMENT,le.RENDERBUFFER,this._stencilAttachment.glName);break;case Y.OU.DEPTH_STENCIL_TEXTURE:this._depthStencilTexture||(ne.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new G.x(ne,{target:Y.No.TEXTURE_2D,pixelFormat:Y.VI.DEPTH_STENCIL,dataType:Y.Br.UNSIGNED_INT_24_8,samplingMode:Y.cw.NEAREST,wrapMode:Y.e8.CLAMP_TO_EDGE,width:_e,height:he})),this._framebufferTexture2D(this._depthStencilTexture.glName,le.DEPTH_STENCIL_ATTACHMENT,J(this._depthStencilTexture),ee)}(0,U.CG)()&&le.checkFramebufferStatus(ee)!==le.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=ce,this._initialized=!0}_framebufferTexture2D(ee,le=Y.VY.COLOR_ATTACHMENT0,ne=Y.No.TEXTURE_2D,ce=Y.qi.FRAMEBUFFER,de=0){this._context.gl.framebufferTexture2D(ce,le,ne,ee,de)}_detachColorAttachment(ee){(0,U.hZ)()&&console.warn("Detaching an FBO attachment can be a slow due to invalidating framebuffer completeness!");const le=this._context.gl,ne=this._colorAttachments.get(ee);return ae(ne)?this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,ee)):this._initialized&&(this._context.bindFramebuffer(this),le.framebufferRenderbuffer(Y.qi.FRAMEBUFFER,ee,le.RENDERBUFFER,null)),this._colorAttachments.delete(ee),ne}_disposeColorAttachments(){this._colorAttachments.forEach((ee,le)=>{this._detachColorAttachment(le),ee.dispose()}),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const ee=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),ee.framebufferRenderbuffer(Y.qi.FRAMEBUFFER,this._desc.depthStencilTarget===Y.OU.DEPTH_RENDER_BUFFER?ee.DEPTH_ATTACHMENT:ee.DEPTH_STENCIL_ATTACHMENT,ee.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null),this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),ee.framebufferRenderbuffer(Y.qi.FRAMEBUFFER,ee.STENCIL_ATTACHMENT,ee.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,ee.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}_validateColorAttachmentPoint(ee){if(-1===ue._MAX_COLOR_ATTACHMENTS){const ne=this._context.capabilities.drawBuffers;ue._MAX_COLOR_ATTACHMENTS=ne?this._context.gl.getParameter(ne.MAX_COLOR_ATTACHMENTS):1}const le=ee-Y.VY.COLOR_ATTACHMENT0;le+1>ue._MAX_COLOR_ATTACHMENTS&&re.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${le+1}. Implementation supports up to ${ue._MAX_COLOR_ATTACHMENTS} color attachments`)}}function ae(se){return"type"in se&&"texture"===se.type}function oe(se){return"type"in se&&"renderbuffer"===se.type}function ie(se){return ae(se)||"pixelFormat"in se}function Z(se,ee){se.target!==Y.No.TEXTURE_2D&&se.target!==Y.No.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),void 0!==ee.width&&ee.width>=0&&void 0!==ee.height&&ee.height>=0?ee.width===se.width&&ee.height===se.height||console.error("Color attachment texture must match the framebuffer's!"):(ee.width=se.width,ee.height=se.height)}function Q(se,ee){void 0!==ee.width&&ee.width>=0&&void 0!==ee.height&&ee.height>=0?ee.width===se.width&&ee.height===se.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(ee.width=se.width,ee.height=se.height)}function J(se){return se.descriptor.target===Y.No.TEXTURE_CUBE_MAP?Y.No.TEXTURE_CUBE_MAP_POSITIVE_X:Y.No.TEXTURE_2D}ue._MAX_COLOR_ATTACHMENTS=-1},21285:(qe,xe,T)=>{"use strict";T.d(xe,{$:()=>We});var D=T(85931),w=(T(8314),T(62208)),B=T(68598),U=T(57596),W=T(67969);const Y=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"];var G,$={exports:{}};void 0!==(G=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&($.exports=G);const re=$.exports;var Xe,ae={exports:{}};void 0!==(Xe=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(ae.exports=Xe);const oe=ae.exports;var rt,ie={exports:{}};void 0!==(rt=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(ie.exports=rt);const X=ie.exports;var Z=999,De=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function ge(it){return function Ce(it){var Xe=function ve(){var it,Xe,rt,Ze=0,lt=0,st=Z,Mt=[],Ft=[],kt=1,wt=0,zt=0,Zt=!1,ar=!1,Pr="";return function(Jr){return Ft=[],null!==Jr?function ss(Jr){var ns;for(Ze=0,rt=(Pr+=Jr).length;it=Pr[Ze],Ze<rt;){switch(ns=Ze,st){case 0:Ze="/"===it&&"*"===Xe?(Mt.push(it),kr(Mt.join("")),st=Z,Ze+1):(Mt.push(it),Xe=it,Ze+1);break;case 1:case 2:Ze=Ut();break;case 3:Ze=_r();break;case 4:Ze="."===it||/[eE]/.test(it)?(Mt.push(it),st=5,Xe=it,Ze+1):"x"===it&&1===Mt.length&&"0"===Mt[0]?(st=11,Mt.push(it),Xe=it,Ze+1):/[^\d]/.test(it)?(kr(Mt.join("")),st=Z,Ze):(Mt.push(it),Xe=it,Ze+1);break;case 11:Ze=/[^a-fA-F0-9]/.test(it)?(kr(Mt.join("")),st=Z,Ze):(Mt.push(it),Xe=it,Ze+1);break;case 5:"f"===it&&(Mt.push(it),Xe=it,Ze+=1),Ze=/[eE]/.test(it)||"-"===it&&/[eE]/.test(Xe)?(Mt.push(it),Xe=it,Ze+1):/[^\d]/.test(it)?(kr(Mt.join("")),st=Z,Ze):(Mt.push(it),Xe=it,Ze+1);break;case 9999:Ze=Gr();break;case 9:Ze=/[^\s]/g.test(it)?(kr(Mt.join("")),st=Z,Ze):(Mt.push(it),Xe=it,Ze+1);break;case Z:Mt=Mt.length?[]:Mt,Ze="/"===Xe&&"*"===it?(zt=lt+Ze-1,st=0,Xe=it,Ze+1):"/"===Xe&&"/"===it?(zt=lt+Ze-1,st=1,Xe=it,Ze+1):"#"===it?(st=2,zt=lt+Ze,Ze):/\s/.test(it)?(st=9,zt=lt+Ze,Ze):(Zt=/\d/.test(it),ar=/[^\w_]/.test(it),zt=lt+Ze,st=Zt?4:ar?3:9999,Ze)}ns!==Ze&&("\n"===Pr[ns]?(wt=0,++kt):++wt)}return lt+=Ze,Pr=Pr.slice(Ze),Ft}(Jr.replace?Jr.replace(/\r\n/g,"\n"):Jr):function os(Jr){return Mt.length&&kr(Mt.join("")),st=10,kr("(eof)"),Ft}()};function kr(Jr){Jr.length&&Ft.push({type:De[st],data:Jr,position:zt,line:kt,column:wt})}function Ut(){return"\r"!==it&&"\n"!==it||"\\"===Xe?(Mt.push(it),Xe=it,Ze+1):(kr(Mt.join("")),st=Z,Ze)}function _r(){if("."===Xe&&/\d/.test(it))return st=5,Ze;if("/"===Xe&&"*"===it)return st=0,Ze;if("/"===Xe&&"/"===it)return st=1,Ze;if("."===it&&Mt.length){for(;hr(Mt););return st=5,Ze}if(";"===it||")"===it||"("===it){if(Mt.length)for(;hr(Mt););return kr(it),st=Z,Ze+1}var Jr=2===Mt.length&&"="!==it;if(/[\w_\d\s]/.test(it)||Jr){for(;hr(Mt););return st=Z,Ze}return Mt.push(it),Xe=it,Ze+1}function hr(Jr){for(var ns,lr,Tr=0;;){if(ns=oe.indexOf(Jr.slice(0,Jr.length+Tr).join("")),lr=oe[ns],-1===ns){if(Tr--+Jr.length>0)continue;lr=Jr.slice(0,1).join("")}return kr(lr),zt+=lr.length,(Mt=Mt.slice(lr.length)).length}}function Gr(){if(/[^\d\w_]/.test(it)){var Jr=Mt.join("");return st=re.indexOf(Jr)>-1?8:X.indexOf(Jr)>-1?7:6,kr(Mt.join("")),st=Z,Ze}return Mt.push(it),Xe=it,Ze+1}}(),rt=[];return(rt=rt.concat(Xe(it))).concat(Xe(null))}(it)}const Le=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function ze(it,Xe){for(let rt=Xe-1;rt>=0;rt--){const Ze=it[rt];if("whitespace"!==Ze.type&&"block-comment"!==Ze.type){if("keyword"!==Ze.type)break;if("attribute"===Ze.data||"in"===Ze.data)return!0}}return!1}function Ee(it,Xe,rt,Ze){Ze=Ze||rt;for(const lt of it)if("ident"===lt.type&&lt.data===rt)return Ze in Xe?Xe[Ze]++:Xe[Ze]=0,Ee(it,Xe,Ze+"_"+Xe[Ze],Ze);return rt}function Ae(it,Xe,rt="afterVersion"){function Ze(kt,wt){for(let zt=wt;zt<kt.length;zt++){const Zt=kt[zt];if("operator"===Zt.type&&";"===Zt.data)return zt}return null}const st={data:"\n",type:"whitespace"},Mt=kt=>kt<it.length&&/[^\r\n]$/.test(it[kt].data);let Ft=function lt(kt){let wt=-1,zt=0,Zt=-1;for(let ar=0;ar<kt.length;ar++){const Pr=kt[ar];if("preprocessor"===Pr.type&&(Pr.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++zt:Pr.data.match(/\#endif\s*.*/)&&--zt),"afterVersion"!==rt&&"afterPrecision"!==rt||"preprocessor"===Pr.type&&/^#version/.test(Pr.data)&&(Zt=Math.max(Zt,ar)),"afterPrecision"===rt&&"keyword"===Pr.type&&"precision"===Pr.data){const kr=Ze(kt,ar);if(null===kr)throw new Error("precision statement not followed by any semicolons!");Zt=Math.max(Zt,kr)}wt<Zt&&0===zt&&(wt=ar)}return wt+1}(it);Mt(Ft-1)&&it.splice(Ft++,0,st);for(const kt of Xe)it.splice(Ft++,0,kt);Mt(Ft-1)&&Mt(Ft)&&it.splice(Ft,0,st)}function we(it,Xe,rt,Ze="lowp"){Ae(it,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:Ze},{type:"whitespace",data:" "},{type:"keyword",data:rt},{type:"whitespace",data:" "},{type:"ident",data:Xe},{type:"operator",data:";"}],"afterPrecision")}function Be(it,Xe,rt,Ze,lt="lowp"){Ae(it,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:Ze.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:lt},{type:"whitespace",data:" "},{type:"keyword",data:rt},{type:"whitespace",data:" "},{type:"ident",data:Xe},{type:"operator",data:";"}],"afterPrecision")}function Pe(it,Xe){let rt,Ze,lt=-1;for(let st=Xe;st<it.length;st++){const Mt=it[st];if("operator"===Mt.type&&("["===Mt.data&&(rt=st),"]"===Mt.data)){Ze=st;break}"integer"===Mt.type&&(lt=parseInt(Mt.data,10))}return rt&&Ze&&it.splice(rt,Ze-rt+1),lt}function Oe(it,Xe){if((0,w.pC)(null))return null;const Ze=ge(it);if("300 es"===function je(it,Xe="100",rt="300 es"){const Ze=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const lt of it)if("preprocessor"===lt.type){const st=Ze.exec(lt.data);if(st){const Mt=st[1].replace(/\s\s+/g," ");if(Mt===rt)return Mt;if(Mt===Xe)return lt.data="#version "+rt,Xe;throw new Error("unknown glsl version: "+Mt)}}return it.splice(0,0,{type:"preprocessor",data:"#version "+rt},{type:"whitespace",data:"\n"}),null}(Ze,"100","300 es"))return it;let lt=null,st=null;const Mt={},Ft={};for(let kt=0;kt<Ze.length;++kt){const wt=Ze[kt];switch(wt.type){case"keyword":Xe===W.Ho.VERTEX_SHADER&&"attribute"===wt.data?wt.data="in":"varying"===wt.data&&(wt.data=Xe===W.Ho.VERTEX_SHADER?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(wt.data.trim())&&(wt.data=wt.data.replace(/(2D|Cube|EXT)/g,"")),Xe===W.Ho.FRAGMENT_SHADER&&"gl_FragColor"===wt.data&&(lt||(lt=Ee(Ze,Mt,"fragColor"),we(Ze,lt,"vec4")),wt.data=lt),Xe===W.Ho.FRAGMENT_SHADER&&"gl_FragData"===wt.data){const zt=Pe(Ze,kt+1),Zt=Ee(Ze,Mt,"fragData");Be(Ze,Zt,"vec4",zt,"mediump"),wt.data=Zt}else Xe===W.Ho.FRAGMENT_SHADER&&"gl_FragDepthEXT"===wt.data&&(st||(st=Ee(Ze,Mt,"gl_FragDepth")),wt.data=st);break;case"ident":if(Y.includes(wt.data)){if(Xe===W.Ho.VERTEX_SHADER&&ze(Ze,kt))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");wt.data in Ft||(Ft[wt.data]=Ee(Ze,Mt,wt.data)),wt.data=Ft[wt.data]}}}for(let kt=Ze.length-1;kt>=0;--kt){const wt=Ze[kt];if("preprocessor"===wt.type){const zt=wt.data.match(/\#extension\s+(.*)\:/);if(zt&&zt[1]&&Le.includes(zt[1].trim())){const Pr=Ze[kt+1];Ze.splice(kt,Pr&&"whitespace"===Pr.type?2:1)}const Zt=wt.data.match(/\#ifdef\s+(.*)/);Zt&&Zt[1]&&Le.includes(Zt[1].trim())&&(wt.data="#if 1");const ar=wt.data.match(/\#ifndef\s+(.*)/);ar&&ar[1]&&Le.includes(ar[1].trim())&&(wt.data="#if 0")}}return function Ne(it,Xe){return Xe}(0,function Te(it){return it.map(Xe=>"eof"!==Xe.type?Xe.data:"").join("")}(Ze))}class We{constructor(Xe,rt,Ze,lt,st=new Map){this._context=Xe,this._locations=lt,this._uniformBlockBindings=st,this._refCount=1,this._compiled=!1,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v=new Map,this._nameToUniform2=new Map,this._nameToUniform3=new Map,this._nameToUniform4=new Map,this._nameToUniformMatrix3=new Map,this._nameToUniformMatrix4=new Map,Xe||console.error("RenderingContext isn't initialized!"),0===rt.length&&console.error("Shaders source should not be empty!"),this._context.type===U.zO.WEBGL2&&(rt=Oe(rt,W.Ho.VERTEX_SHADER),Ze=Oe(Ze,W.Ho.FRAGMENT_SHADER)),this._vShader=Se(this._context,W.Ho.VERTEX_SHADER,rt),this._fShader=Se(this._context,W.Ho.FRAGMENT_SHADER,Ze),this._vShader&&this._fShader||console.error("Error loading shaders!"),this._context.instanceCounter.increment(W._g.Shader,this),(0,B.CG)()&&(this.vertexShader=rt,this.fragmentShader=Ze)}get glName(){if((0,w.pC)(this._glName))return this._glName;if((0,w.Wi)(this._vShader))return null;const Xe=this._context.gl,rt=Xe.createProgram();if(Xe.attachShader(rt,this._vShader),Xe.attachShader(rt,this._fShader),this._locations.forEach((Ze,lt)=>Xe.bindAttribLocation(rt,Ze,lt)),Xe.linkProgram(rt),(0,B.CG)()&&!Xe.getProgramParameter(rt,Xe.LINK_STATUS)&&console.error(`Could not link shader\nvalidated: ${Xe.getProgramParameter(rt,Xe.VALIDATE_STATUS)}, gl error ${Xe.getError()}, vertex: ${Xe.getShaderParameter(this._vShader,Xe.COMPILE_STATUS)}, fragment: ${Xe.getShaderParameter(this._fShader,Xe.COMPILE_STATUS)}, info log: ${Xe.getProgramInfoLog(rt)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`),this._context.type===U.zO.WEBGL2){const Ze=Xe;for(const[lt,st]of this._uniformBlockBindings){const Mt=Ze.getUniformBlockIndex(rt,lt);Mt<4294967295&&Ze.uniformBlockBinding(rt,Mt,st)}}return this._glName=rt,this._context.instanceCounter.increment(W._g.Program,this),rt}get hasGLName(){return(0,w.pC)(this._glName)}get isCompiled(){if(this._compiled)return!0;const Xe=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==Xe?(this._compiled=!0,!0):(this._compiled=!!this._context.gl.getProgramParameter(this.glName,Xe.COMPLETION_STATUS_KHR),this._compiled)}dispose(){if(--this._refCount>0)return;const Xe=this._context.gl;this._vShader&&(Xe.deleteShader(this._vShader),this._vShader=null,this._context.instanceCounter.decrement(W._g.Shader,this)),this._fShader&&(Xe.deleteShader(this._fShader),this._fShader=null),this._glName&&(Xe.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(W._g.Program,this))}ref(){++this._refCount}_getUniformLocation(Xe){return void 0===this._nameToUniformLocation[Xe]&&(++nt.numUniforms,this._nameToUniformLocation[Xe]=this._context.gl.getUniformLocation(this.glName,Xe)),this._nameToUniformLocation[Xe]}hasUniform(Xe){return null!==this._getUniformLocation(Xe)}setUniform1i(Xe,rt){const Ze=this._nameToUniform1[Xe];void 0!==Ze&&rt===Ze||(this._context.gl.uniform1i(this._getUniformLocation(Xe),rt),this._nameToUniform1[Xe]=rt)}setUniform1iv(Xe,rt){et(this._nameToUniform1v,Xe,rt)&&this._context.gl.uniform1iv(this._getUniformLocation(Xe),rt)}setUniform2iv(Xe,rt){et(this._nameToUniform2,Xe,rt)&&this._context.gl.uniform2iv(this._getUniformLocation(Xe),rt)}setUniform3iv(Xe,rt){et(this._nameToUniform3,Xe,rt)&&this._context.gl.uniform3iv(this._getUniformLocation(Xe),rt)}setUniform4iv(Xe,rt){et(this._nameToUniform4,Xe,rt)&&this._context.gl.uniform4iv(this._getUniformLocation(Xe),rt)}setUniform1f(Xe,rt){const Ze=this._nameToUniform1[Xe];void 0!==Ze&&rt===Ze||(this._context.gl.uniform1f(this._getUniformLocation(Xe),rt),this._nameToUniform1[Xe]=rt)}setUniform1fv(Xe,rt){et(this._nameToUniform1v,Xe,rt)&&this._context.gl.uniform1fv(this._getUniformLocation(Xe),rt)}setUniform2f(Xe,rt,Ze){const lt=this._nameToUniform2.get(Xe);void 0===lt?(this._context.gl.uniform2f(this._getUniformLocation(Xe),rt,Ze),this._nameToUniform2.set(Xe,[rt,Ze])):rt===lt[0]&&Ze===lt[1]||(this._context.gl.uniform2f(this._getUniformLocation(Xe),rt,Ze),lt[0]=rt,lt[1]=Ze)}setUniform2fv(Xe,rt){et(this._nameToUniform2,Xe,rt)&&this._context.gl.uniform2fv(this._getUniformLocation(Xe),rt)}setUniform3f(Xe,rt,Ze,lt){const st=this._nameToUniform3.get(Xe);void 0===st?(this._context.gl.uniform3f(this._getUniformLocation(Xe),rt,Ze,lt),this._nameToUniform3[Xe]=[rt,Ze,lt]):rt===st[0]&&Ze===st[1]&&lt===st[2]||(this._context.gl.uniform3f(this._getUniformLocation(Xe),rt,Ze,lt),st[0]=rt,st[1]=Ze,st[2]=lt)}setUniform3fv(Xe,rt){et(this._nameToUniform3,Xe,rt)&&this._context.gl.uniform3fv(this._getUniformLocation(Xe),rt)}setUniform4f(Xe,rt,Ze,lt,st){const Mt=this._nameToUniform4.get(Xe);void 0===Mt?(this._context.gl.uniform4f(this._getUniformLocation(Xe),rt,Ze,lt,st),this._nameToUniform4.set(Xe,[rt,Ze,lt,st])):void 0!==Mt&&rt===Mt[0]&&Ze===Mt[1]&&lt===Mt[2]&&st===Mt[3]||(this._context.gl.uniform4f(this._getUniformLocation(Xe),rt,Ze,lt,st),Mt[0]=rt,Mt[1]=Ze,Mt[2]=lt,Mt[3]=st)}setUniform4fv(Xe,rt){et(this._nameToUniform4,Xe,rt)&&this._context.gl.uniform4fv(this._getUniformLocation(Xe),rt)}setUniformMatrix3fv(Xe,rt,Ze=!1){et(this._nameToUniformMatrix3,Xe,rt)&&this._context.gl.uniformMatrix3fv(this._getUniformLocation(Xe),Ze,rt)}setUniformMatrix4fv(Xe,rt,Ze=!1){et(this._nameToUniformMatrix4,Xe,rt)&&this._context.gl.uniformMatrix4fv(this._getUniformLocation(Xe),Ze,rt)}stop(){}}function Se(it,Xe,rt){const Ze=it.gl,lt=Ze.createShader(Xe);return Ze.shaderSource(lt,rt),Ze.compileShader(lt),(0,B.CG)()&&!Ze.getShaderParameter(lt,Ze.COMPILE_STATUS)&&(console.error("Compile error in ".concat(Xe===W.Ho.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(Ze.getShaderInfoLog(lt)),console.error(function He(it){let Xe=2;return it.replace(/\n/g,()=>"\n"+function $e(it){return it>=1e3?it.toString():("  "+it).slice(-3)}(Xe++)+":")}(rt))),nt.enabled&&(nt.compiledLOC+=rt.match(/\n/g).length+1),lt}function et(it,Xe,rt){const Ze=it.get(Xe);return Ze?(0,D.Vx)(Ze,rt):(it.set(Xe,Array.from(rt)),!0)}const nt={compiledLOC:0,numUniforms:0,enabled:!1}},49266:(qe,xe,T)=>{"use strict";T.d(xe,{r:()=>w});var D=T(57596),x=T(67969);class w{constructor(U,W){this._context=U,this._desc=W,this.type="renderbuffer",this._context.instanceCounter.increment(x._g.Renderbuffer,this);const Y=this._context.gl;this.glName=Y.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:H,height:G,internalFormat:$,multisampled:re}=W;if(re){if(this._context.type!==D.zO.WEBGL2)throw new Error("Multisampled renderbuffers are not supported in WebGL1!");Y.renderbufferStorageMultisample(Y.RENDERBUFFER,this.samples,$,H,G)}else Y.renderbufferStorage(Y.RENDERBUFFER,$,H,G)}get descriptor(){return this._desc}get samples(){const U=this._desc.samples,W=this._context.parameters.maxSamples;return U?Math.min(U,W):W}resize(U,W){const Y=this._desc;if(Y.width===U&&Y.height===W)return;Y.width=U,Y.height=W;const H=this._context.gl;this._context.bindRenderbuffer(this),Y.multisampled?H.renderbufferStorageMultisample(H.RENDERBUFFER,this.samples,Y.internalFormat,Y.width,Y.height):H.renderbufferStorage(H.RENDERBUFFER,Y.internalFormat,Y.width,Y.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(x._g.Renderbuffer,this),this._context=null)}}},55086:(qe,xe,T)=>{"use strict";T.d(xe,{x:()=>G}),T(8314);var x=T(21286),w=T(62208),B=T(68598),U=T(57596),W=T(67969),Y=T(38210);class G{constructor(Q,J,se=null){if(this._context=Q,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,Q.instanceCounter.increment(W._g.Texture,this),this._descriptor={target:W.No.TEXTURE_2D,samplingMode:W.cw.LINEAR,wrapMode:W.e8.REPEAT,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,isImmutable:!1,...J},Q.type!==U.zO.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),ie(this._descriptor.target)))throw new Error("3D and array textures are not supported in WebGL1");this._descriptor.target===W.No.TEXTURE_CUBE_MAP?this._setDataCubeMap(se):this.setData(se)}get glName(){return this._glName}get descriptor(){return this._descriptor}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._context.gl&&this._glName&&(this._context.unbindTexture(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(W._g.Texture,this))}release(){this.dispose()}resize(Q,J){const se=this._descriptor;if(se.width!==Q||se.height!==J){if(this._wasImmutablyAllocated)throw new Error("Immutable textures can't be resized!");se.width=Q,se.height=J,this._descriptor.target===W.No.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(Q=null){for(let J=W.No.TEXTURE_CUBE_MAP_POSITIVE_X;J<=W.No.TEXTURE_CUBE_MAP_NEGATIVE_Z;J++)this._setData(Q,J)}setData(Q){this._setData(Q)}_setData(Q,J){if(!this._context||!this._context.gl)return;const se=this._context.gl;this._glName||(this._glName=se.createTexture()),void 0===Q&&(Q=null);const ee=this._descriptor;J??(J=ee.target);const le=ie(J);null===Q&&(ee.width=ee.width||4,ee.height=ee.height||4,le&&(ee.depth=ee.depth??1));const ne=this._context.bindTexture(this,G.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(G.TEXTURE_UNIT_FOR_UPDATES),G._validateTexture(this._context,ee),this._configurePixelStorage();let de=ee.internalFormat?ee.internalFormat:this._deriveInternalFormat(ee.pixelFormat,ee.dataType);if(oe(Q)){let me=Q.width,_e=Q.height;const he=1;Q instanceof HTMLVideoElement&&(me=Q.videoWidth,_e=Q.videoHeight),ee.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(J,de,ee.hasMipmap,me,_e,he),this._texImage(J,0,de,me,_e,he,Q),(0,B.zu)(se),ee.hasMipmap&&this.generateMipmap(),void 0===ee.width&&(ee.width=me),void 0===ee.height&&(ee.height=_e),le&&void 0===ee.depth&&(ee.depth=he)}else{const{width:me,height:_e,depth:he}=ee;if(null!=me&&null!=_e||console.error("Width and height must be specified!"),le&&null==he&&console.error("Depth must be specified!"),ee.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(J,de,ee.hasMipmap,me,_e,he),se.DEPTH24_STENCIL8&&de===se.DEPTH_STENCIL&&(de=se.DEPTH24_STENCIL8),ue(Q)){const ye=Q.levels,fe=X(J,me,_e,he),De=Math.min(fe-1,ye.length-1);(0,Y.Z)(se)?se.texParameteri(ee.target,se.TEXTURE_MAX_LEVEL,De):ee.hasMipmap=ee.hasMipmap&&fe===ye.length;const ve=de;if(!function re(Z){return Z in W.q_}(ve))throw new Error("Attempting to use compressed data with an umcompressed format!");this._forEachMipmapLevel((Ce,ge,Te,Le)=>{const je=ye[Math.min(Ce,ye.length-1)];this._compressedTexImage(J,Ce,ve,ge,Te,Le,je)},De)}else(0,w.pC)(Q)?(this._texImage(J,0,de,me,_e,he,Q),(0,B.zu)(se),ee.hasMipmap&&this.generateMipmap()):this._forEachMipmapLevel((ye,fe,De,ve)=>{this._texImage(J,ye,de,fe,De,ve,null),(0,B.zu)(se)})}G._applySamplingMode(se,this._descriptor),G._applyWrapMode(se,this._descriptor),G._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,B.zu)(se),this._context.bindTexture(ne,G.TEXTURE_UNIT_FOR_UPDATES)}updateData(Q,J,se,ee,le,ne){ne||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const ce=this._context.gl,de=this._descriptor,{pixelFormat:me,internalFormat:_e,dataType:he,isImmutable:ye,target:fe}=de;if(ye&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");const De=this._context.bindTexture(this,G.TEXTURE_UNIT_FOR_UPDATES);(J<0||se<0||ee>de.width||le>de.height||J+ee>de.width||se+le>de.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),oe(ne)?ce.texSubImage2D(fe,Q,J,se,me,he,ne):ue(ne)?ce.compressedTexSubImage2D(fe,Q,J,se,ee,le,_e,ne.levels[Q]):ce.texSubImage2D(fe,Q,J,se,ee,le,me,he,ne),this._context.bindTexture(De,G.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(Q,J,se,ee,le,ne,ce,de){de||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const me=this._context.gl;if(!(0,Y.Z)(me))throw new Error("3D textures are not supported in WebGL1");const _e=this._descriptor,{pixelFormat:he,dataType:ye,isImmutable:fe,target:De,internalFormat:ve}=_e;if(fe&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");ie(De)||console.warn("Attempting to set 3D texture data on a non-3D texture");const Ce=this._context.bindTexture(this,G.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(G.TEXTURE_UNIT_FOR_UPDATES),(J<0||se<0||ee<0||le>_e.width||ne>_e.height||ce>_e.depth||J+le>_e.width||se+ne>_e.height||ee+ce>_e.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),ue(de)?me.compressedTexSubImage3D(De,Q,J,se,ee,le,ne,ce,ve,de=de.levels[Q]):me.texSubImage3D(De,Q,J,se,ee,le,ne,ce,he,ye,de),this._context.bindTexture(Ce,G.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const Q=this._descriptor;if(!Q.hasMipmap){if(this._wasImmutablyAllocated)throw new Error("Cannot add mipmaps to immutable texture after allocation");Q.hasMipmap=!0,this._samplingModeDirty=!0,G._validateTexture(this._context,Q)}Q.samplingMode===W.cw.LINEAR?(this._samplingModeDirty=!0,Q.samplingMode=W.cw.LINEAR_MIPMAP_NEAREST):Q.samplingMode===W.cw.NEAREST&&(this._samplingModeDirty=!0,Q.samplingMode=W.cw.NEAREST_MIPMAP_NEAREST);const J=this._context.bindTexture(this,G.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(G.TEXTURE_UNIT_FOR_UPDATES),this._context.gl.generateMipmap(Q.target),this._context.bindTexture(J,G.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(Q){Q!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=Q,this._samplingModeDirty=!0)}setWrapMode(Q){Q!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=Q,G._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const Q=this._context.gl,J=this._descriptor;this._samplingModeDirty&&(G._applySamplingMode(Q,J),this._samplingModeDirty=!1),this._wrapModeDirty&&(G._applyWrapMode(Q,J),this._wrapModeDirty=!1)}_deriveInternalFormat(Q,J){if(this._context.type===U.zO.WEBGL1)return Q;switch(J){case W.Br.FLOAT:switch(Q){case W.VI.RGBA:return W.lP.RGBA32F;case W.VI.RGB:return W.lP.RGB32F;default:throw new Error("Unable to derive format")}case W.Br.UNSIGNED_BYTE:switch(Q){case W.VI.RGBA:return W.lP.RGBA8;case W.VI.RGB:return W.lP.RGB8}default:return Q}}_configurePixelStorage(){const Q=this._context.gl,{unpackAlignment:J,flipped:se,preMultiplyAlpha:ee}=this._descriptor;Q.pixelStorei(Q.UNPACK_ALIGNMENT,J),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,se?1:0),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee?1:0)}_texStorage(Q,J,se,ee,le,ne){const ce=this._context.gl;if(!(0,Y.Z)(ce))throw new Error("Immutable textures are not supported in WebGL1");if(!function $(Z){return Z in W.lP}(J))throw new Error("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const de=se?X(Q,ee,le,ne):1;ie(Q)?ce.texStorage3D(Q,de,J,ee,le,ne):ce.texStorage2D(Q,de,J,ee,le),this._wasImmutablyAllocated=!0}_texImage(Q,J,se,ee,le,ne,ce){const de=this._context.gl;let me=null;const _e=this._context.type===U.zO.WEBGL2,he=ie(Q),{isImmutable:ye,pixelFormat:fe,dataType:De}=this._descriptor;if(_e&&(me=de),_e||!oe(ce))if(ye){if((0,w.pC)(ce)){const ve=ce;he?me.texSubImage3D(Q,J,0,0,0,ee,le,ne,fe,De,ve):de.texSubImage2D(Q,J,0,0,ee,le,fe,De,ve)}}else{const ve=(0,w.Wg)(ce);he?me.texImage3D(Q,J,se,ee,le,ne,0,fe,De,ve):de.texImage2D(Q,J,se,ee,le,0,fe,De,ve)}else de.texImage2D(Q,0,se,fe,De,ce)}_compressedTexImage(Q,J,se,ee,le,ne,ce){const de=this._context.gl;let me=null;const _e=ie(Q),he=this._descriptor.isImmutable;if(_e){if(this._context.type!==U.zO.WEBGL2)throw new Error("3D textures are not supported in WebGL1");me=de}he?(0,w.pC)(ce)&&(_e?me.compressedTexSubImage3D(Q,J,0,0,0,ee,le,ne,se,ce):de.compressedTexSubImage2D(Q,J,0,0,ee,le,se,ce)):_e?me.compressedTexImage3D(Q,J,se,ee,le,ne,0,ce):de.compressedTexImage2D(Q,J,se,ee,le,0,ce)}_forEachMipmapLevel(Q,J=1/0){let{width:se,height:ee,depth:le,hasMipmap:ne,target:ce}=this._descriptor;const de=ce===W.No.TEXTURE_3D;for(let me=0;Q(me,se,ee,le),ne&&(1!==se||1!==ee||de&&1!==le)&&!(me>=J);++me)se=Math.max(1,se>>1),ee=Math.max(1,ee>>1),de&&(le=Math.max(1,le>>1))}static _validateTexture(Q,J){(J.width<0||J.height<0||J.depth<0)&&console.error("Negative dimension parameters are not allowed!");const se=(0,Y.Z)(Q.gl),ee=(0,x.wt)(J.width)&&(0,x.wt)(J.height);se||!J.isImmutable&&!ie(J.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!"),se||ee||("number"==typeof J.wrapMode?J.wrapMode!==W.e8.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):J.wrapMode.s===W.e8.CLAMP_TO_EDGE&&J.wrapMode.t===W.e8.CLAMP_TO_EDGE||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),J.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(Q,J){let se=J.samplingMode,ee=J.samplingMode;se===W.cw.LINEAR_MIPMAP_NEAREST||se===W.cw.LINEAR_MIPMAP_LINEAR?(se=W.cw.LINEAR,J.hasMipmap||(ee=W.cw.LINEAR)):se!==W.cw.NEAREST_MIPMAP_NEAREST&&se!==W.cw.NEAREST_MIPMAP_LINEAR||(se=W.cw.NEAREST,J.hasMipmap||(ee=W.cw.NEAREST)),Q.texParameteri(J.target,Q.TEXTURE_MAG_FILTER,se),Q.texParameteri(J.target,Q.TEXTURE_MIN_FILTER,ee)}static _applyWrapMode(Q,J){"number"==typeof J.wrapMode?(Q.texParameteri(J.target,Q.TEXTURE_WRAP_S,J.wrapMode),Q.texParameteri(J.target,Q.TEXTURE_WRAP_T,J.wrapMode)):(Q.texParameteri(J.target,Q.TEXTURE_WRAP_S,J.wrapMode.s),Q.texParameteri(J.target,Q.TEXTURE_WRAP_T,J.wrapMode.t))}static _applyAnisotropicFilteringParameters(Q,J){const se=Q.capabilities.textureFilterAnisotropic;!se||Q.gl.texParameterf(J.target,se.TEXTURE_MAX_ANISOTROPY,J.maxAnisotropy??1)}}function ue(Z){return(0,w.pC)(Z)&&"type"in Z&&"compressed"===Z.type}function oe(Z){return(0,w.pC)(Z)&&!ue(Z)&&!function ae(Z){return(0,w.pC)(Z)&&"byteLength"in Z}(Z)}function ie(Z){return Z===W.No.TEXTURE_3D||Z===W.No.TEXTURE_2D_ARRAY}function X(Z,Q,J,se=1){let ee=Math.max(Q,J);return Z===W.No.TEXTURE_3D&&(ee=Math.max(ee,se)),Math.round(Math.log(ee)/Math.LN2)+1}G.TEXTURE_UNIT_FOR_UPDATES=0},26906:(qe,xe,T)=>{"use strict";T.d(xe,{HH:()=>B,RG:()=>G,UF:()=>H,XP:()=>Y,_V:()=>U,un:()=>$}),T(8314);var x=T(62208),w=T(67969);function B(re){const ue=re.gl;switch(ue.getError()){case ue.NO_ERROR:return null;case ue.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case ue.INVALID_VALUE:return"A numeric argument is out of range";case ue.INVALID_OPERATION:return"The specified command is not allowed for the current state";case ue.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case ue.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case ue.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function U(re,ue){return re.vertexBuffers[ue].size/function W(re){return re[0].stride}(re.layout[ue])}function Y(re,ue,ae,oe,ie=0){const X=re.gl,Z=re.capabilities.instancing;re.bindBuffer(ae);for(const Q of oe){const J=ue.get(Q.name);void 0===J&&console.error(`There is no location for vertex attribute '${Q.name}' defined.`);const se=ie*Q.stride;if(Q.count<=4)X.vertexAttribPointer(J,Q.count,Q.type,Q.normalized,Q.stride,Q.offset+se),X.enableVertexAttribArray(J),Q.divisor>0&&Z&&Z.vertexAttribDivisor(J,Q.divisor);else if(9===Q.count)for(let ee=0;ee<3;ee++)X.vertexAttribPointer(J+ee,3,Q.type,Q.normalized,Q.stride,Q.offset+12*ee+se),X.enableVertexAttribArray(J+ee),Q.divisor>0&&Z&&Z.vertexAttribDivisor(J+ee,Q.divisor);else if(16===Q.count)for(let ee=0;ee<4;ee++)X.vertexAttribPointer(J+ee,4,Q.type,Q.normalized,Q.stride,Q.offset+16*ee+se),X.enableVertexAttribArray(J+ee),Q.divisor>0&&Z&&Z.vertexAttribDivisor(J+ee,Q.divisor);else console.error("Unsupported vertex attribute element count: "+Q.count)}}function H(re,ue,ae,oe){const ie=re.gl,X=re.capabilities.instancing;re.bindBuffer(ae);for(const Z of oe){const Q=ue.get(Z.name);if(Z.count<=4)ie.disableVertexAttribArray(Q),Z.divisor&&Z.divisor>0&&X&&X.vertexAttribDivisor(Q,0);else if(9===Z.count)for(let J=0;J<3;J++)ie.disableVertexAttribArray(Q+J),Z.divisor&&Z.divisor>0&&X&&X.vertexAttribDivisor(Q+J,0);else if(16===Z.count)for(let J=0;J<4;J++)ie.disableVertexAttribArray(Q+J),Z.divisor&&Z.divisor>0&&X&&X.vertexAttribDivisor(Q+J,0);else console.error("Unsupported vertex attribute element count: "+Z.count)}re.unbindBuffer(w.w0.ARRAY_BUFFER)}function G(re){switch(re){case w.VI.ALPHA:case w.VI.LUMINANCE:case w.VI.RED:case w.VI.RED_INTEGER:case w.lP.R8:case w.lP.R8I:case w.lP.R8UI:case w.lP.R8_SNORM:case w.Tg.STENCIL_INDEX8:return 1;case w.VI.LUMINANCE_ALPHA:case w.VI.RG:case w.VI.RG_INTEGER:case w.lP.RGBA4:case w.lP.R16F:case w.lP.R16I:case w.lP.R16UI:case w.lP.RG8:case w.lP.RG8I:case w.lP.RG8UI:case w.lP.RG8_SNORM:case w.lP.RGB565:case w.lP.RGB5_A1:case w.Tg.DEPTH_COMPONENT16:return 2;case w.VI.DEPTH_COMPONENT:case w.VI.RGB:case w.VI.RGB_INTEGER:case w.lP.RGB8:case w.lP.RGB8I:case w.lP.RGB8UI:case w.lP.RGB8_SNORM:case w.lP.SRGB8:case w.Tg.DEPTH_COMPONENT24:return 3;case w.VI.DEPTH_STENCIL:case w.VI.RGBA:case w.VI.RGBA_INTEGER:case w.lP.RGBA8:case w.lP.R32F:case w.lP.R11F_G11F_B10F:case w.lP.RG16F:case w.lP.R32I:case w.lP.R32UI:case w.lP.RG16I:case w.lP.RG16UI:case w.lP.RGBA8I:case w.lP.RGBA8UI:case w.lP.RGBA8_SNORM:case w.lP.SRGB8_ALPHA8:case w.lP.RGB9_E5:case w.lP.RGB10_A2UI:case w.lP.RGB10_A2:case w.Tg.DEPTH_STENCIL:case w.Tg.DEPTH_COMPONENT32F:case w.Tg.DEPTH24_STENCIL8:return 4;case w.Tg.DEPTH32F_STENCIL8:return 5;case w.lP.RGB16F:case w.lP.RGB16I:case w.lP.RGB16UI:return 6;case w.lP.RG32F:case w.lP.RG32I:case w.lP.RG32UI:case w.lP.RGBA16F:case w.lP.RGBA16I:case w.lP.RGBA16UI:return 8;case w.lP.RGB32F:case w.lP.RGB32I:case w.lP.RGB32UI:return 12;case w.lP.RGBA32F:case w.lP.RGBA32I:case w.lP.RGBA32UI:return 16;case w.q_.COMPRESSED_RGB_S3TC_DXT1_EXT:case w.q_.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case w.q_.COMPRESSED_RGBA_S3TC_DXT3_EXT:case w.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case w.q_.COMPRESSED_R11_EAC:case w.q_.COMPRESSED_SIGNED_R11_EAC:case w.q_.COMPRESSED_RGB8_ETC2:case w.q_.COMPRESSED_SRGB8_ETC2:case w.q_.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case w.q_.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case w.q_.COMPRESSED_RG11_EAC:case w.q_.COMPRESSED_SIGNED_RG11_EAC:case w.q_.COMPRESSED_RGBA8_ETC2_EAC:case w.q_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}function $(re){if((0,x.Wi)(re))return 0;if("descriptor"in re)return re.glName?$(re.descriptor):0;const ue=re.internalFormat||"pixelFormat"in re&&re.pixelFormat;if(!ue)return 0;const ae="hasMipmap"in re&&re.hasMipmap?1.3:1,oe=re.width*re.height;return G(ue)*oe*ae}},49353:(qe,xe,T)=>{"use strict";T.d(xe,{U:()=>W});var D=T(63290),x=T(62208),w=T(67969),B=T(26906);const U=D.Z.getLogger("esri.views.webgl.VertexArrayObject");class W{constructor(H,G,$,re,ue=null){this._context=H,this._locations=G,this._layout=$,this._buffers=re,this._indexBuffer=ue,this._glName=null,this._initialized=!1,H.instanceCounter.increment(w._g.VertexArrayObject,this)}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce((H,G)=>H+this._buffers[G].size,(0,x.pC)(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(H=!0){if(this._context){if(this._glName){const G=this._context?.capabilities?.vao;G?(G.deleteVertexArray(this._glName),this._glName=null):U.warn("Leaked WebGL VAO")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),H){for(const G in this._buffers)this._buffers[G].dispose(),delete this._buffers[G];this._indexBuffer=(0,x.O3)(this._indexBuffer)}this._context.instanceCounter.decrement(w._g.VertexArrayObject,this),this._context=null}else(this._glName||H&&Object.getOwnPropertyNames(this._buffers).length>0)&&U.warn("Leaked WebGL VAO")}initialize(){if(this._initialized)return;const H=this._context.capabilities.vao;if(H){const G=H.createVertexArray();H.bindVertexArray(G),this._bindLayout(),H.bindVertexArray(null),this._glName=G}this._initialized=!0}bind(){this.initialize();const H=this._context.capabilities.vao;H?H.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:H,_layout:G,_indexBuffer:$}=this;H||U.error("Vertex buffer dictionary is empty!");const re=this._context.gl;for(const ue in H){const ae=H[ue];ae||U.error("Vertex buffer is uninitialized!");const oe=G[ue];oe||U.error("Vertex element descriptor is empty!"),(0,B.XP)(this._context,this._locations,ae,oe)}(0,x.pC)($)&&(this._context.capabilities.vao?re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,$.glName):this._context.bindBuffer($))}unbind(){this.initialize();const H=this._context.capabilities.vao;H?H.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:H,_layout:G}=this;H||U.error("Vertex buffer dictionary is empty!");for(const $ in H){const re=H[$];re||U.error("Vertex buffer is uninitialized!"),(0,B.UF)(this._context,this._locations,re,G[$])}(0,x.pC)(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}},40852:(qe,xe,T)=>{"use strict";T.d(xe,{G:()=>D});class D{constructor(w,B,U,W,Y,H=!1,G=0){this.name=w,this.count=B,this.type=U,this.offset=W,this.stride=Y,this.normalized=H,this.divisor=G}}},31637:(qe,xe,T)=>{"use strict";T.d(xe,{hc:()=>U});var D=T(62208),x=T(57596);let w,B;function U(ie){const X=(0,x.Sh)(ie);for(;X.length>1;){const Z=W(X.shift());if(Z.available)return Z}return W(X.shift())}function W(ie){switch(ie){case x.zO.WEBGL1:return function Y(){return w||(w=function ae(){const ie=new $,X=ue(x.zO.WEBGL1,ie);return(0,D.Wi)(X)||(ie.supportsElementIndexUint=null!==X.getExtension("OES_element_index_uint"),ie.supportsStandardDerivatives=null!==X.getExtension("OES_standard_derivatives"),ie.supportsInstancedArrays=null!==X.getExtension("ANGLE_instanced_arrays"),ie.supportsTextureFloat=null!==X.getExtension("OES_texture_float"),ie.supportsTextureHalfFloat=null!==X.getExtension("OES_texture_half_float"),ie.supportsColorBufferFloat=null!==X.getExtension("WEBGL_color_buffer_float"),ie.supportsColorBufferFloatBlend=null!==X.getExtension("EXT_float_blend"),ie.supportsColorBufferHalfFloat=null!==X.getExtension("EXT_color_buffer_half_float")),ie}()),w}();case x.zO.WEBGL2:return function H(){return B||(B=function oe(){const ie=new re,X=ue(x.zO.WEBGL2,ie);return(0,D.Wi)(X)||(ie.supportsColorBufferFloat=null!==X.getExtension("EXT_color_buffer_float"),ie.supportsColorBufferFloatBlend=null!==X.getExtension("EXT_float_blend"),ie.supportsColorBufferHalfFloat=ie.supportsColorBufferFloat||null!==X.getExtension("EXT_color_buffer_half_float")),ie}()),B}()}}class G{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class $ extends G{constructor(){super(...arguments),this.type=x.zO.WEBGL1}}class re extends G{constructor(){super(...arguments),this.type=x.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function ue(ie,X){if(ie===x.zO.WEBGL1&&void 0===typeof WebGLRenderingContext||ie===x.zO.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const Z=document.createElement("canvas");if(!Z)return null;let Q=(0,x.kr)(Z,ie,{failIfMajorPerformanceCaveat:!0});if((0,D.Wi)(Q)&&(Q=(0,x.kr)(Z,ie),(0,D.pC)(Q)&&(X.majorPerformanceCaveat=!0)),(0,D.Wi)(Q))return Q;if(ie===x.zO.WEBGL1){const se=Q.getParameter(Q.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(se){const ee=parseFloat(se[1]);X.available=ee>=.94}}else X.available=!0;X.maxTextureSize=Q.getParameter(Q.MAX_TEXTURE_SIZE),X.supportsVertexShaderSamplers=Q.getParameter(Q.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const J=Q.getShaderPrecisionFormat(Q.FRAGMENT_SHADER,Q.HIGH_FLOAT);return J&&(X.supportsHighPrecisionFragment=J.precision>0),Q}},38210:(qe,xe,T)=>{"use strict";function D(x){return window.WebGL2RenderingContext&&x instanceof window.WebGL2RenderingContext}T.d(xe,{Z:()=>D})},68598:(qe,xe,T)=>{"use strict";T.d(xe,{CG:()=>H,hZ:()=>Y,zu:()=>G});var D=T(26584),x=T(8314);const B=T(63290).Z.getLogger("esri/views/webgl"),W=!!(0,x.Z)("enable-feature:webgl-debug");function Y(){return W}function H(){return W}function G($){if(Y()){const re=$.getError();if(re){const ue=function U($,re){switch(re){case $.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case $.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case $.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case $.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case $.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case $.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}($,re),ae=(new Error).stack;B.error(new D.Z("webgl-error","WebGL error occured",{message:ue,stack:ae}))}}}},57596:(qe,xe,T)=>{"use strict";T.d(xe,{Sh:()=>U,kr:()=>Y,sj:()=>B,zO:()=>w});var w,re,D=T(8314),x=T(62208);function B(re,ue,ae={}){const oe=U(re);for(;oe.length>1;){const ie=Y(ue,oe.shift(),ae);if((0,x.pC)(ie))return ie}return function W(re,ue,ae={}){if(!window.WebGLRenderingContext)return H(re,G),null;const oe=Y(re,ue,ae);return(0,x.Wi)(oe)&&H(re,$),oe}(ue,oe.shift(),ae)}function U(re){const ue=(0,D.Z)("esri-force-webgl");if(ue===w.WEBGL1||ue===w.WEBGL2)return[ue];switch(re){case"2d":return(0,D.Z)("mac")&&(0,D.Z)("chrome")?[w.WEBGL1,w.WEBGL2]:[w.WEBGL2,w.WEBGL1];case"3d":return[w.WEBGL2,w.WEBGL1]}}function Y(re,ue,ae={}){const oe=ue===w.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let ie=null;for(const X of oe){try{ie=re.getContext(X,ae)}catch{}if(ie)break}return ie}function H(re,ue){const ae=re.parentNode;ae&&(ae.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+ue+"</div></div></td></tr></table>")}(re=w||(w={}))[re.WEBGL1=1]="WEBGL1",re[re.WEBGL2=2]="WEBGL2";const G='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',$='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},2757:(qe,xe,T)=>{"use strict";function D(W,Y,H){for(let G=0;G<H;++G)Y[2*G]=W[G],Y[2*G+1]=W[G]-Y[2*G]}function w(W,Y){const H=W.length;for(let G=0;G<H;++G)U[0]=W[G],Y[G]=U[0];return Y}function B(W,Y){const H=W.length;for(let G=0;G<H;++G)U[0]=W[G],U[1]=W[G]-U[0],Y[G]=U[1];return Y}T.d(xe,{GB:()=>B,LF:()=>D,U8:()=>w});const U=new Float32Array(2)},67969:(qe,xe,T)=>{"use strict";var D,x,w,B,U,W,Y,H,G,$,re,ue,ae,oe,ie,X,Z,Q,J,se,ee,le,ge;T.d(xe,{Br:()=>X,Ho:()=>J,LR:()=>W,Ld:()=>ne,Lm:()=>ee,Lu:()=>me,MX:()=>x,No:()=>ae,OU:()=>le,Se:()=>he,Tg:()=>Z,V7:()=>ve,VI:()=>oe,VY:()=>de,Wf:()=>Y,Y5:()=>De,_g:()=>ce,cw:()=>re,db:()=>B,e8:()=>ue,g:()=>H,l1:()=>Q,lP:()=>ie,lk:()=>D,q_:()=>_e,qi:()=>se,w0:()=>U,wb:()=>G,xS:()=>$,zi:()=>w}),(ge=D||(D={}))[ge.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ge[ge.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ge[ge.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",function(ge){ge[ge.POINTS=0]="POINTS",ge[ge.LINES=1]="LINES",ge[ge.LINE_LOOP=2]="LINE_LOOP",ge[ge.LINE_STRIP=3]="LINE_STRIP",ge[ge.TRIANGLES=4]="TRIANGLES",ge[ge.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ge[ge.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(x||(x={})),function(ge){ge[ge.ZERO=0]="ZERO",ge[ge.ONE=1]="ONE",ge[ge.SRC_COLOR=768]="SRC_COLOR",ge[ge.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ge[ge.SRC_ALPHA=770]="SRC_ALPHA",ge[ge.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ge[ge.DST_ALPHA=772]="DST_ALPHA",ge[ge.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ge[ge.DST_COLOR=774]="DST_COLOR",ge[ge.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ge[ge.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ge[ge.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ge[ge.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ge[ge.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ge[ge.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(w||(w={})),function(ge){ge[ge.ADD=32774]="ADD",ge[ge.SUBTRACT=32778]="SUBTRACT",ge[ge.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(B||(B={})),function(ge){ge[ge.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ge[ge.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ge[ge.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",ge[ge.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",ge[ge.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",ge[ge.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",ge[ge.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(U||(U={})),function(ge){ge[ge.FRONT=1028]="FRONT",ge[ge.BACK=1029]="BACK",ge[ge.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(W||(W={})),function(ge){ge[ge.CW=2304]="CW",ge[ge.CCW=2305]="CCW"}(Y||(Y={})),function(ge){ge[ge.BYTE=5120]="BYTE",ge[ge.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ge[ge.SHORT=5122]="SHORT",ge[ge.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ge[ge.INT=5124]="INT",ge[ge.UNSIGNED_INT=5125]="UNSIGNED_INT",ge[ge.FLOAT=5126]="FLOAT"}(H||(H={})),function(ge){ge[ge.NEVER=512]="NEVER",ge[ge.LESS=513]="LESS",ge[ge.EQUAL=514]="EQUAL",ge[ge.LEQUAL=515]="LEQUAL",ge[ge.GREATER=516]="GREATER",ge[ge.NOTEQUAL=517]="NOTEQUAL",ge[ge.GEQUAL=518]="GEQUAL",ge[ge.ALWAYS=519]="ALWAYS"}(G||(G={})),function(ge){ge[ge.ZERO=0]="ZERO",ge[ge.KEEP=7680]="KEEP",ge[ge.REPLACE=7681]="REPLACE",ge[ge.INCR=7682]="INCR",ge[ge.DECR=7683]="DECR",ge[ge.INVERT=5386]="INVERT",ge[ge.INCR_WRAP=34055]="INCR_WRAP",ge[ge.DECR_WRAP=34056]="DECR_WRAP"}($||($={})),function(ge){ge[ge.NEAREST=9728]="NEAREST",ge[ge.LINEAR=9729]="LINEAR",ge[ge.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ge[ge.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ge[ge.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ge[ge.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(re||(re={})),function(ge){ge[ge.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ge[ge.REPEAT=10497]="REPEAT",ge[ge.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ue||(ue={})),function(ge){ge[ge.TEXTURE_2D=3553]="TEXTURE_2D",ge[ge.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ge[ge.TEXTURE_3D=32879]="TEXTURE_3D",ge[ge.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ge[ge.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ge[ge.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ge[ge.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ge[ge.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ge[ge.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ge[ge.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(ae||(ae={})),function(ge){ge[ge.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ge[ge.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ge[ge.ALPHA=6406]="ALPHA",ge[ge.RGB=6407]="RGB",ge[ge.RGBA=6408]="RGBA",ge[ge.LUMINANCE=6409]="LUMINANCE",ge[ge.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ge[ge.RED=6403]="RED",ge[ge.RG=33319]="RG",ge[ge.RED_INTEGER=36244]="RED_INTEGER",ge[ge.RG_INTEGER=33320]="RG_INTEGER",ge[ge.RGB_INTEGER=36248]="RGB_INTEGER",ge[ge.RGBA_INTEGER=36249]="RGBA_INTEGER"}(oe||(oe={})),function(ge){ge[ge.RGBA4=32854]="RGBA4",ge[ge.R16F=33325]="R16F",ge[ge.RG16F=33327]="RG16F",ge[ge.RGB32F=34837]="RGB32F",ge[ge.RGBA16F=34842]="RGBA16F",ge[ge.R32F=33326]="R32F",ge[ge.RG32F=33328]="RG32F",ge[ge.RGBA32F=34836]="RGBA32F",ge[ge.R11F_G11F_B10F=35898]="R11F_G11F_B10F",ge[ge.RGB8=32849]="RGB8",ge[ge.RGBA8=32856]="RGBA8",ge[ge.RGB5_A1=32855]="RGB5_A1",ge[ge.R8=33321]="R8",ge[ge.RG8=33323]="RG8",ge[ge.R8I=33329]="R8I",ge[ge.R8UI=33330]="R8UI",ge[ge.R16I=33331]="R16I",ge[ge.R16UI=33332]="R16UI",ge[ge.R32I=33333]="R32I",ge[ge.R32UI=33334]="R32UI",ge[ge.RG8I=33335]="RG8I",ge[ge.RG8UI=33336]="RG8UI",ge[ge.RG16I=33337]="RG16I",ge[ge.RG16UI=33338]="RG16UI",ge[ge.RG32I=33339]="RG32I",ge[ge.RG32UI=33340]="RG32UI",ge[ge.RGB16F=34843]="RGB16F",ge[ge.RGB9_E5=35901]="RGB9_E5",ge[ge.SRGB8=35905]="SRGB8",ge[ge.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",ge[ge.RGB565=36194]="RGB565",ge[ge.RGBA32UI=36208]="RGBA32UI",ge[ge.RGB32UI=36209]="RGB32UI",ge[ge.RGBA16UI=36214]="RGBA16UI",ge[ge.RGB16UI=36215]="RGB16UI",ge[ge.RGBA8UI=36220]="RGBA8UI",ge[ge.RGB8UI=36221]="RGB8UI",ge[ge.RGBA32I=36226]="RGBA32I",ge[ge.RGB32I=36227]="RGB32I",ge[ge.RGBA16I=36232]="RGBA16I",ge[ge.RGB16I=36233]="RGB16I",ge[ge.RGBA8I=36238]="RGBA8I",ge[ge.RGB8I=36239]="RGB8I",ge[ge.R8_SNORM=36756]="R8_SNORM",ge[ge.RG8_SNORM=36757]="RG8_SNORM",ge[ge.RGB8_SNORM=36758]="RGB8_SNORM",ge[ge.RGBA8_SNORM=36759]="RGBA8_SNORM",ge[ge.RGB10_A2=32857]="RGB10_A2",ge[ge.RGB10_A2UI=36975]="RGB10_A2UI"}(ie||(ie={})),function(ge){ge[ge.FLOAT=5126]="FLOAT",ge[ge.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ge[ge.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",ge[ge.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ge[ge.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ge[ge.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ge[ge.BYTE=5120]="BYTE",ge[ge.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ge[ge.SHORT=5122]="SHORT",ge[ge.UNSIGNED_INT=5125]="UNSIGNED_INT",ge[ge.INT=5124]="INT",ge[ge.HALF_FLOAT=5131]="HALF_FLOAT",ge[ge.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",ge[ge.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",ge[ge.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",ge[ge.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(X||(X={})),function(ge){ge[ge.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ge[ge.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ge[ge.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ge[ge.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",ge[ge.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",ge[ge.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",ge[ge.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Z||(Z={})),function(ge){ge[ge.STATIC_DRAW=35044]="STATIC_DRAW",ge[ge.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ge[ge.STREAM_DRAW=35040]="STREAM_DRAW",ge[ge.STATIC_READ=35045]="STATIC_READ",ge[ge.DYNAMIC_READ=35049]="DYNAMIC_READ",ge[ge.STREAM_READ=35041]="STREAM_READ",ge[ge.STATIC_COPY=35046]="STATIC_COPY",ge[ge.DYNAMIC_COPY=35050]="DYNAMIC_COPY",ge[ge.STREAM_COPY=35042]="STREAM_COPY"}(Q||(Q={})),function(ge){ge[ge.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ge[ge.VERTEX_SHADER=35633]="VERTEX_SHADER"}(J||(J={})),function(ge){ge[ge.FRAMEBUFFER=36160]="FRAMEBUFFER",ge[ge.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",ge[ge.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(se||(se={})),function(ge){ge[ge.TEXTURE=0]="TEXTURE",ge[ge.RENDER_BUFFER=1]="RENDER_BUFFER",ge[ge.CUBEMAP=2]="CUBEMAP"}(ee||(ee={})),function(ge){ge[ge.NONE=0]="NONE",ge[ge.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER",ge[ge.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER",ge[ge.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER",ge[ge.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"}(le||(le={}));const ne=33984;var ce,de;(function(ge){ge[ge.Texture=0]="Texture",ge[ge.BufferObject=1]="BufferObject",ge[ge.VertexArrayObject=2]="VertexArrayObject",ge[ge.Shader=3]="Shader",ge[ge.Program=4]="Program",ge[ge.FramebufferObject=5]="FramebufferObject",ge[ge.Renderbuffer=6]="Renderbuffer",ge[ge.Sync=7]="Sync",ge[ge.COUNT=8]="COUNT"})(ce||(ce={})),function(ge){ge[ge.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ge[ge.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",ge[ge.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",ge[ge.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",ge[ge.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",ge[ge.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",ge[ge.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",ge[ge.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",ge[ge.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",ge[ge.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",ge[ge.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",ge[ge.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",ge[ge.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",ge[ge.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",ge[ge.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",ge[ge.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(de||(de={}));const me=33306;var _e,he,ye,fe,De,ve,Ce;(function(ge){ge[ge.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",ge[ge.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",ge[ge.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",ge[ge.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",ge[ge.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",ge[ge.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",ge[ge.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",ge[ge.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",ge[ge.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",ge[ge.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",ge[ge.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",ge[ge.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",ge[ge.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",ge[ge.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(_e||(_e={})),function(ge){ge[ge.FLOAT=5126]="FLOAT",ge[ge.FLOAT_VEC2=35664]="FLOAT_VEC2",ge[ge.FLOAT_VEC3=35665]="FLOAT_VEC3",ge[ge.FLOAT_VEC4=35666]="FLOAT_VEC4",ge[ge.INT=5124]="INT",ge[ge.INT_VEC2=35667]="INT_VEC2",ge[ge.INT_VEC3=35668]="INT_VEC3",ge[ge.INT_VEC4=35669]="INT_VEC4",ge[ge.BOOL=35670]="BOOL",ge[ge.BOOL_VEC2=35671]="BOOL_VEC2",ge[ge.BOOL_VEC3=35672]="BOOL_VEC3",ge[ge.BOOL_VEC4=35673]="BOOL_VEC4",ge[ge.FLOAT_MAT2=35674]="FLOAT_MAT2",ge[ge.FLOAT_MAT3=35675]="FLOAT_MAT3",ge[ge.FLOAT_MAT4=35676]="FLOAT_MAT4",ge[ge.SAMPLER_2D=35678]="SAMPLER_2D",ge[ge.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ge[ge.UNSIGNED_INT=5125]="UNSIGNED_INT",ge[ge.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",ge[ge.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",ge[ge.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",ge[ge.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",ge[ge.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",ge[ge.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",ge[ge.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",ge[ge.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",ge[ge.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",ge[ge.SAMPLER_3D=35679]="SAMPLER_3D",ge[ge.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",ge[ge.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",ge[ge.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",ge[ge.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",ge[ge.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",ge[ge.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",ge[ge.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",ge[ge.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",ge[ge.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",ge[ge.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",ge[ge.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",ge[ge.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(he||(he={})),function(ge){ge[ge.OBJECT_TYPE=37138]="OBJECT_TYPE",ge[ge.SYNC_CONDITION=37139]="SYNC_CONDITION",ge[ge.SYNC_STATUS=37140]="SYNC_STATUS",ge[ge.SYNC_FLAGS=37141]="SYNC_FLAGS"}(ye||(ye={})),function(ge){ge[ge.UNSIGNALED=37144]="UNSIGNALED",ge[ge.SIGNALED=37145]="SIGNALED"}(fe||(fe={})),function(ge){ge[ge.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",ge[ge.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",ge[ge.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",ge[ge.WAIT_FAILED=37149]="WAIT_FAILED"}(De||(De={})),function(ge){ge[ge.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(ve||(ve={})),function(ge){ge[ge.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(Ce||(Ce={}))},38982:(qe,xe,T)=>{"use strict";T.d(xe,{Br:()=>H,Fm:()=>oe,N9:()=>X,RA:()=>Z,Tc:()=>$,Ue:()=>re,iC:()=>G,s9:()=>W,v:()=>ie,xW:()=>ae,zS:()=>ue});var D=T(99770),x=T(57596),w=T(67969),U=(T(85775),T(55086));function W(J,se,ee="nearest",le=!1){const ne=!(le&&"u8"===se.pixelType),ce=ne?w.Br.FLOAT:w.Br.UNSIGNED_BYTE,de=null==se.pixels||0===se.pixels.length?null:ne?se.getAsRGBAFloat():se.getAsRGBA(),me=J.capabilities.textureFloat?.textureFloatLinear;return new U.x(J,{width:se.width,height:se.height,target:w.No.TEXTURE_2D,pixelFormat:w.VI.RGBA,internalFormat:J.type===x.zO.WEBGL2&&ne?w.lP.RGBA32F:w.VI.RGBA,samplingMode:!me||"bilinear"!==ee&&"cubic"!==ee?w.cw.NEAREST:w.cw.LINEAR,dataType:ce,wrapMode:w.e8.CLAMP_TO_EDGE,flipped:!1},de)}function H(J,se){const{spacing:ee,offsets:le,coefficients:ne,size:[ce,de]}=se,me=ee[0]>1,_e={width:me?4*ce:ce,height:de,target:w.No.TEXTURE_2D,pixelFormat:w.VI.RGBA,internalFormat:J.type===x.zO.WEBGL2?w.lP.RGBA32F:w.VI.RGBA,dataType:w.Br.FLOAT,samplingMode:w.cw.NEAREST,wrapMode:w.e8.CLAMP_TO_EDGE,flipped:!1},he=new Float32Array(me?ce*de*16:2*le.length);if(me)for(let ye=0,fe=0;ye<ne.length;ye++)he[fe++]=ne[ye],ye%3==2&&(he[fe++]=1);else for(let ye=0;ye<de;ye++)for(let fe=0;fe<ce;fe++){const De=4*(ye*ce+fe),ve=2*(fe*de+ye);he[De]=le[ve],he[De+1]=le[ve+1],he[De+3]=-1===le[ve]?0:1}return new U.x(J,_e,he)}function G(J,se){return new U.x(J,{width:se.length/4,height:1,target:w.No.TEXTURE_2D,pixelFormat:w.VI.RGBA,internalFormat:w.VI.RGBA,dataType:w.Br.UNSIGNED_BYTE,samplingMode:w.cw.NEAREST,wrapMode:w.e8.CLAMP_TO_EDGE,flipped:!1},se)}function $(J,se,ee,le=1,ne=!0){return{u_flipY:ne,u_applyTransform:!!J,u_opacity:le,u_transformSpacing:J?J.spacing:D.Z,u_transformGridSize:J?J.size:D.Z,u_targetImageSize:se,u_srcImageSize:ee}}function re(J,se){return{u_colormapOffset:se||0,u_colormapMaxIndex:J?J.length/4-1:0}}function ue(J,se){return{u_scale:J,u_offset:se}}function ae(J){return{u_bandCount:J.bandCount,u_minOutput:J.outMin,u_maxOutput:J.outMax,u_minCutOff:J.minCutOff,u_maxCutOff:J.maxCutOff,u_factor:J.factor,u_useGamma:J.useGamma,u_gamma:J.gamma,u_gammaCorrection:J.gammaCorrection}}function oe(J){return{u_hillshadeType:J.hillshadeType,u_sinZcosAs:J.sinZcosAs,u_sinZsinAs:J.sinZsinAs,u_cosZs:J.cosZs,u_weights:J.weights,u_factor:J.factor,u_minValue:J.minValue,u_maxValue:J.maxValue}}function ie(J,se){const ee=J.gl,le=se.glName,ne=ee.getProgramParameter(le,ee.ACTIVE_UNIFORMS),ce=new Map;let de;for(let me=0;me<ne;me++)de=ee.getActiveUniform(le,me),de&&ce.set(de.name,{location:ee.getUniformLocation(le,de.name),info:de});return ce}function X(J,se,ee){Object.keys(ee).forEach(le=>{const ne=se.get(le)||se.get(le+"[0]");ne&&function Q(J,se,ee,le){if(null===le||null==ee)return!1;const{info:ne}=le;switch(ne.type){case w.Se.FLOAT:ne.size>1?J.setUniform1fv(se,ee):J.setUniform1f(se,ee);break;case w.Se.FLOAT_VEC2:J.setUniform2fv(se,ee);break;case w.Se.FLOAT_VEC3:J.setUniform3fv(se,ee);break;case w.Se.FLOAT_VEC4:J.setUniform4fv(se,ee);break;case w.Se.FLOAT_MAT3:J.setUniformMatrix3fv(se,ee);break;case w.Se.FLOAT_MAT4:J.setUniformMatrix4fv(se,ee);break;case w.Se.INT:ne.size>1?J.setUniform1iv(se,ee):J.setUniform1i(se,ee);break;case w.Se.BOOL:J.setUniform1i(se,ee?1:0);break;case w.Se.INT_VEC2:case w.Se.BOOL_VEC2:J.setUniform2iv(se,ee);break;case w.Se.INT_VEC3:case w.Se.BOOL_VEC3:J.setUniform3iv(se,ee);break;case w.Se.INT_VEC4:case w.Se.BOOL_VEC4:J.setUniform4iv(se,ee);break;default:return!1}}(J,le,ee[le],ne)})}function Z(J,se,ee,le){ee.length===le.length&&(le.some(ne=>null==ne)||ee.some(ne=>null==ne)||ee.forEach((ne,ce)=>{se.setUniform1i(ne,ce),J.bindTexture(le[ce],ce)}))}},2078:(qe,xe,T)=>{"use strict";T.d(xe,{BK:()=>G,LZ:()=>H,Rd:()=>U,if:()=>w,jp:()=>Ee,sg:()=>W,sm:()=>Q,wK:()=>B,zp:()=>Y});var D=T(42743),x=T(67969);function w(Ae,we,Be=x.db.ADD,Pe=[0,0,0,0]){return{srcRgb:Ae,srcAlpha:Ae,dstRgb:we,dstAlpha:we,opRgb:Be,opAlpha:Be,color:{r:Pe[0],g:Pe[1],b:Pe[2],a:Pe[3]}}}function B(Ae,we,Be,Pe,Oe=x.db.ADD,Ke=x.db.ADD,Ve=[0,0,0,0]){return{srcRgb:Ae,srcAlpha:we,dstRgb:Be,dstAlpha:Pe,opRgb:Oe,opAlpha:Ke,color:{r:Ve[0],g:Ve[1],b:Ve[2],a:Ve[3]}}}const U={face:x.LR.BACK,mode:x.Wf.CCW},W={face:x.LR.FRONT,mode:x.Wf.CCW},Y=Ae=>Ae===D.Vr.Back?U:Ae===D.Vr.Front?W:null,H={zNear:0,zFar:1},G={r:!0,g:!0,b:!0,a:!0};function $(Ae){return ee.intern(Ae)}function re(Ae){return ne.intern(Ae)}function ue(Ae){return de.intern(Ae)}function ae(Ae){return _e.intern(Ae)}function oe(Ae){return ye.intern(Ae)}function ie(Ae){return De.intern(Ae)}function X(Ae){return Ce.intern(Ae)}function Z(Ae){return Te.intern(Ae)}function Q(Ae){return je.intern(Ae)}class J{constructor(we,Be){this.makeKey=we,this.makeRef=Be,this.interns=new Map}intern(we){if(!we)return null;const Be=this.makeKey(we),Pe=this.interns;return Pe.has(Be)||Pe.set(Be,this.makeRef(we)),Pe.get(Be)}}function se(Ae){return"["+Ae.join(",")+"]"}const ee=new J(le,Ae=>({__tag:"Blending",...Ae}));function le(Ae){return Ae?se([Ae.srcRgb,Ae.srcAlpha,Ae.dstRgb,Ae.dstAlpha,Ae.opRgb,Ae.opAlpha,Ae.color.r,Ae.color.g,Ae.color.b,Ae.color.a]):null}const ne=new J(ce,Ae=>({__tag:"Culling",...Ae}));function ce(Ae){return Ae?se([Ae.face,Ae.mode]):null}const de=new J(me,Ae=>({__tag:"PolygonOffset",...Ae}));function me(Ae){return Ae?se([Ae.factor,Ae.units]):null}const _e=new J(he,Ae=>({__tag:"DepthTest",...Ae}));function he(Ae){return Ae?se([Ae.func]):null}const ye=new J(fe,Ae=>({__tag:"StencilTest",...Ae}));function fe(Ae){return Ae?se([Ae.function.func,Ae.function.ref,Ae.function.mask,Ae.operation.fail,Ae.operation.zFail,Ae.operation.zPass]):null}const De=new J(ve,Ae=>({__tag:"DepthWrite",...Ae}));function ve(Ae){return Ae?se([Ae.zNear,Ae.zFar]):null}const Ce=new J(ge,Ae=>({__tag:"ColorWrite",...Ae}));function ge(Ae){return Ae?se([Ae.r,Ae.g,Ae.b,Ae.a]):null}const Te=new J(Le,Ae=>({__tag:"StencilWrite",...Ae}));function Le(Ae){return Ae?se([Ae.mask]):null}const je=new J(function ze(Ae){return Ae?se([le(Ae.blending),ce(Ae.culling),me(Ae.polygonOffset),he(Ae.depthTest),fe(Ae.stencilTest),ve(Ae.depthWrite),ge(Ae.colorWrite),Le(Ae.stencilWrite)]):null},Ae=>({blending:$(Ae.blending),culling:re(Ae.culling),polygonOffset:ue(Ae.polygonOffset),depthTest:ae(Ae.depthTest),stencilTest:oe(Ae.stencilTest),depthWrite:ie(Ae.depthWrite),colorWrite:X(Ae.colorWrite),stencilWrite:Z(Ae.stencilWrite)}));class Ee{constructor(we){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=we}setPipeline(we){(this._pipelineInvalid||we!==this._pipeline)&&(this._setBlending(we.blending),this._setCulling(we.culling),this._setPolygonOffset(we.polygonOffset),this._setDepthTest(we.depthTest),this._setStencilTest(we.stencilTest),this._setDepthWrite(we.depthWrite),this._setColorWrite(we.colorWrite),this._setStencilWrite(we.stencilWrite),this._pipeline=we),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(we){this._blending=this._setSubState(we,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(we){this._culling=this._setSubState(we,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(we){this._polygonOffset=this._setSubState(we,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(we){this._depthTest=this._setSubState(we,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(we){this._stencilTest=this._setSubState(we,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(we){this._depthWrite=this._setSubState(we,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(we){this._colorWrite=this._setSubState(we,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(we){this._stencilWrite=this._setSubState(we,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(we,Be,Pe,Oe){return(Pe||we!==Be)&&(Oe(we),this._pipelineInvalid=!0),we}}},92236:(qe,xe,T)=>{"use strict";T.d(xe,{a:()=>x,b:()=>w});var D=T(90912);function x(B){const U=(0,D.vU)(100*(1-B));return Math.max(0,Math.min(U,100))}function w(B){return Math.max(0,Math.min(1-B/100,1))}},32584:(qe,xe,T)=>{"use strict";T.d(xe,{Nw:()=>X});var D=T(26584),x=T(58817),w=T(62208),B=T(94113),U=T(23025),W=T(72469);const Y=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),H=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function oe(Z,Q){"maxScale"in Z&&(Q.maxScale=(0,U.k)(Z.maxScale)),"minScale"in Z&&(Q.minScale=(0,U.k)(Z.minScale))}function X(Z,Q,J){if(!("write"in Z)||!Z.write)return J&&J.messages&&J.messages.push(new D.Z("layer:unsupported",`Layers (${Z.title}, ${Z.id}) of type '${Z.declaredClass}' cannot be persisted`,{layer:Z})),null;if(function ue(Z,Q){if(Q.restrictedWebMapWriting){const J=function re(Z){return"basemap"===Z.layerContainerType?Y:"operational-layers"===Z.layerContainerType?H:null}(Q);return!(0,w.pC)(J)||J.has(Z.type)&&!(0,W.rQ)(Z)}return!0}(Z,J)){const se={};return Z.write(se,J)?se:null}return(0,w.pC)(Q)&&function ie(Z,Q){if(function ae(Z,Q){if((0,W.rQ)(Z)){const J=(0,B.hS)("featureCollection.layers",Q),se=J&&J[0]&&J[0].layerDefinition;se&&oe(Z,se)}else"stream"===Z.type?oe(Z,Q.layerDefinition=Q.layerDefinition||{}):"group"!==Z.type&&oe(Z,Q)}(Z,Q),"blendMode"in Z&&(Q.blendMode=Z.blendMode,"normal"===Q.blendMode&&delete Q.blendMode),Q.opacity=(0,U.k)(Z.opacity),Q.title=Z.title||"Layer",Q.visibility=Z.visible,"legendEnabled"in Z&&"wmts"!==Z.type)if((0,W.rQ)(Z)){const J=Q.featureCollection;J&&(J.showLegend=Z.legendEnabled)}else Q.showLegend=Z.legendEnabled}(Z,Q=(0,x.d9)(Q)),Q}},88380:(qe,xe,T)=>{"use strict";T.d(xe,{NA:()=>$,QQ:()=>re,fD:()=>ae,pO:()=>W});var D=T(15861),x=T(91558),w=T(18722);const B=new x.Z([64,64,64]);function U(oe,ie){const X=[],Z=oe.length-1;return 5===oe.length?X.push(0,2,4):X.push(0,Z),oe.map((Q,J)=>X.includes(J)?(0,w.MN)(Q,J,Z,ie):null)}function W(oe,ie,X){return Y.apply(this,arguments)}function Y(){return Y=(0,D.Z)(function*(oe,ie,X){let Z=!1,Q=[],J=[];if(oe.stops){const ne=oe.stops;Q=ne.map(ce=>ce.value),Z=ne.some(ce=>!!ce.label),Z&&(J=ne.map(ce=>ce.label))}if(null==Q[0]&&null==Q[Q.length-1])return null;const le=Z?null:U(Q,X);return(yield Promise.all(Q.map(function(){var ne=(0,D.Z)(function*(ce,de){return{value:ce,color:"opacity"===oe.type?yield H(ce,oe,ie):(yield Promise.resolve().then(T.bind(T,81808))).getColor(oe,ce),label:Z?J[de]:le[de]}});return function(ce,de){return ne.apply(this,arguments)}}()))).reverse()}),Y.apply(this,arguments)}function H(oe,ie){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*(oe,ie,X=B){const Z=new x.Z(X),Q=(yield Promise.resolve().then(T.bind(T,81808))).getOpacity(ie,oe);return null!=Q&&(Z.a=Q),Z})).apply(this,arguments)}function $(oe){let ie=!1,X=[],Z=[];if(X=oe.map(ee=>ee.value),ie=oe.some(ee=>!!ee.label),ie&&(Z=oe.map(ee=>ee.label)),null==X[0]&&null==X[X.length-1])return null;const se=ie?null:U(X,!1);return X.map((ee,le)=>({value:ee,color:re(ee,oe),label:ie?Z[le]:se[le]})).reverse()}function re(oe,ie){const{startIndex:X,endIndex:Z,weight:Q}=function ue(oe,ie){let X=0,Z=ie.length-1;return ie.some((Q,J)=>oe<Q.value?(Z=J,!0):(X=J,!1)),{startIndex:X,endIndex:Z,weight:(oe-ie[X].value)/(ie[Z].value-ie[X].value)}}(oe,ie);if(X===Z)return ie[X].color;const J=x.Z.blendColors(ie[X].color,ie[Z].color,Q);return new x.Z(J)}function ae(oe,ie){let X=[];if(oe&&"multipart"===oe.type)oe.colorRamps.reverse().forEach((Z,Q)=>{X.push(0===Q?{value:ie.max,color:new x.Z(Z.toColor),label:"high"}:{value:null,color:new x.Z(Z.toColor),label:""}),X.push(Q===oe.colorRamps.length-1?{value:ie.min,color:new x.Z(Z.fromColor),label:"low"}:{value:null,color:new x.Z(Z.fromColor),label:""})});else{let Z,Q;oe&&"algorithmic"===oe.type?(Z=oe.fromColor,Q=oe.toColor):(Z=[0,0,0,1],Q=[255,255,255,1]),X=[{value:ie.max,color:new x.Z(Q),label:"high"},{value:ie.min,color:new x.Z(Z),label:"low"}]}return X}},26831:(qe,xe,T)=>{"use strict";T.d(xe,{h:()=>x});var D=T(52372);function x(w){if(!w.colorStops)return[];const B=[...w.colorStops].filter(W=>W.color?.a>0);let U=B.length-1;if(B&&B[0]){const W=B[U];W&&1!==W.ratio&&(B.push(new D.Z({ratio:1,color:W.color})),U++)}return B.map((W,Y)=>{let H="";return 0===Y?H=w.legendOptions?.minLabel||"low":Y===U&&(H=w.legendOptions?.maxLabel||"high"),{color:W.color,label:H,ratio:W.ratio}}).reverse()}},18722:(qe,xe,T)=>{"use strict";T.d(xe,{Eh:()=>Y,MN:()=>G,jb:()=>re,uY:()=>$,y$:()=>ae,zZ:()=>W});var D=T(15861),w=(T(20383),T(88411)),B=T(98494),U=T(52068);const W="<",Y=">",H=(0,w.Ze)("short-date");function G(ie,X,Z,Q){let J="";0===X?J=`${W} `:X===Z&&(J=`${Y} `);let se=null;return se=Q?(0,w.p6)(ie,H):(0,B.WU)(ie),J+se}const $=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];function re(ie){return ue.apply(this,arguments)}function ue(){return(ue=(0,D.Z)(function*(ie){if(!("visualVariables"in ie)||!ie.visualVariables)return null;const X=ie.visualVariables.find(ee=>"color"===ee.type);if(!X)return null;let Z=null,Q=null;if(X.stops){if(1===X.stops.length)return X.stops[0].color;Z=X.stops[0].value,Q=X.stops[X.stops.length-1].value}const J=Z+(Q-Z)/2,{getColor:se}=yield Promise.resolve().then(T.bind(T,81808));return se(X,J)})).apply(this,arguments)}function ae(ie,X){return oe.apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(ie,X){const Z=ie.trailCap,Q=ie.trailWidth||1,J=X||(yield re(ie))||ie.color;return new U.Z({cap:Z,color:J,width:Q})})).apply(this,arguments)}},10391:(qe,xe,T)=>{"use strict";T.d(xe,{Z:()=>He});var D=T(15861),x=T(17626),B=(T(52515),T(40764)),U=T(61885),W=T(17770),Y=T(72392),G=(T(8314),T(58817)),$=T(63290),re=T(62208),ue=T(60330),ae=T(10699),oe=T(32917),ie=T(35948),X=T(77712),Z=T(66656),Q=T(76898),J=T(36082),se=T(819),ee=T(39605);T(62996);const ne={handleInterceptedEvent:($e,et,nt,it)=>($e.scheduleRender(),et.properties[`on${it.type}`].apply(et.properties.bind||nt,[it]))},ce={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:($e,et,nt)=>{$e.style[et]=nt}},he=($e,et,nt=!1)=>{let it=$e;return et.forEach((Xe,rt)=>{const Ze=it?.children?(($e,et)=>$e.find(lt=>lt.domNode===Xe))(it.children):void 0;nt&&!Ze&&rt!==et.length-1||(it=Ze)}),it};var fe=T(76210),De=T(54346),ve=T(21726);let Ce;Ce="components/assets";var Te=T(81431);const Le=new Set;var Ee=T(66950),Ae=T(38570),we=T(56683),Be=T(41840);const Pe="esri.widgets.Widget",Oe=$.Z.getLogger(Pe);let Ke=0;function Ne($e,et){for(const nt in et)null!=$e[nt]&&("object"==typeof $e[nt]&&"object"==typeof et[nt]?Ne($e[nt],et[nt]):$e[nt]=et[nt]);return $e}const Ie=($e=>{let et;const nt={...ne,...$e},it=($e=>({...ce,...$e}))(nt),Xe=it.performanceLogger;let rt,Ze=!0,lt=!1;const st=[],Mt=[],Ft=(wt,zt,Zt)=>{let ar;it.eventHandlerInterceptor=(kr,ss,os,Hr)=>function(pt){let Ut;Xe("domEvent",pt);const $t=(($e,et)=>{const nt=[];for(;$e&&$e!==et;)nt.push($e),$e=$e.parentNode;return nt})(pt.currentTarget,ar.domNode),Xt=$t.some(hr=>customElements.get(hr?.tagName?.toLowerCase()));if(pt.eventPhase!==Event.CAPTURING_PHASE&&Xt){const hr=pt.composedPath(),gr=hr.slice(hr.indexOf(pt.currentTarget),hr.indexOf(ar.domNode)).filter(vr=>vr.getRootNode()===vr.ownerDocument).reverse();Ut=he(ar.getLastRender(),gr,!0)}else $t.reverse(),Ut=he(ar.getLastRender(),$t);let _r;return Ut&&(_r=nt.handleInterceptedEvent(et,Ut,this,pt)),Xe("domEventProcessed",pt),_r},nt.postProcessProjectionOptions?.(it);const Pr=Zt();ar=wt(zt,Pr,it),st.push(ar),Mt.push(Zt),nt.afterFirstVNodeRendered&&nt.afterFirstVNodeRendered(ar,Pr)};let kt=()=>{if(rt=void 0,Ze){Ze=!1,Xe("renderStart",void 0);for(let wt=0;wt<st.length;wt++){const zt=Mt[wt]();Xe("rendered",void 0),st[wt].update(zt),Xe("patched",void 0)}Xe("renderDone",void 0),Ze=!0}};return nt.modifyDoRenderImplementation&&(kt=nt.modifyDoRenderImplementation(kt,st,Mt)),et={renderNow:kt,scheduleRender:()=>{rt||lt||(rt=requestAnimationFrame(kt))},stop:()=>{rt&&(cancelAnimationFrame(rt),rt=void 0),lt=!0},resume:()=>{lt=!1,Ze=!0,et.scheduleRender()},append:(wt,zt)=>{Ft(ee.v.append,wt,zt)},insertBefore:(wt,zt)=>{Ft(ee.v.insertBefore,wt,zt)},merge:(wt,zt)=>{Ft(ee.v.merge,wt,zt)},replace:(wt,zt)=>{Ft(ee.v.replace,wt,zt)},detach:wt=>{for(let zt=0;zt<Mt.length;zt++)if(Mt[zt]===wt)return Mt.splice(zt,1),st.splice(zt,1)[0];throw new Error("renderFunction was not found")}},et})({postProcessProjectionOptions($e){const et=$e.eventHandlerInterceptor,nt=/capture$/i;$e.eventHandlerInterceptor=(it,Xe,rt,Ze)=>{const lt=et(it,Xe,rt,Ze),st=nt.test(it);if(!((it=it.replace(nt,"")).toLowerCase()in rt)||st){const Mt=it[2].toLowerCase()+it.slice(3),Ft=zt=>lt.call(rt,zt);rt.addEventListener(Mt,Ft,st);const kt=()=>rt.removeEventListener(Mt,Ft,st),wt=Ze.afterRemoved;Ze.afterRemoved=zt=>{wt?.(zt),kt()}}return lt}},handleInterceptedEvent($e,et,nt,it){const{eventPhase:Xe,type:rt}=it,Ze=Xe===Event.CAPTURING_PHASE;let lt=`on${rt}${Ze?"capture":""}`;const st=et.properties;(lt in st||(lt=`on${rt[0].toUpperCase()}${rt.slice(1)}${Ze?"Capture":""}`,lt in st))&&((0,Ee.Uy)(),$e.scheduleRender(),st[lt].call(st.bind||nt,it))}});let We=!1,Se=class extends((0,ue.v)(U.Z.EventedAccessor)){constructor($e,et){var nt;super($e,et),nt=this,this._attached=!1,this._internalHandles=new Y.Z,this._projector=Ie,this._readyForTrueRender=!1,this.domNode=null,this.iconClass="esri-icon-checkbox-unchecked",this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=(0,ae.Ds)((0,D.Z)(function*(){if(nt._messageBundleProps&&nt._messageBundleProps.length){const Ze=yield(0,ae.as)(nt._messageBundleProps.map(function(){var lt=(0,D.Z)(function*({bundlePath:st,propertyName:Mt}){let Ft=yield(0,Be.ME)(st);nt.uiStrings&&Object.keys(nt.uiStrings)&&(Ft=Ne((0,G.d9)(Ft),nt.uiStrings)),nt[Mt]=Ft});return function(st){return lt.apply(this,arguments)}}()));for(const lt of Ze)lt.error&&Oe.error("widget-intl:locale-error",nt.declaredClass,lt.error)}yield nt.loadLocale()})),function ge(){(0,fe.YY)((0,ve.hF)((0,De.V)("components/assets")))}();const it="esri-widget-uid-"+(0,ie.D)(),Xe=this.render.bind(this);this._trackingTarget=new se.M(()=>this.scheduleRender());const rt=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:it,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const Ze=Xe();let{properties:lt}=Ze;lt||(Ze.properties=lt={});let{key:st,styles:Mt}=lt;st||(lt.key=it),Mt||(lt.styles=Mt={}),Mt.display||(Mt.display="");let Ft=0;return Ze.children?.forEach(kt=>{if((0,Te.ZJ)(kt.vnodeSelector))return;let{properties:wt}=kt;wt||(kt.properties=wt={}),wt.key||(wt.key=`${this.id}--${Ft++}`)}),(0,Te.dh)(this,Ze)};this.render=()=>{if(We)return rt();let Ze=(0,Ee.O9)(this);if(Ze)return Ze;this._trackingTarget.clear(),We=!0;try{Ze=(0,J.LJ)(this._trackingTarget,rt)}catch(lt){throw console.error(lt),lt}finally{We=!1}return(0,Ee.KF)(this,Ze),Ze},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),function je($e){Le.add($e),$e.finally(()=>Le.delete($e))}(this._resourcesFetch)}normalizeCtorArgs($e,et){const nt={...$e};return et&&(nt.container=et),nt}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(ae.H9)}loadDependencies(){return(0,D.Z)(function*(){})()}loadLocale(){return(0,D.Z)(function*(){})()}destroy(){this.destroyed||((0,re.SC)(this._trackingTarget),(0,re.SC)(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,Ee.w7)(this))}set container($e){this._get("container")||this._set("container",$e)}castContainer($e){return(0,B.L7)($e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Ke++}set id($e){$e&&this._set("id",$e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,Ee.w7)(this),this._projector.scheduleRender())}classes(...$e){return Ae.Sh.apply(this,$e)}renderNow(){(0,Ee.w7)(this),this._projector.renderNow()}_postInitialize(){var $e=this;if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add((0,oe.YP)(()=>this.viewModel,(nt,it)=>{it&&this._internalHandles.remove("delegated-events"),nt&&(0,W.vT)(nt)&&this._internalHandles.add(this._delegatedEventNames.map(Xe=>(0,W.on)(nt,Xe,rt=>{this.emit(Xe,rt)})),"delegated-events")},oe.nn)),this.postInitialize();const et=function(){var nt=(0,D.Z)(function*(){yield $e._loadLocale().catch(ae.H9),$e.scheduleRender()});return function(){return nt.apply(this,arguments)}}();this._internalHandles.add([(0,we.qe)(et),(0,oe.YP)(()=>this.uiStrings,et),(0,oe.gx)(()=>this.container,nt=>{this.destroyed||this._attach(nt)},{initial:!0,once:!0})])}_attach($e){$e&&(this._projector.merge($e,this.render),this._attached=!0)}_detach($e){$e&&this._attached&&(this._projector.detach(this.render),$e.parentNode&&$e.parentNode.removeChild($e),this._attached=!1)}};Se[Te.$X]=!0,(0,x._)([(0,X.Cb)()],Se.prototype,"_readyForTrueRender",void 0),(0,x._)([(0,X.Cb)({value:null})],Se.prototype,"container",null),(0,x._)([(0,Z.p)("container")],Se.prototype,"castContainer",null),(0,x._)([(0,X.Cb)({aliasOf:"container"})],Se.prototype,"domNode",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"iconClass",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"id",null),(0,x._)([(0,X.Cb)()],Se.prototype,"label",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"renderable",null),(0,x._)([(0,X.Cb)()],Se.prototype,"uiStrings",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"viewModel",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"visible",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"key",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"children",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"afterCreate",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"afterUpdate",void 0),(0,x._)([(0,X.Cb)()],Se.prototype,"afterRemoved",void 0),Se=(0,x._)([(0,Q.j)(Pe)],Se);const He=Se},67436:(qe,xe,T)=>{"use strict";T.d(xe,{_:()=>Y});var D=T(17626),x=T(77712),W=(T(85931),T(8314),T(90912),T(76898));const Y=H=>{let G=class extends H{constructor(...$){super(...$),this.goToOverride=null,this.view=null}callGoTo($){const{view:re}=this;return this.goToOverride?this.goToOverride(re,$):re.goTo($.target,$.options)}};return(0,D._)([(0,x.Cb)()],G.prototype,"goToOverride",void 0),(0,D._)([(0,x.Cb)()],G.prototype,"view",void 0),G=(0,D._)([(0,W.j)("esri.widgets.support.GoTo")],G),G}},13065:(qe,xe,T)=>{"use strict";T.d(xe,{MJ:()=>Y,X6:()=>U});var D=T(21286),x=T(38570),w=T(94450);function U(H,G){const $=W(H.level),re=`h${$}`;return delete H.level,(0,w.u)(re,{...H,class:(0,x.Sh)("esri-widget__heading",H.class),role:"heading","aria-level":String($)},G)}function W(H){return(0,D.uZ)(Math.ceil(H),1,6)}function Y(H,G=1){return W(H+G)}},24940:(qe,xe,T)=>{"use strict";T.d(xe,{h:()=>x});var D=T(38570);function x(){return function(U,W){if(!U[W])throw new TypeError(`Cannot auto bind undefined function '${W}'`);return{value:B(U[W])}}}function B(U){return function(W,...Y){!function w(U){const{type:W}=U;return U instanceof KeyboardEvent||"keyup"===W||"keydown"===W||"keypress"===W}(W)?U.call(this,W,...Y):(0,D.pf)(W.key)&&(W.preventDefault(),W.stopPropagation(),W.target.click())}}},25552:(qe,xe,T)=>{"use strict";function D(x){return(w,B)=>{w.hasOwnProperty("_messageBundleProps")||(w._messageBundleProps=w._messageBundleProps?w._messageBundleProps.slice():[]),w._messageBundleProps.push({bundlePath:x,propertyName:B})}}T.d(xe,{H:()=>D})},94450:(qe,xe,T)=>{"use strict";T.d(xe,{u:()=>U});var D=T(81431),x=function(Y){return{vnodeSelector:"",properties:void 0,children:void 0,text:Y.toString(),domNode:null}},w=function(Y,H){for(var G=0,$=Y.length;G<$;G++){var re=Y[G];Array.isArray(re)?w(re,H):null!=re&&!1!==re&&(re.hasOwnProperty("vnodeSelector")||(re=x(re)),H.push(re))}};function U(Y,H,...G){return"function"!=typeof Y||(0,D.ZJ)(Y)?function(Y,H){for(var G=[],$=2;$<arguments.length;$++)G[$-2]=arguments[$];if(1===G.length&&"string"==typeof G[0])return{vnodeSelector:Y,properties:H||void 0,children:void 0,text:G[0],domNode:null};var re=[];return w(G,re),{vnodeSelector:Y,properties:H||void 0,children:re,text:void 0,domNode:null}}(Y,H,...G):Y(H,...G)}},81431:(qe,xe,T)=>{"use strict";T.d(xe,{$X:()=>x,ZJ:()=>$,dh:()=>W});var D=T(54024);const x=Symbol("widget"),w=[],B={},U=new WeakMap;function W(re,ue){let ae=ue.children;if(ae&&ae.length)for(let ie=0;ie<ae.length;++ie)ae[ie]=W(re,ae[ie]);else ae=w;const oe=ue.vnodeSelector;if($(oe)){const ie=ue.properties||B,X=ie.key||oe;return{vnodeSelector:"div",properties:{key:X,afterCreate:Y,afterUpdate:H,afterRemoved:G,parentWidget:re,widgetConstructor:oe,widgetProperties:{...ie,key:X,children:ae}},children:void 0,text:void 0,domNode:null}}return ue}function Y(re,ue,ae,{parentWidget:oe,widgetConstructor:ie,widgetProperties:X}){const Z=new ie(X);Z.container=re,U.set(re,Z),Z.afterCreate?.(Z,re),oe._internalHandles.add((0,D.kB)(()=>G(re)))}function H(re,ue,ae,{widgetProperties:oe}){const ie=U.get(re);ie&&(ie.set(oe),ie.afterUpdate?.(ie,re))}function G(re){const ue=U.get(re);ue&&(ue.destroy(),U.delete(re))}function $(re){return"function"==typeof re&&re[x]}},66950:(qe,xe,T)=>{"use strict";T.d(xe,{KF:()=>B,O9:()=>w,Uy:()=>x,w7:()=>U});const D=new Map;function x(){D.clear()}function w(W){return D.get(W)}function B(W,Y){D.set(W,Y)}function U(W){D.delete(W)}},25469:(qe,xe,T)=>{"use strict";function B(W){return W&&"function"==typeof W.render}function U(W){return W&&"function"==typeof W.postMixInProperties&&"function"==typeof W.buildRendering&&"function"==typeof W.postCreate&&"function"==typeof W.startup}T.d(xe,{Qd:()=>B,o:()=>U}),T(24940),T(94450),T(38570)},38570:(qe,xe,T)=>{"use strict";T.d(xe,{Sh:()=>Zi,vU:()=>Ys,pV:()=>zs,pf:()=>Ci,dZ:()=>as,w3:()=>ds,Yo:()=>As});var U=Object.prototype,W=Function.prototype.toString,Y=U.hasOwnProperty,H=W.call(Object),G=U.toString,$=function w(gt,Wr){return function(xr){return gt(Wr(xr))}}(Object.getPrototypeOf,Object),oe={exports:{}},ie={},X={exports:{}},Z={};function Q(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var ee=/javascript\s*\:/gim;Z.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},Z.getDefaultWhiteList=Q,Z.onAttr=function J(gt,Wr,xr){},Z.onIgnoreAttr=function se(gt,Wr,xr){},Z.safeAttrValue=function le(gt,Wr){return ee.test(Wr)?"":Wr};var ce_trim=function(gt){return String.prototype.trim?gt.trim():gt.replace(/(^\s*)|(\s*$)/g,"")},ce_trimRight=function(gt){return String.prototype.trimRight?gt.trimRight():gt.replace(/(\s*$)/g,"")},_e=Z;function ye(gt){return null==gt}function De(gt){(gt=function fe(gt){var Wr={};for(var xr in gt)Wr[xr]=gt[xr];return Wr}(gt||{})).whiteList=gt.whiteList||_e.whiteList,gt.onAttr=gt.onAttr||_e.onAttr,gt.onIgnoreAttr=gt.onIgnoreAttr||_e.onIgnoreAttr,gt.safeAttrValue=gt.safeAttrValue||_e.safeAttrValue,this.options=gt}De.prototype.process=function(gt){if(!(gt=(gt=gt||"").toString()))return"";var xr=this.options,bs=xr.whiteList,Ns=xr.onAttr,_i=xr.onIgnoreAttr,gi=xr.safeAttrValue;return function de(gt,Wr){";"!==(gt=ce_trimRight(gt))[gt.length-1]&&(gt+=";");var xr=gt.length,bs=!1,Ns=0,_i=0,gi="";function hi(){if(!bs){var zi=ce_trim(gt.slice(Ns,_i)),Zr=zi.indexOf(":");if(-1!==Zr){var ii=ce_trim(zi.slice(0,Zr)),yn=ce_trim(zi.slice(Zr+1));if(ii){var dr=Wr(Ns,gi.length,ii,yn,zi);dr&&(gi+=dr+"; ")}}}Ns=_i+1}for(;_i<xr;_i++){var Di=gt[_i];if("/"===Di&&"*"===gt[_i+1]){var Oi=gt.indexOf("*/",_i+2);if(-1===Oi)break;Ns=(_i=Oi+1)+1,bs=!1}else"("===Di?bs=!0:")"===Di?bs=!1:";"===Di?bs||hi():"\n"===Di&&hi()}return ce_trim(gi)}(gt,function(Di,Oi,zi,Zr,ii){var yn=bs[zi],dr=!1;if(!0===yn?dr=yn:"function"==typeof yn?dr=yn(Zr):yn instanceof RegExp&&(dr=yn.test(Zr)),!0!==dr&&(dr=!1),Zr=gi(zi,Zr)){var er,Dr={position:Oi,sourcePosition:Di,source:ii,isWhite:dr};if(dr)return ye(er=Ns(zi,Zr,Dr))?zi+":"+Zr:er;if(!ye(er=_i(zi,Zr,Dr)))return er}})};var ve=De;!function(gt,Wr){var xr=Z,bs=ve;for(var _i in(Wr=gt.exports=function Ns(gi,hi){return new bs(hi).process(gi)}).FilterCSS=bs,xr)Wr[_i]=xr[_i]}(X,X.exports);var Ce={indexOf:function(gt,Wr){var xr,bs;if(Array.prototype.indexOf)return gt.indexOf(Wr);for(xr=0,bs=gt.length;xr<bs;xr++)if(gt[xr]===Wr)return xr;return-1},forEach:function(gt,Wr,xr){var bs,Ns;if(Array.prototype.forEach)return gt.forEach(Wr,xr);for(bs=0,Ns=gt.length;bs<Ns;bs++)Wr.call(xr,gt[bs],bs,gt)},trim:function(gt){return String.prototype.trim?gt.trim():gt.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(gt){var xr=/\s|\n|\t/.exec(gt);return xr?xr.index:-1}},Te=X.exports.getDefaultWhiteList,Le=Ce;var ze=new(0,X.exports.FilterCSS);function Pe(gt){return gt.replace(Ke,"&lt;").replace(Ve,"&gt;")}var Ke=/</g,Ve=/>/g,Ne=/"/g,Ie=/&quot;/g,We=/&#([a-zA-Z0-9]*);?/gim,Se=/&colon;?/gim,He=/&newline;?/gim,$e=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,et=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,nt=/u\s*r\s*l\s*\(.*/gi;function it(gt){return gt.replace(Ne,"&quot;")}function Xe(gt){return gt.replace(Ie,'"')}function rt(gt){return gt.replace(We,function(xr,bs){return String.fromCharCode("x"===bs[0]||"X"===bs[0]?parseInt(bs.substr(1),16):parseInt(bs,10))})}function Ze(gt){return gt.replace(Se,":").replace(He," ")}function lt(gt){for(var Wr="",xr=0,bs=gt.length;xr<bs;xr++)Wr+=gt.charCodeAt(xr)<32?" ":gt.charAt(xr);return Le.trim(Wr)}function st(gt){return lt(gt=Ze(gt=rt(gt=Xe(gt))))}function Mt(gt){return Pe(gt=it(gt))}ie.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},ie.getDefaultWhiteList=function je(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},ie.onTag=function Ee(gt,Wr,xr){},ie.onIgnoreTag=function Ae(gt,Wr,xr){},ie.onTagAttr=function we(gt,Wr,xr){},ie.onIgnoreTagAttr=function Be(gt,Wr,xr){},ie.safeAttrValue=function Oe(gt,Wr,xr,bs){if(xr=st(xr),"href"===Wr||"src"===Wr){if("#"===(xr=Le.trim(xr)))return"#";if("http://"!==xr.substr(0,7)&&"https://"!==xr.substr(0,8)&&"mailto:"!==xr.substr(0,7)&&"tel:"!==xr.substr(0,4)&&"data:image/"!==xr.substr(0,11)&&"ftp://"!==xr.substr(0,6)&&"./"!==xr.substr(0,2)&&"../"!==xr.substr(0,3)&&"#"!==xr[0]&&"/"!==xr[0])return""}else if("background"===Wr){if($e.lastIndex=0,$e.test(xr))return""}else if("style"===Wr){if(et.lastIndex=0,et.test(xr)||(nt.lastIndex=0,nt.test(xr)&&($e.lastIndex=0,$e.test(xr))))return"";!1!==bs&&(xr=(bs=bs||ze).process(xr))}return Mt(xr)},ie.escapeHtml=Pe,ie.escapeQuote=it,ie.unescapeQuote=Xe,ie.escapeHtmlEntities=rt,ie.escapeDangerHtml5Entities=Ze,ie.clearNonPrintableCharacter=lt,ie.friendlyAttrValue=st,ie.escapeAttrValue=Mt,ie.onIgnoreTagStripAll=function Ft(){return""},ie.StripTagBody=function kt(gt,Wr){"function"!=typeof Wr&&(Wr=function(){});var xr=!Array.isArray(gt),Ns=[],_i=!1;return{onIgnoreTag:function(gi,hi,Di){if(function bs(gi){return!!xr||-1!==Le.indexOf(gt,gi)}(gi)){if(Di.isClosing){var Oi="[/removed]";return Ns.push([!1!==_i?_i:Di.position,Di.position+Oi.length]),_i=!1,Oi}return _i||(_i=Di.position),"[removed]"}return Wr(gi,hi,Di)},remove:function(gi){var hi="",Di=0;return Le.forEach(Ns,function(Oi){hi+=gi.slice(Di,Oi[0]),Di=Oi[1]}),hi+=gi.slice(Di)}}},ie.stripCommentTag=function wt(gt){for(var Wr="",xr=0;xr<gt.length;){var bs=gt.indexOf("\x3c!--",xr);if(-1===bs){Wr+=gt.slice(xr);break}Wr+=gt.slice(xr,bs);var Ns=gt.indexOf("--\x3e",bs);if(-1===Ns)break;xr=Ns+3}return Wr},ie.stripBlankChar=function zt(gt){var Wr=gt.split("");return(Wr=Wr.filter(function(xr){var bs=xr.charCodeAt(0);return!(127===bs||bs<=31&&10!==bs&&13!==bs)})).join("")},ie.cssFilter=ze,ie.getDefaultCSSWhiteList=Te;var Zt={},ar=Ce;function Pr(gt){var Wr=ar.spaceIndex(gt);if(-1===Wr)var xr=gt.slice(1,-1);else xr=gt.slice(1,Wr+1);return"/"===(xr=ar.trim(xr).toLowerCase()).slice(0,1)&&(xr=xr.slice(1)),"/"===xr.slice(-1)&&(xr=xr.slice(0,-1)),xr}function kr(gt){return"</"===gt.slice(0,2)}var os=/[^a-zA-Z0-9_:\.\-]/gim;function pt(gt,Wr){for(;Wr<gt.length;Wr++){var xr=gt[Wr];if(" "!==xr)return"="===xr?Wr:-1}}function Ut(gt,Wr){for(;Wr>0;Wr--){var xr=gt[Wr];if(" "!==xr)return"="===xr?Wr:-1}}function Xt(gt){return function $t(gt){return'"'===gt[0]&&'"'===gt[gt.length-1]||"'"===gt[0]&&"'"===gt[gt.length-1]}(gt)?gt.substr(1,gt.length-2):gt}Zt.parseTag=function ss(gt,Wr,xr){var bs="",Ns=0,_i=!1,gi=!1,hi=0,Di=gt.length,Oi="",zi="";e:for(hi=0;hi<Di;hi++){var Zr=gt.charAt(hi);if(!1===_i){if("<"===Zr){_i=hi;continue}}else if(!1===gi){if("<"===Zr){bs+=xr(gt.slice(Ns,hi)),_i=hi,Ns=hi;continue}if(">"===Zr){bs+=xr(gt.slice(Ns,_i)),Oi=Pr(zi=gt.slice(_i,hi+1)),bs+=Wr(_i,bs.length,Oi,zi,kr(zi)),Ns=hi+1,_i=!1;continue}if('"'===Zr||"'"===Zr)for(var ii=1,yn=gt.charAt(hi-ii);""===yn.trim()||"="===yn;){if("="===yn){gi=Zr;continue e}yn=gt.charAt(hi-++ii)}}else if(Zr===gi){gi=!1;continue}}return Ns<gt.length&&(bs+=xr(gt.substr(Ns))),bs},Zt.parseAttr=function Hr(gt,Wr){var xr=0,bs=[],Ns=!1,_i=gt.length;function gi(Zr,ii){if(!((Zr=(Zr=ar.trim(Zr)).replace(os,"").toLowerCase()).length<1)){var yn=Wr(Zr,ii||"");yn&&bs.push(yn)}}for(var hi=0;hi<_i;hi++){var zi,Di=gt.charAt(hi);if(!1!==Ns||"="!==Di)if(!1===Ns||hi!==xr||'"'!==Di&&"'"!==Di||"="!==gt.charAt(hi-1)){if(/\s|\n|\t/.test(Di)){if(gt=gt.replace(/\s|\n|\t/g," "),!1===Ns){if(-1===(zi=pt(gt,hi))){gi(ar.trim(gt.slice(xr,hi))),Ns=!1,xr=hi+1;continue}hi=zi-1;continue}if(-1===(zi=Ut(gt,hi-1))){gi(Ns,Xt(ar.trim(gt.slice(xr,hi)))),Ns=!1,xr=hi+1;continue}}}else{if(-1===(zi=gt.indexOf(Di,hi+1)))break;gi(Ns,ar.trim(gt.slice(xr+1,zi))),Ns=!1,xr=(hi=zi)+1}else Ns=gt.slice(xr,hi),xr=hi+1}return xr<gt.length&&(!1===Ns?gi(gt.slice(xr)):gi(Ns,Xt(ar.trim(gt.slice(xr))))),ar.trim(bs.join(" "))};var _r=X.exports.FilterCSS,hr=ie,vr=Zt.parseTag,Kr=Zt.parseAttr,Gr=Ce;function Jr(gt){return null==gt}function Tr(gt){(gt=function lr(gt){var Wr={};for(var xr in gt)Wr[xr]=gt[xr];return Wr}(gt||{})).stripIgnoreTag&&(gt.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),gt.onIgnoreTag=hr.onIgnoreTagStripAll),gt.whiteList=gt.whiteList||gt.allowList||hr.whiteList,gt.onTag=gt.onTag||hr.onTag,gt.onTagAttr=gt.onTagAttr||hr.onTagAttr,gt.onIgnoreTag=gt.onIgnoreTag||hr.onIgnoreTag,gt.onIgnoreTagAttr=gt.onIgnoreTagAttr||hr.onIgnoreTagAttr,gt.safeAttrValue=gt.safeAttrValue||hr.safeAttrValue,gt.escapeHtml=gt.escapeHtml||hr.escapeHtml,this.options=gt,!1===gt.css?this.cssFilter=!1:(gt.css=gt.css||{},this.cssFilter=new _r(gt.css))}Tr.prototype.process=function(gt){if(!(gt=(gt=gt||"").toString()))return"";var xr=this.options,bs=xr.whiteList,Ns=xr.onTag,_i=xr.onIgnoreTag,gi=xr.onTagAttr,hi=xr.onIgnoreTagAttr,Di=xr.safeAttrValue,Oi=xr.escapeHtml,zi=this.cssFilter;xr.stripBlankChar&&(gt=hr.stripBlankChar(gt)),xr.allowCommentTag||(gt=hr.stripCommentTag(gt));var Zr=!1;xr.stripIgnoreTagBody&&(Zr=hr.StripTagBody(xr.stripIgnoreTagBody,_i),_i=Zr.onIgnoreTag);var ii=vr(gt,function(yn,dr,Dr,er,Ir){var Ws,Ps={sourcePosition:yn,position:dr,isClosing:Ir,isWhite:bs.hasOwnProperty(Dr)};if(!Jr(Ws=Ns(Dr,er,Ps)))return Ws;if(Ps.isWhite){if(Ps.isClosing)return"</"+Dr+">";var yi=function ns(gt){var Wr=Gr.spaceIndex(gt);if(-1===Wr)return{html:"",closing:"/"===gt[gt.length-2]};var xr="/"===(gt=Gr.trim(gt.slice(Wr+1,-1)))[gt.length-1];return xr&&(gt=Gr.trim(gt.slice(0,-1))),{html:gt,closing:xr}}(er),Gs=bs[Dr],Mi=Kr(yi.html,function(Hs,ki){var Uo,sn=-1!==Gr.indexOf(Gs,Hs);return Jr(Uo=gi(Dr,Hs,ki,sn))?sn?(ki=Di(Dr,Hs,ki,zi))?Hs+'="'+ki+'"':Hs:Jr(Uo=hi(Dr,Hs,ki,sn))?void 0:Uo:Uo});return er="<"+Dr,Mi&&(er+=" "+Mi),yi.closing&&(er+=" /"),er+">"}return Jr(Ws=_i(Dr,er,Ps))?Oi(er):Ws},Oi);return Zr&&(ii=Zr.remove(ii)),ii};var zr=Tr;!function(gt,Wr){var xr=ie,bs=Zt,Ns=zr;function _i(Di,Oi){return new Ns(Oi).process(Di)}for(var gi in(Wr=gt.exports=_i).filterXSS=_i,Wr.FilterXSS=Ns,xr)Wr[gi]=xr[gi];for(var gi in bs)Wr[gi]=bs[gi];(function hi(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope})()&&(self.filterXSS=gt.exports)}(oe,oe.exports);var yr,jr,Tt=function(){function gt(Wr,xr){var Ns,bs=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(_i,gi,hi,Di){return"a"===_i&&"href"===gi||("img"===_i||"source"===_i)&&"src"===gi?bs.sanitizeUrl(hi):oe.exports.safeAttrValue(_i,gi,hi,Di)}},Wr&&!xr?Ns=Wr:Wr&&xr?(Ns=Object.create(this.arcgisFilterOptions),Object.keys(Wr).forEach(function(_i){"whiteList"===_i?Ns.whiteList=bs._extendObjectOfArrays([bs.arcgisWhiteList,Wr.whiteList||{}]):Ns[_i]=Wr[_i]})):(Ns=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=Ns,this._xssFilter=new oe.exports.FilterXSS(Ns)}return gt.prototype.sanitize=function(Wr,xr){switch(void 0===xr&&(xr={}),typeof Wr){case"number":return isNaN(Wr)||!isFinite(Wr)?null:Wr;case"boolean":return Wr;case"string":return this._xssFilter.process(Wr);case"object":return this._iterateOverObject(Wr,xr);default:return xr.allowUndefined&&typeof Wr>"u"?void 0:null}},gt.prototype.sanitizeUrl=function(Wr,xr){var bs=(xr??{}).isProtocolRequired,Ns=void 0===bs||bs,_i=this._trim(Wr.substring(0,Wr.indexOf(":"))),gi="/"===Wr,hi=/^#/.test(Wr),Di=_i&&this.allowedProtocols.indexOf(_i.toLowerCase())>-1;return gi||hi||Di?oe.exports.escapeAttrValue(Wr):_i||Ns?"":oe.exports.escapeAttrValue("https://".concat(Wr))},gt.prototype.sanitizeHTMLAttribute=function(Wr,xr,bs,Ns){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Wr,xr,bs,Ns):oe.exports.safeAttrValue(Wr,xr,bs,Ns)},gt.prototype.validate=function(Wr,xr){void 0===xr&&(xr={});var bs=this.sanitize(Wr,xr);return{isValid:Wr===bs,sanitized:bs}},gt.prototype._extendObjectOfArrays=function(Wr){var xr={};return Wr.forEach(function(bs){Object.keys(bs).forEach(function(Ns){xr[Ns]=Array.isArray(bs[Ns])&&Array.isArray(xr[Ns])?xr[Ns].concat(bs[Ns]):bs[Ns]})}),xr},gt.prototype._iterateOverObject=function(Wr,xr){var bs=this;void 0===xr&&(xr={});try{var Ns=!1,_i=void 0;if(Array.isArray(Wr))_i=Wr.reduce(function(hi,Di){var Oi=bs.validate(Di,xr);return Oi.isValid?hi.concat([Di]):(Ns=!0,hi.concat([Oi.sanitized]))},[]);else{if(!function ue(gt){if(!function re(gt){return!!gt&&"object"==typeof gt}(gt)||"[object Object]"!=G.call(gt)||function x(gt){var Wr=!1;if(null!=gt&&"function"!=typeof gt.toString)try{Wr=!!(gt+"")}catch{}return Wr}(gt))return!1;var Wr=$(gt);if(null===Wr)return!0;var xr=Y.call(Wr,"constructor")&&Wr.constructor;return"function"==typeof xr&&xr instanceof xr&&W.call(xr)==H}(Wr))return xr.allowUndefined&&typeof Wr>"u"?void 0:null;_i=Object.keys(Wr).reduce(function(hi,Di){var Oi=Wr[Di],zi=bs.validate(Oi,xr);return zi.isValid?hi[Di]=Oi:(Ns=!0,hi[Di]=zi.sanitized),hi},{})}return Ns?_i:Wr}catch{return null}},gt.prototype._trim=function(Wr){return String.prototype.trim?Wr.trim():Wr.replace(/(^\s*)|(\s*$)/g,"")},gt}(),sr=T(35575),Qt=(T(54024),T(8314),T(63290)),qt=T(66950),hs=function(gt){yr||function(gt){if("WebkitTransition"in gt.style)yr="webkitTransitionEnd",jr="webkitAnimationEnd";else{if(!("transition"in gt.style))throw new Error("Your browser is not supported!");yr="transitionend",jr="animationend"}}(gt)},Is=function(gt,Wr){return void 0===Wr&&(Wr=gt+"-active"),function(xr){hs(xr);var bs=!1,Ns=function(_i){bs||(bs=!0,xr.removeEventListener(yr,Ns),xr.removeEventListener(jr,Ns),xr.classList.remove(gt),xr.classList.remove(Wr))};xr.classList.add(gt),xr.addEventListener(yr,Ns),xr.addEventListener(jr,Ns),requestAnimationFrame(function(){xr.classList.add(Wr)})}},Yr=function(gt,Wr){return void 0===Wr&&(Wr=gt+"-active"),function(xr,bs){hs(xr);var Ns=!1,_i=function(gi){Ns||(Ns=!0,xr.removeEventListener(yr,_i),xr.removeEventListener(jr,_i),bs())};xr.classList.add(gt),xr.addEventListener(yr,_i),xr.addEventListener(jr,_i),requestAnimationFrame(function(){xr.classList.add(Wr)})}};Qt.Z.getLogger("esri.widgets.support.widgetUtils");function Zi(gt){const Wr=sr.Z.acquire();for(let bs=0;bs<arguments.length;bs++){const Ns=arguments[bs],_i=typeof Ns;if("string"===_i)Wr.push(Ns);else if(Array.isArray(Ns))Wr.push.apply(Wr,Ns);else if("object"===_i)for(const gi in Ns)Ns[gi]&&Wr.push(gi)}const xr=Wr.join(" ");return sr.Z.release(Wr),xr}function as(gt){const Wr=gt?.closest("[dir]");return null!==Wr&&Wr instanceof HTMLElement&&"rtl"===Wr.dir||"rtl"===document.dir}function zs(gt){this[gt.getAttribute("data-node-ref")]=null}function As(gt){this[gt.getAttribute("data-node-ref")]=gt}function Ys(gt,Wr){return("enter"===gt?Is:Yr)(Wr)}(()=>{const gt=new Map;new ResizeObserver(xr=>{(0,qt.Uy)();for(const bs of xr)gt.get(bs.target)(bs)})})();const Nr=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((gt,Wr)=>(gt[Wr]=[],gt),{}),Ai=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ds=new Tt({whiteList:Nr,onTagAttr:(gt,Wr,xr)=>{const bs=`${Wr}="${xr}"`;if(Ai.includes(Wr))return bs},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ci(gt){return"Enter"===gt||" "===gt}}}]);